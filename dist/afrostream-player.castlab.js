/*! afrostream-player - v1.1.8 - 2016-02-05
* Copyright (c) 2016 benjipott; Licensed Apache-2.0 */
// HTML5 Shiv. Must be in <head> to support older browsers.
document.createElement('video');
document.createElement('audio');
document.createElement('track');

/**
 * Doubles as the main function for users to create a player instance and also
 * the main library object.
 *
 * **ALIASES** videojs, _V_ (deprecated)
 *
 * The `vjs` function can be used to initialize or retrieve a player.
 *
 *     var myPlayer = vjs('my_video_id');
 *
 * @param  {String|Element} id      Video element or video element ID
 * @param  {Object=} options        Optional options object for config/settings
 * @param  {Function=} ready        Optional ready callback
 * @return {vjs.Player}             A player instance
 * @namespace
 */
var vjs = function(id, options, ready){
  var tag; // Element of ID

  // Allow for element or ID to be passed in
  // String ID
  if (typeof id === 'string') {

    // Adjust for jQuery ID syntax
    if (id.indexOf('#') === 0) {
      id = id.slice(1);
    }

    // If a player instance has already been created for this ID return it.
    if (vjs.players[id]) {

      // If options or ready funtion are passed, warn
      if (options) {
        vjs.log.warn ('Player "' + id + '" is already initialised. Options will not be applied.');
      }

      if (ready) {
        vjs.players[id].ready(ready);
      }

      return vjs.players[id];

    // Otherwise get element for ID
    } else {
      tag = vjs.el(id);
    }

  // ID is a media element
  } else {
    tag = id;
  }

  // Check for a useable element
  if (!tag || !tag.nodeName) { // re: nodeName, could be a box div also
    throw new TypeError('The element or ID supplied is not valid. (videojs)'); // Returns
  }

  // Element may have a player attr referring to an already created player instance.
  // If not, set up a new player and return the instance.
  return tag['player'] || new vjs.Player(tag, options, ready);
};

// Extended name, also available externally, window.videojs
var videojs = window['videojs'] = vjs;

// CDN Version. Used to target right flash swf.
vjs.CDN_VERSION = '4.12';
vjs.ACCESS_PROTOCOL = ('https:' == document.location.protocol ? 'https://' : 'http://');

/**
* Full player version
* @type {string}
*/
vjs['VERSION'] = '4.12.15';

/**
 * Global Player instance options, surfaced from vjs.Player.prototype.options_
 * vjs.options = vjs.Player.prototype.options_
 * All options should use string keys so they avoid
 * renaming by closure compiler
 * @type {Object}
 */
vjs.options = {
  // Default order of fallback technology
  'techOrder': ['html5','flash'],
  // techOrder: ['flash','html5'],

  'html5': {},
  'flash': {},

  // Default of web browser is 300x150. Should rely on source width/height.
  'width': 300,
  'height': 150,
  // defaultVolume: 0.85,
  'defaultVolume': 0.00, // The freakin seaguls are driving me crazy!

  // default playback rates
  'playbackRates': [],
  // Add playback rate selection by adding rates
  // 'playbackRates': [0.5, 1, 1.5, 2],

  // default inactivity timeout
  'inactivityTimeout': 2000,

  // Included control sets
  'children': {
    'mediaLoader': {},
    'posterImage': {},
    'loadingSpinner': {},
    'textTrackDisplay': {},
    'bigPlayButton': {},
    'controlBar': {},
    'errorDisplay': {},
    'textTrackSettings': {}
  },

  'language': document.getElementsByTagName('html')[0].getAttribute('lang') || navigator.languages && navigator.languages[0] || navigator.userLanguage || navigator.language || 'en',

  // locales and their language translations
  'languages': {},

  // Default message to show when a video cannot be played.
  'notSupportedMessage': 'No compatible source was found for this video.'
};

// Set CDN Version of swf
// The added (+) blocks the replace from changing this 4.12 string
if (vjs.CDN_VERSION !== 'GENERATED'+'_CDN_VSN') {
  videojs.options['flash']['swf'] = vjs.ACCESS_PROTOCOL + 'vjs.zencdn.net/'+vjs.CDN_VERSION+'/video-js.swf';
}

/**
 * Utility function for adding languages to the default options. Useful for
 * amending multiple language support at runtime.
 *
 * Example: vjs.addLanguage('es', {'Hello':'Hola'});
 *
 * @param  {String} code The language code or dictionary property
 * @param  {Object} data The data values to be translated
 * @return {Object} The resulting global languages dictionary object
 */
vjs.addLanguage = function(code, data){
  if(vjs.options['languages'][code] !== undefined) {
    vjs.options['languages'][code] = vjs.util.mergeOptions(vjs.options['languages'][code], data);
  } else {
    vjs.options['languages'][code] = data;
  }
  return vjs.options['languages'];
};

/**
 * Global player list
 * @type {Object}
 */
vjs.players = {};

/*!
 * Custom Universal Module Definition (UMD)
 *
 * Video.js will never be a non-browser lib so we can simplify UMD a bunch and
 * still support requirejs and browserify. This also needs to be closure
 * compiler compatible, so string keys are used.
 */
if (typeof define === 'function' && define['amd']) {
  define('videojs', [], function(){ return videojs; });

// checking that module is an object too because of umdjs/umd#35
} else if (typeof exports === 'object' && typeof module === 'object') {
  module['exports'] = videojs;
}
/**
 * Core Object/Class for objects that use inheritance + constructors
 *
 * To create a class that can be subclassed itself, extend the CoreObject class.
 *
 *     var Animal = CoreObject.extend();
 *     var Horse = Animal.extend();
 *
 * The constructor can be defined through the init property of an object argument.
 *
 *     var Animal = CoreObject.extend({
 *       init: function(name, sound){
 *         this.name = name;
 *       }
 *     });
 *
 * Other methods and properties can be added the same way, or directly to the
 * prototype.
 *
 *    var Animal = CoreObject.extend({
 *       init: function(name){
 *         this.name = name;
 *       },
 *       getName: function(){
 *         return this.name;
 *       },
 *       sound: '...'
 *    });
 *
 *    Animal.prototype.makeSound = function(){
 *      alert(this.sound);
 *    };
 *
 * To create an instance of a class, use the create method.
 *
 *    var fluffy = Animal.create('Fluffy');
 *    fluffy.getName(); // -> Fluffy
 *
 * Methods and properties can be overridden in subclasses.
 *
 *     var Horse = Animal.extend({
 *       sound: 'Neighhhhh!'
 *     });
 *
 *     var horsey = Horse.create('Horsey');
 *     horsey.getName(); // -> Horsey
 *     horsey.makeSound(); // -> Alert: Neighhhhh!
 *
 * @class
 * @constructor
 */
vjs.CoreObject = vjs['CoreObject'] = function(){};
// Manually exporting vjs['CoreObject'] here for Closure Compiler
// because of the use of the extend/create class methods
// If we didn't do this, those functions would get flattened to something like
// `a = ...` and `this.prototype` would refer to the global object instead of
// CoreObject

/**
 * Create a new object that inherits from this Object
 *
 *     var Animal = CoreObject.extend();
 *     var Horse = Animal.extend();
 *
 * @param {Object} props Functions and properties to be applied to the
 *                       new object's prototype
 * @return {vjs.CoreObject} An object that inherits from CoreObject
 * @this {*}
 */
vjs.CoreObject.extend = function(props){
  var init, subObj;

  props = props || {};
  // Set up the constructor using the supplied init method
  // or using the init of the parent object
  // Make sure to check the unobfuscated version for external libs
  init = props['init'] || props.init || this.prototype['init'] || this.prototype.init || function(){};
  // In Resig's simple class inheritance (previously used) the constructor
  //  is a function that calls `this.init.apply(arguments)`
  // However that would prevent us from using `ParentObject.call(this);`
  //  in a Child constructor because the `this` in `this.init`
  //  would still refer to the Child and cause an infinite loop.
  // We would instead have to do
  //    `ParentObject.prototype.init.apply(this, arguments);`
  //  Bleh. We're not creating a _super() function, so it's good to keep
  //  the parent constructor reference simple.
  subObj = function(){
    init.apply(this, arguments);
  };

  // Inherit from this object's prototype
  subObj.prototype = vjs.obj.create(this.prototype);
  // Reset the constructor property for subObj otherwise
  // instances of subObj would have the constructor of the parent Object
  subObj.prototype.constructor = subObj;

  // Make the class extendable
  subObj.extend = vjs.CoreObject.extend;
  // Make a function for creating instances
  subObj.create = vjs.CoreObject.create;

  // Extend subObj's prototype with functions and other properties from props
  for (var name in props) {
    if (props.hasOwnProperty(name)) {
      subObj.prototype[name] = props[name];
    }
  }

  return subObj;
};

/**
 * Create a new instance of this Object class
 *
 *     var myAnimal = Animal.create();
 *
 * @return {vjs.CoreObject} An instance of a CoreObject subclass
 * @this {*}
 */
vjs.CoreObject.create = function(){
  // Create a new object that inherits from this object's prototype
  var inst = vjs.obj.create(this.prototype);

  // Apply this constructor function to the new object
  this.apply(inst, arguments);

  // Return the new object
  return inst;
};
/**
 * @fileoverview Event System (John Resig - Secrets of a JS Ninja http://jsninja.com/)
 * (Original book version wasn't completely usable, so fixed some things and made Closure Compiler compatible)
 * This should work very similarly to jQuery's events, however it's based off the book version which isn't as
 * robust as jquery's, so there's probably some differences.
 */

/**
 * Add an event listener to element
 * It stores the handler function in a separate cache object
 * and adds a generic handler to the element's event,
 * along with a unique id (guid) to the element.
 * @param  {Element|Object}   elem Element or object to bind listeners to
 * @param  {String|Array}   type Type of event to bind to.
 * @param  {Function} fn   Event listener.
 * @private
 */
vjs.on = function(elem, type, fn){
  if (vjs.obj.isArray(type)) {
    return _handleMultipleEvents(vjs.on, elem, type, fn);
  }

  var data = vjs.getData(elem);

  // We need a place to store all our handler data
  if (!data.handlers) data.handlers = {};

  if (!data.handlers[type]) data.handlers[type] = [];

  if (!fn.guid) fn.guid = vjs.guid++;

  data.handlers[type].push(fn);

  if (!data.dispatcher) {
    data.disabled = false;

    data.dispatcher = function (event){

      if (data.disabled) return;
      event = vjs.fixEvent(event);

      var handlers = data.handlers[event.type];

      if (handlers) {
        // Copy handlers so if handlers are added/removed during the process it doesn't throw everything off.
        var handlersCopy = handlers.slice(0);

        for (var m = 0, n = handlersCopy.length; m < n; m++) {
          if (event.isImmediatePropagationStopped()) {
            break;
          } else {
            handlersCopy[m].call(elem, event);
          }
        }
      }
    };
  }

  if (data.handlers[type].length == 1) {
    if (elem.addEventListener) {
      elem.addEventListener(type, data.dispatcher, false);
    } else if (elem.attachEvent) {
      elem.attachEvent('on' + type, data.dispatcher);
    }
  }
};

/**
 * Removes event listeners from an element
 * @param  {Element|Object}   elem Object to remove listeners from
 * @param  {String|Array=}   type Type of listener to remove. Don't include to remove all events from element.
 * @param  {Function} fn   Specific listener to remove. Don't include to remove listeners for an event type.
 * @private
 */
vjs.off = function(elem, type, fn) {
  // Don't want to add a cache object through getData if not needed
  if (!vjs.hasData(elem)) return;

  var data = vjs.getData(elem);

  // If no events exist, nothing to unbind
  if (!data.handlers) { return; }

  if (vjs.obj.isArray(type)) {
    return _handleMultipleEvents(vjs.off, elem, type, fn);
  }

  // Utility function
  var removeType = function(t){
     data.handlers[t] = [];
     vjs.cleanUpEvents(elem,t);
  };

  // Are we removing all bound events?
  if (!type) {
    for (var t in data.handlers) removeType(t);
    return;
  }

  var handlers = data.handlers[type];

  // If no handlers exist, nothing to unbind
  if (!handlers) return;

  // If no listener was provided, remove all listeners for type
  if (!fn) {
    removeType(type);
    return;
  }

  // We're only removing a single handler
  if (fn.guid) {
    for (var n = 0; n < handlers.length; n++) {
      if (handlers[n].guid === fn.guid) {
        handlers.splice(n--, 1);
      }
    }
  }

  vjs.cleanUpEvents(elem, type);
};

/**
 * Clean up the listener cache and dispatchers
 * @param  {Element|Object} elem Element to clean up
 * @param  {String} type Type of event to clean up
 * @private
 */
vjs.cleanUpEvents = function(elem, type) {
  var data = vjs.getData(elem);

  // Remove the events of a particular type if there are none left
  if (data.handlers[type].length === 0) {
    delete data.handlers[type];
    // data.handlers[type] = null;
    // Setting to null was causing an error with data.handlers

    // Remove the meta-handler from the element
    if (elem.removeEventListener) {
      elem.removeEventListener(type, data.dispatcher, false);
    } else if (elem.detachEvent) {
      elem.detachEvent('on' + type, data.dispatcher);
    }
  }

  // Remove the events object if there are no types left
  if (vjs.isEmpty(data.handlers)) {
    delete data.handlers;
    delete data.dispatcher;
    delete data.disabled;

    // data.handlers = null;
    // data.dispatcher = null;
    // data.disabled = null;
  }

  // Finally remove the expando if there is no data left
  if (vjs.isEmpty(data)) {
    vjs.removeData(elem);
  }
};

/**
 * Fix a native event to have standard property values
 * @param  {Object} event Event object to fix
 * @return {Object}
 * @private
 */
vjs.fixEvent = function(event) {

  function returnTrue() { return true; }
  function returnFalse() { return false; }

  // Test if fixing up is needed
  // Used to check if !event.stopPropagation instead of isPropagationStopped
  // But native events return true for stopPropagation, but don't have
  // other expected methods like isPropagationStopped. Seems to be a problem
  // with the Javascript Ninja code. So we're just overriding all events now.
  if (!event || !event.isPropagationStopped) {
    var old = event || window.event;

    event = {};
    // Clone the old object so that we can modify the values event = {};
    // IE8 Doesn't like when you mess with native event properties
    // Firefox returns false for event.hasOwnProperty('type') and other props
    //  which makes copying more difficult.
    // TODO: Probably best to create a whitelist of event props
    for (var key in old) {
      // Safari 6.0.3 warns you if you try to copy deprecated layerX/Y
      // Chrome warns you if you try to copy deprecated keyboardEvent.keyLocation
      if (key !== 'layerX' && key !== 'layerY' && key !== 'keyLocation') {
        // Chrome 32+ warns if you try to copy deprecated returnValue, but
        // we still want to if preventDefault isn't supported (IE8).
        if (!(key == 'returnValue' && old.preventDefault)) {
          event[key] = old[key];
        }
      }
    }

    // The event occurred on this element
    if (!event.target) {
      event.target = event.srcElement || document;
    }

    // Handle which other element the event is related to
    event.relatedTarget = event.fromElement === event.target ?
      event.toElement :
      event.fromElement;

    // Stop the default browser action
    event.preventDefault = function () {
      if (old.preventDefault) {
        old.preventDefault();
      }
      event.returnValue = false;
      event.isDefaultPrevented = returnTrue;
      event.defaultPrevented = true;
    };

    event.isDefaultPrevented = returnFalse;
    event.defaultPrevented = false;

    // Stop the event from bubbling
    event.stopPropagation = function () {
      if (old.stopPropagation) {
        old.stopPropagation();
      }
      event.cancelBubble = true;
      event.isPropagationStopped = returnTrue;
    };

    event.isPropagationStopped = returnFalse;

    // Stop the event from bubbling and executing other handlers
    event.stopImmediatePropagation = function () {
      if (old.stopImmediatePropagation) {
        old.stopImmediatePropagation();
      }
      event.isImmediatePropagationStopped = returnTrue;
      event.stopPropagation();
    };

    event.isImmediatePropagationStopped = returnFalse;

    // Handle mouse position
    if (event.clientX != null) {
      var doc = document.documentElement, body = document.body;

      event.pageX = event.clientX +
        (doc && doc.scrollLeft || body && body.scrollLeft || 0) -
        (doc && doc.clientLeft || body && body.clientLeft || 0);
      event.pageY = event.clientY +
        (doc && doc.scrollTop || body && body.scrollTop || 0) -
        (doc && doc.clientTop || body && body.clientTop || 0);
    }

    // Handle key presses
    event.which = event.charCode || event.keyCode;

    // Fix button for mouse clicks:
    // 0 == left; 1 == middle; 2 == right
    if (event.button != null) {
      event.button = (event.button & 1 ? 0 :
        (event.button & 4 ? 1 :
          (event.button & 2 ? 2 : 0)));
    }
  }

  // Returns fixed-up instance
  return event;
};

/**
 * Trigger an event for an element
 * @param  {Element|Object}      elem  Element to trigger an event on
 * @param  {Event|Object|String} event A string (the type) or an event object with a type attribute
 * @private
 */
vjs.trigger = function(elem, event) {
  // Fetches element data and a reference to the parent (for bubbling).
  // Don't want to add a data object to cache for every parent,
  // so checking hasData first.
  var elemData = (vjs.hasData(elem)) ? vjs.getData(elem) : {};
  var parent = elem.parentNode || elem.ownerDocument;
      // type = event.type || event,
      // handler;

  // If an event name was passed as a string, creates an event out of it
  if (typeof event === 'string') {
    event = { type:event, target:elem };
  }
  // Normalizes the event properties.
  event = vjs.fixEvent(event);

  // If the passed element has a dispatcher, executes the established handlers.
  if (elemData.dispatcher) {
    elemData.dispatcher.call(elem, event);
  }

  // Unless explicitly stopped or the event does not bubble (e.g. media events)
    // recursively calls this function to bubble the event up the DOM.
    if (parent && !event.isPropagationStopped() && event.bubbles !== false) {
    vjs.trigger(parent, event);

  // If at the top of the DOM, triggers the default action unless disabled.
  } else if (!parent && !event.defaultPrevented) {
    var targetData = vjs.getData(event.target);

    // Checks if the target has a default action for this event.
    if (event.target[event.type]) {
      // Temporarily disables event dispatching on the target as we have already executed the handler.
      targetData.disabled = true;
      // Executes the default action.
      if (typeof event.target[event.type] === 'function') {
        event.target[event.type]();
      }
      // Re-enables event dispatching.
      targetData.disabled = false;
    }
  }

  // Inform the triggerer if the default was prevented by returning false
  return !event.defaultPrevented;
  /* Original version of js ninja events wasn't complete.
   * We've since updated to the latest version, but keeping this around
   * for now just in case.
   */
  // // Added in addition to book. Book code was broke.
  // event = typeof event === 'object' ?
  //   event[vjs.expando] ?
  //     event :
  //     new vjs.Event(type, event) :
  //   new vjs.Event(type);

  // event.type = type;
  // if (handler) {
  //   handler.call(elem, event);
  // }

  // // Clean up the event in case it is being reused
  // event.result = undefined;
  // event.target = elem;
};

/**
 * Trigger a listener only once for an event
 * @param  {Element|Object}   elem Element or object to
 * @param  {String|Array}   type
 * @param  {Function} fn
 * @private
 */
vjs.one = function(elem, type, fn) {
  if (vjs.obj.isArray(type)) {
    return _handleMultipleEvents(vjs.one, elem, type, fn);
  }
  var func = function(){
    vjs.off(elem, type, func);
    fn.apply(this, arguments);
  };
  // copy the guid to the new function so it can removed using the original function's ID
  func.guid = fn.guid = fn.guid || vjs.guid++;
  vjs.on(elem, type, func);
};

/**
 * Loops through an array of event types and calls the requested method for each type.
 * @param  {Function} fn   The event method we want to use.
 * @param  {Element|Object} elem Element or object to bind listeners to
 * @param  {String}   type Type of event to bind to.
 * @param  {Function} callback   Event listener.
 * @private
 */
function _handleMultipleEvents(fn, elem, type, callback) {
  vjs.arr.forEach(type, function(type) {
    fn(elem, type, callback); //Call the event method for each one of the types
  });
}
var hasOwnProp = Object.prototype.hasOwnProperty;

/**
 * Creates an element and applies properties.
 * @param  {String=} tagName    Name of tag to be created.
 * @param  {Object=} properties Element properties to be applied.
 * @return {Element}
 * @private
 */
vjs.createEl = function(tagName, properties){
  var el;

  tagName = tagName || 'div';
  properties = properties || {};

  el = document.createElement(tagName);

  vjs.obj.each(properties, function(propName, val){
    // Not remembering why we were checking for dash
    // but using setAttribute means you have to use getAttribute

    // The check for dash checks for the aria-* attributes, like aria-label, aria-valuemin.
    // The additional check for "role" is because the default method for adding attributes does not
    // add the attribute "role". My guess is because it's not a valid attribute in some namespaces, although
    // browsers handle the attribute just fine. The W3C allows for aria-* attributes to be used in pre-HTML5 docs.
    // http://www.w3.org/TR/wai-aria-primer/#ariahtml. Using setAttribute gets around this problem.
    if (propName.indexOf('aria-') !== -1 || propName == 'role') {
     el.setAttribute(propName, val);
    } else {
     el[propName] = val;
    }
  });

  return el;
};

/**
 * Uppercase the first letter of a string
 * @param  {String} string String to be uppercased
 * @return {String}
 * @private
 */
vjs.capitalize = function(string){
  return string.charAt(0).toUpperCase() + string.slice(1);
};

/**
 * Object functions container
 * @type {Object}
 * @private
 */
vjs.obj = {};

/**
 * Object.create shim for prototypal inheritance
 *
 * https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create
 *
 * @function
 * @param  {Object}   obj Object to use as prototype
 * @private
 */
vjs.obj.create = Object.create || function(obj){
  //Create a new function called 'F' which is just an empty object.
  function F() {}

  //the prototype of the 'F' function should point to the
  //parameter of the anonymous function.
  F.prototype = obj;

  //create a new constructor function based off of the 'F' function.
  return new F();
};

/**
 * Loop through each property in an object and call a function
 * whose arguments are (key,value)
 * @param  {Object}   obj Object of properties
 * @param  {Function} fn  Function to be called on each property.
 * @this {*}
 * @private
 */
vjs.obj.each = function(obj, fn, context){
  for (var key in obj) {
    if (hasOwnProp.call(obj, key)) {
      fn.call(context || this, key, obj[key]);
    }
  }
};

/**
 * Merge two objects together and return the original.
 * @param  {Object} obj1
 * @param  {Object} obj2
 * @return {Object}
 * @private
 */
vjs.obj.merge = function(obj1, obj2){
  if (!obj2) { return obj1; }
  for (var key in obj2){
    if (hasOwnProp.call(obj2, key)) {
      obj1[key] = obj2[key];
    }
  }
  return obj1;
};

/**
 * Merge two objects, and merge any properties that are objects
 * instead of just overwriting one. Uses to merge options hashes
 * where deeper default settings are important.
 * @param  {Object} obj1 Object to override
 * @param  {Object} obj2 Overriding object
 * @return {Object}      New object. Obj1 and Obj2 will be untouched.
 * @private
 */
vjs.obj.deepMerge = function(obj1, obj2){
  var key, val1, val2;

  // make a copy of obj1 so we're not overwriting original values.
  // like prototype.options_ and all sub options objects
  obj1 = vjs.obj.copy(obj1);

  for (key in obj2){
    if (hasOwnProp.call(obj2, key)) {
      val1 = obj1[key];
      val2 = obj2[key];

      // Check if both properties are pure objects and do a deep merge if so
      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {
        obj1[key] = vjs.obj.deepMerge(val1, val2);
      } else {
        obj1[key] = obj2[key];
      }
    }
  }
  return obj1;
};

/**
 * Make a copy of the supplied object
 * @param  {Object} obj Object to copy
 * @return {Object}     Copy of object
 * @private
 */
vjs.obj.copy = function(obj){
  return vjs.obj.merge({}, obj);
};

/**
 * Check if an object is plain, and not a dom node or any object sub-instance
 * @param  {Object} obj Object to check
 * @return {Boolean}     True if plain, false otherwise
 * @private
 */
vjs.obj.isPlain = function(obj){
  return !!obj
    && typeof obj === 'object'
    && obj.toString() === '[object Object]'
    && obj.constructor === Object;
};

/**
 * Check if an object is Array
*  Since instanceof Array will not work on arrays created in another frame we need to use Array.isArray, but since IE8 does not support Array.isArray we need this shim
 * @param  {Object} obj Object to check
 * @return {Boolean}     True if plain, false otherwise
 * @private
 */
vjs.obj.isArray = Array.isArray || function(arr) {
  return Object.prototype.toString.call(arr) === '[object Array]';
};

/**
 * Check to see whether the input is NaN or not.
 * NaN is the only JavaScript construct that isn't equal to itself
 * @param {Number} num Number to check
 * @return {Boolean} True if NaN, false otherwise
 * @private
 */
vjs.isNaN = function(num) {
  return num !== num;
};

/**
 * Bind (a.k.a proxy or Context). A simple method for changing the context of a function
   It also stores a unique id on the function so it can be easily removed from events
 * @param  {*}   context The object to bind as scope
 * @param  {Function} fn      The function to be bound to a scope
 * @param  {Number=}   uid     An optional unique ID for the function to be set
 * @return {Function}
 * @private
 */
vjs.bind = function(context, fn, uid) {
  // Make sure the function has a unique ID
  if (!fn.guid) { fn.guid = vjs.guid++; }

  // Create the new function that changes the context
  var ret = function() {
    return fn.apply(context, arguments);
  };

  // Allow for the ability to individualize this function
  // Needed in the case where multiple objects might share the same prototype
  // IF both items add an event listener with the same function, then you try to remove just one
  // it will remove both because they both have the same guid.
  // when using this, you need to use the bind method when you remove the listener as well.
  // currently used in text tracks
  ret.guid = (uid) ? uid + '_' + fn.guid : fn.guid;

  return ret;
};

/**
 * Element Data Store. Allows for binding data to an element without putting it directly on the element.
 * Ex. Event listeners are stored here.
 * (also from jsninja.com, slightly modified and updated for closure compiler)
 * @type {Object}
 * @private
 */
vjs.cache = {};

/**
 * Unique ID for an element or function
 * @type {Number}
 * @private
 */
vjs.guid = 1;

/**
 * Unique attribute name to store an element's guid in
 * @type {String}
 * @constant
 * @private
 */
vjs.expando = 'vdata' + (new Date()).getTime();

/**
 * Returns the cache object where data for an element is stored
 * @param  {Element} el Element to store data for.
 * @return {Object}
 * @private
 */
vjs.getData = function(el){
  var id = el[vjs.expando];
  if (!id) {
    id = el[vjs.expando] = vjs.guid++;
  }
  if (!vjs.cache[id]) {
    vjs.cache[id] = {};
  }
  return vjs.cache[id];
};

/**
 * Returns the cache object where data for an element is stored
 * @param  {Element} el Element to store data for.
 * @return {Object}
 * @private
 */
vjs.hasData = function(el){
  var id = el[vjs.expando];
  return !(!id || vjs.isEmpty(vjs.cache[id]));
};

/**
 * Delete data for the element from the cache and the guid attr from getElementById
 * @param  {Element} el Remove data for an element
 * @private
 */
vjs.removeData = function(el){
  var id = el[vjs.expando];
  if (!id) { return; }
  // Remove all stored data
  // Changed to = null
  // http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/
  // vjs.cache[id] = null;
  delete vjs.cache[id];

  // Remove the expando property from the DOM node
  try {
    delete el[vjs.expando];
  } catch(e) {
    if (el.removeAttribute) {
      el.removeAttribute(vjs.expando);
    } else {
      // IE doesn't appear to support removeAttribute on the document element
      el[vjs.expando] = null;
    }
  }
};

/**
 * Check if an object is empty
 * @param  {Object}  obj The object to check for emptiness
 * @return {Boolean}
 * @private
 */
vjs.isEmpty = function(obj) {
  for (var prop in obj) {
    // Inlude null properties as empty.
    if (obj[prop] !== null) {
      return false;
    }
  }
  return true;
};

/**
 * Check if an element has a CSS class
 * @param {Element} element Element to check
 * @param {String} classToCheck Classname to check
 * @private
 */
vjs.hasClass = function(element, classToCheck){
  return ((' ' + element.className + ' ').indexOf(' ' + classToCheck + ' ') !== -1);
};


/**
 * Add a CSS class name to an element
 * @param {Element} element    Element to add class name to
 * @param {String} classToAdd Classname to add
 * @private
 */
vjs.addClass = function(element, classToAdd){
  if (!vjs.hasClass(element, classToAdd)) {
    element.className = element.className === '' ? classToAdd : element.className + ' ' + classToAdd;
  }
};

/**
 * Remove a CSS class name from an element
 * @param {Element} element    Element to remove from class name
 * @param {String} classToAdd Classname to remove
 * @private
 */
vjs.removeClass = function(element, classToRemove){
  var classNames, i;

  if (!vjs.hasClass(element, classToRemove)) {return;}

  classNames = element.className.split(' ');

  // no arr.indexOf in ie8, and we don't want to add a big shim
  for (i = classNames.length - 1; i >= 0; i--) {
    if (classNames[i] === classToRemove) {
      classNames.splice(i,1);
    }
  }

  element.className = classNames.join(' ');
};

/**
 * Element for testing browser HTML5 video capabilities
 * @type {Element}
 * @constant
 * @private
 */
vjs.TEST_VID = vjs.createEl('video');
(function() {
  var track = document.createElement('track');
  track.kind = 'captions';
  track.srclang = 'en';
  track.label = 'English';
  vjs.TEST_VID.appendChild(track);
})();

/**
 * Useragent for browser testing.
 * @type {String}
 * @constant
 * @private
 */
vjs.USER_AGENT = navigator.userAgent;

/**
 * Device is an iPhone
 * @type {Boolean}
 * @constant
 * @private
 */
vjs.IS_IPHONE = (/iPhone/i).test(vjs.USER_AGENT);
vjs.IS_IPAD = (/iPad/i).test(vjs.USER_AGENT);
vjs.IS_IPOD = (/iPod/i).test(vjs.USER_AGENT);
vjs.IS_IOS = vjs.IS_IPHONE || vjs.IS_IPAD || vjs.IS_IPOD;

vjs.IOS_VERSION = (function(){
  var match = vjs.USER_AGENT.match(/OS (\d+)_/i);
  if (match && match[1]) { return match[1]; }
})();

vjs.IS_ANDROID = (/Android/i).test(vjs.USER_AGENT);
vjs.ANDROID_VERSION = (function() {
  // This matches Android Major.Minor.Patch versions
  // ANDROID_VERSION is Major.Minor as a Number, if Minor isn't available, then only Major is returned
  var match = vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),
    major,
    minor;

  if (!match) {
    return null;
  }

  major = match[1] && parseFloat(match[1]);
  minor = match[2] && parseFloat(match[2]);

  if (major && minor) {
    return parseFloat(match[1] + '.' + match[2]);
  } else if (major) {
    return major;
  } else {
    return null;
  }
})();
// Old Android is defined as Version older than 2.3, and requiring a webkit version of the android browser
vjs.IS_OLD_ANDROID = vjs.IS_ANDROID && (/webkit/i).test(vjs.USER_AGENT) && vjs.ANDROID_VERSION < 2.3;

vjs.IS_FIREFOX = (/Firefox/i).test(vjs.USER_AGENT);
vjs.IS_CHROME = (/Chrome/i).test(vjs.USER_AGENT);
vjs.IS_IE8 = (/MSIE\s8\.0/).test(vjs.USER_AGENT);

vjs.TOUCH_ENABLED = !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch);
vjs.BACKGROUND_SIZE_SUPPORTED = 'backgroundSize' in vjs.TEST_VID.style;

/**
 * Apply attributes to an HTML element.
 * @param  {Element} el         Target element.
 * @param  {Object=} attributes Element attributes to be applied.
 * @private
 */
vjs.setElementAttributes = function(el, attributes){
  vjs.obj.each(attributes, function(attrName, attrValue) {
    if (attrValue === null || typeof attrValue === 'undefined' || attrValue === false) {
      el.removeAttribute(attrName);
    } else {
      el.setAttribute(attrName, (attrValue === true ? '' : attrValue));
    }
  });
};

/**
 * Get an element's attribute values, as defined on the HTML tag
 * Attributes are not the same as properties. They're defined on the tag
 * or with setAttribute (which shouldn't be used with HTML)
 * This will return true or false for boolean attributes.
 * @param  {Element} tag Element from which to get tag attributes
 * @return {Object}
 * @private
 */
vjs.getElementAttributes = function(tag){
  var obj, knownBooleans, attrs, attrName, attrVal;

  obj = {};

  // known boolean attributes
  // we can check for matching boolean properties, but older browsers
  // won't know about HTML5 boolean attributes that we still read from
  knownBooleans = ','+'autoplay,controls,loop,muted,default'+',';

  if (tag && tag.attributes && tag.attributes.length > 0) {
    attrs = tag.attributes;

    for (var i = attrs.length - 1; i >= 0; i--) {
      attrName = attrs[i].name;
      attrVal = attrs[i].value;

      // check for known booleans
      // the matching element property will return a value for typeof
      if (typeof tag[attrName] === 'boolean' || knownBooleans.indexOf(','+attrName+',') !== -1) {
        // the value of an included boolean attribute is typically an empty
        // string ('') which would equal false if we just check for a false value.
        // we also don't want support bad code like autoplay='false'
        attrVal = (attrVal !== null) ? true : false;
      }

      obj[attrName] = attrVal;
    }
  }

  return obj;
};

/**
 * Get the computed style value for an element
 * From http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/
 * @param  {Element} el        Element to get style value for
 * @param  {String} strCssRule Style name
 * @return {String}            Style value
 * @private
 */
vjs.getComputedDimension = function(el, strCssRule){
  var strValue = '';
  if(document.defaultView && document.defaultView.getComputedStyle){
    strValue = document.defaultView.getComputedStyle(el, '').getPropertyValue(strCssRule);

  } else if(el.currentStyle){
    // IE8 Width/Height support
    strValue = el['client'+strCssRule.substr(0,1).toUpperCase() + strCssRule.substr(1)] + 'px';
  }
  return strValue;
};

/**
 * Insert an element as the first child node of another
 * @param  {Element} child   Element to insert
 * @param  {[type]} parent Element to insert child into
 * @private
 */
vjs.insertFirst = function(child, parent){
  if (parent.firstChild) {
    parent.insertBefore(child, parent.firstChild);
  } else {
    parent.appendChild(child);
  }
};

/**
 * Object to hold browser support information
 * @type {Object}
 * @private
 */
vjs.browser = {};

/**
 * Shorthand for document.getElementById()
 * Also allows for CSS (jQuery) ID syntax. But nothing other than IDs.
 * @param  {String} id  Element ID
 * @return {Element}    Element with supplied ID
 * @private
 */
vjs.el = function(id){
  if (id.indexOf('#') === 0) {
    id = id.slice(1);
  }

  return document.getElementById(id);
};

/**
 * Format seconds as a time string, H:MM:SS or M:SS
 * Supplying a guide (in seconds) will force a number of leading zeros
 * to cover the length of the guide
 * @param  {Number} seconds Number of seconds to be turned into a string
 * @param  {Number} guide   Number (in seconds) to model the string after
 * @return {String}         Time formatted as H:MM:SS or M:SS
 * @private
 */
vjs.formatTime = function(seconds, guide) {
  // Default to using seconds as guide
  guide = guide || seconds;
  var s = Math.floor(seconds % 60),
      m = Math.floor(seconds / 60 % 60),
      h = Math.floor(seconds / 3600),
      gm = Math.floor(guide / 60 % 60),
      gh = Math.floor(guide / 3600);

  // handle invalid times
  if (isNaN(seconds) || seconds === Infinity) {
    // '-' is false for all relational operators (e.g. <, >=) so this setting
    // will add the minimum number of fields specified by the guide
    h = m = s = '-';
  }

  // Check if we need to show hours
  h = (h > 0 || gh > 0) ? h + ':' : '';

  // If hours are showing, we may need to add a leading zero.
  // Always show at least one digit of minutes.
  m = (((h || gm >= 10) && m < 10) ? '0' + m : m) + ':';

  // Check if leading zero is need for seconds
  s = (s < 10) ? '0' + s : s;

  return h + m + s;
};

// Attempt to block the ability to select text while dragging controls
vjs.blockTextSelection = function(){
  document.body.focus();
  document.onselectstart = function () { return false; };
};
// Turn off text selection blocking
vjs.unblockTextSelection = function(){ document.onselectstart = function () { return true; }; };

/**
 * Trim whitespace from the ends of a string.
 * @param  {String} string String to trim
 * @return {String}        Trimmed string
 * @private
 */
vjs.trim = function(str){
  return (str+'').replace(/^\s+|\s+$/g, '');
};

/**
 * Should round off a number to a decimal place
 * @param  {Number} num Number to round
 * @param  {Number} dec Number of decimal places to round to
 * @return {Number}     Rounded number
 * @private
 */
vjs.round = function(num, dec) {
  if (!dec) { dec = 0; }
  return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
};

/**
 * Should create a fake TimeRange object
 * Mimics an HTML5 time range instance, which has functions that
 * return the start and end times for a range
 * TimeRanges are returned by the buffered() method
 * @param  {Number} start Start time in seconds
 * @param  {Number} end   End time in seconds
 * @return {Object}       Fake TimeRange object
 * @private
 */
vjs.createTimeRange = function(start, end){
  if (start === undefined && end === undefined) {
    return {
      length: 0,
      start: function() {
        throw new Error('This TimeRanges object is empty');
      },
      end: function() {
        throw new Error('This TimeRanges object is empty');
      }
    };
  }

  return {
    length: 1,
    start: function() { return start; },
    end: function() { return end; }
  };
};

/**
 * Add to local storage (may removable)
 * @private
 */
vjs.setLocalStorage = function(key, value){
  try {
    // IE was throwing errors referencing the var anywhere without this
    var localStorage = window.localStorage || false;
    if (!localStorage) { return; }
    localStorage[key] = value;
  } catch(e) {
    if (e.code == 22 || e.code == 1014) { // Webkit == 22 / Firefox == 1014
      vjs.log('LocalStorage Full (VideoJS)', e);
    } else {
      if (e.code == 18) {
        vjs.log('LocalStorage not allowed (VideoJS)', e);
      } else {
        vjs.log('LocalStorage Error (VideoJS)', e);
      }
    }
  }
};

/**
 * Get absolute version of relative URL. Used to tell flash correct URL.
 * http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue
 * @param  {String} url URL to make absolute
 * @return {String}     Absolute URL
 * @private
 */
vjs.getAbsoluteURL = function(url){

  // Check if absolute URL
  if (!url.match(/^https?:\/\//)) {
    // Convert to absolute URL. Flash hosted off-site needs an absolute URL.
    url = vjs.createEl('div', {
      innerHTML: '<a href="'+url+'">x</a>'
    }).firstChild.href;
  }

  return url;
};


/**
 * Resolve and parse the elements of a URL
 * @param  {String} url The url to parse
 * @return {Object}     An object of url details
 */
vjs.parseUrl = function(url) {
  var div, a, addToBody, props, details;

  props = ['protocol', 'hostname', 'port', 'pathname', 'search', 'hash', 'host'];

  // add the url to an anchor and let the browser parse the URL
  a = vjs.createEl('a', { href: url });

  // IE8 (and 9?) Fix
  // ie8 doesn't parse the URL correctly until the anchor is actually
  // added to the body, and an innerHTML is needed to trigger the parsing
  addToBody = (a.host === '' && a.protocol !== 'file:');
  if (addToBody) {
    div = vjs.createEl('div');
    div.innerHTML = '<a href="'+url+'"></a>';
    a = div.firstChild;
    // prevent the div from affecting layout
    div.setAttribute('style', 'display:none; position:absolute;');
    document.body.appendChild(div);
  }

  // Copy the specific URL properties to a new object
  // This is also needed for IE8 because the anchor loses its
  // properties when it's removed from the dom
  details = {};
  for (var i = 0; i < props.length; i++) {
    details[props[i]] = a[props[i]];
  }

  // IE9 adds the port to the host property unlike everyone else. If
  // a port identifier is added for standard ports, strip it.
  if (details.protocol === 'http:') {
    details.host = details.host.replace(/:80$/, '');
  }
  if (details.protocol === 'https:') {
    details.host = details.host.replace(/:443$/, '');
  }

  if (addToBody) {
    document.body.removeChild(div);
  }

  return details;
};

/**
 * Log messages to the console and history based on the type of message
 *
 * @param  {String} type The type of message, or `null` for `log`
 * @param  {[type]} args The args to be passed to the log
 * @private
 */
function _logType(type, args){
  var argsArray, noop, console;

  // convert args to an array to get array functions
  argsArray = Array.prototype.slice.call(args);
  // if there's no console then don't try to output messages
  // they will still be stored in vjs.log.history
  // Was setting these once outside of this function, but containing them
  // in the function makes it easier to test cases where console doesn't exist
  noop = function(){};
  console = window['console'] || {
    'log': noop,
    'warn': noop,
    'error': noop
  };

  if (type) {
    // add the type to the front of the message
    argsArray.unshift(type.toUpperCase()+':');
  } else {
    // default to log with no prefix
    type = 'log';
  }

  // add to history
  vjs.log.history.push(argsArray);

  // add console prefix after adding to history
  argsArray.unshift('VIDEOJS:');

  // call appropriate log function
  if (console[type].apply) {
    console[type].apply(console, argsArray);
  } else {
    // ie8 doesn't allow error.apply, but it will just join() the array anyway
    console[type](argsArray.join(' '));
  }
}

/**
 * Log plain debug messages
 */
vjs.log = function(){
  _logType(null, arguments);
};

/**
 * Keep a history of log messages
 * @type {Array}
 */
vjs.log.history = [];

/**
 * Log error messages
 */
vjs.log.error = function(){
  _logType('error', arguments);
};

/**
 * Log warning messages
 */
vjs.log.warn = function(){
  _logType('warn', arguments);
};

// Offset Left
// getBoundingClientRect technique from John Resig http://ejohn.org/blog/getboundingclientrect-is-awesome/
vjs.findPosition = function(el) {
  var box, docEl, body, clientLeft, scrollLeft, left, clientTop, scrollTop, top;

  if (el.getBoundingClientRect && el.parentNode) {
    box = el.getBoundingClientRect();
  }

  if (!box) {
    return {
      left: 0,
      top: 0
    };
  }

  docEl = document.documentElement;
  body = document.body;

  clientLeft = docEl.clientLeft || body.clientLeft || 0;
  scrollLeft = window.pageXOffset || body.scrollLeft;
  left = box.left + scrollLeft - clientLeft;

  clientTop = docEl.clientTop || body.clientTop || 0;
  scrollTop = window.pageYOffset || body.scrollTop;
  top = box.top + scrollTop - clientTop;

  // Android sometimes returns slightly off decimal values, so need to round
  return {
    left: vjs.round(left),
    top: vjs.round(top)
  };
};

/**
 * Array functions container
 * @type {Object}
 * @private
 */
vjs.arr = {};

/*
 * Loops through an array and runs a function for each item inside it.
 * @param  {Array}    array       The array
 * @param  {Function} callback    The function to be run for each item
 * @param  {*}        thisArg     The `this` binding of callback
 * @returns {Array}               The array
 * @private
 */
vjs.arr.forEach = function(array, callback, thisArg) {
  if (vjs.obj.isArray(array) && callback instanceof Function) {
    for (var i = 0, len = array.length; i < len; ++i) {
      callback.call(thisArg || vjs, array[i], i, array);
    }
  }

  return array;
};
/**
 * Simple http request for retrieving external files (e.g. text tracks)
 *
 * ##### Example
 *
 *     // using url string
 *     videojs.xhr('http://example.com/myfile.vtt', function(error, response, responseBody){});
 *
 *     // or options block
 *     videojs.xhr({
 *       uri: 'http://example.com/myfile.vtt',
 *       method: 'GET',
 *       responseType: 'text'
 *     }, function(error, response, responseBody){
 *       if (error) {
 *         // log the error
 *       } else {
 *         // successful, do something with the response
 *       }
 *     });
 *
 *
 * API is modeled after the Raynos/xhr, which we hope to use after
 * getting browserify implemented.
 * https://github.com/Raynos/xhr/blob/master/index.js
 *
 * @param  {Object|String}  options   Options block or URL string
 * @param  {Function}       callback  The callback function
 * @returns {Object}                  The request
 */
vjs.xhr = function(options, callback){
  var XHR, request, urlInfo, winLoc, fileUrl, crossOrigin, abortTimeout, successHandler, errorHandler;

  // If options is a string it's the url
  if (typeof options === 'string') {
    options = {
      uri: options
    };
  }

  // Merge with default options
  videojs.util.mergeOptions({
    method: 'GET',
    timeout: 45 * 1000
  }, options);

  callback = callback || function(){};

  successHandler = function(){
    window.clearTimeout(abortTimeout);
    callback(null, request, request.response || request.responseText);
  };

  errorHandler = function(err){
    window.clearTimeout(abortTimeout);

    if (!err || typeof err === 'string') {
      err = new Error(err);
    }

    callback(err, request);
  };

  XHR = window.XMLHttpRequest;

  if (typeof XHR === 'undefined') {
    // Shim XMLHttpRequest for older IEs
    XHR = function () {
      try { return new window.ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch (e) {}
      try { return new window.ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch (f) {}
      try { return new window.ActiveXObject('Msxml2.XMLHTTP'); } catch (g) {}
      throw new Error('This browser does not support XMLHttpRequest.');
    };
  }

  request = new XHR();
  // Store a reference to the url on the request instance
  request.uri = options.uri;

  urlInfo = vjs.parseUrl(options.uri);
  winLoc = window.location;
  // Check if url is for another domain/origin
  // IE8 doesn't know location.origin, so we won't rely on it here
  crossOrigin = (urlInfo.protocol + urlInfo.host) !== (winLoc.protocol + winLoc.host);

  // XDomainRequest -- Use for IE if XMLHTTPRequest2 isn't available
  // 'withCredentials' is only available in XMLHTTPRequest2
  // Also XDomainRequest has a lot of gotchas, so only use if cross domain
  if (crossOrigin && window.XDomainRequest && !('withCredentials' in request)) {
    request = new window.XDomainRequest();
    request.onload = successHandler;
    request.onerror = errorHandler;
    // These blank handlers need to be set to fix ie9
    // http://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/
    request.onprogress = function(){};
    request.ontimeout = function(){};

  // XMLHTTPRequest
  } else {
    fileUrl = (urlInfo.protocol == 'file:' || winLoc.protocol == 'file:');

    request.onreadystatechange = function() {
      if (request.readyState === 4) {
        if (request.timedout) {
          return errorHandler('timeout');
        }

        if (request.status === 200 || fileUrl && request.status === 0) {
          successHandler();
        } else {
          errorHandler();
        }
      }
    };

    if (options.timeout) {
      abortTimeout = window.setTimeout(function() {
        if (request.readyState !== 4) {
          request.timedout = true;
          request.abort();
        }
      }, options.timeout);
    }
  }

  // open the connection
  try {
    // Third arg is async, or ignored by XDomainRequest
    request.open(options.method || 'GET', options.uri, true);
  } catch(err) {
    return errorHandler(err);
  }

  // withCredentials only supported by XMLHttpRequest2
  if(options.withCredentials) {
    request.withCredentials = true;
  }

  if (options.responseType) {
    request.responseType = options.responseType;
  }

  // send the request
  try {
    request.send();
  } catch(err) {
    return errorHandler(err);
  }

  return request;
};
/**
 * Utility functions namespace
 * @namespace
 * @type {Object}
 */
vjs.util = {};

/**
 * Merge two options objects, recursively merging any plain object properties as
 * well.  Previously `deepMerge`
 *
 * @param  {Object} obj1 Object to override values in
 * @param  {Object} obj2 Overriding object
 * @return {Object}      New object -- obj1 and obj2 will be untouched
 */
vjs.util.mergeOptions = function(obj1, obj2){
  var key, val1, val2;

  // make a copy of obj1 so we're not overwriting original values.
  // like prototype.options_ and all sub options objects
  obj1 = vjs.obj.copy(obj1);

  for (key in obj2){
    if (obj2.hasOwnProperty(key)) {
      val1 = obj1[key];
      val2 = obj2[key];

      // Check if both properties are pure objects and do a deep merge if so
      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {
        obj1[key] = vjs.util.mergeOptions(val1, val2);
      } else {
        obj1[key] = obj2[key];
      }
    }
  }
  return obj1;
};vjs.EventEmitter = function() {
};

vjs.EventEmitter.prototype.allowedEvents_ = {
};

vjs.EventEmitter.prototype.on = function(type, fn) {
  // Remove the addEventListener alias before calling vjs.on
  // so we don't get into an infinite type loop
  var ael = this.addEventListener;
  this.addEventListener = Function.prototype;
  vjs.on(this, type, fn);
  this.addEventListener = ael;
};
vjs.EventEmitter.prototype.addEventListener = vjs.EventEmitter.prototype.on;

vjs.EventEmitter.prototype.off = function(type, fn) {
  vjs.off(this, type, fn);
};
vjs.EventEmitter.prototype.removeEventListener = vjs.EventEmitter.prototype.off;

vjs.EventEmitter.prototype.one = function(type, fn) {
  vjs.one(this, type, fn);
};

vjs.EventEmitter.prototype.trigger = function(event) {
  var type = event.type || event;

  if (typeof event === 'string') {
    event = {
      type: type
    };
  }
  event = vjs.fixEvent(event);

  if (this.allowedEvents_[type] && this['on' + type]) {
    this['on' + type](event);
  }

  vjs.trigger(this, event);
};
// The standard DOM EventTarget.dispatchEvent() is aliased to trigger()
vjs.EventEmitter.prototype.dispatchEvent = vjs.EventEmitter.prototype.trigger;
/**
 * @fileoverview Player Component - Base class for all UI objects
 *
 */

/**
 * Base UI Component class
 *
 * Components are embeddable UI objects that are represented by both a
 * javascript object and an element in the DOM. They can be children of other
 * components, and can have many children themselves.
 *
 *     // adding a button to the player
 *     var button = player.addChild('button');
 *     button.el(); // -> button element
 *
 *     <div class="video-js">
 *       <div class="vjs-button">Button</div>
 *     </div>
 *
 * Components are also event emitters.
 *
 *     button.on('click', function(){
 *       console.log('Button Clicked!');
 *     });
 *
 *     button.trigger('customevent');
 *
 * @param {Object} player  Main Player
 * @param {Object=} options
 * @class
 * @constructor
 * @extends vjs.CoreObject
 */
vjs.Component = vjs.CoreObject.extend({
  /**
   * the constructor function for the class
   *
   * @constructor
   */
  init: function(player, options, ready){
    this.player_ = player;

    // Make a copy of prototype.options_ to protect against overriding global defaults
    this.options_ = vjs.obj.copy(this.options_);

    // Updated options with supplied options
    options = this.options(options);

    // Get ID from options or options element if one is supplied
    this.id_ = options['id'] || (options['el'] && options['el']['id']);

    // If there was no ID from the options, generate one
    if (!this.id_) {
      // Don't require the player ID function in the case of mock players
      this.id_ = ((player.id && player.id()) || 'no_player') + '_component_' + vjs.guid++;
    }

    this.name_ = options['name'] || null;

    // Create element if one wasn't provided in options
    this.el_ = options['el'] || this.createEl();

    this.children_ = [];
    this.childIndex_ = {};
    this.childNameIndex_ = {};

    // Add any child components in options
    this.initChildren();

    this.ready(ready);
    // Don't want to trigger ready here or it will before init is actually
    // finished for all children that run this constructor

    if (options.reportTouchActivity !== false) {
      this.enableTouchActivity();
    }
  }
});

/**
 * Dispose of the component and all child components
 */
vjs.Component.prototype.dispose = function(){
  this.trigger({ type: 'dispose', 'bubbles': false });

  // Dispose all children.
  if (this.children_) {
    for (var i = this.children_.length - 1; i >= 0; i--) {
      if (this.children_[i].dispose) {
        this.children_[i].dispose();
      }
    }
  }

  // Delete child references
  this.children_ = null;
  this.childIndex_ = null;
  this.childNameIndex_ = null;

  // Remove all event listeners.
  this.off();

  // Remove element from DOM
  if (this.el_.parentNode) {
    this.el_.parentNode.removeChild(this.el_);
  }

  vjs.removeData(this.el_);
  this.el_ = null;
};

/**
 * Reference to main player instance
 *
 * @type {vjs.Player}
 * @private
 */
vjs.Component.prototype.player_ = true;

/**
 * Return the component's player
 *
 * @return {vjs.Player}
 */
vjs.Component.prototype.player = function(){
  return this.player_;
};

/**
 * The component's options object
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.options_;

/**
 * Deep merge of options objects
 *
 * Whenever a property is an object on both options objects
 * the two properties will be merged using vjs.obj.deepMerge.
 *
 * This is used for merging options for child components. We
 * want it to be easy to override individual options on a child
 * component without having to rewrite all the other default options.
 *
 *     Parent.prototype.options_ = {
 *       children: {
 *         'childOne': { 'foo': 'bar', 'asdf': 'fdsa' },
 *         'childTwo': {},
 *         'childThree': {}
 *       }
 *     }
 *     newOptions = {
 *       children: {
 *         'childOne': { 'foo': 'baz', 'abc': '123' }
 *         'childTwo': null,
 *         'childFour': {}
 *       }
 *     }
 *
 *     this.options(newOptions);
 *
 * RESULT
 *
 *     {
 *       children: {
 *         'childOne': { 'foo': 'baz', 'asdf': 'fdsa', 'abc': '123' },
 *         'childTwo': null, // Disabled. Won't be initialized.
 *         'childThree': {},
 *         'childFour': {}
 *       }
 *     }
 *
 * @param  {Object} obj Object of new option values
 * @return {Object}     A NEW object of this.options_ and obj merged
 */
vjs.Component.prototype.options = function(obj){
  if (obj === undefined) return this.options_;

  return this.options_ = vjs.util.mergeOptions(this.options_, obj);
};

/**
 * The DOM element for the component
 *
 * @type {Element}
 * @private
 */
vjs.Component.prototype.el_;

/**
 * Create the component's DOM element
 *
 * @param  {String=} tagName  Element's node type. e.g. 'div'
 * @param  {Object=} attributes An object of element attributes that should be set on the element
 * @return {Element}
 */
vjs.Component.prototype.createEl = function(tagName, attributes){
  return vjs.createEl(tagName, attributes);
};

vjs.Component.prototype.localize = function(string){
  var lang = this.player_.language(),
      languages = this.player_.languages();
  if (languages && languages[lang] && languages[lang][string]) {
    return languages[lang][string];
  }
  return string;
};

/**
 * Get the component's DOM element
 *
 *     var domEl = myComponent.el();
 *
 * @return {Element}
 */
vjs.Component.prototype.el = function(){
  return this.el_;
};

/**
 * An optional element where, if defined, children will be inserted instead of
 * directly in `el_`
 *
 * @type {Element}
 * @private
 */
vjs.Component.prototype.contentEl_;

/**
 * Return the component's DOM element for embedding content.
 * Will either be el_ or a new element defined in createEl.
 *
 * @return {Element}
 */
vjs.Component.prototype.contentEl = function(){
  return this.contentEl_ || this.el_;
};

/**
 * The ID for the component
 *
 * @type {String}
 * @private
 */
vjs.Component.prototype.id_;

/**
 * Get the component's ID
 *
 *     var id = myComponent.id();
 *
 * @return {String}
 */
vjs.Component.prototype.id = function(){
  return this.id_;
};

/**
 * The name for the component. Often used to reference the component.
 *
 * @type {String}
 * @private
 */
vjs.Component.prototype.name_;

/**
 * Get the component's name. The name is often used to reference the component.
 *
 *     var name = myComponent.name();
 *
 * @return {String}
 */
vjs.Component.prototype.name = function(){
  return this.name_;
};

/**
 * Array of child components
 *
 * @type {Array}
 * @private
 */
vjs.Component.prototype.children_;

/**
 * Get an array of all child components
 *
 *     var kids = myComponent.children();
 *
 * @return {Array} The children
 */
vjs.Component.prototype.children = function(){
  return this.children_;
};

/**
 * Object of child components by ID
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.childIndex_;

/**
 * Returns a child component with the provided ID
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.getChildById = function(id){
  return this.childIndex_[id];
};

/**
 * Object of child components by name
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.childNameIndex_;

/**
 * Returns a child component with the provided name
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.getChild = function(name){
  return this.childNameIndex_[name];
};

/**
 * Adds a child component inside this component
 *
 *     myComponent.el();
 *     // -> <div class='my-component'></div>
 *     myComonent.children();
 *     // [empty array]
 *
 *     var myButton = myComponent.addChild('MyButton');
 *     // -> <div class='my-component'><div class="my-button">myButton<div></div>
 *     // -> myButton === myComonent.children()[0];
 *
 * Pass in options for child constructors and options for children of the child
 *
 *     var myButton = myComponent.addChild('MyButton', {
 *       text: 'Press Me',
 *       children: {
 *         buttonChildExample: {
 *           buttonChildOption: true
 *         }
 *       }
 *     });
 *
 * @param {String|vjs.Component} child The class name or instance of a child to add
 * @param {Object=} options Options, including options to be passed to children of the child.
 * @return {vjs.Component} The child component (created by this process if a string was used)
 * @suppress {accessControls|checkRegExp|checkTypes|checkVars|const|constantProperty|deprecated|duplicate|es5Strict|fileoverviewTags|globalThis|invalidCasts|missingProperties|nonStandardJsDocs|strictModuleDepCheck|undefinedNames|undefinedVars|unknownDefines|uselessCode|visibility}
 */
vjs.Component.prototype.addChild = function(child, options){
  var component, componentClass, componentName;

  // If child is a string, create new component with options
  if (typeof child === 'string') {
    componentName = child;

    // Make sure options is at least an empty object to protect against errors
    options = options || {};

    // If no componentClass in options, assume componentClass is the name lowercased
    // (e.g. playButton)
    componentClass = options['componentClass'] || vjs.capitalize(componentName);

    // Set name through options
    options['name'] = componentName;

    // Create a new object & element for this controls set
    // If there's no .player_, this is a player
    // Closure Compiler throws an 'incomplete alias' warning if we use the vjs variable directly.
    // Every class should be exported, so this should never be a problem here.
    component = new window['videojs'][componentClass](this.player_ || this, options);

  // child is a component instance
  } else {
    component = child;
  }

  this.children_.push(component);

  if (typeof component.id === 'function') {
    this.childIndex_[component.id()] = component;
  }

  // If a name wasn't used to create the component, check if we can use the
  // name function of the component
  componentName = componentName || (component.name && component.name());

  if (componentName) {
    this.childNameIndex_[componentName] = component;
  }

  // Add the UI object's element to the container div (box)
  // Having an element is not required
  if (typeof component['el'] === 'function' && component['el']()) {
    this.contentEl().appendChild(component['el']());
  }

  // Return so it can stored on parent object if desired.
  return component;
};

/**
 * Remove a child component from this component's list of children, and the
 * child component's element from this component's element
 *
 * @param  {vjs.Component} component Component to remove
 */
vjs.Component.prototype.removeChild = function(component){
  if (typeof component === 'string') {
    component = this.getChild(component);
  }

  if (!component || !this.children_) return;

  var childFound = false;
  for (var i = this.children_.length - 1; i >= 0; i--) {
    if (this.children_[i] === component) {
      childFound = true;
      this.children_.splice(i,1);
      break;
    }
  }

  if (!childFound) return;

  this.childIndex_[component.id()] = null;
  this.childNameIndex_[component.name()] = null;

  var compEl = component.el();
  if (compEl && compEl.parentNode === this.contentEl()) {
    this.contentEl().removeChild(component.el());
  }
};

/**
 * Add and initialize default child components from options
 *
 *     // when an instance of MyComponent is created, all children in options
 *     // will be added to the instance by their name strings and options
 *     MyComponent.prototype.options_.children = {
 *       myChildComponent: {
 *         myChildOption: true
 *       }
 *     }
 *
 *     // Or when creating the component
 *     var myComp = new MyComponent(player, {
 *       children: {
 *         myChildComponent: {
 *           myChildOption: true
 *         }
 *       }
 *     });
 *
 * The children option can also be an Array of child names or
 * child options objects (that also include a 'name' key).
 *
 *     var myComp = new MyComponent(player, {
 *       children: [
 *         'button',
 *         {
 *           name: 'button',
 *           someOtherOption: true
 *         }
 *       ]
 *     });
 *
 */
vjs.Component.prototype.initChildren = function(){
  var parent, parentOptions, children, child, name, opts, handleAdd;

  parent = this;
  parentOptions = parent.options();
  children = parentOptions['children'];

  if (children) {
    handleAdd = function(name, opts){
      // Allow options for children to be set at the parent options
      // e.g. videojs(id, { controlBar: false });
      // instead of videojs(id, { children: { controlBar: false });
      if (parentOptions[name] !== undefined) {
        opts = parentOptions[name];
      }

      // Allow for disabling default components
      // e.g. vjs.options['children']['posterImage'] = false
      if (opts === false) return;

      // Create and add the child component.
      // Add a direct reference to the child by name on the parent instance.
      // If two of the same component are used, different names should be supplied
      // for each
      parent[name] = parent.addChild(name, opts);
    };

    // Allow for an array of children details to passed in the options
    if (vjs.obj.isArray(children)) {
      for (var i = 0; i < children.length; i++) {
        child = children[i];

        if (typeof child == 'string') {
          // ['myComponent']
          name = child;
          opts = {};
        } else {
          // [{ name: 'myComponent', otherOption: true }]
          name = child.name;
          opts = child;
        }

        handleAdd(name, opts);
      }
    } else {
      vjs.obj.each(children, handleAdd);
    }
  }
};

/**
 * Allows sub components to stack CSS class names
 *
 * @return {String} The constructed class name
 */
vjs.Component.prototype.buildCSSClass = function(){
    // Child classes can include a function that does:
    // return 'CLASS NAME' + this._super();
    return '';
};

/* Events
============================================================================= */

/**
 * Add an event listener to this component's element
 *
 *     var myFunc = function(){
 *       var myComponent = this;
 *       // Do something when the event is fired
 *     };
 *
 *     myComponent.on('eventType', myFunc);
 *
 * The context of myFunc will be myComponent unless previously bound.
 *
 * Alternatively, you can add a listener to another element or component.
 *
 *     myComponent.on(otherElement, 'eventName', myFunc);
 *     myComponent.on(otherComponent, 'eventName', myFunc);
 *
 * The benefit of using this over `vjs.on(otherElement, 'eventName', myFunc)`
 * and `otherComponent.on('eventName', myFunc)` is that this way the listeners
 * will be automatically cleaned up when either component is disposed.
 * It will also bind myComponent as the context of myFunc.
 *
 * **NOTE**: When using this on elements in the page other than window
 * and document (both permanent), if you remove the element from the DOM
 * you need to call `vjs.trigger(el, 'dispose')` on it to clean up
 * references to it and allow the browser to garbage collect it.
 *
 * @param  {String|vjs.Component} first   The event type or other component
 * @param  {Function|String}      second  The event handler or event type
 * @param  {Function}             third   The event handler
 * @return {vjs.Component}        self
 */
vjs.Component.prototype.on = function(first, second, third){
  var target, type, fn, removeOnDispose, cleanRemover, thisComponent;

  if (typeof first === 'string' || vjs.obj.isArray(first)) {
    vjs.on(this.el_, first, vjs.bind(this, second));

  // Targeting another component or element
  } else {
    target = first;
    type = second;
    fn = vjs.bind(this, third);
    thisComponent = this;

    // When this component is disposed, remove the listener from the other component
    removeOnDispose = function(){
      thisComponent.off(target, type, fn);
    };
    // Use the same function ID so we can remove it later it using the ID
    // of the original listener
    removeOnDispose.guid = fn.guid;
    this.on('dispose', removeOnDispose);

    // If the other component is disposed first we need to clean the reference
    // to the other component in this component's removeOnDispose listener
    // Otherwise we create a memory leak.
    cleanRemover = function(){
      thisComponent.off('dispose', removeOnDispose);
    };
    // Add the same function ID so we can easily remove it later
    cleanRemover.guid = fn.guid;

    // Check if this is a DOM node
    if (first.nodeName) {
      // Add the listener to the other element
      vjs.on(target, type, fn);
      vjs.on(target, 'dispose', cleanRemover);

    // Should be a component
    // Not using `instanceof vjs.Component` because it makes mock players difficult
    } else if (typeof first.on === 'function') {
      // Add the listener to the other component
      target.on(type, fn);
      target.on('dispose', cleanRemover);
    }
  }

  return this;
};

/**
 * Remove an event listener from this component's element
 *
 *     myComponent.off('eventType', myFunc);
 *
 * If myFunc is excluded, ALL listeners for the event type will be removed.
 * If eventType is excluded, ALL listeners will be removed from the component.
 *
 * Alternatively you can use `off` to remove listeners that were added to other
 * elements or components using `myComponent.on(otherComponent...`.
 * In this case both the event type and listener function are REQUIRED.
 *
 *     myComponent.off(otherElement, 'eventType', myFunc);
 *     myComponent.off(otherComponent, 'eventType', myFunc);
 *
 * @param  {String=|vjs.Component}  first  The event type or other component
 * @param  {Function=|String}       second The listener function or event type
 * @param  {Function=}              third  The listener for other component
 * @return {vjs.Component}
 */
vjs.Component.prototype.off = function(first, second, third){
  var target, otherComponent, type, fn, otherEl;

  if (!first || typeof first === 'string' || vjs.obj.isArray(first)) {
    vjs.off(this.el_, first, second);
  } else {
    target = first;
    type = second;
    // Ensure there's at least a guid, even if the function hasn't been used
    fn = vjs.bind(this, third);

    // Remove the dispose listener on this component,
    // which was given the same guid as the event listener
    this.off('dispose', fn);

    if (first.nodeName) {
      // Remove the listener
      vjs.off(target, type, fn);
      // Remove the listener for cleaning the dispose listener
      vjs.off(target, 'dispose', fn);
    } else {
      target.off(type, fn);
      target.off('dispose', fn);
    }
  }

  return this;
};

/**
 * Add an event listener to be triggered only once and then removed
 *
 *     myComponent.one('eventName', myFunc);
 *
 * Alternatively you can add a listener to another element or component
 * that will be triggered only once.
 *
 *     myComponent.one(otherElement, 'eventName', myFunc);
 *     myComponent.one(otherComponent, 'eventName', myFunc);
 *
 * @param  {String|vjs.Component}  first   The event type or other component
 * @param  {Function|String}       second  The listener function or event type
 * @param  {Function=}             third   The listener function for other component
 * @return {vjs.Component}
 */
vjs.Component.prototype.one = function(first, second, third) {
  var target, type, fn, thisComponent, newFunc;

  if (typeof first === 'string' || vjs.obj.isArray(first)) {
    vjs.one(this.el_, first, vjs.bind(this, second));
  } else {
    target = first;
    type = second;
    fn = vjs.bind(this, third);
    thisComponent = this;

    newFunc = function(){
      thisComponent.off(target, type, newFunc);
      fn.apply(this, arguments);
    };
    // Keep the same function ID so we can remove it later
    newFunc.guid = fn.guid;

    this.on(target, type, newFunc);
  }

  return this;
};

/**
 * Trigger an event on an element
 *
 *     myComponent.trigger('eventName');
 *     myComponent.trigger({'type':'eventName'});
 *
 * @param  {Event|Object|String} event  A string (the type) or an event object with a type attribute
 * @return {vjs.Component}       self
 */
vjs.Component.prototype.trigger = function(event){
  vjs.trigger(this.el_, event);
  return this;
};

/* Ready
================================================================================ */
/**
 * Is the component loaded
 * This can mean different things depending on the component.
 *
 * @private
 * @type {Boolean}
 */
vjs.Component.prototype.isReady_;

/**
 * Trigger ready as soon as initialization is finished
 *
 * Allows for delaying ready. Override on a sub class prototype.
 * If you set this.isReadyOnInitFinish_ it will affect all components.
 * Specially used when waiting for the Flash player to asynchronously load.
 *
 * @type {Boolean}
 * @private
 */
vjs.Component.prototype.isReadyOnInitFinish_ = true;

/**
 * List of ready listeners
 *
 * @type {Array}
 * @private
 */
vjs.Component.prototype.readyQueue_;

/**
 * Bind a listener to the component's ready state
 *
 * Different from event listeners in that if the ready event has already happened
 * it will trigger the function immediately.
 *
 * @param  {Function} fn Ready listener
 * @return {vjs.Component}
 */
vjs.Component.prototype.ready = function(fn){
  if (fn) {
    if (this.isReady_) {
      fn.call(this);
    } else {
      if (this.readyQueue_ === undefined) {
        this.readyQueue_ = [];
      }
      this.readyQueue_.push(fn);
    }
  }
  return this;
};

/**
 * Trigger the ready listeners
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.triggerReady = function(){
  this.isReady_ = true;

  var readyQueue = this.readyQueue_;

  // Reset Ready Queue
  this.readyQueue_ = [];

  if (readyQueue && readyQueue.length > 0) {

    for (var i = 0, j = readyQueue.length; i < j; i++) {
      readyQueue[i].call(this);
    }

    // Allow for using event listeners also, in case you want to do something everytime a source is ready.
    this.trigger('ready');
  }
};

/* Display
============================================================================= */

/**
 * Check if a component's element has a CSS class name
 *
 * @param {String} classToCheck Classname to check
 * @return {vjs.Component}
 */
vjs.Component.prototype.hasClass = function(classToCheck){
  return vjs.hasClass(this.el_, classToCheck);
};

/**
 * Add a CSS class name to the component's element
 *
 * @param {String} classToAdd Classname to add
 * @return {vjs.Component}
 */
vjs.Component.prototype.addClass = function(classToAdd){
  vjs.addClass(this.el_, classToAdd);
  return this;
};

/**
 * Remove a CSS class name from the component's element
 *
 * @param {String} classToRemove Classname to remove
 * @return {vjs.Component}
 */
vjs.Component.prototype.removeClass = function(classToRemove){
  vjs.removeClass(this.el_, classToRemove);
  return this;
};

/**
 * Show the component element if hidden
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.show = function(){
  this.removeClass('vjs-hidden');
  return this;
};

/**
 * Hide the component element if currently showing
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.hide = function(){
  this.addClass('vjs-hidden');
  return this;
};

/**
 * Lock an item in its visible state
 * To be used with fadeIn/fadeOut.
 *
 * @return {vjs.Component}
 * @private
 */
vjs.Component.prototype.lockShowing = function(){
  this.addClass('vjs-lock-showing');
  return this;
};

/**
 * Unlock an item to be hidden
 * To be used with fadeIn/fadeOut.
 *
 * @return {vjs.Component}
 * @private
 */
vjs.Component.prototype.unlockShowing = function(){
  this.removeClass('vjs-lock-showing');
  return this;
};

/**
 * Disable component by making it unshowable
 *
 * Currently private because we're moving towards more css-based states.
 * @private
 */
vjs.Component.prototype.disable = function(){
  this.hide();
  this.show = function(){};
};

/**
 * Set or get the width of the component (CSS values)
 *
 * Setting the video tag dimension values only works with values in pixels.
 * Percent values will not work.
 * Some percents can be used, but width()/height() will return the number + %,
 * not the actual computed width/height.
 *
 * @param  {Number|String=} num   Optional width number
 * @param  {Boolean} skipListeners Skip the 'resize' event trigger
 * @return {vjs.Component} This component, when setting the width
 * @return {Number|String} The width, when getting
 */
vjs.Component.prototype.width = function(num, skipListeners){
  return this.dimension('width', num, skipListeners);
};

/**
 * Get or set the height of the component (CSS values)
 *
 * Setting the video tag dimension values only works with values in pixels.
 * Percent values will not work.
 * Some percents can be used, but width()/height() will return the number + %,
 * not the actual computed width/height.
 *
 * @param  {Number|String=} num     New component height
 * @param  {Boolean=} skipListeners Skip the resize event trigger
 * @return {vjs.Component} This component, when setting the height
 * @return {Number|String} The height, when getting
 */
vjs.Component.prototype.height = function(num, skipListeners){
  return this.dimension('height', num, skipListeners);
};

/**
 * Set both width and height at the same time
 *
 * @param  {Number|String} width
 * @param  {Number|String} height
 * @return {vjs.Component} The component
 */
vjs.Component.prototype.dimensions = function(width, height){
  // Skip resize listeners on width for optimization
  return this.width(width, true).height(height);
};

/**
 * Get or set width or height
 *
 * This is the shared code for the width() and height() methods.
 * All for an integer, integer + 'px' or integer + '%';
 *
 * Known issue: Hidden elements officially have a width of 0. We're defaulting
 * to the style.width value and falling back to computedStyle which has the
 * hidden element issue. Info, but probably not an efficient fix:
 * http://www.foliotek.com/devblog/getting-the-width-of-a-hidden-element-with-jquery-using-width/
 *
 * @param  {String} widthOrHeight  'width' or 'height'
 * @param  {Number|String=} num     New dimension
 * @param  {Boolean=} skipListeners Skip resize event trigger
 * @return {vjs.Component} The component if a dimension was set
 * @return {Number|String} The dimension if nothing was set
 * @private
 */
vjs.Component.prototype.dimension = function(widthOrHeight, num, skipListeners){
  if (num !== undefined) {
    if (num === null || vjs.isNaN(num)) {
      num = 0;
    }

    // Check if using css width/height (% or px) and adjust
    if ((''+num).indexOf('%') !== -1 || (''+num).indexOf('px') !== -1) {
      this.el_.style[widthOrHeight] = num;
    } else if (num === 'auto') {
      this.el_.style[widthOrHeight] = '';
    } else {
      this.el_.style[widthOrHeight] = num+'px';
    }

    // skipListeners allows us to avoid triggering the resize event when setting both width and height
    if (!skipListeners) { this.trigger('resize'); }

    // Return component
    return this;
  }

  // Not setting a value, so getting it
  // Make sure element exists
  if (!this.el_) return 0;

  // Get dimension value from style
  var val = this.el_.style[widthOrHeight];
  var pxIndex = val.indexOf('px');
  if (pxIndex !== -1) {
    // Return the pixel value with no 'px'
    return parseInt(val.slice(0,pxIndex), 10);

  // No px so using % or no style was set, so falling back to offsetWidth/height
  // If component has display:none, offset will return 0
  // TODO: handle display:none and no dimension style using px
  } else {

    return parseInt(this.el_['offset'+vjs.capitalize(widthOrHeight)], 10);

    // ComputedStyle version.
    // Only difference is if the element is hidden it will return
    // the percent value (e.g. '100%'')
    // instead of zero like offsetWidth returns.
    // var val = vjs.getComputedStyleValue(this.el_, widthOrHeight);
    // var pxIndex = val.indexOf('px');

    // if (pxIndex !== -1) {
    //   return val.slice(0, pxIndex);
    // } else {
    //   return val;
    // }
  }
};

/**
 * Fired when the width and/or height of the component changes
 * @event resize
 */
vjs.Component.prototype.onResize;

/**
 * Emit 'tap' events when touch events are supported
 *
 * This is used to support toggling the controls through a tap on the video.
 *
 * We're requiring them to be enabled because otherwise every component would
 * have this extra overhead unnecessarily, on mobile devices where extra
 * overhead is especially bad.
 * @private
 */
vjs.Component.prototype.emitTapEvents = function(){
  var touchStart, firstTouch, touchTime, couldBeTap, noTap,
      xdiff, ydiff, touchDistance, tapMovementThreshold, touchTimeThreshold;

  // Track the start time so we can determine how long the touch lasted
  touchStart = 0;
  firstTouch = null;

  // Maximum movement allowed during a touch event to still be considered a tap
  // Other popular libs use anywhere from 2 (hammer.js) to 15, so 10 seems like a nice, round number.
  tapMovementThreshold = 10;

  // The maximum length a touch can be while still being considered a tap
  touchTimeThreshold = 200;

  this.on('touchstart', function(event) {
    // If more than one finger, don't consider treating this as a click
    if (event.touches.length === 1) {
      firstTouch = vjs.obj.copy(event.touches[0]);
      // Record start time so we can detect a tap vs. "touch and hold"
      touchStart = new Date().getTime();
      // Reset couldBeTap tracking
      couldBeTap = true;
    }
  });

  this.on('touchmove', function(event) {
    // If more than one finger, don't consider treating this as a click
    if (event.touches.length > 1) {
      couldBeTap = false;
    } else if (firstTouch) {
      // Some devices will throw touchmoves for all but the slightest of taps.
      // So, if we moved only a small distance, this could still be a tap
      xdiff = event.touches[0].pageX - firstTouch.pageX;
      ydiff = event.touches[0].pageY - firstTouch.pageY;
      touchDistance = Math.sqrt(xdiff * xdiff + ydiff * ydiff);
      if (touchDistance > tapMovementThreshold) {
        couldBeTap = false;
      }
    }
  });

  noTap = function(){
    couldBeTap = false;
  };
  // TODO: Listen to the original target. http://youtu.be/DujfpXOKUp8?t=13m8s
  this.on('touchleave', noTap);
  this.on('touchcancel', noTap);

  // When the touch ends, measure how long it took and trigger the appropriate
  // event
  this.on('touchend', function(event) {
    firstTouch = null;
    // Proceed only if the touchmove/leave/cancel event didn't happen
    if (couldBeTap === true) {
      // Measure how long the touch lasted
      touchTime = new Date().getTime() - touchStart;
      // Make sure the touch was less than the threshold to be considered a tap
      if (touchTime < touchTimeThreshold) {
        event.preventDefault(); // Don't let browser turn this into a click
        this.trigger('tap');
        // It may be good to copy the touchend event object and change the
        // type to tap, if the other event properties aren't exact after
        // vjs.fixEvent runs (e.g. event.target)
      }
    }
  });
};

/**
 * Report user touch activity when touch events occur
 *
 * User activity is used to determine when controls should show/hide. It's
 * relatively simple when it comes to mouse events, because any mouse event
 * should show the controls. So we capture mouse events that bubble up to the
 * player and report activity when that happens.
 *
 * With touch events it isn't as easy. We can't rely on touch events at the
 * player level, because a tap (touchstart + touchend) on the video itself on
 * mobile devices is meant to turn controls off (and on). User activity is
 * checked asynchronously, so what could happen is a tap event on the video
 * turns the controls off, then the touchend event bubbles up to the player,
 * which if it reported user activity, would turn the controls right back on.
 * (We also don't want to completely block touch events from bubbling up)
 *
 * Also a touchmove, touch+hold, and anything other than a tap is not supposed
 * to turn the controls back on on a mobile device.
 *
 * Here we're setting the default component behavior to report user activity
 * whenever touch events happen, and this can be turned off by components that
 * want touch events to act differently.
 */
vjs.Component.prototype.enableTouchActivity = function() {
  var report, touchHolding, touchEnd;

  // Don't continue if the root player doesn't support reporting user activity
  if (!this.player().reportUserActivity) {
    return;
  }

  // listener for reporting that the user is active
  report = vjs.bind(this.player(), this.player().reportUserActivity);

  this.on('touchstart', function() {
    report();
    // For as long as the they are touching the device or have their mouse down,
    // we consider them active even if they're not moving their finger or mouse.
    // So we want to continue to update that they are active
    this.clearInterval(touchHolding);
    // report at the same interval as activityCheck
    touchHolding = this.setInterval(report, 250);
  });

  touchEnd = function(event) {
    report();
    // stop the interval that maintains activity if the touch is holding
    this.clearInterval(touchHolding);
  };

  this.on('touchmove', report);
  this.on('touchend', touchEnd);
  this.on('touchcancel', touchEnd);
};

/**
 * Creates timeout and sets up disposal automatically.
 * @param {Function} fn The function to run after the timeout.
 * @param {Number} timeout Number of ms to delay before executing specified function.
 * @return {Number} Returns the timeout ID
 */
vjs.Component.prototype.setTimeout = function(fn, timeout) {
  fn = vjs.bind(this, fn);

  // window.setTimeout would be preferable here, but due to some bizarre issue with Sinon and/or Phantomjs, we can't.
  var timeoutId = setTimeout(fn, timeout);

  var disposeFn = function() {
    this.clearTimeout(timeoutId);
  };

  disposeFn.guid = 'vjs-timeout-'+ timeoutId;

  this.on('dispose', disposeFn);

  return timeoutId;
};


/**
 * Clears a timeout and removes the associated dispose listener
 * @param {Number} timeoutId The id of the timeout to clear
 * @return {Number} Returns the timeout ID
 */
vjs.Component.prototype.clearTimeout = function(timeoutId) {
  clearTimeout(timeoutId);

  var disposeFn = function(){};
  disposeFn.guid = 'vjs-timeout-'+ timeoutId;

  this.off('dispose', disposeFn);

  return timeoutId;
};

/**
 * Creates an interval and sets up disposal automatically.
 * @param {Function} fn The function to run every N seconds.
 * @param {Number} interval Number of ms to delay before executing specified function.
 * @return {Number} Returns the interval ID
 */
vjs.Component.prototype.setInterval = function(fn, interval) {
  fn = vjs.bind(this, fn);

  var intervalId = setInterval(fn, interval);

  var disposeFn = function() {
    this.clearInterval(intervalId);
  };

  disposeFn.guid = 'vjs-interval-'+ intervalId;

  this.on('dispose', disposeFn);

  return intervalId;
};

/**
 * Clears an interval and removes the associated dispose listener
 * @param {Number} intervalId The id of the interval to clear
 * @return {Number} Returns the interval ID
 */
vjs.Component.prototype.clearInterval = function(intervalId) {
  clearInterval(intervalId);

  var disposeFn = function(){};
  disposeFn.guid = 'vjs-interval-'+ intervalId;

  this.off('dispose', disposeFn);

  return intervalId;
};
/* Button - Base class for all buttons
================================================================================ */
/**
 * Base class for all buttons
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.Button = vjs.Component.extend({
  /**
   * @constructor
   * @inheritDoc
   */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.emitTapEvents();

    this.on('tap', this.onClick);
    this.on('click', this.onClick);
    this.on('focus', this.onFocus);
    this.on('blur', this.onBlur);
  }
});

vjs.Button.prototype.createEl = function(type, props){
  var el;

  // Add standard Aria and Tabindex info
  props = vjs.obj.merge({
    className: this.buildCSSClass(),
    'role': 'button',
    'aria-live': 'polite', // let the screen reader user know that the text of the button may change
    tabIndex: 0
  }, props);

  el = vjs.Component.prototype.createEl.call(this, type, props);

  // if innerHTML hasn't been overridden (bigPlayButton), add content elements
  if (!props.innerHTML) {
    this.contentEl_ = vjs.createEl('div', {
      className: 'vjs-control-content'
    });

    this.controlText_ = vjs.createEl('span', {
      className: 'vjs-control-text',
      innerHTML: this.localize(this.buttonText) || 'Need Text'
    });

    this.contentEl_.appendChild(this.controlText_);
    el.appendChild(this.contentEl_);
  }

  return el;
};

vjs.Button.prototype.buildCSSClass = function(){
  // TODO: Change vjs-control to vjs-button?
  return 'vjs-control ' + vjs.Component.prototype.buildCSSClass.call(this);
};

  // Click - Override with specific functionality for button
vjs.Button.prototype.onClick = function(){};

  // Focus - Add keyboard functionality to element
vjs.Button.prototype.onFocus = function(){
  vjs.on(document, 'keydown', vjs.bind(this, this.onKeyPress));
};

  // KeyPress (document level) - Trigger click when keys are pressed
vjs.Button.prototype.onKeyPress = function(event){
  // Check for space bar (32) or enter (13) keys
  if (event.which == 32 || event.which == 13) {
    event.preventDefault();
    this.onClick();
  }
};

// Blur - Remove keyboard triggers
vjs.Button.prototype.onBlur = function(){
  vjs.off(document, 'keydown', vjs.bind(this, this.onKeyPress));
};
/* Slider
================================================================================ */
/**
 * The base functionality for sliders like the volume bar and seek bar
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.Slider = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // Set property names to bar and handle to match with the child Slider class is looking for
    this.bar = this.getChild(this.options_['barName']);
    this.handle = this.getChild(this.options_['handleName']);

    this.on('mousedown', this.onMouseDown);
    this.on('touchstart', this.onMouseDown);
    this.on('focus', this.onFocus);
    this.on('blur', this.onBlur);
    this.on('click', this.onClick);

    this.on(player, 'controlsvisible', this.update);
    this.on(player, this.playerEvent, this.update);
  }
});

vjs.Slider.prototype.createEl = function(type, props) {
  props = props || {};
  // Add the slider element class to all sub classes
  props.className = props.className + ' vjs-slider';
  props = vjs.obj.merge({
    'role': 'slider',
    'aria-valuenow': 0,
    'aria-valuemin': 0,
    'aria-valuemax': 100,
    tabIndex: 0
  }, props);

  return vjs.Component.prototype.createEl.call(this, type, props);
};

vjs.Slider.prototype.onMouseDown = function(event){
  event.preventDefault();
  vjs.blockTextSelection();
  this.addClass('vjs-sliding');

  this.on(document, 'mousemove', this.onMouseMove);
  this.on(document, 'mouseup', this.onMouseUp);
  this.on(document, 'touchmove', this.onMouseMove);
  this.on(document, 'touchend', this.onMouseUp);

  this.onMouseMove(event);
};

// To be overridden by a subclass
vjs.Slider.prototype.onMouseMove = function(){};

vjs.Slider.prototype.onMouseUp = function() {
  vjs.unblockTextSelection();
  this.removeClass('vjs-sliding');

  this.off(document, 'mousemove', this.onMouseMove);
  this.off(document, 'mouseup', this.onMouseUp);
  this.off(document, 'touchmove', this.onMouseMove);
  this.off(document, 'touchend', this.onMouseUp);

  this.update();
};

vjs.Slider.prototype.update = function(){
  // In VolumeBar init we have a setTimeout for update that pops and update to the end of the
  // execution stack. The player is destroyed before then update will cause an error
  if (!this.el_) return;

  // If scrubbing, we could use a cached value to make the handle keep up with the user's mouse.
  // On HTML5 browsers scrubbing is really smooth, but some flash players are slow, so we might want to utilize this later.
  // var progress =  (this.player_.scrubbing) ? this.player_.getCache().currentTime / this.player_.duration() : this.player_.currentTime() / this.player_.duration();

  var barProgress,
      progress = this.getPercent(),
      handle = this.handle,
      bar = this.bar;

  // Protect against no duration and other division issues
  if (typeof progress !== 'number' ||
      progress !== progress ||
      progress < 0 ||
      progress === Infinity) {
        progress = 0;
  }

  barProgress = progress;

  // If there is a handle, we need to account for the handle in our calculation for progress bar
  // so that it doesn't fall short of or extend past the handle.
  if (handle) {

    var box = this.el_,
        boxWidth = box.offsetWidth,

        handleWidth = handle.el().offsetWidth,

        // The width of the handle in percent of the containing box
        // In IE, widths may not be ready yet causing NaN
        handlePercent = (handleWidth) ? handleWidth / boxWidth : 0,

        // Get the adjusted size of the box, considering that the handle's center never touches the left or right side.
        // There is a margin of half the handle's width on both sides.
        boxAdjustedPercent = 1 - handlePercent,

        // Adjust the progress that we'll use to set widths to the new adjusted box width
        adjustedProgress = progress * boxAdjustedPercent;

    // The bar does reach the left side, so we need to account for this in the bar's width
    barProgress = adjustedProgress + (handlePercent / 2);

    // Move the handle from the left based on the adjected progress
    handle.el().style.left = vjs.round(adjustedProgress * 100, 2) + '%';
  }

  // Set the new bar width
  if (bar) {
    bar.el().style.width = vjs.round(barProgress * 100, 2) + '%';
  }
};

vjs.Slider.prototype.calculateDistance = function(event){
  var el, box, boxX, boxY, boxW, boxH, handle, pageX, pageY;

  el = this.el_;
  box = vjs.findPosition(el);
  boxW = boxH = el.offsetWidth;
  handle = this.handle;

  if (this.options()['vertical']) {
    boxY = box.top;

    if (event.changedTouches) {
      pageY = event.changedTouches[0].pageY;
    } else {
      pageY = event.pageY;
    }

    if (handle) {
      var handleH = handle.el().offsetHeight;
      // Adjusted X and Width, so handle doesn't go outside the bar
      boxY = boxY + (handleH / 2);
      boxH = boxH - handleH;
    }

    // Percent that the click is through the adjusted area
    return Math.max(0, Math.min(1, ((boxY - pageY) + boxH) / boxH));

  } else {
    boxX = box.left;

    if (event.changedTouches) {
      pageX = event.changedTouches[0].pageX;
    } else {
      pageX = event.pageX;
    }

    if (handle) {
      var handleW = handle.el().offsetWidth;

      // Adjusted X and Width, so handle doesn't go outside the bar
      boxX = boxX + (handleW / 2);
      boxW = boxW - handleW;
    }

    // Percent that the click is through the adjusted area
    return Math.max(0, Math.min(1, (pageX - boxX) / boxW));
  }
};

vjs.Slider.prototype.onFocus = function(){
  this.on(document, 'keydown', this.onKeyPress);
};

vjs.Slider.prototype.onKeyPress = function(event){
  if (event.which == 37 || event.which == 40) { // Left and Down Arrows
    event.preventDefault();
    this.stepBack();
  } else if (event.which == 38 || event.which == 39) { // Up and Right Arrows
    event.preventDefault();
    this.stepForward();
  }
};

vjs.Slider.prototype.onBlur = function(){
  this.off(document, 'keydown', this.onKeyPress);
};

/**
 * Listener for click events on slider, used to prevent clicks
 *   from bubbling up to parent elements like button menus.
 * @param  {Object} event Event object
 */
vjs.Slider.prototype.onClick = function(event){
  event.stopImmediatePropagation();
  event.preventDefault();
};

/**
 * SeekBar Behavior includes play progress bar, and seek handle
 * Needed so it can determine seek position based on handle position/size
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SliderHandle = vjs.Component.extend();

/**
 * Default value of the slider
 *
 * @type {Number}
 * @private
 */
vjs.SliderHandle.prototype.defaultValue = 0;

/** @inheritDoc */
vjs.SliderHandle.prototype.createEl = function(type, props) {
  props = props || {};
  // Add the slider element class to all sub classes
  props.className = props.className + ' vjs-slider-handle';
  props = vjs.obj.merge({
    innerHTML: '<span class="vjs-control-text">'+this.defaultValue+'</span>'
  }, props);

  return vjs.Component.prototype.createEl.call(this, 'div', props);
};
/* Menu
================================================================================ */
/**
 * The Menu component is used to build pop up menus, including subtitle and
 * captions selection menus.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.Menu = vjs.Component.extend();

/**
 * Add a menu item to the menu
 * @param {Object|String} component Component or component type to add
 */
vjs.Menu.prototype.addItem = function(component){
  this.addChild(component);
  component.on('click', vjs.bind(this, function(){
    this.unlockShowing();
  }));
};

/** @inheritDoc */
vjs.Menu.prototype.createEl = function(){
  var contentElType = this.options().contentElType || 'ul';
  this.contentEl_ = vjs.createEl(contentElType, {
    className: 'vjs-menu-content'
  });
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    append: this.contentEl_,
    className: 'vjs-menu'
  });
  el.appendChild(this.contentEl_);

  // Prevent clicks from bubbling up. Needed for Menu Buttons,
  // where a click on the parent is significant
  vjs.on(el, 'click', function(event){
    event.preventDefault();
    event.stopImmediatePropagation();
  });

  return el;
};

/**
 * The component for a menu item. `<li>`
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.MenuItem = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);
    this.selected(options['selected']);
  }
});

/** @inheritDoc */
vjs.MenuItem.prototype.createEl = function(type, props){
  return vjs.Button.prototype.createEl.call(this, 'li', vjs.obj.merge({
    className: 'vjs-menu-item',
    innerHTML: this.localize(this.options_['label'])
  }, props));
};

/**
 * Handle a click on the menu item, and set it to selected
 */
vjs.MenuItem.prototype.onClick = function(){
  this.selected(true);
};

/**
 * Set this menu item as selected or not
 * @param  {Boolean} selected
 */
vjs.MenuItem.prototype.selected = function(selected){
  if (selected) {
    this.addClass('vjs-selected');
    this.el_.setAttribute('aria-selected',true);
  } else {
    this.removeClass('vjs-selected');
    this.el_.setAttribute('aria-selected',false);
  }
};


/**
 * A button class with a popup menu
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.MenuButton = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    this.update();

    this.on('keydown', this.onKeyPress);
    this.el_.setAttribute('aria-haspopup', true);
    this.el_.setAttribute('role', 'button');
  }
});

vjs.MenuButton.prototype.update = function() {
  var menu = this.createMenu();

  if (this.menu) {
    this.removeChild(this.menu);
  }

  this.menu = menu;
  this.addChild(menu);

  if (this.items && this.items.length === 0) {
    this.hide();
  } else if (this.items && this.items.length > 1) {
    this.show();
  }
};

/**
 * Track the state of the menu button
 * @type {Boolean}
 * @private
 */
vjs.MenuButton.prototype.buttonPressed_ = false;

vjs.MenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player_);

  // Add a title list item to the top
  if (this.options().title) {
    menu.contentEl().appendChild(vjs.createEl('li', {
      className: 'vjs-menu-title',
      innerHTML: vjs.capitalize(this.options().title),
      tabindex: -1
    }));
  }

  this.items = this['createItems']();

  if (this.items) {
    // Add menu items to the menu
    for (var i = 0; i < this.items.length; i++) {
      menu.addItem(this.items[i]);
    }
  }

  return menu;
};

/**
 * Create the list of menu items. Specific to each subclass.
 */
vjs.MenuButton.prototype.createItems = function(){};

/** @inheritDoc */
vjs.MenuButton.prototype.buildCSSClass = function(){
  return this.className + ' vjs-menu-button ' + vjs.Button.prototype.buildCSSClass.call(this);
};

// Focus - Add keyboard functionality to element
// This function is not needed anymore. Instead, the keyboard functionality is handled by
// treating the button as triggering a submenu. When the button is pressed, the submenu
// appears. Pressing the button again makes the submenu disappear.
vjs.MenuButton.prototype.onFocus = function(){};
// Can't turn off list display that we turned on with focus, because list would go away.
vjs.MenuButton.prototype.onBlur = function(){};

vjs.MenuButton.prototype.onClick = function(){
  // When you click the button it adds focus, which will show the menu indefinitely.
  // So we'll remove focus when the mouse leaves the button.
  // Focus is needed for tab navigation.
  this.one('mouseout', vjs.bind(this, function(){
    this.menu.unlockShowing();
    this.el_.blur();
  }));
  if (this.buttonPressed_){
    this.unpressButton();
  } else {
    this.pressButton();
  }
};

vjs.MenuButton.prototype.onKeyPress = function(event){

  // Check for space bar (32) or enter (13) keys
  if (event.which == 32 || event.which == 13) {
    if (this.buttonPressed_){
      this.unpressButton();
    } else {
      this.pressButton();
    }
    event.preventDefault();
  // Check for escape (27) key
  } else if (event.which == 27){
    if (this.buttonPressed_){
      this.unpressButton();
    }
    event.preventDefault();
  }
};

vjs.MenuButton.prototype.pressButton = function(){
  this.buttonPressed_ = true;
  this.menu.lockShowing();
  this.el_.setAttribute('aria-pressed', true);
  if (this.items && this.items.length > 0) {
    this.items[0].el().focus(); // set the focus to the title of the submenu
  }
};

vjs.MenuButton.prototype.unpressButton = function(){
  this.buttonPressed_ = false;
  this.menu.unlockShowing();
  this.el_.setAttribute('aria-pressed', false);
};
/**
 * Custom MediaError to mimic the HTML5 MediaError
 * @param {Number} code The media error code
 */
vjs.MediaError = function(code){
  if (typeof code === 'number') {
    this.code = code;
  } else if (typeof code === 'string') {
    // default code is zero, so this is a custom error
    this.message = code;
  } else if (typeof code === 'object') { // object
    vjs.obj.merge(this, code);
  }

  if (!this.message) {
    this.message = vjs.MediaError.defaultMessages[this.code] || '';
  }
};

/**
 * The error code that refers two one of the defined
 * MediaError types
 * @type {Number}
 */
vjs.MediaError.prototype.code = 0;

/**
 * An optional message to be shown with the error.
 * Message is not part of the HTML5 video spec
 * but allows for more informative custom errors.
 * @type {String}
 */
vjs.MediaError.prototype.message = '';

/**
 * An optional status code that can be set by plugins
 * to allow even more detail about the error.
 * For example the HLS plugin might provide the specific
 * HTTP status code that was returned when the error
 * occurred, then allowing a custom error overlay
 * to display more information.
 * @type {[type]}
 */
vjs.MediaError.prototype.status = null;

vjs.MediaError.errorTypes = [
  'MEDIA_ERR_CUSTOM',            // = 0
  'MEDIA_ERR_ABORTED',           // = 1
  'MEDIA_ERR_NETWORK',           // = 2
  'MEDIA_ERR_DECODE',            // = 3
  'MEDIA_ERR_SRC_NOT_SUPPORTED', // = 4
  'MEDIA_ERR_ENCRYPTED'          // = 5
];

vjs.MediaError.defaultMessages = {
  1: 'You aborted the video playback',
  2: 'A network error caused the video download to fail part-way.',
  3: 'The video playback was aborted due to a corruption problem or because the video used features your browser did not support.',
  4: 'The video could not be loaded, either because the server or network failed or because the format is not supported.',
  5: 'The video is encrypted and we do not have the keys to decrypt it.'
};

// Add types as properties on MediaError
// e.g. MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED = 4;
for (var errNum = 0; errNum < vjs.MediaError.errorTypes.length; errNum++) {
  vjs.MediaError[vjs.MediaError.errorTypes[errNum]] = errNum;
  // values should be accessible on both the class and instance
  vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]] = errNum;
}
(function(){
  var apiMap, specApi, browserApi, i;

  /**
   * Store the browser-specific methods for the fullscreen API
   * @type {Object|undefined}
   * @private
   */
  vjs.browser.fullscreenAPI;

  // browser API methods
  // map approach from Screenful.js - https://github.com/sindresorhus/screenfull.js
  apiMap = [
    // Spec: https://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html
    [
      'requestFullscreen',
      'exitFullscreen',
      'fullscreenElement',
      'fullscreenEnabled',
      'fullscreenchange',
      'fullscreenerror'
    ],
    // WebKit
    [
      'webkitRequestFullscreen',
      'webkitExitFullscreen',
      'webkitFullscreenElement',
      'webkitFullscreenEnabled',
      'webkitfullscreenchange',
      'webkitfullscreenerror'
    ],
    // Old WebKit (Safari 5.1)
    [
      'webkitRequestFullScreen',
      'webkitCancelFullScreen',
      'webkitCurrentFullScreenElement',
      'webkitCancelFullScreen',
      'webkitfullscreenchange',
      'webkitfullscreenerror'
    ],
    // Mozilla
    [
      'mozRequestFullScreen',
      'mozCancelFullScreen',
      'mozFullScreenElement',
      'mozFullScreenEnabled',
      'mozfullscreenchange',
      'mozfullscreenerror'
    ],
    // Microsoft
    [
      'msRequestFullscreen',
      'msExitFullscreen',
      'msFullscreenElement',
      'msFullscreenEnabled',
      'MSFullscreenChange',
      'MSFullscreenError'
    ]
  ];

  specApi = apiMap[0];

  // determine the supported set of functions
  for (i=0; i<apiMap.length; i++) {
    // check for exitFullscreen function
    if (apiMap[i][1] in document) {
      browserApi = apiMap[i];
      break;
    }
  }

  // map the browser API names to the spec API names
  // or leave vjs.browser.fullscreenAPI undefined
  if (browserApi) {
    vjs.browser.fullscreenAPI = {};

    for (i=0; i<browserApi.length; i++) {
      vjs.browser.fullscreenAPI[specApi[i]] = browserApi[i];
    }
  }

})();
/**
 * An instance of the `vjs.Player` class is created when any of the Video.js setup methods are used to initialize a video.
 *
 * ```js
 * var myPlayer = videojs('example_video_1');
 * ```
 *
 * In the following example, the `data-setup` attribute tells the Video.js library to create a player instance when the library is ready.
 *
 * ```html
 * <video id="example_video_1" data-setup='{}' controls>
 *   <source src="my-source.mp4" type="video/mp4">
 * </video>
 * ```
 *
 * After an instance has been created it can be accessed globally using `Video('example_video_1')`.
 *
 * @class
 * @extends vjs.Component
 */
vjs.Player = vjs.Component.extend({

  /**
   * player's constructor function
   *
   * @constructs
   * @method init
   * @param {Element} tag        The original video tag used for configuring options
   * @param {Object=} options    Player options
   * @param {Function=} ready    Ready callback function
   */
  init: function(tag, options, ready){
    this.tag = tag; // Store the original tag used to set options

    // Make sure tag ID exists
    tag.id = tag.id || 'vjs_video_' + vjs.guid++;

    // Store the tag attributes used to restore html5 element
    this.tagAttributes = tag && vjs.getElementAttributes(tag);

    // Set Options
    // The options argument overrides options set in the video tag
    // which overrides globally set options.
    // This latter part coincides with the load order
    // (tag must exist before Player)
    options = vjs.obj.merge(this.getTagSettings(tag), options);

    // Update Current Language
    this.language_ = options['language'] || vjs.options['language'];

    // Update Supported Languages
    this.languages_ = options['languages'] || vjs.options['languages'];

    // Cache for video property values.
    this.cache_ = {};

    // Set poster
    this.poster_ = options['poster'] || '';

    // Set controls
    this.controls_ = !!options['controls'];
    // Original tag settings stored in options
    // now remove immediately so native controls don't flash.
    // May be turned back on by HTML5 tech if nativeControlsForTouch is true
    tag.controls = false;

    // we don't want the player to report touch activity on itself
    // see enableTouchActivity in Component
    options.reportTouchActivity = false;

    // Set isAudio based on whether or not an audio tag was used
    this.isAudio(this.tag.nodeName.toLowerCase() === 'audio');

    // Run base component initializing with new options.
    // Builds the element through createEl()
    // Inits and embeds any child components in opts
    vjs.Component.call(this, this, options, ready);

    // Update controls className. Can't do this when the controls are initially
    // set because the element doesn't exist yet.
    if (this.controls()) {
      this.addClass('vjs-controls-enabled');
    } else {
      this.addClass('vjs-controls-disabled');
    }

    if (this.isAudio()) {
      this.addClass('vjs-audio');
    }

    // TODO: Make this smarter. Toggle user state between touching/mousing
    // using events, since devices can have both touch and mouse events.
    // if (vjs.TOUCH_ENABLED) {
    //   this.addClass('vjs-touch-enabled');
    // }

    // Make player easily findable by ID
    vjs.players[this.id_] = this;

    if (options['plugins']) {
      vjs.obj.each(options['plugins'], function(key, val){
        this[key](val);
      }, this);
    }

    this.listenForUserActivity();
  }
});

/**
 * The player's stored language code
 *
 * @type {String}
 * @private
 */
vjs.Player.prototype.language_;

/**
 * The player's language code
 * @param  {String} languageCode  The locale string
 * @return {String}             The locale string when getting
 * @return {vjs.Player}         self, when setting
 */
vjs.Player.prototype.language = function (languageCode) {
  if (languageCode === undefined) {
    return this.language_;
  }

  this.language_ = languageCode;
  return this;
};

/**
 * The player's stored language dictionary
 *
 * @type {Object}
 * @private
 */
vjs.Player.prototype.languages_;

vjs.Player.prototype.languages = function(){
  return this.languages_;
};

/**
 * Player instance options, surfaced using vjs.options
 * vjs.options = vjs.Player.prototype.options_
 * Make changes in vjs.options, not here.
 * All options should use string keys so they avoid
 * renaming by closure compiler
 * @type {Object}
 * @private
 */
vjs.Player.prototype.options_ = vjs.options;

/**
 * Destroys the video player and does any necessary cleanup
 *
 *     myPlayer.dispose();
 *
 * This is especially helpful if you are dynamically adding and removing videos
 * to/from the DOM.
 */
vjs.Player.prototype.dispose = function(){
  this.trigger('dispose');
  // prevent dispose from being called twice
  this.off('dispose');

  // Kill reference to this player
  vjs.players[this.id_] = null;
  if (this.tag && this.tag['player']) { this.tag['player'] = null; }
  if (this.el_ && this.el_['player']) { this.el_['player'] = null; }

  if (this.tech) { this.tech.dispose(); }

  // Component dispose
  vjs.Component.prototype.dispose.call(this);
};

vjs.Player.prototype.getTagSettings = function(tag){
  var tagOptions,
      dataSetup,
      options = {
        'sources': [],
        'tracks': []
      };

  tagOptions = vjs.getElementAttributes(tag);
  dataSetup = tagOptions['data-setup'];

  // Check if data-setup attr exists.
  if (dataSetup !== null){
    // Parse options JSON
    // If empty string, make it a parsable json object.
    vjs.obj.merge(tagOptions, vjs.JSON.parse(dataSetup || '{}'));
  }

  vjs.obj.merge(options, tagOptions);

  // Get tag children settings
  if (tag.hasChildNodes()) {
    var children, child, childName, i, j;

    children = tag.childNodes;

    for (i=0,j=children.length; i<j; i++) {
      child = children[i];
      // Change case needed: http://ejohn.org/blog/nodename-case-sensitivity/
      childName = child.nodeName.toLowerCase();
      if (childName === 'source') {
        options['sources'].push(vjs.getElementAttributes(child));
      } else if (childName === 'track') {
        options['tracks'].push(vjs.getElementAttributes(child));
      }
    }
  }

  return options;
};

vjs.Player.prototype.createEl = function(){
  var
    el = this.el_ = vjs.Component.prototype.createEl.call(this, 'div'),
    tag = this.tag,
    attrs;

  // Remove width/height attrs from tag so CSS can make it 100% width/height
  tag.removeAttribute('width');
  tag.removeAttribute('height');

  // Copy over all the attributes from the tag, including ID and class
  // ID will now reference player box, not the video tag
  attrs = vjs.getElementAttributes(tag);
  vjs.obj.each(attrs, function(attr) {
    // workaround so we don't totally break IE7
    // http://stackoverflow.com/questions/3653444/css-styles-not-applied-on-dynamic-elements-in-internet-explorer-7
    if (attr == 'class') {
      el.className = attrs[attr];
    } else {
      el.setAttribute(attr, attrs[attr]);
    }
  });

  // Update tag id/class for use as HTML5 playback tech
  // Might think we should do this after embedding in container so .vjs-tech class
  // doesn't flash 100% width/height, but class only applies with .video-js parent
  tag.id += '_html5_api';
  tag.className = 'vjs-tech';

  // Make player findable on elements
  tag['player'] = el['player'] = this;
  // Default state of video is paused
  this.addClass('vjs-paused');

  // Make box use width/height of tag, or rely on default implementation
  // Enforce with CSS since width/height attrs don't work on divs
  this.width(this.options_['width'], true); // (true) Skip resize listener on load
  this.height(this.options_['height'], true);

  // vjs.insertFirst seems to cause the networkState to flicker from 3 to 2, so
  // keep track of the original for later so we can know if the source originally failed
  tag.initNetworkState_ = tag.networkState;

  // Wrap video tag in div (el/box) container
  if (tag.parentNode) {
    tag.parentNode.insertBefore(el, tag);
  }
  vjs.insertFirst(tag, el); // Breaks iPhone, fixed in HTML5 setup.

  // The event listeners need to be added before the children are added
  // in the component init because the tech (loaded with mediaLoader) may
  // fire events, like loadstart, that these events need to capture.
  // Long term it might be better to expose a way to do this in component.init
  // like component.initEventListeners() that runs between el creation and
  // adding children
  this.el_ = el;
  this.on('loadstart', this.onLoadStart);
  this.on('waiting', this.onWaiting);
  this.on(['canplay', 'canplaythrough', 'playing', 'ended'], this.onWaitEnd);
  this.on('seeking', this.onSeeking);
  this.on('seeked', this.onSeeked);
  this.on('ended', this.onEnded);
  this.on('play', this.onPlay);
  this.on('firstplay', this.onFirstPlay);
  this.on('pause', this.onPause);
  this.on('progress', this.onProgress);
  this.on('durationchange', this.onDurationChange);
  this.on('fullscreenchange', this.onFullscreenChange);

  return el;
};

// /* Media Technology (tech)
// ================================================================================ */
// Load/Create an instance of playback technology including element and API methods
// And append playback element in player div.
vjs.Player.prototype.loadTech = function(techName, source){

  // Pause and remove current playback technology
  if (this.tech) {
    this.unloadTech();
  }

  // get rid of the HTML5 video tag as soon as we are using another tech
  if (techName !== 'Html5' && this.tag) {
    vjs.Html5.disposeMediaElement(this.tag);
    this.tag = null;
  }

  this.techName = techName;

  // Turn off API access because we're loading a new tech that might load asynchronously
  this.isReady_ = false;

  var techReady = function(){
    this.player_.triggerReady();
  };

  // Grab tech-specific options from player options and add source and parent element to use.
  var techOptions = vjs.obj.merge({ 'source': source, 'parentEl': this.el_ }, this.options_[techName.toLowerCase()]);

  if (source) {
    this.currentType_ = source.type;
    if (source.src == this.cache_.src && this.cache_.currentTime > 0) {
      techOptions['startTime'] = this.cache_.currentTime;
    }

    this.cache_.src = source.src;
  }

  // Initialize tech instance
  this.tech = new window['videojs'][techName](this, techOptions);

  this.tech.ready(techReady);
};

vjs.Player.prototype.unloadTech = function(){
  this.isReady_ = false;

  this.tech.dispose();

  this.tech = false;
};

// There's many issues around changing the size of a Flash (or other plugin) object.
// First is a plugin reload issue in Firefox that has been around for 11 years: https://bugzilla.mozilla.org/show_bug.cgi?id=90268
// Then with the new fullscreen API, Mozilla and webkit browsers will reload the flash object after going to fullscreen.
// To get around this, we're unloading the tech, caching source and currentTime values, and reloading the tech once the plugin is resized.
// reloadTech: function(betweenFn){
//   vjs.log('unloadingTech')
//   this.unloadTech();
//   vjs.log('unloadedTech')
//   if (betweenFn) { betweenFn.call(); }
//   vjs.log('LoadingTech')
//   this.loadTech(this.techName, { src: this.cache_.src })
//   vjs.log('loadedTech')
// },

// /* Player event handlers (how the player reacts to certain events)
// ================================================================================ */

/**
 * Fired when the user agent begins looking for media data
 * @event loadstart
 */
vjs.Player.prototype.onLoadStart = function() {
  // TODO: Update to use `emptied` event instead. See #1277.

  this.removeClass('vjs-ended');

  // reset the error state
  this.error(null);

  // If it's already playing we want to trigger a firstplay event now.
  // The firstplay event relies on both the play and loadstart events
  // which can happen in any order for a new source
  if (!this.paused()) {
    this.trigger('firstplay');
  } else {
    // reset the hasStarted state
    this.hasStarted(false);
  }
};

vjs.Player.prototype.hasStarted_ = false;

vjs.Player.prototype.hasStarted = function(hasStarted){
  if (hasStarted !== undefined) {
    // only update if this is a new value
    if (this.hasStarted_ !== hasStarted) {
      this.hasStarted_ = hasStarted;
      if (hasStarted) {
        this.addClass('vjs-has-started');
        // trigger the firstplay event if this newly has played
        this.trigger('firstplay');
      } else {
        this.removeClass('vjs-has-started');
      }
    }
    return this;
  }
  return this.hasStarted_;
};

/**
 * Fired when the player has initial duration and dimension information
 * @event loadedmetadata
 */
vjs.Player.prototype.onLoadedMetaData;

/**
 * Fired when the player has downloaded data at the current playback position
 * @event loadeddata
 */
vjs.Player.prototype.onLoadedData;

/**
 * Fired when the player has finished downloading the source data
 * @event loadedalldata
 */
vjs.Player.prototype.onLoadedAllData;

/**
 * Fired whenever the media begins or resumes playback
 * @event play
 */
vjs.Player.prototype.onPlay = function(){
  this.removeClass('vjs-ended');
  this.removeClass('vjs-paused');
  this.addClass('vjs-playing');

  // hide the poster when the user hits play
  // https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-play
  this.hasStarted(true);
};

/**
 * Fired whenever the media begins waiting
 * @event waiting
 */
vjs.Player.prototype.onWaiting = function(){
  this.addClass('vjs-waiting');
};

/**
 * A handler for events that signal that waiting has ended
 * which is not consistent between browsers. See #1351
 * @private
 */
vjs.Player.prototype.onWaitEnd = function(){
  this.removeClass('vjs-waiting');
};

/**
 * Fired whenever the player is jumping to a new time
 * @event seeking
 */
vjs.Player.prototype.onSeeking = function(){
  this.addClass('vjs-seeking');
};

/**
 * Fired when the player has finished jumping to a new time
 * @event seeked
 */
vjs.Player.prototype.onSeeked = function(){
  this.removeClass('vjs-seeking');
};

/**
 * Fired the first time a video is played
 *
 * Not part of the HLS spec, and we're not sure if this is the best
 * implementation yet, so use sparingly. If you don't have a reason to
 * prevent playback, use `myPlayer.one('play');` instead.
 *
 * @event firstplay
 */
vjs.Player.prototype.onFirstPlay = function(){
    //If the first starttime attribute is specified
    //then we will start at the given offset in seconds
    if(this.options_['starttime']){
      this.currentTime(this.options_['starttime']);
    }

    this.addClass('vjs-has-started');
};

/**
 * Fired whenever the media has been paused
 * @event pause
 */
vjs.Player.prototype.onPause = function(){
  this.removeClass('vjs-playing');
  this.addClass('vjs-paused');
};

/**
 * Fired when the current playback position has changed
 *
 * During playback this is fired every 15-250 milliseconds, depending on the
 * playback technology in use.
 * @event timeupdate
 */
vjs.Player.prototype.onTimeUpdate;

/**
 * Fired while the user agent is downloading media data
 * @event progress
 */
vjs.Player.prototype.onProgress = function(){
  // Add custom event for when source is finished downloading.
  if (this.bufferedPercent() == 1) {
    this.trigger('loadedalldata');
  }
};

/**
 * Fired when the end of the media resource is reached (currentTime == duration)
 * @event ended
 */
vjs.Player.prototype.onEnded = function(){
  this.addClass('vjs-ended');
  if (this.options_['loop']) {
    this.currentTime(0);
    this.play();
  } else if (!this.paused()) {
    this.pause();
  }
};

/**
 * Fired when the duration of the media resource is first known or changed
 * @event durationchange
 */
vjs.Player.prototype.onDurationChange = function(){
  // Allows for caching value instead of asking player each time.
  // We need to get the techGet response and check for a value so we don't
  // accidentally cause the stack to blow up.
  var duration = this.techGet('duration');
  if (duration) {
    if (duration < 0) {
      duration = Infinity;
    }
    this.duration(duration);
    // Determine if the stream is live and propagate styles down to UI.
    if (duration === Infinity) {
      this.addClass('vjs-live');
    } else {
      this.removeClass('vjs-live');
    }
  }
};

/**
 * Fired when the volume changes
 * @event volumechange
 */
vjs.Player.prototype.onVolumeChange;

/**
 * Fired when the player switches in or out of fullscreen mode
 * @event fullscreenchange
 */
vjs.Player.prototype.onFullscreenChange = function() {
  if (this.isFullscreen()) {
    this.addClass('vjs-fullscreen');
  } else {
    this.removeClass('vjs-fullscreen');
  }
};

/**
 * Fired when an error occurs
 * @event error
 */
vjs.Player.prototype.onError;

// /* Player API
// ================================================================================ */

/**
 * Object for cached values.
 * @private
 */
vjs.Player.prototype.cache_;

vjs.Player.prototype.getCache = function(){
  return this.cache_;
};

// Pass values to the playback tech
vjs.Player.prototype.techCall = function(method, arg){
  // If it's not ready yet, call method when it is
  if (this.tech && !this.tech.isReady_) {
    this.tech.ready(function(){
      this[method](arg);
    });

  // Otherwise call method now
  } else {
    try {
      this.tech[method](arg);
    } catch(e) {
      vjs.log(e);
      throw e;
    }
  }
};

// Get calls can't wait for the tech, and sometimes don't need to.
vjs.Player.prototype.techGet = function(method){
  if (this.tech && this.tech.isReady_) {

    // Flash likes to die and reload when you hide or reposition it.
    // In these cases the object methods go away and we get errors.
    // When that happens we'll catch the errors and inform tech that it's not ready any more.
    try {
      return this.tech[method]();
    } catch(e) {
      // When building additional tech libs, an expected method may not be defined yet
      if (this.tech[method] === undefined) {
        vjs.log('Video.js: ' + method + ' method not defined for '+this.techName+' playback technology.', e);
      } else {
        // When a method isn't available on the object it throws a TypeError
        if (e.name == 'TypeError') {
          vjs.log('Video.js: ' + method + ' unavailable on '+this.techName+' playback technology element.', e);
          this.tech.isReady_ = false;
        } else {
          vjs.log(e);
        }
      }
      throw e;
    }
  }

  return;
};

/**
 * start media playback
 *
 *     myPlayer.play();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.play = function(){
  this.techCall('play');
  return this;
};

/**
 * Pause the video playback
 *
 *     myPlayer.pause();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.pause = function(){
  this.techCall('pause');
  return this;
};

/**
 * Check if the player is paused
 *
 *     var isPaused = myPlayer.paused();
 *     var isPlaying = !myPlayer.paused();
 *
 * @return {Boolean} false if the media is currently playing, or true otherwise
 */
vjs.Player.prototype.paused = function(){
  // The initial state of paused should be true (in Safari it's actually false)
  return (this.techGet('paused') === false) ? false : true;
};

/**
 * Get or set the current time (in seconds)
 *
 *     // get
 *     var whereYouAt = myPlayer.currentTime();
 *
 *     // set
 *     myPlayer.currentTime(120); // 2 minutes into the video
 *
 * @param  {Number|String=} seconds The time to seek to
 * @return {Number}        The time in seconds, when not setting
 * @return {vjs.Player}    self, when the current time is set
 */
vjs.Player.prototype.currentTime = function(seconds){
  if (seconds !== undefined) {

    this.techCall('setCurrentTime', seconds);

    return this;
  }

  // cache last currentTime and return. default to 0 seconds
  //
  // Caching the currentTime is meant to prevent a massive amount of reads on the tech's
  // currentTime when scrubbing, but may not provide much performance benefit afterall.
  // Should be tested. Also something has to read the actual current time or the cache will
  // never get updated.
  return this.cache_.currentTime = (this.techGet('currentTime') || 0);
};

/**
 * Get the length in time of the video in seconds
 *
 *     var lengthOfVideo = myPlayer.duration();
 *
 * **NOTE**: The video must have started loading before the duration can be
 * known, and in the case of Flash, may not be known until the video starts
 * playing.
 *
 * @return {Number} The duration of the video in seconds
 */
vjs.Player.prototype.duration = function(seconds){
  if (seconds !== undefined) {

    // cache the last set value for optimized scrubbing (esp. Flash)
    this.cache_.duration = parseFloat(seconds);

    return this;
  }

  if (this.cache_.duration === undefined) {
    this.onDurationChange();
  }

  return this.cache_.duration || 0;
};

/**
 * Calculates how much time is left.
 *
 *     var timeLeft = myPlayer.remainingTime();
 *
 * Not a native video element function, but useful
 * @return {Number} The time remaining in seconds
 */
vjs.Player.prototype.remainingTime = function(){
  return this.duration() - this.currentTime();
};

// http://dev.w3.org/html5/spec/video.html#dom-media-buffered
// Buffered returns a timerange object.
// Kind of like an array of portions of the video that have been downloaded.

/**
 * Get a TimeRange object with the times of the video that have been downloaded
 *
 * If you just want the percent of the video that's been downloaded,
 * use bufferedPercent.
 *
 *     // Number of different ranges of time have been buffered. Usually 1.
 *     numberOfRanges = bufferedTimeRange.length,
 *
 *     // Time in seconds when the first range starts. Usually 0.
 *     firstRangeStart = bufferedTimeRange.start(0),
 *
 *     // Time in seconds when the first range ends
 *     firstRangeEnd = bufferedTimeRange.end(0),
 *
 *     // Length in seconds of the first time range
 *     firstRangeLength = firstRangeEnd - firstRangeStart;
 *
 * @return {Object} A mock TimeRange object (following HTML spec)
 */
vjs.Player.prototype.buffered = function(){
  var buffered = this.techGet('buffered');

  if (!buffered || !buffered.length) {
    buffered = vjs.createTimeRange(0,0);
  }

  return buffered;
};

/**
 * Get the percent (as a decimal) of the video that's been downloaded
 *
 *     var howMuchIsDownloaded = myPlayer.bufferedPercent();
 *
 * 0 means none, 1 means all.
 * (This method isn't in the HTML5 spec, but it's very convenient)
 *
 * @return {Number} A decimal between 0 and 1 representing the percent
 */
vjs.Player.prototype.bufferedPercent = function(){
  var duration = this.duration(),
      buffered = this.buffered(),
      bufferedDuration = 0,
      start, end;

  if (!duration) {
    return 0;
  }

  for (var i=0; i<buffered.length; i++){
    start = buffered.start(i);
    end   = buffered.end(i);

    // buffered end can be bigger than duration by a very small fraction
    if (end > duration) {
      end = duration;
    }

    bufferedDuration += end - start;
  }

  return bufferedDuration / duration;
};

/**
 * Get the ending time of the last buffered time range
 *
 * This is used in the progress bar to encapsulate all time ranges.
 * @return {Number} The end of the last buffered time range
 */
vjs.Player.prototype.bufferedEnd = function(){
  var buffered = this.buffered(),
      duration = this.duration(),
      end = buffered.end(buffered.length-1);

  if (end > duration) {
    end = duration;
  }

  return end;
};

/**
 * Get or set the current volume of the media
 *
 *     // get
 *     var howLoudIsIt = myPlayer.volume();
 *
 *     // set
 *     myPlayer.volume(0.5); // Set volume to half
 *
 * 0 is off (muted), 1.0 is all the way up, 0.5 is half way.
 *
 * @param  {Number} percentAsDecimal The new volume as a decimal percent
 * @return {Number}                  The current volume, when getting
 * @return {vjs.Player}              self, when setting
 */
vjs.Player.prototype.volume = function(percentAsDecimal){
  var vol;

  if (percentAsDecimal !== undefined) {
    vol = Math.max(0, Math.min(1, parseFloat(percentAsDecimal))); // Force value to between 0 and 1
    this.cache_.volume = vol;
    this.techCall('setVolume', vol);
    vjs.setLocalStorage('volume', vol);
    return this;
  }

  // Default to 1 when returning current volume.
  vol = parseFloat(this.techGet('volume'));
  return (isNaN(vol)) ? 1 : vol;
};


/**
 * Get the current muted state, or turn mute on or off
 *
 *     // get
 *     var isVolumeMuted = myPlayer.muted();
 *
 *     // set
 *     myPlayer.muted(true); // mute the volume
 *
 * @param  {Boolean=} muted True to mute, false to unmute
 * @return {Boolean} True if mute is on, false if not, when getting
 * @return {vjs.Player} self, when setting mute
 */
vjs.Player.prototype.muted = function(muted){
  if (muted !== undefined) {
    this.techCall('setMuted', muted);
    return this;
  }
  return this.techGet('muted') || false; // Default to false
};

// Check if current tech can support native fullscreen
// (e.g. with built in controls like iOS, so not our flash swf)
vjs.Player.prototype.supportsFullScreen = function(){
  return this.techGet('supportsFullScreen') || false;
};

/**
 * is the player in fullscreen
 * @type {Boolean}
 * @private
 */
vjs.Player.prototype.isFullscreen_ = false;

/**
 * Check if the player is in fullscreen mode
 *
 *     // get
 *     var fullscreenOrNot = myPlayer.isFullscreen();
 *
 *     // set
 *     myPlayer.isFullscreen(true); // tell the player it's in fullscreen
 *
 * NOTE: As of the latest HTML5 spec, isFullscreen is no longer an official
 * property and instead document.fullscreenElement is used. But isFullscreen is
 * still a valuable property for internal player workings.
 *
 * @param  {Boolean=} isFS Update the player's fullscreen state
 * @return {Boolean} true if fullscreen, false if not
 * @return {vjs.Player} self, when setting
 */
vjs.Player.prototype.isFullscreen = function(isFS){
  if (isFS !== undefined) {
    this.isFullscreen_ = !!isFS;
    return this;
  }
  return this.isFullscreen_;
};

/**
 * Old naming for isFullscreen()
 * @deprecated for lowercase 's' version
 */
vjs.Player.prototype.isFullScreen = function(isFS){
  vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")');
  return this.isFullscreen(isFS);
};

/**
 * Increase the size of the video to full screen
 *
 *     myPlayer.requestFullscreen();
 *
 * In some browsers, full screen is not supported natively, so it enters
 * "full window mode", where the video fills the browser window.
 * In browsers and devices that support native full screen, sometimes the
 * browser's default controls will be shown, and not the Video.js custom skin.
 * This includes most mobile devices (iOS, Android) and older versions of
 * Safari.
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.requestFullscreen = function(){
  var fsApi = vjs.browser.fullscreenAPI;

  this.isFullscreen(true);

  if (fsApi) {
    // the browser supports going fullscreen at the element level so we can
    // take the controls fullscreen as well as the video

    // Trigger fullscreenchange event after change
    // We have to specifically add this each time, and remove
    // when canceling fullscreen. Otherwise if there's multiple
    // players on a page, they would all be reacting to the same fullscreen
    // events
    vjs.on(document, fsApi['fullscreenchange'], vjs.bind(this, function(e){
      this.isFullscreen(document[fsApi.fullscreenElement]);

      // If cancelling fullscreen, remove event listener.
      if (this.isFullscreen() === false) {
        vjs.off(document, fsApi['fullscreenchange'], arguments.callee);
      }

      this.trigger('fullscreenchange');
    }));

    this.el_[fsApi.requestFullscreen]();

  } else if (this.tech.supportsFullScreen()) {
    // we can't take the video.js controls fullscreen but we can go fullscreen
    // with native controls
    this.techCall('enterFullScreen');
  } else {
    // fullscreen isn't supported so we'll just stretch the video element to
    // fill the viewport
    this.enterFullWindow();
    this.trigger('fullscreenchange');
  }

  return this;
};

/**
 * Old naming for requestFullscreen
 * @deprecated for lower case 's' version
 */
vjs.Player.prototype.requestFullScreen = function(){
  vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")');
  return this.requestFullscreen();
};


/**
 * Return the video to its normal size after having been in full screen mode
 *
 *     myPlayer.exitFullscreen();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.exitFullscreen = function(){
  var fsApi = vjs.browser.fullscreenAPI;
  this.isFullscreen(false);

  // Check for browser element fullscreen support
  if (fsApi) {
    document[fsApi.exitFullscreen]();
  } else if (this.tech.supportsFullScreen()) {
   this.techCall('exitFullScreen');
  } else {
   this.exitFullWindow();
   this.trigger('fullscreenchange');
  }

  return this;
};

/**
 * Old naming for exitFullscreen
 * @deprecated for exitFullscreen
 */
vjs.Player.prototype.cancelFullScreen = function(){
  vjs.log.warn('player.cancelFullScreen() has been deprecated, use player.exitFullscreen()');
  return this.exitFullscreen();
};

// When fullscreen isn't supported we can stretch the video container to as wide as the browser will let us.
vjs.Player.prototype.enterFullWindow = function(){
  this.isFullWindow = true;

  // Storing original doc overflow value to return to when fullscreen is off
  this.docOrigOverflow = document.documentElement.style.overflow;

  // Add listener for esc key to exit fullscreen
  vjs.on(document, 'keydown', vjs.bind(this, this.fullWindowOnEscKey));

  // Hide any scroll bars
  document.documentElement.style.overflow = 'hidden';

  // Apply fullscreen styles
  vjs.addClass(document.body, 'vjs-full-window');

  this.trigger('enterFullWindow');
};
vjs.Player.prototype.fullWindowOnEscKey = function(event){
  if (event.keyCode === 27) {
    if (this.isFullscreen() === true) {
      this.exitFullscreen();
    } else {
      this.exitFullWindow();
    }
  }
};

vjs.Player.prototype.exitFullWindow = function(){
  this.isFullWindow = false;
  vjs.off(document, 'keydown', this.fullWindowOnEscKey);

  // Unhide scroll bars.
  document.documentElement.style.overflow = this.docOrigOverflow;

  // Remove fullscreen styles
  vjs.removeClass(document.body, 'vjs-full-window');

  // Resize the box, controller, and poster to original sizes
  // this.positionAll();
  this.trigger('exitFullWindow');
};

vjs.Player.prototype.selectSource = function(sources){
  // Loop through each playback technology in the options order
  for (var i=0,j=this.options_['techOrder'];i<j.length;i++) {
    var techName = vjs.capitalize(j[i]),
        tech = window['videojs'][techName];

    // Check if the current tech is defined before continuing
    if (!tech) {
      vjs.log.error('The "' + techName + '" tech is undefined. Skipped browser support check for that tech.');
      continue;
    }

    // Check if the browser supports this technology
    if (tech.isSupported()) {
      // Loop through each source object
      for (var a=0,b=sources;a<b.length;a++) {
        var source = b[a];

        // Check if source can be played with this technology
        if (tech['canPlaySource'](source)) {
          return { source: source, tech: techName };
        }
      }
    }
  }

  return false;
};

/**
 * The source function updates the video source
 *
 * There are three types of variables you can pass as the argument.
 *
 * **URL String**: A URL to the the video file. Use this method if you are sure
 * the current playback technology (HTML5/Flash) can support the source you
 * provide. Currently only MP4 files can be used in both HTML5 and Flash.
 *
 *     myPlayer.src("http://www.example.com/path/to/video.mp4");
 *
 * **Source Object (or element):** A javascript object containing information
 * about the source file. Use this method if you want the player to determine if
 * it can support the file using the type information.
 *
 *     myPlayer.src({ type: "video/mp4", src: "http://www.example.com/path/to/video.mp4" });
 *
 * **Array of Source Objects:** To provide multiple versions of the source so
 * that it can be played using HTML5 across browsers you can use an array of
 * source objects. Video.js will detect which version is supported and load that
 * file.
 *
 *     myPlayer.src([
 *       { type: "video/mp4", src: "http://www.example.com/path/to/video.mp4" },
 *       { type: "video/webm", src: "http://www.example.com/path/to/video.webm" },
 *       { type: "video/ogg", src: "http://www.example.com/path/to/video.ogv" }
 *     ]);
 *
 * @param  {String|Object|Array=} source The source URL, object, or array of sources
 * @return {String} The current video source when getting
 * @return {String} The player when setting
 */
vjs.Player.prototype.src = function(source){
  if (source === undefined) {
    return this.techGet('src');
  }

  // case: Array of source objects to choose from and pick the best to play
  if (vjs.obj.isArray(source)) {
    this.sourceList_(source);

  // case: URL String (http://myvideo...)
  } else if (typeof source === 'string') {
    // create a source object from the string
    this.src({ src: source });

  // case: Source object { src: '', type: '' ... }
  } else if (source instanceof Object) {
    // check if the source has a type and the loaded tech cannot play the source
    // if there's no type we'll just try the current tech
    if (source.type && !window['videojs'][this.techName]['canPlaySource'](source)) {
      // create a source list with the current source and send through
      // the tech loop to check for a compatible technology
      this.sourceList_([source]);
    } else {
      this.cache_.src = source.src;
      this.currentType_ = source.type || '';

      // wait until the tech is ready to set the source
      this.ready(function(){

        // The setSource tech method was added with source handlers
        // so older techs won't support it
        // We need to check the direct prototype for the case where subclasses
        // of the tech do not support source handlers
        if (window['videojs'][this.techName].prototype.hasOwnProperty('setSource')) {
          this.techCall('setSource', source);
        } else {
          this.techCall('src', source.src);
        }

        if (this.options_['preload'] == 'auto') {
          this.load();
        }

        if (this.options_['autoplay']) {
          this.play();
        }
      });
    }
  }

  return this;
};

/**
 * Handle an array of source objects
 * @param  {[type]} sources Array of source objects
 * @private
 */
vjs.Player.prototype.sourceList_ = function(sources){
  var sourceTech = this.selectSource(sources);

  if (sourceTech) {
    if (sourceTech.tech === this.techName) {
      // if this technology is already loaded, set the source
      this.src(sourceTech.source);
    } else {
      // load this technology with the chosen source
      this.loadTech(sourceTech.tech, sourceTech.source);
    }
  } else {
    // We need to wrap this in a timeout to give folks a chance to add error event handlers
    this.setTimeout( function() {
      this.error({ code: 4, message: this.localize(this.options()['notSupportedMessage']) });
    }, 0);

    // we could not find an appropriate tech, but let's still notify the delegate that this is it
    // this needs a better comment about why this is needed
    this.triggerReady();
  }
};

/**
 * Begin loading the src data.
 * @return {vjs.Player} Returns the player
 */
vjs.Player.prototype.load = function(){
  this.techCall('load');
  return this;
};

/**
 * Returns the fully qualified URL of the current source value e.g. http://mysite.com/video.mp4
 * Can be used in conjuction with `currentType` to assist in rebuilding the current source object.
 * @return {String} The current source
 */
vjs.Player.prototype.currentSrc = function(){
  return this.techGet('currentSrc') || this.cache_.src || '';
};

/**
 * Get the current source type e.g. video/mp4
 * This can allow you rebuild the current source object so that you could load the same
 * source and tech later
 * @return {String} The source MIME type
 */
vjs.Player.prototype.currentType = function(){
    return this.currentType_ || '';
};

/**
 * Get or set the preload attribute.
 * @return {String} The preload attribute value when getting
 * @return {vjs.Player} Returns the player when setting
 */
vjs.Player.prototype.preload = function(value){
  if (value !== undefined) {
    this.techCall('setPreload', value);
    this.options_['preload'] = value;
    return this;
  }
  return this.techGet('preload');
};

/**
 * Get or set the autoplay attribute.
 * @return {String} The autoplay attribute value when getting
 * @return {vjs.Player} Returns the player when setting
 */
vjs.Player.prototype.autoplay = function(value){
  if (value !== undefined) {
    this.techCall('setAutoplay', value);
    this.options_['autoplay'] = value;
    return this;
  }
  return this.techGet('autoplay', value);
};

/**
 * Get or set the loop attribute on the video element.
 * @return {String} The loop attribute value when getting
 * @return {vjs.Player} Returns the player when setting
 */
vjs.Player.prototype.loop = function(value){
  if (value !== undefined) {
    this.techCall('setLoop', value);
    this.options_['loop'] = value;
    return this;
  }
  return this.techGet('loop');
};

/**
 * the url of the poster image source
 * @type {String}
 * @private
 */
vjs.Player.prototype.poster_;

/**
 * get or set the poster image source url
 *
 * ##### EXAMPLE:
 *
 *     // getting
 *     var currentPoster = myPlayer.poster();
 *
 *     // setting
 *     myPlayer.poster('http://example.com/myImage.jpg');
 *
 * @param  {String=} [src] Poster image source URL
 * @return {String} poster URL when getting
 * @return {vjs.Player} self when setting
 */
vjs.Player.prototype.poster = function(src){
  if (src === undefined) {
    return this.poster_;
  }

  // The correct way to remove a poster is to set as an empty string
  // other falsey values will throw errors
  if (!src) {
    src = '';
  }

  // update the internal poster variable
  this.poster_ = src;

  // update the tech's poster
  this.techCall('setPoster', src);

  // alert components that the poster has been set
  this.trigger('posterchange');

  return this;
};

/**
 * Whether or not the controls are showing
 * @type {Boolean}
 * @private
 */
vjs.Player.prototype.controls_;

/**
 * Get or set whether or not the controls are showing.
 * @param  {Boolean} controls Set controls to showing or not
 * @return {Boolean}    Controls are showing
 */
vjs.Player.prototype.controls = function(bool){
  if (bool !== undefined) {
    bool = !!bool; // force boolean
    // Don't trigger a change event unless it actually changed
    if (this.controls_ !== bool) {
      this.controls_ = bool;
      if (bool) {
        this.removeClass('vjs-controls-disabled');
        this.addClass('vjs-controls-enabled');
        this.trigger('controlsenabled');
      } else {
        this.removeClass('vjs-controls-enabled');
        this.addClass('vjs-controls-disabled');
        this.trigger('controlsdisabled');
      }
    }
    return this;
  }
  return this.controls_;
};

vjs.Player.prototype.usingNativeControls_;

/**
 * Toggle native controls on/off. Native controls are the controls built into
 * devices (e.g. default iPhone controls), Flash, or other techs
 * (e.g. Vimeo Controls)
 *
 * **This should only be set by the current tech, because only the tech knows
 * if it can support native controls**
 *
 * @param  {Boolean} bool    True signals that native controls are on
 * @return {vjs.Player}      Returns the player
 * @private
 */
vjs.Player.prototype.usingNativeControls = function(bool){
  if (bool !== undefined) {
    bool = !!bool; // force boolean
    // Don't trigger a change event unless it actually changed
    if (this.usingNativeControls_ !== bool) {
      this.usingNativeControls_ = bool;
      if (bool) {
        this.addClass('vjs-using-native-controls');

        /**
         * player is using the native device controls
         *
         * @event usingnativecontrols
         * @memberof vjs.Player
         * @instance
         * @private
         */
        this.trigger('usingnativecontrols');
      } else {
        this.removeClass('vjs-using-native-controls');

        /**
         * player is using the custom HTML controls
         *
         * @event usingcustomcontrols
         * @memberof vjs.Player
         * @instance
         * @private
         */
        this.trigger('usingcustomcontrols');
      }
    }
    return this;
  }
  return this.usingNativeControls_;
};

/**
 * Store the current media error
 * @type {Object}
 * @private
 */
vjs.Player.prototype.error_ = null;

/**
 * Set or get the current MediaError
 * @param  {*} err A MediaError or a String/Number to be turned into a MediaError
 * @return {vjs.MediaError|null}     when getting
 * @return {vjs.Player}              when setting
 */
vjs.Player.prototype.error = function(err){
  if (err === undefined) {
    return this.error_;
  }

  // restoring to default
  if (err === null) {
    this.error_ = err;
    this.removeClass('vjs-error');
    return this;
  }

  // error instance
  if (err instanceof vjs.MediaError) {
    this.error_ = err;
  } else {
    this.error_ = new vjs.MediaError(err);
  }

  // fire an error event on the player
  this.trigger('error');

  // add the vjs-error classname to the player
  this.addClass('vjs-error');

  // log the name of the error type and any message
  // ie8 just logs "[object object]" if you just log the error object
  vjs.log.error('(CODE:'+this.error_.code+' '+vjs.MediaError.errorTypes[this.error_.code]+')', this.error_.message, this.error_);

  return this;
};

/**
 * Returns whether or not the player is in the "ended" state.
 * @return {Boolean} True if the player is in the ended state, false if not.
 */
vjs.Player.prototype.ended = function(){ return this.techGet('ended'); };

/**
 * Returns whether or not the player is in the "seeking" state.
 * @return {Boolean} True if the player is in the seeking state, false if not.
 */
vjs.Player.prototype.seeking = function(){ return this.techGet('seeking'); };

/**
 * Returns the TimeRanges of the media that are currently available
 * for seeking to.
 * @return {TimeRanges} the seekable intervals of the media timeline
 */
vjs.Player.prototype.seekable = function(){ return this.techGet('seekable'); };

// When the player is first initialized, trigger activity so components
// like the control bar show themselves if needed
vjs.Player.prototype.userActivity_ = true;
vjs.Player.prototype.reportUserActivity = function(event){
  this.userActivity_ = true;
};

vjs.Player.prototype.userActive_ = true;
vjs.Player.prototype.userActive = function(bool){
  if (bool !== undefined) {
    bool = !!bool;
    if (bool !== this.userActive_) {
      this.userActive_ = bool;
      if (bool) {
        // If the user was inactive and is now active we want to reset the
        // inactivity timer
        this.userActivity_ = true;
        this.removeClass('vjs-user-inactive');
        this.addClass('vjs-user-active');
        this.trigger('useractive');
      } else {
        // We're switching the state to inactive manually, so erase any other
        // activity
        this.userActivity_ = false;

        // Chrome/Safari/IE have bugs where when you change the cursor it can
        // trigger a mousemove event. This causes an issue when you're hiding
        // the cursor when the user is inactive, and a mousemove signals user
        // activity. Making it impossible to go into inactive mode. Specifically
        // this happens in fullscreen when we really need to hide the cursor.
        //
        // When this gets resolved in ALL browsers it can be removed
        // https://code.google.com/p/chromium/issues/detail?id=103041
        if(this.tech) {
          this.tech.one('mousemove', function(e){
            e.stopPropagation();
            e.preventDefault();
          });
        }

        this.removeClass('vjs-user-active');
        this.addClass('vjs-user-inactive');
        this.trigger('userinactive');
      }
    }
    return this;
  }
  return this.userActive_;
};

vjs.Player.prototype.listenForUserActivity = function(){
  var onActivity, onMouseMove, onMouseDown, mouseInProgress, onMouseUp,
      activityCheck, inactivityTimeout, lastMoveX, lastMoveY;

  onActivity = vjs.bind(this, this.reportUserActivity);

  onMouseMove = function(e) {
    // #1068 - Prevent mousemove spamming
    // Chrome Bug: https://code.google.com/p/chromium/issues/detail?id=366970
    if(e.screenX != lastMoveX || e.screenY != lastMoveY) {
      lastMoveX = e.screenX;
      lastMoveY = e.screenY;
      onActivity();
    }
  };

  onMouseDown = function() {
    onActivity();
    // For as long as the they are touching the device or have their mouse down,
    // we consider them active even if they're not moving their finger or mouse.
    // So we want to continue to update that they are active
    this.clearInterval(mouseInProgress);
    // Setting userActivity=true now and setting the interval to the same time
    // as the activityCheck interval (250) should ensure we never miss the
    // next activityCheck
    mouseInProgress = this.setInterval(onActivity, 250);
  };

  onMouseUp = function(event) {
    onActivity();
    // Stop the interval that maintains activity if the mouse/touch is down
    this.clearInterval(mouseInProgress);
  };

  // Any mouse movement will be considered user activity
  this.on('mousedown', onMouseDown);
  this.on('mousemove', onMouseMove);
  this.on('mouseup', onMouseUp);

  // Listen for keyboard navigation
  // Shouldn't need to use inProgress interval because of key repeat
  this.on('keydown', onActivity);
  this.on('keyup', onActivity);

  // Run an interval every 250 milliseconds instead of stuffing everything into
  // the mousemove/touchmove function itself, to prevent performance degradation.
  // `this.reportUserActivity` simply sets this.userActivity_ to true, which
  // then gets picked up by this loop
  // http://ejohn.org/blog/learning-from-twitter/
  activityCheck = this.setInterval(function() {
    // Check to see if mouse/touch activity has happened
    if (this.userActivity_) {
      // Reset the activity tracker
      this.userActivity_ = false;

      // If the user state was inactive, set the state to active
      this.userActive(true);

      // Clear any existing inactivity timeout to start the timer over
      this.clearTimeout(inactivityTimeout);

      var timeout = this.options()['inactivityTimeout'];
      if (timeout > 0) {
          // In <timeout> milliseconds, if no more activity has occurred the
          // user will be considered inactive
          inactivityTimeout = this.setTimeout(function () {
              // Protect against the case where the inactivityTimeout can trigger just
              // before the next user activity is picked up by the activityCheck loop
              // causing a flicker
              if (!this.userActivity_) {
                  this.userActive(false);
              }
          }, timeout);
      }
    }
  }, 250);
};

/**
 * Gets or sets the current playback rate.
 * @param  {Boolean} rate   New playback rate to set.
 * @return {Number}         Returns the new playback rate when setting
 * @return {Number}         Returns the current playback rate when getting
 */
vjs.Player.prototype.playbackRate = function(rate) {
  if (rate !== undefined) {
    this.techCall('setPlaybackRate', rate);
    return this;
  }

  if (this.tech && this.tech['featuresPlaybackRate']) {
    return this.techGet('playbackRate');
  } else {
    return 1.0;
  }

};

/**
 * Store the current audio state
 * @type {Boolean}
 * @private
 */
vjs.Player.prototype.isAudio_ = false;

/**
 * Gets or sets the audio flag
 *
 * @param  {Boolean} bool    True signals that this is an audio player.
 * @return {Boolean}         Returns true if player is audio, false if not when getting
 * @return {vjs.Player}      Returns the player if setting
 * @private
 */
vjs.Player.prototype.isAudio = function(bool) {
  if (bool !== undefined) {
    this.isAudio_ = !!bool;
    return this;
  }

  return this.isAudio_;
};

/**
 * Returns the current state of network activity for the element, from
 * the codes in the list below.
 * - NETWORK_EMPTY (numeric value 0)
 *   The element has not yet been initialised. All attributes are in
 *   their initial states.
 * - NETWORK_IDLE (numeric value 1)
 *   The element's resource selection algorithm is active and has
 *   selected a resource, but it is not actually using the network at
 *   this time.
 * - NETWORK_LOADING (numeric value 2)
 *   The user agent is actively trying to download data.
 * - NETWORK_NO_SOURCE (numeric value 3)
 *   The element's resource selection algorithm is active, but it has
 *   not yet found a resource to use.
 * @return {Number} the current network activity state
 * @see https://html.spec.whatwg.org/multipage/embedded-content.html#network-states
 */
vjs.Player.prototype.networkState = function(){
  return this.techGet('networkState');
};

/**
 * Returns a value that expresses the current state of the element
 * with respect to rendering the current playback position, from the
 * codes in the list below.
 * - HAVE_NOTHING (numeric value 0)
 *   No information regarding the media resource is available.
 * - HAVE_METADATA (numeric value 1)
 *   Enough of the resource has been obtained that the duration of the
 *   resource is available.
 * - HAVE_CURRENT_DATA (numeric value 2)
 *   Data for the immediate current playback position is available.
 * - HAVE_FUTURE_DATA (numeric value 3)
 *   Data for the immediate current playback position is available, as
 *   well as enough data for the user agent to advance the current
 *   playback position in the direction of playback.
 * - HAVE_ENOUGH_DATA (numeric value 4)
 *   The user agent estimates that enough data is available for
 *   playback to proceed uninterrupted.
 * @return {Number} the current playback rendering state
 * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-readystate
 */
vjs.Player.prototype.readyState = function(){
  return this.techGet('readyState');
};

/**
 * Text tracks are tracks of timed text events.
 * Captions - text displayed over the video for the hearing impaired
 * Subtitles - text displayed over the video for those who don't understand language in the video
 * Chapters - text displayed in a menu allowing the user to jump to particular points (chapters) in the video
 * Descriptions (not supported yet) - audio descriptions that are read back to the user by a screen reading device
 */

/**
 * Get an array of associated text tracks. captions, subtitles, chapters, descriptions
 * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks
 * @return {Array}           Array of track objects
 */
vjs.Player.prototype.textTracks = function(){
  // cannot use techGet directly because it checks to see whether the tech is ready.
  // Flash is unlikely to be ready in time but textTracks should still work.
  return this.tech && this.tech['textTracks']();
};

vjs.Player.prototype.remoteTextTracks = function() {
  return this.tech && this.tech['remoteTextTracks']();
};

/**
 * Add a text track
 * In addition to the W3C settings we allow adding additional info through options.
 * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack
 * @param {String}  kind        Captions, subtitles, chapters, descriptions, or metadata
 * @param {String=} label       Optional label
 * @param {String=} language    Optional language
 */
vjs.Player.prototype.addTextTrack = function(kind, label, language) {
  return this.tech && this.tech['addTextTrack'](kind, label, language);
};

vjs.Player.prototype.addRemoteTextTrack = function(options) {
  return this.tech && this.tech['addRemoteTextTrack'](options);
};

vjs.Player.prototype.removeRemoteTextTrack = function(track) {
  this.tech && this.tech['removeRemoteTextTrack'](track);
};

// Methods to add support for
// initialTime: function(){ return this.techCall('initialTime'); },
// startOffsetTime: function(){ return this.techCall('startOffsetTime'); },
// played: function(){ return this.techCall('played'); },
// seekable: function(){ return this.techCall('seekable'); },
// videoTracks: function(){ return this.techCall('videoTracks'); },
// audioTracks: function(){ return this.techCall('audioTracks'); },
// videoWidth: function(){ return this.techCall('videoWidth'); },
// videoHeight: function(){ return this.techCall('videoHeight'); },
// defaultPlaybackRate: function(){ return this.techCall('defaultPlaybackRate'); },
// mediaGroup: function(){ return this.techCall('mediaGroup'); },
// controller: function(){ return this.techCall('controller'); },
// defaultMuted: function(){ return this.techCall('defaultMuted'); }

// TODO
// currentSrcList: the array of sources including other formats and bitrates
// playList: array of source lists in order of playback
/**
 * Container of main controls
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 * @extends vjs.Component
 */
vjs.ControlBar = vjs.Component.extend();

vjs.ControlBar.prototype.options_ = {
  loadEvent: 'play',
  children: {
    'playToggle': {},
    'currentTimeDisplay': {},
    'timeDivider': {},
    'durationDisplay': {},
    'remainingTimeDisplay': {},
    'liveDisplay': {},
    'progressControl': {},
    'fullscreenToggle': {},
    'volumeControl': {},
    'muteToggle': {},
    // 'volumeMenuButton': {},
    'playbackRateMenuButton': {},
    'subtitlesButton': {},
    'captionsButton': {},
    'chaptersButton': {}
  }
};

vjs.ControlBar.prototype.createEl = function(){
  return vjs.createEl('div', {
    className: 'vjs-control-bar'
  });
};
/**
 * Displays the live indicator
 * TODO - Future make it click to snap to live
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.LiveDisplay = vjs.Component.extend({
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.LiveDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-live-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-live-display',
    innerHTML: '<span class="vjs-control-text">' + this.localize('Stream Type') + '</span>' + this.localize('LIVE'),
    'aria-live': 'off'
  });

  el.appendChild(this.contentEl_);

  return el;
};
/**
 * Button to toggle between play and pause
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.PlayToggle = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    this.on(player, 'play', this.onPlay);
    this.on(player, 'pause', this.onPause);
  }
});

vjs.PlayToggle.prototype.buttonText = 'Play';

vjs.PlayToggle.prototype.buildCSSClass = function(){
  return 'vjs-play-control ' + vjs.Button.prototype.buildCSSClass.call(this);
};

// OnClick - Toggle between play and pause
vjs.PlayToggle.prototype.onClick = function(){
  if (this.player_.paused()) {
    this.player_.play();
  } else {
    this.player_.pause();
  }
};

  // OnPlay - Add the vjs-playing class to the element so it can change appearance
vjs.PlayToggle.prototype.onPlay = function(){
  this.removeClass('vjs-paused');
  this.addClass('vjs-playing');
  this.el_.children[0].children[0].innerHTML = this.localize('Pause'); // change the button text to "Pause"
};

  // OnPause - Add the vjs-paused class to the element so it can change appearance
vjs.PlayToggle.prototype.onPause = function(){
  this.removeClass('vjs-playing');
  this.addClass('vjs-paused');
  this.el_.children[0].children[0].innerHTML = this.localize('Play'); // change the button text to "Play"
};
/**
 * Displays the current time
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.CurrentTimeDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.on(player, 'timeupdate', this.updateContent);
  }
});

vjs.CurrentTimeDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-current-time vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-current-time-display',
    innerHTML: '<span class="vjs-control-text">Current Time </span>' + '0:00', // label the current time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.CurrentTimeDisplay.prototype.updateContent = function(){
  // Allows for smooth scrubbing, when player can't keep up.
  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize('Current Time') + '</span> ' + vjs.formatTime(time, this.player_.duration());
};

/**
 * Displays the duration
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.DurationDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // this might need to be changed to 'durationchange' instead of 'timeupdate' eventually,
    // however the durationchange event fires before this.player_.duration() is set,
    // so the value cannot be written out using this method.
    // Once the order of durationchange and this.player_.duration() being set is figured out,
    // this can be updated.
    this.on(player, 'timeupdate', this.updateContent);
    this.on(player, 'loadedmetadata', this.updateContent);
  }
});

vjs.DurationDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-duration vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-duration-display',
    innerHTML: '<span class="vjs-control-text">' + this.localize('Duration Time') + '</span> ' + '0:00', // label the duration time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.DurationDisplay.prototype.updateContent = function(){
  var duration = this.player_.duration();
  if (duration) {
      this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize('Duration Time') + '</span> ' + vjs.formatTime(duration); // label the duration time for screen reader users
  }
};

/**
 * The separator between the current time and duration
 *
 * Can be hidden if it's not needed in the design.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.TimeDivider = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.TimeDivider.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-time-divider',
    innerHTML: '<div><span>/</span></div>'
  });
};

/**
 * Displays the time left in the video
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.RemainingTimeDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.on(player, 'timeupdate', this.updateContent);
  }
});

vjs.RemainingTimeDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-remaining-time vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-remaining-time-display',
    innerHTML: '<span class="vjs-control-text">' + this.localize('Remaining Time') + '</span> ' + '-0:00', // label the remaining time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.RemainingTimeDisplay.prototype.updateContent = function(){
  if (this.player_.duration()) {
    this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize('Remaining Time') + '</span> ' + '-'+ vjs.formatTime(this.player_.remainingTime());
  }

  // Allows for smooth scrubbing, when player can't keep up.
  // var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  // this.contentEl_.innerHTML = vjs.formatTime(time, this.player_.duration());
};
/**
 * Toggle fullscreen video
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @extends vjs.Button
 */
vjs.FullscreenToggle = vjs.Button.extend({
  /**
   * @constructor
   * @memberof vjs.FullscreenToggle
   * @instance
   */
  init: function(player, options){
    vjs.Button.call(this, player, options);
  }
});

vjs.FullscreenToggle.prototype.buttonText = 'Fullscreen';

vjs.FullscreenToggle.prototype.buildCSSClass = function(){
  return 'vjs-fullscreen-control ' + vjs.Button.prototype.buildCSSClass.call(this);
};

vjs.FullscreenToggle.prototype.onClick = function(){
  if (!this.player_.isFullscreen()) {
    this.player_.requestFullscreen();
    this.controlText_.innerHTML = this.localize('Non-Fullscreen');
  } else {
    this.player_.exitFullscreen();
    this.controlText_.innerHTML = this.localize('Fullscreen');
  }
};
/**
 * The Progress Control component contains the seek bar, load progress,
 * and play progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.ProgressControl = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.ProgressControl.prototype.options_ = {
  children: {
    'seekBar': {}
  }
};

vjs.ProgressControl.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-progress-control vjs-control'
  });
};

/**
 * Seek Bar and holder for the progress bars
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SeekBar = vjs.Slider.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Slider.call(this, player, options);
    this.on(player, 'timeupdate', this.updateARIAAttributes);
    player.ready(vjs.bind(this, this.updateARIAAttributes));
  }
});

vjs.SeekBar.prototype.options_ = {
  children: {
    'loadProgressBar': {},
    'playProgressBar': {},
    'seekHandle': {}
  },
  'barName': 'playProgressBar',
  'handleName': 'seekHandle'
};

vjs.SeekBar.prototype.playerEvent = 'timeupdate';

vjs.SeekBar.prototype.createEl = function(){
  return vjs.Slider.prototype.createEl.call(this, 'div', {
    className: 'vjs-progress-holder',
    'aria-label': 'video progress bar'
  });
};

vjs.SeekBar.prototype.updateARIAAttributes = function(){
    // Allows for smooth scrubbing, when player can't keep up.
    var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
    this.el_.setAttribute('aria-valuenow',vjs.round(this.getPercent()*100, 2)); // machine readable value of progress bar (percentage complete)
    this.el_.setAttribute('aria-valuetext',vjs.formatTime(time, this.player_.duration())); // human readable value of progress bar (time complete)
};

vjs.SeekBar.prototype.getPercent = function(){
  return this.player_.currentTime() / this.player_.duration();
};

vjs.SeekBar.prototype.onMouseDown = function(event){
  vjs.Slider.prototype.onMouseDown.call(this, event);

  this.player_.scrubbing = true;
  this.player_.addClass('vjs-scrubbing');

  this.videoWasPlaying = !this.player_.paused();
  this.player_.pause();
};

vjs.SeekBar.prototype.onMouseMove = function(event){
  var newTime = this.calculateDistance(event) * this.player_.duration();

  // Don't let video end while scrubbing.
  if (newTime == this.player_.duration()) { newTime = newTime - 0.1; }

  // Set new time (tell player to seek to new time)
  this.player_.currentTime(newTime);
};

vjs.SeekBar.prototype.onMouseUp = function(event){
  vjs.Slider.prototype.onMouseUp.call(this, event);

  this.player_.scrubbing = false;
  this.player_.removeClass('vjs-scrubbing');
  if (this.videoWasPlaying) {
    this.player_.play();
  }
};

vjs.SeekBar.prototype.stepForward = function(){
  this.player_.currentTime(this.player_.currentTime() + 5); // more quickly fast forward for keyboard-only users
};

vjs.SeekBar.prototype.stepBack = function(){
  this.player_.currentTime(this.player_.currentTime() - 5); // more quickly rewind for keyboard-only users
};

/**
 * Shows load progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.LoadProgressBar = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
    this.on(player, 'progress', this.update);
  }
});

vjs.LoadProgressBar.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-load-progress',
    innerHTML: '<span class="vjs-control-text"><span>' + this.localize('Loaded') + '</span>: 0%</span>'
  });
};

vjs.LoadProgressBar.prototype.update = function(){
  var i, start, end, part,
      buffered = this.player_.buffered(),
      duration = this.player_.duration(),
      bufferedEnd = this.player_.bufferedEnd(),
      children = this.el_.children,
      // get the percent width of a time compared to the total end
      percentify = function (time, end){
        var percent = (time / end) || 0; // no NaN
        return (percent * 100) + '%';
      };

  // update the width of the progress bar
  this.el_.style.width = percentify(bufferedEnd, duration);

  // add child elements to represent the individual buffered time ranges
  for (i = 0; i < buffered.length; i++) {
    start = buffered.start(i),
    end = buffered.end(i),
    part = children[i];

    if (!part) {
      part = this.el_.appendChild(vjs.createEl());
    }

    // set the percent based on the width of the progress bar (bufferedEnd)
    part.style.left = percentify(start, bufferedEnd);
    part.style.width = percentify(end - start, bufferedEnd);
  }

  // remove unused buffered range elements
  for (i = children.length; i > buffered.length; i--) {
    this.el_.removeChild(children[i-1]);
  }
};

/**
 * Shows play progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PlayProgressBar = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.PlayProgressBar.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-play-progress',
    innerHTML: '<span class="vjs-control-text"><span>' + this.localize('Progress') + '</span>: 0%</span>'
  });
};

/**
 * The Seek Handle shows the current position of the playhead during playback,
 * and can be dragged to adjust the playhead.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SeekHandle = vjs.SliderHandle.extend({
  init: function(player, options) {
    vjs.SliderHandle.call(this, player, options);
    this.on(player, 'timeupdate', this.updateContent);
  }
});

/**
 * The default value for the handle content, which may be read by screen readers
 *
 * @type {String}
 * @private
 */
vjs.SeekHandle.prototype.defaultValue = '00:00';

/** @inheritDoc */
vjs.SeekHandle.prototype.createEl = function() {
  return vjs.SliderHandle.prototype.createEl.call(this, 'div', {
    className: 'vjs-seek-handle',
    'aria-live': 'off'
  });
};

vjs.SeekHandle.prototype.updateContent = function() {
  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  this.el_.innerHTML = '<span class="vjs-control-text">' + vjs.formatTime(time, this.player_.duration()) + '</span>';
};
/**
 * The component for controlling the volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeControl = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // hide volume controls when they're not supported by the current tech
    if (player.tech && player.tech['featuresVolumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    this.on(player, 'loadstart', function(){
      if (player.tech['featuresVolumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    });
  }
});

vjs.VolumeControl.prototype.options_ = {
  children: {
    'volumeBar': {}
  }
};

vjs.VolumeControl.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-control vjs-control'
  });
};

/**
 * The bar that contains the volume level and can be clicked on to adjust the level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeBar = vjs.Slider.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Slider.call(this, player, options);
    this.on(player, 'volumechange', this.updateARIAAttributes);
    player.ready(vjs.bind(this, this.updateARIAAttributes));
  }
});

vjs.VolumeBar.prototype.updateARIAAttributes = function(){
  // Current value of volume bar as a percentage
  this.el_.setAttribute('aria-valuenow',vjs.round(this.player_.volume()*100, 2));
  this.el_.setAttribute('aria-valuetext',vjs.round(this.player_.volume()*100, 2)+'%');
};

vjs.VolumeBar.prototype.options_ = {
  children: {
    'volumeLevel': {},
    'volumeHandle': {}
  },
  'barName': 'volumeLevel',
  'handleName': 'volumeHandle'
};

vjs.VolumeBar.prototype.playerEvent = 'volumechange';

vjs.VolumeBar.prototype.createEl = function(){
  return vjs.Slider.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-bar',
    'aria-label': 'volume level'
  });
};

vjs.VolumeBar.prototype.onMouseMove = function(event) {
  if (this.player_.muted()) {
    this.player_.muted(false);
  }

  this.player_.volume(this.calculateDistance(event));
};

vjs.VolumeBar.prototype.getPercent = function(){
  if (this.player_.muted()) {
    return 0;
  } else {
    return this.player_.volume();
  }
};

vjs.VolumeBar.prototype.stepForward = function(){
  this.player_.volume(this.player_.volume() + 0.1);
};

vjs.VolumeBar.prototype.stepBack = function(){
  this.player_.volume(this.player_.volume() - 0.1);
};

/**
 * Shows volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeLevel = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.VolumeLevel.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-level',
    innerHTML: '<span class="vjs-control-text"></span>'
  });
};

/**
 * The volume handle can be dragged to adjust the volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
 vjs.VolumeHandle = vjs.SliderHandle.extend();

 vjs.VolumeHandle.prototype.defaultValue = '00:00';

 /** @inheritDoc */
 vjs.VolumeHandle.prototype.createEl = function(){
   return vjs.SliderHandle.prototype.createEl.call(this, 'div', {
     className: 'vjs-volume-handle'
   });
 };
/**
 * A button component for muting the audio
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.MuteToggle = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    this.on(player, 'volumechange', this.update);

    // hide mute toggle if the current tech doesn't support volume control
    if (player.tech && player.tech['featuresVolumeControl'] === false) {
      this.addClass('vjs-hidden');
    }

    this.on(player, 'loadstart', function(){
      if (player.tech['featuresVolumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    });
  }
});

vjs.MuteToggle.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-mute-control vjs-control',
    innerHTML: '<div><span class="vjs-control-text">' + this.localize('Mute') + '</span></div>'
  });
};

vjs.MuteToggle.prototype.onClick = function(){
  this.player_.muted( this.player_.muted() ? false : true );
};

vjs.MuteToggle.prototype.update = function(){
  var vol = this.player_.volume(),
      level = 3;

  if (vol === 0 || this.player_.muted()) {
    level = 0;
  } else if (vol < 0.33) {
    level = 1;
  } else if (vol < 0.67) {
    level = 2;
  }

  // Don't rewrite the button text if the actual text doesn't change.
  // This causes unnecessary and confusing information for screen reader users.
  // This check is needed because this function gets called every time the volume level is changed.
  if(this.player_.muted()){
      if(this.el_.children[0].children[0].innerHTML!=this.localize('Unmute')){
          this.el_.children[0].children[0].innerHTML = this.localize('Unmute'); // change the button text to "Unmute"
      }
  } else {
      if(this.el_.children[0].children[0].innerHTML!=this.localize('Mute')){
          this.el_.children[0].children[0].innerHTML = this.localize('Mute'); // change the button text to "Mute"
      }
  }

  /* TODO improve muted icon classes */
  for (var i = 0; i < 4; i++) {
    vjs.removeClass(this.el_, 'vjs-vol-'+i);
  }
  vjs.addClass(this.el_, 'vjs-vol-'+level);
};
/**
 * Menu button with a popup for showing the volume slider.
 * @constructor
 */
vjs.VolumeMenuButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    // Same listeners as MuteToggle
    this.on(player, 'volumechange', this.volumeUpdate);

    // hide mute toggle if the current tech doesn't support volume control
    if (player.tech && player.tech['featuresVolumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    this.on(player, 'loadstart', function(){
      if (player.tech['featuresVolumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    });
    this.addClass('vjs-menu-button');
  }
});

vjs.VolumeMenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player_, {
    contentElType: 'div'
  });
  var vc = new vjs.VolumeBar(this.player_, this.options_['volumeBar']);
  vc.on('focus', function() {
    menu.lockShowing();
  });
  vc.on('blur', function() {
    menu.unlockShowing();
  });
  menu.addChild(vc);
  return menu;
};

vjs.VolumeMenuButton.prototype.onClick = function(){
  vjs.MuteToggle.prototype.onClick.call(this);
  vjs.MenuButton.prototype.onClick.call(this);
};

vjs.VolumeMenuButton.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-menu-button vjs-menu-button vjs-control',
    innerHTML: '<div><span class="vjs-control-text">' + this.localize('Mute') + '</span></div>'
  });
};
vjs.VolumeMenuButton.prototype.volumeUpdate = vjs.MuteToggle.prototype.update;
/**
 * The component for controlling the playback rate
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PlaybackRateMenuButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    this.updateVisibility();
    this.updateLabel();

    this.on(player, 'loadstart', this.updateVisibility);
    this.on(player, 'ratechange', this.updateLabel);
  }
});

vjs.PlaybackRateMenuButton.prototype.buttonText = 'Playback Rate';
vjs.PlaybackRateMenuButton.prototype.className = 'vjs-playback-rate';

vjs.PlaybackRateMenuButton.prototype.createEl = function(){
  var el = vjs.MenuButton.prototype.createEl.call(this);

  this.labelEl_ = vjs.createEl('div', {
    className: 'vjs-playback-rate-value',
    innerHTML: 1.0
  });

  el.appendChild(this.labelEl_);

  return el;
};

// Menu creation
vjs.PlaybackRateMenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player());
  var rates = this.player().options()['playbackRates'];

  if (rates) {
    for (var i = rates.length - 1; i >= 0; i--) {
      menu.addChild(
        new vjs.PlaybackRateMenuItem(this.player(), { 'rate': rates[i] + 'x'})
        );
    }
  }

  return menu;
};

vjs.PlaybackRateMenuButton.prototype.updateARIAAttributes = function(){
  // Current playback rate
  this.el().setAttribute('aria-valuenow', this.player().playbackRate());
};

vjs.PlaybackRateMenuButton.prototype.onClick = function(){
  // select next rate option
  var currentRate = this.player().playbackRate();
  var rates = this.player().options()['playbackRates'];
  // this will select first one if the last one currently selected
  var newRate = rates[0];
  for (var i = 0; i <rates.length ; i++) {
    if (rates[i] > currentRate) {
      newRate = rates[i];
      break;
    }
  }
  this.player().playbackRate(newRate);
};

vjs.PlaybackRateMenuButton.prototype.playbackRateSupported = function(){
  return this.player().tech
    && this.player().tech['featuresPlaybackRate']
    && this.player().options()['playbackRates']
    && this.player().options()['playbackRates'].length > 0
  ;
};

/**
 * Hide playback rate controls when they're no playback rate options to select
 */
vjs.PlaybackRateMenuButton.prototype.updateVisibility = function(){
  if (this.playbackRateSupported()) {
    this.removeClass('vjs-hidden');
  } else {
    this.addClass('vjs-hidden');
  }
};

/**
 * Update button label when rate changed
 */
vjs.PlaybackRateMenuButton.prototype.updateLabel = function(){
  if (this.playbackRateSupported()) {
    this.labelEl_.innerHTML = this.player().playbackRate() + 'x';
  }
};

/**
 * The specific menu item type for selecting a playback rate
 *
 * @constructor
 */
vjs.PlaybackRateMenuItem = vjs.MenuItem.extend({
  contentElType: 'button',
  /** @constructor */
  init: function(player, options){
    var label = this.label = options['rate'];
    var rate = this.rate = parseFloat(label, 10);

    // Modify options for parent MenuItem class's init.
    options['label'] = label;
    options['selected'] = rate === 1;
    vjs.MenuItem.call(this, player, options);

    this.on(player, 'ratechange', this.update);
  }
});

vjs.PlaybackRateMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player().playbackRate(this.rate);
};

vjs.PlaybackRateMenuItem.prototype.update = function(){
  this.selected(this.player().playbackRate() == this.rate);
};
/* Poster Image
================================================================================ */
/**
 * The component that handles showing the poster image.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PosterImage = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    this.update();
    player.on('posterchange', vjs.bind(this, this.update));
  }
});

/**
 * Clean up the poster image
 */
vjs.PosterImage.prototype.dispose = function(){
  this.player().off('posterchange', this.update);
  vjs.Button.prototype.dispose.call(this);
};

/**
 * Create the poster image element
 * @return {Element}
 */
vjs.PosterImage.prototype.createEl = function(){
  var el = vjs.createEl('div', {
    className: 'vjs-poster',

    // Don't want poster to be tabbable.
    tabIndex: -1
  });

  // To ensure the poster image resizes while maintaining its original aspect
  // ratio, use a div with `background-size` when available. For browsers that
  // do not support `background-size` (e.g. IE8), fall back on using a regular
  // img element.
  if (!vjs.BACKGROUND_SIZE_SUPPORTED) {
    this.fallbackImg_ = vjs.createEl('img');
    el.appendChild(this.fallbackImg_);
  }

  return el;
};

/**
 * Event handler for updates to the player's poster source
 */
vjs.PosterImage.prototype.update = function(){
  var url = this.player().poster();

  this.setSrc(url);

  // If there's no poster source we should display:none on this component
  // so it's not still clickable or right-clickable
  if (url) {
    this.show();
  } else {
    this.hide();
  }
};

/**
 * Set the poster source depending on the display method
 */
vjs.PosterImage.prototype.setSrc = function(url){
  var backgroundImage;

  if (this.fallbackImg_) {
    this.fallbackImg_.src = url;
  } else {
    backgroundImage = '';
    // Any falsey values should stay as an empty string, otherwise
    // this will throw an extra error
    if (url) {
      backgroundImage = 'url("' + url + '")';
    }

    this.el_.style.backgroundImage = backgroundImage;
  }
};

/**
 * Event handler for clicks on the poster image
 */
vjs.PosterImage.prototype.onClick = function(){
  // We don't want a click to trigger playback when controls are disabled
  // but CSS should be hiding the poster to prevent that from happening
  this.player_.play();
};
/* Loading Spinner
================================================================================ */
/**
 * Loading spinner for waiting events
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.LoadingSpinner = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // MOVING DISPLAY HANDLING TO CSS

    // player.on('canplay', vjs.bind(this, this.hide));
    // player.on('canplaythrough', vjs.bind(this, this.hide));
    // player.on('playing', vjs.bind(this, this.hide));
    // player.on('seeking', vjs.bind(this, this.show));

    // in some browsers seeking does not trigger the 'playing' event,
    // so we also need to trap 'seeked' if we are going to set a
    // 'seeking' event
    // player.on('seeked', vjs.bind(this, this.hide));

    // player.on('ended', vjs.bind(this, this.hide));

    // Not showing spinner on stalled any more. Browsers may stall and then not trigger any events that would remove the spinner.
    // Checked in Chrome 16 and Safari 5.1.2. http://help.videojs.com/discussions/problems/883-why-is-the-download-progress-showing
    // player.on('stalled', vjs.bind(this, this.show));

    // player.on('waiting', vjs.bind(this, this.show));
  }
});

vjs.LoadingSpinner.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-loading-spinner'
  });
};
/* Big Play Button
================================================================================ */
/**
 * Initial play button. Shows before the video has played. The hiding of the
 * big play button is done via CSS and player states.
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.BigPlayButton = vjs.Button.extend();

vjs.BigPlayButton.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-big-play-button',
    innerHTML: '<span aria-hidden="true"></span>',
    'aria-label': 'play video'
  });
};

vjs.BigPlayButton.prototype.onClick = function(){
  this.player_.play();
};
/**
 * Display that an error has occurred making the video unplayable
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.ErrorDisplay = vjs.Component.extend({
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.update();
    this.on(player, 'error', this.update);
  }
});

vjs.ErrorDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-error-display'
  });

  this.contentEl_ = vjs.createEl('div');
  el.appendChild(this.contentEl_);

  return el;
};

vjs.ErrorDisplay.prototype.update = function(){
  if (this.player().error()) {
    this.contentEl_.innerHTML = this.localize(this.player().error().message);
  }
};
(function() {
  var createTrackHelper;
/**
 * @fileoverview Media Technology Controller - Base class for media playback
 * technology controllers like Flash and HTML5
 */

/**
 * Base class for media (HTML5 Video, Flash) controllers
 * @param {vjs.Player|Object} player  Central player instance
 * @param {Object=} options Options object
 * @constructor
 */
vjs.MediaTechController = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    options = options || {};
    // we don't want the tech to report user activity automatically.
    // This is done manually in addControlsListeners
    options.reportTouchActivity = false;
    vjs.Component.call(this, player, options, ready);

    // Manually track progress in cases where the browser/flash player doesn't report it.
    if (!this['featuresProgressEvents']) {
      this.manualProgressOn();
    }

    // Manually track timeupdates in cases where the browser/flash player doesn't report it.
    if (!this['featuresTimeupdateEvents']) {
      this.manualTimeUpdatesOn();
    }

    this.initControlsListeners();

    if (!this['featuresNativeTextTracks']) {
      this.emulateTextTracks();
    }

    this.initTextTrackListeners();
  }
});

/**
 * Set up click and touch listeners for the playback element
 * On desktops, a click on the video itself will toggle playback,
 * on a mobile device a click on the video toggles controls.
 * (toggling controls is done by toggling the user state between active and
 * inactive)
 *
 * A tap can signal that a user has become active, or has become inactive
 * e.g. a quick tap on an iPhone movie should reveal the controls. Another
 * quick tap should hide them again (signaling the user is in an inactive
 * viewing state)
 *
 * In addition to this, we still want the user to be considered inactive after
 * a few seconds of inactivity.
 *
 * Note: the only part of iOS interaction we can't mimic with this setup
 * is a touch and hold on the video element counting as activity in order to
 * keep the controls showing, but that shouldn't be an issue. A touch and hold on
 * any controls will still keep the user active
 */
vjs.MediaTechController.prototype.initControlsListeners = function(){
  var player, activateControls;

  player = this.player();

  activateControls = function(){
    if (player.controls() && !player.usingNativeControls()) {
      this.addControlsListeners();
    }
  };

  // Set up event listeners once the tech is ready and has an element to apply
  // listeners to
  this.ready(activateControls);
  this.on(player, 'controlsenabled', activateControls);
  this.on(player, 'controlsdisabled', this.removeControlsListeners);

  // if we're loading the playback object after it has started loading or playing the
  // video (often with autoplay on) then the loadstart event has already fired and we
  // need to fire it manually because many things rely on it.
  // Long term we might consider how we would do this for other events like 'canplay'
  // that may also have fired.
  this.ready(function(){
    if (this.networkState && this.networkState() > 0) {
      this.player().trigger('loadstart');
    }
  });
};

vjs.MediaTechController.prototype.addControlsListeners = function(){
  var userWasActive;

  // Some browsers (Chrome & IE) don't trigger a click on a flash swf, but do
  // trigger mousedown/up.
  // http://stackoverflow.com/questions/1444562/javascript-onclick-event-over-flash-object
  // Any touch events are set to block the mousedown event from happening
  this.on('mousedown', this.onClick);

  // If the controls were hidden we don't want that to change without a tap event
  // so we'll check if the controls were already showing before reporting user
  // activity
  this.on('touchstart', function(event) {
    userWasActive = this.player_.userActive();
  });

  this.on('touchmove', function(event) {
    if (userWasActive){
      this.player().reportUserActivity();
    }
  });

  this.on('touchend', function(event) {
    // Stop the mouse events from also happening
    event.preventDefault();
  });

  // Turn on component tap events
  this.emitTapEvents();

  // The tap listener needs to come after the touchend listener because the tap
  // listener cancels out any reportedUserActivity when setting userActive(false)
  this.on('tap', this.onTap);
};

/**
 * Remove the listeners used for click and tap controls. This is needed for
 * toggling to controls disabled, where a tap/touch should do nothing.
 */
vjs.MediaTechController.prototype.removeControlsListeners = function(){
  // We don't want to just use `this.off()` because there might be other needed
  // listeners added by techs that extend this.
  this.off('tap');
  this.off('touchstart');
  this.off('touchmove');
  this.off('touchleave');
  this.off('touchcancel');
  this.off('touchend');
  this.off('click');
  this.off('mousedown');
};

/**
 * Handle a click on the media element. By default will play/pause the media.
 */
vjs.MediaTechController.prototype.onClick = function(event){
  // We're using mousedown to detect clicks thanks to Flash, but mousedown
  // will also be triggered with right-clicks, so we need to prevent that
  if (event.button !== 0) return;

  // When controls are disabled a click should not toggle playback because
  // the click is considered a control
  if (this.player().controls()) {
    if (this.player().paused()) {
      this.player().play();
    } else {
      this.player().pause();
    }
  }
};

/**
 * Handle a tap on the media element. By default it will toggle the user
 * activity state, which hides and shows the controls.
 */
vjs.MediaTechController.prototype.onTap = function(){
  this.player().userActive(!this.player().userActive());
};

/* Fallbacks for unsupported event types
================================================================================ */
// Manually trigger progress events based on changes to the buffered amount
// Many flash players and older HTML5 browsers don't send progress or progress-like events
vjs.MediaTechController.prototype.manualProgressOn = function(){
  this.manualProgress = true;

  // Trigger progress watching when a source begins loading
  this.trackProgress();
};

vjs.MediaTechController.prototype.manualProgressOff = function(){
  this.manualProgress = false;
  this.stopTrackingProgress();
};

vjs.MediaTechController.prototype.trackProgress = function(){
  this.progressInterval = this.setInterval(function(){
    // Don't trigger unless buffered amount is greater than last time

    var bufferedPercent = this.player().bufferedPercent();

    if (this.bufferedPercent_ != bufferedPercent) {
      this.player().trigger('progress');
    }

    this.bufferedPercent_ = bufferedPercent;

    if (bufferedPercent === 1) {
      this.stopTrackingProgress();
    }
  }, 500);
};
vjs.MediaTechController.prototype.stopTrackingProgress = function(){ this.clearInterval(this.progressInterval); };

/*! Time Tracking -------------------------------------------------------------- */
vjs.MediaTechController.prototype.manualTimeUpdatesOn = function(){
  var player = this.player_;

  this.manualTimeUpdates = true;

  this.on(player, 'play', this.trackCurrentTime);
  this.on(player, 'pause', this.stopTrackingCurrentTime);
  // timeupdate is also called by .currentTime whenever current time is set

  // Watch for native timeupdate event
  this.one('timeupdate', function(){
    // Update known progress support for this playback technology
    this['featuresTimeupdateEvents'] = true;
    // Turn off manual progress tracking
    this.manualTimeUpdatesOff();
  });
};

vjs.MediaTechController.prototype.manualTimeUpdatesOff = function(){
  var player = this.player_;

  this.manualTimeUpdates = false;
  this.stopTrackingCurrentTime();
  this.off(player, 'play', this.trackCurrentTime);
  this.off(player, 'pause', this.stopTrackingCurrentTime);
};

vjs.MediaTechController.prototype.trackCurrentTime = function(){
  if (this.currentTimeInterval) { this.stopTrackingCurrentTime(); }
  this.currentTimeInterval = this.setInterval(function(){
    this.player().trigger('timeupdate');
  }, 250); // 42 = 24 fps // 250 is what Webkit uses // FF uses 15
};

// Turn off play progress tracking (when paused or dragging)
vjs.MediaTechController.prototype.stopTrackingCurrentTime = function(){
  this.clearInterval(this.currentTimeInterval);

  // #1002 - if the video ends right before the next timeupdate would happen,
  // the progress bar won't make it all the way to the end
  this.player().trigger('timeupdate');
};

vjs.MediaTechController.prototype.dispose = function() {
  // Turn off any manual progress or timeupdate tracking
  if (this.manualProgress) { this.manualProgressOff(); }

  if (this.manualTimeUpdates) { this.manualTimeUpdatesOff(); }

  vjs.Component.prototype.dispose.call(this);
};

vjs.MediaTechController.prototype.setCurrentTime = function() {
  // improve the accuracy of manual timeupdates
  if (this.manualTimeUpdates) { this.player().trigger('timeupdate'); }
};

// TODO: Consider looking at moving this into the text track display directly
// https://github.com/videojs/video.js/issues/1863
vjs.MediaTechController.prototype.initTextTrackListeners = function() {
  var player = this.player_,
      tracks,
      textTrackListChanges = function() {
        var textTrackDisplay = player.getChild('textTrackDisplay'),
            controlBar;

        if (textTrackDisplay) {
          textTrackDisplay.updateDisplay();
        }
      };

  tracks = this.textTracks();

  if (!tracks) {
    return;
  }

  tracks.addEventListener('removetrack', textTrackListChanges);
  tracks.addEventListener('addtrack', textTrackListChanges);

  this.on('dispose', vjs.bind(this, function() {
    tracks.removeEventListener('removetrack', textTrackListChanges);
    tracks.removeEventListener('addtrack', textTrackListChanges);
  }));
};

vjs.MediaTechController.prototype.emulateTextTracks = function() {
  var player = this.player_,
      textTracksChanges,
      tracks,
      script;

  if (!window['WebVTT']) {
    script = document.createElement('script');
    script.src = player.options()['vtt.js'] || '../node_modules/vtt.js/dist/vtt.js';
    player.el().appendChild(script);
    window['WebVTT'] = true;
  }

  tracks = this.textTracks();
  if (!tracks) {
    return;
  }

  textTracksChanges = function() {
    var i, track, textTrackDisplay;

    textTrackDisplay = player.getChild('textTrackDisplay'),

    textTrackDisplay.updateDisplay();

    for (i = 0; i < this.length; i++) {
      track = this[i];
      track.removeEventListener('cuechange', vjs.bind(textTrackDisplay, textTrackDisplay.updateDisplay));
      if (track.mode === 'showing') {
        track.addEventListener('cuechange', vjs.bind(textTrackDisplay, textTrackDisplay.updateDisplay));
      }
    }
  };

  tracks.addEventListener('change', textTracksChanges);

  this.on('dispose', vjs.bind(this, function() {
    tracks.removeEventListener('change', textTracksChanges);
  }));
};

/**
 * Provide default methods for text tracks.
 *
 * Html5 tech overrides these.
 */

/**
 * List of associated text tracks
 * @type {Array}
 * @private
 */
vjs.MediaTechController.prototype.textTracks_;

vjs.MediaTechController.prototype.textTracks = function() {
  this.player_.textTracks_ = this.player_.textTracks_ || new vjs.TextTrackList();
  return this.player_.textTracks_;
};

vjs.MediaTechController.prototype.remoteTextTracks = function() {
  this.player_.remoteTextTracks_ = this.player_.remoteTextTracks_ || new vjs.TextTrackList();
  return this.player_.remoteTextTracks_;
};

createTrackHelper = function(self, kind, label, language, options) {
  var tracks = self.textTracks(),
      track;

  options = options || {};

  options['kind'] = kind;
  if (label) {
    options['label'] = label;
  }
  if (language) {
    options['language'] = language;
  }
  options['player'] = self.player_;

  track = new vjs.TextTrack(options);
  tracks.addTrack_(track);

  return track;
};

vjs.MediaTechController.prototype.addTextTrack = function(kind, label, language) {
  if (!kind) {
    throw new Error('TextTrack kind is required but was not provided');
  }

  return createTrackHelper(this, kind, label, language);
};

vjs.MediaTechController.prototype.addRemoteTextTrack = function(options) {
  var track = createTrackHelper(this, options['kind'], options['label'], options['language'], options);
  this.remoteTextTracks().addTrack_(track);
  return {
    track: track
  };
};

vjs.MediaTechController.prototype.removeRemoteTextTrack = function(track) {
  this.textTracks().removeTrack_(track);
  this.remoteTextTracks().removeTrack_(track);
};

/**
 * Provide a default setPoster method for techs
 *
 * Poster support for techs should be optional, so we don't want techs to
 * break if they don't have a way to set a poster.
 */
vjs.MediaTechController.prototype.setPoster = function(){};

vjs.MediaTechController.prototype['featuresVolumeControl'] = true;

// Resizing plugins using request fullscreen reloads the plugin
vjs.MediaTechController.prototype['featuresFullscreenResize'] = false;
vjs.MediaTechController.prototype['featuresPlaybackRate'] = false;

// Optional events that we can manually mimic with timers
// currently not triggered by video-js-swf
vjs.MediaTechController.prototype['featuresProgressEvents'] = false;
vjs.MediaTechController.prototype['featuresTimeupdateEvents'] = false;

vjs.MediaTechController.prototype['featuresNativeTextTracks'] = false;

/**
 * A functional mixin for techs that want to use the Source Handler pattern.
 *
 * ##### EXAMPLE:
 *
 *   videojs.MediaTechController.withSourceHandlers.call(MyTech);
 *
 */
vjs.MediaTechController.withSourceHandlers = function(Tech){
  /**
   * Register a source handler
   * Source handlers are scripts for handling specific formats.
   * The source handler pattern is used for adaptive formats (HLS, DASH) that
   * manually load video data and feed it into a Source Buffer (Media Source Extensions)
   * @param  {Function} handler  The source handler
   * @param  {Boolean}  first    Register it before any existing handlers
   */
  Tech['registerSourceHandler'] = function(handler, index){
    var handlers = Tech.sourceHandlers;

    if (!handlers) {
      handlers = Tech.sourceHandlers = [];
    }

    if (index === undefined) {
      // add to the end of the list
      index = handlers.length;
    }

    handlers.splice(index, 0, handler);
  };

  /**
   * Return the first source handler that supports the source
   * TODO: Answer question: should 'probably' be prioritized over 'maybe'
   * @param  {Object} source The source object
   * @returns {Object}       The first source handler that supports the source
   * @returns {null}         Null if no source handler is found
   */
  Tech.selectSourceHandler = function(source){
    var handlers = Tech.sourceHandlers || [],
        can;

    for (var i = 0; i < handlers.length; i++) {
      can = handlers[i]['canHandleSource'](source);

      if (can) {
        return handlers[i];
      }
    }

    return null;
  };

  /**
  * Check if the tech can support the given source
  * @param  {Object} srcObj  The source object
  * @return {String}         'probably', 'maybe', or '' (empty string)
  */
  Tech.canPlaySource = function(srcObj){
    var sh = Tech.selectSourceHandler(srcObj);

    if (sh) {
      return sh['canHandleSource'](srcObj);
    }

    return '';
  };

  /**
   * Create a function for setting the source using a source object
   * and source handlers.
   * Should never be called unless a source handler was found.
   * @param {Object} source  A source object with src and type keys
   * @return {vjs.MediaTechController} self
   */
  Tech.prototype.setSource = function(source){
    var sh = Tech.selectSourceHandler(source);

    if (!sh) {
      // Fall back to a native source hander when unsupported sources are
      // deliberately set
      if (Tech['nativeSourceHandler']) {
        sh = Tech['nativeSourceHandler'];
      } else {
        vjs.log.error('No source hander found for the current source.');
      }
    }

    // Dispose any existing source handler
    this.disposeSourceHandler();
    this.off('dispose', this.disposeSourceHandler);

    this.currentSource_ = source;
    this.sourceHandler_ = sh['handleSource'](source, this);
    this.on('dispose', this.disposeSourceHandler);

    return this;
  };

  /**
   * Clean up any existing source handler
   */
  Tech.prototype.disposeSourceHandler = function(){
    if (this.sourceHandler_ && this.sourceHandler_['dispose']) {
      this.sourceHandler_['dispose']();
    }
  };

};

vjs.media = {};

})();
/**
 * @fileoverview HTML5 Media Controller - Wrapper for HTML5 Media API
 */

/**
 * HTML5 Media Controller - Wrapper for HTML5 Media API
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Html5 = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    var  nodes, nodesLength, i, node, nodeName, removeNodes;

    if (options['nativeCaptions'] === false || options['nativeTextTracks'] === false) {
      this['featuresNativeTextTracks'] = false;
    }

    vjs.MediaTechController.call(this, player, options, ready);

    this.setupTriggers();

    var source = options['source'];

    // Set the source if one is provided
    // 1) Check if the source is new (if not, we want to keep the original so playback isn't interrupted)
    // 2) Check to see if the network state of the tag was failed at init, and if so, reset the source
    // anyway so the error gets fired.
    if (source && (this.el_.currentSrc !== source.src || (player.tag && player.tag.initNetworkState_ === 3))) {
      this.setSource(source);
    }

    if (this.el_.hasChildNodes()) {

      nodes = this.el_.childNodes;
      nodesLength = nodes.length;
      removeNodes = [];

      while (nodesLength--) {
        node = nodes[nodesLength];
        nodeName = node.nodeName.toLowerCase();
        if (nodeName === 'track') {
          if (!this['featuresNativeTextTracks']) {
            // Empty video tag tracks so the built-in player doesn't use them also.
            // This may not be fast enough to stop HTML5 browsers from reading the tags
            // so we'll need to turn off any default tracks if we're manually doing
            // captions and subtitles. videoElement.textTracks
            removeNodes.push(node);
          } else {
            this.remoteTextTracks().addTrack_(node['track']);
          }
        }
      }

      for (i=0; i<removeNodes.length; i++) {
        this.el_.removeChild(removeNodes[i]);
      }
    }

    // Determine if native controls should be used
    // Our goal should be to get the custom controls on mobile solid everywhere
    // so we can remove this all together. Right now this will block custom
    // controls on touch enabled laptops like the Chrome Pixel
    if (vjs.TOUCH_ENABLED && player.options()['nativeControlsForTouch'] === true) {
      this.useNativeControls();
    }

    // Chrome and Safari both have issues with autoplay.
    // In Safari (5.1.1), when we move the video element into the container div, autoplay doesn't work.
    // In Chrome (15), if you have autoplay + a poster + no controls, the video gets hidden (but audio plays)
    // This fixes both issues. Need to wait for API, so it updates displays correctly
    player.ready(function(){
      if (this.src() && this.tag && this.options_['autoplay'] && this.paused()) {
        delete this.tag['poster']; // Chrome Fix. Fixed in Chrome v16.
        this.play();
      }
    });

    this.triggerReady();
  }
});

vjs.Html5.prototype.dispose = function(){
  vjs.Html5.disposeMediaElement(this.el_);
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Html5.prototype.createEl = function(){
  var player = this.player_,
      track,
      trackEl,
      i,
      // If possible, reuse original tag for HTML5 playback technology element
      el = player.tag,
      attributes,
      newEl,
      clone;

  // Check if this browser supports moving the element into the box.
  // On the iPhone video will break if you move the element,
  // So we have to create a brand new element.
  if (!el || this['movingMediaElementInDOM'] === false) {

    // If the original tag is still there, clone and remove it.
    if (el) {
      clone = el.cloneNode(false);
      vjs.Html5.disposeMediaElement(el);
      el = clone;
      player.tag = null;
    } else {
      el = vjs.createEl('video');

      // determine if native controls should be used
      attributes = videojs.util.mergeOptions({}, player.tagAttributes);
      if (!vjs.TOUCH_ENABLED || player.options()['nativeControlsForTouch'] !== true) {
        delete attributes.controls;
      }

      vjs.setElementAttributes(el,
        vjs.obj.merge(attributes, {
          id:player.id() + '_html5_api',
          'class':'vjs-tech'
        })
      );
    }
    // associate the player with the new tag
    el['player'] = player;

    if (player.options_.tracks) {
      for (i = 0; i < player.options_.tracks.length; i++) {
        track = player.options_.tracks[i];
        trackEl = document.createElement('track');
        trackEl.kind = track.kind;
        trackEl.label = track.label;
        trackEl.srclang = track.srclang;
        trackEl.src = track.src;
        if ('default' in track) {
          trackEl.setAttribute('default', 'default');
        }
        el.appendChild(trackEl);
      }
    }

    vjs.insertFirst(el, player.el());
  }

  // Update specific tag settings, in case they were overridden
  var settingsAttrs = ['autoplay','preload','loop','muted'];
  for (i = settingsAttrs.length - 1; i >= 0; i--) {
    var attr = settingsAttrs[i];
    var overwriteAttrs = {};
    if (typeof player.options_[attr] !== 'undefined') {
      overwriteAttrs[attr] = player.options_[attr];
    }
    vjs.setElementAttributes(el, overwriteAttrs);
  }

  return el;
  // jenniisawesome = true;
};

// Make video events trigger player events
// May seem verbose here, but makes other APIs possible.
// Triggers removed using this.off when disposed
vjs.Html5.prototype.setupTriggers = function(){
  for (var i = vjs.Html5.Events.length - 1; i >= 0; i--) {
    this.on(vjs.Html5.Events[i], this.eventHandler);
  }
};

vjs.Html5.prototype.eventHandler = function(evt){
  // In the case of an error on the video element, set the error prop
  // on the player and let the player handle triggering the event. On
  // some platforms, error events fire that do not cause the error
  // property on the video element to be set. See #1465 for an example.
  if (evt.type == 'error' && this.error()) {
    this.player().error(this.error().code);

  // in some cases we pass the event directly to the player
  } else {
    // No need for media events to bubble up.
    evt.bubbles = false;

    this.player().trigger(evt);
  }
};

vjs.Html5.prototype.useNativeControls = function(){
  var tech, player, controlsOn, controlsOff, cleanUp;

  tech = this;
  player = this.player();

  // If the player controls are enabled turn on the native controls
  tech.setControls(player.controls());

  // Update the native controls when player controls state is updated
  controlsOn = function(){
    tech.setControls(true);
  };
  controlsOff = function(){
    tech.setControls(false);
  };
  player.on('controlsenabled', controlsOn);
  player.on('controlsdisabled', controlsOff);

  // Clean up when not using native controls anymore
  cleanUp = function(){
    player.off('controlsenabled', controlsOn);
    player.off('controlsdisabled', controlsOff);
  };
  tech.on('dispose', cleanUp);
  player.on('usingcustomcontrols', cleanUp);

  // Update the state of the player to using native controls
  player.usingNativeControls(true);
};


vjs.Html5.prototype.play = function(){ this.el_.play(); };
vjs.Html5.prototype.pause = function(){ this.el_.pause(); };
vjs.Html5.prototype.paused = function(){ return this.el_.paused; };

vjs.Html5.prototype.currentTime = function(){ return this.el_.currentTime; };
vjs.Html5.prototype.setCurrentTime = function(seconds){
  try {
    this.el_.currentTime = seconds;
  } catch(e) {
    vjs.log(e, 'Video is not ready. (Video.js)');
    // this.warning(VideoJS.warnings.videoNotReady);
  }
};

vjs.Html5.prototype.duration = function(){ return this.el_.duration || 0; };
vjs.Html5.prototype.buffered = function(){ return this.el_.buffered; };

vjs.Html5.prototype.volume = function(){ return this.el_.volume; };
vjs.Html5.prototype.setVolume = function(percentAsDecimal){ this.el_.volume = percentAsDecimal; };
vjs.Html5.prototype.muted = function(){ return this.el_.muted; };
vjs.Html5.prototype.setMuted = function(muted){ this.el_.muted = muted; };

vjs.Html5.prototype.width = function(){ return this.el_.offsetWidth; };
vjs.Html5.prototype.height = function(){ return this.el_.offsetHeight; };

vjs.Html5.prototype.supportsFullScreen = function(){
  if (typeof this.el_.webkitEnterFullScreen == 'function') {

    // Seems to be broken in Chromium/Chrome && Safari in Leopard
    if (/Android/.test(vjs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT)) {
      return true;
    }
  }
  return false;
};

vjs.Html5.prototype.enterFullScreen = function(){
  var video = this.el_;

  if ('webkitDisplayingFullscreen' in video) {
    this.one('webkitbeginfullscreen', function() {
      this.player_.isFullscreen(true);

      this.one('webkitendfullscreen', function() {
        this.player_.isFullscreen(false);
        this.player_.trigger('fullscreenchange');
      });

      this.player_.trigger('fullscreenchange');
    });
  }

  if (video.paused && video.networkState <= video.HAVE_METADATA) {
    // attempt to prime the video element for programmatic access
    // this isn't necessary on the desktop but shouldn't hurt
    this.el_.play();

    // playing and pausing synchronously during the transition to fullscreen
    // can get iOS ~6.1 devices into a play/pause loop
    this.setTimeout(function(){
      video.pause();
      video.webkitEnterFullScreen();
    }, 0);
  } else {
    video.webkitEnterFullScreen();
  }
};

vjs.Html5.prototype.exitFullScreen = function(){
  this.el_.webkitExitFullScreen();
};

// Checks to see if the element's reported URI (either from `el_.src`
// or `el_.currentSrc`) is a blob-uri and, if so, returns the uri that
// was passed into the source-handler when it was first invoked instead
// of the blob-uri
vjs.Html5.prototype.returnOriginalIfBlobURI_ = function (elementURI, originalURI) {
  var blobURIRegExp = /^blob\:/i;

  // If originalURI is undefined then we are probably in a non-source-handler-enabled
  // tech that inherits from the Html5 tech so we should just return the elementURI
  // regardless of it's blobby-ness
  if (originalURI && elementURI && blobURIRegExp.test(elementURI)) {
    return originalURI;
  }
  return elementURI;
};

vjs.Html5.prototype.src = function(src) {
  var elementSrc = this.el_.src;

  if (src === undefined) {
    return this.returnOriginalIfBlobURI_(elementSrc, this.source_);
  } else {
    // Setting src through `src` instead of `setSrc` will be deprecated
    this.setSrc(src);
  }
};

vjs.Html5.prototype.setSrc = function(src) {
  this.el_.src = src;
};

vjs.Html5.prototype.load = function(){ this.el_.load(); };
vjs.Html5.prototype.currentSrc = function(){
  var elementSrc = this.el_.currentSrc;

  if (!this.currentSource_) {
    return elementSrc;
  }

  return this.returnOriginalIfBlobURI_(elementSrc, this.currentSource_.src);
};

vjs.Html5.prototype.poster = function(){ return this.el_.poster; };
vjs.Html5.prototype.setPoster = function(val){ this.el_.poster = val; };

vjs.Html5.prototype.preload = function(){ return this.el_.preload; };
vjs.Html5.prototype.setPreload = function(val){ this.el_.preload = val; };

vjs.Html5.prototype.autoplay = function(){ return this.el_.autoplay; };
vjs.Html5.prototype.setAutoplay = function(val){ this.el_.autoplay = val; };

vjs.Html5.prototype.controls = function(){ return this.el_.controls; };
vjs.Html5.prototype.setControls = function(val){ this.el_.controls = !!val; };

vjs.Html5.prototype.loop = function(){ return this.el_.loop; };
vjs.Html5.prototype.setLoop = function(val){ this.el_.loop = val; };

vjs.Html5.prototype.error = function(){ return this.el_.error; };
vjs.Html5.prototype.seeking = function(){ return this.el_.seeking; };
vjs.Html5.prototype.seekable = function(){ return this.el_.seekable; };
vjs.Html5.prototype.ended = function(){ return this.el_.ended; };
vjs.Html5.prototype.defaultMuted = function(){ return this.el_.defaultMuted; };

vjs.Html5.prototype.playbackRate = function(){ return this.el_.playbackRate; };
vjs.Html5.prototype.setPlaybackRate = function(val){ this.el_.playbackRate = val; };

vjs.Html5.prototype.networkState = function(){ return this.el_.networkState; };
vjs.Html5.prototype.readyState = function(){ return this.el_.readyState; };

vjs.Html5.prototype.textTracks = function() {
  if (!this['featuresNativeTextTracks']) {
    return vjs.MediaTechController.prototype.textTracks.call(this);
  }

  return this.el_.textTracks;
};
vjs.Html5.prototype.addTextTrack = function(kind, label, language) {
  if (!this['featuresNativeTextTracks']) {
    return vjs.MediaTechController.prototype.addTextTrack.call(this, kind, label, language);
  }

  return this.el_.addTextTrack(kind, label, language);
};

vjs.Html5.prototype.addRemoteTextTrack = function(options) {
  if (!this['featuresNativeTextTracks']) {
    return vjs.MediaTechController.prototype.addRemoteTextTrack.call(this, options);
  }

  var track = document.createElement('track');
  options = options || {};

  if (options['kind']) {
    track['kind'] = options['kind'];
  }
  if (options['label']) {
    track['label'] = options['label'];
  }
  if (options['language'] || options['srclang']) {
    track['srclang'] = options['language'] || options['srclang'];
  }
  if (options['default']) {
    track['default'] = options['default'];
  }
  if (options['id']) {
    track['id'] = options['id'];
  }
  if (options['src']) {
    track['src'] = options['src'];
  }

  this.el().appendChild(track);
  this.remoteTextTracks().addTrack_(track.track);

  return track;
};

vjs.Html5.prototype.removeRemoteTextTrack = function(track) {
  if (!this['featuresNativeTextTracks']) {
    return vjs.MediaTechController.prototype.removeRemoteTextTrack.call(this, track);
  }

  var tracks, i;

  this.remoteTextTracks().removeTrack_(track);

  tracks = this.el()['querySelectorAll']('track');

  for (i = 0; i < tracks.length; i++) {
    if (tracks[i] === track || tracks[i]['track'] === track) {
      tracks[i]['parentNode']['removeChild'](tracks[i]);
      break;
    }
  }
};

/* HTML5 Support Testing ---------------------------------------------------- */

/**
 * Check if HTML5 video is supported by this browser/device
 * @return {Boolean}
 */
vjs.Html5.isSupported = function(){
  // IE9 with no Media Player is a LIAR! (#984)
  try {
    vjs.TEST_VID['volume'] = 0.5;
  } catch (e) {
    return false;
  }

  return !!vjs.TEST_VID.canPlayType;
};

// Add Source Handler pattern functions to this tech
vjs.MediaTechController.withSourceHandlers(vjs.Html5);

/*
 * Override the withSourceHandler mixin's methods with our own because
 * the HTML5 Media Element returns blob urls when utilizing MSE and we
 * want to still return proper source urls even when in that case
 */
(function(){
  var
    origSetSource = vjs.Html5.prototype.setSource,
    origDisposeSourceHandler = vjs.Html5.prototype.disposeSourceHandler;

  vjs.Html5.prototype.setSource = function (source) {
    var retVal = origSetSource.call(this, source);
    this.source_ = source.src;
    return retVal;
  };

  vjs.Html5.prototype.disposeSourceHandler = function () {
    this.source_ = undefined;
    return origDisposeSourceHandler.call(this);
  };
})();

/**
 * The default native source handler.
 * This simply passes the source to the video element. Nothing fancy.
 * @param  {Object} source   The source object
 * @param  {vjs.Html5} tech  The instance of the HTML5 tech
 */
vjs.Html5['nativeSourceHandler'] = {};

/**
 * Check if the video element can handle the source natively
 * @param  {Object} source  The source object
 * @return {String}         'probably', 'maybe', or '' (empty string)
 */
vjs.Html5['nativeSourceHandler']['canHandleSource'] = function(source){
  var match, ext;

  function canPlayType(type){
    // IE9 on Windows 7 without MediaPlayer throws an error here
    // https://github.com/videojs/video.js/issues/519
    try {
      return vjs.TEST_VID.canPlayType(type);
    } catch(e) {
      return '';
    }
  }

  // If a type was provided we should rely on that
  if (source.type) {
    return canPlayType(source.type);
  } else if (source.src) {
    // If no type, fall back to checking 'video/[EXTENSION]'
    match = source.src.match(/\.([^.\/\?]+)(\?[^\/]+)?$/i);
    ext = match && match[1];

    return canPlayType('video/'+ext);
  }

  return '';
};

/**
 * Pass the source to the video element
 * Adaptive source handlers will have more complicated workflows before passing
 * video data to the video element
 * @param  {Object} source    The source object
 * @param  {vjs.Html5} tech   The instance of the Html5 tech
 */
vjs.Html5['nativeSourceHandler']['handleSource'] = function(source, tech){
  tech.setSrc(source.src);
};

/**
 * Clean up the source handler when disposing the player or switching sources..
 * (no cleanup is needed when supporting the format natively)
 */
vjs.Html5['nativeSourceHandler']['dispose'] = function(){};

// Register the native source handler
vjs.Html5['registerSourceHandler'](vjs.Html5['nativeSourceHandler']);

/**
 * Check if the volume can be changed in this browser/device.
 * Volume cannot be changed in a lot of mobile devices.
 * Specifically, it can't be changed from 1 on iOS.
 * @return {Boolean}
 */
vjs.Html5.canControlVolume = function(){
  var volume =  vjs.TEST_VID.volume;
  vjs.TEST_VID.volume = (volume / 2) + 0.1;
  return volume !== vjs.TEST_VID.volume;
};

/**
 * Check if playbackRate is supported in this browser/device.
 * @return {[type]} [description]
 */
vjs.Html5.canControlPlaybackRate = function(){
  var playbackRate =  vjs.TEST_VID.playbackRate;
  vjs.TEST_VID.playbackRate = (playbackRate / 2) + 0.1;
  return playbackRate !== vjs.TEST_VID.playbackRate;
};

/**
 * Check to see if native text tracks are supported by this browser/device
 * @return {Boolean}
 */
vjs.Html5.supportsNativeTextTracks = function() {
  var supportsTextTracks;

  // Figure out native text track support
  // If mode is a number, we cannot change it because it'll disappear from view.
  // Browsers with numeric modes include IE10 and older (<=2013) samsung android models.
  // Firefox isn't playing nice either with modifying the mode
  // TODO: Investigate firefox: https://github.com/videojs/video.js/issues/1862
  supportsTextTracks = !!vjs.TEST_VID.textTracks;
  if (supportsTextTracks && vjs.TEST_VID.textTracks.length > 0) {
    supportsTextTracks = typeof vjs.TEST_VID.textTracks[0]['mode'] !== 'number';
  }
  if (supportsTextTracks && vjs.IS_FIREFOX) {
    supportsTextTracks = false;
  }

  return supportsTextTracks;
};

/**
 * Set the tech's volume control support status
 * @type {Boolean}
 */
vjs.Html5.prototype['featuresVolumeControl'] = vjs.Html5.canControlVolume();

/**
 * Set the tech's playbackRate support status
 * @type {Boolean}
 */
vjs.Html5.prototype['featuresPlaybackRate'] = vjs.Html5.canControlPlaybackRate();

/**
 * Set the tech's status on moving the video element.
 * In iOS, if you move a video element in the DOM, it breaks video playback.
 * @type {Boolean}
 */
vjs.Html5.prototype['movingMediaElementInDOM'] = !vjs.IS_IOS;

/**
 * Set the the tech's fullscreen resize support status.
 * HTML video is able to automatically resize when going to fullscreen.
 * (No longer appears to be used. Can probably be removed.)
 */
vjs.Html5.prototype['featuresFullscreenResize'] = true;

/**
 * Set the tech's progress event support status
 * (this disables the manual progress events of the MediaTechController)
 */
vjs.Html5.prototype['featuresProgressEvents'] = true;

/**
 * Sets the tech's status on native text track support
 * @type {Boolean}
 */
vjs.Html5.prototype['featuresNativeTextTracks'] = vjs.Html5.supportsNativeTextTracks();

// HTML5 Feature detection and Device Fixes --------------------------------- //
(function() {
  var canPlayType,
      mpegurlRE = /^application\/(?:x-|vnd\.apple\.)mpegurl/i,
      mp4RE = /^video\/mp4/i;

  vjs.Html5.patchCanPlayType = function() {
    // Android 4.0 and above can play HLS to some extent but it reports being unable to do so
    if (vjs.ANDROID_VERSION >= 4.0) {
      if (!canPlayType) {
        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;
      }

      vjs.TEST_VID.constructor.prototype.canPlayType = function(type) {
        if (type && mpegurlRE.test(type)) {
          return 'maybe';
        }
        return canPlayType.call(this, type);
      };
    }

    // Override Android 2.2 and less canPlayType method which is broken
    if (vjs.IS_OLD_ANDROID) {
      if (!canPlayType) {
        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;
      }

      vjs.TEST_VID.constructor.prototype.canPlayType = function(type){
        if (type && mp4RE.test(type)) {
          return 'maybe';
        }
        return canPlayType.call(this, type);
      };
    }
  };

  vjs.Html5.unpatchCanPlayType = function() {
    var r = vjs.TEST_VID.constructor.prototype.canPlayType;
    vjs.TEST_VID.constructor.prototype.canPlayType = canPlayType;
    canPlayType = null;
    return r;
  };

  // by default, patch the video element
  vjs.Html5.patchCanPlayType();
})();

// List of all HTML5 events (various uses).
vjs.Html5.Events = 'loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange'.split(',');

vjs.Html5.disposeMediaElement = function(el){
  if (!el) { return; }

  el['player'] = null;

  if (el.parentNode) {
    el.parentNode.removeChild(el);
  }

  // remove any child track or source nodes to prevent their loading
  while(el.hasChildNodes()) {
    el.removeChild(el.firstChild);
  }

  // remove any src reference. not setting `src=''` because that causes a warning
  // in firefox
  el.removeAttribute('src');

  // force the media element to update its loading state by calling load()
  // however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)
  if (typeof el.load === 'function') {
    // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)
    (function() {
      try {
        el.load();
      } catch (e) {
        // not supported
      }
    })();
  }
};
/**
 * @fileoverview VideoJS-SWF - Custom Flash Player with HTML5-ish API
 * https://github.com/zencoder/video-js-swf
 * Not using setupTriggers. Using global onEvent func to distribute events
 */

/**
 * Flash Media Controller - Wrapper for fallback SWF API
 *
 * @param {vjs.Player} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Flash = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.MediaTechController.call(this, player, options, ready);

    var source = options['source'],

        // Generate ID for swf object
        objId = player.id()+'_flash_api',

        // Store player options in local var for optimization
        // TODO: switch to using player methods instead of options
        // e.g. player.autoplay();
        playerOptions = player.options_,

        // Merge default flashvars with ones passed in to init
        flashVars = vjs.obj.merge({

          // SWF Callback Functions
          'readyFunction': 'videojs.Flash.onReady',
          'eventProxyFunction': 'videojs.Flash.onEvent',
          'errorEventProxyFunction': 'videojs.Flash.onError',

          // Player Settings
          'autoplay': playerOptions.autoplay,
          'preload': playerOptions.preload,
          'loop': playerOptions.loop,
          'muted': playerOptions.muted

        }, options['flashVars']),

        // Merge default parames with ones passed in
        params = vjs.obj.merge({
          'wmode': 'opaque', // Opaque is needed to overlay controls, but can affect playback performance
          'bgcolor': '#000000' // Using bgcolor prevents a white flash when the object is loading
        }, options['params']),

        // Merge default attributes with ones passed in
        attributes = vjs.obj.merge({
          'id': objId,
          'name': objId, // Both ID and Name needed or swf to identify itself
          'class': 'vjs-tech'
        }, options['attributes'])
    ;

    // If source was supplied pass as a flash var.
    if (source) {
      this.ready(function(){
        this.setSource(source);
      });
    }

    // Add placeholder to player div
    vjs.insertFirst(this.el_, options['parentEl']);

    // Having issues with Flash reloading on certain page actions (hide/resize/fullscreen) in certain browsers
    // This allows resetting the playhead when we catch the reload
    if (options['startTime']) {
      this.ready(function(){
        this.load();
        this.play();
        this['currentTime'](options['startTime']);
      });
    }

    // firefox doesn't bubble mousemove events to parent. videojs/video-js-swf#37
    // bugzilla bug: https://bugzilla.mozilla.org/show_bug.cgi?id=836786
    if (vjs.IS_FIREFOX) {
      this.ready(function(){
        this.on('mousemove', function(){
          // since it's a custom event, don't bubble higher than the player
          this.player().trigger({ 'type':'mousemove', 'bubbles': false });
        });
      });
    }

    // native click events on the SWF aren't triggered on IE11, Win8.1RT
    // use stageclick events triggered from inside the SWF instead
    player.on('stageclick', player.reportUserActivity);

    this.el_ = vjs.Flash.embed(options['swf'], this.el_, flashVars, params, attributes);
  }
});

vjs.Flash.prototype.dispose = function(){
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Flash.prototype.play = function(){
  if (this.ended()) {
    this['setCurrentTime'](0);
  }

  this.el_.vjs_play();
};

vjs.Flash.prototype.pause = function(){
  this.el_.vjs_pause();
};

vjs.Flash.prototype.src = function(src){
  if (src === undefined) {
    return this['currentSrc']();
  }

  // Setting src through `src` not `setSrc` will be deprecated
  return this.setSrc(src);
};

vjs.Flash.prototype.setSrc = function(src){
  // Make sure source URL is absolute.
  src = vjs.getAbsoluteURL(src);
  this.el_.vjs_src(src);

  // Currently the SWF doesn't autoplay if you load a source later.
  // e.g. Load player w/ no source, wait 2s, set src.
  if (this.player_.autoplay()) {
    var tech = this;
    this.setTimeout(function(){ tech.play(); }, 0);
  }
};

vjs.Flash.prototype['setCurrentTime'] = function(time){
  this.lastSeekTarget_ = time;
  this.el_.vjs_setProperty('currentTime', time);
  vjs.MediaTechController.prototype.setCurrentTime.call(this);
};

vjs.Flash.prototype['currentTime'] = function(time){
  // when seeking make the reported time keep up with the requested time
  // by reading the time we're seeking to
  if (this.seeking()) {
    return this.lastSeekTarget_ || 0;
  }
  return this.el_.vjs_getProperty('currentTime');
};

vjs.Flash.prototype['currentSrc'] = function(){
  if (this.currentSource_) {
    return this.currentSource_.src;
  } else {
    return this.el_.vjs_getProperty('currentSrc');
  }
};

vjs.Flash.prototype.load = function(){
  this.el_.vjs_load();
};

vjs.Flash.prototype.poster = function(){
  this.el_.vjs_getProperty('poster');
};
vjs.Flash.prototype['setPoster'] = function(){
  // poster images are not handled by the Flash tech so make this a no-op
};

vjs.Flash.prototype.seekable = function() {
  var duration = this.duration();
  if (duration === 0) {
    // The SWF reports a duration of zero when the actual duration is unknown
    return vjs.createTimeRange();
  }
  return vjs.createTimeRange(0, this.duration());
};

vjs.Flash.prototype.buffered = function(){
  if (!this.el_.vjs_getProperty) {
    return vjs.createTimeRange();
  }
  return vjs.createTimeRange(0, this.el_.vjs_getProperty('buffered'));
};

vjs.Flash.prototype.duration = function(){
  if (!this.el_.vjs_getProperty) {
    return 0;
  }
  return this.el_.vjs_getProperty('duration');
};

vjs.Flash.prototype.supportsFullScreen = function(){
  return false; // Flash does not allow fullscreen through javascript
};

vjs.Flash.prototype.enterFullScreen = function(){
  return false;
};

(function(){
  // Create setters and getters for attributes
  var api = vjs.Flash.prototype,
    readWrite = 'rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted'.split(','),
    readOnly = 'error,networkState,readyState,seeking,initialTime,startOffsetTime,paused,played,ended,videoTracks,audioTracks,videoWidth,videoHeight'.split(','),
    // Overridden: buffered, currentTime, currentSrc
    i;

  function createSetter(attr){
    var attrUpper = attr.charAt(0).toUpperCase() + attr.slice(1);
    api['set'+attrUpper] = function(val){ return this.el_.vjs_setProperty(attr, val); };
  }
  function createGetter(attr) {
    api[attr] = function(){ return this.el_.vjs_getProperty(attr); };
  }

  // Create getter and setters for all read/write attributes
  for (i = 0; i < readWrite.length; i++) {
    createGetter(readWrite[i]);
    createSetter(readWrite[i]);
  }

  // Create getters for read-only attributes
  for (i = 0; i < readOnly.length; i++) {
    createGetter(readOnly[i]);
  }
})();

/* Flash Support Testing -------------------------------------------------------- */

vjs.Flash.isSupported = function(){
  return vjs.Flash.version()[0] >= 10;
  // return swfobject.hasFlashPlayerVersion('10');
};

// Add Source Handler pattern functions to this tech
vjs.MediaTechController.withSourceHandlers(vjs.Flash);

/**
 * The default native source handler.
 * This simply passes the source to the video element. Nothing fancy.
 * @param  {Object} source   The source object
 * @param  {vjs.Flash} tech  The instance of the Flash tech
 */
vjs.Flash['nativeSourceHandler'] = {};

/**
 * Check Flash can handle the source natively
 * @param  {Object} source  The source object
 * @return {String}         'probably', 'maybe', or '' (empty string)
 */
vjs.Flash['nativeSourceHandler']['canHandleSource'] = function(source){
  var type;

  if (!source.type) {
    return '';
  }

  // Strip code information from the type because we don't get that specific
  type = source.type.replace(/;.*/,'').toLowerCase();

  if (type in vjs.Flash.formats) {
    return 'maybe';
  }

  return '';
};

/**
 * Pass the source to the flash object
 * Adaptive source handlers will have more complicated workflows before passing
 * video data to the video element
 * @param  {Object} source    The source object
 * @param  {vjs.Flash} tech   The instance of the Flash tech
 */
vjs.Flash['nativeSourceHandler']['handleSource'] = function(source, tech){
  tech.setSrc(source.src);
};

/**
 * Clean up the source handler when disposing the player or switching sources..
 * (no cleanup is needed when supporting the format natively)
 */
vjs.Flash['nativeSourceHandler']['dispose'] = function(){};

// Register the native source handler
vjs.Flash['registerSourceHandler'](vjs.Flash['nativeSourceHandler']);

vjs.Flash.formats = {
  'video/flv': 'FLV',
  'video/x-flv': 'FLV',
  'video/mp4': 'MP4',
  'video/m4v': 'MP4'
};

vjs.Flash['onReady'] = function(currSwf){
  var el, player;

  el = vjs.el(currSwf);

  // get player from the player div property
  player = el && el.parentNode && el.parentNode['player'];

  // if there is no el or player then the tech has been disposed
  // and the tech element was removed from the player div
  if (player) {
    // reference player on tech element
    el['player'] = player;
    // check that the flash object is really ready
    vjs.Flash['checkReady'](player.tech);
  }
};

// The SWF isn't always ready when it says it is. Sometimes the API functions still need to be added to the object.
// If it's not ready, we set a timeout to check again shortly.
vjs.Flash['checkReady'] = function(tech){
  // stop worrying if the tech has been disposed
  if (!tech.el()) {
    return;
  }

  // check if API property exists
  if (tech.el().vjs_getProperty) {
    // tell tech it's ready
    tech.triggerReady();
  } else {
    // wait longer
    this.setTimeout(function(){
      vjs.Flash['checkReady'](tech);
    }, 50);
  }
};

// Trigger events from the swf on the player
vjs.Flash['onEvent'] = function(swfID, eventName){
  var player = vjs.el(swfID)['player'];
  player.trigger(eventName);
};

// Log errors from the swf
vjs.Flash['onError'] = function(swfID, err){
  var player = vjs.el(swfID)['player'];
  var msg = 'FLASH: '+err;

  if (err == 'srcnotfound') {
    player.error({ code: 4, message: msg });

  // errors we haven't categorized into the media errors
  } else {
    player.error(msg);
  }
};

// Flash Version Check
vjs.Flash.version = function(){
  var version = '0,0,0';

  // IE
  try {
    version = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];

  // other browsers
  } catch(e) {
    try {
      if (navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){
        version = (navigator.plugins['Shockwave Flash 2.0'] || navigator.plugins['Shockwave Flash']).description.replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];
      }
    } catch(err) {}
  }
  return version.split(',');
};

// Flash embedding method. Only used in non-iframe mode
vjs.Flash.embed = function(swf, placeHolder, flashVars, params, attributes){
  var code = vjs.Flash.getEmbedCode(swf, flashVars, params, attributes),

      // Get element by embedding code and retrieving created element
      obj = vjs.createEl('div', { innerHTML: code }).childNodes[0],

      par = placeHolder.parentNode
  ;

  placeHolder.parentNode.replaceChild(obj, placeHolder);
  obj[vjs.expando] = placeHolder[vjs.expando];

  // IE6 seems to have an issue where it won't initialize the swf object after injecting it.
  // This is a dumb fix
  var newObj = par.childNodes[0];
  setTimeout(function(){
    newObj.style.display = 'block';
  }, 1000);

  return obj;

};

vjs.Flash.getEmbedCode = function(swf, flashVars, params, attributes){

  var objTag = '<object type="application/x-shockwave-flash" ',
      flashVarsString = '',
      paramsString = '',
      attrsString = '';

  // Convert flash vars to string
  if (flashVars) {
    vjs.obj.each(flashVars, function(key, val){
      flashVarsString += (key + '=' + val + '&amp;');
    });
  }

  // Add swf, flashVars, and other default params
  params = vjs.obj.merge({
    'movie': swf,
    'flashvars': flashVarsString,
    'allowScriptAccess': 'always', // Required to talk to swf
    'allowNetworking': 'all' // All should be default, but having security issues.
  }, params);

  // Create param tags string
  vjs.obj.each(params, function(key, val){
    paramsString += '<param name="'+key+'" value="'+val+'" />';
  });

  attributes = vjs.obj.merge({
    // Add swf to attributes (need both for IE and Others to work)
    'data': swf,

    // Default to 100% width/height
    'width': '100%',
    'height': '100%'

  }, attributes);

  // Create Attributes string
  vjs.obj.each(attributes, function(key, val){
    attrsString += (key + '="' + val + '" ');
  });

  return objTag + attrsString + '>' + paramsString + '</object>';
};
vjs.Flash.streamingFormats = {
  'rtmp/mp4': 'MP4',
  'rtmp/flv': 'FLV'
};

vjs.Flash.streamFromParts = function(connection, stream) {
  return connection + '&' + stream;
};

vjs.Flash.streamToParts = function(src) {
  var parts = {
    connection: '',
    stream: ''
  };

  if (! src) {
    return parts;
  }

  // Look for the normal URL separator we expect, '&'.
  // If found, we split the URL into two pieces around the
  // first '&'.
  var connEnd = src.indexOf('&');
  var streamBegin;
  if (connEnd !== -1) {
    streamBegin = connEnd + 1;
  }
  else {
    // If there's not a '&', we use the last '/' as the delimiter.
    connEnd = streamBegin = src.lastIndexOf('/') + 1;
    if (connEnd === 0) {
      // really, there's not a '/'?
      connEnd = streamBegin = src.length;
    }
  }
  parts.connection = src.substring(0, connEnd);
  parts.stream = src.substring(streamBegin, src.length);

  return parts;
};

vjs.Flash.isStreamingType = function(srcType) {
  return srcType in vjs.Flash.streamingFormats;
};

// RTMP has four variations, any string starting
// with one of these protocols should be valid
vjs.Flash.RTMP_RE = /^rtmp[set]?:\/\//i;

vjs.Flash.isStreamingSrc = function(src) {
  return vjs.Flash.RTMP_RE.test(src);
};

/**
 * A source handler for RTMP urls
 * @type {Object}
 */
vjs.Flash.rtmpSourceHandler = {};

/**
 * Check Flash can handle the source natively
 * @param  {Object} source  The source object
 * @return {String}         'probably', 'maybe', or '' (empty string)
 */
vjs.Flash.rtmpSourceHandler['canHandleSource'] = function(source){
  if (vjs.Flash.isStreamingType(source.type) || vjs.Flash.isStreamingSrc(source.src)) {
    return 'maybe';
  }

  return '';
};

/**
 * Pass the source to the flash object
 * Adaptive source handlers will have more complicated workflows before passing
 * video data to the video element
 * @param  {Object} source    The source object
 * @param  {vjs.Flash} tech   The instance of the Flash tech
 */
vjs.Flash.rtmpSourceHandler['handleSource'] = function(source, tech){
  var srcParts = vjs.Flash.streamToParts(source.src);

  tech['setRtmpConnection'](srcParts.connection);
  tech['setRtmpStream'](srcParts.stream);
};

// Register the native source handler
vjs.Flash['registerSourceHandler'](vjs.Flash.rtmpSourceHandler);
/**
 * The Media Loader is the component that decides which playback technology to load
 * when the player is initialized.
 *
 * @constructor
 */
vjs.MediaLoader = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.Component.call(this, player, options, ready);

    // If there are no sources when the player is initialized,
    // load the first supported playback technology.
    if (!player.options_['sources'] || player.options_['sources'].length === 0) {
      for (var i=0,j=player.options_['techOrder']; i<j.length; i++) {
        var techName = vjs.capitalize(j[i]),
            tech = window['videojs'][techName];

        // Check if the browser supports this technology
        if (tech && tech.isSupported()) {
          player.loadTech(techName);
          break;
        }
      }
    } else {
      // // Loop through playback technologies (HTML5, Flash) and check for support.
      // // Then load the best source.
      // // A few assumptions here:
      // //   All playback technologies respect preload false.
      player.src(player.options_['sources']);
    }
  }
});
/*
 * https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackmode
 *
 * enum TextTrackMode { "disabled",  "hidden",  "showing" };
 */
vjs.TextTrackMode = {
  'disabled': 'disabled',
  'hidden': 'hidden',
  'showing': 'showing'
};

/*
 * https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackkind
 *
 * enum TextTrackKind { "subtitles",  "captions",  "descriptions",  "chapters",  "metadata" };
 */
vjs.TextTrackKind = {
  'subtitles': 'subtitles',
  'captions': 'captions',
  'descriptions': 'descriptions',
  'chapters': 'chapters',
  'metadata': 'metadata'
};
(function() {
/*
 * https://html.spec.whatwg.org/multipage/embedded-content.html#texttrack
 *
 * interface TextTrack : EventTarget {
 *   readonly attribute TextTrackKind kind;
 *   readonly attribute DOMString label;
 *   readonly attribute DOMString language;
 *
 *   readonly attribute DOMString id;
 *   readonly attribute DOMString inBandMetadataTrackDispatchType;
 *
 *   attribute TextTrackMode mode;
 *
 *   readonly attribute TextTrackCueList? cues;
 *   readonly attribute TextTrackCueList? activeCues;
 *
 *   void addCue(TextTrackCue cue);
 *   void removeCue(TextTrackCue cue);
 *
 *   attribute EventHandler oncuechange;
 * };
 */

vjs.TextTrack = function(options) {
  var tt, id, mode, kind, label, language, cues, activeCues, timeupdateHandler, changed, prop;

  options = options || {};

  if (!options['player']) {
    throw new Error('A player was not provided.');
  }

  tt = this;
  if (vjs.IS_IE8) {
    tt = document.createElement('custom');

    for (prop in vjs.TextTrack.prototype) {
      tt[prop] = vjs.TextTrack.prototype[prop];
    }
  }

  tt.player_ = options['player'];

  mode = vjs.TextTrackMode[options['mode']] || 'disabled';
  kind = vjs.TextTrackKind[options['kind']] || 'subtitles';
  label = options['label'] || '';
  language = options['language'] || options['srclang'] || '';
  id = options['id'] || 'vjs_text_track_' + vjs.guid++;

  if (kind === 'metadata' || kind === 'chapters') {
    mode = 'hidden';
  }

  tt.cues_ = [];
  tt.activeCues_ = [];

  cues = new vjs.TextTrackCueList(tt.cues_);
  activeCues = new vjs.TextTrackCueList(tt.activeCues_);

  changed = false;
  timeupdateHandler = vjs.bind(tt, function() {
    this['activeCues'];
    if (changed) {
      this['trigger']('cuechange');
      changed = false;
    }
  });
  if (mode !== 'disabled') {
    tt.player_.on('timeupdate', timeupdateHandler);
  }

  Object.defineProperty(tt, 'kind', {
    get: function() {
      return kind;
    },
    set: Function.prototype
  });

  Object.defineProperty(tt, 'label', {
    get: function() {
      return label;
    },
    set: Function.prototype
  });

  Object.defineProperty(tt, 'language', {
    get: function() {
      return language;
    },
    set: Function.prototype
  });

  Object.defineProperty(tt, 'id', {
    get: function() {
      return id;
    },
    set: Function.prototype
  });

  Object.defineProperty(tt, 'mode', {
    get: function() {
      return mode;
    },
    set: function(newMode) {
      if (!vjs.TextTrackMode[newMode]) {
        return;
      }
      mode = newMode;
      if (mode === 'showing') {
        this.player_.on('timeupdate', timeupdateHandler);
      }
      this.trigger('modechange');
    }
  });

  Object.defineProperty(tt, 'cues', {
    get: function() {
      if (!this.loaded_) {
        return null;
      }

      return cues;
    },
    set: Function.prototype
  });

  Object.defineProperty(tt, 'activeCues', {
    get: function() {
      var i, l, active, ct, cue;

      if (!this.loaded_) {
        return null;
      }

      if (this['cues'].length === 0) {
        return activeCues; // nothing to do
      }

      ct = this.player_.currentTime();
      i = 0;
      l = this['cues'].length;
      active = [];

      for (; i < l; i++) {
        cue = this['cues'][i];
        if (cue['startTime'] <= ct && cue['endTime'] >= ct) {
          active.push(cue);
        } else if (cue['startTime'] === cue['endTime'] && cue['startTime'] <= ct && cue['startTime'] + 0.5 >= ct) {
          active.push(cue);
        }
      }

      changed = false;

      if (active.length !== this.activeCues_.length) {
        changed = true;
      } else {
        for (i = 0; i < active.length; i++) {
          if (indexOf.call(this.activeCues_, active[i]) === -1) {
            changed = true;
          }
        }
      }

      this.activeCues_ = active;
      activeCues.setCues_(this.activeCues_);

      return activeCues;
    },
    set: Function.prototype
  });

  if (options.src) {
    loadTrack(options.src, tt);
  } else {
    tt.loaded_ = true;
  }

  if (vjs.IS_IE8) {
    return tt;
  }
};

vjs.TextTrack.prototype = vjs.obj.create(vjs.EventEmitter.prototype);
vjs.TextTrack.prototype.constructor = vjs.TextTrack;

/*
 * cuechange - One or more cues in the track have become active or stopped being active.
 */
vjs.TextTrack.prototype.allowedEvents_ = {
  'cuechange': 'cuechange'
};

vjs.TextTrack.prototype.addCue = function(cue) {
  var tracks = this.player_.textTracks(),
      i = 0;

  if (tracks) {
    for (; i < tracks.length; i++) {
      if (tracks[i] !== this) {
        tracks[i].removeCue(cue);
      }
    }
  }

  this.cues_.push(cue);
  this['cues'].setCues_(this.cues_);
};

vjs.TextTrack.prototype.removeCue = function(removeCue) {
  var i = 0,
      l = this.cues_.length,
      cue,
      removed = false;

  for (; i < l; i++) {
    cue = this.cues_[i];
    if (cue === removeCue) {
      this.cues_.splice(i, 1);
      removed = true;
    }
  }

  if (removed) {
    this.cues.setCues_(this.cues_);
  }
};

/*
 * Downloading stuff happens below this point
 */
var loadTrack, parseCues, indexOf;

loadTrack = function(src, track) {
  vjs.xhr(src, vjs.bind(this, function(err, response, responseBody){
    if (err) {
      return vjs.log.error(err);
    }


    track.loaded_ = true;
    parseCues(responseBody, track);
  }));
};

parseCues = function(srcContent, track) {
  if (typeof window['WebVTT'] !== 'function') {
    //try again a bit later
    return window.setTimeout(function() {
      parseCues(srcContent, track);
    }, 25);
  }

  var parser = new window['WebVTT']['Parser'](window, window['vttjs'], window['WebVTT']['StringDecoder']());

  parser['oncue'] = function(cue) {
    track.addCue(cue);
  };
  parser['onparsingerror'] = function(error) {
    vjs.log.error(error);
  };

  parser['parse'](srcContent);
  parser['flush']();
};

indexOf = function(searchElement, fromIndex) {

  var k;

  if (this == null) {
    throw new TypeError('"this" is null or not defined');
  }

  var O = Object(this);

  var len = O.length >>> 0;

  if (len === 0) {
    return -1;
  }

  var n = +fromIndex || 0;

  if (Math.abs(n) === Infinity) {
    n = 0;
  }

  if (n >= len) {
    return -1;
  }

  k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);

  while (k < len) {
    if (k in O && O[k] === searchElement) {
      return k;
    }
    k++;
  }
  return -1;
};

})();
/*
 * https://html.spec.whatwg.org/multipage/embedded-content.html#texttracklist
 *
 * interface TextTrackList : EventTarget {
 *   readonly attribute unsigned long length;
 *   getter TextTrack (unsigned long index);
 *   TextTrack? getTrackById(DOMString id);
 * 
 *   attribute EventHandler onchange;
 *   attribute EventHandler onaddtrack;
 *   attribute EventHandler onremovetrack;
 * };
 */
vjs.TextTrackList = function(tracks) {
  var list = this,
      prop,
      i = 0;

  if (vjs.IS_IE8) {
    list = document.createElement('custom');

    for (prop in vjs.TextTrackList.prototype) {
      list[prop] = vjs.TextTrackList.prototype[prop];
    }
  }

  tracks = tracks || [];
  list.tracks_ = [];

  Object.defineProperty(list, 'length', {
    get: function() {
      return this.tracks_.length;
    }
  });

  for (; i < tracks.length; i++) {
    list.addTrack_(tracks[i]);
  }

  if (vjs.IS_IE8) {
    return list;
  }
};

vjs.TextTrackList.prototype = vjs.obj.create(vjs.EventEmitter.prototype);
vjs.TextTrackList.prototype.constructor = vjs.TextTrackList;

/*
 * change - One or more tracks in the track list have been enabled or disabled.
 * addtrack - A track has been added to the track list.
 * removetrack - A track has been removed from the track list.
*/
vjs.TextTrackList.prototype.allowedEvents_ = {
  'change': 'change',
  'addtrack': 'addtrack',
  'removetrack': 'removetrack'
};

// emulate attribute EventHandler support to allow for feature detection
(function() {
  var event;

  for (event in vjs.TextTrackList.prototype.allowedEvents_) {
    vjs.TextTrackList.prototype['on' + event] = null;
  }
})();

vjs.TextTrackList.prototype.addTrack_ = function(track) {
  var index = this.tracks_.length;
  if (!(''+index in this)) {
    Object.defineProperty(this, index, {
      get: function() {
        return this.tracks_[index];
      }
    });
  }

  track.addEventListener('modechange', vjs.bind(this, function() {
    this.trigger('change');
  }));
  this.tracks_.push(track);

  this.trigger({
    type: 'addtrack',
    track: track
  });
};

vjs.TextTrackList.prototype.removeTrack_ = function(rtrack) {
  var i = 0,
      l = this.length,
      result = null,
      track;

  for (; i < l; i++) {
    track = this[i];
    if (track === rtrack) {
      this.tracks_.splice(i, 1);
      break;
    }
  }

  this.trigger({
    type: 'removetrack',
    track: rtrack
  });
};

vjs.TextTrackList.prototype.getTrackById = function(id) {
  var i = 0,
      l = this.length,
      result = null,
      track;

  for (; i < l; i++) {
    track = this[i];
    if (track.id === id) {
      result = track;
      break;
    }
  }

  return result;
};
/*
 * https://html.spec.whatwg.org/multipage/embedded-content.html#texttrackcuelist
 *
 * interface TextTrackCueList {
 *   readonly attribute unsigned long length;
 *   getter TextTrackCue (unsigned long index);
 *   TextTrackCue? getCueById(DOMString id);
 * };
 */

vjs.TextTrackCueList = function(cues) {
  var list = this,
      prop;

  if (vjs.IS_IE8) {
    list = document.createElement('custom');

    for (prop in vjs.TextTrackCueList.prototype) {
      list[prop] = vjs.TextTrackCueList.prototype[prop];
    }
  }

  vjs.TextTrackCueList.prototype.setCues_.call(list, cues);

  Object.defineProperty(list, 'length', {
    get: function() {
      return this.length_;
    }
  });

  if (vjs.IS_IE8) {
    return list;
  }
};

vjs.TextTrackCueList.prototype.setCues_ = function(cues) {
  var oldLength = this.length || 0,
      i = 0,
      l = cues.length,
      defineProp;

  this.cues_ = cues;
  this.length_ = cues.length;

  defineProp = function(i) {
    if (!(''+i in this)) {
      Object.defineProperty(this, '' + i, {
        get: function() {
          return this.cues_[i];
        }
      });
    }
  };

  if (oldLength < l) {
    i = oldLength;
    for(; i < l; i++) {
      defineProp.call(this, i);
    }
  }
};

vjs.TextTrackCueList.prototype.getCueById = function(id) {
  var i = 0,
      l = this.length,
      result = null,
      cue;

  for (; i < l; i++) {
    cue = this[i];
    if (cue.id === id) {
      result = cue;
      break;
    }
  }

  return result;
};
(function() {
'use strict';

/* Text Track Display
============================================================================= */
// Global container for both subtitle and captions text. Simple div container.

/**
 * The component for displaying text track cues
 *
 * @constructor
 */
vjs.TextTrackDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.Component.call(this, player, options, ready);

    player.on('loadstart', vjs.bind(this, this.toggleDisplay));

    // This used to be called during player init, but was causing an error
    // if a track should show by default and the display hadn't loaded yet.
    // Should probably be moved to an external track loader when we support
    // tracks that don't need a display.
    player.ready(vjs.bind(this, function() {
      if (player.tech && player.tech['featuresNativeTextTracks']) {
        this.hide();
        return;
      }

      var i, tracks, track;

      player.on('fullscreenchange', vjs.bind(this, this.updateDisplay));

      tracks = player.options_['tracks'] || [];
      for (i = 0; i < tracks.length; i++) {
        track = tracks[i];
        this.player_.addRemoteTextTrack(track);
      }
    }));
  }
});

vjs.TextTrackDisplay.prototype.toggleDisplay = function() {
  if (this.player_.tech && this.player_.tech['featuresNativeTextTracks']) {
    this.hide();
  } else {
    this.show();
  }
};

vjs.TextTrackDisplay.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-text-track-display'
  });
};

vjs.TextTrackDisplay.prototype.clearDisplay = function() {
  if (typeof window['WebVTT'] === 'function') {
    window['WebVTT']['processCues'](window, [], this.el_);
  }
};

// Add cue HTML to display
var constructColor = function(color, opacity) {
  return 'rgba(' +
    // color looks like "#f0e"
    parseInt(color[1] + color[1], 16) + ',' +
    parseInt(color[2] + color[2], 16) + ',' +
    parseInt(color[3] + color[3], 16) + ',' +
    opacity + ')';
};
var darkGray = '#222';
var lightGray = '#ccc';
var fontMap = {
  monospace:             'monospace',
  sansSerif:             'sans-serif',
  serif:                 'serif',
  monospaceSansSerif:    '"Andale Mono", "Lucida Console", monospace',
  monospaceSerif:        '"Courier New", monospace',
  proportionalSansSerif: 'sans-serif',
  proportionalSerif:     'serif',
  casual:                '"Comic Sans MS", Impact, fantasy',
  script:                '"Monotype Corsiva", cursive',
  smallcaps:             '"Andale Mono", "Lucida Console", monospace, sans-serif'
};
var tryUpdateStyle = function(el, style, rule) {
  // some style changes will throw an error, particularly in IE8. Those should be noops.
  try {
    el.style[style] = rule;
  } catch (e) {}
};

vjs.TextTrackDisplay.prototype.updateDisplay = function() {
  var tracks = this.player_.textTracks(),
      i = 0,
      track;

  this.clearDisplay();

  if (!tracks) {
    return;
  }

  for (; i < tracks.length; i++) {
    track = tracks[i];
    if (track['mode'] === 'showing') {
      this.updateForTrack(track);
    }
  }
};

vjs.TextTrackDisplay.prototype.updateForTrack = function(track) {
  if (typeof window['WebVTT'] !== 'function' || !track['activeCues']) {
    return;
  }

  var i = 0,
      property,
      cueDiv,
      overrides = this.player_['textTrackSettings'].getValues(),
      fontSize,
      cues = [];

  for (; i < track['activeCues'].length; i++) {
    cues.push(track['activeCues'][i]);
  }

  window['WebVTT']['processCues'](window, track['activeCues'], this.el_);

  i = cues.length;
  while (i--) {
    cueDiv = cues[i].displayState;
    if (overrides.color) {
      cueDiv.firstChild.style.color = overrides.color;
    }
    if (overrides.textOpacity) {
      tryUpdateStyle(cueDiv.firstChild,
                     'color',
                     constructColor(overrides.color || '#fff',
                                    overrides.textOpacity));
    }
    if (overrides.backgroundColor) {
      cueDiv.firstChild.style.backgroundColor = overrides.backgroundColor;
    }
    if (overrides.backgroundOpacity) {
      tryUpdateStyle(cueDiv.firstChild,
                     'backgroundColor',
                     constructColor(overrides.backgroundColor || '#000',
                                    overrides.backgroundOpacity));
    }
    if (overrides.windowColor) {
      if (overrides.windowOpacity) {
        tryUpdateStyle(cueDiv,
                       'backgroundColor',
                       constructColor(overrides.windowColor, overrides.windowOpacity));
      } else {
        cueDiv.style.backgroundColor = overrides.windowColor;
      }
    }
    if (overrides.edgeStyle) {
      if (overrides.edgeStyle === 'dropshadow') {
        cueDiv.firstChild.style.textShadow = '2px 2px 3px ' + darkGray + ', 2px 2px 4px ' + darkGray + ', 2px 2px 5px ' + darkGray;
      } else if (overrides.edgeStyle === 'raised') {
        cueDiv.firstChild.style.textShadow = '1px 1px ' + darkGray + ', 2px 2px ' + darkGray + ', 3px 3px ' + darkGray;
      } else if (overrides.edgeStyle === 'depressed') {
        cueDiv.firstChild.style.textShadow = '1px 1px ' + lightGray + ', 0 1px ' + lightGray + ', -1px -1px ' + darkGray + ', 0 -1px ' + darkGray;
      } else if (overrides.edgeStyle === 'uniform') {
        cueDiv.firstChild.style.textShadow = '0 0 4px ' + darkGray + ', 0 0 4px ' + darkGray + ', 0 0 4px ' + darkGray + ', 0 0 4px ' + darkGray;
      }
    }
    if (overrides.fontPercent && overrides.fontPercent !== 1) {
      fontSize = window.parseFloat(cueDiv.style.fontSize);
      cueDiv.style.fontSize = (fontSize * overrides.fontPercent) + 'px';
      cueDiv.style.height = 'auto';
      cueDiv.style.top = 'auto';
      cueDiv.style.bottom = '2px';
    }
    if (overrides.fontFamily && overrides.fontFamily !== 'default') {
      if (overrides.fontFamily === 'small-caps') {
        cueDiv.firstChild.style.fontVariant = 'small-caps';
      } else {
        cueDiv.firstChild.style.fontFamily = fontMap[overrides.fontFamily];
      }
    }
  }
};


/**
 * The specific menu item type for selecting a language within a text track kind
 *
 * @constructor
 */
vjs.TextTrackMenuItem = vjs.MenuItem.extend({
  /** @constructor */
  init: function(player, options){
    var track = this.track = options['track'],
        tracks = player.textTracks(),
        changeHandler,
        event;

    if (tracks) {
      changeHandler = vjs.bind(this, function() {
        var selected = this.track['mode'] === 'showing',
            track,
            i,
            l;

        if (this instanceof vjs.OffTextTrackMenuItem) {
          selected = true;

          i = 0,
          l = tracks.length;

          for (; i < l; i++) {
            track = tracks[i];
            if (track['kind'] === this.track['kind'] && track['mode'] === 'showing') {
              selected = false;
              break;
            }
          }
        }

        this.selected(selected);
      });
      tracks.addEventListener('change', changeHandler);
      player.on('dispose', function() {
        tracks.removeEventListener('change', changeHandler);
      });
    }

    // Modify options for parent MenuItem class's init.
    options['label'] = track['label'] || track['language'] || 'Unknown';
    options['selected'] = track['default'] || track['mode'] === 'showing';
    vjs.MenuItem.call(this, player, options);

    // iOS7 doesn't dispatch change events to TextTrackLists when an
    // associated track's mode changes. Without something like
    // Object.observe() (also not present on iOS7), it's not
    // possible to detect changes to the mode attribute and polyfill
    // the change event. As a poor substitute, we manually dispatch
    // change events whenever the controls modify the mode.
    if (tracks && tracks.onchange === undefined) {
      this.on(['tap', 'click'], function() {
        if (typeof window.Event !== 'object') {
          // Android 2.3 throws an Illegal Constructor error for window.Event
          try {
            event = new window.Event('change');
          } catch(err){}
        }

        if (!event) {
          event = document.createEvent('Event');
          event.initEvent('change', true, true);
        }

        tracks.dispatchEvent(event);
      });
    }
  }
});

vjs.TextTrackMenuItem.prototype.onClick = function(){
  var kind = this.track['kind'],
      tracks = this.player_.textTracks(),
      mode,
      track,
      i = 0;

  vjs.MenuItem.prototype.onClick.call(this);

  if (!tracks) {
    return;
  }

  for (; i < tracks.length; i++) {
    track = tracks[i];

    if (track['kind'] !== kind) {
      continue;
    }

    if (track === this.track) {
      track['mode'] = 'showing';
    } else {
      track['mode'] = 'disabled';
    }
  }
};

/**
 * A special menu item for turning of a specific type of text track
 *
 * @constructor
 */
vjs.OffTextTrackMenuItem = vjs.TextTrackMenuItem.extend({
  /** @constructor */
  init: function(player, options){
    // Create pseudo track info
    // Requires options['kind']
    options['track'] = {
      'kind': options['kind'],
      'player': player,
      'label': options['kind'] + ' off',
      'default': false,
      'mode': 'disabled'
    };
    vjs.TextTrackMenuItem.call(this, player, options);
    this.selected(true);
  }
});

vjs.CaptionSettingsMenuItem = vjs.TextTrackMenuItem.extend({
  init: function(player, options) {
    options['track'] = {
      'kind': options['kind'],
      'player': player,
      'label': options['kind'] + ' settings',
      'default': false,
      mode: 'disabled'
    };

    vjs.TextTrackMenuItem.call(this, player, options);
    this.addClass('vjs-texttrack-settings');
  }
});

vjs.CaptionSettingsMenuItem.prototype.onClick = function() {
  this.player().getChild('textTrackSettings').show();
};

/**
 * The base class for buttons that toggle specific text track types (e.g. subtitles)
 *
 * @constructor
 */
vjs.TextTrackButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    var tracks, updateHandler;

    vjs.MenuButton.call(this, player, options);

    tracks = this.player_.textTracks();

    if (this.items.length <= 1) {
      this.hide();
    }

    if (!tracks) {
      return;
    }

    updateHandler = vjs.bind(this, this.update);
    tracks.addEventListener('removetrack', updateHandler);
    tracks.addEventListener('addtrack', updateHandler);

    this.player_.on('dispose', function() {
      tracks.removeEventListener('removetrack', updateHandler);
      tracks.removeEventListener('addtrack', updateHandler);
    });
  }
});

// Create a menu item for each text track
vjs.TextTrackButton.prototype.createItems = function(){
  var items = [], track, tracks;

  if (this instanceof vjs.CaptionsButton && !(this.player().tech && this.player().tech['featuresNativeTextTracks'])) {
    items.push(new vjs.CaptionSettingsMenuItem(this.player_, { 'kind': this.kind_ }));
  }

  // Add an OFF menu item to turn all tracks off
  items.push(new vjs.OffTextTrackMenuItem(this.player_, { 'kind': this.kind_ }));

  tracks = this.player_.textTracks();

  if (!tracks) {
    return items;
  }

  for (var i = 0; i < tracks.length; i++) {
    track = tracks[i];

    // only add tracks that are of the appropriate kind and have a label
    if (track['kind'] === this.kind_) {
      items.push(new vjs.TextTrackMenuItem(this.player_, {
        'track': track
      }));
    }
  }

  return items;
};

/**
 * The button component for toggling and selecting captions
 *
 * @constructor
 */
vjs.CaptionsButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Captions Menu');
  }
});
vjs.CaptionsButton.prototype.kind_ = 'captions';
vjs.CaptionsButton.prototype.buttonText = 'Captions';
vjs.CaptionsButton.prototype.className = 'vjs-captions-button';

vjs.CaptionsButton.prototype.update = function() {
  var threshold = 2;
  vjs.TextTrackButton.prototype.update.call(this);

  // if native, then threshold is 1 because no settings button
  if (this.player().tech && this.player().tech['featuresNativeTextTracks']) {
    threshold = 1;
  }

  if (this.items && this.items.length > threshold) {
    this.show();
  } else {
    this.hide();
  }
};

/**
 * The button component for toggling and selecting subtitles
 *
 * @constructor
 */
vjs.SubtitlesButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Subtitles Menu');
  }
});
vjs.SubtitlesButton.prototype.kind_ = 'subtitles';
vjs.SubtitlesButton.prototype.buttonText = 'Subtitles';
vjs.SubtitlesButton.prototype.className = 'vjs-subtitles-button';

// Chapters act much differently than other text tracks
// Cues are navigation vs. other tracks of alternative languages
/**
 * The button component for toggling and selecting chapters
 *
 * @constructor
 */
vjs.ChaptersButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Chapters Menu');
  }
});
vjs.ChaptersButton.prototype.kind_ = 'chapters';
vjs.ChaptersButton.prototype.buttonText = 'Chapters';
vjs.ChaptersButton.prototype.className = 'vjs-chapters-button';

// Create a menu item for each text track
vjs.ChaptersButton.prototype.createItems = function(){
  var items = [], track, tracks;

  tracks = this.player_.textTracks();

  if (!tracks) {
    return items;
  }

  for (var i = 0; i < tracks.length; i++) {
    track = tracks[i];
    if (track['kind'] === this.kind_) {
      items.push(new vjs.TextTrackMenuItem(this.player_, {
        'track': track
      }));
    }
  }

  return items;
};

vjs.ChaptersButton.prototype.createMenu = function(){
  var tracks = this.player_.textTracks() || [],
      i = 0,
      l = tracks.length,
      track, chaptersTrack,
      items = this.items = [];

  for (; i < l; i++) {
    track = tracks[i];
    if (track['kind'] == this.kind_) {
      if (!track.cues) {
        track['mode'] = 'hidden';
        /* jshint loopfunc:true */
        // TODO see if we can figure out a better way of doing this https://github.com/videojs/video.js/issues/1864
        window.setTimeout(vjs.bind(this, function() {
          this.createMenu();
        }), 100);
        /* jshint loopfunc:false */
      } else {
        chaptersTrack = track;
        break;
      }
    }
  }

  var menu = this.menu;
  if (menu === undefined) {
    menu = new vjs.Menu(this.player_);
    menu.contentEl().appendChild(vjs.createEl('li', {
      className: 'vjs-menu-title',
      innerHTML: vjs.capitalize(this.kind_),
      tabindex: -1
    }));
  }

  if (chaptersTrack) {
    var cues = chaptersTrack['cues'], cue, mi;
    i = 0;
    l = cues.length;

    for (; i < l; i++) {
      cue = cues[i];

      mi = new vjs.ChaptersTrackMenuItem(this.player_, {
        'track': chaptersTrack,
        'cue': cue
      });

      items.push(mi);

      menu.addChild(mi);
    }
    this.addChild(menu);
  }

  if (this.items.length > 0) {
    this.show();
  }

  return menu;
};


/**
 * @constructor
 */
vjs.ChaptersTrackMenuItem = vjs.MenuItem.extend({
  /** @constructor */
  init: function(player, options){
    var track = this.track = options['track'],
        cue = this.cue = options['cue'],
        currentTime = player.currentTime();

    // Modify options for parent MenuItem class's init.
    options['label'] = cue.text;
    options['selected'] = (cue['startTime'] <= currentTime && currentTime < cue['endTime']);
    vjs.MenuItem.call(this, player, options);

    track.addEventListener('cuechange', vjs.bind(this, this.update));
  }
});

vjs.ChaptersTrackMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player_.currentTime(this.cue.startTime);
  this.update(this.cue.startTime);
};

vjs.ChaptersTrackMenuItem.prototype.update = function(){
  var cue = this.cue,
      currentTime = this.player_.currentTime();

  // vjs.log(currentTime, cue.startTime);
  this.selected(cue['startTime'] <= currentTime && currentTime < cue['endTime']);
};
})();
(function() {
  'use strict';

  vjs.TextTrackSettings = vjs.Component.extend({
    init: function(player, options) {
      vjs.Component.call(this, player, options);
      this.hide();

      vjs.on(this.el().querySelector('.vjs-done-button'), 'click', vjs.bind(this, function() {
        this.saveSettings();
        this.hide();
      }));

      vjs.on(this.el().querySelector('.vjs-default-button'), 'click', vjs.bind(this, function() {
        this.el().querySelector('.vjs-fg-color > select').selectedIndex = 0;
        this.el().querySelector('.vjs-bg-color > select').selectedIndex = 0;
        this.el().querySelector('.window-color > select').selectedIndex = 0;
        this.el().querySelector('.vjs-text-opacity > select').selectedIndex = 0;
        this.el().querySelector('.vjs-bg-opacity > select').selectedIndex = 0;
        this.el().querySelector('.vjs-window-opacity > select').selectedIndex = 0;
        this.el().querySelector('.vjs-edge-style select').selectedIndex = 0;
        this.el().querySelector('.vjs-font-family select').selectedIndex = 0;
        this.el().querySelector('.vjs-font-percent select').selectedIndex = 2;
        this.updateDisplay();
      }));

      vjs.on(this.el().querySelector('.vjs-fg-color > select'), 'change', vjs.bind(this, this.updateDisplay));
      vjs.on(this.el().querySelector('.vjs-bg-color > select'), 'change', vjs.bind(this, this.updateDisplay));
      vjs.on(this.el().querySelector('.window-color > select'), 'change', vjs.bind(this, this.updateDisplay));
      vjs.on(this.el().querySelector('.vjs-text-opacity > select'), 'change', vjs.bind(this, this.updateDisplay));
      vjs.on(this.el().querySelector('.vjs-bg-opacity > select'), 'change', vjs.bind(this, this.updateDisplay));
      vjs.on(this.el().querySelector('.vjs-window-opacity > select'), 'change', vjs.bind(this, this.updateDisplay));
      vjs.on(this.el().querySelector('.vjs-font-percent select'), 'change', vjs.bind(this, this.updateDisplay));
      vjs.on(this.el().querySelector('.vjs-edge-style select'), 'change', vjs.bind(this, this.updateDisplay));
      vjs.on(this.el().querySelector('.vjs-font-family select'), 'change', vjs.bind(this, this.updateDisplay));

      if (player.options()['persistTextTrackSettings']) {
        this.restoreSettings();
      }
    }
  });

  vjs.TextTrackSettings.prototype.createEl = function() {
    return vjs.Component.prototype.createEl.call(this, 'div', {
      className: 'vjs-caption-settings vjs-modal-overlay',
      innerHTML: captionOptionsMenuTemplate()
    });
  };

  vjs.TextTrackSettings.prototype.getValues = function() {
    var el, bgOpacity, textOpacity, windowOpacity, textEdge, fontFamily, fgColor, bgColor, windowColor, result, name, fontPercent;

    el = this.el();

    textEdge = getSelectedOptionValue(el.querySelector('.vjs-edge-style select'));
    fontFamily = getSelectedOptionValue(el.querySelector('.vjs-font-family select'));
    fgColor = getSelectedOptionValue(el.querySelector('.vjs-fg-color > select'));
    textOpacity = getSelectedOptionValue(el.querySelector('.vjs-text-opacity > select'));
    bgColor = getSelectedOptionValue(el.querySelector('.vjs-bg-color > select'));
    bgOpacity = getSelectedOptionValue(el.querySelector('.vjs-bg-opacity > select'));
    windowColor = getSelectedOptionValue(el.querySelector('.window-color > select'));
    windowOpacity = getSelectedOptionValue(el.querySelector('.vjs-window-opacity > select'));
    fontPercent = window['parseFloat'](getSelectedOptionValue(el.querySelector('.vjs-font-percent > select')));

    result = {
      'backgroundOpacity': bgOpacity,
      'textOpacity': textOpacity,
      'windowOpacity': windowOpacity,
      'edgeStyle': textEdge,
      'fontFamily': fontFamily,
      'color': fgColor,
      'backgroundColor': bgColor,
      'windowColor': windowColor,
      'fontPercent': fontPercent
    };
    for (name in result) {
      if (result[name] === '' || result[name] === 'none' || (name === 'fontPercent' && result[name] === 1.00)) {
        delete result[name];
      }
    }
    return result;
  };

  vjs.TextTrackSettings.prototype.setValues = function(values) {
    var el = this.el(), fontPercent;

    setSelectedOption(el.querySelector('.vjs-edge-style select'), values.edgeStyle);
    setSelectedOption(el.querySelector('.vjs-font-family select'), values.fontFamily);
    setSelectedOption(el.querySelector('.vjs-fg-color > select'), values.color);
    setSelectedOption(el.querySelector('.vjs-text-opacity > select'), values.textOpacity);
    setSelectedOption(el.querySelector('.vjs-bg-color > select'), values.backgroundColor);
    setSelectedOption(el.querySelector('.vjs-bg-opacity > select'), values.backgroundOpacity);
    setSelectedOption(el.querySelector('.window-color > select'), values.windowColor);
    setSelectedOption(el.querySelector('.vjs-window-opacity > select'), values.windowOpacity);

    fontPercent = values.fontPercent;

    if (fontPercent) {
      fontPercent = fontPercent.toFixed(2);
    }

    setSelectedOption(el.querySelector('.vjs-font-percent > select'), fontPercent);
  };

  vjs.TextTrackSettings.prototype.restoreSettings = function() {
    var values;
    try {
      values = JSON.parse(window.localStorage.getItem('vjs-text-track-settings'));
    } catch (e) {}

    if (values) {
      this.setValues(values);
    }
  };

  vjs.TextTrackSettings.prototype.saveSettings = function() {
    var values;

    if (!this.player_.options()['persistTextTrackSettings']) {
      return;
    }

    values = this.getValues();
    try {
      if (!vjs.isEmpty(values)) {
        window.localStorage.setItem('vjs-text-track-settings', JSON.stringify(values));
      } else {
        window.localStorage.removeItem('vjs-text-track-settings');
      }
    } catch (e) {}
  };

  vjs.TextTrackSettings.prototype.updateDisplay = function() {
    var ttDisplay = this.player_.getChild('textTrackDisplay');
    if (ttDisplay) {
      ttDisplay.updateDisplay();
    }
  };

  function getSelectedOptionValue(target) {
    var selectedOption;
    // not all browsers support selectedOptions, so, fallback to options
    if (target.selectedOptions) {
      selectedOption = target.selectedOptions[0];
    } else if (target.options) {
      selectedOption = target.options[target.options.selectedIndex];
    }

    return selectedOption.value;
  }

  function setSelectedOption(target, value) {
    var i, option;

    if (!value) {
      return;
    }

    for (i = 0; i < target.options.length; i++) {
      option = target.options[i];
      if (option.value === value) {
        break;
      }
    }

    target.selectedIndex = i;
  }

  function captionOptionsMenuTemplate() {
    return '<div class="vjs-tracksettings">' +
        '<div class="vjs-tracksettings-colors">' +
          '<div class="vjs-fg-color vjs-tracksetting">' +
              '<label class="vjs-label">Foreground</label>' +
              '<select>' +
                '<option value="">---</option>' +
                '<option value="#FFF">White</option>' +
                '<option value="#000">Black</option>' +
                '<option value="#F00">Red</option>' +
                '<option value="#0F0">Green</option>' +
                '<option value="#00F">Blue</option>' +
                '<option value="#FF0">Yellow</option>' +
                '<option value="#F0F">Magenta</option>' +
                '<option value="#0FF">Cyan</option>' +
              '</select>' +
              '<span class="vjs-text-opacity vjs-opacity">' +
                '<select>' +
                  '<option value="">---</option>' +
                  '<option value="1">Opaque</option>' +
                  '<option value="0.5">Semi-Opaque</option>' +
                '</select>' +
              '</span>' +
          '</div>' + // vjs-fg-color
          '<div class="vjs-bg-color vjs-tracksetting">' +
              '<label class="vjs-label">Background</label>' +
              '<select>' +
                '<option value="">---</option>' +
                '<option value="#FFF">White</option>' +
                '<option value="#000">Black</option>' +
                '<option value="#F00">Red</option>' +
                '<option value="#0F0">Green</option>' +
                '<option value="#00F">Blue</option>' +
                '<option value="#FF0">Yellow</option>' +
                '<option value="#F0F">Magenta</option>' +
                '<option value="#0FF">Cyan</option>' +
              '</select>' +
              '<span class="vjs-bg-opacity vjs-opacity">' +
                  '<select>' +
                    '<option value="">---</option>' +
                    '<option value="1">Opaque</option>' +
                    '<option value="0.5">Semi-Transparent</option>' +
                    '<option value="0">Transparent</option>' +
                  '</select>' +
              '</span>' +
          '</div>' + // vjs-bg-color
          '<div class="window-color vjs-tracksetting">' +
              '<label class="vjs-label">Window</label>' +
              '<select>' +
                '<option value="">---</option>' +
                '<option value="#FFF">White</option>' +
                '<option value="#000">Black</option>' +
                '<option value="#F00">Red</option>' +
                '<option value="#0F0">Green</option>' +
                '<option value="#00F">Blue</option>' +
                '<option value="#FF0">Yellow</option>' +
                '<option value="#F0F">Magenta</option>' +
                '<option value="#0FF">Cyan</option>' +
              '</select>' +
              '<span class="vjs-window-opacity vjs-opacity">' +
                  '<select>' +
                    '<option value="">---</option>' +
                    '<option value="1">Opaque</option>' +
                    '<option value="0.5">Semi-Transparent</option>' +
                    '<option value="0">Transparent</option>' +
                  '</select>' +
              '</span>' +
          '</div>' + // vjs-window-color
        '</div>' + // vjs-tracksettings
        '<div class="vjs-tracksettings-font">' +
          '<div class="vjs-font-percent vjs-tracksetting">' +
            '<label class="vjs-label">Font Size</label>' +
            '<select>' +
              '<option value="0.50">50%</option>' +
              '<option value="0.75">75%</option>' +
              '<option value="1.00" selected>100%</option>' +
              '<option value="1.25">125%</option>' +
              '<option value="1.50">150%</option>' +
              '<option value="1.75">175%</option>' +
              '<option value="2.00">200%</option>' +
              '<option value="3.00">300%</option>' +
              '<option value="4.00">400%</option>' +
            '</select>' +
          '</div>' + // vjs-font-percent
          '<div class="vjs-edge-style vjs-tracksetting">' +
            '<label class="vjs-label">Text Edge Style</label>' +
            '<select>' +
              '<option value="none">None</option>' +
              '<option value="raised">Raised</option>' +
              '<option value="depressed">Depressed</option>' +
              '<option value="uniform">Uniform</option>' +
              '<option value="dropshadow">Dropshadow</option>' +
            '</select>' +
          '</div>' + // vjs-edge-style
          '<div class="vjs-font-family vjs-tracksetting">' +
            '<label class="vjs-label">Font Family</label>' +
            '<select>' +
              '<option value="">Default</option>' +
              '<option value="monospaceSerif">Monospace Serif</option>' +
              '<option value="proportionalSerif">Proportional Serif</option>' +
              '<option value="monospaceSansSerif">Monospace Sans-Serif</option>' +
              '<option value="proportionalSansSerif">Proportional Sans-Serif</option>' +
              '<option value="casual">Casual</option>' +
              '<option value="script">Script</option>' +
              '<option value="small-caps">Small Caps</option>' +
            '</select>' +
          '</div>' + // vjs-font-family
        '</div>' +
      '</div>' +
      '<div class="vjs-tracksettings-controls">' +
        '<button class="vjs-default-button">Defaults</button>' +
        '<button class="vjs-done-button">Done</button>' +
      '</div>';
  }

})();
/**
 * @fileoverview Add JSON support
 * @suppress {undefinedVars}
 * (Compiler doesn't like JSON not being declared)
 */

/**
 * Javascript JSON implementation
 * (Parse Method Only)
 * https://github.com/douglascrockford/JSON-js/blob/master/json2.js
 * Only using for parse method when parsing data-setup attribute JSON.
 * @suppress {undefinedVars}
 * @namespace
 * @private
 */
vjs.JSON;

if (typeof window.JSON !== 'undefined' && typeof window.JSON.parse === 'function') {
  vjs.JSON = window.JSON;

} else {
  vjs.JSON = {};

  var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;

  /**
   * parse the json
   *
   * @memberof vjs.JSON
   * @param {String} text The JSON string to parse
   * @param {Function=} [reviver] Optional function that can transform the results
   * @return {Object|Array} The parsed JSON
   */
  vjs.JSON.parse = function (text, reviver) {
      var j;

      function walk(holder, key) {
          var k, v, value = holder[key];
          if (value && typeof value === 'object') {
              for (k in value) {
                  if (Object.prototype.hasOwnProperty.call(value, k)) {
                      v = walk(value, k);
                      if (v !== undefined) {
                          value[k] = v;
                      } else {
                          delete value[k];
                      }
                  }
              }
          }
          return reviver.call(holder, key, value);
      }
      text = String(text);
      cx.lastIndex = 0;
      if (cx.test(text)) {
          text = text.replace(cx, function (a) {
              return '\\u' +
                  ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
          });
      }

      if (/^[\],:{}\s]*$/
              .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                  .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                  .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

          j = eval('(' + text + ')');

          return typeof reviver === 'function' ?
              walk({'': j}, '') : j;
      }

      throw new SyntaxError('JSON.parse(): invalid or malformed JSON data');
  };
}
/**
 * @fileoverview Functions for automatically setting up a player
 * based on the data-setup attribute of the video tag
 */

// Automatically set up any tags that have a data-setup attribute
vjs.autoSetup = function(){
  var options, mediaEl, player, i, e;

  // One day, when we stop supporting IE8, go back to this, but in the meantime...*hack hack hack*
  // var vids = Array.prototype.slice.call(document.getElementsByTagName('video'));
  // var audios = Array.prototype.slice.call(document.getElementsByTagName('audio'));
  // var mediaEls = vids.concat(audios);

  // Because IE8 doesn't support calling slice on a node list, we need to loop through each list of elements
  // to build up a new, combined list of elements.
  var vids = document.getElementsByTagName('video');
  var audios = document.getElementsByTagName('audio');
  var mediaEls = [];
  if (vids && vids.length > 0) {
    for(i=0, e=vids.length; i<e; i++) {
      mediaEls.push(vids[i]);
    }
  }
  if (audios && audios.length > 0) {
    for(i=0, e=audios.length; i<e; i++) {
      mediaEls.push(audios[i]);
    }
  }

  // Check if any media elements exist
  if (mediaEls && mediaEls.length > 0) {

    for (i=0,e=mediaEls.length; i<e; i++) {
      mediaEl = mediaEls[i];

      // Check if element exists, has getAttribute func.
      // IE seems to consider typeof el.getAttribute == 'object' instead of 'function' like expected, at least when loading the player immediately.
      if (mediaEl && mediaEl.getAttribute) {

        // Make sure this player hasn't already been set up.
        if (mediaEl['player'] === undefined) {
          options = mediaEl.getAttribute('data-setup');

          // Check if data-setup attr exists.
          // We only auto-setup if they've added the data-setup attr.
          if (options !== null) {
            // Create new video.js instance.
            player = videojs(mediaEl);
          }
        }

      // If getAttribute isn't defined, we need to wait for the DOM.
      } else {
        vjs.autoSetupTimeout(1);
        break;
      }
    }

  // No videos were found, so keep looping unless page is finished loading.
  } else if (!vjs.windowLoaded) {
    vjs.autoSetupTimeout(1);
  }
};

// Pause to let the DOM keep processing
vjs.autoSetupTimeout = function(wait){
  setTimeout(vjs.autoSetup, wait);
};

if (document.readyState === 'complete') {
  vjs.windowLoaded = true;
} else {
  vjs.one(window, 'load', function(){
    vjs.windowLoaded = true;
  });
}

// Run Auto-load players
// You have to wait at least once in case this script is loaded after your video in the DOM (weird behavior only with minified version)
vjs.autoSetupTimeout(1);
/**
 * the method for registering a video.js plugin
 *
 * @param  {String} name The name of the plugin
 * @param  {Function} init The function that is run when the player inits
 */
vjs.plugin = function(name, init){
  vjs.Player.prototype[name] = init;
};

/* vtt.js - v0.12.1 (https://github.com/mozilla/vtt.js) built on 08-07-2015 */

(function(root) {
  var vttjs = root.vttjs = {};
  var cueShim = vttjs.VTTCue;
  var regionShim = vttjs.VTTRegion;
  var oldVTTCue = root.VTTCue;
  var oldVTTRegion = root.VTTRegion;

  vttjs.shim = function() {
    vttjs.VTTCue = cueShim;
    vttjs.VTTRegion = regionShim;
  };

  vttjs.restore = function() {
    vttjs.VTTCue = oldVTTCue;
    vttjs.VTTRegion = oldVTTRegion;
  };
}(this));

/**
 * Copyright 2013 vtt.js Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

(function(root, vttjs) {

  var autoKeyword = "auto";
  var directionSetting = {
    "": true,
    "lr": true,
    "rl": true
  };
  var alignSetting = {
    "start": true,
    "middle": true,
    "end": true,
    "left": true,
    "right": true
  };

  function findDirectionSetting(value) {
    if (typeof value !== "string") {
      return false;
    }
    var dir = directionSetting[value.toLowerCase()];
    return dir ? value.toLowerCase() : false;
  }

  function findAlignSetting(value) {
    if (typeof value !== "string") {
      return false;
    }
    var align = alignSetting[value.toLowerCase()];
    return align ? value.toLowerCase() : false;
  }

  function extend(obj) {
    var i = 1;
    for (; i < arguments.length; i++) {
      var cobj = arguments[i];
      for (var p in cobj) {
        obj[p] = cobj[p];
      }
    }

    return obj;
  }

  function VTTCue(startTime, endTime, text) {
    var cue = this;
    var isIE8 = (/MSIE\s8\.0/).test(navigator.userAgent);
    var baseObj = {};

    if (isIE8) {
      cue = document.createElement('custom');
    } else {
      baseObj.enumerable = true;
    }

    /**
     * Shim implementation specific properties. These properties are not in
     * the spec.
     */

    // Lets us know when the VTTCue's data has changed in such a way that we need
    // to recompute its display state. This lets us compute its display state
    // lazily.
    cue.hasBeenReset = false;

    /**
     * VTTCue and TextTrackCue properties
     * http://dev.w3.org/html5/webvtt/#vttcue-interface
     */

    var _id = "";
    var _pauseOnExit = false;
    var _startTime = startTime;
    var _endTime = endTime;
    var _text = text;
    var _region = null;
    var _vertical = "";
    var _snapToLines = true;
    var _line = "auto";
    var _lineAlign = "start";
    var _position = 50;
    var _positionAlign = "middle";
    var _size = 50;
    var _align = "middle";

    Object.defineProperty(cue,
      "id", extend({}, baseObj, {
        get: function() {
          return _id;
        },
        set: function(value) {
          _id = "" + value;
        }
      }));

    Object.defineProperty(cue,
      "pauseOnExit", extend({}, baseObj, {
        get: function() {
          return _pauseOnExit;
        },
        set: function(value) {
          _pauseOnExit = !!value;
        }
      }));

    Object.defineProperty(cue,
      "startTime", extend({}, baseObj, {
        get: function() {
          return _startTime;
        },
        set: function(value) {
          if (typeof value !== "number") {
            throw new TypeError("Start time must be set to a number.");
          }
          _startTime = value;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "endTime", extend({}, baseObj, {
        get: function() {
          return _endTime;
        },
        set: function(value) {
          if (typeof value !== "number") {
            throw new TypeError("End time must be set to a number.");
          }
          _endTime = value;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "text", extend({}, baseObj, {
        get: function() {
          return _text;
        },
        set: function(value) {
          _text = "" + value;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "region", extend({}, baseObj, {
        get: function() {
          return _region;
        },
        set: function(value) {
          _region = value;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "vertical", extend({}, baseObj, {
        get: function() {
          return _vertical;
        },
        set: function(value) {
          var setting = findDirectionSetting(value);
          // Have to check for false because the setting an be an empty string.
          if (setting === false) {
            throw new SyntaxError("An invalid or illegal string was specified.");
          }
          _vertical = setting;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "snapToLines", extend({}, baseObj, {
        get: function() {
          return _snapToLines;
        },
        set: function(value) {
          _snapToLines = !!value;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "line", extend({}, baseObj, {
        get: function() {
          return _line;
        },
        set: function(value) {
          if (typeof value !== "number" && value !== autoKeyword) {
            throw new SyntaxError("An invalid number or illegal string was specified.");
          }
          _line = value;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "lineAlign", extend({}, baseObj, {
        get: function() {
          return _lineAlign;
        },
        set: function(value) {
          var setting = findAlignSetting(value);
          if (!setting) {
            throw new SyntaxError("An invalid or illegal string was specified.");
          }
          _lineAlign = setting;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "position", extend({}, baseObj, {
        get: function() {
          return _position;
        },
        set: function(value) {
          if (value < 0 || value > 100) {
            throw new Error("Position must be between 0 and 100.");
          }
          _position = value;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "positionAlign", extend({}, baseObj, {
        get: function() {
          return _positionAlign;
        },
        set: function(value) {
          var setting = findAlignSetting(value);
          if (!setting) {
            throw new SyntaxError("An invalid or illegal string was specified.");
          }
          _positionAlign = setting;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "size", extend({}, baseObj, {
        get: function() {
          return _size;
        },
        set: function(value) {
          if (value < 0 || value > 100) {
            throw new Error("Size must be between 0 and 100.");
          }
          _size = value;
          this.hasBeenReset = true;
        }
      }));

    Object.defineProperty(cue,
      "align", extend({}, baseObj, {
        get: function() {
          return _align;
        },
        set: function(value) {
          var setting = findAlignSetting(value);
          if (!setting) {
            throw new SyntaxError("An invalid or illegal string was specified.");
          }
          _align = setting;
          this.hasBeenReset = true;
        }
      }));

    /**
     * Other <track> spec defined properties
     */

    // http://www.whatwg.org/specs/web-apps/current-work/multipage/the-video-element.html#text-track-cue-display-state
    cue.displayState = undefined;

    if (isIE8) {
      return cue;
    }
  }

  /**
   * VTTCue methods
   */

  VTTCue.prototype.getCueAsHTML = function() {
    // Assume WebVTT.convertCueToDOMTree is on the global.
    return WebVTT.convertCueToDOMTree(window, this.text);
  };

  root.VTTCue = root.VTTCue || VTTCue;
  vttjs.VTTCue = VTTCue;
}(this, (this.vttjs || {})));

/**
 * Copyright 2013 vtt.js Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

(function(root, vttjs) {

  var scrollSetting = {
    "": true,
    "up": true
  };

  function findScrollSetting(value) {
    if (typeof value !== "string") {
      return false;
    }
    var scroll = scrollSetting[value.toLowerCase()];
    return scroll ? value.toLowerCase() : false;
  }

  function isValidPercentValue(value) {
    return typeof value === "number" && (value >= 0 && value <= 100);
  }

  // VTTRegion shim http://dev.w3.org/html5/webvtt/#vttregion-interface
  function VTTRegion() {
    var _width = 100;
    var _lines = 3;
    var _regionAnchorX = 0;
    var _regionAnchorY = 100;
    var _viewportAnchorX = 0;
    var _viewportAnchorY = 100;
    var _scroll = "";

    Object.defineProperties(this, {
      "width": {
        enumerable: true,
        get: function() {
          return _width;
        },
        set: function(value) {
          if (!isValidPercentValue(value)) {
            throw new Error("Width must be between 0 and 100.");
          }
          _width = value;
        }
      },
      "lines": {
        enumerable: true,
        get: function() {
          return _lines;
        },
        set: function(value) {
          if (typeof value !== "number") {
            throw new TypeError("Lines must be set to a number.");
          }
          _lines = value;
        }
      },
      "regionAnchorY": {
        enumerable: true,
        get: function() {
          return _regionAnchorY;
        },
        set: function(value) {
          if (!isValidPercentValue(value)) {
            throw new Error("RegionAnchorX must be between 0 and 100.");
          }
          _regionAnchorY = value;
        }
      },
      "regionAnchorX": {
        enumerable: true,
        get: function() {
          return _regionAnchorX;
        },
        set: function(value) {
          if(!isValidPercentValue(value)) {
            throw new Error("RegionAnchorY must be between 0 and 100.");
          }
          _regionAnchorX = value;
        }
      },
      "viewportAnchorY": {
        enumerable: true,
        get: function() {
          return _viewportAnchorY;
        },
        set: function(value) {
          if (!isValidPercentValue(value)) {
            throw new Error("ViewportAnchorY must be between 0 and 100.");
          }
          _viewportAnchorY = value;
        }
      },
      "viewportAnchorX": {
        enumerable: true,
        get: function() {
          return _viewportAnchorX;
        },
        set: function(value) {
          if (!isValidPercentValue(value)) {
            throw new Error("ViewportAnchorX must be between 0 and 100.");
          }
          _viewportAnchorX = value;
        }
      },
      "scroll": {
        enumerable: true,
        get: function() {
          return _scroll;
        },
        set: function(value) {
          var setting = findScrollSetting(value);
          // Have to check for false as an empty string is a legal value.
          if (setting === false) {
            throw new SyntaxError("An invalid or illegal string was specified.");
          }
          _scroll = setting;
        }
      }
    });
  }

  root.VTTRegion = root.VTTRegion || VTTRegion;
  vttjs.VTTRegion = VTTRegion;
}(this, (this.vttjs || {})));

/**
 * Copyright 2013 vtt.js Contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

/* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */
/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */

(function(global) {

  var _objCreate = Object.create || (function() {
    function F() {}
    return function(o) {
      if (arguments.length !== 1) {
        throw new Error('Object.create shim only accepts one parameter.');
      }
      F.prototype = o;
      return new F();
    };
  })();

  // Creates a new ParserError object from an errorData object. The errorData
  // object should have default code and message properties. The default message
  // property can be overriden by passing in a message parameter.
  // See ParsingError.Errors below for acceptable errors.
  function ParsingError(errorData, message) {
    this.name = "ParsingError";
    this.code = errorData.code;
    this.message = message || errorData.message;
  }
  ParsingError.prototype = _objCreate(Error.prototype);
  ParsingError.prototype.constructor = ParsingError;

  // ParsingError metadata for acceptable ParsingErrors.
  ParsingError.Errors = {
    BadSignature: {
      code: 0,
      message: "Malformed WebVTT signature."
    },
    BadTimeStamp: {
      code: 1,
      message: "Malformed time stamp."
    }
  };

  // Try to parse input as a time stamp.
  function parseTimeStamp(input) {

    function computeSeconds(h, m, s, f) {
      return (h | 0) * 3600 + (m | 0) * 60 + (s | 0) + (f | 0) / 1000;
    }

    var m = input.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
    if (!m) {
      return null;
    }

    if (m[3]) {
      // Timestamp takes the form of [hours]:[minutes]:[seconds].[milliseconds]
      return computeSeconds(m[1], m[2], m[3].replace(":", ""), m[4]);
    } else if (m[1] > 59) {
      // Timestamp takes the form of [hours]:[minutes].[milliseconds]
      // First position is hours as it's over 59.
      return computeSeconds(m[1], m[2], 0,  m[4]);
    } else {
      // Timestamp takes the form of [minutes]:[seconds].[milliseconds]
      return computeSeconds(0, m[1], m[2], m[4]);
    }
  }

  // A settings object holds key/value pairs and will ignore anything but the first
  // assignment to a specific key.
  function Settings() {
    this.values = _objCreate(null);
  }

  Settings.prototype = {
    // Only accept the first assignment to any key.
    set: function(k, v) {
      if (!this.get(k) && v !== "") {
        this.values[k] = v;
      }
    },
    // Return the value for a key, or a default value.
    // If 'defaultKey' is passed then 'dflt' is assumed to be an object with
    // a number of possible default values as properties where 'defaultKey' is
    // the key of the property that will be chosen; otherwise it's assumed to be
    // a single value.
    get: function(k, dflt, defaultKey) {
      if (defaultKey) {
        return this.has(k) ? this.values[k] : dflt[defaultKey];
      }
      return this.has(k) ? this.values[k] : dflt;
    },
    // Check whether we have a value for a key.
    has: function(k) {
      return k in this.values;
    },
    // Accept a setting if its one of the given alternatives.
    alt: function(k, v, a) {
      for (var n = 0; n < a.length; ++n) {
        if (v === a[n]) {
          this.set(k, v);
          break;
        }
      }
    },
    // Accept a setting if its a valid (signed) integer.
    integer: function(k, v) {
      if (/^-?\d+$/.test(v)) { // integer
        this.set(k, parseInt(v, 10));
      }
    },
    // Accept a setting if its a valid percentage.
    percent: function(k, v) {
      var m;
      if ((m = v.match(/^([\d]{1,3})(\.[\d]*)?%$/))) {
        v = parseFloat(v);
        if (v >= 0 && v <= 100) {
          this.set(k, v);
          return true;
        }
      }
      return false;
    }
  };

  // Helper function to parse input into groups separated by 'groupDelim', and
  // interprete each group as a key/value pair separated by 'keyValueDelim'.
  function parseOptions(input, callback, keyValueDelim, groupDelim) {
    var groups = groupDelim ? input.split(groupDelim) : [input];
    for (var i in groups) {
      if (typeof groups[i] !== "string") {
        continue;
      }
      var kv = groups[i].split(keyValueDelim);
      if (kv.length !== 2) {
        continue;
      }
      var k = kv[0];
      var v = kv[1];
      callback(k, v);
    }
  }

  function parseCue(input, cue, regionList) {
    // Remember the original input if we need to throw an error.
    var oInput = input;
    // 4.1 WebVTT timestamp
    function consumeTimeStamp() {
      var ts = parseTimeStamp(input);
      if (ts === null) {
        throw new ParsingError(ParsingError.Errors.BadTimeStamp,
                              "Malformed timestamp: " + oInput);
      }
      // Remove time stamp from input.
      input = input.replace(/^[^\sa-zA-Z-]+/, "");
      return ts;
    }

    // 4.4.2 WebVTT cue settings
    function consumeCueSettings(input, cue) {
      var settings = new Settings();

      parseOptions(input, function (k, v) {
        switch (k) {
        case "region":
          // Find the last region we parsed with the same region id.
          for (var i = regionList.length - 1; i >= 0; i--) {
            if (regionList[i].id === v) {
              settings.set(k, regionList[i].region);
              break;
            }
          }
          break;
        case "vertical":
          settings.alt(k, v, ["rl", "lr"]);
          break;
        case "line":
          var vals = v.split(","),
              vals0 = vals[0];
          settings.integer(k, vals0);
          settings.percent(k, vals0) ? settings.set("snapToLines", false) : null;
          settings.alt(k, vals0, ["auto"]);
          if (vals.length === 2) {
            settings.alt("lineAlign", vals[1], ["start", "middle", "end"]);
          }
          break;
        case "position":
          vals = v.split(",");
          settings.percent(k, vals[0]);
          if (vals.length === 2) {
            settings.alt("positionAlign", vals[1], ["start", "middle", "end"]);
          }
          break;
        case "size":
          settings.percent(k, v);
          break;
        case "align":
          settings.alt(k, v, ["start", "middle", "end", "left", "right"]);
          break;
        }
      }, /:/, /\s/);

      // Apply default values for any missing fields.
      cue.region = settings.get("region", null);
      cue.vertical = settings.get("vertical", "");
      cue.line = settings.get("line", "auto");
      cue.lineAlign = settings.get("lineAlign", "start");
      cue.snapToLines = settings.get("snapToLines", true);
      cue.size = settings.get("size", 100);
      cue.align = settings.get("align", "middle");
      cue.position = settings.get("position", {
        start: 0,
        left: 0,
        middle: 50,
        end: 100,
        right: 100
      }, cue.align);
      cue.positionAlign = settings.get("positionAlign", {
        start: "start",
        left: "start",
        middle: "middle",
        end: "end",
        right: "end"
      }, cue.align);
    }

    function skipWhitespace() {
      input = input.replace(/^\s+/, "");
    }

    // 4.1 WebVTT cue timings.
    skipWhitespace();
    cue.startTime = consumeTimeStamp();   // (1) collect cue start time
    skipWhitespace();
    if (input.substr(0, 3) !== "-->") {     // (3) next characters must match "-->"
      throw new ParsingError(ParsingError.Errors.BadTimeStamp,
                             "Malformed time stamp (time stamps must be separated by '-->'): " +
                             oInput);
    }
    input = input.substr(3);
    skipWhitespace();
    cue.endTime = consumeTimeStamp();     // (5) collect cue end time

    // 4.1 WebVTT cue settings list.
    skipWhitespace();
    consumeCueSettings(input, cue);
  }

  var ESCAPE = {
    "&amp;": "&",
    "&lt;": "<",
    "&gt;": ">",
    "&lrm;": "\u200e",
    "&rlm;": "\u200f",
    "&nbsp;": "\u00a0"
  };

  var TAG_NAME = {
    c: "span",
    i: "i",
    b: "b",
    u: "u",
    ruby: "ruby",
    rt: "rt",
    v: "span",
    lang: "span"
  };

  var TAG_ANNOTATION = {
    v: "title",
    lang: "lang"
  };

  var NEEDS_PARENT = {
    rt: "ruby"
  };

  // Parse content into a document fragment.
  function parseContent(window, input) {
    function nextToken() {
      // Check for end-of-string.
      if (!input) {
        return null;
      }

      // Consume 'n' characters from the input.
      function consume(result) {
        input = input.substr(result.length);
        return result;
      }

      var m = input.match(/^([^<]*)(<[^>]+>?)?/);
      // If there is some text before the next tag, return it, otherwise return
      // the tag.
      return consume(m[1] ? m[1] : m[2]);
    }

    // Unescape a string 's'.
    function unescape1(e) {
      return ESCAPE[e];
    }
    function unescape(s) {
      while ((m = s.match(/&(amp|lt|gt|lrm|rlm|nbsp);/))) {
        s = s.replace(m[0], unescape1);
      }
      return s;
    }

    function shouldAdd(current, element) {
      return !NEEDS_PARENT[element.localName] ||
             NEEDS_PARENT[element.localName] === current.localName;
    }

    // Create an element for this tag.
    function createElement(type, annotation) {
      var tagName = TAG_NAME[type];
      if (!tagName) {
        return null;
      }
      var element = window.document.createElement(tagName);
      element.localName = tagName;
      var name = TAG_ANNOTATION[type];
      if (name && annotation) {
        element[name] = annotation.trim();
      }
      return element;
    }

    var rootDiv = window.document.createElement("div"),
        current = rootDiv,
        t,
        tagStack = [];

    while ((t = nextToken()) !== null) {
      if (t[0] === '<') {
        if (t[1] === "/") {
          // If the closing tag matches, move back up to the parent node.
          if (tagStack.length &&
              tagStack[tagStack.length - 1] === t.substr(2).replace(">", "")) {
            tagStack.pop();
            current = current.parentNode;
          }
          // Otherwise just ignore the end tag.
          continue;
        }
        var ts = parseTimeStamp(t.substr(1, t.length - 2));
        var node;
        if (ts) {
          // Timestamps are lead nodes as well.
          node = window.document.createProcessingInstruction("timestamp", ts);
          current.appendChild(node);
          continue;
        }
        var m = t.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);
        // If we can't parse the tag, skip to the next tag.
        if (!m) {
          continue;
        }
        // Try to construct an element, and ignore the tag if we couldn't.
        node = createElement(m[1], m[3]);
        if (!node) {
          continue;
        }
        // Determine if the tag should be added based on the context of where it
        // is placed in the cuetext.
        if (!shouldAdd(current, node)) {
          continue;
        }
        // Set the class list (as a list of classes, separated by space).
        if (m[2]) {
          node.className = m[2].substr(1).replace('.', ' ');
        }
        // Append the node to the current node, and enter the scope of the new
        // node.
        tagStack.push(m[1]);
        current.appendChild(node);
        current = node;
        continue;
      }

      // Text nodes are leaf nodes.
      current.appendChild(window.document.createTextNode(unescape(t)));
    }

    return rootDiv;
  }

  // This is a list of all the Unicode characters that have a strong
  // right-to-left category. What this means is that these characters are
  // written right-to-left for sure. It was generated by pulling all the strong
  // right-to-left characters out of the Unicode data table. That table can
  // found at: http://www.unicode.org/Public/UNIDATA/UnicodeData.txt
  var strongRTLChars = [0x05BE, 0x05C0, 0x05C3, 0x05C6, 0x05D0, 0x05D1,
      0x05D2, 0x05D3, 0x05D4, 0x05D5, 0x05D6, 0x05D7, 0x05D8, 0x05D9, 0x05DA,
      0x05DB, 0x05DC, 0x05DD, 0x05DE, 0x05DF, 0x05E0, 0x05E1, 0x05E2, 0x05E3,
      0x05E4, 0x05E5, 0x05E6, 0x05E7, 0x05E8, 0x05E9, 0x05EA, 0x05F0, 0x05F1,
      0x05F2, 0x05F3, 0x05F4, 0x0608, 0x060B, 0x060D, 0x061B, 0x061E, 0x061F,
      0x0620, 0x0621, 0x0622, 0x0623, 0x0624, 0x0625, 0x0626, 0x0627, 0x0628,
      0x0629, 0x062A, 0x062B, 0x062C, 0x062D, 0x062E, 0x062F, 0x0630, 0x0631,
      0x0632, 0x0633, 0x0634, 0x0635, 0x0636, 0x0637, 0x0638, 0x0639, 0x063A,
      0x063B, 0x063C, 0x063D, 0x063E, 0x063F, 0x0640, 0x0641, 0x0642, 0x0643,
      0x0644, 0x0645, 0x0646, 0x0647, 0x0648, 0x0649, 0x064A, 0x066D, 0x066E,
      0x066F, 0x0671, 0x0672, 0x0673, 0x0674, 0x0675, 0x0676, 0x0677, 0x0678,
      0x0679, 0x067A, 0x067B, 0x067C, 0x067D, 0x067E, 0x067F, 0x0680, 0x0681,
      0x0682, 0x0683, 0x0684, 0x0685, 0x0686, 0x0687, 0x0688, 0x0689, 0x068A,
      0x068B, 0x068C, 0x068D, 0x068E, 0x068F, 0x0690, 0x0691, 0x0692, 0x0693,
      0x0694, 0x0695, 0x0696, 0x0697, 0x0698, 0x0699, 0x069A, 0x069B, 0x069C,
      0x069D, 0x069E, 0x069F, 0x06A0, 0x06A1, 0x06A2, 0x06A3, 0x06A4, 0x06A5,
      0x06A6, 0x06A7, 0x06A8, 0x06A9, 0x06AA, 0x06AB, 0x06AC, 0x06AD, 0x06AE,
      0x06AF, 0x06B0, 0x06B1, 0x06B2, 0x06B3, 0x06B4, 0x06B5, 0x06B6, 0x06B7,
      0x06B8, 0x06B9, 0x06BA, 0x06BB, 0x06BC, 0x06BD, 0x06BE, 0x06BF, 0x06C0,
      0x06C1, 0x06C2, 0x06C3, 0x06C4, 0x06C5, 0x06C6, 0x06C7, 0x06C8, 0x06C9,
      0x06CA, 0x06CB, 0x06CC, 0x06CD, 0x06CE, 0x06CF, 0x06D0, 0x06D1, 0x06D2,
      0x06D3, 0x06D4, 0x06D5, 0x06E5, 0x06E6, 0x06EE, 0x06EF, 0x06FA, 0x06FB,
      0x06FC, 0x06FD, 0x06FE, 0x06FF, 0x0700, 0x0701, 0x0702, 0x0703, 0x0704,
      0x0705, 0x0706, 0x0707, 0x0708, 0x0709, 0x070A, 0x070B, 0x070C, 0x070D,
      0x070F, 0x0710, 0x0712, 0x0713, 0x0714, 0x0715, 0x0716, 0x0717, 0x0718,
      0x0719, 0x071A, 0x071B, 0x071C, 0x071D, 0x071E, 0x071F, 0x0720, 0x0721,
      0x0722, 0x0723, 0x0724, 0x0725, 0x0726, 0x0727, 0x0728, 0x0729, 0x072A,
      0x072B, 0x072C, 0x072D, 0x072E, 0x072F, 0x074D, 0x074E, 0x074F, 0x0750,
      0x0751, 0x0752, 0x0753, 0x0754, 0x0755, 0x0756, 0x0757, 0x0758, 0x0759,
      0x075A, 0x075B, 0x075C, 0x075D, 0x075E, 0x075F, 0x0760, 0x0761, 0x0762,
      0x0763, 0x0764, 0x0765, 0x0766, 0x0767, 0x0768, 0x0769, 0x076A, 0x076B,
      0x076C, 0x076D, 0x076E, 0x076F, 0x0770, 0x0771, 0x0772, 0x0773, 0x0774,
      0x0775, 0x0776, 0x0777, 0x0778, 0x0779, 0x077A, 0x077B, 0x077C, 0x077D,
      0x077E, 0x077F, 0x0780, 0x0781, 0x0782, 0x0783, 0x0784, 0x0785, 0x0786,
      0x0787, 0x0788, 0x0789, 0x078A, 0x078B, 0x078C, 0x078D, 0x078E, 0x078F,
      0x0790, 0x0791, 0x0792, 0x0793, 0x0794, 0x0795, 0x0796, 0x0797, 0x0798,
      0x0799, 0x079A, 0x079B, 0x079C, 0x079D, 0x079E, 0x079F, 0x07A0, 0x07A1,
      0x07A2, 0x07A3, 0x07A4, 0x07A5, 0x07B1, 0x07C0, 0x07C1, 0x07C2, 0x07C3,
      0x07C4, 0x07C5, 0x07C6, 0x07C7, 0x07C8, 0x07C9, 0x07CA, 0x07CB, 0x07CC,
      0x07CD, 0x07CE, 0x07CF, 0x07D0, 0x07D1, 0x07D2, 0x07D3, 0x07D4, 0x07D5,
      0x07D6, 0x07D7, 0x07D8, 0x07D9, 0x07DA, 0x07DB, 0x07DC, 0x07DD, 0x07DE,
      0x07DF, 0x07E0, 0x07E1, 0x07E2, 0x07E3, 0x07E4, 0x07E5, 0x07E6, 0x07E7,
      0x07E8, 0x07E9, 0x07EA, 0x07F4, 0x07F5, 0x07FA, 0x0800, 0x0801, 0x0802,
      0x0803, 0x0804, 0x0805, 0x0806, 0x0807, 0x0808, 0x0809, 0x080A, 0x080B,
      0x080C, 0x080D, 0x080E, 0x080F, 0x0810, 0x0811, 0x0812, 0x0813, 0x0814,
      0x0815, 0x081A, 0x0824, 0x0828, 0x0830, 0x0831, 0x0832, 0x0833, 0x0834,
      0x0835, 0x0836, 0x0837, 0x0838, 0x0839, 0x083A, 0x083B, 0x083C, 0x083D,
      0x083E, 0x0840, 0x0841, 0x0842, 0x0843, 0x0844, 0x0845, 0x0846, 0x0847,
      0x0848, 0x0849, 0x084A, 0x084B, 0x084C, 0x084D, 0x084E, 0x084F, 0x0850,
      0x0851, 0x0852, 0x0853, 0x0854, 0x0855, 0x0856, 0x0857, 0x0858, 0x085E,
      0x08A0, 0x08A2, 0x08A3, 0x08A4, 0x08A5, 0x08A6, 0x08A7, 0x08A8, 0x08A9,
      0x08AA, 0x08AB, 0x08AC, 0x200F, 0xFB1D, 0xFB1F, 0xFB20, 0xFB21, 0xFB22,
      0xFB23, 0xFB24, 0xFB25, 0xFB26, 0xFB27, 0xFB28, 0xFB2A, 0xFB2B, 0xFB2C,
      0xFB2D, 0xFB2E, 0xFB2F, 0xFB30, 0xFB31, 0xFB32, 0xFB33, 0xFB34, 0xFB35,
      0xFB36, 0xFB38, 0xFB39, 0xFB3A, 0xFB3B, 0xFB3C, 0xFB3E, 0xFB40, 0xFB41,
      0xFB43, 0xFB44, 0xFB46, 0xFB47, 0xFB48, 0xFB49, 0xFB4A, 0xFB4B, 0xFB4C,
      0xFB4D, 0xFB4E, 0xFB4F, 0xFB50, 0xFB51, 0xFB52, 0xFB53, 0xFB54, 0xFB55,
      0xFB56, 0xFB57, 0xFB58, 0xFB59, 0xFB5A, 0xFB5B, 0xFB5C, 0xFB5D, 0xFB5E,
      0xFB5F, 0xFB60, 0xFB61, 0xFB62, 0xFB63, 0xFB64, 0xFB65, 0xFB66, 0xFB67,
      0xFB68, 0xFB69, 0xFB6A, 0xFB6B, 0xFB6C, 0xFB6D, 0xFB6E, 0xFB6F, 0xFB70,
      0xFB71, 0xFB72, 0xFB73, 0xFB74, 0xFB75, 0xFB76, 0xFB77, 0xFB78, 0xFB79,
      0xFB7A, 0xFB7B, 0xFB7C, 0xFB7D, 0xFB7E, 0xFB7F, 0xFB80, 0xFB81, 0xFB82,
      0xFB83, 0xFB84, 0xFB85, 0xFB86, 0xFB87, 0xFB88, 0xFB89, 0xFB8A, 0xFB8B,
      0xFB8C, 0xFB8D, 0xFB8E, 0xFB8F, 0xFB90, 0xFB91, 0xFB92, 0xFB93, 0xFB94,
      0xFB95, 0xFB96, 0xFB97, 0xFB98, 0xFB99, 0xFB9A, 0xFB9B, 0xFB9C, 0xFB9D,
      0xFB9E, 0xFB9F, 0xFBA0, 0xFBA1, 0xFBA2, 0xFBA3, 0xFBA4, 0xFBA5, 0xFBA6,
      0xFBA7, 0xFBA8, 0xFBA9, 0xFBAA, 0xFBAB, 0xFBAC, 0xFBAD, 0xFBAE, 0xFBAF,
      0xFBB0, 0xFBB1, 0xFBB2, 0xFBB3, 0xFBB4, 0xFBB5, 0xFBB6, 0xFBB7, 0xFBB8,
      0xFBB9, 0xFBBA, 0xFBBB, 0xFBBC, 0xFBBD, 0xFBBE, 0xFBBF, 0xFBC0, 0xFBC1,
      0xFBD3, 0xFBD4, 0xFBD5, 0xFBD6, 0xFBD7, 0xFBD8, 0xFBD9, 0xFBDA, 0xFBDB,
      0xFBDC, 0xFBDD, 0xFBDE, 0xFBDF, 0xFBE0, 0xFBE1, 0xFBE2, 0xFBE3, 0xFBE4,
      0xFBE5, 0xFBE6, 0xFBE7, 0xFBE8, 0xFBE9, 0xFBEA, 0xFBEB, 0xFBEC, 0xFBED,
      0xFBEE, 0xFBEF, 0xFBF0, 0xFBF1, 0xFBF2, 0xFBF3, 0xFBF4, 0xFBF5, 0xFBF6,
      0xFBF7, 0xFBF8, 0xFBF9, 0xFBFA, 0xFBFB, 0xFBFC, 0xFBFD, 0xFBFE, 0xFBFF,
      0xFC00, 0xFC01, 0xFC02, 0xFC03, 0xFC04, 0xFC05, 0xFC06, 0xFC07, 0xFC08,
      0xFC09, 0xFC0A, 0xFC0B, 0xFC0C, 0xFC0D, 0xFC0E, 0xFC0F, 0xFC10, 0xFC11,
      0xFC12, 0xFC13, 0xFC14, 0xFC15, 0xFC16, 0xFC17, 0xFC18, 0xFC19, 0xFC1A,
      0xFC1B, 0xFC1C, 0xFC1D, 0xFC1E, 0xFC1F, 0xFC20, 0xFC21, 0xFC22, 0xFC23,
      0xFC24, 0xFC25, 0xFC26, 0xFC27, 0xFC28, 0xFC29, 0xFC2A, 0xFC2B, 0xFC2C,
      0xFC2D, 0xFC2E, 0xFC2F, 0xFC30, 0xFC31, 0xFC32, 0xFC33, 0xFC34, 0xFC35,
      0xFC36, 0xFC37, 0xFC38, 0xFC39, 0xFC3A, 0xFC3B, 0xFC3C, 0xFC3D, 0xFC3E,
      0xFC3F, 0xFC40, 0xFC41, 0xFC42, 0xFC43, 0xFC44, 0xFC45, 0xFC46, 0xFC47,
      0xFC48, 0xFC49, 0xFC4A, 0xFC4B, 0xFC4C, 0xFC4D, 0xFC4E, 0xFC4F, 0xFC50,
      0xFC51, 0xFC52, 0xFC53, 0xFC54, 0xFC55, 0xFC56, 0xFC57, 0xFC58, 0xFC59,
      0xFC5A, 0xFC5B, 0xFC5C, 0xFC5D, 0xFC5E, 0xFC5F, 0xFC60, 0xFC61, 0xFC62,
      0xFC63, 0xFC64, 0xFC65, 0xFC66, 0xFC67, 0xFC68, 0xFC69, 0xFC6A, 0xFC6B,
      0xFC6C, 0xFC6D, 0xFC6E, 0xFC6F, 0xFC70, 0xFC71, 0xFC72, 0xFC73, 0xFC74,
      0xFC75, 0xFC76, 0xFC77, 0xFC78, 0xFC79, 0xFC7A, 0xFC7B, 0xFC7C, 0xFC7D,
      0xFC7E, 0xFC7F, 0xFC80, 0xFC81, 0xFC82, 0xFC83, 0xFC84, 0xFC85, 0xFC86,
      0xFC87, 0xFC88, 0xFC89, 0xFC8A, 0xFC8B, 0xFC8C, 0xFC8D, 0xFC8E, 0xFC8F,
      0xFC90, 0xFC91, 0xFC92, 0xFC93, 0xFC94, 0xFC95, 0xFC96, 0xFC97, 0xFC98,
      0xFC99, 0xFC9A, 0xFC9B, 0xFC9C, 0xFC9D, 0xFC9E, 0xFC9F, 0xFCA0, 0xFCA1,
      0xFCA2, 0xFCA3, 0xFCA4, 0xFCA5, 0xFCA6, 0xFCA7, 0xFCA8, 0xFCA9, 0xFCAA,
      0xFCAB, 0xFCAC, 0xFCAD, 0xFCAE, 0xFCAF, 0xFCB0, 0xFCB1, 0xFCB2, 0xFCB3,
      0xFCB4, 0xFCB5, 0xFCB6, 0xFCB7, 0xFCB8, 0xFCB9, 0xFCBA, 0xFCBB, 0xFCBC,
      0xFCBD, 0xFCBE, 0xFCBF, 0xFCC0, 0xFCC1, 0xFCC2, 0xFCC3, 0xFCC4, 0xFCC5,
      0xFCC6, 0xFCC7, 0xFCC8, 0xFCC9, 0xFCCA, 0xFCCB, 0xFCCC, 0xFCCD, 0xFCCE,
      0xFCCF, 0xFCD0, 0xFCD1, 0xFCD2, 0xFCD3, 0xFCD4, 0xFCD5, 0xFCD6, 0xFCD7,
      0xFCD8, 0xFCD9, 0xFCDA, 0xFCDB, 0xFCDC, 0xFCDD, 0xFCDE, 0xFCDF, 0xFCE0,
      0xFCE1, 0xFCE2, 0xFCE3, 0xFCE4, 0xFCE5, 0xFCE6, 0xFCE7, 0xFCE8, 0xFCE9,
      0xFCEA, 0xFCEB, 0xFCEC, 0xFCED, 0xFCEE, 0xFCEF, 0xFCF0, 0xFCF1, 0xFCF2,
      0xFCF3, 0xFCF4, 0xFCF5, 0xFCF6, 0xFCF7, 0xFCF8, 0xFCF9, 0xFCFA, 0xFCFB,
      0xFCFC, 0xFCFD, 0xFCFE, 0xFCFF, 0xFD00, 0xFD01, 0xFD02, 0xFD03, 0xFD04,
      0xFD05, 0xFD06, 0xFD07, 0xFD08, 0xFD09, 0xFD0A, 0xFD0B, 0xFD0C, 0xFD0D,
      0xFD0E, 0xFD0F, 0xFD10, 0xFD11, 0xFD12, 0xFD13, 0xFD14, 0xFD15, 0xFD16,
      0xFD17, 0xFD18, 0xFD19, 0xFD1A, 0xFD1B, 0xFD1C, 0xFD1D, 0xFD1E, 0xFD1F,
      0xFD20, 0xFD21, 0xFD22, 0xFD23, 0xFD24, 0xFD25, 0xFD26, 0xFD27, 0xFD28,
      0xFD29, 0xFD2A, 0xFD2B, 0xFD2C, 0xFD2D, 0xFD2E, 0xFD2F, 0xFD30, 0xFD31,
      0xFD32, 0xFD33, 0xFD34, 0xFD35, 0xFD36, 0xFD37, 0xFD38, 0xFD39, 0xFD3A,
      0xFD3B, 0xFD3C, 0xFD3D, 0xFD50, 0xFD51, 0xFD52, 0xFD53, 0xFD54, 0xFD55,
      0xFD56, 0xFD57, 0xFD58, 0xFD59, 0xFD5A, 0xFD5B, 0xFD5C, 0xFD5D, 0xFD5E,
      0xFD5F, 0xFD60, 0xFD61, 0xFD62, 0xFD63, 0xFD64, 0xFD65, 0xFD66, 0xFD67,
      0xFD68, 0xFD69, 0xFD6A, 0xFD6B, 0xFD6C, 0xFD6D, 0xFD6E, 0xFD6F, 0xFD70,
      0xFD71, 0xFD72, 0xFD73, 0xFD74, 0xFD75, 0xFD76, 0xFD77, 0xFD78, 0xFD79,
      0xFD7A, 0xFD7B, 0xFD7C, 0xFD7D, 0xFD7E, 0xFD7F, 0xFD80, 0xFD81, 0xFD82,
      0xFD83, 0xFD84, 0xFD85, 0xFD86, 0xFD87, 0xFD88, 0xFD89, 0xFD8A, 0xFD8B,
      0xFD8C, 0xFD8D, 0xFD8E, 0xFD8F, 0xFD92, 0xFD93, 0xFD94, 0xFD95, 0xFD96,
      0xFD97, 0xFD98, 0xFD99, 0xFD9A, 0xFD9B, 0xFD9C, 0xFD9D, 0xFD9E, 0xFD9F,
      0xFDA0, 0xFDA1, 0xFDA2, 0xFDA3, 0xFDA4, 0xFDA5, 0xFDA6, 0xFDA7, 0xFDA8,
      0xFDA9, 0xFDAA, 0xFDAB, 0xFDAC, 0xFDAD, 0xFDAE, 0xFDAF, 0xFDB0, 0xFDB1,
      0xFDB2, 0xFDB3, 0xFDB4, 0xFDB5, 0xFDB6, 0xFDB7, 0xFDB8, 0xFDB9, 0xFDBA,
      0xFDBB, 0xFDBC, 0xFDBD, 0xFDBE, 0xFDBF, 0xFDC0, 0xFDC1, 0xFDC2, 0xFDC3,
      0xFDC4, 0xFDC5, 0xFDC6, 0xFDC7, 0xFDF0, 0xFDF1, 0xFDF2, 0xFDF3, 0xFDF4,
      0xFDF5, 0xFDF6, 0xFDF7, 0xFDF8, 0xFDF9, 0xFDFA, 0xFDFB, 0xFDFC, 0xFE70,
      0xFE71, 0xFE72, 0xFE73, 0xFE74, 0xFE76, 0xFE77, 0xFE78, 0xFE79, 0xFE7A,
      0xFE7B, 0xFE7C, 0xFE7D, 0xFE7E, 0xFE7F, 0xFE80, 0xFE81, 0xFE82, 0xFE83,
      0xFE84, 0xFE85, 0xFE86, 0xFE87, 0xFE88, 0xFE89, 0xFE8A, 0xFE8B, 0xFE8C,
      0xFE8D, 0xFE8E, 0xFE8F, 0xFE90, 0xFE91, 0xFE92, 0xFE93, 0xFE94, 0xFE95,
      0xFE96, 0xFE97, 0xFE98, 0xFE99, 0xFE9A, 0xFE9B, 0xFE9C, 0xFE9D, 0xFE9E,
      0xFE9F, 0xFEA0, 0xFEA1, 0xFEA2, 0xFEA3, 0xFEA4, 0xFEA5, 0xFEA6, 0xFEA7,
      0xFEA8, 0xFEA9, 0xFEAA, 0xFEAB, 0xFEAC, 0xFEAD, 0xFEAE, 0xFEAF, 0xFEB0,
      0xFEB1, 0xFEB2, 0xFEB3, 0xFEB4, 0xFEB5, 0xFEB6, 0xFEB7, 0xFEB8, 0xFEB9,
      0xFEBA, 0xFEBB, 0xFEBC, 0xFEBD, 0xFEBE, 0xFEBF, 0xFEC0, 0xFEC1, 0xFEC2,
      0xFEC3, 0xFEC4, 0xFEC5, 0xFEC6, 0xFEC7, 0xFEC8, 0xFEC9, 0xFECA, 0xFECB,
      0xFECC, 0xFECD, 0xFECE, 0xFECF, 0xFED0, 0xFED1, 0xFED2, 0xFED3, 0xFED4,
      0xFED5, 0xFED6, 0xFED7, 0xFED8, 0xFED9, 0xFEDA, 0xFEDB, 0xFEDC, 0xFEDD,
      0xFEDE, 0xFEDF, 0xFEE0, 0xFEE1, 0xFEE2, 0xFEE3, 0xFEE4, 0xFEE5, 0xFEE6,
      0xFEE7, 0xFEE8, 0xFEE9, 0xFEEA, 0xFEEB, 0xFEEC, 0xFEED, 0xFEEE, 0xFEEF,
      0xFEF0, 0xFEF1, 0xFEF2, 0xFEF3, 0xFEF4, 0xFEF5, 0xFEF6, 0xFEF7, 0xFEF8,
      0xFEF9, 0xFEFA, 0xFEFB, 0xFEFC, 0x10800, 0x10801, 0x10802, 0x10803,
      0x10804, 0x10805, 0x10808, 0x1080A, 0x1080B, 0x1080C, 0x1080D, 0x1080E,
      0x1080F, 0x10810, 0x10811, 0x10812, 0x10813, 0x10814, 0x10815, 0x10816,
      0x10817, 0x10818, 0x10819, 0x1081A, 0x1081B, 0x1081C, 0x1081D, 0x1081E,
      0x1081F, 0x10820, 0x10821, 0x10822, 0x10823, 0x10824, 0x10825, 0x10826,
      0x10827, 0x10828, 0x10829, 0x1082A, 0x1082B, 0x1082C, 0x1082D, 0x1082E,
      0x1082F, 0x10830, 0x10831, 0x10832, 0x10833, 0x10834, 0x10835, 0x10837,
      0x10838, 0x1083C, 0x1083F, 0x10840, 0x10841, 0x10842, 0x10843, 0x10844,
      0x10845, 0x10846, 0x10847, 0x10848, 0x10849, 0x1084A, 0x1084B, 0x1084C,
      0x1084D, 0x1084E, 0x1084F, 0x10850, 0x10851, 0x10852, 0x10853, 0x10854,
      0x10855, 0x10857, 0x10858, 0x10859, 0x1085A, 0x1085B, 0x1085C, 0x1085D,
      0x1085E, 0x1085F, 0x10900, 0x10901, 0x10902, 0x10903, 0x10904, 0x10905,
      0x10906, 0x10907, 0x10908, 0x10909, 0x1090A, 0x1090B, 0x1090C, 0x1090D,
      0x1090E, 0x1090F, 0x10910, 0x10911, 0x10912, 0x10913, 0x10914, 0x10915,
      0x10916, 0x10917, 0x10918, 0x10919, 0x1091A, 0x1091B, 0x10920, 0x10921,
      0x10922, 0x10923, 0x10924, 0x10925, 0x10926, 0x10927, 0x10928, 0x10929,
      0x1092A, 0x1092B, 0x1092C, 0x1092D, 0x1092E, 0x1092F, 0x10930, 0x10931,
      0x10932, 0x10933, 0x10934, 0x10935, 0x10936, 0x10937, 0x10938, 0x10939,
      0x1093F, 0x10980, 0x10981, 0x10982, 0x10983, 0x10984, 0x10985, 0x10986,
      0x10987, 0x10988, 0x10989, 0x1098A, 0x1098B, 0x1098C, 0x1098D, 0x1098E,
      0x1098F, 0x10990, 0x10991, 0x10992, 0x10993, 0x10994, 0x10995, 0x10996,
      0x10997, 0x10998, 0x10999, 0x1099A, 0x1099B, 0x1099C, 0x1099D, 0x1099E,
      0x1099F, 0x109A0, 0x109A1, 0x109A2, 0x109A3, 0x109A4, 0x109A5, 0x109A6,
      0x109A7, 0x109A8, 0x109A9, 0x109AA, 0x109AB, 0x109AC, 0x109AD, 0x109AE,
      0x109AF, 0x109B0, 0x109B1, 0x109B2, 0x109B3, 0x109B4, 0x109B5, 0x109B6,
      0x109B7, 0x109BE, 0x109BF, 0x10A00, 0x10A10, 0x10A11, 0x10A12, 0x10A13,
      0x10A15, 0x10A16, 0x10A17, 0x10A19, 0x10A1A, 0x10A1B, 0x10A1C, 0x10A1D,
      0x10A1E, 0x10A1F, 0x10A20, 0x10A21, 0x10A22, 0x10A23, 0x10A24, 0x10A25,
      0x10A26, 0x10A27, 0x10A28, 0x10A29, 0x10A2A, 0x10A2B, 0x10A2C, 0x10A2D,
      0x10A2E, 0x10A2F, 0x10A30, 0x10A31, 0x10A32, 0x10A33, 0x10A40, 0x10A41,
      0x10A42, 0x10A43, 0x10A44, 0x10A45, 0x10A46, 0x10A47, 0x10A50, 0x10A51,
      0x10A52, 0x10A53, 0x10A54, 0x10A55, 0x10A56, 0x10A57, 0x10A58, 0x10A60,
      0x10A61, 0x10A62, 0x10A63, 0x10A64, 0x10A65, 0x10A66, 0x10A67, 0x10A68,
      0x10A69, 0x10A6A, 0x10A6B, 0x10A6C, 0x10A6D, 0x10A6E, 0x10A6F, 0x10A70,
      0x10A71, 0x10A72, 0x10A73, 0x10A74, 0x10A75, 0x10A76, 0x10A77, 0x10A78,
      0x10A79, 0x10A7A, 0x10A7B, 0x10A7C, 0x10A7D, 0x10A7E, 0x10A7F, 0x10B00,
      0x10B01, 0x10B02, 0x10B03, 0x10B04, 0x10B05, 0x10B06, 0x10B07, 0x10B08,
      0x10B09, 0x10B0A, 0x10B0B, 0x10B0C, 0x10B0D, 0x10B0E, 0x10B0F, 0x10B10,
      0x10B11, 0x10B12, 0x10B13, 0x10B14, 0x10B15, 0x10B16, 0x10B17, 0x10B18,
      0x10B19, 0x10B1A, 0x10B1B, 0x10B1C, 0x10B1D, 0x10B1E, 0x10B1F, 0x10B20,
      0x10B21, 0x10B22, 0x10B23, 0x10B24, 0x10B25, 0x10B26, 0x10B27, 0x10B28,
      0x10B29, 0x10B2A, 0x10B2B, 0x10B2C, 0x10B2D, 0x10B2E, 0x10B2F, 0x10B30,
      0x10B31, 0x10B32, 0x10B33, 0x10B34, 0x10B35, 0x10B40, 0x10B41, 0x10B42,
      0x10B43, 0x10B44, 0x10B45, 0x10B46, 0x10B47, 0x10B48, 0x10B49, 0x10B4A,
      0x10B4B, 0x10B4C, 0x10B4D, 0x10B4E, 0x10B4F, 0x10B50, 0x10B51, 0x10B52,
      0x10B53, 0x10B54, 0x10B55, 0x10B58, 0x10B59, 0x10B5A, 0x10B5B, 0x10B5C,
      0x10B5D, 0x10B5E, 0x10B5F, 0x10B60, 0x10B61, 0x10B62, 0x10B63, 0x10B64,
      0x10B65, 0x10B66, 0x10B67, 0x10B68, 0x10B69, 0x10B6A, 0x10B6B, 0x10B6C,
      0x10B6D, 0x10B6E, 0x10B6F, 0x10B70, 0x10B71, 0x10B72, 0x10B78, 0x10B79,
      0x10B7A, 0x10B7B, 0x10B7C, 0x10B7D, 0x10B7E, 0x10B7F, 0x10C00, 0x10C01,
      0x10C02, 0x10C03, 0x10C04, 0x10C05, 0x10C06, 0x10C07, 0x10C08, 0x10C09,
      0x10C0A, 0x10C0B, 0x10C0C, 0x10C0D, 0x10C0E, 0x10C0F, 0x10C10, 0x10C11,
      0x10C12, 0x10C13, 0x10C14, 0x10C15, 0x10C16, 0x10C17, 0x10C18, 0x10C19,
      0x10C1A, 0x10C1B, 0x10C1C, 0x10C1D, 0x10C1E, 0x10C1F, 0x10C20, 0x10C21,
      0x10C22, 0x10C23, 0x10C24, 0x10C25, 0x10C26, 0x10C27, 0x10C28, 0x10C29,
      0x10C2A, 0x10C2B, 0x10C2C, 0x10C2D, 0x10C2E, 0x10C2F, 0x10C30, 0x10C31,
      0x10C32, 0x10C33, 0x10C34, 0x10C35, 0x10C36, 0x10C37, 0x10C38, 0x10C39,
      0x10C3A, 0x10C3B, 0x10C3C, 0x10C3D, 0x10C3E, 0x10C3F, 0x10C40, 0x10C41,
      0x10C42, 0x10C43, 0x10C44, 0x10C45, 0x10C46, 0x10C47, 0x10C48, 0x1EE00,
      0x1EE01, 0x1EE02, 0x1EE03, 0x1EE05, 0x1EE06, 0x1EE07, 0x1EE08, 0x1EE09,
      0x1EE0A, 0x1EE0B, 0x1EE0C, 0x1EE0D, 0x1EE0E, 0x1EE0F, 0x1EE10, 0x1EE11,
      0x1EE12, 0x1EE13, 0x1EE14, 0x1EE15, 0x1EE16, 0x1EE17, 0x1EE18, 0x1EE19,
      0x1EE1A, 0x1EE1B, 0x1EE1C, 0x1EE1D, 0x1EE1E, 0x1EE1F, 0x1EE21, 0x1EE22,
      0x1EE24, 0x1EE27, 0x1EE29, 0x1EE2A, 0x1EE2B, 0x1EE2C, 0x1EE2D, 0x1EE2E,
      0x1EE2F, 0x1EE30, 0x1EE31, 0x1EE32, 0x1EE34, 0x1EE35, 0x1EE36, 0x1EE37,
      0x1EE39, 0x1EE3B, 0x1EE42, 0x1EE47, 0x1EE49, 0x1EE4B, 0x1EE4D, 0x1EE4E,
      0x1EE4F, 0x1EE51, 0x1EE52, 0x1EE54, 0x1EE57, 0x1EE59, 0x1EE5B, 0x1EE5D,
      0x1EE5F, 0x1EE61, 0x1EE62, 0x1EE64, 0x1EE67, 0x1EE68, 0x1EE69, 0x1EE6A,
      0x1EE6C, 0x1EE6D, 0x1EE6E, 0x1EE6F, 0x1EE70, 0x1EE71, 0x1EE72, 0x1EE74,
      0x1EE75, 0x1EE76, 0x1EE77, 0x1EE79, 0x1EE7A, 0x1EE7B, 0x1EE7C, 0x1EE7E,
      0x1EE80, 0x1EE81, 0x1EE82, 0x1EE83, 0x1EE84, 0x1EE85, 0x1EE86, 0x1EE87,
      0x1EE88, 0x1EE89, 0x1EE8B, 0x1EE8C, 0x1EE8D, 0x1EE8E, 0x1EE8F, 0x1EE90,
      0x1EE91, 0x1EE92, 0x1EE93, 0x1EE94, 0x1EE95, 0x1EE96, 0x1EE97, 0x1EE98,
      0x1EE99, 0x1EE9A, 0x1EE9B, 0x1EEA1, 0x1EEA2, 0x1EEA3, 0x1EEA5, 0x1EEA6,
      0x1EEA7, 0x1EEA8, 0x1EEA9, 0x1EEAB, 0x1EEAC, 0x1EEAD, 0x1EEAE, 0x1EEAF,
      0x1EEB0, 0x1EEB1, 0x1EEB2, 0x1EEB3, 0x1EEB4, 0x1EEB5, 0x1EEB6, 0x1EEB7,
      0x1EEB8, 0x1EEB9, 0x1EEBA, 0x1EEBB, 0x10FFFD];

  function determineBidi(cueDiv) {
    var nodeStack = [],
        text = "",
        charCode;

    if (!cueDiv || !cueDiv.childNodes) {
      return "ltr";
    }

    function pushNodes(nodeStack, node) {
      for (var i = node.childNodes.length - 1; i >= 0; i--) {
        nodeStack.push(node.childNodes[i]);
      }
    }

    function nextTextNode(nodeStack) {
      if (!nodeStack || !nodeStack.length) {
        return null;
      }

      var node = nodeStack.pop(),
          text = node.textContent || node.innerText;
      if (text) {
        // TODO: This should match all unicode type B characters (paragraph
        // separator characters). See issue #115.
        var m = text.match(/^.*(\n|\r)/);
        if (m) {
          nodeStack.length = 0;
          return m[0];
        }
        return text;
      }
      if (node.tagName === "ruby") {
        return nextTextNode(nodeStack);
      }
      if (node.childNodes) {
        pushNodes(nodeStack, node);
        return nextTextNode(nodeStack);
      }
    }

    pushNodes(nodeStack, cueDiv);
    while ((text = nextTextNode(nodeStack))) {
      for (var i = 0; i < text.length; i++) {
        charCode = text.charCodeAt(i);
        for (var j = 0; j < strongRTLChars.length; j++) {
          if (strongRTLChars[j] === charCode) {
            return "rtl";
          }
        }
      }
    }
    return "ltr";
  }

  function computeLinePos(cue) {
    if (typeof cue.line === "number" &&
        (cue.snapToLines || (cue.line >= 0 && cue.line <= 100))) {
      return cue.line;
    }
    if (!cue.track || !cue.track.textTrackList ||
        !cue.track.textTrackList.mediaElement) {
      return -1;
    }
    var track = cue.track,
        trackList = track.textTrackList,
        count = 0;
    for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {
      if (trackList[i].mode === "showing") {
        count++;
      }
    }
    return ++count * -1;
  }

  function StyleBox() {
  }

  // Apply styles to a div. If there is no div passed then it defaults to the
  // div on 'this'.
  StyleBox.prototype.applyStyles = function(styles, div) {
    div = div || this.div;
    for (var prop in styles) {
      if (styles.hasOwnProperty(prop)) {
        div.style[prop] = styles[prop];
      }
    }
  };

  StyleBox.prototype.formatStyle = function(val, unit) {
    return val === 0 ? 0 : val + unit;
  };

  // Constructs the computed display state of the cue (a div). Places the div
  // into the overlay which should be a block level element (usually a div).
  function CueStyleBox(window, cue, styleOptions) {
    var isIE8 = (/MSIE\s8\.0/).test(navigator.userAgent);
    var color = "rgba(255, 255, 255, 1)";
    var backgroundColor = "rgba(0, 0, 0, 0.8)";

    if (isIE8) {
      color = "rgb(255, 255, 255)";
      backgroundColor = "rgb(0, 0, 0)";
    }

    StyleBox.call(this);
    this.cue = cue;

    // Parse our cue's text into a DOM tree rooted at 'cueDiv'. This div will
    // have inline positioning and will function as the cue background box.
    this.cueDiv = parseContent(window, cue.text);
    var styles = {
      color: color,
      backgroundColor: backgroundColor,
      position: "relative",
      left: 0,
      right: 0,
      top: 0,
      bottom: 0,
      display: "inline"
    };

    if (!isIE8) {
      styles.writingMode = cue.vertical === "" ? "horizontal-tb"
                                               : cue.vertical === "lr" ? "vertical-lr"
                                                                       : "vertical-rl";
      styles.unicodeBidi = "plaintext";
    }
    this.applyStyles(styles, this.cueDiv);

    // Create an absolutely positioned div that will be used to position the cue
    // div. Note, all WebVTT cue-setting alignments are equivalent to the CSS
    // mirrors of them except "middle" which is "center" in CSS.
    this.div = window.document.createElement("div");
    styles = {
      textAlign: cue.align === "middle" ? "center" : cue.align,
      font: styleOptions.font,
      whiteSpace: "pre-line",
      position: "absolute"
    };

    if (!isIE8) {
      styles.direction = determineBidi(this.cueDiv);
      styles.writingMode = cue.vertical === "" ? "horizontal-tb"
                                               : cue.vertical === "lr" ? "vertical-lr"
                                                                       : "vertical-rl".
      stylesunicodeBidi =  "plaintext";
    }

    this.applyStyles(styles);

    this.div.appendChild(this.cueDiv);

    // Calculate the distance from the reference edge of the viewport to the text
    // position of the cue box. The reference edge will be resolved later when
    // the box orientation styles are applied.
    var textPos = 0;
    switch (cue.positionAlign) {
    case "start":
      textPos = cue.position;
      break;
    case "middle":
      textPos = cue.position - (cue.size / 2);
      break;
    case "end":
      textPos = cue.position - cue.size;
      break;
    }

    // Horizontal box orientation; textPos is the distance from the left edge of the
    // area to the left edge of the box and cue.size is the distance extending to
    // the right from there.
    if (cue.vertical === "") {
      this.applyStyles({
        left:  this.formatStyle(textPos, "%"),
        width: this.formatStyle(cue.size, "%")
      });
    // Vertical box orientation; textPos is the distance from the top edge of the
    // area to the top edge of the box and cue.size is the height extending
    // downwards from there.
    } else {
      this.applyStyles({
        top: this.formatStyle(textPos, "%"),
        height: this.formatStyle(cue.size, "%")
      });
    }

    this.move = function(box) {
      this.applyStyles({
        top: this.formatStyle(box.top, "px"),
        bottom: this.formatStyle(box.bottom, "px"),
        left: this.formatStyle(box.left, "px"),
        right: this.formatStyle(box.right, "px"),
        height: this.formatStyle(box.height, "px"),
        width: this.formatStyle(box.width, "px")
      });
    };
  }
  CueStyleBox.prototype = _objCreate(StyleBox.prototype);
  CueStyleBox.prototype.constructor = CueStyleBox;

  // Represents the co-ordinates of an Element in a way that we can easily
  // compute things with such as if it overlaps or intersects with another Element.
  // Can initialize it with either a StyleBox or another BoxPosition.
  function BoxPosition(obj) {
    var isIE8 = (/MSIE\s8\.0/).test(navigator.userAgent);

    // Either a BoxPosition was passed in and we need to copy it, or a StyleBox
    // was passed in and we need to copy the results of 'getBoundingClientRect'
    // as the object returned is readonly. All co-ordinate values are in reference
    // to the viewport origin (top left).
    var lh, height, width, top;
    if (obj.div) {
      height = obj.div.offsetHeight;
      width = obj.div.offsetWidth;
      top = obj.div.offsetTop;

      var rects = (rects = obj.div.childNodes) && (rects = rects[0]) &&
                  rects.getClientRects && rects.getClientRects();
      obj = obj.div.getBoundingClientRect();
      // In certain cases the outter div will be slightly larger then the sum of
      // the inner div's lines. This could be due to bold text, etc, on some platforms.
      // In this case we should get the average line height and use that. This will
      // result in the desired behaviour.
      lh = rects ? Math.max((rects[0] && rects[0].height) || 0, obj.height / rects.length)
                 : 0;

    }
    this.left = obj.left;
    this.right = obj.right;
    this.top = obj.top || top;
    this.height = obj.height || height;
    this.bottom = obj.bottom || (top + (obj.height || height));
    this.width = obj.width || width;
    this.lineHeight = lh !== undefined ? lh : obj.lineHeight;

    if (isIE8 && !this.lineHeight) {
      this.lineHeight = 13;
    }
  }

  // Move the box along a particular axis. Optionally pass in an amount to move
  // the box. If no amount is passed then the default is the line height of the
  // box.
  BoxPosition.prototype.move = function(axis, toMove) {
    toMove = toMove !== undefined ? toMove : this.lineHeight;
    switch (axis) {
    case "+x":
      this.left += toMove;
      this.right += toMove;
      break;
    case "-x":
      this.left -= toMove;
      this.right -= toMove;
      break;
    case "+y":
      this.top += toMove;
      this.bottom += toMove;
      break;
    case "-y":
      this.top -= toMove;
      this.bottom -= toMove;
      break;
    }
  };

  // Check if this box overlaps another box, b2.
  BoxPosition.prototype.overlaps = function(b2) {
    return this.left < b2.right &&
           this.right > b2.left &&
           this.top < b2.bottom &&
           this.bottom > b2.top;
  };

  // Check if this box overlaps any other boxes in boxes.
  BoxPosition.prototype.overlapsAny = function(boxes) {
    for (var i = 0; i < boxes.length; i++) {
      if (this.overlaps(boxes[i])) {
        return true;
      }
    }
    return false;
  };

  // Check if this box is within another box.
  BoxPosition.prototype.within = function(container) {
    return this.top >= container.top &&
           this.bottom <= container.bottom &&
           this.left >= container.left &&
           this.right <= container.right;
  };

  // Check if this box is entirely within the container or it is overlapping
  // on the edge opposite of the axis direction passed. For example, if "+x" is
  // passed and the box is overlapping on the left edge of the container, then
  // return true.
  BoxPosition.prototype.overlapsOppositeAxis = function(container, axis) {
    switch (axis) {
    case "+x":
      return this.left < container.left;
    case "-x":
      return this.right > container.right;
    case "+y":
      return this.top < container.top;
    case "-y":
      return this.bottom > container.bottom;
    }
  };

  // Find the percentage of the area that this box is overlapping with another
  // box.
  BoxPosition.prototype.intersectPercentage = function(b2) {
    var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)),
        y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)),
        intersectArea = x * y;
    return intersectArea / (this.height * this.width);
  };

  // Convert the positions from this box to CSS compatible positions using
  // the reference container's positions. This has to be done because this
  // box's positions are in reference to the viewport origin, whereas, CSS
  // values are in referecne to their respective edges.
  BoxPosition.prototype.toCSSCompatValues = function(reference) {
    return {
      top: this.top - reference.top,
      bottom: reference.bottom - this.bottom,
      left: this.left - reference.left,
      right: reference.right - this.right,
      height: this.height,
      width: this.width
    };
  };

  // Get an object that represents the box's position without anything extra.
  // Can pass a StyleBox, HTMLElement, or another BoxPositon.
  BoxPosition.getSimpleBoxPosition = function(obj) {
    var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;
    var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;
    var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;

    obj = obj.div ? obj.div.getBoundingClientRect() :
                  obj.tagName ? obj.getBoundingClientRect() : obj;
    var ret = {
      left: obj.left,
      right: obj.right,
      top: obj.top || top,
      height: obj.height || height,
      bottom: obj.bottom || (top + (obj.height || height)),
      width: obj.width || width
    };
    return ret;
  };

  // Move a StyleBox to its specified, or next best, position. The containerBox
  // is the box that contains the StyleBox, such as a div. boxPositions are
  // a list of other boxes that the styleBox can't overlap with.
  function moveBoxToLinePosition(window, styleBox, containerBox, boxPositions) {

    // Find the best position for a cue box, b, on the video. The axis parameter
    // is a list of axis, the order of which, it will move the box along. For example:
    // Passing ["+x", "-x"] will move the box first along the x axis in the positive
    // direction. If it doesn't find a good position for it there it will then move
    // it along the x axis in the negative direction.
    function findBestPosition(b, axis) {
      var bestPosition,
          specifiedPosition = new BoxPosition(b),
          percentage = 1; // Highest possible so the first thing we get is better.

      for (var i = 0; i < axis.length; i++) {
        while (b.overlapsOppositeAxis(containerBox, axis[i]) ||
               (b.within(containerBox) && b.overlapsAny(boxPositions))) {
          b.move(axis[i]);
        }
        // We found a spot where we aren't overlapping anything. This is our
        // best position.
        if (b.within(containerBox)) {
          return b;
        }
        var p = b.intersectPercentage(containerBox);
        // If we're outside the container box less then we were on our last try
        // then remember this position as the best position.
        if (percentage > p) {
          bestPosition = new BoxPosition(b);
          percentage = p;
        }
        // Reset the box position to the specified position.
        b = new BoxPosition(specifiedPosition);
      }
      return bestPosition || specifiedPosition;
    }

    var boxPosition = new BoxPosition(styleBox),
        cue = styleBox.cue,
        linePos = computeLinePos(cue),
        axis = [];

    // If we have a line number to align the cue to.
    if (cue.snapToLines) {
      var size;
      switch (cue.vertical) {
      case "":
        axis = [ "+y", "-y" ];
        size = "height";
        break;
      case "rl":
        axis = [ "+x", "-x" ];
        size = "width";
        break;
      case "lr":
        axis = [ "-x", "+x" ];
        size = "width";
        break;
      }

      var step = boxPosition.lineHeight,
          position = step * Math.round(linePos),
          maxPosition = containerBox[size] + step,
          initialAxis = axis[0];

      // If the specified intial position is greater then the max position then
      // clamp the box to the amount of steps it would take for the box to
      // reach the max position.
      if (Math.abs(position) > maxPosition) {
        position = position < 0 ? -1 : 1;
        position *= Math.ceil(maxPosition / step) * step;
      }

      // If computed line position returns negative then line numbers are
      // relative to the bottom of the video instead of the top. Therefore, we
      // need to increase our initial position by the length or width of the
      // video, depending on the writing direction, and reverse our axis directions.
      if (linePos < 0) {
        position += cue.vertical === "" ? containerBox.height : containerBox.width;
        axis = axis.reverse();
      }

      // Move the box to the specified position. This may not be its best
      // position.
      boxPosition.move(initialAxis, position);

    } else {
      // If we have a percentage line value for the cue.
      var calculatedPercentage = (boxPosition.lineHeight / containerBox.height) * 100;

      switch (cue.lineAlign) {
      case "middle":
        linePos -= (calculatedPercentage / 2);
        break;
      case "end":
        linePos -= calculatedPercentage;
        break;
      }

      // Apply initial line position to the cue box.
      switch (cue.vertical) {
      case "":
        styleBox.applyStyles({
          top: styleBox.formatStyle(linePos, "%")
        });
        break;
      case "rl":
        styleBox.applyStyles({
          left: styleBox.formatStyle(linePos, "%")
        });
        break;
      case "lr":
        styleBox.applyStyles({
          right: styleBox.formatStyle(linePos, "%")
        });
        break;
      }

      axis = [ "+y", "-x", "+x", "-y" ];

      // Get the box position again after we've applied the specified positioning
      // to it.
      boxPosition = new BoxPosition(styleBox);
    }

    var bestPosition = findBestPosition(boxPosition, axis);
    styleBox.move(bestPosition.toCSSCompatValues(containerBox));
  }

  function WebVTT() {
    // Nothing
  }

  // Helper to allow strings to be decoded instead of the default binary utf8 data.
  WebVTT.StringDecoder = function() {
    return {
      decode: function(data) {
        if (!data) {
          return "";
        }
        if (typeof data !== "string") {
          throw new Error("Error - expected string data.");
        }
        return decodeURIComponent(encodeURIComponent(data));
      }
    };
  };

  WebVTT.convertCueToDOMTree = function(window, cuetext) {
    if (!window || !cuetext) {
      return null;
    }
    return parseContent(window, cuetext);
  };

  var FONT_SIZE_PERCENT = 0.05;
  var FONT_STYLE = "sans-serif";
  var CUE_BACKGROUND_PADDING = "1.5%";

  // Runs the processing model over the cues and regions passed to it.
  // @param overlay A block level element (usually a div) that the computed cues
  //                and regions will be placed into.
  WebVTT.processCues = function(window, cues, overlay) {
    if (!window || !cues || !overlay) {
      return null;
    }

    // Remove all previous children.
    while (overlay.firstChild) {
      overlay.removeChild(overlay.firstChild);
    }

    var paddedOverlay = window.document.createElement("div");
    paddedOverlay.style.position = "absolute";
    paddedOverlay.style.left = "0";
    paddedOverlay.style.right = "0";
    paddedOverlay.style.top = "0";
    paddedOverlay.style.bottom = "0";
    paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;
    overlay.appendChild(paddedOverlay);

    // Determine if we need to compute the display states of the cues. This could
    // be the case if a cue's state has been changed since the last computation or
    // if it has not been computed yet.
    function shouldCompute(cues) {
      for (var i = 0; i < cues.length; i++) {
        if (cues[i].hasBeenReset || !cues[i].displayState) {
          return true;
        }
      }
      return false;
    }

    // We don't need to recompute the cues' display states. Just reuse them.
    if (!shouldCompute(cues)) {
      for (var i = 0; i < cues.length; i++) {
        paddedOverlay.appendChild(cues[i].displayState);
      }
      return;
    }

    var boxPositions = [],
        containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay),
        fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;
    var styleOptions = {
      font: fontSize + "px " + FONT_STYLE
    };

    (function() {
      var styleBox, cue;

      for (var i = 0; i < cues.length; i++) {
        cue = cues[i];

        // Compute the intial position and styles of the cue div.
        styleBox = new CueStyleBox(window, cue, styleOptions);
        paddedOverlay.appendChild(styleBox.div);

        // Move the cue div to it's correct line position.
        moveBoxToLinePosition(window, styleBox, containerBox, boxPositions);

        // Remember the computed div so that we don't have to recompute it later
        // if we don't have too.
        cue.displayState = styleBox.div;

        boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));
      }
    })();
  };

  WebVTT.Parser = function(window, vttjs, decoder) {
    if (!decoder) {
      decoder = vttjs;
      vttjs = {};
    }
    if (!vttjs) {
      vttjs = {};
    }

    this.window = window;
    this.vttjs = vttjs;
    this.state = "INITIAL";
    this.buffer = "";
    this.decoder = decoder || new TextDecoder("utf8");
    this.regionList = [];
  };

  WebVTT.Parser.prototype = {
    // If the error is a ParsingError then report it to the consumer if
    // possible. If it's not a ParsingError then throw it like normal.
    reportOrThrowError: function(e) {
      if (e instanceof ParsingError) {
        this.onparsingerror && this.onparsingerror(e);
      } else {
        throw e;
      }
    },
    parse: function (data) {
      var self = this;

      // If there is no data then we won't decode it, but will just try to parse
      // whatever is in buffer already. This may occur in circumstances, for
      // example when flush() is called.
      if (data) {
        // Try to decode the data that we received.
        self.buffer += self.decoder.decode(data, {stream: true});
      }

      function collectNextLine() {
        var buffer = self.buffer;
        var pos = 0;
        while (pos < buffer.length && buffer[pos] !== '\r' && buffer[pos] !== '\n') {
          ++pos;
        }
        var line = buffer.substr(0, pos);
        // Advance the buffer early in case we fail below.
        if (buffer[pos] === '\r') {
          ++pos;
        }
        if (buffer[pos] === '\n') {
          ++pos;
        }
        self.buffer = buffer.substr(pos);
        return line;
      }

      // 3.4 WebVTT region and WebVTT region settings syntax
      function parseRegion(input) {
        var settings = new Settings();

        parseOptions(input, function (k, v) {
          switch (k) {
          case "id":
            settings.set(k, v);
            break;
          case "width":
            settings.percent(k, v);
            break;
          case "lines":
            settings.integer(k, v);
            break;
          case "regionanchor":
          case "viewportanchor":
            var xy = v.split(',');
            if (xy.length !== 2) {
              break;
            }
            // We have to make sure both x and y parse, so use a temporary
            // settings object here.
            var anchor = new Settings();
            anchor.percent("x", xy[0]);
            anchor.percent("y", xy[1]);
            if (!anchor.has("x") || !anchor.has("y")) {
              break;
            }
            settings.set(k + "X", anchor.get("x"));
            settings.set(k + "Y", anchor.get("y"));
            break;
          case "scroll":
            settings.alt(k, v, ["up"]);
            break;
          }
        }, /=/, /\s/);

        // Create the region, using default values for any values that were not
        // specified.
        if (settings.has("id")) {
          var region = new (self.vttjs.VTTRegion || self.window.VTTRegion)();
          region.width = settings.get("width", 100);
          region.lines = settings.get("lines", 3);
          region.regionAnchorX = settings.get("regionanchorX", 0);
          region.regionAnchorY = settings.get("regionanchorY", 100);
          region.viewportAnchorX = settings.get("viewportanchorX", 0);
          region.viewportAnchorY = settings.get("viewportanchorY", 100);
          region.scroll = settings.get("scroll", "");
          // Register the region.
          self.onregion && self.onregion(region);
          // Remember the VTTRegion for later in case we parse any VTTCues that
          // reference it.
          self.regionList.push({
            id: settings.get("id"),
            region: region
          });
        }
      }

      // 3.2 WebVTT metadata header syntax
      function parseHeader(input) {
        parseOptions(input, function (k, v) {
          switch (k) {
          case "Region":
            // 3.3 WebVTT region metadata header syntax
            parseRegion(v);
            break;
          }
        }, /:/);
      }

      // 5.1 WebVTT file parsing.
      try {
        var line;
        if (self.state === "INITIAL") {
          // We can't start parsing until we have the first line.
          if (!/\r\n|\n/.test(self.buffer)) {
            return this;
          }

          line = collectNextLine();

          var m = line.match(/^WEBVTT([ \t].*)?$/);
          if (!m || !m[0]) {
            throw new ParsingError(ParsingError.Errors.BadSignature);
          }

          self.state = "HEADER";
        }

        var alreadyCollectedLine = false;
        while (self.buffer) {
          // We can't parse a line until we have the full line.
          if (!/\r\n|\n/.test(self.buffer)) {
            return this;
          }

          if (!alreadyCollectedLine) {
            line = collectNextLine();
          } else {
            alreadyCollectedLine = false;
          }

          switch (self.state) {
          case "HEADER":
            // 13-18 - Allow a header (metadata) under the WEBVTT line.
            if (/:/.test(line)) {
              parseHeader(line);
            } else if (!line) {
              // An empty line terminates the header and starts the body (cues).
              self.state = "ID";
            }
            continue;
          case "NOTE":
            // Ignore NOTE blocks.
            if (!line) {
              self.state = "ID";
            }
            continue;
          case "ID":
            // Check for the start of NOTE blocks.
            if (/^NOTE($|[ \t])/.test(line)) {
              self.state = "NOTE";
              break;
            }
            // 19-29 - Allow any number of line terminators, then initialize new cue values.
            if (!line) {
              continue;
            }
            self.cue = new (self.vttjs.VTTCue || self.window.VTTCue)(0, 0, "");
            self.state = "CUE";
            // 30-39 - Check if self line contains an optional identifier or timing data.
            if (line.indexOf("-->") === -1) {
              self.cue.id = line;
              continue;
            }
            // Process line as start of a cue.
            /*falls through*/
          case "CUE":
            // 40 - Collect cue timings and settings.
            try {
              parseCue(line, self.cue, self.regionList);
            } catch (e) {
              self.reportOrThrowError(e);
              // In case of an error ignore rest of the cue.
              self.cue = null;
              self.state = "BADCUE";
              continue;
            }
            self.state = "CUETEXT";
            continue;
          case "CUETEXT":
            var hasSubstring = line.indexOf("-->") !== -1;
            // 34 - If we have an empty line then report the cue.
            // 35 - If we have the special substring '-->' then report the cue,
            // but do not collect the line as we need to process the current
            // one as a new cue.
            if (!line || hasSubstring && (alreadyCollectedLine = true)) {
              // We are done parsing self cue.
              self.oncue && self.oncue(self.cue);
              self.cue = null;
              self.state = "ID";
              continue;
            }
            if (self.cue.text) {
              self.cue.text += "\n";
            }
            self.cue.text += line;
            continue;
          case "BADCUE": // BADCUE
            // 54-62 - Collect and discard the remaining cue.
            if (!line) {
              self.state = "ID";
            }
            continue;
          }
        }
      } catch (e) {
        self.reportOrThrowError(e);

        // If we are currently parsing a cue, report what we have.
        if (self.state === "CUETEXT" && self.cue && self.oncue) {
          self.oncue(self.cue);
        }
        self.cue = null;
        // Enter BADWEBVTT state if header was not parsed correctly otherwise
        // another exception occurred so enter BADCUE state.
        self.state = self.state === "INITIAL" ? "BADWEBVTT" : "BADCUE";
      }
      return this;
    },
    flush: function () {
      var self = this;
      try {
        // Finish decoding the stream.
        self.buffer += self.decoder.decode();
        // Synthesize the end of the current cue or region.
        if (self.cue || self.state === "HEADER") {
          self.buffer += "\n\n";
          self.parse();
        }
        // If we've flushed, parsed, and we're still on the INITIAL state then
        // that means we don't have enough of the stream to parse the first
        // line.
        if (self.state === "INITIAL") {
          throw new ParsingError(ParsingError.Errors.BadSignature);
        }
      } catch(e) {
        self.reportOrThrowError(e);
      }
      self.onflush && self.onflush();
      return this;
    }
  };

  global.WebVTT = WebVTT;

}(this, (this.vttjs || {})));

/*! videojs-chromecast - v1.1.1 - 2015-11-10
* https://github.com/kim-company/videojs-chromecast
* Copyright (c) 2015 KIM Keep In Mind GmbH, srl; Licensed MIT */

(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  vjs.addLanguage("de", {
    "CASTING TO": "WIEDERGABE AUF"
  });

  vjs.addLanguage("it", {
    "CASTING TO": "PLAYBACK SU"
  });

  vjs.plugin("chromecast", function(options) {
    this.chromecastComponent = new vjs.ChromecastComponent(this, options);
    return this.controlBar.addChild(this.chromecastComponent);
  });

  vjs.ChromecastComponent = (function(superClass) {
    extend(ChromecastComponent, superClass);

    ChromecastComponent.prototype.buttonText = "Chromecast";

    ChromecastComponent.prototype.inactivityTimeout = 2000;

    ChromecastComponent.prototype.apiInitialized = false;

    ChromecastComponent.prototype.apiSession = null;

    ChromecastComponent.prototype.apiMedia = null;

    ChromecastComponent.prototype.casting = false;

    ChromecastComponent.prototype.paused = true;

    ChromecastComponent.prototype.muted = false;

    ChromecastComponent.prototype.currentVolume = 1;

    ChromecastComponent.prototype.currentMediaTime = 0;

    ChromecastComponent.prototype.timer = null;

    ChromecastComponent.prototype.timerStep = 1000;

    ChromecastComponent.prototype.tryingReconnect = 0;

    function ChromecastComponent(player, settings) {
      this.settings = settings;
      ChromecastComponent.__super__.constructor.call(this, player, this.settings);
      if (!player.controls()) {
        this.disable();
      }
      this.hide();
      this.initializeApi();
    }

    ChromecastComponent.prototype.initializeApi = function() {
      var apiConfig, appId, sessionRequest;
      if (!vjs.IS_CHROME) {
        return;
      }
      if (!chrome.cast || !chrome.cast.isAvailable) {
        vjs.log("Cast APIs not available");
        return;
      }
      vjs.log("Cast APIs are available");
      appId = this.settings.appId || chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID;
      sessionRequest = new chrome.cast.SessionRequest(appId);
      apiConfig = new chrome.cast.ApiConfig(sessionRequest, this.sessionJoinedListener, this.receiverListener.bind(this));
      return chrome.cast.initialize(apiConfig, this.onInitSuccess.bind(this), this.castError);
    };

    ChromecastComponent.prototype.sessionJoinedListener = function(session) {
      return console.log("Session joined");
    };

    ChromecastComponent.prototype.receiverListener = function(availability) {
      if (availability === "available") {
        return this.show();
      }
    };

    ChromecastComponent.prototype.onInitSuccess = function() {
      return this.apiInitialized = true;
    };

    ChromecastComponent.prototype.castError = function(castError) {
      return vjs.log("Cast Error: " + (JSON.stringify(castError)));
    };

    ChromecastComponent.prototype.doLaunch = function() {
      vjs.log("Cast video: " + (this.player_.currentSrc()));
      if (this.apiInitialized) {
        return chrome.cast.requestSession(this.onSessionSuccess.bind(this), this.castError);
      } else {
        return vjs.log("Session not initialized");
      }
    };

    ChromecastComponent.prototype.onSessionSuccess = function(session) {
      var image, key, loadRequest, mediaInfo, ref, ref1, value;
      vjs.log("Session initialized: " + session.sessionId);
      this.selectedTrack = null;
      this.apiSession = session;
      this.addClass("connected");
      mediaInfo = new chrome.cast.media.MediaInfo(this.player_.currentSrc(), this.player_.currentType());
      if (this.settings.metadata) {
        mediaInfo.metadata = new chrome.cast.media.GenericMediaMetadata();
        ref = this.settings.metadata;
        for (key in ref) {
          value = ref[key];
          mediaInfo.metadata[key] = value;
        }
        if (this.player_.options_.poster) {
          image = new chrome.cast.Image(this.player_.options_.poster);
          mediaInfo.metadata.images = [image];
        }
      }
      this.plTracks = this.settings.tracks;
      if (this.plTracks) {
        this.nbTrack = 1;
        this.tracks = [];
        ref1 = this.plTracks;
        for (key in ref1) {
          value = ref1[key];
          this.track = new chrome.cast.media.Track(this.nbTrack, chrome.cast.media.TrackType.TEXT);
          this.track.trackContentId = value.src;
          this.track.trackContentType = value.type;
          this.track.subtype = chrome.cast.media.TextTrackType.CAPTIONS;
          this.track.name = value.label;
          this.track.language = value.language;
          if (value.mode === 'showing') {
            this.selectedTrack = this.track;
          }
          this.track.customData = null;
          this.tracks.push(this.track);
          ++this.nbTrack;
        }
        mediaInfo.textTrackStyle = new chrome.cast.media.TextTrackStyle();
        mediaInfo.tracks = this.tracks;
      }
      loadRequest = new chrome.cast.media.LoadRequest(mediaInfo);
      loadRequest.autoplay = true;
      loadRequest.currentTime = this.player_.currentTime();
      this.apiSession.loadMedia(loadRequest, this.onMediaDiscovered.bind(this), this.castError);
      return this.apiSession.addUpdateListener(this.onSessionUpdate.bind(this));
    };

    ChromecastComponent.prototype.onTrackChangeHandler = function() {
      var i, len, ref, track;
      this.activeTrackIds = [];
      ref = this.player_.textTracks();
      for (i = 0, len = ref.length; i < len; i++) {
        track = ref[i];
        if (track['mode'] === 'showing') {
          this.activeTrackIds.push(track.id);
        }
      }
      this.tracksInfoRequest = new chrome.cast.media.EditTracksInfoRequest(this.activeTrackIds);
      if (this.apiMedia) {
        return this.apiMedia.editTracksInfo(this.tracksInfoRequest, this.onTrackSuccess.bind(this), this.onTrackError.bind(this));
      }
    };

    ChromecastComponent.prototype.onTrackSuccess = function() {
      return vjs.log('track added');
    };

    ChromecastComponent.prototype.onTrackError = function() {
      return vjs.log('track error');
    };

    ChromecastComponent.prototype.onMediaDiscovered = function(media) {
      this.apiMedia = media;
      this.apiMedia.addUpdateListener(this.onMediaStatusUpdate.bind(this));
      if (this.selectedTrack) {
        this.activeTrackIds = [this.selectedTrack.trackId];
        this.tracksInfoRequest = new chrome.cast.media.EditTracksInfoRequest(this.activeTrackIds);
        this.apiMedia.editTracksInfo(this.tracksInfoRequest, this.onTrackSuccess.bind(this), this.onTrackError.bind(this));
      }
      this.startProgressTimer(this.incrementMediaTime.bind(this));
      this.player_.loadTech('ChromecastTech', {
        receiver: this.apiSession.receiver.friendlyName
      });
      this.casting = true;
      this.paused = this.player_.paused();
      this.inactivityTimeout = this.player_.options_.inactivityTimeout;
      this.player_.options_.inactivityTimeout = 0;
      return this.player_.userActive(true);
    };

    ChromecastComponent.prototype.onSessionUpdate = function(isAlive) {
      if (!this.apiMedia) {
        return;
      }
      if (!isAlive) {
        return this.onStopAppSuccess();
      }
    };

    ChromecastComponent.prototype.onMediaStatusUpdate = function(isAlive) {
      if (!this.apiMedia) {
        return;
      }
      this.currentMediaTime = this.apiMedia.currentTime;
      switch (this.apiMedia.playerState) {
        case chrome.cast.media.PlayerState.IDLE:
          this.currentMediaTime = 0;
          this.trigger("timeupdate");
          return this.onStopAppSuccess();
        case chrome.cast.media.PlayerState.PAUSED:
          if (this.paused) {
            return;
          }
          this.player_.pause();
          return this.paused = true;
        case chrome.cast.media.PlayerState.PLAYING:
          if (!this.paused) {
            return;
          }
          this.player_.play();
          return this.paused = false;
      }
    };

    ChromecastComponent.prototype.startProgressTimer = function(callback) {
      if (this.timer) {
        clearInterval(this.timer);
        this.timer = null;
      }
      return this.timer = setInterval(callback.bind(this), this.timerStep);
    };

    ChromecastComponent.prototype.play = function() {
      if (!this.apiMedia) {
        return;
      }
      if (this.paused) {
        this.apiMedia.play(null, this.mediaCommandSuccessCallback.bind(this, "Playing: " + this.apiMedia.sessionId), this.onError);
        return this.paused = false;
      }
    };

    ChromecastComponent.prototype.pause = function() {
      if (!this.apiMedia) {
        return;
      }
      if (!this.paused) {
        this.apiMedia.pause(null, this.mediaCommandSuccessCallback.bind(this, "Paused: " + this.apiMedia.sessionId), this.onError);
        return this.paused = true;
      }
    };

    ChromecastComponent.prototype.seekMedia = function(position) {
      var request;
      request = new chrome.cast.media.SeekRequest();
      request.currentTime = position;
      if (this.player_.controlBar.progressControl.seekBar.videoWasPlaying) {
        request.resumeState = chrome.cast.media.ResumeState.PLAYBACK_START;
      }
      return this.apiMedia.seek(request, this.onSeekSuccess.bind(this, position), this.onError);
    };

    ChromecastComponent.prototype.onSeekSuccess = function(position) {
      return this.currentMediaTime = position;
    };

    ChromecastComponent.prototype.setMediaVolume = function(level, mute) {
      var request, volume;
      if (!this.apiMedia) {
        return;
      }
      volume = new chrome.cast.Volume();
      volume.level = level;
      volume.muted = mute;
      this.currentVolume = volume.level;
      this.muted = mute;
      request = new chrome.cast.media.VolumeRequest();
      request.volume = volume;
      this.apiMedia.setVolume(request, this.mediaCommandSuccessCallback.bind(this, "Volume changed"), this.onError);
      return this.player_.trigger("volumechange");
    };

    ChromecastComponent.prototype.incrementMediaTime = function() {
      if (this.apiMedia.playerState !== chrome.cast.media.PlayerState.PLAYING) {
        return;
      }
      if (this.currentMediaTime < this.apiMedia.media.duration) {
        this.currentMediaTime += 1;
        return this.trigger("timeupdate");
      } else {
        this.currentMediaTime = 0;
        return clearInterval(this.timer);
      }
    };

    ChromecastComponent.prototype.mediaCommandSuccessCallback = function(information, event) {
      return vjs.log(information);
    };

    ChromecastComponent.prototype.onError = function() {
      return vjs.log("error");
    };

    ChromecastComponent.prototype.stopCasting = function() {
      return this.apiSession.stop(this.onStopAppSuccess.bind(this), this.onError);
    };

    ChromecastComponent.prototype.onStopAppSuccess = function() {
      clearInterval(this.timer);
      this.casting = false;
      this.removeClass("connected");
      this.player_.src(this.player_.options_["sources"]);
      if (!this.paused) {
        this.player_.one('seeked', function() {
          return this.player_.play();
        });
      }
      this.player_.currentTime(this.currentMediaTime);
      this.player_.tech.setControls(false);
      this.player_.options_.inactivityTimeout = this.inactivityTimeout;
      this.apiMedia = null;
      return this.apiSession = null;
    };

    ChromecastComponent.prototype.buildCSSClass = function() {
      return ChromecastComponent.__super__.buildCSSClass.apply(this, arguments) + "vjs-chromecast-button";
    };

    ChromecastComponent.prototype.onClick = function() {
      ChromecastComponent.__super__.onClick.apply(this, arguments);
      if (this.casting) {
        return this.stopCasting();
      } else {
        return this.doLaunch();
      }
    };

    return ChromecastComponent;

  })(vjs.Button);

  vjs.ChromecastTech = (function(superClass) {
    extend(ChromecastTech, superClass);

    ChromecastTech.isSupported = function() {
      return this.player_.chromecastComponent.apiInitialized;
    };

    ChromecastTech.canPlaySource = function(source) {
      return source.type === "video/mp4" || source.type === "application/dash+xml" || source.type === "video/webm" || source.type === "application/x-mpegURL" || source.type === "application/vnd.apple.mpegURL";
    };

    function ChromecastTech(player, options, ready) {
      this.featuresVolumeControl = true;
      this.movingMediaElementInDOM = false;
      this.featuresFullscreenResize = false;
      this.featuresProgressEvents = true;
      this.receiver = options.source.receiver;
      ChromecastTech.__super__.constructor.call(this, player, options, ready);
      this.triggerReady();
    }

    ChromecastTech.prototype.createEl = function() {
      var element;
      element = document.createElement("div");
      element.id = this.player_.id_ + "_chromecast_api";
      element.className = "vjs-tech vjs-tech-chromecast";
      element.innerHTML = "<div class=\"casting-image\" style=\"background-image: url('" + this.player_.options_.poster + "')\"></div>\n<div class=\"casting-overlay\">\n  <div class=\"casting-information\">\n    <div class=\"casting-icon\">&#58880</div>\n    <div class=\"casting-description\"><small>" + (this.localize("CASTING TO")) + "</small><br>" + this.receiver + "</div>\n  </div>\n</div>";
      element.player = this.player_;
      vjs.insertFirst(element, this.player_.el());
      return element;
    };


    /*
    MEDIA PLAYER EVENTS
     */

    ChromecastTech.prototype.play = function() {
      this.player_.chromecastComponent.play();
      return this.player_.onPlay();
    };

    ChromecastTech.prototype.pause = function() {
      this.player_.chromecastComponent.pause();
      return this.player_.onPause();
    };

    ChromecastTech.prototype.paused = function() {
      return this.player_.chromecastComponent.paused;
    };

    ChromecastTech.prototype.currentTime = function() {
      return this.player_.chromecastComponent.currentMediaTime;
    };

    ChromecastTech.prototype.setCurrentTime = function(seconds) {
      return this.player_.chromecastComponent.seekMedia(seconds);
    };

    ChromecastTech.prototype.volume = function() {
      return this.player_.chromecastComponent.currentVolume;
    };

    ChromecastTech.prototype.setVolume = function(volume) {
      return this.player_.chromecastComponent.setMediaVolume(volume, false);
    };

    ChromecastTech.prototype.muted = function() {
      return this.player_.chromecastComponent.muted;
    };

    ChromecastTech.prototype.setMuted = function(muted) {
      return this.player_.chromecastComponent.setMediaVolume(this.player_.chromecastComponent.currentVolume, muted);
    };

    ChromecastTech.prototype.supportsFullScreen = function() {
      return false;
    };

    return ChromecastTech;

  })(vjs.MediaTechController);

}).call(this);

(function() {
  var __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  videojs.plugin('ga', function(options) {
    var dataSetupOptions, defaultsEventsToTrack, end, error, eventCategory, eventLabel, eventsToTrack, fullscreen, loaded, parsedOptions, pause, percentsAlreadyTracked, percentsPlayedInterval, play, resize, seekEnd, seekStart, seeking, sendbeacon, timeupdate, volumeChange;
    if (options == null) {
      options = {};
    }
    dataSetupOptions = {};
    if (this.options()["data-setup"]) {
      parsedOptions = JSON.parse(this.options()["data-setup"]);
      if (parsedOptions.ga) {
        dataSetupOptions = parsedOptions.ga;
      }
    }
    defaultsEventsToTrack = ['loaded', 'percentsPlayed', 'start', 'end', 'seek', 'play', 'pause', 'resize', 'volumeChange', 'error', 'fullscreen'];
    eventsToTrack = options.eventsToTrack || dataSetupOptions.eventsToTrack || defaultsEventsToTrack;
    percentsPlayedInterval = options.percentsPlayedInterval || dataSetupOptions.percentsPlayedInterval || 10;
    eventCategory = options.eventCategory || dataSetupOptions.eventCategory || 'Video';
    eventLabel = options.eventLabel || dataSetupOptions.eventLabel;
    options.debug = options.debug || false;
    percentsAlreadyTracked = [];
    seekStart = seekEnd = 0;
    seeking = false;
    loaded = function() {
      if (!eventLabel) {
        eventLabel = this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i, '');
      }
      if (__indexOf.call(eventsToTrack, "loadedmetadata") >= 0) {
        sendbeacon('loadedmetadata', true);
      }
    };
    timeupdate = function() {
      var currentTime, duration, percent, percentPlayed, _i;
      currentTime = Math.round(this.currentTime());
      duration = Math.round(this.duration());
      percentPlayed = Math.round(currentTime / duration * 100);
      for (percent = _i = 0; _i <= 99; percent = _i += percentsPlayedInterval) {
        if (percentPlayed >= percent && __indexOf.call(percentsAlreadyTracked, percent) < 0) {
          if (__indexOf.call(eventsToTrack, "start") >= 0 && percent === 0 && percentPlayed > 0) {
            sendbeacon('start', true);
          } else if (__indexOf.call(eventsToTrack, "percentsPlayed") >= 0 && percentPlayed !== 0) {
            sendbeacon('percent played', true, percent);
          }
          if (percentPlayed > 0) {
            percentsAlreadyTracked.push(percent);
          }
        }
      }
      if (__indexOf.call(eventsToTrack, "seek") >= 0) {
        seekStart = seekEnd;
        seekEnd = currentTime;
        if (Math.abs(seekStart - seekEnd) > 1) {
          seeking = true;
          sendbeacon('seek start', false, seekStart);
          sendbeacon('seek end', false, seekEnd);
        }
      }
    };
    end = function() {
      sendbeacon('end', true);
    };
    play = function() {
      var currentTime;
      currentTime = Math.round(this.currentTime());
      sendbeacon('play', true, currentTime);
      seeking = false;
    };
    pause = function() {
      var currentTime, duration;
      currentTime = Math.round(this.currentTime());
      duration = Math.round(this.duration());
      if (currentTime !== duration && !seeking) {
        sendbeacon('pause', false, currentTime);
      }
    };
    volumeChange = function() {
      var volume;
      volume = this.muted() === true ? 0 : this.volume();
      sendbeacon('volume change', false, volume);
    };
    resize = function() {
      sendbeacon('resize - ' + this.width() + "*" + this.height(), true);
    };
    error = function() {
      var currentTime;
      currentTime = Math.round(this.currentTime());
      sendbeacon('error', true, currentTime);
    };
    fullscreen = function() {
      var currentTime;
      currentTime = Math.round(this.currentTime());
      if ((typeof this.isFullscreen === "function" ? this.isFullscreen() : void 0) || (typeof this.isFullScreen === "function" ? this.isFullScreen() : void 0)) {
        sendbeacon('enter fullscreen', false, currentTime);
      } else {
        sendbeacon('exit fullscreen', false, currentTime);
      }
    };
    sendbeacon = function(action, nonInteraction, value) {
      if (window.ga) {
        ga('send', 'event', {
          'eventCategory': eventCategory,
          'eventAction': action,
          'eventLabel': eventLabel,
          'eventValue': value,
          'nonInteraction': nonInteraction
        });
      } else if (window._gaq) {
        _gaq.push(['_trackEvent', eventCategory, action, eventLabel, value, nonInteraction]);
      } else if (options.debug) {
        console.log("Google Analytics not detected");
      }
    };
    this.ready(function() {
      this.on("loadedmetadata", loaded);
      this.on("timeupdate", timeupdate);
      if (__indexOf.call(eventsToTrack, "end") >= 0) {
        this.on("ended", end);
      }
      if (__indexOf.call(eventsToTrack, "play") >= 0) {
        this.on("play", play);
      }
      if (__indexOf.call(eventsToTrack, "pause") >= 0) {
        this.on("pause", pause);
      }
      if (__indexOf.call(eventsToTrack, "volumeChange") >= 0) {
        this.on("volumechange", volumeChange);
      }
      if (__indexOf.call(eventsToTrack, "resize") >= 0) {
        this.on("resize", resize);
      }
      if (__indexOf.call(eventsToTrack, "error") >= 0) {
        this.on("error", error);
      }
      if (__indexOf.call(eventsToTrack, "fullscreen") >= 0) {
        return this.on("fullscreenchange", fullscreen);
      }
    });
    return {
      'sendbeacon': sendbeacon
    };
  });

}).call(this);

/*! videojs-metrics - v0.0.0 - 2016-02-02
* Copyright (c) 2016 benjipott; Licensed Apache-2.0 */
/*! videojs-metrics - v0.0.0 - 2015-10-7
 * Copyright (c) 2015 benjipott
 * Licensed under the Apache-2.0 license. */
(function (window, videojs) {
  'use strict';

  /**
   * Initialize the plugin.
   * @param options (optional) {object} configuration for the plugin
   */
  videojs.Metrics = videojs.Component.extend({
    init: function (player, options) {
      videojs.Component.call(this, player, options);
      this.browserInfo = videojs.Metrics.getBrowser();
      var source = this.player().manifestUrl || this.player().currentSrc();
      this.pathUrl = source.match(videojs.Metrics.URL_MATCH) || ['undefined', 'undefined'];
      this.setupTriggers();
    }
  });

  videojs.Metrics.prototype.options_ = {
    'option': true,
    'user_id': 666,
    'method': 'POST',
    'responseType': 'json',
    'timeout': 1000,
    'url': '//stats.afrostream.tv/api/v1/events',
    'trackEvents': ['loadstart', 'ping', 'firstplay', 'ended', 'dispose', 'waiting', 'error', 'bandwidthIncrease', 'bandwidthDecrease']
  };
  /**
   * Get browser infos
   * @returns {{}}
   */
  videojs.Metrics.getBrowser = function () {
    var data = {};
    var browser = '';
    var version = '';
    var os = '';
    var osVersion = '';
    var parseUserAgent, prepareData, renameOsx, cutSafariVersion;

    parseUserAgent = function () {
      var userAgent = navigator.userAgent.toLowerCase(),
        browserParts = /(ie|firefox|chrome|safari|opera)(?:.*version)?(?:[ \/])?([\w.]+)/.exec(userAgent),
        osParts = /(mac|win|linux|freebsd|mobile|iphone|ipod|ipad|android|blackberry|j2me|webtv)/.exec(userAgent);

      if (!!userAgent.match(/trident\/7\./)) {
        browser = 'ie';
        version = 11;
      } else if (browserParts && browserParts.length > 2) {
        browser = browserParts[1];
        version = browserParts[2];
      }

      if (osParts && osParts.length > 1) {
        os = osParts[1];
      }

      osVersion = navigator.oscpu || navigator.appName;
    };

    prepareData = function () {
      data.browser = browser;
      data.version = parseInt(version, 10) || '';
      data.os = os;
      data.osVersion = osVersion;
    };

    renameOsx = function () {
      if (os === 'mac') {
        os = 'osx';
      }
    };

    cutSafariVersion = function () {
      if (os === 'safari') {
        version = version.substring(0, 1);
      }
    };

    parseUserAgent();

    // exception rules
    renameOsx();
    cutSafariVersion();

    prepareData();

    return data;
  };

  videojs.Metrics.INTERVAL_PING = 60000;

  videojs.Metrics.BASE_KEYS = ['user_id', 'type', 'fqdn'];

  videojs.Metrics.METRICS_DATA = {
    bandwidth: -1,
    bitrateIndex: 0,
    pendingIndex: '',
    numBitrates: 0,
    bufferLength: 0,
    droppedFrames: 0,
    movingLatency: 0,
    movingDownload: 0,
    movingRatio: 0,
    requestsQueue: 0
  };

  videojs.Metrics.prototype.metrics_ = {
    video: videojs.util.mergeOptions({}, videojs.Metrics.METRICS_DATA),
    audio: videojs.util.mergeOptions({}, videojs.Metrics.METRICS_DATA)
  };

  videojs.Metrics.REQUIRED_KEY = {
    'bandwidthIncrease': ['video_bitrate', 'audio_bitrate'],
    'bandwidthDecrease': ['video_bitrate', 'audio_bitrate'],
    'ping': ['chunks_from_cdn', 'chunks_from_p2p'],
    'buffering': [],
    'error': ['number', 'message'],
    'start': ['video_bitrate', 'audio_bitrate', 'os', 'os_version', 'web_browser', 'web_browser_version', 'resolution_size', 'flash_version', 'html5_video', 'relative_url'],
    'stop': ['timeout', 'frames_dropped']
  };

  videojs.Metrics.URL_MATCH = /https?:\/\/(?:www\.)?([-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b)*(\/[\/\d\w\.-]*)*(?:[\?])*(.+)*/;

  videojs.Metrics.prototype.pathUrl = '';
  videojs.Metrics.prototype.oldType = null;
  videojs.Metrics.prototype.intervalPing = 0;
  videojs.Metrics.prototype.browserInfo = {};

  videojs.Metrics.prototype.dispose = function () {
    this.clearInterval(this.intervalPing);
    this.setupTriggers('off');
  };

  videojs.Metrics.prototype.eventHandler = function (evt) {
    var data = {
      type: evt.type
    }, skipped = false;

    switch (data.type) {
      case 'error':
        var error = this.player().error();
        error = error || {
            code: -1,
            message: 'cant get error message'
          };
        data.number = error.code;
        data.message = error.message;
        break;
      case 'dispose':
      case 'ended':
        if (data.type === this.oldType) {
          skipped = true;
        }
        data.type = 'stop';
        break;
      case 'loadstart':
        skipped = true;
        break;
      case 'firstplay':
        data.type = 'start';
        this.intervalPing = this.setInterval(this.onPing, videojs.Metrics.INTERVAL_PING);
        break;
      case 'waiting':
        data.type = 'buffering';
        break;
      case 'bandwidthIncrease':
      case 'bandwidthDecrease':
        break;
      default:
        break;
    }

    this.oldType = data.type;

    if (skipped) {
      return;
    }

    this.notify(data);

  };

  videojs.Metrics.prototype.onPing = function () {
    this.player().trigger('ping');
  };

  videojs.Metrics.prototype.setupTriggers = function (off) {
    var addOrRemove = off || 'on';
    var events = this.options_.trackEvents;
    var player = this.player();
    for (var i = events.length - 1; i >= 0; i--) {
      //just call event start only one time
      var firstCall = addOrRemove;
      if (events[i] === 'firstplay' && addOrRemove === 'on') {
        firstCall = 'one';
      }
      player[firstCall](events[i], videojs.bind(this, this.eventHandler));
    }
  };

  videojs.Metrics.pick = function (obj, list, context) {
    var result = {};

    if (typeof list === 'string') {
      list = [list];
    }

    Object.keys(obj)
      .forEach(function (key) {
        if (list.indexOf(key) > -1) {
          result[key] = obj[key];
        }
      }, context);

    return result;
  };

  videojs.Metrics.prototype.getRequiredKeys = function (type) {
    return videojs.Metrics.BASE_KEYS.concat(videojs.Metrics.REQUIRED_KEY[type] || []);
  };


  videojs.Metrics.prototype.notify = function (evt) {
    var player = this.player();
    // Merge with default options
    evt.user_id = this.options().user_id;
    evt.fqdn = this.pathUrl[1];
    evt.os = this.browserInfo.os;
    evt.os_version = this.browserInfo.osVersion.toString();
    evt.web_browser = this.browserInfo.browser.toString();
    evt.web_browser_version = this.browserInfo.version ? this.browserInfo.version.toString() : '';
    evt.resolution_size = screen.width + 'x' + screen.height;
    evt.flash_version = videojs.Flash.version().join(',');
    evt.html5_video = player.tech ? player.tech.el().nodeName === 'VIDEO' : 'undefined';//player.techName === 'Html5';
    evt.relative_url = this.pathUrl[2];
    evt.timeout = false;
    evt.frames_dropped = 0;
    //=== BITDASH
    //bandwidth
    //bitrateIndex
    //pend
    // ingIndex
    //numBitrates
    //bufferLength
    //droppedFrames
    //movingLatency
    //movingDownload
    //movingRatio
    //requestsQueue
    //=== CASTLAB
    // ???
    try {
      var metrics = player.techGet('getPlaybackStatistics');
      this.metrics_ = videojs.util.mergeOptions(this.metrics_, metrics);
      evt.video_bitrate = this.metrics_.video.bandwidth > 0 ? Math.max(-1, Math.round(this.metrics_.video.bandwidth / 1000)) : -1;
      evt.audio_bitrate = this.metrics_.audio.bandwidth > 0 ? Math.max(-1, Math.round(this.metrics_.audio.bandwidth / 1000)) : -1;
      evt.chunks_from_cdn = this.metrics_.p2pweb.chunksFromCDN;
      evt.chunks_from_p2p = this.metrics_.p2pweb.chunksFromP2P;
      evt.startup_time = this.metrics_.p2pweb.startupTime;
      var pickedData = videojs.Metrics.pick(evt, this.getRequiredKeys(evt.type));
      this.xhr(this.options(), pickedData);
    }
    catch (e) {
      videojs.log(e);
    }
  };

  videojs.Metrics.prototype.xhr = function (url, data, callback) {
    var
      options = {
        method: 'GET',
        timeout: 45 * 1000
      },
      request,
      abortTimeout;

    if (typeof callback !== 'function') {
      callback = function () {
      };
    }

    if (typeof url === 'object') {
      options = videojs.util.mergeOptions(options, url);
      url = options.url;
    }

    var XHR = window.XMLHttpRequest;

    if (typeof XHR === 'undefined') {
      // Shim XMLHttpRequest for older IEs
      XHR = function () {
        try {
          return new window.ActiveXObject('Msxml2.XMLHTTP.6.0');
        } catch (e) {
        }
        try {
          return new window.ActiveXObject('Msxml2.XMLHTTP.3.0');
        } catch (f) {
        }
        try {
          return new window.ActiveXObject('Msxml2.XMLHTTP');
        } catch (g) {
        }
        throw new Error('This browser does not support XMLHttpRequest.');
      };
    }

    request = new XHR();
    request.open(options.method, url);
    request.url = url;
    request.requestTime = new Date().getTime();
    //request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    if (options.responseType) {
      request.responseType = options.responseType;
    }
    if (options.withCredentials) {
      request.withCredentials = true;
    }
    if (options.timeout) {
      abortTimeout = window.setTimeout(function () {
        if (request.readyState !== 4) {
          request.timedout = true;
          request.abort();
        }
      }, options.timeout);
    }

    request.onreadystatechange = function () {
      // wait until the request completes
      if (this.readyState !== 4) {
        return;
      }

      // clear outstanding timeouts
      window.clearTimeout(abortTimeout);

      // request timeout
      if (request.timedout) {
        return callback.call(this, 'timeout', url);
      }

      // request aborted or errored
      if (this.status >= 400 || this.status === 0) {
        return callback.call(this, true, url);
      }

      if (this.response) {
        this.responseTime = new Date().getTime();
        this.roundTripTime = this.responseTime - this.requestTime;
        this.bytesReceived = this.response.byteLength || this.response.length;
        this.bandwidth = Math.floor((this.bytesReceived / this.roundTripTime) * 8 * 1000);
      }

      return callback.call(this, false, url);
    };

    var queryString = '';
    if (typeof data === 'object') {
      for (var paramName in data) {
        queryString += (queryString.length === 0 ? '' : '&') + paramName + '=' + encodeURIComponent(data[paramName]);
      }
    }

    request.send(queryString);
    return request;
  };

  //// register the plugin
  videojs.options.children.metrics = {};

})(window, window.videojs);

/*! afrostream-player - v0.0.0 - 2015-10-21
 * Copyright (c) 2015 benjipott
 * Licensed under the Apache-2.0 license. */
(function (window, videojs) {
  'use strict';

  /**
   * Initialize the plugin.
   * @param options (optional) {object} configuration for the plugin
   */
  videojs.Afrostream = videojs.Component.extend({
    init: function (player, options) {
      videojs.Component.call(this, player, options);

      player.one('loadstart', videojs.bind(this, this.onLoadStart));
      this.tech_ = player.tech;
    }
  });

  videojs.Afrostream.prototype.options_ = {};

  /**
   * Fix subtitles error
   * @param str
   * @returns {string}
   */
  videojs.trim = function (str) {
    return (str + '').replace(/^\s+|\s+$/g, '').replace(/^NOTE Paragraph$/g, '');
  };

  videojs.Afrostream.prototype.oldBandwidth = 0;

  videojs.Afrostream.prototype.oldChunksFromP2P = 0;

  videojs.Afrostream.prototype.streamInfo = null;

  videojs.Afrostream.prototype.tech_ = null;

  videojs.Afrostream.prototype.onLoadStart = function () {
    this.addMediaPlayerHandlers();
  };

  videojs.Afrostream.prototype.addMediaPlayerHandlers = function () {
    this.player().on(MediaPlayer.events.STREAM_INITIALIZED,
      videojs.bind(this, this.onInitialized));
    this.player().on(MediaPlayer.events.METRIC_CHANGED,
      videojs.bind(this, this.onMetricChanged));

  };

  videojs.Afrostream.prototype.onMetricChanged = function (e) {
    // get current buffered ranges of video element and keep them up to date
    if (e.data.stream !== 'video' && e.data.stream !== 'audio' && e.data.stream !== 'p2pweb') {
      return;
    }
    var metrics = this.player().getCribbedMetricsFor(e.data.stream);
    if (metrics) {
      switch (e.data.stream) {
        case 'video':
          /*jshint sub:true*/
          if (metrics.bandwidth !== this.oldBandwidth) {
            this.tech_['featuresBitrate'] = metrics;
            this.player().trigger(metrics.bandwidth > this.oldBandwidth ? 'bandwidthIncrease' : 'bandwidthDecrease');
            this.oldBandwidth = metrics.bandwidth;
          }
          break;
        case 'p2pweb':
          /*jshint sub:true*/
          if (metrics.chunksFromP2P !== this.oldChunksFromP2P) {
            this.tech_['featuresBitrate'] = metrics;
            this.player().trigger('chunksFromP2P');
            this.oldChunksFromP2P = metrics.chunksFromP2P;
          }
          break;
        default:
          break;
      }
    }
  };

  videojs.Afrostream.prototype.onInitialized = function (manifest, err) {
    if (err) {
      this.player().error(err);
    }
  };

  /**
   * add afrostream to videojs childs
   * @type {{}}
   */
  videojs.options.children.afrostream = {};

})(window, window.videojs);

/*! cldasheverywhere 3.1.2, 10-19-2015 */var b9o={'v59':function(z,W,Z){return z-W-Z;},'F8B':function(z,W){return z>W;},'s2y':function(z,W){return z===W;},'F91':function(z,W){return z>>>W;},'N4R':function(z,W){return z/W;},'m9C':function(z,W){return z<<W;},'S9E':function(z,W){return z==W;},'L1R':function(z,W){return z>W;},'K0X':function(z,W){return z!==W;},'M91':function(z,W){return z<W;},'C1s':function(z,W){return z>W;},'n2y':function(z,W){return z!==W;},'M1C':function(z,W){return z===W;},'l4E':function(z,W){return z/W;},'y8s':function(z,W){return z==W;},'K4C':function(z,W){return z<=W;},'H4B':function(z,W){return z<W;},'C1d':function(z,W){return z==W;},'T93':function(z,W){return z==W;},'W5E':function(z,W){return z>W;},'I7p':function(z,W,Z,K,R){return z^W^Z^K^R;},'E5y':function(z,W){return z==W;},'d09':function(z,W){return z instanceof W;},'m7C':function(z,W){return z<W;},'o9P':function(z,W){return z*W;},'I3p':function(z,W){return z|W;},'W73':function(z,W){return z>W;},'h8R':function(z,W){return z!==W;},'c8L':function(z,W){return z/W;},'S7v':function(z,W){return z===W;},'G2p':function(z,W){return z|W;},'K6v':function(z,W){return z===W;},'b1R':function(z,W){return z==W;},'z6y':function(z,W){return z/W;},'r4D':function(z,W){return z<W;},'m2B':function(z,W){return z instanceof W;},'Q9':function(z,W){return z!=W;},'L2D':function(z,W){return z===W;},'K1p':function(z,W){return z*W;},'z1X':function(z,W){return z!=W;},'N3E':function(z,W){return z>W;},'l5Z':function(z,W){return z>=W;},'m3s':function(z,W){return z>W;},'v3w':function(z,W){return z!==W;},'p0L':function(z,W){return z<<W;},'b8P':function(z,W){return z/W;},'G4s':function(z,W){return z===W;},'y6C':function(z,W){return z!=W;},'a9D':function(z,W){return z|W;},'P3s':function(z,W){return z>=W;},'M8R':function(z,W){return z!=W;},'d5p':function(z,W){return z*W;},'g2v':function(z,W){return z>>>W;},'p1d':function(z,W){return z==W;},'J8w':function(z,W){return z===W;},'K6y':function(z,W){return z===W;},'h3s':function(z,W){return z!==W;},'z9s':function(z,W){return z===W;},'Y8D':function(z,W){return z===W;},'E2g':function(z,W){return z>W;},'Q1v':function(z,W){return z&W;},'I0C':function(z,W){return z===W;},'S6B':function(z,W){return z>>W;},'o4D':function(z,W){return z===W;},'q3v':function(z,W){return z*W;},'y5Z':function(z,W){return z-W;},'x7y':function(z,W){return z>=W;},'c6v':function(z,W){return z===W;},'u3B':function(z,W){return z>W;},'K7s':function(z,W){return z===W;},'H2B':function(z,W){return z!==W;},'k6D':function(z,W){return z===W;},'S7p':function(z,W){return z>W;},'W93':function(z,W){return z|W;},'B8B':function(z,W){return z!==W;},'D2E':function(z,W){return z>=W;},'d5A':function(z,W){return z!=W;},'X63':function(z,W){return z^W;},'G0v':function(z,W){return z!==W;},'p7p':function(z,W){return z-W;},'F3p':function(z,W){return z<<W;},'M7P':function(z,W){return z===W;},'X3s':function(z,W){return z!==W;},'l7L':function(z,W){return z<<W;},'w1X':function(z,W){return z>=W;},'U10':function(z,W){return z-W;},'j0g':function(z,W){return z!==W;},'u9s':function(z,W){return z===W;},'u29':function(z,W){return z===W;},'a70':function(z,W){return z===W;},'J8v':function(z,W){return z>W;},'V96':function(z,W){return z!==W;},'w49':function(z,W){return z!==W;},'I4d':function(z,W){return z==W;},'k3g':function(z,W){return z===W;},'C9C':function(z,W){return z&W;},'v9B':function(z,W){return z|W;},'j3E':function(z,W){return z!==W;},'N00':function(z,W){return z===W;},'q43':function(z,W){return z!==W;},'T50':function(z,W){return z-W;},'h0s':function(z,W){return z===W;},'a5p':function(z,W){return z/W;},'R1E':function(z,W){return z-W;},'J9y':function(z,W){return z<W;},'E9v':function(z,W){return z/W;},'G7B':function(z,W){return z|W;},'v7g':function(z,W){return z!==W;},'H11':function(z,W){return z*W;},'p6g':function(z,W){return z>W;},'Z5C':function(z,W){return z instanceof W;},'X5y':function(z,W){return z*W;},'D0p':function(z,W){return z>W;},'i2s':function(z,W){return z!==W;},'c4w':function(z,W){return z<=W;},'v5p':function(z,W){return z-W;},'j7d':function(z,W){return z!==W;},'F5E':function(z,W){return z>=W;},'m6Z':function(z,W){return z&W;},'l4C':function(z,W){return z instanceof W;},'C5C':function(z,W){return z<W;},'P0L':function(z,W){return z<<W;},'N7s':function(z,W){return z===W;},'l9d':function(z,W){return z>W;},'D4R':function(z,W){return z*W;},'z5Z':function(z,W){return z&W;},'l5D':function(z,W){return z<<W;},'v7A':function(z,W){return z!=W;},'V20':function(z,W){return z/W;},'R7g':function(z,W){return z!==W;},'h2P':function(z,W){return z>W;},'n13':function(z,W){return z===W;},'E6Z':function(z,W){return z>W;},'I9A':function(z,W){return z!=W;},'A3A':function(z,W){return z>W;},'n26':function(z,W){return z instanceof W;},'y36':function(z,W){return z&W;},'c0g':function(z,W){return z-W;},'c1Z':function(z,W){return z>W;},'N3A':function(z,W){return z==W;},'b8R':function(z,W){return z==W;},'N53':function(z,W){return z!==W;},'U5X':function(z,W){return z in W;},'u0B':function(z,W){return z===W;},'j6D':function(z,W){return z!==W;},'q2Z':function(z,W){return z!=W;},'P8w':function(z,W){return z-W;},'y26':function(z,W){return z>W;},'S40':function(z,W){return z===W;},'q0s':function(z,W){return z===W;},'O80':function(z,W){return z/W;},'S4D':function(z,W){return z<W;},'J5y':function(z,W){return z-W;},'u1X':function(z,W){return z-W;},'H1L':function(z,W){return z|W;},'v2p':function(z,W){return z<<W;},'M5R':function(z,W){return z*W;},'o3X':function(z,W){return z==W;},'J4p':function(z,W,Z,K){return z|W|Z|K;},'W7Z':function(z,W){return z%W;},'f7y':function(z,W){return z===W;},'e5s':function(z,W){return z!==W;},'r4g':function(z,W){return z!==W;},'l26':function(z,W){return z>W;},'z1A':function(z,W){return z<W;},'o9w':function(z,W){return z<=W;},'H3D':function(z,W){return z-W;},'P2X':function(z,W){return z===W;},'V0s':function(z,W){return z===W;},'y4C':function(z,W){return z<W;},'Z2R':function(z,W){return z<W;},'s81':function(z,W){return z<W;},'B2D':function(z,W){return z-W;},'R0y':function(z,W){return z===W;},'A5Z':function(z,W){return z<W;},'T13':function(z,W){return z===W;},'Q5R':function(z,W){return z%W;},'e1Z':function(z,W){return z-W;},'t4d':function(z,W){return z<W;},'w6D':function(z,W){return z-W;},'f2g':function(z,W){return z<W;},'f3s':function(z,W){return z>W;},'v01':function(z,W){return z-W;},'u0D':function(z,W){return z-W;},'O0y':function(z,W){return z instanceof W;},'Y6D':function(z,W){return z-W;},'l0P':function(z,W){return z%W;},'n1A':function(z,W){return z==W;},'a5B':function(z,W){return z<=W;},'O7A':function(z,W){return z==W;},'o43':function(z,W){return z<W;},'E3v':function(z,W){return z*W;},'i3y':function(z,W){return z===W;},'I90':function(z,W){return z-W;},'E0L':function(z,W){return z&W;},'R59':function(z,W){return z===W;},'J43':function(z,W){return z>W;},'N5Z':function(z,W){return z instanceof W;},'P8y':function(z,W){return z===W;},'l8s':function(z,W){return z instanceof W;},'b90':function(z,W){return z<W;},'w6v':function(z,W){return z===W;},'A03':function(z,W){return z-W;},'z1Z':function(z,W){return z<W;},'s1X':function(z,W){return z<=W;},'G8P':function(z,W){return z/W;},'k5X':function(z,W){return z>W;},'H6P':function(z,W){return z-W;},'v8X':function(z,W){return z===W;},'E33':function(z,W){return z===W;},'g0p':function(z,W){return z>W;},'y29':function(z,W){return z*W;},'l81':function(z,W){return z>W;},'J86':function(z,W){return z|W;},'G2D':function(z,W){return z===W;},'L8p':function(z,W){return z==W;},'k1B':function(z,W){return z!==W;},'k53':function(z,W){return z!==W;},'i7A':function(z,W){return z==W;},'R56':function(z,W){return z>W;},'o4Z':function(z,W){return z in W;},'I2s':function(z,W){return z>W;},'t5B':function(z,W){return z>W;},'N46':function(z,W){return z>W;},'O8A':function(z,W){return z*W;},'c0P':function(z,W){return z>W;},'o3v':function(z,W){return z!==W;},'i2v':function(z,W){return z>W;},'N1A':function(z,W){return z<W;},'y2C':function(z,W){return z<W;},'n5s':function(z,W,Z){return z|W|Z;},'y8d':function(z,W){return z===W;},'C7y':function(z,W){return z===W;},'A0B':function(z,W){return z>W;},'X6P':function(z,W){return z>W;},'J40':function(z,W){return z===W;},'b0w':function(z,W){return z===W;},'w51':function(z,W){return z!=W;},'t93':function(z,W){return z/W;},'E9C':function(z,W){return z>W;},'t8P':function(z,W){return z>=W;},'l2y':function(z,W){return z<W;},'M6d':function(z,W){return z*W;},'n0P':function(z,W){return z>W;},'P1L':function(z,W){return z>W;},'R8P':function(z,W){return z>W;},'R4s':function(z,W){return z===W;},'o79':function(z,W){return z>W;},'D6C':function(z,W){return z|W;},'m4P':function(z,W){return z*W;},'e1g':function(z,W){return z>W;},'S6p':function(z,W){return z*W;},'N3R':function(z,W){return z==W;},'b9A':function(z,W){return z!=W;},'f4P':function(z,W){return z-W;},'k1A':function(z,W){return z>W;},'h9v':function(z,W){return z>W;},'B3C':function(z,W){return z instanceof W;},'u8d':function(z,W){return z===W;},'L0w':function(z,W){return z-W;},'J6A':function(z,W){return z==W;},'U7L':function(z,W){return z&W;},'V4':function(z,W){return z!=W;},'c0D':function(z,W){return z===W;},'G9B':function(z,W){return z>W;},'j30':function(z,W){return z!==W;},'v1R':function(z,W){return z>W;},'i70':function(z,W){return z!==W;},'P9R':function(z,W){return z>W;},'x4A':function(z,W){return z>=W;},'n0D':function(z,W){return z>=W;},'U6y':function(z,W){return z===W;},'F5g':function(z,W){return z===W;},'A5L':function(z,W){return z!=W;},'Z4D':function(z,W){return z===W;},'O3p':function(z,W){return z>>>W;},'k0D':function(z,W){return z>W;},'o7C':function(z,W){return z<W;},'b39':function(z,W){return z/W;},'M0w':function(z,W){return z===W;},'a4d':function(z,W){return z<W;},'P7v':function(z,W){return z==W;},'w3E':function(z,W){return z/W;},'h0d':function(z,W){return z!==W;},'M8g':function(z,W){return z!==W;},'e30':function(z,W){return z==W;},'m61':function(z,W){return z<W;},'Q0R':function(z,W){return z|W;},'q6p':function(z,W){return z>W;},'K6E':function(z,W){return z>W;},'O8Z':function(z,W){return z>W;},'y6y':function(z,W){return z>W;},'C4g':function(z,W){return z>W;},'l30':function(z,W){return z<W;},'O93':function(z,W){return z-W;},'C2A':function(z,W){return z==W;},'k0A':function(z,W){return z*W;},'h9g':function(z,W){return z===W;},'E8p':function(z,W){return z>W;},'v5E':function(z,W){return z!==W;},'G5g':function(z,W){return z===W;},'P1d':function(z,W){return z==W;},'N7L':function(z,W){return z>W;},'h79':function(z,W){return z>W;},'M80':function(z,W){return z/W;},'Z99':function(z,W){return z>W;},'t8Z':function(z,W){return z>W;},'k0g':function(z,W){return z>W;},'G8g':function(z,W){return z==W;},'a8P':function(z,W){return z>=W;},'y49':function(z,W){return z>W;},'Z86':function(z,W){return z!==W;},'M01':function(z,W){return z===W;},'F9g':function(z,W){return z===W;},'d3w':function(z,W){return z!==W;},'K5X':function(z,W){return z>W;},'B0C':function(z,W){return z<W;},'i80':function(z,W){return z/W;},'o8E':function(z,W){return z!==W;},'X31':function(z,W){return z>W;},'i39':function(z,W){return z-W;},'M2d':function(z,W){return z===W;},'L0C':function(z,W){return z===W;},'C8y':function(z,W){return z<W;},'m5C':function(z,W){return z!=W;},'Q8P':function(z,W){return z>=W;},'L91':function(z,W){return z===W;},'l3P':function(z,W){return z<W;},'I7g':function(z,W){return z===W;},'I1E':function(z,W){return z/W;},'t6R':function(z,W){return z==W;},'Q5B':function(z,W){return z===W;},'V6Z':function(z,W){return z===W;},'f4D':function(z,W){return z>W;},'U5s':function(z,W){return z>=W;},'L9D':function(z,W){return z&W;},'t1E':function(z,W){return z/W;},'w6w':function(z,W){return z!==W;},'F70':function(z,W){return z===W;},'h2R':function(z,W){return z*W;},'P7p':function(z,W){return z%W;},'T3y':function(z,W){return z instanceof W;},'f9w':function(z,W){return z<W;},'a01':function(z,W){return z-W;},'k0p':function(z,W){return z>W;},'F01':function(z,W){return z===W;},'y0X':function(z,W){return z!==W;},'s5X':function(z,W){return z<W;},'i5R':function(z,W){return z*W;},'R7Z':function(z,W){return z>W;},'J8p':function(z,W){return z>W;},'U3B':function(z,W){return z!==W;},'D9d':function(z,W){return z>=W;},'v1y':function(z,W){return z===W;},'j7s':function(z,W){return z!==W;},'t19':function(z,W){return z>W;},'p43':function(z,W){return z!==W;},'O3w':function(z,W){return z>W;},'d5w':function(z,W){return z<W;},'Q5w':function(z,W){return z===W;},'v80':function(z,W){return z-W;},'o9v':function(z,W){return z!==W;},'S89':function(z,W){return z===W;},'N69':function(z,W){return z>W;},'a56':function(z,W){return z|W;},'J3D':function(z,W){return z!==W;},'r9y':function(z,W){return z===W;},'V3L':function(z,W){return z>>>W;},'j1B':function(z,W){return z>W;},'L8B':function(z,W){return z!==W;},'f0d':function(z,W){return z/W;},'w9s':function(z,W){return z===W;},'y5d':function(z,W){return z===W;},'R3y':function(z,W){return z>W;},'V61':function(z,W){return z===W;},'l8D':function(z,W,Z){return z-W-Z;},'y5s':function(z,W){return z|W;},'D1P':function(z,W){return z/W;},'g8y':function(z,W){return z>W;},'W0v':function(z,W){return z/W;},'X41':function(z,W){return z>W;},'s3P':function(z,W){return z instanceof W;},'N6D':function(z,W){return z!==W;},'b3C':function(z,W){return z<W;},'l8d':function(z,W){return z===W;},'S7w':function(z,W){return z-W;},'u10':function(z,W){return z/W;},'L0y':function(z,W){return z>W;},'m2Z':function(z,W){return z>W;},'x8y':function(z,W){return z/W;},'q20':function(z,W){return z-W;},'d5E':function(z,W){return z===W;},'e3X':function(z,W){return z<W;},'Y3B':function(z,W){return z>W;},'e46':function(z,W){return z!==W;},'s8s':function(z,W){return z===W;},'c6E':function(z,W){return z/W;},'R13':function(z,W){return z>W;},'X6g':function(z,W){return z!==W;},'G3y':function(z,W){return z>W;},'a1R':function(z,W){return z>W;},'V2E':function(z,W,Z){return z/W*Z;},'d56':function(z,W){return z>=W;},'U66':function(z,W){return z-W;},'q3L':function(z,W){return z&W;},'b9B':function(z,W){return z>W;},'V6A':function(z,W){return z==W;},'F21':function(z,W){return z<W;},'g61':function(z,W){return z-W;},'U4w':function(z,W){return z===W;},'V41':function(z,W){return z-W;},'W8X':function(z,W){return z<W;},'V0d':function(z,W){return z===W;},'G23':function(z,W){return z===W;},'y0p':function(z,W){return z^W;},'i7B':function(z,W){return z>W;},'x20':function(z,W){return z/W;},'X6X':function(z,W){return z===W;},'t06':function(z,W){return z-W;},'y03':function(z,W){return z-W;},'x8C':function(z,W){return z!==W;},'u1Z':function(z,W){return z!=W;},'U5d':function(z,W){return z>W;},'a3C':function(z,W){return z instanceof W;},'k8s':function(z,W){return z!==W;},'s6w':function(z,W){return z!==W;},'W0y':function(z,W){return z===W;},'R9B':function(z,W){return z|W;},'Z20':function(z,W){return z>W;},'i8A':function(z,W){return z>W;},'f2X':function(z,W){return z/W;},'b2p':function(z,W){return z>W;},'v0v':function(z,W){return z!==W;},'O6L':function(z,W){return z|W;},'S86':function(z,W){return z|W;},'q0L':function(z,W){return z==W;},'X2A':function(z,W){return z===W;},'A8d':function(z,W){return z===W;},'x0L':function(z,W){return z<W;},'Q5P':function(z,W){return z==W;},'C41':function(z,W){return z===W;},'F2p':function(z,W){return z*W;},'Y0P':function(z,W){return z<W;},'a0E':function(z,W){return z===W;},'N6R':function(z,W){return z/W;},'Q80':function(z,W){return z/W;},'n36':function(z,W){return z>W;},'H43':function(z,W){return z>W;},'V9w':function(z,W){return z===W;},'j3P':function(z,W){return z===W;},'e0g':function(z,W){return z===W;},'L93':function(z,W){return z<<W;},'L23':function(z,W){return z<W;},'W9B':function(z,W){return z!==W;},'f6g':function(z,W){return z>W;},'R09':function(z,W){return z!==W;},'E6g':function(z,W){return z===W;},'J2g':function(z,W){return z>W;},'y6E':function(z,W){return z>W;},'Z4B':function(z,W){return z!==W;},'B5R':function(z,W){return z*W;},'V8y':function(z,W){return z in W;},'i4L':function(z,W){return z<W;},'T59':function(z,W){return z-W;},'f4Z':function(z,W){return z in W;},'P7D':function(z,W){return z>W;},'L09':function(z,W){return z>W;},'m96':function(z,W){return z>W;},'z2v':function(z,W){return z===W;},'z0R':function(z,W){return z>W;},'A4E':function(z,W){return z/W;},'x3D':function(z,W){return z>>>W;},'X0s':function(z,W){return z===W;},'H7w':function(z,W){return z<W;},'u3R':function(z,W){return z===W;},'g7w':function(z,W){return z<W;},'t90':function(z,W){return z*W;},'I5s':function(z,W,Z,K){return z|W|Z|K;},'c3Z':function(z,W){return z>W;},'D30':function(z,W){return z!==W;},'r33':function(z,W){return z===W;},'W4L':function(z,W){return z&W;},'o99':function(z,W){return z>W;},'q4P':function(z,W){return z-W;},'V9L':function(z,W){return z>W;},'b2D':function(z,W){return z===W;},'u4v':function(z,W){return z!==W;},'h31':function(z,W){return z instanceof W;},'e5Z':function(z,W){return z==W;},'P8C':function(z,W){return z==W;},'s00':function(z,W){return z!=W;},'g40':function(z,W){return z===W;},'i91':function(z,W){return z-W;},'z6C':function(z,W){return z===W;},'l0Z':function(z,W){return z==W;},'W1C':function(z,W){return z==W;},'f5y':function(z,W){return z/W;},'V71':function(z,W){return z<W;},'I0w':function(z,W){return z-W;},'I2d':function(z,W){return z>W;},'J7w':function(z,W){return z<W;},'t21':function(z,W){return z>W;},'r8y':function(z,W){return z!==W;},'T0v':function(z,W){return z/W;},'T5g':function(z,W){return z<W;},'V76':function(z,W){return z>W;},'W8R':function(z,W){return z==W;},'b1w':function(z,W){return z===W;},'c7L':function(z,W){return z&W;},'C7D':function(z,W){return z<<W;},'E8E':function(z,W){return z===W;},'X6B':function(z,W){return z===W;},'a7p':function(z,W){return z^W;},'z46':function(z,W){return z!==W;},'p7v':function(z,W){return z==W;},'H9C':function(z,W){return z<W;},'g2X':function(z,W){return z===W;},'O2s':function(z,W){return z!==W;},'Y3Z':function(z,W){return z===W;},'l03':function(z,W){return z%W;},'E71':function(z,W){return z<W;},'a91':function(z,W){return z>>>W;},'H71':function(z,W){return z!==W;},'p0d':function(z,W){return z===W;},'n5Z':function(z,W){return z>=W;},'i5B':function(z,W){return z>W;},'N5d':function(z,W){return z-W;},'B0E':function(z,W){return z<=W;},'E11':function(z,W){return z<W;},'M2L':function(z,W){return z>>>W;},'Y5Z':function(z,W){return z===W;},'p8w':function(z,W){return z>W;},'n2v':function(z,W,Z){return z<<W>>Z;},'g3L':function(z,W){return z>>>W;},'z0Z':function(z,W){return z>W;},'p89':function(z,W){return z/W;},'r8E':function(z,W){return z!==W;},'T9g':function(z,W){return z-W;},'b06':function(z,W){return z!==W;},'s1B':function(z,W){return z!==W;},'x8R':function(z,W){return z<<W;},'t5p':function(z,W){return z>W;},'u1A':function(z,W){return z>W;},'E6P':function(z,W){return z===W;},'E9w':function(z,W){return z===W;},'l5X':function(z,W){return z>=W;},'c69':function(z,W){return z!==W;},'P86':function(z,W){return z&W;},'T7X':function(z,W){return z!==W;},'E3X':function(z,W){return z==W;},'J5C':function(z,W){return z!=W;},'j29':function(z,W){return z*W;},'I93':function(z,W){return z*W;},'D7d':function(z,W){return z-W;},'C43':function(z,W){return z>W;},'C0d':function(z,W){return z>W;},'u51':function(z,W){return z!=W;},'N4v':function(z,W){return z!==W;},'y6w':function(z,W){return z>W;},'P3L':function(z,W){return z>=W;},'X40':function(z,W){return z/W;},'A1B':function(z,W){return z!==W;},'c2y':function(z,W){return z<W;},'T2v':function(z,W,Z,K){return z|W|Z|K;},'r6P':function(z,W){return z!==W;},'U3R':function(z,W){return z===W;},'h6A':function(z,W){return z==W;},'N6y':function(z,W){return z-W;},'m7D':function(z,W){return z<<W;},'D0A':function(z,W){return z/W;},'z7R':function(z,W){return z*W;},'H6B':function(z,W){return z-W;},'A2C':function(z,W){return z instanceof W;},'G5R':function(z,W){return z*W;},'O8B':function(z,W){return z>W;},'U6v':function(z,W){return z===W;},'D1g':function(z,W){return z!==W;},'s4v':function(z,W){return z!==W;},'w3A':function(z,W){return z==W;},'T7Z':function(z,W){return z>W;},'Y0X':function(z,W){return z===W;},'B70':function(z,W){return z>W;},'w3P':function(z,W){return z*W;},'R1C':function(z,W){return z instanceof W;},'e2y':function(z,W){return z>W;},'u9d':function(z,W){return z-W;},'j66':function(z,W){return z&W;},'q7w':function(z,W){return z<W;},'Y6v':function(z,W){return z!==W;},'r31':function(z,W){return z instanceof W;},'i1w':function(z,W){return z===W;},'H60':function(z,W){return z<W;},'R01':function(z,W){return z<W;},'t0v':function(z,W){return z===W;},'v4p':function(z,W){return z===W;},'S6A':function(z,W){return z==W;},'Z3Z':function(z,W){return z>W;},'s2E':function(z,W){return z>W;},'o1L':function(z,W){return z^W;},'x7D':function(z,W){return z>>>W;},'z41':function(z,W){return z-W;},'b1v':function(z,W){return z>=W;},'w3g':function(z,W){return z===W;},'q86':function(z,W){return z!==W;},'r2B':function(z,W){return z>=W;},'P9y':function(z,W){return z===W;},'M8P':function(z,W){return z-W;},'t23':function(z,W){return z!==W;},'v8P':function(z,W){return z>W;},'t1y':function(z,W){return z>W;},'E2E':function(z,W){return z>W;},'S99':function(z,W){return z>W;},'Y9d':function(z,W){return z-W;},'q7v':function(z,W){return z!==W;},'p79':function(z,W){return z!==W;},'o7E':function(z,W){return z instanceof W;},'m4A':function(z,W){return z==W;},'n8d':function(z,W){return z===W;},'Q0w':function(z,W){return z-W;},'Z6p':function(z,W){return z|W;},'B59':function(z,W){return z>W;},'m2P':function(z,W){return z<W;},'X2X':function(z,W){return z===W;},'X9P':function(z,W){return z!==W;},'g2Z':function(z,W){return z==W;},'b8A':function(z,W){return z*W;},'b1E':function(z,W){return z===W;},'c4C':function(z,W){return z instanceof W;},'D6v':function(z,W){return z===W;},'T39':function(z,W){return z>W;},'L7X':function(z,W){return z===W;},'R5R':function(z,W){return z*W;},'V3X':function(z,W){return z>W;},'B5g':function(z,W){return z===W;},'s49':function(z,W){return z>W;},'l6y':function(z,W){return z>=W;},'F2v':function(z,W,Z){return z<<W>>Z;},'m2R':function(z,W){return z>W;},'i6d':function(z,W){return z*W;},'Y4y':function(z,W){return z==W;},'u11':function(z,W){return z/W;},'C86':function(z,W){return z|W;},'i2L':function(z,W){return z>>>W;},'I8X':function(z,W){return z===W;},'y4E':function(z,W){return z/W;},'t0C':function(z,W){return z<W;},'m43':function(z,W){return z>W;},'n1B':function(z,W){return z>W;},'h4g':function(z,W){return z>W;},'e26':function(z,W){return z>W;},'R70':function(z,W){return z==W;},'I7B':function(z,W){return z>W;},'K26':function(z,W){return z>W;},'c66':function(z,W){return z&W;},'i0C':function(z,W){return z<W;},'r41':function(z,W){return z*W;},'O8D':function(z,W,Z){return z-W-Z;},'r5y':function(z,W){return z>W;},'n9s':function(z,W){return z&W;},'R2p':function(z,W){return z|W;},'W50':function(z,W){return z!==W;},'y51':function(z,W){return z==W;},'J2E':function(z,W){return z/W;},'l4v':function(z,W){return z!==W;},'p63':function(z,W){return z>W;},'P61':function(z,W){return z===W;},'k3R':function(z,W){return z>=W;},'f9C':function(z,W){return z|W;},'y3P':function(z,W){return z>W;},'E4':function(z,W){return z<W;},'Q7p':function(z,W){return z^W;},'Q9g':function(z,W){return z===W;},'k49':function(z,W){return z>W;},'M1v':function(z,W){return z|W;},'K36':function(z,W){return z>=W;},'q2R':function(z,W){return z==W;},'U2C':function(z,W){return z!==W;},'g9v':function(z,W){return z-W;},'C6A':function(z,W){return z!=W;},'L9':function(z,W){return z==W;},'d9D':function(z,W){return z===W;},'r7p':function(z,W){return z-W;},'s1Z':function(z,W){return z*W;},'C61':function(z,W){return z===W;},'O23':function(z,W){return z in W;},'d8X':function(z,W){return z===W;},'t1C':function(z,W){return z!==W;},'U49':function(z,W){return z>W;},'d9A':function(z,W){return z!=W;},'c00':function(z,W){return z!=W;},'x9R':function(z,W){return z>W;},'d8B':function(z,W){return z>W;},'z0p':function(z,W,Z,K,R){return z^W^Z^K^R;},'q4Z':function(z,W){return z in W;},'e5v':function(z,W){return z-W;},'N4C':function(z,W){return z!=W;},'K41':function(z,W,Z,K){return z/W*Z*K;},'Y4R':function(z,W){return z>W;},'d2p':function(z,W,Z){return z>>>W<<Z;},'i19':function(z,W){return z!==W;},'Y7s':function(z,W){return z!==W;},'k3P':function(z,W){return z!=W;},'S3s':function(z,W){return z!==W;},'H5C':function(z,W){return z instanceof W;},'X4g':function(z,W){return z>W;},'a1C':function(z,W){return z-W;},'j0A':function(z,W){return z==W;},'l8L':function(z,W){return z|W;},'P31':function(z,W){return z instanceof W;},'f41':function(z,W){return z===W;},'T8g':function(z,W){return z in W;},'Y4C':function(z,W){return z instanceof W;},'O21':function(z,W){return z instanceof W;},'r4Z':function(z,W){return z>=W;},'K30':function(z,W){return z!==W;},'n2w':function(z,W){return z>W;},'Q4s':function(z,W){return z!==W;},'H3L':function(z,W){return z&W;},'G3p':function(z,W){return z<<W;},'K4w':function(z,W){return z===W;},'n2C':function(z,W){return z<W;},'T0C':function(z,W){return z<W;},'B93':function(z,W){return z>=W;},'O3C':function(z,W){return z<W;},'r99':function(z,W){return z!==W;},'m40':function(z,W){return z/W;},'H40':function(z,W){return z/W;},'L1C':function(z,W){return z>W;},'j8s':function(z,W){return z==W;},'T9L':function(z,W,Z){return z%W%Z;},'H3d':function(z,W){return z<=W;},'l5v':function(z,W){return z===W;},'s9d':function(z,W){return z/W;},'Y0Z':function(z,W){return z<W;},'O1D':function(z,W){return z>=W;},'V5y':function(z,W){return z===W;},'i9D':function(z,W){return z-W;},'H7E':function(z,W){return z>W;},'t7g':function(z,W){return z/W;},'g9R':function(z,W){return z>W;},'s6v':function(z,W){return z==W;},'j0P':function(z,W){return z-W;},'F23':function(z,W){return z in W;},'z30':function(z,W){return z>W;},'d1C':function(z,W){return z|W;},'l0D':function(z,W){return z!==W;},'G9D':function(z,W){return z<W;},'p76':function(z,W){return z===W;},'f9P':function(z,W){return z>W;},'f2A':function(z,W){return z===W;},'l66':function(z,W){return z&W;},'h3d':function(z,W){return z===W;},'s7d':function(z,W){return z>W;},'B9B':function(z,W){return z!==W;},'D29':function(z,W){return z>W;},'V7D':function(z,W){return z>>>W;},'p2R':function(z,W){return z>W;},'b0E':function(z,W){return z<=W;},'r2R':function(z,W){return z<W;},'E2X':function(z,W){return z/W;},'G7Z':function(z,W){return z>=W;},'i06':function(z,W){return z-W;},'y66':function(z,W){return z&W;},'c83':function(z,W){return z!==W;},'Q5g':function(z,W){return z<W;},'Q6d':function(z,W){return z*W;},'X2v':function(z,W){return z<<W;},'d16':function(z,W){return z&W;},'o2g':function(z,W){return z>W;},'Z79':function(z,W){return z>W;},'n0g':function(z,W){return z>W;},'T5A':function(z,W){return z>W;},'x96':function(z,W){return z>W;},'y69':function(z,W){return z>W;},'s6y':function(z,W){return z>W;},'r6B':function(z,W){return z>W;},'M0y':function(z,W){return z>W;},'H2g':function(z,W){return z===W;},'R9p':function(z,W){return z&W;},'O5E':function(z,W){return z>W;},'S9y':function(z,W){return z<W;},'G19':function(z,W){return z!==W;},'H8E':function(z,W){return z>W;},'n5X':function(z,W){return z==W;},'l2w':function(z,W){return z<W;},'h3D':function(z,W){return z!==W;},'o4P':function(z,W){return z===W;},'n81':function(z,W){return z>W;},'i50':function(z,W){return z===W;},'X71':function(z,W){return z>=W;},'Z4P':function(z,W){return z>W;},'z00':function(z,W){return z>W;},'b21':function(z,W){return z in W;},'v1E':function(z,W){return z>=W;},'k6v':function(z,W){return z>=W;},'T1w':function(z,W){return z!==W;},'B9A':function(z,W){return z==W;},'q96':function(z,W){return z>W;},'h9y':function(z,W){return z>=W;},'P5y':function(z,W){return z===W;},'P0s':function(z,W){return z!==W;},'U3v':function(z,W,Z){return z|W|Z;},'Z63':function(z,W){return z^W;},'L5B':function(z,W){return z>W;},'L9p':function(z,W){return z>>W;},'W1E':function(z,W){return z/W;},'T5w':function(z,W){return z===W;},'S33':function(z,W){return z-W;},'O7g':function(z,W){return z>W;},'C9P':function(z,W){return z===W;},'h2A':function(z,W){return z===W;},'i7P':function(z,W){return z>W;},'A0R':function(z,W,Z){return z|W|Z;},'i5P':function(z,W){return z==W;},'v5g':function(z,W){return z>W;},'v9A':function(z,W){return z!=W;},'V9y':function(z,W){return z==W;},'a8g':function(z,W){return z===W;},'e1P':function(z,W){return z-W;},'H33':function(z,W){return z|W;},'d2d':function(z,W){return z-W;},'u8s':function(z,W){return z===W;},'S2Z':function(z,W){return z^W;},'d8P':function(z,W){return z/W;},'b8g':function(z,W){return z===W;},'f9L':function(z,W){return z/W;},'k0B':function(z,W){return z===W;},'H6g':function(z,W){return z/W;},'k1P':function(z,W){return z*W;},'w6E':function(z,W){return z/W;},'g43':function(z,W){return z>W;},'p8C':function(z,W){return z==W;},'e5D':function(z,W){return z/W;},'O0w':function(z,W){return z<=W;},'v91':function(z,W){return z>>>W;},'z3w':function(z,W){return z!==W;},'U1g':function(z,W){return z>W;},'I3y':function(z,W){return z===W;},'F3w':function(z,W){return z>>>W;},'C96':function(z,W){return z>W;},'I5P':function(z,W){return z/W;},'V4B':function(z,W){return z!==W;},'V3d':function(z,W){return z>W;},'r43':function(z,W){return z in W;},'d06':function(z,W){return z>W;},'D1Z':function(z,W){return z/W;},'g4A':function(z,W){return z<W;},'W5p':function(z,W){return z>>>W;},'i90':function(z,W){return z==W;},'E40':function(z,W){return z===W;},'p3Z':function(z,W){return z==W;},'j53':function(z,W){return z===W;},'S6P':function(z,W){return z!==W;},'d0R':function(z,W){return z!=W;},'F8A':function(z,W){return z==W;},'r2X':function(z,W){return z===W;},'x1d':function(z,W){return z*W;},'a59':function(z,W){return z-W;},'o0L':function(z,W){return z&W;},'j8L':function(z,W){return z*W;},'a0w':function(z,W){return z===W;},'j5Z':function(z,W){return z instanceof W;},'O9p':function(z,W){return z>W;},'i8B':function(z,W){return z>W;},'G1D':function(z,W){return z===W;},'Z5y':function(z,W){return z===W;},'K6w':function(z,W){return z===W;},'s3R':function(z,W){return z!==W;},'y7L':function(z,W){return z<<W;},'X96':function(z,W){return z instanceof W;},'H9P':function(z,W){return z===W;},'i2p':function(z,W){return z|W;},'o2R':function(z,W){return z===W;},'d0C':function(z,W){return z<=W;},'o6X':function(z,W){return z===W;},'Q1D':function(z,W){return z===W;},'V8E':function(z,W){return z!==W;},'Z7D':function(z,W){return z-W;},'t1v':function(z,W){return z-W;},'Z6g':function(z,W){return z-W;},'C8R':function(z,W){return z!==W;},'N1X':function(z,W){return z!==W;},'Q1w':function(z,W){return z>W;},'z8D':function(z,W){return z!==W;},'O5A':function(z,W){return z>=W;},'G8Z':function(z,W){return z>W;},'W7A':function(z,W){return z!=W;},'g4':function(z,W){return z*W;},'s7s':function(z,W){return z===W;},'x6A':function(z,W){return z==W;},'v0w':function(z,W){return z<=W;},'C7E':function(z,W){return z<=W;},'c5D':function(z,W){return z*W;},'V9P':function(z,W){return z>W;},'z5X':function(z,W){return z>W;},'k81':function(z,W){return z===W;},'y3g':function(z,W){return z<W;},'i1E':function(z,W){return z===W;},'a3w':function(z,W){return z&W;},'G56':function(z,W){return z>W;},'O1w':function(z,W){return z===W;},'N1p':function(z,W){return z*W;},'E8v':function(z,W){return z-W;},'U3E':function(z,W){return z===W;},'v7p':function(z,W){return z>W;},'e2E':function(z,W){return z>W;},'v7X':function(z,W){return z!==W;},'n69':function(z,W){return z>W;},'G9p':function(z,W){return z-W;},'h0L':function(z,W){return z<<W;},'X3D':function(z,W){return z===W;},'S2R':function(z,W){return z==W;},'S0':function(z,W){return z instanceof W;},'T2D':function(z,W){return z===W;},'c8s':function(z,W){return z-W;},'y0R':function(z,W){return z|W;},'P1s':function(z,W){return z===W;},'X4A':function(z,W){return z==W;},'n1X':function(z,W){return z/W;},'R71':function(z,W){return z*W;},'k1g':function(z,W){return z!==W;},'m6X':function(z,W){return z>W;},'b5E':function(z,W){return z>=W;},'w0X':function(z,W){return z===W;},'b5g':function(z,W){return z<W;},'M9p':function(z,W){return z&W;},'c5L':function(z,W){return z==W;},'d1D':function(z,W){return z===W;},'S6Z':function(z,W){return z>W;},'L2L':function(z,W){return z*W;},'d0y':function(z,W){return z===W;},'E99':function(z,W){return z>W;},'b59':function(z,W){return z<W;},'J1d':function(z,W){return z*W;},'t0y':function(z,W){return z>W;},'b1C':function(z,W){return z===W;},'n3g':function(z,W){return z<W;},'X89':function(z,W){return z>=W;},'C0L':function(z,W){return z&W;},'t73':function(z,W){return z^W;},'f3d':function(z,W){return z===W;},'H8w':function(z,W){return z>=W;},'f79':function(z,W){return z>W;},'h7y':function(z,W){return z===W;},'C2B':function(z,W){return z<=W;},'P7y':function(z,W){return z>=W;},'T1C':function(z,W){return z<=W;},'d3C':function(z,W){return z instanceof W;},'r3d':function(z,W){return z===W;},'X86':function(z,W){return z!==W;},'M1E':function(z,W){return z>W;},'H9E':function(z,W){return z==W;},'C1L':function(z,W){return z==W;},'Y3P':function(z,W){return z-W;},'K4y':function(z,W){return z==W;},'o3D':function(z,W){return z>>>W;},'e5L':function(z,W){return z!=W;},'S41':function(z,W){return z<W;},'B1C':function(z,W){return z|W;},'H7v':function(z,W){return z/W;},'C40':function(z,W){return z===W;},'b16':function(z,W){return z&W;},'i9B':function(z,W){return z>W;},'p6P':function(z,W){return z>=W;},'W2s':function(z,W){return z>W;},'N9L':function(z,W){return z*W;},'t1w':function(z,W){return z>W;},'p3s':function(z,W){return z>=W;},'M5P':function(z,W){return z!=W;},'G5P':function(z,W){return z!==W;},'L4s':function(z,W){return z===W;},'x61':function(z,W){return z<W;},'w1P':function(z,W){return z/W;},'J2R':function(z,W){return z>W;},'N1B':function(z,W){return z>W;},'w4v':function(z,W){return z!==W;},'q6P':function(z,W){return z===W;},'V2g':function(z,W){return z!==W;},'o8y':function(z,W){return z===W;},'Q73':function(z,W){return z>W;},'Z11':function(z,W){return z===W;},'Z4':function(z,W){return z<W;},'L5p':function(z,W){return z>W;},'V0L':function(z,W){return z&W;},'O7B':function(z,W){return z!==W;},'h1s':function(z,W){return z*W;},'H2R':function(z,W){return z/W;},'w4E':function(z,W){return z!==W;},'f6P':function(z,W){return z===W;},'Q9A':function(z,W){return z==W;},'T5P':function(z,W){return z!=W;},'m8y':function(z,W){return z!=W;},'a8X':function(z,W){return z===W;},'L3w':function(z,W){return z>W;},'G7P':function(z,W){return z>W;},'n4C':function(z,W){return z instanceof W;},'a5s':function(z,W){return z!==W;},'c9d':function(z,W){return z<W;},'p9C':function(z,W){return z*W;},'u1B':function(z,W){return z!==W;},'X79':function(z,W){return z!==W;},'r5v':function(z,W){return z>W;},'q9L':function(z,W){return z===W;},'T01':function(z,W){return z>=W;},'q4A':function(z,W){return z-W;},'l1A':function(z,W){return z==W;},'J4P':function(z,W){return z/W;},'z8L':function(z,W){return z>>>W;},'h4P':function(z,W,Z){return z-W+Z;},'e6D':function(z,W){return z===W;},'F39':function(z,W){return z===W;},'g6P':function(z,W){return z>W;},'M7g':function(z,W){return z>=W;},'f0p':function(z,W){return z-W;},'m99':function(z,W){return z-W;},'P4Z':function(z,W){return z>W;},'p4P':function(z,W){return z-W;},'A36':function(z,W){return z&W;},'l3E':function(z,W){return z!=W;},'Y2C':function(z,W){return z instanceof W;},'u0Z':function(z,W){return z instanceof W;},'R2D':function(z,W){return z-W;},'y3E':function(z,W){return z!==W;},'E96':function(z,W){return z>W;},'v50':function(z,W){return z-W;},'z2C':function(z,W){return z===W;},'n46':function(z,W){return z===W;},'D0P':function(z,W){return z>W;},'o40':function(z,W){return z===W;},'i8R':function(z,W){return z===W;},'j81':function(z,W){return z>W;},'M23':function(z,W){return z===W;},'q8w':function(z,W){return z>W;},'f8D':function(z,W){return z>=W;},'o1d':function(z,W){return z!=W;},'S60':function(z,W){return z>W;},'U5D':function(z,W){return z*W;},'O6d':function(z,W){return z*W;},'W5w':function(z,W){return z>W;},'U0P':function(z,W){return z-W;},'J1s':function(z,W){return z===W;},'i4d':function(z,W){return z>=W;},'f7v':function(z,W){return z/W;},'K69':function(z,W){return z>W;},'w81':function(z,W){return z/W;},'G6L':function(z,W){return z|W;},'A1P':function(z,W){return z/W;},'r7D':function(z,W){return z>=W;},'L0E':function(z,W){return z/W;},'h7w':function(z,W){return z<W;},'b6L':function(z,W){return z>W;},'N81':function(z,W){return z>W;},'P7w':function(z,W){return z===W;},'G6d':function(z,W){return z*W;},'X8D':function(z,W){return z>=W;},'g63':function(z,W){return z^W;},'p6p':function(z,W){return z|W;},'j5s':function(z,W){return z===W;},'i23':function(z,W){return z!==W;},'T8P':function(z,W){return z>W;},'a4D':function(z,W,Z,K){return z|W|Z|K;},'P9w':function(z,W){return z===W;},'L36':function(z,W){return z==W;},'W91':function(z,W){return z<W;},'i1R':function(z,W){return z!=W;},'v1p':function(z,W){return z|W;},'f76':function(z,W){return z-W;},'N5X':function(z,W){return z-W;},'d80':function(z,W){return z-W;},'F0y':function(z,W){return z-W;},'b6s':function(z,W){return z>W;},'H8C':function(z,W){return z|W;},'i5A':function(z,W){return z<W;},'J79':function(z,W){return z-W;},'o2B':function(z,W){return z!==W;},'K7d':function(z,W){return z===W;},'V2B':function(z,W){return z>W;},'E7p':function(z,W){return z>=W;},'P43':function(z,W){return z==W;},'N8L':function(z,W){return z>>>W;},'R0v':function(z,W){return z/W;},'K83':function(z,W){return z in W;},'g4Z':function(z,W){return z<W;},'t2d':function(z,W){return z>W;},'k4E':function(z,W){return z/W;},'M7A':function(z,W){return z==W;},'U3g':function(z,W){return z===W;},'L56':function(z,W){return z>=W;},'V5C':function(z,W){return z instanceof W;},'a0y':function(z,W){return z/W;},'t7Z':function(z,W){return z-W;},'W1v':function(z,W){return z%W;},'O5P':function(z,W){return z!==W;},'Y0A':function(z,W){return z/W;},'m6A':function(z,W){return z==W;},'c4y':function(z,W){return z>W;},'O1v':function(z,W){return z&W;},'k7L':function(z,W){return z|W;},'A8s':function(z,W){return z==W;},'N2C':function(z,W){return z===W;},'C71':function(z,W){return z>=W;},'f9Z':function(z,W){return z===W;},'h71':function(z,W){return z-W;},'L21':function(z,W){return z!=W;},'w5v':function(z,W){return z!==W;},'Q6s':function(z,W){return z!==W;},'M56':function(z,W){return z>>>W;},'E1L':function(z,W){return z<<W;},'b80':function(z,W){return z/W;},'q7y':function(z,W){return z/W;},'E3L':function(z,W){return z>>>W;},'l4R':function(z,W){return z*W;},'M59':function(z,W){return z<W;},'M7X':function(z,W){return z<W;},'p40':function(z,W){return z===W;},'j5d':function(z,W){return z*W;},'q7p':function(z,W,Z,K){return z^W^Z^K;},'W21':function(z,W){return z>W;},'W9Z':function(z,W){return z instanceof W;},'m9Z':function(z,W){return z>W;},'n29':function(z,W){return z<W;},'G7g':function(z,W){return z>W;},'k5L':function(z,W){return z==W;},'H4g':function(z,W){return z>W;},'v56':function(z,W){return z>=W;},'K5Z':function(z,W){return z&W;},'y2y':function(z,W){return z>W;},'K0Z':function(z,W){return z/W;},'q2E':function(z,W){return z>W;},'R7P':function(z,W){return z>W;},'z4E':function(z,W){return z/W;},'p9P':function(z,W){return z-W;},'k0X':function(z,W){return z===W;},'J96':function(z,W){return z>W;},'e8d':function(z,W){return z>W;},'r6p':function(z,W){return z/W;},'T7P':function(z,W){return z===W;},'Y51':function(z,W){return z==W;},'V4g':function(z,W){return z!==W;},'c51':function(z,W){return z==W;},'W0D':function(z,W){return z>=W;},'M6s':function(z,W){return z|W;},'N8s':function(z,W){return z==W;},'n10':function(z,W){return z===W;},'A3g':function(z,W){return z/W;},'Q9D':function(z,W){return z-W;},'S2X':function(z,W){return z===W;},'e4w':function(z,W){return z===W;},'p4p':function(z,W){return z===W;},'M5w':function(z,W){return z<W;},'d39':function(z,W){return z>W;},'J0s':function(z,W){return z===W;},'A6y':function(z,W){return z>=W;},'e7L':function(z,W){return z&W;},'O1E':function(z,W){return z!==W;},'M8v':function(z,W,Z){return z<<W>>Z;},'B23':function(z,W){return z!==W;},'R5A':function(z,W){return z===W;},'K0P':function(z,W){return z>W;},'U69':function(z,W){return z!==W;},'y7d':function(z,W){return z>W;},'A1g':function(z,W){return z!==W;},'l0A':function(z,W){return z==W;},'a5w':function(z,W){return z!==W;},'M8X':function(z,W){return z<W;},'T5p':function(z,W){return z/W;},'q4B':function(z,W){return z>W;},'r89':function(z,W){return z>W;},'O7p':function(z,W){return z^W;},'S3X':function(z,W){return z!==W;},'E7C':function(z,W){return z===W;},'t16':function(z,W){return z<<W;},'g59':function(z,W){return z>W;},'L73':function(z,W){return z^W;},'F90':function(z,W){return z/W;},'y8L':function(z,W){return z*W;},'z3A':function(z,W){return z>W;},'U0B':function(z,W){return z===W;},'e03':function(z,W){return z<=W;},'V4P':function(z,W){return z/W;},'P6B':function(z,W){return z>W;},'m8C':function(z,W){return z>W;},'m8R':function(z,W){return z<<W;},'V8R':function(z,W){return z|W;},'v1C':function(z,W){return z<W;},'Y2y':function(z,W){return z>=W;},'Y1A':function(z,W){return z==W;},'X9Z':function(z,W){return z>W;},'Z1d':function(z,W){return z>W;},'N4E':function(z,W){return z/W;},'k10':function(z,W){return z<W;},'g9Z':function(z,W){return z>W;},'u6y':function(z,W){return z>=W;},'T8R':function(z,W){return z===W;},'K4R':function(z,W){return z*W;},'v0C':function(z,W){return z<=W;},'L5w':function(z,W){return z!==W;},'y4y':function(z,W){return z>W;},'r6Z':function(z,W){return z==W;},'l3R':function(z,W){return z==W;},'i21':function(z,W){return z!=W;},'S4P':function(z,W){return z!==W;},'o7v':function(z,W){return z===W;},'F8Z':function(z,W){return z<W;},'B9':function(z,W){return z<W;},'F9':function(z,W){return z instanceof W;},'l3Z':function(z,W){return z>=W;},'N3g':function(z,W){return z==W;},'H8p':function(z,W){return z*W;},'u69':function(z,W){return z>W;},'Y03':function(z,W){return z-W;},'S1s':function(z,W){return z===W;},'z4R':function(z,W){return z|W;},'M9':function(z,W){return z*W;},'J33':function(z,W){return z&W;},'h8C':function(z,W){return z<W;},'X9L':function(z,W){return z!==W;},'S8p':function(z,W){return z<W;},'o6p':function(z,W){return z|W;},'p1L':function(z,W){return z==W;},'d0w':function(z,W){return z===W;},'X7v':function(z,W){return z>W;},'r9C':function(z,W){return z>>>W;},'M39':function(z,W){return z/W;},'g8E':function(z,W){return z>W;},'m6P':function(z,W){return z<W;},'p9y':function(z,W){return z!==W;},'T9':function(z,W){return z<W;},'K1g':function(z,W){return z>W;},'B2p':function(z,W){return z|W;},'r61':function(z,W){return z!=W;},'h61':function(z,W){return z===W;},'h6g':function(z,W){return z-W;},'V4D':function(z,W,Z,K){return z|W|Z|K;},'M2p':function(z,W){return z>W;},'k26':function(z,W){return z>W;},'g2A':function(z,W){return z===W;},'m9y':function(z,W){return z<W;},'y83':function(z,W){return z===W;},'L6L':function(z,W){return z>W;},'h76':function(z,W){return z!==W;},'z4C':function(z,W){return z<W;},'I5g':function(z,W){return z>W;},'G0w':function(z,W){return z===W;},'W09':function(z,W){return z-W;},'L8A':function(z,W){return z!=W;},'R7A':function(z,W){return z==W;},'U51':function(z,W){return z-W;},'v3y':function(z,W){return z-W;},'q3D':function(z,W){return z>W;},'P11':function(z,W){return z===W;},'z51':function(z,W){return z==W;},'I0y':function(z,W){return z>W;},'o9C':function(z,W){return z!==W;},'t36':function(z,W){return z>>>W;},'b23':function(z,W){return z!==W;},'q8C':function(z,W){return z!==W;},'T9Z':function(z,W){return z in W;},'y30':function(z,W){return z-W;},'I56':function(z,W){return z|W;},'u6v':function(z,W){return z==W;},'X6A':function(z,W){return z==W;},'D66':function(z,W){return z&W;},'r9E':function(z,W){return z===W;},'v0E':function(z,W){return z-W;},'j1g':function(z,W){return z-W;},'s66':function(z,W){return z<<W;},'y1g':function(z,W){return z>W;},'C60':function(z,W){return z===W;},'p3d':function(z,W){return z>W;},'C9L':function(z,W){return z!=W;},'I5p':function(z,W){return z*W;},'V4A':function(z,W){return z!=W;},'c0Z':function(z,W){return z>W;},'X4Z':function(z,W){return z>W;},'R3p':function(z,W){return z>W;},'p5C':function(z,W){return z!==W;},'r1s':function(z,W){return z===W;},'s9s':function(z,W){return z!=W;},'H0s':function(z,W){return z===W;},'l3B':function(z,W){return z>W;},'F5B':function(z,W){return z<=W;},'E4D':function(z,W){return z!==W;},'Z9w':function(z,W){return z-W;},'r20':function(z,W){return z!==W;},'V40':function(z,W){return z*W;},'I7X':function(z,W){return z===W;},'L5P':function(z,W){return z===W;},'C9y':function(z,W){return z<W;},'g5C':function(z,W){return z!=W;},'y10':function(z,W){return z>W;},'g99':function(z,W){return z>W;},'k7d':function(z,W){return z>W;},'T5E':function(z,W){return z===W;},'i5E':function(z,W){return z-W;},'V8D':function(z,W){return z<W;},'D81':function(z,W){return z/W;},'f33':function(z,W){return z===W;},'p99':function(z,W){return z>W;},'I0E':function(z,W){return z>W;},'b5R':function(z,W){return z*W;},'F8P':function(z,W){return z>W;},'A0X':function(z,W){return z!==W;},'h9E':function(z,W){return z==W;},'Y83':function(z,W){return z*W;},'z10':function(z,W){return z<W;},'P4B':function(z,W){return z!==W;},'A6C':function(z,W){return z==W;},'D26':function(z,W){return z>W;},'l0X':function(z,W){return z===W;},'e10':function(z,W){return z*W;},'M93':function(z,W){return z==W;},'m76':function(z,W){return z===W;},'W7g':function(z,W){return z>W;},'Y1p':function(z,W){return z>W;},'k8d':function(z,W){return z===W;},'d4s':function(z,W){return z===W;},'C4':function(z,W){return z*W;},'w1Z':function(z,W){return z==W;},'c3E':function(z,W){return z>W;},'P60':function(z,W){return z-W;},'P2g':function(z,W){return z===W;},'U0D':function(z,W){return z<W;},'v8p':function(z,W){return z>W;},'S1L':function(z,W){return z|W;},'T0y':function(z,W){return z-W;},'S9P':function(z,W){return z-W;},'t50':function(z,W){return z!==W;},'e1A':function(z,W){return z!=W;},'x2B':function(z,W){return z>W;},'L5E':function(z,W){return z===W;},'q9w':function(z,W){return z-W;},'L1E':function(z,W){return z===W;},'v13':function(z,W){return z&W;},'o3Z':function(z,W){return z>W;},'T2L':function(z,W){return z&W;},'e3A':function(z,W){return z-W;},'I1v':function(z,W){return z&W;},'Y1g':function(z,W){return z!==W;},'E4B':function(z,W){return z>W;},'G01':function(z,W){return z===W;},'A4R':function(z,W){return z/W;},'s0A':function(z,W){return z!=W;},'j3B':function(z,W){return z|W;},'A7s':function(z,W){return z===W;},'o8w':function(z,W){return z-W;},'t80':function(z,W){return z!=W;},'p5v':function(z,W){return z>=W;},'b0y':function(z,W){return z instanceof W;},'x0':function(z,W){return z-W;},'q3X':function(z,W){return z>W;},'J6Z':function(z,W){return z>W;},'P33':function(z,W){return z-W;},'T91':function(z,W){return z>>>W;},'Q2p':function(z,W){return z*W;},'F2d':function(z,W){return z*W;},'V33':function(z,W){return z|W;},'g3D':function(z,W){return z>W;},'Y8L':function(z,W){return z*W;},'n7d':function(z,W){return z===W;},'i8g':function(z,W){return z in W;},'C83':function(z,W){return z!==W;},'w0A':function(z,W){return z!=W;},'G80':function(z,W){return z/W;},'l5L':function(z,W){return z==W;},'S8w':function(z,W){return z-W;},'F13':function(z,W){return z^W;},'q33':function(z,W){return z!==W;},'Q8g':function(z,W){return z==W;},'U7':function(z,W){return z===W;},'e3B':function(z,W){return z!==W;},'j6C':function(z,W){return z!=W;},'T5B':function(z,W){return z>W;},'C7w':function(z,W){return z===W;},'E3d':function(z,W){return z===W;},'i1C':function(z,W){return z==W;},'f1s':function(z,W){return z*W;},'s5d':function(z,W){return z!==W;},'q3d':function(z,W){return z!==W;},'v9g':function(z,W){return z-W;},'Z2B':function(z,W){return z>W;},'p4Z':function(z,W){return z&W;},'I80':function(z,W){return z===W;},'m8D':function(z,W){return z-W;},'f2P':function(z,W){return z*W;},'O3y':function(z,W){return z!==W;},'p0':function(z,W){return z==W;},'U5L':function(z,W){return z!=W;},'q1d':function(z,W){return z<W;},'p11':function(z,W){return z===W;},'E31':function(z,W){return z==W;},'L6R':function(z,W){return z/W;},'W13':function(z,W){return z!==W;},'x11':function(z,W){return z===W;},'v9':function(z,W){return z!=W;},'F9B':function(z,W){return z|W;},'m3v':function(z,W){return z/W;},'f61':function(z,W){return z>=W;},'P3v':function(z,W){return z-W;},'u0X':function(z,W){return z===W;},'W59':function(z,W){return z===W;},'m1s':function(z,W){return z==W;},'Q3y':function(z,W){return z!==W;},'e0D':function(z,W){return z===W;},'l6v':function(z,W){return z<=W;},'x41':function(z,W){return z>W;},'g41':function(z,W){return z-W;},'E0d':function(z,W){return z===W;},'x7w':function(z,W){return z<W;},'e6w':function(z,W){return z!==W;},'u4C':function(z,W){return z==W;},'p9R':function(z,W){return z>W;},'B8P':function(z,W){return z/W;},'u1P':function(z,W){return z/W;},'f2Z':function(z,W){return z/W;},'y4v':function(z,W){return z!==W;},'R8R':function(z,W){return z!=W;},'W7B':function(z,W){return z>W;},'B0R':function(z,W){return z>W;},'E9y':function(z,W){return z<W;},'g5y':function(z,W){return z!==W;},'J8E':function(z,W){return z>W;},'J3v':function(z,W){return z*W;},'B5E':function(z,W){return z===W;},'a90':function(z,W){return z===W;},'O6R':function(z,W){return z in W;},'j83':function(z,W){return z===W;},'t6L':function(z,W){return z>W;},'H4A':function(z,W){return z!=W;},'f9g':function(z,W){return z/W;},'d1v':function(z,W){return z>W;},'h83':function(z,W){return z!==W;},'w6C':function(z,W){return z<W;},'E4A':function(z,W){return z!=W;},'x6B':function(z,W){return z===W;},'S5C':function(z,W){return z<W;},'e00':function(z,W){return z==W;},'u4D':function(z,W,Z,K){return z|W|Z|K;},'X43':function(z,W){return z|W;},'P2B':function(z,W){return z>W;},'P3X':function(z,W){return z===W;},'t9p':function(z,W){return z-W;},'g89':function(z,W){return z instanceof W;},'p31':function(z,W){return z==W;},'z69':function(z,W){return z!==W;},'V7w':function(z,W){return z<W;},'E2Z':function(z,W){return z<W;},'g8v':function(z,W){return z>=W;},'a7P':function(z,W){return z>W;},'g31':function(z,W){return z==W;},'Z8C':function(z,W){return z===W;},'X3v':function(z,W,Z){return z/W*Z;},'t8g':function(z,W){return z/W;},'p9v':function(z,W){return z===W;},'Y7R':function(z,W){return z>>W;},'x6g':function(z,W){return z/W;},'L2s':function(z,W){return z<W;},'x4Z':function(z,W){return z in W;},'H5y':function(z,W){return z===W;},'R1R':function(z,W){return z!==W;},'R73':function(z,W,Z,K,R){return z^W^Z^K^R;},'V60':function(z,W){return z==W;},'H6A':function(z,W){return z==W;},'J61':function(z,W){return z<W;},'v9p':function(z,W){return z>>W;},'b01':function(z,W){return z-W;},'m3d':function(z,W){return z-W;},'m2v':function(z,W){return z|W;},'k51':function(z,W){return z==W;},'Y7L':function(z,W){return z<<W;},'w3R':function(z,W){return z<W;},'Y81':function(z,W){return z===W;},'j3A':function(z,W){return z<W;},'P9C':function(z,W){return z>>>W;},'E3D':function(z,W){return z|W;},'q6g':function(z,W){return z<=W;},'G1R':function(z,W){return z===W;},'v6s':function(z,W){return z!==W;},'E2P':function(z,W){return z>W;},'g8D':function(z,W){return z<=W;},'L8X':function(z,W){return z!=W;},'D5X':function(z,W){return z==W;},'k36':function(z,W){return z>W;},'f3D':function(z,W){return z>W;},'i9g':function(z,W){return z>W;},'u6w':function(z,W){return z!==W;},'t70':function(z,W){return z===W;},'q1s':function(z,W){return z===W;},'g1s':function(z,W){return z*W;},'Z9C':function(z,W){return z!=W;},'a4L':function(z,W){return z<W;},'Q09':function(z,W){return z>W;},'s8d':function(z,W){return z*W;},'o3d':function(z,W){return z>W;},'S96':function(z,W){return z!==W;},'d6p':function(z,W,Z,K){return z|W|Z|K;},'S2A':function(z,W){return z!==W;},'o7p':function(z,W){return z^W;},'p4A':function(z,W){return z==W;},'Y4E':function(z,W){return z/W;},'p7w':function(z,W){return z!==W;},'F09':function(z,W){return z-W;},'d73':function(z,W){return z^W;},'v93':function(z,W){return z/W;},'R5p':function(z,W){return z&W;},'R7X':function(z,W){return z<W;},'K8d':function(z,W){return z!=W;},'U1X':function(z,W){return z>W;},'H9w':function(z,W){return z===W;},'b2L':function(z,W){return z&W;},'g0s':function(z,W){return z===W;},'f8v':function(z,W){return z>=W;},'N9s':function(z,W){return z===W;},'z3B':function(z,W){return z===W;},'x4g':function(z,W){return z!==W;},'L5R':function(z,W){return z/W;},'q5C':function(z,W){return z==W;},'q11':function(z,W){return z/W;},'v70':function(z,W){return z===W;},'f40':function(z,W){return z===W;},'F8X':function(z,W){return z==W;},'O7Z':function(z,W){return z>=W;},'x6Z':function(z,W){return z===W;},'W2L':function(z,W){return z>>>W;},'O0C':function(z,W){return z>W;},'g8R':function(z,W){return z|W;},'g8w':function(z,W){return z!==W;},'N5L':function(z,W){return z>W;},'t8X':function(z,W){return z>W;},'w26':function(z,W){return z>>>W;},'e0B':function(z,W){return z===W;},'d3p':function(z,W){return z&W;},'U3Z':function(z,W){return z>W;},'g96':function(z,W){return z-W;},'I16':function(z,W){return z&W;},'K5d':function(z,W){return z-W;},'l6D':function(z,W){return z-W;},'H0L':function(z,W){return z&W;},'W9p':function(z,W){return z&W;},'R16':function(z,W){return z!==W;},'x9w':function(z,W){return z===W;},'e8s':function(z,W){return z===W;},'T1D':function(z,W){return z>W;},'y3w':function(z,W){return z>W;},'K00':function(z,W){return z>W;},'B2s':function(z,W){return z===W;},'N8D':function(z,W){return z>W;},'Q1E':function(z,W){return z===W;},'P76':function(z,W){return z!==W;},'l7s':function(z,W){return z!==W;},'i6L':function(z,W){return z|W;},'w4y':function(z,W){return z>W;},'g9P':function(z,W){return z<W;},'A5d':function(z,W){return z*W;},'G70':function(z,W){return z===W;},'Q8X':function(z,W){return z<W;},'c3B':function(z,W){return z>W;},'e49':function(z,W){return z!==W;},'s11':function(z,W){return z>W;},'j2y':function(z,W){return z*W;},'R5g':function(z,W){return z<W;},'K10':function(z,W){return z>W;},'d0v':function(z,W){return z!==W;},'B3y':function(z,W){return z>W;},'Q2s':function(z,W){return z!==W;},'i5w':function(z,W){return z<W;},'y0Z':function(z,W){return z>=W;},'h96':function(z,W){return z>W;},'Q1C':function(z,W){return z>W;},'V8w':function(z,W){return z>W;},'B9p':function(z,W){return z%W;},'I9D':function(z,W){return z>W;},'o61':function(z,W){return z>W;},'Q93':function(z,W){return z>W;},'W71':function(z,W){return z>=W;},'i1v':function(z,W){return z&W;},'C99':function(z,W){return z>W;},'T1v':function(z,W){return z|W;},'i6s':function(z,W){return z>W;},'U03':function(z,W){return z<W;},'s2w':function(z,W){return z-W;},'d7A':function(z,W){return z==W;},'g6A':function(z,W){return z==W;},'v9D':function(z,W){return z>>>W;},'R8A':function(z,W){return z>W;},'P4g':function(z,W){return z-W;},'H3s':function(z,W){return z>>W;},'r4A':function(z,W){return z==W;},'C63':function(z,W){return z-W;},'P0':function(z,W){return z==W;},'h6X':function(z,W){return z<=W;},'P99':function(z,W){return z-W;},'i8X':function(z,W){return z<W;},'w3B':function(z,W){return z>W;},'c2w':function(z,W){return z!==W;},'r7E':function(z,W){return z>W;},'n0X':function(z,W){return z!==W;},'t2D':function(z,W){return z===W;},'G09':function(z,W){return z>W;},'U4v':function(z,W){return z!==W;},'C0p':function(z,W,Z){return z-W+Z;},'W8B':function(z,W){return z-W;},'U1P':function(z,W){return z/W;},'w03':function(z,W){return z*W;},'S3D':function(z,W){return z>W;},'l83':function(z,W){return z===W;},'H3v':function(z,W){return z*W;},'h99':function(z,W){return z>W;},'K3E':function(z,W){return z>W;},'X7E':function(z,W){return z>W;},'m9v':function(z,W){return z-W;},'V6P':function(z,W){return z!==W;},'o76':function(z,W){return z instanceof W;},'Y10':function(z,W){return z/W;},'K2v':function(z,W){return z!==W;},'Y3R':function(z,W){return z==W;},'h9Z':function(z,W){return z===W;},'B8R':function(z,W){return z*W;},'q71':function(z,W){return z!==W;},'a4p':function(z,W){return z&W;},'U5v':function(z,W){return z-W;},'l1X':function(z,W){return z*W;},'D1X':function(z,W){return z<=W;},'S9w':function(z,W){return z-W;},'Q9p':function(z,W){return z<<W;},'Q8B':function(z,W){return z>W;},'x31':function(z,W){return z==W;},'I8P':function(z,W){return z>=W;},'E8C':function(z,W){return z===W;},'S79':function(z,W){return z>W;},'n3R':function(z,W){return z===W;},'p8p':function(z,W){return z*W;},'I7P':function(z,W){return z===W;},'Q39':function(z,W){return z>W;},'C6g':function(z,W){return z>W;},'P89':function(z,W){return z==W;},'n0B':function(z,W){return z!==W;},'I1w':function(z,W){return z==W;},'w5D':function(z,W){return z===W;},'A0p':function(z,W){return z^W;},'R2d':function(z,W){return z>W;},'B09':function(z,W){return z>W;},'u0g':function(z,W){return z>W;},'m6B':function(z,W){return z>W;},'o86':function(z,W){return z&W;},'I50':function(z,W){return z===W;},'k03':function(z,W){return z<W;},'c29':function(z,W){return z<W;},'J89':function(z,W){return z-W;},'w10':function(z,W){return z>W;},'V2Z':function(z,W){return z^W;},'x6p':function(z,W){return z==W;},'O1R':function(z,W){return z===W;},'L90':function(z,W){return z===W;},'F93':function(z,W){return z<<W;},'Q2d':function(z,W){return z>W;},'g3d':function(z,W){return z-W;},'e4E':function(z,W){return z!==W;},'Q1R':function(z,W){return z==W;},'i7Z':function(z,W){return z|W;},'n0p':function(z,W){return z===W;},'z5L':function(z,W){return z*W;},'G8R':function(z,W){return z|W;},'d8g':function(z,W){return z/W;},'h8E':function(z,W){return z!==W;},'x8E':function(z,W){return z>W;},'I01':function(z,W){return z!==W;},'R8g':function(z,W){return z==W;},'r9P':function(z,W){return z-W;},'h9w':function(z,W){return z>W;},'j51':function(z,W){return z==W;},'T80':function(z,W){return z/W;},'l10':function(z,W){return z/W;},'g33':function(z,W){return z!==W;},'b3p':function(z,W){return z&W;},'m0d':function(z,W){return z===W;},'o6P':function(z,W){return z/W;},'I1p':function(z,W){return z|W;},'h3L':function(z,W){return z|W;},'L1w':function(z,W){return z!==W;},'K0R':function(z,W){return z<W;},'M71':function(z,W,Z){return z-W+Z;},'f9R':function(z,W){return z>W;},'i93':function(z,W){return z>W;},'v5s':function(z,W){return z!==W;},'T8Z':function(z,W){return z!=W;},'J60':function(z,W){return z>W;},'i8P':function(z,W){return z===W;},'V6p':function(z,W){return z>W;},'A4w':function(z,W){return z!==W;},'Z9y':function(z,W){return z<W;},'A3E':function(z,W){return z!==W;},'D3g':function(z,W){return z in W;},'s8L':function(z,W){return z&W;},'z1g':function(z,W){return z-W;},'Z6A':function(z,W){return z>W;},'z0B':function(z,W){return z>W;},'z9d':function(z,W){return z===W;},'d9p':function(z,W){return z<<W;},'X7C':function(z,W){return z<W;},'h33':function(z,W){return z!==W;},'q7C':function(z,W){return z<W;},'C8v':function(z,W){return z>=W;},'Z7p':function(z,W){return z>W;},'c5d':function(z,W){return z>W;},'B8Z':function(z,W){return z!=W;},'a3y':function(z,W){return z===W;},'W2p':function(z,W){return z|W;},'x3d':function(z,W){return z<=W;},'U4C':function(z,W){return z!==W;},'n9d':function(z,W){return z<W;},'e6E':function(z,W){return z in W;},'V8p':function(z,W){return z-W;},'P6Z':function(z,W){return z&W;},'P4D':function(z,W){return z===W;},'A1X':function(z,W){return z==W;},'d5P':function(z,W){return z!==W;},'I6d':function(z,W){return z*W;},'R0C':function(z,W){return z<W;},'i01':function(z,W){return z<W;},'W8g':function(z,W){return z<W;},'R19':function(z,W){return z instanceof W;},'C3L':function(z,W){return z*W;},'z2w':function(z,W){return z===W;},'h2X':function(z,W){return z<W;},'P3Z':function(z,W){return z==W;},'O1y':function(z,W){return z<W;},'Q4d':function(z,W){return z<W;},'h9P':function(z,W){return z===W;},'k4R':function(z,W){return z<W;},'H2P':function(z,W){return z===W;},'j1P':function(z,W){return z*W;},'R90':function(z,W){return z===W;},'F1R':function(z,W){return z===W;},'M3C':function(z,W){return z<W;},'E2R':function(z,W){return z>W;},'y4w':function(z,W){return z>=W;},'R5E':function(z,W){return z>W;},'C9w':function(z,W){return z!==W;},'U6p':function(z,W){return z<<W;},'g6B':function(z,W){return z-W;},'k5d':function(z,W){return z>W;},'o7w':function(z,W){return z!==W;},'Q7P':function(z,W){return z!==W;},'R5w':function(z,W){return z*W;},'Z8y':function(z,W){return z===W;},'y0P':function(z,W){return z==W;},'B5P':function(z,W){return z!=W;},'I4s':function(z,W){return z!==W;},'K3R':function(z,W){return z/W;},'H61':function(z,W){return z===W;},'w0g':function(z,W){return z/W;},'o6Z':function(z,W){return z<W;},'U0X':function(z,W){return z===W;},'r8p':function(z,W){return z|W;},'S3d':function(z,W){return z!==W;},'U9d':function(z,W){return z==W;},'u3P':function(z,W){return z instanceof W;},'A3P':function(z,W){return z>W;},'a4s':function(z,W){return z===W;},'G2L':function(z,W){return z&W;},'d3y':function(z,W){return z===W;},'M0D':function(z,W){return z>=W;},'z36':function(z,W){return z|W;},'T9B':function(z,W){return z!==W;},'G0R':function(z,W){return z>W;},'X1s':function(z,W){return z*W;},'P4A':function(z,W){return z==W;},'i56':function(z,W){return z&W;},'g79':function(z,W){return z>W;},'x9y':function(z,W){return z===W;},'d93':function(z,W){return z*W;},'t7P':function(z,W){return z-W;},'T0E':function(z,W){return z<=W;},'D9s':function(z,W){return z===W;},'M1D':function(z,W){return z>=W;},'l1p':function(z,W){return z>W;},'y1B':function(z,W){return z!==W;},'w5Z':function(z,W){return z===W;},'M3y':function(z,W){return z/W;},'W9A':function(z,W){return z>W;},'y0g':function(z,W){return z!==W;},'k2w':function(z,W){return z<W;},'q41':function(z,W){return z<W;},'h5C':function(z,W){return z instanceof W;},'U8s':function(z,W){return z!==W;},'t56':function(z,W){return z|W;},'J4g':function(z,W){return z-W;},'O70':function(z,W){return z===W;},'Z6Z':function(z,W){return z>W;},'t3p':function(z,W){return z|W;},'L1D':function(z,W){return z-W;},'E43':function(z,W){return z===W;},'F5s':function(z,W){return z!==W;},'m2A':function(z,W){return z===W;},'d1y':function(z,W){return z!==W;},'H76':function(z,W){return z!==W;},'s29':function(z,W){return z===W;},'W1w':function(z,W){return z>W;},'h20':function(z,W){return z/W;},'Q9B':function(z,W){return z>W;},'Z4Z':function(z,W){return z-W;},'i3C':function(z,W){return z!=W;},'z3g':function(z,W){return z!=W;},'G73':function(z,W,Z,K,R){return z^W^Z^K^R;},'b5B':function(z,W){return z>W;},'g9E':function(z,W){return z===W;},'Q3p':function(z,W){return z>>>W;},'m7v':function(z,W){return z/W;},'I5B':function(z,W){return z!==W;},'s3A':function(z,W){return z!=W;},'K6R':function(z,W){return z>W;},'a2D':function(z,W){return z===W;},'I70':function(z,W){return z>W;},'t9B':function(z,W){return z|W;},'c5Z':function(z,W){return z<W;},'J2P':function(z,W){return z-W;},'i2d':function(z,W){return z>W;},'L06':function(z,W){return z!==W;},'X0':function(z,W){return z*W;},'z6E':function(z,W){return z-W;},'A6v':function(z,W){return z===W;},'m3X':function(z,W,Z){return z-W+Z;},'W8A':function(z,W){return z===W;},'t0R':function(z,W){return z|W;},'B6L':function(z,W){return z>W;},'n03':function(z,W){return z>=W;},'L7B':function(z,W){return z>W;},'a1p':function(z,W){return z^W;},'d6s':function(z,W){return z===W;},'c1X':function(z,W){return z>W;},'L7g':function(z,W){return z/W;},'K3w':function(z,W){return z!==W;},'C2v':function(z,W){return z&W;},'e3R':function(z,W){return z!=W;},'l00':function(z,W){return z===W;},'t5R':function(z,W){return z===W;},'u7d':function(z,W){return z/W;},'k9s':function(z,W){return z===W;},'N5s':function(z,W){return z===W;},'P7C':function(z,W){return z<=W;},'M3p':function(z,W){return z>W;},'S76':function(z,W){return z>W;},'a7A':function(z,W){return z==W;},'L7Z':function(z,W){return z>W;},'M9g':function(z,W){return z>W;},'q31':function(z,W){return z!=W;},'v19':function(z,W){return z-W;},'z49':function(z,W){return z>W;},'V31':function(z,W){return z!=W;},'W4s':function(z,W){return z!==W;},'N1g':function(z,W){return z-W;},'o1s':function(z,W){return z==W;},'r3Z':function(z,W,Z){return z-W-Z;},'Z0L':function(z,W){return z==W;},'G7A':function(z,W){return z<=W;},'A9d':function(z,W){return z>W;},'u3E':function(z,W){return z<W;},'V2R':function(z,W){return z!=W;},'u2w':function(z,W){return z-W;},'N1P':function(z,W){return z*W;},'y0B':function(z,W){return z>W;},'b8B':function(z,W){return z!==W;},'u2C':function(z,W){return z<W;},'e7R':function(z,W){return z|W;},'D6D':function(z,W){return z>W;},'b8X':function(z,W){return z===W;},'V3s':function(z,W){return z%W;},'s1P':function(z,W){return z>W;},'h4Z':function(z,W){return z instanceof W;},'v6R':function(z,W){return z in W;},'Y36':function(z,W){return z&W;},'s0X':function(z,W){return z===W;},'i0D':function(z,W,Z){return z*W/Z;},'j3w':function(z,W){return z===W;},'Q0E':function(z,W){return z>=W;},'F9A':function(z,W){return z!=W;},'N6w':function(z,W){return z>W;},'f6A':function(z,W){return z==W;},'g6g':function(z,W){return z>W;},'t6d':function(z,W){return z>=W;},'o33':function(z,W){return z===W;},'H41':function(z,W){return z===W;},'H8y':function(z,W){return z in W;},'r7v':function(z,W){return z<W;},'F5A':function(z,W){return z==W;},'U8L':function(z,W){return z|W;},'E89':function(z,W){return z===W;},'y1p':function(z,W){return z<<W;},'D4y':function(z,W){return z!==W;},'U3A':function(z,W){return z>=W;},'w7d':function(z,W){return z===W;},'c7s':function(z,W){return z!=W;},'W9g':function(z,W){return z/W;},'J8C':function(z,W){return z>W;},'q8v':function(z,W){return z-W;},'N7d':function(z,W){return z!==W;},'B5A':function(z,W){return z<W;},'A81':function(z,W){return z>W;},'Z76':function(z,W){return z>W;},'Y0g':function(z,W){return z===W;},'s1g':function(z,W){return z/W;},'M09':function(z,W){return z>W;},'s4w':function(z,W){return z-W;},'J6B':function(z,W){return z!==W;},'T6R':function(z,W){return z/W;},'C4B':function(z,W){return z>W;},'j2w':function(z,W){return z-W;},'g2g':function(z,W){return z<W;},'v2s':function(z,W){return z>W;},'r2E':function(z,W){return z-W;},'O09':function(z,W){return z>W;},'E1s':function(z,W){return z<W;},'y3B':function(z,W){return z|W;},'w9d':function(z,W){return z<=W;},'F7p':function(z,W){return z^W;},'P8E':function(z,W){return z!==W;},'r3X':function(z,W){return z===W;},'A1p':function(z,W){return z^W;},'G5w':function(z,W){return z-W;},'A3Z':function(z,W){return z>=W;},'B7P':function(z,W){return z!=W;},'b7A':function(z,W){return z==W;},'p6X':function(z,W){return z<W;},'D4C':function(z,W){return z instanceof W;},'N66':function(z,W){return z<<W;},'i3p':function(z,W){return z%W;},'c3g':function(z,W){return z===W;},'F1v':function(z,W){return z>>>W;},'w0p':function(z,W,Z,K){return z-W+Z+K;},'E0':function(z,W){return z>W;},'q5y':function(z,W){return z!==W;},'U6D':function(z,W){return z===W;},'U1A':function(z,W){return z!=W;},'p8y':function(z,W){return z>W;},'x9v':function(z,W){return z===W;},'s30':function(z,W){return z===W;},'r2A':function(z,W){return z==W;},'D53':function(z,W){return z&W;},'b9g':function(z,W){return z-W;},'j03':function(z,W){return z-W;},'R23':function(z,W){return z===W;},'v36':function(z,W){return z===W;},'r3L':function(z,W){return z>>>W;},'w7R':function(z,W){return z<W;},'I4p':function(z,W){return z|W;},'M13':function(z,W){return z-W;},'Z2P':function(z,W){return z<W;},'b4L':function(z,W){return z==W;},'z6D':function(z,W){return z>W;},'E6X':function(z,W){return z===W;},'f7C':function(z,W){return z<W;},'u7L':function(z,W){return z<<W;},'q9P':function(z,W){return z-W;},'g2R':function(z,W){return z!=W;},'a7g':function(z,W){return z===W;},'R91':function(z,W){return z<W;},'N8d':function(z,W){return z===W;},'J9P':function(z,W){return z/W;},'V89':function(z,W){return z===W;},'C89':function(z,W){return z<W;},'Y1Z':function(z,W){return z!=W;},'t39':function(z,W){return z===W;},'s5v':function(z,W){return z>W;},'U1B':function(z,W){return z>W;},'V7v':function(z,W){return z/W;},'z3p':function(z,W,Z){return z|W|Z;},'B80':function(z,W){return z/W;},'u03':function(z,W){return z*W;},'L7P':function(z,W){return z<W;},'m8w':function(z,W){return z<W;},'y1X':function(z,W){return z<W;},'s1A':function(z,W){return z!=W;},'q6B':function(z,W){return z|W;},'O5g':function(z,W){return z<W;},'k3B':function(z,W){return z-W;},'b3y':function(z,W){return z>=W;},'r71':function(z,W){return z<W;},'w7L':function(z,W){return z<<W;},'o9E':function(z,W){return z/W;},'J41':function(z,W){return z-W;},'J3L':function(z,W){return z>>>W;},'D0X':function(z,W){return z===W;},'X8C':function(z,W){return z>>>W;},'A1Z':function(z,W){return z>W;},'F5P':function(z,W){return z>W;},'S7y':function(z,W){return z in W;},'B7A':function(z,W){return z==W;},'X9E':function(z,W){return z===W;},'Q91':function(z,W){return z>>>W;},'X99':function(z,W){return z!==W;},'E6p':function(z,W){return z>W;},'s83':function(z,W,Z,K){return z|W|Z|K;},'h4':function(z,W){return z*W;},'P0d':function(z,W){return z===W;},'c6w':function(z,W){return z/W;},'q6A':function(z,W){return z==W;},'v4L':function(z,W){return z===W;},'R2s':function(z,W){return z>W;},'F19':function(z,W){return z>W;},'I6L':function(z,W){return z|W;},'d21':function(z,W){return z!==W;},'G9A':function(z,W){return z==W;},'n83':function(z,W){return z===W;},'i13':function(z,W){return z===W;},'A4y':function(z,W){return z>W;},'y2w':function(z,W){return z!==W;},'M6L':function(z,W){return z>W;},'F0E':function(z,W){return z===W;},'z6w':function(z,W){return z!==W;},'h7D':function(z,W){return z>=W;},'k4C':function(z,W){return z instanceof W;},'N4w':function(z,W){return z<=W;},'p2Z':function(z,W){return z!=W;},'k0P':function(z,W){return z-W;},'n6D':function(z,W){return z>=W;},'N03':function(z,W){return z-W;},'h63':function(z,W){return z^W;},'T70':function(z,W){return z!=W;},'x7C':function(z,W){return z<W;},'I9':function(z,W){return z==W;},'h2v':function(z,W){return z-W;},'I13':function(z,W){return z-W;},'T4d':function(z,W){return z>W;},'c0p':function(z,W){return z===W;},'N0P':function(z,W){return z*W;},'N0X':function(z,W){return z!==W;},'A6w':function(z,W){return z<W;},'C6B':function(z,W){return z>W;},'d13':function(z,W){return z>=W;},'a5g':function(z,W){return z<W;},'p60':function(z,W){return z-W;},'u3X':function(z,W){return z===W;},'b5P':function(z,W){return z<W;},'m8v':function(z,W){return z*W;},'c9s':function(z,W){return z>>W;},'r0s':function(z,W){return z===W;},'n7R':function(z,W){return z|W;},'d23':function(z,W){return z===W;},'H7D':function(z,W){return z>=W;},'T56':function(z,W){return z!==W;},'E86':function(z,W){return z&W;},'O8X':function(z,W){return z==W;},'B5p':function(z,W){return z>W;},'J6P':function(z,W){return z===W;},'B06':function(z,W){return z>W;},'s3E':function(z,W){return z>W;},'Y66':function(z,W){return z<<W;},'h9R':function(z,W){return z>W;},'D3A':function(z,W){return z==W;},'U46':function(z,W){return z>W;},'S4p':function(z,W){return z>W;},'H31':function(z,W){return z instanceof W;},'Z3s':function(z,W){return z!==W;},'K3g':function(z,W){return z>W;},'w53':function(z,W,Z,K,R){return z|W|Z|K|R;},'G9':function(z,W){return z!=W;},'X2R':function(z,W){return z==W;},'u26':function(z,W){return z>>>W;},'I9B':function(z,W){return z|W;},'z6v':function(z,W){return z&W;},'C9g':function(z,W){return z>W;},'i7X':function(z,W){return z===W;},'R1y':function(z,W){return z<W;},'p2X':function(z,W){return z===W;},'x2A':function(z,W){return z===W;},'a1v':function(z,W){return z&W;},'q8E':function(z,W){return z/W;},'W1y':function(z,W){return z==W;},'w2w':function(z,W){return z!==W;},'Y6w':function(z,W){return z-W;},'R8v':function(z,W){return z-W;},'u0A':function(z,W){return z!=W;},'X2Z':function(z,W){return z>W;},'z3R':function(z,W){return z==W;},'Q5A':function(z,W){return z!=W;},'w0B':function(z,W){return z===W;},'v06':function(z,W){return z>W;},'s0D':function(z,W){return z>W;},'p6Z':function(z,W){return z>W;},'n49':function(z,W){return z>W;},'Q1y':function(z,W){return z===W;},'B8X':function(z,W){return z==W;},'r0L':function(z,W){return z&W;},'k7s':function(z,W){return z!==W;},'L1y':function(z,W){return z/W;},'k5v':function(z,W){return z===W;},'g1d':function(z,W){return z==W;},'e1X':function(z,W){return z<W;},'N26':function(z,W){return z>W;},'E41':function(z,W){return z<W;},'p8E':function(z,W){return z<=W;},'X0d':function(z,W){return z!==W;},'l69':function(z,W){return z>W;},'v3C':function(z,W){return z===W;},'U5Z':function(z,W){return z>W;},'V43':function(z,W){return z|W;},'u2y':function(z,W){return z!==W;},'v39':function(z,W){return z===W;},'g0d':function(z,W){return z<W;},'K1B':function(z,W){return z>W;},'E79':function(z,W){return z>W;},'b7P':function(z,W){return z===W;},'K8L':function(z,W){return z*W;},'S0s':function(z,W){return z!==W;},'K5s':function(z,W){return z===W;},'H89':function(z,W){return z>W;},'B1R':function(z,W){return z!=W;},'l6w':function(z,W){return z>=W;},'J2X':function(z,W){return z/W;},'y81':function(z,W){return z===W;},'c5X':function(z,W){return z==W;},'z0X':function(z,W){return z===W;},'J31':function(z,W){return z!=W;},'r4p':function(z,W){return z-W;},'W01':function(z,W){return z>W;},'S7D':function(z,W){return z!==W;},'A5D':function(z,W){return z<<W;},'b7Z':function(z,W){return z%W;},'x8p':function(z,W,Z,K){return z|W|Z|K;},'w1B':function(z,W){return z-W;},'H8v':function(z,W){return z===W;},'q4':function(z,W){return z==W;},'f8y':function(z,W){return z in W;},'D5v':function(z,W){return z===W;},'u5L':function(z,W){return z==W;},'h60':function(z,W){return z===W;},'v1w':function(z,W){return z>W;},'w1g':function(z,W){return z===W;},'s3v':function(z,W){return z-W;},'t7A':function(z,W){return z==W;},'T7A':function(z,W){return z==W;},'E9E':function(z,W){return z==W;},'t3y':function(z,W){return z===W;},'n4w':function(z,W){return z===W;},'V6B':function(z,W){return z>=W;},'E7y':function(z,W){return z-W;},'G8B':function(z,W){return z!==W;},'X9R':function(z,W){return z===W;},'H99':function(z,W){return z>W;},'a1D':function(z,W){return z>W;},'g7E':function(z,W){return z<W;},'F50':function(z,W){return z!==W;},'q4p':function(z,W){return z>W;},'M06':function(z,W){return z>W;},'V6X':function(z,W){return z>W;},'x7v':function(z,W){return z/W;},'q0':function(z,W){return z<W;},'I2p':function(z,W){return z/W;},'j4C':function(z,W){return z instanceof W;},'v6L':function(z,W){return z|W;},'L2d':function(z,W){return z!==W;},'X2B':function(z,W){return z-W;},'o5C':function(z,W){return z instanceof W;},'B0w':function(z,W){return z===W;},'D2C':function(z,W){return z!==W;},'Q7X':function(z,W){return z!==W;},'k66':function(z,W){return z<<W;},'W56':function(z,W){return z>W;},'J9L':function(z,W){return z>W;},'U00':function(z,W){return z!==W;},'e2C':function(z,W){return z===W;},'T4s':function(z,W){return z!==W;},'m79':function(z,W){return z!==W;},'W6L':function(z,W){return z>>>W;},'F06':function(z,W){return z!==W;},'a7B':function(z,W){return z!==W;},'L01':function(z,W){return z===W;},'B5w':function(z,W){return z===W;},'f8C':function(z,W){return z instanceof W;},'o2Z':function(z,W){return z!==W;},'i4s':function(z,W){return z!==W;},'J76':function(z,W){return z-W;},'e0Z':function(z,W){return z instanceof W;},'A83':function(z,W){return z>=W;},'O5w':function(z,W){return z===W;},'C2g':function(z,W){return z!=W;},'X5C':function(z,W){return z!==W;},'C76':function(z,W){return z>W;},'F8g':function(z,W){return z==W;},'g86':function(z,W){return z|W;},'b7X':function(z,W){return z===W;},'X7y':function(z,W){return z!==W;},'o0d':function(z,W){return z>=W;},'h1L':function(z,W){return z>>>W;},'S8v':function(z,W){return z>W;},'I5A':function(z,W){return z!=W;},'k0Z':function(z,W){return z-W;},'N7R':function(z,W){return z>>W;},'B16':function(z,W){return z&W;},'W2d':function(z,W){return z===W;},'A7d':function(z,W){return z===W;},'n51':function(z,W){return z!=W;},'l1P':function(z,W){return z>W;},'T9p':function(z,W){return z&W;},'j0R':function(z,W){return z<W;},'d5B':function(z,W){return z>W;},'Y6y':function(z,W){return z-W;},'M9B':function(z,W){return z>W;},'J2Z':function(z,W){return z^W;},'H6Z':function(z,W){return z/W;},'z0A':function(z,W){return z!=W;},'T1y':function(z,W){return z===W;},'Z33':function(z,W){return z===W;},'h5y':function(z,W){return z-W;},'H6p':function(z,W){return z%W;},'h2g':function(z,W){return z===W;},'k8L':function(z,W){return z/W;},'e3v':function(z,W){return z-W;},'q61':function(z,W){return z*W;},'L5g':function(z,W){return z!==W;},'j00':function(z,W){return z===W;},'P4P':function(z,W){return z===W;},'b70':function(z,W){return z<W;},'S63':function(z,W,Z){return z^W^Z;},'h1d':function(z,W){return z===W;},'F4s':function(z,W){return z===W;},'D8L':function(z,W){return z>=W;},'O8g':function(z,W){return z<W;},'T3C':function(z,W){return z instanceof W;},'U6w':function(z,W){return z-W;},'U0':function(z,W){return z-W;},'o8C':function(z,W){return z<W;},'h8w':function(z,W){return z==W;},'K0A':function(z,W){return z==W;},'s0P':function(z,W){return z==W;},'F2L':function(z,W){return z*W;},'e7d':function(z,W){return z>W;},'K53':function(z,W){return z|W;},'z4v':function(z,W){return z===W;},'q76':function(z,W){return z>W;},'X0L':function(z,W){return z<W;},'l46':function(z,W){return z-W;},'J7v':function(z,W){return z/W;},'m9E':function(z,W){return z===W;},'P3D':function(z,W){return z>W;},'i8Z':function(z,W){return z>W;},'s7L':function(z,W){return z&W;},'e69':function(z,W){return z-W;},'j8D':function(z,W){return z===W;},'b2d':function(z,W){return z<W;},'h40':function(z,W){return z===W;},'z83':function(z,W){return z<W;},'l5s':function(z,W){return z!==W;},'Z0s':function(z,W){return z!==W;},'q7E':function(z,W){return z<=W;},'B91':function(z,W){return z>>>W;},'N36':function(z,W){return z&W;},'z7d':function(z,W){return z===W;},'V11':function(z,W){return z===W;},'v4d':function(z,W){return z>W;},'O9A':function(z,W){return z==W;},'s0Z':function(z,W){return z instanceof W;},'r8v':function(z,W){return z>W;},'s4R':function(z,W){return z&W;},'E1d':function(z,W){return z<W;},'D6E':function(z,W){return z/W;},'i1y':function(z,W){return z===W;},'x3X':function(z,W){return z<W;},'Q90':function(z,W){return z/W;},'T9A':function(z,W){return z==W;},'I8Z':function(z,W){return z>W;},'O2L':function(z,W){return z*W;},'H86':function(z,W){return z&W;},'V2X':function(z,W){return z<W;},'f9y':function(z,W){return z<W;},'G6R':function(z,W){return z==W;},'W6s':function(z,W){return z==W;},'X7w':function(z,W){return z===W;},'m4':function(z,W){return z!=W;},'u30':function(z,W){return z-W;},'L6s':function(z,W){return z!==W;},'A30':function(z,W){return z===W;},'M9D':function(z,W){return z>W;},'G5p':function(z,W){return z&W;},'y5L':function(z,W){return z>=W;},'n00':function(z,W){return z===W;},'C3d':function(z,W){return z!=W;},'G4L':function(z,W){return z!==W;},'z66':function(z,W){return z<<W;},'J2B':function(z,W){return z>W;},'r0':function(z,W){return z instanceof W;},'W39':function(z,W){return z>W;},'D4w':function(z,W){return z===W;},'d6L':function(z,W){return z<W;},'k3Z':function(z,W){return z==W;},'s69':function(z,W){return z>W;},'m3L':function(z,W){return z>>>W;},'q2P':function(z,W){return z-W;},'j4E':function(z,W){return z/W;},'N6E':function(z,W){return z-W;},'U6E':function(z,W){return z in W;},'M50':function(z,W){return z-W;},'O4s':function(z,W){return z!=W;},'V4Z':function(z,W){return z in W;},'N6v':function(z,W){return z!==W;},'f4g':function(z,W){return z-W;},'P4p':function(z,W){return z===W;},'O39':function(z,W){return z===W;},'f6X':function(z,W){return z>W;},'b5w':function(z,W){return z===W;},'P8p':function(z,W){return z>W;},'E2B':function(z,W){return z!==W;},'t3C':function(z,W){return z instanceof W;},'L4d':function(z,W){return z<W;},'z2y':function(z,W){return z-W;},'T5R':function(z,W){return z-W;},'t3w':function(z,W){return z<W;},'H63':function(z,W){return z>W;},'j4R':function(z,W){return z<W;},'b0v':function(z,W){return z>=W;},'Q16':function(z,W){return z&W;},'w5X':function(z,W){return z===W;},'e6v':function(z,W){return z===W;},'U4E':function(z,W){return z!==W;},'Y6E':function(z,W){return z===W;},'J63':function(z,W){return z^W;},'o7y':function(z,W){return z<W;},'f7w':function(z,W){return z<W;},'D83':function(z,W){return z===W;},'Y5X':function(z,W){return z!=W;},'q40':function(z,W){return z===W;},'M0v':function(z,W){return z>=W;},'y9d':function(z,W){return z/W;},'T73':function(z,W,Z,K,R){return z^W^Z^K^R;},'G39':function(z,W){return z==W;},'b91':function(z,W){return z|W;},'S2g':function(z,W){return z===W;},'d5R':function(z,W){return z>W;},'g6Z':function(z,W){return z!==W;},'R4d':function(z,W){return z<W;},'W80':function(z,W){return z/W;},'y5D':function(z,W){return z<<W;},'u66':function(z,W){return z&W;},'B7g':function(z,W){return z===W;},'m9L':function(z,W){return z!==W;},'O4L':function(z,W){return z!==W;},'Q5p':function(z,W){return z>>>W;},'S0L':function(z,W){return z&W;},'Z9P':function(z,W){return z-W;},'s4y':function(z,W){return z<W;},'L9B':function(z,W){return z|W;},'K29':function(z,W){return z>W;},'E2A':function(z,W){return z===W;},'I6R':function(z,W){return z==W;},'V99':function(z,W){return z>W;},'L50':function(z,W){return z<W;},'O0E':function(z,W){return z<=W;},'r96':function(z,W){return z-W;},'x3v':function(z,W){return z!==W;},'J9v':function(z,W){return z==W;},'R9Z':function(z,W){return z instanceof W;},'k30':function(z,W){return z!==W;},'j9L':function(z,W){return z/W;},'W06':function(z,W){return z>W;},'O01':function(z,W){return z>W;},'o6g':function(z,W){return z/W;},'v5A':function(z,W){return z==W;},'y1Z':function(z,W){return z<W;},'y7s':function(z,W){return z===W;},'z4y':function(z,W){return z>W;},'M2s':function(z,W){return z>W;},'z6R':function(z,W){return z==W;},'j4y':function(z,W){return z>W;},'M90':function(z,W){return z<W;},'G8A':function(z,W){return z>W;},'f9E':function(z,W){return z===W;},'m31':function(z,W){return z<W;},'r8C':function(z,W){return z===W;},'G90':function(z,W){return z-W;},'H2A':function(z,W){return z===W;},'Y30':function(z,W){return z!==W;},'x8v':function(z,W){return z===W;},'o7D':function(z,W){return z-W;},'O5p':function(z,W){return z>W;},'T9D':function(z,W){return z<W;},'w66':function(z,W){return z&W;},'K0B':function(z,W){return z>W;},'Y63':function(z,W,Z,K){return z^W^Z^K;},'R8X':function(z,W){return z==W;},'b1D':function(z,W){return z===W;},'a8Z':function(z,W){return z!==W;},'K3B':function(z,W){return z-W;},'l49':function(z,W){return z!==W;},'s53':function(z,W){return z&W;},'R8Z':function(z,W){return z>W;},'n3B':function(z,W){return z>W;},'w4R':function(z,W){return z>>W;},'D3P':function(z,W){return z>W;},'h8y':function(z,W){return z<W;},'b7B':function(z,W){return z>W;},'O2D':function(z,W){return z===W;},'j6v':function(z,W){return z!==W;},'I1C':function(z,W){return z|W;},'f31':function(z,W){return z instanceof W;},'H2Z':function(z,W){return z==W;},'D69':function(z,W){return z>W;},'x1L':function(z,W){return z>>W;},'o4B':function(z,W){return z===W;},'M9Z':function(z,W){return z*W;},'V7E':function(z,W){return z<W;},'c81':function(z,W){return z>W;},'M1y':function(z,W){return z!=W;},'N3w':function(z,W){return z-W;},'f63':function(z,W){return z^W;},'L39':function(z,W){return z==W;},'H6X':function(z,W){return z!=W;},'F2D':function(z,W){return z===W;},'g3s':function(z,W){return z>W;},'d4L':function(z,W){return z===W;},'I3w':function(z,W){return z>W;},'S43':function(z,W){return z in W;},'I3C':function(z,W){return z instanceof W;},'m0s':function(z,W){return z!==W;},'C8C':function(z,W){return z==W;},'D6w':function(z,W){return z>W;},'r0d':function(z,W){return z>W;},'e2w':function(z,W){return z!==W;},'y3R':function(z,W){return z!=W;},'Z1L':function(z,W){return z^W;},'o2X':function(z,W){return z===W;},'C4Z':function(z,W){return z instanceof W;},'Y9s':function(z,W){return z===W;},'b0D':function(z,W){return z*W;},'s5D':function(z,W){return z>W;},'W5P':function(z,W){return z!=W;},'p1s':function(z,W){return z!==W;},'Z9E':function(z,W){return z<W;},'V1L':function(z,W){return z>>W;},'V1s':function(z,W){return z===W;},'o96':function(z,W){return z>W;},'Z4g':function(z,W){return z>W;},'k3A':function(z,W){return z!=W;},'A6D':function(z,W){return z>W;},'g9C':function(z,W){return z>W;},'c5v':function(z,W){return z>W;},'D3Z':function(z,W){return z>W;},'I7Z':function(z,W){return z<W;},'J9w':function(z,W){return z===W;},'e9s':function(z,W){return z==W;},'Z3D':function(z,W){return z>W;},'Z6B':function(z,W){return z===W;},'u6D':function(z,W){return z-W;},'Q7g':function(z,W){return z>W;},'s7R':function(z,W){return z<W;},'Y00':function(z,W){return z>W;},'Z0':function(z,W){return z==W;},'a2s':function(z,W){return z>W;},'q6X':function(z,W){return z===W;},'f0s':function(z,W){return z!==W;},'v3p':function(z,W){return z&W;},'r40':function(z,W){return z===W;},'O9B':function(z,W){return z&W;},'u4E':function(z,W){return z>W;},'A4v':function(z,W){return z!==W;},'C5y':function(z,W){return z!==W;},'V3D':function(z,W){return z&W;},'P6p':function(z,W){return z^W;},'j6E':function(z,W){return z<W;},'e3g':function(z,W){return z===W;},'c26':function(z,W){return z!==W;},'J8y':function(z,W){return z!==W;},'x63':function(z,W){return z^W;},'J7E':function(z,W){return z>=W;},'U6C':function(z,W){return z instanceof W;},'V6g':function(z,W){return z>=W;},'G9g':function(z,W){return z===W;},'Y1P':function(z,W){return z>W;},'b0C':function(z,W){return z>W;},'H9y':function(z,W){return z<W;},'R80':function(z,W){return z/W;},'J3X':function(z,W){return z/W;},'P79':function(z,W){return z!==W;},'J4D':function(z,W){return z!==W;},'z5d':function(z,W){return z===W;},'Y29':function(z,W){return z!=W;},'r3s':function(z,W){return z*W;},'R0D':function(z,W){return z>>>W;},'x7E':function(z,W){return z>W;},'C7C':function(z,W){return z<W;},'d9':function(z,W){return z==W;},'n1g':function(z,W){return z>W;},'K5D':function(z,W){return z===W;},'D1B':function(z,W){return z===W;},'S6X':function(z,W){return z>W;},'p6B':function(z,W){return z>W;},'r9R':function(z,W){return z>W;},'W5B':function(z,W){return z-W;},'n7s':function(z,W){return z!==W;},'D0D':function(z,W){return z>=W;},'N2v':function(z,W){return z/W;},'p33':function(z,W){return z===W;},'M21':function(z,W){return z!=W;},'d8p':function(z,W){return z==W;},'f5C':function(z,W){return z<W;},'y9s':function(z,W){return z!==W;},'N30':function(z,W){return z!==W;},'I0R':function(z,W){return z|W;},'S2P':function(z,W){return z>W;},'F4p':function(z,W){return z>>W;},'I4L':function(z,W){return z-W;},'S5y':function(z,W){return z-W;},'t7X':function(z,W){return z===W;},'D0Z':function(z,W){return z instanceof W;},'R5P':function(z,W){return z!=W;},'a9B':function(z,W){return z>W;},'U2w':function(z,W){return z>W;},'d9B':function(z,W){return z|W;},'D4v':function(z,W){return z!==W;},'D1A':function(z,W){return z>W;},'P5v':function(z,W){return z!==W;},'z0g':function(z,W){return z-W;},'G5E':function(z,W){return z>=W;},'o4A':function(z,W){return z!=W;},'d7P':function(z,W){return z>W;},'G1C':function(z,W){return z<W;},'n66':function(z,W){return z<<W;},'r76':function(z,W){return z>W;},'u6C':function(z,W){return z<W;},'l6C':function(z,W){return z|W;},'h2p':function(z,W){return z|W;},'F59':function(z,W){return z==W;},'Q3w':function(z,W){return z<W;},'G4d':function(z,W){return z==W;},'b93':function(z,W){return z>W;},'B9Z':function(z,W){return z<W;},'C0s':function(z,W){return z!==W;},'k5D':function(z,W){return z*W;},'a2d':function(z,W){return z%W;},'Q0C':function(z,W){return z<W;},'Z0d':function(z,W){return z!==W;},'F7A':function(z,W){return z==W;},'U0Z':function(z,W){return z instanceof W;},'D0B':function(z,W){return z===W;},'w8s':function(z,W){return z>=W;},'W6d':function(z,W){return z==W;},'Y2w':function(z,W){return z!==W;},'p4':function(z,W){return z==W;},'G2d':function(z,W){return z===W;},'b5p':function(z,W){return z>>>W;},'P7E':function(z,W){return z<W;},'Z9R':function(z,W){return z&W;},'D03':function(z,W){return z*W;},'g0':function(z,W){return z==W;},'p6A':function(z,W){return z==W;},'C4A':function(z,W){return z<W;},'b50':function(z,W){return z===W;},'W1R':function(z,W){return z!==W;},'Q2v':function(z,W){return z|W;},'H1s':function(z,W){return z===W;},'E0D':function(z,W,Z){return z|W|Z;},'q2B':function(z,W){return z>W;},'k2C':function(z,W){return z===W;},'m7y':function(z,W){return z>W;},'W2D':function(z,W){return z===W;},'c1P':function(z,W){return z>W;},'m20':function(z,W){return z/W;},'N1Z':function(z,W){return z-W;},'J7y':function(z,W){return z/W;},'J0':function(z,W){return z==W;},'a0R':function(z,W){return z|W;},'a9A':function(z,W){return z!=W;},'w29':function(z,W){return z==W;},'Y3E':function(z,W){return z!==W;},'O2d':function(z,W){return z>W;},'b6d':function(z,W){return z*W;},'d1R':function(z,W){return z==W;},'t0w':function(z,W){return z<=W;},'T16':function(z,W){return z|W;},'Z7E':function(z,W){return z===W;},'H4Z':function(z,W){return z in W;},'C9R':function(z,W){return z===W;},'j4v':function(z,W){return z/W;},'M4L':function(z,W){return z==W;},'w2E':function(z,W){return z<W;},'S2B':function(z,W){return z>W;},'O0v':function(z,W){return z!==W;},'j6w':function(z,W){return z/W;},'c8d':function(z,W){return z===W;},'I0v':function(z,W){return z!==W;},'q9E':function(z,W){return z==W;},'e6y':function(z,W){return z!==W;},'W4d':function(z,W){return z<W;},'F4L':function(z,W){return z!=W;},'r3v':function(z,W){return z*W;},'V7C':function(z,W){return z!=W;},'i9':function(z,W){return z===W;},'T8B':function(z,W){return z<W;},'Q7B':function(z,W){return z|W;},'G91':function(z,W){return z>>>W;},'e3E':function(z,W){return z>=W;},'x3L':function(z,W){return z&W;},'F3y':function(z,W){return z===W;},'A69':function(z,W){return z-W;},'c6y':function(z,W){return z===W;},'Z89':function(z,W){return z>W;},'x5y':function(z,W){return z>W;},'Y49':function(z,W){return z instanceof W;},'v8Z':function(z,W){return z==W;},'y7R':function(z,W){return z|W;},'J7C':function(z,W){return z==W;},'R6d':function(z,W){return z!==W;},'v1v':function(z,W){return z&W;},'l2C':function(z,W){return z instanceof W;},'l53':function(z,W){return z!==W;},'D4E':function(z,W){return z!==W;},'f4B':function(z,W){return z-W;},'T1E':function(z,W){return z===W;},'s10':function(z,W){return z!==W;},'v0y':function(z,W){return z>=W;},'Z1s':function(z,W){return z!==W;},'c4E':function(z,W){return z/W;},'v6d':function(z,W){return z>W;},'H20':function(z,W){return z>W;},'Q4p':function(z,W){return z>>W;},'R6s':function(z,W){return z>W;},'p86':function(z,W){return z|W;},'S11':function(z,W){return z<W;},'L9A':function(z,W){return z!=W;},'j0B':function(z,W){return z>W;},'Z3X':function(z,W){return z==W;},'s5L':function(z,W){return z==W;},'a19':function(z,W){return z>W;},'n6w':function(z,W){return z/W;},'Z8p':function(z,W){return z|W;},'B19':function(z,W){return z!==W;},'L3C':function(z,W){return z<W;},'T8X':function(z,W){return z==W;},'k29':function(z,W){return z-W;},'b73':function(z,W,Z,K,R){return z^W^Z^K^R;},'W7X':function(z,W){return z<=W;},'i2D':function(z,W){return z===W;},'o11':function(z,W){return z===W;},'l0g':function(z,W){return z!==W;},'w1A':function(z,W){return z>W;},'o31':function(z,W){return z==W;},'h89':function(z,W){return z instanceof W;},'S4':function(z,W){return z==W;},'b9':function(z,W){return z*W;},'j2C':function(z,W){return z instanceof W;},'v5B':function(z,W){return z!==W;},'Q6R':function(z,W){return z in W;},'Q50':function(z,W){return z!==W;},'x2R':function(z,W){return z!=W;},'O16':function(z,W){return z|W;},'t8B':function(z,W){return z!==W;},'j46':function(z,W){return z===W;},'D5Z':function(z,W){return z>W;},'X1d':function(z,W){return z!=W;},'d7B':function(z,W){return z>W;},'x2Z':function(z,W){return z==W;},'y1A':function(z,W){return z!=W;},'Z2A':function(z,W){return z!=W;},'E4g':function(z,W){return z===W;},'g9w':function(z,W){return z!==W;},'H2X':function(z,W){return z===W;},'Y1B':function(z,W){return z>W;},'L4p':function(z,W,Z){return z|W|Z;},'E3s':function(z,W){return z!==W;},'e4C':function(z,W){return z!==W;},'o9R':function(z,W){return z===W;},'a5R':function(z,W){return z%W;},'x9L':function(z,W){return z!==W;},'u5D':function(z,W){return z*W;},'p3v':function(z,W){return z-W;},'z29':function(z,W){return z-W;},'E60':function(z,W){return z>W;},'A5X':function(z,W){return z>=W;},'W9':function(z,W){return z*W;},'J7D':function(z,W){return z&W;},'g0L':function(z,W){return z<<W;},'r6A':function(z,W){return z==W;},'G9Z':function(z,W,Z){return z-W+Z;},'z1B':function(z,W){return z>W;},'e4y':function(z,W){return z<W;},'B2d':function(z,W){return z===W;},'j8d':function(z,W){return z===W;},'k7R':function(z,W){return z%W;},'f6Z':function(z,W){return z==W;},'X4':function(z,W){return z instanceof W;},'t9':function(z,W){return z!=W;},'a80':function(z,W){return z-W;},'O9g':function(z,W){return z!==W;},'Q19':function(z,W){return z>W;},'I7A':function(z,W){return z==W;},'a5A':function(z,W){return z!=W;},'K66':function(z,W){return z&W;},'R7B':function(z,W){return z>W;},'W9D':function(z,W){return z>=W;},'h2Z':function(z,W){return z/W;},'U4R':function(z,W){return z===W;},'m2g':function(z,W){return z-W;},'K0g':function(z,W){return z-W;},'C2Z':function(z,W){return z*W;},'e51':function(z,W){return z!=W;},'j7L':function(z,W){return z<<W;},'o20':function(z,W){return z<W;},'s0g':function(z,W){return z===W;},'F1C':function(z,W){return z-W;},'S7C':function(z,W){return z<W;},'M16':function(z,W){return z|W;},'A4C':function(z,W){return z instanceof W;},'J9E':function(z,W){return z==W;},'p4B':function(z,W){return z!==W;},'F0w':function(z,W){return z===W;},'U9s':function(z,W){return z<W;},'Y8s':function(z,W){return z!=W;},'g2B':function(z,W){return z>=W;},'U7s':function(z,W){return z!==W;},'T6L':function(z,W){return z|W;},'L8g':function(z,W){return z>W;},'b09':function(z,W){return z>W;},'O50':function(z,W){return z>W;},'E4P':function(z,W){return z-W;},'k46':function(z,W){return z>W;},'s2C':function(z,W){return z&W;},'b9Z':function(z,W){return z/W;},'E20':function(z,W){return z==W;},'O5R':function(z,W){return z===W;},'M7B':function(z,W){return z>W;},'N2y':function(z,W){return z<=W;},'l2v':function(z,W){return z>>>W;},'j4w':function(z,W){return z-W;},'q9v':function(z,W){return z>W;},'M8A':function(z,W){return z*W;},'w8d':function(z,W){return z===W;},'F6s':function(z,W){return z!==W;},'d6R':function(z,W){return z>=W;},'K1P':function(z,W){return z/W;},'p61':function(z,W){return z-W;},'A9s':function(z,W){return z!==W;},'X9y':function(z,W){return z===W;},'x60':function(z,W){return z!==W;},'v7B':function(z,W){return z>W;},'q8p':function(z,W){return z*W;},'w4w':function(z,W){return z===W;},'p9E':function(z,W){return z===W;},'n0Z':function(z,W){return z>W;},'O06':function(z,W){return z>W;},'F73':function(z,W,Z,K,R){return z^W^Z^K^R;},'g7C':function(z,W){return z<W;},'X8v':function(z,W){return z/W;},'A8L':function(z,W){return z*W;},'z7s':function(z,W){return z!==W;},'f86':function(z,W){return z&W;},'u83':function(z,W){return z-W;},'T8A':function(z,W){return z>W;},'s6C':function(z,W){return z<W;},'Q01':function(z,W){return z-W;},'d7Z':function(z,W){return z==W;},'N0p':function(z,W,Z,K,R){return z^W^Z^K^R;},'G3C':function(z,W){return z instanceof W;},'E8w':function(z,W){return z!==W;},'W23':function(z,W){return z===W;},'x0d':function(z,W){return z===W;},'z81':function(z,W){return z!==W;},'f43':function(z,W){return z>W;},'F7g':function(z,W){return z!==W;},'u46':function(z,W){return z!==W;},'B39':function(z,W){return z===W;},'a0C':function(z,W){return z<=W;},'m7w':function(z,W){return z<W;},'J71':function(z,W){return z===W;},'P96':function(z,W){return z!==W;},'k4y':function(z,W){return z>W;},'M0C':function(z,W){return z<W;},'e8L':function(z,W){return z|W;},'V79':function(z,W){return z>W;},'S61':function(z,W){return z*W;},'M1w':function(z,W){return z>W;},'e4v':function(z,W){return z!==W;},'d5g':function(z,W){return z>W;},'t9D':function(z,W){return z!==W;},'K9L':function(z,W){return z/W;},'h6P':function(z,W){return z/W;},'D5L':function(z,W){return z<W;},'V63':function(z,W){return z^W;},'G1w':function(z,W){return z>W;},'G93':function(z,W){return z<W;},'q4D':function(z,W){return z!==W;},'t2s':function(z,W){return z>W;},'c49':function(z,W){return z>W;},'k2y':function(z,W){return z>W;},'J9C':function(z,W){return z<<W;},'s26':function(z,W){return z>>>W;},'y0A':function(z,W){return z<W;},'S5v':function(z,W){return z>W;},'v2D':function(z,W){return z===W;},'I1D':function(z,W){return z===W;},'U0A':function(z,W){return z!=W;},'Q5s':function(z,W){return z!==W;},'q8y':function(z,W){return z===W;},'Z61':function(z,W){return z>W;},'h7C':function(z,W){return z<W;},'n3P':function(z,W){return z-W;},'A29':function(z,W){return z-W;},'s3B':function(z,W){return z<W;},'V1d':function(z,W){return z*W;},'L7A':function(z,W){return z==W;},'K7R':function(z,W){return z<W;},'j6y':function(z,W){return z>=W;},'u4y':function(z,W){return z==W;},'L3p':function(z,W,Z){return z^W^Z;},'V2P':function(z,W){return z===W;},'H4D':function(z,W){return z&W;},'T6s':function(z,W){return z!=W;},'k69':function(z,W){return z!==W;},'Q56':function(z,W){return z>W;},'L70':function(z,W){return z===W;},'R9A':function(z,W){return z<W;},'g8C':function(z,W){return z instanceof W;},'R8B':function(z,W){return z-W;},'G2s':function(z,W){return z<W;},'h4B':function(z,W){return z>W;},'v23':function(z,W){return z in W;},'y9L':function(z,W,Z){return z%W/Z;},'v1D':function(z,W){return z===W;},'f60':function(z,W){return z===W;},'H9R':function(z,W){return z-W;},'J11':function(z,W){return z===W;},'t0E':function(z,W){return z<W;},'P2A':function(z,W){return z==W;},'l1Z':function(z,W){return z<W;},'A0P':function(z,W){return z!=W;},'j36':function(z,W){return z&W;},'V86':function(z,W){return z!==W;},'r4P':function(z,W){return z==W;},'k00':function(z,W){return z!=W;},'F2s':function(z,W){return z>W;},'a6R':function(z,W){return z in W;},'W3C':function(z,W){return z===W;},'P2E':function(z,W){return z/W;},'d6d':function(z,W){return z-W;},'F80':function(z,W){return z-W;},'F0C':function(z,W){return z<=W;},'n6C':function(z,W){return z>>>W;},'r2P':function(z,W){return z>W;},'o2A':function(z,W){return z==W;},'i16':function(z,W){return z!==W;},'h6Z':function(z,W){return z*W;},'h86':function(z,W){return z!==W;},'f1d':function(z,W){return z>W;},'b9D':function(z,W){return z<W;},'O6s':function(z,W){return z!==W;},'w2C':function(z,W){return z<W;},'w7s':function(z,W){return z!==W;},'v0R':function(z,W){return z|W;},'N51':function(z,W){return z!=W;},'d19':function(z,W){return z>W;},'J4Z':function(z,W){return z in W;},'I1R':function(z,W){return z===W;},'Z60':function(z,W){return z/W;},'Y46':function(z,W){return z!==W;},'O2p':function(z,W){return z|W;},'B7X':function(z,W){return z>W;},'t5P':function(z,W){return z!==W;},'C3s':function(z,W){return z>W;},'b19':function(z,W){return z<W;},'k1p':function(z,W,Z){return z^W^Z;},'j5L':function(z,W){return z<W;},'Z96':function(z,W){return z>W;},'x4B':function(z,W){return z!==W;},'Y4v':function(z,W){return z!==W;},'t91':function(z,W){return z>>>W;},'K2C':function(z,W){return z instanceof W;},'G7X':function(z,W){return z!==W;},'c53':function(z,W){return z|W;},'X60':function(z,W){return z<W;},'H4':function(z,W){return z<W;},'u8L':function(z,W){return z&W;},'V9R':function(z,W){return z>W;},'Z4p':function(z,W){return z>W;},'X33':function(z,W){return z===W;},'h0p':function(z,W){return z>W;},'c46':function(z,W){return z!==W;},'w3Z':function(z,W){return z!==W;},'a9':function(z,W){return z==W;},'X3L':function(z,W){return z>>>W;},'E9P':function(z,W){return z/W;},'j5D':function(z,W){return z===W;},'Y6C':function(z,W){return z<W;},'Y0B':function(z,W){return z>W;},'m4B':function(z,W){return z>W;},'X4P':function(z,W){return z*W;},'r79':function(z,W){return z>W;},'D0g':function(z,W){return z-W;},'z8s':function(z,W){return z<W;},'J2A':function(z,W){return z===W;},'v8A':function(z,W){return z!=W;},'M0E':function(z,W){return z<=W;},'l36':function(z,W){return z!==W;},'x79':function(z,W){return z>W;},'x9E':function(z,W){return z>W;},'T3p':function(z,W){return z>W;},'S8y':function(z,W){return z>W;},'F1y':function(z,W){return z<W;},'q99':function(z,W){return z!==W;},'r2g':function(z,W){return z>W;},'Z6P':function(z,W){return z-W;},'x71':function(z,W){return z!==W;},'M5B':function(z,W){return z!==W;},'e3Z':function(z,W){return z!==W;},'C2R':function(z,W){return z<W;},'f7D':function(z,W){return z<<W;},'B1y':function(z,W){return z===W;},'g2P':function(z,W){return z>=W;},'a13':function(z,W){return z^W;},'V9Z':function(z,W){return z/W;},'p9w':function(z,W){return z===W;},'p5y':function(z,W){return z<W;},'Y5D':function(z,W){return z<<W;},'D2w':function(z,W){return z>W;},'z3P':function(z,W){return z<W;},'w00':function(z,W){return z!=W;},'Z7y':function(z,W){return z!=W;},'P6g':function(z,W){return z>W;},'h8v':function(z,W){return z/W;},'t4L':function(z,W){return z-W;},'B5B':function(z,W){return z===W;},'h9C':function(z,W){return z>W;},'c3R':function(z,W){return z-W;},'K03':function(z,W){return z<W;},'w5L':function(z,W){return z==W;},'b1y':function(z,W){return z<W;},'E7E':function(z,W){return z<W;},'R0w':function(z,W){return z===W;},'v5w':function(z,W){return z/W;},'q9y':function(z,W){return z===W;},'R6L':function(z,W){return z<W;},'K1Z':function(z,W){return z!=W;},'Q2D':function(z,W){return z===W;},'n1P':function(z,W){return z*W;},'r2Z':function(z,W){return z!=W;},'S9C':function(z,W){return z%W;},'Z7v':function(z,W){return z==W;},'l7d':function(z,W){return z-W;},'a23':function(z,W){return z in W;},'B50':function(z,W){return z!==W;},'C6P':function(z,W){return z>=W;},'x9Z':function(z,W){return z-W;},'z8d':function(z,W){return z!==W;},'u2E':function(z,W){return z-W;},'U8d':function(z,W){return z>W;},'C7v':function(z,W){return z<W;},'R9':function(z,W){return z-W;},'b4s':function(z,W){return z===W;},'U7R':function(z,W,Z){return z|W|Z;},'w6y':function(z,W){return z in W;},'Q2L':function(z,W){return z>>>W;},'p7C':function(z,W){return z<W;},'s46':function(z,W){return z-W;},'x6X':function(z,W){return z===W;},'v73':function(z,W){return z>>W;},'H96':function(z,W){return z-W;},'E61':function(z,W){return z!==W;},'Y8d':function(z,W){return z===W;},'m33':function(z,W){return z|W;},'T2d':function(z,W){return z===W;},'x9P':function(z,W){return z!==W;},'H7y':function(z,W){return z>=W;},'s3g':function(z,W){return z===W;},'p2g':function(z,W){return z>W;},'g7v':function(z,W){return z/W;},'X9w':function(z,W){return z>W;},'n4E':function(z,W){return z/W;},'f2R':function(z,W){return z-W;},'r7C':function(z,W){return z<W;},'p2B':function(z,W){return z>W;},'w69':function(z,W){return z>W;},'V0':function(z,W){return z!=W;},'z7L':function(z,W){return z<<W;},'M2D':function(z,W){return z>W;},'E6A':function(z,W){return z==W;},'A46':function(z,W){return z<W;},'b9p':function(z,W){return z&W;},'S7E':function(z,W){return z<W;},'B4d':function(z,W){return z>W;},'g4B':function(z,W){return z>W;},'R39':function(z,W){return z<<W;},'A7R':function(z,W){return z&W;},'v8g':function(z,W){return z===W;},'e29':function(z,W){return z>W;},'L1v':function(z,W){return z>=W;},'e7s':function(z,W){return z!==W;},'r9w':function(z,W){return z<=W;},'q2X':function(z,W){return z<W;},'Q06':function(z,W){return z-W;},'T06':function(z,W){return z!==W;},'c3A':function(z,W){return z>W;},'U30':function(z,W){return z!==W;},'H7C':function(z,W){return z<W;},'u81':function(z,W){return z-W;},'o4g':function(z,W){return z<W;},'s3Z':function(z,W){return z===W;},'n6E':function(z,W){return z-W;},'u00':function(z,W){return z===W;},'n3Z':function(z,W){return z===W;},'V9C':function(z,W){return z>W;},'F9D':function(z,W){return z&W;},'K3P':function(z,W){return z<W;},'l4y':function(z,W){return z-W;},'D49':function(z,W){return z>W;},'q2g':function(z,W){return z===W;},'C3D':function(z,W){return z%W;},'r4B':function(z,W){return z>W;},'u6E':function(z,W){return z/W;},'G3w':function(z,W){return z==W;},'q3s':function(z,W){return z!==W;},'J6p':function(z,W){return z-W;},'j9s':function(z,W){return z===W;},'c1A':function(z,W){return z!=W;},'P6P':function(z,W){return z*W;},'v16':function(z,W){return z>W;},'Z3v':function(z,W){return z-W;},'I5w':function(z,W){return z!==W;},'C9Z':function(z,W){return z-W;},'a6d':function(z,W){return z!=W;},'u4w':function(z,W){return z<=W;},'s0B':function(z,W){return z===W;},'C8E':function(z,W){return z>W;},'e81':function(z,W){return z>W;},'k4v':function(z,W){return z!==W;},'U3X':function(z,W){return z===W;},'R9D':function(z,W){return z<W;},'x9C':function(z,W){return z>>>W;},'f2B':function(z,W){return z-W;},'S20':function(z,W){return z-W;},'D5d':function(z,W){return z!==W;},'u3g':function(z,W){return z>=W;},'t09':function(z,W){return z!==W;},'P9P':function(z,W){return z-W;},'K2y':function(z,W){return z>=W;},'z53':function(z,W){return z|W;},'F6L':function(z,W){return z|W;},'a8B':function(z,W){return z===W;},'W3y':function(z,W){return z===W;},'n7L':function(z,W){return z<<W;},'P63':function(z,W,Z,K,R){return z^W^Z^K^R;},'J6X':function(z,W){return z===W;},'r6X':function(z,W){return z===W;},'S4B':function(z,W){return z|W;},'P6A':function(z,W){return z==W;},'u7s':function(z,W){return z===W;},'j1Z':function(z,W){return z>W;},'i9A':function(z,W){return z-W;},'j1X':function(z,W){return z===W;},'O1C':function(z,W){return z-W;},'t7B':function(z,W){return z===W;},'T2s':function(z,W){return z<W;},'X8w':function(z,W){return z>W;},'I6s':function(z,W){return z!==W;},'x8w':function(z,W){return z===W;},'p7D':function(z,W){return z>W;},'p7E':function(z,W){return z===W;},'e1B':function(z,W){return z>W;},'m0L':function(z,W){return z|W;},'e5X':function(z,W){return z!==W;},'P20':function(z,W){return z!==W;},'h59':function(z,W){return z===W;},'T19':function(z,W){return z<W;},'M4s':function(z,W){return z===W;},'M5A':function(z,W){return z===W;},'F0R':function(z,W){return z|W;},'U81':function(z,W){return z!==W;},'o4':function(z,W){return z>W;},'v21':function(z,W){return z!==W;},'Z31':function(z,W){return z==W;},'N0g':function(z,W){return z!==W;},'C4D':function(z,W){return z|W;},'m0':function(z,W){return z>W;},'r60':function(z,W){return z>W;},'p96':function(z,W){return z>W;},'x5C':function(z,W){return z<W;},'F7P':function(z,W){return z-W;},'C79':function(z,W){return z>W;},'r5C':function(z,W){return z!==W;},'d7g':function(z,W){return z===W;},'o0':function(z,W){return z/W;},'j26':function(z,W){return z>W;},'D8s':function(z,W){return z<W;},'G1v':function(z,W){return z&W;},'C8w':function(z,W){return z==W;},'B9g':function(z,W){return z>W;},'m3D':function(z,W){return z>>>W;},'T7B':function(z,W){return z|W;},'p2P':function(z,W){return z<W;},'Y53':function(z,W){return z!==W;},'J6g':function(z,W){return z/W;},'K1X':function(z,W){return z<W;},'g6X':function(z,W){return z==W;},'M1R':function(z,W){return z!==W;},'U2E':function(z,W){return z===W;},'K4E':function(z,W){return z/W;},'a8A':function(z,W){return z<W;},'a16':function(z,W){return z>W;},'m9P':function(z,W){return z!==W;},'B3p':function(z,W){return z%W;},'F4d':function(z,W){return z!==W;},'e4R':function(z,W){return z<<W;},'Y7d':function(z,W){return z>W;},'C59':function(z,W){return z<<W;},'Z3d':function(z,W){return z!==W;},'d36':function(z,W){return z>>>W;},'D2y':function(z,W){return z>W;},'t1R':function(z,W){return z===W;},'x86':function(z,W){return z|W;},'c2C':function(z,W){return z===W;},'i59':function(z,W){return z===W;},'n8L':function(z,W){return z|W;},'O9':function(z,W){return z!=W;},'a6s':function(z,W){return z==W;},'i0w':function(z,W){return z<=W;},'m1L':function(z,W){return z>=W;},'l9s':function(z,W){return z==W;},'m71':function(z,W){return z-W;},'I73':function(z,W){return z<W;},'J0L':function(z,W){return z<<W;},'y3A':function(z,W){return z>W;},'G0y':function(z,W){return z instanceof W;},'d1E':function(z,W){return z/W;},'u5X':function(z,W){return z!==W;},'W5R':function(z,W){return z*W;},'s6E':function(z,W){return z/W;},'w0P':function(z,W){return z>W;},'n30':function(z,W){return z>W;},'Q0v':function(z,W){return z<W;},'U11':function(z,W){return z*W;},'m9w':function(z,W){return z>W;},'O19':function(z,W){return z>W;},'Q3C':function(z,W){return z<W;},'Z2X':function(z,W){return z===W;},'e5d':function(z,W){return z/W;},'d91':function(z,W){return z>>>W;},'U7d':function(z,W){return z>=W;},'I06':function(z,W){return z>W;},'X4B':function(z,W){return z>W;},'a21':function(z,W){return z!==W;},'E76':function(z,W){return z>W;},'I5E':function(z,W){return z===W;},'b8Z':function(z,W){return z>W;},'e53':function(z,W,Z,K,R){return z|W|Z|K|R;},'j49':function(z,W){return z!==W;},'r6g':function(z,W){return z-W;},'P3d':function(z,W){return z<W;},'U29':function(z,W){return z>W;},'S9R':function(z,W){return z>W;},'B2L':function(z,W){return z>>>W;},'h4A':function(z,W){return z==W;},'c4v':function(z,W){return z<W;},'n3A':function(z,W){return z>W;},'u1g':function(z,W){return z===W;},'v7P':function(z,W){return z>W;},'a09':function(z,W){return z!==W;},'B7B':function(z,W){return z!==W;},'G59':function(z,W){return z>W;},'D7s':function(z,W){return z!=W;},'Q8A':function(z,W){return z>W;},'O9D':function(z,W){return z>W;},'Y0p':function(z,W){return z^W;},'Q70':function(z,W){return z!==W;},'g4P':function(z,W){return z/W;},'H0':function(z,W){return z instanceof W;},'v5R':function(z,W){return z>W;},'a2p':function(z,W){return z>>>W;},'R1v':function(z,W){return z/W;},'l51':function(z,W){return z!=W;},'m5y':function(z,W){return z!==W;},'u3A':function(z,W){return z==W;},'L8P':function(z,W){return z*W;},'k6w':function(z,W){return z<W;},'t1p':function(z,W,Z,K){return z^W^Z^K;},'P6X':function(z,W){return z<W;},'z03':function(z,W){return z^W;},'h43':function(z,W){return z>=W;},'F7Z':function(z,W){return z>W;},'h8D':function(z,W){return z===W;},'R06':function(z,W){return z>W;},'a0v':function(z,W){return z===W;},'R50':function(z,W){return z!==W;},'Z8w':function(z,W){return z<W;},'B6R':function(z,W){return z>W;},'F1D':function(z,W){return z-W;},'J3s':function(z,W){return z>=W;},'I8p':function(z,W){return z&W;},'V7y':function(z,W){return z/W;},'n1Z':function(z,W){return z>W;},'x76':function(z,W){return z>W;},'r1d':function(z,W){return z===W;},'M4d':function(z,W){return z/W;},'W8v':function(z,W){return z>W;},'s3X':function(z,W){return z==W;},'a9p':function(z,W){return z-W;},'m11':function(z,W,Z){return z*W/Z;},'R1D':function(z,W){return z===W;},'K2w':function(z,W){return z-W;},'f0':function(z,W,Z){return z-W-Z;},'d0E':function(z,W){return z in W;},'J4B':function(z,W){return z>W;},'r1L':function(z,W){return z<<W;},'O4d':function(z,W){return z==W;},'F1w':function(z,W){return z===W;},'t8p':function(z,W){return z==W;},'z3E':function(z,W){return z===W;},'h9L':function(z,W){return z==W;},'a7Z':function(z,W){return z>W;},'C6Z':function(z,W){return z>W;},'V9v':function(z,W){return z===W;},'n8s':function(z,W){return z===W;},'s5Z':function(z,W){return z/W;},'f2v':function(z,W){return z>>>W;},'R2L':function(z,W){return z&W;},'x1s':function(z,W){return z!==W;},'T23':function(z,W){return z!==W;},'K9s':function(z,W){return z!==W;},'K81':function(z,W){return z!==W;},'W8P':function(z,W){return z===W;},'c03':function(z,W){return z>W;},'A10':function(z,W){return z>W;},'b2s':function(z,W){return z>W;},'x99':function(z,W){return z>W;},'p3L':function(z,W){return z>W;},'p3D':function(z,W){return z>W;},'f99':function(z,W){return z>W;},'S4Z':function(z,W){return z>W;},'W16':function(z,W){return z&W;},'L80':function(z,W){return z-W;},'G06':function(z,W){return z>W;},'K8D':function(z,W){return z>W;},'n5v':function(z,W){return z!==W;},'U0g':function(z,W){return z===W;},'X9C':function(z,W){return z/W;},'V9E':function(z,W){return z==W;},'V3v':function(z,W){return z===W;},'K49':function(z,W){return z>W;},'a5P':function(z,W){return z===W;},'n3E':function(z,W){return z!=W;},'o0s':function(z,W){return z===W;},'p0s':function(z,W){return z===W;},'E5C':function(z,W){return z==W;},'w8L':function(z,W){return z-W;},'C8D':function(z,W){return z===W;},'b7g':function(z,W){return z!==W;},'z0P':function(z,W){return z>W;},'u49':function(z,W){return z>W;},'Z7w':function(z,W){return z!==W;},'d2D':function(z,W){return z===W;},'L8Z':function(z,W){return z<W;},'t2L':function(z,W){return z>>>W;},'X6Z':function(z,W){return z-W;},'H9L':function(z,W){return z>W;},'H2E':function(z,W){return z>W;},'l6E':function(z,W){return z<=W;},'l1g':function(z,W){return z>W;},'R93':function(z,W){return z|W;},'a1E':function(z,W){return z===W;},'g71':function(z,W){return z!==W;},'D5D':function(z,W){return z-W;},'A66':function(z,W){return z&W;},'Y26':function(z,W){return z>W;},'n6v':function(z,W){return z==W;},'g20':function(z,W){return z/W;},'f71':function(z,W){return z===W;},'I8g':function(z,W){return z!=W;},'i9Z':function(z,W){return z-W;},'E0s':function(z,W){return z===W;},'m7E':function(z,W){return z<W;},'O8R':function(z,W,Z){return z|W|Z;},'K51':function(z,W){return z>W;},'r7y':function(z,W){return z in W;},'F9p':function(z,W){return z<<W;},'g76':function(z,W){return z===W;},'N0R':function(z,W){return z>W;},'y5X':function(z,W){return z<W;},'V8v':function(z,W){return z*W;},'P9E':function(z,W){return z!=W;},'N0B':function(z,W){return z>W;},'w30':function(z,W){return z!==W;},'c1g':function(z,W){return z>W;},'K4v':function(z,W){return z!==W;},'J4A':function(z,W){return z!=W;},'M8Z':function(z,W){return z<W;},'q9C':function(z,W){return z>>>W;},'c1B':function(z,W){return z!==W;},'Y1X':function(z,W){return z*W;},'A7L':function(z,W){return z&W;},'q6Z':function(z,W){return z==W;},'K9d':function(z,W){return z instanceof W;},'a5E':function(z,W){return z!==W;},'Z8E':function(z,W){return z>W;},'B56':function(z,W){return z!==W;},'w0D':function(z,W){return z>W;},'w46':function(z,W){return z>W;},'y00':function(z,W){return z>W;},'b5A':function(z,W){return z>W;},'I6p':function(z,W){return z|W;},'j2v':function(z,W,Z){return z/W*Z;},'S1d':function(z,W){return z>W;},'j3R':function(z,W){return z==W;},'t4p':function(z,W){return z===W;},'Y3A':function(z,W){return z>W;},'r86':function(z,W){return z!==W;},'v8B':function(z,W){return z!==W;},'d70':function(z,W){return z>W;},'w5d':function(z,W){return z>W;},'L13':function(z,W,Z,K){return z^W^Z^K;},'D10':function(z,W){return z>W;},'E7D':function(z,W){return z>=W;},'f7E':function(z,W){return z<=W;},'x0s':function(z,W){return z===W;},'a7X':function(z,W){return z!==W;},'B1v':function(z,W){return z instanceof W;},'l7R':function(z,W){return z|W;},'D36':function(z,W,Z){return z<<W>>>Z;},'d7X':function(z,W){return z===W;},'N2w':function(z,W){return z===W;},'h7v':function(z,W){return z>W;},'m6p':function(z,W,Z,K){return z|W|Z|K;},'D46':function(z,W){return z>W;},'m2X':function(z,W){return z/W;},'z1P':function(z,W){return z/W;},'E7v':function(z,W){return z===W;},'e0A':function(z,W){return z!=W;},'O0R':function(z,W){return z|W;},'B4s':function(z,W){return z===W;},'j6R':function(z,W,Z){return z/W*Z;},'y53':function(z,W){return z===W;},'a3p':function(z,W){return z|W;},'F5p':function(z,W){return z<<W;},'I23':function(z,W){return z>=W;},'g7D':function(z,W){return z>>>W;},'F7X':function(z,W){return z===W;},'h41':function(z,W){return z===W;},'X20':function(z,W){return z/W;},'o3s':function(z,W){return z>=W;},'e0P':function(z,W){return z/W;},'X7D':function(z,W){return z>=W;},'I39':function(z,W){return z===W;},'j0Z':function(z,W){return z>=W;},'T6d':function(z,W){return z*W;},'O59':function(z,W){return z>W;},'a1y':function(z,W){return z in W;},'t01':function(z,W){return z>=W;},'q79':function(z,W){return z>W;},'p3X':function(z,W){return z===W;},'x2X':function(z,W){return z===W;},'N0A':function(z,W){return z==W;},'f9v':function(z,W){return z-W;},'k9d':function(z,W){return z>=W;},'J99':function(z,W){return z>W;},'N5D':function(z,W){return z===W;},'d1w':function(z,W){return z===W;},'A0g':function(z,W){return z===W;},'d01':function(z,W){return z===W;},'D6y':function(z,W){return z in W;},'e3P':function(z,W){return z instanceof W;},'g60':function(z,W){return z===W;},'p20':function(z,W){return z!==W;},'c13':function(z,W,Z){return z^W^Z;},'C2X':function(z,W){return z===W;},'I9g':function(z,W,Z){return z*W/Z;},'U26':function(z,W){return z>W;},'v09':function(z,W){return z>W;},'p2E':function(z,W){return z===W;},'a6L':function(z,W){return z|W;},'j69':function(z,W){return z>W;},'P4':function(z,W){return z instanceof W;},'B21':function(z,W){return z==W;},'C6X':function(z,W){return z<W;},'Q7A':function(z,W){return z==W;},'Z7C':function(z,W){return z<W;},'W70':function(z,W){return z>W;},'j10':function(z,W){return z<W;},'l4w':function(z,W){return z===W;},'H9Z':function(z,W){return z>=W;},'S2E':function(z,W){return z-W;},'u4R':function(z,W){return z>W;},'T09':function(z,W){return z!==W;},'a93':function(z,W){return z*W;},'R4L':function(z,W){return z&W;},'c4R':function(z,W){return z>W;},'m63':function(z,W){return z>W;},'Z43':function(z,W){return z===W;},'h6B':function(z,W){return z>W;},'m89':function(z,W){return z-W;},'Q8Z':function(z,W){return z==W;},'Y3w':function(z,W,Z){return z/W*Z;},'L6d':function(z,W){return z>W;},'x6P':function(z,W){return z!==W;},'l3A':function(z,W){return z>W;},'N3B':function(z,W){return z<=W;},'A3w':function(z,W){return z===W;},'N6C':function(z,W){return z|W;},'r9v':function(z,W){return z===W;},'d50':function(z,W){return z===W;},'T7g':function(z,W){return z-W;},'N9d':function(z,W){return z!==W;},'C9v':function(z,W){return z>W;},'I91':function(z,W){return z>>>W;},'y6v':function(z,W){return z!==W;},'E4Z':function(z,W){return z<<W;},'n0A':function(z,W){return z==W;},'X3d':function(z,W){return z>W;},'u5v':function(z,W){return z===W;},'j9d':function(z,W){return z>W;},'J4':function(z,W){return z==W;},'Q21':function(z,W){return z!=W;},'q0d':function(z,W){return z!==W;},'B9D':function(z,W){return z!==W;},'x3s':function(z,W){return z!==W;},'e11':function(z,W){return z>=W;},'n4y':function(z,W){return z!==W;},'U3P':function(z,W){return z!=W;},'K6D':function(z,W){return z>W;},'K6C':function(z,W){return z>W;},'y46':function(z,W){return z>W;},'K1A':function(z,W){return z==W;},'A53':function(z,W){return z===W;},'l5d':function(z,W){return z<W;},'p4g':function(z,W){return z>W;},'W7P':function(z,W){return z>W;},'g9y':function(z,W){return z<W;},'y6D':function(z,W){return z===W;},'d2L':function(z,W){return z*W;},'E8y':function(z,W){return z!==W;},'D51':function(z,W){return z!=W;},'Q7Z':function(z,W){return z>W;},'Q23':function(z,W){return z in W;},'s6D':function(z,W){return z&W;},'Z4A':function(z,W){return z!=W;},'j5X':function(z,W){return z!=W;},'r11':function(z,W){return z>=W;},'z5D':function(z,W){return z===W;},'Y5s':function(z,W){return z!==W;},'c7d':function(z,W){return z*W;},'v2d':function(z,W){return z>W;},'W0C':function(z,W){return z<W;},'U1Z':function(z,W){return z>W;},'n1p':function(z,W,Z,K,R){return z^W^Z^K^R;},'G0C':function(z,W){return z<W;},'S71':function(z,W){return z*W;},'I8A':function(z,W){return z==W;},'D8d':function(z,W){return z===W;},'a1w':function(z,W){return z>W;},'h4D':function(z,W){return z>W;},'q2A':function(z,W){return z===W;},'F56':function(z,W){return z>W;},'d4p':function(z,W){return z&W;},'c30':function(z,W){return z!==W;},'l3g':function(z,W){return z!=W;},'Q0y':function(z,W){return z-W;},'Y5L':function(z,W){return z>W;},'C33':function(z,W){return z|W;},'k6y':function(z,W){return z-W;},'m60':function(z,W){return z instanceof W;},'r3D':function(z,W){return z-W;},'m9R':function(z,W){return z===W;},'Q6L':function(z,W){return z|W;},'G16':function(z,W){return z!==W;},'g1L':function(z,W){return z>W;},'s03':function(z,W){return z*W;},'x2P':function(z,W){return z>W;},'f3L':function(z,W){return z|W;},'k3E':function(z,W){return z>W;},'F1E':function(z,W){return z!==W;},'p2A':function(z,W){return z!=W;},'B90':function(z,W){return z<W;},'I9p':function(z,W){return z&W;},'C20':function(z,W){return z/W;},'j1A':function(z,W){return z==W;},'W0E':function(z,W){return z<=W;},'W5g':function(z,W){return z<W;},'M5p':function(z,W){return z>W;},'H9v':function(z,W){return z>=W;},'m86':function(z,W){return z&W;},'t1D':function(z,W){return z-W;},'o3L':function(z,W){return z<W;},'b56':function(z,W){return z>>>W;},'f8w':function(z,W){return z>W;},'C2P':function(z,W){return z>W;},'q1L':function(z,W){return z==W;},'B6s':function(z,W){return z===W;},'z26':function(z,W){return z==W;},'n6y':function(z,W){return z!==W;},'M7Z':function(z,W){return z*W;},'h7E':function(z,W){return z<=W;},'t13':function(z,W){return z>W;},'E9R':function(z,W){return z-W;},'C31':function(z,W){return z instanceof W;},'Z2Z':function(z,W){return z>W;},'C9E':function(z,W){return z>=W;},'E5v':function(z,W,Z){return z-W+Z;},'d8Z':function(z,W){return z!==W;},'B0y':function(z,W){return z>=W;},'G50':function(z,W){return z<W;},'B13':function(z,W,Z,K){return z^W^Z^K;},'F5w':function(z,W){return z!==W;},'A0A':function(z,W){return z!=W;},'A1A':function(z,W){return z==W;},'x4':function(z,W){return z==W;},'y4R':function(z,W){return z>W;},'l1B':function(z,W){return z>W;},'l0B':function(z,W){return z===W;},'i0E':function(z,W){return z<=W;},'Q4L':function(z,W){return z>W;},'I19':function(z,W){return z!==W;},'I1y':function(z,W){return z<W;},'D7R':function(z,W){return z>W;},'S31':function(z,W){return z instanceof W;},'R0E':function(z,W){return z<=W;},'O56':function(z,W){return z>W;},'O5B':function(z,W){return z-W;},'c0X':function(z,W){return z===W;},'G1E':function(z,W){return z===W;},'X2P':function(z,W){return z-W;},'F0v':function(z,W){return z<W;},'P2P':function(z,W){return z>W;},'K8s':function(z,W){return z==W;},'P41':function(z,W){return z<W;},'B4L':function(z,W){return z>W;},'U4y':function(z,W){return z<W;},'Z2E':function(z,W){return z===W;},'e0X':function(z,W){return z>W;},'s4E':function(z,W){return z>W;},'n5d':function(z,W){return z-W;},'Y4w':function(z,W){return z===W;},'f8E':function(z,W){return z<W;},'u5d':function(z,W){return z>W;},'i0v':function(z,W){return z===W;},'v90':function(z,W){return z===W;},'o5y':function(z,W){return z!==W;},'X8E':function(z,W){return z>W;},'G21':function(z,W){return z instanceof W;},'T2p':function(z,W){return z|W;},'e9d':function(z,W){return z===W;},'a2L':function(z,W){return z>>>W;},'d8A':function(z,W){return z<W;},'W5A':function(z,W){return z===W;},'G0E':function(z,W){return z<=W;},'E6B':function(z,W){return z|W;},'x4P':function(z,W){return z!=W;},'I09':function(z,W){return z>W;},'r8w':function(z,W){return z-W;},'B8A':function(z,W){return z*W;},'k1X':function(z,W){return z<W;},'W90':function(z,W){return z!=W;},'L19':function(z,W){return z!==W;},'x2g':function(z,W){return z<W;},'d90':function(z,W){return z*W;},'m8E':function(z,W){return z<W;},'g7y':function(z,W){return z!=W;},'H79':function(z,W){return z!==W;},'D7L':function(z,W){return z<W;},'Z9v':function(z,W){return z!==W;},'n4v':function(z,W){return z<W;},'m1d':function(z,W){return z!=W;},'A3B':function(z,W){return z|W;},'Z6X':function(z,W){return z===W;},'i09':function(z,W){return z!==W;},'X1L':function(z,W){return z==W;},'N10':function(z,W){return z>W;},'P40':function(z,W){return z===W;},'L0v':function(z,W){return z-W;},'i5p':function(z,W){return z<<W;},'c0A':function(z,W){return z*W;},'F3C':function(z,W){return z<W;},'J9R':function(z,W){return z>W;},'B01':function(z,W){return z<W;},'G6s':function(z,W){return z!==W;},'F16':function(z,W){return z!==W;},'D3E':function(z,W){return z!==W;},'Z3L':function(z,W){return z<=W;},'q7D':function(z,W){return z!==W;},'F5R':function(z,W){return z%W;},'m6g':function(z,W){return z/W;},'t6s':function(z,W){return z===W;},'V8C':function(z,W){return z===W;},'n53':function(z,W){return z!==W;},'A49':function(z,W){return z>W;},'R5B':function(z,W){return z!==W;},'E7w':function(z,W){return z/W;},'A2y':function(z,W){return z-W;},'f0L':function(z,W){return z<<W;},'X8y':function(z,W){return z===W;},'Y69':function(z,W){return z!==W;},'P2Z':function(z,W){return z>W;},'x89':function(z,W){return z>W;},'d4d':function(z,W){return z===W;},'k1Z':function(z,W){return z===W;},'f59':function(z,W){return z===W;},'x40':function(z,W){return z*W;},'f4':function(z,W){return z*W;},'M5g':function(z,W){return z!==W;},'c6C':function(z,W){return z|W;},'A00':function(z,W){return z===W;},'c0B':function(z,W){return z>W;},'N4y':function(z,W){return z-W;},'G1y':function(z,W){return z<W;},'q4g':function(z,W){return z===W;},'m4g':function(z,W){return z>W;},'j7R':function(z,W){return z|W;},'F7B':function(z,W){return z!==W;},'T21':function(z,W){return z>W;},'i9p':function(z,W){return z&W;},'E4p':function(z,W){return z-W;},'n5D':function(z,W){return z>W;},'T1R':function(z,W){return z!=W;},'B1E':function(z,W){return z>W;},'t5g':function(z,W){return z===W;},'X9v':function(z,W){return z>W;},'S8C':function(z,W){return z<W;},'M19':function(z,W){return z<W;},'P9v':function(z,W){return z===W;},'c3P':function(z,W){return z==W;},'O7P':function(z,W){return z==W;},'a06':function(z,W){return z>W;},'J1L':function(z,W){return z>W;},'N3P':function(z,W){return z===W;},'L4L':function(z,W){return z<W;},'o9y':function(z,W){return z!==W;},'t7p':function(z,W,Z,K,R){return z^W^Z^K^R;},'y8D':function(z,W){return z===W;},'v7Z':function(z,W){return z>W;},'v2L':function(z,W){return z*W;},'V2A':function(z,W){return z===W;},'f6B':function(z,W){return z>W;},'X61':function(z,W){return z!==W;},'t5E':function(z,W){return z/W;},'B8g':function(z,W){return z!==W;},'l0p':function(z,W){return z^W;},'R21':function(z,W){return z!=W;},'m41':function(z,W){return z===W;},'z5s':function(z,W){return z!==W;},'O90':function(z,W){return z/W;},'B1D':function(z,W){return z===W;},'H3X':function(z,W){return z>W;},'I8B':function(z,W){return z>W;},'S6g':function(z,W){return z===W;},'k83':function(z,W){return z===W;},'g4g':function(z,W){return z/W;},'Q5E':function(z,W){return z>W;},'v4s':function(z,W){return z==W;},'z4w':function(z,W){return z===W;},'q60':function(z,W){return z-W;},'x43':function(z,W){return z|W;},'N83':function(z,W){return z===W;},'f20':function(z,W){return z/W;},'t9A':function(z,W){return z!=W;},'k4w':function(z,W){return z-W;},'u0P':function(z,W){return z>W;},'N29':function(z,W){return z==W;},'J0d':function(z,W){return z/W;},'H0d':function(z,W){return z!==W;},'F6d':function(z,W){return z*W;},'N0Z':function(z,W){return z==W;},'G8X':function(z,W){return z<W;},'Z2g':function(z,W){return z===W;},'H1d':function(z,W){return z*W;},'A6E':function(z,W){return z*W;},'K5L':function(z,W){return z>W;},'L0R':function(z,W){return z!=W;},'e66':function(z,W){return z&W;},'D3B':function(z,W){return z===W;},'e6C':function(z,W){return z instanceof W;},'t5A':function(z,W){return z!=W;},'r4':function(z,W){return z!=W;},'i7g':function(z,W){return z>=W;},'K3A':function(z,W){return z>W;},'O8P':function(z,W){return z-W;},'A2w':function(z,W){return z-W;},'o60':function(z,W){return z!==W;},'P5C':function(z,W){return z instanceof W;},'X2g':function(z,W){return z==W;},'P2R':function(z,W){return z-W;},'W19':function(z,W){return z<W;},'t4s':function(z,W){return z!==W;},'R1w':function(z,W){return z===W;},'z1p':function(z,W){return z==W;},'w83':function(z,W){return z<W;},'R3C':function(z,W){return z instanceof W;},'p7y':function(z,W){return z-W;},'B7Z':function(z,W){return z>W;},'s4C':function(z,W){return z<W;},'g9L':function(z,W){return z==W;},'L3y':function(z,W){return z-W;},'c7R':function(z,W){return z&W;},'h2B':function(z,W){return z>W;},'M9A':function(z,W){return z==W;},'w2y':function(z,W){return z>W;},'I2L':function(z,W){return z>>>W;},'w0Z':function(z,W){return z instanceof W;},'n5L':function(z,W){return z!=W;},'j0X':function(z,W){return z!==W;},'Z40':function(z,W){return z===W;},'L5A':function(z,W){return z==W;},'M8B':function(z,W){return z<=W;},'p4D':function(z,W){return z<W;},'a50':function(z,W){return z!==W;},'f1L':function(z,W){return z|W;},'u7R':function(z,W){return z>W;},'D3R':function(z,W){return z<W;},'Y3g':function(z,W){return z/W;},'o89':function(z,W){return z<W;},'x8D':function(z,W){return z-W;},'X76':function(z,W){return z>=W;},'b13':function(z,W){return z===W;},'A5s':function(z,W){return z===W;},'k5Z':function(z,W){return z>W;},'d2s':function(z,W){return z!==W;},'A0Z':function(z,W){return z<W;},'J20':function(z,W){return z===W;},'t5w':function(z,W){return z>W;},'o6B':function(z,W){return z>W;},'o2P':function(z,W){return z==W;},'X8R':function(z,W){return z|W;},'j3g':function(z,W){return z==W;},'i0y':function(z,W){return z>W;},'S4A':function(z,W){return z!=W;},'S3L':function(z,W){return z&W;},'r7w':function(z,W){return z!==W;},'x33':function(z,W){return z>W;},'i5g':function(z,W){return z!==W;},'v5P':function(z,W){return z>W;},'O7X':function(z,W){return z!==W;},'T90':function(z,W){return z==W;},'W8Z':function(z,W){return z-W;},'i6R':function(z,W){return z>W;},'u5Z':function(z,W){return z>W;},'C2p':function(z,W,Z){return z>>>W<<Z;},'k6C':function(z,W){return z>>>W;},'l29':function(z,W){return z>W;},'j1p':function(z,W){return z>W;},'a39':function(z,W){return z===W;},'f8R':function(z,W){return z<<W;},'B6d':function(z,W){return z>W;},'B1w':function(z,W){return z-W;},'R9g':function(z,W){return z/W;},'H4P':function(z,W){return z/W;},'c6D':function(z,W){return z===W;},'c36':function(z,W){return z>W;},'n4R':function(z,W){return z<W;},'I2D':function(z,W){return z===W;},'q89':function(z,W){return z>W;},'N49':function(z,W){return z>W;},'A51':function(z,W){return z==W;},'I36':function(z,W){return z>>>W;},'G5A':function(z,W){return z===W;},'J3d':function(z,W){return z>=W;},'U2y':function(z,W){return z>W;},'S8E':function(z,W){return z/W;},'S0d':function(z,W){return z*W;},'A3R':function(z,W){return z!=W;},'f96':function(z,W){return z>=W;},'s51':function(z,W){return z<W;},'m4Z':function(z,W){return z/W;},'Y5d':function(z,W){return z!==W;},'t8A':function(z,W){return z==W;},'W0w':function(z,W){return z<W;},'M70':function(z,W){return z===W;},'z9L':function(z,W){return z===W;},'q9R':function(z,W){return z>W;},'G5B':function(z,W){return z===W;},'a9g':function(z,W){return z/W;},'w4C':function(z,W){return z instanceof W;},'O91':function(z,W){return z-W;},'u3Z':function(z,W){return z&W;},'A8D':function(z,W){return z>W;},'i1D':function(z,W){return z-W;},'I5R':function(z,W){return z>W;},'K7L':function(z,W){return z&W;},'I21':function(z,W){return z!==W;},'S4g':function(z,W){return z!==W;},'f4A':function(z,W){return z==W;},'T0w':function(z,W){return z-W;},'A26':function(z,W){return z>W;},'W1D':function(z,W){return z>=W;},'o2E':function(z,W){return z===W;},'D00':function(z,W){return z!=W;},'S9v':function(z,W){return z>W;},'c10':function(z,W){return z/W;},'k6E':function(z,W){return z-W;},'Q59':function(z,W){return z-W;},'F6R':function(z,W){return z in W;},'K46':function(z,W){return z>W;},'W5v':function(z,W,Z){return z-W+Z;},'T4L':function(z,W){return z<W;},'f89':function(z,W){return z===W;},'B0v':function(z,W){return z/W;},'M5E':function(z,W){return z<W;},'y1P':function(z,W){return z/W;},'b4d':function(z,W){return z===W;},'L16':function(z,W){return z&W;},'S3v':function(z,W){return z*W;},'o6A':function(z,W){return z>W;},'d1p':function(z,W){return z|W;}};function X2JS(X){function z5(z,W){return "</"+(b9o.e51(null,z.__prefix)?z.__prefix+":":"")+W+">";}function o5(z,W,Z){var K="";if(b9o.x31(0,z.length))K+=Y5(z,W,Z,!0);else for(var R=0;b9o.m31(R,z.length);R++)K+=Y5(z[R],W,k5(z[R]),!1),K+=V5(z[R]),K+=z5(z[R],W);return K;}function W5(z){var W=z.localName;return b9o.Z0(null,W)&&(W=z.baseName),(b9o.p0(null,W)||b9o.P0("",W))&&(W=z.nodeName),W;}function C(z,W){return b9o.o31("property",X.arrayAccessForm)&&K5(W.toString(),"_asArray")||b9o.Z31(0,W.toString().indexOf(X.attributePrefix))||b9o.p31(0,W.toString().indexOf("__"))||b9o.P31(z[W],Function)?!0:!1;}function K5(z,W){return -1!==z.indexOf(W,b9o.U51(z.length,W.length));}function U(z){var W=z.split(/[-T:+Z]/g),Z=new Date(W[0],b9o.x0(W[1],1),W[2]),K=W[5].split(".");if(Z.setHours(W[3],W[4],K[0]),b9o.m0(K.length,1)&&Z.setMilliseconds(K[1]),W[6]&&W[7]){var R=b9o.X0(60,W[6])+Number(W[7]),N=/\d\d-\d\d:\d\d$/.test(z)?"-":"+";R=0+(b9o.g0("-",N)?-1*R:R),Z.setMinutes(b9o.f0(Z.getMinutes(),R,Z.getTimezoneOffset()));}else -1!==z.indexOf("Z",b9o.U0(z.length,1))&&(Z=new Date(Date.UTC(Z.getFullYear(),Z.getMonth(),Z.getDate(),Z.getHours(),Z.getMinutes(),Z.getSeconds(),Z.getMilliseconds())));return Z;}function Z5(){function Z(z){var W=String(z);return b9o.U7(1,W.length)&&(W="0"+W),W;}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"");}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+Z(this.getUTCMonth()+1)+"-"+Z(this.getUTCDate())+"T"+Z(this.getUTCHours())+":"+Z(this.getUTCMinutes())+":"+Z(this.getUTCSeconds())+"."+String((b9o.o0(this.getUTCMilliseconds(),1e3)).toFixed(3)).slice(2,5)+"Z";});}function p5(z){return z.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/");}function N5(z){return "string"==typeof z?z.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):z;}function R5(z,W,Z){if(b9o.o4(X.datetimeAccessFormPaths.length,0)){for(var K=Z.split(".#")[0],R=0;b9o.Z4(R,X.datetimeAccessFormPaths.length);R++){var N=X.datetimeAccessFormPaths[R];if("string"==typeof N){if(b9o.p4(N,K))break;}else if(b9o.P4(N,RegExp)){if(N.test(K))break;}else if("function"==typeof N&&N(obj,W,K))break;}return b9o.r4(R,X.datetimeAccessFormPaths.length)?U(z):z;}return z;}function b5(z){var W=0;if(b9o.r31(z,Object))for(var Z in z)C(z,Z)||W++;return W;}function j5(z){var W="";return b9o.q31(null,z.__cdata)&&(W+="<![CDATA["+z.__cdata+"]]>"),b9o.J31(null,z.__text)&&(W+=X.escapeMode?N5(z.__text):z.__text),W;}function T5(z){var W="";return b9o.H31(z,Object)?W+=j5(z):b9o.V31(null,z)&&(W+=X.escapeMode?N5(z):z),W;}function S5(R,N){if(b9o.S4(R.nodeType,A5.DOCUMENT_NODE)){for(var M=new Object,P=R.childNodes,A=0;b9o.E4(A,P.length);A++){var y=P.item(A);if(b9o.q4(y.nodeType,A5.ELEMENT_NODE)){var E=W5(y);M[E]=S5(y,E);}}return M;}if(b9o.J4(R.nodeType,A5.ELEMENT_NODE)){var B=function(z){M.__cnt=z;};var M=new Object;B(0);for(var P=R.childNodes,A=0;b9o.H4(A,P.length);A++){var y=P.item(A),E=W5(y);b9o.V4(y.nodeType,A5.COMMENT_NODE)&&(M.__cnt++,b9o.x4(null,M[E])?(M[E]=S5(y,N+"."+E),Q5(M,E,N+"."+E)):(b9o.m4(null,M[E])&&(b9o.X4(M[E],Array)||(M[E]=[M[E]],Q5(M,E,N+"."+E))),M[E][M[E].length]=S5(y,N+"."+E)));}for(var G=31536e3,q=2592e3,Y=86400,O=3600,V=60,w=60,H=1e3,D=/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)?S)?)$/,F=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,Q=/^[-+]?[0-9]+[.]?[0-9]*$/,x=[{type:"duration",test:function(z){return D.test(z);},converter:function(z){var W=D.exec(z);return b9o.g4(parseFloat(W[2]||0),G)+b9o.f4(parseFloat(W[3]||0),q)+b9o.h4(parseFloat(W[4]||0),Y)+b9o.C4(parseFloat(W[5]||0),O)+b9o.W9(parseFloat(W[6]||0),V)+parseFloat(W[7]||0);}},{type:"datetime",test:function(z){return F.test(z);},converter:function(z){var W,Z=F.exec(z);if(W=Date.UTC(parseInt(Z[1],10),b9o.R9(parseInt(Z[2],10),1),parseInt(Z[3],10),parseInt(Z[4],10),parseInt(Z[5],10),Z[6]&&parseInt(Z[6],10)||0,Z[7]&&b9o.M9(parseFloat(Z[7]),H)||0),Z[9]&&Z[10]){var K=b9o.b9(parseInt(Z[9],10),w)+parseInt(Z[10],10);W+=(b9o.i9("+",Z[8])?-1:1)*K*V*H;}return new Date(W);}},{type:"numeric",test:function(z){return Q.test(z);},converter:function(z){return parseFloat(z);}}],v=0;b9o.T9(v,R.attributes.length);v++){var u=function(z){M[X.attributePrefix+J.name]=z.formattedValue;};var J=R.attributes.item(v);M.__cnt++,J.formattedValue=J.value;for(var L=0;b9o.B9(L,x.length);L++)x[L].test(J.value)&&(J.formattedValue=x[L].converter(J.value));u(J);}var I=O5(R);return b9o.G9(null,I)&&b9o.O9("",I)&&(M.__cnt++,M.__prefix=I),b9o.Q9(null,M["#text"])&&(M.__text=M["#text"],b9o.F9(M.__text,Array)&&(M.__text=M.__text.join("\n")),X.escapeMode&&(M.__text=p5(M.__text)),X.stripWhitespaces&&(M.__text=M.__text.trim()),delete  M["#text"],b9o.a9("property",X.arrayAccessForm)&&delete  M["#text_asArray"],M.__text=R5(M.__text,E,N+"."+E)),b9o.v9(null,M["#cdata-section"])&&(M.__cdata=M["#cdata-section"],delete  M["#cdata-section"],b9o.I9("property",X.arrayAccessForm)&&delete  M["#cdata-section_asArray"]),b9o.d9(1,M.__cnt)&&b9o.t9(null,M.__text)?M=M.__text:b9o.L9(0,M.__cnt)&&b9o.z51("text",X.emptyNodeForm)?M="":b9o.K51(M.__cnt,1)&&b9o.N51(null,M.__text)&&X.skipEmptyTextNodesForObj&&(X.stripWhitespaces&&b9o.j51("",M.__text)||b9o.y51("",M.__text.trim()))&&delete  M.__text,delete  M.__cnt,!X.enableToStringFunc||b9o.A51(null,M.__text)&&b9o.Y51(null,M.__cdata)||(M.toString=function(){return (b9o.l51(null,this.__text)?this.__text:"")+(b9o.n51(null,this.__cdata)?this.__cdata:"");}),M;}return b9o.c51(R.nodeType,A5.TEXT_NODE)||b9o.k51(R.nodeType,A5.CDATA_SECTION_NODE)?R.nodeValue:void 0;}function Y5(z,W,Z,K){var R="<"+(b9o.D51(null,z)&&b9o.w51(null,z.__prefix)?z.__prefix+":":"")+W;if(b9o.u51(null,Z))for(var N=0;b9o.s51(N,Z.length);N++){var M=Z[N],P=z[M];X.escapeMode&&(P=N5(P)),R+=" "+M.substr(X.attributePrefix.length)+"='"+P+"'";}return R+=K?"/>":">";}function O5(z){return z.prefix;}function k5(z){var W=[];if(b9o.S31(z,Object))for(var Z in z)-1==Z.toString().indexOf("__")&&b9o.E31(0,Z.toString().indexOf(X.attributePrefix))&&W.push(Z);return W;}function V5(z){var W="",Z=b5(z);if(b9o.X31(Z,0))for(var K in z)if(!C(z,K)){var R=z[K],N=k5(R);if(b9o.g31(null,R)||void 0==R)W+=Y5(R,K,N,!0);else if(b9o.f31(R,Object))if(b9o.h31(R,Array))W+=o5(R,K,N);else if(b9o.C31(R,Date))W+=Y5(R,K,N,!1),W+=R.toISOString(),W+=z5(R,K);else{var M=b5(R);b9o.W21(M,0)||b9o.R21(null,R.__text)||b9o.M21(null,R.__cdata)?(W+=Y5(R,K,N,!1),W+=V5(R),W+=z5(R,K)):W+=Y5(R,K,N,!0);}else W+=Y5(R,K,N,!1),W+=T5(R),W+=z5(R,K);}return W+=T5(z);}function G5(){void 0===X.escapeMode&&(X.escapeMode=!0),X.attributePrefix=X.attributePrefix||"_",X.arrayAccessForm=X.arrayAccessForm||"none",X.emptyNodeForm=X.emptyNodeForm||"text",void 0===X.enableToStringFunc&&(X.enableToStringFunc=!0),X.arrayAccessFormPaths=X.arrayAccessFormPaths||[],void 0===X.skipEmptyTextNodesForObj&&(X.skipEmptyTextNodesForObj=!0),void 0===X.stripWhitespaces&&(X.stripWhitespaces=!0),X.datetimeAccessFormPaths=X.datetimeAccessFormPaths||[];}function Q5(z,W,Z){var K=function(){z[W+"_asArray"]=b9o.r0(z[W],Array)?z[W]:[z[W]];};switch(X.arrayAccessForm){case "property":K();}if(!(b9o.S0(z[W],Array))&&b9o.E0(X.arrayAccessFormPaths.length,0)){for(var R=0;b9o.q0(R,X.arrayAccessFormPaths.length);R++){var N=X.arrayAccessFormPaths[R];if("string"==typeof N){if(b9o.J0(N,Z))break;}else if(b9o.H0(N,RegExp)){if(N.test(Z))break;}else if("function"==typeof N&&N(z,W,Z))break;}b9o.V0(R,X.arrayAccessFormPaths.length)&&(z[W]=[z[W]]);}}"use strict";var B5="1.1.5";X=X||{},G5(),Z5();var A5={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(Z){var K=window.ActiveXObject||b9o.b21("ActiveXObject",window);if(void 0===Z)return null;var R;if(window.DOMParser){var N=new window.DOMParser,M=null;if(!K)try{M=N.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI;}catch(W){var P=function(z){M=z;};P(null);}try{R=N.parseFromString(Z,"text/xml"),b9o.i21(null,M)&&b9o.T21(R.getElementsByTagNameNS(M,"parsererror").length,0)&&(R=null);}catch(W){var A=function(z){R=z;};A(null);}}else b9o.B21(0,Z.indexOf("<?"))&&(Z=Z.substr(Z.indexOf("?>")+2)),R=new ActiveXObject("Microsoft.XMLDOM"),R.async="false",R.loadXML(Z);return R;},this.asArray=function(z){return b9o.G21(z,Array)?z:[z];},this.toXmlDateTime=function(z){return b9o.O21(z,Date)?z.toISOString():"number"==typeof z?new Date(z).toISOString():null;},this.asDateTime=function(z){return "string"==typeof z?U(z):z;},this.xml2json=function(z){return S5(z);},this.xml_str2json=function(z){var W=this.parseXmlString(z);return b9o.Q21(null,W)?this.xml2json(W):null;},this.json2xml_str=function(z){return V5(z);},this.json2xml=function(z){var W=this.json2xml_str(z);return this.parseXmlString(W);},this.getVersion=function(){return B5;};}function intTobitArray(z,W){for(var Z=[],K=0;b9o.n81(W,K);K++)Z.push(b9o.c81((z&Math.pow(2,K)),0));return Z;}function ObjectIron(E){var B;for(B=[],i=0,len=E.length;b9o.F21(i,len);i+=1)B.push(E[i].isRoot?"root":E[i].name);var G=function(z,W){var Z;if(b9o.a21(null,z)&&b9o.v21(null,W))for(Z in z)z.hasOwnProperty(Z)&&(W.hasOwnProperty(Z)||(W[Z]=z[Z]));},q=function(z,W,Z){var K,R,N,M,P;if(b9o.I21(null,z)&&b9o.d21(0,z.length))for(K=0,R=z.length;b9o.t21(R,K);K+=1)N=z[K],W.hasOwnProperty(N.name)&&(Z.hasOwnProperty(N.name)?N.merge&&(M=W[N.name],P=Z[N.name],"object"==typeof M&&"object"==typeof P?G(M,P):Z[N.name]=b9o.L21(null,N.mergeFunction)?N.mergeFunction(M,P):M+P):Z[N.name]=W[N.name]);},Y=function(z,W){var Z,K,R,N,M,P,A,y=z;if(b9o.z81(null,y.children)&&b9o.K81(0,y.children.length))for(Z=0,K=y.children.length;b9o.N81(K,Z);Z+=1)if(P=y.children[Z],W.hasOwnProperty(P.name))if(P.isArray)for(M=W[P.name+"_asArray"],R=0,N=M.length;b9o.j81(N,R);R+=1)A=M[R],q(y.properties,W,A),Y(P,A);else A=W[P.name],q(y.properties,W,A),Y(P,A);},O=function(z){var W,Z,K,R,N,M,P;if(b9o.y81(null,z))return z;if("object"!=typeof z)return z;for(W=0,Z=B.length;b9o.A81(Z,W);W+=1)b9o.Y81("root",B[W])&&(N=E[W],M=z,Y(N,M));for(R in z)if(z.hasOwnProperty(R)){if(K=B.indexOf(R),-1!==K)if(N=E[K],N.isArray)for(P=z[R+"_asArray"],W=0,Z=P.length;b9o.l81(Z,W);W+=1)M=P[W],Y(N,M);else M=z[R],Y(N,M);O(z[R]);}return z;};return {run:O};}if(function(G){var q,Y=0,O=G.MediaSource||G.WebKitMediaSource||{},V=G.URL||{},w=/video\/flv(;\s*codecs=["']vp6,aac["'])?$/,H="blob:vjs-media-source/";q=function(){},q.prototype.init=function(){this.listeners=[];},q.prototype.addEventListener=function(z,W){this.listeners[z]||(this.listeners[z]=[]),this.listeners[z].unshift(W);},q.prototype.removeEventListener=function(z,W){for(var Z=this.listeners[z],K=Z.length;K--;)if(b9o.k81(Z[K],W))return Z.splice(K,1);},q.prototype.trigger=function(z){for(var W=this.listeners[z.type]||[],Z=W.length;Z--;)W[Z](z);},videojs.MediaSource=function(){var W=this;videojs.MediaSource.prototype.init.call(this),this.sourceBuffers=[],this.readyState="closed",this.listeners={sourceopen:[function(z){W.swfObj=document.getElementById(z.swfId),W.readyState="open",W.swfObj&&W.swfObj.vjs_load();}],webkitsourceopen:[function(){W.trigger({type:"sourceopen"});}]};},videojs.MediaSource.prototype=new q,videojs.MediaSource.BYTES_PER_SECOND_GOAL=4194304,videojs.MediaSource.TICKS_PER_SECOND=60,videojs.MediaSource.prototype.addSourceBuffer=function(z){var W;if(w.test(z))W=new videojs.SourceBuffer(this);else{if(!this.nativeSource)throw  new Error("NotSupportedError (Video.js)");W=this.nativeSource.addSourceBuffer.apply(this.nativeSource,arguments);}return this.sourceBuffers.push(W),W;},videojs.MediaSource.prototype.endOfStream=function(){this.readyState="ended";},videojs.mediaSources={},videojs.MediaSource.open=function(z,W){var Z=videojs.mediaSources[z];if(!Z)throw  new Error("Media Source not found (Video.js)");Z.trigger({type:"sourceopen",swfId:W});},videojs.SourceBuffer=function(M){var P=this,A=[],y=0,E=function(z){G.setTimeout(z,Math.ceil(b9o.D81(1e3,videojs.MediaSource.TICKS_PER_SECOND)));},B=function(){var z,W,Z,K,R,N="";if(A.length){for(R=document.hidden?videojs.MediaSource.BYTES_PER_SECOND_GOAL:Math.ceil(b9o.w81(videojs.MediaSource.BYTES_PER_SECOND_GOAL,videojs.MediaSource.TICKS_PER_SECOND)),K=new Uint8Array(Math.min(R,y)),W=K.byteLength;W;)z=A[0].subarray(0,W),K.set(z,b9o.u81(K.byteLength,W)),b9o.s81(z.byteLength,A[0].byteLength)?A[0]=A[0].subarray(W):A.shift(),W-=z.byteLength;for(y-=K.byteLength,W=0,Z=K.byteLength;b9o.e81(Z,W);W++)N+=String.fromCharCode(K[W]);b64str=G.btoa(N),P.source.swfObj.CallFunction('<invoke name="vjs_appendBuffer"returntype="javascript"><arguments><string>'+b64str+"</string></arguments></invoke>"),b9o.U81(0,y)?E(B):b9o.o11("ended",P.source.readyState)&&P.source.swfObj.vjs_endOfStream();}};videojs.SourceBuffer.prototype.init.call(this),this.source=M,this.appendBuffer=function(z){b9o.Z11(0,A.length)&&E(B),this.source.readyState="open",this.trigger({type:"update"}),A.push(z),y+=z.byteLength;},this.abort=function(){A=[],y=0,this.source.swfObj.vjs_abort();};},videojs.SourceBuffer.prototype=new q,videojs.URL={createObjectURL:function(z){var W=H+Y;return Y++,videojs.mediaSources[W]=z,W;}},videojs.plugin("mediaSource",function(){var R=this;R.on("loadstart",function(){var W,Z=R.currentSrc(),K=function(z){W.trigger(z);};b9o.p11("Html5",R.techName)&&b9o.P11(0,Z.indexOf(H))&&(W=videojs.mediaSources[Z],W.nativeUrl||(W.nativeSource=new O,W.nativeSource.addEventListener("sourceopen",K,!1),W.nativeSource.addEventListener("webkitsourceopen",K,!1),W.nativeUrl=V.createObjectURL(W.nativeSource)),R.src(W.nativeUrl));});});}(this),function(H,D,F,Q){"use strict";var x,v,u,J=1.1,L=500;v=function(z){return z.retries&&b9o.r11(z.retries,2);},D.Hls=D.Flash.extend({init:function(z,W,Z){var K=W.source,R=z.options();z.hls=this,delete  W.source,W.swf=R.flash.swf,D.Flash.call(this,z,W,Z),W.source=K,this.bytesReceived=0,this.currentTime=D.Hls.prototype.currentTime,this.setCurrentTime=D.Hls.prototype.setCurrentTime,this.segmentBuffer_=[],this.startCheckingBuffer_(),D.Hls.prototype.src.call(this,W.source&&W.source.src);}}),D.options.techOrder.unshift("hls"),D.Hls.GOAL_BUFFER_LENGTH=30,D.Hls.prototype.src=function(A){var y,E,B,G=this,q=this.player(),Y=q.options().hls||{};A&&(this.src_&&this.resetSrc_(),this.src_=A,y=new D.MediaSource,B={src:D.URL.createObjectURL(y),type:"video/flv"},this.mediaSource=y,this.segmentBuffer_=[],this.segmentParser_=new D.Hls.SegmentParser,function(){var N,M=G.segmentParser_.metadataStream;G.player().addTextTrack&&M.on("data",function(z){var W,Z,K,R;if(!N)for(N=G.player().addTextTrack("metadata","Timed Metadata"),N.inBandMetadataTrackDispatchType=D.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16).toUpperCase(),W=0;b9o.S11(W,M.descriptor.length);W++)R=("00"+M.descriptor[W].toString(16).toUpperCase()).slice(-2),N.inBandMetadataTrackDispatchType+=R;for(W=0;b9o.E11(W,z.frames.length);W++)Z=z.frames[W],K=b9o.q11(z.pts,1e3),N.addCue(new H.VTTCue(K,K,Z.value||Z.url));});}(),this.mediaSource.addEventListener("sourceopen",D.bind(this,this.handleSourceOpen)),this.playlists&&this.playlists.dispose(),this.mediaIndex=0,this.playlists=new D.Hls.PlaylistLoader(this.src_,Y.withCredentials),this.playlists.on("loadedmetadata",D.bind(this,function(){var z,W,Z,K,R,N,M,P;M=function(){this.fillBuffer(),q.trigger("loadedmetadata");},E=this.playlists.media(),b9o.J11(this.bandwidth,Q)&&this.setBandwidth({bandwidth:b9o.H11(5,this.playlists.bandwidth)}),b9o.V11(1/0,this.duration())&&b9o.x11(0,this.mediaIndex)&&(this.mediaIndex=D.Hls.getMediaIndexForLive_(E)),z=this.selectPlaylist(),Z=E.attributes&&E.attributes.BANDWIDTH||0,K=z.attributes&&z.attributes.BANDWIDTH||0,R=E.segments&&E.segments[this.mediaIndex].duration||E.targetDuration,N=b9o.m11(R,K,this.bandwidth),N||(N=b9o.u11(1,0)),P=10,b9o.s11(K,Z)&&b9o.e11(P,N)?(this.playlists.media(z),W=D.bind(this,function(){M.call(this),this.playlists.off("loadedplaylist",W);}),this.playlists.on("loadedplaylist",W)):M.call(this);})),this.playlists.on("error",D.bind(this,function(){q.error(this.playlists.error);})),this.playlists.on("loadedplaylist",D.bind(this,function(){var z=this.playlists.media();z&&(this.updateDuration(this.playlists.media()),this.mediaIndex=D.Hls.translateMediaIndex(this.mediaIndex,E,z),E=z,this.fetchKeys_());})),this.playlists.on("mediachange",D.bind(this,function(){x&&this.cancelKeyXhr(),q.trigger("mediachange");})),this.player().ready(function(){G.el()&&G.el().vjs_src(B.src);}));},D.Hls.getMediaIndexForLive_=function(z){if(!z.segments)return 0;for(var W=z.segments.length,Z=0,K=b9o.U11(3,(z.targetDuration||10));b9o.o61(K,Z)&&b9o.Z61(W,0);)Z+=z.segments[b9o.p61(W,1)].duration,W--;return W;},D.Hls.prototype.handleSourceOpen=function(){var z=this.player(),W=this.mediaSource.addSourceBuffer('video/flv; codecs="vp6,aac"');this.sourceBuffer=W,W.appendBuffer(this.segmentParser_.getFlvHeader()),z.options().autoplay&&z.play();},D.Hls.prototype.play=function(){return this.ended()&&(this.mediaIndex=0),b9o.P61(1/0,this.duration())&&this.playlists.media()&&b9o.r61(null,this.playbackRate())&&(this.mediaIndex=D.Hls.getMediaIndexForLive_(this.playlists.media()),this.setCurrentTime(this.getCurrentTimeByMediaIndex_(this.playlists.media(),this.mediaIndex))),D.Flash.prototype.play.apply(this,arguments);},D.Hls.prototype.currentTime=function(){return this.lastSeekedTime_?this.lastSeekedTime_:this.el()&&this.el().vjs_getProperty?this.el().vjs_getProperty("currentTime"):0;},D.Hls.prototype.setCurrentTime=function(z){return this.playlists&&this.playlists.media()?(this.lastSeekedTime_=z,this.mediaIndex=D.Hls.getMediaIndexByTime(this.playlists.media(),z),this.sourceBuffer.abort(),this.cancelSegmentXhr(),x&&(x.aborted=!0,this.cancelKeyXhr()),this.segmentBuffer_=[],void this.fillBuffer(b9o.S61(1e3,z))):0;},D.Hls.prototype.duration=function(){var z=this.playlists;return z?D.Hls.getPlaylistTotalDuration(z.media()):0;},D.Hls.prototype.updateDuration=function(z){var W=this.player(),Z=W.duration(),K=D.Hls.getPlaylistTotalDuration(z);b9o.E61(Z,K)&&W.trigger("durationchange");},D.Hls.prototype.resetSrc_=function(){if(this.cancelSegmentXhr(),this.cancelKeyXhr(),this.sourceBuffer&&this.sourceBuffer.abort(),this.mediaSource){var W,Z,K,R,N=this.mediaSource.listeners;for(W in N){var M=function(z){Z=z[W];};M(N);for(R in Z)K=Z[R],this.mediaSource.removeEventListener(W,K);}}},D.Hls.prototype.cancelKeyXhr=function(){x&&(x.onreadystatechange=null,x.abort(),x=null);},D.Hls.prototype.cancelSegmentXhr=function(){this.segmentXhr_&&(this.segmentXhr_.onreadystatechange=null,this.segmentXhr_.abort(),this.segmentXhr_=null);},D.Hls.prototype.dispose=function(){this.stopCheckingBuffer_(),this.playlists&&this.playlists.dispose(),this.resetSrc_(),D.Flash.prototype.dispose.call(this);},D.Hls.prototype.selectPlaylist=function(){var z,W,Z,K,R,N,M=this.player(),P=this.playlists.master.playlists.slice(),A=[],y=P.length;for(P.sort(D.Hls.comparePlaylistBandwidth);y--;)W=P[y],W.attributes&&W.attributes.BANDWIDTH&&(z=b9o.q61(W.attributes.BANDWIDTH,J),b9o.J61(z,M.hls.bandwidth)&&(A.push(W),K||(K=W)));for(y=A.length,A.sort(D.Hls.comparePlaylistResolution),W=null;y--;)if(Z=W,W=A[y],W.attributes&&W.attributes.RESOLUTION&&W.attributes.RESOLUTION.width&&W.attributes.RESOLUTION.height){if(b9o.H61(W.attributes.RESOLUTION.width,M.width())&&b9o.V61(W.attributes.RESOLUTION.height,M.height())){R=null,N=W;break;}if(b9o.x61(W.attributes.RESOLUTION.width,M.width())&&b9o.m61(W.attributes.RESOLUTION.height,M.height())){Z&&Z.attributes&&Z.attributes.RESOLUTION&&Z.attributes.RESOLUTION.width&&Z.attributes.RESOLUTION.height&&(R=Z),N=W;break;}}return R||N||K||P[0];},D.Hls.prototype.checkBuffer_=function(){this.checkBufferTimeout_&&(H.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null),this.fillBuffer(),this.drainBuffer(),this.checkBufferTimeout_=H.setTimeout(D.bind(this,this.checkBuffer_),L);},D.Hls.prototype.startCheckingBuffer_=function(){this.player().on("waiting",D.bind(this,this.drainBuffer)),this.checkBuffer_();},D.Hls.prototype.stopCheckingBuffer_=function(){H.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null,this.player().off("waiting",this.drainBuffer);},D.Hls.prototype.fillBuffer=function(z){var W,Z,K=this.player(),R=K.buffered(),N=0;K.currentSrc()&&this.playlists&&(this.segmentXhr_||b9o.X61("HAVE_NOTHING",this.playlists.state)&&this.playlists.media()&&this.playlists.media().segments&&(W=this.playlists.media().segments[this.mediaIndex],W&&(R&&(N=b9o.g61(K.buffered().end(0),K.currentTime())),"number"!=typeof z&&b9o.f61(N,D.Hls.GOAL_BUFFER_LENGTH)||(Z=this.playlistUriToUrl(W.uri),this.loadSegment(Z,z)))));},D.Hls.prototype.playlistUriToUrl=function(z){var W;return W=b9o.h61(this.playlists.media().uri,this.src_)?u(this.src_,z):u(u(this.src_,this.playlists.media().uri||""),z);},D.Hls.prototype.setBandwidth=function(z){var W=this;W.segmentXhrTime=z.roundTripTime,W.bandwidth=z.bandwidth,W.bytesReceived+=z.bytesReceived||0,W.trigger("bandwidthupdate");},D.Hls.prototype.loadSegment=function(K,R){var N=this,M=this.player(),P=M.options().hls||{};this.segmentXhr_=D.Hls.xhr({url:K,responseType:"arraybuffer",withCredentials:P.withCredentials},function(z,W){var Z;return N.segmentXhr_=null,z?b9o.C61("timeout",z)?(N.bandwidth=1,N.playlists.media(N.selectPlaylist())):(N.error={status:this.status,message:"HLS segment request error at URL: "+W,code:b9o.W71(this.status,500)?4:2},void N.mediaIndex++):void (this.response&&(N.setBandwidth(this),Z={mediaIndex:N.mediaIndex,playlist:N.playlists.media(),offset:R,bytes:null,encryptedBytes:null,decrypter:null},Z.playlist.segments[Z.mediaIndex].key?Z.encryptedBytes=new Uint8Array(this.response):Z.bytes=new Uint8Array(this.response),N.segmentBuffer_.push(Z),M.trigger("progress"),N.drainBuffer(),N.mediaIndex++,N.playlists.media(N.selectPlaylist())));});},D.Hls.prototype.drainBuffer=function(R){var N,M,P,A,y,E,B,G,q,Y,O,V=0,w=this.segmentBuffer_;if(w.length&&this.sourceBuffer){if(N=w[0],M=N.mediaIndex,P=N.playlist,A=N.offset,E=N.bytes,B=P.segments[M],B.key&&!E)return v(B.key)?w.shift():B.key.bytes?N.decrypter?void 0:(q=B.key.iv||new Uint32Array([0,0,0,M+P.mediaSequence]),G=new D.Hls.Decrypter(N.encryptedBytes,B.key.bytes,q,function(W,Z){var K=function(z){N.bytes=z;};K(Z);}),void (N.decrypter=G)):this.fetchKeys_();for(R=R||{},O=b9o.R71(1e3,D.Hls.getPlaylistDuration(P,0,M)),this.segmentParser_.parseSegmentBinaryData(E),this.segmentParser_.flushTags(),y=[];this.segmentParser_.tagsAvailable();)y.push(this.segmentParser_.getNextTag());if("number"==typeof A){for(Y=b9o.M71(A,O,y[0].pts);b9o.r71(y[V].pts,Y);)V++;this.el().vjs_setProperty("currentTime",b9o.S71(.001,(y[V].pts-y[0].pts+O))),y=y.slice(V),this.lastSeekedTime_=null;}for(B.discontinuity&&y.length&&this.el().vjs_discontinuity(),V=0;b9o.E71(V,y.length);V++)this.sourceBuffer.appendBuffer(y[V].bytes,this.player());w.shift(),b9o.q71(1/0,this.duration())&&b9o.J71(M+1,P.segments.length)&&this.mediaSource.endOfStream();}},D.Hls.prototype.fetchKeys_=function(){var Z,K,R,N,M,P,A,y;if(!x&&this.segmentBuffer_.length)for(R=this,N=this.player(),M=N.options().hls||{},y=function(W){return function(z){return x=null,z||!this.response||b9o.H71(16,this.response.byteLength)?(W.retries=W.retries||0,W.retries++,void (this.aborted||R.fetchKeys_())):(A=new DataView(this.response),W.bytes=new Uint32Array([A.getUint32(0),A.getUint32(4),A.getUint32(8),A.getUint32(12)]),void R.checkBuffer_());};},Z=0;b9o.V71(Z,R.segmentBuffer_.length);Z++)if(P=R.segmentBuffer_[Z].playlist.segments[R.segmentBuffer_[Z].mediaIndex],K=P.key,K&&!K.bytes&&!v(K)){x=D.Hls.xhr({url:this.playlistUriToUrl(K.uri),responseType:"arraybuffer",withCredentials:M.withCredentials},y(K));break;}},D.Hls.supportsNativeHls=function(){var z,W,Z=F.createElement("video");return D.Html5.isSupported()?(z=Z.canPlayType("application/x-mpegURL"),W=Z.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(z)||/probably|maybe/.test(W)):!1;}(),D.Hls.isSupported=function(){return (!D.Hls.supportsNativeHls||1)&&D.Flash.isSupported()&&D.MediaSource&&H.Uint8Array;},D.Hls.canPlaySource=function(z){var W=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return W.test(z.type);},D.Hls.getPlaylistDuration=function(z,W,Z){var K,R,N=0;for(W=W||0,Z=b9o.x71(Z,Q)?Z:(z.segments||[]).length,R=b9o.m71(Z,1);b9o.X71(R,W);R--)K=z.segments[R],N+=(b9o.g71(K.duration,Q)?K.duration:z.targetDuration)||0;return N;},D.Hls.getPlaylistTotalDuration=function(z){return z?z.totalDuration?z.totalDuration:z.endList?D.Hls.getPlaylistDuration(z):H.Infinity:0;},D.Hls.translateMediaIndex=function(z,W,Z){var K;return b9o.f71(0,z)?0:Z&&Z.segments?(K=z+(b9o.h71(W.mediaSequence,Z.mediaSequence)),b9o.C71(K,Z.segments.length)||b9o.W01(0,K)?D.Hls.getMediaIndexForLive_(Z)+1:K):0;},D.Hls.getMediaIndexByTime=function(z,W){var Z,K,R,N;for(R=[],Z=0;b9o.R01(Z,z.segments.length);Z++)N={},N.start=b9o.M01(0,Z)?0:R[b9o.b01(Z,1)].end,N.end=N.start+z.segments[Z].duration,R.push(N);for(K=0;b9o.i01(K,R.length);K++)if(b9o.T01(W,R[K].start)&&b9o.B01(W,R[K].end))return K;return -1;},D.Hls.prototype.getCurrentTimeByMediaIndex_=function(z,W){var Z,K=0;if(!z.segments||b9o.G01(0,W))return 0;for(Z=0;b9o.O01(W,Z);Z++)K+=z.segments[Z].duration;return K;},D.Hls.comparePlaylistBandwidth=function(z,W){var Z,K;return z.attributes&&z.attributes.BANDWIDTH&&(Z=z.attributes.BANDWIDTH),Z=Z||H.Number.MAX_VALUE,W.attributes&&W.attributes.BANDWIDTH&&(K=W.attributes.BANDWIDTH),K=K||H.Number.MAX_VALUE,b9o.Q01(Z,K);},D.Hls.comparePlaylistResolution=function(z,W){var Z,K;return z.attributes&&z.attributes.RESOLUTION&&z.attributes.RESOLUTION.width&&(Z=z.attributes.RESOLUTION.width),Z=Z||H.Number.MAX_VALUE,W.attributes&&W.attributes.RESOLUTION&&W.attributes.RESOLUTION.width&&(K=W.attributes.RESOLUTION.width),K=K||H.Number.MAX_VALUE,b9o.F01(Z,K)&&z.attributes.BANDWIDTH&&W.attributes.BANDWIDTH?b9o.a01(z.attributes.BANDWIDTH,W.attributes.BANDWIDTH):b9o.v01(Z,K);},u=D.Hls.resolveUrl=function(z,W){var Z,K,R=F.querySelector("base"),N=F.querySelector("head"),M=F.createElement("a"),P=R;return R?Z=R.href:P=N.appendChild(F.createElement("base")),P.href=z,M.href=W,K=M.href,R?R.href=Z:N.removeChild(P),K;};}(window,window.videojs,document),function(N){N.Hls.xhr=function(z,W){var Z,K,R={method:"GET",timeout:45e3};return "function"!=typeof W&&(W=function(){}),"object"==typeof z&&(R=N.util.mergeOptions(R,z),z=R.url),Z=new window.XMLHttpRequest,Z.open(R.method,z),Z.url=z,Z.requestTime=(new Date).getTime(),R.responseType&&(Z.responseType=R.responseType),R.withCredentials&&(Z.withCredentials=!0),R.timeout&&(K=window.setTimeout(function(){b9o.I01(4,Z.readyState)&&(Z.timedout=!0,Z.abort());},R.timeout)),Z.onreadystatechange=function(){return b9o.d01(4,this.readyState)?(window.clearTimeout(K),Z.timedout?W.call(this,"timeout",z):b9o.t01(this.status,400)||b9o.L01(0,this.status)?W.call(this,!0,z):(this.response&&(this.responseTime=(new Date).getTime(),this.roundTripTime=b9o.z41(this.responseTime,this.requestTime),this.bytesReceived=this.response.byteLength||this.response.length,this.bandwidth=Math.floor(b9o.K41(this.bytesReceived,this.roundTripTime,8,1e3))),W.call(this,!1,z))):void 0;},Z.send(null),Z;};}(window.videojs),function(q){q.videojs=q.videojs||{},q.videojs.Hls=q.videojs.Hls||{};var Y=q.videojs.Hls;Y.FlvTag=function(N,M){var P,A=0,y=function(z,W){var Z,K=z.position+W;b9o.P41(K,z.bytes.byteLength)||(Z=new Uint8Array(b9o.r41(2,K)),Z.set(z.bytes.subarray(0,z.position),0),z.bytes=Z,z.view=new DataView(z.bytes.buffer));},E=Y.FlvTag.widthBytes||new Uint8Array("width".length),B=Y.FlvTag.heightBytes||new Uint8Array("height".length),G=Y.FlvTag.videocodecidBytes||new Uint8Array("videocodecid".length);if(!Y.FlvTag.widthBytes){for(P=0;b9o.S41(P,"width".length);P++)E[P]="width".charCodeAt(P);for(P=0;b9o.E41(P,"height".length);P++)B[P]="height".charCodeAt(P);for(P=0;b9o.q41(P,"videocodecid".length);P++)G[P]="videocodecid".charCodeAt(P);Y.FlvTag.widthBytes=E,Y.FlvTag.heightBytes=B,Y.FlvTag.videocodecidBytes=G;}switch(this.keyFrame=!1,N){case Y.FlvTag.VIDEO_TAG:this.length=16;break;case Y.FlvTag.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case Y.FlvTag.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw "Error Unknown TagType";}this.bytes=new Uint8Array(16384),this.view=new DataView(this.bytes.buffer),this.bytes[0]=N,this.position=this.length,this.keyFrame=M,this.pts=0,this.dts=0,this.writeBytes=function(z,W,Z){var K,R=W||0;Z=Z||z.byteLength,K=R+Z,y(this,Z),this.bytes.set(z.subarray(R,K),this.position),this.position+=Z,this.length=Math.max(this.length,this.position);},this.writeByte=function(z){y(this,1),this.bytes[this.position]=z,this.position++,this.length=Math.max(this.length,this.position);},this.writeShort=function(z){y(this,2),this.view.setUint16(this.position,z),this.position+=2,this.length=Math.max(this.length,this.position);},this.negIndex=function(z){return this.bytes[b9o.J41(this.length,z)];},this.nalUnitSize=function(){return b9o.H41(0,A)?0:b9o.V41(this.length,(A+4));},this.startNalUnit=function(){if(b9o.x41(A,0))throw  new Error("Attempted to create new NAL wihout closing the old one");A=this.length,this.length+=4,this.position=this.length;},this.endNalUnit=function(z){var W,Z;b9o.m41(this.length,A+4)?this.length-=4:b9o.X41(A,0)&&(W=A+4,Z=b9o.g41(this.length,W),this.position=A,this.view.setUint32(this.position,Z),this.position=this.length,z&&z.push(this.bytes.subarray(W,W+Z))),A=0;},this.writeMetaDataDouble=function(z,W){var Z;if(y(this,2+z.length+9),this.view.setUint16(this.position,z.length),this.position+=2,b9o.f41("width",z))this.bytes.set(E,this.position),this.position+=5;else if(b9o.h41("height",z))this.bytes.set(B,this.position),this.position+=6;else if(b9o.C41("videocodecid",z))this.bytes.set(G,this.position),this.position+=12;else for(Z=0;b9o.W91(Z,z.length);Z++)this.bytes[this.position]=z.charCodeAt(Z),this.position++;this.position++,this.view.setFloat64(this.position,W),this.position+=8,this.length=Math.max(this.length,this.position),++A;},this.writeMetaDataBoolean=function(z,W){var Z;for(y(this,2),this.view.setUint16(this.position,z.length),this.position+=2,Z=0;b9o.R91(Z,z.length);Z++)console.assert(b9o.M91(z.charCodeAt(Z),255)),y(this,1),this.bytes[this.position]=z.charCodeAt(Z),this.position++;y(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,W?1:0),this.position++,this.length=Math.max(this.length,this.position),++A;},this.finalize=function(){var z,W;switch(this.bytes[0]){case Y.FlvTag.VIDEO_TAG:this.bytes[11]=b9o.b91(7,(this.keyFrame||M?16:32)),this.bytes[12]=M?0:1,z=b9o.i91(this.pts,this.dts),this.bytes[13]=b9o.T91((16711680&z),16),this.bytes[14]=b9o.B91((65280&z),8),this.bytes[15]=b9o.G91((255&z),0);break;case Y.FlvTag.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=M?0:1;break;case Y.FlvTag.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,A),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position;}return W=b9o.O91(this.length,11),this.bytes[1]=b9o.Q91((16711680&W),16),this.bytes[2]=b9o.F91((65280&W),8),this.bytes[3]=b9o.a91((255&W),0),this.bytes[4]=b9o.v91((16711680&this.dts),16),this.bytes[5]=b9o.I91((65280&this.dts),8),this.bytes[6]=b9o.d91((255&this.dts),0),this.bytes[7]=b9o.t91((4278190080&this.dts),24),this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,y(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=Y.FlvTag.frameTime(this.bytes),console.assert(b9o.L91(this.bytes.byteLength,this.length)),this;};},Y.FlvTag.AUDIO_TAG=8,Y.FlvTag.VIDEO_TAG=9,Y.FlvTag.METADATA_TAG=18,Y.FlvTag.isAudioFrame=function(z){return b9o.z5D(Y.FlvTag.AUDIO_TAG,z[0]);},Y.FlvTag.isVideoFrame=function(z){return b9o.K5D(Y.FlvTag.VIDEO_TAG,z[0]);},Y.FlvTag.isMetaData=function(z){return b9o.N5D(Y.FlvTag.METADATA_TAG,z[0]);},Y.FlvTag.isKeyFrame=function(z){return Y.FlvTag.isVideoFrame(z)?b9o.j5D(23,z[11]):Y.FlvTag.isAudioFrame(z)?!0:Y.FlvTag.isMetaData(z)?!0:!1;},Y.FlvTag.frameTime=function(z){var W=b9o.y5D(z[4],16);return W|=b9o.A5D(z[5],8),W|=b9o.Y5D(z[6],0),W|=b9o.l5D(z[7],24);};}(this),function(M){var P=function(){this.init=function(){var N={};this.on=function(z,W){N[z]||(N[z]=[]),N[z].push(W);},this.off=function(z,W){var Z;return N[z]?(Z=N[z].indexOf(W),N[z].splice(Z,1),Z>-1):!1;},this.trigger=function(z){var W,Z,K,R;if(W=N[z])for(R=Array.prototype.slice.call(arguments,1),K=W.length,Z=0;b9o.n5D(K,Z);++Z)W[Z].apply(this,R);},this.dispose=function(){N={};};};};P.prototype.pipe=function(W){this.on("data",function(z){W.push(z);});},M.Hls.Stream=P;}(window.videojs),function(P){P.videojs.Hls.ExpGolomb=function(K){var R=K.byteLength,N=0,M=0;this.length=function(){return b9o.c5D(8,R);},this.bitsAvailable=function(){return b9o.k5D(8,R)+M;},this.loadWord=function(){var z=b9o.D5D(K.byteLength,R),W=new Uint8Array(4),Z=Math.min(4,R);if(b9o.w5D(0,Z))throw  new Error("no bytes available");W.set(K.subarray(z,z+Z)),N=new DataView(W.buffer).getUint32(0),M=b9o.u5D(8,Z),R-=Z;},this.skipBits=function(z){var W;b9o.s5D(M,z)?(N<<=z,M-=z):(z-=M,W=b9o.e5D(z,8),z-=b9o.U5D(8,W),R-=W,this.loadWord(),N<<=z,M-=z);},this.readBits=function(z){var W=Math.min(M,z),Z=b9o.o3D(N,32-W);return console.assert(b9o.Z3D(32,z),"Cannot read more than 32 bits at a time"),M-=W,b9o.p3D(M,0)?N<<=W:b9o.P3D(R,0)&&this.loadWord(),W=b9o.r3D(z,W),b9o.S3D(W,0)?b9o.E3D(Z<<W,this.readBits(W)):Z;},this.skipLeadingZeros=function(){var z;for(z=0;b9o.q3D(M,z);++z)if(b9o.J3D(0,(N&2147483648>>>z)))return N<<=z,M-=z,z;return this.loadWord(),z+this.skipLeadingZeros();},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros());},this.readUnsignedExpGolomb=function(){var z=this.skipLeadingZeros();return b9o.H3D(this.readBits(z+1),1);},this.readExpGolomb=function(){var z=this.readUnsignedExpGolomb();return b9o.V3D(1,z)?b9o.x3D(1+z,1):-1*(b9o.m3D(z,1));},this.readBoolean=function(){return b9o.X3D(1,this.readBits(1));},this.readUnsignedByte=function(){return this.readBits(8);},this.loadWord();};}(this),function(D){var F,Q=D.videojs.Hls.ExpGolomb,x=D.videojs.Hls.FlvTag,v=function(){this.sps=[],this.pps=[],this.extraDataExists=function(){return b9o.g3D(this.sps.length,0);},this.scaling_list=function(z,W){var Z,K,R=8,N=8;for(Z=0;b9o.f3D(z,Z);++Z)b9o.h3D(0,N)&&(K=W.readExpGolomb(),N=b9o.C3D((R+K+256),256)),R=b9o.W2D(0,N)?R:N;},this.getSps0Rbsp=function(){for(var z=this.sps[0],W=1,Z=1,K=0,R=b9o.R2D(z.byteLength,2),N=new Uint8Array(z.byteLength);b9o.M2D(R,W);)b9o.b2D(0,z[W])&&b9o.i2D(0,z[W+1])&&b9o.T2D(3,z[W+2])&&(N.set(z.subarray(Z,W+1),K),K+=W+1-Z,Z=W+3),W++;return N.set(z.subarray(Z),K),N.subarray(0,K+(b9o.B2D(z.byteLength,Z)));},this.metaDataTag=function(z){var W,Z,K,R,N,M,P,A,y,E,B,G,q,Y=new x(x.METADATA_TAG),O=0,V=0,w=0,H=0;if(Y.dts=z,Y.pts=z,W=new Q(this.getSps0Rbsp()),Z=W.readUnsignedByte(),W.skipBits(16),W.skipUnsignedExpGolomb(),(b9o.G2D(100,Z)||b9o.O2D(110,Z)||b9o.Q2D(122,Z)||b9o.F2D(244,Z)||b9o.a2D(44,Z)||b9o.v2D(83,Z)||b9o.I2D(86,Z)||b9o.d2D(118,Z)||b9o.t2D(128,Z))&&(K=W.readUnsignedExpGolomb(),b9o.L2D(3,K)&&W.skipBits(1),W.skipUnsignedExpGolomb(),W.skipUnsignedExpGolomb(),W.skipBits(1),W.readBoolean()))for(R=b9o.z8D(3,K)?8:12,N=0;b9o.K8D(R,N);++N)W.readBoolean()&&(b9o.N8D(6,N)?this.scaling_list(16,W):this.scaling_list(64,W));if(W.skipUnsignedExpGolomb(),M=W.readUnsignedExpGolomb(),b9o.j8D(0,M))W.readUnsignedExpGolomb();else if(b9o.y8D(1,M))for(W.skipBits(1),W.skipExpGolomb(),W.skipExpGolomb(),P=W.readUnsignedExpGolomb(),N=0;b9o.A8D(P,N);++N)W.skipExpGolomb();return W.skipUnsignedExpGolomb(),W.skipBits(1),A=W.readUnsignedExpGolomb(),y=W.readUnsignedExpGolomb(),E=W.readBits(1),b9o.Y8D(0,E)&&W.skipBits(1),W.skipBits(1),B=W.readBoolean(),B&&(O=W.readUnsignedExpGolomb(),V=W.readUnsignedExpGolomb(),w=W.readUnsignedExpGolomb(),H=W.readUnsignedExpGolomb()),G=b9o.l8D(16*(A+1),2*O,2*V),q=b9o.O8D((2-E)*(y+1)*16,2*w,2*H),Y.writeMetaDataDouble("videocodecid",7),Y.writeMetaDataDouble("width",G),Y.writeMetaDataDouble("height",q),Y;},this.extraDataTag=function(z){var W,Z=new x(x.VIDEO_TAG,!0);for(Z.dts=z,Z.pts=z,Z.writeByte(1),Z.writeByte(this.sps[0][1]),Z.writeByte(this.sps[0][2]),Z.writeByte(this.sps[0][3]),Z.writeByte(255),Z.writeByte(225),Z.writeShort(this.sps[0].length),Z.writeBytes(this.sps[0]),Z.writeByte(this.pps.length),W=0;b9o.V8D(W,this.pps.length);++W)Z.writeShort(this.pps[W].length),Z.writeBytes(this.pps[W]);return Z;};};D.videojs.Hls.NALUnitType=F={unspecified:0,slice_layer_without_partitioning_rbsp_non_idr:1,slice_data_partition_a_layer_rbsp:2,slice_data_partition_b_layer_rbsp:3,slice_data_partition_c_layer_rbsp:4,slice_layer_without_partitioning_rbsp_idr:5,sei_rbsp:6,seq_parameter_set_rbsp:7,pic_parameter_set_rbsp:8,access_unit_delimiter_rbsp:9,end_of_seq_rbsp:10,end_of_stream_rbsp:11},D.videojs.Hls.H264Stream=function(){var E,B,G,q,Y,O=new v,V=new v,w=-1;this.tags=[],this.setTimeStampOffset=function(W){var Z=function(z){G=z;};Z(W);},this.setNextTimeStamp=function(z,W,Z){E=b9o.x8D(z,G),B=b9o.m8D(W,G),Z&&this.finishFrame();},this.finishFrame=function(){q&&(V.extraDataExists()&&(O=V,V=new v),q.keyFrame&&(this.tags.push(O.metaDataTag(q.pts)),this.tags.push(O.extraDataTag(q.pts))),q.endNalUnit(),this.tags.push(q)),q=null,w=-1,Y=0;},this.writeBytes=function(W,Z,K){var R=function(z){Y=z;},N=function(z){Y=z;},M,P,A,y;if(Z=Z||0,K=K||0,!(b9o.X8D(0,K)))switch(Y){default:case 0:N(1);case 1:if(b9o.g8D(W[Z],1)&&(M=q?q.nalUnitSize():0,b9o.f8D(M,1)&&b9o.h8D(0,q.negIndex(1)))){if(b9o.C8D(1,W[Z])&&b9o.W1D(M,2)&&b9o.R1D(0,q.negIndex(2)))return q.length-=b9o.M1D(M,3)&&b9o.b1D(0,q.negIndex(3))?3:2,Y=3,this.writeBytes(W,Z+1,b9o.i1D(K,1));if(b9o.T1D(K,1)&&b9o.B1D(0,W[Z])&&b9o.G1D(1,W[Z+1]))return q.length-=b9o.O1D(M,2)&&b9o.Q1D(0,q.negIndex(2))?2:1,Y=3,this.writeBytes(W,Z+2,b9o.F1D(K,2));if(b9o.a1D(K,2)&&b9o.v1D(0,W[Z])&&b9o.I1D(0,W[Z+1])&&b9o.d1D(1,W[Z+2]))return Y=3,this.writeBytes(W,Z+3,b9o.t1D(K,3));}R(2);case 2:for(P=Z,A=P+K,y=b9o.L1D(A,3);b9o.z6D(y,Z);)if(b9o.K6D(W[Z+2],1))Z+=3;else if(b9o.N6D(0,W[Z+1]))Z+=2;else if(b9o.j6D(0,W[Z]))Z+=1;else{if(b9o.y6D(1,W[Z+2]))return b9o.A6D(Z,P)&&q.writeBytes(W,P,b9o.Y6D(Z,P)),Y=3,Z+=3,this.writeBytes(W,Z,b9o.l6D(A,Z));if(b9o.n6D(A-Z,4)&&b9o.c6D(0,W[Z+2])&&b9o.k6D(1,W[Z+3]))return b9o.D6D(Z,P)&&q.writeBytes(W,P,b9o.w6D(Z,P)),Y=3,Z+=4,this.writeBytes(W,Z,b9o.u6D(A,Z));Z+=3;}return Y=1,void (q&&q.writeBytes(W,P,K));case 3:if(q)switch(w){case F.seq_parameter_set_rbsp:q.endNalUnit(V.sps);break;case F.pic_parameter_set_rbsp:q.endNalUnit(V.pps);break;case F.slice_layer_without_partitioning_rbsp_idr:q.endNalUnit();break;default:q.endNalUnit();}return w=b9o.s6D(31,W[Z]),q&&(b9o.e6D(w,F.access_unit_delimiter_rbsp)?this.finishFrame():b9o.U6D(w,F.slice_layer_without_partitioning_rbsp_idr)&&(q.keyFrame=!0)),q||(q=new x(x.VIDEO_TAG),q.pts=E,q.dts=B),q.startNalUnit(),Y=2,this.writeBytes(W,Z,K);}};};}(this),function(F){var Q=F.videojs.Hls.FlvTag,x=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3];F.videojs.Hls.AacStream=function(){var M,P,A,y,E,B,G,q,Y,O,V,w,H,D;this.tags=[],this.setTimeStampOffset=function(z){P=z,E=b9o.o7D(z,1e3);},this.setNextTimeStamp=function(z,W,Z){M=b9o.Z7D(z,P),y=W,Z&&(A=0);},this.writeBytes=function(z,W,Z){var K,R,N;for(W=W||0,Z=Z||0,Z=b9o.p7D(Z,y)?y:Z,y-=Z,K=W+Z;b9o.P7D(K,W);)switch(A){default:A=0;break;case 0:if(b9o.r7D(W,K))return ;if(b9o.S7D(255,z[W]))return console.assert(!1,"Error no ATDS header found"),W+=1,void (A=0);W+=1,A=1;break;case 1:if(b9o.E7D(W,K))return ;if(b9o.q7D(240,(240&z[W])))return console.assert(!1,"Error no ATDS header found"),W+=1,void (A=0);B=!!(b9o.J7D(1,z[W])),W+=1,A=2;break;case 2:if(b9o.H7D(W,K))return ;G=(b9o.V7D((192&z[W]),6))+1,q=b9o.x7D((60&z[W]),2),Y=b9o.m7D((1&z[W]),2),W+=1,A=3;break;case 3:if(b9o.X7D(W,K))return ;Y|=b9o.g7D((192&z[W]),6),O=b9o.f7D((3&z[W]),11),W+=1,A=4;break;case 4:if(b9o.h7D(W,K))return ;O|=b9o.C7D(z[W],3),W+=1,A=5;break;case 5:if(b9o.W0D(W,K))return ;O|=b9o.R0D((224&z[W]),5),O-=B?7:9,W+=1,A=6;break;case 6:if(b9o.M0D(W,K))return ;V=b9o.b0D(1024,((3&z[W])+1)),w=b9o.i0D(1e3,V,x[q]),R=b9o.E0D(G<<11,q<<7,Y<<3),(b9o.l0D(R,D)||b9o.n0D(M-E,1e3))&&(H=new Q(Q.METADATA_TAG),H.pts=M,H.dts=M,H.writeMetaDataDouble("audiocodecid",10),H.writeMetaDataBoolean("stereo",b9o.c0D(2,Y)),H.writeMetaDataDouble("audiosamplerate",x[q]),H.writeMetaDataDouble("audiosamplesize",16),this.tags.push(H),D=R,H=new Q(Q.AUDIO_TAG,!0),H.pts=M,H.dts=H.pts,H.view.setUint16(H.position,R),H.position+=2,H.length=Math.max(H.length,H.position),this.tags.push(H),E=M),W+=1,A=7;break;case 7:if(!B){if(b9o.k0D(2,K-W))return ;W+=2;}H=new Q(Q.AUDIO_TAG),H.pts=M,H.dts=M,A=8;break;case 8:for(;O;){if(b9o.D0D(W,K))return ;N=b9o.w0D(O,K-W)?b9o.u0D(K,W):O,H.writeBytes(z,W,N),W+=N,O-=N;}this.tags.push(H),A=0,M+=w;}};};}(this),function(A,y){"use strict";var E,B=function(z,W,Z){var K,R="";for(K=W;b9o.s0D(Z,K);K++)R+="%"+("00"+z[K].toString(16)).slice(-2);return A.decodeURIComponent(R);},G={TXXX:function(z){var W;if(b9o.e0D(3,z.data[0]))for(W=1;b9o.U0D(W,z.data.length);W++)if(b9o.o4D(0,z.data[W])){z.description=B(z.data,1,W),z.value=B(z.data,W+1,z.data.length);break;}},WXXX:function(z){var W;if(b9o.Z4D(3,z.data[0]))for(W=1;b9o.p4D(W,z.data.length);W++)if(b9o.P4D(0,z.data[W])){z.description=B(z.data,1,W),z.url=B(z.data,W+1,z.data.length);break;}}};E=function(N){var M,P={debug:!(!N||!N.debug),descriptor:N&&N.descriptor};if(E.prototype.init.call(this),this.dispatchType=y.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16),P.descriptor)for(M=0;b9o.r4D(M,P.descriptor.length);M++)this.dispatchType+=("00"+P.descriptor[M].toString(16)).slice(-2);this.push=function(z){var W,Z,K,R;if(b9o.S4D(z.data.length,10)||b9o.E4D(z.data[0],"I".charCodeAt(0))||b9o.q4D(z.data[1],"D".charCodeAt(0))||b9o.J4D(z.data[2],"3".charCodeAt(0)))return void (P.debug&&y.log("Skipping unrecognized metadata stream"));W=z.data.byteLength,Z=10,b9o.H4D(64,z.data[5])&&(Z+=4,Z+=b9o.V4D(z.data[10]<<24,z.data[11]<<16,z.data[12]<<8,z.data[13]),W-=b9o.a4D(z.data[16]<<24,z.data[17]<<16,z.data[18]<<8,z.data[19])),this.timestampOffset&&(z.pts-=this.timestampOffset,z.dts-=this.timestampOffset),z.frames=[];do {if(K=b9o.u4D(z.data[Z+4]<<24,z.data[Z+5]<<16,z.data[Z+6]<<8,z.data[Z+7]),b9o.f4D(1,K))return y.log("Malformed ID3 frame encountered. Skipping metadata parsing.");R={id:String.fromCharCode(z.data[Z])+String.fromCharCode(z.data[Z+1])+String.fromCharCode(z.data[Z+2])+String.fromCharCode(z.data[Z+3]),data:z.data.subarray(Z+10,Z+K+10)},G[R.id]&&G[R.id](R),z.frames.push(R),Z+=10,Z+=K;}while(b9o.h4D(W,Z));this.trigger("data",z);};},E.prototype=new y.Hls.Stream,y.Hls.MetadataStream=E;}(window,window.videojs),function(W5){var C,K5,U=W5.videojs,Z5=U.Hls.FlvTag,p5=U.Hls.H264Stream,N5=U.Hls.AacStream,R5=U.Hls.MetadataStream;U.Hls.SegmentParser=function(){var x,v,u=this,J=new Uint8Array(C),L=0,I=new p5,X=new N5,z5=!1,o5=!1;u.stream={programMapTable:{}},u.metadataStream=new R5,u.getFlvHeader=function(z,W,Z){var K,R,N=new Uint8Array(9),M=new DataView(N.buffer);return z=z||0,W=void 0===W?!0:W,Z=void 0===Z?!0:Z,M.setUint8(0,70),M.setUint8(1,76),M.setUint8(2,86),M.setUint8(3,1),M.setUint8(4,b9o.C4D((W?4:0),(Z?1:0))),M.setUint32(5,N.byteLength),b9o.W9D(0,z)?(R=new Uint8Array(N.byteLength+4),R.set(N),R.set([0,0,0,0],N.byteLength),R):(K=new Z5(Z5.METADATA_TAG),K.pts=K.dts=0,K.writeMetaDataDouble("duration",z),R=new Uint8Array(N.byteLength+K.byteLength),R.set(M),R.set(M.bytesLength,K.finalize()),R);},u.flushTags=function(){I.finishFrame();},u.tagsAvailable=function(){return I.tags.length+X.tags.length;},u.getNextTag=function(){var z;return z=I.tags.length?X.tags.length&&b9o.R9D(X.tags[0].dts,I.tags[0].dts)?X.tags.shift():I.tags.shift():X.tags.shift(),z.finalize();},u.parseSegmentBinaryData=function(z){var W,Z=0;if(b9o.M9D(L,0)){if(b9o.b9D(z.byteLength+L,C))return U.log("data.length + streamBuffer.length < MP2T_PACKET_LENGTH ??"),void J.readBytes(z,z.length,J.length);W=z.subarray(0,b9o.i9D(C,L)),J.set(W,L),x(J),J=new Uint8Array(C),L=0;}for(;;){for(;b9o.T9D(Z,z.byteLength)&&b9o.B9D(71,z[Z]);)Z++;if(b9o.G9D(z.byteLength-Z,C))return void (b9o.O9D(z.byteLength-Z,0)&&(J.set(z.subarray(Z),L),L+=b9o.Q9D(z.byteLength,Z)));x(z.subarray(Z,Z+C))?Z+=C:(U.log("error parsing m2ts packet, attempting to re-align"),Z++);}},x=function(z){var W,Z,K,R,N,M,P,A,y,E,B,G,q,Y,O,V=0,w=V+C,H=!!(b9o.F9D(64,z[V+1])),D=b9o.a9D((31&z[V+1])<<8,z[V+2]),F=b9o.v9D((48&z[V+3]),4);if(V+=4,b9o.I9D(F,1)&&(V+=z[V]+1),b9o.d9D(0,D)){if(H&&(V+=1+z[V]),W=z[V],b9o.t9D(0,W)&&U.log("the table_id of the PAT should be 0x00 but was"+W.toString(16)),Z=!!(b9o.L9D(1,z[V+5]))){var Q=function(){u.stream.pmtPid=b9o.z53((31&z[V+2])<<8,z[V+3]);};if(K=b9o.K53((15&z[V+1])<<8,z[V+2]),V+=8,b9o.N53((K-5-4)/4,1))throw  new Error("TS has more that 1 program");Q();}}else if(b9o.j53(D,u.stream.programMapTable[K5.h264])||b9o.y53(D,u.stream.programMapTable[K5.adts])||b9o.A53(D,u.stream.programMapTable[K5.metadata])){if(H){if(b9o.Y53(0,z[V+0])||b9o.l53(0,z[V+1])||b9o.n53(1,z[V+2]))throw  new Error("PES did not begin with start code");R=b9o.c53(z[V+4]<<8,z[V+5]),N=b9o.k53(0,(4&z[V+6])),M=z[V+7],P=z[V+8],V+=9,b9o.D53(192,M)&&(A=b9o.w53((14&z[V+0])<<28,(255&z[V+1])<<21,(254&z[V+2])<<13,(255&z[V+3])<<6,(254&z[V+4])>>>2),A/=45,y=A,b9o.s53(64,M)&&(y=b9o.e53((14&z[V+5])<<28,(255&z[V+6])<<21,(254&z[V+7])<<13,(255&z[V+8])<<6,(254&z[V+9])>>>2),y/=45)),V+=P,u.metadataStream.timestampOffset||(u.metadataStream.timestampOffset=A),b9o.o33(D,u.stream.programMapTable[K5.h264])?(z5||(z5=!0,void 0===v&&(v=A),I.setTimeStampOffset(v)),I.setNextTimeStamp(A,y,N)):b9o.Z33(D,u.stream.programMapTable[K5.adts])?(o5||(o5=!0,void 0===v&&(v=A),X.setTimeStampOffset(v)),X.setNextTimeStamp(A,R,N)):u.metadataStream.push({pts:A,dts:y,data:z.subarray(V)});}b9o.p33(D,u.stream.programMapTable[K5.adts])?X.writeBytes(z,V,b9o.P33(w,V)):b9o.r33(D,u.stream.programMapTable[K5.h264])&&I.writeBytes(z,V,b9o.S33(w,V));}else if(b9o.E33(u.stream.pmtPid,D)){if(H&&(V+=1+z[V]),b9o.q33(2,z[V])&&U.log("The table_id of a PMT should be 0x02 but was "+z[V].toString(16)),E=!!(b9o.J33(1,z[V+5])))for(u.stream.programMapTable={},G=b9o.H33((15&z[V+1])<<8,z[V+2]),B=b9o.V33((15&z[V+10])<<8,z[V+11]),G-=B,G-=13,V+=12+B;b9o.x33(G,0);){if(q=z[V+0],Y=b9o.m33((31&z[V+1])<<8,z[V+2]),b9o.X33(q,K5.h264)&&u.stream.programMapTable[q]&&b9o.g33(u.stream.programMapTable[q],Y))throw  new Error("Program has more than 1 video stream");if(b9o.f33(q,K5.adts)&&u.stream.programMapTable[q]&&b9o.h33(u.stream.programMapTable[q],Y))throw  new Error("Program has more than 1 audio Stream");u.stream.programMapTable[q]=Y,O=b9o.C33((15&z[V+3])<<8,z[V+4]),b9o.W23(q,K5.metadata)&&(u.metadataStream.descriptor=new Uint8Array(z.subarray(V+5,V+5+O))),V+=5+O,G-=5+O;}}else b9o.R23(17,D)||b9o.M23(8191,D)||U.log("Unknown PID parsing TS packet: "+D);return !0;},u.getTags=function(){return I.tags;},u.stats={h264Tags:function(){return I.tags.length;},aacTags:function(){return X.tags.length;}};},U.Hls.SegmentParser.MP2T_PACKET_LENGTH=C=188,U.Hls.SegmentParser.STREAM_TYPES=K5={h264:27,adts:15,metadata:21};}(window),function(M,P,A,y,E){var B,G,q,Y=function(){},O=function(){var z="[^=]*",W='"[^"]*"|[^,]*',Z="(?:"+z+")=(?:"+W+")";return new RegExp("(?:^|,)("+Z+")");}(),V=function(z){for(var W,Z=z.split(O),K=Z.length,R={};K--;)b9o.b23("",Z[K])&&(W=/([^=]*)=(.*)/.exec(Z[K]).slice(1),W[0]=W[0].replace(/^\s+|\s+$/g,""),W[1]=W[1].replace(/^\s+|\s+$/g,""),W[1]=W[1].replace(/^['"](.*)['"]$/g,"$1"),R[W[0]]=W[1]);return R;},w=M.Hls.Stream;B=function(){var Z="";B.prototype.init.call(this),this.push=function(z){var W;for(Z+=z,W=Z.indexOf("\n");W>-1;W=Z.indexOf("\n"))this.trigger("data",Z.substring(0,W)),Z=Z.substring(W+1);};},B.prototype=new w,G=function(){G.prototype.init.call(this);},G.prototype=new w,G.prototype.push=function(Z){var K,R;if(b9o.i23(0,Z.length))return b9o.T23("#",Z[0])?void this.trigger("data",{type:"uri",uri:Z}):b9o.B23(0,Z.indexOf("#EXT"))?void this.trigger("data",{type:"comment",text:Z.slice(1)}):(Z=Z.replace("\r",""),(K=/^#EXTM3U/.exec(Z))?void this.trigger("data",{type:"tag",tagType:"m3u"}):(K=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(Z))?(R={type:"tag",tagType:"inf"},K[1]&&(R.duration=parseFloat(K[1])),K[2]&&(R.title=K[2]),void this.trigger("data",R)):(K=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(Z))?(R={type:"tag",tagType:"targetduration"},K[1]&&(R.duration=P(K[1],10)),void this.trigger("data",R)):(K=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(Z))?(R={type:"tag",tagType:"totalduration"},K[1]&&(R.duration=P(K[1],10)),void this.trigger("data",R)):(K=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(Z))?(R={type:"tag",tagType:"version"},K[1]&&(R.version=P(K[1],10)),void this.trigger("data",R)):(K=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(Z))?(R={type:"tag",tagType:"media-sequence"},K[1]&&(R.number=P(K[1],10)),void this.trigger("data",R)):(K=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(Z))?(R={type:"tag",tagType:"playlist-type"},K[1]&&(R.playlistType=K[1]),void this.trigger("data",R)):(K=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(Z))?(R={type:"tag",tagType:"byterange"},K[1]&&(R.length=P(K[1],10)),K[2]&&(R.offset=P(K[2],10)),void this.trigger("data",R)):(K=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(Z))?(R={type:"tag",tagType:"allow-cache"},K[1]&&(R.allowed=!/NO/.test(K[1])),void this.trigger("data",R)):(K=/^#EXT-X-STREAM-INF:?(.*)$/.exec(Z))?(R={type:"tag",tagType:"stream-inf"},K[1]&&(R.attributes=V(K[1]),R.attributes.RESOLUTION&&!function(){var z=R.attributes.RESOLUTION.split("x"),W={};z[0]&&(W.width=P(z[0],10)),z[1]&&(W.height=P(z[1],10)),R.attributes.RESOLUTION=W;}(),R.attributes.BANDWIDTH&&(R.attributes.BANDWIDTH=P(R.attributes.BANDWIDTH,10)),R.attributes["PROGRAM-ID"]&&(R.attributes["PROGRAM-ID"]=P(R.attributes["PROGRAM-ID"],10))),void this.trigger("data",R)):(K=/^#EXT-X-ENDLIST/.exec(Z))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(K=/^#EXT-X-DISCONTINUITY/.exec(Z))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(K=/^#EXT-X-KEY:?(.*)$/.exec(Z))?(R={type:"tag",tagType:"key"},K[1]&&(R.attributes=V(K[1]),R.attributes.IV&&(b9o.G23("0x",R.attributes.IV.substring(0,2))&&(R.attributes.IV=R.attributes.IV.substring(2)),R.attributes.IV=R.attributes.IV.match(/.{8}/g),R.attributes.IV[0]=P(R.attributes.IV[0],16),R.attributes.IV[1]=P(R.attributes.IV[1],16),R.attributes.IV[2]=P(R.attributes.IV[2],16),R.attributes.IV[3]=P(R.attributes.IV[3],16),R.attributes.IV=new Uint32Array(R.attributes.IV))),void this.trigger("data",R)):void this.trigger("data",{type:"tag",data:Z.slice(4,Z.length)}));},q=function(){var Z,K=this,R=[],N={};q.prototype.init.call(this),this.lineStream=new B,this.parseStream=new G,this.lineStream.pipe(this.parseStream),this.manifest={allowCache:!0},this.parseStream.on("data",function(W){({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=W.allowed,b9o.O23("allowed",W)||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0);},byterange:function(){var z={};b9o.Q23("length",W)&&(N.byterange=z,z.length=W.length,b9o.F23("offset",W)||(this.trigger("info",{message:"defaulting offset to zero"}),W.offset=0)),b9o.a23("offset",W)&&(N.byterange=z,z.offset=W.offset);},endlist:function(){this.manifest.endList=!0;},inf:function(){b9o.v23("mediaSequence",this.manifest)||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),b9o.I23(W.duration,0)&&(N.duration=W.duration),this.manifest.segments=R;},key:function(){return W.attributes?b9o.d23("NONE",W.attributes.METHOD)?void (Z=null):W.attributes.URI?(W.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),Z={method:W.attributes.METHOD||"AES-128",uri:W.attributes.URI},void (b9o.t23(W.attributes.IV,E)&&(Z.iv=W.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"});},"media-sequence":function(){return A(W.number)?void (this.manifest.mediaSequence=W.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+W.number});},"playlist-type":function(){return /VOD|EVENT/.test(W.playlistType)?void (this.manifest.playlistType=W.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+W.playlist});},"stream-inf":function(){return this.manifest.playlists=R,W.attributes?(N.attributes||(N.attributes={}),void (N.attributes=y(N.attributes,W.attributes))):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"});},discontinuity:function(){var z=function(){N.discontinuity=!0;};z();},targetduration:function(){return !A(W.duration)||b9o.L23(W.duration,0)?void this.trigger("warn",{message:"ignoring invalid target duration: "+W.duration}):void (this.manifest.targetDuration=W.duration);},totalduration:function(){return !A(W.duration)||b9o.z83(W.duration,0)?void this.trigger("warn",{message:"ignoring invalid total duration: "+W.duration}):void (this.manifest.totalDuration=W.duration);}})[W.tagType]||Y).call(K);},uri:function(){N.uri=W.uri,R.push(N),!this.manifest.targetDuration||b9o.K83("duration",N)||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),N.duration=this.manifest.targetDuration),Z&&(N.key=Z),N={};},comment:function(){}})[W.type].call(K);});},q.prototype=new w,q.prototype.push=function(z){this.lineStream.push(z);},q.prototype.end=function(){this.lineStream.push("\n");},window.videojs.m3u8={LineStream:B,ParseStream:G,Parser:q};}(window.videojs,window.parseInt,window.isFinite,window.videojs.util.mergeOptions),function(Y,O){"use strict";var V=O.Hls.resolveUrl,w=O.Hls.xhr,H=function(z,W){var Z,K,R=!1,N=O.util.mergeOptions(z,{});for(Z=z.playlists.length;Z--;)if(K=N.playlists[Z],b9o.N83(K.uri,W.uri)){if(K.segments&&W.segments&&b9o.j83(K.segments.length,W.segments.length)&&b9o.y83(K.mediaSequence,W.mediaSequence))continue;N.playlists[Z]=O.util.mergeOptions(K,W),N.playlists[W.uri]=N.playlists[Z],R=!0;}return R?N:null;},D=function(M,P){var A,y,E,B,G=this,q=function(z,W,Z){var K,R,N;return G.setBandwidth(B||W),B=null,z?(G.error={status:W.status,message:"HLS playlist request error at URL: "+Z,responseText:W.responseText,code:b9o.A83(W.status,500)?4:2},G.trigger("error")):(G.state="HAVE_METADATA",K=new O.m3u8.Parser,K.push(W.responseText),K.end(),K.manifest.uri=Z,N=H(G.master,K.manifest),R=b9o.Y83(1e3,(K.manifest.targetDuration||10)),N?(G.master=N,y=G.master.playlists[Z]):R/=2,G.media().endList||(E=Y.setTimeout(function(){G.trigger("mediaupdatetimeout");},R)),void G.trigger("loadedplaylist"));};if(D.prototype.init.call(this),!M)throw  new Error("A non-empty playlist URL is required");G.state="HAVE_NOTHING",A=this.dispose,G.dispose=function(){B&&(B.onreadystatechange=null,B.abort(),B=null),Y.clearTimeout(E),A.call(this);},G.media=function(W){var Z=!1;if(!W)return y;if(b9o.l83("HAVE_NOTHING",G.state)||b9o.n83("HAVE_MASTER",G.state))throw  new Error("Cannot switch media playlist from "+G.state);if("string"==typeof W){var K=function(z){W=z.master.playlists[W];};if(!G.master.playlists[W])throw  new Error("Unknown playlist URI: "+W);K(G);}if(Z=b9o.c83(W.uri,y.uri),G.master.playlists[W.uri].endList)return B&&(B.onreadystatechange=null,B.abort(),B=null),G.state="HAVE_METADATA",y=W,void (Z&&G.trigger("mediachange"));if(Z){if(G.state="SWITCHING_MEDIA",B){if(b9o.k83(V(G.master.uri,W.uri),B.url))return ;B.onreadystatechange=null,B.abort(),B=null;}B=w({url:V(G.master.uri,W.uri),withCredentials:P},function(z){q(z,this,W.uri),G.trigger("mediachange");});}},G.setBandwidth=function(W){var Z=function(z){G.bandwidth=z.bandwidth;};Z(W);},G.on("mediaupdatetimeout",function(){b9o.D83("HAVE_METADATA",G.state)&&(G.state="HAVE_CURRENT_METADATA",B=w({url:V(G.master.uri,G.media().uri),withCredentials:P},function(z){q(z,this,G.media().uri);}));}),w({url:M,withCredentials:P},function(W){var Z,K;if(W)return G.error={status:this.status,message:"HLS playlist request error at URL: "+M,responseText:this.responseText,code:2},G.trigger("error");if(Z=new O.m3u8.Parser,Z.push(this.responseText),Z.end(),G.state="HAVE_MASTER",Z.manifest.uri=M,Z.manifest.playlists){var R=function(z){G.master.playlists[G.master.playlists[K].uri]=z.master.playlists[K];};for(G.master=Z.manifest,K=G.master.playlists.length;K--;)R(G);return B=w({url:V(M,Z.manifest.playlists[0].uri),withCredentials:P},function(z){q(z,this,Z.manifest.playlists[0].uri),z||G.trigger("loadedmetadata");}),G.trigger("loadedplaylist");}return G.master={uri:Y.location.href,playlists:[{uri:M}]},G.master.playlists[M]=G.master.playlists[0],q(null,this,M),G.trigger("loadedmetadata");});};D.prototype=new O.Hls.Stream,O.Hls.PlaylistLoader=D;}(window,window.videojs),function b(M,P,A){function y(Z,K){if(!P[Z]){if(!M[Z]){var R="function"==typeof require&&require;if(!K&&R)return R(Z,!0);if(E)return E(Z,!0);throw  new Error("Cannot find module '"+Z+"'");}var N=P[Z]={exports:{}};M[Z][0].call(N.exports,function(z){var W=M[Z][1][z];return y(W?W:z);},N,N.exports,b,M,P,A);}return P[Z].exports;}for(var E="function"==typeof require&&require,B=0;b9o.w83(B,A.length);B++)y(A[B]);return y;}({1:[function(W){(function(z){z.window.pkcs7={unpad:W("./unpad")};}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});},{"./unpad":2}],2:[function(W,Z){"use strict";Z.exports=function(z){return z.subarray(0,b9o.u83(z.byteLength,z[z.byteLength-1]));};},{}]},{},[1]),function(v,u,J){"use strict";var L,I,X,z5,o5;o5=function(z){return b9o.s83(z<<24,(65280&z)<<8,(16711680&z)>>8,z>>>24);},L=function(z){this._precompute();var W,Z,K,R,N,M=this._tables[0][4],P=this._tables[1],A=z.length,y=1;if(b9o.h83(4,A)&&b9o.C83(6,A)&&b9o.W13(8,A))throw  new Error("Invalid aes key size");for(R=z.slice(0),N=[],this._key=[R,N],W=A;b9o.R13(4*A+28,W);W++)K=R[b9o.M13(W,1)],(b9o.b13(W%A,0)||b9o.i13(8,A)&&b9o.T13(W%A,4))&&(K=b9o.B13(M[K>>>24]<<24,M[K>>16&255]<<16,M[K>>8&255]<<8,M[255&K]),b9o.n13(W%A,0)&&(K=b9o.c13(K<<8,K>>>24,y<<24),y=b9o.F13(y<<1,283*(y>>7)))),R[W]=b9o.a13(R[W-A],K);for(Z=0;W;Z++,W--)K=R[b9o.v13(3,Z)?W:b9o.I13(W,4)],N[Z]=b9o.d13(4,W)||b9o.t13(4,Z)?K:b9o.L13(P[0][M[K>>>24]],P[1][M[K>>16&255]],P[2][M[K>>8&255]],P[3][M[255&K]]);},L.prototype={_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var W=function(z){V[b9o.Z63((O[Z]=Z<<1^283*(Z>>7)),Z)]=z;},Z,K,R,N,M,P,A,y,E,B=this._tables[0],G=this._tables[1],q=B[4],Y=G[4],O=[],V=[];for(Z=0;b9o.p63(256,Z);Z++)W(Z);for(K=R=0;!q[K];K^=N||1,R=V[R]||1)for(A=b9o.P63(R,R<<1,R<<2,R<<3,R<<4),A=b9o.S63(A>>8,255&A,99),q[K]=A,Y[A]=K,P=O[M=O[N=O[K]]],E=b9o.Y63(16843009*P,65537*M,257*N,16843008*K),y=b9o.J63(257*O[A],16843008*A),Z=0;b9o.H63(4,Z);Z++)B[Z][K]=y=b9o.V63(y<<24,y>>>8),G[Z][A]=E=b9o.x63(E<<24,E>>>8);for(Z=0;b9o.m63(5,Z);Z++)B[Z]=B[Z].slice(0),G[Z]=G[Z].slice(0);},decrypt:function(z,W,Z,K,R,N){var M,P,A,y,E=this._key[1],B=b9o.X63(z,E[0]),G=b9o.g63(K,E[1]),q=b9o.f63(Z,E[2]),Y=b9o.h63(W,E[3]),O=b9o.C63(E.length/4,2),V=4,w=this._tables[1],H=w[0],D=w[1],F=w[2],Q=w[3],x=w[4];for(y=0;b9o.W73(O,y);y++)M=b9o.R73(H[B>>>24],D[G>>16&255],F[q>>8&255],Q[255&Y],E[V]),P=b9o.b73(H[G>>>24],D[q>>16&255],F[Y>>8&255],Q[255&B],E[V+1]),A=b9o.T73(H[q>>>24],D[Y>>16&255],F[B>>8&255],Q[255&G],E[V+2]),Y=b9o.G73(H[Y>>>24],D[B>>16&255],F[G>>8&255],Q[255&q],E[V+3]),V+=4,B=M,G=P,q=A;for(y=0;b9o.Q73(4,y);y++)R[(3&-y)+N]=b9o.F73(x[B>>>24]<<24,x[G>>16&255]<<16,x[q>>8&255]<<8,x[255&Y],E[V++]),M=B,B=G,G=q,q=Y,Y=M;}},z5=function(z,W,Z){var K,R,N,M,P,A,y,E,B,G=new Int32Array(z.buffer,z.byteOffset,b9o.v73(z.byteLength,2)),q=new L(Array.prototype.slice.call(W)),Y=new Uint8Array(z.byteLength),O=new Int32Array(Y.buffer);for(K=Z[0],R=Z[1],N=Z[2],M=Z[3],B=0;b9o.I73(B,G.length);B+=4)P=o5(G[B]),A=o5(G[B+1]),y=o5(G[B+2]),E=o5(G[B+3]),q.decrypt(P,A,y,E,O,B),O[B]=o5(b9o.d73(O[B],K)),O[B+1]=o5(b9o.t73(O[B+1],R)),O[B+2]=o5(b9o.L73(O[B+2],N)),O[B+3]=o5(b9o.z03(O[B+3],M)),K=P,R=A,N=y,M=E;return Y;},I=function(){this.jobs=[],this.delay=1,this.timeout_=null;},I.prototype=new u.Hls.Stream,I.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(u.bind(this,this.processJob_),this.delay):null;},I.prototype.push=function(z){this.jobs.push(z),this.timeout_||(this.timeout_=setTimeout(u.bind(this,this.processJob_),this.delay));},X=function(z,W,Z,K){var R=X.STEP,N=new Int32Array(z.buffer),M=new Uint8Array(z.byteLength),P=0;for(this.asyncStream_=new I,this.asyncStream_.push(this.decryptChunk_(N.subarray(P,P+R),W,Z,M,P)),P=R;b9o.K03(P,N.length);P+=R)Z=new Uint32Array([o5(N[b9o.N03(P,4)]),o5(N[b9o.j03(P,3)]),o5(N[b9o.y03(P,2)]),o5(N[b9o.A03(P,1)])]),this.asyncStream_.push(this.decryptChunk_(N.subarray(P,P+R),W,Z,M));this.asyncStream_.push(function(){K(null,J(M));});},X.prototype=new u.Hls.Stream,X.prototype.decryptChunk_=function(W,Z,K,R){return function(){var z=z5(W,Z,K);R.set(z,W.byteOffset);};},X.STEP=32e3,u.Hls.decrypt=z5,u.Hls.Decrypter=X,u.Hls.AsyncStream=I;}(window,window.videojs,window.pkcs7.unpad),function(G){var q=function(z){G.videojs.Hls.utils=z;},Y={hexDump:function(K){for(var R,N,M=Array.prototype.slice.call(K),P=16,A=function(z,W){var Z=z.toString(16);return "00".substring(0,b9o.Y03(2,Z.length))+Z+(b9o.l03(W,2)?" ":"");},y=function(z){return b9o.n03(z,32)&&b9o.c03(126,z)?String.fromCharCode(z):".";},E="",B=0;b9o.k03(B,M.length/P);B++)R=M.slice(b9o.D03(B,P),b9o.w03(B,P)+P).map(A).join(""),N=M.slice(b9o.u03(B,P),b9o.s03(B,P)+P).map(y).join(""),E+=R+" "+N+"\n";return E;},tagDump:function(z){return Y.hexDump(z.bytes);}};q(Y);}(this),videojs.plugin("audiotracks",function(R){var N=this,M=videojs.MenuItem.extend({init:function(z,W){videojs.MenuItem.call(this,z,W),this.lang=W.label,this.on("tap",this.onClick),this.on("click",this.onClick);}});M.prototype.onClick=function(){this.trigger({type:"selected",lang:this.lang,trackId:this.options().trackId});};var P=videojs.MenuButton.extend({init:function(z,W,Z){this.tracks=void 0!==z.audioTracks?z.audioTracks():[],videojs.MenuButton.call(this,z,W,Z),b9o.e03(this.tracks.length,1)&&this.hide(),this.el().setAttribute("aria-label","Audio Menu");}});P.prototype.buttonText="Audio",P.prototype.className="vjs-audiotracks-button",P.prototype.createItems=function(){var z;for(this.items=[],z=0;b9o.U03(z,this.tracks.length);z++)this.items.push(this.createItem(z,this.tracks[z]));return this.items;},P.prototype.createItem=function(z,W){var Z,K=new castLabs.utils.Internationalization;return Z=new M(this.player(),{label:K.translateLanguageCode(W,"en"),trackId:z}),Z.on("selected",videojs.bind(this,this.selectItem)),Z.on("selected",videojs.bind(this,this.setAudioTrack)),Z;},P.prototype.selectItem=function(z){var W;for(W=0;b9o.o43(W,this.items.length);W++)this.items[W].selected(b9o.Z43(this.items[W].options().trackId,z.trackId)?!0:!1);},P.prototype.setAudioTrack=function(z){N.setAudioTrack(z.trackId),this.player().trigger({type:"trackchanged",trackType:"audio",trackId:z.trackId,trackEnabled:!0});};var A=null;N.on("loadedmetadata",function(){b9o.p43(null,A)&&A.dispose&&A.el()&&A.dispose(),A=new P(N,R),N.controlBar.addChild(A);});}),function(G){"use strict";var q={VERSION:"0.5.3"};q.System=function(){this._mappings={},this._outlets={},this._handlers={},this.strictInjections=!0,this.autoMapOutlets=!1,this.postInjectionHook="setup";},q.System.prototype={_createAndSetupInstance:function(z,W){var Z=new W;return this.injectInto(Z,z),Z;},_retrieveFromCacheOrCreate:function(z,W){"undefined"==typeof W&&(W=!1);var Z;if(!this._mappings.hasOwnProperty(z))throw  new Error(1e3);var K=this._mappings[z];return !W&&K.isSingleton?(b9o.P43(null,K.object)&&(K.object=this._createAndSetupInstance(z,K.clazz)),Z=K.object):Z=K.clazz?this._createAndSetupInstance(z,K.clazz):K.object,Z;},mapOutlet:function(z,W,Z){if("undefined"==typeof z)throw  new Error(1010);return W=W||"global",Z=Z||z,this._outlets.hasOwnProperty(W)||(this._outlets[W]={}),this._outlets[W][Z]=z,this;},getObject:function(z){if("undefined"==typeof z)throw  new Error(1020);return this._retrieveFromCacheOrCreate(z);},mapValue:function(z,W){if("undefined"==typeof z)throw  new Error(1030);return this._mappings[z]={clazz:null,object:W,isSingleton:!0},this.autoMapOutlets&&this.mapOutlet(z),this.hasMapping(z)&&this.injectInto(W,z),this;},hasMapping:function(z){if("undefined"==typeof z)throw  new Error(1040);return this._mappings.hasOwnProperty(z);},mapClass:function(z,W){if("undefined"==typeof z)throw  new Error(1050);if("undefined"==typeof W)throw  new Error(1051);return this._mappings[z]={clazz:W,object:null,isSingleton:!1},this.autoMapOutlets&&this.mapOutlet(z),this;},mapSingleton:function(z,W){if("undefined"==typeof z)throw  new Error(1060);if("undefined"==typeof W)throw  new Error(1061);return this._mappings[z]={clazz:W,object:null,isSingleton:!0},this.autoMapOutlets&&this.mapOutlet(z),this;},instantiate:function(z){if("undefined"==typeof z)throw  new Error(1070);return this._retrieveFromCacheOrCreate(z,!0);},injectInto:function(z,W){if("undefined"==typeof z)throw  new Error(1080);if("object"==typeof z){var Z=[];this._outlets.hasOwnProperty("global")&&Z.push(this._outlets.global),"undefined"!=typeof W&&this._outlets.hasOwnProperty(W)&&Z.push(this._outlets[W]);for(var K in Z){var R=Z[K];for(var N in R){var M=R[N];(!this.strictInjections||b9o.r43(N,z))&&(z[N]=this.getObject(M));}}b9o.S43("setup",z)&&z.setup.call(z);}return this;},unmap:function(z){if("undefined"==typeof z)throw  new Error(1090);return delete  this._mappings[z],this;},unmapOutlet:function(z,W){if("undefined"==typeof z)throw  new Error(1100);if("undefined"==typeof W)throw  new Error(1101);return delete  this._outlets[z][W],this;},mapHandler:function(z,W,Z,K,R){if("undefined"==typeof z)throw  new Error(1110);return W=W||"global",Z=Z||z,"undefined"==typeof K&&(K=!1),"undefined"==typeof R&&(R=!1),this._handlers.hasOwnProperty(z)||(this._handlers[z]={}),this._handlers[z].hasOwnProperty(W)||(this._handlers[z][W]=[]),this._handlers[z][W].push({handler:Z,oneShot:K,passEvent:R}),this;},unmapHandler:function(z,W,Z){if("undefined"==typeof z)throw  new Error(1120);if(W=W||"global",Z=Z||z,this._handlers.hasOwnProperty(z)&&this._handlers[z].hasOwnProperty(W)){var K=this._handlers[z][W];for(var R in K){var N=K[R];if(b9o.E43(N.handler,Z)){K.splice(R,1);break;}}}return this;},notify:function(z){if("undefined"==typeof z)throw  new Error(1130);var W=Array.prototype.slice.call(arguments),Z=W.slice(1);if(this._handlers.hasOwnProperty(z)){var K=this._handlers[z];for(var R in K){var N,M=K[R];b9o.q43("global",R)&&(N=this.getObject(R));var P,A,y=[];for(P=0,A=M.length;b9o.J43(A,P);P++){var E,B=M[P];E=N&&"string"==typeof B.handler?N[B.handler]:B.handler,B.oneShot&&y.unshift(P),B.passEvent?E.apply(N,W):E.apply(N,Z);}for(P=0,A=y.length;b9o.H43(A,P);P++)M.splice(y[P],1);}}return this;}},G.dijon=q;}(this),"undefined"==typeof utils)var utils={};"undefined"==typeof utils.Math&&(utils.Math={}),utils.Math.to64BitNumber=function(z,W){var Z,K,R;return Z=new goog.math.Long(0,W),K=new goog.math.Long(z,0),R=Z.add(K),R.toNumber();},goog={},goog.math={},goog.math.Long=function(z,W){this.low_=b9o.V43(0,z),this.high_=b9o.x43(0,W);},goog.math.Long.IntCache_={},goog.math.Long.fromInt=function(z){if(z>=-128&&b9o.m43(128,z)){var W=goog.math.Long.IntCache_[z];if(W)return W;}var Z=new goog.math.Long(b9o.X43(0,z),b9o.g43(0,z)?-1:0);return z>=-128&&b9o.f43(128,z)&&(goog.math.Long.IntCache_[z]=Z),Z;},goog.math.Long.fromNumber=function(z){return isNaN(z)||!isFinite(z)?goog.math.Long.ZERO:z<=-goog.math.Long.TWO_PWR_63_DBL_?goog.math.Long.MIN_VALUE:b9o.h43(z+1,goog.math.Long.TWO_PWR_63_DBL_)?goog.math.Long.MAX_VALUE:b9o.C43(0,z)?goog.math.Long.fromNumber(-z).negate():new goog.math.Long(b9o.W93(z%goog.math.Long.TWO_PWR_32_DBL_,0),b9o.R93(z/goog.math.Long.TWO_PWR_32_DBL_,0));},goog.math.Long.fromBits=function(z,W){return new goog.math.Long(z,W);},goog.math.Long.fromString=function(z,W){if(b9o.M93(0,z.length))throw Error("number format error: empty string");var Z=W||10;if(b9o.b93(2,Z)||b9o.i93(Z,36))throw Error("radix out of range: "+Z);if(b9o.T93("-",z.charAt(0)))return goog.math.Long.fromString(z.substring(1),Z).negate();if(b9o.B93(z.indexOf("-"),0))throw Error('number format error: interior "-" character: '+z);for(var K=goog.math.Long.fromNumber(Math.pow(Z,8)),R=goog.math.Long.ZERO,N=0;b9o.G93(N,z.length);N+=8){var M=Math.min(8,b9o.O93(z.length,N)),P=parseInt(z.substring(N,N+M),Z);if(b9o.Q93(8,M)){var A=goog.math.Long.fromNumber(Math.pow(Z,M));R=R.multiply(A).add(goog.math.Long.fromNumber(P));}else R=R.multiply(K),R=R.add(goog.math.Long.fromNumber(P));}return R;},goog.math.Long.TWO_PWR_16_DBL_=65536,goog.math.Long.TWO_PWR_24_DBL_=b9o.F93(1,24),goog.math.Long.TWO_PWR_32_DBL_=b9o.a93(goog.math.Long.TWO_PWR_16_DBL_,goog.math.Long.TWO_PWR_16_DBL_),goog.math.Long.TWO_PWR_31_DBL_=b9o.v93(goog.math.Long.TWO_PWR_32_DBL_,2),goog.math.Long.TWO_PWR_48_DBL_=b9o.I93(goog.math.Long.TWO_PWR_32_DBL_,goog.math.Long.TWO_PWR_16_DBL_),goog.math.Long.TWO_PWR_64_DBL_=b9o.d93(goog.math.Long.TWO_PWR_32_DBL_,goog.math.Long.TWO_PWR_32_DBL_),goog.math.Long.TWO_PWR_63_DBL_=b9o.t93(goog.math.Long.TWO_PWR_64_DBL_,2),goog.math.Long.ZERO=goog.math.Long.fromInt(0),goog.math.Long.ONE=goog.math.Long.fromInt(1),goog.math.Long.NEG_ONE=goog.math.Long.fromInt(-1),goog.math.Long.MAX_VALUE=goog.math.Long.fromBits(-1,2147483647),goog.math.Long.MIN_VALUE=goog.math.Long.fromBits(0,-2147483648),goog.math.Long.TWO_PWR_24_=goog.math.Long.fromInt(b9o.L93(1,24)),goog.math.Long.prototype.toInt=function(){return this.low_;},goog.math.Long.prototype.toNumber=function(){return b9o.z5L(this.high_,goog.math.Long.TWO_PWR_32_DBL_)+this.getLowBitsUnsigned();},goog.math.Long.prototype.toString=function(z){var W=z||10;if(b9o.K5L(2,W)||b9o.N5L(W,36))throw Error("radix out of range: "+W);if(this.isZero())return "0";if(this.isNegative()){if(this.equals(goog.math.Long.MIN_VALUE)){var Z=goog.math.Long.fromNumber(W),K=this.div(Z),R=K.multiply(Z).subtract(this);return K.toString(W)+R.toInt().toString(W);}return "-"+this.negate().toString(W);}for(var N=goog.math.Long.fromNumber(Math.pow(W,6)),R=this,M="";;){var P=function(){M=""+B+M;},A=function(){B="0"+B;};var y=R.div(N),E=R.subtract(y.multiply(N)).toInt(),B=E.toString(W);if(R=y,R.isZero())return B+M;for(;b9o.j5L(B.length,6);)A();P();}},goog.math.Long.prototype.getHighBits=function(){return this.high_;},goog.math.Long.prototype.getLowBits=function(){return this.low_;},goog.math.Long.prototype.getLowBitsUnsigned=function(){return b9o.y5L(this.low_,0)?this.low_:goog.math.Long.TWO_PWR_32_DBL_+this.low_;},goog.math.Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(goog.math.Long.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var z=b9o.A5L(0,this.high_)?this.high_:this.low_,W=31;b9o.Y5L(W,0)&&b9o.l5L(0,(z&1<<W));W--);return b9o.n5L(0,this.high_)?W+33:W+1;},goog.math.Long.prototype.isZero=function(){return b9o.c5L(0,this.high_)&&b9o.k5L(0,this.low_);},goog.math.Long.prototype.isNegative=function(){return b9o.D5L(this.high_,0);},goog.math.Long.prototype.isOdd=function(){return b9o.w5L(1,(1&this.low_));},goog.math.Long.prototype.equals=function(z){return b9o.u5L(this.high_,z.high_)&&b9o.s5L(this.low_,z.low_);},goog.math.Long.prototype.notEquals=function(z){return b9o.e5L(this.high_,z.high_)||b9o.U5L(this.low_,z.low_);},goog.math.Long.prototype.lessThan=function(z){return b9o.o3L(this.compare(z),0);},goog.math.Long.prototype.lessThanOrEqual=function(z){return b9o.Z3L(this.compare(z),0);},goog.math.Long.prototype.greaterThan=function(z){return b9o.p3L(this.compare(z),0);},goog.math.Long.prototype.greaterThanOrEqual=function(z){return b9o.P3L(this.compare(z),0);},goog.math.Long.prototype.compare=function(z){if(this.equals(z))return 0;var W=this.isNegative(),Z=z.isNegative();return W&&!Z?-1:!W&&Z?1:this.subtract(z).isNegative()?-1:1;},goog.math.Long.prototype.negate=function(){return this.equals(goog.math.Long.MIN_VALUE)?goog.math.Long.MIN_VALUE:this.not().add(goog.math.Long.ONE);},goog.math.Long.prototype.add=function(z){var W=b9o.r3L(this.high_,16),Z=b9o.S3L(65535,this.high_),K=b9o.E3L(this.low_,16),R=b9o.q3L(65535,this.low_),N=b9o.J3L(z.high_,16),M=b9o.H3L(65535,z.high_),P=b9o.V3L(z.low_,16),A=b9o.x3L(65535,z.low_),y=0,E=0,B=0,G=0;return G+=R+A,B+=b9o.m3L(G,16),G&=65535,B+=K+P,E+=b9o.X3L(B,16),B&=65535,E+=Z+M,y+=b9o.g3L(E,16),E&=65535,y+=W+N,y&=65535,goog.math.Long.fromBits(b9o.f3L(B<<16,G),b9o.h3L(y<<16,E));},goog.math.Long.prototype.subtract=function(z){return this.add(z.negate());},goog.math.Long.prototype.multiply=function(z){if(this.isZero())return goog.math.Long.ZERO;if(z.isZero())return goog.math.Long.ZERO;if(this.equals(goog.math.Long.MIN_VALUE))return z.isOdd()?goog.math.Long.MIN_VALUE:goog.math.Long.ZERO;if(z.equals(goog.math.Long.MIN_VALUE))return this.isOdd()?goog.math.Long.MIN_VALUE:goog.math.Long.ZERO;if(this.isNegative())return z.isNegative()?this.negate().multiply(z.negate()):this.negate().multiply(z).negate();if(z.isNegative())return this.multiply(z.negate()).negate();if(this.lessThan(goog.math.Long.TWO_PWR_24_)&&z.lessThan(goog.math.Long.TWO_PWR_24_))return goog.math.Long.fromNumber(b9o.C3L(this.toNumber(),z.toNumber()));var W=b9o.W2L(this.high_,16),Z=b9o.R2L(65535,this.high_),K=b9o.M2L(this.low_,16),R=b9o.b2L(65535,this.low_),N=b9o.i2L(z.high_,16),M=b9o.T2L(65535,z.high_),P=b9o.B2L(z.low_,16),A=b9o.G2L(65535,z.low_),y=0,E=0,B=0,G=0;return G+=b9o.O2L(R,A),B+=b9o.Q2L(G,16),G&=65535,B+=b9o.F2L(K,A),E+=b9o.a2L(B,16),B&=65535,B+=b9o.v2L(R,P),E+=b9o.I2L(B,16),B&=65535,E+=b9o.d2L(Z,A),y+=b9o.t2L(E,16),E&=65535,E+=b9o.L2L(K,P),y+=b9o.z8L(E,16),E&=65535,E+=b9o.K8L(R,M),y+=b9o.N8L(E,16),E&=65535,y+=b9o.j8L(W,A)+b9o.y8L(Z,P)+b9o.A8L(K,M)+b9o.Y8L(R,N),y&=65535,goog.math.Long.fromBits(b9o.l8L(B<<16,G),b9o.n8L(y<<16,E));},goog.math.Long.prototype.div=function(z){if(z.isZero())throw Error("division by zero");if(this.isZero())return goog.math.Long.ZERO;if(this.equals(goog.math.Long.MIN_VALUE)){if(z.equals(goog.math.Long.ONE)||z.equals(goog.math.Long.NEG_ONE))return goog.math.Long.MIN_VALUE;if(z.equals(goog.math.Long.MIN_VALUE))return goog.math.Long.ONE;var W=this.shiftRight(1),Z=W.div(z).shiftLeft(1);if(Z.equals(goog.math.Long.ZERO))return z.isNegative()?goog.math.Long.ONE:goog.math.Long.NEG_ONE;var K=this.subtract(z.multiply(Z)),R=Z.add(K.div(z));return R;}if(z.equals(goog.math.Long.MIN_VALUE))return goog.math.Long.ZERO;if(this.isNegative())return z.isNegative()?this.negate().div(z.negate()):this.negate().div(z).negate();if(z.isNegative())return this.div(z.negate()).negate();for(var N=goog.math.Long.ZERO,K=this;K.greaterThanOrEqual(z);){for(var Z=Math.max(1,Math.floor(b9o.c8L(K.toNumber(),z.toNumber()))),M=Math.ceil(b9o.k8L(Math.log(Z),Math.LN2)),P=b9o.D8L(48,M)?1:Math.pow(2,b9o.w8L(M,48)),A=goog.math.Long.fromNumber(Z),y=A.multiply(z);y.isNegative()||y.greaterThan(K);)Z-=P,A=goog.math.Long.fromNumber(Z),y=A.multiply(z);A.isZero()&&(A=goog.math.Long.ONE),N=N.add(A),K=K.subtract(y);}return N;},goog.math.Long.prototype.modulo=function(z){return this.subtract(this.div(z).multiply(z));},goog.math.Long.prototype.not=function(){return goog.math.Long.fromBits(~this.low_,~this.high_);},goog.math.Long.prototype.and=function(z){return goog.math.Long.fromBits(b9o.u8L(this.low_,z.low_),b9o.s8L(this.high_,z.high_));},goog.math.Long.prototype.or=function(z){return goog.math.Long.fromBits(b9o.e8L(this.low_,z.low_),b9o.U8L(this.high_,z.high_));},goog.math.Long.prototype.xor=function(z){return goog.math.Long.fromBits(b9o.o1L(this.low_,z.low_),b9o.Z1L(this.high_,z.high_));},goog.math.Long.prototype.shiftLeft=function(z){if(z&=63,b9o.p1L(0,z))return this;var W=this.low_;if(b9o.P1L(32,z)){var Z=this.high_;return goog.math.Long.fromBits(b9o.r1L(W,z),b9o.S1L(Z<<z,W>>>32-z));}return goog.math.Long.fromBits(0,b9o.E1L(W,z-32));},goog.math.Long.prototype.shiftRight=function(z){if(z&=63,b9o.q1L(0,z))return this;var W=this.high_;if(b9o.J1L(32,z)){var Z=this.low_;return goog.math.Long.fromBits(b9o.H1L(Z>>>z,W<<32-z),b9o.V1L(W,z));}return goog.math.Long.fromBits(b9o.x1L(W,z-32),b9o.m1L(W,0)?0:-1);},goog.math.Long.prototype.shiftRightUnsigned=function(z){if(z&=63,b9o.X1L(0,z))return this;var W=this.high_;if(b9o.g1L(32,z)){var Z=this.low_;return goog.math.Long.fromBits(b9o.f1L(Z>>>z,W<<32-z),b9o.h1L(W,z));}return b9o.C1L(32,z)?goog.math.Long.fromBits(W,0):goog.math.Long.fromBits(b9o.W6L(W,z-32),0);};var UTF8={};UTF8.encode=function(z){for(var W=[],Z=0;b9o.R6L(Z,z.length);++Z){var K=z.charCodeAt(Z);b9o.M6L(128,K)?W.push(K):b9o.b6L(2048,K)?(W.push(b9o.i6L(192,K>>6)),W.push(b9o.T6L(128,63&K))):b9o.B6L(65536,K)?(W.push(b9o.G6L(224,K>>12)),W.push(b9o.O6L(128,63&K>>6)),W.push(b9o.Q6L(128,63&K))):(W.push(b9o.F6L(240,K>>18)),W.push(b9o.a6L(128,63&K>>12)),W.push(b9o.v6L(128,63&K>>6)),W.push(b9o.I6L(128,63&K)));}return W;},UTF8.decode=function(z){for(var W=[],Z=0;b9o.d6L(Z,z.length);){var K=z[Z++];b9o.t6L(128,K)||(b9o.L6L(224,K)?(K=b9o.z7L((31&K),6),K|=b9o.K7L(63,z[Z++])):b9o.N7L(240,K)?(K=b9o.j7L((15&K),12),K|=b9o.y7L((63&z[Z++]),6),K|=b9o.A7L(63,z[Z++])):(K=b9o.Y7L((7&K),18),K|=b9o.l7L((63&z[Z++]),12),K|=b9o.n7L((63&z[Z++]),6),K|=b9o.c7L(63,z[Z++]))),W.push(String.fromCharCode(K));}return W.join("");};var BASE64={};!function(N){var M=function(z){for(var W=0,Z=[],K=b9o.k7L(0,z.length/3);b9o.D7L(0,K--);){var R=(b9o.w7L(z[W],16))+(b9o.u7L(z[W+1],8))+z[W+2];W+=3,Z.push(N.charAt(b9o.s7L(63,R>>18))),Z.push(N.charAt(b9o.e7L(63,R>>12))),Z.push(N.charAt(b9o.U7L(63,R>>6))),Z.push(N.charAt(b9o.o0L(63,R)));}if(b9o.Z0L(2,z.length-W)){var R=(b9o.p0L(z[W],16))+(b9o.P0L(z[W+1],8));Z.push(N.charAt(b9o.r0L(63,R>>18))),Z.push(N.charAt(b9o.S0L(63,R>>12))),Z.push(N.charAt(b9o.E0L(63,R>>6))),Z.push("=");}else if(b9o.q0L(1,z.length-W)){var R=b9o.J0L(z[W],16);Z.push(N.charAt(b9o.H0L(63,R>>18))),Z.push(N.charAt(b9o.V0L(63,R>>12))),Z.push("==");}return Z.join("");},P=function(){var W=function(z){Z[N.charCodeAt(K)]=z;};for(var Z=[],K=0;b9o.x0L(K,N.length);++K)W(K);return Z["=".charCodeAt(0)]=0,Z;}(),A=function(z){for(var W=0,Z=[],K=b9o.m0L(0,z.length/4);b9o.X0L(0,K--);){var R=(b9o.g0L(P[z.charCodeAt(W)],18))+(b9o.f0L(P[z.charCodeAt(W+1)],12))+(b9o.h0L(P[z.charCodeAt(W+2)],6))+P[z.charCodeAt(W+3)];Z.push(b9o.C0L(255,R>>16)),Z.push(b9o.W4L(255,R>>8)),Z.push(b9o.R4L(255,R)),W+=4;}return Z&&(b9o.M4L("=",z.charAt(W-2))?(Z.pop(),Z.pop()):b9o.b4L("=",z.charAt(W-1))&&Z.pop()),Z;},y={};y.encode=function(z){for(var W=[],Z=0;b9o.i4L(Z,z.length);++Z)W.push(z.charCodeAt(Z));return W;},y.decode=function(){for(var z=0;b9o.T4L(z,s.length);++z)a[z]=String.fromCharCode(a[z]);return a.join("");},BASE64.decodeArray=function(z){var W=A(z);return new Uint8Array(W);},BASE64.encodeASCII=function(z){var W=y.encode(z);return M(W);},BASE64.decodeASCII=function(z){var W=A(z);return y.decode(W);},BASE64.encode=function(z){var W=UTF8.encode(z);return M(W);},BASE64.decode=function(z){var W=A(z);return UTF8.decode(W);};}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),MediaPlayer=function(A){"use strict";var y,E,B,G,q,Y,O,V,w,H,D,F,Q="1.4.0",x=null,v=!1,u=!1,J=!0,L=!1,I=MediaPlayer.dependencies.BufferController.BUFFER_SIZE_REQUIRED,X=function(){return !!G&&!!q;},z5=function(){if(!v)throw "MediaPlayer not initialized!";if(!this.capabilities.supportsMediaSource())return void this.errHandler.capabilityError("mediasource");if(!G||!q)throw "Missing view or source.";u=!0,this.debug.log("Playback initiated!"),Y=y.getObject("streamController"),Y.subscribe(MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED,V),E.subscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,Y),E.subscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,V),Y.initialize(),Y.setVideoModel(D),Y.setAutoPlay(J),Y.setProtectionData(x),F.checkInitialBitrate(),Y.load(q),y.mapValue("scheduleWhilePaused",L),y.mapOutlet("scheduleWhilePaused","stream"),y.mapOutlet("scheduleWhilePaused","scheduleController"),y.mapValue("bufferMax",I),y.mapOutlet("bufferMax","bufferController"),O.initialize();},o5=function(){X()&&z5.call(this);},W5=function(){var z=H.getReadOnlyMetricsFor(b9o.B4L(CL.configs.tracks.video.length,0)?"video":"audio");return w.getCurrentDVRInfo(z);},C=function(){return W5.call(this).manifestInfo.DVRWindowSize;},K5=function(z){var W,Z=W5.call(this);return void 0!==Z&&b9o.G4L(null,Z)&&void 0!==Z.range&&b9o.O4L(null,Z.range)?(W=Z.range.start+z,b9o.Q4L(W,Z.range.end)&&(W=Z.range.end)):W=z,W;},U=function(z){CL.configs.isLive===!0&&(CL.configs.minStartTime=null),b9o.F4L(null,CL.configs.minStartTime)&&b9o.a4L(z,CL.configs.minStartTime)&&(z=CL.configs.minStartTime),z=this.getDVRSeekOffset(z),this.getVideoModel().setCurrentTime(z);},Z5=function(){var z=W5.call(this);return b9o.v4L(null,z)?0:b9o.I4L(this.duration(),(z.range.end-z.time));},p5=function(){var z,W=W5.call(this);return b9o.d4L(null,W)?0:(z=b9o.t4L(W.range.end,W.range.start),b9o.L4L(z,W.manifestInfo.DVRWindowSize)?z:W.manifestInfo.DVRWindowSize);},N5=function(z){var W,Z,K=W5.call(this);return b9o.z9L(null,K)?0:(W=b9o.K9L(K.manifestInfo.availableFrom.getTime(),1e3),Z=z+(W+K.range.start));},R5=function(){return N5.call(this,this.time());},b5=function(){return N5.call(this,this.duration());},j5=function(z,W,Z){var K=new Date(b9o.N9L(1e3,z)),R=K.toLocaleDateString(W),N=K.toLocaleTimeString(W,{hour12:Z});return N+" "+R;},T5=function(z){z=Math.max(z,0);var W=Math.floor(b9o.j9L(z,3600)),Z=Math.floor(b9o.y9L(z,3600,60)),K=Math.floor(b9o.T9L(z,3600,60));return (b9o.q9L(0,W)?"":b9o.J9L(10,W)?"0"+W.toString()+":":W.toString()+":")+(b9o.H9L(10,Z)?"0"+Z.toString():Z.toString())+":"+(b9o.V9L(10,K)?"0"+K.toString():K.toString());},S5=function(z,W,Z){W&&void 0!==z&&b9o.x9L(null,z)&&(Z?O.setRules(z,W):O.addRules(z,W));},Y5=function(){u&&Y&&(Y.unsubscribe(MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED,V),E.unsubscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,Y),E.unsubscribe(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,V),Y.reset(),B.reset(),O.reset(),Y=null,u=!1);},O5=function(W){for(var Z in W){var K=W[Z];if(b9o.m9L("ABRParameters",Z)&&b9o.X9L("customHeaders",Z))CL.manifest[Z]=K,b9o.g9L("debug",Z)&&(CL.configs.debug=K);else for(var R in K){var N=function(z){CL.manifest[Z][R]=z;};var M=K[R];N(M);}}},k5=function(W){var Z=function(z){P.httpRequestHeaders[N]=z.manifest.customHeaders.licenseRequest[N];},K=W.toLowerCase(),R=CL.configs.element?CL.configs.element:document.querySelector("video");CL.configs.keyRequests=[],CL.configs.activeTrack=[],MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME=CL.manifest.ABRParameters.minBufferLength||MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME,MediaPlayer.dependencies.BufferController.LOW_BUFFER_THRESHOLD=void 0!==CL.manifest.ABRParameters.minBufferLength?b9o.f9L(CL.manifest.ABRParameters.minBufferLength,2):MediaPlayer.dependencies.BufferController.LOW_BUFFER_THRESHOLD,(b9o.h9L(1,CL.manifest.isSmoothStreaming)||(K.indexOf(".ism")>-1||K.indexOf("ism/Manifest")>-1)&&-1==K.indexOf("format=mpd")&&-1==K.indexOf(".mpd"))&&(CL.configs.isSmoothStreaming=!0),CL.manifest.url=W,CL.manifest.activeDRM="unprotected",CL.manifest.customDataEncoded=BASE64.encode(JSON.stringify(CL.manifest.customData));var N,M=[],P=new MediaPlayer.vo.protection.ProtectionData;if(P.laURL=CL.manifest.widevineLicenseServerURL,P.httpRequestHeaders=[],CL.manifest.sendCustomData===!0&&(P.httpRequestHeaders["dt-custom-data"]=CL.manifest.customDataEncoded),b9o.C9L(null,CL.manifest.authenticationToken)&&b9o.W5P("",CL.manifest.authenticationToken)&&(P.httpRequestHeaders["x-dt-auth-token"]=CL.manifest.authenticationToken),void 0!==CL.manifest.customHeaders&&void 0!==CL.manifest.customHeaders.licenseRequest)for(N in CL.manifest.customHeaders.licenseRequest)Z(CL);M["com.widevine.alpha"]=P,this.attachProtectionData(M),P=new MediaPlayer.vo.protection.ProtectionData,P.laURL=CL.manifest.playReadyLicenseServerURL,P.httpRequestHeaders=[],CL.manifest.sendCustomData===!0&&(P.httpRequestHeaders["http-header-CustomData"]=CL.manifest.customDataEncoded),b9o.R5P(null,CL.manifest.authenticationToken)&&b9o.M5P("",CL.manifest.authenticationToken)&&(P.httpRequestHeaders["x-dt-auth-token"]=CL.manifest.authenticationToken),M["com.microsoft.playready"]=P,M["com.youtube.playready"]=P,this.attachProtectionData(M),v&&this.reset(),R.autoplay=CL.manifest.autoplay,this.startup(),this.setAutoPlay(CL.manifest.autoplay),this.attachView(R),this.attachSource(W);},V5=function(z){z?G5("text",CL.configs.activeTrack.text.id):Y.disableTextTracks();},G5=function(z,W){CL.configs.debug&&console.log("Setting active "+z+" track to id "+W);for(var Z,K=0;b9o.b5P(K,CL.configs.tracks[z].length);K++)if(Z=CL.configs.tracks[z][K],b9o.i5P(Z.id,W)){var R=JSON.parse(JSON.stringify(Z));return CL.configs.activeTrack[z]=R,CL.manifest.useLookAheadFragments===!0&&(CL.configs.needManifestUpdate=!0),void Y.update(z);}CL.configs.debug&&console.log("Could not switch to "+z+" track "+W+", id unknown.");},Q5=function(z){if(b9o.T5P("text",z)&&b9o.B5P("audio",z))throw "Cannot get available tracks for unknown type "+z+". Valid types are 'audio' and 'text'.";return CL.configs.tracks[z];},B5=dijon.System.prototype.getObject;dijon.System.prototype.getObject=function(K){var R=B5.call(this,K);return "object"!=typeof R||R.getName||(R.getName=function(){return K;},R.setMediaType=function(W){var Z=function(z){R.mediaType=z;};Z(W);},R.getMediaType=function(){return R.mediaType;}),R;},y=new dijon.System,y.mapValue("system",y),y.mapOutlet("system"),y.injectInto(A);var A5=A.config?A.config:{},q5=A.system.getObject("debug");CL.configs.element?CL.configs.element:document.querySelector("video"),this.currentTime=0,this.duration=0;var n5=!1,w5=function(){Y.pause();},i5=function(){Y.play();},H5=function(){n5=!0,Y.reset();},F5=function(){return n5;},O5=function(W){for(var Z in W){var K=W[Z];if(b9o.G5P("ABRParameters",Z)&&b9o.O5P("customHeaders",Z))CL.manifest[Z]=K,b9o.Q5P("debug",Z)&&(CL.configs.debug=K,q5.setLogToBrowserConsole(CL.configs.debug));else for(var R in K){var N=function(z){CL.manifest[Z][R]=z;};var M=K[R];N(M);}}};A5&&O5(A5),CL.manifest.disableChromecastSupport===!0&&(CL.configs.isChromecast=!1);var x5={notifier:void 0,debug:void 0,eventBus:void 0,capabilities:void 0,adapter:void 0,errHandler:void 0,uriQueryFragModel:void 0,videoElementExt:void 0,getABRController:function(){return B;},setup:function(){w=y.getObject("metricsExt"),E=y.getObject("manifestLoader"),V=y.getObject("manifestUpdater"),B=y.getObject("abrController"),O=y.getObject("rulesController"),H=y.getObject("metricsModel"),F=y.getObject("DOMStorage");},addEventListener:function(z,W,Z){this.eventBus.addEventListener(z,W,Z);},removeEventListener:function(z,W,Z){this.eventBus.removeEventListener(z,W,Z);},getVersion:function(){return Q;},startup:function(){v||(y.injectInto(this),v=!0);},getDebug:function(){return this.debug;},getVideoModel:function(){var z=Y?Y.getActiveStreamInfo():null,W=z?Y.getStreamById(z.id):null;return W?W.getVideoModel():D;},enableLastBitrateCaching:function(z,W){F.enableLastBitrateCaching(z,W);},setMaxAllowedBitrateFor:function(z,W){B.setMaxAllowedBitrateFor(z,W);},getMaxAllowedBitrateFor:function(z){return B.getMaxAllowedBitrateFor(z);},setAutoPlay:function(W){var Z=function(z){J=z;};Z(W);},getAutoPlay:function(){return J;},setScheduleWhilePaused:function(W){var Z=function(z){L=z;};Z(W);},getScheduleWhilePaused:function(){return L;},setBufferMax:function(W){var Z=function(z){I=z;};Z(W);},getBufferMax:function(){return I;},getMetricsExt:function(){return w;},getMetricsFor:function(z){return H.getReadOnlyMetricsFor(z);},getQualityFor:function(z){return B.getQualityFor(z,Y.getActiveStreamInfo());},setQualityFor:function(z,W){B.setPlaybackQuality(z,Y.getActiveStreamInfo(),W);},getBitrateInfoListFor:function(z){var W=Y.getActiveStreamInfo(),Z=Y.getStreamById(W.id);return Z.getBitrateListFor(z);},setInitialBitrateFor:function(z,W){B.setInitialBitrateFor(z,W);},getInitialBitrateFor:function(z){return B.getInitialBitrateFor(z);},getAutoSwitchQuality:function(){return B.getAutoSwitchBitrate();},setAutoSwitchQuality:function(z){B.setAutoSwitchBitrate(z);},setSchedulingRules:function(z){S5.call(this,O.SCHEDULING_RULE,z,!0);},addSchedulingRules:function(z){S5.call(this,O.SCHEDULING_RULE,z,!1);},setABRRules:function(z){S5.call(this,O.ABR_RULE,z,!0);},addABRRules:function(z){S5.call(this,O.ABR_RULE,z,!1);},attachView:function(z){if(!v)throw "MediaPlayer not initialized!";G=z,D=null,G&&(D=y.getObject("videoModel"),D.setElement(G)),Y5.call(this),X.call(this)&&o5.call(this);},attachSource:function(z){if(!v)throw "MediaPlayer not initialized!";this.uriQueryFragModel.reset(),q=this.uriQueryFragModel.parseURI(z),Y5.call(this),X.call(this)&&o5.call(this);},attachProtectionData:function(W){var Z=function(z){x=z;};Z(W);},reset:function(){this.attachSource(null),this.attachView(null);},play:z5,isReady:X,seek:U,time:Z5,duration:p5,timeAsUTC:R5,durationAsUTC:b5,getDVRWindowSize:C,getDVRSeekOffset:K5,formatUTC:j5,convertToTimeCode:T5,enableSubtitles:V5,setActiveTrack:G5,getAvailableTracks:Q5,loadVideo:k5,isDone:F5,setConfig:O5,pause:w5,resume:i5,end:H5};return CL.configs.isChromecast&&(window.self.firstPlayback=!0,window.self.player=x5,window.self.config=A5,loadScript("//www.gstatic.com/cast/sdk/libs/receiver/2.0.0/cast_receiver.js",initChromecastReceiver,this)),q5.setLogToBrowserConsole(CL.configs.debug),x5;},MediaPlayer.prototype={constructor:MediaPlayer},MediaPlayer.dependencies={},MediaPlayer.dependencies.protection={},MediaPlayer.utils={},MediaPlayer.models={},MediaPlayer.vo={},MediaPlayer.vo.metrics={},MediaPlayer.vo.protection={},MediaPlayer.rules={},MediaPlayer.di={},MediaPlayer.events={METRICS_CHANGED:"metricschanged",METRIC_CHANGED:"metricchanged",METRIC_UPDATED:"metricupdated",METRIC_ADDED:"metricadded",MANIFEST_LOADED:"manifestloaded",SWITCH_STREAM:"streamswitched",STREAM_INITIALIZED:"streaminitialized",TEXT_TRACK_ADDED:"texttrackadded",BUFFER_LOADED:"bufferloaded",BUFFER_EMPTY:"bufferstalled",ERROR:"error",LOG:"log"},MediaPlayer.di.Context=function(){var Z=function(){var z=document.createElement("video");if(MediaPlayer.models.ProtectionModel_21Jan2015.detect(z))this.system.mapClass("protectionModel",MediaPlayer.models.ProtectionModel_21Jan2015);else if(MediaPlayer.models.ProtectionModel_3Feb2014.detect(z))this.system.mapClass("protectionModel",MediaPlayer.models.ProtectionModel_3Feb2014);else if(MediaPlayer.models.ProtectionModel_01b.detect(z))this.system.mapClass("protectionModel",MediaPlayer.models.ProtectionModel_01b);else{var W=this.system.getObject("debug");W.log("No supported version of EME detected on this user agent!"),W.log("Attempts to play encrypted content will fail!");}};"use strict";return {system:void 0,setup:function(){this.system.autoMapOutlets=!0,this.system.mapSingleton("debug",MediaPlayer.utils.Debug),this.system.mapSingleton("eventBus",MediaPlayer.utils.EventBus),this.system.mapSingleton("capabilities",MediaPlayer.utils.Capabilities),this.system.mapSingleton("DOMStorage",MediaPlayer.utils.DOMStorage),this.system.mapClass("customTimeRanges",MediaPlayer.utils.CustomTimeRanges),this.system.mapSingleton("textTrackExtensions",MediaPlayer.utils.TextTrackExtensions),this.system.mapSingleton("vttParser",MediaPlayer.utils.VTTParser),this.system.mapSingleton("ttmlParser",MediaPlayer.utils.TTMLParser),this.system.mapClass("videoModel",MediaPlayer.models.VideoModel),this.system.mapSingleton("manifestModel",MediaPlayer.models.ManifestModel),this.system.mapSingleton("metricsModel",MediaPlayer.models.MetricsModel),this.system.mapSingleton("uriQueryFragModel",MediaPlayer.models.URIQueryAndFragmentModel),this.system.mapSingleton("ksPlayReady",MediaPlayer.dependencies.protection.KeySystem_PlayReady),this.system.mapSingleton("ksWidevine",MediaPlayer.dependencies.protection.KeySystem_Widevine),this.system.mapSingleton("ksClearKey",MediaPlayer.dependencies.protection.KeySystem_ClearKey),this.system.mapSingleton("requestModifierExt",MediaPlayer.dependencies.RequestModifierExtensions),this.system.mapSingleton("textSourceBuffer",MediaPlayer.dependencies.TextSourceBuffer),this.system.mapSingleton("mediaSourceExt",MediaPlayer.dependencies.MediaSourceExtensions),this.system.mapSingleton("sourceBufferExt",MediaPlayer.dependencies.SourceBufferExtensions),this.system.mapSingleton("abrController",MediaPlayer.dependencies.AbrController),this.system.mapSingleton("errHandler",MediaPlayer.dependencies.ErrorHandler),this.system.mapSingleton("videoExt",MediaPlayer.dependencies.VideoModelExtensions),this.system.mapSingleton("protectionExt",MediaPlayer.dependencies.ProtectionExtensions),this.system.mapClass("protectionController",MediaPlayer.dependencies.ProtectionController),this.system.mapClass("playbackController",MediaPlayer.dependencies.PlaybackController),Z.call(this),this.system.mapSingleton("liveEdgeFinder",MediaPlayer.dependencies.LiveEdgeFinder),this.system.mapClass("metrics",MediaPlayer.models.MetricsList),this.system.mapClass("insufficientBufferRule",MediaPlayer.rules.InsufficientBufferRule),this.system.mapClass("bufferOccupancyRule",MediaPlayer.rules.BufferOccupancyRule),this.system.mapClass("throughputRule",MediaPlayer.rules.ThroughputRule),this.system.mapClass("droppedFramesRule",MediaPlayer.rules.DroppedFramesRule),this.system.mapSingleton("abrRulesCollection",MediaPlayer.rules.ABRRulesCollection),this.system.mapSingleton("rulesController",MediaPlayer.rules.RulesController),this.system.mapClass("bufferLevelRule",MediaPlayer.rules.BufferLevelRule),this.system.mapClass("pendingRequestsRule",MediaPlayer.rules.PendingRequestsRule),this.system.mapClass("playbackTimeRule",MediaPlayer.rules.PlaybackTimeRule),this.system.mapClass("sameTimeRequestRule",MediaPlayer.rules.SameTimeRequestRule),this.system.mapSingleton("scheduleRulesCollection",MediaPlayer.rules.ScheduleRulesCollection),this.system.mapClass("liveEdgeBinarySearchRule",MediaPlayer.rules.LiveEdgeBinarySearchRule),this.system.mapClass("liveEdgeWithTimeSynchronizationRule",MediaPlayer.rules.LiveEdgeWithTimeSynchronizationRule),this.system.mapSingleton("synchronizationRulesCollection",MediaPlayer.rules.SynchronizationRulesCollection),this.system.mapClass("streamProcessor",MediaPlayer.dependencies.StreamProcessor),this.system.mapClass("eventController",MediaPlayer.dependencies.EventController),this.system.mapClass("textController",MediaPlayer.dependencies.TextController),this.system.mapClass("bufferController",MediaPlayer.dependencies.BufferController),this.system.mapSingleton("manifestLoader",MediaPlayer.dependencies.ManifestLoader),this.system.mapSingleton("manifestUpdater",MediaPlayer.dependencies.ManifestUpdater),this.system.mapClass("fragmentController",MediaPlayer.dependencies.FragmentController),this.system.mapClass("fragmentLoader",MediaPlayer.dependencies.FragmentLoader),this.system.mapClass("fragmentModel",MediaPlayer.dependencies.FragmentModel),this.system.mapSingleton("streamController",MediaPlayer.dependencies.StreamController),this.system.mapClass("stream",MediaPlayer.dependencies.Stream),this.system.mapClass("scheduleController",MediaPlayer.dependencies.ScheduleController),this.system.mapSingleton("timeSyncController",MediaPlayer.dependencies.TimeSyncController),this.system.mapSingleton("notifier",MediaPlayer.dependencies.Notifier);}};},Dash=function(){"use strict";return {modules:{},dependencies:{},vo:{},di:{}};}(),Dash.di.DashContext=function(){"use strict";return {system:void 0,setup:function(){Dash.di.DashContext.prototype.setup.call(this),this.system.mapClass("parser",Dash.dependencies.DashParser),this.system.mapClass("indexHandler",Dash.dependencies.DashHandler),this.system.mapSingleton("baseURLExt",Dash.dependencies.BaseURLExtensions),this.system.mapClass("fragmentExt",Dash.dependencies.FragmentExtensions),this.system.mapClass("trackController",Dash.dependencies.RepresentationController),this.system.mapSingleton("manifestExt",Dash.dependencies.DashManifestExtensions),this.system.mapSingleton("metricsExt",Dash.dependencies.DashMetricsExtensions),this.system.mapSingleton("timelineConverter",Dash.dependencies.TimelineConverter),this.system.mapSingleton("adapter",Dash.dependencies.DashAdapter);}};},Dash.di.DashContext.prototype=new MediaPlayer.di.Context,Dash.di.DashContext.prototype.constructor=Dash.di.DashContext,Dash.dependencies.DashAdapter=function(){"use strict";var L=[],I={},X=function(z,W){return W.getRepresentationForQuality(z.quality);},z5=function(z){return I[z.streamInfo.id][z.index];},o5=function(z){var W,Z=L.length,K=0;for(K;b9o.F5P(Z,K);K+=1)if(W=L[K],b9o.a5P(z.id,W.id))return W;return null;},W5=function(z){var W=new MediaPlayer.vo.TrackInfo,Z=z.adaptation.period.mpd.manifest.Period_asArray[z.adaptation.period.index].AdaptationSet_asArray[z.adaptation.index],K=this.manifestExt.getRepresentationFor(z.index,Z);return W.id=z.id,W.quality=z.index,W.bandwidth=this.manifestExt.getBandwidth(K),W.DVRWindow=z.segmentAvailabilityRange,W.fragmentDuration=z.segmentDuration||(z.segments&&b9o.v5P(z.segments.length,0)?z.segments[0].duration:b9o.I5P(0,0)),W.MSETimeOffset=z.MSETimeOffset,W.useCalculatedLiveEdgeTime=z.useCalculatedLiveEdgeTime,W.mediaInfo=C.call(this,z.adaptation),W;},C=function(W){var Z=new MediaPlayer.vo.MediaInfo,K=this,R=W.period.mpd.manifest.Period_asArray[W.period.index].AdaptationSet_asArray[W.index];return Z.id=W.id,Z.index=W.index,Z.type=W.type,Z.streamInfo=K5.call(this,W.period),Z.trackCount=this.manifestExt.getRepresentationCount(R),Z.lang=this.manifestExt.getLanguageForAdaptation(R),Z.codec=this.manifestExt.getCodec(R),Z.mimeType=this.manifestExt.getMimeType(R),Z.contentProtection=this.manifestExt.getContentProtectionData(R),Z.bitrateList=this.manifestExt.getBitrateListForAdaptation(R),(Z.contentProtection||CL.manifest.generatePSSH===!0&&void 0!==CL.manifest.keyId&&b9o.d5P(null,CL.manifest.keyId))&&(void 0!==Z.contentProtection&&b9o.t5P(null,Z.contentProtection)||CL.manifest.generatePSSH!==!0||void 0===CL.manifest.keyId||b9o.L5P(null,CL.manifest.keyId)||(Z.contentProtection=[{KID:CL.manifest.keyId,"cenc:default_KID":CL.manifest.keyId,schemeIdUri:"urn:mpeg:dash:mp4protection:2011",value:"cenc"}]),Z.contentProtection.forEach(function(z){z.KID=K.manifestExt.getKID(z);})),Z.isText=this.manifestExt.getIsTextTrack(Z.mimeType),Z;},K5=function(z){var W=new MediaPlayer.vo.StreamInfo,Z=1;return W.id=z.id,W.index=z.index,W.start=z.start,W.duration=z.duration,W.manifestInfo=U.call(this,z.mpd),W.isLast=b9o.z3P(Math.abs(W.start+W.duration-W.manifestInfo.duration),Z),W;},U=function(z){var W=new MediaPlayer.vo.ManifestInfo,Z=this.manifestModel.getValue();return W.DVRWindowSize=z.timeShiftBufferDepth,W.loadedTime=z.manifest.loadedTime,W.availableFrom=z.availabilityStartTime,W.minBufferTime=z.manifest.minBufferTime,W.maxFragmentDuration=z.maxSegmentDuration,W.duration=this.manifestExt.getDuration(Z),W.isDynamic=this.manifestExt.getIsDynamic(Z),W;},Z5=function(z,W,Z){var K,R=o5(W),N=R.id,M=this.manifestExt.getAdaptationForType(z,W.index,Z);return M?(K=this.manifestExt.getIndexForAdaptation(M,z,W.index),I[N]=I[N]||this.manifestExt.getAdaptationsForPeriod(z,R),C.call(this,I[N][K])):null;},p5=function(z,W,Z){var K=function(){CL.configs.tracks[Z]=[];},R,N,M,P,A=o5(W),y=A.id,E=this.manifestExt.getAdaptationsForType(z,W.index,Z),B=this;if(B.capabilities=new MediaPlayer.utils.Capabilities,N=document.querySelector("video"),!E)return null;(Z.indexOf("text")>-1||Z.indexOf("ttml")>-1)&&(Z="text");var G=[];K();var q=0;for(M=0;b9o.K3P(M,E.length);M++){R=this.manifestExt.getIndexForAdaptation(E[M],z,W.index),I[y]=I[y]||this.manifestExt.getAdaptationsForPeriod(z,A);var Y=C.call(this,I[y][R]),O=b9o.N3P("text",Z)?Y.mimeType:Y.codec;if(B.capabilities.supportsCodec(N,O)){G.push(Y);var V={name:E[M].lang,lang:E[M].lang,id:q,adaptionIndex:R,representations:E[M].Representation_asArray};if(b9o.j3P("text",Z)&&(V.lang=E[M].lang,V.src=E[M].Representation_asArray[0].BaseURL,V.subType=E[M].subType?E[M].subType:"subt",V.trackName=E[M].name?E[M].name:E[M].lang,V.mimeType=E[M].mimeType,E[M].SegmentTemplate&&b9o.y3P(E[M].SegmentTemplate_asArray.length,0))){V.timescale=E[M].SegmentTemplate_asArray[0].timescale,V.sources=[];var w,H,D=(V.src,E[M].SegmentTemplate_asArray[0].media),F=0,Q=0,x=E[M].SegmentTemplate_asArray[0].SegmentTimeline_asArray[0].S_asArray;D=V.src.replace("$Bandwidth$",E[M].Representation_asArray[0].bandwidth);var v,u="";for(var J in CL.configs.customAttributes[E[M].Representation_asArray[0].id])v=CL.configs.customAttributes[E[M].Representation_asArray[0].id][J],u+=v.Name+"="+v.Value+",";for(b9o.A3P(u.length,0)&&(u=u.substring(0,b9o.Y3P(u.length,1)),D=D.replace("$CustomAttributes$",u)),P=0;b9o.l3P(P,x.length);P++)w=x[P],w.t&&(F=w.t,E[M].SegmentTemplate_asArray[0].presentationTimeOffset&&(Q=E[M].SegmentTemplate_asArray[0].presentationTimeOffset)),H={src:D.replace("$Time$",F),startTime:b9o.n3P(F,Q)},V.sources.push(H),F+=w.d;delete  V.src;}CL.configs.tracks[Z][V.id]=V,q++;}}return b9o.c3P(null,CL.configs.activeTrack[Z])&&b9o.k3P("text",Z)&&(CL.configs.activeTrack[Z]=CL.configs.tracks[Z][0],CL.configs.previousActiveTrack[Z]=CL.configs.tracks[Z][0]),G;},N5=function(z){var W,Z,K,R=[];if(!z)return null;for(W=this.manifestExt.getMpd(z),L=this.manifestExt.getRegularPeriods(z,W),I={},Z=L.length,K=0;b9o.D3P(Z,K);K+=1)R.push(K5.call(this,L[K]));return R;},R5=function(z){var W=this.manifestExt.getMpd(z);return U.call(this,W);},b5=function(z,W){var Z=z.trackController.getRepresentationForQuality(W);return z.indexHandler.getInitRequest(Z);},j5=function(z,W){var Z=X(W,z.trackController);return z.indexHandler.getNextSegmentRequest(Z);},T5=function(z,W,Z,K){var R=X(W,z.trackController);return z.indexHandler.getSegmentRequestForTime(R,Z,K);},S5=function(z,W,Z){var K=X(W,z.trackController);return z.indexHandler.generateSegmentRequestForTime(K,Z);},Y5=function(z){return z.indexHandler.getCurrentTime();},O5=function(z,W){return z.indexHandler.setCurrentTime(W);},k5=function(z){var W,Z,K=o5(z.getStreamInfo()),R=z.getMediaInfo(),N=z5(R),M=this.manifestModel.getValue(),P=z.getType();(P.indexOf("text")>-1||P.indexOf("ttml")>-1)&&(P="text"),W=R.id,Z=W?this.manifestExt.getAdaptationForId(W,M,K.index):this.manifestExt.getAdaptationForIndex(R.index,M,K.index),z.setMediaInfo(R),z.trackController.updateData(Z,N,P);},V5=function(z,W){var Z=z.getRepresentationForQuality(W);return Z?W5.call(this,Z):null;},G5=function(z){var W=z.getCurrentRepresentation();return W?W5.call(this,W):null;},Q5=function(z,W,Z){var K=new Dash.vo.Event,R=z[0],N=z[1],M=z[2],P=z[3],A=z[4],y=z[5],E=z[6],B=b9o.w3P(Z,M)+P;return W[R]?(K.eventStream=W[R],K.eventStream.value=N,K.eventStream.timescale=M,K.duration=A,K.id=y,K.presentationTime=B,K.messageData=E,K.presentationTimeDelta=P,K):null;},B5=function(z,W){var Z=this.manifestModel.getValue(),K=[];return b9o.u3P(z,MediaPlayer.vo.StreamInfo)?K=this.manifestExt.getEventsForPeriod(Z,o5(z)):b9o.s3P(z,MediaPlayer.vo.MediaInfo)?K=this.manifestExt.getEventStreamForAdaptationSet(Z,z5(z)):b9o.e3P(z,MediaPlayer.vo.TrackInfo)&&(K=this.manifestExt.getEventStreamForRepresentation(Z,X(z,W.trackController))),K;};return {system:void 0,manifestExt:void 0,manifestModel:void 0,timelineConverter:void 0,metricsList:{TCP_CONNECTION:"TcpConnection",HTTP_REQUEST:"HttpRequest",HTTP_REQUEST_TRACE:"HttpRequestTrace",TRACK_SWITCH:"RepresentationSwitch",BUFFER_LEVEL:"BufferLevel",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",PLAY_LIST_TRACE:"PlayListTrace"},convertDataToTrack:W5,convertDataToMedia:C,convertDataToStream:K5,getDataForTrack:X,getDataForMedia:z5,getDataForStream:o5,getStreamsInfo:N5,getManifestInfo:R5,getMediaInfoForType:Z5,getMediaInfosForType:p5,getCurrentTrackInfo:G5,getTrackInfoForQuality:V5,updateData:k5,getInitRequest:b5,getNextFragmentRequest:j5,getFragmentRequestForTime:T5,generateFragmentRequestForTime:S5,getIndexHandlerTime:Y5,setIndexHandlerTime:O5,getEventsFor:B5,getEvent:Q5,reset:function(){L=[],I={};}};},Dash.dependencies.DashAdapter.prototype={constructor:Dash.dependencies.DashAdapter},Dash.create=function(W,Z,K){if("undefined"==typeof W||b9o.U3P("VIDEO",W.nodeName))return null;var R,N=W.id||W.name||"video element";return K=K||new Dash.di.DashContext,Z=Z||[].slice.call(W.querySelectorAll("source")).filter(function(z){return b9o.o2P(z.type,Dash.supportedManifestMimeTypes.mimeType);})[0],R=new MediaPlayer(K),R.startup(),R.attachView(W),R.setAutoPlay(W.autoplay),R.attachSource(Z.src),R.getDebug().log("Converted "+N+" to dash.js player and added content: "+Z.src),R;},Dash.createAll=function(z,W,Z){var K=[];z=z||".dashjs-player",W=W||document,Z=Z||new Dash.di.DashContext;for(var R=W.querySelectorAll(z),N=0;b9o.Z2P(N,R.length);N++){var M=Dash.create(R[N],void 0,Z);K.push(M);}return K;},Dash.supportedManifestMimeTypes={mimeType:"application/dash+xml"},Dash.dependencies.DashHandler=function(){"use strict";var z5,o5,W5,C=-1,K5=0,U=new RegExp("^(?:(?:[a-z]+:)?/)?/","i"),Z5=function(z,W){var Z=function(){z="0"+z;};for(;b9o.p2P(z.length,W);)Z();return z;},p5=function(W,Z,K){for(var R,N,M,P,A=0,y=0,E=Z.length,B="%0",G=B.length;;){var q=function(){W=W.substring(0,A)+P+W.substring(y+1);},Y=function(z){P=z;};if(A=W.indexOf("$"+Z),b9o.P2P(0,A))return W;if(y=W.indexOf("$",A+E),b9o.r2P(0,y))return W;if(R=W.indexOf(B,A+E),b9o.S2P(R,A)&&b9o.E2P(y,R))switch(N=W.charAt(b9o.q2P(y,1)),M=parseInt(W.substring(R+G,b9o.J2P(y,1)),10),N){case "d":case "i":case "u":P=Z5(K.toString(),M);break;case "x":P=Z5(K.toString(16),M);break;case "X":P=Z5(K.toString(16),M).toUpperCase();break;case "o":P=Z5(K.toString(8),M);break;default:return this.log("Unsupported/invalid IEEE 1003.1 format identifier string in URL"),W;}else Y(K);q();}},N5=function(z){return z.split("$$").join("$");},R5=function(z,W){if(b9o.H2P(null,W)||-1===z.indexOf("$RepresentationID$"))return z;var Z=W.toString();return z.split("$RepresentationID$").join(Z);},b5=function(z,W){return z.representation.startNumber+W;},j5=function(z,W){var Z,K=W.adaptation.period.mpd.manifest.Period_asArray[W.adaptation.period.index].AdaptationSet_asArray[W.adaptation.index].Representation_asArray[W.index].BaseURL;return Z=b9o.V2P(z,K)?z:U.test(z)?z:K+z;},T5=function(z,W){var Z,K,R=this,N=new MediaPlayer.vo.FragmentRequest;return Z=z.adaptation.period,N.mediaType=W,N.type="Initialization Segment",-1==z.initialization?(N.url="",N.range=-1):(N.url=j5(z.initialization,z),N.range=z.range),K=Z.start,N.availabilityStartTime=R.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(K,z.adaptation.period.mpd,o5),N.availabilityEndTime=R.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(K+Z.duration,Z.mpd,o5),N.quality=z.index,N;},S5=function(z){var W,Z=this;return z?W=T5.call(Z,z,W5):null;},Y5=function(z){var W,Z,K,R=z.adaptation.period,N=!1;return o5?N=!1:b9o.x2P(0,C)?N=!1:b9o.m2P(C,z.availableSegmentsNumber)?(Z=F5(C,z),Z&&(K=b9o.X2P(Z.presentationStartTime,R.start),W=z.adaptation.period.duration,this.log(z.segmentInfoType+": "+K+" / "+W),N=b9o.g2P(K,W))):N=!0,N;},O5=function(z,W){var Z,K,R,N,M=this;return K=z.segmentDuration,isNaN(K)&&(K=z.adaptation.period.duration),R=z.adaptation.period.start+b9o.f2P(W,K),N=R+K,Z=new Dash.vo.Segment,Z.representation=z,Z.duration=K,Z.presentationStartTime=R,Z.mediaStartTime=M.timelineConverter.calcMediaTimeFromPresentationTime(Z.presentationStartTime,z),Z.availabilityStartTime=M.timelineConverter.calcAvailabilityStartTimeFromPresentationTime(Z.presentationStartTime,z.adaptation.period.mpd,o5),Z.availabilityEndTime=M.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(N,z.adaptation.period.mpd,o5),Z.wallStartTime=M.timelineConverter.calcWallTimeForSegment(Z,o5),Z.replacementNumber=b5(Z,W),Z.availabilityIdx=W,Z;},k5=function(W){var Z,K,R,N,M,P,A,y,E,B,G,q,Y,O,V,w,H=this,D=W.adaptation.period.mpd.manifest.Period_asArray[W.adaptation.period.index].AdaptationSet_asArray[W.adaptation.index].Representation_asArray[W.index].SegmentTemplate,F=D.SegmentTimeline,Q=b9o.h2P(W.availableSegmentsNumber,0),x=10,v=[],u=0,J=0,L=-1,I=function(z){return B5.call(H,W,u,z.d,O,D.media,z.mediaRange,L);};O=W.timescale,Z=F.S_asArray,E=Q5.call(H,W),E?(q=E.start,Y=E.end):G=H.timelineConverter.calcMediaTimeFromPresentationTime(z5||0,W);var X=0;for(R=0,N=Z.length;b9o.C2P(N,R);R+=1)if(K=Z[R],P=0,K.hasOwnProperty("r")&&(P=K.r),K.hasOwnProperty("t")&&(b9o.W8P(0,R)&&b9o.R8P(K.t,0)&&CL.configs.isLive===!1&&isNaN(D.presentationTimeOffset)&&CL.configs.wasLive===!1&&(X=K.t,CL.configs.ssTimeOffset[W.adaptation.type]=X,CL.configs.ssTimeOffsetTimescale[W.adaptation.type]=O,CL.configs.minStartTime=.1),u=b9o.M8P(K.t,X),J=b9o.b8P(u,O)),b9o.i8P(0,R)&&(V=J),b9o.T8P(0,P)&&(y=Z[R+1],y&&y.hasOwnProperty("t")?A=b9o.B8P(y.t,O):(A=H.timelineConverter.calcMediaTimeFromPresentationTime(W.segmentAvailabilityRange.end,W),W.segmentDuration=b9o.G8P(K.d,O)),P=b9o.O8P(Math.ceil((A-J)/(K.d/O)),1)),B){if(Q)break;L+=P+1;}else for(M=0;b9o.Q8P(P,M);M+=1){if(L+=1,E){if(b9o.F8P(L,Y)){if(B=!0,Q)break;continue;}b9o.a8P(L,q)&&v.push(I.call(H,K));}else{if(b9o.v8P(v.length,x)){if(B=!0,Q)break;continue;}b9o.I8P(J,G-K.d/O)&&v.push(I.call(H,K));}u+=K.d,J=b9o.d8P(u,O),w=J;}return Q||(W.availableSegmentsNumber=L+1),v;},V5=function(z){var W,Z,K,R,N,M=[],P=this,A=z.adaptation.period.mpd.manifest.Period_asArray[z.adaptation.period.index].AdaptationSet_asArray[z.adaptation.index].Representation_asArray[z.index].SegmentTemplate,y=z.segmentDuration,E=z.segmentAvailabilityRange,B=null,G=null;for(N=z.startNumber,W=isNaN(y)&&!o5?{start:N,end:N}:G5.call(P,z),K=W.start,R=W.end,Z=K;b9o.t8P(R,Z);Z+=1)B=O5.call(P,z,Z),B.replacementTime=b9o.L8P((N+Z-1),z.segmentDuration),G=A.media,G=p5(G,"Number",B.replacementNumber),G=p5(G,"Time",B.replacementTime),B.media=G,M.push(B),B=null;return z.availableSegmentsNumber=isNaN(y)?1:Math.ceil(b9o.z1P((E.end-E.start),y)),M;},G5=function(z){var W,Z,K,R=this,N=z.segmentDuration,M=z.adaptation.period.mpd.manifest.minBufferTime,P=z.segmentAvailabilityRange,A={start:R.timelineConverter.calcPeriodRelativeTimeFromMpdRelativeTime(z,P.start),end:R.timelineConverter.calcPeriodRelativeTimeFromMpdRelativeTime(z,P.end)},y=b9o.K1P(0,0),E=null,B=z.segments,G=b9o.N1P(2,N),q=Math.max(b9o.j1P(2,M),z.segmentAvailabilityRange.end);return A||(A=R.timelineConverter.calcSegmentAvailabilityRange(z,o5)),o5&&!R.timelineConverter.isTimeSyncCompleted()?(W=Math.floor(b9o.y1P(A.start,N)),Z=Math.floor(b9o.A1P(A.end,N)),K={start:W,end:Z}):(B&&b9o.Y1P(B.length,0)?(E=F5(C,z),y=E?R.timelineConverter.calcPeriodRelativeTimeFromMpdRelativeTime(z,E.presentationStartTime):b9o.l1P(C,0)?b9o.n1P(C,N):R.timelineConverter.calcPeriodRelativeTimeFromMpdRelativeTime(z,z5||B[0].presentationStartTime)):y=b9o.c1P(C,0)?b9o.k1P(C,N):o5?A.end:A.start,W=Math.floor(b9o.D1P(Math.max(y-G,A.start),N)),Z=Math.floor(Math.min(W+b9o.w1P(q,N),b9o.u1P(A.end,N))),K={start:W,end:Z});},Q5=function(){var z,W,Z,K=2,R=10,N=0,M=Number.POSITIVE_INFINITY;return o5&&!this.timelineConverter.isTimeSyncCompleted()?Z={start:N,end:M}:!o5&&z5||b9o.s1P(0,C)?null:(z=Math.max(b9o.e1P(C,K),N),W=Math.min(C+R,M),Z={start:z,end:W});},B5=function(z,W,Z,K,R,N,M){var P,A,y,E,B=this,G=b9o.U1P(W,K),q=Math.min(b9o.o6P(Z,K),z.adaptation.period.mpd.maxSegmentDuration);return P=B.timelineConverter.calcPresentationTimeFromMediaTime(G,z),A=P+q,y=new Dash.vo.Segment,y.representation=z,y.duration=q,y.mediaStartTime=G,y.presentationStartTime=P,y.availabilityStartTime=z.adaptation.period.mpd.manifest.loadedTime,y.availabilityEndTime=B.timelineConverter.calcAvailabilityEndTimeFromPresentationTime(A,z.adaptation.period.mpd,o5),y.wallStartTime=B.timelineConverter.calcWallTimeForSegment(y,o5),E=CL.configs.ssTimeOffset[void 0!=CL.configs.ssTimeOffset[y.representation.adaptation.id]?y.representation.adaptation.id:y.representation.adaptation.type],y.replacementTime=W+(void 0!=E?E:0),y.replacementNumber=b5(y,M),R=p5(R,"Number",y.replacementNumber),R=p5(R,"Time",y.replacementTime),y.media=R,y.mediaRange=N,y.availabilityIdx=M,y;},A5=function(z){var W,Z,K,R,N,M,P,A=this,y=[],E=z.adaptation.period.mpd.manifest.Period_asArray[z.adaptation.period.index].AdaptationSet_asArray[z.adaptation.index].Representation_asArray[z.index].SegmentList,B=z.adaptation.period.mpd.manifest.Period_asArray[z.adaptation.period.index].AdaptationSet_asArray[z.adaptation.index].Representation_asArray[z.index].BaseURL,G=E.SegmentURL_asArray.length;for(P=z.startNumber,R=G5.call(A,z),N=Math.max(R.start,0),M=Math.min(R.end,b9o.Z6P(E.SegmentURL_asArray.length,1)),W=N;b9o.p6P(M,W);W+=1)K=E.SegmentURL_asArray[W],Z=O5.call(A,z,W),Z.replacementTime=b9o.P6P((P+W-1),z.segmentDuration),Z.media=K.media?K.media:B,Z.mediaRange=K.mediaRange,Z.index=K.index,Z.indexRange=K.indexRange,y.push(Z),Z=null;return z.availableSegmentsNumber=G,y;},q5=function(z){var W,Z=this,K=z.segmentInfoType;return b9o.r6P("SegmentBase",K)&&b9o.S6P("BaseURL",K)&&x5.call(Z,z)?(b9o.E6P("SegmentTimeline",K)?W=k5.call(Z,z):b9o.q6P("SegmentTemplate",K)?W=V5.call(Z,z):b9o.J6P("SegmentList",K)&&(W=A5.call(Z,z)),n5.call(Z,z,W)):W=z.segments,W;},n5=function(z,W){var Z,K,R,N;z.segments=W,Z=b9o.H6P(W.length,1),o5&&isNaN(this.timelineConverter.getExpectedLiveEdge())&&(N=W[Z],K=N.presentationStartTime+N.duration,R=this.metricsModel.getMetricsFor("stream"),this.timelineConverter.setExpectedLiveEdge(K),this.metricsModel.updateManifestUpdateInfo(this.metricsExt.getCurrentManifestUpdate(R),{presentationStartTime:K}));},w5=function(z){var W=this;if(!z)throw  new Error("no representation");return z.segments=null,q5.call(W,z),z;},i5=function(z,W){var Z,K=this,R=z.initialization,N=b9o.V6P("BaseURL",z.segmentInfoType)&&b9o.x6P("SegmentBase",z.segmentInfoType);return z.segmentDuration||z.segments||w5.call(K,z),z.segmentAvailabilityRange=null,z.segmentAvailabilityRange=K.timelineConverter.calcSegmentAvailabilityRange(z,o5),b9o.m6P(z.segmentAvailabilityRange.end,z.segmentAvailabilityRange.start)&&!z.useCalculatedLiveEdgeTime?(Z=new MediaPlayer.vo.Error(Dash.dependencies.DashHandler.SEGMENTS_UNAVAILABLE_ERROR_CODE,"no segments are available yet",{availabilityDelay:Math.abs(z.segmentAvailabilityRange.end)}),void K.notify(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:z},Z)):(W||(C=-1),z.segmentDuration&&w5.call(K,z),R||K.baseURLExt.loadInitialization(z),N||K.baseURLExt.loadSegments(z,W5,z.indexRange),void (R&&N&&K.notify(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:z})));},H5=function(W,Z,K){var R,N,M,P,A,y=Z.segments,E=y?y.length:null,B=-1;if(y&&b9o.X6P(E,0))for(A=0;b9o.g6P(E,A);A+=1)if(N=y[A],M=N.presentationStartTime,P=N.duration,R=void 0===K||b9o.f6P(null,K)?b9o.h6P(P,2):K,b9o.C6P(W+R,M)&&b9o.W7P(M+P,W-R)){var G=function(z){B=z.availabilityIdx;};G(N);break;}return B;},F5=function(z,W){if(!W||!W.segments)return null;var Z,K,R=W.segments.length;for(K=0;b9o.R7P(R,K);K+=1)if(Z=W.segments[K],b9o.M7P(Z.availabilityIdx,z)||b9o.b7P(0,K)&&-1===z)return CL.configs.firstIndex[W5]&&b9o.i7P(Z.presentationStartTime,0)&&b9o.T7P(0,z)&&CL.configs.isLive===!1&&(b9o.B7P(null,CL.configs.minStartTime)&&b9o.G7P(Z.presentationStartTime,CL.configs.minStartTime)||b9o.O7P(null,CL.configs.minStartTime))&&(CL.configs.minStartTime=Z.presentationStartTime,CL.configs.firstIndex[W5]=!1),Z;return null;},x5=function(z){var W,Z,K=!1,R=z.segments;return R&&b9o.Q7P(0,R.length)?(Z=R[0].availabilityIdx,W=R[b9o.F7P(R.length,1)].availabilityIdx,K=b9o.a7P(Z,C)||b9o.v7P(C,W)):K=!0,K;},J5=function(z){if(b9o.I7P(null,z)||void 0===z)return null;var W,Z=new MediaPlayer.vo.FragmentRequest,K=z.representation,R=K.adaptation.period.mpd.manifest.Period_asArray[K.adaptation.period.index].AdaptationSet_asArray[K.adaptation.index].Representation_asArray[K.index].bandwidth;W=j5(z.media,K),W=p5(W,"Number",z.replacementNumber),W=p5(W,"Time",z.replacementTime),W=p5(W,"Bandwidth",R),W=R5(W,K.id);var N,M="";for(var P in CL.configs.customAttributes[K.id])N=CL.configs.customAttributes[K.id][P],M+=N.Name+"="+N.Value+",";return b9o.d7P(M.length,0)&&(M=M.substring(0,b9o.t7P(M.length,1)),W=p5(W,"CustomAttributes",M)),W=N5(W),Z.mediaType=W5,Z.type="Media Segment",Z.url=W,Z.range=z.mediaRange,Z.startTime=z.presentationStartTime,Z.duration=z.duration,Z.timescale=K.timescale,Z.availabilityStartTime=z.availabilityStartTime,Z.availabilityEndTime=z.availabilityEndTime,Z.wallStartTime=z.wallStartTime,Z.quality=K.index,Z.index=z.availabilityIdx,Z;},y5=function(z,W,Z){var K,R,N,M=C,P=Z?Z.keepIdx:!1,A=Z?Z.timeThreshold:null,y=this;if(!z)return null;if(b9o.L7P(W,z.segmentAvailabilityRange.start)&&b9o.z0P(W,0)&&CL.configs.isLive===!0){var E=Math.min(4,z.segments.length);b9o.K0P(z.segments.length,0)?(CL.configs.minStartTime=z.segmentAvailabilityRange.start+b9o.N0P(z.segments[0].duration,(E-1)),this.streamProcessor.getPlaybackController().seek(CL.configs.minStartTime)):(CL.configs.needManifestUpdate=!0,CL.configs.lookAheadFragments={audio:[],video:[],text:[]},this.streamProcessor.getPlaybackController().seek(b9o.j0P(z.segmentAvailabilityRange.end,2)));}CL.configs.isLive===!0&&CL.configs.adjustLiveEdge===!0&&(CL.configs.adjustLiveEdge=!1,CL.configs.minStartTime=Math.max(W,CL.configs.minStartTime)),b9o.y0P(1,CL.configs.isLive)&&b9o.A0P(null,CL.configs.minStartTime)&&b9o.Y0P(W,CL.configs.minStartTime)&&(W=Math.max(W,CL.configs.minStartTime));var B=b9o.l0P(W,1);return b9o.n0P(B,0)&&(b9o.c0P(B,.999999)?W+=b9o.k0P(1,B):b9o.D0P(1e-6,B)&&(W-=B)),z5=W,y.log("Getting the request for time: "+W),C=H5.call(y,W,z,A),q5.call(y,z),b9o.w0P(0,C)&&(C=H5.call(y,W,z,A)),b9o.u0P(0,C)&&b9o.s0P(1,CL.configs.isLive)&&(C=0),y.log("Index for "+z.adaptation.type+" time "+W+" is "+C),N=Y5.call(y,z),N?(K=new MediaPlayer.vo.FragmentRequest,K.action=K.ACTION_COMPLETE,K.index=C,K.mediaType=W5,y.log("Signal complete."),y.log(K)):(R=F5(C,z),K=J5.call(y,R)),P&&(C=M),K;},D5=function(z,W){var Z=b9o.e0P((z.segmentAvailabilityRange.end-z.segmentAvailabilityRange.start),2);return z.segments=null,z.segmentAvailabilityRange={start:b9o.U0P(W,Z),end:W+Z},y5.call(this,z,W,{keepIdx:!1});},E5=function(z){var W,Z,K,R,N=this;if(!z)return null;if(-1===C)throw "You must call getSegmentRequestForTime first.";return z5=null,C+=1,R=C,K=Y5.call(N,z),K?(W=new MediaPlayer.vo.FragmentRequest,W.action=W.ACTION_COMPLETE,W.index=R,W.mediaType=W5,N.log("Signal complete.")):(q5.call(N,z),Z=F5(R,z),W=J5.call(N,Z)),W;},l5=function(z){var W=z.data.representation;W.segments&&this.notify(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:W});},m5=function(z){if(!z.error&&b9o.o4P(W5,z.data.mediaType)){var W,Z,K,R,N=this,M=z.data.segments,P=z.data.representation,A=[],y=0;for(W=0,Z=M.length;b9o.Z4P(Z,W);W+=1)K=M[W],R=B5.call(N,P,K.startTime,K.duration,K.timescale,K.media,K.mediaRange,y),A.push(R),R=null,y+=1;P.segmentAvailabilityRange={start:A[0].presentationStartTime,end:A[b9o.p4P(Z,1)].presentationStartTime},P.availableSegmentsNumber=Z,n5.call(N,P,A),P.initialization&&this.notify(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,{representation:P});}};return {log:void 0,baseURLExt:void 0,timelineConverter:void 0,metricsModel:void 0,metricsExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED]=l5,this[Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED]=m5;},initialize:function(z){this.subscribe(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,z.trackController),W5=z.getType(),this.setMediaType(W5),o5=z.isDynamic(),this.streamProcessor=z;},getType:function(){return W5;},setType:function(W){var Z=function(z){W5=z;};Z(W);},getIsDynamic:function(){return o5;},setIsDynamic:function(W){var Z=function(z){o5=z;};Z(W);},setCurrentTime:function(W){var Z=function(z){K5=z;};Z(W);},getCurrentTime:function(){return K5;},reset:function(){K5=0,z5=void 0,C=-1,this.unsubscribe(Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED,this.streamProcessor.trackController);},getInitRequest:S5,getSegmentRequestForTime:y5,getNextSegmentRequest:E5,generateSegmentRequestForTime:D5,updateRepresentation:i5};},Dash.dependencies.DashHandler.prototype={constructor:Dash.dependencies.DashHandler},Dash.dependencies.DashHandler.SEGMENTS_UNAVAILABLE_ERROR_CODE=1,Dash.dependencies.DashHandler.eventList={ENAME_REPRESENTATION_UPDATED:"representationUpdated"},Dash.dependencies.DashParser=function(){"use strict";var y=function(){var z,W,Z,K;return K=[{name:"profiles",merge:!1},{name:"width",merge:!1},{name:"height",merge:!1},{name:"sar",merge:!1},{name:"frameRate",merge:!1},{name:"audioSamplingRate",merge:!1},{name:"mimeType",merge:!1},{name:"segmentProfiles",merge:!1},{name:"codecs",merge:!1},{name:"maximumSAPPeriod",merge:!1},{name:"startsWithSap",merge:!1},{name:"maxPlayoutRate",merge:!1},{name:"codingDependency",merge:!1},{name:"scanType",merge:!1},{name:"FramePacking",merge:!0},{name:"AudioChannelConfiguration",merge:!0},{name:"ContentProtection",merge:!0}],z={},z.name="AdaptationSet",z.isRoot=!1,z.isArray=!0,z.parent=null,z.children=[],z.properties=K,W={},W.name="Representation",W.isRoot=!1,W.isArray=!0,W.parent=z,W.children=[],W.properties=K,z.children.push(W),Z={},Z.name="SubRepresentation",Z.isRoot=!1,Z.isArray=!0,Z.parent=W,Z.children=[],Z.properties=K,W.children.push(Z),z;},E=function(){var z,W,Z,K;return K=[{name:"SegmentBase",merge:!0},{name:"SegmentTemplate",merge:!0},{name:"SegmentList",merge:!0}],z={},z.name="Period",z.isRoot=!1,z.isArray=!0,z.parent=null,z.children=[],z.properties=K,W={},W.name="AdaptationSet",W.isRoot=!1,W.isArray=!0,W.parent=z,W.children=[],W.properties=K,z.children.push(W),Z={},Z.name="Representation",Z.isRoot=!1,Z.isArray=!0,Z.parent=W,Z.children=[],Z.properties=K,W.children.push(Z),z;},B=function(){var K,R,N,M,P;return P=[{name:"BaseURL",merge:!0,mergeFunction:function(z,W){var Z;return Z=b9o.P4P(0,W.indexOf("http://"))?W:z+W;}}],K={},K.name="mpd",K.isRoot=!0,K.isArray=!0,K.parent=null,K.children=[],K.properties=P,R={},R.name="Period",R.isRoot=!1,R.isArray=!0,R.parent=null,R.children=[],R.properties=P,K.children.push(R),N={},N.name="AdaptationSet",N.isRoot=!1,N.isArray=!0,N.parent=R,N.children=[],N.properties=P,R.children.push(N),M={},M.name="Representation",M.isRoot=!1,M.isArray=!0,M.parent=N,M.children=[],M.properties=P,N.children.push(M),K;},G=function(){var z=[];return z.push(y()),z.push(E()),z.push(B()),z;},q=function(W,Z){var K,R=new X2JS({arrayAccessForm:"property"}),N=new ObjectIron(G()),M=new Date,P=null,A=null;try{b9o.r4P(1,CL.manifest.fixAudioCodec)&&(W=W.replace(/mp4a.40.2/gi,"mp4a.40.5")),K=R.xml_str2json(W),K=K.MPD,this.utils.processJSON(K),P=new Date,K.hasOwnProperty("BaseURL")?(K.BaseURL=K.BaseURL_asArray[0],b9o.S4P(0,K.BaseURL.toString().indexOf("http"))&&(K.BaseURL=Z+K.BaseURL)):K.BaseURL=Z,K.hasOwnProperty("Location")&&(K.Location=K.Location_asArray[0]),N.run(K),A=new Date,this.log("Parsing complete: ( xml2json: "+(b9o.E4P(P.getTime(),M.getTime()))+"ms, objectiron: "+(b9o.q4P(A.getTime(),P.getTime()))+"ms, total: "+b9o.J4P((A.getTime()-M.getTime()),1e3)+"s)");}catch(z){return this.errHandler.manifestError("parsing the manifest failed","parse",W),null;}return K;};return {log:void 0,errHandler:void 0,parse:q,setup:function(){this.utils=this.system.getObject("clUtils");}};},Dash.dependencies.DashParser.prototype={constructor:Dash.dependencies.DashParser},Dash.dependencies.TimelineConverter=function(){"use strict";var y=0,E=!1,B=b9o.H4P(0,0),G=function(z,W,Z,K){var R=b9o.V4P(0,0);return R=K?Z&&b9o.x4P(W.timeShiftBufferDepth,Number.POSITIVE_INFINITY)?new Date(W.availabilityStartTime.getTime()+b9o.m4P(1e3,(z+W.timeShiftBufferDepth))):W.availabilityEndTime:Z?new Date(W.availabilityStartTime.getTime()+b9o.X4P(1e3,(z-y))):W.availabilityStartTime;},q=function(z,W,Z){return G.call(this,z,W,Z);},Y=function(z,W,Z){return G.call(this,z,W,Z,!0);},O=function(z,W){return b9o.g4P((z.getTime()-W.mpd.availabilityStartTime.getTime()+1e3*y),1e3);},V=function(z,W){var Z=W.adaptation.period.start,K=W.presentationTimeOffset;return z+(b9o.f4P(Z,K));},w=function(z,W){var Z=W.adaptation.period.start,K=W.presentationTimeOffset;return b9o.h4P(z,Z,K);},H=function(z,W){var Z,K,R;return W&&(Z=z.representation.adaptation.period.mpd.suggestedPresentationDelay,K=z.presentationStartTime+Z,R=new Date(z.availabilityStartTime.getTime()+b9o.o9P(1e3,K))),R;},D=function(z,W){var Z,K,R=z.adaptation.period.duration,N=z.adaptation.period.start,M=N+z.adaptation.period.duration,P={start:N,end:M},A=z.segmentDuration||(z.segments&&z.segments.length?z.segments[b9o.Z9P(z.segments.length,1)].duration:0);return W?E&&!isNaN(R)||!z.segmentAvailabilityRange?(Z=z.adaptation.period.mpd.checkTime,K=O(new Date,z.adaptation.period),N=Math.max(b9o.p9P(K,z.adaptation.period.mpd.timeShiftBufferDepth),0),M=b9o.P9P((isNaN(Z)?K:Math.min(Z,K)),A),P={start:N,end:M}):z.segmentAvailabilityRange:P;},F=function(z,W){var Z=z.adaptation.period.start;return b9o.r9P(W,Z);},Q=function(z,W){var Z=z.adaptation.period.start;return W+Z;},x=function(z){E||z.error||(y=b9o.S9P(z.data.liveEdge,(B+z.data.searchTime)),E=!0);},v=function(z){E||z.error||(y=b9o.E9P(z.data.offset,1e3),E=!0);},u=function(z){var W=z.presentationTimeOffset,Z=z.adaptation.period.start;return b9o.q9P(Z,W);},J=function(){y=0,E=!1,B=b9o.J9P(0,0);};return {setup:function(){this[MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED]=x,this[MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED]=v;},calcAvailabilityStartTimeFromPresentationTime:q,calcAvailabilityEndTimeFromPresentationTime:Y,calcPresentationTimeFromWallTime:O,calcPresentationTimeFromMediaTime:V,calcPeriodRelativeTimeFromMpdRelativeTime:F,calcMpdRelativeTimeFromPeriodRelativeTime:Q,calcMediaTimeFromPresentationTime:w,calcSegmentAvailabilityRange:D,calcWallTimeForSegment:H,calcMSETimeOffset:u,reset:J,isTimeSyncCompleted:function(){return E;},getClientTimeOffset:function(){return y;},getExpectedLiveEdge:function(){return B;},setExpectedLiveEdge:function(W){var Z=function(z){B=z;};Z(W);}};},Dash.dependencies.TimelineConverter.prototype={constructor:Dash.dependencies.TimelineConverter},Dash.dependencies.RepresentationController=function(){"use strict";var E,B=null,G=-1,q=!0,Y=[],O=function(z,W,Z){var K,R,N=this,M=null,P=N.streamProcessor.getStreamInfo();if(N.abrController.updateTopQualityIndex(N.streamProcessor.getMediaInfo()),R=N.abrController.getTopQualityIndexFor(Z,P.id),q=!0,N.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED),Y=Q.call(N,W),b9o.H9P(null,B)?(M=N.abrController.getInitialBitrateFor(Z,P),K=N.abrController.getQualityForBitrate(N.streamProcessor.getMediaInfo(),M)):K=N.abrController.getQualityFor(Z,P),b9o.V9P(K,R)&&(K=R),E=H.call(N,K),B=z,b9o.x9P("video",Z)&&b9o.m9P("audio",Z)&&b9o.X9P("fragmentedText",Z))return q=!1,N.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:E}),void V.call(N);for(var A=0;b9o.g9P(A,Y.length);A+=1)N.indexHandler.updateRepresentation(Y[A],!0);},V=function(){var z=new Date,W=this.getCurrentRepresentation(),Z=this.streamProcessor.playbackController.getTime();this.metricsModel.addTrackSwitch(W.adaptation.type,z,Z,W.id);},w=function(){var z=this.streamProcessor,W=this.timelineConverter.calcSegmentAvailabilityRange(E,z.isDynamic());this.metricsModel.addDVRInfo(z.getType(),z.playbackController.getTime(),z.getStreamInfo().manifestInfo,W);},H=function(z){return Y[z];},D=function(z){return Y.indexOf(z);},F=function(){for(var z=0,W=Y.length;b9o.f9P(W,z);z+=1)if(b9o.h9P(null,Y[z].segmentAvailabilityRange)||b9o.C9P(null,Y[z].initialization))return !1;return !0;},Q=function(z){var W,Z=this,K=Z.manifestModel.getValue();return G=Z.manifestExt.getIndexForAdaptation(B,K,z.period.index),W=Z.manifestExt.getRepresentationsForAdaptation(K,z);},x=function(z){for(var W,Z=this,K=0,R=Y.length;b9o.W5w(R,K);K+=1)W=Y[K],W.segmentAvailabilityRange=Z.timelineConverter.calcSegmentAvailabilityRange(W,z);},v=function(W){var Z=this,K=b9o.R5w(1e3,(W+3*E.segmentDuration)),R=function(){if(!this.isUpdating()){q=!0,Z.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED);for(var z=0;b9o.M5w(z,Y.length);z+=1)Z.indexHandler.updateRepresentation(Y[z],!0);}};q=!1,setTimeout(R.bind(this),K);},u=function(z){if(this.isUpdating()){var W,Z,K=this,R=z.data.representation,N=K.metricsModel.getMetricsFor("stream"),M=K.metricsExt.getCurrentManifestUpdate(N),P=!1;if(z.error&&b9o.b5w(z.error.code,Dash.dependencies.DashHandler.SEGMENTS_UNAVAILABLE_ERROR_CODE))return w.call(this),v.call(this,z.error.data.availabilityDelay),Z=new MediaPlayer.vo.Error(Dash.dependencies.RepresentationController.SEGMENTS_UPDATE_FAILED_ERROR_CODE,"Segments update failed",null),void this.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:E},Z);for(var A=0;b9o.i5w(A,M.trackInfo.length);A+=1)if(W=M.trackInfo[A],b9o.T5w(W.index,R.index)&&b9o.B5w(W.mediaType,K.streamProcessor.getType())){var y=function(){P=!0;};y();break;}P||K.metricsModel.addManifestUpdateTrackInfo(M,R.id,R.index,R.adaptation.period.index,K.streamProcessor.getType(),R.presentationTimeOffset,R.startNumber,R.segmentInfoType),F()&&(q=!1,K.abrController.setPlaybackQuality(K.streamProcessor.getType(),K.streamProcessor.getStreamInfo(),D.call(this,E)),K.metricsModel.updateManifestUpdateInfo(M,{latency:b9o.G5w(E.segmentAvailabilityRange.end,K.streamProcessor.playbackController.getTime())}),this.notify(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,{data:B,currentRepresentation:E}),V.call(K));}},J=function(z){x.call(this,z.data.isDynamic);},L=function(z){if(!z.error){x.call(this,!0),this.indexHandler.updateRepresentation(E,!1);var W=this.manifestModel.getValue();E.adaptation.period.mpd.checkTime=this.manifestExt.getCheckTime(W,E.adaptation.period);}},I=function(){w.call(this);},X=function(z){var W=this;b9o.O5w(z.data.mediaType,W.streamProcessor.getType())&&b9o.Q5w(W.streamProcessor.getStreamInfo().id,z.data.streamInfo.id)&&(E=W.getRepresentationForQuality(z.data.newQuality),z5.call(W,z.data.mediaType,E.bandwidth),V.call(W));},z5=function(z,W){!this.DOMStorage.isSupported(MediaPlayer.utils.DOMStorage.STORAGE_TYPE_LOCAL)||b9o.F5w("video",z)&&b9o.a5w("audio",z)||localStorage.setItem(MediaPlayer.utils.DOMStorage["LOCAL_STORAGE_"+z.toUpperCase()+"_BITRATE_KEY"],JSON.stringify({bitrate:b9o.v5w(W,1e3),timestamp:(new Date).getTime()}));};return {system:void 0,log:void 0,manifestExt:void 0,manifestModel:void 0,metricsModel:void 0,metricsExt:void 0,abrController:void 0,timelineConverter:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,DOMStorage:void 0,setup:function(){this[MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED]=X,this[Dash.dependencies.DashHandler.eventList.ENAME_REPRESENTATION_UPDATED]=u,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED]=J,this[MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED]=L,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED]=I;},initialize:function(z){this.streamProcessor=z,this.indexHandler=z.indexHandler;},getData:function(){return B;},getDataIndex:function(){return G;},isUpdating:function(){return q;},updateData:O,getRepresentationForQuality:H,getCurrentRepresentation:function(){return E;}};},Dash.dependencies.RepresentationController.prototype={constructor:Dash.dependencies.RepresentationController},Dash.dependencies.RepresentationController.SEGMENTS_UPDATE_FAILED_ERROR_CODE=1,Dash.dependencies.RepresentationController.eventList={ENAME_DATA_UPDATE_COMPLETED:"dataUpdateCompleted",ENAME_DATA_UPDATE_STARTED:"dataUpdateStarted"},Dash.dependencies.BaseURLExtensions=function(){"use strict";var o5=function(z,W){for(var Z,K,R,N,M,P,A,y,E,B,G=new DataView(z),q={},Y=0;b9o.I5w("sidx",y)&&b9o.d5w(Y,G.byteLength);){for(E=G.getUint32(Y),Y+=4,y="",N=0;b9o.t5w(4,N);N+=1)B=G.getInt8(Y),y+=String.fromCharCode(B),Y+=1;b9o.L5w("moof",y)&&b9o.z3w("traf",y)&&b9o.K3w("sidx",y)?Y+=b9o.N3w(E,8):b9o.j3w("sidx",y)&&(Y-=8);}if(R=G.getUint32(Y,!1)+Y,b9o.y3w(R,z.byteLength))throw "sidx terminates after array buffer";q.version=G.getUint8(Y+8),Y+=12,q.timescale=G.getUint32(Y+4,!1),Y+=8,b9o.A3w(0,q.version)?(q.earliest_presentation_time=G.getUint32(Y,!1),q.first_offset=G.getUint32(Y+4,!1),Y+=8):(q.earliest_presentation_time=utils.Math.to64BitNumber(G.getUint32(Y+4,!1),G.getUint32(Y,!1)),q.first_offset=(G.getUint32(Y+8,!1)<<32)+G.getUint32(Y+12,!1),Y+=16),q.first_offset+=R+(W||0),q.reference_count=G.getUint16(Y+2,!1),Y+=4,q.references=[],Z=q.first_offset,K=q.earliest_presentation_time;var O=b9o.Y3w(K,q.timescale,1.5);for((b9o.G3w(null,CL.configs.minStartTime)||b9o.O3w(O,CL.configs.minStartTime))&&(CL.configs.minStartTime=O),N=0;b9o.Q3w(N,q.reference_count);N+=1)P=G.getUint32(Y,!1),M=b9o.F3w(P,31),P=b9o.a3w(2147483647,P),A=G.getUint32(Y+4,!1),Y+=12,q.references.push({size:P,type:M,offset:Z,duration:A,time:K,timescale:q.timescale}),Z+=P,K+=A;if(b9o.v3w(Y,R))throw "Error: final pos "+Y+" differs from SIDX end "+R;return q;},W5=function(z,W,Z){var K,R,N,M,P,A,y,E;for(K=o5.call(this,z,Z),R=K.references,N=[],P=0,A=R.length;b9o.I3w(A,P);P+=1)M=new Dash.vo.Segment,M.duration=R[P].duration,M.media=W,M.startTime=R[P].time,M.timescale=R[P].timescale,y=R[P].offset,E=R[P].offset+R[P].size-1,M.mediaRange=y+"-"+E,N.push(M);return this.log("Parsed SIDX box: "+N.length+" segments."),N;},C=function(W,Z,K){var R,N,M,P,A,y,E,B,G=new DataView(W),q=0,Y="",O=0,V=!1,w=this;for(w.log("Searching for initialization.");b9o.d3w("moov",Y)&&b9o.t3w(q,G.byteLength);){for(O=G.getUint32(q),q+=4,Y="",A=0;b9o.L3w(4,A);A+=1)y=G.getInt8(q),Y+=String.fromCharCode(y),q+=1;b9o.z2w("ftyp",Y)&&(R=b9o.K2w(q,8)),b9o.N2w("moov",Y)&&(N=b9o.j2w(q,8)),b9o.y2w("moov",Y)&&(q+=b9o.A2w(O,8));}b9o.Y2w("moov",Y)?(w.log("Loading more bytes to find initialization."),Z.range.start=0,Z.range.end=Z.bytesLoaded+Z.bytesToLoad,E=new XMLHttpRequest,E.onloadend=function(){V||K.call(w,null,new Error("Error loading initialization."));},E.onload=function(){V=!0,Z.bytesLoaded=Z.range.end,C.call(w,E.response,function(z){K.call(w,z);});},E.onerror=function(){K.call(w,null,new Error("Error loading initialization."));},p5.call(w,E,Z)):(M=void 0===R?N:R,P=N+O-1,B=M+"-"+P,w.log("Found the initialization.  Range: "+B),K.call(w,B));},K5=function(W){var Z=new XMLHttpRequest,K=!0,R=this,N=W.adaptation.period.mpd.manifest.Period_asArray[W.adaptation.period.index].AdaptationSet_asArray[W.adaptation.index].Representation_asArray[W.index].BaseURL,M={url:N,range:{},searching:!1,bytesLoaded:0,bytesToLoad:3e3,request:Z};R.log("Start searching for initialization."),M.range.start=0,M.range.end=M.bytesToLoad,CL.configs.isSmoothStreaming===!0?(K=!1,M.bytesLoaded=M.range.end,W.initialization=-1,R.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,{representation:W})):(Z.onload=function(){b9o.l2w(Z.status,200)||b9o.n2w(Z.status,299)||(K=!1,M.bytesLoaded=M.range.end,C.call(R,Z.response,M,function(z){W.range=z,W.initialization=N,R.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,{representation:W});}));},Z.onloadend=Z.onerror=function(){K&&(K=!1,R.errHandler.downloadError("initialization",M.url,Z),R.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,{representation:W}));},p5.call(R,Z,M),R.log("Perform init search: "+M.url));},U=function(W,Z,K,R){var N,M,P,A,y,E,B,G,q,Y=new DataView(W),O=new XMLHttpRequest,V=0,w="",H=0,D=!0,F=!1,Q=this;for(Q.log("Searching for SIDX box."),Q.log(Z.bytesLoaded+" bytes loaded.");b9o.c2w("sidx",w)&&b9o.k2w(V,Y.byteLength);){for(H=Y.getUint32(V),V+=4,w="",E=0;b9o.D2w(4,E);E+=1)B=Y.getInt8(V),w+=String.fromCharCode(B),V+=1;b9o.w2w("sidx",w)&&(V+=b9o.u2w(H,8));}if(M=b9o.s2w(Y.byteLength,V),b9o.e2w("sidx",w))R.call(Q);else if(b9o.U2w(H-8,M))Q.log("Found SIDX but we don't have all of it."),Z.range.start=0,Z.range.end=Z.bytesLoaded+(b9o.o8w(H,M)),O.onload=function(){b9o.Z8w(O.status,200)||b9o.p8w(O.status,299)||(D=!1,Z.bytesLoaded=Z.range.end,U.call(Q,O.response,Z,K,R));},O.onloadend=O.onerror=function(){D&&(D=!1,Q.errHandler.downloadError("SIDX",Z.url,O),R.call(Q));},p5.call(Q,O,Z);else if(Z.range.start=b9o.P8w(V,8),Z.range.end=Z.range.start+H,Q.log("Found the SIDX box.  Start: "+Z.range.start+" | End: "+Z.range.end),P=new ArrayBuffer(b9o.r8w(Z.range.end,Z.range.start)),y=new Uint8Array(P),A=new Uint8Array(W,Z.range.start,b9o.S8w(Z.range.end,Z.range.start)),y.set(A),G=this.parseSIDX.call(this,P,Z.range.start),q=G.references,b9o.E8w(null,q)&&void 0!==q&&b9o.q8w(q.length,0)&&(F=b9o.J8w(1,q[0].type)),F){Q.log("Initiate multiple SIDX load.");var x,v,u,J,L,I=[],X=0,z5=function(z){z?(I=I.concat(z),X+=1,b9o.H8w(X,v)&&R.call(Q,I)):R.call(Q);};for(x=0,v=q.length;b9o.V8w(v,x);x+=1)u=q[x].offset,J=q[x].offset+q[x].size-1,L=u+"-"+J,Z5.call(Q,K,null,L,z5);}else Q.log("Parsing segments from SIDX."),N=W5.call(Q,P,Z.url,Z.range.start),R.call(Q,N);},Z5=function(W,Z,K,R){var N,M,P=new XMLHttpRequest,A=W.adaptation.period.mpd.manifest.Period_asArray[W.adaptation.period.index].AdaptationSet_asArray[W.adaptation.index].Representation_asArray[W.index].BaseURL,y=!0,E=this,B={url:A,range:{},searching:!1,bytesLoaded:0,bytesToLoad:3e3,request:P};b9o.x8w(null,K)?(E.log("No known range for SIDX request."),B.searching=!0,B.range.start=0,B.range.end=B.bytesToLoad):(M=K.split("-"),B.range.start=parseFloat(M[0]),B.range.end=parseFloat(M[1])),P.onload=function(){b9o.m8w(P.status,200)||b9o.X8w(P.status,299)||(y=!1,B.searching?(B.bytesLoaded=B.range.end,U.call(E,P.response,B,W,function(z){z&&R.call(E,z,W,Z);})):(N=W5.call(E,P.response,B.url,B.range.start),R.call(E,N,W,Z)));},P.onloadend=P.onerror=function(){y&&(y=!1,E.errHandler.downloadError("SIDX",B.url,P),R.call(E,null,W,Z));},p5.call(E,P,B),E.log("Perform SIDX load: "+B.url);},p5=function(z,W){z.open("GET",this.requestModifierExt.modifyRequestURL(W.url)),z.responseType="arraybuffer",z.setRequestHeader("Range","bytes="+W.range.start+"-"+W.range.end),z=this.requestModifierExt.modifyRequestHeader(z),z.send(null);},N5=function(z,W,Z){var K=this;z?K.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED,{segments:z,representation:W,mediaType:Z}):K.notify(Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED,{segments:null,representation:W,mediaType:Z},new MediaPlayer.vo.Error(null,"error loading segments",null));};return {log:void 0,errHandler:void 0,requestModifierExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,loadSegments:function(z,W,Z){Z5.call(this,z,W,Z,N5.bind(this));},loadInitialization:K5,parseSegments:W5,parseSIDX:o5,findSIDX:U};},Dash.dependencies.BaseURLExtensions.prototype={constructor:Dash.dependencies.BaseURLExtensions},Dash.dependencies.BaseURLExtensions.eventList={ENAME_INITIALIZATION_LOADED:"initializationLoaded",ENAME_SEGMENTS_LOADED:"segmentsLoaded"},Dash.dependencies.DashManifestExtensions=function(){"use strict";this.timelineConverter=void 0;},Dash.dependencies.DashManifestExtensions.prototype={constructor:Dash.dependencies.DashManifestExtensions,getIsTypeOf:function(z,W){"use strict";var Z,K,R,N=z.ContentComponent_asArray,M=new RegExp(b9o.g8w("text",W)?W:"(vtt|ttml)"),P=!1,A=!1;if(b9o.f8w(z.Representation_asArray.length,0)&&z.Representation_asArray[0].hasOwnProperty("codecs")&&b9o.h8w("stpp",z.Representation_asArray[0].codecs))return b9o.C8w("fragmentedText",W);if(N)for(Z=0,K=N.length;b9o.W1w(K,Z);Z+=1)b9o.R1w(N[Z].contentType,W)&&(P=!0,A=!0);if(z.hasOwnProperty("mimeType")&&(P=M.test(z.mimeType),A=!0),!A)for(Z=0,K=z.Representation_asArray.length;!A&&b9o.M1w(K,Z);)R=z.Representation_asArray[Z],R.hasOwnProperty("mimeType")&&(P=M.test(R.mimeType),A=!0),Z+=1;return P;},getIsAudio:function(z){"use strict";return this.getIsTypeOf(z,"audio");},getIsVideo:function(z){"use strict";return this.getIsTypeOf(z,"video");},getIsFragmentedText:function(z){"use strict";return this.getIsTypeOf(z,"fragmentedText");},getIsText:function(z){"use strict";return this.getIsTypeOf(z,"text");},getIsTextTrack:function(z){return b9o.b1w("text/vtt",z)||b9o.i1w("application/ttml+xml",z);},getLanguageForAdaptation:function(z){var W="";return z.hasOwnProperty("lang")&&(W=z.lang),W;},getIsMain:function(){"use strict";return !1;},processAdaptation:function(Z){"use strict";return void 0!==Z.Representation_asArray&&b9o.T1w(null,Z.Representation_asArray)&&Z.Representation_asArray.sort(function(z,W){return b9o.B1w(z.bandwidth,W.bandwidth);}),Z;},getAdaptationForId:function(z,W,Z){"use strict";var K,R,N=W.Period_asArray[Z].AdaptationSet_asArray;for(K=0,R=N.length;b9o.G1w(R,K);K+=1)if(N[K].hasOwnProperty("id")&&b9o.O1w(N[K].id,z))return N[K];return null;},getAdaptationForIndex:function(z,W,Z){"use strict";var K=W.Period_asArray[Z].AdaptationSet_asArray;return K[z];},getIndexForAdaptation:function(z,W,Z){"use strict";var K,R,N=W.Period_asArray[Z].AdaptationSet_asArray;for(K=0,R=N.length;b9o.Q1w(R,K);K+=1)if(b9o.F1w(N[K],z))return K;return -1;},getAdaptationsForType:function(z,W,Z){"use strict";var K,R,N=this,M=z.Period_asArray[W].AdaptationSet_asArray,P=[];for(K=0,R=M.length;b9o.a1w(R,K);K+=1)this.getIsTypeOf(M[K],Z)&&P.push(N.processAdaptation(M[K]));return P;},getActiveAdaptationForType:function(z,W,Z){"use strict";var K,R,N=this,M=z.Period_asArray[W].AdaptationSet_asArray,P=Z;for((Z.indexOf("text")>-1||Z.indexOf("ttml")>-1)&&(P="text"),K=0,R=M.length;b9o.v1w(R,K);K+=1)if(this.getIsTypeOf(M[K],Z)&&b9o.I1w(CL.configs.activeTrack[P].adaptionIndex,K))return N.processAdaptation(M[K]);},getAdaptationForType:function(z,W,Z){"use strict";var K,R,N,M=this;if((Z.indexOf("text")>-1||Z.indexOf("ttml")>-1)&&(cType="text"),void 0!==CL.configs.activeTrack[Z])return this.getActiveAdaptationForType(z,W,Z);if(N=this.getAdaptationsForType(z,W,Z),!N||b9o.d1w(0,N.length))return null;for(K=0,R=N.length;b9o.t1w(R,K);K+=1)if(M.getIsMain(N[K]))return N[K];return N[0];},getCodec:function(z){"use strict";var W=z.Representation_asArray[0],Z=W.mimeType+';codecs="'+W.codecs+'"';return Z;},getMimeType:function(z){"use strict";return z.Representation_asArray[0].mimeType;},getKID:function(z){"use strict";return z&&z.hasOwnProperty("cenc:default_KID")?z["cenc:default_KID"]:void 0!==CL.manifest.keyId&&b9o.L1w(null,CL.manifest.keyId)?CL.manifest.keyId:null;},getContentProtectionData:function(z){"use strict";return z&&z.hasOwnProperty("ContentProtection_asArray")&&b9o.z6w(0,z.ContentProtection_asArray.length)?z.ContentProtection_asArray:null;},getIsDynamic:function(z){"use strict";var W=!1,Z="dynamic";return z.hasOwnProperty("type")&&(W=b9o.K6w(z.type,Z)),W;},getIsDVR:function(z){"use strict";var W,Z,K=this.getIsDynamic(z);return W=!isNaN(z.timeShiftBufferDepth),Z=K&&W;},getIsOnDemand:function(z){"use strict";var W=!1;return z.profiles&&b9o.N6w(z.profiles.length,0)&&(W=-1!==z.profiles.indexOf("urn:mpeg:dash:profile:isoff-on-demand:2011")),W;},getDuration:function(z){var W;return W=z.hasOwnProperty("mediaPresentationDuration")?z.mediaPresentationDuration:Number.POSITIVE_INFINITY;},getBandwidth:function(z){"use strict";return z.bandwidth;},getRefreshDelay:function(z){"use strict";var W=b9o.j6w(0,0),Z=2;return z.hasOwnProperty("minimumUpdatePeriod")&&(W=Math.max(parseFloat(z.minimumUpdatePeriod),Z)),W;},getRepresentationCount:function(z){"use strict";return z.Representation_asArray.length;},getBitrateListForAdaptation:function(z){if(!z||!z.Representation_asArray||!z.Representation_asArray.length)return null;for(var W=this.processAdaptation(z),Z=W.Representation_asArray,K=Z.length,R=[],N=0;b9o.y6w(K,N);N+=1)R.push(Z[N].bandwidth);return R;},getRepresentationFor:function(z,W){"use strict";return W.Representation_asArray[z];},getRepresentationsForAdaptation:function(z,W){for(var Z,K,R,N,M,P=this,A=P.processAdaptation(z.Period_asArray[W.period.index].AdaptationSet_asArray[W.index]),y=[],E=0;b9o.A6w(E,A.Representation_asArray.length);E+=1)N=A.Representation_asArray[E],Z=new Dash.vo.Representation,Z.index=E,Z.adaptation=W,N.hasOwnProperty("id")&&(Z.id=N.id),N.hasOwnProperty("bandwidth")&&(Z.bandwidth=N.bandwidth),N.hasOwnProperty("SegmentBase")?(R=N.SegmentBase,Z.segmentInfoType="SegmentBase"):N.hasOwnProperty("SegmentList")?(R=N.SegmentList,Z.segmentInfoType="SegmentList",Z.useCalculatedLiveEdgeTime=!0):N.hasOwnProperty("SegmentTemplate")?(R=N.SegmentTemplate,R.hasOwnProperty("SegmentTimeline")?(Z.segmentInfoType="SegmentTimeline",M=R.SegmentTimeline.S_asArray[b9o.Y6w(R.SegmentTimeline.S_asArray.length,1)],(!M.hasOwnProperty("r")||b9o.l6w(M.r,0))&&(Z.useCalculatedLiveEdgeTime=!0)):Z.segmentInfoType="SegmentTemplate",R.hasOwnProperty("initialization")&&(Z.initialization=R.initialization.split("$Bandwidth$").join(N.bandwidth).split("$RepresentationID$").join(N.id))):(R=N.BaseURL,Z.segmentInfoType="BaseURL"),R.hasOwnProperty("Initialization")?(K=R.Initialization,K.hasOwnProperty("sourceURL")?Z.initialization=K.sourceURL:K.hasOwnProperty("range")&&(Z.initialization=N.BaseURL,Z.range=K.range)):N.hasOwnProperty("mimeType")&&P.getIsTextTrack(N.mimeType)&&(Z.initialization=N.BaseURL,Z.range=0),R.hasOwnProperty("timescale")&&(Z.timescale=R.timescale),R.hasOwnProperty("duration")&&(Z.segmentDuration=b9o.n6w(R.duration,Z.timescale)),R.hasOwnProperty("startNumber")&&(Z.startNumber=R.startNumber),R.hasOwnProperty("indexRange")&&(Z.indexRange=R.indexRange),R.hasOwnProperty("presentationTimeOffset")&&(Z.presentationTimeOffset=b9o.c6w(R.presentationTimeOffset,Z.timescale)),Z.MSETimeOffset=P.timelineConverter.calcMSETimeOffset(Z),y.push(Z);return y;},getAdaptationsForPeriod:function(z,W){for(var Z,K,R=z.Period_asArray[W.index],N=[],M=0;b9o.k6w(M,R.AdaptationSet_asArray.length);M+=1)K=R.AdaptationSet_asArray[M],Z=new Dash.vo.AdaptationSet,K.hasOwnProperty("id")&&(Z.id=K.id),Z.index=M,Z.period=W,Z.type=this.getIsAudio(K)?"audio":this.getIsVideo(K)?"video":this.getIsFragmentedText(K)?"fragmentedText":"text",N.push(Z);return N;},getRegularPeriods:function(z,W){var Z,K,R=this,N=[],M=R.getIsDynamic(z),P=null,A=null,y=null,E=null;for(Z=0,K=z.Period_asArray.length;b9o.D6w(K,Z);Z+=1)A=z.Period_asArray[Z],A.hasOwnProperty("start")?(E=new Dash.vo.Period,E.start=A.start):b9o.w6w(null,P)&&A.hasOwnProperty("duration")&&b9o.u6w(null,y)?(E=new Dash.vo.Period,E.start=y.start+y.duration,E.duration=A.duration):b9o.s6w(0,Z)||M||(E=new Dash.vo.Period,E.start=0),b9o.e6w(null,y)&&isNaN(y.duration)&&(y.duration=b9o.U6w(E.start,y.start)),b9o.o7w(null,E)&&A.hasOwnProperty("id")&&(E.id=A.id),b9o.Z7w(null,E)&&A.hasOwnProperty("duration")&&(E.duration=A.duration),b9o.p7w(null,E)&&(E.index=Z,E.mpd=W,N.push(E),P=A,y=E),A=null,E=null;return b9o.P7w(0,N.length)?N:(W.checkTime=R.getCheckTime(z,N[0]),b9o.r7w(null,y)&&isNaN(y.duration)&&(y.duration=b9o.S7w(R.getEndTimeForLastPeriod(W),y.start)),N);},getMpd:function(z){var W=new Dash.vo.Mpd;return W.manifest=z,W.availabilityStartTime=new Date(z.hasOwnProperty("availabilityStartTime")?void 0!==z.availabilityStartTime.getTime?z.availabilityStartTime.getTime():Date.parse(z.availabilityStartTime):z.loadedTime.getTime()),z.hasOwnProperty("availabilityEndTime")&&(W.availabilityEndTime=new Date(void 0!==z.availabilityEndTime.getTime?z.availabilityEndTime.getTime():Date.parse(z.availabilityEndTime))),z.hasOwnProperty("suggestedPresentationDelay")&&(W.suggestedPresentationDelay=z.suggestedPresentationDelay),z.hasOwnProperty("timeShiftBufferDepth")&&(W.timeShiftBufferDepth=z.timeShiftBufferDepth),z.hasOwnProperty("maxSegmentDuration")&&(W.maxSegmentDuration=z.maxSegmentDuration),W;},getFetchTime:function(z,W){return this.timelineConverter.calcPresentationTimeFromWallTime(z.loadedTime,W);},getCheckTime:function(z,W){var Z,K=this,R=b9o.E7w(0,0);return z.hasOwnProperty("minimumUpdatePeriod")&&(Z=K.getFetchTime(z,W),R=Z+z.minimumUpdatePeriod),R;},getEndTimeForLastPeriod:function(W){var Z=function(z){K=z.manifest.mediaPresentationDuration;},K;if(W.manifest.mediaPresentationDuration)Z(W);else{var R=function(z){K=z.checkTime;};if(isNaN(W.checkTime))throw  new Error("Must have @mediaPresentationDuration or @minimumUpdatePeriod on MPD or an explicit @duration on the last period.");R(W);}return K;},getEventsForPeriod:function(z,W){var Z=z.Period_asArray,K=Z[W.index].EventStream_asArray,R=[];if(K)for(var N=0;b9o.q7w(N,K.length);N+=1){var M=new Dash.vo.EventStream;if(M.period=W,M.timescale=1,!K[N].hasOwnProperty("schemeIdUri"))throw "Invalid EventStream. SchemeIdUri has to be set";M.schemeIdUri=K[N].schemeIdUri,K[N].hasOwnProperty("timescale")&&(M.timescale=K[N].timescale),K[N].hasOwnProperty("value")&&(M.value=K[N].value);for(var P=0;b9o.J7w(P,K[N].Event_asArray.length);P+=1){var A=new Dash.vo.Event;A.presentationTime=0,A.eventStream=M,K[N].Event_asArray[P].hasOwnProperty("presentationTime")&&(A.presentationTime=K[N].Event_asArray[P].presentationTime),K[N].Event_asArray[P].hasOwnProperty("duration")&&(A.duration=K[N].Event_asArray[P].duration),K[N].Event_asArray[P].hasOwnProperty("id")&&(A.id=K[N].Event_asArray[P].id),R.push(A);}}return R;},getEventStreams:function(z,W){var Z=[];if(!z)return Z;for(var K=0;b9o.H7w(K,z.length);K++){var R=new Dash.vo.EventStream;if(R.timescale=1,R.representation=W,!z[K].hasOwnProperty("schemeIdUri"))throw "Invalid EventStream. SchemeIdUri has to be set";R.schemeIdUri=z[K].schemeIdUri,z[K].hasOwnProperty("timescale")&&(R.timescale=z[K].timescale),z[K].hasOwnProperty("value")&&(R.value=z[K].value),Z.push(R);}return Z;},getEventStreamForAdaptationSet:function(z,W){var Z=z.Period_asArray[W.period.index].AdaptationSet_asArray[W.index].InbandEventStream_asArray;return this.getEventStreams(Z,null);},getEventStreamForRepresentation:function(z,W){var Z=z.Period_asArray[W.adaptation.period.index].AdaptationSet_asArray[W.adaptation.index].Representation_asArray[W.index].InbandEventStream_asArray;return this.getEventStreams(Z,W);},getUTCTimingSources:function(Z){"use strict";var K=this,R=CL.configs.isLive=K.getIsDynamic(Z),N=Z.hasOwnProperty("availabilityStartTime"),M=Z.UTCTiming_asArray,P=[];return (R||N)&&M&&M.forEach(function(z){var W=new Dash.vo.UTCTiming;z.hasOwnProperty("schemeIdUri")&&(W.schemeIdUri=z.schemeIdUri,z.hasOwnProperty("value")&&(W.value=z.value.toString(),P.push(W)));}),P;}},Dash.dependencies.DashMetricsExtensions=function(){"use strict";var E=function(z,W){var Z,K,R,N,M,P,A,y;for(P=0;b9o.V7w(P,z.length);P+=1)for(Z=z[P],R=Z.AdaptationSet_asArray,A=0;b9o.x7w(A,R.length);A+=1)for(K=R[A],M=K.Representation_asArray,y=0;b9o.m7w(y,M.length);y+=1)if(N=M[y],b9o.X7w(W,N.id))return y;return -1;},B=function(z,W){var Z,K,R,N,M,P,A,y;for(P=0;b9o.g7w(P,z.length);P+=1)for(Z=z[P],R=Z.AdaptationSet_asArray,A=0;b9o.f7w(A,R.length);A+=1)for(K=R[A],M=K.Representation_asArray,y=0;b9o.h7w(y,M.length);y+=1)if(N=M[y],b9o.C7w(W,N.id))return N;return null;},G=function(z,W){return this.manifestExt.getIsTypeOf(z,W);},q=function(z,W){var Z,K,R,N;if(!z||!W)return -1;for(K=z.AdaptationSet_asArray,N=0;b9o.W0w(N,K.length);N+=1)if(Z=K[N],R=Z.Representation_asArray,G.call(this,Z,W))return R.length;return -1;},Y=function(z){var W,Z=this,K=Z.manifestModel.getValue(),R=K.Period_asArray;return W=B.call(Z,R,z),b9o.R0w(null,W)?null:W.bandwidth;},O=function(z){var W,Z=this,K=Z.manifestModel.getValue(),R=K.Period_asArray;return W=E.call(Z,R,z);},V=function(z,W){var Z,K=this,R=K.manifestModel.getValue(),N=R.Period_asArray[W];return Z=q.call(this,N,z);},w=function(z,W){var Z=this.system.getObject("abrController"),K=0;return Z&&(K=Z.getTopQualityIndexFor(z,W)),K;},H=function(z){if(b9o.M0w(null,z))return null;var W,Z,K,R=z.RepSwitchList;return b9o.b0w(null,R)||b9o.i0w(R.length,0)?null:(W=R.length,Z=b9o.T0w(W,1),K=R[Z]);},D=function(z){if(b9o.B0w(null,z))return null;var W,Z,K,R=z.BufferLevel;return b9o.G0w(null,R)||b9o.O0w(R.length,0)?null:(W=R.length,Z=b9o.Q0w(W,1),K=R[Z]);},F=function(z){if(b9o.F0w(null,z))return null;var W,Z,K=z.PlayList;return b9o.a0w(null,K)||b9o.v0w(K.length,0)?null:(W=K[b9o.I0w(K.length,1)].trace,b9o.d0w(null,W)||b9o.t0w(W.length,0)?null:Z=W[b9o.L0w(W.length,1)].playbackspeed);},Q=function(W){if(b9o.z4w(null,W))return null;var Z,K,R=W.HttpList,N=null;if(b9o.K4w(null,R)||b9o.N4w(R.length,0))return null;for(Z=R.length,K=b9o.j4w(Z,1);b9o.y4w(K,0);){if(void 0!==R[K].responsecode&&b9o.A4w(null,R[K].responsecode)){var M=function(z){N=z[K];};M(R);break;}K-=1;}return N;},x=function(z){return b9o.Y4w(null,z)?[]:z.HttpList?z.HttpList:[];},v=function(z){if(b9o.l4w(null,z))return null;var W,Z,K,R=z.DroppedFrames;return b9o.n4w(null,R)||b9o.c4w(R.length,0)?null:(W=R.length,Z=b9o.k4w(W,1),K=R[Z]);},u=function(z){if(b9o.D4w(null,z))return null;var W,Z,K,R=z.SchedulingInfo;return b9o.w4w(null,R)||b9o.u4w(R.length,0)?null:(W=R.length,Z=b9o.s4w(W,1),K=R[Z]);},J=function(z){if(b9o.e4w(null,z))return null;var W,Z,K,R=z.ManifestUpdate;return b9o.U4w(null,R)||b9o.o9w(R.length,0)?null:(W=R.length,Z=b9o.Z9w(W,1),K=R[Z]);},L=function(z){if(b9o.p9w(null,z))return null;var W,Z,K=z.DVRInfo;return b9o.P9w(null,K)||b9o.r9w(K.length,0)?null:(W=b9o.S9w(K.length,1),Z=K[W]);},I=function(z,W){if(b9o.E9w(null,z))return null;var Z,K=x(z),R=K[b9o.q9w(K.length,1)];return b9o.J9w("MPD",R.type)&&(Z=z5(R.responseHeaders)),void 0===Z[W]?null:Z[W];},X=function(z,W){if(b9o.H9w(null,z))return null;var Z,K=Q(z);return b9o.V9w(null,K)||b9o.x9w(null,K.responseHeaders)?null:(Z=z5(K.responseHeaders),void 0===Z[W]?null:Z[W]);},z5=function(z){var W={};if(!z)return W;for(var Z=z.split("\r\n"),K=0,R=Z.length;b9o.m9w(R,K);K++){var N=Z[K],M=N.indexOf(": ");b9o.X9w(M,0)&&(W[N.substring(0,M)]=N.substring(M+2));}return W;};return {manifestModel:void 0,manifestExt:void 0,system:void 0,getBandwidthForRepresentation:Y,getIndexForRepresentation:O,getMaxIndexForBufferType:V,getMaxAllowedIndexForBufferType:w,getCurrentRepresentationSwitch:H,getCurrentBufferLevel:D,getCurrentPlaybackRate:F,getCurrentHttpRequest:Q,getHttpRequests:x,getCurrentDroppedFrames:v,getCurrentSchedulingInfo:u,getCurrentDVRInfo:L,getCurrentManifestUpdate:J,getLatestFragmentRequestHeaderValueByID:X,getLatestMPDRequestHeaderValueByID:I};},Dash.dependencies.DashMetricsExtensions.prototype={constructor:Dash.dependencies.DashMetricsExtensions},Dash.dependencies.FragmentExtensions=function(){"use strict";var D=0,F=1,Q=3,x=4,v=5,u=0,J=2,L=8,I=9,X=10,z5=11,o5=function(z){for(var W,Z,K,R,N,M,P=new DataView(z),A=0;b9o.g9w("tfdt",R)&&b9o.f9w(A,P.byteLength);){for(K=P.getUint32(A),A+=4,R="",N=0;b9o.h9w(4,N);N+=1)M=P.getInt8(A),R+=String.fromCharCode(M),A+=1;b9o.C9w("moof",R)&&b9o.W50("traf",R)&&b9o.R50("tfdt",R)&&(A+=b9o.M50(K,8));}if(b9o.b50(A,P.byteLength))throw "Error finding live offset.";return Z=P.getUint8(A),b9o.i50(0,Z)?(A+=4,W=P.getUint32(A,!1)):(A+=b9o.T50(K,16),W=utils.Math.to64BitNumber(P.getUint32(A+4,!1),P.getUint32(A,!1))),{version:Z,base_media_decode_time:W};},W5=function(z){for(var W,Z,K,R,N,M,P,A=new DataView(z),y=0;b9o.B50("sidx",N)&&b9o.G50(y,A.byteLength);){for(M=A.getUint32(y),y+=4,N="",R=0;b9o.O50(4,R);R+=1)P=A.getInt8(y),N+=String.fromCharCode(P),y+=1;b9o.Q50("moof",N)&&b9o.F50("traf",N)&&b9o.a50("sidx",N)?y+=b9o.v50(M,8):b9o.I50("sidx",N)&&(y-=8);}return W=A.getUint8(y+8),y+=12,Z=A.getUint32(y+4,!1),y+=8,K=b9o.d50(0,W)?A.getUint32(y,!1):utils.Math.to64BitNumber(A.getUint32(y+4,!1),A.getUint32(y,!1)),{earliestPresentationTime:K,timescale:Z};},C=function(z){for(var W,Z,K,R,N,M,P,A=new DataView(z),y=0;b9o.t50("tfhd",Z)&&b9o.L50(y,A.byteLength);){for(W=A.getUint32(y),y+=4,Z="",M=0;b9o.z30(4,M);M+=1)P=A.getInt8(y),Z+=String.fromCharCode(P),y+=1;b9o.K30("moof",Z)&&b9o.N30("traf",Z)&&b9o.j30("tfhd",Z)&&(y+=b9o.y30(W,8));}if(b9o.A30(y,A.byteLength))throw "Error finding live offset.";return N={baseDataOffset:0,descriptionIndex:0,sampleDuration:0,sampleSize:0,defaultSampleFlags:0},y+=1,y+=2,K=A.getUint8(y),y+=1,R=intTobitArray(K,8),y+=4,R[D]&&(N.baseDataOffset=utils.Math.to64BitNumber(A.getUint32(y+4,!1),A.getUint32(y,!1)),y+=8),R[F]&&(N.descriptionIndex=A.getUint32(y),y+=4),R[Q]&&(N.sampleDuration=A.getUint32(y),y+=4),R[x]&&(N.sampleSize=A.getUint32(y),y+=4),R[v]&&(N.defaultSampleFlags=A.getUint32(y),y+=4),N;},K5=function(z){for(var W,Z,K,R,N,M=new DataView(z),P=0;b9o.Y30("mdhd",K)&&b9o.l30(P,M.byteLength);){for(Z=M.getUint32(P),P+=4,K="",R=0;b9o.n30(4,R);R+=1)N=M.getInt8(P),K+=String.fromCharCode(N),P+=1;b9o.c30("moov",K)&&b9o.k30("trak",K)&&b9o.D30("mdia",K)&&b9o.w30("mdhd",K)&&(P+=b9o.u30(Z,8));}if(b9o.s30(P,M.byteLength))throw "Error finding live offset.";return W=M.getUint8(P),P+=12,b9o.e30(1,W)&&(P+=8),M.getUint32(P,!1);},U=function(z){var W,Z,K,R,N,M,P,A,y,E,B,G,q,Y,O,V,w=new DataView(z),H=0;for(Y=C(z),O=o5(z);b9o.U30("trun",Z)&&b9o.o20(H,w.byteLength);){for(W=w.getUint32(H),H+=4,Z="",B=0;b9o.Z20(4,B);B+=1)G=w.getInt8(H),Z+=String.fromCharCode(G),H+=1;b9o.p20("moof",Z)&&b9o.P20("traf",Z)&&b9o.r20("trun",Z)&&(H+=b9o.S20(W,8)),b9o.E20("moof",Z)&&(q=b9o.q20(H,8));}if(b9o.J20(H,w.byteLength))throw "Error finding live offset.";for(H+=1,H+=1,y=w.getUint16(H),H+=2,E=intTobitArray(y,16),N=w.getUint32(H),H+=4,P=O.base_media_decode_time,E[u]?(V=w.getUint32(H)+Y.baseDataOffset,H+=4):V=Y.baseDataOffset,E[J]&&(H+=4),A=[],B=0;b9o.H20(N,B);B++)E[L]?(K=w.getUint32(H),H+=4):K=Y.sampleDuration,E[I]?(M=w.getUint32(H),H+=4):M=Y.sampleSize,E[X]&&(H+=4),E[z5]?(R=w.getUint32(H),H+=4):R=0,A.push({dts:P,cts:P+R,duration:K,offset:q+V,size:M}),V+=M,P+=K;return A;},Z5=function(z){var W,Z=this,K=new XMLHttpRequest,R=z,N=!1,M="Error loading fragment: "+R,P=new MediaPlayer.vo.Error(null,M,null);K.onloadend=function(){N||(M="Error loading fragment: "+R,Z.notify(Dash.dependencies.FragmentExtensions.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,{fragment:null},P));},K.onload=function(){N=!0,W=o5(K.response),Z.notify(Dash.dependencies.FragmentExtensions.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,{fragment:W});},K.onerror=function(){M="Error loading fragment: "+R,Z.notify(Dash.dependencies.FragmentExtensions.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,{fragment:null},P);},K.responseType="arraybuffer",K.open("GET",R),K.send(null);};return {log:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,loadFragment:Z5,parseTFDT:o5,parseSIDX:W5,getSamplesInfo:U,getMediaTimescaleFromMoov:K5};},Dash.dependencies.FragmentExtensions.prototype={constructor:Dash.dependencies.FragmentExtensions},Dash.dependencies.FragmentExtensions.eventList={ENAME_FRAGMENT_LOADING_COMPLETED:"fragmentLoadingCompleted"},Dash.vo.AdaptationSet=function(){"use strict";this.period=null,this.index=-1,this.type=null;},Dash.vo.AdaptationSet.prototype={constructor:Dash.vo.AdaptationSet},Dash.vo.Event=function(){"use strict";this.duration=b9o.V20(0,0),this.presentationTime=b9o.x20(0,0),this.id=b9o.m20(0,0),this.messageData="",this.eventStream=null,this.presentationTimeDelta=b9o.X20(0,0);},Dash.vo.Event.prototype={constructor:Dash.vo.Event},Dash.vo.EventStream=function(){"use strict";this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="";},Dash.vo.EventStream.prototype={constructor:Dash.vo.EventStream},Dash.vo.Mpd=function(){"use strict";this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.checkTime=b9o.g20(0,0),this.clientServerTimeShift=0,this.isClientServerTimeSyncCompleted=!1;},Dash.vo.Mpd.prototype={constructor:Dash.vo.Mpd},Dash.vo.Period=function(){"use strict";this.id=null,this.index=-1,this.duration=b9o.f20(0,0),this.start=b9o.h20(0,0),this.mpd=null;},Dash.vo.Period.prototype={constructor:Dash.vo.Period},Dash.vo.Representation=function(){"use strict";this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.segmentDuration=b9o.C20(0,0),this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=b9o.W80(0,0),this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=b9o.R80(0,0);},Dash.vo.Representation.prototype={constructor:Dash.vo.Representation},Dash.vo.Segment=function(){"use strict";this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=b9o.M80(0,0),this.replacementTime=null,this.replacementNumber=b9o.b80(0,0),this.mediaStartTime=b9o.i80(0,0),this.presentationStartTime=b9o.T80(0,0),this.availabilityStartTime=b9o.B80(0,0),this.availabilityEndTime=b9o.G80(0,0),this.availabilityIdx=b9o.O80(0,0),this.wallStartTime=b9o.Q80(0,0),this.representation=null;},Dash.vo.Segment.prototype={constructor:Dash.vo.Segment},Dash.vo.UTCTiming=function(){"use strict";this.schemeIdUri="",this.value="";},Dash.vo.UTCTiming.prototype={constructor:Dash.vo.UTCTiming},MediaPlayer.dependencies.ErrorHandler=function(){"use strict";var K=MediaPlayer.events.ERROR;return {eventBus:void 0,capabilityError:function(z){this.eventBus.dispatchEvent({type:K,error:"capability",event:z});},downloadError:function(z,W,Z){this.eventBus.dispatchEvent({type:K,error:"download",event:{id:z,url:W,request:Z}});},manifestError:function(z,W,Z){this.eventBus.dispatchEvent({type:K,error:"manifestError",event:{message:z,id:W,manifest:Z}});},closedCaptionsError:function(z,W,Z){this.eventBus.dispatchEvent({type:K,error:"cc",event:{message:z,id:W,cc:Z}});},mediaSourceError:function(z){this.eventBus.dispatchEvent({type:K,error:"mediasource",event:z});},mediaKeySessionError:function(z){this.eventBus.dispatchEvent({type:K,error:"key_session",event:z});},mediaKeyMessageError:function(z){this.eventBus.dispatchEvent({type:K,error:"key_message",event:z});},mediaKeySystemSelectionError:function(z){this.eventBus.dispatchEvent({type:K,error:"key_system_selection",event:z});},licenseError:function(z){this.eventBus.dispatchEvent({type:K,error:"licenseError",event:z});},keyError:function(z){this.eventBus.dispatchEvent({type:K,error:"keyError",event:z});}};},MediaPlayer.dependencies.ErrorHandler.prototype={constructor:MediaPlayer.dependencies.ErrorHandler},MediaPlayer.dependencies.FragmentLoader=function(){"use strict";var w=0,H=500,D=[],F=function(M,P){var A,y=new XMLHttpRequest,E=null,B=!0,G=!0,q=null,Y=this,O=function(z){var W=function(){G=!1;};W();var Z,K,R=new Date,N=y.response;z.firstByteDate||(z.firstByteDate=z.requestStartDate),z.requestEndDate=R,Z=b9o.F80(z.firstByteDate.getTime(),z.requestStartDate.getTime()),K=b9o.a80(z.requestEndDate.getTime(),z.firstByteDate.getTime()),CL.manifest.debug&&console.log("DownloadRequest finished: "+(Z+K)+" "+M.url),E.tresponse=z.firstByteDate,E.tfinish=z.requestEndDate,E.responsecode=y.status,E.responseHeaders=y.getAllResponseHeaders(),Y.metricsModel.appendHttpTrace(E,R,b9o.v80(R.getTime(),q.getTime()),[N?N.byteLength:0]),q=R;};if(void 0===M.url||b9o.I80("",M.url)){var V=new Uint8Array(1);return void setTimeout(function(){Y.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,{request:M,response:V});},100);}if(D.push(y),M.requestStartDate=new Date,E=Y.metricsModel.addHttpRequest(M.mediaType,null,M.type,M.url,null,M.range,M.requestStartDate,null,null,null,null,M.duration,null),Y.metricsModel.appendHttpTrace(E,M.requestStartDate,b9o.d80(M.requestStartDate.getTime(),M.requestStartDate.getTime()),[0]),q=M.requestStartDate,CL.configs.isIE11||(y.timeout=CL.manifest.fragmentRequestTimeout),y.open("GET",Y.requestModifierExt.modifyRequestURL(M.url),!0),y.responseType="arraybuffer",y=Y.requestModifierExt.modifyRequestHeader(y),void 0!==CL.manifest.customHeaders&&void 0!==CL.manifest.customHeaders.fragmentRequest)for(A in CL.manifest.customHeaders.fragmentRequest)y.setRequestHeader(A,CL.manifest.customHeaders.fragmentRequest[A]);M.range&&y.setRequestHeader("Range","bytes="+M.range),y.onprogress=function(z){var W=new Date;B&&(B=!1,(!z.lengthComputable||z.lengthComputable&&b9o.t80(z.total,z.loaded))&&(M.firstByteDate=W,E.tresponse=W)),Y.metricsModel.appendHttpTrace(E,W,b9o.L80(W.getTime(),q.getTime()),[y.response?y.response.byteLength:0]),q=W;},y.onload=function(){b9o.z10(y.status,200)||b9o.K10(y.status,299)||(O(M,!0),Y.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,{request:M,response:y.response}));},y.onloadend=y.onerror=function(){-1!==D.indexOf(y)&&(D.splice(D.indexOf(y),1),G&&(O(M,!1),b9o.N10(P,0)?(Y.log("Failed loading fragment: "+M.mediaType+":"+M.type+":"+M.startTime+", retry in "+H+"ms attempts: "+P),P--,setTimeout(function(){F.call(Y,M,P);},H)):(Y.log("Failed loading fragment: "+M.mediaType+":"+M.type+":"+M.startTime+" no retry attempts left"),Y.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,{request:M,bytes:null},new MediaPlayer.vo.Error(null,"failed loading fragment",null)))));},y.send();},Q=function(z){var W=this,Z=new XMLHttpRequest,K=!1;Z.open("HEAD",z.url,!0),Z.onload=function(){b9o.j10(Z.status,200)||b9o.y10(Z.status,299)||(K=!0,W.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,{request:z,exists:!0}));},Z.onloadend=Z.onerror=function(){K||W.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,{request:z,exists:!1});},Z.send();};return {metricsModel:void 0,errHandler:void 0,log:void 0,requestModifierExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,load:function(z){z?F.call(this,z,w):this.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,{request:z,bytes:null},new MediaPlayer.vo.Error(null,"request is null",null));},checkForExistence:function(z){return z?void Q.call(this,z):void this.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,{request:z,exists:!1});},abort:function(){var z=function(){D=[];},W,Z,K=D.length;for(W=0;b9o.A10(K,W);W+=1)Z=D[W],D[W]=null,Z.abort(),Z=null;z();}};},MediaPlayer.dependencies.FragmentLoader.prototype={constructor:MediaPlayer.dependencies.FragmentLoader},MediaPlayer.dependencies.FragmentLoader.eventList={ENAME_LOADING_COMPLETED:"loadingCompleted",ENAME_CHECK_FOR_EXISTENCE_COMPLETED:"checkForExistenceCompleted"},MediaPlayer.dependencies.LiveEdgeFinder=function(){"use strict";var R,N=!1,M=b9o.Y10(0,0),P=MediaPlayer.rules.SynchronizationRulesCollection.prototype.BEST_GUESS_RULES,A=function(z){var W=z.value,Z=b9o.l10(((new Date).getTime()-M),1e3);this.notify(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,{liveEdge:W,searchTime:Z},b9o.n10(null,W)?new MediaPlayer.vo.Error(MediaPlayer.dependencies.LiveEdgeFinder.LIVE_EDGE_NOT_FOUND_ERROR_CODE,"live edge has not been found",null):null);},y=function(Z){var K=this;!K.streamProcessor.isDynamic()||N||Z.error||(R=K.synchronizationRulesCollection.getRules(P),N=!0,M=(new Date).getTime(),K.rulesController.applyRules(R,K.streamProcessor,A.bind(K),null,function(z,W){return W;}));},E=function(z){var W=function(){P=z.error?MediaPlayer.rules.SynchronizationRulesCollection.prototype.BEST_GUESS_RULES:MediaPlayer.rules.SynchronizationRulesCollection.prototype.TIME_SYNCHRONIZED_RULES;};W();};return {system:void 0,synchronizationRulesCollection:void 0,rulesController:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED]=y,this[MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED]=E;},initialize:function(z){this.streamProcessor=z,this.fragmentLoader=z.fragmentLoader;},abortSearch:function(){N=!1,M=b9o.c10(0,0);}};},MediaPlayer.dependencies.LiveEdgeFinder.prototype={constructor:MediaPlayer.dependencies.LiveEdgeFinder},MediaPlayer.dependencies.LiveEdgeFinder.eventList={ENAME_LIVE_EDGE_SEARCH_COMPLETED:"liveEdgeFound"},MediaPlayer.dependencies.LiveEdgeFinder.LIVE_EDGE_NOT_FOUND_ERROR_CODE=1,MediaPlayer.dependencies.ManifestLoader=function(){"use strict";var G,q=3,Y=500,O=function(z){var W=null;return -1!==z.indexOf("/")&&(-1!==z.indexOf("?")&&(z=z.substring(0,z.indexOf("?"))),W=z.substring(0,z.lastIndexOf("/")+1)),W;},V=function(W,Z){var K,R,N,M=O(W),P=new XMLHttpRequest,A=new Date,y=null,E=!0,B=this;R=function(){b9o.k10(P.status,200)||b9o.D10(P.status,299)||(E=!1,y=new Date,B.metricsModel.addHttpRequest("stream",null,"MPD",W,null,null,A,y,null,P.status,null,null,P.getAllResponseHeaders()),CL.configs.isIE11||CL.configs.isActiveVideoChrome||(M=O(P.responseURL)),K=B.parser.parse(P.responseText,M),K?(K.url=W,K.loadedTime=y,B.metricsModel.addManifestUpdate("stream",K.type,A,y,K.availabilityStartTime),B.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,{manifest:K})):B.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,{manifest:null},new MediaPlayer.vo.Error(null,"Failed loading manifest: "+W,null)));},N=function(){E&&(E=!1,B.metricsModel.addHttpRequest("stream",null,"MPD",W,null,null,A,new Date,P.status,null,null,P.getAllResponseHeaders()),b9o.w10(Z,0)?(B.log("Failed loading manifest: "+W+", retry in "+Y+"ms attempts: "+Z),Z--,setTimeout(function(){V.call(B,W,Z);},Y)):(B.log("Failed loading manifest: "+W+" no retry attempts left"),B.errHandler.downloadError("manifest",W,P),B.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,null,new Error("Failed loading manifest: "+W+" no retry attempts left"))));};try{if(P.onload=R,P.onloadend=N,P.onerror=N,CL.configs.isIE11||(P.timeout=CL.manifest.manifestRequestTimeout),P.open("GET",B.requestModifierExt.modifyRequestURL(W),!0),void 0!==CL.manifest.customHeaders&&void 0!==CL.manifest.customHeaders.manifestRequest)for(G in CL.manifest.customHeaders.manifestRequest)P.setRequestHeader(G,CL.manifest.customHeaders.manifestRequest[G]);P.send();}catch(z){P.onerror();}};return {log:void 0,parser:void 0,errHandler:void 0,metricsModel:void 0,requestModifierExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,load:function(z){V.call(this,z,q);}};},MediaPlayer.dependencies.ManifestLoader.prototype={constructor:MediaPlayer.dependencies.ManifestLoader},MediaPlayer.dependencies.ManifestLoader.eventList={ENAME_MANIFEST_LOADED:"manifestLoaded"},MediaPlayer.dependencies.ManifestUpdater=function(){"use strict";var q=b9o.u10(0,0),Y=null,O=!1,V=!1,w=function(){b9o.s10(null,Y)&&(clearInterval(Y),Y=null);},H=function(){w.call(this),isNaN(q)||(this.log("Refresh manifest in "+q+" seconds."),Y=setTimeout(F.bind(this),Math.min(b9o.e10(1e3,q),b9o.U10(Math.pow(2,31),1)),this));},D=function(){var z,W,Z=this,K=Z.manifestModel.getValue();void 0!==K&&b9o.o60(null,K)&&(z=Z.manifestExt.getRefreshDelay(K),W=b9o.Z60(((new Date).getTime()-K.loadedTime.getTime()),1e3),q=Math.max(b9o.p60(z,W),0),H.call(Z));},F=function(){var z,W,Z,K,R=this,N=0;if(!V)if(V=!0,z=R.manifestModel.getValue(),W=z.url,Z=new Date,K=b9o.P60(Z.getTime(),z.loadedTime.getTime()),CL.manifest.useLookAheadFragments===!0&&b9o.r60(K,1e4)&&(CL.configs.needManifestUpdate=!0),z.hasOwnProperty("Location")&&(W=z.Location),z.hasOwnProperty("lookAheadFragmentCount")&&(N=isNaN(z.lookAheadFragmentCount)?0:parseInt(z.lookAheadFragmentCount)),CL.manifest.useLookAheadFragments===!0&&CL.configs.needManifestUpdate===!1&&b9o.S60(N,0)){var M=["audio","video"];new castLabsDashJS.classes.Utils;for(var P in M){for(var A=M[P],y=z.Period_asArray[0].AdaptationSet_asArray[CL.configs.activeTrack[A].adaptionIndex].SegmentTemplate.SegmentTimeline.S_asArray;b9o.E60(CL.configs.lookAheadFragments[A].length,0);){var E,B=CL.configs.lookAheadFragments[A].shift();E={t:B.absoluteTime,d:B.absoluteDuration};for(var G=b9o.q60(y.length,1);b9o.J60(G,0);G--){if(b9o.H60(y[G].t,E.t)){y.splice(G+1,0,E),y.splice(0,1);break;}if(b9o.V60(y[G].t,E.t))break;}}z.Period_asArray[0].AdaptationSet_asArray[CL.configs.activeTrack[A].adaptionIndex].SegmentTemplate_asArray[0].SegmentTimeline_asArray[0].S_asArray=y.concat([]);}var Z=new Date;z.loadedTime.setTime(Z.getTime()),z.minimumUpdatePeriod=2,R.manifestLoader.notify(MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED,{manifest:z});}else R.manifestLoader.load(W),CL.configs.needManifestUpdate=!1;},Q=function(z){z.error||(this.manifestModel.setValue(z.data.manifest),this.log("Manifest has been refreshed."),O||D.call(this));},x=function(){this.start();},v=function(){this.stop();},u=function(){var z=function(){V=!1;};z();};return {log:void 0,system:void 0,manifestModel:void 0,manifestExt:void 0,manifestLoader:void 0,setup:function(){this[MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED]=u,this[MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED]=Q,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED]=x,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED]=v;},start:function(){O=!1,D.call(this);},stop:function(){O=!0,w.call(this);}};},MediaPlayer.dependencies.ManifestUpdater.prototype={constructor:MediaPlayer.dependencies.ManifestUpdater},MediaPlayer.dependencies.Notifier=function(){"use strict";var R,N="observableId",M=0,P=function(){return this[N]||(M+=1,this[N]="_id_"+M),this[N];};return {system:void 0,setup:function(){R=this.system,R.mapValue("notify",this.notify),R.mapValue("subscribe",this.subscribe),R.mapValue("unsubscribe",this.unsubscribe);},notify:function(){var z=arguments[0]+P.call(this),W=new MediaPlayer.vo.Event;W.sender=this,W.type=arguments[0],W.data=arguments[1],W.error=arguments[2],W.timestamp=(new Date).getTime(),R.notify.call(R,z,W);},subscribe:function(z,W,Z,K){if(!Z&&W[z]&&(Z=W[z]=W[z].bind(W)),!W)throw "observer object cannot be null or undefined";if(!Z)throw "event handler cannot be null or undefined";z+=P.call(this),R.mapHandler(z,void 0,Z,K);},unsubscribe:function(z,W,Z){Z=Z||W[z],z+=P.call(this),R.unmapHandler(z,void 0,Z);}};},MediaPlayer.dependencies.Notifier.prototype={constructor:MediaPlayer.dependencies.Notifier},MediaPlayer.dependencies.Stream=function(){"use strict";var Q,x,v={},u=[],J=!0,L=!1,I=!1,X=!1,z5=null,o5=!0,W5=null,C={},K5=null,U=function(){L&&this.playbackController.start();},Z5=function(){this.playbackController.pause();},p5=function(z){L&&(this.log("Do seek: "+z),this.playbackController.seek(z));},N5=[],R5=null,b5=function(z){this.errHandler.mediaKeySessionError(z),this.log(z),this.reset();},j5=function(W){var Z=MediaPlayer.dependencies.protection.CommonEncryption.getPSSHForKeySystem(R5,W);if(Z)try{this.protectionController.createKeySession(Z,"temporary");}catch(z){b5.call(this,"Error creating key session! "+z.message);}else b5.call(this,"Selected key system is "+R5.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!");},T5=function(W){if(b9o.x60("cenc",W.data.initDataType))return void this.log("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+W.data.initDataType);var Z=W.data.initData;if((ArrayBuffer.isView&&ArrayBuffer.isView(Z)||b9o.m60(Z.buffer,ArrayBuffer)&&Z.byteLength)&&(Z=Z.buffer),R5)j5.call(this,Z);else if(void 0===R5){R5=null,N5.push(Z);try{this.protectionExt.autoSelectKeySystem(this.protectionExt.getSupportedKeySystems(Z),this.protectionModel,this.protectionController,v.video,v.audio);}catch(z){b5.call(this,z.message);}}else N5.push(Z);},S5=function(){var z=function(){N5=[];};R5||(R5=this.protectionModel.keySystem);for(var W=0;b9o.X60(W,N5.length);W++)j5.call(this,N5[W]);z();},Y5=function(z){z.error?b5.call(this,z.error):this.log("DRM: License server certificate successfully updated.");},O5=function(z){z.error?b5.call(this,z.error):this.log("DRM: Session created.  SessionID = "+z.data.getSessionID());},k5=function(){this.log("DRM: Key added.");},V5=function(z){var W,Z=z.data.sessionToken;W="DRM: MediaKeyError - sessionId: "+Z.getSessionID()+".  "+z.data.error,b5.call(this,W);},G5=function(z){this.log(z.error?z.data.error:"DRM: Session closed.  SessionID = "+z.data);},Q5=function(z){this.log(z.error?z.data.error:"DRM: Session removed.  SessionID = "+z.data);},B5=function(W){var Z=W.data.getKeyStatuses(),K=this;Z.forEach(function(z){b9o.g60("output-restricted",z)||b9o.f60("output-not-allowed",z)?K.errHandler.keyError("output-restricted"):b9o.h60("output-downscaled",z)?K.errHandler.keyError("output-downscaled"):b9o.C60("expired",z)&&K.errHandler.keyError("expired");}),this.log("DRM: Key status changed");},A5=function(W,Z){var K,R=this,N=function(z){R.log("MediaSource is open!"),R.log(z),window.URL.revokeObjectURL(K),W.removeEventListener("sourceopen",N),W.removeEventListener("webkitsourceopen",N),Z(W);};W.addEventListener("sourceopen",N,!1),W.addEventListener("webkitsourceopen",N,!1),K=R.mediaSourceExt.attachMediaSource(W,R.videoModel);},q5=function(){var z,W=this,Z=u.length,K=0;for(K;b9o.W70(Z,K);K+=1)z=u[K],z.reset(X),z=null;K5&&K5.reset(),u=[],x&&W.mediaSourceExt.detachMediaSource(W.videoModel),L=!1,z5=null,v={},x=null,Q=null;},n5=function(R,N){var M,P,A,y=this,E=null,B=function(z){return z.codec;},G=function(W,Z){var K=null;try{K=y.sourceBufferExt.createSourceBuffer(W,Z);}catch(z){y.errHandler.mediaSourceError("Error creating "+R+" source buffer.");}return K;},q=y.adapter.getMediaInfosForType(N,W5,R),Y=null;if(b9o.R70(0,q.length))return void y.log("No "+R+" data.");b9o.M70("text",R)&&(B=function(z){return E=z.mimeType;});for(var O=0;b9o.b70(O,CL.configs.tracks[R].length);O++)if(b9o.i70("text",R)||CL.manifest.useUniversalSubtitleEngine!==!0){Y=b9o.T70(null,CL.configs.activeTrack[R])?CL.configs.activeTrack[R]:CL.configs.tracks[R][O],A=b9o.B70(q.length,0)?q[Y.id]:null,y.log("Create "+R+" buffer.");var V,w=B.call(y,A),H=null;if(b9o.G70("text",R)||b9o.O70("fragmentedText",R))H=G(x,A);else if(M=w,y.log(R+" codec: "+M),v[R]=A,V=A.contentProtection,V&&!y.capabilities.supportsEncryptedMedia())y.errHandler.capabilityError("encryptedmedia");else if(y.capabilities.supportsCodec(y.videoModel.getElement(),M))H=G(x,A);else{var D=R+"Codec ("+M+") is not supported.";y.errHandler.manifestError(D,"codec",N),y.log(D);}if(b9o.Q70(null,H)){var F=function(z){CL.configs.activeTrack[R]=z;};F(Y);break;}}b9o.F70(null,H)||void 0===H?y.log("No buffer was created, skipping "+R+" data."):(P=y.system.getObject("streamProcessor"),u.push(P),P.initialize(E||R,H,y.videoModel,y.fragmentController,y.playbackController,x,y,K5,V),P.setMediaInfo(A),y.abrController.updateTopQualityIndex(A),y.adapter.updateData(P),b9o.a70("fragmentedText",R)&&(P.bufferController.videoModel=y.videoModel,H.initialize(R,P.bufferController)));},w5=function(){var z,W=this;if(K5=W.system.getObject("eventController"),K5.initialize(W.videoModel),z=W.adapter.getEventsFor(W5),K5.addInlineEvents(z),n5.call(W,"video",Q),n5.call(W,"audio",Q),n5.call(W,"text",Q),CL.configs.isChromecast){var Z=(window.mediaManager.getMediaInformation(),CL.configs.tracks.text),K=CL.configs.tracks.audio;window.self.audioTracks=K,window.self.textTracks=Z;}},i5=function(){var z,W,Z=this;z=W5.manifestInfo.duration,W=Z.mediaSourceExt.setDuration(x,z),Z.log("Duration successfully set to: "+W),L=!0,x5.call(Z);},H5=function(){this.log("element loaded!"),I=!0,F5.call(this);},F5=function(){L&&I&&b9o.v70(0,W5.index)&&(K5.start(),J&&U.call(this));},x5=function(){var z=this,W=u.length,Z=!!C.audio||!!C.video,K=Z?new MediaPlayer.vo.Error(MediaPlayer.dependencies.Stream.DATA_UPDATE_FAILED_ERROR_CODE,"Data update failed",null):null,R=0;if(L){for(R;b9o.I70(W,R);R+=1)if(u[R].isUpdating())return ;o5=!1,z.eventBus.dispatchEvent({type:MediaPlayer.events.STREAM_INITIALIZED,data:{streamInfo:W5}}),z.notify(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,null,K);}},J5=function(z){for(var W=u.length,Z=null,K=0;b9o.d70(W,K);K+=1)if(Z=u[K],b9o.t70(Z.getType(),z))return Z.getMediaInfo();return null;},y5=function(W){var Z=W.data.error.code,K="";if(-1!==Z){var R=function(z){K=z;},N=function(z){K=z;},M=function(z){K=z;},P=function(z){K=z;},A=function(z){K=z;};switch(Z){case 1:M("MEDIA_ERR_ABORTED");break;case 2:N("MEDIA_ERR_NETWORK");break;case 3:A("MEDIA_ERR_DECODE");break;case 4:P("MEDIA_ERR_SRC_NOT_SUPPORTED");break;case 5:R("MEDIA_ERR_ENCRYPTED");}X=!0,this.log("Video Element Error: "+K),this.log(W.error),this.errHandler.mediaSourceError(K),this.reset();}},D5=function(Z){var K,R=this,N=function(z){if(x=z,w5.call(R),b9o.L70(0,u.length)){var W="No streams to play.";R.errHandler.manifestError(W,"nostreams",Q),R.log(W);}else R.liveEdgeFinder.initialize(u[0]),R.liveEdgeFinder.subscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,R.playbackController),i5.call(R),F5.call(R);};Q=Z,K=R.mediaSourceExt.createMediaSource(),A5.call(R,K,N);},E5=function(){var z=m5(),W=z.length,Z=0;for(Z;b9o.z00(W,Z);Z+=1)if(!z[Z].isBufferingCompleted())return ;x&&W5.isLast&&this.mediaSourceExt.signalEndOfStream(x);},l5=function(z){var W=z.sender.streamProcessor.getType();C[W]=z.error,x5.call(this);},m5=function(){var z,W,Z=[],K=0,R=u.length;for(K;b9o.K00(R,K);K+=1)W=u[K],z=W.getType(),(b9o.N00("audio",z)||b9o.j00("video",z))&&Z.push(W);return Z;},d5=function(){var W,Z=this,K=u.length,R=0;for(R;b9o.y00(K,R);R+=1){var N=function(z){W=z[R];};N(u);var M=W.getType();if((M.indexOf("text")>-1||M.indexOf("ttml")>-1)&&(M="text"),b9o.A00("text",M)){W.bufferController.clearFutureBuffer(Z.getDuration());break;}}},u5=function(K){var R,N,M,P=this,A=u.length,y=0,E=!1;for(o5=!0,Q=P.manifestModel.getValue(),K&&(K.duration?W5=K:E=!0),P.log("Manifest updated... set new data on buffers."),K5&&(N=P.adapter.getEventsFor(W5),K5.addInlineEvents(N)),y;b9o.Y00(A,y);y+=1){var B=function(z){M=z[y];};B(u);var G=M.getType();if((G.indexOf("text")>-1||G.indexOf("ttml")>-1)&&(G="text"),E!==!0||b9o.l00(G,K)){if(R=P.adapter.getMediaInfosForType(Q,W5,G),b9o.n00("text",G)||CL.configs.previousActiveTrack[G]&&b9o.c00(CL.configs.previousActiveTrack[G].id,CL.configs.activeTrack[G].id)){var q=function(){var z=function(){b9o.D00("text",G)?(M.bufferController.scheduleController.start(),M.indexHandler.setCurrentTime(P.playbackController.getTime())):n5.call(P,"text",Q),CL.configs.previousActiveTrack[G]=JSON.parse(JSON.stringify(CL.configs.activeTrack[G]));},W=P.playbackController.getTime()+P.playbackController.getTimeToStreamEnd(),Z=M.getFragmentModel();b9o.k00("text",G)&&(M.bufferController.scheduleController.stop(),Z.abortRequests(),Z.removeExecutedRequestsBeforeTime(W),Z.cancelPendingRequests(P.abrController.getQualityFor(G,CL.configs.previousActiveTrack[G])));b9o.w00("text",G)&&M.bufferController.subscribe("bufferCleared",P,z,!0),M.bufferController.clearFutureBuffer(W),b9o.u00("text",G)&&z();};P.playbackController.isSeeking()===!0&&b9o.s00("text",G)?P.playbackController.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED,P,q,!0):q();}if(CL.configs.isSmoothStreaming===!0&&CL.configs.isLive===!0&&b9o.e00(y,A-1)&&n5.call(P,"text",Q),void 0==CL.configs.activeTrack[G]&&console.log(CL.configs.activeTrack[G]),M.setMediaInfo(R[CL.configs.activeTrack[G].id]),P.adapter.updateData(M),E===!0)break;}}};return {system:void 0,eventBus:void 0,manifestModel:void 0,mediaSourceExt:void 0,sourceBufferExt:void 0,adapter:void 0,fragmentController:void 0,playbackController:void 0,protectionModel:void 0,protectionController:void 0,protectionExt:void 0,capabilities:void 0,log:void 0,errHandler:void 0,liveEdgeFinder:void 0,abrController:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFERING_COMPLETED]=E5,this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=l5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR]=y5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY]=H5,this[MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY]=T5.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED]=S5.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED]=Y5.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED]=k5.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR]=V5.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED]=B5.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED]=O5.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED]=G5.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED]=Q5.bind(this),R5=void 0;},load:function(z){D5.call(this,z);},setVideoModel:function(z){this.videoModel=z;},initProtection:function(z){if(this.capabilities.supportsEncryptedMedia()){this.protectionModel=this.system.getObject("protectionModel"),this.protectionModel.init(this.getVideoModel()),this.protectionModel.setMediaElement(this.videoModel.getElement()),this.protectionController=this.system.getObject("protectionController"),this.protectionController.init(this.protectionModel),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,this);var W=(this.adapter.getMediaInfoForType(z,W5,"video"),this.adapter.getMediaInfoForType(z,W5,"audio")),Z=this.adapter.getMediaInfoForType(z,W5,"video"),K=Z?Z:W;this.protectionExt.getSupportedKeySystemsFromContentProtection(K.contentProtection),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,this);}},getVideoModel:function(){return this.videoModel;},setAutoPlay:function(W){var Z=function(z){J=z;};Z(W);},getAutoPlay:function(){return J;},reset:function(){Z5.call(this),this.protectionModel&&(this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,this),R5=void 0,this.protectionController.teardown(),this.protectionModel.teardown(),this.protectionController=void 0,this.protectionModel=void 0),q5.call(this),this.fragmentController&&this.fragmentController.reset(),this.fragmentController=void 0,this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,this),this.playbackController.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY,this),this.playbackController.reset(),this.liveEdgeFinder.abortSearch(),this.liveEdgeFinder.unsubscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,this.playbackController),I=!1,C={};},getDuration:function(){return W5.duration;},getStartTime:function(){return W5.start;},getStreamIndex:function(){return W5.index;},getId:function(){return W5.id;},setStreamInfo:function(W){var Z=function(z){W5=z;};Z(W);},getStreamInfo:function(){return W5;},hasMedia:function(z){return b9o.U00(null,J5.call(this,z));},getBitrateListFor:function(z){return this.abrController.getBitrateList(v[z]);},startEventController:function(){K5.start();},resetEventController:function(){K5.reset();},setPlaybackController:function(z){this.playbackController=z,z.initialize(W5,this.videoModel);},getPlaybackController:function(){return this.playbackController;},isUpdating:function(){return o5;},updateData:u5,disableTextTracks:d5,play:U,seek:p5,pause:Z5};},MediaPlayer.dependencies.Stream.prototype={constructor:MediaPlayer.dependencies.Stream},MediaPlayer.dependencies.Stream.DATA_UPDATE_FAILED_ERROR_CODE=1,MediaPlayer.dependencies.Stream.eventList={ENAME_STREAM_UPDATED:"streamUpdated"},MediaPlayer.dependencies.StreamProcessor=function(){"use strict";var D,F,Q,x,v,u=function(z){var W=this,Z=b9o.o40("video",z)||b9o.Z40("audio",z)||b9o.p40("fragmentedText",z)?"bufferController":"textController";return W.system.getObject(Z);};return {system:void 0,indexHandler:void 0,liveEdgeFinder:void 0,timelineConverter:void 0,abrController:void 0,baseURLExt:void 0,adapter:void 0,initialize:function(z,W,Z,K,R,N,M,P,A){var y,E=this,B=E.system.getObject("trackController"),G=E.system.getObject("scheduleController"),q=E.liveEdgeFinder,Y=E.abrController,O=E.indexHandler,V=E.baseURLExt,w=this.system.getObject("fragmentLoader"),H=u.call(E,z);F=M,x=z,v=P,D=F.getStreamInfo().manifestInfo.isDynamic,E.bufferController=H,E.playbackController=R,E.scheduleController=G,E.trackController=B,E.videoModel=Z,E.fragmentController=K,E.fragmentLoader=w,B.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,H),K.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED,H),b9o.P40("video",x)||b9o.r40("audio",x)||b9o.S40("fragmentedText",x)?(Y.subscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,H),Y.subscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,B),Y.subscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,G),q.subscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,this.timelineConverter),q.subscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,B),q.subscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,G),B.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED,G),B.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,G),B.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,F),F.subscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,G),R.streamProcessor||(R.streamProcessor=E,B.subscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,R)),K.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED,H),K.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADING_START,G),K.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,G),K.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,H),K.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,G.scheduleRulesCollection.bufferLevelRule),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,Z),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED,G),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,G),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,G),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,B),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,G),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_INIT_REQUESTED,G),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFERING_COMPLETED,F),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_QUOTA_EXCEEDED,G),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,G.scheduleRulesCollection.bufferLevelRule),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,G.scheduleRulesCollection.bufferLevelRule),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,R),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,H),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,H),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,H),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,G),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,H),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,G),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,G),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,G.scheduleRulesCollection.playbackTimeRule),D&&R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,B),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,H),R.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,G),V.subscribe(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,O),V.subscribe(Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED,O)):H.subscribe(MediaPlayer.dependencies.TextController.eventList.ENAME_CLOSED_CAPTIONING_REQUESTED,G),O.initialize(this),H.initialize(x,W,N,E,A),G.initialize(x,this),Y.initialize(x,this),y=this.getFragmentModel(),y.setLoader(w),y.subscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_STARTED,K),y.subscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,K),y.subscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_STREAM_COMPLETED,K),y.subscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,G),w.subscribe(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,y),(b9o.E40("video",x)||b9o.q40("audio",x)||b9o.J40("fragmentedText",x))&&(H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,y),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,y),H.subscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_REJECTED,y)),B.initialize(this);},isUpdating:function(){return this.trackController.isUpdating();},getType:function(){return x;},getFragmentLoader:function(){return this.fragmentLoader;},getFragmentModel:function(){return this.scheduleController.getFragmentModel();},getPlaybackController:function(){return this.playbackController;},getStreamInfo:function(){return F.getStreamInfo();},setMediaInfo:function(W){var Z=function(z){Q=z;};Z(W);},getMediaInfo:function(){return Q;},getScheduleController:function(){return this.scheduleController;},getEventController:function(){return v;},start:function(){this.scheduleController.start();},stop:function(){this.scheduleController.stop();},getCurrentTrack:function(){return this.adapter.getCurrentTrackInfo(this.trackController);},getTrackForQuality:function(z){return this.adapter.getTrackInfoForQuality(this.trackController,z);},isBufferingCompleted:function(){return this.bufferController.isBufferingCompleted();},isDynamic:function(){return D;},reset:function(z){var W=this,Z=W.bufferController,K=W.trackController,R=W.scheduleController,N=W.liveEdgeFinder,M=W.fragmentController,P=W.abrController,A=W.playbackController,y=this.indexHandler,E=this.baseURLExt,B=this.getFragmentModel(),G=this.fragmentLoader,q=W.videoModel;P.unsubscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,Z),P.unsubscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,K),P.unsubscribe(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,R),N.unsubscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,this.timelineConverter),N.unsubscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,R),N.unsubscribe(MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED,K),K.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED,R),K.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,Z),K.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,R),K.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,F),K.unsubscribe(Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED,A),F.unsubscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,R),M.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED,Z),M.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED,Z),M.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADING_START,R),M.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,R),M.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,Z),M.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,R.scheduleRulesCollection.bufferLevelRule),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,q),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED,R),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,R),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,R),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,K),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,R),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_INIT_REQUESTED,R),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFERING_COMPLETED,F),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_CLOSED_CAPTIONING_REQUESTED,R),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,R.scheduleRulesCollection.bufferLevelRule),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,R.scheduleRulesCollection.bufferLevelRule),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,A),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,Z),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,Z),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,Z),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED,R),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,Z),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,R),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,R),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,K),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,Z),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,R),A.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,R.scheduleRulesCollection.playbackTimeRule),E.unsubscribe(Dash.dependencies.BaseURLExtensions.eventList.ENAME_INITIALIZATION_LOADED,y),E.unsubscribe(Dash.dependencies.BaseURLExtensions.eventList.ENAME_SEGMENTS_LOADED,y),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,B),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,B),Z.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_REJECTED,B),B.unsubscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_STARTED,M),B.unsubscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,M),B.unsubscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_STREAM_COMPLETED,M),B.unsubscribe(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,R),G.unsubscribe(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED,B),B.reset(),y.reset(),this.bufferController.reset(z),this.scheduleController.reset(),this.bufferController=null,this.scheduleController=null,this.trackController=null,this.videoModel=null,this.fragmentController=null;}};},MediaPlayer.dependencies.StreamProcessor.prototype={constructor:MediaPlayer.dependencies.StreamProcessor},MediaPlayer.utils.TTMLParser=function(){"use strict";var q,Y=3600,O=60,V=/^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])((\.[0-9][0-9][0-9])|(:[0-9][0-9]))$/,w=function(z){var W,Z,K,R=V.test(z);if(!R)return b9o.H40(0,0);if(W=z.split(":"),Z=b9o.V40(parseFloat(W[0]),Y)+b9o.x40(parseFloat(W[1]),O)+parseFloat(W[2]),W[3]){if(K=q.tt._frameRate,!K||isNaN(K))return b9o.m40(0,0);Z+=b9o.X40(parseFloat(W[3]),K);}return Z;},H=function(){var z=!1,W=q.hasOwnProperty("tt"),Z=W?q.tt.hasOwnProperty("head"):!1,K=Z?q.tt.head.hasOwnProperty("layout"):!1,R=Z?q.tt.head.hasOwnProperty("styling"):!1,N=W?q.tt.hasOwnProperty("body"):!1,M=Z?q.tt.head.hasOwnProperty("profile"):!1;return W&&Z&&K&&R&&N&&(z=!0),z&&(z=M&&(b9o.g40("http://www.w3.org/ns/ttml/profile/sdp-us",q.tt.head.profile.use)||b9o.f40("http://www.w3.org/ns/ttml/profile/sdp-us",q.tt.head.profile._use))),z;},D=function(W,Z){var K=Object.keys(W).filter(function(z){return b9o.h40("xmlns",z.split(":")[0])&&b9o.C40(W[z],Z);}).map(function(z){return z.split(":")[1];});return b9o.W90(1,K.length)?null:K[0];},F=function(z){var W,Z,K,R,N,M,P,A,y,E=[],B=new X2JS([],"",!1);if(q=B.xml_str2json(z),!H())throw W="TTML document has incorrect structure";if(M=D(q.tt,"http://www.w3.org/ns/ttml#parameter"),q.tt.hasOwnProperty(M+":frameRate")&&(q.tt.frameRate=parseInt(q.tt[M+":frameRate"],10)),Z=q.tt.body.div.p,!Z||b9o.R90(0,Z.length))throw W="TTML document does not contain any cues";for(A=0;b9o.M90(A,Z.length);A+=1){if(K=Z[A],R=w(K._begin),N=w(K._end),isNaN(R)||isNaN(N))throw W="TTML document has incorrect timing value";if(void 0!==K["smpte:backgroundImage"]){var G=q.tt.head.metadata.image_asArray;for(y=0;b9o.b90(y,G.length);y+=1)b9o.i90("#"+G[y]["xml:id"],K["smpte:backgroundImage"])&&E.push({start:R,end:N,id:G[y]["xml:id"],data:"data:image/"+G[y].imagetype.toLowerCase()+";base64, "+G[y].__text,type:"image"});}else P=K.span_asArray?K.span_asArray[0].__text:K.__text,E.push({start:R,end:N,data:P,type:"text"});}return E;};return {parse:F};},MediaPlayer.dependencies.TextSourceBuffer=function(){var q,Y;return {system:void 0,eventBus:void 0,errHandler:void 0,initialize:function(z,W){Y=z,this.videoModel=W.videoModel,q=W.streamProcessor.getCurrentTrack().mediaInfo,this.buffered=this.system.getObject("customTimeRanges"),this.initializationSegmentReceived=!1,this.timescale=9e4;},append:function(W,Z){var K,R,N,M,P,A=this,y=this.system.getObject("clUtils"),E=y.B64Tools.decode(y.arrToBase64(W));if(b9o.T90("fragmentedText",Y)){var B;if(this.initializationSegmentReceived)for(B=A.system.getObject("fragmentExt"),M=B.getSamplesInfo(W.buffer),P=0;b9o.B90(P,M.length);P++){this.firstSubtitleStart||(this.firstSubtitleStart=b9o.G90(M[0].cts,Z.startTime*this.timescale)),M[P].cts-=this.firstSubtitleStart,this.buffered.add(b9o.O90(M[P].cts,this.timescale),b9o.Q90((M[P].cts+M[P].duration),this.timescale)),E=window.UTF8.decode(new Uint8Array(W.buffer.slice(M[P].offset,M[P].offset+M[P].size)));var G=this.system.getObject("ttmlParser");try{K=G.parse(E),this.textTrackExtensions.addCaptions(b9o.F90(this.firstSubtitleStart,this.timescale),K);}catch(z){}}else this.initializationSegmentReceived=!0,R=q.id,N=q.lang,this.textTrackExtensions=A.getTextTrackExtensions(),this.textTrackExtensions.addTextTrack(A.videoModel.getElement(),K,R,N,!0),A.eventBus.dispatchEvent({type:MediaPlayer.events.TEXT_TRACK_ADDED}),B=A.system.getObject("fragmentExt"),this.timescale=B.getMediaTimescaleFromMoov(W.buffer);}else{E=window.UTF8.decode(W);try{K=A.getParser().parse(E),R=q.id,N=q.lang,A.getTextTrackExtensions().addTextTrack(A.videoModel.getElement(),K,R,N,!0),A.eventBus.dispatchEvent({type:MediaPlayer.events.TEXT_TRACK_ADDED});}catch(z){A.errHandler.closedCaptionsError(z,"parse",E);}}},abort:function(){this.getTextTrackExtensions().deleteCues(this.videoModel.getElement());},getParser:function(){var z;return b9o.a90("text/vtt",Y)?z=this.system.getObject("vttParser"):b9o.v90("application/ttml+xml",Y)&&(z=this.system.getObject("ttmlParser")),z;},getTextTrackExtensions:function(){return this.system.getObject("textTrackExtensions");},addEventListener:function(z,W,Z){this.eventBus.addEventListener(z,W,Z);},removeEventListener:function(z,W,Z){this.eventBus.removeEventListener(z,W,Z);}};},MediaPlayer.dependencies.TextSourceBuffer.prototype={constructor:MediaPlayer.dependencies.TextSourceBuffer},MediaPlayer.dependencies.TimeSyncController=function(){"use strict";var q=5e3,Y=0,O=!1,V=!1,w=function(W){var Z=function(z){O=z;};Z(W);},H=function(){return O;},D=function(W){var Z=function(z){V=z;};Z(W);},F=function(W){var Z=function(z){Y=z;};Z(W);},Q=function(){return Y;},x=function(z){var W,Z,K=60,R=60,N=1e3,M=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,P=M.exec(z);return W=Date.UTC(parseInt(P[1],10),b9o.I90(parseInt(P[2],10),1),parseInt(P[3],10),parseInt(P[4],10),parseInt(P[5],10),P[6]&&(parseInt(P[6],10)||0),P[7]&&b9o.d90(parseFloat(P[7]),N)||0),P[9]&&P[10]&&(Z=b9o.t90(parseInt(P[9],10),R)+parseInt(P[10],10),W+=(b9o.L90("+",P[8])?-1:1)*Z*K*N),new Date(W).getTime();},v=function(z){var W=Date.parse(z);return isNaN(W)&&(W=x(z)),W;},u=function(z){return Date.parse(z);},J=function(z){return Date.parse(z);},L=function(z,W,Z){Z();},I=function(z,W,Z){var K=v(z);return isNaN(K)?void Z():void W(K);},X=function(Z,K,R,N,M){var P,A,y=!1,E=new XMLHttpRequest,B=M?"HEAD":"GET",G=K.match(/\S+/g);K=G.shift(),P=function(){y||(y=!0,G.length?X(Z,G.join(" "),R,N,M):N());},A=function(){var z,W;b9o.z5d(200,E.status)&&(z=M?E.getResponseHeader("Date"):E.response,W=Z(z),isNaN(W)||(R(W),y=!0));},E.open(B,K),E.timeout=q||0,E.onload=A,E.onloadend=P,E.send();},z5=function(z,W,Z){X.call(this,J,z,W,Z,!0);},o5={"urn:mpeg:dash:utc:http-head:2014":z5,"urn:mpeg:dash:utc:http-xsdate:2014":X.bind(null,v),"urn:mpeg:dash:utc:http-iso:2014":X.bind(null,u),"urn:mpeg:dash:utc:direct:2014":I,"urn:mpeg:dash:utc:http-head:2012":z5,"urn:mpeg:dash:utc:http-xsdate:2012":X.bind(null,v),"urn:mpeg:dash:utc:http-iso:2012":X.bind(null,u),"urn:mpeg:dash:utc:direct:2012":I,"urn:mpeg:dash:utc:http-ntp:2014":L,"urn:mpeg:dash:utc:ntp:2014":L,"urn:mpeg:dash:utc:sntp:2014":L},W5=function(K,R){var N=this,M=R||0,P=K[M],A=function(z,W){var Z=!z||!W;w(!1),N.notify(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,{time:z,offset:W},Z?new MediaPlayer.vo.Error(MediaPlayer.dependencies.TimeSyncController.TIME_SYNC_FAILED_ERROR_CODE):null);};w(!0),P?o5.hasOwnProperty(P.schemeIdUri)?o5[P.schemeIdUri](P.value,function(z){var W=(new Date).getTime(),Z=b9o.K5d(z,W);F(Z),N.log("Local time:      "+new Date(W)),N.log("Server time:     "+new Date(z)),N.log("Difference (ms): "+Z),A.call(N,z,Z);},function(){W5.call(N,K,M+1);}):W5.call(N,K,M+1):(F(0),A.call(N));};return {log:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,getOffsetToDeviceTimeMs:function(){return Q();},initialize:function(z){H()||(W5.call(this,z),D(!0));},reset:function(){D(!1),w(!1);}};},MediaPlayer.dependencies.TimeSyncController.prototype={constructor:MediaPlayer.dependencies.TimeSyncController},MediaPlayer.dependencies.TimeSyncController.eventList={ENAME_TIME_SYNCHRONIZATION_COMPLETED:"timeSynchronizationComplete"},MediaPlayer.dependencies.TimeSyncController.TIME_SYNC_FAILED_ERROR_CODE=1,MediaPlayer.utils.VTTParser=function(){"use strict";var y=/(?:\r\n|\r|\n)/gm,E=/-->/,B=/(^[\s]+|[\s]+$)/g,G=/\s\b/g,q=function(z){var W=z.split(":"),Z=b9o.N5d(W.length,1);return z=b9o.j5d(60,parseInt(W[Z-1],10))+parseFloat(W[Z]),b9o.y5d(2,Z)&&(z+=b9o.A5d(3600,parseInt(W[0],10))),z;},Y=function(z){var W=z.split(E),Z=W[1].split(G);return Z.shift(),W[1]=Z[0],Z.shift(),{cuePoints:W,styles:O(Z)};},O=function(W){var Z={};return W.forEach(function(z){(z.match(/align/)||z.match(/A/))&&(Z.align=z.split(/:/)[1]),(z.match(/line/)||z.match(/L/))&&(Z.line=z.split(/:/)[1].replace(/%/,"")),(z.match(/position/)||z.match(/P/))&&(Z.position=z.split(/:/)[1].replace(/%/,"")),(z.match(/size/)||z.match(/S/))&&(Z.size=z.split(/:/)[1].replace(/%/,""));}),Z;},V=function(W,Z){var K=function(z){M=z[Z];};for(var R,N=Z,M="";b9o.Y5d("",W[N])&&b9o.l5d(N,W.length);)N++;if(R=b9o.n5d(N,Z),b9o.c5d(R,1))for(var P=0;b9o.k5d(R,P);P++)M+=W[Z+P],b9o.D5d(P,R-1)&&(M+="\n");else K(W);return M;};return {parse:function(z){var W,Z=[];z=z.split(y),W=z.length;for(var K=0;b9o.w5d(W,K);K++){var R=z[K];if(b9o.u5d(R.length,0)&&b9o.s5d("WEBVTT",R)&&R.match(E)){var N=Y(R),M=N.cuePoints,P=N.styles,A=V(z,K+1);Z.push({start:q(M[0].replace(B,"")),end:q(M[1].replace(B,"")),data:A,styles:P});}}return Z;}};},MediaPlayer.dependencies.AbrController=function(){"use strict";var q=!0,Y={},O={},V={},w={},H={},D=[],F=-1,Q=function(z,W){var Z;return O[W]=O[W]||{},O[W].hasOwnProperty(z)||(O[W][z]=0),Z=O[W][z];},x=function(z,W,Z){O[W]=O[W]||{},O[W][z]=Z;},v=function(z,W){var Z;return V[W]=V[W]||{},V[W].hasOwnProperty(z)||(V[W][z]=0),Z=V[W][z];},u=function(z,W,Z){V[W]=V[W]||{},V[W][z]=Z;},J=function(z,W,Z){Y[W]=Y[W]||{},Y[W][z]=Z;},L=function(z){return w[z];},I=function(W,Z){var K=function(z){w[W]=z;};K(Z);},X=function(z){return w.hasOwnProperty("max")&&w.max.hasOwnProperty(z)?w.max[z]:b9o.e5d(0,0);},z5=function(z,W){w.max=w.max||{},w.max[z]=W;},o5=function(z,W){var Z;return Y[W]=Y[W]||{},Y[W].hasOwnProperty(z)||(Y[W][z]=0),Z=W5.call(this,Y[W][z],z);},W5=function(z,W){var Z=X(W);if(isNaN(Z))return z;var K=this.getQualityForBitrate(H[W].getMediaInfo(),Z);return Math.min(z,K);};return {log:void 0,abrRulesCollection:void 0,rulesController:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,initialize:function(z,W){H[z]=W,D.audio=!0,D.video=!0;},getAutoSwitchBitrate:function(){return q;},setAutoSwitchBitrate:function(W){var Z=function(z){q=z;};Z(W);},getPlaybackQuality:function(Z){var K,R,N,M,P,A=this,y=Z.getType(),E=Z.getStreamInfo().id,B=function(z){var W=o5.call(A,y,E);K=z.value,M=z.confidence,b9o.U5d(0,K)&&(K=0),b9o.o3d(K,W)&&(K=W),R=Q(y,E),b9o.Z3d(K,R)&&(D[y]=!1,x(y,E,K),u(y,E,M),A.notify(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,{mediaType:y,streamInfo:Z.getStreamInfo(),oldQuality:R,newQuality:K}));};if(K=Q(y,E),M=v(y,E),q){if(b9o.p3d(CL.manifest.ABRParameters.qualitySwitchThreshold,0)){var G=function(z){F=z;};if(P=(new Date).getTime(),b9o.P3d(P-F,CL.manifest.ABRParameters.qualitySwitchThreshold))return ;G(P);}D[y]!==!1&&(N=A.abrRulesCollection.getRules(MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES),A.rulesController.applyRules(N,Z,B.bind(A),K,function(z,W){return z=b9o.r3d(z,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)?0:z,Math.max(z,W);}));}},setPlaybackQuality:function(z,W,Z){var K=W.id,R=Q(z,K),N=b9o.S3d(null,Z)&&!isNaN(Z)&&b9o.E3d(Z%1,0);if(!N)throw "argument is not an integer";D[z]!==!1&&D[z]===!0&&b9o.q3d(Z,R)&&b9o.J3d(Z,0)&&b9o.H3d(Z,o5.call(this,z,K))&&(D[z]=!1,x(z,W.id,Z),this.notify(MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED,{mediaType:z,streamInfo:W,oldQuality:R,newQuality:Z}));},setQualitySwitchAllowed:function(W,Z){var K=function(z){D[W]=z;};K(Z);},getQualitySwitchAllowed:function(z){return D[z];},getQualityFor:function(z,W){return Q(z,W.id);},getConfidenceFor:function(z,W){return v(z,W.id);},setInitialBitrateFor:function(z,W){I(z,W);},getInitialBitrateFor:function(z){return L(z);},setMaxAllowedBitrateFor:function(z,W){z5(z,W);},getMaxAllowedBitrateFor:function(z){return X(z);},getQualityForBitrate:function(z,W){for(var Z,K=this.getBitrateList(z),R=K.length,N=0;b9o.V3d(R,N);N+=1)if(Z=K[N],b9o.x3d(1e3*W,Z.bitrate))return N;return b9o.m3d(R,1);},getBitrateList:function(z){if(!z||!z.bitrateList)return null;for(var W,Z=z.bitrateList,K=z.type,R=[],N=0,M=Z.length;b9o.X3d(M,N);N+=1)W=new MediaPlayer.vo.BitrateInfo,W.mediaType=K,W.qualityIndex=N,W.bitrate=Z[N],R.push(W);return R;},updateTopQualityIndex:function(z){var W,Z=z.type,K=z.streamInfo.id;return W=b9o.g3d(z.trackCount,1),J(Z,K,W),W;},isPlayingAtTopQuality:function(z){var W,Z=this,K=z.id,R=Z.getQualityFor("audio",z),N=Z.getQualityFor("video",z);return W=b9o.f3d(R,o5.call(this,"audio",K))&&b9o.h3d(N,o5.call(this,"video",K));},getTopQualityIndexFor:o5,reset:function(){q=!0,Y={},O={},V={},H={},D.audio=!0,D.video=!0;}};},MediaPlayer.dependencies.AbrController.prototype={constructor:MediaPlayer.dependencies.AbrController},MediaPlayer.dependencies.AbrController.eventList={ENAME_QUALITY_CHANGED:"qualityChanged"},MediaPlayer.dependencies.AbrController.DEFAULT_VIDEO_BITRATE=1e3,MediaPlayer.dependencies.AbrController.DEFAULT_AUDIO_BITRATE=100,MediaPlayer.dependencies.BufferController=function(){"use strict";var Q,x,v,u,J=.5,L=[],I=0,X=-1,z5=!1,o5=0,W5=0,C=Number.POSITIVE_INFINITY,K5=-1,U=-1,Z5=null,p5=null,N5=!1,R5=!1,b5=[],j5=!1,T5=!1,S5=function(){var z=this.streamProcessor.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING});return T5===!0?!1:b9o.C3d(X,I)&&(Y5(b5,X)||Y5(z,X))?!0:!(b9o.W2d(X,I));},Y5=function(z,W){var Z=0,K=z.length;for(Z;b9o.R2d(K,Z);Z+=1)if(b9o.M2d(z[Z].quality,W))return !0;return !1;},O5=function(Z,K){var R=function(z,W){return b9o.b2d(z[K],W[K])?-1:b9o.i2d(z[K],W[K])?1:0;};Z.sort(R);},k5=function(z){var W=this;b9o.T2d(z.data.fragmentModel,W.streamProcessor.getFragmentModel())&&(W.log("Initialization finished loading: "+x),L[z.data.quality]=z.data.bytes,b9o.B2d(z.data.quality,I)&&S5.call(W)&&C5.call(W));},V5=function(z){if(b9o.G2d(z.data.fragmentModel,this.streamProcessor.getFragmentModel())){var W,Z=z.data.bytes,K=z.data.quality,R=z.data.index,N=z.data.startTime,M=this.streamProcessor.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED,quality:K,index:R})[0],P=this.streamProcessor.getTrackForQuality(K),A=this.adapter.getEventsFor(P.mediaInfo,this.streamProcessor),y=this.adapter.getEventsFor(P,this.streamProcessor);(b9o.O2d(A.length,0)||b9o.Q2d(y.length,0))&&(W=A5.call(this,Z,M,A,y),this.streamProcessor.getEventController().addInbandEvents(W)),Z=q5.call(this,Z);var E=b9o.F2d(N,M.timescale),z=b9o.a2d(E,1);b9o.v2d(z,0)&&(b9o.I2d(z,.99)?E+=b9o.d2d(1,z):b9o.t2d(.01,z)&&(E-=z)),b5.push({bytes:Z,quality:K,index:R,startTimeInTimescale:E,startTime:N}),O5(b5,"index"),CL.configs.lastAppendedSegment[x]=M,u5.call(this);}},G5=function(W,Z,K,R,N){if(void 0===N)var N=null;R5=!0,u={quality:Z,index:K,startTime:R};var M=this,P=isNaN(K);if(b9o.L2d(Z,I)&&P||b9o.z8d(Z,X)&&!P)return void R3.call(M,Z,K);var A=M.utils,y=A.getBoxType(W);if(CL.manifest.enableSmoothStreamingCompatibility===!0&&(CL.manifest.parseMoofFragments=!0),CL.configs.isSmoothStreaming===!0&&(b9o.K8d("moof",y)||CL.manifest.parseMoofFragments===!0)){var E=this.streamProcessor.getTrackForQuality(Z);W=A.parseSmoothStreamingFragment(E,W,x,N);}if(b9o.N8d("ftyp",y)&&CL.manifest.generatePSSH===!0&&(CL.configs.debug&&console.log(A.byteArrayToHexString(W)),W=A.getSubBox(W,"moov"),y=A.getBoxType(W)),b9o.j8d("moov",y)&&CL.manifest.generatePSSH===!0){var B=A.generatePSSHBox(M.contentProtectionData);W=A.injectPSSHBox(W,B);}if(b9o.y8d("moov",y)&&CL.configs.isIE11===!0&&CL.configs.isProtected===!0&&(W=A.filterUUIDBox(W)),P===!0){var M=this,G=function(){var z=M.streamProcessor.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING});return Y5(b5,X)||Y5(z,X)?!0:!1;},q=u,Y=setInterval(function(){return b9o.A8d(null,M.streamProcessor)||b9o.Y8d(null,M.streamProcessor.bufferController)||b9o.l8d(null,M.streamProcessor.fragmentController)||b9o.n8d(null,M.streamProcessor.trackController)||b9o.c8d(null,M.streamProcessor.videoModel)?void clearInterval(Y):void (G()?R5=!1:(R5=!0,clearInterval(Y),u=q,CL.configs.debug&&b9o.k8d("video",M.getMediaType())&&console.log("Append init for quality "+Z),M.sourceBufferExt.append(Z5,W,q)));},100);return void (T5=!0);}CL.configs.debug&&b9o.D8d("video",M.getMediaType())&&console.log("Append data for quality "+Z),M.sourceBufferExt.append(Z5,W,u);},Q5=function(z){if(b9o.w8d(Z5,z.data.buffer)){this.isBufferingCompleted()&&this.streamProcessor.getStreamInfo().isLast&&this.mediaSourceExt.signalEndOfStream(Q);var W,Z=this;if(z.error)return b9o.u8d(z.error.code,MediaPlayer.dependencies.SourceBufferExtensions.QUOTA_EXCEEDED_ERROR_CODE)&&(b5.unshift({bytes:z.data.bytes,quality:u.quality,index:u.index}),C=b9o.s8d(.8,J5.call(Z)),Z.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_QUOTA_EXCEEDED,{criticalBufferLevel:C}),H5.call(Z)),void (R5=!1);if(B5.call(Z),i5.call(Z)||(Z.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_QUOTA_EXCEEDED,{criticalBufferLevel:C}),H5.call(Z)),W=Z.sourceBufferExt.getAllRanges(Z5),W&&b9o.e8d(W.length,0)){var K,R;for(Z.log("Number of buffered "+x+" ranges: "+W.length),K=0,R=W.length;b9o.U8d(R,K);K+=1){Z.log("Buffered "+x+" Range: "+W.start(K)+" - "+W.end(K));var N=Z.streamProcessor.videoModel;b9o.o1d(null,CL.configs.minStartTime)&&b9o.Z1d(CL.configs.minStartTime,0)&&b9o.p1d(0,N.getCurrentTime())&&b9o.P1d(0,CL.configs.isIE11)&&N.setCurrentTime(CL.configs.minStartTime);}}h5.call(Z,u.quality,u.index),Z.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED,{quality:u.quality,index:u.index,bufferedRanges:W});}},B5=function(){var z=this,W=z.playbackController.getTime();return this.playbackController.getTimeToStreamEnd(),o5=z.sourceBufferExt.getBufferLength(Z5,W),z.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED,{bufferLevel:o5}),n5.call(z),D5.call(z),CL.configs.debug&&b9o.r1d("video",z.getMediaType())&&console.log("BufferLevel: "+z.getMediaType()+" :"+o5),b9o.S1d(J,o5)&&!z5&&l5.call(z,!1),!0;},A5=function(W,Z,K,R){var N=function(z){O[y[V].schemeIdUri]=z[V];},M,P,A,y,E=[],B=0,G=Math.pow(256,2),q=Math.pow(256,3),Y=Math.max(isNaN(Z.startTime)?0:Z.startTime,0),O=[];j5=!1,y=K.concat(R);for(var V=0;b9o.E1d(V,y.length);V++)N(y);for(;b9o.q1d(B,W.length)&&(M=String.fromCharCode(W[B+4],W[B+5],W[B+6],W[B+7]),P=b9o.J1d(W[B],q)+b9o.H1d(W[B+1],G)+b9o.V1d(256,W[B+2])+b9o.x1d(1,W[B+3]),b9o.m1d("moov",M)&&b9o.X1d("moof",M));){if(b9o.g1d("emsg",M)){var w=function(){j5=!0;};w();for(var H=["","",0,0,0,0,""],D=0,F=B+12;b9o.f1d(P+B,F);)b9o.h1d(0,D)||b9o.C1d(1,D)||b9o.W6d(6,D)?(b9o.R6d(0,W[F])?H[D]+=String.fromCharCode(W[F]):D+=1,F+=1):(H[D]=b9o.M6d(W[F],q)+b9o.b6d(W[F+1],G)+b9o.i6d(256,W[F+2])+b9o.T6d(1,W[F+3]),F+=4,D+=1);A=this.adapter.getEvent(H,O,Y),A&&E.push(A);}B+=P;}return E;},q5=function(z){if(!j5)return z;for(var W,Z,K=z.length,R=0,N=0,M=Math.pow(256,2),P=Math.pow(256,3),A=new Uint8Array(z.length);b9o.B6d(K,R);){if(W=String.fromCharCode(z[R+4],z[R+5],z[R+6],z[R+7]),Z=b9o.G6d(z[R],P)+b9o.O6d(z[R+1],M)+b9o.Q6d(256,z[R+2])+b9o.F6d(1,z[R+3]),b9o.a6d("emsg",W))for(var y=R;b9o.v6d(R+Z,y);y++)A[N]=z[y],N+=1;R+=Z;}return A.subarray(0,N);},n5=function(){var z=w5.call(this),W=b9o.I6d(2,v),Z=b9o.d6d(o5,z);b9o.t6d(Z,W)&&!N5?(N5=!0,this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN)):b9o.L6d(W/2,Z)&&N5&&(this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED),N5=!1,u5.call(this));},w5=function(){var z=this.metricsModel.getReadOnlyMetricsFor("video"),W=this.metricsExt.getCurrentBufferLevel(z),Z=this.metricsModel.getReadOnlyMetricsFor("audio"),K=this.metricsExt.getCurrentBufferLevel(Z),R=null;return R=b9o.z7d(null,W)||b9o.K7d(null,K)?b9o.N7d(null,K)?K.level:b9o.j7d(null,W)?W.level:null:Math.min(K.level,W.level);},i5=function(){var z=this,W=J5.call(z);return b9o.y7d(C,W);},H5=function(){var z,W,Z,K,R,N=this;Z5&&(z=N.playbackController.getTime(),R=N.streamProcessor.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED,time:z})[0],Z=R&&!isNaN(R.startTime)?R.startTime:Math.floor(z),K=N.sourceBufferExt.getBufferRange(Z5,z),b9o.A7d(null,K)&&b9o.Y7d(Z5.buffered.length,0)&&(Z=Z5.buffered.end(b9o.l7d(Z5.buffered.length,1))),W=Z5.buffered.start(0),N.sourceBufferExt.remove(Z5,W,Z,Q));},F5=function(z){var W,Z=this,K=(Z.playbackController.getTime(),z);Z5&&(K=z,W=0,CL.configs.debug&&console.log("clear buffered audio from "+W+" to "+K),Z.sourceBufferExt.waitForUpdateEnd(Z5,function(){Z.sourceBufferExt.remove(Z5,W,K,Q);}));},x5=function(z){b9o.n7d(Z5,z.data.buffer)&&(B5.call(this),this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED,{from:z.data.from,to:z.data.to,hasEnoughSpaceToAppend:i5.call(this)}),i5.call(this)||setTimeout(H5.bind(this),b9o.c7d(1e3,v)));},J5=function(){var z,W,Z=this,K=Z.sourceBufferExt.getAllRanges(Z5),R=0;if(!K)return R;for(W=0,z=K.length;b9o.k7d(z,W);W+=1)R+=b9o.D7d(K.end(W),K.start(W));return R;},y5=function(){var z=b9o.w7d(K5,U-1);z&&!z5&&(z5=!0,this.streamProcessor.abrController.setAutoSwitchBitrate(!1),this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFERING_COMPLETED));},D5=function(){var z=this.playbackController.getTimeToStreamEnd();this.streamProcessor.isDynamic()?b9o.u7d(v,2):v,b9o.s7d(J,o5)&&(b9o.e7d(z,v)&&!z5||b9o.U7d(v,z))?b9o.o0d(v,z)||l5.call(this,!1):l5.call(this,!0);},E5=function(){return p5?MediaPlayer.dependencies.BufferController.BUFFER_LOADED:MediaPlayer.dependencies.BufferController.BUFFER_EMPTY;},l5=function(W){if(b9o.Z0d(p5,W)){var Z=function(z){p5=z;};Z(W);var K=E5(),R=b9o.p0d(K,MediaPlayer.dependencies.BufferController.BUFFER_LOADED)?MediaPlayer.events.BUFFER_LOADED:MediaPlayer.events.BUFFER_EMPTY;this.metricsModel.addBufferState(x,K,W5),this.eventBus.dispatchEvent({type:R,data:{bufferType:x}}),this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED,{hasSufficientBuffer:W}),this.log(p5?"Got enough buffer to start.":"Waiting for more buffer before starting playback.");}},m5=function(z){b9o.P0d(Z5.timestampOffset,z)||isNaN(z)||(Z5.timestampOffset=z);},d5=function(){var z=this,W=this.streamProcessor.getScheduleController().getFragmentToLoadCount(),Z=this.streamProcessor.getCurrentTrack().fragmentDuration;B5.call(z),W5=b9o.r0d(W,0)?b9o.S0d(W,Z)+o5:W5,this.metricsModel.addBufferState(x,E5(),W5),u5.call(z);},u5=function(){S5.call(this)?C5.call(this):f5.call(this);},h5=function(z,W){R5=!1,isNaN(W)?z3.call(this,z):W3.call(this,W),u5.call(this);},R3=function(z,W){R5=!1,this.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_REJECTED,{quality:z,index:W}),u5.call(this);},z3=function(z){X=z,T5=!1,this.streamProcessor.abrController.setQualitySwitchAllowed(x,!0);},W3=function(z){K5=Math.max(z,K5),y5.call(this);},f5=function(){var z;return b9o.E0d(0,b5.length)||N5||R5||S5.call(this)||!i5.call(this)?void 0:(z=b5.shift(),T5===!0&&b9o.q0d(z.quality,X)?void b5.push(z):void G5.call(this,z.bytes,z.quality,z.index,z.startTime,z.startTimeInTimescale));},p3=function(z){if(!z.error){var W,Z=this;m5.call(Z,z.data.currentRepresentation.MSETimeOffset),W=Z.streamProcessor.getStreamInfo().manifestInfo.minBufferTime,CL.manifest.ignoreManifestBufferSettings===!0&&(W=b9o.J0d(MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME,2)),CL.configs.debug&&console.log("Min Buffer time: "+W),b9o.H0d(v,W)&&(Z.setMinBufferTime(W),Z.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_MIN_BUFFER_TIME_UPDATED,{minBufferTime:W}));}},y3=function(z){var W=this;b9o.V0d(z.data.fragmentModel,W.streamProcessor.getFragmentModel())&&(U=z.data.request.index,y5.call(W));},$=function(z){if(b9o.x0d(x,z.data.mediaType)&&b9o.m0d(this.streamProcessor.getStreamInfo().id,z.data.streamInfo.id)){var W=this,Z=z.data.newQuality;b9o.X0d(I,Z)&&(m5.call(W,W.streamProcessor.getTrackForQuality(Z).MSETimeOffset),I=Z,S5.call(W)||C5.call(W));}},C5=function(){var z=this;if(L[I]){if(R5)return ;G5.call(z,L[I],I);}else z.notify(MediaPlayer.dependencies.BufferController.eventList.ENAME_INIT_REQUESTED,{requiredQuality:I});},A3=function(){u5.call(this);},T3=function(){D5.call(this);};return {sourceBufferExt:void 0,eventBus:void 0,bufferMax:void 0,mediaSourceExt:void 0,metricsModel:void 0,metricsExt:void 0,adapter:void 0,log:void 0,system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=p3,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED]=k5,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED]=V5,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED]=y3,this[MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED]=$,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS]=d5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING]=d5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED]=d5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED]=T3,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED]=A3,Q5=Q5.bind(this),x5=x5.bind(this),this.sourceBufferExt.subscribe(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_APPEND_COMPLETED,this,Q5),this.sourceBufferExt.subscribe(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED,this,x5);},initialize:function(z,W,Z,K,R){var N=this;N.utils=this.system.getObject("clUtils"),x=z,N.setMediaType(x),N.setMediaSource(Z),N.setBuffer(W),N.streamProcessor=K,N.fragmentController=K.fragmentController,N.scheduleController=K.scheduleController,N.playbackController=K.playbackController,N.contentProtectionData=R;},getStreamProcessor:function(){return this.streamProcessor;},setStreamProcessor:function(z){this.streamProcessor=z;},getBuffer:function(){return Z5;},setBuffer:function(W){var Z=function(z){Z5=z;};Z(W);},getBufferLevel:function(){return o5;},getMinBufferTime:function(){return v;},setMinBufferTime:function(W){var Z=function(z){v=z;};Z(W);},getCriticalBufferLevel:function(){return C;},setMediaSource:function(W){var Z=function(z){Q=z;};Z(W);},isBufferingCompleted:function(){return z5;},isInitPending:function(){return T5;},reset:function(z){var W=this;L=[],C=Number.POSITIVE_INFINITY,p5=null,v=null,X=-1,I=0,W.sourceBufferExt.unsubscribe(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_APPEND_COMPLETED,W,Q5),W.sourceBufferExt.unsubscribe(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED,W,x5),u=null,N5=!1,R5=!1,b5=[],z||(W.sourceBufferExt.abort(Q,Z5),W.sourceBufferExt.removeSourceBuffer(Q,Z5)),Z5=null;},clearFutureBuffer:F5,setAudioTrack:function(W){CL.configs.debug&&console.log("CL: Switch audio track request");var Z=this,K=Z.manifestModel.getValue();Z.manifestExt.getAudioDatas(K,periodInfo.index).then(function(z){b9o.g0d(W,z.length)?(z[W],CL.configs.debug&&console.log("CL: Switching to audio track #"+W),dataChanged=!0,F5.call(Z)):CL.configs.debug&&console.log("CL: Abort switching audio track. Selected track ()"+W+" doesn't exist.");});}};},MediaPlayer.dependencies.BufferController.BUFFER_SIZE_REQUIRED="required",MediaPlayer.dependencies.BufferController.BUFFER_SIZE_MIN="min",MediaPlayer.dependencies.BufferController.BUFFER_SIZE_INFINITY="infinity",MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME=8,MediaPlayer.dependencies.BufferController.LOW_BUFFER_THRESHOLD=4,MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY=20,MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY_LONG_FORM=25,MediaPlayer.dependencies.BufferController.LONG_FORM_CONTENT_DURATION_THRESHOLD=600,MediaPlayer.dependencies.BufferController.RICH_BUFFER_THRESHOLD=20,MediaPlayer.dependencies.BufferController.BUFFER_LOADED="bufferLoaded",MediaPlayer.dependencies.BufferController.BUFFER_EMPTY="bufferStalled",MediaPlayer.dependencies.BufferController.prototype={constructor:MediaPlayer.dependencies.BufferController},MediaPlayer.dependencies.BufferController.eventList={ENAME_BUFFER_LEVEL_STATE_CHANGED:"bufferLevelStateChanged",ENAME_BUFFER_LEVEL_UPDATED:"bufferLevelUpdated",ENAME_QUOTA_EXCEEDED:"quotaExceeded",ENAME_BYTES_APPENDED:"bytesAppended",ENAME_BYTES_REJECTED:"bytesRejected",ENAME_BUFFERING_COMPLETED:"bufferingCompleted",ENAME_BUFFER_CLEARED:"bufferCleared",ENAME_INIT_REQUESTED:"initRequested",ENAME_BUFFER_LEVEL_OUTRUN:"bufferLevelOutrun",ENAME_BUFFER_LEVEL_BALANCED:"bufferLevelBalanced",ENAME_MIN_BUFFER_TIME_UPDATED:"minBufferTimeUpdated"},MediaPlayer.dependencies.EventController=function(){"use strict";var M=[],P=[],A=[],y=null,E=100,B=b9o.f0d(E,1e3),G="urn:mpeg:dash:event:2012",q=1,Y=function(){O(),M=null,P=null,A=null;},O=function(){b9o.h0d(null,y)&&(clearInterval(y),y=null);},V=function(){var z=this;z.log("Start Event Controller"),isNaN(E)||(y=setInterval(D.bind(this),E));},w=function(z){var W=this;M=[],z&&b9o.C0d(z.length,0)&&(M=z),W.log("Added "+z.length+" inline events");},H=function(z){for(var W=this,Z=0;b9o.W4d(Z,z.length);Z++){var K=z[Z];P[K.id]=K,W.log("Add inband event with id "+K.id);}},D=function(){F.call(this,P),F.call(this,M),Q.call(this);},F=function(z){var W,Z=this,K=this.videoModel.getCurrentTime();if(z)for(var R=0;b9o.R4d(R,z.length);R++){var N=z[R];void 0!==N&&(W=b9o.M4d(N.presentationTime,N.eventStream.timescale),(b9o.b4d(0,W)||b9o.i4d(K,W)&&b9o.T4d(W+B,K))&&(Z.log("Start Event at "+K),b9o.B4d(N.duration,0)&&A.push(N),b9o.G4d(N.eventStream.schemeIdUri,G)&&b9o.O4d(N.eventStream.value,q)&&x.call(this),z.splice(R,1)));}},Q=function(){var z=this;if(A)for(var W=this.videoModel.getCurrentTime(),Z=0;b9o.Q4d(Z,A.length);Z++){var K=A[Z];b9o.F4d(null,K)&&b9o.a4d((K.duration+K.presentationTime)/K.eventStream.timescale,W)&&(z.log("Remove Event at time "+W),K=null,A.splice(Z,1));}},x=function(){var z=this,W=z.manifestModel.getValue(),Z=W.url;W.hasOwnProperty("Location")&&(Z=W.Location),z.log("Refresh manifest @ "+Z),z.manifestLoader.load(Z);};return {manifestModel:void 0,manifestLoader:void 0,log:void 0,system:void 0,addInlineEvents:w,addInbandEvents:H,reset:Y,clear:O,start:V,getVideoModel:function(){return this.videoModel;},setVideoModel:function(z){this.videoModel=z;},initialize:function(z){this.setVideoModel(z);}};},MediaPlayer.dependencies.EventController.prototype={constructor:MediaPlayer.dependencies.EventController},MediaPlayer.dependencies.FragmentController=function(){"use strict";var A=[],y=!1,E=function(z){for(var W=A.length,Z=0;b9o.v4d(W,Z);Z++)if(b9o.I4d(A[Z].getContext(),z))return A[Z];return null;},B=function(Z,K){var R=this,N=A[0].getContext().streamProcessor,M=N.getStreamInfo().id,P=R.scheduleRulesCollection.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_EXECUTE_RULES);-1!==P.indexOf(this.scheduleRulesCollection.sameTimeRequestRule)&&this.scheduleRulesCollection.sameTimeRequestRule.setFragmentModels(A,M),R.rulesController.applyRules(P,N,K,Z,function(z,W){return W;});},G=function(z){var W=this,Z=z.data.request;W.isInitializationRequest(Z)?W.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADING_START,{request:Z,fragmentModel:z.sender}):W.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADING_START,{request:Z,fragmentModel:z.sender});},q=function(z){var W=this,Z=z.data.request,K=W.process(z.data.response);if(b9o.d4d(null,K))return void W.log("No "+Z.mediaType+" bytes to push.");if(W.isInitializationRequest(Z)){if(-1==Z.range){var R=new Uint8Array(8);R[0]=0,R[1]=0,R[2]=2,R[3]=182,R[4]=109,R[5]=111,R[6]=111,R[7]=118,K=R;}W.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED,{bytes:K,quality:Z.quality,fragmentModel:z.sender});}else W.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADED,{bytes:K,quality:Z.quality,index:Z.index,startTime:Z.startTime,fragmentModel:z.sender});w.call(this);},Y=function(z){this.notify(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,{request:z.data.request,fragmentModel:z.sender});},O=function(){w.call(this);},V=function(z){var W=function(){y=!1;},Z,K,R,N,M,P=z.value;for(N=0;b9o.t4d(N,P.length);N+=1)if(K=P[N])for(M=0;b9o.L4d(M,A.length);M+=1)R=A[M],Z=R.getContext().streamProcessor.getType(),b9o.z9d(K.mediaType,Z)&&(b9o.K9d(K,MediaPlayer.vo.FragmentRequest)||(K=R.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING,time:K.startTime})[0]),R.executeRequest(K));W();},w=function(z){y||(y=!0,B.call(this,z,V.bind(this)));};return {system:void 0,log:void 0,scheduleRulesCollection:void 0,rulesController:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_STARTED]=G,this[MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED]=q,this[MediaPlayer.dependencies.FragmentModel.eventList.ENAME_STREAM_COMPLETED]=Y,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED]=O,this.scheduleRulesCollection.sameTimeRequestRule&&this.subscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,this.scheduleRulesCollection.sameTimeRequestRule);},process:function(z){var W=null;return b9o.N9d(null,z)&&void 0!==z&&b9o.j9d(z.byteLength,0)&&(W=new Uint8Array(z)),W;},getModel:function(z){if(!z)return null;var W=E(z);return W||(W=this.system.getObject("fragmentModel"),W.setContext(z),A.push(W)),W;},detachModel:function(z){var W=A.indexOf(z);W>-1&&A.splice(W,1);},isInitializationRequest:function(z){return z&&z.type&&-1!==z.type.toLowerCase().indexOf("initialization");},prepareFragmentForLoading:function(z,W){z&&W&&z.addRequest(W)&&w.call(this,W);},executePendingRequests:function(){w.call(this);},reset:function(){A=[],this.scheduleRulesCollection.sameTimeRequestRule&&this.unsubscribe(MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED,this.scheduleRulesCollection.sameTimeRequestRule);}};},MediaPlayer.dependencies.FragmentController.prototype={constructor:MediaPlayer.dependencies.FragmentController},MediaPlayer.dependencies.FragmentController.eventList={ENAME_STREAM_COMPLETED:"streamCompleted",ENAME_INIT_FRAGMENT_LOADING_START:"initFragmentLoadingStart",ENAME_MEDIA_FRAGMENT_LOADING_START:"mediaFragmentLoadingStart",ENAME_INIT_FRAGMENT_LOADED:"initFragmentLoaded",ENAME_MEDIA_FRAGMENT_LOADED:"mediaFragmentLoaded"},MediaPlayer.dependencies.PlaybackController=function(){"use strict";var A,y,E,B=1e3,G=0,q=b9o.y9d(0,0),Y=null,O={},V={},w=function(z){var W,Z=parseInt(this.uriQueryFragModel.getURIFragmentData().s);return E?(!isNaN(Z)&&b9o.A9d(Z,1262304e3)&&(W=b9o.Y9d(Z,z.manifestInfo.availableFrom.getTime()/1e3),(b9o.l9d(W,q)||b9o.n9d(W,q-z.manifestInfo.DVRWindowSize))&&(W=null)),W=W||q):W=!isNaN(Z)&&b9o.c9d(Z,z.duration)&&b9o.k9d(Z,0)?Z:z.start,W;},H=function(z){var W,Z=this,K=Z.metricsModel.getReadOnlyMetricsFor("video")||Z.metricsModel.getReadOnlyMetricsFor("audio"),R=Z.metricsExt.getCurrentDVRInfo(K),N=R?R.range:null;return N?b9o.D9d(z,N.start)&&b9o.w9d(z,N.end)?z:W=Math.max(b9o.u9d(N.end,2*A.manifestInfo.minBufferTime),N.start):b9o.s9d(0,0);},D=function(){if(b9o.e9d(null,Y)){var z=this,W=function(){R5.call(z);};Y=setInterval(W,B);}},F=function(){clearInterval(Y),Y=null;},Q=function(){var z=w.call(this,A);z=Math.max(z,CL.configs.minStartTime),CL.configs.minStartTime=z,b9o.U9d(null,CL.configs.initialStartTime)||isNaN(CL.configs.initialStartTime)||(z=Math.max(z,CL.configs.initialStartTime),CL.configs.initialStartTime=null),this.log("Starting playback at offset: "+z),this.seek(z);},x=function(){if(!this.isPaused()&&E){var z=this.getTime(),W=H.call(this,z);!isNaN(W)&&b9o.o5y(W,z);}},v=function(z){if(!z.error){var W=this.adapter.convertDataToTrack(z.data.currentRepresentation);A=W.mediaInfo.streamInfo,E=z.sender.streamProcessor.isDynamic(),x.call(this);}},u=function(z){z.error||b9o.Z5y(0,y.getElement().readyState)||Q.call(this);},J=function(){y&&(y.unlisten("play",I),y.unlisten("playing",X),y.unlisten("pause",z5),y.unlisten("error",N5),y.unlisten("seeking",o5),y.unlisten("seeked",W5),y.unlisten("timeupdate",C),y.unlisten("progress",K5),y.unlisten("ratechange",U),y.unlisten("loadedmetadata",Z5),y.unlisten("ended",p5));},L=function(){this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY);},I=function(){this.log("<video> play"),x.call(this),D.call(this),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,{startTime:this.getTime()});},X=function(){this.log("<video> playing"),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PLAYING,{playingTime:this.getTime()});},z5=function(){this.log("<video> pause"),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED);},o5=function(){b9o.p5y(y.getElement().currentTime,CL.configs.minStartTime)&&b9o.P5y(null,CL.configs.initialStartTime)&&!CL.configs.minStartTimeSeekInProgress&&(y.getElement().currentTime=CL.configs.minStartTime,CL.configs.minStartTimeSeekInProgress=!0);var z=this.streamProcessor.getFragmentModel();z.abortRequests();var W=this.metricsModel.getMetricsFor("video"),Z=W.SchedulingInfo;b9o.r5y(Z.length,0)&&z.cancelPendingRequests(Z[b9o.S5y(Z.length,1)].quality),this.log("<video> seek"),D.call(this),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,{seekTime:this.getTime()});},W5=function(){this.log("<video> seeked");var z=y.getElement();z.paused===!1&&b9o.E5y(0,z.playbackRate)&&(z.playbackRate=1,this.log("<video> Continuing playback")),CL.configs.minStartTimeSeekInProgress=!1,this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKED);},C=function(){var z=this.getTime();b9o.q5y(z,G)&&(G=z,this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,{timeToEnd:this.getTimeToStreamEnd()}));},K5=function(){var z,W,Z,K=y.getElement().buffered;K.length&&(z=b9o.J5y(K.length,1),W=K.end(z),Z=w.call(this,A)+A.duration-W),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,{bufferedRanges:y.getElement().buffered,remainingUnbufferedDuration:Z});},U=function(){this.log("<video> ratechange: ",this.getPlaybackRate()),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED);},Z5=function(){this.log("<video> loadedmetadata"),(!E||this.timelineConverter.isTimeSyncCompleted())&&Q.call(this),this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_METADATA_LOADED),D.call(this);},p5=function(){this.log("<video> ended"),F.call(this);},N5=function(z){this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,{error:z.srcElement.error});},R5=function(){this.notify(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED,{isDynamic:E,time:new Date});},b5=function(z){var W,Z=z.data.bufferedRanges,K=A.id,R=this.getTime(),N=z.sender.streamProcessor.getType(),M=this.system.getObject("streamController").getStreamById(A.id),P=O[K];b9o.H5y(0,z.data.index)&&(V[K]=V[K]||{},V[K][N]=!0,V.ready=!(M.hasMedia("audio")&&!V[K].audio||M.hasMedia("video")&&!V[K].video)),Z&&Z.length&&(W=Math.max(Z.start(0),A.start),O[K]=void 0===O[K]?W:Math.max(O[K],W),b9o.V5y(P,O[K])||!V.ready||b9o.x5y(R,O[K]));},j5=function(z){y=z,y.listen("canplay",L),y.listen("play",I),y.listen("playing",X),y.listen("pause",z5),y.listen("error",N5),y.listen("seeking",o5),y.listen("seeked",W5),y.listen("timeupdate",C),y.listen("progress",K5),y.listen("ratechange",U),y.listen("loadedmetadata",Z5),y.listen("ended",p5);};return {system:void 0,log:void 0,timelineConverter:void 0,uriQueryFragModel:void 0,metricsModel:void 0,metricsExt:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,adapter:void 0,setup:function(){this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=v,this[MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED]=u,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED]=b5,L=L.bind(this),I=I.bind(this),X=X.bind(this),z5=z5.bind(this),N5=N5.bind(this),o5=o5.bind(this),W5=W5.bind(this),C=C.bind(this),K5=K5.bind(this),U=U.bind(this),Z5=Z5.bind(this),p5=p5.bind(this);},initialize:function(z,W){A=z,b9o.m5y(y,W)&&(J.call(this),j5.call(this,W));},getTimeToStreamEnd:function(){var z=y.getCurrentTime();return w.call(this,A)+A.duration-z;},getStreamId:function(){return A.id;},getStreamDuration:function(){return A.duration;},getTime:function(){return y.getCurrentTime();},getPlaybackRate:function(){return y.getPlaybackRate();},getPlayedRanges:function(){return y.getElement().played;},setLiveStartTime:function(W){var Z=function(z){q=z;};Z(W);},getLiveStartTime:function(){return q;},getLiveDelay:function(){return CL.manifest.ABRParameters.liveDelay&&!isNaN(CL.manifest.ABRParameters.liveDelay)?CL.manifest.ABRParameters.liveDelay:b9o.X5y(2,A.manifestInfo.minBufferTime);},start:function(){y.play();},isPaused:function(){return y.isPaused();},pause:function(){y&&y.pause();},isSeeking:function(){return y.getElement().seeking;},seek:function(z){b9o.g5y(z,this.getTime())&&y.setCurrentTime(z);},reset:function(){F.call(this),J.call(this),y=null,A=null,G=0,q=b9o.f5y(0,0),O=null;}};},MediaPlayer.dependencies.PlaybackController.prototype={constructor:MediaPlayer.dependencies.PlaybackController},MediaPlayer.dependencies.PlaybackController.eventList={ENAME_CAN_PLAY:"canPlay",ENAME_PLAYBACK_STARTED:"playbackStarted",ENAME_PLAYBACK_PLAYING:"playbackPlaying",ENAME_PLAYBACK_STOPPED:"playbackStopped",ENAME_PLAYBACK_PAUSED:"playbackPaused",ENAME_PLAYBACK_SEEKING:"playbackSeeking",ENAME_PLAYBACK_SEEKED:"playbackSeeked",ENAME_PLAYBACK_TIME_UPDATED:"playbackTimeUpdated",ENAME_PLAYBACK_PROGRESS:"playbackProgress",ENAME_PLAYBACK_RATE_CHANGED:"playbackRateChanged",ENAME_PLAYBACK_METADATA_LOADED:"playbackMetaDataLoaded",ENAME_PLAYBACK_ERROR:"playbackError",ENAME_WALLCLOCK_TIME_UPDATED:"wallclockTimeUpdated"},MediaPlayer.dependencies.ProtectionController=function(){"use strict";var Z=null,K=function(z){if(z.error)this.log(z.error);else{var W=z.data;this.protectionModel.keySystem.doLicenseRequest(W.message,W.defaultURL,W.sessionToken);}},R=function(z){z.error?(this.log("DRM: License request failed! -- "+z.error),this.errHandler.licenseError(z)):(this.log("DRM: License request successful.  Session ID = "+z.data.requestData.getSessionID()),this.updateKeySession(z.data.requestData,z.data.message));},N=function(){this.protectionModel.keySystem.subscribe(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,this);};return {system:void 0,log:void 0,protectionExt:void 0,setup:function(){this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE]=K.bind(this),this[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED]=N.bind(this),this[MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE]=R.bind(this);},init:function(z){this.protectionModel=z,Z=this.protectionExt.getKeySystems(),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,this);},teardown:function(){this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,this),this.protectionModel.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,this),this.protectionModel.keySystem&&this.protectionModel.keySystem.unsubscribe(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,this);},requestKeySystemAccess:function(z){this.protectionModel.requestKeySystemAccess(z);},selectKeySystem:function(z){if(this.protectionModel.keySystem)throw  new Error("DRM: KeySystem already selected!");CL.manifest.drm=z.keySystem.systemString,this.protectionModel.selectKeySystem(z);},createKeySession:function(z,W){this.protectionModel.createKeySession(z,W);},updateKeySession:function(z,W){this.protectionModel.updateKeySession(z,W);},loadKeySession:function(z){this.protectionModel.loadKeySession(z);},removeKeySession:function(z){this.protectionModel.removeKeySession(z);},closeKeySession:function(z){this.protectionModel.closeKeySession(z);},setServerCertificate:function(z){this.protectionModel.setServerCertificate(z);},errHandler:void 0};},MediaPlayer.dependencies.ProtectionController.prototype={constructor:MediaPlayer.dependencies.ProtectionController},MediaPlayer.dependencies.ScheduleController=function(){"use strict";var y,E,B,G,q,Y=0,O=!0,V=null,w=!1,H=null,D=null,F=!0,Q=[],x=function(z,W){var Z=0,K=null;F===!1&&(K=D.start,Z=b9o.h5y(z.getTime(),K.getTime()),D.duration=Z,D.stopreason=W,F=!0);},v=function(){E&&(w=!1,O&&(O=!1),this.log("start"),C.call(this));},u=function(){O&&(I.call(this,q.quality),G5.call(this,MediaPlayer.vo.metrics.PlayList.INITIAL_PLAY_START_REASON)),v.call(this);},J=function(z){w||(w=!0,this.log("stop"),z&&B.cancelPendingRequests(),x(new Date,MediaPlayer.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON));},L=function(Z){var K=this,R=K.scheduleRulesCollection.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.NEXT_FRAGMENT_RULES);K.rulesController.applyRules(R,K.streamProcessor,Z,null,function(z,W){return W;});},I=function(z){var W,Z=this;return W=Z.adapter.getInitRequest(Z.streamProcessor,z),b9o.C5y(null,W)&&Z.fragmentController.prepareFragmentForLoading(B,W),W;},X=function(Z){var K=this,R=K.scheduleRulesCollection.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_SCHEDULE_RULES);K.rulesController.applyRules(R,K.streamProcessor,Z,Y,function(z,W){return void 0===z&&(z=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE),z=b9o.W3y(z,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)?0:z,Math.max(z,W);});},z5=function(z){var W,Z,K,R=z.length,N=.1;for(K=0;b9o.R3y(R,K);K+=1)W=z[K],Z=W.startTime+b9o.M3y(W.duration,2)+N,W=this.adapter.getFragmentRequestForTime(this.streamProcessor,q,Z,{timeThreshold:0}),this.fragmentController.prepareFragmentForLoading(B,W);},o5=function(z){var W=this;return Y=z.value,b9o.b3y(0,Y)?void W.fragmentController.executePendingRequests():void L.call(W,W5.bind(W));},W5=function(z){var W=z.value;b9o.i3y(null,W)||b9o.T3y(W,MediaPlayer.vo.FragmentRequest)||(W=this.adapter.getFragmentRequestForTime(this.streamProcessor,q,W.startTime)),W?(Y--,this.fragmentController.prepareFragmentForLoading(B,W)):this.fragmentController.executePendingRequests();},C=function(){var z=(new Date).getTime(),W=V?b9o.B3y(z-V,B.getLoadingTime()):!0;this.abrController.getPlaybackQuality(this.streamProcessor),!W||w||this.playbackController.isPaused()&&b9o.G3y(this.playbackController.getPlayedRanges().length,0)&&(!this.scheduleWhilePaused||G)||(V=z,Q[y]!==!0&&X.call(this,o5.bind(this)));},K5=function(){var z=this;b9o.O3y(null,y)&&b9o.Q3y("",y)&&z.metricsModel.clearCurrentMetricsForType(y);},U=function(z){z.error||(q=this.adapter.convertDataToTrack(z.data.currentRepresentation));},Z5=function(z){z.error||(q=this.streamProcessor.getCurrentTrack(),G||(E=!0),E&&u.call(this));},p5=function(z){b9o.F3y(z.data.fragmentModel,this.streamProcessor.getFragmentModel())&&(this.log("Stream is complete"),x(new Date,MediaPlayer.vo.metrics.PlayList.Trace.END_OF_CONTENT_STOP_REASON));},N5=function(z){var W=this;b9o.a3y(z.data.fragmentModel,W.streamProcessor.getFragmentModel())&&C.call(W);},R5=function(z){if(z.error){var W=this;Q[y]=!0,this.streamProcessor.bufferController.scheduleController.stop(),this.abrController.setPlaybackQuality(y,W.streamProcessor.getStreamInfo(),Math.max(b9o.v3y(z.data.request.quality,2),0)),B.cancelPendingRequests(z.data.request.quality),this.streamProcessor.indexHandler.setCurrentTime(z.data.request.startTime),W.streamProcessor.bufferController.scheduleController.start(),Q[y]=!1;}},b5=function(){Q5.call(this);},j5=function(){J.call(this,!1);},T5=function(z){I.call(this,z.data.requiredQuality);},S5=function(z){B.removeExecutedRequestsBeforeTime(z.data.to),z.data.hasEnoughSpaceToAppend&&v.call(this);},Y5=function(z){var W=this;z.data.hasSufficientBuffer||W.playbackController.isSeeking()||(W.log("Stalling "+y+" Buffer: "+y),x(new Date,MediaPlayer.vo.metrics.PlayList.Trace.REBUFFERING_REASON));},O5=function(z){var W=this;W.metricsModel.addBufferLevel(y,new Date,z.data.bufferLevel),C.call(this);},k5=function(){J.call(this,!1);},V5=function(z){if(b9o.I3y(y,z.data.mediaType)&&b9o.d3y(this.streamProcessor.getStreamInfo().id,z.data.streamInfo.id)){var W,Z=this;if(W=B.cancelPendingRequests(z.data.oldQuality),q=Z.streamProcessor.getTrackForQuality(z.data.newQuality),b9o.t3y(null,q)||void 0===q)throw "Unexpected error!";z5.call(Z,W),x(new Date,MediaPlayer.vo.metrics.PlayList.Trace.REPRESENTATION_SWITCH_STOP_REASON);}},G5=function(z){var W=new Date,Z=this.playbackController.getTime();x(W,MediaPlayer.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON),H=this.metricsModel.addPlayList(y,W,Z,z);},Q5=function(){var z=this,W=z.playbackController.getTime(),Z=z.playbackController.getPlaybackRate(),K=new Date;F===!0&&q&&H&&(F=!1,D=z.metricsModel.appendPlayListTrace(H,q.id,null,K,W,null,Z,null));},B5=function(z){var W=this,Z=I.call(W,z.data.CCIndex);B.executeRequest(Z);},A5=function(){v.call(this);},q5=function(z){O||B.cancelPendingRequests();var W=this.metricsModel.getMetricsFor("stream"),Z=this.metricsExt.getCurrentManifestUpdate(W);this.log("seek: "+z.data.seekTime),G5.call(this,MediaPlayer.vo.metrics.PlayList.SEEK_START_REASON),this.metricsModel.updateManifestUpdateInfo(Z,{latency:b9o.L3y(q.DVRWindow.end,this.playbackController.getTime())});},n5=function(){Q5.call(this);},w5=function(){C.call(this);},i5=function(z){if(!z.error){var W,Z,K=this,R=z.data.liveEdge,N=(q.mediaInfo.streamInfo.manifestInfo,b9o.z2y(R,K.playbackController.getLiveDelay())),M=K.metricsModel.getMetricsFor("stream"),P=K.metricsExt.getCurrentManifestUpdate(M),A=K.playbackController.getLiveStartTime();!isNaN(CL.manifest.relativeDVRWindowPlaybackPosition)&&b9o.K2y(CL.manifest.relativeDVRWindowPlaybackPosition,0)&&b9o.N2y(CL.manifest.relativeDVRWindowPlaybackPosition,1)&&(N=Math.max(q.DVRWindow.start,q.DVRWindow.start+b9o.j2y((Math.min(q.DVRWindow.end,R)-q.DVRWindow.start-q.fragmentDuration),CL.manifest.relativeDVRWindowPlaybackPosition))),W=K.adapter.getFragmentRequestForTime(K.streamProcessor,q,N),Z=W.startTime,(isNaN(A)||b9o.y2y(Z,A))&&K.playbackController.setLiveStartTime(Z),K.metricsModel.updateManifestUpdateInfo(P,{currentTime:Z,presentationStartTime:R,latency:b9o.A2y(R,Z),clientTimeOffset:K.timelineConverter.getClientTimeOffset()}),E=!0,q&&u.call(K);}};return {log:void 0,system:void 0,metricsModel:void 0,metricsExt:void 0,scheduleWhilePaused:void 0,timelineConverter:void 0,abrController:void 0,adapter:void 0,scheduleRulesCollection:void 0,rulesController:void 0,setup:function(){this[MediaPlayer.dependencies.LiveEdgeFinder.eventList.ENAME_LIVE_EDGE_SEARCH_COMPLETED]=i5,this[MediaPlayer.dependencies.AbrController.eventList.ENAME_QUALITY_CHANGED]=V5,this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_STARTED]=j5,this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=U,this[MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED]=Z5,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_MEDIA_FRAGMENT_LOADING_START]=N5,this[MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED]=R5,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED]=p5,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_CLEARED]=S5,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_APPENDED]=b5,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_STATE_CHANGED]=Y5,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_UPDATED]=O5,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_INIT_REQUESTED]=T5,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_QUOTA_EXCEEDED]=k5,this[MediaPlayer.dependencies.TextController.eventList.ENAME_CLOSED_CAPTIONING_REQUESTED]=B5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED]=A5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING]=q5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_RATE_CHANGED]=n5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_WALLCLOCK_TIME_UPDATED]=w5;},initialize:function(z,W){var Z=this;Q.video=!1,Q.audio=!1,y=z,Z.setMediaType(y),Z.streamProcessor=W,Z.playbackController=W.playbackController,Z.fragmentController=W.fragmentController,Z.liveEdgeFinder=W.liveEdgeFinder,Z.bufferController=W.bufferController,G=W.isDynamic(),B=this.fragmentController.getModel(this),Z.scheduleRulesCollection.bufferLevelRule&&Z.scheduleRulesCollection.bufferLevelRule.setScheduleController(Z),Z.scheduleRulesCollection.pendingRequestsRule&&Z.scheduleRulesCollection.pendingRequestsRule.setScheduleController(Z),Z.scheduleRulesCollection.playbackTimeRule&&Z.scheduleRulesCollection.playbackTimeRule.setScheduleController(Z);},getFragmentModel:function(){return B;},getFragmentToLoadCount:function(){return Y;},reset:function(){var z=this;J.call(z,!0),z.bufferController.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN,z.scheduleRulesCollection.bufferLevelRule),z.bufferController.unsubscribe(MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED,z.scheduleRulesCollection.bufferLevelRule),B.abortRequests(),z.fragmentController.detachModel(B),K5.call(z),Y=0;},start:v,stop:J};},MediaPlayer.dependencies.ScheduleController.prototype={constructor:MediaPlayer.dependencies.ScheduleController},MediaPlayer.dependencies.StreamController=function(){"use strict";var Y,O=[],V=6,w=.2,H=!0,D=!1,F=function(){Y.play();},Q=function(){Y.pause();},x=function(z){Y.seek(z);},v=function(z,W){var Z=z.getElement(),K=W.getElement();K.parentNode||Z.parentNode.insertBefore(K,Z),Z.style.width="0px",K.style.width="100%",L(Z,K);},u=function(z){var W=z.getPlaybackController();W.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,this.manifestUpdater),W.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED,this.manifestUpdater),W.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,this),W.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,this),W.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,this);},J=function(z){var W=this,Z=z.getPlaybackController();setTimeout(function(){Z.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_STARTED,W.manifestUpdater),Z.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PAUSED,W.manifestUpdater),Z.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING,W),Z.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED,W),Z.unsubscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS,W);},1);},L=function(K,R){["controls","loop","muted","volume"].forEach(function(W){var Z=function(z){R[W]=z[W];};Z(K);});},I=function(z,W){this.eventBus.dispatchEvent({type:MediaPlayer.events.SWITCH_STREAM,data:{fromStreamInfo:z?z.getStreamInfo():null,toStreamInfo:W.getStreamInfo()}});},X=function(z){!z.data.remainingUnbufferedDuration||b9o.Y2y(z.data.remainingUnbufferedDuration,V)||W5();},z5=function(z){var W=this,Z=W.videoExt.getPlaybackQuality(Y.getVideoModel().getElement());Z&&W.metricsModel.addDroppedFrames("video",Z),C()&&(Y.getVideoModel().getElement().seeking||b9o.l2y(z.data.timeToEnd,w)&&p5.call(this,Y,C()));},o5=function(z){var W=K5(z.data.seekTime);W&&b9o.n2y(W,Y)&&p5.call(this,Y,W,z.data.seekTime);},W5=function(){var z=C();z&&z.seek(z.getStartTime());},C=function(){var z=Y.getStreamIndex()+1;return b9o.c2y(z,O.length)?O[z]:null;},K5=function(z){var W=0,Z=null,K=O.length;b9o.k2y(K,0)&&(W+=O[0].getStartTime());for(var R=0;b9o.D2y(K,R);R++)if(Z=O[R],W+=Z.getDuration(),b9o.w2y(W,z))return Z;return null;},U=function(){var z=this.system.getObject("videoModel"),W=document.createElement("video");return z.setElement(W),z;},Z5=function(z){z.parentNode&&z.parentNode.removeChild(z);},p5=function(z,W,Z){!D&&z&&W&&b9o.u2y(z,W)&&(D=!0,z.pause(),Y=W,v.call(this,z.getVideoModel(),W.getVideoModel()),J.call(this,z),u.call(this,W),x(Z?z.getPlaybackController().getTime():W.getStartTime()),F(),z.resetEventController(),Y.startEventController(),D=!1,I.call(this,z,W));},N5=function(){var W,Z,K,R,N,M,P,A,y=this,E=y.manifestModel.getValue(),B=y.metricsModel.getMetricsFor("stream"),G=y.metricsExt.getCurrentManifestUpdate(B),q=Y?Y.getVideoModel():y.getVideoModel();if(E){P=y.adapter.getStreamsInfo(E);try{if(b9o.s2y(0,P.length))throw  new Error("There are no streams");for(y.metricsModel.updateManifestUpdateInfo(G,{currentTime:q.getCurrentTime(),buffered:q.getElement().buffered,presentationStartTime:P[0].start,clientTimeOffset:y.timelineConverter.getClientTimeOffset()}),N=0,K=P.length;b9o.e2y(K,N);N+=1){for(Z=P[N],M=0,R=O.length;b9o.U2y(R,M);M+=1)b9o.o8y(O[M].getId(),Z.id)&&(A=O[M],A.updateData(Z));A||(A=y.system.getObject("stream"),W=y.system.getObject("playbackController"),A.setStreamInfo(Z),A.setVideoModel(b9o.Z8y(0,N)?y.videoModel:U.call(y)),A.setPlaybackController(W),W.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_ERROR,A),W.subscribe(MediaPlayer.dependencies.PlaybackController.eventList.ENAME_CAN_PLAY,A),A.initProtection(E),A.setAutoPlay(H),A.load(E),A.subscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,y),O.push(A)),y.metricsModel.addManifestUpdateStreamInfo(G,Z.id,Z.index,Z.start,Z.duration),A=null;}Y||(Y=O[0],u.call(y,Y),Y.subscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,this.liveEdgeFinder),I.call(y,null,Y));}catch(z){y.errHandler.manifestError(z.message,"nostreamscomposed",y.manifestModel.getValue()),y.reset();}}},R5=function(){var z=this,W=O.length,Z=0;for(Z;b9o.p8y(W,Z);Z+=1)if(O[Z].isUpdating())return ;z.notify(MediaPlayer.dependencies.StreamController.eventList.ENAME_STREAMS_COMPOSED);},b5=function(){N5.call(this);},j5=function(z){z.error?this.reset():(this.manifestModel.setValue(z.data.manifest),this.log("Manifest has loaded."),this.timeSyncController.initialize(this.manifestExt.getUTCTimingSources(z.data.manifest)));};return {system:void 0,videoModel:void 0,manifestLoader:void 0,manifestUpdater:void 0,manifestModel:void 0,manifestExt:void 0,adapter:void 0,log:void 0,metricsModel:void 0,metricsExt:void 0,videoExt:void 0,liveEdgeFinder:void 0,timelineConverter:void 0,protectionExt:void 0,timeSyncController:void 0,errHandler:void 0,eventBus:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.ManifestLoader.eventList.ENAME_MANIFEST_LOADED]=j5,this[MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED]=R5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING]=o5,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_PROGRESS]=X,this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_TIME_UPDATED]=z5,this[MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED]=b5;},setAutoPlay:function(W){var Z=function(z){H=z;};Z(W);},getAutoPlay:function(){return H;},setProtectionData:function(z){this.protectionExt.init(z);},getVideoModel:function(){return this.videoModel;},setVideoModel:function(z){this.videoModel=z;},getActiveStreamInfo:function(){return Y?Y.getStreamInfo():null;},getStreamById:function(W){return O.filter(function(z){return b9o.P8y(z.getStreamInfo().id,W);})[0];},initialize:function(){this.timeSyncController.subscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this.timelineConverter),this.timeSyncController.subscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this.liveEdgeFinder),this.timeSyncController.subscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this);},load:function(z){this.manifestLoader.load(z),this.manifestUpdater.start();},reset:function(){Y&&(J.call(this,Y),b9o.r8y(Y.getVideoModel(),this.getVideoModel())&&v.call(this,Y.getVideoModel(),this.getVideoModel())),this.timeSyncController.unsubscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this.timelineConverter),this.timeSyncController.unsubscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this.liveEdgeFinder),this.timeSyncController.unsubscribe(MediaPlayer.dependencies.TimeSyncController.eventList.ENAME_TIME_SYNCHRONIZATION_COMPLETED,this),this.timeSyncController.reset();for(var z=0,W=O.length;b9o.S8y(W,z);z++){var Z=O[z];Z.unsubscribe(MediaPlayer.dependencies.Stream.eventList.ENAME_STREAM_UPDATED,this),Z.reset(),b9o.E8y(Z.getVideoModel(),this.getVideoModel())&&Z5(Z.getVideoModel().getElement());}O=[],this.manifestUpdater.stop(),this.metricsModel.clearAllCurrentMetrics(),this.manifestModel.setValue(null),this.timelineConverter.reset(),this.adapter.reset(),D=!1,Y=null;},update:function(z){Y.updateData(z);},disableTextTracks:function(){Y.disableTextTracks();},play:F,seek:x,pause:Q};},MediaPlayer.dependencies.StreamController.prototype={constructor:MediaPlayer.dependencies.StreamController},MediaPlayer.dependencies.StreamController.eventList={ENAME_STREAMS_COMPOSED:"streamsComposed"},MediaPlayer.dependencies.TextController=function(){var N,M,P,A=!1,y=function(){A||(M.hasOwnProperty("initialize")&&M.initialize(P,this),A=!0),this.notify(MediaPlayer.dependencies.TextController.eventList.ENAME_CLOSED_CAPTIONING_REQUESTED,{CCIndex:0});},E=function(z){var W=this;b9o.q8y(z.data.fragmentModel,W.streamProcessor.getFragmentModel())&&b9o.J8y(null,z.data.bytes)&&W.sourceBufferExt.append(M,z.data.bytes,W.videoModel);},B=function(){M.getTextTrackExtensions().deleteCues(this.videoModel.getElement());};return {sourceBufferExt:void 0,log:void 0,system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[Dash.dependencies.RepresentationController.eventList.ENAME_DATA_UPDATE_COMPLETED]=y,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_INIT_FRAGMENT_LOADED]=E;},initialize:function(z,W,Z,K){var R=this;P=z,R.setBuffer(W),R.setMediaSource(Z),R.videoModel=K.videoModel,R.trackController=K.trackController,R.streamProcessor=K;},getBuffer:function(){return M;},setBuffer:function(W){var Z=function(z){M=z;};Z(W);},setMediaSource:function(W){var Z=function(z){N=z;};Z(W);},reset:function(z){z||(this.sourceBufferExt.abort(N,M),this.sourceBufferExt.removeSourceBuffer(N,M));},clearFutureBuffer:B};},MediaPlayer.dependencies.TextController.prototype={constructor:MediaPlayer.dependencies.TextController},MediaPlayer.dependencies.TextController.eventList={ENAME_CLOSED_CAPTIONING_REQUESTED:"closedCaptioningRequested"},MediaPlayer.dependencies.MediaSourceExtensions=function(){"use strict";},MediaPlayer.dependencies.MediaSourceExtensions.prototype={constructor:MediaPlayer.dependencies.MediaSourceExtensions,createMediaSource:function(){"use strict";var z=b9o.H8y("WebKitMediaSource",window),W=b9o.V8y("MediaSource",window);return W?new MediaSource:z?new WebKitMediaSource:null;},attachMediaSource:function(z,W){"use strict";var Z=window.URL.createObjectURL(z);return W.setSource(Z),Z;},detachMediaSource:function(){"use strict";},setDuration:function(z,W){"use strict";return W+=b9o.x8y(CL.configs.ssTimeOffset.video,CL.configs.ssTimeOffsetTimescale.video),b9o.m8y(z.duration,W)&&(z.duration=W),z.duration;},signalEndOfStream:function(z){"use strict";var W=z.sourceBuffers,Z=W.length,K=0;if(b9o.X8y("open",z.readyState)){for(K;b9o.g8y(Z,K);K+=1)if(W[K].updating)return ;z.endOfStream();}}},MediaPlayer.dependencies.ProtectionExtensions=function(){"use strict";this.system=void 0,this.log=void 0,this.keySystems=[],this.clearkeyKeySystem=void 0;},MediaPlayer.dependencies.ProtectionExtensions.prototype={constructor:MediaPlayer.dependencies.ProtectionExtensions,setup:function(){var z;z=this.system.getObject("ksPlayReady"),this.keySystems.push(z),z=this.system.getObject("ksWidevine"),this.keySystems.push(z),z=this.system.getObject("ksClearKey"),this.keySystems.push(z),this.clearkeyKeySystem=z;},init:function(Z){for(var K=(function(z){var W=null;return Z&&(W=b9o.f8y(z,Z)?Z[z]:null),W;}),R=0;b9o.h8y(R,this.keySystems.length);R++){var N=this.keySystems[R];N.init(K(N.systemString));}var R,M,P=[];if(CL.manifest.drm){for(var A=-1,M=0;b9o.C8y(M,this.keySystems.length);++M)if(b9o.W1y(CL.manifest.drm,this.keySystems[M].systemString)){P[0]=this.keySystems[M],A=M;break;}if(A>-1){var y=function(z){R=z;};y(1);for(var M=0;b9o.R1y(M,this.keySystems.length);++M)b9o.M1y(M,A)&&(P[R]=this.keySystems[M],R++);}else P=this.keySystems;}else P=this.keySystems;this.keySystems=P;},getKeySystems:function(){return this.keySystems;},getKeySystemBySystemString:function(z){for(var W=0;b9o.b1y(W,this.keySystems.length);W++)if(b9o.i1y(this.keySystems[W].systemString,z))return this.keySystems[W];return null;},isClearKey:function(z){return b9o.T1y(z,this.clearkeyKeySystem);},initDataEquals:function(z,W){var Z,K,R=new castLabsDashJS.classes.Utils;return Z=R.byteArrayToHexString(new Uint8Array(z)),K=R.byteArrayToHexString(new Uint8Array(W)),b9o.B1y(Z,K);},getSupportedKeySystemsFromContentProtection:function(z){var W,Z,K,R,N=[];if(z)for(K=0;b9o.G1y(K,this.keySystems.length);++K)for(Z=this.keySystems[K],R=0;b9o.O1y(R,z.length);++R)if(W=z[R],b9o.Q1y(W.schemeIdUri.toLowerCase(),Z.schemeIdURI)){var M=Z.getInitData(W);M&&N.push({ks:this.keySystems[K],initData:M});}return N;},getSupportedKeySystems:function(z){var W,Z=[];for(pssh=MediaPlayer.dependencies.protection.CommonEncryption.parsePSSHList(z),W=0;b9o.F1y(W,this.keySystems.length);++W)b9o.a1y(this.keySystems[W].uuid,pssh)&&Z.push({ks:this.keySystems[W],initData:pssh[this.keySystems[W].uuid]});return Z;},autoSelectKeySystem:function(N,M,P,A,y){if(b9o.v1y(0,N.length))throw  new Error("DRM system for this content not supported by the player!");var E=[],B=[];A&&B.push(new MediaPlayer.vo.protection.MediaCapability(A.codec)),y&&E.push(new MediaPlayer.vo.protection.MediaCapability(y.codec));for(var G=new MediaPlayer.vo.protection.KeySystemConfiguration(E,B),q=[],Y=0;b9o.I1y(Y,N.length);Y++)q.push({ks:N[Y].ks,configs:[G]});var O=this;!function(Z,K){var R={};R[MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE]=function(z){if(Z.unsubscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,this),z.error)O.log(z.error);else{var W=z.data;O.log("KeySystem Access Granted ("+W.keySystem.systemString+")!"),K.selectKeySystem(W);}},Z.subscribe(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,R),K.requestKeySystemAccess(q);}(M,P);}},MediaPlayer.dependencies.RequestModifierExtensions=function(){"use strict";return {modifyRequestURL:function(z){return z;},modifyRequestHeader:function(z){return z;}};},MediaPlayer.dependencies.SourceBufferExtensions=function(){"use strict";this.system=void 0,this.notify=void 0,this.subscribe=void 0,this.unsubscribe=void 0;},MediaPlayer.dependencies.SourceBufferExtensions.prototype={constructor:MediaPlayer.dependencies.SourceBufferExtensions,createSourceBuffer:function(W,Z){"use strict";var K=this,R=Z.codec,N=null;try{N=W.addSourceBuffer(R);}catch(z){if(!Z.isText&&-1==R.indexOf('codecs="stpp"'))throw z;N=K.system.getObject("textSourceBuffer");}return N;},removeSourceBuffer:function(W,Z){"use strict";try{W.removeSourceBuffer(Z);}catch(z){}},getBufferRange:function(W,Z,K){"use strict";var R,N,M=null,P=0,A=0,y=null,E=null,B=0,G=K||.15;try{var q=function(z){M=z.buffered;};q(W);}catch(z){return null;}if(b9o.d1y(null,M)&&void 0!==M){for(N=0,R=M.length;b9o.t1y(R,N);N+=1)if(P=M.start(N),A=M.end(N),P-=b9o.L1y(CL.configs.ssTimeOffset.video,CL.configs.ssTimeOffsetTimescale.video),A-=b9o.z6y(CL.configs.ssTimeOffset.video,CL.configs.ssTimeOffsetTimescale.video),b9o.K6y(null,y))B=Math.abs(b9o.N6y(P,Z)),b9o.j6y(Z,P)&&b9o.y6y(A,Z)?(y=P,E=A):b9o.A6y(G,B)&&(y=P,E=A);else{var Y=function(z){E=z;};if(B=b9o.Y6y(P,E),!(b9o.l6y(G,B)))break;Y(A);}if(b9o.n6y(null,y))return {start:y,end:E};}return null;},getAllRanges:function(W){var Z=null;try{return Z=W.buffered;}catch(z){return null;}},getBufferLength:function(z,W,Z){"use strict";var K,R,N=this;return K=N.getBufferRange(z,W,Z),R=b9o.c6y(null,K)?0:b9o.k6y(K.end,W);},waitForUpdateEnd:function(W,Z){"use strict";var K,R=50,N=function(){W.updating||(clearInterval(K),Z());},M=function(){W.updating||(W.removeEventListener("updateend",M,!1),Z());};if(!W.updating)return void Z();if("function"==typeof W.addEventListener)try{W.addEventListener("updateend",M,!1);}catch(z){K=setInterval(N,R);}else K=setInterval(N,R);},append:function(W,Z,K){var R=this,N=b9o.D6y("append",W)?"append":b9o.w6y("appendBuffer",W)?"appendBuffer":null;if(N)try{R.waitForUpdateEnd(W,function(){CL.configs.isActiveVideoChrome===!0?W[N](Z):W[N](Z,K),R.waitForUpdateEnd(W,function(){R.notify(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_APPEND_COMPLETED,{buffer:W,bytes:Z});});});}catch(z){R.notify(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_APPEND_COMPLETED,{buffer:W,bytes:Z},new MediaPlayer.vo.Error(z.code,z.message,null));}},remove:function(W,Z,K,R){var N=this;try{b9o.u6y(Z,0)&&b9o.s6y(K,Z)&&b9o.e6y("ended",R.readyState)&&W.remove(Z,K),this.waitForUpdateEnd(W,function(){N.notify(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED,{buffer:W,from:Z,to:K});});}catch(z){N.notify(MediaPlayer.dependencies.SourceBufferExtensions.eventList.ENAME_SOURCEBUFFER_REMOVE_COMPLETED,{buffer:W,from:Z,to:K},new MediaPlayer.vo.Error(z.code,z.message,null));}},abort:function(W,Z){"use strict";try{b9o.U6y("open",W.readyState)&&Z.abort();}catch(z){}}},MediaPlayer.dependencies.SourceBufferExtensions.QUOTA_EXCEEDED_ERROR_CODE=22,MediaPlayer.dependencies.SourceBufferExtensions.eventList={ENAME_SOURCEBUFFER_REMOVE_COMPLETED:"sourceBufferRemoveCompleted",ENAME_SOURCEBUFFER_APPEND_COMPLETED:"sourceBufferAppendCompleted"},MediaPlayer.utils.TextTrackExtensions=function(){"use strict";var A;return {setup:function(){var z=function(){A=window.VTTCue||window.TextTrackCue;};z();},addTextTrack:function(z,W,Z,K,R){var N=z.addTextTrack("captions",Z,K);N["default"]=R,N.mode="showing";for(var M in W){var P=W[M];N.addCue(new A(P.start,P.end,P.data));}return N;},deleteCues:function(z){for(var W=0;b9o.o7y(W,z.textTracks.length);W++){var Z=z.textTracks[W],K=Z.cues;if(b9o.Z7y(null,K)){var R=function(){M=b9o.p7y(K.length,1);};R();for(var N=M;b9o.P7y(N,0);N--)Z.removeCue(K[N]);Z.mode="disabled",Z["default"]=!1;}}return ;var N,Z,K,M,N;}};},MediaPlayer.dependencies.VideoModelExtensions=function(){"use strict";return {getPlaybackQuality:function(z){var W=b9o.r7y("webkitDroppedFrameCount",z),Z=b9o.S7y("getVideoPlaybackQuality",z),K=null;return Z?K=z.getVideoPlaybackQuality():W&&(K={droppedVideoFrames:z.webkitDroppedFrameCount,creationTime:new Date}),K;}};},MediaPlayer.dependencies.VideoModelExtensions.prototype={constructor:MediaPlayer.dependencies.VideoModelExtensions},MediaPlayer.dependencies.FragmentModel=function(){"use strict";var B,G=[],q=[],Y=[],O=[],V=!1,w=function(z){var W=this;W.notify(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_STARTED,{request:z}),W.fragmentLoader.load(z);},H=function(z,W){var Z=z.indexOf(W);-1!==Z&&z.splice(Z,1);},D=function(z,W,Z){var K,R=b9o.E7y(z.length,1),N=b9o.q7y(0,0),M=b9o.J7y(0,0),P=null;for(K=R;b9o.H7y(K,0);K-=1)if(P=z[K],N=P.startTime,M=N+P.duration,Z=Z||b9o.V7y(P.duration,2),!isNaN(N)&&!isNaN(M)&&b9o.x7y(W+Z,N)&&b9o.m7y(M,W-Z)||isNaN(N)&&isNaN(W))return P;return null;},F=function(Z,K){return K?K.hasOwnProperty("time")?[D.call(this,Z,K.time,K.threshold)]:Z.filter(function(z){for(var W in K)if(b9o.X7y("state",W)&&K.hasOwnProperty(W)&&b9o.g7y(z[W],K[W]))return !1;return !0;}):Z;},Q=function(W){var Z=function(z){P=z;},K=function(){P=[];},R=function(z){P=z;},N=function(z){P=z;},M=function(z){P=z;},P;switch(W){case MediaPlayer.dependencies.FragmentModel.states.PENDING:Z(q);break;case MediaPlayer.dependencies.FragmentModel.states.LOADING:N(Y);break;case MediaPlayer.dependencies.FragmentModel.states.EXECUTED:R(G);break;case MediaPlayer.dependencies.FragmentModel.states.REJECTED:M(O);break;default:K();}return P;},x=function(z,W){if(z){var Z=z.mediaType,K=new Date,R=z.type,N=z.startTime,M=z.availabilityStartTime,P=z.duration,A=z.quality,y=z.range;this.metricsModel.addSchedulingInfo(Z,K,R,N,M,P,A,y,W);}},v=function(z){var W=z.data.request,Z=z.data.response,K=z.error;Y.splice(Y.indexOf(W),1),Z&&!K&&G.push(W),x.call(this,W,K?MediaPlayer.dependencies.FragmentModel.states.FAILED:MediaPlayer.dependencies.FragmentModel.states.EXECUTED),this.notify(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_FRAGMENT_LOADING_COMPLETED,{request:W,response:Z},K);},u=function(z){var W=this.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED,quality:z.data.quality,index:z.data.index})[0];W&&(H.call(this,G,W),isNaN(z.data.index)||(O.push(W),x.call(this,W,MediaPlayer.dependencies.FragmentModel.states.REJECTED)));},J=function(){var z=function(){V=!0;};z();},L=function(){var z=function(){V=!1;};z();};return {system:void 0,log:void 0,metricsModel:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,setup:function(){this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN]=J,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED]=L,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BYTES_REJECTED]=u,this[MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED]=v;},setLoader:function(z){this.fragmentLoader=z;},setContext:function(W){var Z=function(z){B=z;};Z(W);},getContext:function(){return B;},getIsPostponed:function(){return V;},addRequest:function(z){return !z||this.isFragmentLoadedOrPending(z)?!1:(q.push(z),x.call(this,z,MediaPlayer.dependencies.FragmentModel.states.PENDING),!0);},isFragmentLoadedOrPending:function(M){var P=function(z,W){return b9o.f7y("complete",z.action)&&b9o.h7y(z.action,W.action);},A=function(z,W){return !isNaN(z.index)&&!isNaN(W.index)&&(b9o.C7y(z.startTime,W.startTime)||b9o.W0y(z.url,W.url)&&void 0===z.range&&void 0===reg2.range);},y=function(z,W){return isNaN(z.index)&&isNaN(W.index)&&b9o.R0y(z.quality,W.quality);},E=function(z){var W,Z,K=!1,R=z.length;for(Z=0;b9o.M0y(R,Z);Z+=1)if(W=z[Z],A(M,W)||y(M,W)||P(M,W)){var N=function(){K=!0;};N();break;}return K;};return E(q)||E(Y)||E(G);},getRequests:function(z){var W,Z=[],K=[],R=1;if(!z||!z.state)return Z;b9o.b0y(z.state,Array)?(R=z.state.length,W=z.state):W=[z.state];for(var N=0;b9o.i0y(R,N);N+=1)Z=Q.call(this,W[N]),K=K.concat(F.call(this,Z,z));return K;},getLoadingTime:function(){var z,W,Z=0;for(W=b9o.T0y(G.length,1);b9o.B0y(W,0);W-=1)if(z=G[W],b9o.G0y(z.requestEndDate,Date)&&b9o.O0y(z.firstByteDate,Date)){var K=function(){Z=b9o.Q0y(z.requestEndDate.getTime(),z.firstByteDate.getTime());};K();break;}return Z;},removeExecutedRequest:function(z){H.call(this,G,z);},removeRejectedRequest:function(z){H.call(this,O,z);},removeExecutedRequestsBeforeTime:function(z){var W,Z=b9o.F0y(G.length,1),K=b9o.a0y(0,0),R=null;for(W=Z;b9o.v0y(W,0);W-=1)R=G[W],K=R.startTime,!isNaN(K)&&b9o.I0y(z,K)&&H.call(this,G,R);},cancelPendingRequests:function(W){var Z=this,K=q,R=K;return q=[],void 0!==W&&(q=K.filter(function(z){return b9o.d0y(z.quality,W)?!1:(R.splice(R.indexOf(z),1),!0);})),R.forEach(function(z){x.call(Z,z,MediaPlayer.dependencies.FragmentModel.states.CANCELED);}),R;},abortRequests:function(){var z=[];for(this.fragmentLoader.abort();b9o.t0y(Y.length,0);)z.push(Y[0]),H.call(this,Y,Y[0]);return Y=[],z;},executeRequest:function(z){var W=this,Z=q.indexOf(z);if(z&&-1!==Z)switch(q.splice(Z,1),z.action){case "complete":G.push(z),x.call(W,z,MediaPlayer.dependencies.FragmentModel.states.EXECUTED),W.notify(MediaPlayer.dependencies.FragmentModel.eventList.ENAME_STREAM_COMPLETED,{request:z});break;case "download":Y.push(z),x.call(W,z,MediaPlayer.dependencies.FragmentModel.states.LOADING),w.call(W,z);break;default:this.log("Unknown request action.");}},reset:function(){this.abortRequests(),this.cancelPendingRequests();}};},MediaPlayer.dependencies.FragmentModel.prototype={constructor:MediaPlayer.dependencies.FragmentModel},MediaPlayer.dependencies.FragmentModel.eventList={ENAME_STREAM_COMPLETED:"streamCompleted",ENAME_FRAGMENT_LOADING_STARTED:"fragmentLoadingStarted",ENAME_FRAGMENT_LOADING_COMPLETED:"fragmentLoadingCompleted"},MediaPlayer.dependencies.FragmentModel.states={PENDING:"pending",LOADING:"loading",EXECUTED:"executed",REJECTED:"rejected",CANCELED:"canceled",FAILED:"failed"},MediaPlayer.models.ManifestModel=function(){"use strict";var W;return {system:void 0,eventBus:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,getValue:function(){return W;},setValue:function(z){W=z,this.eventBus.dispatchEvent({type:MediaPlayer.events.MANIFEST_LOADED,data:z}),this.notify(MediaPlayer.models.ManifestModel.eventList.ENAME_MANIFEST_UPDATED,{manifest:z});}};},MediaPlayer.models.ManifestModel.prototype={constructor:MediaPlayer.models.ManifestModel},MediaPlayer.models.ManifestModel.eventList={ENAME_MANIFEST_UPDATED:"manifestUpdated"},MediaPlayer.models.MetricsModel=function(){"use strict";return {system:void 0,eventBus:void 0,adapter:void 0,streamMetrics:{},metricsChanged:function(){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRICS_CHANGED,data:{}});},metricChanged:function(z){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRIC_CHANGED,data:{stream:z}}),this.metricsChanged();},metricUpdated:function(z,W,Z){this.eventBus.dispatchEvent({type:MediaPlayer.events.METRIC_UPDATED,data:{stream:z,metric:W,value:Z}}),this.metricChanged(z);},metricAdded:function(W,Z,K){if(this.eventBus.dispatchEvent({type:MediaPlayer.events.METRIC_ADDED,data:{stream:W,metric:Z,value:K}}),this.metricChanged(W),CL.configs.isChromecast===!0||CL.manifest.disableChromecastSupport===!0){void 0===this.lastCheck&&(this.lastCheck=[]),void 0===this.lastCheck[W]&&(this.lastCheck[W]=new Date);var R,N,M=new Date;if(b9o.L0y(M.getTime()-this.lastCheck[W].getTime(),1e4)){var P,A=this.getMetricsFor(W);for(var y in A)if(R=A[y],Array.isArray(R)&&(P=Object.keys(R).length,b9o.z4y(P,50))){var E=function(z){A[y]=z;};if(R=R.slice(-10),b9o.K4y("HttpList",y))for(var B in R)N=R[B],Array.isArray(N)&&(N.trace=N.trace.slice(-3));E(R);}this.lastCheck[W]=M,M=null;}}},clearCurrentMetricsForType:function(z){delete  this.streamMetrics[z],this.metricChanged(z);},clearAllCurrentMetrics:function(){var z=this;this.streamMetrics={},this.metricsChanged.call(z);},getReadOnlyMetricsFor:function(z){return this.streamMetrics.hasOwnProperty(z)?this.streamMetrics[z]:null;},getMetricsFor:function(z){var W;return this.streamMetrics.hasOwnProperty(z)?W=this.streamMetrics[z]:(W=this.system.getObject("metrics"),this.streamMetrics[z]=W),W;},addTcpConnection:function(z,W,Z,K,R,N){var M=new MediaPlayer.vo.metrics.TCPConnection;return M.tcpid=W,M.dest=Z,M.topen=K,M.tclose=R,M.tconnect=N,this.getMetricsFor(z).TcpList.push(M),this.metricAdded(z,this.adapter.metricsList.TCP_CONNECTION,M),M;},addHttpRequest:function(z,W,Z,K,R,N,M,P,A,y,E,B,G){var q=new MediaPlayer.vo.metrics.HTTPRequest;return q.stream=z,q.tcpid=W,q.type=Z,q.url=K,q.actualurl=R,q.range=N,q.trequest=M,q.tresponse=P,q.tfinish=A,q.responsecode=y,q.interval=E,q.mediaduration=B,q.responseHeaders=G,this.getMetricsFor(z).HttpList.push(q),this.metricAdded(z,this.adapter.metricsList.HTTP_REQUEST,q),q;},appendHttpTrace:function(z,W,Z,K){var R=new MediaPlayer.vo.metrics.HTTPRequest.Trace;return R.s=W,R.d=Z,R.b=K,z.trace.push(R),this.metricUpdated(z.stream,this.adapter.metricsList.HTTP_REQUEST_TRACE,z),R;},addTrackSwitch:function(z,W,Z,K,R){var N=new MediaPlayer.vo.metrics.TrackSwitch;return N.t=W,N.mt=Z,N.to=K,N.lto=R,this.getMetricsFor(z).RepSwitchList.push(N),this.metricAdded(z,this.adapter.metricsList.TRACK_SWITCH,N),N;},addBufferLevel:function(z,W,Z){var K=new MediaPlayer.vo.metrics.BufferLevel;return K.t=W,K.level=Z,this.getMetricsFor(z).BufferLevel.push(K),this.metricAdded(z,this.adapter.metricsList.BUFFER_LEVEL,K),K;},addBufferState:function(z,W,Z){var K=new MediaPlayer.vo.metrics.BufferState;return K.target=Z,K.state=W,this.getMetricsFor(z).BufferState.push(K),this.metricAdded(z,this.adapter.metricsList.BUFFER_STATE,K),K;},addDVRInfo:function(z,W,Z,K){var R=new MediaPlayer.vo.metrics.DVRInfo;return R.time=W,R.range=K,R.manifestInfo=Z,this.getMetricsFor(z).DVRInfo.push(R),this.metricAdded(z,this.adapter.metricsList.DVR_INFO,R),R;},addDroppedFrames:function(z,W){var Z=new MediaPlayer.vo.metrics.DroppedFrames,K=this.getMetricsFor(z).DroppedFrames;Z.time=W.creationTime,Z.droppedFrames=W.droppedVideoFrames;var R=b9o.N4y(Z.droppedFrames,CL.configs.droppedFramesCountOffset);return void 0!==CL.manifest.ABRParameters.droppedFrameThreshold&&b9o.j4y(CL.manifest.ABRParameters.droppedFrameThreshold,0)&&b9o.y4y(R,CL.manifest.ABRParameters.droppedFrameThreshold)&&(CL.configs.droppedFramesCountOffset+=R,CL.configs.limitRepresentation=!0,CL.configs.lowerRepresentation=!0),b9o.A4y(K.length,0)&&b9o.Y4y(K[K.length-1],Z)?K[b9o.l4y(K.length,1)]:(K.push(Z),this.metricAdded(z,this.adapter.metricsList.DROPPED_FRAMES,Z),Z);},addSchedulingInfo:function(z,W,Z,K,R,N,M,P,A){var y=new MediaPlayer.vo.metrics.SchedulingInfo;return y.mediaType=z,y.t=W,y.type=Z,y.startTime=K,y.availabilityStartTime=R,y.duration=N,y.quality=M,y.range=P,y.state=A,this.getMetricsFor(z).SchedulingInfo.push(y),this.metricAdded(z,this.adapter.metricsList.SCHEDULING_INFO,y),y;},addManifestUpdate:function(z,W,Z,K,R,N,M,P,A,y){var E=new MediaPlayer.vo.metrics.ManifestUpdate,B=this.getMetricsFor("stream");return E.mediaType=z,E.type=W,E.requestTime=Z,E.fetchTime=K,E.availabilityStartTime=R,E.presentationStartTime=N,E.clientTimeOffset=M,E.currentTime=P,E.buffered=A,E.latency=y,B.ManifestUpdate.push(E),this.metricAdded(z,this.adapter.metricsList.MANIFEST_UPDATE,E),E;},updateManifestUpdateInfo:function(W,Z){var K=function(z){W[R]=z[R];};for(var R in Z)K(Z);this.metricUpdated(W.mediaType,this.adapter.metricsList.MANIFEST_UPDATE,W);},addManifestUpdateStreamInfo:function(z,W,Z,K,R){var N=new MediaPlayer.vo.metrics.ManifestUpdate.StreamInfo;return N.id=W,N.index=Z,N.start=K,N.duration=R,z.streamInfo.push(N),this.metricUpdated(z.mediaType,this.adapter.metricsList.MANIFEST_UPDATE_STREAM_INFO,z),N;},addManifestUpdateTrackInfo:function(z,W,Z,K,R,N,M,P){var A=new MediaPlayer.vo.metrics.ManifestUpdate.TrackInfo;return A.id=W,A.index=Z,A.streamIndex=K,A.mediaType=R,A.startNumber=M,A.fragmentInfoType=P,A.presentationTimeOffset=N,z.trackInfo.push(A),this.metricUpdated(z.mediaType,this.adapter.metricsList.MANIFEST_UPDATE_TRACK_INFO,z),A;},addPlayList:function(z,W,Z,K){var R=new MediaPlayer.vo.metrics.PlayList;return R.stream=z,R.start=W,R.mstart=Z,R.starttype=K,this.getMetricsFor(z).PlayList.push(R),this.metricAdded(z,this.adapter.metricsList.PLAY_LIST,R),R;},appendPlayListTrace:function(z,W,Z,K,R,N,M,P){var A=new MediaPlayer.vo.metrics.PlayList.Trace;return A.representationid=W,A.subreplevel=Z,A.start=K,A.mstart=R,A.duration=N,A.playbackspeed=M,A.stopreason=P,z.trace.push(A),this.metricUpdated(z.stream,this.adapter.metricsList.PLAY_LIST_TRACE,z),A;}};},MediaPlayer.models.MetricsModel.prototype={constructor:MediaPlayer.models.MetricsModel},MediaPlayer.models.ProtectionModel={},MediaPlayer.models.ProtectionModel.eventList={ENAME_NEED_KEY:"needkey",ENAME_KEY_SYSTEM_ACCESS_COMPLETE:"keySystemAccessComplete",ENAME_KEY_SYSTEM_SELECTED:"keySystemSelected",ENAME_VIDEO_ELEMENT_SELECTED:"videoElementSelected",ENAME_SERVER_CERTIFICATE_UPDATED:"serverCertificateUpdated",ENAME_KEY_MESSAGE:"keyMessage",ENAME_KEY_ADDED:"keyAdded",ENAME_KEY_ERROR:"keyError",ENAME_KEY_SESSION_CREATED:"keySessionCreated",ENAME_KEY_SESSION_REMOVED:"keySessionRemoved",ENAME_KEY_SESSION_CLOSED:"keySessionClosed",ENAME_KEY_STATUSES_CHANGED:"keyStatusesChanged"},MediaPlayer.models.ProtectionModel_01b=function(){var V,w=null,H=null,D=[],F=[],Q=function(){var K=this;return {handleEvent:function(z){var W=null;switch(z.type){case H.needkey:K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,new MediaPlayer.vo.protection.NeedKey(z.initData,"cenc"));break;case H.keyerror:if(W=v(F,z.sessionId),W||(W=v(D,z.sessionId)),W){var Z="";switch(z.errorCode.code){case 1:Z+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:Z+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:Z+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:Z+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:Z+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:Z+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.";}Z+="  System Code = "+z.systemCode,K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new MediaPlayer.vo.protection.KeyError(W,Z));}else K.log("No session token found for key error");break;case H.keyadded:W=v(F,z.sessionId),W||(W=v(D,z.sessionId)),W?K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED,W):K.log("No session token found for key added");break;case H.keymessage:V=b9o.n4y(null,z.sessionId)&&void 0!==z.sessionId,V?(W=v(F,z.sessionId),!W&&b9o.c4y(D.length,0)&&(W=D.shift(),F.push(W),W.sessionID=z.sessionId)):b9o.k4y(D.length,0)&&(W=D.shift(),F.push(W),b9o.D4y(0,D.length)&&K.errHandler.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),W?(W.keyMessage=z.message,K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new MediaPlayer.vo.protection.KeyMessage(W,z.message,z.defaultURL))):K.log("No session token found for key message");}}};},x=null,v=function(z,W){if(W&&z){for(var Z=z.length,K=0;b9o.w4y(Z,K);K++)if(b9o.u4y(z[K].sessionID,W))return z[K];return null;}return null;},u=function(){w.removeEventListener(H.keyerror,x),w.removeEventListener(H.needkey,x),w.removeEventListener(H.keymessage,x),w.removeEventListener(H.keyadded,x);};return {system:void 0,log:void 0,errHandler:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,setup:function(){x=Q.call(this);},init:function(){var z=document.createElement("video");H=MediaPlayer.models.ProtectionModel_01b.detect(z);},teardown:function(){w&&u();for(var z=0;b9o.s4y(z,F.length);z++)this.closeKeySession(F[z]);},requestKeySystemAccess:function(z){var W=w;W||(W=document.createElement("video"));for(var Z=!1,K=0;b9o.e4y(K,z.length);K++)for(var R=z[K].ks.systemString,N=z[K].configs,M=null,P=null,A=0;b9o.U4y(A,N.length);A++){var y=N[A].videoCapabilities;if(y&&b9o.o9y(0,y.length)){var E=function(){P=[];};E();for(var B=0;b9o.Z9y(B,y.length);B++)b9o.p9y("",W.canPlayType(y[B].contentType,R))&&P.push(y[B]);}if(!(!M&&!P||M&&b9o.P9y(0,M.length)||P&&b9o.r9y(0,P.length))){var G=function(){Z=!0;};G();var q=new MediaPlayer.vo.protection.KeySystemConfiguration(M,P),Y=this.protectionExt.getKeySystemBySystemString(R),O=new MediaPlayer.vo.protection.KeySystemAccess(Y,q);this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,O);break;}}Z||this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied! -- No valid audio/video content configurations detected!");},selectKeySystem:function(z){this.keySystem=z.keySystem,this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED);},setMediaElement:function(z){w&&u(),w=z,w.addEventListener(H.keyerror,x),w.addEventListener(H.needkey,x),w.addEventListener(H.keymessage,x),w.addEventListener(H.keyadded,x),this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_VIDEO_ELEMENT_SELECTED);},createKeySession:function(z){if(!this.keySystem)throw  new Error("Can not create sessions until you have selected a key system");var W;for(W=0;b9o.S9y(W,F.length);W++)if(this.protectionExt.initDataEquals(z,F[W].initData))return ;for(W=0;b9o.E9y(W,D.length);W++)if(this.protectionExt.initDataEquals(z,D[W].initData))return ;if(V||b9o.q9y(0,F.length)){var Z={prototype:(new MediaPlayer.models.SessionToken).prototype,sessionID:null,initData:z,getSessionID:function(){return this.sessionID;}};return D.push(Z),w[H.generateKeyRequest](this.keySystem.systemString,new Uint8Array(z)),Z;}throw  new Error("Multiple sessions not allowed!");},updateKeySession:function(z,W){var Z=z.sessionID;if(this.protectionExt.isClearKey(this.keySystem))for(var K=0;b9o.J9y(K,W.keyPairs.length);K++)w[H.addKey](this.keySystem.systemString,W.keyPairs[K].key,W.keyPairs[K].keyID,Z);else w[H.addKey](this.keySystem.systemString,W,z.initData,Z);},closeKeySession:function(z){w[H.cancelKeyRequest](this.keySystem.systemString,z.sessionID);},setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){}};},MediaPlayer.models.ProtectionModel_01b.prototype={constructor:MediaPlayer.models.ProtectionModel_01b},MediaPlayer.models.ProtectionModel_01b.APIs=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],MediaPlayer.models.ProtectionModel_01b.detect=function(z){for(var W=MediaPlayer.models.ProtectionModel_01b.APIs,Z=0;b9o.H9y(Z,W.length);Z++){var K=W[Z];if("function"==typeof z[K.generateKeyRequest]&&"function"==typeof z[K.addKey]&&"function"==typeof z[K.cancelKeyRequest])return K;}return null;},MediaPlayer.models.ProtectionModel_21Jan2015=function(){var y=null,E=null,B=[],G=function(M,P){var A=this;!function(K){var R=M[K].ks,N=M[K].configs;b9o.V9y(0,N[0].audioCapabilities.length)&&(N[0].audioCapabilities=[{contentType:'audio/mp4;codecs="mp4a.40.2"',robustness:void 0}]),(CL.manifest.fixVideoCodec===!0||b9o.x9y(0,CL.configs.tracks.video.length))&&(N[0].videoCapabilities=[{contentType:'video/mp4;codecs="avc1.42c00c"',robustness:void 0}]),navigator.requestMediaKeySystemAccess(R.systemString,N).then(function(z){var W="function"==typeof z.getConfiguration?z.getConfiguration():null,Z=new MediaPlayer.vo.protection.KeySystemAccess(R,W);Z.mksa=z,A.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,Z);})["catch"](function(){++K<M.length?G.call(A,M,K):A.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied!");});}(P);},q=function(){var W=this;return {handleEvent:function(z){switch(z.type){case "encrypted":W.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,new MediaPlayer.vo.protection.NeedKey(z.initData,z.initDataType));}}};},Y=null,O=function(z){for(var W=0;b9o.m9y(W,B.length);W++)if(b9o.X9y(B[W],z)){B.splice(W,1);break;}},V=function(W,Z){var K=this,R={prototype:(new MediaPlayer.models.SessionToken).prototype,session:W,initData:Z,handleEvent:function(z){switch(z.type){case "keystatuseschange":K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_STATUSES_CHANGED,this);break;case "message":K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new MediaPlayer.vo.protection.KeyMessage(this,z.message,void 0,z.messageType));}},getSessionID:function(){return this.session.sessionId;},getExpirationTime:function(){return this.session.expiration;},getKeyStatuses:function(){return this.session.keyStatuses;}};return W.addEventListener("keystatuseschange",R),W.addEventListener("message",R),W.closed.then(function(){O(R),K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,R.getSessionID());}),B.push(R),R;};return {system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,setup:function(){Y=q.call(this);},init:function(){},teardown:function(){y&&y.removeEventListener("encrypted",Y);for(var z=0;b9o.g9y(z,B.length);z++)this.closeKeySession(B[z]);},requestKeySystemAccess:function(z){G.call(this,z,0);},selectKeySystem:function(W){var Z=this;W.mksa.createMediaKeys().then(function(z){Z.keySystem=W.keySystem,E=z,y&&y.setMediaKeys(E).then(function(){Z.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED);},function(){Z.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+W.keySystem.systemString+")! Could not create MediaKeys");});})["catch"](function(){Z.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+W.keySystem.systemString+")! Could not create MediaKeys -- TODO");});},setMediaElement:function(z){y&&y.removeEventListener("encrypted",Y),y=z,y.addEventListener("encrypted",Y),E&&y.setMediaKeys(E);},setServerCertificate:function(W){if(!this.keySystem||!E)throw  new Error("Can not set server certificate until you have selected a key system");var Z=this;E.setServerCertificate(W).then(function(){Z.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED);})["catch"](function(z){Z.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_SERVER_CERTIFICATE_UPDATED,null,"Error updating server certificate -- "+z.name);});},createKeySession:function(W,Z){if(!this.keySystem||!E)throw  new Error("Can not create sessions until you have selected a key system");for(var K=0;b9o.f9y(K,B.length);K++)if(this.protectionExt.initDataEquals(W,B[K].initData))return ;var R=E.createSession(Z),N=V.call(this,R,W),M=this;R.generateRequest("cenc",W).then(function(){M.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,N);})["catch"](function(z){O(N),M.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,"Error generating key request -- "+z.name);});},updateKeySession:function(W,Z){var K=W.session,R=this;this.protectionExt.isClearKey(this.keySystem)&&(Z=Z.toJWK()),K.update(Z)["catch"](function(z){R.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new MediaPlayer.vo.protection.KeyError(W,"Error sending update() message! "+z.name));});},loadKeySession:function(Z){if(!this.keySystem||!E)throw  new Error("Can not load sessions until you have selected a key system");var K=E.createSession(),R=this;K.load(Z).then(function(z){if(z){var W=V.call(this,K);R.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,W);}else R.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,"Could not load session! Invalid Session ID ("+Z+")");})["catch"](function(z){R.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,null,"Could not load session ("+Z+")! "+z.name);});},removeKeySession:function(W){var Z=W.session,K=this;Z.remove().then(function(){K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,W.getSessionID());})["catch"](function(z){K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_REMOVED,null,"Error removing session ("+W.getSessionID()+"). "+z.name);});},closeKeySession:function(W){var Z=W.session;Z.removeEventListener("keystatuseschange",W),Z.removeEventListener("message",W);var K=this;Z.close()["catch"](function(z){K.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,null,"Error closing session ("+W.getSessionID()+") "+z.name);});}};},MediaPlayer.models.ProtectionModel_21Jan2015.detect=function(z){return void 0===z.onencrypted||void 0===z.mediaKeys?!1:void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess?!1:!0;},MediaPlayer.models.ProtectionModel_21Jan2015.prototype={constructor:MediaPlayer.models.ProtectionModel_21Jan2015},MediaPlayer.models.ProtectionModel_3Feb2014=function(){var H=null,D=null,F=null,Q=null,x=[],v=function(){var W=this;return {handleEvent:function(z){switch(z.type){case Q.needkey:W.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_NEED_KEY,new MediaPlayer.vo.protection.NeedKey(z.initData,"cenc"));}}};},u=null,J=function(){var z=function(){H[Q.setMediaKeys](D),this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_VIDEO_ELEMENT_SELECTED);};b9o.h9y(H.readyState,1)?z.call(this):H.addEventListener("loadedmetadata",z.bind(this));},L=function(Z,K){var R=this;return {prototype:(new MediaPlayer.models.SessionToken).prototype,session:Z,initData:K,handleEvent:function(z){switch(z.type){case Q.error:var W="KeyError";R.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ERROR,new MediaPlayer.vo.protection.KeyError(this,W));break;case Q.message:R.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_MESSAGE,new MediaPlayer.vo.protection.KeyMessage(this,z.message,z.destinationURL));break;case Q.ready:R.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_ADDED,this);break;case Q.close:R.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CLOSED,this.getSessionID());}},getSessionID:function(){return this.session.sessionId;}};};return {system:void 0,notify:void 0,subscribe:void 0,unsubscribe:void 0,protectionExt:void 0,keySystem:null,setup:function(){u=v.call(this);},init:function(){var z=document.createElement("video");Q=MediaPlayer.models.ProtectionModel_3Feb2014.detect(z);},teardown:function(){H&&H.removeEventListener(Q.needkey,u);for(var z=0;b9o.C9y(z,x.length);z++)this.closeKeySession(x[z]);},requestKeySystemAccess:function(z){for(var W=!1,Z=0;b9o.W5g(Z,z.length);Z++)for(var K=z[Z].ks.systemString,R=z[Z].configs,N=null,M=null,P=0;b9o.R5g(P,R.length);P++){var A=R[P].audioCapabilities,y=R[P].videoCapabilities;if(A&&b9o.M5g(0,A.length)){var E=function(){N=[];};E();for(var B=0;b9o.b5g(B,A.length);B++)window[Q.MediaKeys].isTypeSupported(K,A[B].contentType)&&N.push(A[B]);}if(y&&b9o.i5g(0,y.length)){var G=function(){M=[];};G();for(var q=0;b9o.T5g(q,y.length);q++)window[Q.MediaKeys].isTypeSupported(K,y[q].contentType)&&M.push(y[q]);}if(!(!N&&!M||N&&b9o.B5g(0,N.length)||M&&b9o.G5g(0,M.length))){var Y=function(){W=!0;};Y();var O=new MediaPlayer.vo.protection.KeySystemConfiguration(N,M),V=this.protectionExt.getKeySystemBySystemString(K),w=new MediaPlayer.vo.protection.KeySystemAccess(V,O);this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,w);break;}}W||this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_ACCESS_COMPLETE,null,"Key system access denied! -- No valid audio/video content configurations detected!");},selectKeySystem:function(W){try{D=W.mediaKeys=new window[Q.MediaKeys](W.keySystem.systemString),this.keySystem=W.keySystem,F=W,H&&J.call(this),this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED);}catch(z){this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SYSTEM_SELECTED,null,"Error selecting keys system ("+this.keySystem.systemString+")! Could not create MediaKeys -- TODO");}},setMediaElement:function(z){H&&H.removeEventListener(Q.needkey,u),H=z,H.addEventListener(Q.needkey,u),D&&J.call(this);},createKeySession:function(z){if(!this.keySystem||!D||!F)throw  new Error("Can not create sessions until you have selected a key system");for(var W=0;b9o.O5g(W,x.length);W++)if(this.protectionExt.initDataEquals(z,x[W].initData))return ;var Z=F.ksConfiguration.videoCapabilities[0].contentType,K=D.createSession(Z,new Uint8Array(z)),R=L.call(this,K,z);K.addEventListener(Q.error,R),K.addEventListener(Q.message,R),K.addEventListener(Q.ready,R),K.addEventListener(Q.close,R),x.push(R),this.notify(MediaPlayer.models.ProtectionModel.eventList.ENAME_KEY_SESSION_CREATED,R);},updateKeySession:function(z,W){var Z=z.session;Z.update(this.protectionExt.isClearKey(this.keySystem)?new Uint8Array(W.toJWK()):W);},closeKeySession:function(z){var W=z.session;W.removeEventListener(Q.error,z),W.removeEventListener(Q.message,z),W.removeEventListener(Q.ready,z),W.removeEventListener(Q.close,z);for(var Z=0;b9o.Q5g(Z,x.length);Z++)if(b9o.F5g(x[Z],z)){x.splice(Z,1);break;}W[Q.release]();},setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){}};},MediaPlayer.models.ProtectionModel_3Feb2014.APIs=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}],MediaPlayer.models.ProtectionModel_3Feb2014.detect=function(z){for(var W=MediaPlayer.models.ProtectionModel_3Feb2014.APIs,Z=0;b9o.a5g(Z,W.length);Z++){var K=W[Z];if("function"==typeof z[K.setMediaKeys]&&"function"==typeof window[K.MediaKeys])return K;}return null;},MediaPlayer.models.ProtectionModel_3Feb2014.prototype={constructor:MediaPlayer.models.ProtectionModel_3Feb2014},MediaPlayer.models.URIQueryAndFragmentModel=function(){"use strict";var A=new MediaPlayer.vo.URIFragmentData,y=[],E=function(N){function M(z,W,Z,K){var R=K[0].split(/[=]/);return K.push({key:R[0],value:R[1]}),K.shift(),K;}if(!N)return null;var P=[];return b9o.v5g(y.length,0)&&(y=y.reduce(M,null)),b9o.I5g(P.length,0)&&(P=P.reduce(M,null),P.forEach(function(W){var Z=function(z){A[W.key]=z.value;};Z(W);})),N;};return {parseURI:E,getURIFragmentData:function(){return A;},getURIQueryData:function(){return y;},reset:function(){A=new MediaPlayer.vo.URIFragmentData,y=[];}};},MediaPlayer.models.URIQueryAndFragmentModel.prototype={constructor:MediaPlayer.models.URIQueryAndFragmentModel},MediaPlayer.models.VideoModel=function(){"use strict";var K,R=[],N=function(){return b9o.d5g(R.length,0);},M=function(z){b9o.t5g(null,z)||K.seeking||(this.setPlaybackRate(0),R[z]!==!0&&(R.push(z),R[z]=!0));},P=function(z){if(b9o.L5g(null,z)){var W=function(){R[z]=!1;};W();var Z=R.indexOf(z);-1!==Z&&R.splice(Z,1),N()===!1&&this.setPlaybackRate(1);}},A=function(z,W){W?M.call(this,z):P.call(this,z);},y=function(z){var W=z.sender.streamProcessor.getType();A.call(this,W,!z.data.hasSufficientBuffer);};return {system:void 0,setup:function(){this.bufferLevelStateChanged=y;},play:function(){b9o.z3g(null,CL.configs.minStartTime)&&b9o.K3g(CL.configs.minStartTime,0)&&b9o.N3g(0,K.currentTime)&&b9o.j3g(0,CL.configs.isIE11),K.play();},pause:function(){K.pause();},isPaused:function(){return K.paused;},getPlaybackRate:function(){return K.playbackRate;},setPlaybackRate:function(z){!K||b9o.y3g(K.readyState,2)||(K.playbackRate=z);},getCurrentTime:function(){var z=K.currentTime;return z-=b9o.A3g(CL.configs.ssTimeOffset.video,CL.configs.ssTimeOffsetTimescale.video),z=Math.max(0,z);},setCurrentTime:function(z){z+=b9o.Y3g(CL.configs.ssTimeOffset.video,CL.configs.ssTimeOffsetTimescale.video),b9o.l3g(K.currentTime,z)&&(K.currentTime=z);},listen:function(z,W){K.addEventListener(z,W,!1);},unlisten:function(z,W){K.removeEventListener(z,W,!1);},getElement:function(){return K;},setElement:function(W){var Z=function(z){K=z;};Z(W);},setSource:function(W){var Z=function(z){K.src=z;};Z(W);}};},MediaPlayer.models.VideoModel.prototype={constructor:MediaPlayer.models.VideoModel},MediaPlayer.dependencies.protection.CommonEncryption={findCencContentProtection:function(z){for(var W=null,Z=0;b9o.n3g(Z,z.length);++Z){var K=z[Z];b9o.c3g("urn:mpeg:dash:mp4protection:2011",K.schemeIdUri.toLowerCase())&&b9o.k3g("cenc",K.value.toLowerCase())&&(W=K);}return W;},getPSSHData:function(z){return z.slice(32);},getPSSHForKeySystem:function(z,W){var Z=MediaPlayer.dependencies.protection.CommonEncryption.parsePSSHList(W);return Z.hasOwnProperty(z.uuid.toLowerCase())?Z[z.uuid.toLowerCase()]:null;},parseInitDataFromContentProtection:function(z){return b9o.D3g("pssh",z)?BASE64.decodeArray(z.pssh.__text).buffer:null;},parsePSSHList:function(W){if(b9o.w3g(null,W))return [];for(var Z=new DataView(W),K=!1,R={},N=0;!K;){var M=function(z){N=z;},P=function(z){N=z;};var A,y,E,B,G,q=N;if(b9o.u3g(N,Z.buffer.byteLength))break;if(A=Z.getUint32(N),y=N+A,N+=4,b9o.s3g(1886614376,Z.getUint32(N)))if(N+=4,E=Z.getUint8(N),b9o.e3g(0,E)||b9o.U3g(1,E)){N+=1,N+=3,B="";var Y,O;for(Y=0;b9o.o2g(4,Y);Y++)O=Z.getUint8(N+Y).toString(16),B+=b9o.Z2g(1,O.length)?"0"+O:O;for(N+=4,B+="-",Y=0;b9o.p2g(2,Y);Y++)O=Z.getUint8(N+Y).toString(16),B+=b9o.P2g(1,O.length)?"0"+O:O;for(N+=2,B+="-",Y=0;b9o.r2g(2,Y);Y++)O=Z.getUint8(N+Y).toString(16),B+=b9o.S2g(1,O.length)?"0"+O:O;for(N+=2,B+="-",Y=0;b9o.E2g(2,Y);Y++)O=Z.getUint8(N+Y).toString(16),B+=b9o.q2g(1,O.length)?"0"+O:O;for(N+=2,B+="-",Y=0;b9o.J2g(6,Y);Y++)O=Z.getUint8(N+Y).toString(16),B+=b9o.H2g(1,O.length)?"0"+O:O;N+=6,B=B.toLowerCase(),G=Z.getUint32(N),N+=4,R[B]=Z.buffer.slice(q,y),N=y;}else P(y);else M(y);}return R;}},MediaPlayer.dependencies.protection.KeySystem={eventList:{ENAME_LICENSE_REQUEST_COMPLETE:"licenseRequestComplete"}},MediaPlayer.dependencies.protection.KeySystem_Access=function(){"use strict";},MediaPlayer.dependencies.protection.KeySystem_Access.prototype={constructor:MediaPlayer.dependencies.protection.KeySystem_Access},MediaPlayer.dependencies.protection.KeySystem_ClearKey=function(){"use strict";var Y,O="org.w3.clearkey",V="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",w=function(K,R){var N,M=this,P=Y&&Y.laURL&&b9o.V2g("",Y.laURL)?Y.laURL:null,A=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(K)));if(P){for(P+="/?",N=0;b9o.x2g(N,A.kids.length);N++)P+=A.kids[N]+"&";P=P.substring(0,b9o.m2g(P.length,1));var y=new XMLHttpRequest;y.onload=function(){if(b9o.X2g(200,y.status)){for(y.response.hasOwnProperty("keys")||M.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error("DRM: ClearKey Remote update, Illegal response JSON")),N=0;b9o.g2g(N,y.response.keys.length);N++){var z=y.response.keys[N],W=z.kid.replace(/=/g,"");G=z.k.replace(/=/g,""),E.push(new MediaPlayer.vo.protection.KeyPair(W,G));}var Z=new MediaPlayer.vo.protection.LicenseRequestComplete(new MediaPlayer.vo.protection.ClearKeyKeySet(E),R);M.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,Z);}else M.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error('DRM: ClearKey Remote update, XHR aborted. status is "'+y.statusText+'" ('+y.status+"), readyState is "+y.readyState));},y.onabort=function(){M.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error('DRM: ClearKey update, XHR aborted. status is "'+y.statusText+'" ('+y.status+"), readyState is "+y.readyState));},y.onerror=function(){M.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error('DRM: ClearKey update, XHR error. status is "'+y.statusText+'" ('+y.status+"), readyState is "+y.readyState));},y.open("GET",P),y.responseType="json",y.send();}else if(Y.clearkeys){var E=[];for(N=0;b9o.f2g(N,A.kids.length);N++){var B=A.kids[N],G=Y.clearkeys.hasOwnProperty(B)?Y.clearkeys[B]:null;G||this.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error("DRM: ClearKey keyID ("+B+") is not known!")),E.push(new MediaPlayer.vo.protection.KeyPair(B,G));}var q=new MediaPlayer.vo.protection.LicenseRequestComplete(new MediaPlayer.vo.protection.ClearKeyKeySet(E),R);this.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,q);}else M.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error("DRM: ClearKey has no way (URL or protection data) to retrieve keys"));};return {system:void 0,schemeIdURI:"urn:uuid:"+V,systemString:O,uuid:V,notify:void 0,subscribe:void 0,unsubscribe:void 0,init:function(W){var Z=function(z){Y=z;};Z(W);},doLicenseRequest:function(z,W,Z){w.call(this,z,Z);},getInitData:MediaPlayer.dependencies.protection.CommonEncryption.parseInitDataFromContentProtection};},MediaPlayer.dependencies.protection.KeySystem_ClearKey.prototype={constructor:MediaPlayer.dependencies.protection.KeySystem_ClearKey},MediaPlayer.dependencies.protection.KeySystem_FairPlay=function(){"use strict";var K,R="com.apple.fps.2_0",N="29701fe4-3cc7-4a34-8c5b-ae90c7439a47",M=new castLabsDashJS.classes.Utils,P=function(){console.log("FPS requesting license");},A=function(){return null;},y=function(z,W){return b9o.h2g(M.arrToBase64(z),M.arrToBase64(W));};return {schemeIdURI:"urn:uuid:"+N,systemString:R,uuid:N,notify:void 0,subscribe:void 0,unsubscribe:void 0,init:function(W){var Z=function(z){K=z;};Z(W);},doLicenseRequest:P,getInitData:A,initDataEquals:y};},MediaPlayer.dependencies.protection.KeySystem_FairPlay.prototype={constructor:MediaPlayer.dependencies.protection.KeySystem_FairPlay},MediaPlayer.dependencies.protection.KeySystem_PlayReady=function(){"use strict";var x,v="com.microsoft.playready",u="9a04f079-9840-4286-ab92-e65be0885f95",J=function(Z,K,R){var N=function(z){Y[A]=z[A];},M=function(z){Y[H[F].childNodes[0].nodeValue]=z[F].childNodes[0].nodeValue;},P,A,y,E,B,G,q=null,Y={},O=new DOMParser,V=this;if(G=new Uint16Array(Z.buffer),B=String.fromCharCode.apply(null,G),E=O.parseFromString(B,"application/xml"),E.getElementsByTagName("Challenge")[0]){var w=E.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;w&&(q=BASE64.decode(w));}else V.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new MediaPlayer.vo.Error(null,"DRM: playready update, can not find Challenge in keyMessage",null));var H=E.getElementsByTagName("name"),D=E.getElementsByTagName("value");b9o.C2g(H.length,D.length)&&V.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new MediaPlayer.vo.Error(null,"DRM: playready update, invalid header name/value pair in keyMessage",null));for(var F=0;b9o.W8g(F,H.length);F++)M(D);x&&x.bearerToken&&(Y.Authorization=x.bearerToken);var Q=new XMLHttpRequest;if(CL.configs.isIE11||(Q.timeout=CL.manifest.licenseRequestTimeout),Q.onload=function(){if(b9o.R8g(200,Q.status)){var z=new MediaPlayer.vo.protection.LicenseRequestComplete(new Uint8Array(Q.response),R);V.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,z);}else{var W={message:'DRM: playready update, XHR status is "'+Q.statusText+'" ('+Q.status+"), expected to be 200. readyState is "+Q.readyState+".  ",response:this.response?String.fromCharCode.apply(null,new Uint8Array(this.response)):"NONE",status:Q.status,statusText:Q.statusText,responseURL:Q.responseURL};V.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,W);}},Q.onabort=function(){var z={message:'DRM: playready update, XHR aborted. status is "'+Q.statusText+'" ('+Q.status+"), readyState is "+Q.readyState,response:"NONE",status:Q.status,statusText:Q.statusText,responseURL:Q.responseURL};V.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,z);},Q.onerror=function(){var z={message:'DRM: playready update, XHR error. status is "'+Q.statusText+'" ('+Q.status+"), readyState is "+Q.readyState,response:"NONE",status:Q.status,statusText:Q.statusText,responseURL:Q.responseURL};V.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,z);},Q.ontimeout=function(){var z={message:'DRM: playready update, XHR timeout. status is "'+Q.statusText+'" ('+Q.status+"), readyState is "+Q.readyState,response:"NONE",status:Q.status,statusText:Q.statusText,responseURL:Q.responseURL};V.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,z);},CL.configs.isIE11||(Q.timeout=CL.manifest.licenseRequestTimeout),Q.open("POST",x&&x.laURL&&b9o.M8g("",x.laURL)?x.laURL:K),Q.responseType="arraybuffer",y=x?x.httpRequestHeaders:null)for(A in y)N(y);for(P in Y)b9o.b8g("authorization",P.toLowerCase())&&(Q.withCredentials=!0),Q.setRequestHeader(P,Y[P]);x&&x.withCredentials&&(Q.withCredentials=!0),Q.send(q);},L=function(z){var W,Z,K,R,N,M=0,P=new Uint8Array([112,115,115,104,0,0,0,0]),A=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),y=null;if(b9o.i8g("pro",z))y=BASE64.decodeArray(z.pro.text);else{if(!(b9o.T8g("prheader",z)))return null;y=BASE64.decodeArray(z.prheader.text);}return W=y.length,Z=4+P.length+A.length+4+W,K=new ArrayBuffer(Z),R=new Uint8Array(K),N=new DataView(K),N.setUint32(M,Z),M+=4,R.set(P,M),M+=P.length,R.set(A,M),M+=A.length,N.setUint32(M,W),M+=4,R.set(y,M),M+=W,R.buffer;},I=function(){return !1;};return {schemeIdURI:"urn:uuid:"+u,systemString:v,uuid:u,notify:void 0,subscribe:void 0,unsubscribe:void 0,init:function(W){var Z=function(z){x=z;};Z(W);},doLicenseRequest:J,getInitData:L,initDataEquals:I};},MediaPlayer.dependencies.protection.KeySystem_PlayReady.prototype={constructor:MediaPlayer.dependencies.protection.KeySystem_PlayReady},MediaPlayer.dependencies.protection.KeySystem_Widevine=function(){"use strict";var x="com.widevine.alpha",v="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",u,J=new castLabsDashJS.classes.Utils,L=function(B,G,q){var Y=new XMLHttpRequest,O={},V,w,H,D,F=this;if(D=u&&u.laURL&&b9o.B8g("",u.laURL)?u.laURL:G){var Q=function(z){O[V]=z[V];};if(CL.configs.isIE11||(Y.timeout=CL.manifest.licenseRequestTimeout),Y.open("POST",D,!0),Y.responseType="arraybuffer",Y.onload=function(){if(b9o.G8g(200,this.status)){var W=function(z){Z=z;};for(var Z,K=new Uint8Array(this.response),R="",N=0;b9o.O8g(N,K.byteLength);++N)R+=String.fromCharCode(K[N]);var M=R.trim();if(b9o.Q8g(0,M.indexOf("{"))&&b9o.F8g(M.lastIndexOf("}"),M.length-1)){var P=eval("("+R+")");Z=J.base64DecToArr(P.license);try{var A=UTF8ArrToStr(base64DecToArr(P.debug_info));CL.configs.debug&&console.log("debug text:"+A);}catch(z){CL.configs.debug&&console.log("no property 'debug_info'");}}else W(K);var y=new MediaPlayer.vo.protection.LicenseRequestComplete(Z,q);F.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,y);}else{var E={message:'DRM: widevine update, XHR status is "'+Y.statusText+'" ('+Y.status+"), expected to be 200. readyState is "+Y.readyState+".  ",response:this.response?String.fromCharCode.apply(null,new Uint8Array(this.response)):"NONE",status:Y.status,statusText:Y.statusText,responseURL:Y.responseURL};F.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,E);}},Y.onabort=function(){var z={message:'DRM: widevine update, XHR aborted. status is "'+Y.statusText+'" ('+Y.status+"), readyState is "+Y.readyState,response:"NONE",status:Y.status,statusText:Y.statusText,responseURL:Y.responseURL};F.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,z);},Y.onerror=function(){var z={message:'DRM: widevine update, XHR aborted. status is "'+Y.statusText+'" ('+Y.status+"), readyState is "+Y.readyState,response:"NONE",status:Y.status,statusText:Y.statusText,responseURL:Y.responseURL};F.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,z);},Y.ontimeout=function(){var z={message:'DRM: widevine update, XHR timeout. status is "'+Y.statusText+'" ('+Y.status+"), readyState is "+Y.readyState,response:"NONE",status:Y.status,statusText:Y.statusText,responseURL:Y.responseURL};F.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,z);},w=u?u.httpRequestHeaders:null)for(V in w)Q(w);for(H in O)b9o.a8g("authorization",H.toLowerCase())&&(Y.withCredentials=!0),Y.setRequestHeader(H,O[H]);Y.send(B);}else F.notify(MediaPlayer.dependencies.protection.KeySystem.eventList.ENAME_LICENSE_REQUEST_COMPLETE,null,new Error("DRM: No valid Widevine Proxy Server URL specified!"));},I=function(){return null;},X=function(z,W){return b9o.v8g(J.arrToBase64(z),J.arrToBase64(W));};return {schemeIdURI:"urn:uuid:"+v,systemString:x,uuid:v,notify:void 0,subscribe:void 0,unsubscribe:void 0,init:function(W){var Z=function(z){u=z;};Z(W);},doLicenseRequest:L,getInitData:I,initDataEquals:X};},MediaPlayer.dependencies.protection.KeySystem_Widevine.prototype={constructor:MediaPlayer.dependencies.protection.KeySystem_Widevine},MediaPlayer.rules.ABRRulesCollection=function(){"use strict";var W=[];return {insufficientBufferRule:void 0,bufferOccupancyRule:void 0,throughputRule:void 0,droppedFramesRule:void 0,getRules:function(z){switch(z){case MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES:return W;default:return null;}},setup:function(){W.push(this.insufficientBufferRule),W.push(this.throughputRule),CL.manifest.ABRParameters.disableBufferOccupancyRule&&b9o.I8g(1,CL.manifest.ABRParameters.disableBufferOccupancyRule)&&W.push(this.bufferOccupancyRule),W.push(this.droppedFramesRule);}};},MediaPlayer.rules.ABRRulesCollection.prototype={constructor:MediaPlayer.rules.ABRRulesCollection,QUALITY_SWITCH_RULES:"qualitySwitchRules"},MediaPlayer.rules.BufferOccupancyRule=function(){"use strict";var O=0;return {log:void 0,metricsModel:void 0,execute:function(z,W){var Z=this,K=b9o.d8g((new Date).getTime(),1e3),R=z.getMediaInfo(),N=z.getTrackInfo(),M=R.type,P=isNaN(N.fragmentDuration)?2:b9o.t8g(N.fragmentDuration,2),A=z.getCurrentValue(),y=this.metricsModel.getReadOnlyMetricsFor(M),E=b9o.L8g(y.BufferLevel.length,0)?y.BufferLevel[b9o.z1g(y.BufferLevel.length,1)]:null,B=b9o.K1g(y.BufferState.length,0)?y.BufferState[b9o.N1g(y.BufferState.length,1)]:null,G=!1,q=b9o.j1g(R.trackCount,1),Y=new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK);return b9o.y1g(P,K-O)||CL.configs.limitRepresentation===!0?void W(Y):(b9o.A1g(null,E)&&b9o.Y1g(null,B)&&b9o.l1g(E.level,B.target)&&(G=b9o.n1g(E.level-B.target,MediaPlayer.dependencies.BufferController.RICH_BUFFER_THRESHOLD),G&&b9o.c1g(R.trackCount,1)&&(Y=new MediaPlayer.rules.SwitchRequest(q,MediaPlayer.rules.SwitchRequest.prototype.STRONG))),b9o.k1g(Y.value,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)&&b9o.D1g(Y.value,A)&&Z.log("BufferOccupancyRule requesting switch to index: ",Y.value,"type: ",M," Priority: ",b9o.w1g(Y.priority,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)?"Default":b9o.u1g(Y.priority,MediaPlayer.rules.SwitchRequest.prototype.STRONG)?"Strong":"Weak"),void W(Y));},reset:function(){var W=function(z){O=z;};W(0);}};},MediaPlayer.rules.BufferOccupancyRule.prototype={constructor:MediaPlayer.rules.BufferOccupancyRule},MediaPlayer.rules.DownloadRatioRule=function(){"use strict";var F=1,Q=[],x=20,v=3,u=CL.manifest.ABRParameters.downloadRatioSafetyFactor||1.4,J=function(z,W,Z){return b9o.s1g(z.getTrackForQuality(W).bandwidth,z.getTrackForQuality(Z).bandwidth);},L=function(z){var W=0,Z=Q.length;if(z=b9o.e1g(z,Z)?Z:z,b9o.U1g(Z,0)){var K=function(){W=b9o.o6g(N,z);};for(var R=b9o.Z6g(Z,z),N=0,M=R;b9o.p6g(Z,M);M++)N+=Q[M];K();}return b9o.P6g(Q.length,x)&&Q.shift(),W;};return {debug:void 0,metricsExt:void 0,metricsModel:void 0,execute:function(z,W){var Z,K,R,N,M,P,A,y=this,E=z.getMediaInfo(),B=E.type,G=z.getCurrentValue(),q=z.getStreamProcessor(),Y=q.isDynamic(),O=y.metricsModel.getReadOnlyMetricsFor(B),V=y.metricsExt.getCurrentHttpRequest(O),w=O.BufferLevel[b9o.r6g(O.BufferLevel.length,1)]||null,H=null;if(!O||b9o.S6g(null,V)||b9o.E6g(null,V.mediaduration)||void 0===V.mediaduration||b9o.q6g(V.mediaduration,0)||isNaN(V.mediaduration))return void W(new MediaPlayer.rules.SwitchRequest);if(K=b9o.J6g((V.tfinish.getTime()-V.trequest.getTime()),1e3),Z=b9o.H6g((V.tfinish.getTime()-V.tresponse.getTime()),1e3),b9o.V6g(0,K))return void W(new MediaPlayer.rules.SwitchRequest);if(M=b9o.x6g(V.mediaduration,K),N=b9o.m6g(V.mediaduration,Z),b9o.X6g(1/0,N)&&Q.push(N),R=L(v),isNaN(R)||isNaN(N)||isNaN(M))return void W(new MediaPlayer.rules.SwitchRequest);if(b9o.g6g(1,R)){if(b9o.f6g(G,0))for(A=b9o.h6g(G,1);b9o.C6g(A,0);A--)if(P=J.call(y,q,A,G),b9o.W7g(R,P*u)){H=new MediaPlayer.rules.SwitchRequest(A,MediaPlayer.rules.SwitchRequest.prototype.STRONG);break;}}else if(b9o.R7g(null,w)&&b9o.M7g(w.level,w.target)||Y&&b9o.b7g(null,w)&&b9o.i7g(w.level,MediaPlayer.dependencies.BufferController.DEFAULT_STARTUP_BUFFER_TIME)){var D=b9o.T7g(E.trackCount,1);if(CL.configs.limitRepresentation===!0&&CL.configs.maxIndex>-1&&b9o.B7g("video",B)&&(D=CL.configs.maxIndex),b9o.G7g(D,G))for(A=D;b9o.O7g(A,0);A--)if(P=J.call(y,q,A,G),b9o.Q7g(R,P)){b9o.F7g(G,A)&&(H=new MediaPlayer.rules.SwitchRequest(A,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT));break;}}b9o.a7g(null,H)&&(H=new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)),b9o.v7g(H.value,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)&&y.debug.log("DownloadRatioRule requesting switch to index: ",H.value,"type: ",B," priority: ",b9o.I7g(H.priority,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)?"default":b9o.d7g(H.priority,MediaPlayer.rules.SwitchRequest.prototype.STRONG)?"strong":"weak"),W(H);},reset:function(){F=1,Q=[];}};},MediaPlayer.rules.DownloadRatioRule.prototype={constructor:MediaPlayer.rules.DownloadRatioRule},MediaPlayer.rules.DroppedFramesRule=function(){"use strict";var y=0,E=-1;return {log:void 0,metricsModel:void 0,execute:function(z,W){var Z=this,K=(b9o.t7g((new Date).getTime(),1e3),z.getMediaInfo()),R=z.getTrackInfo(),N=K.type,M=(isNaN(R.fragmentDuration)?2:b9o.L7g(R.fragmentDuration,2),z.getCurrentValue()),P=(this.metricsModel.getReadOnlyMetricsFor(N),b9o.z0g(K.trackCount,1),Math.max(0,b9o.K0g(M,1))),A=new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK);CL.configs.lowerRepresentation===!0&&b9o.N0g(P,M)?(A=new MediaPlayer.rules.SwitchRequest(P,MediaPlayer.rules.SwitchRequest.prototype.STRONG),CL.configs.maxIndex=P,CL.configs.limitRepresentation=!0,CL.configs.lowerRepresentation=!1):W(A),b9o.j0g(A.value,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)&&b9o.y0g(A.value,M)&&Z.log("DroppedFramesRule requesting switch to index: ",A.value,"type: ",N," Priority: ",b9o.A0g(A.priority,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)?"Default":b9o.Y0g(A.priority,MediaPlayer.rules.SwitchRequest.prototype.STRONG)?"Strong":"Weak"),W(A);},reset:function(){y=0,E=-1;}};},MediaPlayer.rules.DroppedFramesRule.prototype={constructor:MediaPlayer.rules.DroppedFramesRule},MediaPlayer.rules.InsufficientBufferRule=function(){"use strict";var H={},D=0,F=1e3,Q=function(z,W){H[z]=H[z]||{},H[z].state=W,b9o.l0g(W,MediaPlayer.dependencies.BufferController.BUFFER_LOADED)||H[z].firstBufferLoadedEvent||(H[z].firstBufferLoadedEvent=!0);};return {log:void 0,metricsModel:void 0,execute:function(z,W){var Z=this,K=(new Date).getTime(),R=z.getMediaInfo().type,N=z.getCurrentValue(),M=Z.metricsModel.getReadOnlyMetricsFor(R),P=z.getStreamInfo(),A=z.getTrackInfo(),y=P.duration,E=z.getStreamProcessor().getPlaybackController().getTime(),B=z.getStreamProcessor(),G=B.isDynamic(),q=b9o.n0g(M.BufferLevel.length,0)?M.BufferLevel[b9o.c0g(M.BufferLevel.length,1)]:null,Y=b9o.k0g(M.BufferState.length,0)?M.BufferState[b9o.D0g(M.BufferState.length,1)]:null,O=Math.max(A.fragmentDuration,b9o.w0g(MediaPlayer.dependencies.BufferController.LOW_BUFFER_THRESHOLD,2)),V=new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK);if(b9o.u0g(F,K-D)||b9o.s0g(null,Y))return void W(V);if(Q(R,Y.state),b9o.e0g(Y.state,MediaPlayer.dependencies.BufferController.BUFFER_EMPTY)&&void 0!==H[R].firstBufferLoadedEvent)V=new MediaPlayer.rules.SwitchRequest(0,MediaPlayer.rules.SwitchRequest.prototype.STRONG);else if(!G&&b9o.U0g(H[R].state,MediaPlayer.dependencies.BufferController.BUFFER_LOADED)&&b9o.o4g(q.level,2*O)&&b9o.Z4g(y-2*O,E)){var w=b9o.p4g(q.level,O)?MediaPlayer.rules.SwitchRequest.prototype.DEFAULT:MediaPlayer.rules.SwitchRequest.prototype.STRONG;V=new MediaPlayer.rules.SwitchRequest(Math.max(b9o.P4g(N,1),0),w);}b9o.r4g(V.value,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)&&b9o.S4g(V.value,N)&&Z.log("InsufficientBufferRule requesting switch to index: ",V.value,"type: ",R," Priority: ",b9o.E4g(V.priority,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)?"Default":b9o.q4g(V.priority,MediaPlayer.rules.SwitchRequest.prototype.STRONG)?"Strong":"Weak"),D=K,W(V);},reset:function(){H={},D=0;}};},MediaPlayer.rules.InsufficientBufferRule.prototype={constructor:MediaPlayer.rules.InsufficientBufferRule},MediaPlayer.rules.LimitSwitchesRule=function(){"use strict";var N=0,M=CL.manifest.ABRParameters.qualitySwitchThreshold||2e3;return {debug:void 0,metricsModel:void 0,execute:function(z,W){var Z,K=z.getCurrentValue(),R=(new Date).getTime();return Z=b9o.J4g(R,N),b9o.H4g(M,Z)?void W(new MediaPlayer.rules.SwitchRequest(K,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)):(N=R,void W(new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK)));}};},MediaPlayer.rules.LimitSwitchesRule.prototype={constructor:MediaPlayer.rules.LimitSwitchesRule},MediaPlayer.rules.ThroughputRule=function(){"use strict";var J=[],L=0,I=2,X=3,z5=CL.manifest.ABRParameters.bandwidthSafetyFactor||1,o5=function(z,W){J[z]=J[z]||[],b9o.V4g(1/0,W)&&b9o.x4g(W,J[z][J[z].length-1])&&J[z].push(W);},W5=function(z,W){var Z=0,K=W?I:X,R=J[z],N=R.length;if(K=b9o.m4g(K,N)?N:K,b9o.X4g(N,0)){var M=function(){Z=b9o.g4g(A,K);};for(var P=b9o.f4g(N,K),A=0,y=P;b9o.h4g(N,y);y++)A+=R[y];M();}return b9o.C4g(R.length,K)&&R.shift(),Z;};return {log:void 0,metricsExt:void 0,metricsModel:void 0,manifestExt:void 0,manifestModel:void 0,execute:function(z,W){var Z,K,R,N,M=this,P=b9o.W9g((new Date).getTime(),1e3),A=z.getMediaInfo(),y=A.type,E=z.getCurrentValue(),B=z.getTrackInfo(),G=this.manifestModel.getValue(),q=M.metricsModel.getReadOnlyMetricsFor(y),Y=z.getStreamProcessor().isDynamic(),O=M.metricsExt.getCurrentHttpRequest(q),V=isNaN(B.fragmentDuration)?2:b9o.R9g(B.fragmentDuration,2),w=b9o.M9g(q.BufferState.length,0)?q.BufferState[b9o.b9g(q.BufferState.length,1)]:null,H=b9o.i9g(q.BufferLevel.length,0)?q.BufferLevel[b9o.T9g(q.BufferLevel.length,1)]:null,D=new MediaPlayer.rules.SwitchRequest(MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,MediaPlayer.rules.SwitchRequest.prototype.WEAK);if(b9o.B9g(V,P-L)||!q||b9o.G9g(null,O)||b9o.O9g(O.type,MediaPlayer.vo.metrics.HTTPRequest.MEDIA_SEGMENT_TYPE)||b9o.Q9g(null,w)||b9o.F9g(null,H))return void W(D);Z=b9o.a9g((O.tfinish.getTime()-O.tresponse.getTime()),1e3),K=b9o.v9g(O.tfinish.getTime(),O.trequest.getTime()),N=Math.round(b9o.I9g(8,O.trace[O.trace.length-1].b,Z));var F=b9o.f9g(O.trace[O.trace.length-1].b,1024);if(CL.manifest.ABRParameters.limitThroughputRule===!0&&b9o.h9g("video",y)&&(b9o.C9g(.05,Z)||b9o.W5E(100,F)||b9o.R5E(N/1024,1e5)))return void W(D);if(void 0===O.responsecode||b9o.M5E(O.responsecode,200)||b9o.b5E(O.responsecode,400))return void W(D);o5(y,N),R=Math.round(W5(y,Y));var Q=this.manifestExt.getAdaptationForType(G,A.streamInfo.index,y),x=b9o.i5E(A.trackCount,1);if(CL.configs.limitRepresentation===!0&&CL.configs.maxIndex>-1&&b9o.T5E("video",y)&&(x=CL.configs.maxIndex),b9o.B5E(w.state,MediaPlayer.dependencies.BufferController.BUFFER_LOADED)&&(b9o.G5E(H.level,MediaPlayer.dependencies.BufferController.LOW_BUFFER_THRESHOLD/2)||Y))for(var v=x;b9o.O5E(v,0);v--){var u=this.manifestExt.getRepresentationFor(v,Q).bandwidth;if(b9o.Q5E(R,0)&&b9o.F5E(R,u*z5)){D=new MediaPlayer.rules.SwitchRequest(v,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT),L=P;break;}}b9o.a5E(D.value,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)&&b9o.v5E(D.value,E)&&M.log("ThroughputRule requesting switch to index: ",D.value,"type: ",y," Priority: ",b9o.I5E(D.priority,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)?"Default":b9o.d5E(D.priority,MediaPlayer.rules.SwitchRequest.prototype.STRONG)?"Strong":"Weak","Average throughput",Math.round(b9o.t5E(R,1024)),"kbps"),W(D);},reset:function(){J=[],L=0;}};},MediaPlayer.rules.ThroughputRule.prototype={constructor:MediaPlayer.rules.ThroughputRule},MediaPlayer.rules.RulesContext=function(z,W){"use strict";var Z=z.getCurrentTrack(),K=z;return {getStreamInfo:function(){return Z.mediaInfo.streamInfo;},getMediaInfo:function(){return Z.mediaInfo;},getTrackInfo:function(){return Z;},getCurrentValue:function(){return W;},getManifestInfo:function(){return Z.mediaInfo.streamInfo.manifestInfo;},getStreamProcessor:function(){return K;}};},MediaPlayer.rules.RulesContext.prototype={constructor:MediaPlayer.rules.RulesContext},MediaPlayer.rules.RulesController=function(){"use strict";var O={},V=["execute"],w=function(z){return b9o.L5E(z,this.SCHEDULING_RULE)||b9o.z3E(z,this.ABR_RULE);},H=function(z){var W=V.length,Z=0;for(Z;b9o.K3E(W,Z);Z+=1)if(!z.hasOwnProperty(V[Z]))return !1;return !0;},D=function(z,W){return new MediaPlayer.rules.RulesContext(z,W);},F=function(R){var N=R.execute.bind(R);return R.execute=function(W,Z){var K=function(z){Z.call(R,new MediaPlayer.rules.SwitchRequest(z.value,z.priority));};N(W,K);},"function"!=typeof R.reset&&(R.reset=function(){}),R;},Q=function(z,W,Z){var K,R,N,M,P,A;for(R in W)if(M=W[R],P=M.length)for(A=0;b9o.N3E(P,A);A+=1)K=M[A],H.call(this,K)&&(K=F.call(this,K),N=z.getRules(R),Z&&(Z=!1,N.length=0),this.system.injectInto(K),N.push(K));};return {system:void 0,log:void 0,SCHEDULING_RULE:0,ABR_RULE:1,SYNC_RULE:2,initialize:function(){O[this.ABR_RULE]=this.system.getObject("abrRulesCollection"),O[this.SCHEDULING_RULE]=this.system.getObject("scheduleRulesCollection"),O[this.SYNC_RULE]=this.system.getObject("synchronizationRulesCollection");},setRules:function(z,W){w.call(this,z)&&W&&Q.call(this,O[z],W,!0);},addRules:function(z,W){w.call(this,z)&&W&&Q.call(this,O[z],W,!1);},applyRules:function(K,R,N,M,P){var A,y,E=K.length,B=E,G={},q=D.call(this,R,M),Y=function(z){var W,Z;b9o.j3E(z.value,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)&&(G[z.priority]=P(G[z.priority],z.value)),--E||(b9o.y3E(G[MediaPlayer.rules.SwitchRequest.prototype.WEAK],MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)&&(Z=MediaPlayer.rules.SwitchRequest.prototype.WEAK,W=G[MediaPlayer.rules.SwitchRequest.prototype.WEAK]),b9o.A3E(G[MediaPlayer.rules.SwitchRequest.prototype.DEFAULT],MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)&&(Z=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT,W=G[MediaPlayer.rules.SwitchRequest.prototype.DEFAULT]),b9o.Y3E(G[MediaPlayer.rules.SwitchRequest.prototype.STRONG],MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)&&(Z=MediaPlayer.rules.SwitchRequest.prototype.STRONG,W=G[MediaPlayer.rules.SwitchRequest.prototype.STRONG]),b9o.l3E(Z,MediaPlayer.rules.SwitchRequest.prototype.STRONG)&&b9o.n3E(Z,MediaPlayer.rules.SwitchRequest.prototype.WEAK)&&(Z=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT),N({value:void 0!==W?W:M,confidence:Z}));};for(G[MediaPlayer.rules.SwitchRequest.prototype.STRONG]=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,G[MediaPlayer.rules.SwitchRequest.prototype.WEAK]=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,G[MediaPlayer.rules.SwitchRequest.prototype.DEFAULT]=MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE,y=0;b9o.c3E(B,y);y+=1)A=K[y],H.call(this,A)?A.execute(q,Y):E--;},reset:function(){var z,W,Z=O[this.ABR_RULE],K=O[this.SCHEDULING_RULE],R=O[this.SYNC_RULE],N=(Z.getRules(MediaPlayer.rules.ABRRulesCollection.prototype.QUALITY_SWITCH_RULES)||[]).concat(K.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.NEXT_FRAGMENT_RULES)||[]).concat(K.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_SCHEDULE_RULES)||[]).concat(K.getRules(MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_EXECUTE_RULES)||[]).concat(R.getRules(MediaPlayer.rules.SynchronizationRulesCollection.prototype.TIME_SYNCHRONIZED_RULES)||[]).concat(R.getRules(MediaPlayer.rules.SynchronizationRulesCollection.prototype.BEST_GUESS_RULES)||[]),M=N.length;for(W=0;b9o.k3E(M,W);W+=1)z=N[W],"function"==typeof z.reset&&z.reset();O={};}};},MediaPlayer.rules.RulesController.prototype={constructor:MediaPlayer.rules.RulesController},MediaPlayer.rules.BufferLevelRule=function(){"use strict";var F={},Q={},x={},v=function(z){var W=this.metricsExt.getCurrentHttpRequest(z);return b9o.D3E(null,W)?b9o.w3E((W.tresponse.getTime()-W.trequest.getTime()),1e3):0;},u=function(z,W,Z,K){var R;return R=Z?Math.min(MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME,K.playbackController.getLiveDelay()):isNaN(W)||b9o.u3E(MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME,W)&&b9o.s3E(W,z)?Math.max(MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME,z):b9o.e3E(z,W)?Math.min(W,MediaPlayer.dependencies.BufferController.DEFAULT_MIN_BUFFER_TIME):Math.min(W,z);},J=function(z,W,Z){var K=this,R=Z.bufferController.getCriticalBufferLevel(),N=K.metricsModel.getReadOnlyMetricsFor("video"),M=K.metricsModel.getReadOnlyMetricsFor("audio"),P=u.call(this,Z.bufferController.getMinBufferTime(),W,z,Z),A=P,y=Z.bufferController.bufferMax,E=0;return b9o.U3E(y,MediaPlayer.dependencies.BufferController.BUFFER_SIZE_MIN)?E=P:b9o.o2E(y,MediaPlayer.dependencies.BufferController.BUFFER_SIZE_INFINITY)?E=W:b9o.Z2E(y,MediaPlayer.dependencies.BufferController.BUFFER_SIZE_REQUIRED)&&(!z&&K.abrController.isPlayingAtTopQuality(Z.streamProcessor.getStreamInfo())&&(A=b9o.p2E(null,CL.manifest.ABRParameters.maxBufferLength)||isNaN(CL.manifest.ABRParameters.maxBufferLength)?MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY:CL.manifest.ABRParameters.maxBufferLength),E=A+Math.max(v.call(K,N),v.call(K,M))),E=Math.min(E,R);},L=function(z,W){return Q[z]&&Q[z][W];},I=function(z,W){return F[z]&&F[z][W];},X=function(z){var W=z.data.fragmentModel.getContext().streamProcessor.getStreamInfo().id;Q[W]=Q[W]||{},Q[W][z.data.request.mediaType]=!0;},z5=function(z){var W=z.sender.streamProcessor.getStreamInfo().id;F[W]=F[W]||{},F[W][z.sender.streamProcessor.getType()]=!0;},o5=function(z){var W=z.sender.streamProcessor.getStreamInfo().id;F[W]=F[W]||{},F[W][z.sender.streamProcessor.getType()]=!1;};return {metricsExt:void 0,metricsModel:void 0,abrController:void 0,playbackController:void 0,setup:function(){this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_OUTRUN]=z5,this[MediaPlayer.dependencies.BufferController.eventList.ENAME_BUFFER_LEVEL_BALANCED]=o5,this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED]=X;},setScheduleController:function(z){var W=z.streamProcessor.getStreamInfo().id;x[W]=x[W]||{},x[W][z.streamProcessor.getType()]=z;},execute:function(z,W){var Z=z.getStreamInfo(),K=Z.id,R=z.getMediaInfo().type;if(I(K,R))return void W(new MediaPlayer.rules.SwitchRequest(0,MediaPlayer.rules.SwitchRequest.prototype.STRONG));var N,M,P=this.metricsModel.getReadOnlyMetricsFor(R),A=this.metricsExt.getCurrentBufferLevel(P)?this.metricsExt.getCurrentBufferLevel(P).level:0,y=x[K][R],E=y.streamProcessor.getCurrentTrack(),B=y.streamProcessor.isDynamic(),G=this.metricsExt.getCurrentPlaybackRate(P),q=Z.duration,Y=b9o.P2E(A,Math.max(G,1)),O=E.fragmentDuration,V=y.playbackController.getTime(),w=B?Number.POSITIVE_INFINITY:b9o.r2E(q,V),H=Math.min(J.call(this,B,q,y),w),D=Math.max(b9o.S2E(H,Y),0);N=b9o.E2E(H,O)&&b9o.q2E(D,H)?0:Math.ceil(b9o.J2E(D,O)),M=(new Date).getTime(),void 0==this.lastCheckTime&&(this.lastCheckTime=[]),void 0==this.lastCheckTime[R]&&(this.lastCheckTime[R]=M),void 0==this.lastFragmentCount&&(this.lastFragmentCount=[]),void 0==this.lastFragmentCount[R]&&(this.lastFragmentCount[R]=0),void 0==this.checkTimeInterval&&(this.checkTimeInterval=[]),void 0==this.checkTimeInterval[R]&&(this.checkTimeInterval[R]=0),this.checkTimeInterval[R]=100,b9o.H2E(this.lastFragmentCount[R],0)&&(B||this.abrController.isPlayingAtTopQuality(y.streamProcessor.getStreamInfo())||(this.checkTimeInterval[R]=Math.min(2e3,b9o.V2E(O,2,1e3)))),y.streamProcessor.bufferController.isInitPending()===!0&&(N=0),b9o.D2E(Y,w)&&!L(K,R)&&(N=N||1),N=Math.min(1,N),b9o.w2E(M-this.lastCheckTime[R],this.checkTimeInterval[R])?(N=0,this.lastFragmentCount[R]=1):(this.lastFragmentCount[R]=N,this.lastCheckTime[R]=M),W(new MediaPlayer.rules.SwitchRequest(N,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT));},reset:function(){F={},Q={},x={};}};},MediaPlayer.rules.BufferLevelRule.prototype={constructor:MediaPlayer.rules.BufferLevelRule},MediaPlayer.rules.PendingRequestsRule=function(){"use strict";var G=0,q={};return {metricsExt:void 0,setScheduleController:function(z){var W=z.streamProcessor.getStreamInfo().id;q[W]=q[W]||{},q[W][z.streamProcessor.getType()]=z;},execute:function(z,W){var Z=z.getMediaInfo().type,K=z.getStreamInfo().id,R=z.getCurrentValue(),N=q[K][Z],M=N.getFragmentModel(),P=M.getRequests({state:[MediaPlayer.dependencies.FragmentModel.states.PENDING,MediaPlayer.dependencies.FragmentModel.states.LOADING]}),A=M.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.REJECTED}),y=A.length,E=P.length,B=Math.max(b9o.u2E(R,E),0);return b9o.s2E(y,0)?void W(new MediaPlayer.rules.SwitchRequest(y,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)):b9o.e2E(E,G)?void W(new MediaPlayer.rules.SwitchRequest(0,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT)):b9o.U2E(0,R)?void W(new MediaPlayer.rules.SwitchRequest(B,MediaPlayer.rules.SwitchRequest.prototype.NO_CHANGE)):void W(new MediaPlayer.rules.SwitchRequest(B,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT));},reset:function(){q={};}};},MediaPlayer.rules.PendingRequestsRule.prototype={constructor:MediaPlayer.rules.PendingRequestsRule},MediaPlayer.rules.PlaybackTimeRule=function(){"use strict";var F={},Q={},x=function(z){var W=z.sender.getStreamId(),Z=z.data.seekTime;F[W]=F[W]||{},F[W].audio=Z,F[W].video=Z,F[W].fragmentedText=Z;};return {adapter:void 0,sourceBufferExt:void 0,setup:function(){this[MediaPlayer.dependencies.PlaybackController.eventList.ENAME_PLAYBACK_SEEKING]=x;},setScheduleController:function(z){var W=z.streamProcessor.getStreamInfo().id;Q[W]=Q[W]||{},Q[W][z.streamProcessor.getType()]=z;},execute:function(z,W){var Z,K,R,N=z.getMediaInfo().type,M=z.getStreamInfo().id,P=Q[M][N],A=.1,y=Q[M][N].streamProcessor,E=y.getCurrentTrack(),B=F[M]?F[M][N]:null,G=void 0!==B&&b9o.o8E(null,B),q=G?MediaPlayer.rules.SwitchRequest.prototype.STRONG:MediaPlayer.rules.SwitchRequest.prototype.DEFAULT,Y=P.getFragmentModel().getRequests({state:MediaPlayer.dependencies.FragmentModel.states.REJECTED})[0],O=!!Y&&!G,V=this.adapter.getIndexHandlerTime(y),w=y.playbackController.getTime(),H=Y?Y.startTime+Y.duration:null,D=!G&&Y&&(b9o.Z8E(H,w)&&b9o.p8E(Y.startTime,V)||isNaN(V));if(K=G?B:D?Y.startTime:V,Y&&P.getFragmentModel().removeRejectedRequest(Y),isNaN(K))return void W(new MediaPlayer.rules.SwitchRequest(null,q));for(F[M]&&(F[M][N]=null),Z=this.sourceBufferExt.getBufferRange(y.bufferController.getBuffer(),K),b9o.P8E(null,Z)&&(K=Z.end),R=this.adapter.getFragmentRequestForTime(y,E,K,{keepIdx:O}),D&&R&&b9o.r8E(R.index,Y.index)&&(R=this.adapter.getFragmentRequestForTime(y,E,Y.startTime+b9o.S8E(Y.duration,2)+A,{keepIdx:O}));R&&y.getFragmentModel().isFragmentLoadedOrPending(R);){if(b9o.E8E("complete",R.action)){R=null,this.adapter.setIndexHandlerTime(y,b9o.q8E(0,0));break;}R=this.adapter.getNextFragmentRequest(y,E);}R&&!D&&this.adapter.setIndexHandlerTime(y,Math.floor(R.startTime+R.duration)),W(new MediaPlayer.rules.SwitchRequest(R,q));},reset:function(){F={},Q={};}};},MediaPlayer.rules.PlaybackTimeRule.prototype={constructor:MediaPlayer.rules.PlaybackTimeRule},MediaPlayer.rules.SameTimeRequestRule=function(){"use strict";var x=0,v={},u=function(W,Z){var K,R,N,M,P,A=0,y=W.length;for(A;b9o.J8E(y,A);A+=1)for(N=W[A].getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING}),L.call(this,N,"index"),M=0,P=N.length;b9o.H8E(P,M);M++){if(K=N[M],isNaN(K.startTime)&&b9o.V8E("complete",K.action)){var E=function(z){R=z;};E(K);break;}b9o.x8E(K.startTime,Z)&&(!R||b9o.m8E(K.startTime,R.startTime))&&(R=K);}return R||K;},J=function(z,W){var Z,K,R=z.length,N=null;for(K=0;b9o.X8E(R,K);K+=1)Z=z[K].getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING,time:W})[0],Z&&(!N||b9o.g8E(Z.startTime,N.startTime))&&(N=Z);return N;},L=function(Z,K){var R=function(z,W){return b9o.f8E(z[K],W[K])||isNaN(z[K])&&b9o.h8E("complete",z.action)?-1:b9o.C8E(z[K],W[K])?1:0;};Z.sort(R);},I=function(z,W){return v[z]&&v[z][W]?v[z][W]:b9o.W1E(0,0);},X=function(z){var W=z.data.fragmentModel,Z=z.data.request,K=W.getContext().streamProcessor.getStreamInfo().id,R=Z.mediaType;v[K]=v[K]||{},v[K][R]=b9o.R1E(Z.index,1);};return {setup:function(){this[MediaPlayer.dependencies.FragmentController.eventList.ENAME_STREAM_COMPLETED]=X;},setFragmentModels:function(z,W){this.fragmentModels=this.fragmentModels||{},this.fragmentModels[W]=z;},execute:function(W,Z){var K,R,N,M,P,A,y,E,B,G=W.getStreamInfo().id,q=W.getCurrentValue(),Y=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT,O=this.fragmentModels[G],V=new Date,w=null,H=O?O.length:null,D=!1,F=[];if(!O||!H)return void Z(new MediaPlayer.rules.SwitchRequest([],Y));if(A=O[0].getContext().playbackController.getTime(),y=J(O,A),P=y||u(O,A)||q,!P)return void Z(new MediaPlayer.rules.SwitchRequest([],Y));for(M=0;b9o.M1E(H,M);M+=1)if(R=O[M],K=R.getContext().streamProcessor.getType(),(b9o.b1E("video",K)||b9o.i1E("audio",K)||b9o.T1E("fragmentedText",K))&&(E=R.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING}),B=R.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING}).length,!R.getIsPostponed()||isNaN(P.startTime))){if(b9o.B1E(B,x))return void Z(new MediaPlayer.rules.SwitchRequest([],Y));if(w=w||(b9o.G1E(P,y)?A:P.startTime),-1===E.indexOf(P)){if(N=R.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.PENDING,time:w})[0],N||b9o.O1E(0,P.index)||(N=E.filter(function(z){return b9o.Q1E(z.index,P.index);})[0]),N)F.push(N);else if(N=R.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.LOADING,time:w})[0]||R.getRequests({state:MediaPlayer.dependencies.FragmentModel.states.EXECUTED,time:w})[0],!N&&b9o.F1E(P.index,I.call(this,G,P.mediaType))&&CL.configs.isLive===!1){var Q=function(){D=!0;};Q();break;}}else F.push(P);}return F=F.filter(function(z){return b9o.a1E("complete",z.action)||b9o.v1E(V.getTime(),z.availabilityStartTime.getTime());}),D?void Z(new MediaPlayer.rules.SwitchRequest([],Y)):void Z(new MediaPlayer.rules.SwitchRequest(F,Y));},reset:function(){v={};}};},MediaPlayer.rules.SameTimeRequestRule.prototype={constructor:MediaPlayer.rules.SameTimeRequestRule},MediaPlayer.rules.ScheduleRulesCollection=function(){"use strict";var W=[],Z=[],K=[];return {bufferLevelRule:void 0,pendingRequestsRule:void 0,playbackTimeRule:void 0,sameTimeRequestRule:void 0,getRules:function(z){switch(z){case MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_SCHEDULE_RULES:return W;case MediaPlayer.rules.ScheduleRulesCollection.prototype.NEXT_FRAGMENT_RULES:return K;case MediaPlayer.rules.ScheduleRulesCollection.prototype.FRAGMENTS_TO_EXECUTE_RULES:return Z;default:return null;}},setup:function(){W.push(this.bufferLevelRule),W.push(this.pendingRequestsRule),K.push(this.playbackTimeRule),Z.push(this.sameTimeRequestRule);}};},MediaPlayer.rules.ScheduleRulesCollection.prototype={constructor:MediaPlayer.rules.ScheduleRulesCollection,FRAGMENTS_TO_SCHEDULE_RULES:"fragmentsToScheduleRules",NEXT_FRAGMENT_RULES:"nextFragmentRules",FRAGMENTS_TO_EXECUTE_RULES:"fragmentsToExecuteRules"},MediaPlayer.rules.SwitchRequest=function(z,W){"use strict";this.value=z,this.priority=W,void 0===this.value&&(this.value=999),void 0===this.priority&&(this.priority=.5);},MediaPlayer.rules.SwitchRequest.prototype={constructor:MediaPlayer.rules.SwitchRequest,NO_CHANGE:999,DEFAULT:.5,STRONG:1,WEAK:0},MediaPlayer.rules.LiveEdgeBinarySearchRule=function(){"use strict";var A,y,E,B=43200,G=b9o.I1E(0,0),q=null,Y=b9o.d1E(0,0),O=null,V=!1,w=b9o.t1E(0,0),H=MediaPlayer.rules.SwitchRequest.prototype.DEFAULT,D=function(W,Z,K,R){var N,M=this;if(b9o.L1E(null,R))N=M.adapter.generateFragmentRequestForTime(E,O,W),D.call(M,W,Z,K,N);else{var P=function(z){y.unsubscribe(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,M,P),z.data.exists?Z.call(M,z.data.request,W):K.call(M,z.data.request,W);};y.subscribe(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_CHECK_FOR_EXISTENCE_COMPLETED,M,P),y.checkForExistence(R);}},F=function(z,W){var Z,K,R;return V?void x.call(this,!1,W):(R=b9o.z6E(W,G),Z=b9o.K6E(R,0)?b9o.N6E(G,R):G+Math.abs(R)+Y,void (b9o.j6E(Z,q.start)&&b9o.y6E(Z,q.end)?A(new MediaPlayer.rules.SwitchRequest(null,H)):(K=this.adapter.getFragmentRequestForTime(E,O,Z),D.call(this,Z,Q,F,K))));},Q=function(z,W){var Z,K,R=z.startTime,N=this;if(!V){if(!O.fragmentDuration)return void A(new MediaPlayer.rules.SwitchRequest(R,H));if(V=!0,q.end=R+b9o.A6E(2,Y),b9o.Y6E(W,G))return K=W+w,Z=N.adapter.getFragmentRequestForTime(E,O,K),void D.call(N,K,function(){x.call(N,!0,K);},function(){A(new MediaPlayer.rules.SwitchRequest(K,H));},Z);}x.call(this,!0,W);},x=function(z,W){var Z,K,R;z?q.start=W:q.end=W,Z=b9o.l6E(Math.floor(q.end-q.start),w),Z?A(new MediaPlayer.rules.SwitchRequest(z?W:b9o.n6E(W,w),H)):(R=b9o.c6E((q.start+q.end),2),K=this.adapter.getFragmentRequestForTime(E,O,R),D.call(this,R,Q,F,K));};return {metricsExt:void 0,adapter:void 0,timelineConverter:void 0,execute:function(z,W){var Z,K,R=this;if(A=W,E=z.getStreamProcessor(),y=E.getFragmentLoader(),O=z.getTrackInfo(),w=O.fragmentDuration,K=O.DVRWindow,G=K.end,O.useCalculatedLiveEdgeTime){var N=R.timelineConverter.getExpectedLiveEdge();return R.timelineConverter.setExpectedLiveEdge(G),void A(new MediaPlayer.rules.SwitchRequest(N,H));}q={start:Math.max(0,b9o.k6E(G,B)),end:G+B},Y=Math.floor(b9o.D6E((K.end-K.start),2)),Z=R.adapter.getFragmentRequestForTime(E,O,G),D.call(R,G,Q,F,Z);},reset:function(){G=b9o.w6E(0,0),q=null,Y=b9o.u6E(0,0),O=null,V=!1,w=b9o.s6E(0,0),E=null,y=null;}};},MediaPlayer.rules.LiveEdgeBinarySearchRule.prototype={constructor:MediaPlayer.rules.LiveEdgeBinarySearchRule},MediaPlayer.rules.LiveEdgeWithTimeSynchronizationRule=function(){"use strict";return {execute:function(z,W){W(new MediaPlayer.rules.SwitchRequest(z.getTrackInfo().DVRWindow.end,MediaPlayer.rules.SwitchRequest.prototype.DEFAULT));}};},MediaPlayer.rules.LiveEdgeWithTimeSynchronizationRule.prototype={constructor:MediaPlayer.rules.LiveEdgeWithTimeSynchronizationRule},MediaPlayer.rules.SynchronizationRulesCollection=function(){"use strict";var W=[],Z=[];return {liveEdgeBinarySearchRule:void 0,liveEdgeWithTimeSynchronizationRule:void 0,getRules:function(z){switch(z){case MediaPlayer.rules.SynchronizationRulesCollection.prototype.TIME_SYNCHRONIZED_RULES:return W;case MediaPlayer.rules.SynchronizationRulesCollection.prototype.BEST_GUESS_RULES:return Z;default:return null;}},setup:function(){W.push(this.liveEdgeWithTimeSynchronizationRule),Z.push(this.liveEdgeBinarySearchRule);}};},MediaPlayer.rules.SynchronizationRulesCollection.prototype={constructor:MediaPlayer.rules.SynchronizationRulesCollection,TIME_SYNCHRONIZED_RULES:"withAccurateTimeSourceRules",BEST_GUESS_RULES:"bestGuestRules"},MediaPlayer.utils.Capabilities=function(){"use strict";},MediaPlayer.utils.Capabilities.prototype={constructor:MediaPlayer.utils.Capabilities,system:void 0,log:void 0,supportsMediaSource:function(){"use strict";var z=b9o.e6E("WebKitMediaSource",window),W=b9o.U6E("MediaSource",window);return z||W;},supportsEncryptedMedia:function(){return this.system.hasMapping("protectionModel");},supportsCodec:function(z,W){"use strict";if(!(b9o.o7E(z,HTMLMediaElement)))throw "element must be of type HTMLMediaElement.";var Z=z.canPlayType(W);return (W.indexOf("vtt")>-1||W.indexOf("ttml")>-1)&&(Z="probably"),b9o.Z7E("probably",Z)||b9o.p7E("maybe",Z);}},MediaPlayer.utils.CustomTimeRanges=function(){return {customTimeRangeArray:[],length:0,add:function(z,W){var Z=0;for(Z=0;b9o.P7E(Z,this.customTimeRangeArray.length)&&b9o.r7E(z,this.customTimeRangeArray[Z].start);Z++);for(this.customTimeRangeArray.splice(Z,0,{start:z,end:W}),Z=0;b9o.S7E(Z,this.customTimeRangeArray.length-1);Z++)this.mergeRanges(Z,Z+1)&&Z--;this.length=this.customTimeRangeArray.length;},remove:function(z,W){for(var Z=0;b9o.E7E(Z,this.customTimeRangeArray.length);Z++)if(b9o.q7E(z,this.customTimeRangeArray[Z].start)&&b9o.J7E(W,this.customTimeRangeArray[Z].end))this.customTimeRangeArray.splice(Z,1),Z--;else{if(b9o.H7E(z,this.customTimeRangeArray[Z].start)&&b9o.V7E(W,this.customTimeRangeArray[Z].end)){this.customTimeRangeArray.splice(Z+1,0,{start:W,end:this.customTimeRangeArray[Z].end}),this.customTimeRangeArray[Z].end=z;break;}b9o.x7E(z,this.customTimeRangeArray[Z].start)&&b9o.m7E(z,this.customTimeRangeArray[Z].end)?this.customTimeRangeArray[Z].end=z:b9o.X7E(W,this.customTimeRangeArray[Z].start)&&b9o.g7E(W,this.customTimeRangeArray[Z].end)&&(this.customTimeRangeArray[Z].end=z);}},mergeRanges:function(z,W){var Z=this.customTimeRangeArray[z],K=this.customTimeRangeArray[W];return b9o.f7E(Z.start,K.start)&&b9o.h7E(K.start,Z.end)&&b9o.C7E(Z.end,K.end)?(Z.end=K.end,this.customTimeRangeArray.splice(W,1),!0):b9o.W0E(K.start,Z.start)&&b9o.R0E(Z.start,K.end)&&b9o.M0E(K.end,Z.end)?(Z.start=K.start,this.customTimeRangeArray.splice(W,1),!0):b9o.b0E(K.start,Z.start)&&b9o.i0E(Z.start,K.end)&&b9o.T0E(Z.end,K.end)?(this.customTimeRangeArray.splice(z,1),!0):b9o.B0E(Z.start,K.start)&&b9o.G0E(K.start,Z.end)&&b9o.O0E(K.end,Z.end)?(this.customTimeRangeArray.splice(W,1),!0):!1;},start:function(z){return this.customTimeRangeArray[z].start;},end:function(z){return this.customTimeRangeArray[z].end;}};},MediaPlayer.utils.CustomTimeRanges.prototype={constructor:MediaPlayer.utils.CustomTimeRanges},MediaPlayer.utils.DOMStorage=function(){var N=!0,M=function(){["video","audio"].forEach(function(z){if(void 0===this.abrController.getInitialBitrateFor(z)){if(this.isSupported(MediaPlayer.utils.DOMStorage.STORAGE_TYPE_LOCAL)&&N){var W=MediaPlayer.utils.DOMStorage["LOCAL_STORAGE_"+z.toUpperCase()+"_BITRATE_KEY"],Z=JSON.parse(localStorage.getItem(W))||{},K=b9o.Q0E((new Date).getTime()-parseInt(Z.timestamp),MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_BITRATE_EXPIRATION)||!1,R=parseInt(Z.bitrate);isNaN(R)||K?K&&localStorage.removeItem(W):(this.abrController.setInitialBitrateFor(z,R),this.log("Last bitrate played for "+z+" was "+R));}void 0===this.abrController.getInitialBitrateFor(z)&&this.abrController.setInitialBitrateFor(z,MediaPlayer.dependencies.AbrController["DEFAULT_"+z.toUpperCase()+"_BITRATE"]);}},this);};return {system:void 0,log:void 0,abrController:void 0,checkInitialBitrate:M,enableLastBitrateCaching:function(z,W){N=z,void 0===W||isNaN(W)||"number"!=typeof W||(MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_BITRATE_EXPIRATION=W);},isSupported:function(z){return b9o.F0E(z,MediaPlayer.utils.DOMStorage.STORAGE_TYPE_LOCAL)?window.localStorage||!1:b9o.a0E(z,MediaPlayer.utils.DOMStorage.STORAGE_TYPE_SESSION)?window.sessionStorage||!1:!1;}};},MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_VIDEO_BITRATE_KEY="dashjs_vbitrate",MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_AUDIO_BITRATE_KEY="dashjs_abitrate",MediaPlayer.utils.DOMStorage.LOCAL_STORAGE_BITRATE_EXPIRATION=36e4,MediaPlayer.utils.DOMStorage.STORAGE_TYPE_LOCAL="local",MediaPlayer.utils.DOMStorage.STORAGE_TYPE_SESSION="session",MediaPlayer.utils.DOMStorage.prototype={constructor:MediaPlayer.utils.DOMStorage},MediaPlayer.utils.Debug=function(){"use strict";var K,R=!0,N=!1,M=!1,P=(new Date).getTime();return {system:void 0,eventBus:void 0,setup:function(){this.system.mapValue("log",this.log),K=this.eventBus;},setLogTimestampVisible:function(W){var Z=function(z){N=z;};Z(W);},showCalleeName:function(W){var Z=function(z){M=z;};Z(W);},setLogToBrowserConsole:function(W){var Z=function(z){R=z;};Z(W);},getLogToBrowserConsole:function(){return R;},log:function(){var W="",Z=null;N&&(Z=(new Date).getTime(),W+="["+(b9o.v0E(Z,P))+"]"),M&&this.getName&&(W+="["+this.getName()+"]"),this.getMediaType&&this.getMediaType()&&(W+="["+this.getMediaType()+"]"),b9o.I0E(W.length,0)&&(W+=" "),Array.apply(null,arguments).forEach(function(z){W+=z+" ";}),R&&console.log(W),K.dispatchEvent({type:"log",message:W});}};},MediaPlayer.utils.EventBus=function(){"use strict";var N,M=function(z,W){var Z=(W?"1":"0")+z;return b9o.d0E(Z,N)||(N[Z]=[]),N[Z];},P=function(){N={};};return P(),{addEventListener:function(z,W,Z){var K=M(z,Z),R=K.indexOf(W);-1===R&&K.push(W);},removeEventListener:function(z,W,Z){var K=M(z,Z),R=K.indexOf(W);-1!==R&&K.splice(R,1);},dispatchEvent:function(z){for(var W=M(z.type,!1).slice(),Z=0;b9o.t0E(Z,W.length);Z++)W[Z].call(this,z);return !z.defaultPrevented;}};},MediaPlayer.vo.BitrateInfo=function(){"use strict";this.mediaType=null,this.bitrate=null,this.qualityIndex=b9o.L0E(0,0);},MediaPlayer.vo.BitrateInfo.prototype={constructor:MediaPlayer.vo.BitrateInfo},MediaPlayer.vo.Error=function(z,W,Z){"use strict";this.code=z||null,this.message=W||null,this.data=Z||null;},MediaPlayer.vo.Error.prototype={constructor:MediaPlayer.vo.Error},MediaPlayer.vo.Event=function(){"use strict";this.type=null,this.sender=null,this.data=null,this.error=null,this.timestamp=b9o.z4E(0,0);},MediaPlayer.vo.Event.prototype={constructor:MediaPlayer.vo.Event},MediaPlayer.vo.FragmentRequest=function(){"use strict";this.action="download",this.startTime=b9o.K4E(0,0),this.mediaType=null,this.type=null,this.duration=b9o.N4E(0,0),this.timescale=b9o.j4E(0,0),this.range=null,this.url=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=b9o.y4E(0,0),this.index=b9o.A4E(0,0),this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null;},MediaPlayer.vo.FragmentRequest.prototype={constructor:MediaPlayer.vo.FragmentRequest,ACTION_DOWNLOAD:"download",ACTION_COMPLETE:"complete"},MediaPlayer.vo.ManifestInfo=function(){"use strict";this.DVRWindowSize=b9o.Y4E(0,0),this.loadedTime=null,this.availableFrom=null,this.minBufferTime=b9o.l4E(0,0),this.duration=b9o.n4E(0,0),this.isDynamic=!1,this.maxFragmentDuration=null;},MediaPlayer.vo.ManifestInfo.prototype={constructor:MediaPlayer.vo.ManifestInfo},MediaPlayer.vo.MediaInfo=function(){"use strict";this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.trackCount=0,this.lang=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null;},MediaPlayer.vo.MediaInfo.prototype={constructor:MediaPlayer.vo.MediaInfo},MediaPlayer.models.MetricsList=function(){"use strict";return {TcpList:[],HttpList:[],RepSwitchList:[],BufferLevel:[],BufferState:[],PlayList:[],DroppedFrames:[],SchedulingInfo:[],DVRInfo:[],ManifestUpdate:[]};},MediaPlayer.models.MetricsList.prototype={constructor:MediaPlayer.models.MetricsList},MediaPlayer.vo.StreamInfo=function(){"use strict";this.id=null,this.index=null,this.start=b9o.c4E(0,0),this.duration=b9o.k4E(0,0),this.manifestInfo=null,this.isLast=!0;},MediaPlayer.vo.StreamInfo.prototype={constructor:MediaPlayer.vo.StreamInfo},MediaPlayer.vo.TrackInfo=function(){"use strict";this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null;},MediaPlayer.vo.TrackInfo.prototype={constructor:MediaPlayer.vo.TrackInfo},MediaPlayer.vo.URIFragmentData=function(){"use strict";this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null;},MediaPlayer.vo.URIFragmentData.prototype={constructor:MediaPlayer.vo.URIFragmentData},MediaPlayer.vo.metrics.BufferLevel=function(){"use strict";this.t=null,this.level=null;},MediaPlayer.vo.metrics.BufferLevel.prototype={constructor:MediaPlayer.vo.metrics.BufferLevel},MediaPlayer.vo.metrics.BufferState=function(){"use strict";this.target=null,this.state=MediaPlayer.dependencies.BufferController.BUFFER_EMPTY;},MediaPlayer.vo.metrics.BufferState.prototype={constructor:MediaPlayer.vo.metrics.BufferState},MediaPlayer.vo.metrics.DVRInfo=function(){"use strict";this.time=null,this.range=null,this.manifestInfo=null;},MediaPlayer.vo.metrics.DVRInfo.prototype={constructor:MediaPlayer.vo.metrics.DVRInfo},MediaPlayer.vo.metrics.DroppedFrames=function(){"use strict";this.time=null,this.droppedFrames=null;},MediaPlayer.vo.metrics.DroppedFrames.prototype={constructor:MediaPlayer.vo.metrics.DroppedFrames},MediaPlayer.vo.metrics.HTTPRequest=function(){"use strict";this.stream=null,this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.tfinish=null,this.responsecode=null,this.interval=null,this.mediaduration=null,this.responseHeaders=null,this.trace=[];},MediaPlayer.vo.metrics.HTTPRequest.prototype={constructor:MediaPlayer.vo.metrics.HTTPRequest},MediaPlayer.vo.metrics.HTTPRequest.Trace=function(){"use strict";this.s=null,this.d=null,this.b=[];},MediaPlayer.vo.metrics.HTTPRequest.Trace.prototype={constructor:MediaPlayer.vo.metrics.HTTPRequest.Trace},MediaPlayer.vo.metrics.HTTPRequest.MEDIA_SEGMENT_TYPE="Media Segment",MediaPlayer.vo.metrics.HTTPRequest.MPD_TYPE="MPD",MediaPlayer.vo.metrics.ManifestUpdate=function(){"use strict";this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.trackInfo=[];},MediaPlayer.vo.metrics.ManifestUpdate.StreamInfo=function(){"use strict";this.id=null,this.index=null,this.start=null,this.duration=null;},MediaPlayer.vo.metrics.ManifestUpdate.TrackInfo=function(){"use strict";this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null;},MediaPlayer.vo.metrics.ManifestUpdate.prototype={constructor:MediaPlayer.vo.metrics.ManifestUpdate},MediaPlayer.vo.metrics.ManifestUpdate.StreamInfo.prototype={constructor:MediaPlayer.vo.metrics.ManifestUpdate.StreamInfo},MediaPlayer.vo.metrics.ManifestUpdate.TrackInfo.prototype={constructor:MediaPlayer.vo.metrics.ManifestUpdate.TrackInfo},MediaPlayer.vo.metrics.PlayList=function(){"use strict";this.stream=null,this.start=null,this.mstart=null,this.starttype=null,this.trace=[];},MediaPlayer.vo.metrics.PlayList.Trace=function(){"use strict";this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null;},MediaPlayer.vo.metrics.PlayList.prototype={constructor:MediaPlayer.vo.metrics.PlayList},MediaPlayer.vo.metrics.PlayList.INITIAL_PLAY_START_REASON="initial_start",MediaPlayer.vo.metrics.PlayList.SEEK_START_REASON="seek",MediaPlayer.vo.metrics.PlayList.Trace.prototype={constructor:MediaPlayer.vo.metrics.PlayList.Trace()},MediaPlayer.vo.metrics.PlayList.Trace.USER_REQUEST_STOP_REASON="user_request",MediaPlayer.vo.metrics.PlayList.Trace.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",MediaPlayer.vo.metrics.PlayList.Trace.END_OF_CONTENT_STOP_REASON="end_of_content",MediaPlayer.vo.metrics.PlayList.Trace.REBUFFERING_REASON="rebuffering",MediaPlayer.vo.metrics.TrackSwitch=function(){"use strict";this.t=null,this.mt=null,this.to=null,this.lto=null;},MediaPlayer.vo.metrics.TrackSwitch.prototype={constructor:MediaPlayer.vo.metrics.TrackSwitch},MediaPlayer.vo.metrics.SchedulingInfo=function(){"use strict";this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null;},MediaPlayer.vo.metrics.SchedulingInfo.prototype={constructor:MediaPlayer.vo.metrics.SchedulingInfo},MediaPlayer.vo.metrics.TCPConnection=function(){"use strict";this.tcpid=null,this.dest=null,this.topen=null,this.tclose=null,this.tconnect=null;},MediaPlayer.vo.metrics.TCPConnection.prototype={constructor:MediaPlayer.vo.metrics.TCPConnection},MediaPlayer.vo.protection.ClearKeyKeySet=function(A,y){if(y&&b9o.D4E("persistent",y)&&b9o.w4E("temporary",y))throw  new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=A,this.type=y,this.toJWK=function(){var z,W=this.keyPairs.length,Z={};for(Z.keys=[],z=0;b9o.u4E(W,z);z++){var K={kty:"oct",alg:"A128KW",kid:this.keyPairs[z].keyID,k:this.keyPairs[z].key};Z.keys.push(K);}this.type&&(Z.type=this.type);var R=JSON.stringify(Z),N=R.length,M=new ArrayBuffer(N),P=new Uint8Array(M);for(z=0;b9o.s4E(N,z);z++)P[z]=R.charCodeAt(z);return M;};},MediaPlayer.vo.protection.ClearKeyKeySet.prototype={constructor:MediaPlayer.vo.protection.ClearKeyKeySet},MediaPlayer.vo.protection.KeyError=function(z,W){"use strict";this.sessionToken=z,this.error=W;},MediaPlayer.vo.protection.KeyError.prototype={constructor:MediaPlayer.vo.protection.KeyError},MediaPlayer.vo.protection.KeyMessage=function(z,W,Z,K){"use strict";this.sessionToken=z,this.message=W,this.defaultURL=Z,this.messageType=K;},MediaPlayer.vo.protection.KeyMessage.prototype={constructor:MediaPlayer.vo.protection.KeyMessage},MediaPlayer.vo.protection.KeyPair=function(z,W){"use strict";if(!z||b9o.e4E(16,z.length))throw  new Error("Illegal key ID length! Must be 16 bytes (128 bits)");if(!W||b9o.U4E(16,W.length))throw  new Error("Illegal key length! Must be 16 bytes (128 bits)");this.keyID=z,this.key=W;},MediaPlayer.vo.protection.KeyPair.prototype={constructor:MediaPlayer.vo.protection.KeyPair},MediaPlayer.vo.protection.KeySystemAccess=function(z,W){this.keySystem=z,this.ksConfiguration=W;},MediaPlayer.vo.protection.KeySystemAccess.prototype={constructor:MediaPlayer.vo.protection.KeySystemAccess},MediaPlayer.vo.protection.KeySystemConfiguration=function(z,W,Z,K){this.initDataTypes=["cenc"],this.audioCapabilities=z,this.videoCapabilities=W,this.distinctiveIdentifier=Z,this.persistentState=K;},MediaPlayer.vo.protection.KeySystemConfiguration.prototype={constructor:MediaPlayer.vo.protection.KeySystemConfiguration},MediaPlayer.vo.protection.LicenseRequestComplete=function(z,W){"use strict";this.message=z,this.requestData=W;},MediaPlayer.vo.protection.LicenseRequestComplete.prototype={constructor:MediaPlayer.vo.protection.LicenseRequestComplete},MediaPlayer.vo.protection.MediaCapability=function(z,W){this.contentType=z,this.robustness=W;},MediaPlayer.vo.protection.MediaCapability.prototype={constructor:MediaPlayer.vo.protection.MediaCapability},MediaPlayer.vo.protection.NeedKey=function(z,W){this.initData=z,this.initDataType=W;},MediaPlayer.vo.protection.NeedKey.prototype={constructor:MediaPlayer.vo.protection.NeedKey},MediaPlayer.vo.protection.ProtectionData=function(z,W,Z,K){this.laURL=z,this.httpRequestHeaders=W,this.bearerToken=Z,this.clearkeys=K;},MediaPlayer.vo.protection.ProtectionData.prototype={constructor:MediaPlayer.vo.protection.ProtectionData},MediaPlayer.models.SessionToken=function(){"use strict";},MediaPlayer.models.SessionToken.prototype={initData:null,getSessionID:function(){return "";},getExpirationTime:function(){return b9o.o9E(0,0);},getKeyStatuses:function(){return null;}};var CL;if(!window.castLabs)var castLabs={};Number.prototype.round=function(z){return +(Math.round(this+"e+"+z)+"e-"+z);},castLabsDashJS=function(){"use strict";castLabs={},CL=window.CL||{},CL.configs={ua:navigator.userAgent.toLowerCase(),debug:!1,minBufferTime:1e3,validateInterval:5e3,bufferingValidateInterval:500,mergeSegmentsThreshold:5e3,switchBitratesWaitTime:5e3,useEME2:!0,isIE10:!1,isIE11:!1,isChromeDesktop:!1,isChromeAndroid:!1,isChromecast:!1,isSafari:!1,isSafari8:!1,isFirefox:!1,isOpera:!1,isOperaEME:!1,isActiveVideoChrome:!1,isWindows:!1,isPlatformSupported:!1,element:null,isSmoothStreaming:!1,ssTimeOffset:{video:0,audio:0,text:0},ssTimeOffsetTimescale:{video:1,audio:1,text:1},codecPrivateData:{},firstIndex:{audio:!0,video:!0},adjustLiveEdge:!0,audioInitData:{},repHeight:{},repWidth:{},timescale:{},customAttributes:{},isProtected:!1,audioTracks:[],activeAudioTrack:null,textTracks:[],activeTextTrack:null,previousActiveTrack:{text:null,audio:null,video:null},activeTrack:{text:null,audio:null,video:null},tracks:{text:[],audio:[],video:[]},subtitlesOff:!1,activePlayer:null,minStartTime:null,initialStartTime:null,minStartTimeSeekInProgress:!1,keyRequests:[],isLive:!1,lookAheadFragments:{audio:[],video:[],text:[]},needManifestUpdate:!1,sourceCleaningInProgress:0,manifestTimeOffset:0,limitRepresentation:!1,lowerRepresentation:!1,maxIndex:-1,droppedFramesCountOffset:0,lastAppendedSegment:{audio:{},video:{}},wasLive:!1},CL.manifest={drm:"auto",debug:!1,key:null,keyId:null,customData:{userId:null,sessionId:null,merchant:null},assetId:null,variantId:null,authenticationToken:null,sendCustomData:!0,playReadyLicenseServerURL:null,widevineLicenseServerURL:null,accessLicenseServerURL:null,generatePSSH:!1,parseMoofFragments:!1,enableSmoothStreamingCompatibility:!1,ignoreManifestBufferSettings:!1,isSmoothStreaming:!1,useLookAheadFragments:!1,useUniversalSubtitleEngine:!0,fixAudioCodec:!1,fixVideoCodec:!1,widevineHeader:{provider:null,contentId:null,trackType:null,policy:null},playreadyHeader:{laUrl:"http://example.com/RightsManager.asmx",luiUrl:"http://example.com"},autoplay:!1,loop:!1,controls:!0,ABRParameters:{qualitySwitchThreshold:2e3,bandwidthSafetyFactor:1.5,minBufferLength:15,maxBufferLength:25,liveDelay:8,disableBufferOccupancyRule:!1,droppedFrameThreshold:0,limitThroughputRule:!1},licenseRequestTimeout:0,manifestRequestTimeout:0,fragmentRequestTimeout:0,disableChromecastSupport:!1,disableDASHJSOnIE11:!1,pictureSize:"normal",customHeaders:{manifestRequest:{},licenseRequest:{},fragmentRequest:{}},calculateTimeShiftBufferDepth:!1,relativeDVRWindowPlaybackPosition:-1,useNativeSilverlightControls:!1};try{CL.defaultConfigs=JSON?JSON.parse(JSON.stringify(CL.configs)):null,CL.defaultManifest=JSON?JSON.parse(JSON.stringify(CL.manifest)):null;}catch(z){}return {classes:{}};}();try{window.self={};}catch(z){}var initChromecastReceiver=function(){var A="urn:x-cast:com.castlabs.chromecast";if(CL.manifest.useUniversalSubtitleEngine=!1,window.self.video=document.querySelector("video"),void 0==window.mediaManager){var y=function(z){window.mediaManager.customizedStatusCallback=z;};window.mediaManager=new cast.receiver.MediaManager(window.self.video),window.castReceiverManager=cast.receiver.CastReceiverManager.getInstance(),CL.configs.debug&&console.log("Initializing Chromecast receiver app..."),window.castReceiverManager.onReady=function(){CL.configs.debug&&console.log("window.castReceiverManager is ready.");},window.castReceiverManager.onSenderConnected=function(){CL.configs.debug&&console.log("Sender has connected.");},window.castReceiverManager.onSenderDisconnected=function(){CL.configs.debug&&console.log("Sender has disconnected.");},window.castReceiverManager.onShutdown=function(){for(var z,W=window.castReceiverManager.getSenders(),Z=0;b9o.Z9E(Z,W.length);Z++)z=W[Z],console.log("Connected sender: "+z);CL.configs.debug&&console.log("Application has shutdown.");},window.castReceiverManager.onSystemVolumeChanged=function(){CL.configs.debug&&console.log("System volume has changed.");},window.castReceiverManager.onVisibilityChanged=function(){CL.configs.debug&&console.log("Visibility has changed.");},window.messageBus=castReceiverManager.getCastMessageBus(A,cast.receiver.CastMessageBus.MessageType.JSON),window.messageBus.onMessage=function(z){var W=(z.senderId,z.data),Z=W.command;switch(Z){case "setActiveTrack":b9o.p9E("audio",W.type)&&b9o.P9E(CL.configs.activeTrack.audio.id,W.id)&&window.self.player.setActiveTrack("audio",W.id),b9o.r9E("text",W.type)&&window.self.player.setActiveTrack("text",W.id);break;case "enableSubtitles":window.self.player.enableSubtitles(!0);break;case "disableSubtitles":window.self.player.enableSubtitles(!1);}};var E=function(z){return z.currentTime=window.self.currentTime,z.customData={duration:window.self.duration,audioTracks:window.self.audioTracks,textTracks:window.self.textTracks},void 0!=z.media&&(z.media.duration=window.self.duration),(b9o.S9E(null,z.idleReason)||b9o.E9E("ERROR",z.idleReason))&&(z.idleReason=cast.receiver.media.IdleReason.CANCELLED),b9o.q9E(z.playerState,cast.receiver.media.PlayerState.BUFFERING)&&b9o.J9E(4,window.self.video.readyState)&&b9o.H9E(1,window.self.video.playbackRate)&&(z.playerState=cast.receiver.media.PlayerState.PLAYING),z;};y(E);var B=(new Date).getTime();onVideoStateChange=function(z){window.self.currentTime=window.self.video.currentTime,window.self.duration=window.self.video.duration,CL.configs.isChromecast&&(b9o.V9E("ended",z)&&CL.manifest.loop===!0&&setTimeout(window.self.loadVideo(CL.manifest.url),5e3),now=(new Date).getTime(),b9o.x9E(now-B,500)&&(B=now,window.mediaManager.broadcastStatus(!0)));},window.mediaManager.onStopOrig=window.mediaManager.onStop,window.mediaManager.onStop=function(z){window.self.player.reset(),window.mediaManager.onStopOrig(z);},window.mediaManager.onLoadOrig=window.mediaManager.onLoad,window.mediaManager.onLoad=function(N){if(void 0!=window.self.firstPlayback&&window.self.firstPlayback===!1&&window.self.player&&window.self.player.pause){try{window.self.player.pause();}catch(z){}if(window.self.player.removeEventListener)try{window.self.player.removeEventListener(),window.self.player.reset();}catch(z){}}try{var M=void 0===window.self.video.setMediaKeys,P=function(){var W=function(z){window.self.player.manifestUrl=z;};window.self.video.removeEventListener("timeupdate",onVideoStateChange),window.self.video.removeEventListener("durationchange",onVideoStateChange),window.self.video.removeEventListener("ended",onVideoStateChange),window.self.video.removeEventListener("pause",onVideoStateChange),window.self.video.removeEventListener("play",onVideoStateChange),window.self.video.removeEventListener("ratechange",onVideoStateChange),(window.self.firstPlayback===!0||M)&&(window.self.player=new MediaPlayer(new castLabsDashJS.classes.DRMtodayContext(window.config))),window.self.video=document.querySelector("video"),window.mediaManager.setMediaElement(window.self.video),window.self.video.addEventListener("timeupdate",onVideoStateChange.bind(this,"timeupdate")),window.self.video.addEventListener("durationchange",onVideoStateChange.bind(this,"durationchange")),window.self.video.addEventListener("ended",onVideoStateChange.bind(this,"ended")),window.self.video.addEventListener("pause",onVideoStateChange.bind(this,"pause")),window.self.video.addEventListener("play",onVideoStateChange.bind(this,"play")),window.self.video.addEventListener("ratechange",onVideoStateChange.bind(this,"ratechange")),MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY=15,CL.configs.event=N;var Z=N.data.media.contentId;W(Z);var K={};(void 0===CL.manifest.drm||b9o.m9E(null,CL.manifest.drm)||b9o.X9E("auto",CL.manifest.drm)||b9o.g9E("",CL.manifest.drm))&&(K.drm="com.widevine.alpha"),K.debug=!1,K.autoplay=!0,K.customData={userId:N.data.media.customData.userId,sessionId:N.data.media.customData.sessionId,merchant:N.data.media.customData.merchant},K.useUniversalSubtitleEngine=!1,window.self.player.setConfig(K),cast.receiver.logger.setLevelValue(CL.configs.debug?cast.receiver.LoggerLevel.DEBUG:cast.receiver.LoggerLevel.NONE);var R=N.data.currentTime;void 0===R||b9o.f9E(null,R)||isNaN(parseInt(R))||(CL.configs.initialStartTime=parseInt(R)),window.self.player.loadVideo(Z),window.self.firstPlayback=!1,window.mediaManager.onLoadOrig(N);};M===!1?(CL.configs.sourceCleaningInProgress=(new Date).getTime(),window.self.video.src="",window.self.video.setMediaKeys?window.self.video.setMediaKeys(null).then(function(){P();},function(){P();}):P()):P();}catch(z){}},window.mediaManager.customizedStatusCallback=E,MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY=15,window.castReceiverManager.start();}CL.configs.debug&&console.log("Done initializing Chromecast receiver");var G=new Event("chromecastReady");window.dispatchEvent(G);},loadScript=function(z,W,Z){var K=document.getElementsByTagName("head")[0],R=document.createElement("script");R.type="text/javascript",R.src=z,R.onreadystatechange=W,R.onload=function(){W.call(Z);},K.appendChild(R);};castLabsDashJS.classes.DRMtodayContext=function(A){"use strict";return {config:A,system:void 0,setup:function(){var W=function(){CL.configs.isPlatformSupported=!0;};castLabsDashJS.classes.DRMtodayContext.prototype.setup.call(this),this.system.mapSingleton("clUtils",castLabsDashJS.classes.Utils),this.system.mapSingleton("parser",castLabsDashJS.classes.SmoothParser);var Z=navigator.userAgent.toLowerCase(),K=navigator.platform.toLowerCase();CL.configs.useEME2=!1,CL.configs.isChromecast=!1,CL.configs.isChromeAndroid=!1,CL.configs.isChromeDesktop=!1,CL.configs.isIE10=!1,CL.configs.isIE11=!1,CL.configs.isPlatformSupported=!1,CL.configs.debug&&console.log(Z);var R=!1;if(Z.indexOf("chrome")>-1&&Z.indexOf("crkey")>-1&&K.indexOf("linux armv7l")>-1)CL.configs.isChromecast=!0,CL.configs.useEME2=!1,R=!0,CL.configs.debug=!1;else if(Z.indexOf("chrome")>-1&&Z.indexOf("android")>-1&&K.indexOf("linux armv7l")>-1)CL.configs.isChromeAndroid=!0,CL.configs.useEME2=!1,R=!0;else if(Z.indexOf("opr/")>-1&&(Z.indexOf("macintosh")>-1||Z.indexOf("windows")>-1||Z.indexOf("linux")>-1)){var N=new RegExp(/opr\/\d\d/gi),M=N.exec(Z),P=30;if(b9o.h9E(null,M));else try{P=parseInt(M[0].replace("opr/",""));}catch(z){}b9o.C9E(P,31)?(CL.configs.isOperaEME=!0,R=!0):(CL.configs.isOpera=!0,R=!1);}else -1==Z.indexOf("edge/12")&&Z.indexOf("chrome")>-1&&(Z.indexOf("macintosh")>-1||Z.indexOf("windows")>-1||Z.indexOf("linux")>-1||Z.indexOf("cros"))?(CL.configs.isChromeDesktop=!0,CL.configs.useEME2=!1,R=!0):Z.indexOf("trident")>-1&&Z.indexOf("rv:11")>-1&&(Z.indexOf("windows nt 6.3")>-1||Z.indexOf("windows nt 10.0")>-1)?(CL.configs.isIE11=!0,CL.configs.useEME2=!0,R=!0):Z.indexOf("edge/12")>-1&&Z.indexOf("windows nt 10")>-1?(CL.configs.isIE11=!0,CL.configs.useEME2=!0,CL.configs.isWindows=!0,R=!0):Z.indexOf("trident")>-1&&(Z.indexOf("trident/6.0")>-1&&Z.indexOf("windows nt 6.1")>-1||Z.indexOf("msie 10.0")>-1)?(CL.configs.isIE10=!0,CL.configs.isWindows=!0):Z.indexOf("applewebkit")>-1&&Z.indexOf("version")>-1&&Z.indexOf("mac os x")>-1&&(CL.configs.isSafari8=!0,R=!0);W();}};},castLabsDashJS.classes.DRMtodayContext.prototype=new Dash.di.DashContext,castLabsDashJS.classes.DRMtodayContext.prototype.constructor=castLabsDashJS.classes.DRMtodayContext,castLabsDashJS.classes.SmoothParser=function(){"use strict";var f5,p3=function(z){this.system=z,this.utils=this.system.getObject("clUtils");},y3=function(N,M){if(f5=new Dash.dependencies.DashParser,f5.log=this.log,f5.errHandler=this.errHandler,f5.debug=this.debug,CL.configs.isSmoothStreaming===!0){var P,A,y,E,B,G,q,Y,O,V,w,H,D,F,Q,x,v,u,J,L,I,X,z5,o5,W5,C,K5,U,Z5,p5,N5,R5=31536e3,b5=2592e3,j5=86400,T5=3600,S5=60,Y5=60,O5=1e3,k5=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)+/,V5=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})([0-9]{2}))?/,G5=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Q5=[{type:"duration",test:function(z){return k5.test(z);},converter:function(z){var W=k5.exec(z);return b9o.W5R(parseFloat(W[2]||0),R5)+b9o.R5R(parseFloat(W[4]||0),b5)+b9o.M5R(parseFloat(W[6]||0),j5)+b9o.b5R(parseFloat(W[8]||0),T5)+b9o.i5R(parseFloat(W[10]||0),S5)+parseFloat(W[12]||0);}},{type:"datetime",test:function(z){return V5.test(z);},converter:function(z){var W,Z=V5.exec(z);if(W=Date.UTC(parseInt(Z[1],10),b9o.T5R(parseInt(Z[2],10),1),parseInt(Z[3],10),parseInt(Z[4],10),parseInt(Z[5],10),Z[6]&&parseInt(Z[6],10)||0,Z[7]&&b9o.B5R(parseFloat(Z[7]),O5)||0),Z[9]&&Z[10]){var K=b9o.G5R(parseInt(Z[9],10),Y5)+parseInt(Z[10],10);W+=(b9o.O5R("+",Z[8])?-1:1)*K*S5*O5;}return new Date(W);}},{type:"numeric",test:function(z){return G5.test(z);},converter:function(z){return parseFloat(z);}}],B5=function(z){var W="",Z=b9o.Q5R(parseInt(z/3600),24),K=b9o.F5R(parseInt(z/60),60),R=(b9o.a5R(z,60)).toFixed(4);return W="PT"+(b9o.v5R(Z,0)?Z+"H":"")+(b9o.I5R(K,0)?K+"M":"")+(b9o.d5R(R,0)?R+"S":"");},A5=new X2JS(Q5,"",!0),q5=!1,n5=0,w5=0,i5=!1;A5=new X2JS;try{if(this.debug.log("Converting from Smooth->DASH"),P=A5.xml_str2json(N),P=P.SmoothStreamingMedia,this.utils.processJSON(P),W5=void 0!==P.TimeScale?P.TimeScale:void 0!==P.Timescale?P.Timescale:null,b9o.t5R(null,W5)&&(W5=1e7),X=B5(b9o.L5R(P.Duration,W5)),void 0!==P.IsLive&&b9o.z3R("true",P.IsLive.toLowerCase())?(i5=!0,CL.configs.isLive=!0,CL.configs.wasLive=!0,void 0===P.DVRWindowLength&&(P.DVRWindowLength=1e8),N5=B5(b9o.K3R(P.DVRWindowLength,W5))):CL.configs.isLive=!1,I=i5?"PT8S":"PT2S",K5=P.LookAheadFragmentCount,(void 0!=P.Protection&&void 0!=P.Protection.ProtectionHeader||b9o.N3R(1,CL.manifest.generatePSSH))&&(CL.configs.isProtected=!0,CL.manifest.generatePSSH=!0,q5=!0,void 0!=P.Protection&&void 0!=P.Protection.ProtectionHeader?(Z5=this.utils.arrayToString(this.utils.removeZeros(this.utils.base64DecToArr(P.Protection.ProtectionHeader.text))),U=Z5.substring(Z5.toLowerCase().indexOf("<kid>")+5,Z5.toLowerCase().indexOf("</kid>")),U=this.utils.toMsGuid(this.utils.byteArrayToHexString(this.utils.base64DecToArr(U))),b9o.j3R(null,CL.manifest.keyId)?CL.manifest.keyId=U:U=CL.manifest.keyId):U=CL.manifest.keyId,CL.manifest.widevineHeader.contentId&&b9o.y3R(null,CL.manifest.widevineHeader.contentId)&&b9o.A3R("",CL.manifest.widevineHeader.contentId)||(CL.manifest.widevineHeader.contentId=this.utils.hexStringToBase64(U.replace(/-/g,""))),void 0==U||b9o.Y3R(null,U)||b9o.l3R("",U)))throw "Could not find content protection data for this Smooth Content. Please check your configuration.";if(y={MPD:{_profiles:"urn:mpeg:dash:profile:isoff-on-demand:2011",_type:i5?"dynamic":"static",_minBufferTime:I,_mediaPresentationDuration:X,_xmlns:"urn:mpeg:dash:schema:mpd:2011","_xmlns:cenc":"urn:mpeg:cenc:2013",ProgramInformation:{_moreInformationURL:"www.castLabs.com"},Period:{_start:"PT0S",_duration:X},_lookAheadFragmentCount:K5}},i5===!0&&(y.MPD._profiles="urn:mpeg:dash:profile:isoff-live:2011",y.MPD._type="dynamic",y.MPD._timeShiftBufferDepth=N5),Q=[],!Array.isArray(P.StreamIndex)){var H5=P.StreamIndex;P.StreamIndex=[],P.StreamIndex[0]=H5;}var $=[],x5=0;if(b9o.n3R("video",P.StreamIndex[P.StreamIndex.length-1].Type))for(var J5=b9o.c3R(P.StreamIndex.length,1);b9o.k3R(J5,0);J5--)$[x5]=P.StreamIndex[J5],x5++;else for(var J5=0;b9o.D3R(J5,P.StreamIndex.length);J5++)$[x5]=P.StreamIndex[J5],x5++;o5=[],C=[];for(var J5=0;b9o.w3R(J5,P.StreamIndex.length);J5++){if(E=$[J5],w=[],!Array.isArray(E.QualityLevel)){var H5=E.QualityLevel;E.QualityLevel=[],E.QualityLevel[0]=H5;}if(v=0,u=0,F={_segmentAlignment:"true",_maxFrameRate:25,_par:"16:9"},F._lang=E.Language,B=E.Type,b9o.u3R("subtitle",B)&&(B="text"),F._id=B+"_"+J5,C[F._id]=void 0!==E.TimeScale?E.TimeScale:void 0!==P.Timescale?E.Timescale:W5,b9o.s3R("text",B)||(F._mimeType="text/vtt",F._subType=E.Subtype?E.Subtype.toLowerCase():"subt",F._name=E.Name?E.Name:E.Language,!E.Subtype||b9o.e3R("chap",E.Subtype.toLowerCase()))){o5[F._id]=0,b9o.U3R("video",B)&&(z5=0),b9o.o2R("audio",B)&&(z5=0,F._mimeType="audio/mp4"),q5===!0&&(F.ContentProtection={"_cenc:default_KID":U,_schemeIdUri:"urn:mpeg:dash:mp4protection:2011",_value:"cenc"}),x=0,p5=E.Url,void 0===p5&&E.Location&&(p5=E.Location),p5=p5.replace(/{bitrate}/gi,"$Bandwidth$"),p5=p5.replace(/{start_time}/gi,"$Time$"),p5=p5.replace(/{start time}/gi,"$Time$"),p5=p5.replace(/{CustomAttributes}/gi,"$CustomAttributes$"),w5=0,Array.isArray(E.c)||(E.c=[E.c]);for(var y5=0;b9o.Z2R(y5,E.c.length);y5++)q=null,Y=E.c[y5],O=null,b9o.p2R(y5,0)&&(q=E.c[b9o.P2R(y5,1)]),b9o.r2R(y5,E.c.length-1)&&(O=E.c[y5+1]),void 0!=Y.t?(x=Y.t,b9o.S2R(0,y5)&&b9o.E2R(x,0)&&(w5=x),b9o.q2R(0,y5)&&b9o.J2R(x,n5)&&(n5=b9o.H2R(x,C[F._id]))):b9o.V2R(null,q)&&q.t?(x=q.t+q.d,E.c[y5].t=x):E.c[y5].t=0,i5===!1&&CL.configs.wasLive===!1&&(x-=w5,b9o.x2R(0,y5)||CL.configs.ssTimeOffset[F._id]||(CL.configs.ssTimeOffset[F._id]=w5)),b9o.m2R(x,0)||b9o.X2R(0,y5)?(void 0==Y.d&&b9o.g2R(null,O)&&void 0!=O.t&&(Y.d=b9o.f2R(O.t,Y.t)),V={_d:Y.d,_t:x}):V={_d:Y.d},void 0!=Y.r&&(V._r=Y.r,Y.d=b9o.h2R(Y.d,parseInt(Y.r))),z5+=Y.d,o5[F._id]=o5[F._id]+Y.d,x=0,w.push(V);D=[],F.SegmentTemplate={_timescale:C[F._id],_media:p5,_startNumber:1,SegmentTimeline:{S:w}};for(var y5=0;b9o.C2R(y5,E.QualityLevel.length);y5++){var D5=function(z){G=z.QualityLevel[y5];};D5(E);var E5=void 0!=G.FourCC?G.FourCC.toLowerCase():"unknown";if(E5=E5.trim(),b9o.W8R("video",B)){if(b9o.R8R("avc1",E5)&&b9o.M8R("h264",E5)){CL.configs.debug&&console.log("Skipping unsupported video type "+E5);continue;}}else if(b9o.b8R("audio",B)){if(void 0===G.CodecPrivateData||b9o.i8R("",G.CodecPrivateData)){var l5,m5,d5={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u5=2,h5=d5[G.SamplingRate];if(b9o.T8R("aach",E5)){u5=5,l5=new Uint8Array(4);var R3=d5[b9o.B8R(2,G.SamplingRate)];l5[0]=b9o.G8R(u5<<3,h5>>1),l5[1]=b9o.O8R(h5<<7,G.Channels<<3,R3>>1),l5[2]=b9o.V8R(R3<<7,8),l5[3]=0,m5=new Uint16Array(2),m5[0]=(b9o.x8R(l5[0],8))+l5[1],m5[1]=(b9o.m8R(l5[2],8))+l5[3],G.CodecPrivateData=m5[0].toString(16)+m5[1].toString(16);}else l5=new Uint8Array(2),l5[0]=b9o.X8R(u5<<3,h5>>1),l5[1]=b9o.g8R(h5<<7,G.Channels<<3),m5=new Uint16Array(1),m5[0]=(b9o.f8R(l5[0],8))+l5[1],G.CodecPrivateData=m5[0].toString(16);}if(b9o.h8R("mp4a",E5)&&b9o.C8R("aacl",E5)&&b9o.W1R("mp2",E5)&&b9o.R1R("mp2a",E5)&&b9o.M1R("aach",E5)){CL.configs.debug&&console.log("Skipping unsupported audio type "+E5);continue;}}else if(b9o.b1R("text",B)){if(b9o.i1R("srt",E5)&&b9o.T1R("vtt",E5)&&b9o.B1R("ttml",E5)){CL.configs.debug&&console.log("Skipping unsupported text type "+E5);continue;}b9o.G1R("ttml",E5)&&(F._mimeType="application/ttml+xml");}H={_id:E.Type+"_"+y5,_bandwidth:G.Bitrate,_codecPrivateData:G.CodecPrivateData},CL.configs.codecPrivateData[H._id]=""+G.CodecPrivateData,b9o.O1R("audio",B)&&(CL.configs.audioInitData[H._id]={audioTag:G.AudioTag,bitrate:G.Bitrate,bitsPerSample:b9o.Q1R(0,G.BitsPerSample)?16:G.BitsPerSample,channels:G.Channels,fourCC:G.FourCC,packetSize:G.PacketSize,samplingRate:G.SamplingRate}),CL.configs.timescale[H._id]=C[F._id],G.CustomAttributes&&(CL.configs.customAttributes[H._id]=G.CustomAttributes),b9o.F1R("video",B)?(H._mimeType="video/mp4",H._codecs="avc1.42c00c",L=parseFloat(G.MaxWidth),J=parseFloat(G.MaxHeight),CL.configs.repWidth[H._id]=L,CL.configs.repHeight[H._id]=J,H._width=L,H._height=J,H._sar=1,H._startWithSAP=1,v=b9o.a1R(L,v)?L:v,u=b9o.v1R(J,u)?J:u):b9o.I1R("audio",B)?(H._codecs=b9o.d1R(0,(""+G.CodecPrivateData).indexOf("1310"))?"mp4a.40.5":"mp4a.40.2",H._audioSamplingRate=G.SamplingRate):b9o.t1R("text",B)&&(H._bandwidth=G.Bitrate,H.BaseURL=p5),D.push(H);}F._maxWidth=v,F._maxHeight=u,F.Representation=D,b9o.L1R(D.length,0)&&Q.push(F);}}CL.configs.debug&&console.log(P),(void 0===P.Duration||b9o.z6R(0,P.Duration))&&b9o.K6R(z5,0)&&(X=B5(b9o.N6R(z5,W5)),y.MPD._mediaPresentationDuration=X,y.MPD.Period._duration=X);for(var z3 in o5){var W3=b9o.j6R(o5[z3],C[z3],W5);z3.indexOf("text")>-1||(CL.configs.debug&&console.log(W3.toFixed()),b9o.i6R(z5,W3)&&(z5=W3));}X=B5(b9o.T6R(z5,W5)),y.MPD._mediaPresentationDuration=X,y.MPD.Period._duration=X,i5&&(delete  y.MPD._mediaPresentationDuration,delete  y.MPD._duration,delete  y.MPD.Period._duration,y.MPD._minimumUpdatePeriod="PT8S",CL.configs.availabilityStartTime||(CL.configs.availabilityStartTime=new Date("Jan 01, 1970").toJSON()),y.MPD._availabilityStartTime=CL.configs.availabilityStartTime,CL.manifest.calculateTimeShiftBufferDepth===!0&&(y.MPD._timeShiftBufferDepth=X)),y.MPD.Period.AdaptationSet=Q,b9o.B6R(n5,0)&&b9o.G6R(null,CL.configs.minStartTime)&&i5&&(CL.configs.minStartTime=n5),A=A5.json2xml_str(y),A=A.replace(/&#x2F;/g,"/"),CL.configs.debug&&console.log(A),CL.configs.debug&&console.log("Done converting."),N=A;}catch(z){CL.configs.debug&&console.log("Failed to convert manifest: "+z);}}return f5.parse.call(this,N,M);};return {setSystem:p3,log:void 0,debug:void 0,errHandler:void 0,parse:y3,system:void 0,setup:function(){this.utils=this.system.getObject("clUtils");}};},castLabsDashJS.classes.SmoothParser.prototype=new Dash.dependencies.DashParser,castLabsDashJS.classes.SmoothParser.prototype.constructor=castLabsDashJS.classes.SmoothParser,castLabsDashJS.classes.Utils=function(){"use strict";var S3=function(z,W){var Z=!1,K=b9o.O6R("WebKitMediaKeys",window),R=b9o.Q6R("MSMediaKeys",window),N=b9o.F6R("MediaKeys",window),M=b9o.a6R("WebKitMediaSource",window),P=b9o.v6R("MediaSource",window);return CL.configs.isActiveVideoChrome===!0?!0:(K?Z=WebKitMediaKeys.isTypeSupported(z):R?Z=MSMediaKeys.isTypeSupported(z):N?Z=MediaKeys.isTypeSupported?MediaKeys.isTypeSupported(z):MediaSource&&MediaSource.isTypeSupported?MediaSource.isTypeSupported(W):!0:M?Z=WebKitMediaSource.isTypeSupported(W):P&&(Z=MediaSource.isTypeSupported(W)),Z);},E2=function(){var W=navigator.userAgent.toLowerCase(),Z=navigator.platform.toLowerCase();CL.configs.useEME2=!1,CL.configs.isChromecast=!1,CL.configs.isChromeAndroid=!1,CL.configs.isChromeDesktop=!1,CL.configs.isIE10=!1,CL.configs.isIE11=!1,CL.configs.isWindows=!1,CL.configs.isFirefox=!1,CL.configs.isSafari=!1,CL.configs.isSafari8=!1,CL.configs.isActiveVideoChrome=!1,CL.configs.isPlatformSupported=!1,CL.configs.debug&&console.log(W);var K=!1,R=!1;if(W.indexOf("cloud")>-1)CL.configs.isActiveVideoChrome=!0,CL.configs.useEME2=!1,K=!0,CL.configs.debug=!1;else if(W.indexOf("chrome")>-1&&W.indexOf("crkey")>-1&&Z.indexOf("linux armv7l")>-1)CL.configs.isChromecast=!0,CL.configs.useEME2=!1,K=!0,CL.configs.debug=!1;else if(W.indexOf("chrome")>-1&&W.indexOf("android")>-1&&Z.indexOf("linux armv7l")>-1)CL.configs.isChromeAndroid=!0,CL.configs.useEME2=!1,K=!0;else if(W.indexOf("opr/")>-1&&(W.indexOf("macintosh")>-1||W.indexOf("windows")>-1||W.indexOf("linux")>-1)){var N=new RegExp(/opr\/\d\d/gi),M=N.exec(W),P=30;if(b9o.I6R(null,M));else try{P=parseInt(M[0].replace("opr/",""));}catch(z){}b9o.d6R(P,31)?(CL.configs.isOperaEME=!0,K=!0):(CL.configs.isOpera=!0,K=!1);}else -1==W.indexOf("edge/12")&&W.indexOf("chrome")>-1&&(W.indexOf("macintosh")>-1||W.indexOf("windows")>-1||W.indexOf("linux")>-1||W.indexOf("cros")>-1)?(CL.configs.isChromeDesktop=!0,CL.configs.useEME2=!1,W.indexOf("windows")>-1&&(CL.configs.isWindows=!0),K=!0):W.indexOf("trident")>-1&&W.indexOf("rv:11")>-1&&(W.indexOf("windows nt 6.3")>-1||W.indexOf("windows nt 10.0")>-1)?(CL.configs.isIE11=!0,CL.configs.useEME2=!0,CL.configs.isWindows=!0,K=!0):W.indexOf("edge/12")>-1&&W.indexOf("windows nt 10")>-1?(CL.configs.isIE11=!0,CL.configs.useEME2=!0,CL.configs.isWindows=!0,K=!0):W.indexOf("trident")>-1&&(W.indexOf("trident/6.0")>-1&&W.indexOf("windows nt 6.1")>-1||W.indexOf("msie 10.0")>-1)?(CL.configs.isIE10=!0,CL.configs.isWindows=!0,window.isIE10=!0):W.indexOf("applewebkit")>-1&&W.indexOf("version")>-1&&W.indexOf("mac os x")>-1?(CL.configs.isSafari=!0,W.indexOf("version/8")&&(CL.configs.isSafari8=!0),K=!0):W.indexOf("firefox")>-1&&W.indexOf("gecko")>-1&&(CL.configs.isFirefox=!0,W.indexOf("windows")>-1&&(CL.configs.isWindows=!0),K=!1);return K&&((CL.configs.isChromeDesktop||CL.configs.isChromeAndroid)&&S3("com.widevine.alpha",'video/mp4;codecs="avc1.42c00c"')?R=!0:CL.configs.isIE11&&S3("com.microsoft.playready",'video/mp4;codecs="avc1.42c00c"')?R=!0:CL.configs.isChromecast&&(S3("com.widevine.alpha",'video/mp4;codecs="avc1.42c00c"')||S3("com.youtube.playready",'video/mp4;codecs="avc1.42c00c"'))?R=!0:CL.configs.isSafari8&&S3("com.apple.fps.1_0",'video/mp4;codecs="avc1.42c00c"')?R=!1:CL.configs.isActiveVideoChrome&&(R=!0)),CL.configs.isPlatformSupported=R,R;},z2=function(z){var W=function(){Z[K]=b9o.t6R(K%2,0)?z[b9o.L6R(K,2)]:0;};for(var Z=new Array(b9o.z7R(2,z.length)),K=0;b9o.K7R(K,2*z.length);K++)W();return Z;},c5={alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",lookup:null,ie:/MSIE /.test(navigator.userAgent),ieo:/MSIE [67]/.test(navigator.userAgent),encode:function(z){var W,Z,K,R=c5.toUtf8(z),N=-1,M=R.length,P=[];if(c5.ie){for(var A=[];++N<M;)W=R[N],Z=R[++N],P[0]=b9o.N7R(W,2),P[1]=b9o.j7R((3&W)<<4,Z>>4),isNaN(Z)?P[2]=P[3]=64:(K=R[++N],P[2]=b9o.y7R((15&Z)<<2,K>>6),P[3]=isNaN(K)?64:b9o.A7R(63,K)),A.push(c5.alphabet.charAt(P[0]),c5.alphabet.charAt(P[1]),c5.alphabet.charAt(P[2]),c5.alphabet.charAt(P[3]));return A.join("");}for(var A="";++N<M;)W=R[N],Z=R[++N],P[0]=b9o.Y7R(W,2),P[1]=b9o.l7R((3&W)<<4,Z>>4),isNaN(Z)?P[2]=P[3]=64:(K=R[++N],P[2]=b9o.n7R((15&Z)<<2,K>>6),P[3]=isNaN(K)?64:b9o.c7R(63,K)),A+=c5.alphabet[P[0]]+c5.alphabet[P[1]]+c5.alphabet[P[2]]+c5.alphabet[P[3]];return A;},decode:function(z){if(b9o.k7R(z.length,4))throw  new Error("InvalidCharacterError: 'B64.decode' failed: The string to be decoded is not correctly encoded.");var W=c5.fromUtf8(z),Z=0,K=W.length;if(c5.ieo){for(var R=[];b9o.D7R(K,Z);)R.push(String.fromCharCode(b9o.w7R(W[Z],128)?W[Z++]:b9o.u7R(W[Z],191)&&b9o.s7R(W[Z],224)?b9o.e7R((31&W[Z++])<<6,63&W[Z++]):b9o.U7R((15&W[Z++])<<12,(63&W[Z++])<<6,63&W[Z++])));return R.join("");}for(var R="";b9o.z0R(K,Z);)R+=String.fromCharCode(b9o.K0R(W[Z],128)?W[Z++]:b9o.N0R(W[Z],191)&&b9o.j0R(W[Z],224)?b9o.y0R((31&W[Z++])<<6,63&W[Z++]):b9o.A0R((15&W[Z++])<<12,(63&W[Z++])<<6,63&W[Z++]));return R;},toUtf8:function(z){var W,Z=-1,K=z.length,R=[];if(/^[\x00-\x7f]*$/.test(z))for(;++Z<K;)R.push(z.charCodeAt(Z));else for(;++Z<K;)W=z.charCodeAt(Z),b9o.B0R(128,W)?R.push(W):b9o.G0R(2048,W)?R.push(b9o.O0R(W>>6,192),b9o.Q0R(63&W,128)):R.push(b9o.F0R(W>>12,224),b9o.a0R(W>>6&63,128),b9o.v0R(63&W,128));return R;},fromUtf8:function(W){var Z,K=-1,R=[],N=[];if(!c5.lookup){var M=function(){K=-1;},P=function(z){c5.lookup[c5.alphabet.charAt(K)]=z;};for(Z=c5.alphabet.length,c5.lookup={};++K<Z;)P(K);M();}for(Z=W.length;++K<Z&&(N[0]=c5.lookup[W.charAt(K)],N[1]=c5.lookup[W.charAt(++K)],R.push(b9o.I0R(N[0]<<2,N[1]>>4)),N[2]=c5.lookup[W.charAt(++K)],b9o.d0R(64,N[2]))&&(R.push(b9o.t0R((15&N[1])<<4,N[2]>>2)),N[3]=c5.lookup[W.charAt(++K)],b9o.L0R(64,N[3]));)R.push(b9o.z4R((3&N[2])<<6,N[3]));return R;}},Y2=function(W){var Z=function(z){K[R]=z[b9o.K4R(2,R)];};for(var K=new Array(b9o.N4R(W.length,2)),R=0;b9o.j4R(R,W.length/2);R++)Z(W);return K;},W2=function(W){var Z=function(z){N[M]=z[M];};W=W.replace(/-/g,"");var K,R=W.split(""),N=new Array(R.length);N[0]=R[6],N[1]=R[7],N[2]=R[4],N[3]=R[5],N[4]=R[2],N[5]=R[3],N[6]=R[0],N[7]=R[1],N[8]=R[10],N[9]=R[11],N[10]=R[8],N[11]=R[9],N[12]=R[14],N[13]=R[15],N[14]=R[12],N[15]=R[13];for(var M=16;b9o.y4R(32,M);M++)Z(R);return K=N.join(""),K=K.substring(0,8)+"-"+K.substring(8,12)+"-"+K.substring(12,16)+"-"+K.substring(16,20)+"-"+K.substring(20,32);},Z2=function(z){return L3(Z3(z));},L3=function(z){return base64js.fromByteArray(z);},Z3=function(W){for(var Z=b9o.A4R(W.length,2),K=new Uint8Array(Z),R=0;b9o.Y4R(Z,R);R++){var N=function(z){K[R]=z;};var M=W.substr(b9o.l4R(2,R),2),P=parseInt(M,16);N(P);}return K;},C3=function(z){for(var W=[],Z=0;b9o.n4R(Z,z.length);Z+=2){var K=parseInt(z.substr(Z,2),16);b9o.c4R(K,128)&&(K-=256),W.push(K);}return W;},A2=function(z){return String.fromCharCode.apply(String,z);},v3=function(z){for(var W=new Uint8Array(z.length),Z=0;b9o.k4R(Z,z.length);Z++)W[Z]=z.charCodeAt(Z);return W;},X5=function(W,Z){for(var K,R,N=W.replace(/[^A-Za-z0-9\+\/]/g,""),M=N.length,P=Z?b9o.D4R(Math.ceil((3*M+1>>2)/Z),Z):b9o.w4R(3*M+1,2),A=new Uint8Array(P),y=0,E=0,B=0;b9o.u4R(M,B);B++)if(R=b9o.s4R(3,B),y|=b9o.e4R(T2(N.charCodeAt(B)),18-6*R),b9o.U4R(3,R)||b9o.o9R(M-B,1)){var G=function(){A[E]=b9o.Z9R(y>>>(16>>>K&24),255);},q=function(z){y=z;};for(K=0;b9o.p9R(3,K)&&b9o.P9R(P,E);K++,E++)G();q(0);}return A;},T2=function(z){return b9o.r9R(z,64)&&b9o.S9R(91,z)?b9o.E9R(z,65):b9o.q9R(z,96)&&b9o.J9R(123,z)?b9o.H9R(z,71):b9o.V9R(z,47)&&b9o.x9R(58,z)?z+4:b9o.m9R(43,z)?62:b9o.X9R(47,z)?63:0;},o2=function(z){for(var W="",Z=0,K=z,R=K.byteLength;b9o.g9R(R,Z);){var N=K[Z],M=(b9o.f9R(16,N)?"0":"")+N.toString(16);W+=M,Z++;}return W;},r3=function(W,Z,K){var R=function(z){N[M]=z[Z+M];};for(var N=new Uint8Array(K),M=0;b9o.h9R(K,M);M++)R(W);return N;},l2=function(z){var W,Z=[],K=[];return Z[0]=z.getUint8(9),Z[1]=z.getUint8(10),Z[2]=z.getUint8(11),K[0]=Z[0].toString(16),b9o.C9R(1,K[0].length)&&(K[0]="0"+K[0]),K[1]=Z[1].toString(16),b9o.W59(1,K[1].length)&&(K[1]="0"+K[1]),K[2]=Z[2].toString(16),b9o.R59(1,K[2].length)&&(K[2]="0"+K[2]),W=K[0]+K[1]+K[2];},q2=function(z){return parseInt(z,16);},B2=function(z,W){var Z=function(){K="0"+K;};for(var K=z.toString(16);b9o.M59(K.length,6);)Z();W.setUint8(9,parseInt(K.substring(0,2),16)),W.setUint8(10,parseInt(K.substring(2,4),16)),W.setUint8(11,parseInt(K.substring(4,6),16));},G2=function(z){return q2(l2(z));},R2=function(z,W){var Z=new DataView(z.buffer);return String.fromCharCode(Z.getInt8(W+0),Z.getInt8(W+1),Z.getInt8(W+2),Z.getInt8(W+3));},u3=function(z){return R2(z,4);},K2=function(z,W){var Z=new DataView(z.buffer);return Z.setUint8(4,W.substr(0,1).charCodeAt(0)),Z.setUint8(5,W.substr(1,1).charCodeAt(0)),Z.setUint8(6,W.substr(2,1).charCodeAt(0)),Z.setUint8(7,W.substr(3,1).charCodeAt(0)),z;},O3=function(z,W){var Z=new DataView(z.buffer);return Z.getUint32(W);},b3=function(z){return O3(z,0);},X3=function(z,W){var Z=new DataView(z.buffer);return Z.setUint32(0,W),z;},U5=function(z,W){for(var Z,K=0;b9o.b59(K,z.byteLength-4);K++)if(Z=R2(z,K),b9o.i59(Z,W))return b9o.T59(K,4);return -1;},t5=function(z,W){return -1==U5(z,W)?!1:!0;},M5=function(z,W){var Z=U5(z,W),K=O3(z,Z);if(Z>-1)return r3(z,Z,K);throw  new Exception("Could not find subbox of type "+W);},K3=function(z,W,Z){for(var K=z.byteLength,R=W.byteLength,N=K+R,M=new Uint8Array(N),P=(new DataView(M.buffer),0),A=0;b9o.B59(Z,A);A++)M[P]=z[A],P++;for(var A=0;b9o.G59(R,A);A++)M[P]=W[A],P++;for(var A=Z;b9o.O59(K,A);A++)M[P]=z[A],P++;return M=X3(M,N);},g5=function(z,W){return K3(z,W,z.byteLength);},O2=function(z,W){var Z=O3(z,W),K=(b9o.Q59(z.byteLength,Z),r3(z,0,W));if(b9o.F59(0,W))return r3(z,W+Z,b9o.a59(z.byteLength,Z));K=X3(K,K.byteLength);var R=r3(z,W+Z,b9o.v59(z.byteLength,K.byteLength,Z));return b9o.g59(R.byteLength,0)?g5(K,R):K;},L5=function(z,W){return O2(z,U5(z,W));},P5=function(z,W){var Z=u3(W),K=U5(z,Z);return K3(L5(z,Z),W,K);},g3=function(z,W){var Z=new Uint8Array(z);return X3(K2(Z,W),z);},Q2=function(z,W){for(var Z;t5(z,"pssh");)z=L5(z,"pssh");return Z=U5(z,t5(z,"mvhd")?"mvhd":"mfhd"),z=K3(z,W,Z+O3(z,Z));},V2=function(W,Z,K,R){if(CL.configs.debug){var N,M,P;N=(new Date).getTime();}var A=Z,y=u3(A);if(b9o.f59("moov",y)){var E,B;if(B=CL.configs.timescale[W.id],b9o.h59("audio",K)){var G,q,Y,O,V,w,H,D,F,Q,x,v,u,J,E,L,I;if(CL.configs.isProtected===!0){var X=function(z){K5[$+R5]=z[R5];};G="AAAFPG1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAACYloAAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAM8cHNzaAAAAACaBPB5mEBChquS5lvgiF+VAAADHBwDAAABAAEAEgM8AFcAUgBNAEgARQBBAEQARQBSACAAeABtAGwAbgBzAD0AIgBoAHQAdABwADoALwAvAHMAYwBoAGUAbQBhAHMALgBtAGkAYwByAG8AcwBvAGYAdAAuAGMAbwBtAC8ARABSAE0ALwAyADAAMAA3AC8AMAAzAC8AUABsAGEAeQBSAGUAYQBkAHkASABlAGEAZABlAHIAIgAgAHYAZQByAHMAaQBvAG4APQAiADQALgAwAC4AMAAuADAAIgA+ADwARABBAFQAQQA+ADwAUABSAE8AVABFAEMAVABJAE4ARgBPAD4APABLAEUAWQBMAEUATgA+ADEANgA8AC8ASwBFAFkATABFAE4APgA8AEEATABHAEkARAA+AEEARQBTAEMAVABSADwALwBBAEwARwBJAEQAPgA8AC8AUABSAE8AVABFAEMAVABJAE4ARgBPAD4APABLAEkARAA+AGUAOAA1ACsAcgBJAG8AZwBpAGsAeQBjADYAYQB5AFEAMgBTAGsAWAA1AGcAPQA9ADwALwBLAEkARAA+ADwAQwBIAEUAQwBLAFMAVQBNAD4ASAA0AFAAYQA5ACsATgBhAG4AawBNAD0APAAvAEMASABFAEMASwBTAFUATQA+ADwATABBAF8AVQBSAEwAPgBoAHQAdABwAHMAOgAvAC8AbgBvAHQALQByAGUAYQBsAC4AYgBsAGkAbgBrAGIAbwB4AC4AbABvAGMAYQBsAC8AbABpAGMAZQBuAHMAZQA8AC8ATABBAF8AVQBSAEwAPgA8AEMAVQBTAFQATwBNAEEAVABUAFIASQBCAFUAVABFAFMAPgA8AEkASQBTAF8ARABSAE0AXwBWAEUAUgBTAEkATwBOAD4ANwAuADEALgAxADUANgA1AC4AMQA1ADwALwBJAEkAUwBfAEQAUgBNAF8AVgBFAFIAUwBJAE8ATgA+ADwALwBDAFUAUwBUAE8ATQBBAFQAVABSAEkAQgBVAFQARQBTAD4APAAvAEQAQQBUAEEAPgA8AC8AVwBSAE0ASABFAEEARABFAFIAPgAAAAAobXZleAAAACB0cmV4AAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAABZHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAQBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAmJaAAAAAAFXEAAAAAAAgaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAAAAALhtaW5mAAAAsHN0YmwAAACoc3RzZAAAAAAAAAABAAAAmGVuY2EAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAJGVzZHMAAAAAAxkAAQAEEUAVAAAAAAAAAAAAAAAFAhGQAAAAUHNpbmYAAAAMZnJtYW1wNGEAAAAUc2NobQAAAABjZW5jAAAAAAAAAChzY2hpAAAAIHRlbmMAAAABAAABCKx+znsgikyKnOmskNkpF+Y=",E=X5(G),L=new DataView(E.buffer),D=X5("AAAA93N0YmwAAACrc3RzZAAAAAAAAAABAAAAm2VuY2EAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAJ2VzZHMAAAAAAxkAAAAEEUAVAAGNAAH0mAAB6fgFAhGQBgECAAAAUHNpbmYAAAAMZnJtYW1wNGEAAAAUc2NobQAAAABjZW5jAAEAAAAAAChzY2hpAAAAIHRlbmMAAAAAAAABCAKUuVmddV3iu/D9yj+l6rcAAAAQc3R0cwAAAAAAAAAAAAAAEHN0c2MAAAAAAAAAAAAAABRzdHN6AAAAAAAAAAAAAAAAAAAAEHN0Y28AAAAAAAAAAA=="),q=CL.configs.audioInitData[W.id],Q=M5(D,"enca"),x=new DataView(Q.buffer),x.setUint16(24,q.channels),x.setUint16(26,q.bitsPerSample),x.setUint16(30,q.packetSize),x.setUint32(32,b9o.C59(q.samplingRate,16)),v=X5("AAAAJ2VzZHMAAAAAAxkAAAAEEUAVAAGNAAH0mAAB6fgFAhGQBgEC"),I=Z3(CL.configs.codecPrivateData[W.id]),v[34]=I[0],v[35]=I[1],Q=P5(Q,v);var z5,o5,W5,C,K5,U;z5=M5(Q,"sinf"),o5=M5(z5,"schm"),W5=new jDataView(o5.buffer),W5.setUint32(16,65536),C=M5(z5,"schi"),K5=M5(C,"tenc"),U=new DataView(K5.buffer);for(var Z5=CL.manifest.keyId.replace(/-/g,""),p5=Z3(Z5),$=16,R5=0;b9o.W39(16,R5);R5++)X(p5);C=P5(C,K5),z5=P5(z5,C),z5=P5(z5,o5),Q=P5(Q,z5),Y=M5(E,"trak"),O=M5(Y,"mdia"),V=M5(O,"mdhd"),H=M5(O,"minf"),F=M5(D,"stsd"),w=new DataView(V.buffer),w.setUint32(20,B),F=P5(F,Q),D=P5(D,F),H=P5(H,D),O=P5(O,H),O=P5(O,V),Y=P5(Y,O),E=P5(E,Y);}else G="AAABsG1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAACYloAAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAobXZleAAAACB0cmV4AAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAABFHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAALBtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAmJaAAAAAAFXEAAAAAAAgaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAAAAAGhtaW5mAAAAYHN0YmwAAABYc3RzZAAAAAAAAAABAAAASG1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAAJGVzZHMAAAAAAxkAAQAEEUAVAAAAAAAAAAAAAAAFAhGQ",E=X5(G),D=X5("AAAAtnN0YmwAAABqc3RzZAAAAAAAAAABAAAAWm1wNGEAAAAAAAAAAQAAAAAAAAAAAAIAEAAAAAC7gAAAAAAANmVzZHMAAAAAA4CAgCUAAQAEgICAF0AVAAAAAAD6AAAA9+sFgICABRGQVuUABoCAgAECAAAAEHN0dHMAAAAAAAAAAAAAABBzdHNjAAAAAAAAAAAAAAAUc3RzegAAAAAAAAAAAAAAAAAAABBzdGNvAAAAAAAAAAA="),q=CL.configs.audioInitData[W.id],u=M5(D,"mp4a"),J=new DataView(u.buffer),J.setUint16(24,q.channels),J.setUint16(26,q.bitsPerSample),J.setUint16(30,q.packetSize),J.setUint32(32,b9o.R39(q.samplingRate,16)),v=X5("AAAAJ2VzZHMAAAAAAxkAAAAEEUAVAAGNAAH0mAAB6fgFAhGQBgEC"),I=Z3(CL.configs.codecPrivateData[W.id]),v[34]=I[0],v[35]=I[1],u=P5(u,v),Y=M5(E,"trak"),O=M5(Y,"mdia"),V=M5(O,"mdhd"),H=M5(O,"minf"),F=M5(D,"stsd"),w=new DataView(V.buffer),w.setUint32(20,B),F=P5(F,u),D=P5(D,F),H=P5(H,D),O=P5(O,H),O=P5(O,V),Y=P5(Y,O),E=P5(E,Y);}else{var Y,O,V,w,H,D,F,b5,z5,j5,T5,S5,Y5=CL.configs.codecPrivateData[W.id],O5=Y5.split("00000001"),k5=O5[1],V5=O5[2],G5="AAACDW1vb3YAAABsbXZoZAAAAAAAAAAAAAAAAACYloAAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAobXZleAAAACB0cmV4AAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAABcXRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAQ1tZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAmJaAAAAAAFXEAAAAAAAgaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAAAAAMVtaW5mAAAAvXN0YmwAAAClc3RzZAAAAAAAAAABAAAAlWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABcADQAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAA/YXZjQwFNQB7/4QAnZ2QADawspQXG7AVIMDAyAAAH0gABdwDAQAKrgAAqub+McHaEiWWAAQAFaOkJNSUAAAAQc3RzcwAAAAAAAAAA",Q5=X5(G5),E=null,B5=null,A5=null,q5=null,n5=null,w5="AAAAlWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABcADQAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8=",i5=null,H5=null,F5=0;if(F5=16,i5=g3(F5,"avcC"),H5=new DataView(i5.buffer),H5.setUint8(8,1),H5.setUint8(9,77),H5.setUint8(10,64),H5.setUint8(11,30),H5.setUint8(12,255),H5.setUint8(13,225),H5.setUint16(14,b9o.M39(k5.length,2)),i5=g5(i5,Z3(k5)),T5=new Uint8Array(3),S5=new DataView(T5.buffer),S5.setUint8(0,1),S5.setUint16(1,b9o.b39(V5.length,2)),i5=g5(i5,T5),i5=g5(i5,Z3(V5)),q5=X5(w5),n5=new DataView(q5.buffer),n5.setUint16(32,CL.configs.repWidth[W.id]),n5.setUint16(34,CL.configs.repHeight[W.id]),q5=g5(q5,i5),CL.configs.isProtected===!0){var x5=function(z){z5[$+R5]=z[R5];};b5="AAAAUHNpbmYAAAAMZnJtYWF2YzEAAAAUc2NobQAAAABjZW5jAAEAAAAAAChzY2hpAAAAIHRlbmMAAAAAAAABCAKUuVmddV3iu/D9yj+l6rc=",z5=X5(b5),j5=new DataView(z5.buffer);for(var Z5=CL.manifest.keyId.replace(/-/g,""),p5=Z3(Z5),$=b9o.i39(z5.byteLength,16),R5=0;b9o.T39(16,R5);R5++)x5(p5);q5=g5(q5,z5),q5=K2(q5,"encv");}E=Q5,Y=M5(E,"trak"),O=M5(Y,"mdia"),V=M5(O,"mdhd"),H=M5(O,"minf"),D=M5(O,"stbl"),F=M5(D,"stsd"),w=new DataView(V.buffer),w.setUint32(20,B);var J5,y5,D5;J5=M5(Y,"tkhd"),y5=new jDataView(J5.buffer),D5=y5.getUint8(8,1),b9o.B39(0,D5)?(y5.setUint32(82,CL.configs.repWidth[W.id]),y5.setUint32(86,CL.configs.repHeight[W.id])):(y5.setUint32(94,CL.configs.repWidth[W.id]),y5.setUint32(98,CL.configs.repHeight[W.id]));var E5=U5(F,"avc1");F=L5(F,"avc1"),F=K3(F,q5,E5),D=P5(D,F);var l5,m5,d5,u5,h5,R3,z3,W3;h5="AAAAEHN0dHMAAAAAAAAAAA==",l5=X5(h5),R3="AAAAEHN0c2MAAAAAAAAAAA==",m5=X5(R3),z3="AAAAFHN0c3oAAAAAAAAAAAAAAAA=",d5=X5(z3),W3="AAAAEHN0Y28AAAAAAAAAAA==",u5=X5(W3),D=L5(D,"stss"),D=g5(D,l5),D=g5(D,m5),D=g5(D,d5),D=g5(D,u5);var f5,p3;p3="AAAAFHZtaGQAAAABAAAAAAAAAAA=",f5=X5(p3),H=K3(H,f5,U5(H,"stbl")),H=P5(H,D),O=P5(O,H),O=P5(O,V),Y=P5(Y,J5),Y=P5(Y,O),E=P5(E,Y);}var B5=M5(E,"mvhd"),A5=new DataView(B5.buffer),D5=A5.getUint8(8,1);b9o.G39(0,D5)?A5.setUint32(20,B):A5.setUint32(28,B),E=P5(E,B5),Z=E;}else if(b9o.O39("moof",y)){var y3=function(z){Z=z;};var o3,C5,A3,T3,p2,H3,s3,r5,s5,a5,B3,i3,Q3,M3,N3,Y3,c3,E3,j3,P3,$b,k3,P2,M2,V3=M5(A,"moof"),N2=M5(A,"mdat"),e5=V3,F3=0;if(A3=M5(V3,"mfhd"),T3=new DataView(A3.buffer),p2=T3.getUint32(12),r5=M5(V3,"traf"),P2=b3(r5),t5(r5,"uuid")){var l3,e3,q3,f3=0;for(l3=new Uint8Array(r5.buffer.slice(0));t5(l3,"uuid");)l3=L5(l3,"uuid"),f3++;for(var R5=0;b9o.Q39(f3,R5);R5++){if(s5=M5(r5,"uuid"),a5=new jDataView(s5.buffer),e3=r3(s5,8,16),q3=o2(e3),b9o.F39("a2394f525a9b4f14a2446c427c648df4",q3))r5=g5(r5,s5);else{if(b9o.a39("6d1d9b0542d544e680e2141daff757b2",q3)){var D5,v5,d3;D5=a5.getUint8(24),v5=28,d3=parseInt(b9o.v39(1,D5)?a5.getUint64(v5).toString():a5.getUint32(v5).toString()),isNaN(CL.configs.ssTimeOffset.video_0)||(R=d3,R-=CL.configs.ssTimeOffset.video_0);}if(b9o.I39("d4807ef2ca3946958e5426cb9e46a79f",q3)){var D5,I5,h3,a3,D3,v5,U3;D5=a5.getUint8(24),I5=[],I5[0]=a5.getUint8(25),I5[1]=a5.getUint8(26),I5[2]=a5.getUint8(27),h3=a5.getUint8(28),v5=29;for(var R5=0;b9o.d39(h3,R5);R5++)b9o.t39(1,D5)?(a3=parseInt(a5.getUint64(v5).toString()),D3=parseInt(a5.getUint64(v5+8).toString()),v5+=16):(a3=parseInt(a5.getUint32(v5).toString()),D3=parseInt(a5.getUint32(v5+4).toString()),v5+=8),U3=CL.configs.lookAheadFragments[K],U3.push({absoluteTime:a3,absoluteDuration:D3});}}r5=L5(r5,"uuid");}}if(Q3=g3(20,"tfdt"),M3=new jDataView(Q3.buffer),M3.setUint8(8,1),M3.setUint8(9,0),M3.setUint8(10,0),M3.setUint8(11,0),b9o.L39(null,R)&&(R=0),M3.setUint64(12,R),r5=K3(r5,Q3,U5(r5,"trun")),CL.configs.isProtected&&!t5(r5,"saiz")&&t5(r5,"uuid")){s5=M5(r5,"uuid"),a5=new DataView(s5.buffer),i3=b9o.z29(b3(s5),32),B3=s5.subarray(32);var S2,w3,v5,m3,b2,G3,J3=a5.getUint32(28),I5=[3];I5[0]=a5.getUint8(25),I5[1]=a5.getUint8(26),I5[2]=a5.getUint8(27),b2=b3(s5),S2=8,v5=32,m3=17,G3=[J3];var r2=17+J3;c3=g3(r2,"saiz"),E3=new DataView(c3.buffer),E3.setUint8(13,0),E3.setUint32(13,J3);for(var R5=0;b9o.K29(J3,R5);R5++)v5+=8,b9o.N29(0,I5[2])?G3[R5]=8:(w3=a5.getUint16(v5),v5+=2,v5+=b9o.j29(6,w3),G3[R5]=b9o.y29(6,w3)+10),E3.setUint8(m3,G3[R5]),m3+=1;r5=g5(r5,c3);}if(CL.configs.isProtected&&!t5(r5,"saio")){var y2="AAAAFHNhaW8AAAAAAAAAAQAAAsA=",N3=X5(y2);Y3=new DataView(N3.buffer),r5=g5(r5,N3);}i3=0,M2=0,t5(r5,"uuid")&&(s5=M5(r5,"uuid"),i3=b9o.A29(b3(s5),32),B3=s5.subarray(32),r5=L5(r5,"uuid")),j3=M5(r5,"trun"),P3=new DataView(j3.buffer);var t3={dataOffsetPresent:1,firstSampleFlagsPresent:4,sampleDurationPresent:256,sampleSizePresent:512,sampleFlagsPresent:1024,sampleCompositionTimeOffsetsPresent:2048},I5=G2(P3),x3=0;b9o.Y29(I5,(I5|t3.dataOffsetPresent))&&(x3=4,j3=K3(j3,new Uint8Array(x3),16),P3=new DataView(j3.buffer)),I5|=t3.dataOffsetPresent,B2(I5,P3),e5=P5(e5,r5),F3=b3(e5)+x3,$b=P3.getUint32(16),k3=b3(e5)+8,k3=F3+8+i3,P3.setUint32(16,k3),r5=P5(r5,j3),t5(r5,"saio")&&(N3=M5(r5,"saio"),Y3=new DataView(N3.buffer),b9o.l29(i3,0)?Y3.setUint32(16,F3+8):Y3.setUint32(16,U5(e5,"senc")+16),r5=P5(r5,N3)),H3=M5(r5,"tfhd"),s3=new DataView(H3.buffer),s3.setUint32(12,1),r5=P5(r5,H3),e5=P5(e5,r5),o3=N2,CL.configs.isProtected===!0&&void 0!=B3&&(o3=K3(o3,B3,8));var i2=e5.byteLength+o3.byteLength,n3=0;C5=new Uint8Array(i2);for(var R5=0;b9o.n29(R5,e5.byteLength);R5++)C5[n3]=e5[R5],n3++;for(var R5=0;b9o.c29(R5,o3.byteLength);R5++)C5[n3]=o3[R5],n3++;y3(C5);}return CL.configs.debug&&(M=(new Date).getTime(),P=b9o.k29(M,N),console.log("CL: Parsing of "+y+" took "+P+" ms")),Z;},H2=function(z){var W,Z,K,R,N,M,P,A,y;return W=M5(z,"moov"),y=M5(W,"schi"),t5(y,"uuid")?(y=L5(y,"uuid"),M5(W,"sinf"),A=P5(M5(W,"sinf"),y),P=P5(M5(W,"encv"),A),M=P5(M5(W,"stsd"),P),N=P5(M5(W,"stbl"),M),R=P5(M5(W,"minf"),N),K=P5(M5(W,"mdia"),R),Z=P5(M5(W,"trak"),K),W=P5(W,Z)):z;},c2=function(z){var W=null;Array.isArray(z)&&b9o.D29(z.length,0)&&(z=z[0]);var Z=z["cenc:default_KID"]||z.KID;void 0==CL.manifest.keyId||b9o.w29(null,CL.manifest.keyId)?CL.manifest.keyId=Z:Z=CL.manifest.keyId;var K,R;if(b9o.u29("auto",CL.manifest.drm)?CL.configs.isChromeAndroid===!0||CL.configs.isChromeDesktop===!0||CL.configs.isChromecast===!0||CL.configs.isActiveVideoChrome===!0||CL.configs.isOperaEME===!0?K=!0:CL.configs.isIE11===!0&&(R=!0):b9o.s29("com.widevine.alpha",CL.manifest.drm)?K=!0:R=!0,K===!0){var N=C3(Z.replace(/-/g,"")),M=dcodeIO.ProtoBuf,P={name:"WidevineCencHeader",fields:[{rule:"optional",options:{},type:"Algorithm",name:"algorithm",id:1},{rule:"repeated",options:{},type:"bytes",name:"key_id",id:2},{rule:"optional",options:{},type:"string",name:"provider",id:3},{rule:"optional",options:{},type:"bytes",name:"content_id",id:4},{rule:"optional",options:{},type:"string",name:"track_type",id:5},{rule:"optional",options:{},type:"string",name:"policy",id:6}],enums:[{name:"Algorithm",values:[{name:"UNENCRYPTED",id:0},{name:"AESCTR",id:1}],options:{}}],messages:[],options:{}},A=M.newBuilder();A.define("widevine"),A.create([P]),A.reset();var y=A.build("widevine"),E=y.WidevineCencHeader,B=new E({algorithm:"AESCTR",provider:CL.manifest.widevineHeader.provider,content_id:CL.manifest.widevineHeader.contentId,track_type:CL.manifest.widevineHeader.trackType,policy:CL.manifest.widevineHeader.policy,key_id:[N]}),G=v3(B.encode().toBinary()),q=0,Y=0,O=0,V=new Uint8Array([112,115,115,104,0,0,0,0]),w=new Uint8Array([237,239,139,169,121,214,74,206,163,200,39,220,213,29,33,237]),H=null,D=null;Y=G.length,O=4+V.length+w.length+4+Y,H=new ArrayBuffer(O),W=new Uint8Array(H),D=new DataView(H),D.setUint32(q,O),q+=4,W.set(V,q),q+=V.length,W.set(w,q),q+=w.length,D.setUint32(q,Y),q+=4,W.set(G,q),q+=Y;}if(R===!0){var N=W2(Z).replace(/-/g,""),F=Z2(N),q=0,Q=0,O=0,V=new Uint8Array([112,115,115,104,0,0,0,0]),x=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),v=null,u=null,H=null,W=null,D=null,J=CL.manifest.playreadyHeader.laUrl,L=CL.manifest.playreadyHeader.luiUrl;v=v3('<WRMHEADER xmlns="http://schemas.microsoft.com/DRM/2007/03/PlayReadyHeader" version="4.0.0.0"><DATA><PROTECTINFO><KEYLEN>16</KEYLEN><ALGID>AESCTR</ALGID></PROTECTINFO><KID>'+F+"</KID><LA_URL>"+J+"</LA_URL><LUI_URL>"+L+"</LUI_URL></DATA></WRMHEADER>"),u=z2(v),Q=u.length,O=4+V.length+x.length+4+Q,H=new ArrayBuffer(O),W=new Uint8Array(H),D=new DataView(H),D.setUint32(q,O),q+=4,W.set(V,q),q+=V.length,W.set(x,q),q+=x.length,D.setUint32(q,Q),q+=4,W.set(u,q),q+=Q;}return W;},n2=function(z){var W,Z,K,R,N,M;R="^|^",N=CryptoJS.enc.Hex.parse("2F42165BB36FEAE11F95F974FE27A614"),M=CryptoJS.enc.Hex.parse("C7D567C26778E6DA5BAA7EF470F1BCD5"),W=(""+Math.random()).substring(0,10),Z=z.customData.merchant+R+z.customData.userId+R+W,K=c5.encode(CryptoJS.AES.encrypt(Z,N,{iv:M}).toString()),castLabs.xhr({uri:"//t.drmtoday.com/c.gif?m="+K,method:"GET"});},I3=function(R,N){var M=function(z,W,Z){for(var K=[];b9o.e29(z.length,0)&&b9o.U29(W.length,0);)K.push(b9o.o89(z[0][Z],W[0][Z])?z.shift():W.shift());return K=K.concat(z,W);},P=R.length;if(b9o.Z89(2,P))return R;var A=Math.ceil(b9o.p89(P,2));return M(I3(R.slice(0,A),N),I3(R.slice(A),N),N);},J2=function(N){var M=function(z,W,Z){for(var K in z)if("object"==typeof z[K]&&M(z[K],W,Z),b9o.P89(0,K.indexOf(W))){var R=z[K];delete  z[K],K=K.replace(W,Z),z[K]=R;}};M(N,"__",""),M(N,"_","");};return {fillZeros:z2,removeZeros:Y2,toMsGuid:W2,hexStringToBase64:Z2,arrToBase64:L3,hexStringToByteArray:Z3,hexToArray:C3,arrayToString:A2,stringToArray:v3,byteArrayToHexString:o2,base64DecToArr:X5,parseSmoothStreamingFragment:V2,injectPSSHBox:Q2,filterUUIDBox:H2,deleteSubBoxByType:L5,getSubBox:M5,replaceBox:P5,appendBox:g5,getBoxType:u3,B64Tools:c5,supportsMSE:E2,getSubArray:r3,generatePSSHBox:c2,sdfglksdfgkl:n2,fastSort:I3,processJSON:J2};},castLabsDashJS.classes.Utils.prototype={constructor:castLabsDashJS.classes.Utils},function(o5){function W5(u){function J(z,W,Z){if("undefined"==typeof z&&(z=J.DEFAULT_CAPACITY),"undefined"==typeof W&&(W=J.DEFAULT_ENDIAN),"undefined"==typeof Z&&(Z=J.DEFAULT_NOASSERT),!Z){if(z|=0,b9o.r89(0,z))throw  new RangeError("Illegal capacity: 0 <= "+z);if("boolean"!=typeof W)throw  new TypeError("Illegal littleEndian: Not a boolean");if("boolean"!=typeof Z)throw  new TypeError("Illegal noAssert: Not a boolean");}this.buffer=b9o.S89(0,z)?L:new ArrayBuffer(z),this.view=b9o.E89(0,z)?null:new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=z,this.littleEndian="undefined"!=typeof W?!!W:!1,this.noAssert=!!Z;}J.VERSION="3.1.0",J.LITTLE_ENDIAN=!0,J.BIG_ENDIAN=!1,J.DEFAULT_CAPACITY=16,J.DEFAULT_ENDIAN=J.BIG_ENDIAN,J.DEFAULT_NOASSERT=!1,J.Long=u||null;var L=new ArrayBuffer(0);J.allocate=function(z,W,Z){return new J(z,W,Z);},J.concat=function(z,W,Z,K){("boolean"==typeof W||"string"!=typeof W)&&(K=Z,Z=W,W=void 0);for(var R,N=0,M=0,P=z.length;b9o.q89(P,M);++M)J.isByteBuffer(z[M])||(z[M]=J.wrap(z[M],W)),R=b9o.J89(z[M].limit,z[M].offset),b9o.H89(R,0)&&(N+=R);if(b9o.V89(0,N))return new J(0,Z,K);for(W=new J(N,Z,K),K=new Uint8Array(W.buffer),M=0;b9o.x89(P,M);)Z=z[M++],R=b9o.m89(Z.limit,Z.offset),b9o.X89(0,R)||(K.set(new Uint8Array(Z.buffer).subarray(Z.offset,Z.limit),W.offset),W.offset+=R);return W.limit=W.offset,W.offset=0,W;},J.isByteBuffer=function(z){return z&&b9o.g89(z,J);},J.type=function(){return ArrayBuffer;},J.wrap=function(z,W,Z,K){if("string"!=typeof W&&(K=Z,Z=W,W=void 0),"string"==typeof z)switch("undefined"==typeof W&&(W="utf8"),W){case "base64":return J.fromBase64(z,Z);case "hex":return J.fromHex(z,Z);case "binary":return J.fromBinary(z,Z);case "utf8":return J.fromUTF8(z,Z);case "debug":return J.fromDebug(z,Z);default:throw  new TypeError("Unsupported encoding: "+W);}if(b9o.f89(null,z)||"object"!=typeof z)throw  new TypeError("Illegal buffer: null or non-object");if(J.isByteBuffer(z))return W=J.prototype.clone.call(z),W.markedOffset=-1,W;if(b9o.h89(z,Uint8Array))W=new J(0,Z,K),b9o.C89(0,z.length)&&(W.buffer=z.buffer,W.offset=z.byteOffset,W.limit=z.byteOffset+z.length,W.view=b9o.W19(0,z.length)?new DataView(z.buffer):null);else if(b9o.R19(z,ArrayBuffer))W=new J(0,Z,K),b9o.M19(0,z.byteLength)&&(W.buffer=z,W.offset=0,W.limit=z.byteLength,W.view=b9o.b19(0,z.byteLength)?new DataView(z):null);else{if(b9o.i19("[object Array]",Object.prototype.toString.call(z)))throw  new TypeError("Illegal buffer");for(W=new J(z.length,Z,K),W.limit=z.length,i=0;b9o.T19(i,z.length);++i)W.view.setUint8(i,z[i]);}return W;},J.prototype.writeInt8=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"!=typeof z||b9o.B19(0,z%1))throw  new TypeError("Illegal value: "+z+" (not an integer)");if(z|=0,"number"!=typeof W||b9o.G19(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.O19(0,W)||b9o.Q19(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}W+=1;var K=this.buffer.byteLength;return b9o.F19(W,K)&&this.resize(b9o.a19((K*=2),W)?K:W),this.view.setInt8(b9o.v19(W,1),z),Z&&(this.offset+=1),this;},J.prototype.writeByte=J.prototype.writeInt8,J.prototype.readInt8=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.I19(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.d19(0,z)||b9o.t19(z+1,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+1) <= "+this.buffer.byteLength);}return z=this.view.getInt8(z),W&&(this.offset+=1),z;},J.prototype.readByte=J.prototype.readInt8,J.prototype.writeUint8=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"!=typeof z||b9o.L19(0,z%1))throw  new TypeError("Illegal value: "+z+" (not an integer)");if(z>>>=0,"number"!=typeof W||b9o.z69(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.K69(0,W)||b9o.N69(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}W+=1;var K=this.buffer.byteLength;return b9o.j69(W,K)&&this.resize(b9o.y69((K*=2),W)?K:W),this.view.setUint8(b9o.A69(W,1),z),Z&&(this.offset+=1),this;},J.prototype.readUint8=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.Y69(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.l69(0,z)||b9o.n69(z+1,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+1) <= "+this.buffer.byteLength);}return z=this.view.getUint8(z),W&&(this.offset+=1),z;},J.prototype.writeInt16=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"!=typeof z||b9o.c69(0,z%1))throw  new TypeError("Illegal value: "+z+" (not an integer)");if(z|=0,"number"!=typeof W||b9o.k69(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.D69(0,W)||b9o.w69(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}W+=2;var K=this.buffer.byteLength;return b9o.u69(W,K)&&this.resize(b9o.s69((K*=2),W)?K:W),this.view.setInt16(b9o.e69(W,2),z,this.littleEndian),Z&&(this.offset+=2),this;},J.prototype.writeShort=J.prototype.writeInt16,J.prototype.readInt16=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.U69(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.o79(0,z)||b9o.Z79(z+2,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+2) <= "+this.buffer.byteLength);}return z=this.view.getInt16(z,this.littleEndian),W&&(this.offset+=2),z;},J.prototype.readShort=J.prototype.readInt16,J.prototype.writeUint16=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"!=typeof z||b9o.p79(0,z%1))throw  new TypeError("Illegal value: "+z+" (not an integer)");if(z>>>=0,"number"!=typeof W||b9o.P79(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.r79(0,W)||b9o.S79(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}W+=2;var K=this.buffer.byteLength;return b9o.E79(W,K)&&this.resize(b9o.q79((K*=2),W)?K:W),this.view.setUint16(b9o.J79(W,2),z,this.littleEndian),Z&&(this.offset+=2),this;},J.prototype.readUint16=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.H79(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.V79(0,z)||b9o.x79(z+2,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+2) <= "+this.buffer.byteLength);}return z=this.view.getUint16(z,this.littleEndian),W&&(this.offset+=2),z;},J.prototype.writeInt32=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"!=typeof z||b9o.m79(0,z%1))throw  new TypeError("Illegal value: "+z+" (not an integer)");if(z|=0,"number"!=typeof W||b9o.X79(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.g79(0,W)||b9o.f79(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}W+=4;var K=this.buffer.byteLength;return b9o.h79(W,K)&&this.resize(b9o.C79((K*=2),W)?K:W),this.view.setInt32(b9o.W09(W,4),z,this.littleEndian),Z&&(this.offset+=4),this;},J.prototype.writeInt=J.prototype.writeInt32,J.prototype.readInt32=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.R09(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.M09(0,z)||b9o.b09(z+4,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+4) <= "+this.buffer.byteLength);}return z=this.view.getInt32(z,this.littleEndian),W&&(this.offset+=4),z;},J.prototype.readInt=J.prototype.readInt32,J.prototype.writeUint32=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"!=typeof z||b9o.i09(0,z%1))throw  new TypeError("Illegal value: "+z+" (not an integer)");if(z>>>=0,"number"!=typeof W||b9o.T09(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.B09(0,W)||b9o.G09(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}W+=4;var K=this.buffer.byteLength;return b9o.O09(W,K)&&this.resize(b9o.Q09((K*=2),W)?K:W),this.view.setUint32(b9o.F09(W,4),z,this.littleEndian),Z&&(this.offset+=4),this;},J.prototype.readUint32=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.a09(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.v09(0,z)||b9o.I09(z+4,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+4) <= "+this.buffer.byteLength);}return z=this.view.getUint32(z,this.littleEndian),W&&(this.offset+=4),z;},u&&(J.prototype.writeInt64=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"==typeof z)z=u.fromNumber(z);else if(!(z&&b9o.d09(z,u)))throw  new TypeError("Illegal value: "+z+" (not an integer or Long)");if("number"!=typeof W||b9o.t09(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.L09(0,W)||b9o.z49(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}"number"==typeof z&&(z=u.fromNumber(z)),W+=8;var K=this.buffer.byteLength;return b9o.K49(W,K)&&this.resize(b9o.N49((K*=2),W)?K:W),W-=8,this.littleEndian?(this.view.setInt32(W,z.low,!0),this.view.setInt32(W+4,z.high,!0)):(this.view.setInt32(W,z.high,!1),this.view.setInt32(W+4,z.low,!1)),Z&&(this.offset+=8),this;},J.prototype.writeLong=J.prototype.writeInt64,J.prototype.readInt64=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.j49(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.y49(0,z)||b9o.A49(z+8,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+8) <= "+this.buffer.byteLength);}return z=this.littleEndian?new u(this.view.getInt32(z,!0),this.view.getInt32(z+4,!0),!1):new u(this.view.getInt32(z+4,!1),this.view.getInt32(z,!1),!1),W&&(this.offset+=8),z;},J.prototype.readLong=J.prototype.readInt64,J.prototype.writeUint64=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"==typeof z)z=u.fromNumber(z);else if(!(z&&b9o.Y49(z,u)))throw  new TypeError("Illegal value: "+z+" (not an integer or Long)");if("number"!=typeof W||b9o.l49(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.n49(0,W)||b9o.c49(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}"number"==typeof z&&(z=u.fromNumber(z)),W+=8;var K=this.buffer.byteLength;return b9o.k49(W,K)&&this.resize(b9o.D49((K*=2),W)?K:W),W-=8,this.littleEndian?(this.view.setInt32(W,z.low,!0),this.view.setInt32(W+4,z.high,!0)):(this.view.setInt32(W,z.high,!1),this.view.setInt32(W+4,z.low,!1)),Z&&(this.offset+=8),this;},J.prototype.readUint64=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.w49(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.u49(0,z)||b9o.s49(z+8,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+8) <= "+this.buffer.byteLength);}return z=this.littleEndian?new u(this.view.getInt32(z,!0),this.view.getInt32(z+4,!0),!0):new u(this.view.getInt32(z+4,!1),this.view.getInt32(z,!1),!0),W&&(this.offset+=8),z;}),J.prototype.writeFloat32=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"!=typeof z)throw  new TypeError("Illegal value: "+z+" (not a number)");if("number"!=typeof W||b9o.e49(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.U49(0,W)||b9o.o99(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}W+=4;var K=this.buffer.byteLength;return b9o.Z99(W,K)&&this.resize(b9o.p99((K*=2),W)?K:W),this.view.setFloat32(b9o.P99(W,4),z,this.littleEndian),Z&&(this.offset+=4),this;},J.prototype.writeFloat=J.prototype.writeFloat32,J.prototype.readFloat32=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.r99(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.S99(0,z)||b9o.E99(z+4,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+4) <= "+this.buffer.byteLength);}return z=this.view.getFloat32(z,this.littleEndian),W&&(this.offset+=4),z;},J.prototype.readFloat=J.prototype.readFloat32,J.prototype.writeFloat64=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"!=typeof z)throw  new TypeError("Illegal value: "+z+" (not a number)");if("number"!=typeof W||b9o.q99(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.J99(0,W)||b9o.H99(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}W+=8;var K=this.buffer.byteLength;return b9o.V99(W,K)&&this.resize(b9o.x99((K*=2),W)?K:W),this.view.setFloat64(b9o.m99(W,8),z,this.littleEndian),Z&&(this.offset+=8),this;},J.prototype.writeDouble=J.prototype.writeFloat64,J.prototype.readFloat64=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.X99(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.g99(0,z)||b9o.f99(z+8,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+8) <= "+this.buffer.byteLength);}return z=this.view.getFloat64(z,this.littleEndian),W&&(this.offset+=8),z;},J.prototype.readDouble=J.prototype.readFloat64,J.MAX_VARINT32_BYTES=5,J.calculateVarint32=function(z){return z>>>=0,b9o.h99(128,z)?1:b9o.C99(16384,z)?2:b9o.W56(2097152,z)?3:b9o.R56(268435456,z)?4:5;},J.zigZagEncode32=function(z){return b9o.M56(((z|=0)<<1^z>>31),0);},J.zigZagDecode32=function(z){return b9o.b56(z,1)^-(b9o.i56(1,z))|0;},J.prototype.writeVarint32=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"!=typeof z||b9o.T56(0,z%1))throw  new TypeError("Illegal value: "+z+" (not an integer)");if(z|=0,"number"!=typeof W||b9o.B56(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.G56(0,W)||b9o.O56(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}var K=J.calculateVarint32(z);W+=K;var R=this.buffer.byteLength;return b9o.Q56(W,R)&&this.resize(b9o.F56((R*=2),W)?R:W),W-=K,this.view.setUint8(W,K=b9o.a56(128,z)),z>>>=0,b9o.v56(z,128)?(K=b9o.I56(z>>7,128),this.view.setUint8(W+1,K),b9o.d56(z,16384)?(K=b9o.t56(z>>14,128),this.view.setUint8(W+2,K),b9o.L56(z,2097152)?(K=b9o.z36(z>>21,128),this.view.setUint8(W+3,K),b9o.K36(z,268435456)?(this.view.setUint8(W+4,b9o.N36(z>>28,15)),K=5):(this.view.setUint8(W+3,b9o.j36(127,K)),K=4)):(this.view.setUint8(W+2,b9o.y36(127,K)),K=3)):(this.view.setUint8(W+1,b9o.A36(127,K)),K=2)):(this.view.setUint8(W,b9o.Y36(127,K)),K=1),Z?(this.offset+=K,this):K;},J.prototype.writeVarint32ZigZag=function(z,W){return this.writeVarint32(J.zigZagEncode32(z),W);},J.prototype.readVarint32=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.l36(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.n36(0,z)||b9o.c36(z+1,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+1) <= "+this.buffer.byteLength);}var Z,K=0,R=0;do Z=this.view.getUint8(z+K),b9o.k36(5,K)&&(R|=b9o.D36((127&Z),7*K,0)),++K;while(b9o.v36(128,(128&Z)));return R|=0,W?(this.offset+=K,R):{value:R,length:K};},J.prototype.readVarint32ZigZag=function(z){return z=this.readVarint32(z),"object"==typeof z?z.value=J.zigZagDecode32(z.value):z=J.zigZagDecode32(z),z;},u&&(J.MAX_VARINT64_BYTES=10,J.calculateVarint64=function(z){"number"==typeof z&&(z=u.fromNumber(z));var W=b9o.I36(z.toInt(),0),Z=b9o.d36(z.shiftRightUnsigned(28).toInt(),0);return z=b9o.t36(z.shiftRightUnsigned(56).toInt(),0),b9o.L36(0,z)?b9o.z26(0,Z)?b9o.K26(16384,W)?b9o.N26(128,W)?1:2:b9o.j26(2097152,W)?3:4:b9o.y26(16384,Z)?b9o.A26(128,Z)?5:6:b9o.Y26(2097152,Z)?7:8:b9o.l26(128,z)?9:10;},J.zigZagEncode64=function(z){return "number"==typeof z?z=u.fromNumber(z,!1):!1!==z.unsigned&&(z=z.toSigned()),z.shiftLeft(1).xor(z.shiftRight(63)).toUnsigned();},J.zigZagDecode64=function(z){return "number"==typeof z?z=u.fromNumber(z,!1):!1!==z.unsigned&&(z=z.toSigned()),z.shiftRightUnsigned(1).xor(z.and(u.ONE).toSigned().negate()).toSigned();},J.prototype.writeVarint64=function(z,W){var Z="undefined"==typeof W;if(Z&&(W=this.offset),!this.noAssert){if("number"==typeof z)z=u.fromNumber(z);else if(!(z&&b9o.n26(z,u)))throw  new TypeError("Illegal value: "+z+" (not an integer or Long)");if("number"!=typeof W||b9o.c26(0,W%1))throw  new TypeError("Illegal offset: "+W+" (not an integer)");if(W>>>=0,b9o.k26(0,W)||b9o.D26(W+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+W+" (+0) <= "+this.buffer.byteLength);}"number"==typeof z?z=u.fromNumber(z,!1):!1!==z.unsigned&&(z=z.toSigned());var K=J.calculateVarint64(z),R=b9o.w26(z.toInt(),0),N=b9o.u26(z.shiftRightUnsigned(28).toInt(),0),M=b9o.s26(z.shiftRightUnsigned(56).toInt(),0);W+=K;var P=this.buffer.byteLength;switch(b9o.e26(W,P)&&this.resize(b9o.U26((P*=2),W)?P:W),W-=K,K){case 10:this.view.setUint8(W+9,b9o.o86(M>>>7,1));case 9:this.view.setUint8(W+8,b9o.Z86(9,K)?b9o.p86(128,M):b9o.P86(127,M));case 8:this.view.setUint8(W+7,b9o.r86(8,K)?b9o.S86(N>>>21,128):b9o.E86(N>>>21,127));case 7:this.view.setUint8(W+6,b9o.q86(7,K)?b9o.J86(N>>>14,128):b9o.H86(N>>>14,127));case 6:this.view.setUint8(W+5,b9o.V86(6,K)?b9o.x86(N>>>7,128):b9o.m86(N>>>7,127));case 5:this.view.setUint8(W+4,b9o.X86(5,K)?b9o.g86(128,N):b9o.f86(127,N));case 4:this.view.setUint8(W+3,b9o.h86(4,K)?b9o.C86(R>>>21,128):b9o.W16(R>>>21,127));case 3:this.view.setUint8(W+2,b9o.R16(3,K)?b9o.M16(R>>>14,128):b9o.b16(R>>>14,127));case 2:this.view.setUint8(W+1,b9o.i16(2,K)?b9o.T16(R>>>7,128):b9o.B16(R>>>7,127));case 1:this.view.setUint8(W,b9o.G16(1,K)?b9o.O16(128,R):b9o.Q16(127,R));}return Z?(this.offset+=K,this):K;},J.prototype.writeVarint64ZigZag=function(z,W){return this.writeVarint64(J.zigZagEncode64(z),W);},J.prototype.readVarint64=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.F16(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.a16(0,z)||b9o.v16(z+1,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+1) <= "+this.buffer.byteLength);}var Z=z,K=0,R=0,N=0,M=0,M=this.view.getUint8(z++),K=b9o.I16(127,M);if(b9o.d16(128,M)&&(M=this.view.getUint8(z++),K|=b9o.t16((127&M),7),b9o.L16(128,M)&&(M=this.view.getUint8(z++),K|=b9o.z66((127&M),14),b9o.K66(128,M)&&(M=this.view.getUint8(z++),K|=b9o.N66((127&M),21),b9o.j66(128,M)&&(M=this.view.getUint8(z++),R=b9o.y66(127,M),b9o.A66(128,M)&&(M=this.view.getUint8(z++),R|=b9o.Y66((127&M),7),b9o.l66(128,M)&&(M=this.view.getUint8(z++),R|=b9o.n66((127&M),14),b9o.c66(128,M)&&(M=this.view.getUint8(z++),R|=b9o.k66((127&M),21),b9o.D66(128,M)&&(M=this.view.getUint8(z++),N=b9o.w66(127,M),b9o.u66(128,M)&&(M=this.view.getUint8(z++),N|=b9o.s66((127&M),7),b9o.e66(128,M)))))))))))throw Error("Data must be corrupt: Buffer overrun");return K=u.from28Bits(K,R,N,!1),W?(this.offset=z,K):{value:K,length:b9o.U66(z,Z)};},J.prototype.readVarint64ZigZag=function(z){return (z=this.readVarint64(z))&&b9o.o76(z.value,u)?z.value=J.zigZagDecode64(z.value):z=J.zigZagDecode64(z),z;}),J.prototype.writeCString=function(W,Z){var K="undefined"==typeof Z;K&&(Z=this.offset);var R,N=W.length;if(!this.noAssert){if("string"!=typeof W)throw  new TypeError("Illegal str: Not a string");for(R=0;b9o.Z76(N,R);++R)if(b9o.p76(0,W.charCodeAt(R)))throw  new RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof Z||b9o.P76(0,Z%1))throw  new TypeError("Illegal offset: "+Z+" (not an integer)");if(Z>>>=0,b9o.r76(0,Z)||b9o.S76(Z+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+Z+" (+0) <= "+this.buffer.byteLength);}R=Z,N=X.b(X.a(W))[1],Z+=N+1;var M=this.buffer.byteLength;return b9o.E76(Z,M)&&this.resize(b9o.q76((M*=2),Z)?M:Z),Z-=N+1,X.e(X.a(W),function(z){this.view.setUint8(Z++,z);}.bind(this)),this.view.setUint8(Z++,0),K?(this.offset=b9o.J76(Z,R),this):N;},J.prototype.readCString=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.H76(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.V76(0,z)||b9o.x76(z+1,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+1) <= "+this.buffer.byteLength);}var Z,K=z,R=-1;return X.d(function(){if(b9o.m76(0,R))return null;if(b9o.X76(z,this.limit))throw RangeError("Illegal range: Truncated data, "+z+" < "+this.limit);return b9o.g76(0,(R=this.view.getUint8(z++)))?null:R;}.bind(this),Z=X.c(),!0),W?(this.offset=z,Z()):{string:Z(),length:b9o.f76(z,K)};},J.prototype.writeIString=function(W,Z){var K="undefined"==typeof Z;if(K&&(Z=this.offset),!this.noAssert){if("string"!=typeof W)throw  new TypeError("Illegal str: Not a string");if("number"!=typeof Z||b9o.h76(0,Z%1))throw  new TypeError("Illegal offset: "+Z+" (not an integer)");if(Z>>>=0,b9o.C76(0,Z)||b9o.W06(Z+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+Z+" (+0) <= "+this.buffer.byteLength);}var R,N=Z;R=X.b(X.a(W),this.noAssert)[1],Z+=4+R;var M=this.buffer.byteLength;if(b9o.R06(Z,M)&&this.resize(b9o.M06((M*=2),Z)?M:Z),Z-=4+R,this.view.setUint32(Z,R,this.littleEndian),Z+=4,X.e(X.a(W),function(z){this.view.setUint8(Z++,z);}.bind(this)),b9o.b06(Z,N+4+R))throw  new RangeError("Illegal range: Truncated data, "+Z+" == "+(Z+4+R));return K?(this.offset=Z,this):b9o.i06(Z,N);},J.prototype.readIString=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.T06(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.B06(0,z)||b9o.G06(z+4,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+4) <= "+this.buffer.byteLength);}var Z=0,K=z,Z=this.view.getUint32(z,this.littleEndian);z+=4;var R=z+Z;return X.d(function(){return b9o.O06(R,z)?this.view.getUint8(z++):null;}.bind(this),Z=X.c(),this.noAssert),Z=Z(),W?(this.offset=z,Z):{string:Z,length:b9o.Q06(z,K)};},J.METRICS_CHARS="c",J.METRICS_BYTES="b",J.prototype.writeUTF8String=function(W,Z){var K="undefined"==typeof Z;if(K&&(Z=this.offset),!this.noAssert){if("number"!=typeof Z||b9o.F06(0,Z%1))throw  new TypeError("Illegal offset: "+Z+" (not an integer)");if(Z>>>=0,b9o.a06(0,Z)||b9o.v06(Z+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+Z+" (+0) <= "+this.buffer.byteLength);}var R,N=Z;R=X.b(X.a(W))[1],Z+=R;var M=this.buffer.byteLength;return b9o.I06(Z,M)&&this.resize(b9o.d06((M*=2),Z)?M:Z),Z-=R,X.e(X.a(W),function(z){this.view.setUint8(Z++,z);}.bind(this)),K?(this.offset=Z,this):b9o.t06(Z,N);},J.prototype.writeString=J.prototype.writeUTF8String,J.calculateUTF8Chars=function(z){return X.b(X.a(z))[0];},J.calculateUTF8Bytes=function(z){return X.b(X.a(z))[1];},J.prototype.readUTF8String=function(W,Z,K){"number"==typeof Z&&(K=Z,Z=void 0);var R="undefined"==typeof K;if(R&&(K=this.offset),"undefined"==typeof Z&&(Z=J.METRICS_CHARS),!this.noAssert){if("number"!=typeof W||b9o.L06(0,W%1))throw  new TypeError("Illegal length: "+W+" (not an integer)");if(W|=0,"number"!=typeof K||b9o.z46(0,K%1))throw  new TypeError("Illegal offset: "+K+" (not an integer)");if(K>>>=0,b9o.K46(0,K)||b9o.N46(K+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+K+" (+0) <= "+this.buffer.byteLength);}var N,M=0,P=K;if(b9o.j46(Z,J.METRICS_CHARS)){if(N=X.c(),X.i(function(){return b9o.y46(W,M)&&b9o.A46(K,this.limit)?this.view.getUint8(K++):null;}.bind(this),function(z){++M,X.g(z,N);}.bind(this)),b9o.Y46(M,W))throw  new RangeError("Illegal range: Truncated data, "+M+" == "+W);return R?(this.offset=K,N()):{string:N(),length:b9o.l46(K,P)};}if(b9o.n46(Z,J.METRICS_BYTES)){if(!this.noAssert){if("number"!=typeof K||b9o.c46(0,K%1))throw  new TypeError("Illegal offset: "+K+" (not an integer)");if(K>>>=0,b9o.k46(0,K)||b9o.D46(K+W,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+K+" (+"+W+") <= "+this.buffer.byteLength);}var A=K+W;if(X.d(function(){return b9o.w46(A,K)?this.view.getUint8(K++):null;}.bind(this),N=X.c(),this.noAssert),b9o.u46(K,A))throw  new RangeError("Illegal range: Truncated data, "+K+" == "+A);return R?(this.offset=K,N()):{string:N(),length:b9o.s46(K,P)};}throw  new TypeError("Unsupported metrics: "+Z);},J.prototype.readString=J.prototype.readUTF8String,J.prototype.writeVString=function(W,Z){var K="undefined"==typeof Z;if(K&&(Z=this.offset),!this.noAssert){if("string"!=typeof W)throw  new TypeError("Illegal str: Not a string");if("number"!=typeof Z||b9o.e46(0,Z%1))throw  new TypeError("Illegal offset: "+Z+" (not an integer)");if(Z>>>=0,b9o.U46(0,Z)||b9o.o96(Z+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+Z+" (+0) <= "+this.buffer.byteLength);}var R,N,M=Z;R=X.b(X.a(W),this.noAssert)[1],N=J.calculateVarint32(R),Z+=N+R;var P=this.buffer.byteLength;if(b9o.Z96(Z,P)&&this.resize(b9o.p96((P*=2),Z)?P:Z),Z-=N+R,Z+=this.writeVarint32(R,Z),X.e(X.a(W),function(z){this.view.setUint8(Z++,z);}.bind(this)),b9o.P96(Z,M+R+N))throw  new RangeError("Illegal range: Truncated data, "+Z+" == "+(Z+R+N));return K?(this.offset=Z,this):b9o.r96(Z,M);},J.prototype.readVString=function(z){var W="undefined"==typeof z;if(W&&(z=this.offset),!this.noAssert){if("number"!=typeof z||b9o.S96(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.E96(0,z)||b9o.q96(z+1,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+1) <= "+this.buffer.byteLength);}var Z=this.readVarint32(z),K=z;z+=Z.length;var Z=Z.value,R=z+Z,Z=X.c();return X.d(function(){return b9o.J96(R,z)?this.view.getUint8(z++):null;}.bind(this),Z,this.noAssert),Z=Z(),W?(this.offset=z,Z):{string:Z,length:b9o.H96(z,K)};},J.prototype.append=function(z,W,Z){("number"==typeof W||"string"!=typeof W)&&(Z=W,W=void 0);var K="undefined"==typeof Z;if(K&&(Z=this.offset),!this.noAssert){if("number"!=typeof Z||b9o.V96(0,Z%1))throw  new TypeError("Illegal offset: "+Z+" (not an integer)");if(Z>>>=0,b9o.x96(0,Z)||b9o.m96(Z+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+Z+" (+0) <= "+this.buffer.byteLength);}if(b9o.X96(z,J)||(z=J.wrap(z,W)),W=b9o.g96(z.limit,z.offset),b9o.f96(0,W))return this;Z+=W;var R=this.buffer.byteLength;return b9o.h96(Z,R)&&this.resize(b9o.C96((R*=2),Z)?R:Z),new Uint8Array(this.buffer,b9o.W5B(Z,W)).set(new Uint8Array(z.buffer).subarray(z.offset,z.limit)),z.offset+=W,K&&(this.offset+=W),this;},J.prototype.appendTo=function(z,W){return z.append(this,W),this;},J.prototype.assert=function(z){return this.noAssert=!z,this;},J.prototype.capacity=function(){return this.buffer.byteLength;},J.prototype.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this;},J.prototype.clone=function(z){var W=new J(0,this.littleEndian,this.noAssert);return z?(z=new ArrayBuffer(this.buffer.byteLength),new Uint8Array(z).set(this.buffer),W.buffer=z,W.view=new DataView(z)):(W.buffer=this.buffer,W.view=this.view),W.offset=this.offset,W.markedOffset=this.markedOffset,W.limit=this.limit,W;},J.prototype.compact=function(z,W){if("undefined"==typeof z&&(z=this.offset),"undefined"==typeof W&&(W=this.limit),!this.noAssert){if("number"!=typeof z||b9o.R5B(0,z%1))throw  new TypeError("Illegal begin: Not an integer");if(z>>>=0,"number"!=typeof W||b9o.M5B(0,W%1))throw  new TypeError("Illegal end: Not an integer");if(W>>>=0,b9o.b5B(0,z)||b9o.i5B(z,W)||b9o.T5B(W,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+z+" <= "+W+" <= "+this.buffer.byteLength);}if(b9o.B5B(0,z)&&b9o.G5B(W,this.buffer.byteLength))return this;var Z=b9o.O5B(W,z);if(b9o.Q5B(0,Z))return this.buffer=L,this.view=null,b9o.F5B(0,this.markedOffset)&&(this.markedOffset-=z),this.limit=this.offset=0,this;var K=new ArrayBuffer(Z);return new Uint8Array(K).set(new Uint8Array(this.buffer).subarray(z,W)),this.buffer=K,this.view=new DataView(K),b9o.a5B(0,this.markedOffset)&&(this.markedOffset-=z),this.offset=0,this.limit=Z,this;},J.prototype.copy=function(z,W){if("undefined"==typeof z&&(z=this.offset),"undefined"==typeof W&&(W=this.limit),!this.noAssert){if("number"!=typeof z||b9o.v5B(0,z%1))throw  new TypeError("Illegal begin: Not an integer");if(z>>>=0,"number"!=typeof W||b9o.I5B(0,W%1))throw  new TypeError("Illegal end: Not an integer");if(W>>>=0,b9o.d5B(0,z)||b9o.t5B(z,W)||b9o.L5B(W,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+z+" <= "+W+" <= "+this.buffer.byteLength);}if(b9o.z3B(z,W))return new J(0,this.littleEndian,this.noAssert);var Z=b9o.K3B(W,z),K=new J(Z,this.littleEndian,this.noAssert);return K.offset=0,K.limit=Z,b9o.N3B(0,K.markedOffset)&&(K.markedOffset-=z),this.copyTo(K,0,z,W),K;},J.prototype.copyTo=function(z,W,Z,K){var R,N;if(!this.noAssert&&!J.isByteBuffer(z))throw  new TypeError("Illegal target: Not a ByteBuffer");if(W=(N="undefined"==typeof W)?z.offset:b9o.j3B(0,W),Z=(R="undefined"==typeof Z)?this.offset:b9o.y3B(0,Z),K="undefined"==typeof K?this.limit:b9o.A3B(0,K),b9o.Y3B(0,W)||b9o.l3B(W,z.buffer.byteLength))throw  new RangeError("Illegal target range: 0 <= "+W+" <= "+z.buffer.byteLength);if(b9o.n3B(0,Z)||b9o.c3B(K,this.buffer.byteLength))throw  new RangeError("Illegal source range: 0 <= "+Z+" <= "+this.buffer.byteLength);var M=b9o.k3B(K,Z);return b9o.D3B(0,M)?z:(z.ensureCapacity(W+M),new Uint8Array(z.buffer).set(new Uint8Array(this.buffer).subarray(Z,K),W),R&&(this.offset+=M),N&&(z.offset+=M),this);},J.prototype.ensureCapacity=function(z){var W=this.buffer.byteLength;return b9o.w3B(z,W)?this.resize(b9o.u3B((W*=2),z)?W:z):this;},J.prototype.fill=function(z,W,Z){var K="undefined"==typeof W;if(K&&(W=this.offset),"string"==typeof z&&b9o.s3B(0,z.length)&&(z=z.charCodeAt(0)),"undefined"==typeof W&&(W=this.offset),"undefined"==typeof Z&&(Z=this.limit),!this.noAssert){if("number"!=typeof z||b9o.e3B(0,z%1))throw  new TypeError("Illegal value: "+z+" (not an integer)");if(z|=0,"number"!=typeof W||b9o.U3B(0,W%1))throw  new TypeError("Illegal begin: Not an integer");if(W>>>=0,"number"!=typeof Z||b9o.o2B(0,Z%1))throw  new TypeError("Illegal end: Not an integer");if(Z>>>=0,b9o.Z2B(0,W)||b9o.p2B(W,Z)||b9o.P2B(Z,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+W+" <= "+Z+" <= "+this.buffer.byteLength);}if(b9o.r2B(W,Z))return this;for(;b9o.S2B(Z,W);)this.view.setUint8(W++,z);return K&&(this.offset=W),this;},J.prototype.flip=function(){return this.limit=this.offset,this.offset=0,this;},J.prototype.mark=function(z){if(z="undefined"==typeof z?this.offset:z,!this.noAssert){if("number"!=typeof z||b9o.E2B(0,z%1))throw  new TypeError("Illegal offset: "+z+" (not an integer)");if(z>>>=0,b9o.q2B(0,z)||b9o.J2B(z+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+z+" (+0) <= "+this.buffer.byteLength);}return this.markedOffset=z,this;},J.prototype.order=function(z){if(!this.noAssert&&"boolean"!=typeof z)throw  new TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!z,this;},J.prototype.LE=function(z){return this.littleEndian="undefined"!=typeof z?!!z:!0,this;},J.prototype.BE=function(z){return this.littleEndian="undefined"!=typeof z?!z:!1,this;},J.prototype.prepend=function(z,W,Z){("number"==typeof W||"string"!=typeof W)&&(Z=W,W=void 0);var K="undefined"==typeof Z;if(K&&(Z=this.offset),!this.noAssert){if("number"!=typeof Z||b9o.H2B(0,Z%1))throw  new TypeError("Illegal offset: "+Z+" (not an integer)");if(Z>>>=0,b9o.V2B(0,Z)||b9o.x2B(Z+0,this.buffer.byteLength))throw  new RangeError("Illegal offset: 0 <= "+Z+" (+0) <= "+this.buffer.byteLength);}if(b9o.m2B(z,J)||(z=J.wrap(z,W)),W=b9o.X2B(z.limit,z.offset),b9o.g2B(0,W))return this;var R,N=b9o.f2B(W,Z);if(b9o.h2B(N,0)){var M=new ArrayBuffer(this.buffer.byteLength+N);R=new Uint8Array(M),R.set(new Uint8Array(this.buffer).subarray(Z,this.buffer.byteLength),W),this.buffer=M,this.view=new DataView(M),this.offset+=N,b9o.C2B(0,this.markedOffset)&&(this.markedOffset+=N),this.limit+=N,Z+=N;}else R=new Uint8Array(this.buffer);return R.set(new Uint8Array(z.buffer).subarray(z.offset,z.limit),b9o.W8B(Z,W)),z.offset=z.limit,K&&(this.offset-=W),this;},J.prototype.prependTo=function(z,W){return z.prepend(this,W),this;},J.prototype.printDebug=function(z){"function"!=typeof z&&(z=console.log.bind(console)),z(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0));},J.prototype.remaining=function(){return b9o.R8B(this.limit,this.offset);},J.prototype.reset=function(){return b9o.M8B(0,this.markedOffset)?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this;},J.prototype.resize=function(z){if(!this.noAssert){if("number"!=typeof z||b9o.b8B(0,z%1))throw  new TypeError("Illegal capacity: "+z+" (not an integer)");if(z|=0,b9o.i8B(0,z))throw  new RangeError("Illegal capacity: 0 <= "+z);}return b9o.T8B(this.buffer.byteLength,z)&&(z=new ArrayBuffer(z),new Uint8Array(z).set(new Uint8Array(this.buffer)),this.buffer=z,this.view=new DataView(z)),this;},J.prototype.reverse=function(z,W){if("undefined"==typeof z&&(z=this.offset),"undefined"==typeof W&&(W=this.limit),!this.noAssert){if("number"!=typeof z||b9o.B8B(0,z%1))throw  new TypeError("Illegal begin: Not an integer");if(z>>>=0,"number"!=typeof W||b9o.G8B(0,W%1))throw  new TypeError("Illegal end: Not an integer");if(W>>>=0,b9o.O8B(0,z)||b9o.Q8B(z,W)||b9o.F8B(W,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+z+" <= "+W+" <= "+this.buffer.byteLength);}return b9o.a8B(z,W)?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(z,W)),this.view=new DataView(this.buffer),this);},J.prototype.skip=function(z){if(!this.noAssert){if("number"!=typeof z||b9o.v8B(0,z%1))throw  new TypeError("Illegal length: "+z+" (not an integer)");z|=0;}var W=this.offset+z;if(!this.noAssert&&(b9o.I8B(0,W)||b9o.d8B(W,this.buffer.byteLength)))throw  new RangeError("Illegal length: 0 <= "+this.offset+" + "+z+" <= "+this.buffer.byteLength);return this.offset=W,this;},J.prototype.slice=function(z,W){if("undefined"==typeof z&&(z=this.offset),"undefined"==typeof W&&(W=this.limit),!this.noAssert){if("number"!=typeof z||b9o.t8B(0,z%1))throw  new TypeError("Illegal begin: Not an integer");if(z>>>=0,"number"!=typeof W||b9o.L8B(0,W%1))throw  new TypeError("Illegal end: Not an integer");if(W>>>=0,b9o.z1B(0,z)||b9o.K1B(z,W)||b9o.N1B(W,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+z+" <= "+W+" <= "+this.buffer.byteLength);}var Z=this.clone();return Z.offset=z,Z.limit=W,Z;},J.prototype.toBuffer=function(z){var W=this.offset,Z=this.limit;if(b9o.j1B(W,Z))var K=W,W=Z,Z=K;if(!this.noAssert){if("number"!=typeof W||b9o.y1B(0,W%1))throw  new TypeError("Illegal offset: Not an integer");if(W>>>=0,"number"!=typeof Z||b9o.A1B(0,Z%1))throw  new TypeError("Illegal limit: Not an integer");if(Z>>>=0,b9o.Y1B(0,W)||b9o.l1B(W,Z)||b9o.n1B(Z,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+W+" <= "+Z+" <= "+this.buffer.byteLength);}return z||b9o.c1B(0,W)||b9o.k1B(Z,this.buffer.byteLength)?b9o.D1B(W,Z)?L:(z=new ArrayBuffer(b9o.w1B(Z,W)),new Uint8Array(z).set(new Uint8Array(this.buffer).subarray(W,Z),0),z):this.buffer;},J.prototype.toArrayBuffer=J.prototype.toBuffer,J.prototype.toString=function(z){if("undefined"==typeof z)return "ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch(z){case "utf8":return this.toUTF8();case "base64":return this.toBase64();case "hex":return this.toHex();case "binary":return this.toBinary();case "debug":return this.toDebug();case "columns":return this.o();default:throw Error("Unsupported encoding: "+z);}};var I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",I=I+"";J.prototype.toBase64=function(z,W){if("undefined"==typeof z&&(z=this.offset),"undefined"==typeof W&&(W=this.limit),!this.noAssert){if("number"!=typeof z||b9o.u1B(0,z%1))throw  new TypeError("Illegal begin: Not an integer");if(z>>>=0,"number"!=typeof W||b9o.s1B(0,W%1))throw  new TypeError("Illegal end: Not an integer");if(W>>>=0,b9o.e1B(0,z)||b9o.U1B(z,W)||b9o.o6B(W,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+z+" <= "+W+" <= "+this.buffer.byteLength);}if(b9o.Z6B(z,W))return "";for(var Z,K,R,N,M,P,A="";b9o.p6B(W,z);)Z=this.view.getUint8(z++),K=(N=b9o.P6B(W,z))?this.view.getUint8(z++):0,R=(M=b9o.r6B(W,z))?this.view.getUint8(z++):0,P=b9o.S6B(Z,2),Z=b9o.E6B((3&Z)<<4,K>>4),K=b9o.q6B((15&K)<<2,R>>6),R&=63,M||(R=64,N||(K=64)),A+=I.charAt(P)+I.charAt(Z)+I.charAt(K)+I.charAt(R);return A;},J.fromBase64=function(z,W,Z){if(!Z){if("string"!=typeof z)throw  new TypeError("Illegal str: Not a string");if(b9o.J6B(0,z.length%4))throw  new TypeError("Illegal str: Length not a multiple of 4");}var K,R=z.length,N=0;for(K=b9o.H6B(z.length,1);b9o.V6B(K,0)&&b9o.x6B("=",z.charAt(K));--K)N++;if(b9o.m6B(N,2))throw  new TypeError("Illegal str: Suffix is too large");if(b9o.X6B(0,R))return new J(0,W,Z);var M,P,A,y=new J(b9o.g6B(R/4*3,N),W,Z);for(W=K=0;b9o.f6B(R,K);){if(N=I.indexOf(z.charAt(K++)),M=b9o.h6B(R,K)?I.indexOf(z.charAt(K++)):0,P=b9o.C6B(R,K)?I.indexOf(z.charAt(K++)):0,A=b9o.W7B(R,K)?I.indexOf(z.charAt(K++)):0,!Z&&(b9o.R7B(0,N)||b9o.M7B(0,M)||b9o.b7B(0,P)||b9o.i7B(0,A)))throw  new TypeError("Illegal str: Contains non-base64 characters");y.view.setUint8(W++,b9o.T7B(N<<2,M>>4)),b9o.B7B(64,P)&&(y.view.setUint8(W++,b9o.G7B(M<<4&240,P>>2),W),b9o.O7B(64,A)&&y.view.setUint8(W++,b9o.Q7B(P<<6&192,A)));}return y.limit=W,y;},J.btoa=function(z){return J.fromBinary(z).toBase64();},J.atob=function(z){return J.fromBase64(z).toBinary();},J.prototype.toBinary=function(z,W){if(z="undefined"==typeof z?this.offset:z,W="undefined"==typeof W?this.limit:W,!this.noAssert){if("number"!=typeof z||b9o.F7B(0,z%1))throw  new TypeError("Illegal begin: Not an integer");if(z>>>=0,"number"!=typeof W||b9o.a7B(0,W%1))throw  new TypeError("Illegal end: Not an integer");if(W>>>=0,b9o.v7B(0,z)||b9o.I7B(z,W)||b9o.d7B(W,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+z+" <= "+W+" <= "+this.buffer.byteLength);}if(b9o.t7B(z,W))return "";for(var Z=[];b9o.L7B(W,z);)Z.push(this.view.getUint8(z++));return String.fromCharCode.apply(String,Z);},J.fromBinary=function(z,W,Z){if(!Z&&"string"!=typeof z)throw  new TypeError("Illegal str: Not a string");for(var K=0,R=z.length,N=new J(R,W,Z);b9o.z0B(R,K);){if(W=z.charCodeAt(K),!Z&&b9o.K0B(W,255))throw  new TypeError("Illegal charCode at "+K+": 0 <= "+W+" <= 255");N.view.setUint8(K++,W);}return N.limit=R,N;},J.prototype.toDebug=function(z){for(var W,Z=-1,K=this.buffer.byteLength,R="",N="",M="";b9o.N0B(K,Z);){if(-1!==Z&&(W=this.view.getUint8(Z),R=b9o.j0B(16,W)?R+("0"+W.toString(16).toUpperCase()):R+W.toString(16).toUpperCase(),z&&(N+=b9o.y0B(W,32)&&b9o.A0B(127,W)?String.fromCharCode(W):".")),++Z,z&&b9o.Y0B(Z,0)&&b9o.l0B(0,Z%16)&&b9o.n0B(Z,K)){for(;b9o.c0B(51,R.length);)R+=" ";M+=R+N+"\n",R=N="";}R=b9o.k0B(Z,this.offset)&&b9o.D0B(Z,this.limit)?R+(b9o.w0B(Z,this.markedOffset)?"!":"|"):b9o.u0B(Z,this.offset)?R+(b9o.s0B(Z,this.markedOffset)?"[":"<"):b9o.e0B(Z,this.limit)?R+(b9o.U0B(Z,this.markedOffset)?"]":">"):R+(b9o.o4B(Z,this.markedOffset)?"'":z||b9o.Z4B(0,Z)&&b9o.p4B(Z,K)?" ":"");}if(z&&b9o.P4B(" ",R)){for(;b9o.r4B(51,R.length);)R+=" ";M+=R+N+"\n";}return z?M:R;},J.fromDebug=function(z,W,Z){var K=z.length;W=new J(b9o.S4B((K+1)/3,0),W,Z);for(var R,N=0,M=0,P=!1,A=!1,y=!1,E=!1,B=!1;b9o.E4B(K,N);){var G=function(){P=!1;};switch(R=z.charAt(N++)){case "!":if(!Z){if(A||y||E){var q=function(){B=!0;};q();break;}A=y=E=!0;}W.offset=W.markedOffset=W.limit=M,P=!1;break;case "|":if(!Z){if(A||E){var Y=function(){B=!0;};Y();break;}A=E=!0;}W.offset=W.limit=M,P=!1;break;case "[":if(!Z){if(A||y){var O=function(){B=!0;};O();break;}A=y=!0;}W.offset=W.markedOffset=M,P=!1;break;case "<":if(!Z){var V=function(){A=!0;};if(A){var w=function(){B=!0;};w();break;}V();}W.offset=M,P=!1;break;case "]":if(!Z){if(E||y){var H=function(){B=!0;};H();break;}E=y=!0;}W.limit=W.markedOffset=M,P=!1;break;case ">":if(!Z){var D=function(){E=!0;};if(E){var F=function(){B=!0;};F();break;}D();}W.limit=M,P=!1;break;case "'":if(!Z){var Q=function(){y=!0;};if(y){var x=function(){B=!0;};x();break;}Q();}W.markedOffset=M,P=!1;break;case " ":G();break;default:if(!Z&&P){var v=function(){B=!0;};v();break;}if(R=parseInt(R+z.charAt(N++),16),!Z&&(isNaN(R)||b9o.q4B(0,R)||b9o.J4B(R,255)))throw  new TypeError("Illegal str: Not a debug encoded string");W.view.setUint8(M++,R),P=!0;}if(B)throw  new TypeError("Illegal str: Invalid symbol at "+N);}if(!Z){if(!A||!E)throw  new TypeError("Illegal str: Missing offset or limit");if(b9o.H4B(M,W.buffer.byteLength))throw  new TypeError("Illegal str: Not a debug encoded string (is it hex?) "+M+" < "+K);}return W;},J.prototype.toHex=function(z,W){if(z="undefined"==typeof z?this.offset:z,W="undefined"==typeof W?this.limit:W,!this.noAssert){if("number"!=typeof z||b9o.V4B(0,z%1))throw  new TypeError("Illegal begin: Not an integer");if(z>>>=0,"number"!=typeof W||b9o.x4B(0,W%1))throw  new TypeError("Illegal end: Not an integer");if(W>>>=0,b9o.m4B(0,z)||b9o.X4B(z,W)||b9o.g4B(W,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+z+" <= "+W+" <= "+this.buffer.byteLength);}for(var Z,K=Array(b9o.f4B(W,z));b9o.h4B(W,z);)Z=this.view.getUint8(z++),b9o.C4B(16,Z)?K.push("0",Z.toString(16)):K.push(Z.toString(16));return K.join("");},J.fromHex=function(z,W,Z){if(!Z){if("string"!=typeof z)throw  new TypeError("Illegal str: Not a string");if(b9o.W9B(0,z.length%2))throw  new TypeError("Illegal str: Length not a multiple of 2");}var K=z.length;W=new J(b9o.R9B(K/2,0),W);for(var R,N=0,M=0;b9o.M9B(K,N);N+=2){if(R=parseInt(z.substring(N,N+2),16),!Z&&(!isFinite(R)||b9o.b9B(0,R)||b9o.i9B(R,255)))throw  new TypeError("Illegal str: Contains non-hex characters");W.view.setUint8(M++,R);}return W.limit=M,W;};var X=function(){var y={j:function(z,W){var Z=null;for("number"==typeof z&&(Z=z,z=function(){return null;});b9o.T9B(null,Z)||b9o.B9B(null,(Z=z()));)b9o.G9B(128,Z)?W(b9o.O9B(127,Z)):(b9o.Q9B(2048,Z)?W(b9o.F9B(Z>>6&31,192)):(b9o.a9B(65536,Z)?W(b9o.v9B(Z>>12&15,224)):(W(b9o.I9B(Z>>18&7,240)),W(b9o.d9B(Z>>12&63,128))),W(b9o.t9B(Z>>6&63,128))),W(b9o.L9B(63&Z,128))),Z=null;},i:function(Z,K){function R(z){z=z.slice(0,z.indexOf(null));var W=Error(z.toString());throw W.name="TruncatedError",W.bytes=z,W;}for(var N,M,P,A;b9o.z5s(null,(N=Z()));)if(b9o.K5s(0,(128&N)))K(N);else if(b9o.N5s(192,(224&N)))b9o.j5s(null,(M=Z()))&&R([N,M]),K(b9o.y5s((31&N)<<6,63&M));else if(b9o.A5s(224,(240&N)))b9o.Y5s(null,(M=Z()))&&b9o.l5s(null,(P=Z()))||R([N,M,P]),K(b9o.n5s((15&N)<<12,(63&M)<<6,63&P));else{if(b9o.Q5s(240,(248&N)))throw RangeError("Illegal starting byte: "+N);b9o.F5s(null,(M=Z()))&&b9o.a5s(null,(P=Z()))&&b9o.v5s(null,(A=Z()))||R([N,M,P,A]),K(b9o.I5s((7&N)<<18,(63&M)<<12,(63&P)<<6,63&A));}},f:function(z,W){for(var Z,K=null;b9o.e5s(null,(Z=null!==K?K:z()));)b9o.U5s(Z,55296)&&b9o.o3s(57343,Z)&&b9o.Z3s(null,(K=z()))&&b9o.p3s(K,56320)&&b9o.P3s(57343,K)?(W(b9o.r3s(1024,(Z-55296))+K-56320+65536),K=null):W(Z);b9o.S3s(null,K)&&W(K);},g:function(z,W){var Z=null;for("number"==typeof z&&(Z=z,z=function(){return null;});b9o.E3s(null,Z)||b9o.q3s(null,(Z=z()));)b9o.J3s(65535,Z)?W(Z):(Z-=65536,W((b9o.H3s(Z,10))+55296),W(b9o.V3s(Z,1024)+56320)),Z=null;},e:function(W,Z){y.f(W,function(z){y.j(z,Z);});},d:function(W,Z){y.i(W,function(z){y.g(z,Z);});},k:function(z){if("number"!=typeof z||b9o.x3s(z,z))throw TypeError("Illegal byte: "+typeof z);if(-128>z||b9o.m3s(z,255))throw RangeError("Illegal byte: "+z);return z;},l:function(z){if("number"!=typeof z||b9o.X3s(z,z))throw TypeError("Illegal char code: "+typeof z);if(b9o.g3s(0,z)||b9o.f3s(z,65535))throw RangeError("Illegal char code: "+z);return z;},m:function(z){if("number"!=typeof z||b9o.h3s(z,z))throw TypeError("Illegal code point: "+typeof z);if(b9o.C3s(0,z)||b9o.W2s(z,1114111))throw RangeError("Illegal code point: "+z);return z;},h:function(z){return b9o.R2s(128,z)?1:b9o.M2s(2048,z)?2:b9o.b2s(65536,z)?3:4;},n:function(z){for(var W,Z=0;b9o.i2s(null,(W=z()));)Z+=y.h(W);return Z;},b:function(W){var Z=0,K=0;return y.f(W,function(z){++Z,K+=y.h(z);}),[Z,K];}};return y;}(),z5=String.fromCharCode;return X.a=function(z){var W=0;return function(){return b9o.T2s(W,z.length)?z.charCodeAt(W++):null;};},X.c=function(){var z=[],W=[];return function(){return b9o.B2s(0,arguments.length)?W.join("")+z5.apply(String,z):(b9o.G2s(1024,z.length+arguments.length)&&(W.push(z5.apply(String,z)),z.length=0),void Array.prototype.push.apply(z,arguments));};},J.prototype.toUTF8=function(W,Z){if("undefined"==typeof W&&(W=this.offset),"undefined"==typeof Z&&(Z=this.limit),!this.noAssert){if("number"!=typeof W||b9o.O2s(0,W%1))throw  new TypeError("Illegal begin: Not an integer");if(W>>>=0,"number"!=typeof Z||b9o.Q2s(0,Z%1))throw  new TypeError("Illegal end: Not an integer");if(Z>>>=0,b9o.F2s(0,W)||b9o.a2s(W,Z)||b9o.v2s(Z,this.buffer.byteLength))throw  new RangeError("Illegal range: 0 <= "+W+" <= "+Z+" <= "+this.buffer.byteLength);}var K,R=this;try{X.d(function(){return b9o.I2s(Z,W)?R.view.getUint8(W++):null;},K=X.c());}catch(z){if(b9o.d2s(W,Z))throw  new RangeError("Illegal range: Truncated data, "+W+" != "+Z);}return K();},J.fromUTF8=function(W,Z,K){if(!K&&"string"!=typeof W)throw  new TypeError("Illegal str: Not a string");var R=new J(X.b(X.a(W),!0)[1],Z,K),N=0;return X.e(X.a(W),function(z){R.view.setUint8(N++,z);}),R.limit=N,R;},J;}CL.configs.ua.indexOf("msie 9.0")>-1||CL.configs.ua.indexOf("msie 8.0")>-1||CL.configs.ua.indexOf("msie 7.0")>-1||("undefined"!=typeof module&&module.exports?module.exports=W5(require("long")):"undefined"!=typeof define&&define.amd?define("ByteBuffer",["Math/Long"],function(z){return W5(z);}):(o5.dcodeIO||(o5.dcodeIO={}),o5.dcodeIO.ByteBuffer=W5(o5.dcodeIO.Long)));}(this),function(L){function I(u){if(!u||!u.VERSION||b9o.t2s(3,u.VERSION.split(".")[0]))throw Error("ProtoBuf.js requires ByteBuffer.js >=3");var J={VERSION:"3.1.0",WIRE_TYPES:{}};return J.WIRE_TYPES.VARINT=0,J.WIRE_TYPES.BITS64=1,J.WIRE_TYPES.LDELIM=2,J.WIRE_TYPES.STARTGROUP=3,J.WIRE_TYPES.ENDGROUP=4,J.WIRE_TYPES.BITS32=5,J.PACKABLE_WIRE_TYPES=[J.WIRE_TYPES.VARINT,J.WIRE_TYPES.BITS64,J.WIRE_TYPES.BITS32],J.TYPES={int32:{name:"int32",wireType:J.WIRE_TYPES.VARINT},uint32:{name:"uint32",wireType:J.WIRE_TYPES.VARINT},sint32:{name:"sint32",wireType:J.WIRE_TYPES.VARINT},int64:{name:"int64",wireType:J.WIRE_TYPES.VARINT},uint64:{name:"uint64",wireType:J.WIRE_TYPES.VARINT},sint64:{name:"sint64",wireType:J.WIRE_TYPES.VARINT},bool:{name:"bool",wireType:J.WIRE_TYPES.VARINT},"double":{name:"double",wireType:J.WIRE_TYPES.BITS64},string:{name:"string",wireType:J.WIRE_TYPES.LDELIM},bytes:{name:"bytes",wireType:J.WIRE_TYPES.LDELIM},fixed32:{name:"fixed32",wireType:J.WIRE_TYPES.BITS32},sfixed32:{name:"sfixed32",wireType:J.WIRE_TYPES.BITS32},fixed64:{name:"fixed64",wireType:J.WIRE_TYPES.BITS64},sfixed64:{name:"sfixed64",wireType:J.WIRE_TYPES.BITS64},"float":{name:"float",wireType:J.WIRE_TYPES.BITS32},"enum":{name:"enum",wireType:J.WIRE_TYPES.VARINT},message:{name:"message",wireType:J.WIRE_TYPES.LDELIM},group:{name:"group",wireType:J.WIRE_TYPES.STARTGROUP}},J.ID_MIN=1,J.ID_MAX=536870911,J.ByteBuffer=u,J.Long=u.Long||null,J.convertFieldsToCamelCase=!1,J.Util=function(){Object.create||(Object.create=function(z){function W(){}if(b9o.L2s(1,arguments.length))throw Error("Object.create implementation only accepts the first parameter.");return W.prototype=z,new W;});var N={IS_NODE:!1};try{var M=function(){N.IS_NODE="function"==typeof require&&"function"==typeof require("fs").readFileSync&&"function"==typeof require("path").resolve;};M();}catch(z){}return N.XHR=function(){for(var W=[function(){return new XMLHttpRequest;},function(){return new ActiveXObject("Msxml2.XMLHTTP");},function(){return new ActiveXObject("Msxml3.XMLHTTP");},function(){return new ActiveXObject("Microsoft.XMLHTTP");}],Z=null,K=0;b9o.z8s(K,W.length);K++){try{Z=W[K]();}catch(z){continue;}break;}if(!Z)throw Error("XMLHttpRequest is not supported");return Z;},N.fetch=function(Z,K){if(K&&"function"!=typeof K&&(K=null),N.IS_NODE)if(K)require("fs").readFile(Z,function(z,W){K(z?null:""+W);});else try{return require("fs").readFileSync(Z);}catch(z){return null;}else{var R=N.XHR();if(R.open("GET",Z,K?!0:!1),R.setRequestHeader("Accept","text/plain"),"function"==typeof R.overrideMimeType&&R.overrideMimeType("text/plain"),!K)return R.send(null),b9o.K8s(200,R.status)||b9o.N8s(0,R.status)&&"string"==typeof R.responseText?R.responseText:null;R.onreadystatechange=function(){b9o.j8s(4,R.readyState)&&K(b9o.y8s(200,R.status)||b9o.A8s(0,R.status)&&"string"==typeof R.responseText?R.responseText:null);},b9o.Y8s(4,R.readyState)&&R.send(null);}},N.isArray=function(z){return z?b9o.l8s(z,Array)?!0:Array.isArray?Array.isArray(z):b9o.n8s("[object Array]",Object.prototype.toString.call(z)):!1;},N;}(),J.Lang={OPEN:"{",CLOSE:"}",OPTOPEN:"[",OPTCLOSE:"]",OPTEND:",",EQUAL:"=",END:";",STRINGOPEN:'"',STRINGCLOSE:'"',STRINGOPEN_SQ:"'",STRINGCLOSE_SQ:"'",COPTOPEN:"(",COPTCLOSE:")",DELIM:/[\s\{\}=;\[\],'"\(\)]/g,RULE:/^(?:required|optional|repeated)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+|([0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?))$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0x[0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^[0-9]*\.[0-9]+([Ee][+-]?[0-9]+)?$/,ID:/^(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0x[0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/['"]([^'"\\]*(\\.[^"\\]*)*)['"]/g,BOOL:/^(?:true|false)$/i},J.DotProto=function(y,E){var B=function(z){this.tn=new q(z);},G={},q=function(z){this.source=""+z,this.index=0,this.line=1,this.stack=[],this.readingString=!1,this.stringEndsWith=E.STRINGCLOSE;};q.prototype._readString=function(){E.STRING.lastIndex=b9o.c8s(this.index,1);var z;if(b9o.k8s(null,(z=E.STRING.exec(this.source))))return z=z[1],this.index=E.STRING.lastIndex,this.stack.push(this.stringEndsWith),z;throw Error("Illegal string value at line "+this.line+", index "+this.index);},q.prototype.next=function(){if(b9o.D8s(0,this.stack.length))return this.stack.shift();if(b9o.w8s(this.index,this.source.length))return null;if(this.readingString)return this.readingString=!1,this._readString();var z,W;do {for(z=!1;E.WHITESPACE.test(W=this.source.charAt(this.index));)if(this.index++,b9o.u8s("\n",W)&&this.line++,b9o.s8s(this.index,this.source.length))return null;if(b9o.e8s("/",this.source.charAt(this.index)))if("/"===this.source.charAt(++this.index)){for(;b9o.U8s("\n",this.source.charAt(this.index));)if(this.index++,b9o.o1s(this.index,this.source.length))return null;this.index++,this.line++,z=!0;}else{if(b9o.Z1s("*",this.source.charAt(this.index)))throw Error("Invalid comment at line "+this.line+": /"+this.source.charAt(this.index)+" ('/' or '*' expected)");for(W="";b9o.p1s("*/",W+(W=this.source.charAt(this.index)));)if(this.index++,b9o.P1s("\n",W)&&this.line++,b9o.r1s(this.index,this.source.length))return null;this.index++,z=!0;}}while(z);if(b9o.S1s(this.index,this.source.length))return null;if(z=this.index,E.DELIM.lastIndex=0,E.DELIM.test(this.source.charAt(z)))z++;else for(z++;b9o.E1s(z,this.source.length)&&!E.DELIM.test(this.source.charAt(z));)z++;return z=this.source.substring(this.index,this.index=z),b9o.q1s(z,E.STRINGOPEN)?(this.readingString=!0,this.stringEndsWith=E.STRINGCLOSE):b9o.J1s(z,E.STRINGOPEN_SQ)&&(this.readingString=!0,this.stringEndsWith=E.STRINGCLOSE_SQ),z;},q.prototype.peek=function(){if(b9o.H1s(0,this.stack.length)){var z=this.next();if(b9o.V1s(null,z))return null;this.stack.push(z);}return this.stack[0];},q.prototype.toString=function(){return "Tokenizer("+this.index+"/"+this.source.length+" at line "+this.line+")";},G.Tokenizer=q;return B.prototype.parse=function(){for(var z,W={name:"[ROOT]","package":null,messages:[],enums:[],imports:[],options:{},services:[]},Z=!0;z=this.tn.next();)switch(z){case "package":if(!Z)throw Error("Illegal package definition at line "+this.tn.line+": Must be declared before the first message or enum");if(b9o.x1s(null,W["package"]))throw Error("Illegal package definition at line "+this.tn.line+": Package already declared");W["package"]=this._parsePackage(z);break;case "import":if(!Z)throw Error("Illegal import definition at line "+this.tn.line+": Must be declared before the first message or enum");W.imports.push(this._parseImport(z));break;case "message":this._parseMessage(W,null,z),Z=!1;break;case "enum":this._parseEnum(W,z),Z=!1;break;case "option":if(!Z)throw Error("Illegal option definition at line "+this.tn.line+": Must be declared before the first message or enum");this._parseOption(W,z);break;case "service":this._parseService(W,z);break;case "extend":this._parseExtend(W,z);break;case "syntax":this._parseIgnoredStatement(W,z);break;default:throw Error("Illegal top level declaration at line "+this.tn.line+": "+z);}return delete  W.name,W;},B.prototype._parseNumber=function(z){var W=1;if(b9o.m1s("-",z.charAt(0))&&(W=-1,z=z.substring(1)),E.NUMBER_DEC.test(z))return b9o.X1s(W,parseInt(z,10));if(E.NUMBER_HEX.test(z))return b9o.g1s(W,parseInt(z.substring(2),16));if(E.NUMBER_OCT.test(z))return b9o.f1s(W,parseInt(z.substring(1),8));if(E.NUMBER_FLT.test(z))return b9o.h1s(W,parseFloat(z));throw Error("Illegal number value at line "+this.tn.line+": "+(b9o.C1s(0,W)?"-":"")+z);},B.prototype._parseId=function(z,W){var Z=-1,K=1;if(b9o.W6s("-",z.charAt(0))&&(K=-1,z=z.substring(1)),E.NUMBER_DEC.test(z))Z=parseInt(z);else if(E.NUMBER_HEX.test(z))Z=parseInt(z.substring(2),16);else{if(!E.NUMBER_OCT.test(z))throw Error("Illegal ID value at line "+this.tn.line+": "+(b9o.R6s(0,K)?"-":"")+z);Z=parseInt(z.substring(1),8);}if(Z=b9o.M6s(K*Z,0),!W&&b9o.b6s(0,Z))throw Error("Illegal ID range at line "+this.tn.line+": "+(b9o.i6s(0,K)?"-":"")+z);return Z;},B.prototype._parsePackage=function(z){if(z=this.tn.next(),!E.TYPEREF.test(z))throw Error("Illegal package name at line "+this.tn.line+": "+z);var W=z;if(z=this.tn.next(),b9o.T6s(z,E.END))throw Error("Illegal end of package definition at line "+this.tn.line+": "+z+" ('"+E.END+"' expected)");return W;},B.prototype._parseImport=function(z){if(z=this.tn.next(),b9o.B6s("public",z)&&(z=this.tn.next()),b9o.G6s(z,E.STRINGOPEN)&&b9o.O6s(z,E.STRINGOPEN_SQ))throw Error("Illegal begin of import value at line "+this.tn.line+": "+z+" ('"+E.STRINGOPEN+"' or '"+E.STRINGOPEN_SQ+"' expected)");var W=this.tn.next();if(z=this.tn.next(),b9o.Q6s(z,this.tn.stringEndsWith))throw Error("Illegal end of import value at line "+this.tn.line+": "+z+" ('"+this.tn.stringEndsWith+"' expected)");if(z=this.tn.next(),b9o.F6s(z,E.END))throw Error("Illegal end of import definition at line "+this.tn.line+": "+z+" ('"+E.END+"' expected)");return W;},B.prototype._parseOption=function(W,Z){var K=function(z){W.options[N]=z;};Z=this.tn.next();var R=!1;if(b9o.a6s(Z,E.COPTOPEN)&&(R=!0,Z=this.tn.next()),!E.TYPEREF.test(Z)&&!/google\.protobuf\./.test(Z))throw Error("Illegal option name in message "+W.name+" at line "+this.tn.line+": "+Z);var N=Z;if(Z=this.tn.next(),R){if(b9o.v6s(Z,E.COPTCLOSE))throw Error("Illegal custom option name delimiter in message "+W.name+", option "+N+" at line "+this.tn.line+": "+Z+" ('"+E.COPTCLOSE+"' expected)");N="("+N+")",Z=this.tn.next(),E.FQTYPEREF.test(Z)&&(N+=Z,Z=this.tn.next());}if(b9o.I6s(Z,E.EQUAL))throw Error("Illegal option operator in message "+W.name+", option "+N+" at line "+this.tn.line+": "+Z+" ('"+E.EQUAL+"' expected)");if(Z=this.tn.next(),b9o.d6s(Z,E.STRINGOPEN)||b9o.t6s(Z,E.STRINGOPEN_SQ)){if(R=this.tn.next(),Z=this.tn.next(),b9o.L6s(Z,this.tn.stringEndsWith))throw Error("Illegal end of option value in message "+W.name+", option "+N+" at line "+this.tn.line+": "+Z+" ('"+this.tn.stringEndsWith+"' expected)");}else if(E.NUMBER.test(Z))R=this._parseNumber(Z,!0);else{var M=function(z){R=z;};if(!E.TYPEREF.test(Z))throw Error("Illegal option value in message "+W.name+", option "+N+" at line "+this.tn.line+": "+Z);M(Z);}if(Z=this.tn.next(),b9o.z7s(Z,E.END))throw Error("Illegal end of option in message "+W.name+", option "+N+" at line "+this.tn.line+": "+Z+" ('"+E.END+"' expected)");K(R);},B.prototype._parseIgnoredStatement=function(z,W){for(var Z;;){if(Z=this.tn.next(),b9o.K7s(null,Z))throw Error("Unexpected EOF in "+z.name+", "+W+" (ignored) at line "+this.tn.line);if(b9o.N7s(Z,E.END))break;}},B.prototype._parseService=function(z){var W=this.tn.next();if(!E.NAME.test(W))throw Error("Illegal service name at line "+this.tn.line+": "+W);var Z=W,K={name:Z,rpc:{},options:{}},W=this.tn.next();if(b9o.j7s(W,E.OPEN))throw Error("Illegal OPEN after service "+Z+" at line "+this.tn.line+": "+W+" ('"+E.OPEN+"' expected)");do if(W=this.tn.next(),b9o.y7s("option",W))this._parseOption(K,W);else if(b9o.A7s("rpc",W))this._parseServiceRPC(K,W);else if(b9o.Y7s(W,E.CLOSE))throw Error("Illegal type for service "+Z+" at line "+this.tn.line+": "+W);while(b9o.l7s(W,E.CLOSE));z.services.push(K);},B.prototype._parseServiceRPC=function(z,W){var Z=W;if(W=this.tn.next(),!E.NAME.test(W))throw Error("Illegal RPC method name in service "+z.name+" at line "+this.tn.line+": "+W);var K=W,R={request:null,response:null,options:{}};if(W=this.tn.next(),b9o.n7s(W,E.COPTOPEN))throw Error("Illegal start of request type in RPC service "+z.name+"#"+K+" at line "+this.tn.line+": "+W+" ('"+E.COPTOPEN+"' expected)");if(W=this.tn.next(),!E.TYPEREF.test(W))throw Error("Illegal request type in RPC service "+z.name+"#"+K+" at line "+this.tn.line+": "+W);if(R.request=W,W=this.tn.next(),b9o.c7s(W,E.COPTCLOSE))throw Error("Illegal end of request type in RPC service "+z.name+"#"+K+" at line "+this.tn.line+": "+W+" ('"+E.COPTCLOSE+"' expected)");if(W=this.tn.next(),b9o.k7s("returns",W.toLowerCase()))throw Error("Illegal request/response delimiter in RPC service "+z.name+"#"+K+" at line "+this.tn.line+": "+W+" ('returns' expected)");if(W=this.tn.next(),b9o.D7s(W,E.COPTOPEN))throw Error("Illegal start of response type in RPC service "+z.name+"#"+K+" at line "+this.tn.line+": "+W+" ('"+E.COPTOPEN+"' expected)");if(W=this.tn.next(),R.response=W,W=this.tn.next(),b9o.w7s(W,E.COPTCLOSE))throw Error("Illegal end of response type in RPC service "+z.name+"#"+K+" at line "+this.tn.line+": "+W+" ('"+E.COPTCLOSE+"' expected)");if(W=this.tn.next(),b9o.u7s(W,E.OPEN)){do if(W=this.tn.next(),b9o.s7s("option",W))this._parseOption(R,W);else if(b9o.e7s(W,E.CLOSE))throw Error("Illegal start of option in RPC service "+z.name+"#"+K+" at line "+this.tn.line+": "+W+" ('option' expected)");while(b9o.U7s(W,E.CLOSE));b9o.o0s(this.tn.peek(),E.END)&&this.tn.next();}else if(b9o.Z0s(W,E.END))throw Error("Illegal method delimiter in RPC service "+z.name+"#"+K+" at line "+this.tn.line+": "+W+" ('"+E.END+"' or '"+E.OPEN+"' expected)");"undefined"==typeof z[Z]&&(z[Z]={}),z[Z][K]=R;},B.prototype._parseMessage=function(W,Z,K){var R={},N=b9o.p0s("group",K);if(K=this.tn.next(),!E.NAME.test(K))throw Error("Illegal "+(N?"group":"message")+" name"+(W?" in message "+W.name:"")+" at line "+this.tn.line+": "+K);if(R.name=K,N){var M=function(){R.isGroup=!0;};if(K=this.tn.next(),b9o.P0s(K,E.EQUAL))throw Error("Illegal id assignment after group "+R.name+" at line "+this.tn.line+": "+K+" ('"+E.EQUAL+"' expected)");K=this.tn.next();try{Z.id=this._parseId(K);}catch(z){throw Error("Illegal field id value for group "+R.name+"#"+Z.name+" at line "+this.tn.line+": "+K);}M();}if(R.fields=[],R.enums=[],R.messages=[],R.options={},K=this.tn.next(),b9o.r0s(K,E.OPTOPEN)&&Z&&(this._parseFieldOptions(R,Z,K),K=this.tn.next()),b9o.S0s(K,E.OPEN))throw Error("Illegal OPEN after "+(N?"group":"message")+" "+R.name+" at line "+this.tn.line+": "+K+" ('"+E.OPEN+"' expected)");for(;;){if(K=this.tn.next(),b9o.E0s(K,E.CLOSE)){K=this.tn.peek(),b9o.q0s(K,E.END)&&this.tn.next();break;}if(E.RULE.test(K))this._parseMessageField(R,K);else if(b9o.J0s("enum",K))this._parseEnum(R,K);else if(b9o.H0s("message",K))this._parseMessage(R,null,K);else if(b9o.V0s("option",K))this._parseOption(R,K);else if(b9o.x0s("extensions",K))R.extensions=this._parseExtensions(R,K);else{if(b9o.m0s("extend",K))throw Error("Illegal token in message "+R.name+" at line "+this.tn.line+": "+K+" (type or '"+E.CLOSE+"' expected)");this._parseExtend(R,K);}}return W.messages.push(R),R;},B.prototype._parseMessageField=function(W,Z){var K={},R=null;if(K.rule=Z,K.options={},Z=this.tn.next(),b9o.X0s("group",Z)){if(R=this._parseMessage(W,K,Z),!/^[A-Z]/.test(R.name))throw Error("Group names must start with a capital letter");K.type=R.name,K.name=R.name.toLowerCase(),Z=this.tn.peek(),b9o.g0s(Z,E.END)&&this.tn.next();}else{if(!E.TYPE.test(Z)&&!E.TYPEREF.test(Z))throw Error("Illegal field type in message "+W.name+" at line "+this.tn.line+": "+Z);if(K.type=Z,Z=this.tn.next(),!E.NAME.test(Z))throw Error("Illegal field name in message "+W.name+" at line "+this.tn.line+": "+Z);if(K.name=Z,Z=this.tn.next(),b9o.f0s(Z,E.EQUAL))throw Error("Illegal field id assignment in message "+W.name+"#"+K.name+" at line "+this.tn.line+": "+Z+" ('"+E.EQUAL+"' expected)");Z=this.tn.next();try{K.id=this._parseId(Z);}catch(z){throw Error("Illegal field id value in message "+W.name+"#"+K.name+" at line "+this.tn.line+": "+Z);}if(Z=this.tn.next(),b9o.h0s(Z,E.OPTOPEN)&&(this._parseFieldOptions(W,K,Z),Z=this.tn.next()),b9o.C0s(Z,E.END))throw Error("Illegal field delimiter in message "+W.name+"#"+K.name+" at line "+this.tn.line+": "+Z+" ('"+E.END+"' expected)");}W.fields.push(K);},B.prototype._parseFieldOptions=function(z,W,Z){for(var K=!0;Z=this.tn.next(),b9o.W4s(Z,E.OPTCLOSE);){if(b9o.R4s(Z,E.OPTEND)){if(K)throw Error("Illegal start of message field options in message "+z.name+"#"+W.name+" at line "+this.tn.line+": "+Z);Z=this.tn.next();}this._parseFieldOption(z,W,Z),K=!1;}},B.prototype._parseFieldOption=function(W,Z,K){var R=function(z){Z.options[P]=z;},N=function(){M=b9o.M4s("true",K.toLowerCase());},M=!1;if(b9o.b4s(K,E.COPTOPEN)&&(K=this.tn.next(),M=!0),!E.TYPEREF.test(K))throw Error("Illegal field option in message "+W.name+"#"+Z.name+" at line "+this.tn.line+": "+K);var P=K;if(K=this.tn.next(),M){if(b9o.i4s(K,E.COPTCLOSE))throw Error("Illegal custom field option name delimiter in message "+W.name+"#"+Z.name+" at line "+this.tn.line+": "+K+" (')' expected)");P="("+P+")",K=this.tn.next(),E.FQTYPEREF.test(K)&&(P+=K,K=this.tn.next());}if(b9o.T4s(K,E.EQUAL))throw Error("Illegal field option operation in message "+W.name+"#"+Z.name+" at line "+this.tn.line+": "+K+" ('=' expected)");if(K=this.tn.next(),b9o.B4s(K,E.STRINGOPEN)||b9o.G4s(K,E.STRINGOPEN_SQ)){if(M=this.tn.next(),K=this.tn.next(),b9o.O4s(K,this.tn.stringEndsWith))throw Error("Illegal end of field value in message "+W.name+"#"+Z.name+", option "+P+" at line "+this.tn.line+": "+K+" ('"+this.tn.stringEndsWith+"' expected)");}else if(E.NUMBER.test(K,!0))M=this._parseNumber(K,!0);else if(E.BOOL.test(K))N();else{var A=function(z){M=z;};if(!E.TYPEREF.test(K))throw Error("Illegal field option value in message "+W.name+"#"+Z.name+", option "+P+" at line "+this.tn.line+": "+K);A(K);}R(M);},B.prototype._parseEnum=function(z,W){var Z={};if(W=this.tn.next(),!E.NAME.test(W))throw Error("Illegal enum name in message "+z.name+" at line "+this.tn.line+": "+W);if(Z.name=W,W=this.tn.next(),b9o.Q4s(W,E.OPEN))throw Error("Illegal OPEN after enum "+Z.name+" at line "+this.tn.line+": "+W);for(Z.values=[],Z.options={};;){if(W=this.tn.next(),b9o.F4s(W,E.CLOSE)){W=this.tn.peek(),b9o.a4s(W,E.END)&&this.tn.next();break;}if(b9o.v4s("option",W))this._parseOption(Z,W);else{if(!E.NAME.test(W))throw Error("Illegal enum value name in enum "+Z.name+" at line "+this.tn.line+": "+W);this._parseEnumValue(Z,W);}}z.enums.push(Z);},B.prototype._parseEnumValue=function(W,Z){var K={};if(K.name=Z,Z=this.tn.next(),b9o.I4s(Z,E.EQUAL))throw Error("Illegal enum value operator in enum "+W.name+" at line "+this.tn.line+": "+Z+" ('"+E.EQUAL+"' expected)");Z=this.tn.next();try{K.id=this._parseId(Z,!0);}catch(z){throw Error("Illegal enum value id in enum "+W.name+" at line "+this.tn.line+": "+Z);}if(W.values.push(K),Z=this.tn.next(),b9o.d4s(Z,E.OPTOPEN)&&(this._parseFieldOptions(W,{options:{}},Z),Z=this.tn.next()),b9o.t4s(Z,E.END))throw Error("Illegal enum value delimiter in enum "+W.name+" at line "+this.tn.line+": "+Z+" ('"+E.END+"' expected)");},B.prototype._parseExtensions=function(z,W){var Z=[];if(W=this.tn.next(),Z.push(b9o.L4s("min",W)?y.ID_MIN:b9o.z9s("max",W)?y.ID_MAX:this._parseNumber(W)),W=this.tn.next(),b9o.K9s("to",W))throw "Illegal extensions delimiter in message "+z.name+" at line "+this.tn.line+" ('to' expected)";if(W=this.tn.next(),Z.push(b9o.N9s("min",W)?y.ID_MIN:b9o.j9s("max",W)?y.ID_MAX:this._parseNumber(W)),W=this.tn.next(),b9o.y9s(W,E.END))throw Error("Illegal extension delimiter in message "+z.name+" at line "+this.tn.line+": "+W+" ('"+E.END+"' expected)");return Z;},B.prototype._parseExtend=function(z,W){if(W=this.tn.next(),!E.TYPEREF.test(W))throw Error("Illegal extended message name at line "+this.tn.line+": "+W);var Z={};if(Z.ref=W,Z.fields=[],W=this.tn.next(),b9o.A9s(W,E.OPEN))throw Error("Illegal OPEN in extend "+Z.name+" at line "+this.tn.line+": "+W+" ('"+E.OPEN+"' expected)");for(;;){if(W=this.tn.next(),b9o.Y9s(W,E.CLOSE)){W=this.tn.peek(),b9o.l9s(W,E.END)&&this.tn.next();break;}if(!E.RULE.test(W))throw Error("Illegal token in extend "+Z.name+" at line "+this.tn.line+": "+W+" (rule or '"+E.CLOSE+"' expected)");this._parseMessageField(Z,W);}return z.messages.push(Z),Z;},B.prototype.toString=function(){return "Parser";},G.Parser=B,G;}(J,J.Lang),J.Reflect=function(Y){var O=function(z,W,Z){v.call(this,z,W),this.className="Namespace",this.children=[],this.options=Z||{};},V=function(z,W,Z,K){O.call(this,z,W,Z),this.className="Message",this.extensions=[Y.ID_MIN,Y.ID_MAX],this.clazz=null,this.isGroup=!!K;},w=function(Z,K,R,N,M,P){v.call(this,Z,N),this.className="Message.Field",this.required=b9o.p8C("required",K),this.repeated=b9o.P8C("repeated",K),this.type=R,this.resolvedType=null,this.id=M,this.options=P||{},this.originalName=this.name,Y.convertFieldsToCamelCase&&(this.name=this.name.replace(/_([a-zA-Z])/g,function(z,W){return W.toUpperCase();}));};function H(z,W){if(z&&"number"==typeof z.low&&"number"==typeof z.high&&"boolean"==typeof z.unsigned&&b9o.w9s(z.low,z.low)&&b9o.u9s(z.high,z.high))return new Y.Long(z.low,z.high,"undefined"==typeof W?z.unsigned:W);if("string"==typeof z)return Y.Long.fromString(z,W||!1,10);if("number"==typeof z)return Y.Long.fromNumber(z,W||!1);throw Error("not convertible to Long");}function D(z,W){var Z=W.readVarint32(),K=b9o.n9s(7,Z),Z=b9o.c9s(Z,3);switch(K){case Y.WIRE_TYPES.VARINT:do Z=W.readUint8();while(b9o.k9s(128,(128&Z)));break;case Y.WIRE_TYPES.BITS64:W.offset+=8;break;case Y.WIRE_TYPES.LDELIM:Z=W.readVarint32(),W.offset+=Z;break;case Y.WIRE_TYPES.STARTGROUP:D(Z,W);break;case Y.WIRE_TYPES.ENDGROUP:if(b9o.D9s(Z,z))return !1;throw Error("Illegal GROUPEND after unknown group: "+Z+" ("+z+" expected)");case Y.WIRE_TYPES.BITS32:W.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+z+": "+K);}return !0;}var F=function(z,W,Z){v.call(this,z,W),this.className="Service.Method",this.options=Z||{};},Q=function(z,W,Z){O.call(this,z,W,Z),this.className="Enum",this.object=null;},x={},v=function(z,W){this.parent=z,this.name=W;};v.prototype.fqn=function(){var z=function(){W=Z.name+"."+W;};for(var W=this.name,Z=this;Z=Z.parent,b9o.s9s(null,Z);)z();return W;},v.prototype.toString=function(z){return (z?this.className+" ":"")+this.fqn();},v.prototype.build=function(){throw Error(this.toString(!0)+" cannot be built directly");},x.T=v;O.prototype=Object.create(v.prototype),O.prototype.getChildren=function(z){if(z=z||null,b9o.e9s(null,z))return this.children.slice();for(var W=[],Z=0;b9o.U9s(Z,this.children.length);Z++)b9o.o5C(this.children[Z],z)&&W.push(this.children[Z]);return W;},O.prototype.addChild=function(W){var Z=function(z){K.name=z.originalName;},K;if(K=this.getChild(W.name))if(b9o.Z5C(K,V.Field)&&b9o.p5C(K.name,K.originalName)&&!this.hasChild(K.originalName))Z(K);else{var R=function(z){W.name=z.originalName;};if(!(b9o.P5C(W,V.Field)&&b9o.r5C(W.name,W.originalName))||this.hasChild(W.originalName))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+W.name);R(W);}this.children.push(W);},O.prototype.hasChild=function(z){return -1<this._indexOf(z);},O.prototype.getChild=function(z){return z=this._indexOf(z),z>-1?this.children[z]:null;},O.prototype._indexOf=function(z){for(var W="number"==typeof z?"id":"name",Z=0;b9o.S5C(Z,this.children.length);Z++)if("undefined"!=typeof this.children[Z][W]&&b9o.E5C(this.children[Z][W],z))return Z;return -1;},O.prototype.resolve=function(W,Z){var K=W.split("."),R=this,N=0;if(b9o.q5C("",K[N])){var M=function(z){R=z.parent;};for(;b9o.J5C(null,R.parent);)M(R);N++;}do {do {if(R=R.getChild(K[N]),!(R&&b9o.H5C(R,x.T))||Z&&b9o.V5C(R,x.Message.Field)){var P=function(z){R=z;};P(null);break;}N++;}while(b9o.x5C(N,K.length));if(b9o.m5C(null,R))break;if(b9o.X5C(null,this.parent))return this.parent.resolve(W,Z);}while(b9o.g5C(null,R));return R;},O.prototype.build=function(){for(var z,W={},Z=this.getChildren(),K=0;b9o.f5C(K,Z.length);K++)z=Z[K],b9o.h5C(z,O)&&(W[z.name]=z.build());return Object.defineProperty&&Object.defineProperty(W,"$options",{value:this.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),W;},O.prototype.buildOpt=function(){for(var z={},W=Object.keys(this.options),Z=0;b9o.C5C(Z,W.length);Z++)z[W[Z]]=this.options[W[Z]];return z;},O.prototype.getOption=function(z){return "undefined"==typeof z?this.options:"undefined"!=typeof this.options[z]?this.options[z]:null;},x.Namespace=O;V.prototype=Object.create(O.prototype),V.prototype.build=function(B){if(this.clazz&&!B)return this.clazz;B=function(N,M){function P(z,W){var Z,K={};for(Z in z)z.hasOwnProperty(Z)&&(b9o.W3C(null,z[Z])||"object"!=typeof z[Z]?K[Z]=z[Z]:b9o.R3C(z[Z],u)?W&&(K[Z]=z.toBuffer()):K[Z]=P(z[Z],W));return K;}var A=M.getChildren(N.Reflect.Message.Field),y=function(W){N.Builder.Message.call(this);var Z,K;for(Z=0;b9o.M3C(Z,A.length);Z++)K=A[Z],this[K.name]=K.repeated?[]:null;for(Z=0;b9o.b3C(Z,A.length);Z++)if(K=A[Z],"undefined"!=typeof K.options["default"])try{this.$set(K.name,K.options["default"]);}catch(z){throw Error("[INTERNAL] "+z);}if(b9o.i3C(1,arguments.length)||"object"!=typeof W||"function"==typeof W.encode||N.Util.isArray(W)||b9o.T3C(W,u)||b9o.B3C(W,ArrayBuffer)||N.Long&&b9o.G3C(W,N.Long))for(Z=0;b9o.O3C(Z,arguments.length);Z++)b9o.Q3C(Z,A.length)&&this.$set(A[Z].name,arguments[Z]);else for(K=Object.keys(W),Z=0;b9o.F3C(Z,K.length);Z++)this.$set(K[Z],W[K[Z]]);};y.prototype=Object.create(N.Builder.Message.prototype),y.prototype.add=function(z,W,Z){var K=M.getChild(z);if(!K)throw Error(this+"#"+z+" is undefined");if(!(b9o.a3C(K,N.Reflect.Message.Field)))throw Error(this+"#"+z+" is not a field: "+K.toString(!0));if(!K.repeated)throw Error(this+"#"+z+" is not a repeated field");b9o.v3C(null,this[K.name])&&(this[K.name]=[]),this[K.name].push(Z?W:K.verifyValue(W,!0));},y.prototype.$add=y.prototype.add,y.prototype.set=function(z,W,Z){var K=M.getChild(z);if(!K)throw Error(this+"#"+z+" is not a field: undefined");if(!(b9o.I3C(K,N.Reflect.Message.Field)))throw Error(this+"#"+z+" is not a field: "+K.toString(!0));this[K.name]=Z?W:K.verifyValue(W);},y.prototype.$set=y.prototype.set,y.prototype.get=function(z){var W=M.getChild(z);if(!(W&&b9o.d3C(W,N.Reflect.Message.Field)))throw Error(this+"#"+z+" is not a field: undefined");if(!(b9o.t3C(W,N.Reflect.Message.Field)))throw Error(this+"#"+z+" is not a field: "+W.toString(!0));return this[W.name];},y.prototype.$get=y.prototype.get;for(var E=0;b9o.L3C(E,A.length);E++)(function(W){var Z=W.originalName.replace(/(_[a-zA-Z])/g,function(z){return z.toUpperCase().replace("_","");}),Z=Z.substring(0,1).toUpperCase()+Z.substring(1),K=W.originalName.replace(/([A-Z])/g,function(z){return "_"+z;});M.hasChild("set"+Z)||(y.prototype["set"+Z]=function(z){this.$set(W.name,z);}),M.hasChild("set_"+K)||(y.prototype["set_"+K]=function(z){this.$set(W.name,z);}),M.hasChild("get"+Z)||(y.prototype["get"+Z]=function(){return this.$get(W.name);}),M.hasChild("get_"+K)||(y.prototype["get_"+K]=function(){return this.$get(W.name);});})(A[E]);return y.prototype.encode=function(W){var Z=!1;W||(W=new u,Z=!0);var K=W.littleEndian;try{return M.encode(this,W.LE()),(Z?W.flip():W).LE(K);}catch(z){throw W.LE(K),z;}},y.prototype.encodeDelimited=function(W){var Z=!1;W||(W=new u,Z=!0);try{var K=(new u).LE();return M.encode(this,K).flip(),W.writeVarint32(K.remaining()),W.append(K),Z?W.flip():W;}catch(z){throw z;}},y.prototype.encodeAB=function(){try{return this.encode().toArrayBuffer();}catch(z){throw z.encoded&&(z.encoded=z.encoded.toArrayBuffer()),z;}},y.prototype.toArrayBuffer=y.prototype.encodeAB,y.prototype.encodeNB=function(){try{return this.encode().toBuffer();}catch(z){throw z.encoded&&(z.encoded=z.encoded.toBuffer()),z;}},y.prototype.toBuffer=y.prototype.encodeNB,y.prototype.encode64=function(){try{return this.encode().toBase64();}catch(z){throw z.encoded&&(z.encoded=z.encoded.toBase64()),z;}},y.prototype.toBase64=y.prototype.encode64,y.prototype.encodeHex=function(){try{return this.encode().toHex();}catch(z){throw z.encoded&&(z.encoded=z.encoded.toHex()),z;}},y.prototype.toHex=y.prototype.encodeHex,y.prototype.toRaw=function(z){return P(this,!!z);},y.decode=function(W,Z){if(b9o.z2C(null,W))throw Error("buffer must not be null");"string"==typeof W&&(W=u.wrap(W,Z?Z:"base64")),W=b9o.K2C(W,u)?W:u.wrap(W);var K=W.littleEndian;try{var R=M.decode(W.LE());return W.LE(K),R;}catch(z){throw W.LE(K),z;}},y.decodeDelimited=function(z,W){if(b9o.N2C(null,z))throw Error("buffer must not be null");"string"==typeof z&&(z=u.wrap(z,W?W:"base64")),z=b9o.j2C(z,u)?z:u.wrap(z);var Z=z.readVarint32(),K=M.decode(z.slice(z.offset,z.offset+Z).LE());return z.offset+=Z,K;},y.decode64=function(z){return y.decode(z,"base64");},y.decodeHex=function(z){return y.decode(z,"hex");},y.prototype.toString=function(){return M.toString();},Object.defineProperty&&Object.defineProperty(y,"$options",{value:M.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),y;}(Y,this);for(var G=this.getChildren(),q=0;b9o.y2C(q,G.length);q++)if(b9o.A2C(G[q],Q))B[G[q].name]=G[q].build();else if(b9o.Y2C(G[q],V))B[G[q].name]=G[q].build();else if(!(b9o.l2C(G[q],V.Field)))throw Error("Illegal reflect child of "+this.toString(!0)+": "+G[q].toString(!0));return this.clazz=B;},V.prototype.encode=function(z,W){for(var Z=this.getChildren(V.Field),K=null,R=0;b9o.n2C(R,Z.length);R++){var N=z.$get(Z[R].name);Z[R].required&&b9o.c2C(null,N)?b9o.k2C(null,K)&&(K=Z[R]):Z[R].encode(N,W);}if(b9o.D2C(null,K))throw Z=Error("Missing at least one required field for "+this.toString(!0)+": "+K),Z.encoded=W,Z;return W;},V.prototype.decode=function(z,W,Z){var K=function(){W="number"==typeof W?W:-1;};K();for(var R,N,M=z.offset,P=new this.clazz;b9o.w2C(z.offset,M+W)||-1==W&&b9o.u2C(0,z.remaining());){if(R=z.readVarint32(),N=b9o.s2C(7,R),R>>=3,b9o.e2C(N,Y.WIRE_TYPES.ENDGROUP)){if(b9o.U2C(R,Z))throw Error("Illegal group end indicator for "+this.toString(!0)+": "+R+" ("+(Z?Z+" expected":"not a group")+")");break;}var A=this.getChild(R);if(A)A.repeated&&!A.options.packed?P.$add(A.name,A.decode(N,z),!0):P.$set(A.name,A.decode(N,z),!0);else switch(N){case Y.WIRE_TYPES.VARINT:z.readVarint32();break;case Y.WIRE_TYPES.BITS32:z.offset+=4;break;case Y.WIRE_TYPES.BITS64:z.offset+=8;break;case Y.WIRE_TYPES.LDELIM:N=z.readVarint32(),z.offset+=N;break;case Y.WIRE_TYPES.STARTGROUP:for(;D(R,z););break;default:throw Error("Illegal wire type for unknown field "+R+" in "+this.toString(!0)+"#decode: "+N);}}for(z=this.getChildren(Y.Reflect.Field),W=0;b9o.o8C(W,z.length);W++)if(z[W].required&&b9o.Z8C(null,P[z[W].name]))throw z=Error("Missing at least one required field for "+this.toString(!0)+": "+z[W].name),z.decoded=P,z;return P;},x.Message=V;w.prototype=Object.create(v.prototype),w.prototype.verifyValue=function(Z,K){var R=function(){K=K||!1;};R();var N=function(z,W){throw Error("Illegal value for "+this.toString(!0)+": "+z+" ("+W+")");}.bind(this);if(b9o.r8C(null,Z))return this.required&&N(typeof Z,"required"),null;var M;if(this.repeated&&!K){for(Y.Util.isArray(Z)||(Z=[Z]),N=[],M=0;b9o.S8C(M,Z.length);M++)N.push(this.verifyValue(Z[M],!0));return N;}switch(!this.repeated&&Y.Util.isArray(Z)&&N(typeof Z,"no array expected"),this.type){case Y.TYPES.int32:case Y.TYPES.sint32:case Y.TYPES.sfixed32:return ("number"!=typeof Z||b9o.E8C(Z,Z)&&b9o.q8C(0,Z%1))&&N(typeof Z,"not an integer"),b9o.J8C(Z,4294967295)?b9o.H8C(0,Z):Z;case Y.TYPES.uint32:case Y.TYPES.fixed32:return ("number"!=typeof Z||b9o.V8C(Z,Z)&&b9o.x8C(0,Z%1))&&N(typeof Z,"not an integer"),b9o.m8C(0,Z)?b9o.X8C(Z,0):Z;case Y.TYPES.int64:case Y.TYPES.sint64:case Y.TYPES.sfixed64:if(Y.Long)try{return H(Z,!1);}catch(z){N(typeof Z,z.message);}case Y.TYPES.uint64:case Y.TYPES.fixed64:if(Y.Long)try{return H(Z,!0);}catch(z){N(typeof Z,z.message);}case Y.TYPES.bool:return "boolean"!=typeof Z&&N(typeof Z,"not a boolean"),Z;case Y.TYPES["float"]:case Y.TYPES["double"]:return "number"!=typeof Z&&N(typeof Z,"not a number"),Z;case Y.TYPES.string:return "string"==typeof Z||Z&&b9o.g8C(Z,String)||N(typeof Z,"not a string"),""+Z;case Y.TYPES.bytes:return Z&&b9o.f8C(Z,u)?Z:u.wrap(Z);case Y.TYPES["enum"]:var P=this.resolvedType.getChildren(Q.Value);for(M=0;b9o.h8C(M,P.length);M++)if(b9o.C8C(P[M].name,Z)||b9o.W1C(P[M].id,Z))return P[M].id;N(Z,"not a valid enum value");case Y.TYPES.group:case Y.TYPES.message:return Z&&"object"==typeof Z||N(typeof Z,"object expected"),b9o.R1C(Z,this.resolvedType.clazz)?Z:new this.resolvedType.clazz(Z);}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+Z+" (undefined type "+this.type+")");},w.prototype.encode=function(W,Z){if(W=this.verifyValue(W),b9o.M1C(null,this.type)||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(b9o.b1C(null,W)||this.repeated&&b9o.i1C(0,W.length))return Z;try{if(this.repeated){var K;if(this.options.packed&&b9o.T1C(0,Y.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType))){Z.writeVarint32(b9o.B1C(this.id<<3,Y.WIRE_TYPES.LDELIM)),Z.ensureCapacity(Z.offset+=1);var R=Z.offset;for(K=0;b9o.G1C(K,W.length);K++)this.encodeValue(W[K],Z);var N=b9o.O1C(Z.offset,R),M=u.calculateVarint32(N);if(b9o.Q1C(M,1)){var P=Z.slice(R,Z.offset),R=R+(b9o.F1C(M,1));Z.offset=R,Z.append(P);}Z.writeVarint32(N,b9o.a1C(R,M));}else for(K=0;b9o.v1C(K,W.length);K++)Z.writeVarint32(b9o.I1C(this.id<<3,this.type.wireType)),this.encodeValue(W[K],Z);}else Z.writeVarint32(b9o.d1C(this.id<<3,this.type.wireType)),this.encodeValue(W,Z);}catch(z){throw Error("Illegal value for "+this.toString(!0)+": "+W+" ("+z+")");}return Z;},w.prototype.encodeValue=function(z,W){if(b9o.t1C(null,z)){switch(this.type){case Y.TYPES.int32:b9o.L1C(0,z)?W.writeVarint64(z):W.writeVarint32(z);break;case Y.TYPES.uint32:W.writeVarint32(z);break;case Y.TYPES.sint32:W.writeVarint32ZigZag(z);break;case Y.TYPES.fixed32:W.writeUint32(z);break;case Y.TYPES.sfixed32:W.writeInt32(z);break;case Y.TYPES.int64:case Y.TYPES.uint64:W.writeVarint64(z);break;case Y.TYPES.sint64:W.writeVarint64ZigZag(z);break;case Y.TYPES.fixed64:W.writeUint64(z);break;case Y.TYPES.sfixed64:W.writeInt64(z);break;case Y.TYPES.bool:W.writeVarint32("string"==typeof z?b9o.z6C("false",z.toLowerCase())?0:!!z:z?1:0);break;case Y.TYPES["enum"]:W.writeVarint32(z);break;case Y.TYPES["float"]:W.writeFloat32(z);break;case Y.TYPES["double"]:W.writeFloat64(z);break;case Y.TYPES.string:W.writeVString(z);break;case Y.TYPES.bytes:b9o.K6C(z.offset,z.length)&&(W=W.clone().flip());var Z=z.offset;W.writeVarint32(z.remaining()),W.append(z),z.offset=Z;break;case Y.TYPES.message:Z=(new u).LE(),this.resolvedType.encode(z,Z),W.writeVarint32(Z.offset),W.append(Z.flip());break;case Y.TYPES.group:this.resolvedType.encode(z,W),W.writeVarint32(b9o.N6C(this.id<<3,Y.WIRE_TYPES.ENDGROUP));break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+z+" (unknown type)");}return W;}},w.prototype.decode=function(z,W,Z){if(b9o.j6C(z,this.type.wireType)&&(Z||b9o.y6C(z,Y.WIRE_TYPES.LDELIM)||!this.repeated))throw Error("Illegal wire type for field "+this.toString(!0)+": "+z+" ("+this.type.wireType+" expected)");if(b9o.A6C(z,Y.WIRE_TYPES.LDELIM)&&this.repeated&&this.options.packed&&!Z){for(z=W.readVarint32(),z=W.offset+z,Z=[];b9o.Y6C(W.offset,z);)Z.push(this.decode(this.type.wireType,W,!0));return Z;}switch(this.type){case Y.TYPES.int32:return b9o.l6C(0,W.readVarint32());case Y.TYPES.uint32:return b9o.n6C(W.readVarint32(),0);case Y.TYPES.sint32:return b9o.c6C(0,W.readVarint32ZigZag());case Y.TYPES.fixed32:return b9o.k6C(W.readUint32(),0);case Y.TYPES.sfixed32:return b9o.D6C(0,W.readInt32());case Y.TYPES.int64:return W.readVarint64();case Y.TYPES.uint64:return W.readVarint64().toUnsigned();case Y.TYPES.sint64:return W.readVarint64ZigZag();case Y.TYPES.fixed64:return W.readUint64();case Y.TYPES.sfixed64:return W.readInt64();case Y.TYPES.bool:return !!W.readVarint32();case Y.TYPES["enum"]:return W.readVarint32();case Y.TYPES["float"]:return W.readFloat();case Y.TYPES["double"]:return W.readDouble();case Y.TYPES.string:return W.readVString();case Y.TYPES.bytes:if(z=W.readVarint32(),b9o.w6C(W.remaining(),z))throw Error("Illegal number of bytes for "+this.toString(!0)+": "+z+" required but got only "+W.remaining());return Z=W.clone(),Z.limit=Z.offset+z,W.offset+=z,Z;case Y.TYPES.message:return z=W.readVarint32(),this.resolvedType.decode(W,z);case Y.TYPES.group:return this.resolvedType.decode(W,-1,this.id);}throw Error("[INTERNAL] Illegal wire type for "+this.toString(!0)+": "+z);},x.Message.Field=w;Q.prototype=Object.create(O.prototype),Q.prototype.build=function(){var W=function(z){Z[K[R].name]=z[R].id;};for(var Z={},K=this.getChildren(Q.Value),R=0;b9o.u6C(R,K.length);R++)W(K);return Object.defineProperty&&Object.defineProperty(Z,"$options",{value:this.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),this.object=Z;},x.Enum=Q,w=function(z,W,Z){v.call(this,z,W),this.className="Enum.Value",this.id=Z;},w.prototype=Object.create(v.prototype),x.Enum.Value=w,w=function(z,W,Z){O.call(this,z,W,Z),this.className="Service",this.clazz=null;},w.prototype=Object.create(O.prototype),w.prototype.build=function(B){return this.clazz&&!B?this.clazz:this.clazz=function(M,P){var A=function(K){M.Builder.Service.call(this),this.rpcImpl=K||function(z,W,Z){setTimeout(Z.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0);};};A.prototype=Object.create(M.Builder.Service.prototype),Object.defineProperty&&(Object.defineProperty(A,"$options",{value:P.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(A.prototype,"$options",{value:A.$options,enumerable:!1,configurable:!1,writable:!1}));for(var y=P.getChildren(M.Reflect.Service.RPCMethod),E=0;b9o.s6C(E,y.length);E++)(function(N){A.prototype[N.name]=function(K,R){try{K&&b9o.e6C(K,N.resolvedRequestType.clazz)||setTimeout(R.bind(this,Error("Illegal request type provided to service method "+P.name+"#"+N.name)),0),this.rpcImpl(N.fqn(),K,function(W,Z){if(W)R(W);else{try{Z=N.resolvedResponseType.clazz.decode(Z);}catch(z){}Z&&b9o.U6C(Z,N.resolvedResponseType.clazz)?R(null,Z):R(Error("Illegal response type received in service method "+P.name+"#"+N.name));}});}catch(z){setTimeout(R.bind(this,z),0);}},A[N.name]=function(z,W,Z){new A(z)[N.name](W,Z);},Object.defineProperty&&(Object.defineProperty(A[N.name],"$options",{value:N.buildOpt(),enumerable:!1,configurable:!1,writable:!1}),Object.defineProperty(A.prototype[N.name],"$options",{value:A[N.name].$options,enumerable:!1,configurable:!1,writable:!1}));})(y[E]);return A;}(Y,this);},x.Service=w;return F.prototype=Object.create(v.prototype),F.prototype.buildOpt=O.prototype.buildOpt,x.Service.Method=F,w=function(z,W,Z,K,R){F.call(this,z,W,R),this.className="Service.RPCMethod",this.requestName=Z,this.responseName=K,this.resolvedResponseType=this.resolvedRequestType=null;},w.prototype=Object.create(F.prototype),x.Service.RPCMethod=w,x;}(J),J.Builder=function(B,G,q){var Y=function(){this.ptr=this.ns=new q.Namespace(null,""),this.resolved=!1,this.result=null,this.files={},this.importRoot=null;};return Y.prototype.reset=function(){this.ptr=this.ns;},Y.prototype.define=function(z,W){if("string"!=typeof z||!G.TYPEREF.test(z))throw Error("Illegal package name: "+z);var Z,K=z.split(".");for(Z=0;b9o.o7C(Z,K.length);Z++)if(!G.NAME.test(K[Z]))throw Error("Illegal package name: "+K[Z]);for(Z=0;b9o.Z7C(Z,K.length);Z++)this.ptr.hasChild(K[Z])||this.ptr.addChild(new q.Namespace(this.ptr,K[Z],W)),this.ptr=this.ptr.getChild(K[Z]);return this;},Y.isValidMessage=function(z){if("string"!=typeof z.name||!G.NAME.test(z.name)||"undefined"!=typeof z.values||"undefined"!=typeof z.rpc)return !1;var W;if("undefined"!=typeof z.fields){if(!B.Util.isArray(z.fields))return !1;var Z,K=[];for(W=0;b9o.p7C(W,z.fields.length);W++){if(!Y.isValidMessageField(z.fields[W]))return !1;if(Z=parseInt(z.fields[W].id,10),b9o.P7C(0,K.indexOf(Z)))return !1;K.push(Z);}}if("undefined"!=typeof z.enums){if(!B.Util.isArray(z.enums))return !1;for(W=0;b9o.r7C(W,z.enums.length);W++)if(!Y.isValidEnum(z.enums[W]))return !1;}if("undefined"!=typeof z.messages){if(!B.Util.isArray(z.messages))return !1;for(W=0;b9o.S7C(W,z.messages.length);W++)if(!Y.isValidMessage(z.messages[W])&&!Y.isValidExtend(z.messages[W]))return !1;}return "undefined"==typeof z.extensions||B.Util.isArray(z.extensions)&&b9o.E7C(2,z.extensions.length)&&"number"==typeof z.extensions[0]&&"number"==typeof z.extensions[1]?!0:!1;},Y.isValidMessageField=function(z){if("string"!=typeof z.rule||"string"!=typeof z.name||"string"!=typeof z.type||"undefined"==typeof z.id||!(G.RULE.test(z.rule)&&G.NAME.test(z.name)&&G.TYPEREF.test(z.type)&&G.ID.test(""+z.id)))return !1;if("undefined"!=typeof z.options){if("object"!=typeof z.options)return !1;for(var W,Z=Object.keys(z.options),K=0;b9o.q7C(K,Z.length);K++)if("string"!=typeof (W=Z[K])||"string"!=typeof z.options[W]&&"number"!=typeof z.options[W]&&"boolean"!=typeof z.options[W])return !1;}return !0;},Y.isValidEnum=function(z){if("string"!=typeof z.name||!G.NAME.test(z.name)||"undefined"==typeof z.values||!B.Util.isArray(z.values)||b9o.J7C(0,z.values.length))return !1;for(var W=0;b9o.H7C(W,z.values.length);W++)if("object"!=typeof z.values[W]||"string"!=typeof z.values[W].name||"undefined"==typeof z.values[W].id||!G.NAME.test(z.values[W].name)||!G.NEGID.test(""+z.values[W].id))return !1;return !0;},Y.prototype.create=function(z){if(z&&(B.Util.isArray(z)||(z=[z]),b9o.V7C(0,z.length))){var W,Z,K,R,N,M=[];for(M.push(z);b9o.x7C(0,M.length);){if(z=M.pop(),!B.Util.isArray(z))throw Error("Not a valid namespace definition: "+JSON.stringify(z));for(;b9o.m7C(0,z.length);)if(W=z.shift(),Y.isValidMessage(W)){if(Z=new q.Message(this.ptr,W.name,W.options,W.isGroup),W.fields&&b9o.X7C(0,W.fields.length))for(R=0;b9o.g7C(R,W.fields.length);R++){if(Z.hasChild(W.fields[R].id))throw Error("Duplicate field id in message "+Z.name+": "+W.fields[R].id);if(W.fields[R].options)for(K=Object.keys(W.fields[R].options),N=0;b9o.f7C(N,K.length);N++){if("string"!=typeof K[N])throw Error("Illegal field option name in message "+Z.name+"#"+W.fields[R].name+": "+K[N]);if("string"!=typeof W.fields[R].options[K[N]]&&"number"!=typeof W.fields[R].options[K[N]]&&"boolean"!=typeof W.fields[R].options[K[N]])throw Error("Illegal field option value in message "+Z.name+"#"+W.fields[R].name+"#"+K[N]+": "+W.fields[R].options[K[N]]);}Z.addChild(new q.Message.Field(Z,W.fields[R].rule,W.fields[R].type,W.fields[R].name,W.fields[R].id,W.fields[R].options));}if(K=[],"undefined"!=typeof W.enums&&b9o.h7C(0,W.enums.length))for(R=0;b9o.C7C(R,W.enums.length);R++)K.push(W.enums[R]);if(W.messages&&b9o.W0C(0,W.messages.length))for(R=0;b9o.R0C(R,W.messages.length);R++)K.push(W.messages[R]);W.extensions&&(Z.extensions=W.extensions,b9o.M0C(Z.extensions[0],B.ID_MIN)&&(Z.extensions[0]=B.ID_MIN),b9o.b0C(Z.extensions[1],B.ID_MAX)&&(Z.extensions[1]=B.ID_MAX)),this.ptr.addChild(Z),b9o.i0C(0,K.length)&&(M.push(z),z=K,this.ptr=Z);}else if(Y.isValidEnum(W)){for(Z=new q.Enum(this.ptr,W.name,W.options),R=0;b9o.T0C(R,W.values.length);R++)Z.addChild(new q.Enum.Value(Z,W.values[R].name,W.values[R].id));this.ptr.addChild(Z);}else if(Y.isValidService(W)){Z=new q.Service(this.ptr,W.name,W.options);for(R in W.rpc)W.rpc.hasOwnProperty(R)&&Z.addChild(new q.Service.RPCMethod(Z,R,W.rpc[R].request,W.rpc[R].response,W.rpc[R].options));this.ptr.addChild(Z);}else{if(!Y.isValidExtend(W))throw Error("Not a valid message, enum, service or extend definition: "+JSON.stringify(W));if(Z=this.ptr.resolve(W.ref))for(R=0;b9o.B0C(R,W.fields.length);R++){if(Z.hasChild(W.fields[R].id))throw Error("Duplicate extended field id in message "+Z.name+": "+W.fields[R].id);if(b9o.G0C(W.fields[R].id,Z.extensions[0])||b9o.O0C(W.fields[R].id,Z.extensions[1]))throw Error("Illegal extended field id in message "+Z.name+": "+W.fields[R].id+" ("+Z.extensions.join(" to ")+" expected)");Z.addChild(new q.Message.Field(Z,W.fields[R].rule,W.fields[R].type,W.fields[R].name,W.fields[R].id,W.fields[R].options));}else if(!/\.?google\.protobuf\./.test(W.ref))throw Error("Extended message "+W.ref+" is not defined");}this.ptr=this.ptr.parent;}return this.resolved=!1,this.result=null,this;}},Y.isValidImport=function(z){return !/google\/protobuf\//.test(z);},Y.prototype["import"]=function(K,R){if("string"==typeof R){if(B.Util.IS_NODE&&(R=require("path").resolve(R)),this.files[R])return this.reset(),this;this.files[R]=!0;}if(K.imports&&b9o.Q0C(0,K.imports.length)){var N,M="/",P=!1;"object"==typeof R?(this.importRoot=R.root,P=!0,N=this.importRoot,R=R.file,(b9o.F0C(0,N.indexOf("\\"))||b9o.a0C(0,R.indexOf("\\")))&&(M="\\")):"string"==typeof R?this.importRoot?N=this.importRoot:b9o.v0C(0,R.indexOf("/"))?(N=R.replace(/\/[^\/]*$/,""),b9o.I0C("",N)&&(N="/")):b9o.d0C(0,R.indexOf("\\"))?(N=R.replace(/\\[^\\]*$/,""),M="\\"):N=".":N=null;for(var A=0;b9o.t0C(A,K.imports.length);A++)if("string"==typeof K.imports[A]){if(!N)throw Error("Cannot determine import root: File name is unknown");var y=N+M+K.imports[A];if(Y.isValidImport(y)){/\.proto$/i.test(y)&&!B.DotProto&&(y=y.replace(/\.proto$/,".json"));var E=B.Util.fetch(y);if(b9o.L0C(null,E))throw Error("Failed to import '"+y+"' in '"+R+"': File not found");/\.json$/i.test(y)?this["import"](JSON.parse(E+""),y):this["import"](new B.DotProto.Parser(E+"").parse(),y);}}else R?/\.(\w+)$/.test(R)?this["import"](K.imports[A],R.replace(/^(.+)\.(\w+)$/,function(z,W,Z){return W+"_import"+A+"."+Z;})):this["import"](K.imports[A],R+"_import"+A):this["import"](K.imports[A]);P&&(this.importRoot=null);}return K.messages&&(K["package"]&&this.define(K["package"],K.options),this.create(K.messages),this.reset()),K.enums&&(K["package"]&&this.define(K["package"],K.options),this.create(K.enums),this.reset()),K.services&&(K["package"]&&this.define(K["package"],K.options),this.create(K.services),this.reset()),K["extends"]&&(K["package"]&&this.define(K["package"],K.options),this.create(K["extends"]),this.reset()),this;},Y.isValidService=function(z){return !("string"!=typeof z.name||!G.NAME.test(z.name)||"object"!=typeof z.rpc);},Y.isValidExtend=function(z){if("string"!=typeof z.ref||!G.TYPEREF.test(z.name))return !1;var W;if("undefined"!=typeof z.fields){if(!B.Util.isArray(z.fields))return !1;var Z,K=[];for(W=0;b9o.z4C(W,z.fields.length);W++){if(!Y.isValidMessageField(z.fields[W]))return !1;if(Z=parseInt(z.id,10),b9o.K4C(0,K.indexOf(Z)))return !1;K.push(Z);}}return !0;},Y.prototype.resolveAll=function(){var z;if(b9o.N4C(null,this.ptr)&&"object"!=typeof this.ptr.type){if(b9o.j4C(this.ptr,q.Namespace)){z=this.ptr.getChildren();for(var W=0;b9o.y4C(W,z.length);W++)this.ptr=z[W],this.resolveAll();}else if(b9o.A4C(this.ptr,q.Message.Field))if(G.TYPE.test(this.ptr.type))this.ptr.type=B.TYPES[this.ptr.type];else{if(!G.TYPEREF.test(this.ptr.type))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(z=this.ptr.parent.resolve(this.ptr.type,!0),!z)throw Error("Unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=z,b9o.Y4C(z,q.Enum))this.ptr.type=B.TYPES["enum"];else{if(!(b9o.l4C(z,q.Message)))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=z.isGroup?B.TYPES.group:B.TYPES.message;}}else if(!(b9o.n4C(this.ptr,B.Reflect.Enum.Value))){if(!(b9o.c4C(this.ptr,B.Reflect.Service.Method)))throw Error("Illegal object type in namespace: "+typeof this.ptr+":"+this.ptr);if(!(b9o.k4C(this.ptr,B.Reflect.Service.RPCMethod)))throw Error("Illegal service method type in "+this.ptr.toString(!0));if(z=this.ptr.parent.resolve(this.ptr.requestName),!(z&&b9o.D4C(z,B.Reflect.Message)))throw Error("Illegal request type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=z,z=this.ptr.parent.resolve(this.ptr.responseName),!(z&&b9o.w4C(z,B.Reflect.Message)))throw Error("Illegal response type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=z;}this.reset();}},Y.prototype.build=function(W){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),b9o.u4C(null,this.result)&&(this.result=this.ns.build()),W){W=W.split(".");for(var Z=this.result,K=0;b9o.s4C(K,W.length);K++){var R=function(z){Z=z[W[K]];};if(!Z[W[K]]){var N=function(z){Z=z;};N(null);break;}R(Z);}return Z;}return this.result;},Y.prototype.lookup=function(z){return z?this.ns.resolve(z):this.ns;},Y.prototype.toString=function(){return "Builder";},Y.Message=function(){},Y.Service=function(){},Y;}(J,J.Lang,J.Reflect),J.loadProto=function(z,W,Z){return ("string"==typeof W||W&&"string"==typeof W.file&&"string"==typeof W.root)&&(Z=W,W=null),J.loadJson(new J.DotProto.Parser(z+"").parse(),W,Z);},J.protoFromString=J.loadProto,J.loadProtoFile=function(W,Z,K){if(Z&&"object"==typeof Z?(K=Z,Z=null):Z&&"function"==typeof Z||(Z=null),!Z){var R=J.Util.fetch("object"==typeof W?W.root+"/"+W.file:W);return b9o.e4C(null,R)?J.protoFromString(R,K,W):null;}J.Util.fetch("object"==typeof W?W.root+"/"+W.file:W,function(z){Z(J.loadProto(z,K,W));});},J.protoFromFile=J.loadProtoFile,J.newBuilder=function(z,W){var Z=new J.Builder;return "undefined"!=typeof z&&b9o.U4C(null,z)&&Z.define(z,W),Z;},J.loadJson=function(z,W,Z){return ("string"==typeof W||W&&"string"==typeof W.file&&"string"==typeof W.root)&&(Z=W,W=null),W&&"object"==typeof W||(W=J.newBuilder()),"string"==typeof z&&(z=JSON.parse(z)),W["import"](z,Z),W.resolveAll(),W.build(),W;},J.loadJsonFile=function(Z,K,R){if(K&&"object"==typeof K?(R=K,K=null):K&&"function"==typeof K||(K=null),!K){var N=J.Util.fetch("object"==typeof Z?Z.root+"/"+Z.file:Z);return b9o.o9C(null,N)?J.loadJson(JSON.parse(N),R,Z):null;}J.Util.fetch("object"==typeof Z?Z.root+"/"+Z.file:Z,function(W){try{K(J.loadJson(JSON.parse(W),R,Z));}catch(z){K(z);}});},J;};CL.configs.ua.indexOf("msie 9.0")>-1||CL.configs.ua.indexOf("msie 8.0")>-1||CL.configs.ua.indexOf("msie 7.0")>-1||("undefined"!=typeof module&&module.exports?module.exports=I(require("bytebuffer")):"function"==typeof define&&define.amd?define("ProtoBuf",["ByteBuffer"],I):(L.dcodeIO||(L.dcodeIO={}),L.dcodeIO.ProtoBuf=I(L.dcodeIO.ByteBuffer)));}(this);var CryptoJS=CryptoJS||function(P,A){var y={},E=y.lib={},B=function(){},G=E.Base={extend:function(z){B.prototype=this;var W=new B;return z&&W.mixIn(z),W.hasOwnProperty("init")||(W.init=function(){W.$super.init.apply(this,arguments);}),W.init.prototype=W,W.$super=this,W;},create:function(){var z=this.extend();return z.init.apply(z,arguments),z;},init:function(){},mixIn:function(z){for(var W in z)z.hasOwnProperty(W)&&(this[W]=z[W]);z.hasOwnProperty("toString")&&(this.toString=z.toString);},clone:function(){return this.init.prototype.extend(this);}},q=E.WordArray=G.extend({init:function(z,W){z=this.words=z||[],this.sigBytes=b9o.Z9C(W,A)?W:b9o.p9C(4,z.length);},toString:function(z){return (z||O).stringify(this);},concat:function(W){var Z=function(z){K[b9o.P9C(N+M,2)]=z[b9o.r9C(M,2)];},K=this.words,R=W.words,N=this.sigBytes;if(W=W.sigBytes,this.clamp(),b9o.S9C(N,4))for(var M=0;b9o.E9C(W,M);M++)K[b9o.q9C(N+M,2)]|=b9o.J9C((R[M>>>2]>>>24-8*(M%4)&255),24-8*((N+M)%4));else if(b9o.H9C(65535,R.length))for(M=0;b9o.V9C(W,M);M+=4)Z(R);else K.push.apply(K,R);return this.sigBytes+=W,this;},clamp:function(){var z=this.words,W=this.sigBytes;z[b9o.x9C(W,2)]&=b9o.m9C(4294967295,32-8*(W%4)),z.length=P.ceil(b9o.X9C(W,4));},clone:function(){var z=G.clone.call(this);return z.words=this.words.slice(0),z;},random:function(z){for(var W=[],Z=0;b9o.g9C(z,Z);Z+=4)W.push(b9o.f9C(4294967296*P.random(),0));return new q.init(W,z);}}),Y=y.enc={},O=Y.Hex={stringify:function(W){var Z=function(z){W=z.sigBytes;},K=W.words;Z(W);for(var R=[],N=0;b9o.h9C(W,N);N++){var M=b9o.C9C(K[N>>>2]>>>24-8*(N%4),255);R.push((b9o.W5p(M,4)).toString(16)),R.push((b9o.R5p(15,M)).toString(16));}return R.join("");},parse:function(z){for(var W=z.length,Z=[],K=0;b9o.M5p(W,K);K+=2)Z[b9o.b5p(K,3)]|=b9o.i5p(parseInt(z.substr(K,2),16),24-4*(K%8));return new q.init(Z,b9o.T5p(W,2));}},V=Y.Latin1={stringify:function(W){var Z=function(z){W=z.sigBytes;},K=W.words;Z(W);for(var R=[],N=0;b9o.B5p(W,N);N++)R.push(String.fromCharCode(b9o.G5p(K[N>>>2]>>>24-8*(N%4),255)));return R.join("");},parse:function(z){for(var W=z.length,Z=[],K=0;b9o.O5p(W,K);K++)Z[b9o.Q5p(K,2)]|=b9o.F5p((255&z.charCodeAt(K)),24-8*(K%4));return new q.init(Z,W);}},w=Y.Utf8={stringify:function(W){try{return decodeURIComponent(escape(V.stringify(W)));}catch(z){throw Error("Malformed UTF-8 data");}},parse:function(z){return V.parse(unescape(encodeURIComponent(z)));}},H=E.BufferedBlockAlgorithm=G.extend({reset:function(){this._data=new q.init,this._nDataBytes=0;},_append:function(z){"string"==typeof z&&(z=w.parse(z)),this._data.concat(z),this._nDataBytes+=z.sigBytes;},_process:function(z){var W=this._data,Z=W.words,K=W.sigBytes,R=this.blockSize,N=b9o.a5p(K,(4*R)),N=z?P.ceil(N):P.max(b9o.v5p((0|N),this._minBufferSize),0);if(z=b9o.I5p(N,R),K=P.min(b9o.d5p(4,z),K),z){for(var M=0;b9o.t5p(z,M);M+=R)this._doProcessBlock(Z,M);M=Z.splice(0,z),W.sigBytes-=K;}return new q.init(M,K);},clone:function(){var z=G.clone.call(this);return z._data=this._data.clone(),z;},_minBufferSize:0});E.Hasher=H.extend({cfg:G.extend(),init:function(z){this.cfg=this.cfg.extend(z),this.reset();},reset:function(){H.reset.call(this),this._doReset();},update:function(z){return this._append(z),this._process(),this;},finalize:function(z){return z&&this._append(z),this._doFinalize();},blockSize:16,_createHelper:function(Z){return function(z,W){return new Z.init(W).finalize(z);};},_createHmacHelper:function(Z){return function(z,W){return new D.HMAC.init(Z,W).finalize(z);};}});var D=y.algo={};return y;}(Math);!function(){var A=CryptoJS,y=A.lib.WordArray;A.enc.Base64={stringify:function(z){var W=z.words,Z=z.sigBytes,K=this._map;z.clamp(),z=[];for(var R=0;b9o.L5p(Z,R);R+=3)for(var N=b9o.z3p((W[R>>>2]>>>24-8*(R%4)&255)<<16,(W[R+1>>>2]>>>24-8*((R+1)%4)&255)<<8,W[R+2>>>2]>>>24-8*((R+2)%4)&255),M=0;b9o.R3p(4,M)&&b9o.M3p(Z,R+.75*M);M++)z.push(K.charAt(b9o.b3p(N>>>6*(3-M),63)));if(W=K.charAt(64))for(;b9o.i3p(z.length,4);)z.push(W);return z.join("");},parse:function(z){var W=z.length,Z=this._map,K=Z.charAt(64);K&&(K=z.indexOf(K),-1!=K&&(W=K));for(var K=[],R=0,N=0;b9o.T3p(W,N);N++)if(b9o.B3p(N,4)){var M=b9o.G3p(Z.indexOf(z.charAt(N-1)),2*(N%4)),P=b9o.O3p(Z.indexOf(z.charAt(N)),6-2*(N%4));K[b9o.Q3p(R,2)]|=b9o.F3p((M|P),24-8*(R%4)),R++;}return y.create(K,R);},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};}(),function(u){function J(z,W,Z,K,R,N,M){return z=z+(b9o.v3p(W,Z)|~W&K)+R+M,(b9o.I3p(z<<N,z>>>32-N))+W;}var L=function(){U[Z5]=b9o.a3p(4294967296*u.abs(u.sin(Z5+1)),0);};function I(z,W,Z,K,R,N,M){return z=z+(b9o.d3p(W,K)|Z&~K)+R+M,(b9o.t3p(z<<N,z>>>32-N))+W;}function X(z,W,Z,K,R,N,M){return z=z+(Z^(W|~K))+R+M,(b9o.R2p(z<<N,z>>>32-N))+W;}function z5(z,W,Z,K,R,N,M){return z=z+(b9o.L3p(W,Z,K))+R+M,(b9o.W2p(z<<N,z>>>32-N))+W;}for(var o5=CryptoJS,W5=o5.lib,C=W5.WordArray,K5=W5.Hasher,W5=o5.algo,U=[],Z5=0;b9o.M2p(64,Z5);Z5++)L();W5=W5.MD5=K5.extend({_doReset:function(){this._hash=new C.init([1732584193,4023233417,2562383102,271733878]);},_doProcessBlock:function(z,W){for(var Z=0;b9o.b2p(16,Z);Z++){var K=function(){z[R]=b9o.i2p(16711935&(N<<8|N>>>24),4278255360&(N<<24|N>>>8));};var R=W+Z,N=z[R];K();}var Z=this._hash.words,R=z[W+0],N=z[W+1],M=z[W+2],P=z[W+3],A=z[W+4],y=z[W+5],E=z[W+6],B=z[W+7],G=z[W+8],q=z[W+9],Y=z[W+10],O=z[W+11],V=z[W+12],w=z[W+13],H=z[W+14],D=z[W+15],F=Z[0],Q=Z[1],x=Z[2],v=Z[3],F=J(F,Q,x,v,R,7,U[0]),v=J(v,F,Q,x,N,12,U[1]),x=J(x,v,F,Q,M,17,U[2]),Q=J(Q,x,v,F,P,22,U[3]),F=J(F,Q,x,v,A,7,U[4]),v=J(v,F,Q,x,y,12,U[5]),x=J(x,v,F,Q,E,17,U[6]),Q=J(Q,x,v,F,B,22,U[7]),F=J(F,Q,x,v,G,7,U[8]),v=J(v,F,Q,x,q,12,U[9]),x=J(x,v,F,Q,Y,17,U[10]),Q=J(Q,x,v,F,O,22,U[11]),F=J(F,Q,x,v,V,7,U[12]),v=J(v,F,Q,x,w,12,U[13]),x=J(x,v,F,Q,H,17,U[14]),Q=J(Q,x,v,F,D,22,U[15]),F=I(F,Q,x,v,N,5,U[16]),v=I(v,F,Q,x,E,9,U[17]),x=I(x,v,F,Q,O,14,U[18]),Q=I(Q,x,v,F,R,20,U[19]),F=I(F,Q,x,v,y,5,U[20]),v=I(v,F,Q,x,Y,9,U[21]),x=I(x,v,F,Q,D,14,U[22]),Q=I(Q,x,v,F,A,20,U[23]),F=I(F,Q,x,v,q,5,U[24]),v=I(v,F,Q,x,H,9,U[25]),x=I(x,v,F,Q,P,14,U[26]),Q=I(Q,x,v,F,G,20,U[27]),F=I(F,Q,x,v,w,5,U[28]),v=I(v,F,Q,x,M,9,U[29]),x=I(x,v,F,Q,B,14,U[30]),Q=I(Q,x,v,F,V,20,U[31]),F=z5(F,Q,x,v,y,4,U[32]),v=z5(v,F,Q,x,G,11,U[33]),x=z5(x,v,F,Q,O,16,U[34]),Q=z5(Q,x,v,F,H,23,U[35]),F=z5(F,Q,x,v,N,4,U[36]),v=z5(v,F,Q,x,A,11,U[37]),x=z5(x,v,F,Q,B,16,U[38]),Q=z5(Q,x,v,F,Y,23,U[39]),F=z5(F,Q,x,v,w,4,U[40]),v=z5(v,F,Q,x,R,11,U[41]),x=z5(x,v,F,Q,P,16,U[42]),Q=z5(Q,x,v,F,E,23,U[43]),F=z5(F,Q,x,v,q,4,U[44]),v=z5(v,F,Q,x,V,11,U[45]),x=z5(x,v,F,Q,D,16,U[46]),Q=z5(Q,x,v,F,M,23,U[47]),F=X(F,Q,x,v,R,6,U[48]),v=X(v,F,Q,x,B,10,U[49]),x=X(x,v,F,Q,H,15,U[50]),Q=X(Q,x,v,F,y,21,U[51]),F=X(F,Q,x,v,V,6,U[52]),v=X(v,F,Q,x,P,10,U[53]),x=X(x,v,F,Q,Y,15,U[54]),Q=X(Q,x,v,F,N,21,U[55]),F=X(F,Q,x,v,G,6,U[56]),v=X(v,F,Q,x,D,10,U[57]),x=X(x,v,F,Q,E,15,U[58]),Q=X(Q,x,v,F,w,21,U[59]),F=X(F,Q,x,v,A,6,U[60]),v=X(v,F,Q,x,O,10,U[61]),x=X(x,v,F,Q,M,15,U[62]),Q=X(Q,x,v,F,q,21,U[63]);Z[0]=b9o.T2p(Z[0]+F,0),Z[1]=b9o.B2p(Z[1]+Q,0),Z[2]=b9o.G2p(Z[2]+x,0),Z[3]=b9o.O2p(Z[3]+v,0);},_doFinalize:function(){var z=this._data,W=z.words,Z=b9o.Q2p(8,this._nDataBytes),K=b9o.F2p(8,z.sigBytes);W[b9o.a2p(K,5)]|=b9o.v2p(128,24-K%32);var R=u.floor(b9o.I2p(Z,4294967296));for(W[(b9o.d2p(K+64,9,4))+15]=b9o.h2p(16711935&(R<<8|R>>>24),4278255360&(R<<24|R>>>8)),W[(b9o.C2p(K+64,9,4))+14]=b9o.Z8p(16711935&(Z<<8|Z>>>24),4278255360&(Z<<24|Z>>>8)),z.sigBytes=b9o.p8p(4,(W.length+1)),this._process(),z=this._hash,W=z.words,Z=0;b9o.P8p(4,Z);Z++)K=W[Z],W[Z]=b9o.r8p(16711935&(K<<8|K>>>24),4278255360&(K<<24|K>>>8));return z;},clone:function(){var z=K5.clone.call(this);return z._hash=this._hash.clone(),z;}}),o5.MD5=K5._createHelper(W5),o5.HmacMD5=K5._createHmacHelper(W5);}(Math),function(){var y=CryptoJS,E=y.lib,B=E.Base,G=E.WordArray,E=y.algo,q=E.EvpKDF=B.extend({cfg:B.extend({keySize:4,hasher:E.MD5,iterations:1}),init:function(z){this.cfg=this.cfg.extend(z);},compute:function(z,W){for(var Z=this.cfg,K=Z.hasher.create(),R=G.create(),N=R.words,M=Z.keySize,Z=Z.iterations;b9o.S8p(N.length,M);){P&&K.update(P);var P=K.update(z).finalize(W);K.reset();for(var A=1;b9o.E8p(Z,A);A++)P=K.finalize(P),K.reset();R.concat(P);}return R.sigBytes=b9o.q8p(4,M),R;}});y.EvpKDF=function(z,W,Z){return q.create(Z).compute(z,W);};}(),CryptoJS.lib.Cipher||function(M){var P=CryptoJS,A=P.lib,y=A.Base,E=A.WordArray,B=A.BufferedBlockAlgorithm,G=P.enc.Base64,q=P.algo.EvpKDF,Y=A.Cipher=B.extend({cfg:y.extend(),createEncryptor:function(z,W){return this.create(this._ENC_XFORM_MODE,z,W);},createDecryptor:function(z,W){return this.create(this._DEC_XFORM_MODE,z,W);},init:function(z,W,Z){this.cfg=this.cfg.extend(Z),this._xformMode=z,this._key=W,this.reset();},reset:function(){B.reset.call(this),this._doReset();},process:function(z){return this._append(z),this._process();},finalize:function(z){return z&&this._append(z),this._doFinalize();},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(K){return {encrypt:function(z,W,Z){return ("string"==typeof W?F:D).encrypt(K,z,W,Z);},decrypt:function(z,W,Z){return ("string"==typeof W?F:D).decrypt(K,z,W,Z);}};}});A.StreamCipher=Y.extend({_doFinalize:function(){return this._process(!0);},blockSize:1});var O=P.mode={},V=function(z,W,Z){var K=this._iv;K?this._iv=M:K=this._prevBlock;for(var R=0;b9o.J8p(Z,R);R++)z[W+R]^=K[R];},w=(A.BlockCipherMode=y.extend({createEncryptor:function(z,W){return this.Encryptor.create(z,W);},createDecryptor:function(z,W){return this.Decryptor.create(z,W);},init:function(z,W){this._cipher=z,this._iv=W;}})).extend();w.Encryptor=w.extend({processBlock:function(z,W){var Z=this._cipher,K=Z.blockSize;V.call(this,z,W,K),Z.encryptBlock(z,W),this._prevBlock=z.slice(W,W+K);}}),w.Decryptor=w.extend({processBlock:function(z,W){var Z=this._cipher,K=Z.blockSize,R=z.slice(W,W+K);Z.decryptBlock(z,W),V.call(this,z,W,K),this._prevBlock=R;}}),O=O.CBC=w,w=(P.pad={}).Pkcs7={pad:function(z,W){for(var Z=b9o.H8p(4,W),Z=b9o.V8p(Z,z.sigBytes%Z),K=b9o.x8p(Z<<24,Z<<16,Z<<8,Z),R=[],N=0;b9o.v8p(Z,N);N+=4)R.push(K);Z=E.create(R,Z),z.concat(Z);},unpad:function(z){z.sigBytes-=b9o.I8p(255,z.words[z.sigBytes-1>>>2]);}},A.BlockCipher=Y.extend({cfg:Y.cfg.extend({mode:O,padding:w}),reset:function(){Y.reset.call(this);var z=this.cfg,W=z.iv,z=z.mode;if(b9o.d8p(this._xformMode,this._ENC_XFORM_MODE))var Z=z.createEncryptor;else Z=z.createDecryptor,this._minBufferSize=1;this._mode=Z.call(z,this,W&&W.words);},_doProcessBlock:function(z,W){this._mode.processBlock(z,W);},_doFinalize:function(){var z=this.cfg.padding;if(b9o.t8p(this._xformMode,this._ENC_XFORM_MODE)){z.pad(this._data,this.blockSize);var W=this._process(!0);}else W=this._process(!0),z.unpad(W);return W;},blockSize:4});var H=A.CipherParams=y.extend({init:function(z){this.mixIn(z);},toString:function(z){return (z||this.formatter).stringify(this);}}),O=(P.format={}).OpenSSL={stringify:function(z){var W=z.ciphertext;return z=z.salt,(z?E.create([1398893684,1701076831]).concat(z).concat(W):W).toString(G);},parse:function(z){z=G.parse(z);var W=z.words;if(b9o.L8p(1398893684,W[0])&&b9o.z1p(1701076831,W[1])){var Z=E.create(W.slice(2,4));W.splice(0,4),z.sigBytes-=16;}return H.create({ciphertext:z,salt:Z});}},D=A.SerializableCipher=y.extend({cfg:y.extend({format:O}),encrypt:function(z,W,Z,K){K=this.cfg.extend(K);var R=z.createEncryptor(Z,K);return W=R.finalize(W),R=R.cfg,H.create({ciphertext:W,key:Z,iv:R.iv,algorithm:z,mode:R.mode,padding:R.padding,blockSize:z.blockSize,formatter:K.format});},decrypt:function(z,W,Z,K){return K=this.cfg.extend(K),W=this._parse(W,K.format),z.createDecryptor(Z,K).finalize(W.ciphertext);},_parse:function(z,W){return "string"==typeof z?W.parse(z,this):z;}}),P=(P.kdf={}).OpenSSL={execute:function(z,W,Z,K){return K||(K=E.random(8)),z=q.create({keySize:W+Z}).compute(z,K),Z=E.create(z.words.slice(W),b9o.K1p(4,Z)),z.sigBytes=b9o.N1p(4,W),H.create({key:z,iv:Z,salt:K});}},F=A.PasswordBasedCipher=D.extend({cfg:D.cfg.extend({kdf:P}),encrypt:function(z,W,Z,K){return K=this.cfg.extend(K),Z=K.kdf.execute(Z,z.keySize,z.ivSize),K.iv=Z.iv,z=D.encrypt.call(this,z,W,Z.key,K),z.mixIn(Z),z;},decrypt:function(z,W,Z,K){return K=this.cfg.extend(K),W=this._parse(W,K.format),Z=K.kdf.execute(Z,z.keySize,z.ivSize,W.salt),K.iv=Z.iv,D.decrypt.call(this,z,W,Z.key,K);}});}(),function(){var H=function(){C[K5]=b9o.j1p(128,K5)?b9o.y1p(K5,1):b9o.A1p(K5<<1,283);};for(var D=CryptoJS,F=D.lib.BlockCipher,Q=D.algo,x=[],v=[],u=[],J=[],L=[],I=[],X=[],z5=[],o5=[],W5=[],C=[],K5=0;b9o.Y1p(256,K5);K5++)H();for(var U=0,Z5=0,K5=0;b9o.l1p(256,K5);K5++){var p5=b9o.n1p(Z5,Z5<<1,Z5<<2,Z5<<3,Z5<<4),p5=b9o.k1p(p5>>>8,255&p5,99);x[U]=p5,v[p5]=U;var N5=C[U],R5=C[N5],b5=C[R5],j5=b9o.a1p(257*C[p5],16843008*p5);u[U]=b9o.v1p(j5<<24,j5>>>8),J[U]=b9o.I1p(j5<<16,j5>>>16),L[U]=b9o.d1p(j5<<8,j5>>>24),I[U]=j5,j5=b9o.t1p(16843009*b5,65537*R5,257*N5,16843008*U),X[p5]=b9o.o6p(j5<<24,j5>>>8),z5[p5]=b9o.Z6p(j5<<16,j5>>>16),o5[p5]=b9o.p6p(j5<<8,j5>>>24),W5[p5]=j5,U?(U=b9o.P6p(N5,C[C[C[b5^N5]]]),Z5^=C[C[Z5]]):U=Z5=1;}var T5=[0,1,2,4,8,16,32,64,128,27,54],Q=Q.AES=F.extend({_doReset:function(){var W=function(z){N[M]=z[M];};for(var Z=this._key,K=Z.words,R=b9o.r6p(Z.sigBytes,4),Z=b9o.S6p(4,((this._nRounds=R+6)+1)),N=this._keySchedule=[],M=0;b9o.E6p(Z,M);M++)if(b9o.q6p(R,M))W(K);else{var P=N[b9o.J6p(M,1)];b9o.H6p(M,R)?b9o.V6p(R,6)&&b9o.x6p(4,M%R)&&(P=b9o.m6p(x[P>>>24]<<24,x[P>>>16&255]<<16,x[P>>>8&255]<<8,x[255&P])):(P=b9o.I6p(P<<8,P>>>24),P=b9o.d6p(x[P>>>24]<<24,x[P>>>16&255]<<16,x[P>>>8&255]<<8,x[255&P]),P^=b9o.U6p(T5[M/R|0],24)),N[M]=b9o.o7p(N[M-R],P);}for(K=this._invKeySchedule=[],R=0;b9o.Z7p(Z,R);R++)M=b9o.p7p(Z,R),P=b9o.P7p(R,4)?N[M]:N[b9o.r7p(M,4)],K[R]=b9o.S7p(4,R)||b9o.E7p(4,M)?P:b9o.q7p(X[x[P>>>24]],z5[x[P>>>16&255]],o5[x[P>>>8&255]],W5[x[255&P]]);},encryptBlock:function(z,W){this._doCryptBlock(z,W,this._keySchedule,u,J,L,I,x);},decryptBlock:function(z,W){var Z=z[W+1];z[W+1]=z[W+3],z[W+3]=Z,this._doCryptBlock(z,W,this._invKeySchedule,X,z5,o5,W5,v),Z=z[W+1],z[W+1]=z[W+3],z[W+3]=Z;},_doCryptBlock:function(z,W,Z,K,R,N,M,P){for(var A=this._nRounds,y=b9o.O7p(z[W],Z[0]),E=b9o.Q7p(z[W+1],Z[1]),B=b9o.F7p(z[W+2],Z[2]),G=b9o.a7p(z[W+3],Z[3]),q=4,Y=1;b9o.v7p(A,Y);Y++)var O=b9o.I7p(K[y>>>24],R[E>>>16&255],N[B>>>8&255],M[255&G],Z[q++]),V=b9o.t7p(K[E>>>24],R[B>>>16&255],N[G>>>8&255],M[255&y],Z[q++]),w=b9o.z0p(K[B>>>24],R[G>>>16&255],N[y>>>8&255],M[255&E],Z[q++]),G=b9o.N0p(K[G>>>24],R[y>>>16&255],N[E>>>8&255],M[255&B],Z[q++]),y=O,E=V,B=w;O=b9o.y0p((P[y>>>24]<<24|P[E>>>16&255]<<16|P[B>>>8&255]<<8|P[255&G]),Z[q++]),V=b9o.A0p((P[E>>>24]<<24|P[B>>>16&255]<<16|P[G>>>8&255]<<8|P[255&y]),Z[q++]),w=b9o.Y0p((P[B>>>24]<<24|P[G>>>16&255]<<16|P[y>>>8&255]<<8|P[255&E]),Z[q++]),G=b9o.l0p((P[G>>>24]<<24|P[y>>>16&255]<<16|P[E>>>8&255]<<8|P[255&B]),Z[q++]),z[W]=O,z[W+1]=V,z[W+2]=w,z[W+3]=G;},keySize:8});D.AES=F._createHelper(Q);}();var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(!function(q){function Y(W){function Z(z){return lookup.charAt(z);}function K(z){return Z(b9o.M9p(z>>18,63))+Z(b9o.b9p(z>>12,63))+Z(b9o.i9p(z>>6,63))+Z(b9o.T9p(63,z));}var R,N,M,P=b9o.B9p(W.length,3),A="";for(R=0,M=b9o.G9p(W.length,P);b9o.O9p(M,R);R+=3)N=(b9o.Q9p(W[R],16))+(b9o.F9p(W[R+1],8))+W[R+2],A+=K(N);switch(P){case 1:N=W[b9o.a9p(W.length,1)],A+=Z(b9o.v9p(N,2)),A+=Z(b9o.I9p(N<<4,63)),A+="==";break;case 2:N=(b9o.d9p(W[W.length-2],8))+W[b9o.t9p(W.length,1)],A+=Z(b9o.L9p(N,10)),A+=Z(b9o.z5Z(N>>4,63)),A+=Z(b9o.K5Z(N<<2,63)),A+="=";}return A;}function O(K){function R(W){var Z=function(z){E[G++]=z;};Z(W);}var N,M,P,A,y,E;if(b9o.Z4p(K.length%4,0))throw  new Error("Invalid string. Length must be a multiple of 4");var B=K.length;y=b9o.p4p("=",K.charAt(B-2))?2:b9o.P4p("=",K.charAt(B-1))?1:0,E=new w(b9o.r4p(3*K.length/4,y)),P=b9o.S4p(y,0)?b9o.E4p(K.length,4):K.length;var G=0;for(N=0,M=0;b9o.q4p(P,N);N+=4,M+=3)A=b9o.J4p(V(K.charAt(N))<<18,V(K.charAt(N+1))<<12,V(K.charAt(N+2))<<6,V(K.charAt(N+3))),R(b9o.Q4p((16711680&A),16)),R(b9o.F4p((65280&A),8)),R(b9o.a4p(255,A));return b9o.v4p(2,y)?(A=b9o.I4p(V(K.charAt(N))<<2,V(K.charAt(N+1))>>4),R(b9o.d4p(255,A))):b9o.t4p(1,y)&&(A=b9o.L4p(V(K.charAt(N))<<10,V(K.charAt(N+1))<<4,V(K.charAt(N+2))>>2),R(b9o.W9p(A>>8,255)),R(b9o.R9p(255,A))),E;}function V(z){var W=z.charCodeAt(0);return b9o.n0p(W,H)?62:b9o.c0p(W,D)?63:b9o.k0p(F,W)?-1:b9o.D0p(F+10,W)?b9o.w0p(W,F,26,26):b9o.g0p(x+26,W)?b9o.f0p(W,x):b9o.h0p(Q+26,W)?b9o.C0p(W,Q,26):void 0;}"use strict";var w="undefined"!=typeof Uint8Array?Uint8Array:Array,H="+".charCodeAt(0),D="/".charCodeAt(0),F="0".charCodeAt(0),Q="a".charCodeAt(0),x="A".charCodeAt(0);q.toByteArray=O,q.fromByteArray=Y;}("undefined"==typeof exports?this.base64js={}:exports),function(u){function J(z,W,Z){var K=z.constructor,R=b9o.y5Z(W,(z=new K(z)).e),N=z.c;for(N.length>++W&&I(z,R,K.RM),N[0]?Z?R=W:(N=z.c,R=z.e+R+1):++R;b9o.A5Z(N.length,R);N.push(0));return R=z.e,b9o.Y5Z(1,Z)||Z&&(b9o.l5Z(R,W)||b9o.n5Z(Z5,R))?(b9o.c5Z(z.s,0)&&N[0]?"-":"")+(b9o.k5Z(N.length,1)?N[0]+"."+N.join("").slice(1):N[0])+(b9o.D5Z(0,R)?"e":"e+")+R:z.toString();}function L(){function Z(z){var W=this;return b9o.N5Z(W,Z)?(b9o.j5Z(z,Z)?(W.s=z.s,W.e=z.e,W.c=z.c.slice()):z5(W,z),void (W.constructor=Z)):void 0===z?L():new Z(z);}return Z.prototype=N5,Z.DP=W5,Z.RM=C,Z;}function I(z,W,Z,K){var R,N=z.c,M=z.e+W+1;if(b9o.Y3Z(1,Z)?K=b9o.l3Z(N[M],5):b9o.n3Z(2,Z)?K=b9o.c3Z(N[M],5)||b9o.k3Z(5,N[M])&&(K||b9o.D3Z(0,M)||b9o.w3Z(N[M+1],R)||b9o.u3Z(1,N[M-1])):b9o.s3Z(3,Z)?K=K||b9o.e3Z(N[M],R)||b9o.U3Z(0,M):(K=!1,b9o.o2Z(0,Z)&&X("!Big.RM!")),b9o.Z2Z(1,M)||!N[0])K?(z.e=-W,z.c=[1]):z.c=[z.e=0];else{if(N.length=M--,K)for(;++N[M]>9;)N[M]=0,M--||(++z.e,N.unshift(1));for(M=N.length;!N[--M];N.pop());}return z;}function X(z){var W=new Error(z);throw W.name="BigError",W;}function z5(z,W){var Z=function(){z.c=[z.e=0];},K,R,N;for(b9o.w5Z(0,W)&&b9o.u5Z(0,1/W)?W="-0":R5.test(W+="")||X(b9o.s5Z(0,0)),z.s=b9o.e5Z("-",W.charAt(0))?(W=W.slice(1),-1):1,(K=W.indexOf("."))>-1&&(W=W.replace(".","")),b9o.U5Z((R=W.search(/e/i)),0)?(b9o.o3Z(0,K)&&(K=R),K+=+W.slice(R+1),W=W.substring(0,R)):b9o.Z3Z(0,K)&&(K=W.length),R=0;b9o.p3Z("0",W.charAt(R));R++);if(b9o.P3Z(R,(N=W.length)))Z();else{for(;"0"==W.charAt(--N););for(z.e=b9o.r3Z(K,R,1),z.c=[],K=0;b9o.A3Z(N,R);z.c[K++]=+W.charAt(R++));}return z;}"use strict";var o5,W5=20,C=1,K5=1e6,U=1e6,Z5=-7,p5=21,N5={},R5=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;N5.abs=function(){var z=new this.constructor(this);return z.s=1,z;},N5.cmp=function(z){var W,Z=this,K=Z.c,R=(z=new Z.constructor(z)).c,N=Z.s,M=z.s,P=Z.e,A=z.e;if(!K[0]||!R[0])return K[0]?N:R[0]?-M:0;if(b9o.p2Z(N,M))return N;if(W=b9o.P2Z(0,N),b9o.r2Z(P,A))return b9o.S2Z(P>A,W)?1:-1;for(N=-1,M=b9o.E2Z((P=K.length),(A=R.length))?P:A;++N<M;)if(b9o.q2Z(K[N],R[N]))return b9o.J2Z(K[N]>R[N],W)?1:-1;return b9o.H2Z(P,A)?0:b9o.V2Z(P>A,W)?1:-1;},N5.div=function(z){var W=this,Z=W.constructor,K=W.c,R=(z=new Z(z)).c,N=b9o.x2Z(W.s,z.s)?1:-1,M=Z.DP;if((M!==~~M||b9o.m2Z(0,M)||b9o.X2Z(M,K5))&&X("!Big.DP!"),!K[0]||!R[0])return b9o.g2Z(K[0],R[0])&&X(b9o.f2Z(0,0)),R[0]||X(b9o.h2Z(N,0)),new Z(b9o.C2Z(0,N));var P,A,y,E,B,G,q=R.slice(),Y=P=R.length,O=K.length,V=K.slice(0,P),w=V.length,H=z,D=H.c=[],F=0,Q=M+(H.e=b9o.W8Z(W.e,z.e))+1;for(H.s=N,N=b9o.R8Z(0,Q)?0:Q,q.unshift(0);b9o.M8Z(w++,P);V.push(0));do {for(y=0;b9o.b8Z(10,y);y++){var x=function(){E=b9o.i8Z(P,w)?1:-1;};if(b9o.T8Z(P,(w=V.length)))x();else for(B=-1,E=0;++B<P;)if(b9o.B8Z(R[B],V[B])){var v=function(){E=b9o.G8Z(R[B],V[B])?1:-1;};v();break;}if(!(b9o.O8Z(0,E)))break;for(A=b9o.Q8Z(w,P)?R:q;w;){if(V[--w]<A[w]){for(B=w;B&&!V[--B];V[B]=9);--V[B],V[w]+=10;}V[w]-=A[w];}for(;!V[0];V.shift());}D[F++]=E?y:++y,V[0]&&E?V[w]=K[Y]||0:V=[K[Y]];}while((b9o.F8Z(Y++,O)||b9o.a8Z(V[0],G))&&N--);return D[0]||b9o.v8Z(1,F)||(D.shift(),H.e--),b9o.I8Z(F,Q)&&I(H,M,Z.RM,b9o.d8Z(V[0],G)),H;},N5.eq=function(z){return !this.cmp(z);},N5.gt=function(z){return b9o.t8Z(this.cmp(z),0);},N5.gte=function(z){return this.cmp(z)>-1;},N5.lt=function(z){return b9o.L8Z(this.cmp(z),0);},N5.lte=function(z){return b9o.z1Z(this.cmp(z),1);},N5.sub=N5.minus=function(z){var W,Z,K,R,N=this,M=N.constructor,P=N.s,A=(z=new M(z)).s;if(b9o.K1Z(P,A))return z.s=-A,N.plus(z);var y=N.c.slice(),E=N.e,B=z.c,G=z.e;if(!y[0]||!B[0])return B[0]?(z.s=-A,z):new M(y[0]?N:0);if(P=b9o.N1Z(E,G)){for((R=b9o.j1Z(0,P))?(P=-P,K=y):(G=E,K=B),K.reverse(),A=P;A--;K.push(0));K.reverse();}else for(Z=((R=b9o.y1Z(y.length,B.length))?y:B).length,P=A=0;b9o.A1Z(Z,A);A++)if(b9o.Y1Z(y[A],B[A])){var q=function(){R=b9o.l1Z(y[A],B[A]);};q();break;}if(R&&(K=y,y=B,B=K,z.s=-z.s),b9o.n1Z((A=(Z=B.length)-(W=y.length)),0))for(;A--;y[W++]=0);for(A=W;b9o.c1Z(Z,P);){if(y[--Z]<B[Z]){for(W=Z;W&&!y[--W];y[W]=9);--y[W],y[Z]+=10;}y[Z]-=B[Z];}for(;0===y[--A];y.pop());for(;b9o.k1Z(0,y[0]);)y.shift(),--G;return y[0]||(z.s=1,y=[G=0]),z.c=y,z.e=G,z;},N5.mod=function(z){var W,Z=this,K=Z.constructor,R=Z.s,N=(z=new K(z)).s;return z.c[0]||X(b9o.D1Z(0,0)),Z.s=z.s=1,W=b9o.w1Z(1,z.cmp(Z)),Z.s=R,z.s=N,W?new K(Z):(R=K.DP,N=K.RM,K.DP=K.RM=0,Z=Z.div(z),K.DP=R,K.RM=N,this.minus(Z.times(z)));},N5.add=N5.plus=function(z){var W,Z=this,K=Z.constructor,R=Z.s,N=(z=new K(z)).s;if(b9o.u1Z(R,N))return z.s=-N,Z.minus(z);var M=Z.e,P=Z.c,A=z.e,y=z.c;if(!P[0]||!y[0])return y[0]?z:new K(P[0]?Z:b9o.s1Z(0,R));if(P=P.slice(),R=b9o.e1Z(M,A)){for(b9o.U1Z(R,0)?(A=M,W=y):(R=-R,W=P),W.reverse();R--;W.push(0));W.reverse();}for(b9o.o6Z(P.length-y.length,0)&&(W=y,y=P,P=W),R=y.length,N=0;R;)N=(P[--R]=P[R]+y[R]+N)/10|0,P[R]%=10;for(N&&(P.unshift(N),++A),R=P.length;0===P[--R];P.pop());return z.c=P,z.e=A,z;},N5.pow=function(z){var W=this,Z=new W.constructor(1),K=Z,R=b9o.Z6Z(0,z);for((z!==~~z||-U>z||b9o.p6Z(z,U))&&X("!pow!"),z=R?-z:z;b9o.P6Z(1,z)&&(K=K.times(W)),z>>=1;)W=W.times(W);return R?Z.div(K):K;},N5.round=function(z,W){var Z=this,K=Z.constructor;return b9o.r6Z(null,z)?z=0:(z!==~~z||b9o.S6Z(0,z)||b9o.E6Z(z,K5))&&X("!round!"),I(Z=new K(Z),z,b9o.q6Z(null,W)?K.RM:W),Z;},N5.sqrt=function(){var z,W,Z,K=this,R=K.constructor,N=K.c,M=K.s,P=K.e,A=new R("0.5");if(!N[0])return new R(K);b9o.J6Z(0,M)&&X(b9o.H6Z(0,0)),M=Math.sqrt(K.toString()),b9o.V6Z(0,M)||b9o.x6Z(M,1/0)?(z=N.join(""),b9o.m6Z(z.length+P,1)||(z+="0"),W=new R(Math.sqrt(z).toString()),W.e=b9o.X6Z(((P+1)/2|0),(0>P||1&P))):W=new R(M.toString()),M=W.e+(R.DP+=4);do Z=W,W=A.times(Z.plus(K.div(Z)));while(b9o.g6Z(Z.c.slice(0,M).join(""),W.c.slice(0,M).join("")));return I(W,R.DP-=4,R.RM),W;},N5.mul=N5.times=function(z){var W,Z=this,K=Z.constructor,R=Z.c,N=(z=new K(z)).c,M=R.length,P=N.length,A=Z.e,y=z.e;if(z.s=b9o.f6Z(Z.s,z.s)?1:-1,!R[0]||!N[0])return new K(b9o.h6Z(0,z.s));for(z.e=A+y,b9o.C6Z(P,M)&&(W=R,R=N,N=W,y=M,M=P,P=y),W=new Array(y=M+P);y--;W[y]=0);for(A=P;A--;){var E=function(){W[y]=b9o.W7Z((W[y]+P),10);};for(P=0,y=M+A;b9o.R7Z(y,A);)P=W[y]+b9o.M7Z(N[A],R[y-A-1])+P,W[y--]=b9o.b7Z(P,10),P=b9o.i7Z(P/10,0);E();}for(P&&++z.e,W[0]||W.shift(),A=W.length;!W[--A];W.pop());return z.c=W,z;},N5.toString=N5.valueOf=N5.toJSON=function(){var z=function(){K=K.charAt(0)+(b9o.T7Z(R,1)?"."+K.slice(1):"")+(b9o.B7Z(0,Z)?"e":"e+")+Z;},W=this,Z=W.e,K=W.c.join(""),R=K.length;if(b9o.G7Z(Z5,Z)||b9o.O7Z(Z,p5))z();else if(b9o.Q7Z(0,Z)){var N=function(){K="0."+K;};for(;++Z;K="0"+K);N();}else if(b9o.F7Z(Z,0))if(++Z>R)for(Z-=R;Z--;K+="0");else b9o.a7Z(R,Z)&&(K=K.slice(0,Z)+"."+K.slice(Z));else b9o.v7Z(R,1)&&(K=K.charAt(0)+"."+K.slice(1));return b9o.I7Z(W.s,0)&&W.c[0]?"-"+K:K;},N5.toExponential=function(z){return b9o.d7Z(null,z)?z=b9o.t7Z(this.c.length,1):(z!==~~z||b9o.L7Z(0,z)||b9o.z0Z(z,K5))&&X("!toExp!"),J(this,z,1);},N5.toFixed=function(z){var W,Z=this,K=Z5,R=p5;return Z5=-(p5=b9o.K0Z(1,0)),b9o.N0Z(null,z)?W=Z.toString():z===~~z&&b9o.j0Z(z,0)&&b9o.y0Z(K5,z)&&(W=J(Z,Z.e+z),b9o.A0Z(Z.s,0)&&Z.c[0]&&b9o.Y0Z(W.indexOf("-"),0)&&(W="-"+W)),Z5=K,p5=R,W||X("!toFix!"),W;},N5.toPrecision=function(z){return b9o.l0Z(null,z)?this.toString():((z!==~~z||b9o.n0Z(1,z)||b9o.c0Z(z,K5))&&X("!toPre!"),J(this,b9o.k0Z(z,1),2));},o5=L(),"function"==typeof define&&define.amd?define(function(){return o5;}):"undefined"!=typeof module&&module.exports?module.exports=o5:u.Big=o5;}(this),!function(z){var W=this;"object"==typeof exports?module.exports=z(W):"function"==typeof define&&define.amd?define([],function(){return z(W);}):W.jDataView=z(W);}(function(B){function G(){w.apply(this,arguments);}function q(z){return b9o.r4Z(z,0)&&b9o.S4Z(31,z)?b9o.E4Z(1,z):q[z]||(q[z]=Math.pow(2,z));}function Y(z,W,Z,K){if(b9o.w0Z(z,Y)){var R=z.slice(W,W+Z);return R._littleEndian=O(K,R._littleEndian),R;}if(!(b9o.u0Z(this,Y)))return new Y(z,W,Z,K);if(this.buffer=z=Y.wrapBuffer(z),this._isArrayBuffer=D.ArrayBuffer&&b9o.s0Z(z,ArrayBuffer),this._isPixelData=!0&&D.PixelData&&b9o.e0Z(z,CanvasPixelArray),this._isDataView=D.DataView&&this._isArrayBuffer,this._isNodeBuffer=!1,!(this._isArrayBuffer||this._isPixelData||b9o.U0Z(z,Array)))throw  new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!K;var N=b9o.o4Z("byteLength",z)?z.byteLength:z.length;this.byteOffset=W=O(W,0),this.byteLength=Z=O(Z,b9o.Z4Z(N,W)),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(z,W,Z):this._checkBounds(W,Z,N),this._engineAction=this._isDataView?this._dataViewAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction;}function O(z,W){return void 0!==z?z:W;}function V(z,W){return !W&&b9o.D0Z(z,Array)?z:Array.prototype.slice.call(z);}function w(z,W){this.lo=z,this.hi=W;}function H(z){var W=function(){K[R]=b9o.p4Z(255,z.charCodeAt(R));};for(var Z=D.ArrayBuffer?Uint8Array:Array,K=new Z(z.length),R=0,N=z.length;b9o.P4Z(N,R);R++)W();return K;}"use strict";var D={NodeBuffer:!1,DataView:b9o.q4Z("DataView",B),ArrayBuffer:b9o.J4Z("ArrayBuffer",B),PixelData:!0&&b9o.H4Z("CanvasPixelArray",B)&&b9o.V4Z("ImageData",B)&&b9o.x4Z("document",B)},F=B.TextEncoder,Q=B.TextDecoder;if(D.PixelData){var x=function(W,Z){var K=function(z){R[N]=z[N];},R=x.context2d.createImageData(b9o.m4Z((W+3),4),1).data;if(R.byteLength=W,void 0!==Z)for(var N=0;b9o.X4Z(W,N);N++)K(Z);return R;};x.context2d=document.createElement("canvas").getContext("2d");}var v={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};Y.wrapBuffer=function(W){switch(typeof W){case "number":if(D.ArrayBuffer)W=new Uint8Array(W).buffer;else if(D.PixelData)W=x(W);else{var Z=function(z){W[K]=z;};W=new Array(W);for(var K=0;b9o.g4Z(K,W.length);K++)Z(0);}return W;case "string":W=H(W);default:return b9o.f4Z("length",W)&&!(D.ArrayBuffer&&b9o.h4Z(W,ArrayBuffer)||D.PixelData&&b9o.C4Z(W,CanvasPixelArray))&&(D.ArrayBuffer?b9o.W9Z(W,ArrayBuffer)||(W=new Uint8Array(W).buffer,b9o.R9Z(W,ArrayBuffer)||(W=new Uint8Array(V(W,!0)).buffer)):W=D.PixelData?x(W.length,W):V(W)),W;}},Y.createBuffer=function(){return Y.wrapBuffer(arguments);},Y.Uint64=w,w.prototype={valueOf:function(){return this.lo+b9o.M9Z(q(32),this.hi);},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments);}},w.fromNumber=function(z){var W=Math.floor(b9o.b9Z(z,q(32))),Z=b9o.i9Z(z,W*q(32));return new w(Z,W);},Y.Int64=G,G.prototype=b9o.T9Z("create",Object)?Object.create(w.prototype):new w,G.prototype.valueOf=function(){return b9o.B9Z(this.hi,q(31))?w.prototype.valueOf.apply(this,arguments):-(b9o.G9Z(q(32),this.lo,q(32)*(q(32)-1-this.hi)));},G.fromNumber=function(z){var W,Z;if(b9o.H9Z(z,0)){var K=w.fromNumber(z);W=K.lo,Z=K.hi;}else Z=Math.floor(b9o.V9Z(z,q(32))),W=b9o.x9Z(z,Z*q(32)),Z+=q(32);return new G(W,Z);};var u=Y.prototype={compatibility:D,_checkBounds:function(z,W,Z){if("number"!=typeof z)throw  new TypeError("Offset is not a number.");if("number"!=typeof W)throw  new TypeError("Size is not a number.");if(b9o.m9Z(0,W))throw  new RangeError("Length is negative.");if(b9o.X9Z(0,z)||b9o.g9Z(z+W,O(Z,this.byteLength)))throw  new RangeError("Offsets are out of bounds.");},_action:function(z,W,Z,K,R){return this._engineAction(z,W,O(Z,this._offset),O(K,this._littleEndian),R);},_dataViewAction:function(z,W,Z,K,R){return this._offset=Z+v[z],W?this._view["get"+z](Z,K):this._view["set"+z](Z,R,K);},_arrayBufferAction:function(z,W,Z,K,R){var N,M=v[z],P=B[z+"Array"];if(K=O(K,this._littleEndian),b9o.f9Z(1,M)||b9o.h9Z((this.byteOffset+Z)%M,0)&&K)return N=new P(this.buffer,this.byteOffset+Z,1),this._offset=Z+M,W?N[0]:N[0]=R;var A=new Uint8Array(W?this.getBytes(M,Z,K,!0):M);return N=new P(A.buffer,0,1),W?N[0]:(N[0]=R,void this._setBytes(Z,A,K));},_arrayAction:function(z,W,Z,K,R){return W?this["_get"+z](Z,K):this["_set"+z](Z,R,K);},_getBytes:function(z,W,Z){Z=O(Z,this._littleEndian),W=O(W,this._offset),z=O(z,b9o.C9Z(this.byteLength,W)),this._checkBounds(W,z),W+=this.byteOffset,this._offset=b9o.W5v(W,this.byteOffset,z);var K=this._isArrayBuffer?new Uint8Array(this.buffer,W,z):(this.buffer.slice||Array.prototype.slice).call(this.buffer,W,W+z);return Z||b9o.p5v(1,z)?K:V(K).reverse();},getBytes:function(z,W,Z,K){var R=this._getBytes(z,W,O(Z,!0));return K?V(R):R;},_setBytes:function(z,W,Z){var K=W.length;if(b9o.P5v(0,K)){if(Z=O(Z,this._littleEndian),z=O(z,this._offset),this._checkBounds(z,K),!Z&&b9o.r5v(K,1)&&(W=V(W,!0).reverse()),z+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,z,K).set(W);else for(var R=0;b9o.S5v(K,R);R++)this.buffer[z+R]=W[R];this._offset=b9o.E5v(z,this.byteOffset,K);}},setBytes:function(z,W,Z){this._setBytes(z,W,O(Z,!0));},getString:function(W,Z,K){var R=function(z){W=z.length;},N=this._getBytes(W,Z,!0);if(K=b9o.l5v("utf8",K)?"utf-8":K||"binary",Q&&b9o.n5v("binary",K))return new Q(K).decode(this._isArrayBuffer?N:new Uint8Array(N));var M="";R(N);for(var P=0;b9o.c5v(W,P);P++)M+=String.fromCharCode(N[P]);return b9o.k5v("utf-8",K)&&(M=decodeURIComponent(escape(M))),M;},setString:function(z,W,Z){var K=function(){Z=b9o.D5v("utf8",Z)?"utf-8":Z||"binary";};K();var R;F&&b9o.w5v("binary",Z)?R=new F(Z).encode(W):(b9o.u5v("utf-8",Z)&&(W=unescape(encodeURIComponent(W))),R=H(W)),this._setBytes(z,R,!0);},getChar:function(z){return this.getString(1,z);},setChar:function(z,W){this.setString(z,W);},tell:function(){return this._offset;},seek:function(z){return this._checkBounds(z,0),this._offset=z;},skip:function(z){return this.seek(this._offset+z);},slice:function(Z,K,R){function N(z,W){return b9o.s5v(0,z)?z+W:z;}return Z=N(Z,this.byteLength),K=N(O(K,this.byteLength),this.byteLength),R?new Y(this.getBytes(b9o.e5v(K,Z),Z,!0,!0),void 0,void 0,this._littleEndian):new Y(this.buffer,this.byteOffset+Z,b9o.U5v(K,Z),this._littleEndian);},alignBy:function(z){return this._bitOffset=0,b9o.o3v(1,O(z,1))?this.skip(b9o.Z3v(z,(this._offset%z||z))):this._offset;},_getFloat64:function(z,W){var Z=this._getBytes(8,z,W),K=b9o.p3v(1,2*(Z[7]>>7)),R=b9o.P3v(((Z[7]<<1&255)<<3|Z[6]>>4),1023),N=b9o.r3v((15&Z[6]),q(48))+b9o.S3v(Z[5],q(40))+b9o.E3v(Z[4],q(32))+b9o.q3v(Z[3],q(24))+b9o.J3v(Z[2],q(16))+b9o.H3v(Z[1],q(8))+Z[0];return b9o.V3v(1024,R)?b9o.x3v(0,N)?b9o.m3v(0,0):b9o.X3v(1,0,K):-1023===R?K*N*q(-1074):K*(1+N*q(-52))*q(R);},_getFloat32:function(z,W){var Z=this._getBytes(4,z,W),K=b9o.s3v(1,2*(Z[3]>>7)),R=b9o.e3v((Z[3]<<1&255|Z[2]>>7),127),N=b9o.U3v((127&Z[2])<<16,Z[1]<<8,Z[0]);return b9o.z2v(128,R)?b9o.K2v(0,N)?b9o.N2v(0,0):b9o.j2v(1,0,K):-127===R?K*N*q(-149):K*(1+N*q(-23))*q(R);},_get64:function(z,W,Z){Z=O(Z,this._littleEndian),W=O(W,this._offset);for(var K=Z?[0,4]:[4,0],R=0;b9o.i2v(2,R);R++)K[R]=this.getUint32(W+K[R],Z);return this._offset=W+8,new z(K[0],K[1]);},getInt64:function(z,W){return this._get64(G,z,W);},getUint64:function(z,W){return this._get64(w,z,W);},_getInt32:function(z,W){var Z=this._getBytes(4,z,W);return b9o.T2v(Z[3]<<24,Z[2]<<16,Z[1]<<8,Z[0]);},_getUint32:function(z,W){return b9o.l2v(this._getInt32(z,W),0);},_getInt16:function(z,W){return b9o.n2v(this._getUint16(z,W),16,16);},_getUint16:function(z,W){var Z=this._getBytes(2,z,W);return b9o.Q2v(Z[1]<<8,Z[0]);},_getInt8:function(z){return b9o.F2v(this._getUint8(z),24,24);},_getUint8:function(z){return this._getBytes(1,z)[0];},_getBitRangeData:function(z,W){var Z=function(){A=b9o.m2v(A<<8,P[y]);},K=(b9o.X2v(O(W,this._offset),3))+this._bitOffset,R=K+z,N=b9o.g2v(K,3),M=b9o.f2v(R+7,3),P=this._getBytes(b9o.h2v(M,N),N,!0),A=0;(this._bitOffset=b9o.C2v(7,R))&&(this._bitOffset-=8);for(var y=0,E=P.length;b9o.W8v(E,y);y++)Z();return {start:N,bytes:P,wideValue:A};},getSigned:function(z,W){var Z=b9o.R8v(32,z);return b9o.M8v(this.getUnsigned(z,W),Z,Z);},getUnsigned:function(z,W){var Z=this._getBitRangeData(z,W).wideValue>>>-this._bitOffset;return b9o.r8v(32,z)?Z&~(-1<<z):Z;},_setBinaryFloat:function(z,W,Z,K,R){var N,M,P=b9o.S8v(0,W)?1:0,A=~(-1<<b9o.E8v(K,1)),y=b9o.q8v(1,A);b9o.J8v(0,W)&&(W=-W),b9o.H8v(0,W)?(N=0,M=0):isNaN(W)?(N=b9o.V8v(2,A)+1,M=1):b9o.x8v(1/0,W)?(N=b9o.m8v(2,A)+1,M=0):(N=Math.floor(b9o.X8v(Math.log(W),Math.LN2)),b9o.g8v(N,y)&&b9o.f8v(A,N)?(M=Math.floor((W*q(-N)-1)*q(Z)),N+=A):(M=Math.floor(b9o.h8v(W,q(y-Z))),N=0));for(var E=[];b9o.C8v(Z,8);)E.push(b9o.W1v(M,256)),M=Math.floor(b9o.R1v(M,256)),Z-=8;for(N=b9o.M1v(N<<Z,M),K+=Z;b9o.b1v(K,8);)E.push(b9o.i1v(255,N)),N>>>=8,K-=8;E.push(b9o.T1v(P<<K,N)),this._setBytes(z,E,R);},_setFloat32:function(z,W,Z){this._setBinaryFloat(z,W,23,8,Z);},_setFloat64:function(z,W,Z){this._setBinaryFloat(z,W,52,11,Z);},_set64:function(z,W,Z,K){b9o.B1v(Z,z)||(Z=z.fromNumber(Z)),K=O(K,this._littleEndian),W=O(W,this._offset);var R=K?{lo:0,hi:4}:{lo:4,hi:0};for(var N in R)this.setUint32(W+R[N],Z[N],K);this._offset=W+8;},setInt64:function(z,W,Z){this._set64(G,z,W,Z);},setUint64:function(z,W,Z){this._set64(w,z,W,Z);},_setUint32:function(z,W,Z){this._setBytes(z,[b9o.G1v(255,W),b9o.O1v(W>>>8,255),b9o.Q1v(W>>>16,255),b9o.F1v(W,24)],Z);},_setUint16:function(z,W,Z){this._setBytes(z,[b9o.a1v(255,W),b9o.v1v(W>>>8,255)],Z);},_setUint8:function(z,W){this._setBytes(z,[b9o.I1v(255,W)]);},setUnsigned:function(z,W,Z){var K=this._getBitRangeData(Z,z),R=K.wideValue,N=K.bytes;R&=~(~(-1<<Z)<<-this._bitOffset),R|=(b9o.d1v(32,Z)?W&~(-1<<Z):W)<<-this._bitOffset;for(var M=b9o.t1v(N.length,1);b9o.L1v(M,0);M--)N[M]=b9o.z6v(255,R),R>>>=8;this._setBytes(K.start,N,!0);}};for(var J in v)!function(K){u["get"+K]=function(z,W){return this._action(K,!0,z,W);},u["set"+K]=function(z,W,Z){this._action(K,!1,z,Z,W);};}(J);u._setInt32=u._setUint32,u._setInt16=u._setUint16,u._setInt8=u._setUint8,u.setSigned=u.setUnsigned;for(var L in u)b9o.K6v("set",L.slice(0,3))&&!function(z){u["write"+z]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+z].apply(this,arguments);};}(L.slice(3));return Y;}),videojs.Html5){var onPlaybackrateChanged=function(W){try{var Z=!0;if(this.player()&&b9o.N6v(null,this.player().mediaPlayer))try{var K=this.player().mediaPlayer.getVideoModel().getElement();K&&b9o.j6v(null,K)&&(Z=K.paused);}catch(z){}W.srcElement&&this.player()&&b9o.y6v(null,this.player())&&Z===!1&&(b9o.A6v(0,W.srcElement.playbackRate)?this.player().loadingSpinner.show():this.player().loadingSpinner.hide());}catch(z){}},onVideoWaiting=function(){},onLoadedMetadata=function(){},onVideoPause=function(){this.player().loadingSpinner.hide();},onVideoPlay=function(){this.forcedEnd=!1,this.player().loadingSpinner.show();},onVideoPlaying=function(){this.initialPlaybackHasStarted===!1&&(this.initialPlaybackHasStarted=!0),this.player().loadingSpinner.hide();},onVideoEnded=function(){},onVideoTime=function(){try{if(CL.configs.isLive===!1&&b9o.Y6v(null,this.player().mediaPlayer)&&b9o.l6v(this.player().mediaPlayer.duration()-this.player().mediaPlayer.time(),2)&&b9o.n6v(this.player().mediaPlayer.duration(),this.el().duration)&&(void 0===this.forcedEnd||this.forcedEnd!==!0)){this.forcedEnd=!0;var W=this.player().mediaPlayer.time(),Z=this.player().mediaPlayer.duration(),K=this.player().src(),R=this;setTimeout(function(){R.player()&&R.player().paused()===!1&&b9o.c6v(K,R.player().src())&&R.ended()===!1&&b9o.k6v(R.player().mediaPlayer.time(),W)&&b9o.D6v(R.player().mediaPlayer.duration(),Z)&&R.el().dispatchEvent(new Event("ended"));},2e3);}}catch(z){}},onVideoSeeking=function(){this.initialPlaybackHasStarted===!0;},onVideoSeeked=function(){},onDurationChange=function(){};videojs.Dashjs=videojs.Html5.extend({init:function(X,z5,o5){var W5=function(W){var Z=X.getPlaybackStatistics();if(!W.data){var K,R=Z.video,N=R.bandwidth,M=void 0===R.activeTrack?[]:R.activeTrack.representations,P=0;for(K=0;b9o.r7v(K,M.length);K++)if(b9o.S7v(M[K].bandwidth,N)){var A=function(z){P=z;};A(K);break;}W.data={mediaType:"video",oldQuality:P,newQuality:P};}var y,E,B=W.data;if(b9o.E7v("video",B.mediaType)&&b9o.q7v("normal",CL.manifest.pictureSize)){var G=function(z){q=z.childNodes[0];};E=Z.video.activeTrack.representations[B.oldQuality],y=Z.video.activeTrack.representations[B.newQuality];var q,Y=X.el();G(Y);var O,V,w,H,D,F,Q,x,v,u,J,L,I;switch(H=Y.clientWidth,D=Y.clientHeight,Q=E.height,F=E.width,V=b9o.J7v(Q,F),v=y.height,x=y.width,w=b9o.H7v(v,x),O=b9o.V7v(D,H),Y.style.overflow="",q.style.width=H+"px",q.style.height=D+"px",q.style.transform="",CL.manifest.pictureSize){case "crop":Y.style.overflow="hidden",L=b9o.x7v((q.clientWidth-x),2)+"px",I=b9o.m7v((q.clientHeight-v),2)+"px",q.style.width=x+"px",q.style.height=v+"px",q.style.transform="translateX("+L+") translateY("+I+")";break;case "stretch":b9o.X7v(O,w)?(u=1,J=b9o.g7v(O,w),L="0px"):(u=b9o.f7v(w,O),J=1,L="0px"),q.style.transform="scaleX("+u+") scaleY("+J+") translateX("+L+")";}}},C,K5,U,Z5=function(z){var W;if(b9o.w6v("download",z.error)){var Z,K=z.event.request;b9o.u6v("manifest",z.event.id)?Z="MANIFEST_LOAD_ERROR":b9o.s6v("content",z.event.id)&&(Z="SEGMENT_LOAD_ERROR"),X.error({code:2,subtype:Z,message:b9o.e6v("string",K.responseType)?K.responseText:"",status:K.status,statusText:K.statusText,url:K.responseURL}),X.removeClass("vjs-error");}else b9o.U6v("licenseError",z.error)?(W=z.event.error,X.error({code:2,subtype:"LICENSE_ACQUISITION_ERROR",message:W.message,status:W.status,statusText:W.statusText,url:W.responseURL}),X.removeClass("vjs-error")):b9o.o7v("keyError",z.error)&&(W=z.event,b9o.Z7v("output-restricted",W)?X.error({code:3,subtype:"HDCP_OUTPUT_NOT_ALLOWED",message:"Output device is not allowed."}):b9o.p7v("output-downscaled",W)?X.error({code:3,subtype:"HDCP_OUTPUT_DOWNSCALED",message:"Output has been downscaled."}):b9o.P7v("expired",W)&&X.error({code:3,subtype:"LICENSE_EXPIRED",message:"License for this content has expired."}),X.removeClass("vjs-error"));},p5=function(){X.trigger({type:"manifestLoaded"});};this.initialPlaybackHasStarted=!1;var N5=!!X.options().autoplay;C=z5.source,delete  z5.source,z5.autoplay=!!X.options().autoplay,void 0!==X.options().context?(K5=X.options().context,z5.autoplay=K5.config.autoplay):K5=new castLabsDashJS.classes.DRMtodayContext(z5),U=new MediaPlayer(K5),X.usingNativeControls(CL.configs.isChromeAndroid===!0?!0:!1),X.setAudioTrack=videojs.bind(this,this.setAudioTrack),X.audioTracks=videojs.bind(this,this.audioTracks),X.setSubsTrack=videojs.bind(this,this.setSubsTrack),X.subtitleTracks=videojs.bind(this,this.subtitleTracks),X.absoluteTime=videojs.bind(this,this.absoluteTime),X.getPlaybackStatistics=videojs.bind(this,this.getPlaybackStatistics),X.enableABRSwitching=videojs.bind(this,this.enableABRSwitching),X.setQualityFor=videojs.bind(this,this.setQualityFor),X.removeEventListener=videojs.bind(this,this.removeEventListener),X.safeDispose=videojs.bind(this,this.safeDispose),X.setPlaybackRate=videojs.bind(this,this.setPlaybackRate),X.getLastAppendedSegment=videojs.bind(this,this.getLastAppendedSegment),videojs.Html5.call(this,X,z5,o5),CL.configs.element=this.el(),this.removeEventListener();var R5=this.el();CL.configs.isChromeAndroid===!0&&(R5.controls=!0,R5.style.zIndex=100),R5.addEventListener("durationchange",onDurationChange.bind(this)),R5.addEventListener("ended",onVideoEnded.bind(this)),R5.addEventListener("loadedmetadata",onLoadedMetadata.bind(this)),R5.addEventListener("play",onVideoPlay.bind(this)),R5.addEventListener("playing",onVideoPlaying.bind(this)),R5.addEventListener("pause",onVideoPause.bind(this)),R5.addEventListener("ratechange",onPlaybackrateChanged.bind(this)),R5.addEventListener("seeking",onVideoSeeking.bind(this)),R5.addEventListener("seeked",onVideoSeeked.bind(this)),R5.addEventListener("timeupdate",onVideoTime.bind(this)),R5.addEventListener("waiting",onVideoWaiting.bind(this)),X.options().children.bigPlayButton=!N5,X.options().customErrorHandler=Z5,X.options().onManifestLoaded=p5,C&&C.src&&(U.loadVideo(C.src),U.eventBus.addEventListener("error",X.options().customErrorHandler,!1),U.eventBus.addEventListener(MediaPlayer.events.MANIFEST_LOADED,X.options().onManifestLoaded,!1)),X.mediaPlayer=U;X.on("loadedmetadata",function(){X.mediaPlayer.getABRController().subscribe("qualityChanged",this,W5,!1);}),X.on("firstplay",W5),X.on("adstart",function(){X.mediaPlayer.pause(),X.removeEventListener(),X.mediaPlayer.reset();}),X.context=K5;}}),videojs.Dashjs.prototype.removeEventListener=function(){var z=this.el(),W=this.player();z.removeEventListener("durationchange",onDurationChange),z.removeEventListener("ended",onVideoEnded),z.removeEventListener("loadedmetadata",onLoadedMetadata),z.removeEventListener("play",onVideoPlay),z.removeEventListener("playing",onVideoPlaying),z.removeEventListener("pause",onVideoPause),z.removeEventListener("ratechange",onPlaybackrateChanged),z.removeEventListener("seeking",onVideoSeeking),z.removeEventListener("seeked",onVideoSeeked),z.removeEventListener("timeupdate",onVideoTime),z.removeEventListener("waiting",onVideoWaiting),W&&W.mediaPlayer&&W.mediaPlayer.removeEventListener&&(W.mediaPlayer.removeEventListener(),W.mediaPlayer.reset());},videojs.Dashjs.prototype.buffered=function(){var z,W,Z=videojs.Html5.prototype.buffered.call(this);if(b9o.h7v(Z.length,1)){for(var K=this.currentTime(),R=0;b9o.C7v(R,Z.length);R++)if(z=Z.start(R),W=Z.end(R),z-=b9o.W0v(CL.configs.ssTimeOffset.video,CL.configs.ssTimeOffsetTimescale.video),W-=b9o.R0v(CL.configs.ssTimeOffset.video,CL.configs.ssTimeOffsetTimescale.video),b9o.M0v(K,z)&&b9o.b0v(W,K))return videojs.createTimeRange(z,W);return videojs.createTimeRange(0,0);}return b9o.i0v(1,Z.length)?(z=Z.start(0),W=Z.end(0),z-=b9o.T0v(CL.configs.ssTimeOffset.video,CL.configs.ssTimeOffsetTimescale.video),W-=b9o.B0v(CL.configs.ssTimeOffset.video,CL.configs.ssTimeOffsetTimescale.video),videojs.createTimeRange(z,W)):videojs.createTimeRange(0,0);},videojs.Dashjs.prototype.currentTime=function(){if(this.player()&&b9o.G0v(null,this.player().mediaPlayer))try{var W=this.player().mediaPlayer.time();return W;}catch(z){}return videojs.Html5.prototype.currentTime.call(this);},videojs.Dashjs.prototype.absoluteTime=function(){if(this.player()&&b9o.O0v(null,this.player().mediaPlayer))try{return this.player().mediaPlayer.absoluteTime();}catch(z){}return videojs.Html5.prototype.currentTime.call(this);},videojs.Dashjs.prototype.setAudioTrack=function(z){this.player().mediaPlayer.setActiveTrack("audio",z);},videojs.Dashjs.prototype.setSubsTrack=function(z){this.player().setTextTrack(z);},videojs.Dashjs.prototype.audioTracks=function(){return this.toLangs(this.tracks("audio"));},videojs.Dashjs.prototype.subtitleTracks=function(){return this.tracks("text");},videojs.Dashjs.prototype.tracks=function(z){return this.player().mediaPlayer.getAvailableTracks(z);},videojs.Dashjs.prototype.toLangs=function(z){var W,Z=[];for(W=0;b9o.Q0v(W,z.length);W++)Z.push(z[W].lang);return Z;},videojs.Dashjs.prototype.toTrackId=function(z,W){var Z;for(Z=0;b9o.F0v(Z,W.length);Z++)if(b9o.a0v(W[Z].lang,z))return W[Z].id;return null;},videojs.Dashjs.prototype.setCurrentTime=function(z){this.player().mediaPlayer?this.player().mediaPlayer.seek(z):videojs.Html5.prototype.setCurrentTime.call(this,z);},videojs.Dashjs.prototype.duration=function(){var W,Z=this.player().mediaPlayer;if(Z&&Z.isReady())try{var K=!1;return b9o.v0v(null,Z.adapter)&&b9o.I0v(null,Z.adapter.manifestModel)&&b9o.d0v(null,Z.adapter.manifestModel.getValue())&&(K=b9o.t0v("dynamic",Z.adapter.manifestModel.getValue().type)),W=b9o.L0v(Z.duration(),CL.configs.ssTimeOffset.video/CL.configs.ssTimeOffsetTimescale.video),K?-1:Z.duration();}catch(z){}return videojs.Html5.prototype.duration.call(this);},videojs.Dashjs.isSupported=function(){{var z=new castLabsDashJS.classes.Utils;z.supportsMSE();}return CL.configs.isActiveVideoChrome===!0?!0:!!window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4;codecs="avc1.42c00c');},videojs.Dashjs.canPlaySource=function(z){return b9o.z4v("application/dash+xml",z.type)?"maybe":"";},videojs.Dashjs.prototype.play=function(){var z=this.player().mediaPlayer.getVideoModel();z.play();},videojs.Dashjs.prototype.getPlaybackStatistics=function(){var M=function(z){var W,Z,K,R,N;return N={},W=P.getMetricsFor(z),Z=A.getCurrentRepresentationSwitch(W),K=A.getCurrentBufferLevel(W),R=A.getCurrentDroppedFrames(W),b9o.K4v(null,Z)&&(N.bandwidth=A.getBandwidthForRepresentation(Z.to)),b9o.N4v(null,K)&&(N.bufferLength=parseFloat(K.level.toPrecision(5)),N.bufferLevel=parseFloat(Math.min(b9o.j4v(N.bufferLength,MediaPlayer.dependencies.BufferController.BUFFER_TIME_AT_TOP_QUALITY),1).toPrecision(2))),b9o.y4v(null,R)&&(N.droppedFrames=R.droppedFrames),b9o.A4v(null,Z)&&(N.bandwidth=A.getBandwidthForRepresentation(Z.to)),N.activeTrack=CL.configs.activeTrack[z],N;},P,A,y={};P=this.player().mediaPlayer,A=P.getMetricsExt();return activeTextTrack=this.player().activeSubtitleTrack,y={audio:M("audio"),video:M("video"),text:{activeTrack:void 0===activeTextTrack?null:activeTextTrack}};},videojs.Dashjs.prototype.enableABRSwitching=function(z){var W;void 0===z&&(z=!0),W=this.player().mediaPlayer,this.player().mediaPlayer.setAutoSwitchQuality(z);},videojs.Dashjs.prototype.setQualityFor=function(z,W){var Z;if(void 0===z||b9o.Y4v("video",z)&&b9o.l4v("audio",z))throw  new Error("You must specify a valid type (video or audio) when setting the quality");if(void 0===W)throw  new Error("You must specify a quality index when setting the quality");Z=this.player().mediaPlayer,Z.setQualityFor(z,W);},videojs.Dashjs.prototype.error=function(){try{return b9o.n4v((new Date).getTime()-CL.configs.sourceCleaningInProgress,5e3)?!0:videojs.Html5.prototype.error.call(this);}catch(z){}},videojs.Dashjs.prototype.safeDispose=function(){var W=this.player();try{W.pause(),W.mediaPlayer&&W.mediaPlayer.removeEventListener&&(W.mediaPlayer.removeEventListener(),W.mediaPlayer.reset());for(var Z=document.getElementsByTagName("video"),K=0;b9o.c4v(K,Z.length);K++){var R=Z[K];R.pause();}W.dispose();}catch(z){}try{var N=document.querySelector("video");b9o.k4v(null,N)&&N.parentElement.removeChild(N);}catch(z){}},videojs.Player.prototype.setInterval=function(z,W){z=videojs.bind(this,z);var Z=setInterval(z,W),K=function(){clearInterval(Z);};return K.guid="vjs-interval-"+Z,this.on("dispose",K),Z;},videojs.Player.prototype.clearInterval=function(z){var W=function(){};window.clearInterval(z);return W.guid="vjs-interval-"+z,this.off("dispose",W),z;},videojs.MediaTechController.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=setInterval(videojs.bind(this,function(){b9o.D4v(null,this.player().el())?this.player().trigger("timeupdate"):clearInterval(this.currentTimeInterval);}),250);},videojs.Dashjs.prototype.setPlaybackRate=function(W){try{var Z=this.player().mediaPlayer.getVideoModel().getElement();void 0===W&&(W=1),W=Math.min(W,4),W=Math.max(W,.5),Z&&b9o.w4v(null,Z)&&(Z.playbackRate=W);}catch(z){}},videojs.Dashjs.prototype.getLastAppendedSegment=function(){var W={};try{var Z=this.player().mediaPlayer;void 0!==Z&&Z.isReady()&&(W={audio:CL.configs.lastAppendedSegment.audio,video:CL.configs.lastAppendedSegment.video});}catch(z){}return W;};}videojs.Dashas=videojs.Flash.extend({init:function(W,Z,K){var R=function(){W.isReady=!1;},N,M;R();var P=!!W.options().autoplay;W.options().children.bigPlayButton=!P,W.on("playerready",function(){var z=function(){W.isReady=!0;};z();}),Z.assetId&&(N=encodeURIComponent(videojs.Dashas.buildMetadataUrl(Z)),M=encodeURIComponent(videojs.Dashas.buildOptData(Z))),this.cache_={buffered:{timestamp:0,value:null},currentTime:{timestmap:0,value:null},playing:!1},this.initialized_=!1,this.playPressed_=!1,Z.swf=Z.flashFile,maxBufferLength=15,void 0!==Z.ABRParameters&&b9o.u4v(null,Z.ABRParameters)&&b9o.s4v("",Z.ABRParameters)&&Z.ABRParameters.maxBufferLength&&void 0!==Z.ABRParameters.maxBufferLength&&(maxBufferLength=Z.ABRParameters.maxBufferLength),Z.flashVars=videojs.util.mergeOptions({metadataUrl:N,authenticationToken:M,spinner:!1,watermark:!1,debug:Z.debug&&Z.debug===!0?!0:!1,quality:"autolow",errorEventProxyFunction:"videojs.Dashas.onError",maxBufferLength:maxBufferLength},Z.flashVars),Z.source&&Z.source.src&&(Z.flashVars.src=encodeURIComponent(Z.source.src)),videojs.Flash.call(this,W,Z,K),W.setAudioTrack=videojs.bind(this,this.setAudioTrack),W.audioTracks=videojs.bind(this,this.audioTracks),W.subtitleTracks=videojs.bind(this,this.textTracks),W.absoluteTime=videojs.bind(this,this.currentTime),W.setSubsTrack=videojs.bind(this,this.setSubsTrack),W.getBuffered=videojs.bind(this,this.getBuffered),W.getBufferLevel=videojs.bind(this,this.getBufferLevel),W.getDroppedFrames=videojs.bind(this,this.getDroppedFrames),W.getCurrentAudioBandwidth=videojs.bind(this,this.getCurrentAudioBandwidth),W.getCurrentVideoBandwidth=videojs.bind(this,this.getCurrentVideoBandwidth),W.getPlaybackStatistics=videojs.bind(this,this.getPlaybackStatistics),W.videoClass=videojs.bind(this,this.videoClass),W.debug_maxRepresentationHeight=videojs.bind(this,this.maxRepresentationHeight),W.debug_minRepresentationHeight=videojs.bind(this,this.minRepresentationHeight),W.loadSrc=videojs.bind(this,this.loadSrc),W.on(["play","playing","seeking","pause","waiting","ended"],videojs.bind(this,this.resetCache)),W.on(["play"],videojs.bind(this,this.markPlay)),W.on(["playing"],videojs.bind(this,this.markPlaying)),W.on(["seeking","pause","waiting","ended"],videojs.bind(this,this.unmarkPlaying)),W.on(["loadedmetadata"],videojs.bind(this,this.markInitializedAndPlayIfNeeded));}}),videojs.Dashas.prototype.maxRepresentationHeight=function(z){return z?void this.el().vjs_setProperty("maxRepresentationHeight",z):this.el().vjs_getProperty("maxRepresentationHeight");},videojs.Dashas.prototype.minRepresentationHeight=function(z){return z?void this.el().vjs_setProperty("minRepresentationHeight",z):this.el().vjs_getProperty("minRepresentationHeight");},videojs.Dashas.buildMetadataUrl=function(z){var W,Z,K,R,N="";return W=videojs.Dashas.buildOptData(z),R=z.authenticationToken,Z=z.assetId,K=z.variantId,N+=z.accessLicenseServerURL+"?optData="+W,void 0!==Z&&b9o.e4v(null,Z)&&b9o.U4v("",Z)&&(N+="&assetId="+Z),void 0!==K&&b9o.o9v(null,K)&&b9o.Z9v("",K)&&(N+="&variantId="+K),(void 0===R||b9o.p9v(null,R)||b9o.P9v("",R))&&(R=null),N+=b9o.r9v(null,R)?"":"&authToken="+R;},videojs.Dashas.buildOptData=function(z){return (new castLabsDashJS.classes.Utils).B64Tools.encode(JSON.stringify(z.customData));},videojs.Dashas.prototype.limitToXEntries=function(z,W){for(;b9o.S9v(z.length,W);)z.shift();},videojs.Dashas.prototype.getDroppedFrames=function(){return this.el().vjs_getProperty("droppedFrames");},videojs.Dashas.prototype.videoClass=function(){return this.el().vjs_videoClass();},videojs.Dashas.prototype.getBuffered=function(){return this.el().vjs_getProperty("buffered");},videojs.Dashas.prototype.getBufferLevel=function(){return this.el().vjs_getProperty("bufferLevel");},videojs.Dashas.prototype.getCurrentAudioBandwidth=function(){return this.el().vjs_getProperty("currentAudioBandwidth");},videojs.Dashas.prototype.getCurrentVideoBandwidth=function(){return this.el().vjs_getProperty("currentVideoBandwidth");},videojs.Dashas.prototype.getPlaybackStatistics=function(){var z=this.getBuffered(),W=(this.getBufferLevel(),this.getDroppedFrames()),Z=this.getCurrentVideoBandwidth(),K=this.getCurrentAudioBandwidth(),R={bandwidth:Z,bufferLength:z,droppedFrames:W},N={bandwidth:K,bufferLength:z};return {video:R,audio:N};},videojs.Dashas.onError=function(z,W){var Z=videojs(z);"string"==typeof W&&-1!=W.indexOf("MANIFEST_LOAD_ERROR")?Z.error({code:2,subtype:"MANIFEST_LOAD_ERROR"}):"string"==typeof W&&-1!=W.indexOf("SEGMENT_LOAD_ERROR")?Z.error({code:2,subtype:"SEGMENT_LOAD_ERROR"}):videojs.Flash.onError(z,W);},videojs.Dashas.prototype.loadSrc=function(z,W){var Z,K,R,N=this,M=function(){Z=!1,"boolean"==typeof W.autoplay&&(Z=W.autoplay),W.assetId&&(K=videojs.Dashas.buildMetadataUrl(W),R=videojs.Dashas.buildOptData(W)),N.el().vjs_source(z,Z,K,R);};this.player().isReady===!1?this.player().one("playerready",function(){setTimeout(function(){M();},0);}):setTimeout(function(){M();},0);},videojs.Dashas.now=function(){return b9o.E9v((new Date).getTime(),1e3);},videojs.Dashas.isSupported=function(){var z=videojs.Flash.version();return b9o.q9v(z[0],11)||b9o.J9v(11,z[0])&&b9o.H9v(z[1],5);},videojs.Dashas.canPlaySource=function(z){return b9o.V9v("application/dash+xml",z.type)?"maybe":"";},videojs.Dashas.prototype.setSubsTrack=function(z){this.player().setTextTrack(z);},videojs.Dashas.prototype.setAudioTrack=function(z){this.el().vjs_setProperty("forcedAudioLang",z);},videojs.Dashas.prototype.setCurrentTime=function(z){this.el().vjs_setProperty("currentTime",z);},videojs.Dashas.prototype.currentTime=function(){if(!this.el().vjs_getProperty)return 0;if(b9o.x9v(null,this.cache_.currentTime.value)&&this.updateCurrentTime(),this.cache_.playing){var z=b9o.m9v(videojs.Dashas.now(),this.cache_.currentTime.timestamp);return b9o.X9v(z,5)&&(this.updateCurrentTime(),z=b9o.g9v(videojs.Dashas.now(),this.cache_.currentTime.timestamp)),this.cache_.currentTime.value+z;}return this.cache_.currentTime.value;},videojs.Dashas.prototype.buffered=function(){if(!this.el().vjs_getProperty)return 0;var z=b9o.f9v(videojs.Dashas.now(),this.cache_.buffered.timestamp);return b9o.h9v(z,5)&&(this.cache_.buffered.value=videojs.createTimeRange(0,this.el().vjs_getProperty("buffered")),this.cache_.buffered.timestamp=videojs.Dashas.now()),this.cache_.buffered.value;},videojs.Dashas.prototype.play=function(){this.initialized_===!1?(this.player().addClass("vjs-waiting"),this.player().removeChild("bigPlayButton"),this.playPressed_=!0):videojs.Flash.prototype.play.call(this);},videojs.Dashas.prototype.resetCache=function(){this.cache_.currentTime.value=null,this.cache_.currentTime.timestamp=0,this.cache_.buffered.value=null,this.cache_.buffered.timestamp=0;},videojs.Dashas.prototype.updateCurrentTime=function(){this.cache_.currentTime.value=this.el().vjs_getProperty("currentTime"),this.cache_.currentTime.timestamp=videojs.Dashas.now();},videojs.Dashas.prototype.unmarkPlaying=function(){this.cache_.playing=!1;},videojs.Dashas.prototype.markPlay=function(){this.cache_.playing=!0;},videojs.Dashas.prototype.markPlaying=function(){this.player().paused()||(this.cache_.playing=!0);},videojs.Dashas.prototype.markInitializedAndPlayIfNeeded=function(){this.initialized_=!0,this.playPressed_===!0&&(this.playPressed_=!1,this.play());},videojs.Dashas.prototype.duration=function(){var z=this.el().vjs_getProperty("duration");return b9o.C9v(0,z)?z:z+1;},window.Silverlight||(window.Silverlight={}),Silverlight._silverlightCount=0,Silverlight.__onSilverlightInstalledCalled=!1,Silverlight.fwlinkRoot="http://go2.microsoft.com/fwlink/?LinkID=",Silverlight.__installationEventFired=!1,Silverlight.onGetSilverlight=null,Silverlight.onSilverlightInstalled=function(){window.location.reload(!1);},Silverlight.isInstalled=function(W){void 0==W&&(W=null);var Z=!1;try{var K=function(){N=!0;};var R=null,N=!1;if(window.ActiveXObject)try{R=new ActiveXObject("AgControl.AgControl"),b9o.W5A(null,W)?Z=!0:R.IsVersionSupported(W)&&(Z=!0),R=null;}catch(z){var M=function(){N=!0;};M();}else K();if(N){var P=function(){Z=!0;};var A=navigator.plugins["Silverlight Plug-In"];if(A)if(b9o.R5A(null,W))P();else{var y=A.description;b9o.M5A("1.0.30226.2",y)&&(y="2.0.30226.2");for(var E=y.split(".");b9o.b5A(E.length,3);)E.pop();for(;b9o.i5A(E.length,4);)E.push(0);for(var B=W.split(".");b9o.T5A(B.length,4);)B.pop();var G,q,Y=0;do G=parseInt(B[Y]),q=parseInt(E[Y]),Y++;while(b9o.B5A(Y,B.length)&&b9o.G5A(G,q));b9o.O5A(q,G)&&!isNaN(G)&&(Z=!0);}}}catch(z){var O=function(){Z=!1;};O();}return Z;},Silverlight.WaitForInstallCompletion=function(){if(!Silverlight.isBrowserRestartRequired&&Silverlight.onSilverlightInstalled){try{navigator.plugins.refresh();}catch(z){}Silverlight.isInstalled(null)&&!Silverlight.__onSilverlightInstalledCalled?(Silverlight.onSilverlightInstalled(),Silverlight.__onSilverlightInstalledCalled=!0):setTimeout(Silverlight.WaitForInstallCompletion,3e3);}},Silverlight.__startup=function(){if(navigator.plugins.refresh(),Silverlight.isBrowserRestartRequired=Silverlight.isInstalled(null),Silverlight.isBrowserRestartRequired){if(window.navigator.mimeTypes){var z=navigator.mimeTypes["application/x-silverlight-2"],W=navigator.mimeTypes["application/x-silverlight-2-b2"],Z=navigator.mimeTypes["application/x-silverlight-2-b1"],K=Z;W&&(K=W),z||!Z&&!W?z&&K&&z.enabledPlugin&&K.enabledPlugin&&b9o.Q5A(z.enabledPlugin.description,K.enabledPlugin.description)&&(Silverlight.__installationEventFired||(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0)):Silverlight.__installationEventFired||(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0);}}else Silverlight.WaitForInstallCompletion(),Silverlight.__installationEventFired||(Silverlight.onInstallRequired(),Silverlight.__installationEventFired=!0);Silverlight.disableAutoStartup||(window.removeEventListener?window.removeEventListener("load",Silverlight.__startup,!1):window.detachEvent("onload",Silverlight.__startup));},Silverlight.disableAutoStartup||(window.addEventListener?window.addEventListener("load",Silverlight.__startup,!1):window.attachEvent("onload",Silverlight.__startup)),Silverlight.createObject=function(W,Z,K,R,N,M,P){var A={},y=R,E=N;if(A.version=y.version,y.source=W,A.alt=y.alt,M&&(y.initParams=M),y.isWindowless&&!y.windowless&&(y.windowless=y.isWindowless),y.framerate&&!y.maxFramerate&&(y.maxFramerate=y.framerate),K&&!y.id&&(y.id=K),delete  y.ignoreBrowserVer,delete  y.inplaceInstallPrompt,delete  y.version,delete  y.isWindowless,delete  y.framerate,delete  y.data,delete  y.src,delete  y.alt,Silverlight.isInstalled(A.version)){for(var B in E)if(E[B]){if(b9o.F5A("onLoad",B)&&"function"==typeof E[B]&&b9o.a5A(1,E[B].length)){var G=E[B];E[B]=function(z){return G(document.getElementById(K),P,z);};}var q=Silverlight.__getHandlerName(E[B]);if(b9o.v5A(null,q))throw "typeof events."+B+" must be 'function' or 'string'";y[B]=q,E[B]=null;}slPluginHTML=Silverlight.buildHTML(y);}else slPluginHTML=Silverlight.buildPromptHTML(A);return Z?void (Z.innerHTML=slPluginHTML):slPluginHTML;},Silverlight.buildHTML=function(z){var W=[];W.push('<object type="application/x-silverlight" data="data:application/x-silverlight,"'),b9o.I5A(null,z.id)&&W.push(' id="'+Silverlight.HtmlAttributeEncode(z.id)+'"'),b9o.d5A(null,z.width)&&W.push(' width="'+z.width+'"'),b9o.t5A(null,z.height)&&W.push(' height="'+z.height+'"'),W.push(" >"),delete  z.id,delete  z.width,delete  z.height;for(var Z in z)z[Z]&&W.push('<param name="'+Silverlight.HtmlAttributeEncode(Z)+'" value="'+Silverlight.HtmlAttributeEncode(z[Z])+'" />');return W.push("</object>"),W.join("");},Silverlight.createObjectEx=function(z){var W=z,Z=Silverlight.createObject(W.source,W.parentElement,W.id,W.properties,W.events,W.initParams,W.context);return b9o.L5A(null,W.parentElement)?Z:void 0;},Silverlight.buildPromptHTML=function(z){var W="",Z=Silverlight.fwlinkRoot,K=z.version;return z.alt?W=z.alt:(K||(K=""),W="<a href='javascript:Silverlight.getSilverlight(\"{1}\");' style='text-decoration: none;'><img src='{2}' alt='Get Microsoft Silverlight' style='border-style: none'/></a>",W=W.replace("{1}",K),W=W.replace("{2}",Z+"108181")),W;},Silverlight.getSilverlight=function(z){Silverlight.onGetSilverlight&&Silverlight.onGetSilverlight();var W="",Z=String(z).split(".");if(b9o.z3A(Z.length,1)){var K=function(){W=isNaN(R)||b9o.K3A(2,R)?"1.0":Z[0]+"."+Z[1];};var R=parseInt(Z[0]);K();}var N="";W.match(/^\d+\056\d+$/)&&(N="&v="+W),Silverlight.followFWLink("149156"+N);},Silverlight.followFWLink=function(z){var W=function(){top.location=Silverlight.fwlinkRoot+String(z);};W();},Silverlight.HtmlAttributeEncode=function(z){var W,Z="";if(b9o.N3A(null,z))return null;for(var K=0;b9o.j3A(K,z.length);K++)W=z.charCodeAt(K),b9o.y3A(W,96)&&b9o.A3A(123,W)||b9o.Y3A(W,64)&&b9o.l3A(91,W)||b9o.n3A(W,43)&&b9o.c3A(58,W)&&b9o.k3A(47,W)||b9o.D3A(95,W)?Z+=String.fromCharCode(W):Z=Z+"&#"+W+";";return Z;},Silverlight.default_error_handler=function(W,Z){var K=function(z){R=z.ErrorCode;},R,N=Z.ErrorType;K(Z);var M="\nSilverlight error message     \n";M+="ErrorCode: "+R+"\n",M+="ErrorType: "+N+"       \n",M+="Message: "+Z.ErrorMessage+"     \n",b9o.w3A("ParserError",N)?(M+="XamlFile: "+Z.xamlFile+"     \n",M+="Line: "+Z.lineNumber+"     \n",M+="Position: "+Z.charPosition+"     \n"):b9o.u3A("RuntimeError",N)&&(b9o.s3A(0,Z.lineNumber)&&(M+="Line: "+Z.lineNumber+"     \n",M+="Position: "+Z.charPosition+"     \n"),M+="MethodName: "+Z.methodName+"     \n"),alert(M);},Silverlight.__cleanup=function(){var W=function(z){window["__slEvent"+Z]=z;};for(var Z=b9o.e3A(Silverlight._silverlightCount,1);b9o.U3A(Z,0);Z--)W(null);Silverlight._silverlightCount=0,window.removeEventListener?window.removeEventListener("unload",Silverlight.__cleanup,!1):window.detachEvent("onunload",Silverlight.__cleanup);},Silverlight.__getHandlerName=function(W){var Z=function(z){R=z;},K=function(z){R=z;},R="";if("string"==typeof W)Z(W);else if("function"==typeof W){b9o.o2A(0,Silverlight._silverlightCount)&&(window.addEventListener?window.addEventListener("onunload",Silverlight.__cleanup,!1):window.attachEvent("onunload",Silverlight.__cleanup));var N=Silverlight._silverlightCount++;R="__slEvent"+N,window[R]=W;}else K(null);return R;},Silverlight.onRequiredVersionAvailable=function(){},Silverlight.onRestartRequired=function(){},Silverlight.onUpgradeRequired=function(){},Silverlight.onInstallRequired=function(){},Silverlight.IsVersionAvailableOnError=function(W,Z){var K=!1;try{b9o.Z2A(8001,Z.ErrorCode)||Silverlight.__installationEventFired?b9o.p2A(8002,Z.ErrorCode)||Silverlight.__installationEventFired?b9o.P2A(5014,Z.ErrorCode)||b9o.r2A(2106,Z.ErrorCode)?Silverlight.__verifySilverlight2UpgradeSuccess(Z.getHost())&&(K=!0):K=!0:(Silverlight.onRestartRequired(),Silverlight.__installationEventFired=!0):(Silverlight.onUpgradeRequired(),Silverlight.__installationEventFired=!0);}catch(z){}return K;},Silverlight.IsVersionAvailableOnLoad=function(W){var Z=!1;try{Silverlight.__verifySilverlight2UpgradeSuccess(W.getHost())&&(Z=!0);}catch(z){}return Z;},Silverlight.__verifySilverlight2UpgradeSuccess=function(W){var Z=!1,K="2.0.31005",R=null;try{W.IsVersionSupported(K+".99")?(R=Silverlight.onRequiredVersionAvailable,Z=!0):R=W.IsVersionSupported(K+".0")?Silverlight.onRestartRequired:Silverlight.onUpgradeRequired,R&&!Silverlight.__installationEventFired&&(R(),Silverlight.__installationEventFired=!0);}catch(z){}return Z;};var fPlayer=null;videojs.Silverlight=videojs.MediaTechController.extend({init:function(G,q,Y){var O=function(){},V,w;videojs.MediaTechController.call(this,G,q,Y),V=new castLabsDashJS.classes.Utils,w=q.customData?V.B64Tools.encode(JSON.stringify(q.customData)):"",q.autoplay=!!G.options().autoplay,G.options().children.bigPlayButton=!q.autoplay;var H=this;this.player().one(["play"],function(){H.player().loadingSpinner.hide();}),window.isIE10&&window.isIE10===!0&&(videojs.Player.prototype.requestFullscreen=function(){this.isFullscreen(!0),this.enterFullWindow(),this.trigger("fullscreenchange");},videojs.Player.prototype.exitFullscreen=function(){this.isFullscreen(!1),this.exitFullWindow(),this.trigger("fullscreenchange");}),H.cache={playerState:videojs.Silverlight.PlayerStates.IDLE,currentTime:0,duration:0,volume:1,muted:!1},H.initialized=!1,H.playPressed=!1,b9o.S2A(null,fPlayer)&&G.el_.parentElement.parentElement.removeChild(G.el_.parentElement),G.on("adsready",function(){H.player().el().childNodes[0].style.height="0%",b9o.E2A(null,fPlayer)?G.one("ready",function(){setTimeout(function(){fPlayer.Pause();},0);}):setTimeout(function(){fPlayer.Pause();},0);}),G.on(["adend","adserror","adscancelled"],function(){H.player().el().childNodes[0].style.height="100%";});var D=q.parentEl,F=this.el_=this.createEl("div",{id:"_temp_silverlight"}),Q=(G.id()+"_silverlight_api",q.source?q.source.src:"");b9o.q2A("",Q)&&(G.options().children.bigPlayButton=!1),H.url=Q,CL.manifest.url=Q,laUrl=q.playReadyLicenseServerURL?q.playReadyLicenseServerURL:"",D.insertBefore(F,D.firstChild),onSilverlightLoad=function(){},onSilverlightError=function(){},onPlayerReady=function(K){var R=function(z){fPlayer=z;};R(K);var N="SilverlightPlayer",M=document.getElementById(N),P=(M.content,function(){H.cache.playerState=videojs.Silverlight.PlayerStates.STOPPED,H.cache.currentTime=H.cache.duration,H.player().trigger("ended");}),A=function(z){H.initialized=!0,H.cache.duration=z.EndPositionSeconds,H.setVolume(H.cache.volume),H.player().trigger("loadstart"),H.player().trigger("loadedmetadata"),H.player().trigger("loadeddata"),H.player().trigger("durationchange"),q.autoplay===!0?H.play():H.playPressed===!0&&(H.playPressed=!1,H.play());},y=function(W){var Z=function(z){H.cache.currentTime=z.PlaybackPositionSeconds;};Z(W);},E=function(W){var Z=function(z){H.cache.playerState=z.Silverlight.PlayerStates.PAUSED;};switch(W.PlayState){case 0:break;case 1:H.cache.playerState=videojs.Silverlight.PlayerStates.BUFFERING,H.initialized===!0&&H.player().trigger("waiting");break;case 2:H.cache.playerState=videojs.Silverlight.PlayerStates.BUFFERING,H.player().trigger("waiting");break;case 3:H.cache.playerState=videojs.Silverlight.PlayerStates.PLAYING,H.player().trigger("play");break;case 4:Z(videojs);break;case 5:H.cache.playerState=videojs.Silverlight.PlayerStates.STOPPED,H.player().trigger("pause");}},B=function(){H.player().trigger("seeked"),H.player().trigger("timeupdate");};H.onPlayStateChanged=E,H.onProgressChanged=y,H.onMediaOpened=A,H.onMediaEnded=P,H.onSeekCompleted=B,fPlayer.addEventListener("MediaEnded",P),fPlayer.addEventListener("PlayStateChanged",E),fPlayer.addEventListener("PlaybackPositionChanged",y),fPlayer.addEventListener("MediaOpened",A),fPlayer.addEventListener("SeekCompleted",B),H.triggerReady();};var x=!0,v=!0,u="InteractiveActivationMode=None,";q.useNativeSilverlightControls===!0&&(x=!1,v=!1,G.controls(!1));var J=u+"CollapsedControlBar="+x+",scriptableName=fPlayer,mediaurl="+Q+",PlayerGraphVisibility=hidden,drmCustomData="+w+",LicenseServerUriOverride="+laUrl+",AutoPlay=false,AutoLoad=true";b9o.J2A("",w)&&(J=J.replace(/,drmCustomData=/gi,"")),b9o.H2A("",laUrl)&&(J=J.replace(/,LicenseServerUriOverride=/gi,"")),b9o.V2A("",Q)&&(J=J.replace(/,mediaurl=/gi,""));{var L='<div style="height:100%;width:100%;border:0px"><object id="SilverlightPlayer"  data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%"><param name="source" value="'+q.silverlightFile+'"/><param name="onError" value="onSilverlightError" /><param name="onLoad" value="onSilverlightLoad" /><param name="minRuntimeVersion" value="4.0.50826.0" /><param name="autoUpgrade" value="false" /><param name="enableGPUAcceleration" value="true" /><param name="windowless" value="'+v+'" /><param name="background" value="#000000" /><param name="maxframerate" value="25" /><param name="InteractiveActivationMode" value="None" /><param name="InitParams" value="'+J+'"/></object><iframe style="visibility:hidden;height:0;width:0;border:0px"></iframe></div>',I=L,X=this.createEl("div",{innerHTML:I}).childNodes[0];F.parentNode;}F.parentNode.replaceChild(X,F);G.enableABRSwitching=videojs.bind(this,O),G.safeDispose=G.dispose,G.loadSrc=function(Z){var K=function(){var z,W=fPlayer.CreatePlaylistItem(Z,"","Title","Description");W.DeliveryMethod="AdaptiveStreaming",z=fPlayer.CreatePlaylist(),z.AddPlaylistItem(W),fPlayer.SetPlaylist(z),G.volume(G.orgVolume),G.ads&&G.ads.contentSrc&&G.trigger({type:"contentupdate",oldValue:G.ads.contentSrc,newValue:Z}),CL.manifest.url=Z;};b9o.x2A(null,fPlayer)?G.one("ready",function(){setTimeout(function(){K();},0);}):setTimeout(function(){K();},0);},this.el_=X;}}),videojs.Silverlight.PlayerStates={IDLE:0,STOPPED:1,PLAYING:2,PAUSED:3,BUFFERING:4,SEEKING:5},videojs.Silverlight.canPlaySource=function(z){return b9o.m2A("application/dash+xml",z.type)?"maybe":"";},videojs.Silverlight.prototype.play=function(){this.initialized===!1?(this.player().removeChild("bigPlayButton"),this.playPressed=!0):this.stopped()?fPlayer.GoToPlaylistItem(0):setTimeout(function(){fPlayer.Play();},0);},videojs.Silverlight.prototype.pause=function(){var z=this;setTimeout(function(){fPlayer.Pause(),z.player().trigger("pause");},0);},videojs.Silverlight.prototype.seeking=function(){return b9o.X2A(this.cache.playerState,videojs.Silverlight.PlayerStates.SEEKING);},videojs.Silverlight.prototype.paused=function(){return b9o.g2A(this.cache.playerState,videojs.Silverlight.PlayerStates.PAUSED)||this.stopped();},videojs.Silverlight.prototype.stopped=function(){return b9o.f2A(this.cache.playerState,videojs.Silverlight.PlayerStates.STOPPED);},videojs.Silverlight.prototype.ended=function(){return b9o.h2A(this.cache.playerState,videojs.Silverlight.PlayerStates.STOPPED)&&b9o.C2A(this.cache.currentTime,this.cache.duration);},videojs.Silverlight.prototype.currentTime=function(){return Math.min(this.cache.currentTime,this.cache.duration);},videojs.Silverlight.prototype.setCurrentTime=function(z){this.cache.playerState=videojs.Silverlight.PlayerStates.SEEKING,this.player().trigger("seeking"),this.cache.currentTime=z,fPlayer.SeekToPosition(z);},videojs.Silverlight.prototype.duration=function(){return this.cache.duration;},videojs.Silverlight.prototype.buffered=function(){},videojs.Silverlight.prototype.muted=function(){return this.cache.muted;},videojs.Silverlight.prototype.setMuted=function(z){this.setVolume(z?0:this.cache.volume);},videojs.Silverlight.prototype.volume=function(){return this.cache.muted?0:this.cache.volume;},videojs.Silverlight.prototype.setVolume=function(z){this.cache.muted=b9o.W8A(0,z),b9o.R8A(z,0)&&(this.cache.volume=z),fPlayer.SetVolume(z),this.player().trigger("volumechange",z);},videojs.Silverlight.prototype.buffered=function(){return null;},videojs.Silverlight.prototype.supportsFullScreen=function(){return !1;},videojs.Silverlight.prototype.enterFullScreen=function(){return !1;},videojs.Silverlight.isSupported=function(){return Silverlight.isInstalled("2.0");},videojs.Silverlight.prototype.dispose=function(){fPlayer=null,videojs.MediaTechController.prototype.dispose.call(this);},videojs.Silverlight.prototype.src=function(z){return z?void (CL.manifest.url="string"==typeof z?z:z.url):CL.manifest.url;},videojs.Silverlight.prototype.currentSrc=function(){return CL.manifest.url||"";},"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Microsoft.XMLHTTP");}catch(z){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0");}catch(z){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0");}catch(z){}try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(z){}throw  new Error("This browser does not support XMLHttpRequest.");});var XHTML_NS="http://www.w3.org/1999/xhtml",DFXP_NS="http://www.w3.org/ns/ttml",DFXP_NS_Parameter="http://www.w3.org/ns/ttml#parameter",DFXP_NS_Style="http://www.w3.org/ns/ttml#styling",DFXP_NS_Style_Extensions="http://www.w3.org/ns/ttml#style-extension",DFXP_NS_Metadata="http://www.w3.org/ns/ttml#metadata",DFXP_NS_Metadata_Extensions="http://www.w3.org/ns/ttml#metadata-extension",DFXP_NS_SMPTE="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",DFXP_TIME_CONTAINER_PAR=1,DFXP_TIME_CONTAINER_SEQ=2,HTML5Caption_debug=!1;HTML5Caption_toSeconds=function(z){var W=0;if(z){var Z=function(){W=b9o.b8A(60,W)+parseFloat(R[N].replace(",","."));},K=function(){W=b9o.M8A(60,W)+parseFloat(R[N].replace(",","."));};var R=z.split(":");switch(R.length){case 0:case 1:case 2:break;case 3:for(var N=0;b9o.i8A(3,N);N++)Z();break;case 4:for(var N=0;b9o.T8A(3,N);N++)K();W+=b9o.B8A(.04,parseFloat(R[N].replace(",",".")));}}return W;},HTML5Caption_toPixels=function(z){if(z){var W=z.indexOf("px");if(b9o.G8A(W,0))return b9o.O8A(1,z.substring(0,W));}return 0;},HTML5Caption_strip=function(z){return z.replace(/^\s+|\s+$/g,"");},HTML5Caption_convertDFXP2HTMLAttributes=function(W,Z,K,R,N){var M;W.hasAttributeNS(XHTML_NS,"style")&&(Z.style.cssText=W.getAttributeNS(XHTML_NS,"style"));var P=W.getElementsByTagNameNS(DFXP_NS_SMPTE,"image");if(P&&b9o.Q8A(P.length,0),M=W.getAttribute("smpte:backgroundImage"),W.hasAttribute("smpte:backgroundImage")){var A=W.ownerDocument.getElementById(M);if(b9o.F8A(null,A)&&W.ownerDocument.getElementsByTagNameNS)for(var P=W.ownerDocument.getElementsByTagNameNS(DFXP_NS_SMPTE,"image"),y=0;b9o.a8A(y,P.length);y++){var E=P.item(y),B=E.getAttribute("xml:id");if(M.indexOf(B)>-1){var G=function(z){A=z;};G(E);break;}}if(b9o.v8A(null,A)){var q=A.getAttribute("imagetype").toLowerCase(),Y=A.getAttribute("encoding").toLowerCase(),O=A.innerHTML.trim();Z.style.setProperty("background-image","url(data:image/"+q+";"+Y+","+O+")",""),Z.style.setProperty("position","absolute",""),Z.style.setProperty("left","0em",""),Z.style.setProperty("right","0em",""),Z.style.setProperty("bottom","0em",""),Z.style.setProperty("background-repeat","no-repeat",""),Z.style.setProperty("background-size","contain",""),Z.style.setProperty("background-position","center bottom",""),Z.style.setProperty("width","100%",""),Z.style.setProperty("height","100%",""),Z.style.setProperty("display","block",""),Z.df_displayValue="block",HTML5Caption_convertDFXP2HTMLAttributes(A,Z,K,R,N);}else HTML5Caption_debug&&alert("can't find image "+M);}if(M=W.getAttribute("region"),W.hasAttribute("region")){var A=W.ownerDocument.getElementById(M);if(b9o.I8A(null,A)&&W.ownerDocument.getElementsByTagNameNS)for(var V=W.ownerDocument.getElementsByTagNameNS(DFXP_NS,"region"),y=0;b9o.d8A(y,V.length);y++){var E=V.item(y),B=E.getAttribute("xml:id");if(b9o.t8A(B,M)){var w=function(z){A=z;};w(E);break;}}if(b9o.L8A(null,A)){if(Z.style.setProperty("overflow","hidden",""),HTML5Caption_convertDFXP2HTMLAttributes(A,Z,K,R,N),A.getElementsByTagNameNS)for(var H=A.getElementsByTagNameNS(DFXP_NS,"style"),y=0;b9o.z1A(y,H.length);y++){var D=H.item(y);HTML5Caption_convertDFXP2HTMLAttributes(D,Z,K,R,N);}}else HTML5Caption_debug&&alert("can't find region "+M);}if(W.hasAttributeNS(DFXP_NS,"style")){M=W.getAttributeNS(DFXP_NS,"style");var F=M.split(" ");switch(F.length){case 1:var A=W.ownerDocument.getElementById(M);if(b9o.K1A(null,A)&&W.ownerDocument.getElementsByTagNameNS)for(var H=W.ownerDocument.getElementsByTagNameNS(DFXP_NS,"style"),y=0;b9o.N1A(y,H.length);y++){var D=H.item(y),B=D.getAttribute("xml:id");if(b9o.j1A(B,M)){var Q=function(z){A=z;};Q(D);break;}}break;default:HTML5Caption_debug&&alert("@@TODO IDREFS");}b9o.y1A(null,A)?HTML5Caption_convertDFXP2HTMLAttributes(A,Z,K,R,N):HTML5Caption_debug&&alert("can't find "+M);}if(W.hasAttributeNS(DFXP_NS_SMPTE,"backgroundImageHorizontal")||W.hasAttributeNS(DFXP_NS_SMPTE,"backgroundImageVertical")){var x="",v="";x=W.getAttributeNS(DFXP_NS_SMPTE,"backgroundImageHorizontal"),v=W.getAttributeNS(DFXP_NS_SMPTE,"backgroundImageVertical"),Z.style.setProperty("background-position",x+" "+v,"");}if(W.hasAttributeNS(DFXP_NS_Style,"backgroundColor")&&Z.style.setProperty("background-color",W.getAttributeNS(DFXP_NS_Style,"backgroundColor"),""),W.hasAttributeNS(DFXP_NS_Style,"color")&&Z.style.setProperty("color",W.getAttributeNS(DFXP_NS_Style,"color"),""),W.hasAttributeNS(DFXP_NS_Style,"direction")&&Z.style.setProperty("direction",W.getAttributeNS(DFXP_NS_Style,"direction"),""),M=W.getAttributeNS(DFXP_NS_Style,"display"),b9o.A1A("none",M))Z.style.setProperty("display","none",""),Z.df_displayValue="none";else{var u;u=b9o.Y1A("span",Z.localName)?"inline":"block",(W.hasAttributeNS(DFXP_NS_Style,"display")||!Z.df_displayValue)&&(Z.style.setProperty("display",u,""),Z.df_displayValue=u);}if(W.hasAttributeNS(DFXP_NS_Style,"fontFamily")&&Z.style.setProperty("font-family",W.getAttributeNS(DFXP_NS_Style,"fontFamily"),""),W.hasAttributeNS(DFXP_NS_Style,"fontSize")&&Z.style.setProperty("font-size",W.getAttributeNS(DFXP_NS_Style,"fontSize"),""),W.hasAttributeNS(DFXP_NS_Style,"fontStyle")&&Z.style.setProperty("font-style",W.getAttributeNS(DFXP_NS_Style,"fontStyle"),""),W.hasAttributeNS(DFXP_NS_Style,"fontWeight")&&Z.style.setProperty("font-weight",W.getAttributeNS(DFXP_NS_Style,"fontWeight"),""),M=W.getAttributeNS(DFXP_NS_Style,"lineHeight"),W.hasAttributeNS(DFXP_NS_Style,"lineHeight")&&(b9o.l1A("normal",M)&&(M="100%"),Z.style.setProperty("line-height",M,"")),M=W.getAttributeNS(DFXP_NS_Style,"opacity"),W.hasAttributeNS(DFXP_NS_Style,"opacity")&&Z.style.setProperty("opacity",M,""),M=W.getAttributeNS(DFXP_NS_Style,"overflow"),W.hasAttributeNS(DFXP_NS_Style,"overflow")&&(b9o.n1A("dynamic",M)?Z.style.setProperty("overflow","scroll",""):Z.style.setProperty("overflow",M,"")),M=W.getAttributeNS(DFXP_NS_Style,"extent"),W.hasAttributeNS(DFXP_NS_Style,"extent")&&b9o.c1A("auto",M)){var F=M.split(" ");b9o.k1A(F.length,0)&&Z.style.setProperty("width",F[0],""),b9o.D1A(F.length,1)&&Z.style.setProperty("height",F[1],""),b9o.w1A(F.length,0)&&(Z.dfxp_width=F[0]),b9o.u1A(F.length,1)&&(Z.dfxp_height=F[1]);}if(M=W.getAttributeNS(DFXP_NS_Style,"origin"),W.hasAttributeNS(DFXP_NS_Style,"origin")&&b9o.s1A("auto",M)&&b9o.e1A("inherit",M)){for(var F=M.split(" "),J=Z;b9o.U1A(null,J);){var L=function(z){J=z.parentNode;};if(J.hasOrigin){var I=function(){K=!0;};I();break;}L(J);}K||(Z.style.setProperty("position","absolute",""),b9o.o6A(F.length,0)&&Z.style.setProperty("left",F[0].indexOf("%")>-1?F[0]:N+HTML5Caption_toPixels(F[0])+"px",""),b9o.Z6A(F.length,1)&&Z.style.setProperty("top",F[1].indexOf("%")>-1?F[1]:N+HTML5Caption_toPixels(F[1])+"px","")),Z.hasOrigin=!0;}M=W.getAttributeNS(DFXP_NS_Style,"padding"),W.hasAttributeNS(DFXP_NS_Style,"padding")&&Z.style.setProperty("padding",M,""),M=W.getAttributeNS(DFXP_NS_Style,"textAlign"),W.hasAttributeNS(DFXP_NS_Style,"textAlign")&&(b9o.p6A("start",M)||b9o.P6A("left",M)?Z.style.setProperty("text-align","left",""):b9o.r6A("end",M)||b9o.S6A("right",M)?Z.style.setProperty("text-align","right",""):b9o.E6A("center",M)?Z.style.setProperty("text-align","center",""):Z.style.setProperty("text-align",M,"")),M=W.getAttributeNS(DFXP_NS_Style,"textDecoration"),W.hasAttributeNS(DFXP_NS_Style,"textDecoration")&&(b9o.q6A("noUnderline",M)||b9o.J6A("noOverline",M)||b9o.H6A("noLineThrough",M)?M="none":b9o.V6A("lineThrough",M)&&(M="line-through"),Z.style.setProperty("text-decoration",M,"")),M=W.getAttributeNS(DFXP_NS_Style,"unicodeBidi"),W.hasAttributeNS(DFXP_NS_Style,"unicodeBidi")&&(b9o.x6A("bidiOverride",M)&&(M="bidi-override"),Z.style.setProperty("unicode-bidi",M,"")),M=W.getAttributeNS(DFXP_NS_Style,"visibility"),W.hasAttributeNS(DFXP_NS_Style,"visibility")&&Z.style.setProperty("visibility",M,""),M=W.getAttribute("xml:space"),W.hasAttribute("xml:space")&&(M=b9o.m6A("preserve",M)?"pre":"normal",Z.style.setProperty("white-space",M,"")),M=W.getAttributeNS(DFXP_NS_Style,"wrapOption"),W.hasAttributeNS(DFXP_NS_Style,"wrapOption")&&b9o.X6A("noWrap",M)&&Z.style.setProperty("white-space","nowrap","");},HTML5Caption_convertDFXP2HTML=function(W,Z,K,R){var N=null;if(b9o.g6A(0,W.aDur))return null;if(b9o.f6A(3,W.nodeType)||b9o.h6A(4,W.nodeType)){if(b9o.C6A("p",W.parentNode.localName)&&b9o.W7A("span",W.parentNode.localName))return null;if(b9o.R7A(W.parentNode.tContainer,DFXP_TIME_CONTAINER_SEQ))return null;N=document.createTextNode(W.data);}else if(b9o.M7A(1,W.nodeType)){if(b9o.b7A(W.namespaceURI,DFXP_NS_Metadata_Extensions)||b9o.i7A(W.namespaceURI,DFXP_NS_Metadata))return null;if(b9o.T7A(W.namespaceURI,DFXP_NS)){if(b9o.B7A("head",W.localName))return null;if(b9o.G7A(W.aDur,0))return null;if(b9o.O7A("span",W.localName))N=document.createElementNS(XHTML_NS,"span");else if(b9o.Q7A("p",W.localName))N=document.createElementNS(XHTML_NS,"p");else if(b9o.F7A("div",W.localName))N=document.createElementNS(XHTML_NS,"div");else if(b9o.a7A("br",W.localName))N=document.createElementNS(XHTML_NS,"br");else{if(b9o.v7A("body",W.localName))return null;N=document.createElementNS(XHTML_NS,"div"),N.className="dfxp";}}else if(b9o.I7A(W.namespaceURI,XHTML_NS))try{N=document.importNode(W,!0);}catch(z){return null;}}if(N.aBegin=W.aBegin,N.aEnd=W.aEnd,HTML5Caption_debug&&b9o.d7A(1,N.nodeType)){N.setAttribute("relative_begin",W.rBegin),N.setAttribute("relative_end",W.rEnd),N.setAttribute("relative_dur",W.rDur),N.setAttribute("active_begin",W.aBegin),N.setAttribute("active_end",W.aEnd),N.setAttribute("active_dur",W.aDur);var M=null;b9o.t7A(W.tContainer,DFXP_TIME_CONTAINER_PAR)?M="par":b9o.L7A(W.tContainer,DFXP_TIME_CONTAINER_SEQ)&&(M="seq"),b9o.z0A(null,M)&&N.setAttribute("timeContainer",M);}if(W.tContainer){N.hasOrigin=!1,HTML5Caption_convertDFXP2HTMLAttributes(W,N,Z,K,R),HTML5Caption_debug&&(b9o.K0A("p",N.localName)||b9o.N0A("div",N.localName)||b9o.j0A("span",N.localName))&&N.appendChild(document.createTextNode("["+N.aBegin+"-"+N.aEnd+"]"));for(var P=W.childNodes,A=0;b9o.y0A(A,P.length);A++){var y=HTML5Caption_convertDFXP2HTML(P.item(A),N.hasOrigin,K,R);b9o.A0A(null,y)&&N.appendChild(y);}}return N;};var TIME_INDEFINITE=-1,TIME_INFINITY_AND_BEYOND=b9o.Y0A(1,0);HTML5Caption_convertDFXPDuration=function(z){var W=0;if(b9o.l0A(null,z)||b9o.n0A("",z))return TIME_INDEFINITE;if(-1!=z.indexOf(":"))return HTML5Caption_toSeconds(z);if(-1!=(W=z.indexOf("h")))return b9o.c0A(3600,parseFloat(z.substring(0,W)));if(-1!=(W=z.indexOf("m")))return b9o.k0A(60,parseFloat(z.substring(0,W)));if(-1!=(W=z.indexOf("s")))return parseFloat(z.substring(0,W));if(-1!=(W=z.indexOf("ms")))return b9o.D0A(parseFloat(z.substring(0,W)),1e3);if(-1!=(W=z.indexOf("t")))throw  new Error("tick duration is not supported");if(-1!=(W=z.indexOf("f")))throw  new Error("frame duration is not supported");},HTML5Caption_computeRelativeTimeIntervals=function(z){if(b9o.w0A(z.namespaceURI,DFXP_NS)||b9o.u0A("body",z.localName)&&b9o.s0A("div",z.localName)&&b9o.e0A("p",z.localName)&&b9o.U0A("span",z.localName))return void (b9o.o4A("p",z.parentNode.localName)&&b9o.Z4A("span",z.parentNode.localName)?(z.rBegin=0,z.rEnd=0,z.rDur=0):b9o.p4A(z.parentNode.tContainer,DFXP_TIME_CONTAINER_SEQ)?(z.rBegin=0,z.rEnd=0,z.rDur=0):b9o.P4A(z.parentNode.tContainer,DFXP_TIME_CONTAINER_PAR)&&(z.rBegin=0,z.rEnd=TIME_INFINITY_AND_BEYOND,z.rDur=TIME_INFINITY_AND_BEYOND));var W=null;z.hasAttribute("timeContainer")?W=z.getAttribute("timeContainer"):z.hasAttributeNS(DFXP_NS,"timeContainer")&&(W=z.getAttributeNS(DFXP_NS,"timeContainer")),z.tContainer=b9o.r4A("seq",W)?DFXP_TIME_CONTAINER_SEQ:DFXP_TIME_CONTAINER_PAR;var Z=null,K=null,R=null;z.hasAttribute("begin")?(Z=z.getAttribute("begin"),K=z.getAttribute("end"),R=z.getAttribute("begin")):z.hasAttributeNS(DFXP_NS,"begin")&&(Z=z.getAttributeNS(DFXP_NS,"begin"),K=z.getAttributeNS(DFXP_NS,"end"),R=z.getAttributeNS(DFXP_NS,"dur"));var N=HTML5Caption_convertDFXPDuration(Z),M=HTML5Caption_convertDFXPDuration(K),P=HTML5Caption_convertDFXPDuration(R);b9o.S4A(N,TIME_INDEFINITE)?b9o.E4A(M,TIME_INDEFINITE)?P=b9o.q4A(M,N):b9o.J4A(P,TIME_INDEFINITE)&&(M=N+P):(N=0,b9o.H4A(M,TIME_INDEFINITE)?P=M:b9o.V4A(P,TIME_INDEFINITE)&&(M=P)),b9o.x4A(0,P)&&(M=TIME_INDEFINITE,P=TIME_INDEFINITE),b9o.m4A(P,TIME_INDEFINITE)&&b9o.X4A(z.parentNode.tContainer,DFXP_TIME_CONTAINER_SEQ)&&(N=0,M=0,P=0),z.rBegin=N,z.rEnd=M,z.rDur=P;for(var A=z.childNodes,y=0;b9o.g4A(y,A.length);y++){var E=A.item(y);HTML5Caption_computeRelativeTimeIntervals(E);}if(b9o.f4A(z.rEnd,TIME_INDEFINITE)){if(b9o.h4A(z.tContainer,DFXP_TIME_CONTAINER_PAR))for(var A=z.childNodes,y=0;b9o.C4A(y,A.length);y++){var E=A.item(y);b9o.W9A(E.rEnd,z.rEnd)&&(z.rEnd=E.rEnd);}else{for(var B=!1,G=0,A=z.childNodes,y=0;!B&&b9o.R9A(y,A.length);y++){var E=A.item(y);b9o.M9A(E.rEnd,TIME_INDEFINITE)&&(B=!0),G+=E.rDur+E.rBegin;}B||(z.rEnd=G);}b9o.b9A(z.rEnd,TIME_INDEFINITE)&&(z.rDur=b9o.i9A(z.rEnd,z.rBegin));}},HTML5Caption_computeActiveTimeIntervals=function(W){b9o.T9A(1,W.nodeType)&&b9o.B9A(W.namespaceURI,DFXP_NS)&&b9o.G9A("body",W.localName)&&HTML5Caption_computeRelativeTimeIntervals(W),W.aBegin=TIME_INDEFINITE,W.aEnd=TIME_INDEFINITE,W.aDur=TIME_INDEFINITE;var Z=W.parentNode;if(b9o.O9A("body",W.localName))W.aBegin=W.rBegin,W.aEnd=W.rEnd;else if(b9o.Q9A(Z.tContainer,DFXP_TIME_CONTAINER_PAR))b9o.F9A(W.rDur,TIME_INDEFINITE)&&(W.aBegin=W.rBegin+W.parentNode.aBegin,W.aEnd=W.rEnd+W.parentNode.aBegin);else if(b9o.a9A(W.rDur,TIME_INDEFINITE)){var K=function(z){R=z.previousSibling;};for(var R=W.previousSibling;b9o.v9A(null,R)&&!R.tContainer;)K(R);b9o.I9A(null,R)?b9o.d9A(R.aDur,TIME_INDEFINITE)&&(W.aBegin=W.rBegin+R.aEnd,W.aEnd=W.rEnd+R.aEnd):b9o.t9A(W.rDur,TIME_INDEFINITE)&&(W.aBegin=W.rBegin+W.parentNode.aBegin,W.aEnd=W.rEnd+W.parentNode.aBegin);}if(b9o.L9A(W.aEnd,TIME_INDEFINITE)&&(b9o.z5X(W.aEnd,W.parentNode.aEnd)&&(W.aEnd=W.parentNode.aEnd),b9o.K5X(W.aBegin,W.aEnd)?(W.aBegin=TIME_INDEFINITE,W.aEnd=TIME_INDEFINITE):W.aDur=b9o.N5X(W.aEnd,W.aBegin)),b9o.j5X(W.aDur,TIME_INDEFINITE)&&W.tContainer)for(var N=W.childNodes,M=0;b9o.y5X(M,N.length);M++)HTML5Caption_computeActiveTimeIntervals(N.item(M));},HTML5Caption_getSubtitleSetRef=function(z,W){if(b9o.A5X(z.aBegin,0)){b9o.Y5X(null,z.parentNode)&&b9o.l5X(z.parentNode.aBegin,0)&&b9o.n5X(z.parentNode.aBegin,z.aBegin)&&b9o.c5X(z.parentNode.aEnd,z.aEnd)||(W[W.length]=z,HTML5Caption_debug||(z.style.display="none"),z.df_isInTime=!1);for(var Z=z.childNodes,K=Z.length,R=0;b9o.k5X(K,R);R++){var N=Z.item(R);b9o.D5X(1,N.nodeType)&&HTML5Caption_getSubtitleSetRef(N,W);}}},HTML5Caption_getSubtitleSet=function(z){var W=new Array;return HTML5Caption_getSubtitleSetRef(z,W),W;},castLabs.parseUrl=function(W){var Z=function(z){P[M[A]]=z[M[A]];},K,R,N,M,P;M=["protocol","hostname","port","pathname","search","hash","host"],R=videojs.Component.prototype.createEl("a",{href:W}),N=b9o.w5X("",R.host)&&b9o.u5X("file:",R.protocol),N&&(K=videojs.Component.prototype.createEl("div"),K.innerHTML='<a href="'+W+'"></a>',R=K.firstChild,K.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(K)),P={};for(var A=0;b9o.s5X(A,M.length);A++)Z(R);return N&&document.body.removeChild(K),P;},castLabs.xhr=function(W,Z,K){var R,N,M,P,A,y,E,B,G;"string"==typeof W&&(W={uri:W}),videojs.util.mergeOptions({method:"GET",timeout:45e3},W),Z=Z||function(){},B=function(){window.clearTimeout(E),Z(null,N,N.response||N.responseText,K);},G=function(z){window.clearTimeout(E),z&&"string"!=typeof z||(z=new Error(z)),Z(z,N);},R=window.XMLHttpRequest,"undefined"==typeof R&&(R=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0");}catch(z){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0");}catch(z){}try{return new window.ActiveXObject("Msxml2.XMLHTTP");}catch(z){}throw  new Error("This browser does not support XMLHttpRequest.");}),N=new R,N.uri=W.uri,M=castLabs.parseUrl(W.uri),P=window.location,y=b9o.e5X(M.protocol+M.host,P.protocol+P.host),!y||!window.XDomainRequest||b9o.U5X("withCredentials",N)?(A=b9o.o3X("file:",M.protocol)||b9o.Z3X("file:",P.protocol),N.onreadystatechange=function(){if(b9o.p3X(4,N.readyState)){if(N.timedout)return G("timeout");b9o.P3X(200,N.status)||A&&b9o.r3X(0,N.status)?B():G();}},W.timeout&&(E=window.setTimeout(function(){b9o.S3X(4,N.readyState)&&(N.timedout=!0,N.abort());},W.timeout))):(N=new window.XDomainRequest,N.onload=B,N.onerror=G,N.onprogress=function(){},N.ontimeout=function(){});try{N.open(W.method||"GET",W.uri,!0);}catch(z){return G(z);}W.withCredentials&&(N.withCredentials=!0),W.responseType&&(N.responseType=W.responseType);try{W.method&&b9o.E3X("POST",W.method)&&W.params?(N.setRequestHeader("Content-type","application/x-www-form-urlencoded"),N.send(W.params)):N.send();}catch(z){return G(z);}return N;},castLabs.TextTrack=videojs.Component.extend({init:function(R,N){videojs.Component.call(this,R,N);var M=function(z,W){var Z=z.length;if(b9o.q3X(2,Z))return z;var K=Math.ceil(b9o.J3X(Z,2));return P(M(z.slice(0,K),W),M(z.slice(K),W),W);},P=function(z,W,Z){for(var K=[];b9o.H3X(z.length,0)&&b9o.V3X(W.length,0);)K.push(b9o.x3X(z[0][Z],W[0][Z])?z.shift():W.shift());return K=K.concat(z,W);};this.fastSort=M,isNaN(videojs.guid)&&(videojs.guid=0),this.id_=N.id||"vjs_"+N.kind+"_"+N.language+"_"+videojs.guid++,this.src_=N.src,this.sources_=N.sources,this.timescale_=N.timescale||1,this.playerId_=N.playerId,this.loadedUrls=[],this.pendingRequests=0,this.dflt_=N["default"]||N.dflt,this.title_=N.title,this.language_=N.srclang,this.label_=N.label,this.cues_=[],this.activeCues_=[],this.readyState_=0,this.mode_=0,this.kind_="subtitles",this.player_=R,this.el_=this.el(),this.el_.classList.add("vjs-subtitles"),this.el_.classList.add("vjs-text-track"),this.el_.innerHTML='<div id="captions"></div>',R.on("dispose",videojs.bind(this,this.deactivate,this.id_)),R.on("loadedmetadata",videojs.bind(this,this.deactivate,this.id_));var A=this.player_.getChild("textTrackDisplay");A.el().style.height=b9o.m3X(this.player().el().scrollHeight,64,"px"),this.isLive=b9o.u3X(1/0,this.player().duration())?!0:!1;}}),castLabs.TextTrack.prototype.kind=function(){return this.kind_;},castLabs.TextTrack.prototype.src=function(){return this.src_;},castLabs.TextTrack.prototype.dflt=function(){return this.dflt_;},castLabs.TextTrack.prototype.title=function(){return this.title_;},castLabs.TextTrack.prototype.language=function(){return this.language_;},castLabs.TextTrack.prototype.label=function(){return this.label_;},castLabs.TextTrack.prototype.cues=function(){return this.cues_;},castLabs.TextTrack.prototype.activeCues=function(){return this.activeCues_;},castLabs.TextTrack.prototype.readyState=function(){return this.readyState_;},castLabs.TextTrack.prototype.mode=function(){return this.mode_;},castLabs.TextTrack.prototype.show=function(){this.activate(),this.mode_=2,videojs.Component.prototype.show.call(this);},castLabs.TextTrack.prototype.hide=function(){this.activate(),this.mode_=1,videojs.Component.prototype.hide.call(this);},castLabs.TextTrack.prototype.disable=function(){b9o.s3X(2,this.mode_)&&this.hide(),this.deactivate(),this.mode_=0;},castLabs.TextTrack.prototype.activate=function(){if(!this.refreshHandler&&this.isLive){var Z=this;this.refreshHandler=setInterval(function(){CL.configs.subtitlesOff===!0&&window.clearInterval(Z.refreshHandler),Z.player_.hasOwnProperty("setTextTrack")&&Z.playerId_&&Z.player_.setTextTrack(Z.playerId_);for(var z=Z.player_.subtitleTracks(),W=0;b9o.e3X(W,z.length);W++)b9o.U3X(z[W].id,Z.playerId_)&&(Z.sources_=z[W].sources);Z.readyState_=0,Z.load();},5e3);}b9o.o2X(0,this.readyState_)&&this.load(),b9o.Z2X(0,this.mode_)&&(this.player_.on("timeupdate",videojs.bind(this,this.update,this.id_)),this.player_.on("ended",videojs.bind(this,this.reset,this.id_)),(b9o.p2X("captions",this.kind_)||b9o.P2X("subtitles",this.kind_))&&this.player_.getChild("textTrackDisplay").addChild(this));},castLabs.TextTrack.prototype.deactivate=function(){this.player_.off("timeupdate",videojs.bind(this,this.update,this.id_)),this.player_.off("ended",videojs.bind(this,this.reset,this.id_)),this.reset(),this.player_.getChild("textTrackDisplay").removeChild(this);},castLabs.TextTrack.prototype.appendPendingCues=function(z,W){var Z,K,R,N;if(this.pendingRequests--,K={response:z,startTime:W},N=!1,b9o.r2X(0,K.startTime)?(this.parseCues(K.response,!0,K.startTime),this.player().trigger("firsttexttrackready")):this.pendingCues.push(K),b9o.S2X(0,this.pendingRequests)){var M=(new Date).getTime();for(CL.configs.debug&&console.log("Loading cues took "+b9o.E2X((M-this.startTime),1e3)+"secs"),this.startTime=(new Date).getTime(),Z=0;b9o.q2X(Z,this.pendingCues.length);Z++)R=this.pendingCues[Z],this.parseCues(R.response,!0,R.startTime);M=(new Date).getTime(),this.cues_=this.fastSort(this.cues_,"startTime"),CL.configs.debug&&console.log("Parsing cues took "+b9o.J2X((M-this.startTime),1e3)+"secs"),this.player().trigger("texttracksready"),this.reset(),this.readyState_=2,this.trigger("loaded");}},castLabs.TextTrack.prototype.load=function(){var R,N,M,P;if(b9o.H2X(0,this.readyState_))if(this.startTime=(new Date).getTime(),this.readyState_=1,this.isTimeline=!0,!this.src_&&this.sources_){this.pendingRequests=this.pendingRequests+this.sources_.length,this.pendingCues=[];var A=function(z,W,Z,K){return z?this.onError(z):void this.appendPendingCues(Z,K.startTime);};for(N=0;b9o.V2X(N,this.sources_.length);N++){var y=function(){P=!1;};M=this.sources_[N];var E={startTime:M.startTime};y();for(R in this.loadedUrls)if(b9o.x2X(this.loadedUrls[R],M.src)){this.pendingRequests--,P=!0;break;}P||(this.loadedUrls.push(M.src),castLabs.xhr(M.src,videojs.bind(this,A),E));}}else this.isTimeline=!1,this.pendingRequests=1,castLabs.xhr(this.src_,videojs.bind(this,function(z,W,Z){return z?this.onError(z):(this.parseCues(Z,!1,0),void this.player().trigger("texttracksready"));}));},castLabs.TextTrack.prototype.onError=function(z){this.error=z,this.readyState_=3,this.trigger("error");},castLabs.TextTrack.prototype.parseCues=function(W,Z,K){var R,N,M,P=0;if(Z){W=W.substring(W.indexOf("<tt"),W.length),W=W.replace(/http:\/\/www.w3.org\/2006\/10\/ttaf1/gi,"http://www.w3.org/ns/ttml");for(var A,y,E=/xmlns:(.+?)=/gi;A=E.exec(W);)y=A[1],-1==y.indexOf("tt")&&-1==y.indexOf("xhtm")&&-1==y.indexOf("smpt");}if(CL.configs.debug&&console.log("startTime is "+b9o.m2X(K,this.timescale_)),b9o.X2X("<tt ",W.toLowerCase().substr(0,4))||b9o.g2X("<?xml",W.toLowerCase().substr(0,5))){var B=function(){Y.bodyElement="undefined"==typeof Y.getElementsByTagNameNS?Y.documentElement.childNodes.item(1):Y.getElementsByTagNameNS(DFXP_NS,"body").item(0);};var G=this.player(),q=new DOMParser,Y=q.parseFromString(W,"text/xml");this.isTTML=!0;var O=G.currentTime();if(P=b9o.f2X(K,this.timescale_),"undefined"==typeof O)throw  new Error("currentTime is not supported by the Video element");B();var V=!1;for(N=0;b9o.h2X(N,Y.bodyElement.childNodes.length);N++)if(b9o.C2X("div",Y.bodyElement.childNodes[N].nodeName)&&Y.bodyElement.childNodes[N].attributes.length)for(M=0;b9o.W8X(M,Y.bodyElement.childNodes[N].attributes.length);M++)b9o.R8X("begin",Y.bodyElement.childNodes[N].attributes[M].name)&&(V=!0);if(V){var w=W.split("<body>")[0];w+="<body>\n<div>\n";var H,D=1;for(N=0;b9o.M8X(N,Y.bodyElement.childNodes.length);N++){var F,Q,x,v=[];if(b9o.b8X("div",Y.bodyElement.childNodes[N].nodeName)){{Y.bodyElement.childNodes[N];}for(M=0;b9o.i8X(M,Y.bodyElement.childNodes[N].attributes.length);M++)b9o.T8X("begin",Y.bodyElement.childNodes[N].attributes[M].name)&&(F=Y.bodyElement.childNodes[N].attributes[M].value),b9o.B8X("end",Y.bodyElement.childNodes[N].attributes[M].name)&&(Q=Y.bodyElement.childNodes[N].attributes[M].value);for(M=0;b9o.G8X(M,Y.bodyElement.childNodes[N].childNodes.length);M++)if(b9o.O8X("p",Y.bodyElement.childNodes[N].childNodes[M].nodeName)){for(iii=0;b9o.Q8X(iii,Y.bodyElement.childNodes[N].childNodes[M].attributes.length);iii++)b9o.F8X("region",Y.bodyElement.childNodes[N].childNodes[M].attributes[iii].name)&&(x=Y.bodyElement.childNodes[N].childNodes[M].attributes[iii].value,H=x);v.push(Y.bodyElement.childNodes[N].childNodes[M].childNodes[0].nodeValue);}w+='<p region="'+x+'" begin="'+F+'" id="p'+D+'" end="'+Q+'" >'+v.join("<br/>")+"</p>\n",D+=1;}}w+="</div>\n</body>\n</tt>",Y=q.parseFromString(w,"text/xml"),Y.bodyElement="undefined"==typeof Y.getElementsByTagNameNS?Y.documentElement.childNodes.item(1):Y.getElementsByTagNameNS(DFXP_NS,"body").item(0);}HTML5Caption_computeActiveTimeIntervals(Y.bodyElement);var u=0,J=0;G.offsetTop&&(u=G.offsetTop),G.offsetLeft&&(J=G.offsetLeft);var L=HTML5Caption_convertDFXP2HTML(Y.bodyElement,!1,u,J);if(b9o.a8X(null,L))return ;HTML5Caption_convertDFXP2HTMLAttributes(Y.documentElement,L,!1,0,0);var I=HTML5Caption_getSubtitleSet(L);b9o.v8X(1/0,I[0].aEnd)&&(I[0].aEnd=this.player_.duration());var X;this.captionsElement_?X=this.captionsElement_:(X=document.getElementById("captions"),b9o.I8X(null,X)&&(this.el_.innerHTML='<div id="captions"></div>',X=this.el_.children[0]),this.captionsElement_=X,this.orgParent=X.parentNode);try{X.appendChild(L);}catch(z){CL.configs.debug&&console.log(z);}b9o.d8X(null,X.parentNode)&&(CL.configs.debug&&console.log("captionsElement has no parent node, attaching..."),this.orgParent.appendChild(X));var z5,o5=I.length;for(N=0;b9o.t8X(o5,N);N++)if(z5=I[N],C={id:N,index:this.cues_.length},C.startTime=z5.aBegin+P,C.endTime=z5.aEnd+P,b9o.L8X(1/0,C.endTime)&&b9o.z1X(1/0,C.startTime)){if(CL.configs.debug&&console.log("adding cue from/to "+C.startTime+"/"+C.endTime),b9o.K1X(C.endTime-C.startTime,.1)&&(CL.configs.debug&&console.log("WARNING: Cue is short: "),CL.configs.debug&&console.log(C)),C.node=z5,void 0!==this.player().options().customCueParser){var W5;W5=this.player().options().customCueParser(C),void 0!==W5&&b9o.N1X(null,W5)&&(C=W5);}this.cues_.push(C);}}else if(b9o.j1X("webvtt",W.toLowerCase().substr(0,6))){var C,K5,U,Z5=W.split("\n"),p5="";for(N=1,j=Z5.length;b9o.y1X(N,j);N++)if(p5=videojs.trim(Z5[N])){for(-1==p5.indexOf("-->")?(R=p5,p5=videojs.trim(Z5[++N])):R=this.cues_.length,C={id:R,index:this.cues_.length},K5=p5.split(/[\t ]+/),C.startTime=this.parseCueTime(K5[0]),C.endTime=this.parseCueTime(K5[2]),U=[];Z5[++N]&&(p5=videojs.trim(Z5[N]));)U.push(p5);C.text=U.join("<br/>"),this.cues_.push(C);}}else CL.configs.debug&&CL.configs.debug&&console.log("Unknown subtitle format, skipping file.");},castLabs.TextTrack.prototype.parseCueTime=function(z){var W,Z,K,R,N,M=z.split(":"),P=0;return b9o.A1X(3,M.length)?(W=M[0],Z=M[1],K=M[2]):(W=0,Z=M[0],K=M[1]),K=K.split(/\s+/),R=K.splice(0,1)[0],R=R.split(/\.|,/),N=parseFloat(R[1]),R=R[0],P+=b9o.Y1X(3600,parseFloat(W)),P+=b9o.l1X(60,parseFloat(Z)),P+=parseFloat(R),N&&(P+=b9o.n1X(N,1e3)),P;},castLabs.TextTrack.prototype.update=function(){var W,Z,K,R=this.activeCues_;if(b9o.c1X(this.cues_.length,0)){var N=this.player_.options().trackTimeOffset||0,M=this.isLive===!0?this.player_.absoluteTime():this.player_.currentTime()+N;if(void 0===this.prevChange||b9o.k1X(M,this.prevChange)||b9o.D1X(this.nextChange,M)||this.isLive){var P,A,y,E=this.cues_,B=this.player_.duration(),G=0,q=!1,Y=[];for(b9o.w1X(M,this.nextChange)||void 0===this.nextChange||this.isLive?K=void 0!==this.firstActiveIndex?this.firstActiveIndex:0:(q=!0,K=void 0!==this.lastActiveIndex?this.lastActiveIndex:b9o.u1X(E.length,1)),CL.configs.debug&&console.log("cue Current time is: "+M);;){if(y=E[K],CL.configs.debug&&console.log("comparing cue "+y.startTime+"/"+y.endTime),b9o.s1X(y.endTime,M))G=Math.max(G,y.endTime),y.active&&(y.active=!1),this.isLive===!0&&(this.cues_.splice(K,1),K--);else if(b9o.e1X(M,y.startTime)){if(B=Math.min(B,y.startTime),y.active&&(y.active=!1),!q)break;}else q?(Y.splice(0,0,y),void 0===A&&b9o.U1X(K,0)&&(A=K),P=K):(Y.push(y),void 0===P&&(P=K),A=K),B=Math.min(B,y.endTime),G=Math.max(G,y.startTime),y.active=!0;if(q){if(b9o.o6X(0,K))break;K--;}else{if(b9o.Z6X(K,E.length-1))break;K++;}}this.activeCues_=Y,this.nextChange=B,this.prevChange=G,this.firstActiveIndex=P,this.lastActiveIndex=A,this.updateDisplay(),this.trigger("cuechange");}}for(W=this.activeCues_,K=0;b9o.p6X(K,R.length);K++)if(Z=R[K],void 0!==Z.node){for(var O=!1,V=0;b9o.P6X(V,W.length);V++)if(b9o.r6X(W[V],Z)){var w=function(){O=!0;};w();break;}if(!O){var H=function(z){D.style.display=z;};var D=Z.node;H("none");}}},castLabs.TextTrack.prototype.updateDisplay=function(){for(var z=this.activeCues_,W="",Z=0,K=z.length,R=!1;b9o.S6X(K,Z);Z++)if(void 0!==z[Z].node){b9o.E6X(0,Z)&&b9o.q6X(null,this.captionsElement_.parentNode)&&(this.orgParent.appendChild(this.captionsElement_),CL.configs.debug&&console.log("Warning: Reattaching missing captions element")),R=!0;var N=z[Z].node;N.style.display=b9o.J6X(null,N.df_displayValue)?"block":N.df_displayValue,b9o.H6X("p",N.localName)||N.hasOrigin!==!1||N.style.position||(N.style.position="absolute",N.style.left="0em",N.style.right="0em",N.style.bottom="0em",N.style.removeProperty("width"),N.style.removeProperty("height"),N.style.removeProperty("font-size"));}else W+='<span class="vjs-tt-cue" style="background-color:rgba(0,0,0,.5);position:absolute;left:0em;right:0em;bottom:0em">'+z[Z].text+"</span>";R||(this.el_.innerHTML=""+W);},castLabs.TextTrack.prototype.reset=function(){this.nextChange=0,this.prevChange=this.player_.duration(),this.firstActiveIndex=0,this.lastActiveIndex=0;},castLabs.SubtitlesTrack=castLabs.TextTrack.extend(),castLabs.SubtitlesTrack.prototype.kind_="subtitles",videojs.plugin("texttracks",function(G){var q=this;hideTextTrack=function(z){for(var W,Z=q.textTracks_,K=0,R=Z.length;b9o.V6X(R,K);K++)W=Z[K],b9o.x6X(W.id(),z)&&W.disable();return this;},showTextTrack=function(z,W){for(var Z,K,R,N=q.textTracks_,M=0,P=N.length;b9o.m6X(P,M);M++)Z=N[M],b9o.X6X(Z.id(),z)?(Z.show(),K=Z):W&&b9o.g6X(Z.kind(),W)&&b9o.f6X(Z.mode(),0)&&Z.disable();return R=K?K.kind():W?W:!1,R&&this.trigger(R+"trackchange"),this;},addTextTrack=function(z,W,Z,K){var R=q.textTracks_=q.textTracks_||[];K=K||{},K.kind=z,K.label=W,K.language=Z;var N=new castLabs.TextTrack(q,K);return R.push(N),N;};var Y=videojs.MenuItem.extend({init:function(z,W){var Z={label:W.label_};videojs.MenuItem.call(this,z,Z),this.track=W,this.on("click",this.onClick);}});Y.prototype.onClick=function(){this.trigger({type:"selected",track:this.track});};var O=videojs.MenuButton.extend({init:function(W,Z,K){var R=function(){W.textTracks_=[];};R();var N,M=new castLabs.utils.Internationalization;if(N=void 0!==W.subtitleTracks?W.subtitleTracks():[],!(b9o.h6X(N.length,0))){for(var P=0;b9o.C6X(P,N.length);P++){var A,y,E;y=N[P],A={src:y.src,sources:y.sources,timescale:y.timescale,playerId:y.id},E=M.translateLanguageCode(y.lang,"en"),addTextTrack("subtitles",E,y.lang,A);}videojs.MenuButton.call(this,W,Z,K),b9o.W7X(N.length,0)?this.hide():this.show(),this.el().setAttribute("aria-label","Subtitles Menu");var B=this;setTextTrack=function(z){B.selectItem({playerId:z});},W.setTextTrack=setTextTrack;}}});O.prototype.buttonText="Subtitles",O.prototype.className="vjs-subtitles-button",O.prototype.createItems=function(){var z,W=this;this.items=[];var Z=new videojs.MenuItem(q,{label:"Off"});for(Z.selected_=!1,Z.on("click",function(){W.selectItem({}),this.selected(!1),CL.configs.subtitlesOff=!0;}),this.items.push(Z),z=0;b9o.R7X(z,q.textTracks_.length);z++)this.items.push(this.createItem(q.textTracks_[z]));return this.items;},O.prototype.createItem=function(z){var W;return W=new Y(this.player(),z),W.selected_=!1,W.on("selected",videojs.bind(this,this.selectItem)),W;},O.prototype.selectItem=function(z){this.player().activeSubtitleTrack=null;for(var W=1;b9o.M7X(W,this.items.length);W++)void 0!==z.track&&b9o.b7X(this.items[W].track.id(),z.track.id())||void 0!==z.playerId&&b9o.i7X(this.items[W].track.playerId_,z.playerId)?(this.items[W].selected_===!0?(this.items[W].track.disable(),this.items[W].selected(!1),this.items[W].selected_=!1):(this.items[W].track.show(),this.items[W].selected(!0),this.items[W].selected_=!0,this.player().activeSubtitleTrack=this.items[W].track.playerId_,CL.configs.subtitlesOff=!1),this.player().trigger({type:"trackchanged",trackType:"text",trackId:this.items[W].track.playerId_,trackEnabled:this.items[W].selected_})):(this.items[W].selected_===!0&&this.player().trigger({type:"trackchanged",trackType:"text",trackId:this.items[W].track.playerId_,trackEnabled:!1}),this.items[W].track.disable(),this.items[W].selected(!1),this.items[W].selected_=!1);};var V=null;q.on("loadedmetadata",function(){b9o.T7X(null,V)&&V.dispose&&V.el()&&V.dispose(),V=new O(q,G),q.controlBar.addChild(V);}),O.prototype.dispose=function(){try{videojs.Component.prototype.dispose.call(this);}catch(z){}};}),castLabs.utils||(castLabs.utils={}),castLabs.utils.Internationalization=function(){var M={ab:"Abkhazian",aa:"Afar",af:"Afrikaans",ak:"Akan",sq:"Albanian",am:"Amharic",ar:"Arabic",an:"Aragonese",hy:"Armenian",as:"Assamese",av:"Avaric",ae:"Avestan",ay:"Aymara",az:"Azerbaijani",bm:"Bambara",ba:"Bashkir",eu:"Basque",be:"Belarusian",bn:"Bengali",bh:"Bihari languages",bi:"Bislama",nb:"Bokmål, Norwegian; Norwegian Bokmål",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",es:"Spanish; Castilian",ca:"Catalan; Valencian",km:"Central Khmer",ch:"Chamorro",ce:"Chechen",ny:"Chichewa; Chewa; Nyanja",ny:"Chichewa; Chewa; Nyanja",zh:"Chinese",za:"Zhuang; Chuang",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cv:"Chuvash",kw:"Cornish",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",dv:"Divehi; Dhivehi; Maldivian",dv:"Divehi; Dhivehi; Maldivian",nl:"Dutch; Flemish",dz:"Dzongkha",en:"English",eo:"Esperanto",et:"Estonian",ee:"Ewe",fo:"Faroese",fj:"Fijian",fi:"Finnish",nl:"Dutch; Flemish",fr:"French",ff:"Fulah",gd:"Gaelic; Scottish Gaelic",gl:"Galician",lg:"Ganda",ka:"Georgian",de:"German",ki:"Kikuyu; Gikuyu",el:"Greek, Modern (1453-)  ",kl:"Kalaallisut; Greenlandic",gn:"Guarani",gu:"Gujarati",ht:"Haitian; Haitian Creole",ht:"Haitian; Haitian Creole",ha:"Hausa",he:"Hebrew",hz:"Herero",hi:"Hindi",ho:"Hiri Motu",hu:"Hungarian",is:"Icelandic",io:"Ido",ig:"Igbo",id:"Indonesian",ia:"Interlingua (International Auxiliary Language Association) ",ie:"Interlingue; Occidental",iu:"Inuktitut",ik:"Inupiaq",ga:"Irish",it:"Italian",ja:"Japanese",jv:"Javanese",kl:"Kalaallisut; Greenlandic",kn:"Kannada",kr:"Kanuri",ks:"Kashmiri",kk:"Kazakh",ki:"Kikuyu; Gikuyu",rw:"Kinyarwanda",ky:"Kirghiz; Kyrgyz",kv:"Komi",kg:"Kongo",ko:"Korean",kj:"Kuanyama; Kwanyama",ku:"Kurdish",kj:"Kuanyama; Kwanyama",ky:"Kirghiz; Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",lb:"Luxembourgish; Letzeburgesch",li:"Limburgan; Limburger; Limburgish",li:"Limburgan; Limburger; Limburgish",li:"Limburgan; Limburger; Limburgish",ln:"Lingala",lt:"Lithuanian",lu:"Luba-Katanga",lb:"Luxembourgish; Letzeburgesch",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",dv:"Divehi; Dhivehi; Maldivian",mt:"Maltese",gv:"Manx",mi:"Maori",mr:"Marathi",mh:"Marshallese",ro:"Romanian; Moldavian; Moldovan",ro:"Romanian; Moldavian; Moldovan",mn:"Mongolian",na:"Nauru",nv:"Navajo; Navaho",nv:"Navajo; Navaho",nd:"Ndebele, North; North Ndebele",nr:"Ndebele, South; South Ndebele",ng:"Ndonga",ne:"Nepali",nd:"Ndebele, North; North Ndebele",se:"Northern Sami",no:"Norwegian",nb:"Bokmål, Norwegian; Norwegian Bokmål",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",ii:"Sichuan Yi; Nuosu",ny:"Chichewa; Chewa; Nyanja",nn:"Norwegian Nynorsk; Nynorsk, Norwegian",ie:"Interlingue; Occidental",oc:"Occitan (post 1500)  ",oj:"Ojibwa",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",cu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",or:"Oriya",om:"Oromo",os:"Ossetian; Ossetic",os:"Ossetian; Ossetic",pi:"Pali",pa:"Panjabi; Punjabi",ps:"Pushto; Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese",pa:"Panjabi; Punjabi",ps:"Pushto; Pashto",qu:"Quechua",ro:"Romanian; Moldavian; Moldovan",rm:"Romansh",rn:"Rundi",ru:"Russian",sm:"Samoan",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",gd:"Gaelic; Scottish Gaelic",sr:"Serbian",sn:"Shona",ii:"Sichuan Yi; Nuosu",sd:"Sindhi",si:"Sinhala; Sinhalese",si:"Sinhala; Sinhalese",sk:"Slovak",sl:"Slovenian",so:"Somali",st:"Sotho, Southern",nr:"Ndebele, South; South Ndebele",es:"Spanish; Castilian",su:"Sundanese",sw:"Swahili",ss:"Swati",sv:"Swedish",tl:"Tagalog",ty:"Tahitian",tg:"Tajik",ta:"Tamil",tt:"Tatar",te:"Telugu",th:"Thai",bo:"Tibetan",ti:"Tigrinya",to:"Tonga (Tonga Islands)  ",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",tw:"Twi",ug:"Uighur; Uyghur",uk:"Ukrainian",ur:"Urdu",ug:"Uighur; Uyghur",uz:"Uzbek",ca:"Catalan; Valencian",ve:"Venda",vi:"Vietnamese",vo:"Volapük",wa:"Walloon",cy:"Welsh",fy:"Western Frisian",wo:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",za:"Zhuang; Chuang",zu:"Zulu"},P={abk:"Abkhazian",ace:"Achinese",ach:"Acoli",ada:"Adangme",ady:"Adyghe; Adygei",ady:"Adyghe; Adygei",aar:"Afar",afh:"Afrihili",afr:"Afrikaans",afa:"Afro-Asiatic languages",ain:"Ainu",aka:"Akan",akk:"Akkadian",alb:"Albanian",sqi:"Albanian",gsw:"Swiss German; Alemannic; Alsatian",ale:"Aleut",alg:"Algonquian languages",gsw:"Swiss German; Alemannic; Alsatian",tut:"Altaic languages",amh:"Amharic",anp:"Angika",apa:"Apache languages",ara:"Arabic",arg:"Aragonese",arp:"Arapaho",arw:"Arawak",arm:"Armenian",hye:"Armenian",rup:"Aromanian; Arumanian; Macedo-Romanian",art:"Artificial languages",rup:"Aromanian; Arumanian; Macedo-Romanian",asm:"Assamese",ast:"Asturian; Bable; Leonese; Asturleonese",ast:"Asturian; Bable; Leonese; Asturleonese",ath:"Athapascan languages",aus:"Australian languages",map:"Austronesian languages",ava:"Avaric",ave:"Avestan",awa:"Awadhi",aym:"Aymara",aze:"Azerbaijani",ast:"Asturian; Bable; Leonese; Asturleonese",ban:"Balinese",bat:"Baltic languages",bal:"Baluchi",bam:"Bambara",bai:"Bamileke languages",bad:"Banda languages",bnt:"Bantu languages",bas:"Basa",bak:"Bashkir",baq:"Basque",eus:"Basque",btk:"Batak languages",bej:"Beja; Bedawiyet",bej:"Beja; Bedawiyet",bel:"Belarusian",bem:"Bemba",ben:"Bengali",ber:"Berber languages",bho:"Bhojpuri",bih:"Bihari languages",bik:"Bikol",byn:"Blin; Bilin",bin:"Bini; Edo",bis:"Bislama",byn:"Blin; Bilin",zbl:"Blissymbols; Blissymbolics; Bliss",zbl:"Blissymbols; Blissymbolics; Bliss",zbl:"Blissymbols; Blissymbolics; Bliss",nob:"Bokmål, Norwegian; Norwegian Bokmål",bos:"Bosnian",bra:"Braj",bre:"Breton",bug:"Buginese",bul:"Bulgarian",bua:"Buriat",bur:"Burmese",mya:"Burmese",cad:"Caddo",spa:"Spanish; Castilian",cat:"Catalan; Valencian",cau:"Caucasian languages",ceb:"Cebuano",cel:"Celtic languages",cai:"Central American Indian languages",khm:"Central Khmer",chg:"Chagatai",cmc:"Chamic languages",cha:"Chamorro",che:"Chechen",chr:"Cherokee",nya:"Chichewa; Chewa; Nyanja",chy:"Cheyenne",chb:"Chibcha",nya:"Chichewa; Chewa; Nyanja",chi:"Chinese",zho:"Chinese",chn:"Chinook jargon",chp:"Chipewyan; Dene Suline",cho:"Choctaw",zha:"Zhuang; Chuang",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",chk:"Chuukese",chv:"Chuvash",nwc:"Classical Newari; Old Newari; Classical Nepal Bhasa",nwc:"Classical Newari; Old Newari; Classical Nepal Bhasa",syc:"Classical Syriac",rar:"Rarotongan; Cook Islands Maori",cop:"Coptic",cor:"Cornish",cos:"Corsican",cre:"Cree",mus:"Creek",crp:"Creoles and pidgins",cpe:"Creoles and pidgins, English based",cpf:"Creoles and pidgins, French-based",cpp:"Creoles and pidgins, Portuguese-based",crh:"Crimean Tatar; Crimean Turkish",crh:"Crimean Tatar; Crimean Turkish",hrv:"Croatian",cus:"Cushitic languages",cze:"Czech",ces:"Czech",dak:"Dakota",dan:"Danish",dar:"Dargwa",del:"Delaware",chp:"Chipewyan; Dene Suline",div:"Divehi; Dhivehi; Maldivian",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",din:"Dinka",div:"Divehi; Dhivehi; Maldivian",doi:"Dogri",dgr:"Dogrib",dra:"Dravidian languages",dua:"Duala",dut:"Dutch; Flemish",nld:"Dutch; Flemish",dum:"Dutch, Middle (ca.1050-1350)",dyu:"Dyula",dzo:"Dzongkha",frs:"Eastern Frisian",bin:"Bini; Edo",efi:"Efik",egy:"Egyptian (Ancient)",eka:"Ekajuk",elx:"Elamite",eng:"English",enm:"English, Middle (1100-1500)",ang:"English, Old (ca.450-1100)",myv:"Erzya",epo:"Esperanto",est:"Estonian",ewe:"Ewe",ewo:"Ewondo",fan:"Fang",fat:"Fanti",fao:"Faroese",fij:"Fijian",fil:"Filipino; Pilipino",fin:"Finnish",fiu:"Finno-Ugrian languages",dut:"Dutch; Flemish",nld:"Dutch; Flemish",fon:"Fon",fre:"French",fra:"French",frm:"French, Middle (ca.1400-1600)",fro:"French, Old (842-ca.1400)",fur:"Friulian",ful:"Fulah",gaa:"Ga",gla:"Gaelic; Scottish Gaelic",car:"Galibi Carib",glg:"Galician",lug:"Ganda",gay:"Gayo",gba:"Gbaya",gez:"Geez",geo:"Georgian",kat:"Georgian",ger:"German",deu:"German",nds:"Low German; Low Saxon; German, Low; Saxon, Low",gmh:"German, Middle High (ca.1050-1500)",goh:"German, Old High (ca.750-1050)",gem:"Germanic languages",kik:"Kikuyu; Gikuyu",gil:"Gilbertese",gon:"Gondi",gor:"Gorontalo",got:"Gothic",grb:"Grebo",grc:"Greek, Ancient (to 1453)",gre:"Greek, Modern (1453-)",ell:"Greek, Modern (1453-)",kal:"Kalaallisut; Greenlandic",grn:"Guarani",guj:"Gujarati",gwi:"Gwich'in",hai:"Haida",hat:"Haitian; Haitian Creole",hat:"Haitian; Haitian Creole",hau:"Hausa",haw:"Hawaiian",heb:"Hebrew",her:"Herero",hil:"Hiligaynon",him:"Himachali languages; Western Pahari languages",hin:"Hindi",hmo:"Hiri Motu",hit:"Hittite",hmn:"Hmong; Mong",hun:"Hungarian",hup:"Hupa",iba:"Iban",ice:"Icelandic",isl:"Icelandic",ido:"Ido",ibo:"Igbo",ijo:"Ijo languages",ilo:"Iloko",arc:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",smn:"Inari Sami",inc:"Indic languages",ine:"Indo-European languages",ind:"Indonesian",inh:"Ingush",ina:"Interlingua (International Auxiliary Language Association)",ile:"Interlingue; Occidental",iku:"Inuktitut",ipk:"Inupiaq",ira:"Iranian languages",gle:"Irish",mga:"Irish, Middle (900-1200)",sga:"Irish, Old (to 900)",iro:"Iroquoian languages",ita:"Italian",jpn:"Japanese",jav:"Javanese",kac:"Kachin; Jingpho",jrb:"Judeo-Arabic",jpr:"Judeo-Persian",kbd:"Kabardian",kab:"Kabyle",kac:"Kachin; Jingpho",kal:"Kalaallisut; Greenlandic",xal:"Kalmyk; Oirat",kam:"Kamba",kan:"Kannada",kau:"Kanuri",pam:"Pampanga; Kapampangan",kaa:"Kara-Kalpak",krc:"Karachay-Balkar",krl:"Karelian",kar:"Karen languages",kas:"Kashmiri",csb:"Kashubian",kaw:"Kawi",kaz:"Kazakh",kha:"Khasi",khi:"Khoisan languages",kho:"Khotanese; Sakan",kik:"Kikuyu; Gikuyu",kmb:"Kimbundu",kin:"Kinyarwanda",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",kir:"Kirghiz; Kyrgyz",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",tlh:"Klingon; tlhIngan-Hol",kom:"Komi",kon:"Kongo",kok:"Konkani",kor:"Korean",kos:"Kosraean",kpe:"Kpelle",kro:"Kru languages",kua:"Kuanyama; Kwanyama",kum:"Kumyk",kur:"Kurdish",kru:"Kurukh",kut:"Kutenai",kua:"Kuanyama; Kwanyama",kir:"Kirghiz; Kyrgyz",lad:"Ladino",lah:"Lahnda",lam:"Lamba",day:"Land Dayak languages",lao:"Lao",lat:"Latin",lav:"Latvian",ast:"Asturian; Bable; Leonese; Asturleonese",ltz:"Luxembourgish; Letzeburgesch",lez:"Lezghian",lim:"Limburgan; Limburger; Limburgish",lim:"Limburgan; Limburger; Limburgish",lim:"Limburgan; Limburger; Limburgish",lin:"Lingala",lit:"Lithuanian",jbo:"Lojban",nds:"Low German; Low Saxon; German, Low; Saxon, Low",nds:"Low German; Low Saxon; German, Low; Saxon, Low",dsb:"Lower Sorbian",loz:"Lozi",lub:"Luba-Katanga",lua:"Luba-Lulua",lui:"Luiseno",smj:"Lule Sami",lun:"Lunda",luo:"Luo (Kenya and Tanzania)",lus:"Lushai",ltz:"Luxembourgish; Letzeburgesch",rup:"Aromanian; Arumanian; Macedo-Romanian",mac:"Macedonian",mkd:"Macedonian",mad:"Madurese",mag:"Magahi",mai:"Maithili",mak:"Makasar",mlg:"Malagasy",may:"Malay",msa:"Malay",mal:"Malayalam",div:"Divehi; Dhivehi; Maldivian",mlt:"Maltese",mnc:"Manchu",mdr:"Mandar",man:"Mandingo",mni:"Manipuri",mno:"Manobo languages",glv:"Manx",mao:"Maori",mri:"Maori",arn:"Mapudungun; Mapuche",arn:"Mapudungun; Mapuche",mar:"Marathi",chm:"Mari",mah:"Marshallese",mwr:"Marwari",mas:"Masai",myn:"Mayan languages",men:"Mende",mic:"Mi'kmaq; Micmac",mic:"Mi'kmaq; Micmac",min:"Minangkabau",mwl:"Mirandese",moh:"Mohawk",mdf:"Moksha",rum:"Romanian; Moldavian; Moldovan",ron:"Romanian; Moldavian; Moldovan",mkh:"Mon-Khmer languages",hmn:"Hmong; Mong",lol:"Mongo",mon:"Mongolian",mos:"Mossi",mul:"Multiple languages",mun:"Munda languages",nqo:"N'Ko",nah:"Nahuatl languages",nau:"Nauru",nav:"Navajo; Navaho",nav:"Navajo; Navaho",nde:"Ndebele, North; North Ndebele",nbl:"Ndebele, South; South Ndebele",ndo:"Ndonga",nap:"Neapolitan","new":"Nepal Bhasa; Newari",nep:"Nepali","new":"Nepal Bhasa; Newari",nia:"Nias",nic:"Niger-Kordofanian languages",ssa:"Nilo-Saharan languages",niu:"Niuean",zxx:"No linguistic content; Not applicable",nog:"Nogai",non:"Norse, Old",nai:"North American Indian languages",nde:"Ndebele, North; North Ndebele",frr:"Northern Frisian",sme:"Northern Sami",nso:"Pedi; Sepedi; Northern Sotho",nor:"Norwegian",nob:"Bokmål, Norwegian; Norwegian Bokmål",nno:"Norwegian Nynorsk; Nynorsk, Norwegian",zxx:"No linguistic content; Not applicable",nub:"Nubian languages",iii:"Sichuan Yi; Nuosu",nym:"Nyamwezi",nya:"Chichewa; Chewa; Nyanja",nyn:"Nyankole",nno:"Norwegian Nynorsk; Nynorsk, Norwegian",nyo:"Nyoro",nzi:"Nzima",ile:"Interlingue; Occidental",oci:"Occitan (post 1500)",pro:"Provençal, Old (to 1500);Occitan, Old (to 1500)",arc:"Official Aramaic (700-300 BCE); Imperial Aramaic (700-300 BCE)",xal:"Kalmyk; Oirat",oji:"Ojibwa",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",nwc:"Classical Newari; Old Newari; Classical Nepal Bhasa",chu:"Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic",ori:"Oriya",orm:"Oromo",osa:"Osage",oss:"Ossetian; Ossetic",oss:"Ossetian; Ossetic",oto:"Otomian languages",pal:"Pahlavi",pau:"Palauan",pli:"Pali",pam:"Pampanga; Kapampangan",pag:"Pangasinan",pan:"Panjabi; Punjabi",pap:"Papiamento",paa:"Papuan languages",pus:"Pushto; Pashto",nso:"Pedi; Sepedi; Northern Sotho",per:"Persian",fas:"Persian",peo:"Persian, Old (ca.600-400 B.C.)",phi:"Philippine languages",phn:"Phoenician",fil:"Filipino; Pilipino",pon:"Pohnpeian",pol:"Polish",por:"Portuguese",pra:"Prakrit languages",pro:"Provençal, Old (to 1500);Occitan, Old (to 1500)",pan:"Panjabi; Punjabi",pus:"Pushto; Pashto",que:"Quechua",raj:"Rajasthani",rap:"Rapanui",rar:"Rarotongan; Cook Islands Maori","qaa-qtz":"Reserved for local use",roa:"Romance languages",rum:"Romanian; Moldavian; Moldovan",ron:"Romanian; Moldavian; Moldovan",roh:"Romansh",rom:"Romany",run:"Rundi",rus:"Russian",kho:"Khotanese; Sakan",sal:"Salishan languages",sam:"Samaritan Aramaic",smi:"Sami languages",smo:"Samoan",sad:"Sandawe",sag:"Sango",san:"Sanskrit",sat:"Santali",srd:"Sardinian",sas:"Sasak",nds:"Low German; Low Saxon; German, Low; Saxon, Low",sco:"Scots",gla:"Gaelic; Scottish Gaelic",sel:"Selkup",sem:"Semitic languages",nso:"Pedi; Sepedi; Northern Sotho",srp:"Serbian",srr:"Serer",shn:"Shan",sna:"Shona",iii:"Sichuan Yi; Nuosu",scn:"Sicilian",sid:"Sidamo",sgn:"Sign Languages",bla:"Siksika",snd:"Sindhi",sin:"Sinhala; Sinhalese",sin:"Sinhala; Sinhalese",sit:"Sino-Tibetan languages",sio:"Siouan languages",sms:"Skolt Sami",den:"Slave (Athapascan)",sla:"Slavic languages",slo:"Slovak",slk:"Slovak",slv:"Slovenian",sog:"Sogdian",som:"Somali",son:"Songhai languages",snk:"Soninke",wen:"Sorbian languages",nso:"Pedi; Sepedi; Northern Sotho",sot:"Sotho, Southern",sai:"South American Indian languages",nbl:"Ndebele, South; South Ndebele",alt:"Southern Altai",sma:"Southern Sami",spa:"Spanish; Castilian",srn:"Sranan Tongo",zgh:"Standard Moroccan Tamazight",suk:"Sukuma",sux:"Sumerian",sun:"Sundanese",sus:"Susu",swa:"Swahili",ssw:"Swati",swe:"Swedish",gsw:"Swiss German; Alemannic; Alsatian",syr:"Syriac",tgl:"Tagalog",tah:"Tahitian",tai:"Tai languages",tgk:"Tajik",tmh:"Tamashek",tam:"Tamil",tat:"Tatar",tel:"Telugu",ter:"Tereno",tet:"Tetum",tha:"Thai",tib:"Tibetan",bod:"Tibetan",tig:"Tigre",tir:"Tigrinya",tem:"Timne",tiv:"Tiv",tlh:"Klingon; tlhIngan-Hol",tli:"Tlingit",tpi:"Tok Pisin",tkl:"Tokelau",tog:"Tonga (Nyasa)",ton:"Tonga (Tonga Islands)",tsi:"Tsimshian",tso:"Tsonga",tsn:"Tswana",tum:"Tumbuka",tup:"Tupi languages",tur:"Turkish",ota:"Turkish, Ottoman (1500-1928)",tuk:"Turkmen",tvl:"Tuvalu",tyv:"Tuvinian",twi:"Twi",udm:"Udmurt",uga:"Ugaritic",uig:"Uighur; Uyghur",ukr:"Ukrainian",umb:"Umbundu",mis:"Uncoded languages",und:"Undetermined",hsb:"Upper Sorbian",urd:"Urdu",uig:"Uighur; Uyghur",uzb:"Uzbek",vai:"Vai",cat:"Catalan; Valencian",ven:"Venda",vie:"Vietnamese",vol:"Volapük",vot:"Votic",wak:"Wakashan languages",wln:"Walloon",war:"Waray",was:"Washo",wel:"Welsh",cym:"Welsh",fry:"Western Frisian",him:"Himachali languages; Western Pahari languages",wal:"Wolaitta; Wolaytta",wal:"Wolaitta; Wolaytta",wol:"Wolof",xho:"Xhosa",sah:"Yakut",yao:"Yao",yap:"Yapese",yid:"Yiddish",yor:"Yoruba",ypk:"Yupik languages",znd:"Zande languages",zap:"Zapotec",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",zza:"Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki",zen:"Zenaga",zha:"Zhuang; Chuang",zul:"Zulu",zun:"Zuni"},A={},y=function(z,W){if(A[W])return void 0!=A[W][z]?A[W][z]:"Undefined";throw "Cannot find language mapping for target language "+W;},E=function(W,Z){var K=function(z){A[W]=z;},R=function(z){A[W][N]=z[N];},N;if(A[W])for(N in Z)R(Z);else K(Z);};return E("en",M),E("en",P),{translateLanguageCode:y,addLanguageMap:E};},function(){function u(z,W){var Z=Object.create(z.prototype);return z.apply(Z,W)||Z;}"use strict";var J,L="dashjs",I="dashas",X="dashcs",z5="dashhls";videojs.Dasheverywhere=function(q,Y){Y.techs&&b9o.B7X(Y.techs.length,0)&&(videojs.Dasheverywhere.TECHS=Y.techs),CL.manifest=videojs.util.mergeOptions(CL.defaultManifest,Y);var O=new castLabsDashJS.classes.Utils,V=!1,w=!1,H=!1;V=!!Y.widevineLicenseServerURL&&b9o.G7X(null,Y.widevineLicenseServerURL)&&-1===Y.widevineLicenseServerURL.toLowerCase().indexOf("drmtoday.com"),w=!!Y.accessLicenseServerURL&&b9o.O7X(null,Y.accessLicenseServerURL)&&-1===Y.accessLicenseServerURL.toLowerCase().indexOf("drmtoday.com"),H=!!Y.playReadyLicenseServerURL&&b9o.Q7X(null,Y.playReadyLicenseServerURL)&&-1===Y.playReadyLicenseServerURL.toLowerCase().indexOf("drmtoday.com"),(void 0!==Y.sendCustomData&&Y.sendCustomData!==!0||V||w||H)&&O.sdfglksdfgkl(CL.manifest);var D=videojs.Dasheverywhere.supportedTech();CL.configs=JSON.parse(JSON.stringify(CL.defaultConfigs)),CL.manifest=JSON.parse(JSON.stringify(CL.defaultManifest)),Y.debug&&D&&console.log("Active tech: "+D);var F=function(){return D;},Q=function(z,W){if(void 0===z||b9o.F7X(null,z)||b9o.a7X("audio",z)&&b9o.v7X("text",z))throw "Cannot set active track: Parameter 'type' must be 'audio' or 'text'.";if(void 0===W||b9o.I7X(null,W)||b9o.d7X("",W))throw "Cannot set active track: Parameter 'id' must not be empty.";b9o.t7X("audio",z)?q.setAudioTrack(W):b9o.L7X("text",z)&&q.setSubsTrack(W);},x=function(K,R){var N=function(){try{q.ads&&b9o.z0X("ad-playback",q.ads.state)&&(q.ads.state="content-resuming",q.ima.pauseAd(),q.ima.onAdComplete_(),q.ads.endLinearAdMode(),q.ima.onContentResumeRequested_(),q.removeClass("vjs-ad-playing"));}catch(z){}if(R.googleAds===!0)if(q.el().childNodes[0].style.width="1px",q.volume(0),J)q.volume(q.orgVolume),q.controlBar.hide(),q.one("loadedmetadata",function(){q.ima.setContent(K,null,!0),q.ima.requestAds();});else if(R.imaOptions&&R.imaOptions.adTagUrl){R.imaOptions.id=q.id(),q.ima(R.imaOptions),J=new videojs.Dasheverywhere.Ads,q.one("dispose",function(){var z=function(){J=!1;};z();});var Z="loadedmetadata";q.one(Z,function(){q.controlBar.hide(),q.pause(),q.on(["adend","adserror","adscancelled"],function(){q.el().childNodes[0].style.width="100%",q.volume(q.orgVolume),q.controlBar.show();}),q.on("adserror",function(){try{var W=document.getElementById("ima-ad-container");b9o.K0X(null,W)&&(W.style.display="none"),q.play();}catch(z){}}),q.on("adstart",function(){var z=document.getElementById("ima-play-pause-div");b9o.N0X(null,z)&&(z.className="ima-playing"),q.volume(q.orgVolume);}),q.ima.initializeAdDisplayContainer(),q.ima.requestAds();});}else R.googleAdsdebug&&console.log("a valid adTagUrl is required");else q.volume(q.orgVolume);},M,P=q.options();q.orgVolume=q.volume();CL.configs=JSON.parse(JSON.stringify(CL.defaultConfigs)),CL.manifest=JSON.parse(JSON.stringify(CL.defaultManifest)),O=new castLabsDashJS.classes.Utils,O.supportsMSE(),R.autoplay=P.autoplay,P.dasheverywhere=videojs.util.mergeOptions(P.dasheverywhere,R),CL.manifest=videojs.util.mergeOptions(CL.manifest,P.dasheverywhere);var A=!1,y=!1,E=!1;A=!!R.widevineLicenseServerURL&&b9o.j0X(null,R.widevineLicenseServerURL)&&-1===R.widevineLicenseServerURL.toLowerCase().indexOf("drmtoday.com"),y=!!R.accessLicenseServerURL&&b9o.y0X(null,R.accessLicenseServerURL)&&-1===R.accessLicenseServerURL.toLowerCase().indexOf("drmtoday.com"),E=!!R.playReadyLicenseServerURL&&b9o.A0X(null,R.playReadyLicenseServerURL)&&-1===R.playReadyLicenseServerURL.toLowerCase().indexOf("drmtoday.com"),(void 0!==R.sendCustomData&&R.sendCustomData!==!0||A||y||E)&&O.sdfglksdfgkl(CL.manifest),M=videojs.Dasheverywhere.supportedTech();try{b9o.Y0X(M,L)&&(q.pause(),q.removeEventListener());}catch(z){}if(N(),b9o.l0X(M,L)){var B;try{this.options().autoplay===!0&&(this.player().addClass("vjs-waiting"),this.player().loadingSpinner.show()),B=q.el().childNodes[0],B.hidden=!0,q.one("loadstart",function(){var z=function(){B.hidden=!1;};z();});}catch(z){}void 0!==q.mediaPlayer.eventBus&&(q.mediaPlayer.eventBus.removeEventListener("error",q.options().customErrorHandler,!1),q.mediaPlayer.eventBus.removeEventListener(MediaPlayer.events.MANIFEST_LOADED,q.options().onManifestLoaded,!1)),q.mediaPlayer.setConfig(P.dasheverywhere);try{var G=function(){q.manifestUrl=K,q.mediaPlayer.loadVideo(K),q.mediaPlayer.eventBus.addEventListener("error",q.options().customErrorHandler,!1),q.mediaPlayer.eventBus.addEventListener(MediaPlayer.events.MANIFEST_LOADED,q.options().onManifestLoaded,!1);};b9o.n0X("",B.src)?(CL.configs.sourceCleaningInProgress=(new Date).getTime(),B.src="",B.setMediaKeys?B.setMediaKeys(null).then(function(){G();},function(){G();}):G()):G();}catch(z){}}else if(b9o.c0X(M,I))q.loadSrc(K,P.dasheverywhere);else if(b9o.k0X(M,X))this.player().addClass("vjs-waiting"),this.player().loadingSpinner.show(),this.player().one("play",function(){this.player().loadingSpinner.hide();}),q.loadSrc(K,P.dasheverywhere);else if(b9o.D0X(M,z5)){try{q.pause(),this.player().loadingSpinner.show(),q.one("loadeddata",function(){this.player().loadingSpinner.hide(),this.options().autoplay===!0&&this.player().play();});}catch(z){}q.src(K);}},v=function(){var z=q.getActiveTech();switch(z){case L:q.mediaPlayer&&q.mediaPlayer.removeEventListener&&(q.mediaPlayer.removeEventListener(),q.mediaPlayer.reset()),q.loadVideo(CL.manifest.url,{});break;case X:var W=q.el().childNodes[0];W.style.height="100%",this.player().loadingSpinner.hide(),q.play();}};switch(q.getActiveTech=F,q.setActiveTrack=Q,q.loadVideo=x,q.restoreAfterSnapshot=v,D){case L:return u(videojs.Dashjs,arguments);case I:return u(videojs.Dashas,arguments);case X:return u(videojs.Silverlight,arguments);case z5:return videojs.Hls.supportsNativeHls?u(videojs.Html5,arguments):u(videojs.Hls,arguments);default:throw  new Error("NO_SUPPORTED_PLAYBACK_TECHNOLOGY");}},videojs.Dasheverywhere.Ads=function(){this.initialized=!0;},videojs.Dasheverywhere.isSupported=function(){return !!this.supportedTech();},videojs.Dasheverywhere.canPlaySource=function(z){return b9o.w0X("application/dash+xml",z.type)||b9o.u0X("application/vnd.ms-sstr+xml",z.type)||b9o.s0X("application/x-mpegURL",z.type)?"maybe":"";},videojs.Dasheverywhere.supportedTech=function(){var z=CL.configs.isWindows,W=CL.configs.isIE11,Z=CL.configs.isFirefox,K=this.canUseTech.bind(this);return z&&Z&&K(X)&&videojs.Silverlight.isSupported()?X:K(L)&&videojs.Dashjs.isSupported()&&CL.configs.isOpera===!1&&CL.configs.isSafari===!1&&CL.configs.isSafari8===!1&&(!W||W&&!CL.manifest.disableDASHJSOnIE11)?L:K(I)&&videojs.Dashas.isSupported()?I:K(X)&&videojs.Silverlight.isSupported()?X:K(z5)&&videojs.Hls.isSupported()?z5:void 0;},videojs.Dasheverywhere.canUseTech=function(z){var W,Z;for(W=0,Z=this.TECHS.length;b9o.e0X(Z,W);W++)if(b9o.U0X(z,this.TECHS[W]))return !0;return !1;},videojs.Dasheverywhere.TECHS=[L,I,X,z5];}();

videojs.AudioMenuButton = videojs.MenuButton.extend({
  /** @constructor */
  init: function (player, options) {
    videojs.MenuButton.call(this, player, options);
    this.on(player, 'loadedmetadata', this.updateItems);

  }
});


videojs.ControlBar.prototype.options_.children.AudioMenuButton = {};

videojs.AudioMenuButton.prototype.buttonText = 'Audio Selection';
videojs.AudioMenuButton.prototype.className = 'vjs-audio-button';
videojs.AudioMenuButton.prototype.options_ = {
  title: 'Audio'
};

videojs.AudioMenuButton.prototype.createEl = function () {
  return videojs.MenuButton.prototype.createEl.call(this);
};
/**
 * Update all items in menu
 */
videojs.AudioMenuButton.prototype.updateItems = function () {
  /*jshint sub:true*/
  this.items = this['createItems']();

  if (this.items) {
    while (this.menu.children().length) {
      this.menu.removeChild(this.menu.children()[0]);
    }
    // Add menu items to the menu
    for (var i = 0; i < this.items.length; i++) {
      this.menu.addItem(this.items[i]);
    }
  }

  this.updateVisibility();
};
/**
 * Create the list of menu items. Specific to each subclass.
 */
videojs.AudioMenuButton.prototype.createItems = function () {
  var items = [], audio = null;
  if (!this.audiosSupported()) {
    return items;
  }
  /*jshint sub:true*/
  var audios = this.player().audioTracks();
  for (var i = 0; i < audios.length; i++) {
    audio = audios[i];
    if (typeof  audio === 'string') {
      audio = {
        index: i,
        label: audio,
        lang: audio
      };
    }
    if (!audio.lang) {
      return;
    }
    items.push(new videojs.AudioMenuItem(this.player(), audio));
  }

  return items;
};

videojs.AudioMenuButton.prototype.updateARIAAttributes = function () {
  // Current playback rate
  this.el().setAttribute('aria-valuenow', this.player().tech.getBitrate());
};

videojs.AudioMenuButton.prototype.onClick = function () {
  // select next rate option
  var currentRate = this.player().playbackRate();
  /*jshint sub:true*/
  var rates = this.player().tech['featuresAudioIndex'];
  // this will select first one if the last one currently selected
  var newRate = rates[0];
  for (var i = 0; i < rates.length; i++) {
    if (rates[i] > currentRate) {
      newRate = rates[i];
      break;
    }
  }
  this.player().playbackRate(newRate);
};

videojs.AudioMenuButton.prototype.audiosSupported = function () {
  /*jshint sub:true*/
  var autioSupported = this.player().audioTracks() &&
    this.player().audioTracks().length || 0;

  if (!autioSupported) {
    return autioSupported;
  }
  /*jshint sub:true*/
  var audios = this.player().audioTracks() || [], audio;
  for (var i = 0; i < audios.length; i++) {
    audio = audios[i];
    if (typeof  audio === 'string') {
      audio = {
        index: i,
        label: audio,
        lang: audio
      };
    }
    if (!audio.lang) {
      autioSupported--;
      return;
    }
  }

  return autioSupported > 1;
};

/**
 * Hide playback rate controls when they're no playback rate options to select
 */
videojs.AudioMenuButton.prototype.updateVisibility = function () {
  if (this.audiosSupported()) {
    this.show();
    this.removeClass('vjs-hidden');
  } else {
    this.hide();
    this.addClass('vjs-hidden');
  }
};

/**
 * The specific menu item type for selecting a playback rate
 *
 * @constructor
 */
videojs.AudioMenuItem = videojs.MenuItem.extend({
  contentElType: 'button',
  /** @constructor */
  init: function (player, options) {
    /*jshint sub:true*/
    var label = this.label = options.lang || options.language || options.label;
    var audioIndex = parseInt(this.audioIndex = options.id || options.index, 10);
    var selected = options.enabled || (audioIndex === player.tech['featuresAudioIndex']);
    //// Modify options for parent MenuItem class's init.
    var data = {
      label: label,
      selected: selected,
      reference: options
    };
    videojs.MenuItem.call(this, player, data);

    this.on(player, 'audiochange', this.update);
  }
});

videojs.AudioMenuItem.prototype.onClick = function () {
  //videojs.MenuItem.prototype.onClick.call(this);
  this.player().setAudioTrack(this.options().reference);
};

videojs.AudioMenuItem.prototype.update = function () {
  //var tracks = this.player().audioTracks();
  //var selected = false;
  //for (var i = 0; i < tracks.length; i++) {
  //  if (selected) {
  //    return;
  //  }
  //  var audioTrack = tracks[i];
  //  if (audioTrack.enabled && audioTrack === this.options().reference) {
  //    selected = true;
  //  }
  //}
  //this.selected(selected);
  /*jshint sub:true*/
  this.selected(this.player().tech['featuresAudioIndex'] === this.audioIndex);
};


videojs.BitrateMenuButton = videojs.MenuButton.extend({
  /** @constructor */
  init: function (player, options) {
    videojs.MenuButton.call(this, player, options);

    this.updateVisibility();
    this.updateLabel();

    this.on(player, 'bitratechange', this.updateLabel);
    this.on(player, 'canplay', this.updateItems);
  }
});


videojs.ControlBar.prototype.options_.children.bitrateMenuButton = {};

videojs.BitrateMenuButton.Labels = ['bas', 'moyen', 'normal', 'HD', 'auto'];
videojs.BitrateMenuButton.prototype.buttonText = 'Quality Selection';
videojs.BitrateMenuButton.prototype.className = 'vjs-bitrate';
videojs.BitrateMenuButton.prototype.options_ = {
  title: 'Qualité'
};

videojs.BitrateMenuButton.prototype.createEl = function () {
  var el = videojs.MenuButton.prototype.createEl.call(this);

  this.labelEl_ = videojs.createEl('div', {
    className: 'vjs-bitrate-value',
    innerHTML: 1.0
  });

  el.appendChild(this.labelEl_);

  return el;
};
/**
 * Update all items in menu
 */
videojs.BitrateMenuButton.prototype.updateItems = function () {
  this.updateLabel();
  /*jshint sub:true*/
  this.items = this['createItems']();

  if (this.items) {
    while (this.menu.children().length) {
      this.menu.removeChild(this.menu.children()[0]);
    }
    // Add menu items to the menu
    for (var i = 0; i < this.items.length; i++) {
      this.menu.addItem(this.items[i]);
    }
  }

  this.updateVisibility();
};
/**
 * Create the list of menu items. Specific to each subclass.
 */
videojs.BitrateMenuButton.prototype.createItems = function () {
  var items = [], bitRate = null;
  if (!this.bitratesSupported()) {
    return items;
  }

  /*jshint sub:true*/
  var bitRates = this.player().videoTracks();
  // Add an OFF menu item to turn all tracks off
  items.push(new videojs.BitrateMenuItem(this.player(), {
    qualityIndex: bitRates.length,
    bitrate: 'Auto'
  }));

  for (var i = 0; i < bitRates.length; i++) {
    bitRate = bitRates[i];
    items.push(new videojs.BitrateMenuItem(this.player(), bitRate));
  }

  return items;
};

videojs.BitrateMenuButton.prototype.updateARIAAttributes = function () {
  // Current playback rate
  this.el().setAttribute('aria-valuenow', 'bitrate-control');
};

videojs.BitrateMenuButton.prototype.onClick = function () {
  // select next rate option
  var currentRate = this.player().playbackRate();
  /*jshint sub:true*/
  var rates = this.player().tech['featuresBitrateIndex'];
  // this will select first one if the last one currently selected
  var newRate = rates[0];
  for (var i = 0; i < rates.length; i++) {
    if (rates[i] > currentRate) {
      newRate = rates[i];
      break;
    }
  }
  this.player().playbackRate(newRate);
};

videojs.BitrateMenuButton.prototype.bitratesSupported = function () {
  /*jshint sub:true*/
  return this.player().tech && this.player().videoTracks() &&
    this.player().videoTracks().length > 0;
};

/**
 * Hide playback rate controls when they're no playback rate options to select
 */
videojs.BitrateMenuButton.prototype.updateVisibility = function () {
  //VJS 4.12.5
  if (this.bitratesSupported()) {
    this.show();
    this.removeClass('vjs-hidden');
  } else {
    this.hide();
    this.addClass('vjs-hidden');
  }
  //VJS 4.11.4
  //if (this.items && this.items.length === 0) {
  //  this.hide();
  //}
  //else {
  //  this.show();
  //}

};

/**
 * Update button label when rate changed
 */
videojs.BitrateMenuButton.prototype.updateLabel = function () {
  if (this.bitratesSupported()) {
    /*jshint sub:true*/
    var selected = this.player().tech['featuresBitrateIndex'];
    this.labelEl_.innerHTML = videojs.BitrateMenuButton.Labels[Math.min(selected, videojs.BitrateMenuButton.Labels.length - 1)];
  }
};

/**
 * The specific menu item type for selecting a playback rate
 *
 * @constructor
 */
videojs.BitrateMenuItem = videojs.MenuItem.extend({
  contentElType: 'button',
  /** @constructor */
  init: function (player, options) {
    /*jshint sub:true*/
    var label = this.label =
      parseInt(options['bitrate'], 10) ? options['bitrate'] / 1000 : options['bitrate'];
    var qualityIndex = this.qualityIndex = options['qualityIndex'];

    var data = {
      label: videojs.BitrateMenuButton.Labels[qualityIndex] || label,
      selected: (qualityIndex === player.tech['featuresBitrateIndex']),
      reference: options
    };

    videojs.MenuItem.call(this, player, data);

    this.on(player, 'bitratechange', this.update);
  }
});

videojs.BitrateMenuItem.prototype.onClick = function () {
  //videojs.MenuItem.prototype.onClick.call(this);
  this.player().setVideoTrack(this.options().reference);
};

videojs.BitrateMenuItem.prototype.update = function () {
  //var tracks = this.player().videoTracks();
  //var selected = false;
  //for (var i = 0; i < tracks.length; i++) {
  //  var videoTrack = tracks[i];
  //  if (videoTrack.qualityIndex === this.qualityIndex && videoTrack.enabled) {
  //    selected = true;
  //  }
  //}
  //this.selected(selected);
  /*jshint sub:true*/
  this.selected(this.player().tech['featuresBitrateIndex'] === this.qualityIndex);

};


/**
 * Button to toggle between play and pause
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
videojs.NextButton = videojs.Button.extend({
  /** @constructor */
  init: function (player, options) {
    videojs.Button.call(this, player, options);
    this.update();
  }
});

videojs.ControlBar.prototype.options_.children.NextButton = {};

videojs.NextButton.prototype.buttonText = 'Next';

videojs.NextButton.prototype.buildCSSClass = function () {
  return 'vjs-next-control ' + videojs.Button.prototype.buildCSSClass.call(this);
};
videojs.NextButton.prototype.createEl = function (type, props) {

  var el = videojs.Button.prototype.createEl.call(this, type, props);
  this.content_ = videojs.createEl('div', {
    className: 'thumb-tile-content'
  });

  this.fallbackImg_ = videojs.createEl(videojs.BACKGROUND_SIZE_SUPPORTED ? 'div' : 'img', {
    className: 'thumb-tile_thumb'
  });
  this.content_.appendChild(this.fallbackImg_);

  var subUnfo = videojs.createEl('div', {
    className: 'thumb-caption'
  });

  this.title = videojs.createEl('div', {
    className: 'thumb-title'
  });

  subUnfo.appendChild(this.title);
  this.content_.appendChild(subUnfo);
  this.controlText_.appendChild(this.content_);
  return el;
};

// OnClick - Toggle between play and pause
videojs.NextButton.prototype.onClick = function () {
  this.player_.trigger('next');
};

videojs.NextButton.prototype.update = function () {

  var options = this.player_.options().next;
  if (!options) {
    return this.hide();
  } else {
    this.show();
  }
  this.title.innerHTML = options.title;
  this.setSrc(options.poster);
};

/**
 * Set the thumb source depending on the display method
 */
videojs.NextButton.prototype.setSrc = function (url) {
  var backgroundImage;

  if (!videojs.BACKGROUND_SIZE_SUPPORTED) {
    this.fallbackImg_.src = url;
  } else {
    backgroundImage = '';
    if (url) {
      backgroundImage = 'url("' + url + '")';
    }

    this.fallbackImg_.style.backgroundImage = backgroundImage;
  }
};

videojs.ProgressTip = videojs.Component.extend({
  /** @constructor */
  init: function (player, options) {
    videojs.Component.call(this, player, options);
    player.on('loadedmetadata', videojs.bind(this, function () {
      if (!this.player().controlBar) {
        return false;
      }
      this.player().controlBar.progressControl.on('mousemove', videojs.bind(this, this.updateContent));
      this.player().controlBar.progressControl.on('mouseenter', videojs.bind(this, this.show));
      this.player().controlBar.progressControl.on('mouseleave', videojs.bind(this, this.hide));
      //this.player().controlBar.on('mouseout', videojs.bind(this, this.hide));
      //this.player().controlBar.on('mouseleave', videojs.bind(this, this.hide));
    }));
  }
});

videojs.ProgressTip.prototype.show = function () {
  if (this.hasClass('vjs-hidden')) {
    this.removeClass('vjs-hidden');
  }
  return this;
};
videojs.ProgressTip.prototype.hide = function () {
  if (!this.hasClass('vjs-hidden')) {
    this.addClass('vjs-hidden');
  }
  return this;
};


videojs.ProgressControl.prototype.options_.children.progressTip = {};

videojs.ProgressTip.prototype.createEl = function () {
  return videojs.createEl('div', {
    className: 'vjs-tip vjs-hidden',
    innerHTML: '<div id="vjs-tip-arrow"></div><div id="vjs-tip-inner"></div>'
  });
};

videojs.ProgressTip.prototype.updateContent = function (event) {
  var barHeight, player, minutes, seconds, seekBar, seekBarPos, timeInSeconds;
  player = this.player();
  seekBar = player.controlBar.progressControl.seekBar;
  seekBarPos = videojs.findPosition(seekBar.el());
  var realPosition = (event.pageX - (seekBarPos.left));
  var mousePosition = realPosition / seekBar.width();
  timeInSeconds = mousePosition * player.duration();
  if (timeInSeconds === player.duration()) {
    timeInSeconds = timeInSeconds - 0.1;
  }
  minutes = Math.floor(timeInSeconds / 60);
  seconds = Math.floor(timeInSeconds - minutes * 60);
  if (seconds < 10) {
    seconds = '0' + seconds;
  }
  //$('#vjs-tip-inner').html("" + minutes + ":" + seconds);
  //barHeight = $('.vjs-control-bar').height();
  //$("#vjs-tip").css("top", "" + (event.pageY - $(this).offset().top - barHeight - 20) + "px").css("left", "" + (event.pageX - $(this).offset().left - 20) + "px").css("visibility", "visible");
  this.el().innerHTML = '<div id="vjs-tip-arrow"></div><div id="vjs-tip-inner">' + minutes + ':' + seconds + '</div>';
  this.el().style.left = (realPosition - (this.width() * 0.5)) + 'px';
};

videojs.ErrorScreen = videojs.ErrorDisplay.extend({
  /** @constructor */
  init: function (player, options) {
    videojs.ErrorDisplay.call(this, player, options);
  }
});

/**
 * Inject Error screen in core player
 * @type {{}}
 */
videojs.options.children.errorScreen = {};

videojs.ErrorScreen.prototype.messages = {
  unknown: 'Une erreur est survenue lors de la lecture de la vidéo.',
  1: 'Vous avez interrompu la lecture de la vidéo.',
  2: 'Une erreur de réseau a interrompu le téléchargement de la vidéo.',
  3: 'La lecture de la vidéo a été interrompue à cause d\'un problème de corruption ou parce que la vidéo utilise des fonctionnalités non prises en charge par votre navigateur.',
  4: 'Cette vidéo n\'a pas pu être chargée, soit parce que le serveur ou le réseau a échoué ou parce que le format n\'est pas reconnu.',
  5: 'The video is encrypted and we do not have the keys to decrypt it.',
  6: 'La lecture de cette vidéo nécessite Adobe Flash Player, cliquer ici pour le télécharger : <a href="https://get.adobe.com/fr/flashplayer/">https://get.adobe.com/fr/flashplayer/</a>',
  2014: 'Le plugin Adobe Flash Player de votre système d\'exploitation est obsolète et ne permet pas la lecture de cette vidéo.',
  AUTHORIZATION_ERROR: 'Cette vidéo ne peut pas être lu sur ce domaine.',
  DRM_ERROR: 'L\'obtention de la licence de contenu de la vidéo a échoué.',
  PRIMETIME_ERROR: 'Une erreur est survenue lors de la lecture de la vidéo.',
  3313: 'L\'obtention de la licence de contenu de la vidéo a échoué, veuillez rééssayer.',
  3727: 'L\'obtention de la licence de contenu de la vidéo a échoué, veuillez rééssayer.',
  3307: 'L\'obtention de la licence de contenu de la vidéo a échoué.<br/>Veuillez réinitialiser vos fichiers licences de contenu vidéo dans les paramètres de Flash Player en <a href="http://www.macromedia.com/support/documentation/fr/flashplayer/help/settings_manager08.html">cliquant ici</a>.',
  3321: 'L\'obtention de la licence de contenu de la vidéo a échoué.<br/>Veuillez réinitialiser vos fichiers licences de contenu vidéo dans les paramètres de Flash Player en <a href="http://www.macromedia.com/support/documentation/fr/flashplayer/help/settings_manager08.html">cliquant ici</a>.',
  3364: 'L\'obtention de la licence de contenu de la vidéo a échoué.<br/>Veuillez réinitialiser vos fichiers licences de contenu vidéo dans les paramètres de Flash Player en <a href="http://www.macromedia.com/support/documentation/fr/flashplayer/help/settings_manager08.html">cliquant ici</a>.',
  3365: 'Vous ne pouvez pas lire cette vidéo en mode "navigation privée".',
  102100: 'La vidéo que vous demandez n\'existe plus.'
};

videojs.ErrorScreen.prototype.createEl = function () {
  var el = videojs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-error-screen'
  });

  this.contentEl_ = videojs.createEl('div');
  el.appendChild(this.contentEl_);

  videojs.insertFirst(el, this.player_.el());

  return el;
};

videojs.ErrorScreen.prototype.update = function () {
  if (this.player().error()) {
    /*jshint sub:true*/
    var errorCode = this.player().error().code,
      msg = this.messages.hasOwnProperty(errorCode) ? this.messages[errorCode] : this.messages['unknown'];
    this.contentEl_.innerHTML = msg + '<br/><br/>code : ' + errorCode;
  }
};

videojs.FlashBlockDetector = videojs.CoreObject.extend({
  init: function (player, options, ready) {
    videojs.CoreObject.call(this, player, options, ready);
    var techRequired = 'Flash,Dashas';
    var techFounded = false;
    var fbVal = (function () {
      if (player.techName && !~techRequired.indexOf(player.techName)) {
        return false;
      }
      /*jshint sub:true*/
      for (var i = 0, j = player.options_['techOrder']; i < j.length; i++) {
        var techName = videojs.capitalize(j[i]);
        if (~techRequired.indexOf(techName)) {
          techFounded = true;
        }
      }

      if (!techFounded) {
        return false;
      }
      if (videojs.IS_ANDROID || videojs.IS_IOS) {
        return false;
      }
      var e = document.createElement(videojs.IS_IE ? 'object' : 'embed');
      e.type = 'application/x-shockwave-flash';
      document.body.appendChild(e);
      var isValid = !('PercentLoaded' in e);
      document.body.removeChild(e);
      return isValid;
    })();
    player.ready(function () {
      if (fbVal) {
        //Si le player requiert une version de flash mais que celle ci n'est pas installée on affiche un message d'erreur
        var flVersion = videojs.Flash.version();
        if (!parseInt(flVersion, 10)) {
          this.setTimeout(function () {
            player.error({code: 6, message: ''});
          }, 0);
        } else {
          player.addClass('flash-block');
        }
      }
    });
  }
});

/**
 * Push childrre in default config
 * @type {{}}
 */
videojs.options.children.flashBlockDetector = {};

/**
 * Loading spinner for waiting events
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */

videojs.LoadingSpinner.prototype.createEl = function () {
  var
    el = videojs.Component.prototype.createEl.call(this, 'div', {
      className: 'vjs-loading-spinner',
      innerHTML: '<svg class="circular" viewBox="25 25 50 50"> <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="4" stroke-miterlimit="10"/> </svg>'
    });

  return el;
};

videojs.Player.prototype.audioTracks = function () {
  /*jshint sub:true*/
  return this.tech && this.techGet('audioTracks');
};

videojs.Player.prototype.setAudioTrack = function (track) {
  /*jshint sub:true*/
  return this.tech && this.tech['setAudioTrack'](track);
};

videojs.Player.prototype.videoTracks = function () {
  /*jshint sub:true*/
  return this.tech && this.techGet('videoTracks');
};

videojs.Player.prototype.setVideoTrack = function (track) {
  /*jshint sub:true*/
  return this.tech && this.tech['setVideoTrack'](track);
};

videojs.Player.prototype.getPlaybackStatistics = function (type) {
  /*jshint sub:true*/
  return this.tech && this.tech['getPlaybackStatistics']();
};

videojs.Player.prototype.getCribbedMetricsFor = function (type) {
  /*jshint sub:true*/
  return this.tech && this.tech['getCribbedMetricsFor'](type);
};

(function e(t, n, r) {
  function s(o, u) {
    if (!n[o]) {
      if (!t[o]) {
        var a = typeof require == "function" && require;
        if (!u && a) return a(o, !0);
        if (i) return i(o, !0);
        throw new Error("Cannot find module '" + o + "'")
      }
      var f = n[o] = {
        exports: {}
      };
      t[o][0].call(f.exports, function (e) {
        var n = t[o][1][e];
        return s(n ? n : e)
      }, f, f.exports, e, t, n, r)
    }
    return n[o].exports
  }

  var i = typeof require == "function" && require;
  for (var o = 0; o < r.length; o++) s(r[o]);
  return s
})({
  1: [
    function (require, module, exports) {
      "use strict";
      module.exports = require("./src/main");


    }, {
      "./src/main": 47
    }
  ],
  2: [
    function (require, module, exports) {

    }, {}
  ],
  3: [
    function (require, module, exports) {

      function EventEmitter() {
        this._events = this._events || {};
        this._maxListeners = this._maxListeners || undefined;
      }

      module.exports = EventEmitter;

      // Backwards-compat with node 0.10.x
      EventEmitter.EventEmitter = EventEmitter;

      EventEmitter.prototype._events = undefined;
      EventEmitter.prototype._maxListeners = undefined;

      // By default EventEmitters will print a warning if more than 10 listeners are
      // added to it. This is a useful default which helps finding memory leaks.
      EventEmitter.defaultMaxListeners = 10;

      // Obviously not all Emitters should be limited to 10. This function allows
      // that to be increased. Set to zero for unlimited.
      EventEmitter.prototype.setMaxListeners = function (n) {
        if (!isNumber(n) || n < 0 || isNaN(n))
          throw TypeError('n must be a positive number');
        this._maxListeners = n;
        return this;
      };

      EventEmitter.prototype.emit = function (type) {
        var er, handler, len, args, i, listeners;

        if (!this._events)
          this._events = {};

        // If there is no 'error' event listener then throw.
        if (type === 'error') {
          if (!this._events.error ||
            (isObject(this._events.error) && !this._events.error.length)) {
            er = arguments[1];
            if (er instanceof Error) {
              throw er; // Unhandled 'error' event
            }
            throw TypeError('Uncaught, unspecified "error" event.');
          }
        }

        handler = this._events[type];

        if (isUndefined(handler))
          return false;

        if (isFunction(handler)) {
          switch (arguments.length) {
            // fast cases
            case 1:
              handler.call(this);
              break;
            case 2:
              handler.call(this, arguments[1]);
              break;
            case 3:
              handler.call(this, arguments[1], arguments[2]);
              break;
            // slower
            default:
              len = arguments.length;
              args = new Array(len - 1);
              for (i = 1; i < len; i++)
                args[i - 1] = arguments[i];
              handler.apply(this, args);
          }
        } else if (isObject(handler)) {
          len = arguments.length;
          args = new Array(len - 1);
          for (i = 1; i < len; i++)
            args[i - 1] = arguments[i];

          listeners = handler.slice();
          len = listeners.length;
          for (i = 0; i < len; i++)
            listeners[i].apply(this, args);
        }

        return true;
      };

      EventEmitter.prototype.addListener = function (type, listener) {
        var m;

        if (!isFunction(listener))
          throw TypeError('listener must be a function');

        if (!this._events)
          this._events = {};

        // To avoid recursion in the case that type === "newListener"! Before
        // adding it to the listeners, first emit "newListener".
        if (this._events.newListener)
          this.emit('newListener', type,
            isFunction(listener.listener) ?
              listener.listener : listener);

        if (!this._events[type])
        // Optimize the case of one listener. Don't need the extra array object.
          this._events[type] = listener;
        else if (isObject(this._events[type]))
        // If we've already got an array, just append.
          this._events[type].push(listener);
        else
        // Adding the second element, need to change to array.
          this._events[type] = [this._events[type], listener];

        // Check for listener leak
        if (isObject(this._events[type]) && !this._events[type].warned) {
          var m;
          if (!isUndefined(this._maxListeners)) {
            m = this._maxListeners;
          } else {
            m = EventEmitter.defaultMaxListeners;
          }

          if (m && m > 0 && this._events[type].length > m) {
            this._events[type].warned = true;
            console.error('(node) warning: possible EventEmitter memory ' +
              'leak detected. %d listeners added. ' +
              'Use emitter.setMaxListeners() to increase limit.',
              this._events[type].length);
            if (typeof console.trace === 'function') {
              // not supported in IE 10
              console.trace();
            }
          }
        }

        return this;
      };

      EventEmitter.prototype.on = EventEmitter.prototype.addListener;

      EventEmitter.prototype.once = function (type, listener) {
        if (!isFunction(listener))
          throw TypeError('listener must be a function');

        var fired = false;

        function g() {
          this.removeListener(type, g);

          if (!fired) {
            fired = true;
            listener.apply(this, arguments);
          }
        }

        g.listener = listener;
        this.on(type, g);

        return this;
      };

      // emits a 'removeListener' event iff the listener was removed
      EventEmitter.prototype.removeListener = function (type, listener) {
        var list, position, length, i;

        if (!isFunction(listener))
          throw TypeError('listener must be a function');

        if (!this._events || !this._events[type])
          return this;

        list = this._events[type];
        length = list.length;
        position = -1;

        if (list === listener ||
          (isFunction(list.listener) && list.listener === listener)) {
          delete this._events[type];
          if (this._events.removeListener)
            this.emit('removeListener', type, listener);

        } else if (isObject(list)) {
          for (i = length; i-- > 0;) {
            if (list[i] === listener ||
              (list[i].listener && list[i].listener === listener)) {
              position = i;
              break;
            }
          }

          if (position < 0)
            return this;

          if (list.length === 1) {
            list.length = 0;
            delete this._events[type];
          } else {
            list.splice(position, 1);
          }

          if (this._events.removeListener)
            this.emit('removeListener', type, listener);
        }

        return this;
      };

      EventEmitter.prototype.removeAllListeners = function (type) {
        var key, listeners;

        if (!this._events)
          return this;

        // not listening for removeListener, no need to emit
        if (!this._events.removeListener) {
          if (arguments.length === 0)
            this._events = {};
          else if (this._events[type])
            delete this._events[type];
          return this;
        }

        // emit removeListener for all listeners on all events
        if (arguments.length === 0) {
          for (key in this._events) {
            if (key === 'removeListener') continue;
            this.removeAllListeners(key);
          }
          this.removeAllListeners('removeListener');
          this._events = {};
          return this;
        }

        listeners = this._events[type];

        if (isFunction(listeners)) {
          this.removeListener(type, listeners);
        } else {
          // LIFO order
          while (listeners.length)
            this.removeListener(type, listeners[listeners.length - 1]);
        }
        delete this._events[type];

        return this;
      };

      EventEmitter.prototype.listeners = function (type) {
        var ret;
        if (!this._events || !this._events[type])
          ret = [];
        else if (isFunction(this._events[type]))
          ret = [this._events[type]];
        else
          ret = this._events[type].slice();
        return ret;
      };

      EventEmitter.listenerCount = function (emitter, type) {
        var ret;
        if (!emitter._events || !emitter._events[type])
          ret = 0;
        else if (isFunction(emitter._events[type]))
          ret = 1;
        else
          ret = emitter._events[type].length;
        return ret;
      };

      function isFunction(arg) {
        return typeof arg === 'function';
      }

      function isNumber(arg) {
        return typeof arg === 'number';
      }

      function isObject(arg) {
        return typeof arg === 'object' && arg !== null;
      }

      function isUndefined(arg) {
        return arg === void 0;
      }

    }, {}
  ],
  4: [
    function (require, module, exports) {
      // shim for using process in browser

      var process = module.exports = {};

      process.nextTick = (function () {
        var canSetImmediate = typeof window !== 'undefined' && window.setImmediate;
        var canPost = typeof window !== 'undefined' && window.postMessage && window.addEventListener;

        if (canSetImmediate) {
          return function (f) {
            return window.setImmediate(f)
          };
        }

        if (canPost) {
          var queue = [];
          window.addEventListener('message', function (ev) {
            var source = ev.source;
            if ((source === window || source === null) && ev.data === 'process-tick') {
              ev.stopPropagation();
              if (queue.length > 0) {
                var fn = queue.shift();
                fn();
              }
            }
          }, true);

          return function nextTick(fn) {
            queue.push(fn);
            window.postMessage('process-tick', '*');
          };
        }

        return function nextTick(fn) {
          setTimeout(fn, 0);
        };
      })();

      process.title = 'browser';
      process.browser = true;
      process.env = {};
      process.argv = [];

      function noop() {
      }

      process.on = noop;
      process.addListener = noop;
      process.once = noop;
      process.off = noop;
      process.removeListener = noop;
      process.removeAllListeners = noop;
      process.emit = noop;

      process.binding = function (name) {
        throw new Error('process.binding is not supported');
      }

      // TODO(shtylman)
      process.cwd = function () {
        return '/'
      };
      process.chdir = function (dir) {
        throw new Error('process.chdir is not supported');
      };

    }, {}
  ],
  5: [
    function (require, module, exports) {
      (function (process, global) {
        (function (global) {
          'use strict';
          if (global.$traceurRuntime) {
            return;
          }
          var $Object = Object;
          var $TypeError = TypeError;
          var $create = $Object.create;
          var $defineProperties = $Object.defineProperties;
          var $defineProperty = $Object.defineProperty;
          var $freeze = $Object.freeze;
          var $getOwnPropertyDescriptor = $Object.getOwnPropertyDescriptor;
          var $getOwnPropertyNames = $Object.getOwnPropertyNames;
          var $keys = $Object.keys;
          var $hasOwnProperty = $Object.prototype.hasOwnProperty;
          var $toString = $Object.prototype.toString;
          var $preventExtensions = Object.preventExtensions;
          var $seal = Object.seal;
          var $isExtensible = Object.isExtensible;

          function nonEnum(value) {
            return {
              configurable: true,
              enumerable: false,
              value: value,
              writable: true
            };
          }

          var types = {
            void: function voidType() {
            },
            any: function any() {
            },
            string: function string() {
            },
            number: function number() {
            },
            boolean: function boolean() {
            }
          };
          var method = nonEnum;
          var counter = 0;

          function newUniqueString() {
            return '__$' + Math.floor(Math.random() * 1e9) + '$' + ++counter + '$__';
          }

          var symbolInternalProperty = newUniqueString();
          var symbolDescriptionProperty = newUniqueString();
          var symbolDataProperty = newUniqueString();
          var symbolValues = $create(null);
          var privateNames = $create(null);

          function createPrivateName() {
            var s = newUniqueString();
            privateNames[s] = true;
            return s;
          }

          function isSymbol(symbol) {
            return typeof symbol === 'object' && symbol instanceof SymbolValue;
          }

          function typeOf(v) {
            if (isSymbol(v))
              return 'symbol';
            return typeof v;
          }

          function Symbol(description) {
            var value = new SymbolValue(description);
            if (!(this instanceof Symbol))
              return value;
            throw new TypeError('Symbol cannot be new\'ed');
          }

          $defineProperty(Symbol.prototype, 'constructor', nonEnum(Symbol));
          $defineProperty(Symbol.prototype, 'toString', method(function () {
            var symbolValue = this[symbolDataProperty];
            if (!getOption('symbols'))
              return symbolValue[symbolInternalProperty];
            if (!symbolValue)
              throw TypeError('Conversion from symbol to string');
            var desc = symbolValue[symbolDescriptionProperty];
            if (desc === undefined)
              desc = '';
            return 'Symbol(' + desc + ')';
          }));
          $defineProperty(Symbol.prototype, 'valueOf', method(function () {
            var symbolValue = this[symbolDataProperty];
            if (!symbolValue)
              throw TypeError('Conversion from symbol to string');
            if (!getOption('symbols'))
              return symbolValue[symbolInternalProperty];
            return symbolValue;
          }));

          function SymbolValue(description) {
            var key = newUniqueString();
            $defineProperty(this, symbolDataProperty, {
              value: this
            });
            $defineProperty(this, symbolInternalProperty, {
              value: key
            });
            $defineProperty(this, symbolDescriptionProperty, {
              value: description
            });
            freeze(this);
            symbolValues[key] = this;
          }

          $defineProperty(SymbolValue.prototype, 'constructor', nonEnum(Symbol));
          $defineProperty(SymbolValue.prototype, 'toString', {
            value: Symbol.prototype.toString,
            enumerable: false
          });
          $defineProperty(SymbolValue.prototype, 'valueOf', {
            value: Symbol.prototype.valueOf,
            enumerable: false
          });
          var hashProperty = createPrivateName();
          var hashPropertyDescriptor = {
            value: undefined
          };
          var hashObjectProperties = {
            hash: {
              value: undefined
            },
            self: {
              value: undefined
            }
          };
          var hashCounter = 0;

          function getOwnHashObject(object) {
            var hashObject = object[hashProperty];
            if (hashObject && hashObject.self === object)
              return hashObject;
            if ($isExtensible(object)) {
              hashObjectProperties.hash.value = hashCounter++;
              hashObjectProperties.self.value = object;
              hashPropertyDescriptor.value = $create(null, hashObjectProperties);
              $defineProperty(object, hashProperty, hashPropertyDescriptor);
              return hashPropertyDescriptor.value;
            }
            return undefined;
          }

          function freeze(object) {
            getOwnHashObject(object);
            return $freeze.apply(this, arguments);
          }

          function preventExtensions(object) {
            getOwnHashObject(object);
            return $preventExtensions.apply(this, arguments);
          }

          function seal(object) {
            getOwnHashObject(object);
            return $seal.apply(this, arguments);
          }

          Symbol.iterator = Symbol();
          freeze(SymbolValue.prototype);

          function toProperty(name) {
            if (isSymbol(name))
              return name[symbolInternalProperty];
            return name;
          }

          function getOwnPropertyNames(object) {
            var rv = [];
            var names = $getOwnPropertyNames(object);
            for (var i = 0; i < names.length; i++) {
              var name = names[i];
              if (!symbolValues[name] && !privateNames[name])
                rv.push(name);
            }
            return rv;
          }

          function getOwnPropertyDescriptor(object, name) {
            return $getOwnPropertyDescriptor(object, toProperty(name));
          }

          function getOwnPropertySymbols(object) {
            var rv = [];
            var names = $getOwnPropertyNames(object);
            for (var i = 0; i < names.length; i++) {
              var symbol = symbolValues[names[i]];
              if (symbol)
                rv.push(symbol);
            }
            return rv;
          }

          function hasOwnProperty(name) {
            return $hasOwnProperty.call(this, toProperty(name));
          }

          function getOption(name) {
            return global.traceur && global.traceur.options[name];
          }

          function setProperty(object, name, value) {
            var sym,
              desc;
            if (isSymbol(name)) {
              sym = name;
              name = name[symbolInternalProperty];
            }
            object[name] = value;
            if (sym && (desc = $getOwnPropertyDescriptor(object, name)))
              $defineProperty(object, name, {
                enumerable: false
              });
            return value;
          }

          function defineProperty(object, name, descriptor) {
            if (isSymbol(name)) {
              if (descriptor.enumerable) {
                descriptor = $create(descriptor, {
                  enumerable: {
                    value: false
                  }
                });
              }
              name = name[symbolInternalProperty];
            }
            $defineProperty(object, name, descriptor);
            return object;
          }

          function polyfillObject(Object) {
            $defineProperty(Object, 'defineProperty', {
              value: defineProperty
            });
            $defineProperty(Object, 'getOwnPropertyNames', {
              value: getOwnPropertyNames
            });
            $defineProperty(Object, 'getOwnPropertyDescriptor', {
              value: getOwnPropertyDescriptor
            });
            $defineProperty(Object.prototype, 'hasOwnProperty', {
              value: hasOwnProperty
            });
            $defineProperty(Object, 'freeze', {
              value: freeze
            });
            $defineProperty(Object, 'preventExtensions', {
              value: preventExtensions
            });
            $defineProperty(Object, 'seal', {
              value: seal
            });
            Object.getOwnPropertySymbols = getOwnPropertySymbols;
          }

          function exportStar(object) {
            for (var i = 1; i < arguments.length; i++) {
              var names = $getOwnPropertyNames(arguments[i]);
              for (var j = 0; j < names.length; j++) {
                var name = names[j];
                if (privateNames[name])
                  continue;
                (function (mod, name) {
                  $defineProperty(object, name, {
                    get: function () {
                      return mod[name];
                    },
                    enumerable: true
                  });
                })(arguments[i], names[j]);
              }
            }
            return object;
          }

          function isObject(x) {
            return x != null && (typeof x === 'object' || typeof x === 'function');
          }

          function toObject(x) {
            if (x == null)
              throw $TypeError();
            return $Object(x);
          }

          function checkObjectCoercible(argument) {
            if (argument == null) {
              throw new TypeError('Value cannot be converted to an Object');
            }
            return argument;
          }

          function setupGlobals(global) {
            global.Symbol = Symbol;
            global.Reflect = global.Reflect || {};
            global.Reflect.global = global.Reflect.global || global;
            polyfillObject(global.Object);
          }

          setupGlobals(global);
          global.$traceurRuntime = {
            createPrivateName: createPrivateName,
            exportStar: exportStar,
            getOwnHashObject: getOwnHashObject,
            privateNames: privateNames,
            setProperty: setProperty,
            setupGlobals: setupGlobals,
            toObject: toObject,
            isObject: isObject,
            toProperty: toProperty,
            type: types,
            typeof: typeOf,
            checkObjectCoercible: checkObjectCoercible,
            hasOwnProperty: function (o, p) {
              return hasOwnProperty.call(o, p);
            },
            defineProperties: $defineProperties,
            defineProperty: $defineProperty,
            getOwnPropertyDescriptor: $getOwnPropertyDescriptor,
            getOwnPropertyNames: $getOwnPropertyNames,
            keys: $keys
          };
        })(typeof global !== 'undefined' ? global : this);
        (function () {
          'use strict';

          function spread() {
            var rv = [],
              j = 0,
              iterResult;
            for (var i = 0; i < arguments.length; i++) {
              var valueToSpread = $traceurRuntime.checkObjectCoercible(arguments[i]);
              if (typeof valueToSpread[$traceurRuntime.toProperty(Symbol.iterator)] !== 'function') {
                throw new TypeError('Cannot spread non-iterable object.');
              }
              var iter = valueToSpread[$traceurRuntime.toProperty(Symbol.iterator)]();
              while (!(iterResult = iter.next()).done) {
                rv[j++] = iterResult.value;
              }
            }
            return rv;
          }

          $traceurRuntime.spread = spread;
        })();
        (function () {
          'use strict';
          var $Object = Object;
          var $TypeError = TypeError;
          var $create = $Object.create;
          var $defineProperties = $traceurRuntime.defineProperties;
          var $defineProperty = $traceurRuntime.defineProperty;
          var $getOwnPropertyDescriptor = $traceurRuntime.getOwnPropertyDescriptor;
          var $getOwnPropertyNames = $traceurRuntime.getOwnPropertyNames;
          var $getPrototypeOf = Object.getPrototypeOf;

          function superDescriptor(homeObject, name) {
            var proto = $getPrototypeOf(homeObject);
            do {
              var result = $getOwnPropertyDescriptor(proto, name);
              if (result)
                return result;
              proto = $getPrototypeOf(proto);
            } while (proto);
            return undefined;
          }

          function superCall(self, homeObject, name, args) {
            return superGet(self, homeObject, name).apply(self, args);
          }

          function superGet(self, homeObject, name) {
            var descriptor = superDescriptor(homeObject, name);
            if (descriptor) {
              if (!descriptor.get)
                return descriptor.value;
              return descriptor.get.call(self);
            }
            return undefined;
          }

          function superSet(self, homeObject, name, value) {
            var descriptor = superDescriptor(homeObject, name);
            if (descriptor && descriptor.set) {
              descriptor.set.call(self, value);
              return value;
            }
            throw $TypeError("super has no setter '" + name + "'.");
          }

          function getDescriptors(object) {
            var descriptors = {},
              name,
              names = $getOwnPropertyNames(object);
            for (var i = 0; i < names.length; i++) {
              var name = names[i];
              descriptors[name] = $getOwnPropertyDescriptor(object, name);
            }
            return descriptors;
          }

          function createClass(ctor, object, staticObject, superClass) {
            $defineProperty(object, 'constructor', {
              value: ctor,
              configurable: true,
              enumerable: false,
              writable: true
            });
            if (arguments.length > 3) {
              if (typeof superClass === 'function')
                ctor.__proto__ = superClass;
              ctor.prototype = $create(getProtoParent(superClass), getDescriptors(object));
            } else {
              ctor.prototype = object;
            }
            $defineProperty(ctor, 'prototype', {
              configurable: false,
              writable: false
            });
            return $defineProperties(ctor, getDescriptors(staticObject));
          }

          function getProtoParent(superClass) {
            if (typeof superClass === 'function') {
              var prototype = superClass.prototype;
              if ($Object(prototype) === prototype || prototype === null)
                return superClass.prototype;
              throw new $TypeError('super prototype must be an Object or null');
            }
            if (superClass === null)
              return null;
            throw new $TypeError(("Super expression must either be null or a function, not " + typeof superClass + "."));
          }

          function defaultSuperCall(self, homeObject, args) {
            if ($getPrototypeOf(homeObject) !== null)
              superCall(self, homeObject, 'constructor', args);
          }

          $traceurRuntime.createClass = createClass;
          $traceurRuntime.defaultSuperCall = defaultSuperCall;
          $traceurRuntime.superCall = superCall;
          $traceurRuntime.superGet = superGet;
          $traceurRuntime.superSet = superSet;
        })();
        (function () {
          'use strict';
          var createPrivateName = $traceurRuntime.createPrivateName;
          var $defineProperties = $traceurRuntime.defineProperties;
          var $defineProperty = $traceurRuntime.defineProperty;
          var $create = Object.create;
          var $TypeError = TypeError;

          function nonEnum(value) {
            return {
              configurable: true,
              enumerable: false,
              value: value,
              writable: true
            };
          }

          var ST_NEWBORN = 0;
          var ST_EXECUTING = 1;
          var ST_SUSPENDED = 2;
          var ST_CLOSED = 3;
          var END_STATE = -2;
          var RETHROW_STATE = -3;

          function getInternalError(state) {
            return new Error('Traceur compiler bug: invalid state in state machine: ' + state);
          }

          function GeneratorContext() {
            this.state = 0;
            this.GState = ST_NEWBORN;
            this.storedException = undefined;
            this.finallyFallThrough = undefined;
            this.sent_ = undefined;
            this.returnValue = undefined;
            this.tryStack_ = [];
          }

          GeneratorContext.prototype = {
            pushTry: function (catchState, finallyState) {
              if (finallyState !== null) {
                var finallyFallThrough = null;
                for (var i = this.tryStack_.length - 1; i >= 0; i--) {
                  if (this.tryStack_[i].catch !== undefined) {
                    finallyFallThrough = this.tryStack_[i].catch;
                    break;
                  }
                }
                if (finallyFallThrough === null)
                  finallyFallThrough = RETHROW_STATE;
                this.tryStack_.push({
                  finally: finallyState,
                  finallyFallThrough: finallyFallThrough
                });
              }
              if (catchState !== null) {
                this.tryStack_.push({
                  catch: catchState
                });
              }
            },
            popTry: function () {
              this.tryStack_.pop();
            },
            get sent() {
              this.maybeThrow();
              return this.sent_;
            },
            set sent(v) {
              this.sent_ = v;
            },
            get sentIgnoreThrow() {
              return this.sent_;
            },
            maybeThrow: function () {
              if (this.action === 'throw') {
                this.action = 'next';
                throw this.sent_;
              }
            },
            end: function () {
              switch (this.state) {
                case END_STATE:
                  return this;
                case RETHROW_STATE:
                  throw this.storedException;
                default:
                  throw getInternalError(this.state);
              }
            },
            handleException: function (ex) {
              this.GState = ST_CLOSED;
              this.state = END_STATE;
              throw ex;
            }
          };

          function nextOrThrow(ctx, moveNext, action, x) {
            switch (ctx.GState) {
              case ST_EXECUTING:
                throw new Error(("\"" + action + "\" on executing generator"));
              case ST_CLOSED:
                if (action == 'next') {
                  return {
                    value: undefined,
                    done: true
                  };
                }
                throw x;
              case ST_NEWBORN:
                if (action === 'throw') {
                  ctx.GState = ST_CLOSED;
                  throw x;
                }
                if (x !== undefined)
                  throw $TypeError('Sent value to newborn generator');
              case ST_SUSPENDED:
                ctx.GState = ST_EXECUTING;
                ctx.action = action;
                ctx.sent = x;
                var value = moveNext(ctx);
                var done = value === ctx;
                if (done)
                  value = ctx.returnValue;
                ctx.GState = done ? ST_CLOSED : ST_SUSPENDED;
                return {
                  value: value,
                  done: done
                };
            }
          }

          var ctxName = createPrivateName();
          var moveNextName = createPrivateName();

          function GeneratorFunction() {
          }

          function GeneratorFunctionPrototype() {
          }

          GeneratorFunction.prototype = GeneratorFunctionPrototype;
          $defineProperty(GeneratorFunctionPrototype, 'constructor', nonEnum(GeneratorFunction));
          GeneratorFunctionPrototype.prototype = {
            constructor: GeneratorFunctionPrototype,
            next: function (v) {
              return nextOrThrow(this[ctxName], this[moveNextName], 'next', v);
            },
            throw: function (v) {
              return nextOrThrow(this[ctxName], this[moveNextName], 'throw', v);
            }
          };
          $defineProperties(GeneratorFunctionPrototype.prototype, {
            constructor: {
              enumerable: false
            },
            next: {
              enumerable: false
            },
            throw: {
              enumerable: false
            }
          });
          Object.defineProperty(GeneratorFunctionPrototype.prototype, Symbol.iterator, nonEnum(function () {
            return this;
          }));

          function createGeneratorInstance(innerFunction, functionObject, self) {
            var moveNext = getMoveNext(innerFunction, self);
            var ctx = new GeneratorContext();
            var object = $create(functionObject.prototype);
            object[ctxName] = ctx;
            object[moveNextName] = moveNext;
            return object;
          }

          function initGeneratorFunction(functionObject) {
            functionObject.prototype = $create(GeneratorFunctionPrototype.prototype);
            functionObject.__proto__ = GeneratorFunctionPrototype;
            return functionObject;
          }

          function AsyncFunctionContext() {
            GeneratorContext.call(this);
            this.err = undefined;
            var ctx = this;
            ctx.result = new Promise(function (resolve, reject) {
              ctx.resolve = resolve;
              ctx.reject = reject;
            });
          }

          AsyncFunctionContext.prototype = $create(GeneratorContext.prototype);
          AsyncFunctionContext.prototype.end = function () {
            switch (this.state) {
              case END_STATE:
                this.resolve(this.returnValue);
                break;
              case RETHROW_STATE:
                this.reject(this.storedException);
                break;
              default:
                this.reject(getInternalError(this.state));
            }
          };
          AsyncFunctionContext.prototype.handleException = function () {
            this.state = RETHROW_STATE;
          };

          function asyncWrap(innerFunction, self) {
            var moveNext = getMoveNext(innerFunction, self);
            var ctx = new AsyncFunctionContext();
            ctx.createCallback = function (newState) {
              return function (value) {
                ctx.state = newState;
                ctx.value = value;
                moveNext(ctx);
              };
            };
            ctx.errback = function (err) {
              handleCatch(ctx, err);
              moveNext(ctx);
            };
            moveNext(ctx);
            return ctx.result;
          }

          function getMoveNext(innerFunction, self) {
            return function (ctx) {
              while (true) {
                try {
                  return innerFunction.call(self, ctx);
                } catch (ex) {
                  handleCatch(ctx, ex);
                }
              }
            };
          }

          function handleCatch(ctx, ex) {
            ctx.storedException = ex;
            var last = ctx.tryStack_[ctx.tryStack_.length - 1];
            if (!last) {
              ctx.handleException(ex);
              return;
            }
            ctx.state = last.catch !== undefined ? last.catch : last.finally;
            if (last.finallyFallThrough !== undefined)
              ctx.finallyFallThrough = last.finallyFallThrough;
          }

          $traceurRuntime.asyncWrap = asyncWrap;
          $traceurRuntime.initGeneratorFunction = initGeneratorFunction;
          $traceurRuntime.createGeneratorInstance = createGeneratorInstance;
        })();
        (function () {
          function buildFromEncodedParts(opt_scheme, opt_userInfo, opt_domain, opt_port, opt_path, opt_queryData, opt_fragment) {
            var out = [];
            if (opt_scheme) {
              out.push(opt_scheme, ':');
            }
            if (opt_domain) {
              out.push('//');
              if (opt_userInfo) {
                out.push(opt_userInfo, '@');
              }
              out.push(opt_domain);
              if (opt_port) {
                out.push(':', opt_port);
              }
            }
            if (opt_path) {
              out.push(opt_path);
            }
            if (opt_queryData) {
              out.push('?', opt_queryData);
            }
            if (opt_fragment) {
              out.push('#', opt_fragment);
            }
            return out.join('');
          };
          var splitRe = new RegExp('^' + '(?:' + '([^:/?#.]+)' + ':)?' + '(?://' + '(?:([^/?#]*)@)?' + '([\\w\\d\\-\\u0100-\\uffff.%]*)' + '(?::([0-9]+))?' + ')?' + '([^?#]+)?' + '(?:\\?([^#]*))?' + '(?:#(.*))?' + '$');
          var ComponentIndex = {
            SCHEME: 1,
            USER_INFO: 2,
            DOMAIN: 3,
            PORT: 4,
            PATH: 5,
            QUERY_DATA: 6,
            FRAGMENT: 7
          };

          function split(uri) {
            return (uri.match(splitRe));
          }

          function removeDotSegments(path) {
            if (path === '/')
              return '/';
            var leadingSlash = path[0] === '/' ? '/' : '';
            var trailingSlash = path.slice(-1) === '/' ? '/' : '';
            var segments = path.split('/');
            var out = [];
            var up = 0;
            for (var pos = 0; pos < segments.length; pos++) {
              var segment = segments[pos];
              switch (segment) {
                case '':
                case '.':
                  break;
                case '..':
                  if (out.length)
                    out.pop();
                  else
                    up++;
                  break;
                default:
                  out.push(segment);
              }
            }
            if (!leadingSlash) {
              while (up-- > 0) {
                out.unshift('..');
              }
              if (out.length === 0)
                out.push('.');
            }
            return leadingSlash + out.join('/') + trailingSlash;
          }

          function joinAndCanonicalizePath(parts) {
            var path = parts[ComponentIndex.PATH] || '';
            path = removeDotSegments(path);
            parts[ComponentIndex.PATH] = path;
            return buildFromEncodedParts(parts[ComponentIndex.SCHEME], parts[ComponentIndex.USER_INFO], parts[ComponentIndex.DOMAIN], parts[ComponentIndex.PORT], parts[ComponentIndex.PATH], parts[ComponentIndex.QUERY_DATA], parts[ComponentIndex.FRAGMENT]);
          }

          function canonicalizeUrl(url) {
            var parts = split(url);
            return joinAndCanonicalizePath(parts);
          }

          function resolveUrl(base, url) {
            var parts = split(url);
            var baseParts = split(base);
            if (parts[ComponentIndex.SCHEME]) {
              return joinAndCanonicalizePath(parts);
            } else {
              parts[ComponentIndex.SCHEME] = baseParts[ComponentIndex.SCHEME];
            }
            for (var i = ComponentIndex.SCHEME; i <= ComponentIndex.PORT; i++) {
              if (!parts[i]) {
                parts[i] = baseParts[i];
              }
            }
            if (parts[ComponentIndex.PATH][0] == '/') {
              return joinAndCanonicalizePath(parts);
            }
            var path = baseParts[ComponentIndex.PATH];
            var index = path.lastIndexOf('/');
            path = path.slice(0, index + 1) + parts[ComponentIndex.PATH];
            parts[ComponentIndex.PATH] = path;
            return joinAndCanonicalizePath(parts);
          }

          function isAbsolute(name) {
            if (!name)
              return false;
            if (name[0] === '/')
              return true;
            var parts = split(name);
            if (parts[ComponentIndex.SCHEME])
              return true;
            return false;
          }

          $traceurRuntime.canonicalizeUrl = canonicalizeUrl;
          $traceurRuntime.isAbsolute = isAbsolute;
          $traceurRuntime.removeDotSegments = removeDotSegments;
          $traceurRuntime.resolveUrl = resolveUrl;
        })();
        (function (global) {
          'use strict';
          var $__2 = $traceurRuntime,
            canonicalizeUrl = $__2.canonicalizeUrl,
            resolveUrl = $__2.resolveUrl,
            isAbsolute = $__2.isAbsolute;
          var moduleInstantiators = Object.create(null);
          var baseURL;
          if (global.location && global.location.href)
            baseURL = resolveUrl(global.location.href, './');
          else
            baseURL = '';
          var UncoatedModuleEntry = function UncoatedModuleEntry(url, uncoatedModule) {
            this.url = url;
            this.value_ = uncoatedModule;
          };
          ($traceurRuntime.createClass)(UncoatedModuleEntry, {}, {});
          var ModuleEvaluationError = function ModuleEvaluationError(erroneousModuleName, cause) {
            this.message = this.constructor.name + ': ' + this.stripCause(cause) + ' in ' + erroneousModuleName;
            if (!(cause instanceof $ModuleEvaluationError) && cause.stack)
              this.stack = this.stripStack(cause.stack);
            else
              this.stack = '';
          };
          var $ModuleEvaluationError = ModuleEvaluationError;
          ($traceurRuntime.createClass)(ModuleEvaluationError, {
            stripError: function (message) {
              return message.replace(/.*Error:/, this.constructor.name + ':');
            },
            stripCause: function (cause) {
              if (!cause)
                return '';
              if (!cause.message)
                return cause + '';
              return this.stripError(cause.message);
            },
            loadedBy: function (moduleName) {
              this.stack += '\n loaded by ' + moduleName;
            },
            stripStack: function (causeStack) {
              var stack = [];
              causeStack.split('\n').some((function (frame) {
                if (/UncoatedModuleInstantiator/.test(frame))
                  return true;
                stack.push(frame);
              }));
              stack[0] = this.stripError(stack[0]);
              return stack.join('\n');
            }
          }, {}, Error);
          var UncoatedModuleInstantiator = function UncoatedModuleInstantiator(url, func) {
            $traceurRuntime.superCall(this, $UncoatedModuleInstantiator.prototype, "constructor", [url, null]);
            this.func = func;
          };
          var $UncoatedModuleInstantiator = UncoatedModuleInstantiator;
          ($traceurRuntime.createClass)(UncoatedModuleInstantiator, {
            getUncoatedModule: function () {
              if (this.value_)
                return this.value_;
              try {
                return this.value_ = this.func.call(global);
              } catch (ex) {
                if (ex instanceof ModuleEvaluationError) {
                  ex.loadedBy(this.url);
                  throw ex;
                }
                throw new ModuleEvaluationError(this.url, ex);
              }
            }
          }, {}, UncoatedModuleEntry);

          function getUncoatedModuleInstantiator(name) {
            if (!name)
              return;
            var url = ModuleStore.normalize(name);
            return moduleInstantiators[url];
          };
          var moduleInstances = Object.create(null);
          var liveModuleSentinel = {};

          function Module(uncoatedModule) {
            var isLive = arguments[1];
            var coatedModule = Object.create(null);
            Object.getOwnPropertyNames(uncoatedModule).forEach((function (name) {
              var getter,
                value;
              if (isLive === liveModuleSentinel) {
                var descr = Object.getOwnPropertyDescriptor(uncoatedModule, name);
                if (descr.get)
                  getter = descr.get;
              }
              if (!getter) {
                value = uncoatedModule[name];
                getter = function () {
                  return value;
                };
              }
              Object.defineProperty(coatedModule, name, {
                get: getter,
                enumerable: true
              });
            }));
            Object.preventExtensions(coatedModule);
            return coatedModule;
          }

          var ModuleStore = {
            normalize: function (name, refererName, refererAddress) {
              if (typeof name !== "string")
                throw new TypeError("module name must be a string, not " + typeof name);
              if (isAbsolute(name))
                return canonicalizeUrl(name);
              if (/[^\.]\/\.\.\//.test(name)) {
                throw new Error('module name embeds /../: ' + name);
              }
              if (name[0] === '.' && refererName)
                return resolveUrl(refererName, name);
              return canonicalizeUrl(name);
            },
            get: function (normalizedName) {
              var m = getUncoatedModuleInstantiator(normalizedName);
              if (!m)
                return undefined;
              var moduleInstance = moduleInstances[m.url];
              if (moduleInstance)
                return moduleInstance;
              moduleInstance = Module(m.getUncoatedModule(), liveModuleSentinel);
              return moduleInstances[m.url] = moduleInstance;
            },
            set: function (normalizedName, module) {
              normalizedName = String(normalizedName);
              moduleInstantiators[normalizedName] = new UncoatedModuleInstantiator(normalizedName, (function () {
                return module;
              }));
              moduleInstances[normalizedName] = module;
            },
            get baseURL() {
              return baseURL;
            },
            set baseURL(v) {
              baseURL = String(v);
            },
            registerModule: function (name, func) {
              var normalizedName = ModuleStore.normalize(name);
              if (moduleInstantiators[normalizedName])
                throw new Error('duplicate module named ' + normalizedName);
              moduleInstantiators[normalizedName] = new UncoatedModuleInstantiator(normalizedName, func);
            },
            bundleStore: Object.create(null),
            register: function (name, deps, func) {
              if (!deps || !deps.length && !func.length) {
                this.registerModule(name, func);
              } else {
                this.bundleStore[name] = {
                  deps: deps,
                  execute: function () {
                    var $__0 = arguments;
                    var depMap = {};
                    deps.forEach((function (dep, index) {
                      return depMap[dep] = $__0[index];
                    }));
                    var registryEntry = func.call(this, depMap);
                    registryEntry.execute.call(this);
                    return registryEntry.exports;
                  }
                };
              }
            },
            getAnonymousModule: function (func) {
              return new Module(func.call(global), liveModuleSentinel);
            },
            getForTesting: function (name) {
              var $__0 = this;
              if (!this.testingPrefix_) {
                Object.keys(moduleInstances).some((function (key) {
                  var m = /(traceur@[^\/]*\/)/.exec(key);
                  if (m) {
                    $__0.testingPrefix_ = m[1];
                    return true;
                  }
                }));
              }
              return this.get(this.testingPrefix_ + name);
            }
          };
          ModuleStore.set('@traceur/src/runtime/ModuleStore', new Module({
            ModuleStore: ModuleStore
          }));
          var setupGlobals = $traceurRuntime.setupGlobals;
          $traceurRuntime.setupGlobals = function (global) {
            setupGlobals(global);
          };
          $traceurRuntime.ModuleStore = ModuleStore;
          global.System = {
            register: ModuleStore.register.bind(ModuleStore),
            get: ModuleStore.get,
            set: ModuleStore.set,
            normalize: ModuleStore.normalize
          };
          $traceurRuntime.getModuleImpl = function (name) {
            var instantiator = getUncoatedModuleInstantiator(name);
            return instantiator && instantiator.getUncoatedModule();
          };
        })(typeof global !== 'undefined' ? global : this);
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/utils", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/utils";
          var $ceil = Math.ceil;
          var $floor = Math.floor;
          var $isFinite = isFinite;
          var $isNaN = isNaN;
          var $pow = Math.pow;
          var $min = Math.min;
          var toObject = $traceurRuntime.toObject;

          function toUint32(x) {
            return x >>> 0;
          }

          function isObject(x) {
            return x && (typeof x === 'object' || typeof x === 'function');
          }

          function isCallable(x) {
            return typeof x === 'function';
          }

          function isNumber(x) {
            return typeof x === 'number';
          }

          function toInteger(x) {
            x = +x;
            if ($isNaN(x))
              return 0;
            if (x === 0 || !$isFinite(x))
              return x;
            return x > 0 ? $floor(x) : $ceil(x);
          }

          var MAX_SAFE_LENGTH = $pow(2, 53) - 1;

          function toLength(x) {
            var len = toInteger(x);
            return len < 0 ? 0 : $min(len, MAX_SAFE_LENGTH);
          }

          function checkIterable(x) {
            return !isObject(x) ? undefined : x[Symbol.iterator];
          }

          function isConstructor(x) {
            return isCallable(x);
          }

          function createIteratorResultObject(value, done) {
            return {
              value: value,
              done: done
            };
          }

          function maybeDefine(object, name, descr) {
            if (!(name in object)) {
              Object.defineProperty(object, name, descr);
            }
          }

          function maybeDefineMethod(object, name, value) {
            maybeDefine(object, name, {
              value: value,
              configurable: true,
              enumerable: false,
              writable: true
            });
          }

          function maybeDefineConst(object, name, value) {
            maybeDefine(object, name, {
              value: value,
              configurable: false,
              enumerable: false,
              writable: false
            });
          }

          function maybeAddFunctions(object, functions) {
            for (var i = 0; i < functions.length; i += 2) {
              var name = functions[i];
              var value = functions[i + 1];
              maybeDefineMethod(object, name, value);
            }
          }

          function maybeAddConsts(object, consts) {
            for (var i = 0; i < consts.length; i += 2) {
              var name = consts[i];
              var value = consts[i + 1];
              maybeDefineConst(object, name, value);
            }
          }

          function maybeAddIterator(object, func, Symbol) {
            if (!Symbol || !Symbol.iterator || object[Symbol.iterator])
              return;
            if (object['@@iterator'])
              func = object['@@iterator'];
            Object.defineProperty(object, Symbol.iterator, {
              value: func,
              configurable: true,
              enumerable: false,
              writable: true
            });
          }

          var polyfills = [];

          function registerPolyfill(func) {
            polyfills.push(func);
          }

          function polyfillAll(global) {
            polyfills.forEach((function (f) {
              return f(global);
            }));
          }

          return {
            get toObject() {
              return toObject;
            },
            get toUint32() {
              return toUint32;
            },
            get isObject() {
              return isObject;
            },
            get isCallable() {
              return isCallable;
            },
            get isNumber() {
              return isNumber;
            },
            get toInteger() {
              return toInteger;
            },
            get toLength() {
              return toLength;
            },
            get checkIterable() {
              return checkIterable;
            },
            get isConstructor() {
              return isConstructor;
            },
            get createIteratorResultObject() {
              return createIteratorResultObject;
            },
            get maybeDefine() {
              return maybeDefine;
            },
            get maybeDefineMethod() {
              return maybeDefineMethod;
            },
            get maybeDefineConst() {
              return maybeDefineConst;
            },
            get maybeAddFunctions() {
              return maybeAddFunctions;
            },
            get maybeAddConsts() {
              return maybeAddConsts;
            },
            get maybeAddIterator() {
              return maybeAddIterator;
            },
            get registerPolyfill() {
              return registerPolyfill;
            },
            get polyfillAll() {
              return polyfillAll;
            }
          };
        });
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/Map", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/Map";
          var $__3 = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils"),
            isObject = $__3.isObject,
            maybeAddIterator = $__3.maybeAddIterator,
            registerPolyfill = $__3.registerPolyfill;
          var getOwnHashObject = $traceurRuntime.getOwnHashObject;
          var $hasOwnProperty = Object.prototype.hasOwnProperty;
          var deletedSentinel = {};

          function lookupIndex(map, key) {
            if (isObject(key)) {
              var hashObject = getOwnHashObject(key);
              return hashObject && map.objectIndex_[hashObject.hash];
            }
            if (typeof key === 'string')
              return map.stringIndex_[key];
            return map.primitiveIndex_[key];
          }

          function initMap(map) {
            map.entries_ = [];
            map.objectIndex_ = Object.create(null);
            map.stringIndex_ = Object.create(null);
            map.primitiveIndex_ = Object.create(null);
            map.deletedCount_ = 0;
          }

          var Map = function Map() {
            var iterable = arguments[0];
            if (!isObject(this))
              throw new TypeError('Map called on incompatible type');
            if ($hasOwnProperty.call(this, 'entries_')) {
              throw new TypeError('Map can not be reentrantly initialised');
            }
            initMap(this);
            if (iterable !== null && iterable !== undefined) {
              for (var $__5 = iterable[Symbol.iterator](),
                     $__6; !($__6 = $__5.next()).done;) {
                var $__7 = $__6.value,
                  key = $__7[0],
                  value = $__7[1];
                {
                  this.set(key, value);
                }
              }
            }
          };
          ($traceurRuntime.createClass)(Map, {
            get size() {
              return this.entries_.length / 2 - this.deletedCount_;
            },
            get: function (key) {
              var index = lookupIndex(this, key);
              if (index !== undefined)
                return this.entries_[index + 1];
            },
            set: function (key, value) {
              var objectMode = isObject(key);
              var stringMode = typeof key === 'string';
              var index = lookupIndex(this, key);
              if (index !== undefined) {
                this.entries_[index + 1] = value;
              } else {
                index = this.entries_.length;
                this.entries_[index] = key;
                this.entries_[index + 1] = value;
                if (objectMode) {
                  var hashObject = getOwnHashObject(key);
                  var hash = hashObject.hash;
                  this.objectIndex_[hash] = index;
                } else if (stringMode) {
                  this.stringIndex_[key] = index;
                } else {
                  this.primitiveIndex_[key] = index;
                }
              }
              return this;
            },
            has: function (key) {
              return lookupIndex(this, key) !== undefined;
            },
            delete: function (key) {
              var objectMode = isObject(key);
              var stringMode = typeof key === 'string';
              var index;
              var hash;
              if (objectMode) {
                var hashObject = getOwnHashObject(key);
                if (hashObject) {
                  index = this.objectIndex_[hash = hashObject.hash];
                  delete this.objectIndex_[hash];
                }
              } else if (stringMode) {
                index = this.stringIndex_[key];
                delete this.stringIndex_[key];
              } else {
                index = this.primitiveIndex_[key];
                delete this.primitiveIndex_[key];
              }
              if (index !== undefined) {
                this.entries_[index] = deletedSentinel;
                this.entries_[index + 1] = undefined;
                this.deletedCount_++;
                return true;
              }
              return false;
            },
            clear: function () {
              initMap(this);
            },
            forEach: function (callbackFn) {
              var thisArg = arguments[1];
              for (var i = 0; i < this.entries_.length; i += 2) {
                var key = this.entries_[i];
                var value = this.entries_[i + 1];
                if (key === deletedSentinel)
                  continue;
                callbackFn.call(thisArg, value, key, this);
              }
            },
            entries: $traceurRuntime.initGeneratorFunction(function $__8() {
              var i,
                key,
                value;
              return $traceurRuntime.createGeneratorInstance(function ($ctx) {
                while (true)
                  switch ($ctx.state) {
                    case 0:
                      i = 0;
                      $ctx.state = 12;
                      break;
                    case 12:
                      $ctx.state = (i < this.entries_.length) ? 8 : -2;
                      break;
                    case 4:
                      i += 2;
                      $ctx.state = 12;
                      break;
                    case 8:
                      key = this.entries_[i];
                      value = this.entries_[i + 1];
                      $ctx.state = 9;
                      break;
                    case 9:
                      $ctx.state = (key === deletedSentinel) ? 4 : 6;
                      break;
                    case 6:
                      $ctx.state = 2;
                      return [key, value];
                    case 2:
                      $ctx.maybeThrow();
                      $ctx.state = 4;
                      break;
                    default:
                      return $ctx.end();
                  }
              }, $__8, this);
            }),
            keys: $traceurRuntime.initGeneratorFunction(function $__9() {
              var i,
                key,
                value;
              return $traceurRuntime.createGeneratorInstance(function ($ctx) {
                while (true)
                  switch ($ctx.state) {
                    case 0:
                      i = 0;
                      $ctx.state = 12;
                      break;
                    case 12:
                      $ctx.state = (i < this.entries_.length) ? 8 : -2;
                      break;
                    case 4:
                      i += 2;
                      $ctx.state = 12;
                      break;
                    case 8:
                      key = this.entries_[i];
                      value = this.entries_[i + 1];
                      $ctx.state = 9;
                      break;
                    case 9:
                      $ctx.state = (key === deletedSentinel) ? 4 : 6;
                      break;
                    case 6:
                      $ctx.state = 2;
                      return key;
                    case 2:
                      $ctx.maybeThrow();
                      $ctx.state = 4;
                      break;
                    default:
                      return $ctx.end();
                  }
              }, $__9, this);
            }),
            values: $traceurRuntime.initGeneratorFunction(function $__10() {
              var i,
                key,
                value;
              return $traceurRuntime.createGeneratorInstance(function ($ctx) {
                while (true)
                  switch ($ctx.state) {
                    case 0:
                      i = 0;
                      $ctx.state = 12;
                      break;
                    case 12:
                      $ctx.state = (i < this.entries_.length) ? 8 : -2;
                      break;
                    case 4:
                      i += 2;
                      $ctx.state = 12;
                      break;
                    case 8:
                      key = this.entries_[i];
                      value = this.entries_[i + 1];
                      $ctx.state = 9;
                      break;
                    case 9:
                      $ctx.state = (key === deletedSentinel) ? 4 : 6;
                      break;
                    case 6:
                      $ctx.state = 2;
                      return value;
                    case 2:
                      $ctx.maybeThrow();
                      $ctx.state = 4;
                      break;
                    default:
                      return $ctx.end();
                  }
              }, $__10, this);
            })
          }, {});
          Object.defineProperty(Map.prototype, Symbol.iterator, {
            configurable: true,
            writable: true,
            value: Map.prototype.entries
          });

          function polyfillMap(global) {
            var $__7 = global,
              Object = $__7.Object,
              Symbol = $__7.Symbol;
            if (!global.Map)
              global.Map = Map;
            var mapPrototype = global.Map.prototype;
            if (mapPrototype.entries) {
              maybeAddIterator(mapPrototype, mapPrototype.entries, Symbol);
              maybeAddIterator(Object.getPrototypeOf(new global.Map().entries()), function () {
                return this;
              }, Symbol);
            }
          }

          registerPolyfill(polyfillMap);
          return {
            get Map() {
              return Map;
            },
            get polyfillMap() {
              return polyfillMap;
            }
          };
        });
        System.get("traceur-runtime@0.0.62/src/runtime/polyfills/Map" + '');
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/Set", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/Set";
          var $__11 = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils"),
            isObject = $__11.isObject,
            maybeAddIterator = $__11.maybeAddIterator,
            registerPolyfill = $__11.registerPolyfill;
          var Map = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/Map").Map;
          var getOwnHashObject = $traceurRuntime.getOwnHashObject;
          var $hasOwnProperty = Object.prototype.hasOwnProperty;

          function initSet(set) {
            set.map_ = new Map();
          }

          var Set = function Set() {
            var iterable = arguments[0];
            if (!isObject(this))
              throw new TypeError('Set called on incompatible type');
            if ($hasOwnProperty.call(this, 'map_')) {
              throw new TypeError('Set can not be reentrantly initialised');
            }
            initSet(this);
            if (iterable !== null && iterable !== undefined) {
              for (var $__15 = iterable[Symbol.iterator](),
                     $__16; !($__16 = $__15.next()).done;) {
                var item = $__16.value;
                {
                  this.add(item);
                }
              }
            }
          };
          ($traceurRuntime.createClass)(Set, {
            get size() {
              return this.map_.size;
            },
            has: function (key) {
              return this.map_.has(key);
            },
            add: function (key) {
              this.map_.set(key, key);
              return this;
            },
            delete: function (key) {
              return this.map_.delete(key);
            },
            clear: function () {
              return this.map_.clear();
            },
            forEach: function (callbackFn) {
              var thisArg = arguments[1];
              var $__13 = this;
              return this.map_.forEach((function (value, key) {
                callbackFn.call(thisArg, key, key, $__13);
              }));
            },
            values: $traceurRuntime.initGeneratorFunction(function $__18() {
              var $__19,
                $__20;
              return $traceurRuntime.createGeneratorInstance(function ($ctx) {
                while (true)
                  switch ($ctx.state) {
                    case 0:
                      $__19 = this.map_.keys()[Symbol.iterator]();
                      $ctx.sent = void 0;
                      $ctx.action = 'next';
                      $ctx.state = 12;
                      break;
                    case 12:
                      $__20 = $__19[$ctx.action]($ctx.sentIgnoreThrow);
                      $ctx.state = 9;
                      break;
                    case 9:
                      $ctx.state = ($__20.done) ? 3 : 2;
                      break;
                    case 3:
                      $ctx.sent = $__20.value;
                      $ctx.state = -2;
                      break;
                    case 2:
                      $ctx.state = 12;
                      return $__20.value;
                    default:
                      return $ctx.end();
                  }
              }, $__18, this);
            }),
            entries: $traceurRuntime.initGeneratorFunction(function $__21() {
              var $__22,
                $__23;
              return $traceurRuntime.createGeneratorInstance(function ($ctx) {
                while (true)
                  switch ($ctx.state) {
                    case 0:
                      $__22 = this.map_.entries()[Symbol.iterator]();
                      $ctx.sent = void 0;
                      $ctx.action = 'next';
                      $ctx.state = 12;
                      break;
                    case 12:
                      $__23 = $__22[$ctx.action]($ctx.sentIgnoreThrow);
                      $ctx.state = 9;
                      break;
                    case 9:
                      $ctx.state = ($__23.done) ? 3 : 2;
                      break;
                    case 3:
                      $ctx.sent = $__23.value;
                      $ctx.state = -2;
                      break;
                    case 2:
                      $ctx.state = 12;
                      return $__23.value;
                    default:
                      return $ctx.end();
                  }
              }, $__21, this);
            })
          }, {});
          Object.defineProperty(Set.prototype, Symbol.iterator, {
            configurable: true,
            writable: true,
            value: Set.prototype.values
          });
          Object.defineProperty(Set.prototype, 'keys', {
            configurable: true,
            writable: true,
            value: Set.prototype.values
          });

          function polyfillSet(global) {
            var $__17 = global,
              Object = $__17.Object,
              Symbol = $__17.Symbol;
            if (!global.Set)
              global.Set = Set;
            var setPrototype = global.Set.prototype;
            if (setPrototype.values) {
              maybeAddIterator(setPrototype, setPrototype.values, Symbol);
              maybeAddIterator(Object.getPrototypeOf(new global.Set().values()), function () {
                return this;
              }, Symbol);
            }
          }

          registerPolyfill(polyfillSet);
          return {
            get Set() {
              return Set;
            },
            get polyfillSet() {
              return polyfillSet;
            }
          };
        });
        System.get("traceur-runtime@0.0.62/src/runtime/polyfills/Set" + '');
        System.register("traceur-runtime@0.0.62/node_modules/rsvp/lib/rsvp/asap", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/node_modules/rsvp/lib/rsvp/asap";
          var len = 0;

          function asap(callback, arg) {
            queue[len] = callback;
            queue[len + 1] = arg;
            len += 2;
            if (len === 2) {
              scheduleFlush();
            }
          }

          var $__default = asap;
          var browserGlobal = (typeof window !== 'undefined') ? window : {};
          var BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;
          var isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';

          function useNextTick() {
            return function () {
              process.nextTick(flush);
            };
          }

          function useMutationObserver() {
            var iterations = 0;
            var observer = new BrowserMutationObserver(flush);
            var node = document.createTextNode('');
            observer.observe(node, {
              characterData: true
            });
            return function () {
              node.data = (iterations = ++iterations % 2);
            };
          }

          function useMessageChannel() {
            var channel = new MessageChannel();
            channel.port1.onmessage = flush;
            return function () {
              channel.port2.postMessage(0);
            };
          }

          function useSetTimeout() {
            return function () {
              setTimeout(flush, 1);
            };
          }

          var queue = new Array(1000);

          function flush() {
            for (var i = 0; i < len; i += 2) {
              var callback = queue[i];
              var arg = queue[i + 1];
              callback(arg);
              queue[i] = undefined;
              queue[i + 1] = undefined;
            }
            len = 0;
          }

          var scheduleFlush;
          if (typeof process !== 'undefined' && {}.toString.call(process) === '[object process]') {
            scheduleFlush = useNextTick();
          } else if (BrowserMutationObserver) {
            scheduleFlush = useMutationObserver();
          } else if (isWorker) {
            scheduleFlush = useMessageChannel();
          } else {
            scheduleFlush = useSetTimeout();
          }
          return {
            get
              default() {
              return $__default;
            }
          };
        });
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/Promise", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/Promise";
          var async = System.get("traceur-runtime@0.0.62/node_modules/rsvp/lib/rsvp/asap").default;
          var registerPolyfill = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils").registerPolyfill;
          var promiseRaw = {};

          function isPromise(x) {
            return x && typeof x === 'object' && x.status_ !== undefined;
          }

          function idResolveHandler(x) {
            return x;
          }

          function idRejectHandler(x) {
            throw x;
          }

          function chain(promise) {
            var onResolve = arguments[1] !== (void 0) ? arguments[1] : idResolveHandler;
            var onReject = arguments[2] !== (void 0) ? arguments[2] : idRejectHandler;
            var deferred = getDeferred(promise.constructor);
            switch (promise.status_) {
              case undefined:
                throw TypeError;
              case 0:
                promise.onResolve_.push(onResolve, deferred);
                promise.onReject_.push(onReject, deferred);
                break;
              case +1:
                promiseEnqueue(promise.value_, [onResolve, deferred]);
                break;
              case -1:
                promiseEnqueue(promise.value_, [onReject, deferred]);
                break;
            }
            return deferred.promise;
          }

          function getDeferred(C) {
            if (this === $Promise) {
              var promise = promiseInit(new $Promise(promiseRaw));
              return {
                promise: promise,
                resolve: (function (x) {
                  promiseResolve(promise, x);
                }),
                reject: (function (r) {
                  promiseReject(promise, r);
                })
              };
            } else {
              var result = {};
              result.promise = new C((function (resolve, reject) {
                result.resolve = resolve;
                result.reject = reject;
              }));
              return result;
            }
          }

          function promiseSet(promise, status, value, onResolve, onReject) {
            promise.status_ = status;
            promise.value_ = value;
            promise.onResolve_ = onResolve;
            promise.onReject_ = onReject;
            return promise;
          }

          function promiseInit(promise) {
            return promiseSet(promise, 0, undefined, [], []);
          }

          var Promise = function Promise(resolver) {
            if (resolver === promiseRaw)
              return;
            if (typeof resolver !== 'function')
              throw new TypeError;
            var promise = promiseInit(this);
            try {
              resolver((function (x) {
                promiseResolve(promise, x);
              }), (function (r) {
                promiseReject(promise, r);
              }));
            } catch (e) {
              promiseReject(promise, e);
            }
          };
          ($traceurRuntime.createClass)(Promise, {
            catch: function (onReject) {
              return this.then(undefined, onReject);
            },
            then: function (onResolve, onReject) {
              if (typeof onResolve !== 'function')
                onResolve = idResolveHandler;
              if (typeof onReject !== 'function')
                onReject = idRejectHandler;
              var that = this;
              var constructor = this.constructor;
              return chain(this, function (x) {
                x = promiseCoerce(constructor, x);
                return x === that ? onReject(new TypeError) : isPromise(x) ? x.then(onResolve, onReject) : onResolve(x);
              }, onReject);
            }
          }, {
            resolve: function (x) {
              if (this === $Promise) {
                if (isPromise(x)) {
                  return x;
                }
                return promiseSet(new $Promise(promiseRaw), +1, x);
              } else {
                return new this(function (resolve, reject) {
                  resolve(x);
                });
              }
            },
            reject: function (r) {
              if (this === $Promise) {
                return promiseSet(new $Promise(promiseRaw), -1, r);
              } else {
                return new this((function (resolve, reject) {
                  reject(r);
                }));
              }
            },
            all: function (values) {
              var deferred = getDeferred(this);
              var resolutions = [];
              try {
                var count = values.length;
                if (count === 0) {
                  deferred.resolve(resolutions);
                } else {
                  for (var i = 0; i < values.length; i++) {
                    this.resolve(values[i]).then(function (i, x) {
                      resolutions[i] = x;
                      if (--count === 0)
                        deferred.resolve(resolutions);
                    }.bind(undefined, i), (function (r) {
                      deferred.reject(r);
                    }));
                  }
                }
              } catch (e) {
                deferred.reject(e);
              }
              return deferred.promise;
            },
            race: function (values) {
              var deferred = getDeferred(this);
              try {
                for (var i = 0; i < values.length; i++) {
                  this.resolve(values[i]).then((function (x) {
                    deferred.resolve(x);
                  }), (function (r) {
                    deferred.reject(r);
                  }));
                }
              } catch (e) {
                deferred.reject(e);
              }
              return deferred.promise;
            }
          });
          var $Promise = Promise;
          var $PromiseReject = $Promise.reject;

          function promiseResolve(promise, x) {
            promiseDone(promise, +1, x, promise.onResolve_);
          }

          function promiseReject(promise, r) {
            promiseDone(promise, -1, r, promise.onReject_);
          }

          function promiseDone(promise, status, value, reactions) {
            if (promise.status_ !== 0)
              return;
            promiseEnqueue(value, reactions);
            promiseSet(promise, status, value);
          }

          function promiseEnqueue(value, tasks) {
            async((function () {
              for (var i = 0; i < tasks.length; i += 2) {
                promiseHandle(value, tasks[i], tasks[i + 1]);
              }
            }));
          }

          function promiseHandle(value, handler, deferred) {
            try {
              var result = handler(value);
              if (result === deferred.promise)
                throw new TypeError;
              else if (isPromise(result))
                chain(result, deferred.resolve, deferred.reject);
              else
                deferred.resolve(result);
            } catch (e) {
              try {
                deferred.reject(e);
              } catch (e) {
              }
            }
          }

          var thenableSymbol = '@@thenable';

          function isObject(x) {
            return x && (typeof x === 'object' || typeof x === 'function');
          }

          function promiseCoerce(constructor, x) {
            if (!isPromise(x) && isObject(x)) {
              var then;
              try {
                then = x.then;
              } catch (r) {
                var promise = $PromiseReject.call(constructor, r);
                x[thenableSymbol] = promise;
                return promise;
              }
              if (typeof then === 'function') {
                var p = x[thenableSymbol];
                if (p) {
                  return p;
                } else {
                  var deferred = getDeferred(constructor);
                  x[thenableSymbol] = deferred.promise;
                  try {
                    then.call(x, deferred.resolve, deferred.reject);
                  } catch (r) {
                    deferred.reject(r);
                  }
                  return deferred.promise;
                }
              }
            }
            return x;
          }

          function polyfillPromise(global) {
            if (!global.Promise)
              global.Promise = Promise;
          }

          registerPolyfill(polyfillPromise);
          return {
            get Promise() {
              return Promise;
            },
            get polyfillPromise() {
              return polyfillPromise;
            }
          };
        });
        System.get("traceur-runtime@0.0.62/src/runtime/polyfills/Promise" + '');
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/StringIterator", [], function () {
          "use strict";
          var $__29;
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/StringIterator";
          var $__27 = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils"),
            createIteratorResultObject = $__27.createIteratorResultObject,
            isObject = $__27.isObject;
          var $__30 = $traceurRuntime,
            hasOwnProperty = $__30.hasOwnProperty,
            toProperty = $__30.toProperty;
          var iteratedString = Symbol('iteratedString');
          var stringIteratorNextIndex = Symbol('stringIteratorNextIndex');
          var StringIterator = function StringIterator() {
          };
          ($traceurRuntime.createClass)(StringIterator, ($__29 = {}, Object.defineProperty($__29, "next", {
            value: function () {
              var o = this;
              if (!isObject(o) || !hasOwnProperty(o, iteratedString)) {
                throw new TypeError('this must be a StringIterator object');
              }
              var s = o[toProperty(iteratedString)];
              if (s === undefined) {
                return createIteratorResultObject(undefined, true);
              }
              var position = o[toProperty(stringIteratorNextIndex)];
              var len = s.length;
              if (position >= len) {
                o[toProperty(iteratedString)] = undefined;
                return createIteratorResultObject(undefined, true);
              }
              var first = s.charCodeAt(position);
              var resultString;
              if (first < 0xD800 || first > 0xDBFF || position + 1 === len) {
                resultString = String.fromCharCode(first);
              } else {
                var second = s.charCodeAt(position + 1);
                if (second < 0xDC00 || second > 0xDFFF) {
                  resultString = String.fromCharCode(first);
                } else {
                  resultString = String.fromCharCode(first) + String.fromCharCode(second);
                }
              }
              o[toProperty(stringIteratorNextIndex)] = position + resultString.length;
              return createIteratorResultObject(resultString, false);
            },
            configurable: true,
            enumerable: true,
            writable: true
          }), Object.defineProperty($__29, Symbol.iterator, {
            value: function () {
              return this;
            },
            configurable: true,
            enumerable: true,
            writable: true
          }), $__29), {});

          function createStringIterator(string) {
            var s = String(string);
            var iterator = Object.create(StringIterator.prototype);
            iterator[toProperty(iteratedString)] = s;
            iterator[toProperty(stringIteratorNextIndex)] = 0;
            return iterator;
          }

          return {
            get createStringIterator() {
              return createStringIterator;
            }
          };
        });
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/String", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/String";
          var createStringIterator = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/StringIterator").createStringIterator;
          var $__32 = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils"),
            maybeAddFunctions = $__32.maybeAddFunctions,
            maybeAddIterator = $__32.maybeAddIterator,
            registerPolyfill = $__32.registerPolyfill;
          var $toString = Object.prototype.toString;
          var $indexOf = String.prototype.indexOf;
          var $lastIndexOf = String.prototype.lastIndexOf;

          function startsWith(search) {
            var string = String(this);
            if (this == null || $toString.call(search) == '[object RegExp]') {
              throw TypeError();
            }
            var stringLength = string.length;
            var searchString = String(search);
            var searchLength = searchString.length;
            var position = arguments.length > 1 ? arguments[1] : undefined;
            var pos = position ? Number(position) : 0;
            if (isNaN(pos)) {
              pos = 0;
            }
            var start = Math.min(Math.max(pos, 0), stringLength);
            return $indexOf.call(string, searchString, pos) == start;
          }

          function endsWith(search) {
            var string = String(this);
            if (this == null || $toString.call(search) == '[object RegExp]') {
              throw TypeError();
            }
            var stringLength = string.length;
            var searchString = String(search);
            var searchLength = searchString.length;
            var pos = stringLength;
            if (arguments.length > 1) {
              var position = arguments[1];
              if (position !== undefined) {
                pos = position ? Number(position) : 0;
                if (isNaN(pos)) {
                  pos = 0;
                }
              }
            }
            var end = Math.min(Math.max(pos, 0), stringLength);
            var start = end - searchLength;
            if (start < 0) {
              return false;
            }
            return $lastIndexOf.call(string, searchString, start) == start;
          }

          function contains(search) {
            if (this == null) {
              throw TypeError();
            }
            var string = String(this);
            var stringLength = string.length;
            var searchString = String(search);
            var searchLength = searchString.length;
            var position = arguments.length > 1 ? arguments[1] : undefined;
            var pos = position ? Number(position) : 0;
            if (isNaN(pos)) {
              pos = 0;
            }
            var start = Math.min(Math.max(pos, 0), stringLength);
            return $indexOf.call(string, searchString, pos) != -1;
          }

          function repeat(count) {
            if (this == null) {
              throw TypeError();
            }
            var string = String(this);
            var n = count ? Number(count) : 0;
            if (isNaN(n)) {
              n = 0;
            }
            if (n < 0 || n == Infinity) {
              throw RangeError();
            }
            if (n == 0) {
              return '';
            }
            var result = '';
            while (n--) {
              result += string;
            }
            return result;
          }

          function codePointAt(position) {
            if (this == null) {
              throw TypeError();
            }
            var string = String(this);
            var size = string.length;
            var index = position ? Number(position) : 0;
            if (isNaN(index)) {
              index = 0;
            }
            if (index < 0 || index >= size) {
              return undefined;
            }
            var first = string.charCodeAt(index);
            var second;
            if (first >= 0xD800 && first <= 0xDBFF && size > index + 1) {
              second = string.charCodeAt(index + 1);
              if (second >= 0xDC00 && second <= 0xDFFF) {
                return (first - 0xD800) * 0x400 + second - 0xDC00 + 0x10000;
              }
            }
            return first;
          }

          function raw(callsite) {
            var raw = callsite.raw;
            var len = raw.length >>> 0;
            if (len === 0)
              return '';
            var s = '';
            var i = 0;
            while (true) {
              s += raw[i];
              if (i + 1 === len)
                return s;
              s += arguments[++i];
            }
          }

          function fromCodePoint() {
            var codeUnits = [];
            var floor = Math.floor;
            var highSurrogate;
            var lowSurrogate;
            var index = -1;
            var length = arguments.length;
            if (!length) {
              return '';
            }
            while (++index < length) {
              var codePoint = Number(arguments[index]);
              if (!isFinite(codePoint) || codePoint < 0 || codePoint > 0x10FFFF || floor(codePoint) != codePoint) {
                throw RangeError('Invalid code point: ' + codePoint);
              }
              if (codePoint <= 0xFFFF) {
                codeUnits.push(codePoint);
              } else {
                codePoint -= 0x10000;
                highSurrogate = (codePoint >> 10) + 0xD800;
                lowSurrogate = (codePoint % 0x400) + 0xDC00;
                codeUnits.push(highSurrogate, lowSurrogate);
              }
            }
            return String.fromCharCode.apply(null, codeUnits);
          }

          function stringPrototypeIterator() {
            var o = $traceurRuntime.checkObjectCoercible(this);
            var s = String(o);
            return createStringIterator(s);
          }

          function polyfillString(global) {
            var String = global.String;
            maybeAddFunctions(String.prototype, ['codePointAt', codePointAt, 'contains', contains, 'endsWith', endsWith, 'startsWith', startsWith, 'repeat', repeat]);
            maybeAddFunctions(String, ['fromCodePoint', fromCodePoint, 'raw', raw]);
            maybeAddIterator(String.prototype, stringPrototypeIterator, Symbol);
          }

          registerPolyfill(polyfillString);
          return {
            get startsWith() {
              return startsWith;
            },
            get endsWith() {
              return endsWith;
            },
            get contains() {
              return contains;
            },
            get repeat() {
              return repeat;
            },
            get codePointAt() {
              return codePointAt;
            },
            get raw() {
              return raw;
            },
            get fromCodePoint() {
              return fromCodePoint;
            },
            get stringPrototypeIterator() {
              return stringPrototypeIterator;
            },
            get polyfillString() {
              return polyfillString;
            }
          };
        });
        System.get("traceur-runtime@0.0.62/src/runtime/polyfills/String" + '');
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/ArrayIterator", [], function () {
          "use strict";
          var $__36;
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/ArrayIterator";
          var $__34 = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils"),
            toObject = $__34.toObject,
            toUint32 = $__34.toUint32,
            createIteratorResultObject = $__34.createIteratorResultObject;
          var ARRAY_ITERATOR_KIND_KEYS = 1;
          var ARRAY_ITERATOR_KIND_VALUES = 2;
          var ARRAY_ITERATOR_KIND_ENTRIES = 3;
          var ArrayIterator = function ArrayIterator() {
          };
          ($traceurRuntime.createClass)(ArrayIterator, ($__36 = {}, Object.defineProperty($__36, "next", {
            value: function () {
              var iterator = toObject(this);
              var array = iterator.iteratorObject_;
              if (!array) {
                throw new TypeError('Object is not an ArrayIterator');
              }
              var index = iterator.arrayIteratorNextIndex_;
              var itemKind = iterator.arrayIterationKind_;
              var length = toUint32(array.length);
              if (index >= length) {
                iterator.arrayIteratorNextIndex_ = Infinity;
                return createIteratorResultObject(undefined, true);
              }
              iterator.arrayIteratorNextIndex_ = index + 1;
              if (itemKind == ARRAY_ITERATOR_KIND_VALUES)
                return createIteratorResultObject(array[index], false);
              if (itemKind == ARRAY_ITERATOR_KIND_ENTRIES)
                return createIteratorResultObject([index, array[index]], false);
              return createIteratorResultObject(index, false);
            },
            configurable: true,
            enumerable: true,
            writable: true
          }), Object.defineProperty($__36, Symbol.iterator, {
            value: function () {
              return this;
            },
            configurable: true,
            enumerable: true,
            writable: true
          }), $__36), {});

          function createArrayIterator(array, kind) {
            var object = toObject(array);
            var iterator = new ArrayIterator;
            iterator.iteratorObject_ = object;
            iterator.arrayIteratorNextIndex_ = 0;
            iterator.arrayIterationKind_ = kind;
            return iterator;
          }

          function entries() {
            return createArrayIterator(this, ARRAY_ITERATOR_KIND_ENTRIES);
          }

          function keys() {
            return createArrayIterator(this, ARRAY_ITERATOR_KIND_KEYS);
          }

          function values() {
            return createArrayIterator(this, ARRAY_ITERATOR_KIND_VALUES);
          }

          return {
            get entries() {
              return entries;
            },
            get keys() {
              return keys;
            },
            get values() {
              return values;
            }
          };
        });
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/Array", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/Array";
          var $__37 = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/ArrayIterator"),
            entries = $__37.entries,
            keys = $__37.keys,
            values = $__37.values;
          var $__38 = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils"),
            checkIterable = $__38.checkIterable,
            isCallable = $__38.isCallable,
            isConstructor = $__38.isConstructor,
            maybeAddFunctions = $__38.maybeAddFunctions,
            maybeAddIterator = $__38.maybeAddIterator,
            registerPolyfill = $__38.registerPolyfill,
            toInteger = $__38.toInteger,
            toLength = $__38.toLength,
            toObject = $__38.toObject;

          function from(arrLike) {
            var mapFn = arguments[1];
            var thisArg = arguments[2];
            var C = this;
            var items = toObject(arrLike);
            var mapping = mapFn !== undefined;
            var k = 0;
            var arr,
              len;
            if (mapping && !isCallable(mapFn)) {
              throw TypeError();
            }
            if (checkIterable(items)) {
              arr = isConstructor(C) ? new C() : [];
              for (var $__39 = items[Symbol.iterator](),
                     $__40; !($__40 = $__39.next()).done;) {
                var item = $__40.value;
                {
                  if (mapping) {
                    arr[k] = mapFn.call(thisArg, item, k);
                  } else {
                    arr[k] = item;
                  }
                  k++;
                }
              }
              arr.length = k;
              return arr;
            }
            len = toLength(items.length);
            arr = isConstructor(C) ? new C(len) : new Array(len);
            for (; k < len; k++) {
              if (mapping) {
                arr[k] = typeof thisArg === 'undefined' ? mapFn(items[k], k) : mapFn.call(thisArg, items[k], k);
              } else {
                arr[k] = items[k];
              }
            }
            arr.length = len;
            return arr;
          }

          function of() {
            for (var items = [],
                   $__41 = 0; $__41 < arguments.length; $__41++)
              items[$__41] = arguments[$__41];
            var C = this;
            var len = items.length;
            var arr = isConstructor(C) ? new C(len) : new Array(len);
            for (var k = 0; k < len; k++) {
              arr[k] = items[k];
            }
            arr.length = len;
            return arr;
          }

          function fill(value) {
            var start = arguments[1] !== (void 0) ? arguments[1] : 0;
            var end = arguments[2];
            var object = toObject(this);
            var len = toLength(object.length);
            var fillStart = toInteger(start);
            var fillEnd = end !== undefined ? toInteger(end) : len;
            fillStart = fillStart < 0 ? Math.max(len + fillStart, 0) : Math.min(fillStart, len);
            fillEnd = fillEnd < 0 ? Math.max(len + fillEnd, 0) : Math.min(fillEnd, len);
            while (fillStart < fillEnd) {
              object[fillStart] = value;
              fillStart++;
            }
            return object;
          }

          function find(predicate) {
            var thisArg = arguments[1];
            return findHelper(this, predicate, thisArg);
          }

          function findIndex(predicate) {
            var thisArg = arguments[1];
            return findHelper(this, predicate, thisArg, true);
          }

          function findHelper(self, predicate) {
            var thisArg = arguments[2];
            var returnIndex = arguments[3] !== (void 0) ? arguments[3] : false;
            var object = toObject(self);
            var len = toLength(object.length);
            if (!isCallable(predicate)) {
              throw TypeError();
            }
            for (var i = 0; i < len; i++) {
              if (i in object) {
                var value = object[i];
                if (predicate.call(thisArg, value, i, object)) {
                  return returnIndex ? i : value;
                }
              }
            }
            return returnIndex ? -1 : undefined;
          }

          function polyfillArray(global) {
            var $__42 = global,
              Array = $__42.Array,
              Object = $__42.Object,
              Symbol = $__42.Symbol;
            maybeAddFunctions(Array.prototype, ['entries', entries, 'keys', keys, 'values', values, 'fill', fill, 'find', find, 'findIndex', findIndex]);
            maybeAddFunctions(Array, ['from', from, 'of', of]);
            maybeAddIterator(Array.prototype, values, Symbol);
            maybeAddIterator(Object.getPrototypeOf([].values()), function () {
              return this;
            }, Symbol);
          }

          registerPolyfill(polyfillArray);
          return {
            get from() {
              return from;
            },
            get of() {
              return of;
            },
            get fill() {
              return fill;
            },
            get find() {
              return find;
            },
            get findIndex() {
              return findIndex;
            },
            get polyfillArray() {
              return polyfillArray;
            }
          };
        });
        System.get("traceur-runtime@0.0.62/src/runtime/polyfills/Array" + '');
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/Object", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/Object";
          var $__43 = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils"),
            maybeAddFunctions = $__43.maybeAddFunctions,
            registerPolyfill = $__43.registerPolyfill;
          var $__44 = $traceurRuntime,
            defineProperty = $__44.defineProperty,
            getOwnPropertyDescriptor = $__44.getOwnPropertyDescriptor,
            getOwnPropertyNames = $__44.getOwnPropertyNames,
            keys = $__44.keys,
            privateNames = $__44.privateNames;

          function is(left, right) {
            if (left === right)
              return left !== 0 || 1 / left === 1 / right;
            return left !== left && right !== right;
          }

          function assign(target) {
            for (var i = 1; i < arguments.length; i++) {
              var source = arguments[i];
              var props = keys(source);
              var p,
                length = props.length;
              for (p = 0; p < length; p++) {
                var name = props[p];
                if (privateNames[name])
                  continue;
                target[name] = source[name];
                //alert(name);
              }
            }
            return target;
          }

          function mixin(target, source) {
            var props = getOwnPropertyNames(source);
            var p,
              descriptor,
              length = props.length;
            for (p = 0; p < length; p++) {
              var name = props[p];
              if (privateNames[name])
                continue;
              descriptor = getOwnPropertyDescriptor(source, props[p]);
              defineProperty(target, props[p], descriptor);
            }
            return target;
          }

          function polyfillObject(global) {
            var Object = global.Object;
            maybeAddFunctions(Object, ['assign', assign, 'is', is, 'mixin', mixin]);
          }

          registerPolyfill(polyfillObject);
          return {
            get is() {
              return is;
            },
            get assign() {
              return assign;
            },
            get mixin() {
              return mixin;
            },
            get polyfillObject() {
              return polyfillObject;
            }
          };
        });
        System.get("traceur-runtime@0.0.62/src/runtime/polyfills/Object" + '');
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/Number", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/Number";
          var $__46 = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils"),
            isNumber = $__46.isNumber,
            maybeAddConsts = $__46.maybeAddConsts,
            maybeAddFunctions = $__46.maybeAddFunctions,
            registerPolyfill = $__46.registerPolyfill,
            toInteger = $__46.toInteger;
          var $abs = Math.abs;
          var $isFinite = isFinite;
          var $isNaN = isNaN;
          var MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;
          var MIN_SAFE_INTEGER = -Math.pow(2, 53) + 1;
          var EPSILON = Math.pow(2, -52);

          function NumberIsFinite(number) {
            return isNumber(number) && $isFinite(number);
          };

          function isInteger(number) {
            return NumberIsFinite(number) && toInteger(number) === number;
          }

          function NumberIsNaN(number) {
            return isNumber(number) && $isNaN(number);
          };

          function isSafeInteger(number) {
            if (NumberIsFinite(number)) {
              var integral = toInteger(number);
              if (integral === number)
                return $abs(integral) <= MAX_SAFE_INTEGER;
            }
            return false;
          }

          function polyfillNumber(global) {
            var Number = global.Number;
            maybeAddConsts(Number, ['MAX_SAFE_INTEGER', MAX_SAFE_INTEGER, 'MIN_SAFE_INTEGER', MIN_SAFE_INTEGER, 'EPSILON', EPSILON]);
            maybeAddFunctions(Number, ['isFinite', NumberIsFinite, 'isInteger', isInteger, 'isNaN', NumberIsNaN, 'isSafeInteger', isSafeInteger]);
          }

          registerPolyfill(polyfillNumber);
          return {
            get MAX_SAFE_INTEGER() {
              return MAX_SAFE_INTEGER;
            },
            get MIN_SAFE_INTEGER() {
              return MIN_SAFE_INTEGER;
            },
            get EPSILON() {
              return EPSILON;
            },
            get isFinite() {
              return NumberIsFinite;
            },
            get isInteger() {
              return isInteger;
            },
            get isNaN() {
              return NumberIsNaN;
            },
            get isSafeInteger() {
              return isSafeInteger;
            },
            get polyfillNumber() {
              return polyfillNumber;
            }
          };
        });
        System.get("traceur-runtime@0.0.62/src/runtime/polyfills/Number" + '');
        System.register("traceur-runtime@0.0.62/src/runtime/polyfills/polyfills", [], function () {
          "use strict";
          var __moduleName = "traceur-runtime@0.0.62/src/runtime/polyfills/polyfills";
          var polyfillAll = System.get("traceur-runtime@0.0.62/src/runtime/polyfills/utils").polyfillAll;
          polyfillAll(this);
          var setupGlobals = $traceurRuntime.setupGlobals;
          $traceurRuntime.setupGlobals = function (global) {
            setupGlobals(global);
            polyfillAll(global);
          };
          return {};
        });
        System.get("traceur-runtime@0.0.62/src/runtime/polyfills/polyfills" + '');

      }).call(this, require("Zbi7gb"), typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    }, {
      "Zbi7gb": 4
    }
  ],
  6: [
    function (require, module, exports) {
      (function () {
        var exportedLog, ffSupport, formats, getOrderedMatches, hasMatches, isFF, isIE, isOpera, isSafari, log, makeArray, operaSupport, safariSupport, stringToArgs, _log;

        if (!(window.console && window.console.log)) {
          return;
        }

        log = function () {
          var args;
          args = [];
          makeArray(arguments).forEach(function (arg) {
            if (typeof arg === 'string') {
              return args = args.concat(stringToArgs(arg));
            } else {
              return args.push(arg);
            }
          });
          return _log.apply(window, args);
        };

        _log = function () {
          return console.log.apply(console, makeArray(arguments));
        };

        makeArray = function (arrayLikeThing) {
          return Array.prototype.slice.call(arrayLikeThing);
        };

        formats = [{
          regex: /\*([^\*]+)\*/,
          replacer: function (m, p1) {
            return "%c" + p1 + "%c";
          },
          styles: function () {
            return ['font-style: italic', ''];
          }
        }, {
          regex: /\_([^\_]+)\_/,
          replacer: function (m, p1) {
            return "%c" + p1 + "%c";
          },
          styles: function () {
            return ['font-weight: bold', ''];
          }
        }, {
          regex: /\`([^\`]+)\`/,
          replacer: function (m, p1) {
            return "%c" + p1 + "%c";
          },
          styles: function () {
            return ['background: rgb(255, 255, 219); padding: 1px 5px; border: 1px solid rgba(0, 0, 0, 0.1)', ''];
          }
        }, {
          regex: /\[c\=(?:\"|\')?((?:(?!(?:\"|\')\]).)*)(?:\"|\')?\]((?:(?!\[c\]).)*)\[c\]/,
          replacer: function (m, p1, p2) {
            return "%c" + p2 + "%c";
          },
          styles: function (match) {
            return [match[1], ''];
          }
        }];

        hasMatches = function (str) {
          var _hasMatches;
          _hasMatches = false;
          formats.forEach(function (format) {
            if (format.regex.test(str)) {
              return _hasMatches = true;
            }
          });
          return _hasMatches;
        };

        getOrderedMatches = function (str) {
          var matches;
          matches = [];
          formats.forEach(function (format) {
            var match;
            match = str.match(format.regex);
            if (match) {
              return matches.push({
                format: format,
                match: match
              });
            }
          });
          return matches.sort(function (a, b) {
            return a.match.index - b.match.index;
          });
        };

        stringToArgs = function (str) {
          var firstMatch, matches, styles;
          styles = [];
          while (hasMatches(str)) {
            matches = getOrderedMatches(str);
            firstMatch = matches[0];
            str = str.replace(firstMatch.format.regex, firstMatch.format.replacer);
            styles = styles.concat(firstMatch.format.styles(firstMatch.match));
          }
          return [str].concat(styles);
        };

        isSafari = function () {
          return /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);
        };

        isOpera = function () {
          return /OPR/.test(navigator.userAgent) && /Opera/.test(navigator.vendor);
        };

        isFF = function () {
          return /Firefox/.test(navigator.userAgent);
        };

        isIE = function () {
          return /MSIE/.test(navigator.userAgent);
        };

        safariSupport = function () {
          var m;
          m = navigator.userAgent.match(/AppleWebKit\/(\d+)\.(\d+)(\.|\+|\s)/);
          if (!m) {
            return false;
          }
          return 537.38 <= parseInt(m[1], 10) + (parseInt(m[2], 10) / 100);
        };

        operaSupport = function () {
          var m;
          m = navigator.userAgent.match(/OPR\/(\d+)\./);
          if (!m) {
            return false;
          }
          return 15 <= parseInt(m[1], 10);
        };

        ffSupport = function () {
          return window.console.firebug || window.console.exception;
        };

        if (isIE() || (isFF() && !ffSupport()) || (isOpera() && !operaSupport()) || (isSafari() && !safariSupport())) {
          exportedLog = _log;
        } else {
          exportedLog = log;
        }

        exportedLog.l = _log;

        if (typeof define === 'function' && define.amd) {
          define(exportedLog);
        } else if (typeof exports !== 'undefined') {
          module.exports = exportedLog;
        } else {
          window.log = exportedLog;
        }

      }).call(this);

    }, {}
  ],
  7: [
    function (require, module, exports) {
      /**
       * Copyright 2012 Craig Campbell
       *
       * Licensed under the Apache License, Version 2.0 (the "License");
       * you may not use this file except in compliance with the License.
       * You may obtain a copy of the License at
       *
       * http://www.apache.org/licenses/LICENSE-2.0
       *
       * Unless required by applicable law or agreed to in writing, software
       * distributed under the License is distributed on an "AS IS" BASIS,
       * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
       * See the License for the specific language governing permissions and
       * limitations under the License.
       *
       * Mousetrap is a simple keyboard shortcut library for Javascript with
       * no external dependencies
       *
       * @version 1.1.2
       * @url craig.is/killing/mice
       */

      /**
       * mapping of special keycodes to their corresponding keys
       *
       * everything in this dictionary cannot use keypress events
       * so it has to be here to map to the correct keycodes for
       * keyup/keydown events
       *
       * @type {Object}
       */
      var _MAP = {
          8: 'backspace',
          9: 'tab',
          13: 'enter',
          16: 'shift',
          17: 'ctrl',
          18: 'alt',
          20: 'capslock',
          27: 'esc',
          32: 'space',
          33: 'pageup',
          34: 'pagedown',
          35: 'end',
          36: 'home',
          37: 'left',
          38: 'up',
          39: 'right',
          40: 'down',
          45: 'ins',
          46: 'del',
          91: 'meta',
          93: 'meta',
          224: 'meta'
        },

        /**
         * mapping for special characters so they can support
         *
         * this dictionary is only used incase you want to bind a
         * keyup or keydown event to one of these keys
         *
         * @type {Object}
         */
        _KEYCODE_MAP = {
          106: '*',
          107: '+',
          109: '-',
          110: '.',
          111: '/',
          186: ';',
          187: '=',
          188: ',',
          189: '-',
          190: '.',
          191: '/',
          192: '`',
          219: '[',
          220: '\\',
          221: ']',
          222: '\''
        },

        /**
         * this is a mapping of keys that require shift on a US keypad
         * back to the non shift equivelents
         *
         * this is so you can use keyup events with these keys
         *
         * note that this will only work reliably on US keyboards
         *
         * @type {Object}
         */
        _SHIFT_MAP = {
          '~': '`',
          '!': '1',
          '@': '2',
          '#': '3',
          '$': '4',
          '%': '5',
          '^': '6',
          '&': '7',
          '*': '8',
          '(': '9',
          ')': '0',
          '_': '-',
          '+': '=',
          ':': ';',
          '\"': '\'',
          '<': ',',
          '>': '.',
          '?': '/',
          '|': '\\'
        },

        /**
         * this is a list of special strings you can use to map
         * to modifier keys when you specify your keyboard shortcuts
         *
         * @type {Object}
         */
        _SPECIAL_ALIASES = {
          'option': 'alt',
          'command': 'meta',
          'return': 'enter',
          'escape': 'esc'
        },

        /**
         * variable to store the flipped version of _MAP from above
         * needed to check if we should use keypress or not when no action
         * is specified
         *
         * @type {Object|undefined}
         */
        _REVERSE_MAP,

        /**
         * a list of all the callbacks setup via Mousetrap.bind()
         *
         * @type {Object}
         */
        _callbacks = {},

        /**
         * direct map of string combinations to callbacks used for trigger()
         *
         * @type {Object}
         */
        _direct_map = {},

        /**
         * keeps track of what level each sequence is at since multiple
         * sequences can start out with the same sequence
         *
         * @type {Object}
         */
        _sequence_levels = {},

        /**
         * variable to store the setTimeout call
         *
         * @type {null|number}
         */
        _reset_timer,

        /**
         * temporary state where we will ignore the next keyup
         *
         * @type {boolean|string}
         */
        _ignore_next_keyup = false,

        /**
         * are we currently inside of a sequence?
         * type of action ("keyup" or "keydown" or "keypress") or false
         *
         * @type {boolean|string}
         */
        _inside_sequence = false;

      /**
       * loop through the f keys, f1 to f19 and add them to the map
       * programatically
       */
      for (var i = 1; i < 20; ++i) {
        _MAP[111 + i] = 'f' + i;
      }

      /**
       * loop through to map numbers on the numeric keypad
       */
      for (i = 0; i <= 9; ++i) {
        _MAP[i + 96] = i;
      }

      /**
       * cross browser add event method
       *
       * @param {Element|HTMLDocument} object
       * @param {string} type
       * @param {Function} callback
       * @returns void
       */

      function _addEvent(object, type, callback) {
        if (object.addEventListener) {
          return object.addEventListener(type, callback, false);
        }

        object.attachEvent('on' + type, callback);
      }

      /**
       * takes the event and returns the key character
       *
       * @param {Event} e
       * @return {string}
       */

      function _characterFromEvent(e) {

        // for keypress events we should return the character as is
        if (e.type == 'keypress') {
          return String.fromCharCode(e.which);
        }

        // for non keypress events the special maps are needed
        if (_MAP[e.which]) {
          return _MAP[e.which];
        }

        if (_KEYCODE_MAP[e.which]) {
          return _KEYCODE_MAP[e.which];
        }

        // if it is not in the special map
        return String.fromCharCode(e.which).toLowerCase();
      }

      /**
       * should we stop this event before firing off callbacks
       *
       * @param {Event} e
       * @return {boolean}
       */

      function _stop(e) {
        var element = e.target || e.srcElement,
          tag_name = element.tagName;

        // if the element has the class "mousetrap" then no need to stop
        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {
          return false;
        }

        // stop for input, select, and textarea
        return tag_name == 'INPUT' || tag_name == 'SELECT' || tag_name == 'TEXTAREA' || (element.contentEditable && element.contentEditable == 'true');
      }

      /**
       * checks if two arrays are equal
       *
       * @param {Array} modifiers1
       * @param {Array} modifiers2
       * @returns {boolean}
       */

      function _modifiersMatch(modifiers1, modifiers2) {
        return modifiers1.sort().join(',') === modifiers2.sort().join(',');
      }

      /**
       * resets all sequence counters except for the ones passed in
       *
       * @param {Object} do_not_reset
       * @returns void
       */

      function _resetSequences(do_not_reset) {
        do_not_reset = do_not_reset || {};

        var active_sequences = false,
          key;

        for (key in _sequence_levels) {
          if (do_not_reset[key]) {
            active_sequences = true;
            continue;
          }
          _sequence_levels[key] = 0;
        }

        if (!active_sequences) {
          _inside_sequence = false;
        }
      }

      /**
       * finds all callbacks that match based on the keycode, modifiers,
       * and action
       *
       * @param {string} character
       * @param {Array} modifiers
       * @param {string} action
       * @param {boolean=} remove - should we remove any matches
       * @param {string=} combination
       * @returns {Array}
       */

      function _getMatches(character, modifiers, action, remove, combination) {
        var i,
          callback,
          matches = [];

        // if there are no events related to this keycode
        if (!_callbacks[character]) {
          return [];
        }

        // if a modifier key is coming up on its own we should allow it
        if (action == 'keyup' && _isModifier(character)) {
          modifiers = [character];
        }

        // loop through all callbacks for the key that was pressed
        // and see if any of them match
        for (i = 0; i < _callbacks[character].length; ++i) {
          callback = _callbacks[character][i];

          // if this is a sequence but it is not at the right level
          // then move onto the next match
          if (callback.seq && _sequence_levels[callback.seq] != callback.level) {
            continue;
          }

          // if the action we are looking for doesn't match the action we got
          // then we should keep going
          if (action != callback.action) {
            continue;
          }

          // if this is a keypress event that means that we need to only
          // look at the character, otherwise check the modifiers as
          // well
          if (action == 'keypress' || _modifiersMatch(modifiers, callback.modifiers)) {

            // remove is used so if you change your mind and call bind a
            // second time with a new function the first one is overwritten
            if (remove && callback.combo == combination) {
              _callbacks[character].splice(i, 1);
            }

            matches.push(callback);
          }
        }

        return matches;
      }

      /**
       * takes a key event and figures out what the modifiers are
       *
       * @param {Event} e
       * @returns {Array}
       */

      function _eventModifiers(e) {
        var modifiers = [];

        if (e.shiftKey) {
          modifiers.push('shift');
        }

        if (e.altKey) {
          modifiers.push('alt');
        }

        if (e.ctrlKey) {
          modifiers.push('ctrl');
        }

        if (e.metaKey) {
          modifiers.push('meta');
        }

        return modifiers;
      }

      /**
       * actually calls the callback function
       *
       * if your callback function returns false this will use the jquery
       * convention - prevent default and stop propogation on the event
       *
       * @param {Function} callback
       * @param {Event} e
       * @returns void
       */

      function _fireCallback(callback, e) {
        if (callback(e) === false) {
          if (e.preventDefault) {
            e.preventDefault();
          }

          if (e.stopPropagation) {
            e.stopPropagation();
          }

          e.returnValue = false;
          e.cancelBubble = true;
        }
      }

      /**
       * handles a character key event
       *
       * @param {string} character
       * @param {Event} e
       * @returns void
       */

      function _handleCharacter(character, e) {

        // if this event should not happen stop here
        if (_stop(e)) {
          return;
        }

        var callbacks = _getMatches(character, _eventModifiers(e), e.type),
          i,
          do_not_reset = {},
          processed_sequence_callback = false;

        // loop through matching callbacks for this key event
        for (i = 0; i < callbacks.length; ++i) {

          // fire for all sequence callbacks
          // this is because if for example you have multiple sequences
          // bound such as "g i" and "g t" they both need to fire the
          // callback for matching g cause otherwise you can only ever
          // match the first one
          if (callbacks[i].seq) {
            processed_sequence_callback = true;

            // keep a list of which sequences were matches for later
            do_not_reset[callbacks[i].seq] = 1;
            _fireCallback(callbacks[i].callback, e);
            continue;
          }

          // if there were no sequence matches but we are still here
          // that means this is a regular match so we should fire that
          if (!processed_sequence_callback && !_inside_sequence) {
            _fireCallback(callbacks[i].callback, e);
          }
        }

        // if you are inside of a sequence and the key you are pressing
        // is not a modifier key then we should reset all sequences
        // that were not matched by this key event
        if (e.type == _inside_sequence && !_isModifier(character)) {
          _resetSequences(do_not_reset);
        }
      }

      /**
       * handles a keydown event
       *
       * @param {Event} e
       * @returns void
       */

      function _handleKey(e) {

        // normalize e.which for key events
        // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion
        e.which = typeof e.which == "number" ? e.which : e.keyCode;

        var character = _characterFromEvent(e);

        // no character found then stop
        if (!character) {
          return;
        }

        if (e.type == 'keyup' && _ignore_next_keyup == character) {
          _ignore_next_keyup = false;
          return;
        }

        _handleCharacter(character, e);
      }

      /**
       * determines if the keycode specified is a modifier key or not
       *
       * @param {string} key
       * @returns {boolean}
       */

      function _isModifier(key) {
        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';
      }

      /**
       * called to set a 1 second timeout on the specified sequence
       *
       * this is so after each key press in the sequence you have 1 second
       * to press the next key before you have to start over
       *
       * @returns void
       */

      function _resetSequenceTimer() {
        clearTimeout(_reset_timer);
        _reset_timer = setTimeout(_resetSequences, 1000);
      }

      /**
       * reverses the map lookup so that we can look for specific keys
       * to see what can and can't use keypress
       *
       * @return {Object}
       */

      function _getReverseMap() {
        if (!_REVERSE_MAP) {
          _REVERSE_MAP = {};
          for (var key in _MAP) {

            // pull out the numeric keypad from here cause keypress should
            // be able to detect the keys from the character
            if (key > 95 && key < 112) {
              continue;
            }

            if (_MAP.hasOwnProperty(key)) {
              _REVERSE_MAP[_MAP[key]] = key;
            }
          }
        }
        return _REVERSE_MAP;
      }

      /**
       * picks the best action based on the key combination
       *
       * @param {string} key - character for key
       * @param {Array} modifiers
       * @param {string=} action passed in
       */

      function _pickBestAction(key, modifiers, action) {

        // if no action was picked in we should try to pick the one
        // that we think would work best for this key
        if (!action) {
          action = _getReverseMap()[key] ? 'keydown' : 'keypress';
        }

        // modifier keys don't work as expected with keypress,
        // switch to keydown
        if (action == 'keypress' && modifiers.length) {
          action = 'keydown';
        }

        return action;
      }

      /**
       * binds a key sequence to an event
       *
       * @param {string} combo - combo specified in bind call
       * @param {Array} keys
       * @param {Function} callback
       * @param {string=} action
       * @returns void
       */

      function _bindSequence(combo, keys, callback, action) {

        // start off by adding a sequence level record for this combination
        // and setting the level to 0
        _sequence_levels[combo] = 0;

        // if there is no action pick the best one for the first key
        // in the sequence
        if (!action) {
          action = _pickBestAction(keys[0], []);
        }

        /**
         * callback to increase the sequence level for this sequence and reset
         * all other sequences that were active
         *
         * @param {Event} e
         * @returns void
         */
        var _increaseSequence = function (e) {
            _inside_sequence = action;
            ++_sequence_levels[combo];
            _resetSequenceTimer();
          },

          /**
           * wraps the specified callback inside of another function in order
           * to reset all sequence counters as soon as this sequence is done
           *
           * @param {Event} e
           * @returns void
           */
          _callbackAndReset = function (e) {
            _fireCallback(callback, e);

            // we should ignore the next key up if the action is key down
            // or keypress.  this is so if you finish a sequence and
            // release the key the final key will not trigger a keyup
            if (action !== 'keyup') {
              _ignore_next_keyup = _characterFromEvent(e);
            }

            // weird race condition if a sequence ends with the key
            // another sequence begins with
            setTimeout(_resetSequences, 10);
          },
          i;

        // loop through keys one at a time and bind the appropriate callback
        // function.  for any key leading up to the final one it should
        // increase the sequence. after the final, it should reset all sequences
        for (i = 0; i < keys.length; ++i) {
          _bindSingle(keys[i], i < keys.length - 1 ? _increaseSequence : _callbackAndReset, action, combo, i);
        }
      }

      /**
       * binds a single keyboard combination
       *
       * @param {string} combination
       * @param {Function} callback
       * @param {string=} action
       * @param {string=} sequence_name - name of sequence if part of sequence
       * @param {number=} level - what part of the sequence the command is
       * @returns void
       */

      function _bindSingle(combination, callback, action, sequence_name, level) {

        // make sure multiple spaces in a row become a single space
        combination = combination.replace(/\s+/g, ' ');

        var sequence = combination.split(' '),
          i,
          key,
          keys,
          modifiers = [];

        // if this pattern is a sequence of keys then run through this method
        // to reprocess each pattern one key at a time
        if (sequence.length > 1) {
          return _bindSequence(combination, sequence, callback, action);
        }

        // take the keys from this pattern and figure out what the actual
        // pattern is all about
        keys = combination === '+' ? ['+'] : combination.split('+');

        for (i = 0; i < keys.length; ++i) {
          key = keys[i];

          // normalize key names
          if (_SPECIAL_ALIASES[key]) {
            key = _SPECIAL_ALIASES[key];
          }

          // if this is not a keypress event then we should
          // be smart about using shift keys
          // this will only work for US keyboards however
          if (action && action != 'keypress' && _SHIFT_MAP[key]) {
            key = _SHIFT_MAP[key];
            modifiers.push('shift');
          }

          // if this key is a modifier then add it to the list of modifiers
          if (_isModifier(key)) {
            modifiers.push(key);
          }
        }

        // depending on what the key combination is
        // we will try to pick the best event for it
        action = _pickBestAction(key, modifiers, action);

        // make sure to initialize array if this is the first time
        // a callback is added for this key
        if (!_callbacks[key]) {
          _callbacks[key] = [];
        }

        // remove an existing match if there is one
        _getMatches(key, modifiers, action, !sequence_name, combination);

        // add this call back to the array
        // if it is a sequence put it at the beginning
        // if not put it at the end
        //
        // this is important because the way these are processed expects
        // the sequence ones to come first
        _callbacks[key][sequence_name ? 'unshift' : 'push']({
          callback: callback,
          modifiers: modifiers,
          action: action,
          seq: sequence_name,
          level: level,
          combo: combination
        });
      }

      /**
       * binds multiple combinations to the same callback
       *
       * @param {Array} combinations
       * @param {Function} callback
       * @param {string|undefined} action
       * @returns void
       */

      function _bindMultiple(combinations, callback, action) {
        for (var i = 0; i < combinations.length; ++i) {
          _bindSingle(combinations[i], callback, action);
        }
      }

      // start!
      _addEvent(document, 'keypress', _handleKey);
      _addEvent(document, 'keydown', _handleKey);
      _addEvent(document, 'keyup', _handleKey);

      var mousetrap = {

        /**
         * binds an event to mousetrap
         *
         * can be a single key, a combination of keys separated with +,
         * a comma separated list of keys, an array of keys, or
         * a sequence of keys separated by spaces
         *
         * be sure to list the modifier keys first to make sure that the
         * correct key ends up getting bound (the last key in the pattern)
         *
         * @param {string|Array} keys
         * @param {Function} callback
         * @param {string=} action - 'keypress', 'keydown', or 'keyup'
         * @returns void
         */
        bind: function (keys, callback, action) {
          _bindMultiple(keys instanceof Array ? keys : [keys], callback, action);
          _direct_map[keys + ':' + action] = callback;
          return this;
        },

        /**
         * unbinds an event to mousetrap
         *
         * the unbinding sets the callback function of the specified key combo
         * to an empty function and deletes the corresponding key in the
         * _direct_map dict.
         *
         * the keycombo+action has to be exactly the same as
         * it was defined in the bind method
         *
         * TODO: actually remove this from the _callbacks dictionary instead
         * of binding an empty function
         *
         * @param {string|Array} keys
         * @param {string} action
         * @returns void
         */
        unbind: function (keys, action) {
          if (_direct_map[keys + ':' + action]) {
            delete _direct_map[keys + ':' + action];
            this.bind(keys, function () {
            }, action);
          }
          return this;
        },

        /**
         * triggers an event that has already been bound
         *
         * @param {string} keys
         * @param {string=} action
         * @returns void
         */
        trigger: function (keys, action) {
          _direct_map[keys + ':' + action]();
          return this;
        },

        /**
         * resets the library back to its initial state.  this is useful
         * if you want to clear out the current keyboard shortcuts and bind
         * new ones - for example if you switch to another page
         *
         * @returns void
         */
        reset: function () {
          _callbacks = {};
          _direct_map = {};
          return this;
        }
      };

      module.exports = mousetrap;


    }, {}
  ],
  8: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      var EventEmitter = require('events').EventEmitter;
      var metaHeader = 'CHUNKS';
      var metaHeaderLength = metaHeader.length;
      var reByteChar = /%..|./;
      var DEFAULT_MAXSIZE = 1024 * 16;

      /**
       # rtc-bufferedchannel

       This is a wrapper for a native `RTCDataChannel` that ensures that data
       sent over the channel complies with the current data channel size limits
       (which is < 16Kb for firefox <--> chrome interop).

       __NOTE:__ The `rtc-bufferedchannel` module is able to wrap any standard
       `RTCDataChannel` object.  If you use other WebRTC helper libraries, then
       this module can still be **very useful**!

       ## How it Works

       The `rtc-bufferedchannel` works by wrapping a standard `RTCDataChannel` with
       an object that proxies `send` function calls and emits data through an
       `channel.on('data', handler)` event handler for receiving data.  When you
       call the `send` function provided by buffered channel it determines the size
       of the message that you are sending and determines whether that needs to be
       "chunked" to assist with successful delivery of your data.

       At this present point in time, a browser will complain if you attempt to
       send large payloads of data via a data channel, and this is where the
       `rtc-bufferedchannel` module comes to your rescue.

       ### Typed Array Handling

       Since `rtc-bufferedchannel@0.3` all manner of typed integer arrays (int,
       uint, etc) are catered for and correctly chunked to ensure successful delivery.
       Additionally, the module will provide identification of the typed array type
       before sending the raw data across the wire.  Using this functionality when
       you receive the `data` event from the buffered channel you will receive the
       data in the same format it was sent from your peer, i.e.
       `Uint8Array` in, `Uint8Array` out which is different to the standard
       data channel functionality.

       ## Example Usage

       Shown below is a simple example of how you might use a buffered channel to
       send data that is larger than what you can typically send over a webrtc
       data channel:

       <<< examples/have-some-mentos.js

       **/
      module.exports = function (dc, opts) {
        // create an event emitter that will replace our datachannel
        // which does mean the replacement object will fail instanceof checks for
        // RTCDataChannel
        var channel = new EventEmitter();

        // initialise the default max buffer size
        // which at this stage is recommended to be 16Kb for interop between
        // firefox and chrome
        // see https://groups.google.com/forum/#!topic/discuss-webrtc/AefA5Pg_xIU
        var maxSize = (opts || {}).maxsize || DEFAULT_MAXSIZE;

        // initilaise the pending chunks count to 0
        var pendingChunks = 0;
        var collectedQueue = [];
        var queueDataType;

        // initialise the send queue
        var sendQueue = [];
        var sendTimer = 0;
        var retry = (opts || {}).retry !== false;
        var calcCharSize = (opts || {}).calcCharSize !== false;

        function buildData() {
          var totalByteSize = 0;
          var lastOffset = 0;
          var input = collectedQueue.splice(0);
          var dataView;

          // if we have string data, then it's simple
          if (queueDataType === 'string') {
            return input.join('');
          }

          // otherwise, rebuild the array buffer into the correct view type
          totalByteSize = input.reduce(function (memo, buffer) {
            return memo + buffer.byteLength;
          }, 0);

          // create data view
          dataView = createDataView(queueDataType, totalByteSize);

          // iterate through the collected queue and set the data
          input.forEach(function (chunk) {
            dataView.set(new dataView.constructor(chunk), lastOffset);
            lastOffset = lastOffset + ((chunk.byteLength / dataView.BYTES_PER_ELEMENT) | 0);
          });

          return dataView;
        }

        function createDataView(dt, size) {
          switch (dt) {
            case 'uint8clamped':
            {
              return new Uint8ClampedArray(size);
            }

            case 'uint16':
            {
              return new Uint16Array(size >> 1);
            }

            case 'uint32':
            {
              return new Uint32Array(size >> 2);
            }

            case 'int8':
            {
              return new Int8Array(size);
            }

            case 'int16':
            {
              return new Int16Array(size >> 1);
            }

            case 'int32':
            {
              return new Int32Array(size >> 2);
            }
          }

          return new Uint8Array(size);
        }

        function handleClose(evt) {
          console.log('received dc close', evt);
        }

        function handleError(evt) {
          console.log('received dc error: ', evt);
        }

        function handleMessage(evt) {
          var haveData = evt && evt.data;
          var parts;
          var isMeta;

          if (haveData && pendingChunks) {
            collectedQueue.push(evt.data);
            pendingChunks -= 1;

            // if we have no more pending chunks then assemble the data
            // and emit the data event
            if (pendingChunks === 0) {
              channel.emit('data', buildData());
            }
          } else if (haveData) {
            // determine if this is a metadata chunk
            isMeta = typeof evt.data == 'string' &&
              evt.data.slice(0, metaHeaderLength) === metaHeader;

            if (isMeta) {
              parts = evt.data.split(':');
              pendingChunks = parseInt(parts[1], 10);
              queueDataType = parts[2] || 'string';
            } else {
              channel.emit('data', evt.data);
            }
          }
        }

        function queue(payload, timeout) {
          if (payload) {
            // add the payload to the send queue
            sendQueue[sendQueue.length] = payload;
          }

          // queue a transmit only if not already queued
          sendTimer = sendTimer || setTimeout(transmit, timeout || 0);
        }

        function segmentArrayBuffer(input) {
          var chunks = [];
          var offset = 0;

          while (offset < input.byteLength) {
            chunks.push(input.slice(offset, offset + maxSize));
            offset += maxSize;
          }

          return chunks;
        }

        function send(data) {
          var size;
          var chunks = [];
          var abort = false;
          var charSize;
          var currentSize = 0;
          var currentStartIndex = 0;
          var ii = 0;
          var length;
          var dataType;

          if (typeof data == 'string' || (data instanceof String)) {
            // organise into data chunks
            length = data.length;
            while (ii < length) {
              // calculate the current character size
              charSize = calcCharSize ? ~-encodeURI(data.charAt(ii)).split(reByteChar).length :
                1;

              // if this will tip us over the limit, copy the chunk
              if (currentSize + charSize >= maxSize) {
                // copy the chunk
                chunks[chunks.length] = data.slice(currentStartIndex, ii);

                // reset tracking variables
                currentStartIndex = ii;
                currentSize = 0;
              }
              // otherwise, increment the current chunk size
              else {
                currentSize += charSize;
              }

              // increment the index
              ii += 1;
            }

            // if we have a pending chunk, then add it
            if (currentSize > 0) {
              chunks[chunks.length] = data.slice(currentStartIndex);
            }
          } else if (data && data.buffer && data.buffer instanceof ArrayBuffer) {
            // derive the data type
            dataType = data.constructor.name.slice(0, -5).toLowerCase();

            if (data.byteLength < maxSize) {
              chunks[0] = data;
            } else {
              chunks = segmentArrayBuffer(data.buffer);
            }
          }
          // else if (data instanceof ArrayBuffer) {
          //   console.log('got an array buffer');
          // }

          // if we only have one chunk, just send the data
          if ((!dataType) && chunks.length === 1) {
            queue(chunks[0]);
          } else {
            queue(metaHeader + ':' + chunks.length + ':' + (dataType || 'string'));
            chunks.forEach(queue);
          }
        }

        function transmit() {
          var next = sendQueue.shift();

          // reset the send timer to 0 (means queuing will again occur)
          sendTimer = 0;

          // if we have cleaned out the queue then abort
          if (dc.readyState !== 'open' || (!next)) {
            return;
          }

          try {
            dc.send(next);
            queue();
          } catch (e) {
            console.error('error sending chunk: ', e);
            // console.log('buffered amount = ' + dc.bufferedAmount);
            // console.log('ready state = ' + dc.readyState);

            // if we are retrying unshift the next payload back onto
            // the senqQueue
            if (retry) {
              sendQueue.unshift(next);
            }

            // TODO: reset the send queue?
            queue(null, 10);
          }
        }

        // set the binary type on the datachannel to array buffer
        dc.binaryType = 'arraybuffer';

        // patch in the send function
        channel.send = send;

        // handle data channel message events
        dc.onmessage = handleMessage;

        // handle the channel close
        dc.onclose = handleClose;
        dc.onerror = handleError;

        return channel;
      };
    }, {
      "events": 3
    }
  ],
  9: [
    function (require, module, exports) {
      (function (process) {
        /* jshint node: true */
        'use strict';

        var rtc = require('rtc-tools');
        var mbus = require('mbus');
        var cleanup = require('rtc-tools/cleanup');
        var debug = rtc.logger('rtc-quickconnect');
        var defaults = require('cog/defaults');
        var extend = require('cog/extend');
        var getable = require('cog/getable');
        var reTrailingSlash = /\/$/;

        /**
         # rtc-quickconnect

         This is a high level helper module designed to help you get up
         an running with WebRTC really, really quickly.  By using this module you
         are trading off some flexibility, so if you need a more flexible
         configuration you should drill down into lower level components of the
         [rtc.io](http://www.rtc.io) suite.  In particular you should check out
         [rtc](https://github.com/rtc-io/rtc).

         ## Example Usage

         In the simplest case you simply call quickconnect with a single string
         argument which tells quickconnect which server to use for signaling:

         <<< examples/simple.js

         <<< docs/events.md

         <<< docs/examples.md

         ## Regarding Signalling and a Signalling Server

         Signaling is an important part of setting up a WebRTC connection and for
         our examples we use our own test instance of the
         [rtc-switchboard](https://github.com/rtc-io/rtc-switchboard). For your
         testing and development you are more than welcome to use this also, but
         just be aware that we use this for our testing so it may go up and down
         a little.  If you need something more stable, why not consider deploying
         an instance of the switchboard yourself - it's pretty easy :)

         ## Reference

         ```
         quickconnect(signalhost, opts?) => rtc-sigaller instance (+ helpers)
         ```

         ### Valid Quick Connect Options

         The options provided to the `rtc-quickconnect` module function influence the
         behaviour of some of the underlying components used from the rtc.io suite.

         Listed below are some of the commonly used options:

         - `ns` (default: '')

         An optional namespace for your signalling room.  While quickconnect
         will generate a unique hash for the room, this can be made to be more
         unique by providing a namespace.  Using a namespace means two demos
         that have generated the same hash but use a different namespace will be
         in different rooms.

         - `room` (default: null) _added 0.6_

         Rather than use the internal hash generation
         (plus optional namespace) for room name generation, simply use this room
         name instead.  __NOTE:__ Use of the `room` option takes precendence over
         `ns`.

         - `debug` (default: false)

         Write rtc.io suite debug output to the browser console.

         - `expectedLocalStreams` (default: not specified) _added 3.0_

         By providing a positive integer value for this option will mean that
         the created quickconnect instance will wait until the specified number of
         streams have been added to the quickconnect "template" before announcing
         to the signaling server.

         - `manualJoin` (default: `false`)

         Set this value to `true` if you would prefer to call the `join` function
         to connecting to the signalling server, rather than having that happen
         automatically as soon as quickconnect is ready to.

         #### Options for Peer Connection Creation

         Options that are passed onto the
         [rtc.createConnection](https://github.com/rtc-io/rtc#createconnectionopts-constraints)
         function:

         - `iceServers`

         This provides a list of ice servers that can be used to help negotiate a
         connection between peers.

         #### Options for P2P negotiation

         Under the hood, quickconnect uses the
         [rtc/couple](https://github.com/rtc-io/rtc#rtccouple) logic, and the options
         passed to quickconnect are also passed onto this function.

         **/
        module.exports = function (signalhost, opts) {
          var hash = typeof location != 'undefined' && location.hash.slice(1);
          var signaller = require('rtc-signaller')(signalhost, opts);

          // init configurable vars
          var ns = (opts || {}).ns || '';
          var room = (opts || {}).room;
          var debugging = (opts || {}).debug;
          var allowJoin = !(opts || {}).manualJoin;
          var profile = {};
          var announced = false;

          // collect the local streams
          var localStreams = [];

          // create the calls map
          var calls = signaller.calls = getable({});

          // create the known data channels registry
          var channels = {};

          // save the plugins passed to the signaller
          var plugins = signaller.plugins = (opts || {}).plugins || [];

          // check how many local streams have been expected (default: 0)
          var expectedLocalStreams = parseInt((opts || {}).expectedLocalStreams, 10) || 0;
          var announceTimer = 0;

          function callCreate(id, pc, data) {
            calls.set(id, {
              active: false,
              pc: pc,
              channels: getable({}),
              data: data,
              streams: []
            });
          }

          function callEnd(id) {
            var call = calls.get(id);

            // if we have no data, then do nothing
            if (!call) {
              return;
            }

            debug('ending call to: ' + id);

            // if we have no data, then return
            call.channels.keys().forEach(function (label) {
              var channel = call.channels.get(label);
              var args = [id, channel, label];

              // emit the plain channel:closed event
              signaller.apply(signaller, ['channel:closed'].concat(args));

              // emit the labelled version of the event
              signaller.apply(signaller, ['channel:closed:' + label].concat(args));

              // decouple the events
              channel.onopen = null;
            });

            // trigger stream:removed events for each of the remotestreams in the pc
            call.streams.forEach(function (stream) {
              signaller('stream:removed', id, stream);
            });

            // delete the call data
            calls.delete(id);

            // trigger the call:ended event
            signaller('call:ended', id, call.pc);

            // ensure the peer connection is properly cleaned up
            cleanup(call.pc);
          }

          function callStart(id, pc, data) {
            var call = calls.get(id);
            var streams = [].concat(pc.getRemoteStreams());

            // flag the call as active
            call.active = true;
            call.streams = [].concat(pc.getRemoteStreams());

            pc.onaddstream = createStreamAddHandler(id);
            pc.onremovestream = createStreamRemoveHandler(id);

            debug(signaller.id + ' - ' + id + ' call start: ' + streams.length + ' streams');
            signaller('call:started', id, pc, data);

            // examine the existing remote streams after a short delay
            process.nextTick(function () {
              // iterate through any remote streams
              streams.forEach(receiveRemoteStream(id));
            });
          }

          function checkReadyToAnnounce() {
            clearTimeout(announceTimer);
            if (!allowJoin) {
              return;
            }

            // if we are waiting for a set number of streams, then wait until we have
            // the required number
            if (expectedLocalStreams && localStreams.length < expectedLocalStreams) {
              return;
            }

            // announce ourselves to our new friend
            announceTimer = setTimeout(function () {
              var data = extend({}, profile, {
                room: room
              });

              // announce and emit the local announce event
              signaller.announce(data);
              announced = true;
            }, 0);
          }

          function createStreamAddHandler(id) {
            return function (evt) {
              debug('peer ' + id + ' added stream');
              updateRemoteStreams(id);
              receiveRemoteStream(id)(evt.stream);
            }
          }

          function createStreamRemoveHandler(id) {
            return function (evt) {
              debug('peer ' + id + ' removed stream');
              updateRemoteStreams(id);
              signaller('stream:removed', id, evt.stream);
            };
          }

          function getActiveCall(peerId) {
            var call = calls.get(peerId);

            if (!call) {
              throw new Error('No active call for peer: ' + peerId);
            }

            return call;
          }

          function gotPeerChannel(channel, pc, data) {
            var channelMonitor;

            function channelReady() {
              var call = calls.get(data.id);
              var args = [data.id, channel, data, pc];

              // decouple the channel.onopen listener
              debug('reporting channel "' + channel.label + '" ready, have call: ' + ( !!call));
              clearInterval(channelMonitor);
              channel.onopen = null;

              // save the channel
              if (call) {
                call.channels.set(channel.label, channel);
              }

              // trigger the %channel.label%:open event
              debug('triggering channel:opened events for channel: ' + channel.label);

              // emit the plain channel:opened event
              signaller.apply(signaller, ['channel:opened'].concat(args));

              // emit the channel:opened:%label% eve
              signaller.apply(
                signaller, ['channel:opened:' + channel.label].concat(args)
              );
            }

            debug('channel ' + channel.label + ' discovered for peer: ' + data.id);
            if (channel.readyState === 'open') {
              return channelReady();
            }

            debug('channel not ready, current state = ' + channel.readyState);
            channel.onopen = channelReady;

            // monitor the channel open (don't trust the channel open event just yet)
            channelMonitor = setInterval(function () {
              debug('checking channel state, current state = ' + channel.readyState);
              if (channel.readyState === 'open') {
                channelReady();
              }
            }, 500);
          }

          function handleLocalAnnounce(data) {
            // if we send an announce with an updated room then update our local room name
            if (data && typeof data.room != 'undefined') {
              room = data.room;
            }
          }

          function handlePeerAnnounce(data) {
            var pc;
            var monitor;

            // if the room is not a match, abort
            if (data.room !== room) {
              return;
            }

            // create a peer connection
            pc = rtc.createConnection(opts, (opts || {}).constraints);
            signaller('peer:connect', data.id, pc, data);

            // add this connection to the calls list
            callCreate(data.id, pc, data);

            // add the local streams
            localStreams.forEach(function (stream, idx) {
              pc.addStream(stream);
            });

            // add the data channels
            // do this differently based on whether the connection is a
            // master or a slave connection
            if (signaller.isMaster(data.id)) {
              debug('is master, creating data channels: ', Object.keys(channels));

              // create the channels
              Object.keys(channels).forEach(function (label) {
                gotPeerChannel(pc.createDataChannel(label, channels[label]), pc, data);
              });
            } else {
              pc.ondatachannel = function (evt) {
                var channel = evt && evt.channel;

                // if we have no channel, abort
                if (!channel) {
                  return;
                }

                if (channels[channel.label] !== undefined) {
                  gotPeerChannel(channel, pc, data);
                }
              };
            }

            // couple the connections
            debug('coupling ' + signaller.id + ' to ' + data.id);
            monitor = rtc.couple(pc, data.id, signaller, extend({}, opts, {
              logger: mbus('pc.' + data.id, signaller)
            }));

            signaller('peer:couple', data.id, pc, data, monitor);

            // once active, trigger the peer connect event
            monitor.once('connected', callStart.bind(null, data.id, pc, data))
            monitor.once('closed', callEnd.bind(null, data.id));

            // if we are the master connnection, create the offer
            // NOTE: this only really for the sake of politeness, as rtc couple
            // implementation handles the slave attempting to create an offer
            if (signaller.isMaster(data.id)) {
              monitor.createOffer();
            }
          }

          function handlePeerFilter(evt) {
            // only connect with the peer if we are ready
            evt.allow = evt.allow && (localStreams.length >= expectedLocalStreams);
          }

          function handlePeerUpdate(data) {
            var id = data && data.id;
            var activeCall = id && calls.get(id);

            // if we have received an update for a peer that has no active calls,
            // then pass this onto the announce handler
            if (id && (!activeCall)) {
              debug('received peer update from peer ' + id + ', no active calls');
              return handlePeerAnnounce(data);
            }
          }

          function receiveRemoteStream(id) {
            var call = calls.get(id);

            return function (stream) {
              signaller('stream:added', id, stream, call && call.data);
            };
          }

          function updateRemoteStreams(id) {
            var call = calls.get(id);

            if (call && call.pc) {
              call.streams = [].concat(call.pc.getRemoteStreams());
            }
          }

          // if the room is not defined, then generate the room name
          if (!room) {
            // if the hash is not assigned, then create a random hash value
            if (!hash) {
              hash = location.hash = '' + (Math.pow(2, 53) * Math.random());
            }

            room = ns + '#' + hash;
          }

          if (debugging) {
            rtc.logger.enable.apply(rtc.logger, Array.isArray(debug) ? debugging : ['*']);
          }

          signaller.on('peer:announce', handlePeerAnnounce);
          signaller.on('peer:update', handlePeerUpdate);
          signaller.on('peer:leave', callEnd);

          /**
           ### Quickconnect Broadcast and Data Channel Helper Functions

           The following are functions that are patched into the `rtc-signaller`
           instance that make working with and creating functional WebRTC applications
           a lot simpler.

           **/

          /**
           #### addStream

           ```
           addStream(stream:MediaStream) => qc
           ```

           Add the stream to active calls and also save the stream so that it
           can be added to future calls.

           **/
          signaller.broadcast = signaller.addStream = function (stream) {
            localStreams.push(stream);

            // if we have any active calls, then add the stream
            calls.values().forEach(function (data) {
              data.pc.addStream(stream);
            });

            checkReadyToAnnounce();
            return signaller;
          };

          /**
           #### endCalls()

           The `endCalls` function terminates all the active calls that have been
           created in this quickconnect instance.  Calling `endCalls` does not
           kill the connection with the signalling server.

           **/
          signaller.endCalls = function () {
            calls.keys().forEach(callEnd);
          };

          /**
           #### close()

           The `close` function provides a convenient way of closing all associated
           peer connections.  This function simply uses the `endCalls` function and
           the underlying `leave` function of the signaller to do a "full cleanup"
           of all connections.
           **/
          signaller.close = function () {
            signaller.endCalls();
            signaller.leave();
          };

          /**
           #### createDataChannel(label, config)

           Request that a data channel with the specified `label` is created on
           the peer connection.  When the data channel is open and available, an
           event will be triggered using the label of the data channel.

           For example, if a new data channel was requested using the following
           call:

           ```js
           var qc = quickconnect('http://rtc.io/switchboard').createDataChannel('test');
           ```

           Then when the data channel is ready for use, a `test:open` event would
           be emitted by `qc`.

           **/
          signaller.createDataChannel = function (label, opts) {
            // create a channel on all existing calls
            calls.keys().forEach(function (peerId) {
              var call = calls.get(peerId);
              var dc;

              // if we are the master connection, create the data channel
              if (call && call.pc && signaller.isMaster(peerId)) {
                dc = call.pc.createDataChannel(label, opts);
                gotPeerChannel(dc, call.pc, call.data);
              }
            });

            // save the data channel opts in the local channels dictionary
            channels[label] = opts || null;

            return signaller;
          };

          /**
           #### join()

           The `join` function is used when `manualJoin` is set to true when creating
           a quickconnect instance.  Call the `join` function once you are ready to
           join the signalling server and initiate connections with other people.

           **/
          signaller.join = function () {
            allowJoin = true;
            checkReadyToAnnounce();
          };

          /**
           #### reactive()

           Flag that this session will be a reactive connection.

           **/
          signaller.reactive = function () {
            // add the reactive flag
            opts = opts || {};
            opts.reactive = true;

            // chain
            return signaller;
          };

          /**
           #### removeStream

           ```
           removeStream(stream:MediaStream)
           ```

           Remove the specified stream from both the local streams that are to
           be connected to new peers, and also from any active calls.

           **/
          signaller.removeStream = function (stream) {
            var localIndex = localStreams.indexOf(stream);

            // remove the stream from any active calls
            calls.values().forEach(function (call) {
              call.pc.removeStream(stream);
            });

            // remove the stream from the localStreams array
            if (localIndex >= 0) {
              localStreams.splice(localIndex, 1);
            }

            return signaller;
          };

          /**
           #### requestChannel

           ```
           requestChannel(targetId, label, callback)
           ```

           This is a function that can be used to respond to remote peers supplying
           a data channel as part of their configuration.  As per the `receiveStream`
           function this function will either fire the callback immediately if the
           channel is already available, or once the channel has been discovered on
           the call.

           **/
          signaller.requestChannel = function (targetId, label, callback) {
            var call = getActiveCall(targetId);
            var channel = call && call.channels.get(label);

            // if we have then channel trigger the callback immediately
            if (channel) {
              callback(null, channel);
              return signaller;
            }

            // if not, wait for it
            signaller.once('channel:opened:' + label, function (id, dc) {
              callback(null, dc);
            });

            return signaller;
          };

          /**
           #### requestStream

           ```
           requestStream(targetId, idx, callback)
           ```

           Used to request a remote stream from a quickconnect instance. If the
           stream is already available in the calls remote streams, then the callback
           will be triggered immediately, otherwise this function will monitor
           `stream:added` events and wait for a match.

           In the case that an unknown target is requested, then an exception will
           be thrown.
           **/
          signaller.requestStream = function (targetId, idx, callback) {
            var call = getActiveCall(targetId);
            var stream;

            function waitForStream(peerId) {
              if (peerId !== targetId) {
                return;
              }

              // get the stream
              stream = call.pc.getRemoteStreams()[idx];

              // if we have the stream, then remove the listener and trigger the cb
              if (stream) {
                signaller.removeListener('stream:added', waitForStream);
                callback(null, stream);
              }
            }

            // look for the stream in the remote streams of the call
            stream = call.pc.getRemoteStreams()[idx];

            // if we found the stream then trigger the callback
            if (stream) {
              callback(null, stream);
              return signaller;
            }

            // otherwise wait for the stream
            signaller.on('stream:added', waitForStream);
            return signaller;
          };

          /**
           #### profile(data)

           Update the profile data with the attached information, so when
           the signaller announces it includes this data in addition to any
           room and id information.

           **/
          signaller.profile = function (data) {
            extend(profile, data);

            // if we have already announced, then reannounce our profile to provide
            // others a `peer:update` event
            if (announced) {
              signaller.announce(profile);
            }

            return signaller;
          };

          /**
           #### waitForCall

           ```
           waitForCall(targetId, callback)
           ```

           Wait for a call from the specified targetId.  If the call is already
           active the callback will be fired immediately, otherwise we will wait
           for a `call:started` event that matches the requested `targetId`

           **/
          signaller.waitForCall = function (targetId, callback) {
            var call = calls.get(targetId);

            if (call && call.active) {
              callback(null, call.pc);
              return signaller;
            }

            signaller.on('call:started', function handleNewCall(id) {
              if (id === targetId) {
                signaller.removeListener('call:started', handleNewCall);
                callback(null, calls.get(id).pc);
              }
            });
          };

          // if we have an expected number of local streams, then use a filter to
          // check if we should respond
          if (expectedLocalStreams) {
            signaller.on('peer:filter', handlePeerFilter);
          }

          // respond to local announce messages
          signaller.on('local:announce', handleLocalAnnounce);

          // check to see if we are ready to announce
          checkReadyToAnnounce();

          // pass the signaller on
          return signaller;
        };

      }).call(this, require("Zbi7gb"))
    }, {
      "Zbi7gb": 4,
      "cog/defaults": 10,
      "cog/extend": 11,
      "cog/getable": 12,
      "mbus": 16,
      "rtc-signaller": 22,
      "rtc-tools": 37,
      "rtc-tools/cleanup": 33
    }
  ],
  10: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      /**
       ## cog/defaults

       ```js
       var defaults = require('cog/defaults');
       ```

       ### defaults(target, *)

       Shallow copy object properties from the supplied source objects (*) into
       the target object, returning the target object once completed.  Do not,
       however, overwrite existing keys with new values:

       ```js
       defaults({ a: 1, b: 2 }, { c: 3 }, { d: 4 }, { b: 5 }));
       ```

       See an example on [requirebin](http://requirebin.com/?gist=6079475).
       **/
      module.exports = function (target) {
        // ensure we have a target
        target = target || {};

        // iterate through the sources and copy to the target
        [].slice.call(arguments, 1).forEach(function (source) {
          if (!source) {
            return;
          }

          for (var prop in source) {
            if (target[prop] === void 0) {
              target[prop] = source[prop];
            }
          }
        });

        return target;
      };
    }, {}
  ],
  11: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      /**
       ## cog/extend

       ```js
       var extend = require('cog/extend');
       ```

       ### extend(target, *)

       Shallow copy object properties from the supplied source objects (*) into
       the target object, returning the target object once completed:

       ```js
       extend({ a: 1, b: 2 }, { c: 3 }, { d: 4 }, { b: 5 }));
       ```

       See an example on [requirebin](http://requirebin.com/?gist=6079475).
       **/
      module.exports = function (target) {
        [].slice.call(arguments, 1).forEach(function (source) {
          if (!source) {
            return;
          }

          for (var prop in source) {
            target[prop] = source[prop];
          }
        });

        return target;
      };
    }, {}
  ],
  12: [
    function (require, module, exports) {
      /**
       ## cog/getable

       Take an object and provide a wrapper that allows you to `get` and
       `set` values on that object.

       **/
      module.exports = function (target) {
        function get(key) {
          return target[key];
        }

        function set(key, value) {
          target[key] = value;
        }

        function remove(key) {
          return delete target[key];
        }

        function keys() {
          return Object.keys(target);
        };

        function values() {
          return Object.keys(target).map(function (key) {
            return target[key];
          });
        };

        if (typeof target != 'object') {
          return target;
        }

        return {
          get: get,
          set: set,
          remove: remove,
          delete: remove,
          keys: keys,
          values: values
        };
      };

    }, {}
  ],
  13: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      /**
       ## cog/jsonparse

       ```js
       var jsonparse = require('cog/jsonparse');
       ```

       ### jsonparse(input)

       This function will attempt to automatically detect stringified JSON, and
       when detected will parse into JSON objects.  The function looks for strings
       that look and smell like stringified JSON, and if found attempts to
       `JSON.parse` the input into a valid object.

       **/
      module.exports = function (input) {
        var isString = typeof input == 'string' || (input instanceof String);
        var reNumeric = /^\-?\d+\.?\d*$/;
        var shouldParse;
        var firstChar;
        var lastChar;

        if ((!isString) || input.length < 2) {
          if (isString && reNumeric.test(input)) {
            return parseFloat(input);
          }

          return input;
        }

        // check for true or false
        if (input === 'true' || input === 'false') {
          return input === 'true';
        }

        // check for null
        if (input === 'null') {
          return null;
        }

        // get the first and last characters
        firstChar = input.charAt(0);
        lastChar = input.charAt(input.length - 1);

        // determine whether we should JSON.parse the input
        shouldParse =
          (firstChar == '{' && lastChar == '}') ||
          (firstChar == '[' && lastChar == ']') ||
          (firstChar == '"' && lastChar == '"');

        if (shouldParse) {
          try {
            return JSON.parse(input);
          } catch (e) {
            // apparently it wasn't valid json, carry on with regular processing
          }
        }


        return reNumeric.test(input) ? parseFloat(input) : input;
      };
    }, {}
  ],
  14: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      /**
       ## cog/logger

       ```js
       var logger = require('cog/logger');
       ```

       Simple browser logging offering similar functionality to the
       [debug](https://github.com/visionmedia/debug) module.

       ### Usage

       Create your self a new logging instance and give it a name:

       ```js
       var debug = logger('phil');
       ```

       Now do some debugging:

       ```js
       debug('hello');
       ```

       At this stage, no log output will be generated because your logger is
       currently disabled.  Enable it:

       ```js
       logger.enable('phil');
       ```

       Now do some more logger:

       ```js
       debug('Oh this is so much nicer :)');
       // --> phil: Oh this is some much nicer :)
       ```

       ### Reference
       **/

      var active = [];
      var unleashListeners = [];
      var targets = [console];

      /**
       #### logger(name)

       Create a new logging instance.
       **/
      var logger = module.exports = function (name) {
        // initial enabled check
        var enabled = checkActive();

        function checkActive() {
          return enabled = active.indexOf('*') >= 0 || active.indexOf(name) >= 0;
        }

        // register the check active with the listeners array
        unleashListeners[unleashListeners.length] = checkActive;

        // return the actual logging function
        return function () {
          var args = [].slice.call(arguments);

          // if we have a string message
          if (typeof args[0] == 'string' || (args[0] instanceof String)) {
            args[0] = name + ': ' + args[0];
          }

          // if not enabled, bail
          if (!enabled) {
            return;
          }

          // log
          targets.forEach(function (target) {
            target.log.apply(target, args);
          });
        };
      };

      /**
       #### logger.reset()

       Reset logging (remove the default console logger, flag all loggers as
       inactive, etc, etc.
       **/
      logger.reset = function () {
        // reset targets and active states
        targets = [];
        active = [];

        return logger.enable();
      };

      /**
       #### logger.to(target)

       Add a logging target.  The logger must have a `log` method attached.

       **/
      logger.to = function (target) {
        targets = targets.concat(target || []);

        return logger;
      };

      /**
       #### logger.enable(names*)

       Enable logging via the named logging instances.  To enable logging via all
       instances, you can pass a wildcard:

       ```js
       logger.enable('*');
       ```

       __TODO:__ wildcard enablers
       **/
      logger.enable = function () {
        // update the active
        active = active.concat([].slice.call(arguments));

        // trigger the unleash listeners
        unleashListeners.forEach(function (listener) {
          listener();
        });

        return logger;
      };
    }, {}
  ],
  15: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      /**
       ## cog/throttle

       ```js
       var throttle = require('cog/throttle');
       ```

       ### throttle(fn, delay, opts)

       A cherry-pickable throttle function.  Used to throttle `fn` to ensure
       that it can be called at most once every `delay` milliseconds.  Will
       fire first event immediately, ensuring the next event fired will occur
       at least `delay` milliseconds after the first, and so on.

       **/
      module.exports = function (fn, delay, opts) {
        var lastExec = (opts || {}).leading !== false ? 0 : Date.now();
        var trailing = (opts || {}).trailing;
        var timer;
        var queuedArgs;
        var queuedScope;

        // trailing defaults to true
        trailing = trailing || trailing === undefined;

        function invokeDefered() {
          fn.apply(queuedScope, queuedArgs || []);
          lastExec = Date.now();
        }

        return function () {
          var tick = Date.now();
          var elapsed = tick - lastExec;

          // always clear the defered timer
          clearTimeout(timer);

          if (elapsed < delay) {
            queuedArgs = [].slice.call(arguments, 0);
            queuedScope = this;

            return trailing && (timer = setTimeout(invokeDefered, delay - elapsed));
          }

          // call the function
          lastExec = tick;
          fn.apply(this, arguments);
        };
      };
    }, {}
  ],
  16: [
    function (require, module, exports) {
      var createTrie = require('array-trie');
      var reDelim = /[\.\:]/;

      /**
       # mbus

       If Node's EventEmitter and Eve were to have a child, it might look something like this.
       No wildcard support at this stage though...

       ## Example Usage

       <<< docs/usage.md

       ## Reference

       ### `mbus(namespace?, parent?, scope?)`

       Create a new message bus with `namespace` inheriting from the `parent`
       mbus instance.  If events from this message bus should be triggered with
       a specific `this` scope, then specify it using the `scope` argument.

       **/

      var createBus = module.exports = function (namespace, parent, scope) {
        var registry = createTrie();
        var feeds = [];

        function bus(name) {
          var args = [].slice.call(arguments, 1);
          var parts = getNameParts(name);
          var delimited = parts.join('.');
          var handlers = registry.get(parts) || [];
          var results;

          // send through the feeds
          feeds.forEach(function (feed) {
            feed({
              name: delimited,
              args: args
            });
          });

          // run the registered handlers
          results = [].concat(handlers).map(function (handler) {
            return handler.apply(scope || this, args);
          });

          // run the parent handlers
          if (bus.parent) {
            results = results.concat(
              bus.parent.apply(scope || this, [namespace.concat(parts)].concat(args))
            );
          }

          return results;
        }

        /**
         ### `mbus#clear()`

         Reset the handler registry, which essential deregisters all event listeners.

         _Alias:_ `removeAllListeners`
         **/

        function clear(name) {
          // if we have a name, reset handlers for that handler
          if (name) {
            registry.set(getNameParts(name), []);
          }
          // otherwise, reset the entire handler registry
          else {
            registry = createTrie();
          }
        }

        /**
         ### `mbus#feed(handler)`

         Attach a handler function that will see all events that are sent through
         this bus in an "object stream" format that matches the following format:

         ```
         { name: 'event.name', args: [ 'event', 'args' ] }
         ```

         The feed function returns a function that can be called to stop the feed
         sending data.

         **/

        function feed(handler) {
          function stop() {
            feeds.splice(feeds.indexOf(handler), 1);
          }

          feeds.push(handler);
          return stop;
        }

        function getNameParts(name) {
          return Array.isArray(name) ? name : name.split(reDelim);
        }

        /**
         ### `mbus#off(name, handler)`

         Deregister an event handler.
         **/

        function off(name, handler) {
          var handlers = registry.get(getNameParts(name));
          var idx = handlers ? handlers.indexOf(handler) : -1;

          if (idx >= 0) {
            handlers.splice(idx, 1);
          }
        }

        /**
         ### `mbus#on(name, handler)`

         Register an event handler for the event `name`.

         **/

        function on(name, handler) {
          var parts = getNameParts(name);
          var handlers = registry.get(parts);

          if (handlers) {
            handlers.push(handler);
          } else {
            registry.set(parts, [handler]);
          }

          return bus;
        }


        /**
         ### `mbus#once(name, handler)`

         Register an event handler for the event `name` that will only
         trigger once (i.e. the handler will be deregistered immediately after
         being triggered the first time).

         **/

        function once(name, handler) {
          return on(name, function handleEvent() {
            var result = handler.apply(this, arguments);
            bus.off(name, handleEvent);

            return result;
          });
        }

        if (typeof namespace == 'function') {
          parent = namespace;
          namespace = '';
        }

        namespace = (namespace && namespace.split(reDelim)) || [];

        bus.clear = bus.removeAllListeners = clear;
        bus.feed = feed;
        bus.on = bus.addListener = on;
        bus.once = once;
        bus.off = bus.removeListener = off;
        bus.parent = parent || (namespace && namespace.length > 0 && createBus());

        return bus;
      };

    }, {
      "array-trie": 18
    }
  ],
  17: [
    function (require, module, exports) {
      "use strict"

      function compileSearch(funcName, predicate, reversed, extraArgs, useNdarray, earlyOut) {
        var code = [
          "function ", funcName, "(a,l,h,", extraArgs.join(","), "){",
          earlyOut ? "" : "var i=", (reversed ? "l-1" : "h+1"),
          ";while(l<=h){\
var m=(l+h)>>>1,x=a", useNdarray ? ".get(m)" : "[m]"
        ]
        if (earlyOut) {
          if (predicate.indexOf("c") < 0) {
            code.push(";if(x===y){return m}else if(x<=y){")
          } else {
            code.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){")
          }
        } else {
          code.push(";if(", predicate, "){i=m;")
        }
        if (reversed) {
          code.push("l=m+1}else{h=m-1}")
        } else {
          code.push("h=m-1}else{l=m+1}")
        }
        code.push("}")
        if (earlyOut) {
          code.push("return -1};")
        } else {
          code.push("return i};")
        }
        return code.join("")
      }

      function compileBoundsSearch(predicate, reversed, suffix, earlyOut) {
        var result = new Function([
          compileSearch("A", "x" + predicate + "y", reversed, ["y"], false, earlyOut),
          compileSearch("B", "x" + predicate + "y", reversed, ["y"], true, earlyOut),
          compileSearch("P", "c(x,y)" + predicate + "0", reversed, ["y", "c"], false, earlyOut),
          compileSearch("Q", "c(x,y)" + predicate + "0", reversed, ["y", "c"], true, earlyOut),
          "function dispatchBsearch", suffix, "(a,y,c,l,h){\
if(a.shape){\
if(typeof(c)==='function'){\
return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)\
}else{\
return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)\
}}else{\
if(typeof(c)==='function'){\
return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)\
}else{\
return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)\
}}}\
return dispatchBsearch", suffix
        ].join(""))
        return result()
      }

      module.exports = {
        ge: compileBoundsSearch(">=", false, "GE"),
        gt: compileBoundsSearch(">", false, "GT"),
        lt: compileBoundsSearch("<", true, "LT"),
        le: compileBoundsSearch("<=", true, "LE"),
        eq: compileBoundsSearch("-", true, "EQ", true)
      }

    }, {}
  ],
  18: [
    function (require, module, exports) {
      "use strict"

      var bounds = require("binary-search-bounds")

      module.exports = createTrie

      function Trie(symbols, children, value) {
        this.symbols = symbols
        this.children = children
        this.value = value
      }

      var proto = Trie.prototype

      proto.set = function (s, value) {
        if (s.shape) {
          var v = this
          var n = s.shape[0]
          for (var i = 0; i < n; ++i) {
            var c = s.get(i)
            var j = bounds.ge(v.symbols, c)
            if (j < v.symbols.length && v.symbols[j] === c) {
              v = v.children[j]
            } else {
              var l = new Trie([], [], value)
              for (var k = n - 1; k > i; --k) {
                l = new Trie([s.get(k)], [l])
              }
              v.symbols.splice(j, 0, c)
              v.children.splice(j, 0, l)
              return value
            }
          }
          return v.value = value
        } else {
          var v = this
          var n = s.length
          for (var i = 0; i < n; ++i) {
            var c = s[i]
            var j = bounds.ge(v.symbols, c)
            if (j < v.symbols.length && v.symbols[j] === c) {
              v = v.children[j]
            } else {
              var l = new Trie([], [], value)
              for (var k = n - 1; k > i; --k) {
                l = new Trie([s[k]], [l])
              }
              v.symbols.splice(j, 0, c)
              v.children.splice(j, 0, l)
              return value
            }
          }
          return v.value = value
        }
      }

      proto.get = function (s) {
        if (s.shape) {
          var v = this
          var n = s.shape[0]
          for (var i = 0; i < n; ++i) {
            var c = s.get(i)
            var j = bounds.eq(v.symbols, c)
            if (j < 0) {
              return
            }
            v = v.children[j]
          }
          return v.value
        } else {
          var v = this
          var n = s.length
          for (var i = 0; i < n; ++i) {
            var c = s[i]
            var j = bounds.eq(v.symbols, c)
            if (j < 0) {
              return
            }
            v = v.children[j]
          }
          return v.value
        }
      }

      function createTrie() {
        return new Trie([], [])
      }
    }, {
      "binary-search-bounds": 17
    }
  ],
  19: [
    function (require, module, exports) {
      /* jshint node: true */
      /* global window: false */
      /* global navigator: false */

      'use strict';

      var browser = require('detect-browser');

      /**
       ### `rtc-core/detect`

       A browser detection helper for accessing prefix-free versions of the various
       WebRTC types.

       ### Example Usage

       If you wanted to get the native `RTCPeerConnection` prototype in any browser
       you could do the following:

       ```js
       var detect = require('rtc-core/detect'); // also available in rtc/detect
       var RTCPeerConnection = detect('RTCPeerConnection');
       ```

       This would provide whatever the browser prefixed version of the
       RTCPeerConnection is available (`webkitRTCPeerConnection`,
       `mozRTCPeerConnection`, etc).
       **/
      var detect = module.exports = function (target, prefixes) {
        var prefixIdx;
        var prefix;
        var testName;
        var hostObject = this || (typeof window != 'undefined' ? window : undefined);

        // if we have no host object, then abort
        if (!hostObject) {
          return;
        }

        // initialise to default prefixes
        // (reverse order as we use a decrementing for loop)
        prefixes = (prefixes || ['ms', 'o', 'moz', 'webkit']).concat('');

        // iterate through the prefixes and return the class if found in global
        for (prefixIdx = prefixes.length; prefixIdx--;) {
          prefix = prefixes[prefixIdx];

          // construct the test class name
          // if we have a prefix ensure the target has an uppercase first character
          // such that a test for getUserMedia would result in a
          // search for webkitGetUserMedia
          testName = prefix + (prefix ?
            target.charAt(0).toUpperCase() + target.slice(1) :
              target);

          if (typeof hostObject[testName] != 'undefined') {
            // update the last used prefix
            detect.browser = detect.browser || prefix.toLowerCase();

            // return the host object member
            return hostObject[target] = hostObject[testName];
          }
        }
      };

      // detect mozilla (yes, this feels dirty)
      detect.moz = typeof navigator != 'undefined' && !!navigator.mozGetUserMedia;

      // set the browser and browser version
      detect.browser = browser.name;
      detect.browserVersion = detect.version = browser.version;

    }, {
      "detect-browser": 20
    }
  ],
  20: [
    function (require, module, exports) {
      var browsers = [
        ['chrome', /Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],
        ['firefox', /Firefox\/([0-9\.]+)(?:\s|$)/],
        ['opera', /Opera\/([0-9\.]+)(?:\s|$)/],
        ['ie', /Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],
        ['ie', /MSIE\s([0-9\.]+);.*Trident\/[4-6].0/],
        ['ie', /MSIE\s(7\.0)/],
        ['bb10', /BB10;\sTouch.*Version\/([0-9\.]+)/],
        ['android', /Android\s([0-9\.]+)/],
        ['ios', /iPad\;\sCPU\sOS\s([0-9\._]+)/],
        ['ios', /iPhone\;\sCPU\siPhone\sOS\s([0-9\._]+)/],
        ['safari', /Safari\/([0-9\._]+)/]
      ];

      var match = browsers.map(match).filter(isMatch)[0];
      var parts = match && match[3].split(/[._]/).slice(0, 3);

      while (parts && parts.length < 3) {
        parts.push('0');
      }

      // set the name and version
      exports.name = match && match[0];
      exports.version = parts && parts.join('.');

      function match(pair) {
        return pair.concat(pair[1].exec(navigator.userAgent));
      }

      function isMatch(pair) {
        return !!pair[2];
      }

    }, {}
  ],
  21: [
    function (require, module, exports) {
      var detect = require('./detect');
      var requiredFunctions = [
        'init'
      ];

      function isSupported(plugin) {
        return plugin && typeof plugin.supported == 'function' && plugin.supported(detect);
      }

      function isValid(plugin) {
        var supportedFunctions = requiredFunctions.filter(function (fn) {
          return typeof plugin[fn] == 'function';
        });

        return supportedFunctions.length === requiredFunctions.length;
      }

      module.exports = function (plugins) {
        return [].concat(plugins || []).filter(isSupported).filter(isValid)[0];
      }

    }, {
      "./detect": 19
    }
  ],
  22: [
    function (require, module, exports) {
      var extend = require('cog/extend');

      module.exports = function (messenger, opts) {
        return require('./index.js')(messenger, extend({
          connect: require('./primus-loader')
        }, opts));
      };

    }, {
      "./index.js": 27,
      "./primus-loader": 31,
      "cog/extend": 11
    }
  ],
  23: [
    function (require, module, exports) {
      module.exports = {
        // messenger events
        dataEvent: 'data',
        openEvent: 'open',
        closeEvent: 'close',

        // messenger functions
        writeMethod: 'write',
        closeMethod: 'close',

        // leave timeout (ms)
        leaveTimeout: 3000
      };
    }, {}
  ],
  24: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      var debug = require('cog/logger')('rtc-signaller');
      var extend = require('cog/extend');
      var roles = ['a', 'b'];

      /**
       #### announce

       ```
       /announce|%metadata%|{"id": "...", ... }
       ```

       When an announce message is received by the signaller, the attached
       object data is decoded and the signaller emits an `announce` message.

       **/
      module.exports = function (signaller) {

        function copyData(target, source) {
          if (target && source) {
            for (var key in source) {
              target[key] = source[key];
            }
          }

          return target;
        }

        function dataAllowed(data) {
          var evt = {
            data: data,
            allow: true
          };

          signaller('peer:filter', evt);

          return evt.allow;
        }

        return function (args, messageType, srcData, srcState, isDM) {
          var data = args[0];
          var peer;

          debug('announce handler invoked, received data: ', data);

          // if we have valid data then process
          if (data && data.id && data.id !== signaller.id) {
            if (!dataAllowed(data)) {
              return;
            }
            // check to see if this is a known peer
            peer = signaller.peers.get(data.id);

            // trigger the peer connected event to flag that we know about a
            // peer connection. The peer has passed the "filter" check but may
            // be announced / updated depending on previous connection status
            signaller('peer:connected', data.id, data);

            // if the peer is existing, then update the data
            if (peer && (!peer.inactive)) {
              debug('signaller: ' + signaller.id + ' received update, data: ', data);

              // update the data
              copyData(peer.data, data);

              // trigger the peer update event
              return signaller('peer:update', data, srcData);
            }

            // create a new peer
            peer = {
              id: data.id,

              // initialise the local role index
              roleIdx: [data.id, signaller.id].sort().indexOf(data.id),

              // initialise the peer data
              data: {}
            };

            // initialise the peer data
            copyData(peer.data, data);

            // reset inactivity state
            clearTimeout(peer.leaveTimer);
            peer.inactive = false;

            // set the peer data
            signaller.peers.set(data.id, peer);

            // if this is an initial announce message (no vector clock attached)
            // then send a announce reply
            if (signaller.autoreply && (!isDM)) {
              signaller
                .to(data.id)
                .send('/announce', signaller.attributes);
            }

            // emit a new peer announce event
            return signaller('peer:announce', data, peer);
          }
        };
      };

    }, {
      "cog/extend": 11,
      "cog/logger": 14
    }
  ],
  25: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      /**
       ### signaller message handlers

       **/

      module.exports = function (signaller, opts) {
        return {
          announce: require('./announce')(signaller, opts),
          leave: require('./leave')(signaller, opts)
        };
      };
    }, {
      "./announce": 24,
      "./leave": 26
    }
  ],
  26: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      /**
       #### leave

       ```
       /leave|{"id":"..."}
       ```

       When a leave message is received from a peer, we check to see if that is
       a peer that we are managing state information for and if we are then the
       peer state is removed.

       **/
      module.exports = function (signaller, opts) {
        return function (args) {
          var data = args[0];
          var peer = signaller.peers.get(data && data.id);

          if (peer) {
            // start the inactivity timer
            peer.leaveTimer = setTimeout(function () {
              peer.inactive = true;
              signaller('peer:leave', data.id, peer);
            }, opts.leaveTimeout);
          }

          // emit the event
          signaller('peer:disconnected', data.id, peer);
        };
      };

    }, {}
  ],
  27: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      var debug = require('cog/logger')('rtc-signaller');
      var detect = require('rtc-core/detect');
      var defaults = require('cog/defaults');
      var extend = require('cog/extend');
      var mbus = require('mbus');
      var throttle = require('cog/throttle');
      var getable = require('cog/getable');
      var uuid = require('cuid');

      // initialise the list of valid "write" methods
      var WRITE_METHODS = ['write', 'send'];
      var CLOSE_METHODS = ['close', 'end'];

      // initialise signaller metadata so we don't have to include the package.json
      // TODO: make this checkable with some kind of prepublish script
      var metadata = {
        version: '3.0.0'
      };

      /**
       # rtc-signaller

       The `rtc-signaller` module provides a transportless signalling
       mechanism for WebRTC.

       ## Purpose

       <<< docs/purpose.md

       ## Getting Started

       While the signaller is capable of communicating by a number of different
       messengers (i.e. anything that can send and receive messages over a wire)
       it comes with support for understanding how to connect to an
       [rtc-switchboard](https://github.com/rtc-io/rtc-switchboard) out of the box.

       The following code sample demonstrates how:

       <<< examples/getting-started.js

       <<< docs/events.md

       <<< docs/signalflow-diagrams.md

       ## Reference

       The `rtc-signaller` module is designed to be used primarily in a functional
       way and when called it creates a new signaller that will enable
       you to communicate with other peers via your messaging network.

       ```js
       // create a signaller from something that knows how to send messages
       var signaller = require('rtc-signaller')(messenger);
       ```

       As demonstrated in the getting started guide, you can also pass through
       a string value instead of a messenger instance if you simply want to
       connect to an existing `rtc-switchboard` instance.

       **/
      module.exports = function (messenger, opts) {
        // get the autoreply setting
        var autoreply = (opts || {}).autoreply;
        var connect = (opts || {}).connect;

        // initialise the metadata
        var localMeta = {};

        // create the signaller
        var signaller = mbus('', (opts || {}).logger);

        // initialise the id
        var id = signaller.id = (opts || {}).id || uuid();

        // initialise the attributes
        var attributes = signaller.attributes = {
          browser: detect.browser,
          browserVersion: detect.browserVersion,
          id: id,
          agent: 'signaller@' + metadata.version
        };

        // create the peers map
        var peers = signaller.peers = getable({});

        // initialise the data event name

        var connected = false;
        var write;
        var close;
        var processor;
        var announceTimer = 0;

        function announceOnReconnect() {
          signaller.announce();
        }

        function bindBrowserEvents() {
          messenger.addEventListener('message', function (evt) {
            processor(evt.data);
          });

          messenger.addEventListener('open', function (evt) {
            connected = true;
            signaller('open');
            signaller('connected');
          });

          messenger.addEventListener('close', function (evt) {
            connected = false;
            signaller('disconnected');
          });
        }

        function bindEvents() {
          // if we don't have an on function for the messenger, then do nothing
          if (typeof messenger.on != 'function') {
            return;
          }

          // handle message data events
          messenger.on(opts.dataEvent, processor);

          // when the connection is open, then emit an open event and a connected event
          messenger.on(opts.openEvent, function () {
            connected = true;
            signaller('open');
            signaller('connected');
          });

          messenger.on(opts.closeEvent, function () {
            connected = false;
            signaller('disconnected');
          });
        }

        function connectToHost(url) {
          if (typeof connect != 'function') {
            return signaller('error', new Error('no connect function'));
          }

          // load primus
          connect(url, opts, function (err, socket) {
            if (err) {
              return signaller('error', err);
            }

            // create the actual messenger from a primus connection
            signaller._messenger = messenger = socket.connect(url);

            // now init
            init();
          });
        }

        function createDataLine(args) {
          return args.map(prepareArg).join('|');
        }

        function createMetadata() {
          return extend({}, localMeta, {
            id: signaller.id
          });
        }

        function extractProp(name) {
          return messenger[name];
        }

        // attempt to detect whether the underlying messenger is closing
        // this can be tough as we deal with both native (or simulated native)
        // sockets or an abstraction layer such as primus

        function isClosing() {
          var isAbstraction = messenger &&
              // a primus socket has a socket attribute
            typeof messenger.socket != 'undefined';

          return isAbstraction ? false : (
            messenger &&
            typeof messenger.readyState != 'undefined' &&
            messenger.readyState >= 2
          );
        }

        function isF(target) {
          return typeof target == 'function';
        }

        function init() {
          // extract the write and close function references
          write = [opts.writeMethod].concat(WRITE_METHODS).map(extractProp).filter(isF)[0];
          close = [opts.closeMethod].concat(CLOSE_METHODS).map(extractProp).filter(isF)[0];

          // create the processor
          signaller.process = processor = require('./processor')(signaller, opts);

          // if the messenger doesn't provide a valid write method, then complain
          if (typeof write != 'function') {
            throw new Error('provided messenger does not implement a "' +
              opts.writeMethod + '" write method');
          }

          // handle core browser messenging apis
          if (typeof messenger.addEventListener == 'function') {
            bindBrowserEvents();
          } else {
            bindEvents();
          }

          // determine if we are connected or not
          connected = messenger.connected || false;
          if (!connected) {
            signaller.once('connected', function () {
              // always announce on reconnect
              signaller.on('connected', announceOnReconnect);
            });
          }

          // emit the initialized event
          setTimeout(signaller.bind(signaller, 'init'), 0);
        }

        function prepareArg(arg) {
          if (typeof arg == 'object' && (!(arg instanceof String))) {
            return JSON.stringify(arg);
          } else if (typeof arg == 'function') {
            return null;
          }

          return arg;
        }

        /**
         ### signaller#send(message, data*)

         Use the send function to send a message to other peers in the current
         signalling scope (if announced in a room this will be a room, otherwise
         broadcast to all peers connected to the signalling server).

         **/
        var send = signaller.send = function () {
          // iterate over the arguments and stringify as required
          // var metadata = { id: signaller.id };
          var args = [].slice.call(arguments);
          var dataline;

          // inject the metadata
          args.splice(1, 0, createMetadata());
          dataline = createDataLine(args);

          // perform an isclosing check
          if (isClosing()) {
            return;
          }

          // if we are not initialized, then wait until we are
          if (!connected) {
            return signaller.once('connected', function () {
              write.call(messenger, dataline);
            });
          }

          // send the data over the messenger
          return write.call(messenger, dataline);
        };

        /**
         ### announce(data?)

         The `announce` function of the signaller will pass an `/announce` message
         through the messenger network.  When no additional data is supplied to
         this function then only the id of the signaller is sent to all active
         members of the messenging network.

         #### Joining Rooms

         To join a room using an announce call you simply provide the name of the
         room you wish to join as part of the data block that you annouce, for
         example:

         ```js
         signaller.announce({ room: 'testroom' });
         ```

         Signalling servers (such as
         [rtc-switchboard](https://github.com/rtc-io/rtc-switchboard)) will then
         place your peer connection into a room with other peers that have also
         announced in this room.

         Once you have joined a room, the server will only deliver messages that
         you `send` to other peers within that room.

         #### Providing Additional Announce Data

         There may be instances where you wish to send additional data as part of
         your announce message in your application.  For instance, maybe you want
         to send an alias or nick as part of your announce message rather than just
         use the signaller's generated id.

         If for instance you were writing a simple chat application you could join
         the `webrtc` room and tell everyone your name with the following announce
         call:

         ```js
         signaller.announce({
      room: 'webrtc',
      nick: 'Damon'
    });
         ```

         #### Announcing Updates

         The signaller is written to distinguish between initial peer announcements
         and peer data updates (see the docs on the announce handler below). As
         such it is ok to provide any data updates using the announce method also.

         For instance, I could send a status update as an announce message to flag
         that I am going offline:

         ```js
         signaller.announce({ status: 'offline' });
         ```

         **/
        signaller.announce = function (data, sender) {

          function sendAnnounce() {
            (sender || send)('/announce', attributes);
            signaller('local:announce', attributes);
          }

          clearTimeout(announceTimer);

          // update internal attributes
          extend(attributes, data, {
            id: signaller.id
          });

          // if we are already connected, then ensure we announce on
          // reconnect
          if (connected) {
            // always announce on reconnect
            signaller.removeListener('connected', announceOnReconnect);
            signaller.on('connected', announceOnReconnect);
          }

          // send the attributes over the network
          return announceTimer = setTimeout(function () {
            if (!connected) {
              return signaller.once('connected', sendAnnounce);
            }

            sendAnnounce();
          }, (opts || {}).announceDelay || 10);
        };

        /**
         ### isMaster(targetId)

         A simple function that indicates whether the local signaller is the master
         for it's relationship with peer signaller indicated by `targetId`.  Roles
         are determined at the point at which signalling peers discover each other,
         and are simply worked out by whichever peer has the lowest signaller id
         when lexigraphically sorted.

         For example, if we have two signaller peers that have discovered each
         others with the following ids:

         - `b11f4fd0-feb5-447c-80c8-c51d8c3cced2`
         - `8a07f82e-49a5-4b9b-a02e-43d911382be6`

         They would be assigned roles:

         - `b11f4fd0-feb5-447c-80c8-c51d8c3cced2`
         - `8a07f82e-49a5-4b9b-a02e-43d911382be6` (master)

         **/
        signaller.isMaster = function (targetId) {
          var peer = peers.get(targetId);

          return peer && peer.roleIdx !== 0;
        };

        /**
         ### leave()

         Tell the signalling server we are leaving.  Calling this function is
         usually not required though as the signalling server should issue correct
         `/leave` messages when it detects a disconnect event.

         **/
        signaller.leave = signaller.close = function () {
          // send the leave signal
          send('/leave', {
            id: id
          });

          // stop announcing on reconnect
          signaller.removeListener('connected', announceOnReconnect);

          // call the close method
          if (typeof close == 'function') {
            close.call(messenger);
          }
        };

        /**
         ### metadata(data?)

         Get (pass no data) or set the metadata that is passed through with each
         request sent by the signaller.

         __NOTE:__ Regardless of what is passed to this function, metadata
         generated by the signaller will **always** include the id of the signaller
         and this cannot be modified.
         **/
        signaller.metadata = function (data) {
          if (arguments.length === 0) {
            return extend({}, localMeta);
          }

          localMeta = extend({}, data);
        };

        /**
         ### to(targetId)

         Use the `to` function to send a message to the specified target peer.
         A large parge of negotiating a WebRTC peer connection involves direct
         communication between two parties which must be done by the signalling
         server.  The `to` function provides a simple way to provide a logical
         communication channel between the two parties:

         ```js
         var send = signaller.to('e95fa05b-9062-45c6-bfa2-5055bf6625f4').send;

         // create an offer on a local peer connection
         pc.createOffer(
         function(desc) {
        // set the local description using the offer sdp
        // if this occurs successfully send this to our peer
        pc.setLocalDescription(
          desc,
          function() {
            send('/sdp', desc);
          },
          handleFail
        );
      },
         handleFail
         );
         ```

         **/
        signaller.to = function (targetId) {
          // create a sender that will prepend messages with /to|targetId|
          var sender = function () {
            // get the peer (yes when send is called to make sure it hasn't left)
            var peer = signaller.peers.get(targetId);
            var args;

            if (!peer) {
              throw new Error('Unknown peer: ' + targetId);
            }

            // if the peer is inactive, then abort
            if (peer.inactive) {
              return;
            }

            args = [
              '/to',
              targetId
            ].concat([].slice.call(arguments));

            // inject metadata
            args.splice(3, 0, createMetadata());

            setTimeout(function () {
              var msg = createDataLine(args);
              debug('TX (' + targetId + '): ' + msg);

              write.call(messenger, msg);
            }, 0);
          };

          return {
            announce: function (data) {
              return signaller.announce(data, sender);
            },

            send: sender,
          }
        };

        // initialise opts defaults
        opts = defaults({}, opts, require('./defaults'));

        // set the autoreply flag
        signaller.autoreply = autoreply === undefined || autoreply;

        // if the messenger is a string, then we are going to attach to a
        // ws endpoint and automatically set up primus
        if (typeof messenger == 'string' || (messenger instanceof String)) {
          connectToHost(messenger);
        }
        // otherwise, initialise the connection
        else {
          init();
        }

        // connect an instance of the messenger to the signaller
        signaller._messenger = messenger;

        // expose the process as a process function
        signaller.process = processor;

        return signaller;
      };

    }, {
      "./defaults": 23,
      "./processor": 32,
      "cog/defaults": 10,
      "cog/extend": 11,
      "cog/getable": 12,
      "cog/logger": 14,
      "cog/throttle": 15,
      "cuid": 28,
      "mbus": 16,
      "rtc-core/detect": 19
    }
  ],
  28: [
    function (require, module, exports) {
      /**
       * cuid.js
       * Collision-resistant UID generator for browsers and node.
       * Sequential for fast db lookups and recency sorting.
       * Safe for element IDs and server-side lookups.
       *
       * Extracted from CLCTR
       *
       * Copyright (c) Eric Elliott 2012
       * MIT License
       */

      /*global window, navigator, document, require, process, module */
      (function (app) {
        'use strict';
        var namespace = 'cuid',
          c = 0,
          blockSize = 4,
          base = 36,
          discreteValues = Math.pow(base, blockSize),

          pad = function pad(num, size) {
            var s = "000000000" + num;
            return s.substr(s.length - size);
          },

          randomBlock = function randomBlock() {
            return pad((Math.random() *
            discreteValues << 0)
              .toString(base), blockSize);
          },

          safeCounter = function () {
            c = (c < discreteValues) ? c : 0;
            c++; // this is not subliminal
            return c - 1;
          },

          api = function cuid() {
            // Starting with a lowercase letter makes
            // it HTML element ID friendly.
            var letter = 'c', // hard-coded allows for sequential access

            // timestamp
            // warning: this exposes the exact date and time
            // that the uid was created.
              timestamp = (new Date().getTime()).toString(base),

            // Prevent same-machine collisions.
              counter,

            // A few chars to generate distinct ids for different
            // clients (so different computers are far less
            // likely to generate the same id)
              fingerprint = api.fingerprint(),

            // Grab some more chars from Math.random()
              random = randomBlock() + randomBlock();

            counter = pad(safeCounter().toString(base), blockSize);

            return (letter + timestamp + counter + fingerprint + random);
          };

        api.slug = function slug() {
          var date = new Date().getTime().toString(36),
            counter,
            print = api.fingerprint().slice(0, 1) +
              api.fingerprint().slice(-1),
            random = randomBlock().slice(-2);

          counter = safeCounter().toString(36).slice(-4);

          return date.slice(-2) +
            counter + print + random;
        };

        api.globalCount = function globalCount() {
          // We want to cache the results of this
          var cache = (function calc() {
            var i,
              count = 0;

            for (i in window) {
              count++;
            }

            return count;
          }());

          api.globalCount = function () {
            return cache;
          };
          return cache;
        };

        api.fingerprint = function browserPrint() {
          return pad((navigator.mimeTypes.length +
            navigator.userAgent.length).toString(36) +
            api.globalCount().toString(36), 4);
        };

        // don't change anything from here down.
        if (app.register) {
          app.register(namespace, api);
        } else if (typeof module !== 'undefined') {
          module.exports = api;
        } else {
          app[namespace] = api;
        }

      }(this.applitude || this));

    }, {}
  ],
  29: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      var reVariable = /\{\{\s*([^\}]+?)\s*\}\}/;
      var mods = require('./mods');

      /**
       # formatter

       This is a simple library designed to do one thing and one thing only -
       replace variables in strings with variable values.  It is built in such a
       way that the formatter strings are parsed and you are provided with a
       function than can efficiently be called to provide the custom output.

       ## Example Usage

       <<< examples/likefood.js

       __NOTE__: Formatter is not designed to be a templating library and if
       you are already using something like Handlebars or
       [hogan](https://github.com/twitter/hogan.js) in your library or application
       stack consider using them instead.

       ## Using named variables

       In the examples above we saw how the formatter can be used to replace
       function arguments in a formatter string.  We can also set up a formatter
       to use particular key values from an input string instead if that is more
       suitable:

       <<< examples/likefood-named.js

       ## Nested Property Values

       Since version `0.1.0` you can also access nested property values, as you
       can with templates like handlebars.

       ## Partial Execution

       Since version `0.3.x` formatter also supports partial execution when using
       indexed arguments (e.g. `{{ 0 }}`, `{{ 1 }}`, etc).  For example:

       <<< examples/partial.js

       In the case above, the original formatter function returned by `formatter`
       did not receive enough values to resolve all the required variables.  As
       such it returned a function ready to accept the remaining values.

       Once all values have been received the output will be generated.

       ## Performance

       I've done some
       [performance benchmarks](http://jsperf.com/formatter-performance) and
       formatter is faster than handlebars, but that isn't surprising as it is far
       simpler and doesn't have the smarts of HBS.  The test is really there to
       ensure that I didn't do anything too silly...

       Additionally, it should be noted that using formatter is 100% slower than
       concatenating strings, so don't use it where performance is critical.
       Do use it where not repeating yourself is.
       **/

      var formatter = module.exports = function (format, opts) {
        // extract the matches from the string
        var parts = [];
        var output = [];
        var chunk;
        var varname;
        var varParts;
        var match = reVariable.exec(format);
        var isNumeric;
        var outputIdx = 0;
        var ignoreNumeric = (opts || {}).ignoreNumeric;

        while (match) {
          // get the prematch chunk
          chunk = format.slice(0, match.index);

          // if we have a valid chunk, add it to the parts
          if (chunk) {
            output[outputIdx++] = chunk;
          }

          varParts = match[1].split(/\s*\|\s*/);
          match[1] = varParts[0];

          // extract the varname
          varname = parseInt(match[1], 10);
          isNumeric = !isNaN(varname);

          // if this is a numeric replacement expression, and we are ignoring
          // those expressions then pass it through to the output
          if (ignoreNumeric && isNumeric) {
            output[outputIdx++] = match[0];
          }
          // otherwise, handle normally
          else {
            // extract the expression and add it as a function
            parts[parts.length] = {
              idx: (outputIdx++),
              numeric: isNumeric,
              varname: isNumeric ? varname : match[1],
              modifiers: varParts.length > 1 ? createModifiers(varParts.slice(1)) : []
            };
          }

          // remove this matched chunk and replacer from the string
          format = format.slice(match.index + match[0].length);

          // check for the next match
          match = reVariable.exec(format);
        }

        // if we still have some of the format string remaining, add it to the list
        if (format) {
          output[outputIdx++] = format;
        }

        return collect(parts, output);
      };

      formatter.error = function (message) {
        // create the format
        var format = formatter(message);

        return function (err) {
          var output;

          // if no error has been supplied, then pass it straight through
          if (!err) {
            return;
          }

          output = new Error(
            format.apply(null, Array.prototype.slice.call(arguments, 1)));

          output._original = err;

          // return the new error
          return output;
        };
      };

      function collect(parts, resolved, indexShift) {
        // default optionals
        indexShift = indexShift || 0;

        return function () {
          var output = [].concat(resolved);
          var unresolved;
          var ii;
          var part;
          var partIdx;
          var propNames;
          var val;
          var numericResolved = [];

          // find the unresolved parts
          unresolved = parts.filter(function (part) {
            return typeof output[part.idx] == 'undefined';
          });

          // initialise the counter
          ii = unresolved.length;

          // iterate through the unresolved parts and attempt to resolve the value
          for (; ii--;) {
            part = unresolved[ii];

            if (typeof part == 'object') {
              // if this is a numeric part, this is a simple index lookup
              if (part.numeric) {
                partIdx = part.varname - indexShift;
                if (arguments.length > partIdx) {
                  output[part.idx] = arguments[partIdx];
                  if (numericResolved.indexOf(part.varname) < 0) {
                    numericResolved[numericResolved.length] = part.varname;
                  }
                }
              }
              // otherwise, we are doing a recursive property search
              else if (arguments.length > 0) {
                propNames = (part.varname || '').split('.');

                // initialise the output from the last valid argument
                output[part.idx] = (arguments[arguments.length - 1] || {});
                while (output[part.idx] && propNames.length > 0) {
                  val = output[part.idx][propNames.shift()];
                  output[part.idx] = typeof val != 'undefined' ? val : '';
                }
              }

              // if the output was resolved, then apply the modifier
              if (typeof output[part.idx] != 'undefined' && part.modifiers) {
                output[part.idx] = applyModifiers(part.modifiers, output[part.idx]);
              }
            }
          }

          // reasses unresolved (only caring about numeric parts)
          unresolved = parts.filter(function (part) {
            return part.numeric && typeof output[part.idx] == 'undefined';
          });

          // if we have no unresolved parts, then return the value
          if (unresolved.length === 0) {
            return output.join('');
          }

          // otherwise, return the collect function again
          return collect(
            parts,
            output,
            indexShift + numericResolved.length
          );
        };
      }

      function applyModifiers(modifiers, value) {
        // if we have modifiers, then tweak the output
        for (var ii = 0, count = modifiers.length; ii < count; ii++) {
          value = modifiers[ii](value);
        }

        return value;
      }

      function createModifiers(modifierStrings) {
        var modifiers = [];
        var parts;
        var fn;

        for (var ii = 0, count = modifierStrings.length; ii < count; ii++) {
          parts = modifierStrings[ii].split(':');
          fn = mods[parts[0].toLowerCase()];

          if (fn) {
            modifiers[modifiers.length] = fn.apply(null, parts.slice(1));
          }
        }

        return modifiers;
      }

    }, {
      "./mods": 30
    }
  ],
  30: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      /**
       ## Modifiers

       **/

      /**
       ### Length Modifier (len)

       The length modifier is used to ensure that a string is exactly the length specified.  The string is sliced to the required max length, and then padded out with spaces (or a specified character) to meet the required length.

       ```js
       // pad the string test to 10 characters
       formatter('{{ 0|len:10 }}')('test');   // 'test      '

       // pad the string test to 10 characters, using a as the padding character
       formatter('{{ 0|len:10:a }}')('test'); // 'testaaaaaa'
       ```
       **/
      exports.len = function (length, padder) {
        var testInt = parseInt(padder, 10);
        var isNumber;

        // default the padder to a space
        padder = (!isNaN(testInt)) ? testInt : (padder || ' ');

        // check whether we have a number for padding (we will pad left if we do)
        isNumber = typeof padder == 'number';

        return function (input) {
          var output = input.toString().slice(0, length);

          // pad the string to the required length
          while (output.length < length) {
            output = isNumber ? padder + output : output + padder;
          }

          return output;
        };
      };
    }, {}
  ],
  31: [
    function (require, module, exports) {
      /* jshint node: true */
      /* global document, location, Primus: false */
      'use strict';

      var reTrailingSlash = /\/$/;
      var formatter = require('formatter');
      var primusUrl = formatter('{{ signalhost }}{{ primusPath }}');

      /**
       ### loadPrimus(signalhost, opts?, callback)

       This is a convenience function that is patched into the signaller to assist
       with loading the `primus.js` client library from an `rtc-switchboard`
       signaling server.

       In the case that you wish to load `primus.js` from a location other than
       the default location of `{{ signalhost }}/rtc.io/primus.js` you can
       provide an options object which allows for the following customizations:

       - `primusPath` (default: `/rtc.io/primus.js`)

       The path at which the `primus.js` file can be found on the signalhost.

       __NOTE:__ The above options are passed through when creating a
       signaller object, and thus packages such as
       [rtc-quickconnect](https://github.com/rtc-io/rtc-quickconnect)
       will allow you to make the customisation with it's top level
       options also.

       **/
      module.exports = function (signalhost, opts, callback) {
        var anchor = document.createElement('a');
        var script;
        var scriptSrc;

        if (typeof opts == 'function') {
          callback = opts;
          opts = {};
        }

        // initialise the anchor with the signalhost
        anchor.href = signalhost;

        // initialise the script location
        scriptSrc = primusUrl({
          signalhost: signalhost.replace(reTrailingSlash, ''),
          primusPath: (opts || {}).primusPath || '/rtc.io/primus.js' //'/rtc.io/primus.js'
        });

        // look for the script first
        script = document.querySelector('script[src="' + scriptSrc + '"]');

        // if we found, the script trigger the callback immediately
        if (script && typeof Primus != 'undefined') {
          return callback(null, Primus);
        }
        // otherwise, if the script exists but Primus is not loaded,
        // then wait for the load
        else if (script) {
          script.addEventListener('load', function () {
            callback(null, Primus);
          });

          return;
        }

        // otherwise create the script and load primus
        script = document.createElement('script');
        script.src = scriptSrc;

        script.onerror = callback;
        script.addEventListener('load', function () {
          // if we have a signalhost that is not basepathed at /
          // then tweak the primus prototype
          if (anchor.pathname !== '/') {
            Primus.prototype.pathname = anchor.pathname.replace(reTrailingSlash, '') +
              Primus.prototype.pathname;
          }

          callback(null, Primus);
        });

        document.body.appendChild(script);
      };

    }, {
      "formatter": 29
    }
  ],
  32: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      var debug = require('cog/logger')('rtc-signaller');
      var jsonparse = require('cog/jsonparse');

      /**
       ### signaller process handling

       When a signaller's underling messenger emits a `data` event this is
       delegated to a simple message parser, which applies the following simple
       logic:

       - Is the message a `/to` message. If so, see if the message is for this
       signaller (checking the target id - 2nd arg).  If so pass the
       remainder of the message onto the standard processing chain.  If not,
       discard the message.

       - Is the message a command message (prefixed with a forward slash). If so,
       look for an appropriate message handler and pass the message payload on
       to it.

       - Finally, does the message match any patterns that we are listening for?
       If so, then pass the entire message contents onto the registered handler.
       **/
      module.exports = function (signaller, opts) {
        var handlers = require('./handlers')(signaller, opts);

        function sendEvent(parts, srcState, data) {
          // initialise the event name
          var evtName = parts[0].slice(1);

          // convert any valid json objects to json
          var args = parts.slice(2).map(jsonparse);

          signaller.apply(
            signaller, [evtName].concat(args).concat([srcState, data])
          );
        }

        return function (originalData) {
          var data = originalData;
          var isMatch = true;
          var parts;
          var handler;
          var srcData;
          var srcState;
          var isDirectMessage = false;

          // force the id into string format so we can run length and comparison tests on it
          var id = signaller.id + '';
          debug('signaller ' + id + ' received data: ' + originalData);

          // process /to messages
          if (data.slice(0, 3) === '/to') {
            isMatch = data.slice(4, id.length + 4) === id;
            if (isMatch) {
              parts = data.slice(5 + id.length).split('|').map(jsonparse);

              // get the source data
              isDirectMessage = true;

              // extract the vector clock and update the parts
              parts = parts.map(jsonparse);
            }
          }

          // if this is not a match, then bail
          if (!isMatch) {
            return;
          }

          // chop the data into parts
          parts = parts || data.split('|').map(jsonparse);

          // if we have a specific handler for the action, then invoke
          if (typeof parts[0] == 'string') {
            // extract the metadata from the input data
            srcData = parts[1];

            // if we got data from ourself, then this is pretty dumb
            // but if we have then throw it away
            if (srcData && srcData.id === signaller.id) {
              return console.warn('got data from ourself, discarding');
            }

            // get the source state
            srcState = signaller.peers.get(srcData && srcData.id) || srcData;

            // handle commands
            if (parts[0].charAt(0) === '/') {
              // look for a handler for the message type
              handler = handlers[parts[0].slice(1)];

              if (typeof handler == 'function') {
                handler(
                  parts.slice(2),
                  parts[0].slice(1),
                  srcData,
                  srcState,
                  isDirectMessage
                );
              } else {
                sendEvent(parts, srcState, originalData);
              }
            }
            // otherwise, emit data
            else {
              signaller(
                'data',
                parts.slice(0, 1).concat(parts.slice(2)),
                srcData,
                srcState,
                isDirectMessage
              );
            }
          }
        };
      };

    }, {
      "./handlers": 25,
      "cog/jsonparse": 13,
      "cog/logger": 14
    }
  ],
  33: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      var debug = require('cog/logger')('rtc/cleanup');

      var CANNOT_CLOSE_STATES = [
        'closed'
      ];

      var EVENTS_DECOUPLE_BC = [
        'addstream',
        'datachannel',
        'icecandidate',
        'negotiationneeded',
        'removestream',
        'signalingstatechange'
      ];

      var EVENTS_DECOUPLE_AC = [
        'iceconnectionstatechange'
      ];

      /**
       ### rtc-tools/cleanup

       ```
       cleanup(pc)
       ```

       The `cleanup` function is used to ensure that a peer connection is properly
       closed and ready to be cleaned up by the browser.

       **/
      module.exports = function (pc) {
        // see if we can close the connection
        var currentState = pc.iceConnectionState;
        var canClose = CANNOT_CLOSE_STATES.indexOf(currentState) < 0;

        function decouple(events) {
          events.forEach(function (evtName) {
            if (pc['on' + evtName]) {
              pc['on' + evtName] = null;
            }
          });
        }

        // decouple "before close" events
        decouple(EVENTS_DECOUPLE_BC);

        if (canClose) {
          debug('attempting connection close, current state: ' + pc.iceConnectionState);
          pc.close();
        }

        // remove the event listeners
        // after a short delay giving the connection time to trigger
        // close and iceconnectionstatechange events
        setTimeout(function () {
          decouple(EVENTS_DECOUPLE_AC);
        }, 100);
      };

    }, {
      "cog/logger": 14
    }
  ],
  34: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      var mbus = require('mbus');
      var queue = require('rtc-taskqueue');
      var cleanup = require('./cleanup');
      var monitor = require('./monitor');
      var detect = require('./detect');
      var findPlugin = require('rtc-core/plugin');
      var CLOSED_STATES = ['closed', 'failed'];

      // track the various supported CreateOffer / CreateAnswer contraints
      // that we recognize and allow
      var OFFER_ANSWER_CONSTRAINTS = [
        'offerToReceiveVideo',
        'offerToReceiveAudio',
        'voiceActivityDetection',
        'iceRestart'
      ];

      /**
       ### rtc-tools/couple

       #### couple(pc, targetId, signaller, opts?)

       Couple a WebRTC connection with another webrtc connection identified by
       `targetId` via the signaller.

       The following options can be provided in the `opts` argument:

       - `sdpfilter` (default: null)

       A simple function for filtering SDP as part of the peer
       connection handshake (see the Using Filters details below).

       ##### Example Usage

       ```js
       var couple = require('rtc/couple');

       couple(pc, '54879965-ce43-426e-a8ef-09ac1e39a16d', signaller);
       ```

       ##### Using Filters

       In certain instances you may wish to modify the raw SDP that is provided
       by the `createOffer` and `createAnswer` calls.  This can be done by passing
       a `sdpfilter` function (or array) in the options.  For example:

       ```js
       // run the sdp from through a local tweakSdp function.
       couple(pc, '54879965-ce43-426e-a8ef-09ac1e39a16d', signaller, {
    sdpfilter: tweakSdp
  });
       ```

       **/

      function couple(pc, targetId, signaller, opts) {
        var debugLabel = (opts || {}).debugLabel || 'rtc';
        var debug = require('cog/logger')(debugLabel + '/couple');

        // create a monitor for the connection
        var mon = monitor(pc, targetId, signaller, (opts || {}).logger);
        var emit = mbus('', mon);
        var queuedCandidates = [];
        var sdpFilter = (opts || {}).sdpfilter;
        var reactive = (opts || {}).reactive;
        var offerTimeout;
        var endOfCandidates = true;
        var plugin = findPlugin((opts || {}).plugins);

        // configure the time to wait between receiving a 'disconnect'
        // iceConnectionState and determining that we are closed
        var disconnectTimeout = (opts || {}).disconnectTimeout || 10000;
        var disconnectTimer;

        // initilaise the negotiation helpers
        var isMaster = signaller.isMaster(targetId);

        // initialise the processing queue (one at a time please)
        var q = queue(pc, opts);

        function createOrRequestOffer() {
          if (!isMaster) {
            return signaller.to(targetId).send('/negotiate');
          }

          q.createOffer();
        }

        function debounceOffer() {
          debug('debouncing offer');
          clearTimeout(offerTimeout);
          offerTimeout = setTimeout(q.createOffer, 50);
        }

        function decouple() {
          debug('decoupling ' + signaller.id + ' from ' + targetId);

          // stop the monitor
          //     mon.removeAllListeners();
          mon.stop();

          // cleanup the peerconnection
          cleanup(pc);

          // remove listeners
          signaller.removeListener('sdp', handleSdp);
          signaller.removeListener('candidate', handleCandidate);
          signaller.removeListener('negotiate', handleNegotiateRequest);
        }

        function generateConstraints(methodName) {
          var constraints = {};

          function reformatConstraints() {
            var tweaked = {};

            Object.keys(constraints).forEach(function (param) {
              var sentencedCased = param.charAt(0).toUpperCase() + param.substr(1);
              tweaked[sentencedCased] = constraints[param];
            });

            // update the constraints to match the expected format
            constraints = {
              mandatory: tweaked
            };
          }

          // TODO: customize behaviour based on offer vs answer

          // pull out any valid
          OFFER_ANSWER_CONSTRAINTS.forEach(function (param) {
            var sentencedCased = param.charAt(0).toUpperCase() + param.substr(1);

            // if we have no opts, do nothing
            if (!opts) {
              return;
            }
            // if the parameter has been defined, then add it to the constraints
            else if (opts[param] !== undefined) {
              constraints[param] = opts[param];
            }
            // if the sentenced cased version has been added, then use that
            else if (opts[sentencedCased] !== undefined) {
              constraints[param] = opts[sentencedCased];
            }
          });

          // TODO: only do this for the older browsers that require it
          reformatConstraints();

          return constraints;
        }

        function handleCandidate(data) {
          q.addIceCandidate(data);
        }

        function handleSdp(sdp, src) {
          emit('sdp.remote', sdp);

          // if the source is unknown or not a match, then don't process
          if ((!src) || (src.id !== targetId)) {
            return;
          }

          q.setRemoteDescription(sdp);
        }

        function handleConnectionClose() {
          debug('captured pc close, iceConnectionState = ' + pc.iceConnectionState);
          decouple();
        }

        function handleDisconnect() {
          debug('captured pc disconnect, monitoring connection status');

          // start the disconnect timer
          disconnectTimer = setTimeout(function () {
            debug('manually closing connection after disconnect timeout');
            pc.close();
          }, disconnectTimeout);

          mon.on('statechange', handleDisconnectAbort);
        }

        function handleDisconnectAbort() {
          debug('connection state changed to: ' + pc.iceConnectionState);
          resetDisconnectTimer();

          // if we have a closed or failed status, then close the connection
          if (CLOSED_STATES.indexOf(pc.iceConnectionState) >= 0) {
            return mon('closed');
          }

          mon.once('disconnect', handleDisconnect);
        };

        function handleLocalCandidate(evt) {
          if (evt.candidate) {
            resetDisconnectTimer();

            emit('ice.local', evt.candidate);
            signaller.to(targetId).send('/candidate', evt.candidate);
            endOfCandidates = false;
          } else if (!endOfCandidates) {
            endOfCandidates = true;
            emit('ice.gathercomplete');
            signaller.to(targetId).send('/endofcandidates', {});
          }
        }

        function handleNegotiateRequest(src) {
          if (src.id === targetId) {
            emit('negotiate.request', src.id);
            debounceOffer();
          }
        }

        function resetDisconnectTimer() {
          mon.off('statechange', handleDisconnectAbort);

          // clear the disconnect timer
          debug('reset disconnect timer, state: ' + pc.iceConnectionState);
          clearTimeout(disconnectTimer);
        }

        // when regotiation is needed look for the peer
        if (reactive) {
          pc.onnegotiationneeded = function () {
            emit('negotiate.renegotiate');
            createOrRequestOffer();
          };
        }

        pc.onicecandidate = handleLocalCandidate;

        // when the task queue tells us we have sdp available, send that over the wire
        q.on('sdp.local', function (desc) {
          signaller.to(targetId).send('/sdp', desc);
        });

        // when we receive sdp, then
        signaller.on('sdp', handleSdp);
        signaller.on('candidate', handleCandidate);

        // if this is a master connection, listen for negotiate events
        if (isMaster) {
          signaller.on('negotiate', handleNegotiateRequest);
        }

        // when the connection closes, remove event handlers
        mon.once('closed', handleConnectionClose);
        mon.once('disconnected', handleDisconnect);

        // patch in the create offer functions
        mon.createOffer = createOrRequestOffer;

        return mon;
      }

      module.exports = couple;

    }, {
      "./cleanup": 33,
      "./detect": 35,
      "./monitor": 38,
      "cog/logger": 14,
      "mbus": 16,
      "rtc-core/plugin": 21,
      "rtc-taskqueue": 39
    }
  ],
  35: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      /**
       ### rtc-tools/detect

       Provide the [rtc-core/detect](https://github.com/rtc-io/rtc-core#detect)
       functionality.
       **/
      module.exports = require('rtc-core/detect');

    }, {
      "rtc-core/detect": 19
    }
  ],
  36: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      var debug = require('cog/logger')('generators');
      var detect = require('./detect');
      var defaults = require('cog/defaults');

      var mappings = {
        create: {
          dtls: function (c) {
            if (!detect.moz) {
              c.optional = (c.optional || []).concat({
                DtlsSrtpKeyAgreement: true
              });
            }
          }
        }
      };

      /**
       ### rtc-tools/generators

       The generators package provides some utility methods for generating
       constraint objects and similar constructs.

       ```js
       var generators = require('rtc/generators');
       ```

       **/

      /**
       #### generators.config(config)

       Generate a configuration object suitable for passing into an W3C
       RTCPeerConnection constructor first argument, based on our custom config.

       In the event that you use short term authentication for TURN, and you want
       to generate new `iceServers` regularly, you can specify an iceServerGenerator
       that will be used prior to coupling. This generator should return a fully
       compliant W3C (RTCIceServer dictionary)[http://www.w3.org/TR/webrtc/#idl-def-RTCIceServer].

       If you pass in both a generator and iceServers, the iceServers _will be
       ignored and the generator used instead.
       **/

      var iceServerGenerator = function () {
        return [];
      }

      exports.config = function (config) {
        var iceServerGenerator = (config || {}).iceServerGenerator;

        return defaults({}, config, {
          iceServers: typeof iceServerGenerator == 'function' ? iceServerGenerator() : []
        });
      };

      /**
       #### generators.connectionConstraints(flags, constraints)

       This is a helper function that will generate appropriate connection
       constraints for a new `RTCPeerConnection` object which is constructed
       in the following way:

       ```js
       var conn = new RTCPeerConnection(flags, constraints);
       ```

       In most cases the constraints object can be left empty, but when creating
       data channels some additional options are required.  This function
       can generate those additional options and intelligently combine any
       user defined constraints (in `constraints`) with shorthand flags that
       might be passed while using the `rtc.createConnection` helper.
       **/
      exports.connectionConstraints = function (flags, constraints) {
        var generated = {};
        var m = mappings.create;
        var out;

        // iterate through the flags and apply the create mappings
        Object.keys(flags || {}).forEach(function (key) {
          if (m[key]) {
            m[key](generated);
          }
        });

        // generate the connection constraints
        out = defaults({}, constraints, generated);
        debug('generated connection constraints: ', out);

        return out;
      };

    }, {
      "./detect": 35,
      "cog/defaults": 10,
      "cog/logger": 14
    }
  ],
  37: [
    function (require, module, exports) {
      /* jshint node: true */

      'use strict';

      /**
       # rtc-tools

       The `rtc-tools` module does most of the heavy lifting within the
       [rtc.io](http://rtc.io) suite.  Primarily it handles the logic of coupling
       a local `RTCPeerConnection` with it's remote counterpart via an
       [rtc-signaller](https://github.com/rtc-io/rtc-signaller) signalling
       channel.

       ## Getting Started

       If you decide that the `rtc-tools` module is a better fit for you than either
       [rtc-quickconnect](https://github.com/rtc-io/rtc-quickconnect) or
       [rtc-glue](https://github.com/rtc-io/rtc-glue) then the code snippet below
       will provide you a guide on how to get started using it in conjunction with
       the [rtc-signaller](https://github.com/rtc-io/rtc-signaller) and
       [rtc-media](https://github.com/rtc-io/rtc-media) modules:

       <<< examples/getting-started.js

       This code definitely doesn't cover all the cases that you need to consider
       (i.e. peers leaving, etc) but it should demonstrate how to:

       1. Capture video and add it to a peer connection
       2. Couple a local peer connection with a remote peer connection
       3. Deal with the remote steam being discovered and how to render
       that to the local interface.

       ## Reference

       **/

      var gen = require('./generators');

      // export detect
      var detect = exports.detect = require('./detect');
      var findPlugin = require('rtc-core/plugin');

      // export cog logger for convenience
      exports.logger = require('cog/logger');

      // export peer connection
      var RTCPeerConnection =
        exports.RTCPeerConnection = detect('RTCPeerConnection');

      // add the couple utility
      exports.couple = require('./couple');

      /**
       ### createConnection

       ```
       createConnection(opts?, constraints?) => RTCPeerConnection
       ```

       Create a new `RTCPeerConnection` auto generating default opts as required.

       ```js
       var conn;

       // this is ok
       conn = rtc.createConnection();

       // and so is this
       conn = rtc.createConnection({
    iceServers: []
  });
       ```
       **/
      exports.createConnection = function (opts, constraints) {
        var plugin = findPlugin((opts || {}).plugins);

        // generate the config based on options provided
        var config = gen.config(opts);

        // generate appropriate connection constraints
        var constraints = gen.connectionConstraints(opts, constraints);

        if (plugin && typeof plugin.createConnection == 'function') {
          return plugin.createConnection(config, constraints);
        } else {
          return new ((opts || {}).RTCPeerConnection || RTCPeerConnection)(
            config, constraints
          );
        }
      };

    }, {
      "./couple": 34,
      "./detect": 35,
      "./generators": 36,
      "cog/logger": 14,
      "rtc-core/plugin": 21
    }
  ],
  38: [
    function (require, module, exports) {
      /* jshint node: true */
      'use strict';

      var mbus = require('mbus');

      // define some state mappings to simplify the events we generate
      var stateMappings = {
        completed: 'connected'
      };

      // define the events that we need to watch for peer connection
      // state changes
      var peerStateEvents = [
        'signalingstatechange',
        'iceconnectionstatechange',
      ];

      /**
       ### rtc-tools/monitor

       ```
       monitor(pc, targetId, signaller, parentBus) => mbus
       ```

       The monitor is a useful tool for determining the state of `pc` (an
       `RTCPeerConnection`) instance in the context of your application. The
       monitor uses both the `iceConnectionState` information of the peer
       connection and also the various
       [signaller events](https://github.com/rtc-io/rtc-signaller#signaller-events)
       to determine when the connection has been `connected` and when it has
       been `disconnected`.

       A monitor created `mbus` is returned as the result of a
       [couple](https://github.com/rtc-io/rtc#rtccouple) between a local peer
       connection and it's remote counterpart.

       **/
      module.exports = function (pc, targetId, signaller, parentBus) {
        var monitor = mbus('', parentBus);
        var state;

        function checkState() {
          var newState = getMappedState(pc.iceConnectionState);

          // flag the we had a state change
          monitor('statechange', pc, newState);

          // if the active state has changed, then send the appopriate message
          if (state !== newState) {
            monitor(newState);
            state = newState;
          }
        }

        function handleClose() {
          monitor('closed');
        }

        function handlePeerLeave(peerId) {
          // if the peer leaving is not the peer we are connected to
          // then we aren't interested
          if (peerId !== targetId) {
            return;
          }

          // trigger a closed event
          monitor('closed');
        }

        pc.addEventListener('close', handleClose);
        peerStateEvents.forEach(function (evtName) {
          pc.addEventListener(evtName, checkState);
        });

        monitor.stop = function () {
          pc.removeEventListener('close', handleClose);
          peerStateEvents.forEach(function (evtName) {
            pc.removeEventListener(evtName, checkState);
          });

          // remove the peer:leave listener
          if (signaller && typeof signaller.removeListener == 'function') {
            signaller.removeListener('peer:leave', handlePeerLeave);
          }
        };

        monitor.checkState = checkState;

        // if we haven't been provided a valid peer connection, abort
        if (!pc) {
          return monitor;
        }

        // determine the initial is active state
        state = getMappedState(pc.iceConnectionState);

        // if we've been provided a signaller, then watch for peer:leave events
        if (signaller && typeof signaller.on == 'function') {
          signaller.on('peer:leave', handlePeerLeave);
        }

        return monitor;
      };

      /* internal helpers */

      function getMappedState(state) {
        return stateMappings[state] || state;
      }

    }, {
      "mbus": 16
    }
  ],
  39: [
    function (require, module, exports) {
      var detect = require('rtc-core/detect');
      var zip = require('whisk/zip');
      var findPlugin = require('rtc-core/plugin');
      var PriorityQueue = require('priorityqueuejs');

      // some validation routines
      var checkCandidate = require('rtc-validator/candidate');

      // the sdp cleaner
      var sdpclean = require('rtc-sdpclean');

      var PRIORITY_LOW = 100;
      var PRIORITY_WAIT = 1000;

      // priority order (lower is better)
      var DEFAULT_PRIORITIES = [
        'candidate',
        'setLocalDescription',
        'setRemoteDescription',
        'createAnswer',
        'createOffer'
      ];

      // define event mappings
      var METHOD_EVENTS = {
        setLocalDescription: 'setlocaldesc',
        setRemoteDescription: 'setremotedesc',
        createOffer: 'offer',
        createAnswer: 'answer'
      };

      /**
       # rtc-taskqueue

       This is a package that assists with applying actions to an `RTCPeerConnection`
       in as reliable order as possible. It is primarily used by the coupling logic
       of the [`rtc-tools`](https://github.com/rtc-io/rtc-tools).

       ## Example Usage

       To be completed
       **/
      module.exports = function (pc, opts) {
        // create the task queue
        var queue = new PriorityQueue(orderTasks);
        var tq = require('mbus')('', (opts || {}).logger);

        // initialise task importance
        var priorities = (opts || {}).priorities || DEFAULT_PRIORITIES;

        // check for plugin usage
        var plugin = findPlugin((opts || {}).plugins);

        // initialise state tracking
        var checkQueueTimer = 0;
        var currentTask;
        var defaultFail = tq.bind(tq, 'fail');

        // initialise session description and icecandidate objects
        var RTCSessionDescription = (opts || {}).RTCSessionDescription ||
          detect('RTCSessionDescription');

        var RTCIceCandidate = (opts || {}).RTCIceCandidate ||
          detect('RTCIceCandidate');

        function abortQueue(err) {
          console.error(err);
        }

        function applyCandidate(task, next) {
          var candidate;
          var data = task.args[0];

          // we have a null candidate, we have finished gathering candidates
          if (!data.candidate) {
            return next();
          }

          try {
            candidate = createIceCandidate(data);
            pc.addIceCandidate(candidate);
            tq('ice.remote.applied', candidate);
          } catch (e) {
            tq('ice.remote.invalid', candidate);
            return next(e);
          }

          next();
        }

        function checkQueue() {
          // peek at the next item on the queue
          var next = (!queue.isEmpty()) && (!currentTask) && queue.peek();
          var ready = next && testReady(next);
          var retry = (!queue.isEmpty()) && isNotClosed(pc);

          //     debug('checking queue: ', currentTask, next && next.name, ready);

          // if we don't have a task ready, then abort
          if (!ready) {
            return retry && triggerQueueCheck(100);
          }

          // update the current task (dequeue)
          currentTask = queue.deq();

          // process the task
          currentTask.fn(currentTask, function (err) {
            var fail = currentTask.fail || defaultFail;
            var pass = currentTask.pass;
            var taskName = currentTask.name;

            // unset the current task
            currentTask = null;

            // if errored, fail
            if (err) {
              console.error(taskName + ' task failed: ', err);
              return fail(err);
            }

            if (typeof pass == 'function') {
              pass.apply(null, [].slice.call(arguments, 1));
            }

            triggerQueueCheck();
          });
        }

        function cleansdp(desc) {
          // ensure we have clean sdp
          var sdpErrors = [];
          var sdp = desc && sdpclean(desc.sdp, {
              collector: sdpErrors
            });

          // if we don't have a match, log some info
          if (desc && sdp !== desc.sdp) {
            console.info('invalid lines removed from sdp: ', sdpErrors);
            desc.sdp = sdp;
          }

          return desc;
        }

        function completeConnection() {
          if (pc.signalingState === 'have-remote-offer') {
            return tq.createAnswer();
          }
        }

        function createIceCandidate(data) {
          if (plugin && typeof plugin.createIceCandidate == 'function') {
            return plugin.createIceCandidate(data);
          }

          return new RTCIceCandidate(data);
        }

        function createSessionDescription(data) {
          if (plugin && typeof plugin.createSessionDescription == 'function') {
            return plugin.createSessionDescription(data);
          }

          return new RTCSessionDescription(data);
        }

        function emitSdp(sdp) {
          tq('sdp.local', pc.localDescription);
        }

        function enqueue(name, handler, opts) {
          return function () {
            var args = [].slice.call(arguments);

            if (opts && typeof opts.processArgs == 'function') {
              args = args.map(opts.processArgs);
            }

            queue.enq({
              args: args,
              name: name,
              fn: handler,

              // initilaise any checks that need to be done prior
              // to the task executing
              checks: [isNotClosed].concat((opts || {}).checks || []),

              // initialise the pass and fail handlers
              pass: (opts || {}).pass,
              fail: (opts || {}).fail
            });

            triggerQueueCheck();
          };
        }

        function execMethod(task, next) {
          var fn = pc[task.name];
          var eventName = METHOD_EVENTS[task.name] || (task.name || '').toLowerCase();

          function fail(err) {
            tq.apply(tq, ['negotiate.error', task.name, err].concat(task.args));
            next(err);
          }

          function success() {
            tq.apply(tq, [
              ['negotiate', eventName, 'ok'], task.name
            ].concat(task.args));
            next.apply(null, [null].concat([].slice.call(arguments)));
          }

          if (typeof fn != 'function') {
            return next(new Error('cannot call "' + task.name + '" on RTCPeerConnection'));
          }

          // invoke the function
          tq.apply(tq, ['negotiate.' + eventName].concat(task.args));
          fn.apply(pc, task.args.concat([success, fail]));
        }

        function extractCandidateEventData(data) {
          // if we have been passed an event, then extract the candidate from the data
          if (data.srcElement && data.candidate) {
            data = data.candidate;
          }

          return data;
        }

        function hasLocalOrRemoteDesc(pc, task) {
          return pc.localDescription !== null || pc.remoteDescription !== null;
        }

        function isNotNegotiating(pc) {
          return pc.signalingState !== 'have-local-offer';
        }

        function isNotClosed(pc) {
          return pc.signalingState !== 'closed';
        }

        function isStable(pc) {
          return pc.signalingState === 'stable';
        }

        function isValidCandidate(pc, data) {
          return checkCandidate(data.args[0]).length === 0;
        }

        function orderTasks(a, b) {
          // apply each of the checks for each task
          var tasks = [a, b];
          var readiness = tasks.map(testReady);
          var taskPriorities = tasks.map(zip(readiness)).map(function (args) {
            var priority = priorities.indexOf(args[0].name);

            return args[1] ? (priority >= 0 ? priority : PRIORITY_LOW) : PRIORITY_WAIT;
          });

          return taskPriorities[1] - taskPriorities[0];
        }

        // check whether a task is ready (does it pass all the checks)

        function testReady(task) {
          return (task.checks || []).reduce(function (memo, check) {
            return memo && check(pc, task);
          }, true);
        }

        function triggerQueueCheck(wait) {
          clearTimeout(checkQueueTimer);
          checkQueueTimer = setTimeout(checkQueue, wait || 5);
        }

        // patch in the queue helper methods
        tq.addIceCandidate = enqueue('addIceCandidate', applyCandidate, {
          processArgs: extractCandidateEventData,
          checks: [hasLocalOrRemoteDesc, isValidCandidate]
        });

        tq.setLocalDescription = enqueue('setLocalDescription', execMethod, {
          processArgs: cleansdp,
          pass: emitSdp
        });

        tq.setRemoteDescription = enqueue('setRemoteDescription', execMethod, {
          processArgs: createSessionDescription,
          pass: completeConnection
        });

        tq.createOffer = enqueue('createOffer', execMethod, {
          checks: [isNotNegotiating],
          pass: tq.setLocalDescription
        });

        tq.createAnswer = enqueue('createAnswer', execMethod, {
          pass: tq.setLocalDescription
        });

        return tq;
      };

    }, {
      "mbus": 16,
      "priorityqueuejs": 40,
      "rtc-core/detect": 19,
      "rtc-core/plugin": 21,
      "rtc-sdpclean": 41,
      "rtc-validator/candidate": 42,
      "whisk/zip": 43
    }
  ],
  40: [
    function (require, module, exports) {
      /**
       * Expose `PriorityQueue`.
       */
      module.exports = PriorityQueue;

      /**
       * Initializes a new empty `PriorityQueue` with the given `comparator(a, b)`
       * function, uses `.DEFAULT_COMPARATOR()` when no function is provided.
       *
       * The comparator function must return a positive number when `a > b`, 0 when
       * `a == b` and a negative number when `a < b`.
       *
       * @param {Function}
       * @return {PriorityQueue}
       * @api public
       */

      function PriorityQueue(comparator) {
        this._comparator = comparator || PriorityQueue.DEFAULT_COMPARATOR;
        this._elements = [];
      }

      /**
       * Compares `a` and `b`, when `a > b` it returns a positive number, when
       * it returns 0 and when `a < b` it returns a negative number.
       *
       * @param {String|Number} a
       * @param {String|Number} b
       * @return {Number}
       * @api public
       */
      PriorityQueue.DEFAULT_COMPARATOR = function (a, b) {
        if (a instanceof Number && b instanceof Number) {
          return a - b;
        } else {
          a = a.toString();
          b = b.toString();

          if (a == b) return 0;

          return (a > b) ? 1 : -1;
        }
      };

      /**
       * Returns whether the priority queue is empty or not.
       *
       * @return {Boolean}
       * @api public
       */
      PriorityQueue.prototype.isEmpty = function () {
        return this.size() === 0;
      };

      /**
       * Peeks at the top element of the priority queue.
       *
       * @return {Object}
       * @throws {Error} when the queue is empty.
       * @api public
       */
      PriorityQueue.prototype.peek = function () {
        if (this.isEmpty()) throw new Error('PriorityQueue is empty');

        return this._elements[0];
      };

      /**
       * Dequeues the top element of the priority queue.
       *
       * @return {Object}
       * @throws {Error} when the queue is empty.
       * @api public
       */
      PriorityQueue.prototype.deq = function () {
        var first = this.peek();
        var last = this._elements.pop();
        var size = this.size();

        if (size === 0) return first;

        this._elements[0] = last;
        var current = 0;

        while (current < size) {
          var largest = current;
          var left = (2 * current) + 1;
          var right = (2 * current) + 2;

          if (left < size && this._compare(left, largest) > 0) {
            largest = left;
          }

          if (right < size && this._compare(right, largest) > 0) {
            largest = right;
          }

          if (largest === current) break;

          this._swap(largest, current);
          current = largest;
        }

        return first;
      };

      /**
       * Enqueues the `element` at the priority queue and returns its new size.
       *
       * @param {Object} element
       * @return {Number}
       * @api public
       */
      PriorityQueue.prototype.enq = function (element) {
        var size = this._elements.push(element);
        var current = size - 1;

        while (current > 0) {
          var parent = Math.floor((current - 1) / 2);

          if (this._compare(current, parent) < 0) break;

          this._swap(parent, current);
          current = parent;
        }

        return size;
      };

      /**
       * Returns the size of the priority queue.
       *
       * @return {Number}
       * @api public
       */
      PriorityQueue.prototype.size = function () {
        return this._elements.length;
      };

      /**
       *  Iterates over queue elements
       *
       *  @param {Function} fn
       */
      PriorityQueue.prototype.forEach = function (fn) {
        return this._elements.forEach(fn);
      };

      /**
       * Compares the values at position `a` and `b` in the priority queue using its
       * comparator function.
       *
       * @param {Number} a
       * @param {Number} b
       * @return {Number}
       * @api private
       */
      PriorityQueue.prototype._compare = function (a, b) {
        return this._comparator(this._elements[a], this._elements[b]);
      };

      /**
       * Swaps the values at position `a` and `b` in the priority queue.
       *
       * @param {Number} a
       * @param {Number} b
       * @api private
       */
      PriorityQueue.prototype._swap = function (a, b) {
        var aux = this._elements[a];
        this._elements[a] = this._elements[b];
        this._elements[b] = aux;
      };

    }, {}
  ],
  41: [
    function (require, module, exports) {
      var validators = [
        [/^(a\=candidate.*)$/, require('rtc-validator/candidate')]
      ];

      var reSdpLineBreak = /(\r?\n|\\r\\n)/;

      /**
       # rtc-sdpclean

       Remove invalid lines from your SDP.

       ## Why?

       This module removes the occasional "bad egg" that will slip into SDP when it
       is generated by the browser.  In particular these situations are catered for:

       - invalid ICE candidates

       **/
      module.exports = function (input, opts) {
        var lineBreak = detectLineBreak(input);
        var lines = input.split(lineBreak);
        var collector = (opts || {}).collector;

        // filter out invalid lines
        lines = lines.filter(function (line) {
          // iterate through the validators and use the one that matches
          var validator = validators.reduce(function (memo, data, idx) {
            return typeof memo != 'undefined' ? memo : (data[0].exec(line) && {
              line: line.replace(data[0], '$1'),
              fn: data[1]
            });
          }, undefined);

          // if we have a validator, ensure we have no errors
          var errors = validator ? validator.fn(validator.line) : [];

          // if we have errors and an error collector, then add to the collector
          if (collector) {
            errors.forEach(function (err) {
              collector.push(err);
            });
          }

          return errors.length === 0;
        });

        return lines.join(lineBreak);
      };

      function detectLineBreak(input) {
        var match = reSdpLineBreak.exec(input);

        return match && match[0];
      }

    }, {
      "rtc-validator/candidate": 42
    }
  ],
  42: [
    function (require, module, exports) {
      var debug = require('cog/logger')('rtc-validator');
      var rePrefix = /^(?:a=)?candidate:/;
      var reIP = /^(\d+\.){3}\d+$/;

      /*

       validation rules as per:
       http://tools.ietf.org/html/draft-ietf-mmusic-ice-sip-sdp-03#section-8.1

       candidate-attribute   = "candidate" ":" foundation SP component-id SP
       transport SP
       priority SP
       connection-address SP     ;from RFC 4566
       port         ;port from RFC 4566
       SP cand-type
       [SP rel-addr]
       [SP rel-port]
       *(SP extension-att-name SP
       extension-att-value)

       foundation            = 1*32ice-char
       component-id          = 1*5DIGIT
       transport             = "UDP" / transport-extension
       transport-extension   = token              ; from RFC 3261
       priority              = 1*10DIGIT
       cand-type             = "typ" SP candidate-types
       candidate-types       = "host" / "srflx" / "prflx" / "relay" / token
       rel-addr              = "raddr" SP connection-address
       rel-port              = "rport" SP port
       extension-att-name    = token
       extension-att-value   = *VCHAR
       ice-char              = ALPHA / DIGIT / "+" / "/"
       */
      var partValidation = [
        [/.+/, 'invalid foundation component', 'foundation'],
        [/\d+/, 'invalid component id', 'component-id'],
        [/(UDP|TCP)/i, 'transport must be TCP or UDP', 'transport'],
        [/\d+/, 'numeric priority expected', 'priority'],
        [reIP, 'invalid connection address', 'connection-address'],
        [/\d+/, 'invalid connection port', 'connection-port'],
        [/typ/, 'Expected "typ" identifier', 'type classifier'],
        [/.+/, 'Invalid candidate type specified', 'candidate-type']
      ];

      /**
       ### `rtc-validator/candidate`

       Validate that an `RTCIceCandidate` (or plain old object with data, sdpMid,
       etc attributes) is a valid ice candidate.

       Specs reviewed as part of the validation implementation:

       - <http://tools.ietf.org/html/draft-ietf-mmusic-ice-sip-sdp-03#section-8.1>
       - <http://tools.ietf.org/html/rfc5245>

       **/
      module.exports = function (data) {
        var errors = [];
        var candidate = data && (data.candidate || data);
        var prefixMatch = candidate && rePrefix.exec(candidate);
        var parts = prefixMatch && candidate.slice(prefixMatch[0].length).split(/\s/);

        if (!candidate) {
          return [new Error('empty candidate')];
        }

        // check that the prefix matches expected
        if (!prefixMatch) {
          return [new Error('candidate did not match expected sdp line format')];
        }

        // perform the part validation
        errors = errors.concat(parts.map(validateParts)).filter(Boolean);

        return errors;
      };

      function validateParts(part, idx) {
        var validator = partValidation[idx];

        if (validator && (!validator[0].test(part))) {
          debug(validator[2] + ' part failed validation: ' + part);
          return new Error(validator[1]);
        }
      }

    }, {
      "cog/logger": 14
    }
  ],
  43: [
    function (require, module, exports) {
      /**
       ## zip

       zip one array with other arrays

       <<< examples/zip.js

       ### zip todo

       - tests

       **/
      module.exports = function () {
        var targets = [].slice.call(arguments);

        return function (item, index) {
          return [item].concat(targets.map(function (val) {
            return val[index];
          }));
        };
      };
    }, {}
  ],
  44: [
    function (require, module, exports) {
      "use strict";
      var BaseObject = require('base_object');
      var Storage = require('./storage');

      var separateur = "@@@";

      var CDNRequester = function CDNRequester() {
        var $__0 = this;
        this.storage = Storage.getInstance();
        this.utils = new Worker(this.getWorkerURL());
        this.utils.onmessage = (function (e) {

          // renvoyÃ© par le worker
          // contient : resource + separateur + encodedChunk
          var reponse = e.data;

          // on rÃ©cupÃ¨re sÃ©parÃ©ment resource et encodedChunk
          var positionSeparateur = reponse.indexOf(separateur);
          var resource = reponse.substring(0, positionSeparateur);
          var data = reponse.substring(positionSeparateur + separateur.length);

          return $__0.resourceLoaded(resource, data);
        });

        this.callbacks = {};

      };
      ($traceurRuntime.createClass)(CDNRequester, {
        get name() {
          return 'CDNRequester';
        },
        getWorkerURL: function () {
          var content = 'request=function(e,r,s){var n=new XMLHttpRequest;return n.open("GET",e,r?!0:!1),s&&(n.responseType=s),r?(n.onload=r,void n.send()):(n.send(),200==n.status?n.response:"")},base64ArrayBuffer=function(e){for(var r,s,n,t,a,o="",u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=new Uint8Array(e),f=d.byteLength,i=f%3,c=f-i,p=0;c>p;p+=3)a=d[p]<<16|d[p+1]<<8|d[p+2],r=(16515072&a)>>18,s=(258048&a)>>12,n=(4032&a)>>6,t=63&a,o+=u[r]+u[s]+u[n]+u[t];return 1==i?(a=d[c],r=(252&a)>>2,s=(3&a)<<4,o+=u[r]+u[s]+"=="):2==i&&(a=d[c]<<8|d[c+1],r=(64512&a)>>10,s=(1008&a)>>4,n=(15&a)<<2,o+=u[r]+u[s]+u[n]+"="),o},resourceLoaded=function(resource, e){var r=base64ArrayBuffer(e.currentTarget.response);rr=resource+"' + separateur + '"+r;this.postMessage(rr)},this.addEventListener("message",function(e){request(e.data,resourceLoaded.bind(this, e.data),"arraybuffer")},!1);'
          var blob;
          try {
            blob = new Blob([content], {
              type: 'application/javascript'
            });
          } catch (e) {
            window.BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder;
            blob = new BlobBuilder();
            blob.append(content);
            blob = blob.getBlob();
          }
          return URL.createObjectURL(blob);
        },
        requestResource: function (resource, callback) {
          this.callbacks[resource] = callback; // ajout d'une nouvelle demande de ressource
          this.utils.postMessage(resource); // demande de ressource
        },
        resourceLoaded: function (resource, chunk) {
          this.storage.setItem(resource, chunk);
          var callback = this.callbacks[resource];
          callback(chunk, "cdn");
          delete this.callbacks[resource]; // suppression de la ressource qui a Ã©tÃ© reÃ§ue
        }
      }, {}, BaseObject);
      module.exports = CDNRequester;


    }, {
      "./storage": 52
    }
  ],
  46: [
    function (require, module, exports) {
      "use strict";
      var Settings = require('./settings');
      var Logger = require('log-with-style');
      var Mousetrap = require('mousetrap');
      var Log = function Log() {
      };
      ($traceurRuntime.createClass)(Log, {}, {});
      Log.info = function (message) {
        Log.log('info', message);
      };
      Log.warn = function (message) {
        Log.log('warn', message);
      };
      Log.debug = function (message) {
        Log.log('debug', message);
      };
      Log.active = Settings.logging;
      Log.onOff = function () {
        Log.active = !Log.active;
        if (Log.active)
          Logger('[c="color: red"][WARNING][c] log enabled');
        else
          Logger('[c="color: red"][WARNING][c] log disabled');
      };
      Log.log = function (level, message) {
        if (!Log.active)
          return;
        if (level === 'warn') {
          Logger('[c="color: red"][WARNING][c] ' + message);
        } else if (level === 'info') {
          Logger('[c="color: green"][INFO] [c] ' + message);
        } else if (level === 'debug') {
          Logger('[c="color: blue"][DEBUG] [c] ' + message);
        }
      };
      Mousetrap.bind(['command+shift+l', 'ctrl+shift+l'], (function () {
        return Log.onOff();
      }));
      module.exports = Log;


    }, {
      "./settings": 51,
      "log-with-style": 6,
      "mousetrap": 7
    }
  ],
  47: [
    function (require, module, exports) {
      (function (global) {

        "use strict";
        //var _ = (typeof window !== "undefined" ? window._ : typeof global !== "undefined" ? global._ : null);
        var _ = require('underscore');
        var Events = require('./events');
        var BaseObject = require('base_object');
        var log = require('./log');
        //var Settings = require('./settings');
        var ResourceRequester = require('./resource_requester');
        var UploadHandler = require('./upload_handler');


        /*
         * Classes utilisÃ©es pour dÃ©coder l'encodage rÃ©alisÃ© avec : https://gist.github.com/jonleighton/958841
         * voir https://github.com/danguer/blog-examples/blob/master/js/base64-binary.js
         *
         * (opÃ©rations plus lentes qu'en effectuant base64 -atob()-> string -> ArrayBuffer)
         */
        var Base64Binary = {
          _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",

          /* will return a  Uint8Array type */
          decodeArrayBuffer: function (input) {
            var bytes = (input.length / 4) * 3;
            var ab = new ArrayBuffer(bytes);
            this.decode(input, ab);

            return ab;
          },

          removePaddingChars: function (input) {
            var lkey = this._keyStr.indexOf(input.charAt(input.length - 1));
            if (lkey == 64) {
              return input.substring(0, input.length - 1);
            }
            return input;
          },

          decode: function (input, arrayBuffer) {
            //get last chars to see if are valid
            input = this.removePaddingChars(input);
            input = this.removePaddingChars(input);

            var bytes = parseInt((input.length / 4) * 3, 10);

            var uarray;
            var chr1, chr2, chr3;
            var enc1, enc2, enc3, enc4;
            var i = 0;
            var j = 0;

            if (arrayBuffer)
              uarray = new Uint8Array(arrayBuffer);
            else
              uarray = new Uint8Array(bytes);

            input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");

            for (i = 0; i < bytes; i += 3) {
              //get the 3 octects in 4 ascii chars
              enc1 = this._keyStr.indexOf(input.charAt(j++));
              enc2 = this._keyStr.indexOf(input.charAt(j++));
              enc3 = this._keyStr.indexOf(input.charAt(j++));
              enc4 = this._keyStr.indexOf(input.charAt(j++));

              chr1 = (enc1 << 2) | (enc2 >> 4);
              chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);
              chr3 = ((enc3 & 3) << 6) | enc4;

              uarray[i] = chr1;
              if (enc3 != 64) uarray[i + 1] = chr2;
              if (enc4 != 64) uarray[i + 2] = chr3;
            }

            return uarray;
          }
        };


        /*
         *
         *    Partie Dash P2PWeb
         *
         */


        /**
         * Module contenant les classes permettant l'ajout du P2PWeb au player Dash.js
         * (extension du player Dash.js)
         */
        var DashEB = function () {
          "use strict";
          return {};
        };
        DashEB.classes = {};


        /**
         * Permet de calculer la taille moyenne des segments sans avoir Ã  parcourir une liste Ã  chaque fois.
         */
        DashEB.classes.AvgSegmentSize = function () {
          var sommeDureesSegments = 0;
          var nbSegmentsDemandes = 0;

          /**
           * ajoute une nouvelle durÃ©e Ã  prendre en compte lors du calcul de la durÃ©e moyenne des segments
           * @param {number} duree une nouvelle durÃ©e Ã  ajouter (prise Ã  partir de requete.duration)
           */
          var addSegmentSize = function (duree) {
            if (!duree) return;
            sommeDureesSegments += duree;
            nbSegmentsDemandes += 1;
          };

          /**
           * retourne la durÃ©e moyenne des segments
           * @returns {number} la durÃ©e moyenne des segments
           */
          var getAvgSegmentSize = function () {
            return Math.round(sommeDureesSegments / nbSegmentsDemandes);
          };

          return {
            addSegmentSize: addSegmentSize,
            getAverageSegmentSize: getAvgSegmentSize
          }
        };


        /**
         * Classe permettant de rÃ©cupÃ©rer un segment.
         * HÃ©rite de MediaPlayer.dependencies.FragmentLoader.
         */
        DashEB.classes.FragmentLoader = function () {
          "use strict"

          var numeroFragmentLoader;

          var avgSegmentSize = new DashEB.classes.AvgSegmentSize(); // calcule la taille moyenne des segments
          // sans parcourir une liste Ã  chaque fois

          /**
           * AppelÃ©e lorsqu'un segment/fragment a Ã©tÃ© rÃ©cupÃ©rÃ© par le ResourceRequester
           * @param {MediaPlayer.vo.FragmentRequest} requete      correspond Ã  la requÃªte de segment (la ressource)
           * @param {string}                         encodedChunk le segment encodÃ© en string base64
           * @param {string}                         method       la mÃ©thode avec laquelle le segment a Ã©tÃ© rÃ©cupÃ©rÃ© (cdn ou p2p)
           */
          var resourceLoaded = function (requete, encodedChunk, method) {

            console.log("[FragmentLoader " + numeroFragmentLoader + "] from " + method + " for " + requete.url);

            var chunk = decodeChunk(encodedChunk);

            // on notifie que l'on a bien recu le fragment recherchÃ© au player Dash.js
            this.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED, {
              request: requete, // la requete de la librairie Dash de dÃ©part
              response: chunk, // le segment rÃ©cupÃ©rÃ©
              method: method // la mÃ©thode de rÃ©cupÃ©ration (pour les mÃ©thiques)
            });

            // les mÃ©triques sont notifiÃ©es par cet Ã©vÃ¨nement Ã©galement
          };


          /**
           * Permet de dÃ©coder les segments retournÃ©s par le client ou les pairs.
           * Ces segments sont encodÃ© sous la forme de string de base64
           * (encodage rÃ©alisÃ© avec "https://gist.github.com/jonleighton/958841")
           * @param   {string}      encodedChunk le segment encodÃ© au format string base64
           * @returns {ArrayBuffer} le segment
           */
          var decodeChunk = function (encodedChunk) {

            // retirer les "=" Ã  la fin de la chaine (encodage rÃ©alisÃ© avec https://gist.github.com/jonleighton/958841)
            if (encodedChunk.endsWith("==")) encodedChunk = encodedChunk.slice(0, -2);
            else if (encodedChunk.endsWith("=")) encodedChunk = encodedChunk.slice(0, -1);

            return Base64Binary.decodeArrayBuffer(encodedChunk);
          };


          /**
           * Permet d'obtenir le niveau/level du buffer, correspond aux segments chargÃ©s dans le buffer mais qui n'ont pas encore Ã©tÃ© visualisÃ© par l'utilisateur
           * c'est Ã  dire le buffer restant entre la position du curseur de la vidÃ©o et la fin du buffer chargÃ©
           * (la diffÃ©rence entre la taille du buffer chargÃ© actuellement et la position du curseur sur le buffer)
           * @returns {number} le niveau/level du buffer
           */
          var getCurrentBufferLevel = function () {
            var metrics = this.metricsModel.getMetricsFor("video") || this.metricsModel.getMetricsFor("audio"); // demande les metrics pour la vidÃ©o
            var bufferLevel = this.metricsExt.getCurrentBufferLevel(metrics) || {
                level: -1
              }; // pas de bufferLevel pour la 1Ã¨re requete
            bufferLevel = bufferLevel.level.toPrecision(3);
            return bufferLevel;
          };


          /**
           * Notifie les mÃ©triques qu'un nouveau segment a Ã©tÃ© reÃ§u avec une certaine mÃ©thode (p2p ou cdn)
           * @param {string} method la mÃ©thode avec laquelle le segment a Ã©tÃ© rÃ©cupÃ©rÃ© ("cdn", ou "p2p")
           */
          var updateMetrics = function (method) {
            this.notify("fragmentLoader:receivedChunk", {
              method: method
            });
          };

          return {
            metricsModel: undefined, // permet de rÃ©cupÃ©rer les mÃ©trics par reprÃ©sentations (vidÃ©o, audio, ...)
            metricsExt: undefined,

            errHandler: undefined,
            log: undefined,
            requestModifierExt: undefined,

            notify: undefined,
            subscribe: undefined,
            unsubscribe: undefined,

            resourceRequester: undefined, // rÃ©cupÃ¨re le segment/fragment chez le serveur ou les pairs.
            metricsUpdater: undefined,

            /**
             * Initialise l'objet et ses attributs, c'est ici que l'on crÃ©e le ResourceRequester.
             * AppelÃ© par Dijon tout de suite aprÃ¨s avoir instanciÃ© la classe.
             */
            setup: function () {
              this.resourceRequester.isInitialBuffer = false;

              // on indique au MetricsUpdater d'Ã©couter le FragmentLoader pour l'Ã©vÃ¨nement correspondant Ã  la rÃ©ception d'un segment
              this.subscribe(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED, this.metricsUpdater, this.metricsUpdater.updateChunksReceived.bind(this.metricsUpdater));


              numeroFragmentLoader = DashEB.classes.FragmentLoader.nbFragmentLoader;
              DashEB.classes.FragmentLoader.nbFragmentLoader++;
            },

            /*
             * Demande une ressource, soit au serveur de contenu, soit aux pairs (en utilisant ResourceeRequester)
             * @param {MediaPlayer.vo.FragmentRequest} requete correspond Ã  la requÃªte de segment (la ressource)
             */
            load: function (requete) {
              if (!requete) {
                console.log("[FragmentLoader " + numeroFragmentLoader + "] load(requete) : la requÃªte demandÃ© par Dash.js est nulle");
                this.notify(MediaPlayer.dependencies.FragmentLoader.eventList.ENAME_LOADING_COMPLETED, {
                  request: requete,
                  bytes: null
                }, new MediaPlayer.vo.Error(null, "request is null", null));
                return;
              }

              console.log("[FragmentLoader " + numeroFragmentLoader + "] load(requete) : demande '" + requete.url + "'");

              var url = requete.url;
              var currentBufferLevel = getCurrentBufferLevel.call(this);

              // mise Ã  jour de la taille moyenne des segments
              avgSegmentSize.addSegmentSize(requete.duration);
              this.resourceRequester.p2pManager.swarm.avgSegmentSize = currentBufferLevel;
              avgSegmentSize.getAverageSegmentSize();

              console.log("[FragmentLoader " + numeroFragmentLoader + "] taille moyenne des segments : " + this.resourceRequester.p2pManager.swarm.avgSegmentSize);

              // demande du segment au ResourceRequester
              this.resourceRequester.requestResource(url, currentBufferLevel, resourceLoaded.bind(this, requete));

            },

            /**
             * VÃ©rifie si une ressource existe
             * @param {MediaPlayer.vo.FragmentRequest} req correspond Ã  la requÃªte (la demande de segment/fragment)
             */
            checkForExistence: function (req) {
              console.warn("[FragmentLoader " + numeroFragmentLoader + "] checkForExistence(requete) is not implemented yet");
            },

            /**
             * Annule toutes les demandes de ressources
             */
            abort: function () {
              console.warn("[FragmentLoader " + numeroFragmentLoader + "] abort() is not implemented yet");
            }

          };
        };
        DashEB.classes.FragmentLoader.nbFragmentLoader = 0;
        DashEB.classes.FragmentLoader.prototype = new MediaPlayer.dependencies.FragmentLoader();
        DashEB.classes.FragmentLoader.prototype.constructor = DashEB.classes.FragmentLoader;


        /**
         * Regroupe toutes les informations de mÃ©triques pour le P2PWeb
         */
        DashEB.classes.MetricsUpdater = function () {

          var metricsP2PWeb = {
            chunksFromCDN: 0,
            chunksFromP2P: 0,
            chunksSent: 0,
            bufferLength: -1,
            swarmSize: 0,
            p2pRatio: 0,
            startupTime: "-"
          };

          /**
           * Met Ã  jour le temps de lancement du lecteur (startup time).
           * voir : https://github.com/Dash-Industry-Forum/dash.js/issues/888
           */
          var updateStartupTime = function () {
            var metrics = this.metricsModel.getMetricsFor("video") || this.metricsModel.getMetricsFor("audio");
            var playList = metrics.PlayList[0];

            if (!playList.trace[0]) { //la premiÃ¨re image n'a toujours pas Ã©tÃ© affichÃ©e
              return;
            }

            var startPlaybackStreamTime = playList.start; // horodatage de l'action "dÃ©marrer le flux" de l'utilisateur
            var firstSampeleRenderedTime = playList.trace[0].start; // horodatage du premier segment affichÃ©
            var startupTime = firstSampeleRenderedTime - startPlaybackStreamTime;
            metricsP2PWeb.startupTime = startupTime;

            this.virtualBuffer.unsubscribe(MediaPlayer.utils.VirtualBuffer.eventList.CHUNK_APPENDED, this);
          };

          /**
           * Met Ã  jour le nombre de segments reÃ§u de la part du serveur ou des pairs en fonction de la mÃ©thode.
           * La mÃ©thode utilisÃ©e pour rÃ©cupÃ©rer le segment sera indiquÃ© dans les donnÃ©es (champ data) du paramÃ¨tre mediaPlayerEvent.
           * Cette fonction est appelÃ©e Ã©vÃ¨nementiellement lors de l'event "fragmentLoader:receivedChunk" dÃ©clanchÃ© par un FragmentLoader.
           * @param {Dash.vo.Event} mediaPlayerEvent l'Ã©vÃ¨nement dÃ©clanchÃ© par le FragemntLoader qui a reÃ§u un segment. Contient la mÃ©thode de rÃ©ception dans le champ data.
           */
          var updateChunksReceived = function (mediaPlayerEvent) {

            var data = mediaPlayerEvent.data;
            var method = data.method;

            // mise Ã  jour du nombre de segments reÃ§us
            if (method === "cdn") metricsP2PWeb.chunksFromCDN++;
            else if (method === "p2p") metricsP2PWeb.chunksFromP2P++;

            // mise Ã  jour du ratio
            metricsP2PWeb.p2pRatio = (100 * metricsP2PWeb.chunksFromP2P / (metricsP2PWeb.chunksFromP2P + metricsP2PWeb.chunksFromCDN)).toPrecision(3);
          };


          /**
           * Met Ã  jour la taille de l'essaim (Swarm) des pairs.
           * Cette mÃ©thode est appelÃ©e Ã©vÃ¨nementiellement lorsque le Swarm dÃ©clanche un Ã©vÃ¨nement "swarm:sizeupdate"
           * @param {object} event object contenant la nouvelle taille de l'essaim dans l'attribut "swarmSize".
           */
          var updateSwarmSize = function (event) {
            metricsP2PWeb.swarmSize = event.swarmSize;
          };

          /**
           * Met Ã  jour le nombre de segments envoyÃ©s aux autres pairs.
           * Cette mÃ©thode est appelÃ©e Ã©vÃ¨nementiellement par le Swarm lorsque celui-ci dÃ©clanche l'Ã©vÃ¨nement "swarm:chunksent".
           * @param {object} event contient le nombre de segments envoyÃ©s aux pairs dans l'attribut "chunksSent"
           */
          var updateChunksSent = function (event) {
            metricsP2PWeb.chunksSent = this.resourceRequester.p2pManager.swarm.chunksSent;
          };

          /**
           * Met Ã  jour la taille du buffer.
           * Cette mÃ©thode est appelÃ©e pÃ©riodiquement (toutes les 500ms) par le MetricsUpdater.
           */
          var updateBufferLength = function () {
            metricsP2PWeb.bufferLength = getCurrentBufferLevel.call(this);
          };

          /**
           * Permet d'obtenir le niveau/level du buffer, correspond aux segments chargÃ©s dans le buffer mais qui n'ont pas encore Ã©tÃ© visualisÃ© par l'utilisateur
           * c'est Ã  dire le buffer restant entre la position du curseur de la vidÃ©o et la fin du buffer chargÃ©
           * (la diffÃ©rence entre la taille du buffer chargÃ© actuellement et la position du curseur sur le buffer)
           * @returns {number} le niveau/level du buffer
           */
          var getCurrentBufferLevel = function () {
            var metrics = this.metricsModel.getMetricsFor("video") || this.metricsModel.getMetricsFor("audio"); // demande les metrics pour la vidÃ©o
            var bufferLevel = this.metricsExt.getCurrentBufferLevel(metrics) || {
                level: -1
              }; // pas de bufferLevel pour la 1Ã¨re requete
            bufferLevel = bufferLevel.level.toPrecision(3);
            return bufferLevel;
          };


          return {
            system: undefined,
            notify: undefined,
            subscribe: undefined,
            unsubscribe: undefined,

            resourceRequester: undefined,
            metricsModel: undefined,
            metricsExt: undefined,
            virtualBuffer: undefined, // utilisÃ© pour rÃ©cupÃ©rer startup time

            /**
             * initialise le MetricsUpdater.
             * Cette mÃ©thode est appelÃ© par Dijon aprÃ¨s la crÃ©ation
             */
            setup: function () {
              // rendre les mÃ©triques disponibles
              var metrics = this.metricsModel.getMetricsFor("p2pweb");
              metrics.metricsP2PWeb = metricsP2PWeb;

              // les mises Ã  jour
              this.resourceRequester.listenTo(this.resourceRequester.p2pManager.swarm, "swarm:sizeupdate", updateSwarmSize.bind(this)); // maj de la taille de l'essaim
              this.resourceRequester.listenTo(this.resourceRequester.p2pManager.swarm, "swarm:chunksent", updateChunksSent.bind(this)); // maj du nombre de segments envoyÃ©s
              this.virtualBuffer.subscribe(MediaPlayer.utils.VirtualBuffer.eventList.CHUNK_APPENDED, this, updateStartupTime.bind(this)); // maj du startup time
              setInterval(updateBufferLength.bind(this), 500); // met Ã  jour rÃ©guliÃ¨rement la taille du buffer
            },

            updateChunksReceived: updateChunksReceived

          }
        };

        DashEB.classes.MetricsUpdater.prototype.constructor = DashEB.classes.MetricsUpdater;


        /**
         * Contexte, permet de crÃ©er nos diffÃ©rentes classes Ã  utiliser Ã  la place de celle de Dash.js
         * HÃ©rite de la classe Dash.di.DashContext.
         * voir https://github.com/Dash-Industry-Forum/dash.js/wiki/Extending-the-Player
         *
         * Exemple de parametre pouvant Ãªtre passÃ© :
         * var requesterOptions = {
                 *      source: "url_manifeste",
                 *      tracker: undefined  // optionnel, adresse du tracker
                 * }
         * @param   {object} parametres les parametres de P2PWeb (url du manifeste, adresse du tracker)
         */
        DashEB.classes.Context = function (parametres) {
          "use strict";

          return {
            system: undefined,

            /**
             * initialise la classe DashEB.classes.Context
             * Cette mÃ©thode est appelÃ© par Dijon aprÃ¨s la crÃ©ation du Context.
             */
            setup: function () {
              DashEB.classes.Context.prototype.setup.call(this);

              // les paramÃ¨tres utilisÃ©s pour la crÃ©ation du ResourceRequester (passÃ© avec un .bind())
              var requesterOptions = {
                swarm: btoa(parametres.source),
                tracker: parametres.tracker || undefined
              };

              // ne crÃ©era un FragmentLoader seulement lorsque Dash.js lui demandera (voir Dijon.js)
              this.system.mapClass("fragmentLoader", DashEB.classes.FragmentLoader);

              // il ne faut qu'une seule instance du resourceRequester et du MetricsUpdater (sinon des users non existants peuvent apparaÃ®tre)
              this.system.mapSingleton("resourceRequester", ResourceRequester.bind(undefined, requesterOptions));
              this.system.mapSingleton("metricsUpdater", DashEB.classes.MetricsUpdater);
            }
          };
        };

        DashEB.classes.Context.prototype = new Dash.di.DashContext();
        DashEB.classes.Context.prototype.constructor = DashEB.classes.Context;


        module.exports = window.DashEB = DashEB;


      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    }, {
      "./log": 46,
      "./resource_requester": 50,
      "./settings": 51,
      "./upload_handler": 56,
      "underscore": 57,
      "./events": 58
    }
  ],
  48: [
    function (require, module, exports) {
      "use strict";
      var BaseObject = require('base_object');
      var QuickConnect = require('rtc-quickconnect');
      var Settings = require("./settings");
      var Swarm = require('./swarm');
      var log = require('./log');
      var P2PManager = function P2PManager(params) {
        this.connectionSettings = {
          'room': params.swarm,
          iceServers: Settings.stunServers,
          debug: false
        };
        var tracker = params.tracker || Settings.tracker;
        log.info("Initializing P2PManager with " + tracker);
        var connection = QuickConnect(tracker, this.connectionSettings);
        this.swarm = new Swarm();
        this.dataChannel = connection.createDataChannel('P2PWebtv');
        this.setupListerners();
      };
      ($traceurRuntime.createClass)(P2PManager, {
        setupListerners: function () {
          var $__0 = this;
          this.dataChannel.on('channel:opened', (function (id, dataChannel) {
            return $__0.onChannelOpened(id, dataChannel);
          }));
          this.dataChannel.on('channel:closed', (function (id, dataChannel) {
            return $__0.onChannelClosed(id);
          }));
        },
        onChannelOpened: function (id, dataChannel) {
          if (this.swarm.size() <= Settings.maxSwarmSize) {
            this.swarm.addPeer(id, dataChannel);
          } else {
            log.warn("ignoring new peer, maxSwarmSize reached.");
          }
        },
        onChannelClosed: function (id) {
          this.swarm.removePeer(id);
        },
        requestResource: function (resource, callbackSuccess, callbackFail) {
          if (this.swarm.size() === 0) {
            callbackFail();
          } else {
            this.swarm.sendInterested(resource, callbackSuccess, callbackFail);
          }
        }
      }, {}, BaseObject);
      module.exports = P2PManager;


    }, {
      "./log": 46,
      "./settings": 51,
      "./swarm": 54,
      "rtc-quickconnect": 9
    }
  ],
  49: [
    function (require, module, exports) {
      "use strict";
      var BaseObject = require('base_object');
      var Storage = require('./storage');
      var UploadHandler = require('./upload_handler');
      var log = require('./log');
      var Peer = function Peer(params) {
        var $__0 = this;
        this.storage = Storage.getInstance();
        this.ident = params.ident;
        this.swarm = params.swarm;
        this.dataChannel = params.dataChannel;
        this.dataChannel.on("data", (function (data) {
          return $__0.messageReceived(data);
        }));
        this.uploadHandler = UploadHandler.getInstance();
        this.score = 1000;
        this.sendPing();
      };
      ($traceurRuntime.createClass)(Peer, {
        sendPing: function () {
          this.pingSentTime = Date.now();
          this.dataChannel.send("ping$$");
        },
        sendPong: function () {
          this.dataChannel.send("pong$$");
        },
        calculateRTT: function () {
          this.rtt = Date.now() - this.pingSentTime;
          log.debug(this.ident + ': ping?pong! rtt: ' + this.rtt);
        },
        sendSatisfy: function (resource) {
          if (this.uploadHandler.getSlot(this.ident)) {
            this.send('satisfy', resource, this.storage.getItem(resource));
            this.swarm.chunksSent += 1;

            // on notifie que l'on a envoyÃ© un segment aux autres pairs
            this.swarm.trigger("swarm:chunksent", {
              chunksSent: this.swarm.chunksSent
            });

          } else {
            log.warn("cannot send satisfy, no upload slot available");
            this.send("busy", resource);
          }
        },
        interestedReceived: function (resource) {
          if (this.storage.contain(resource)) {
            if (this.uploadHandler.getSlot(this.ident)) {
              this.send('contain', resource);
            } else {
              this.send('busy', resource);
            }
          } else {
            this.send("choke", resource);
          }
        },
        messageReceived: function (data) {
          var $__2 = data.split("$"),
            command = $__2[0],
            resource = $__2[1],
            content = $__2[2];
          switch (command) {
            case 'interested':
              this.interestedReceived(resource);
              break;
            case 'contain':
              this.swarm.containReceived(this, resource);
              break;
            case 'request':
              this.sendSatisfy(resource);
              break;
            case 'choke':
              this.swarm.chokeReceived(resource);
              break;
            case 'satisfy':
              log.debug('received _satisfy_');
              this.swarm.satisfyReceived(this, resource, content);
              break;
            case 'busy':
              this.swarm.busyReceived(this);
              break;
            case 'ping':
              this.sendPong();
              break;
            case 'pong':
              this.calculateRTT();
              break;
          }
        },
        send: function (command, resource) {
          var content = arguments[2] !== (void 0) ? arguments[2] : '';
          var message = this.mountMessage(command, resource, content);
          this.dataChannel.send(message);
        },
        mountMessage: function (command, resource, content) {
          var msg = command + "$" + resource + "$";
          if (content) {
            msg = msg + content;
          }
          return msg;
        }
      }, {}, BaseObject);
      module.exports = Peer;


    }, {
      "./log": 46,
      "./storage": 52,
      "./upload_handler": 56
    }
  ],
  50: [
    function (require, module, exports) {
      "use strict";
      var BaseObject = require('base_object');
      var CDNRequester = require('./cdn_requester');
      var P2PManager = require('./p2p_manager');
      var Settings = require('./settings');
      var ResourceRequester = function ResourceRequester(params) {
        this.cdnRequester = new CDNRequester();
        this.p2pManager = new P2PManager(params);
        this.currentState = params.currentState;
        this.isInitialBuffer = true;

        this.callbacks = {}; // map permettant de stocker les callbacks pour chaque ressource demandÃ©
      };
      ($traceurRuntime.createClass)(ResourceRequester, {

        /**
         * Recherche une ressource donnÃ©e Ã  une certaine adresse
         * @param {string}   resource     correspond Ã  l'adresse Ã  laquelle la ressource se trouve
         * @param {number}   bufferLength correspond Ã  la taille du buffer
         * @param {function} callback     correspond Ã  la fonction Ã  appeler lorsque la ressource est tÃ©lÃ©chargÃ©e
         */
        requestResource: function (resource, bufferLength, callback) {

          // on enregistre la requete de ressource
          this.callbacks[resource] = callback;

          if (bufferLength < Settings.lowBufferLength || this.isInitialBuffer || this.p2pManager.swarm.size() === 0) {
            console.log("[ResourceRequester] demande au serveur");
            this.requestToCDN(resource, callback);
          } else {
            console.log("[ResourceRequester] demande aux pairs");
            this.requestToP2P(resource, callback);
          }
        },

        /**
         * Demande la ressource au serveur de contenu CDN
         */
        requestToCDN: function (resource, callback) {
          this.cdnRequester.requestResource(resource, callback);
        },


        /**
         * Demande la ressource aux pairs
         */
        requestToP2P: function (resource, callback) {
          this.p2pManager.requestResource(resource, callback, this.requestToCDN.bind(this, resource, callback));
        }
      }, {}, BaseObject);
      module.exports = ResourceRequester;


    }, {
      "./cdn_requester": 44,
      "./p2p_manager": 48,
      "./settings": 51
    }
  ],
  51: [
    function (require, module, exports) {
      "use strict";
      var Settings = function Settings() {
      };
      ($traceurRuntime.createClass)(Settings, {}, {});
      Settings.logging = false;
      Settings.maxStorageChunks = 20; //10
      Settings.maxContributors = 5;
      Settings.maxSwarmSize = 50;
      Settings.maxUploadSlots = 10;
      Settings.uploadSlotTimeout = 8000;
      Settings.tracker = 'http://82.138.70.140:3000';
      Settings.lowBufferLength = 5;
      Settings.points = 1;
      Settings.stunServers = [{
        "url": "stun:stun.l.google.com:19302"
      }, {
        "url": "stun:stun1.l.google.com:19302"
      }, {
        "url": "stun:stun2.l.google.com:19302"
      }, {
        "url": "stun:stun3.l.google.com:19302"
      }, {
        "url": "stun:stun4.l.google.com:19302"
      }, {
        "url": "stun:stun.stunprotocol.org:3478"
      }];
      module.exports = Settings;


    }, {}
  ],
  52: [
    function (require, module, exports) {
      (function (global) {
        "use strict";
        var Settings = require("./settings");
        //var _ = (typeof window !== "undefined" ? window._ : typeof global !== "undefined" ? global._ : null);
        var _ = require('underscore');
        var log = require('./log');
        var Storage = function Storage() {
          this.keys = [];
          this.chunks = {};
        };
        ($traceurRuntime.createClass)(Storage, {
          setItem: function (key, value) {
            if (_.has(this.chunks, key)) {
              log.warn("already have this chunk on storage: " + key);
              return;
            }
            this.keys.push(key);
            this.chunks[key] = value;
            if (this.keys.length > Settings.maxStorageChunks) {
              this.removeOlderItem();
            }
          },
          removeOlderItem: function () {
            var key = this.keys.splice(0, 1)[0];
            delete this.chunks[key];
          },
          getItem: function (key) {
            return this.chunks[key];
          },
          contain: function (key) {
            return _.contains(this.keys, key);
          }
        }, {});
        Storage.getInstance = function () {
          if (this._instance === undefined) {
            this._instance = new this();
          }
          return this._instance;
        };
        module.exports = Storage;


      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    }, {
      "./log": 46,
      "./settings": 51,
      "underscore": 57
    }
  ],
  54: [
    function (require, module, exports) {
      (function (global) {
        "use strict";
        var BaseObject = require('base_object');
        var BufferedChannel = require('rtc-bufferedchannel');
        var Peer = require('./peer');
        var Settings = require('./settings');
        //var _ = (typeof window !== "undefined" ? window._ : typeof global !== "undefined" ? global._ : null);
        var _ = require('underscore');
        var log = require('./log');
        var SwarmUtils = require('./swarm_utils');

        var Swarm = function Swarm() {
          this.utils = new SwarmUtils(this);
          this.peers = [];
          this.chunksSent = 0;
          this.avgSegmentSize = 0;
          this.requetes = {};
        };
        ($traceurRuntime.createClass)(Swarm, {
          size: function () {
            return _.size(this.peers);
          },
          addPeer: function (id, dataChannel) {
            log.info("join: " + id);
            var bufferedChannel = BufferedChannel(dataChannel, {
              calcCharSize: false
            });
            var peer = new Peer({
              ident: id,
              dataChannel: bufferedChannel,
              swarm: this
            });
            this.peers.push(peer);
            this.trigger('swarm:sizeupdate', {
              swarmSize: this.size()
            });
          },
          removePeer: function (id) {
            var peer = this.utils.findPeer(id);
            this.peers = _.without(this.peers, peer);
            log.info("quit: " + id + " (remains: " + this.size() + ")");
            this.trigger('swarm:sizeupdate', {
              swarmSize: this.size()
            });
          },
          sendTo: function (recipients, command, resource) {
            var content = arguments[3] !== (void 0) ? arguments[3] : '';
            if (recipients === 'contributors') {
              _.each(this.utils.contributors, function (peer) {
                peer.send(command, resource, content);
              }, this);
            } else {
              var peer = this.utils.findPeer(recipients);
              peer.send(command, resource, content);
            }
          },
          sendInterested: function (resource, callbackSuccess, callbackFail) {

            console.log("[Swarm] send interested in " + resource);

            this.sendTo('contributors', 'interested', resource);

            var timeout = this.utils.timeoutFor('interested');
            var interestedFailID = setTimeout(this.callbackFail.bind(this, resource), timeout);

            this.requetes[resource] = {
              externalCallbackFail: callbackFail,
              externalCallbackSuccess: callbackSuccess,
              interestedFailID: interestedFailID,
              requestFailID: undefined,
              chokedClients: 0,
              peersContainsResource: [],
              satisfyCandidate: undefined
            };

          },
          chokeReceived: function (resource) {

            var requete = this.requetes[resource];
            if (!requete) {
              console.log("[Swarm] choke received from peer for a wrong resource " + resource);
              return;
            }
            ;

            console.log("[Swarm] choke received from peer for " + resource);

            requete.chokedClients++;

            if (requete.chokedClients === _.size(this.utils.contributors)) {
              log.warn("[Swarm] all contributors choked, getting from cdn");
              this.callbackFail(resource);
            }

          },
          containReceived: function (peer, resource) {

            var requete = this.requetes[resource];
            if (!requete) {
              console.log("[Swarm] contain received from peer " + peer.ident + " for a wrong resource " + resource);
              return;
            }
            ;

            console.log("[Swarm] contain received from peer " + peer.ident + " for " + resource);

            if (requete.satisfyCandidate) {
              log.warn("[Swarm] contain received but already have satisfy candidate for " + resource);
              requete.peersContainsResource.push(peer);
            } else {
              console.log("[Swarm] send request to " + peer.ident + " for " + resource);
              requete.satisfyCandidate = peer.ident;
              this.clearInterestedFailInterval(resource);
              this.sendTo(requete.satisfyCandidate, 'request', resource);
              requete.requestFailID = setTimeout(this.callbackFail.bind(this, resource), this.utils.timeoutFor('request'));
            }

          },
          satisfyReceived: function (peer, resource, chunk) {

            var requete = this.requetes[resource];
            if (!requete || requete.satisfyCandidate != peer.ident) {
              console.log("[Swarm] satisfy received for a wrong resource or satisfyCandidate : " + resource + " ; " + peer.ident);
              log.warn("[Swarm] satisfy received for a wrong resource or satisfyCandidate");
              return;
            }

            console.log("[Swarm] satisfy received from " + peer.ident + " for " + resource);

            this.clearRequestFailInterval(resource);
            requete.externalCallbackSuccess(chunk, "p2p");
            this.utils.updatePeersScore(resource);
            this.rebootRoundVars(resource);

          },
          busyReceived: function (peer) {
            var lowerScore = this.utils.getLowestScorePeer().score;
            if (lowerScore < 0) {
              peer.score = lowerScore - Settings.points;
            } else {
              peer.score = 0;
            }
            log.warn("busy received. " + peer.ident + " score is now: " + peer.score);
          },
          callbackFail: function (resource) {

            this.utils.decrementScore(this.utils.contributors);

            var requete = this.requetes[resource];
            if (!requete) {
              console.log("[Swarm] callbackFail for a wrong resource " + resource);
              return;
            }
            ;

            console.log("[Swarm] callbackFail for " + resource + " (ask server)");
            requete.externalCallbackFail();
            this.rebootRoundVars(resource);
          },
          rebootRoundVars: function (resource) {
            delete this.requetes[resource];
          },
          clearInterestedFailInterval: function (resource) {

            var requete = this.requetes[resource];
            if (!requete) {
              console.log("[Swarm] clear timeout interested for a wrong resource " + resource);
              return;
            }
            ;

            console.log("[Swarm] clear timeout interested for " + resource);
            clearTimeout(requete.interestedFailID);
            requete.interestedFailID = 0;
          },
          clearRequestFailInterval: function (resource) {

            var requete = this.requetes[resource];
            if (!requete) {
              console.log("[Swarm] clear timeout request for a wrong resource " + resource);
              return;
            }
            ;

            console.log("[Swarm] clear timeout request for " + resource);
            clearTimeout(requete.requestFailID);
            requete.requestFailID = 0;
          }
        }, {}, BaseObject);
        module.exports = Swarm;


      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    }, {
      "./log": 46,
      "./peer": 49,
      "./settings": 51,
      "./swarm_utils": 55,
      "rtc-bufferedchannel": 8,
      "underscore": 57
    }
  ],
  55: [
    function (require, module, exports) {
      (function (global) {
        "use strict";
        var BaseObject = require('base_object');
        //var _ = (typeof window !== "undefined" ? window._ : typeof global !== "undefined" ? global._ : null);
        var _ = require('underscore');
        var Settings = require('./settings');
        var log = require('./log');
        var SwarmUtils = function SwarmUtils(swarm) {
          this.swarm = swarm;
        };
        ($traceurRuntime.createClass)(SwarmUtils, {
          findPeer: function (id) {
            return _.find(this.swarm.peers, function (peer) {
              return (peer.ident === id);
            }, this);
          },
          updatePeersScore: function (resource) {

            var requete = this.swarm.requetes[resource];
            if (!requete) return;

            var successPeer = this.findPeer(requete.satisfyCandidate); // this.findPeer(this.utils.satisfyCandidate);
            var goodPeers = _.union([successPeer], requete.peersContainsResource); // _.union([successPeer], this.utils.peersContainsResource);
            var badPeers = _.difference(this.contributors, goodPeers);
            log.info("contributors good: " + goodPeers.length);
            this.incrementScore(goodPeers);
            this.decrementScore(badPeers);
          },
          incrementScore: function (peers) {
            this.changeScore(peers, Settings.points);
          },
          decrementScore: function (peers) {
            this.changeScore(peers, Settings.points * -1);
          },
          changeScore: function (peers, points) {
            _.each(peers, function (peer) {
              peer.score += points;
            }, this);
          },
          get contributors() {
            var orderedPeers = _.sortBy(this.swarm.peers, function (p) {
              return p.score;
            }).reverse();
            if (_.size(this.swarm.peers) > Settings.maxContributors) {
              var slice = orderedPeers.slice(0, Settings.maxContributors);
              return slice;
            } else {
              return orderedPeers;
            }
          },
          getLowestScorePeer: function () {
            return _.first(_.sortBy(this.swarm.peers, function (p) {
              return p.score;
            }));
          },
          timeoutFor: function (command) {
            var segmentSize = this.swarm.avgSegmentSize > 0 ? this.swarm.avgSegmentSize * 1000 : 1000;
            if (command === 'interested') {
              var timeout = segmentSize / 4;
              return timeout > 2000 ? 2000 : timeout;
            } else if (command === 'request') {
              return segmentSize * 0.6;
            }
          }
        }, {}, BaseObject);
        module.exports = SwarmUtils;


      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    }, {
      "./log": 46,
      "./settings": 51,
      "underscore": 57
    }
  ],
  56: [
    function (require, module, exports) {
      (function (global) {
        "use strict";
        var BaseObject = require('base_object');
        var Settings = require("./settings");
        //var _ = (typeof window !== "undefined" ? window._ : typeof global !== "undefined" ? global._ : null);
        var _ = require('underscore');
        var log = require('./log');
        var UploadHandler = function UploadHandler() {
          this.maxUploadSlots = Settings.maxUploadSlots;
          this.slots = {};
          setInterval(this.checkAndFreeSlots.bind(this), 5000);
        };
        ($traceurRuntime.createClass)(UploadHandler, {
          getSlot: function (peerId) {
            if (_.contains(this.slots.keys, peerId) || this.hasFreeSlots()) {
              this.slots[peerId] = Date.now();
              this.updateSlotsCount();
              return true;
            } else {
              log.warn("don't have free upload slots");
              return false;
            }
          },
          checkAndFreeSlots: function () {
            var threshold = Date.now() - Settings.uploadSlotTimeout;
            _.each(this.slots, function (timestamp, peerId) {
              if (timestamp <= threshold) {
                delete this.slots[peerId];
                this.updateSlotsCount();
              }
            }, this);
          },
          hasFreeSlots: function () {
            return (_.size(this.slots) < this.maxUploadSlots);
          },
          updateSlotsCount: function () {
            this.trigger('uploadhandler:update', {
              occupiedSlots: _.size(this.slots),
              totalSlots: this.maxUploadSlots
            });
          }
        }, {}, BaseObject);
        UploadHandler.getInstance = function () {
          if (this._instance === undefined) {
            this._instance = new this();
          }
          return this._instance;
        };
        module.exports = UploadHandler;


      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    }, {
      "./log": 46,
      "./settings": 51,
      "underscore": 57
    }
  ]
















  // Underscore (copier/coller de Clappr.js)
  ,
  57: [
    function (require, module, exports) {
      //     Underscore.js 1.7.0
      //     http://underscorejs.org
      //     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
      //     Underscore may be freely distributed under the MIT license.

      (function () {

        // Baseline setup
        // --------------

        // Establish the root object, `window` in the browser, or `exports` on the server.
        var root = this;

        // Save the previous value of the `_` variable.
        var previousUnderscore = root._;

        // Save bytes in the minified (but not gzipped) version:
        var ArrayProto = Array.prototype,
          ObjProto = Object.prototype,
          FuncProto = Function.prototype;

        // Create quick reference variables for speed access to core prototypes.
        var
          push = ArrayProto.push,
          slice = ArrayProto.slice,
          concat = ArrayProto.concat,
          toString = ObjProto.toString,
          hasOwnProperty = ObjProto.hasOwnProperty;

        // All **ECMAScript 5** native function implementations that we hope to use
        // are declared here.
        var
          nativeIsArray = Array.isArray,
          nativeKeys = Object.keys,
          nativeBind = FuncProto.bind;

        // Create a safe reference to the Underscore object for use below.
        var _ = function (obj) {
          if (obj instanceof _) return obj;
          if (!(this instanceof _)) return new _(obj);
          this._wrapped = obj;
        };

        // Export the Underscore object for **Node.js**, with
        // backwards-compatibility for the old `require()` API. If we're in
        // the browser, add `_` as a global object.
        if (typeof exports !== 'undefined') {
          if (typeof module !== 'undefined' && module.exports) {
            exports = module.exports = _;
          }
          exports._ = _;
        } else {
          root._ = _;
        }

        // Current version.
        _.VERSION = '1.7.0';

        // Internal function that returns an efficient (for current engines) version
        // of the passed-in callback, to be repeatedly applied in other Underscore
        // functions.
        var createCallback = function (func, context, argCount) {
          if (context === void 0) return func;
          switch (argCount == null ? 3 : argCount) {
            case 1:
              return function (value) {
                return func.call(context, value);
              };
            case 2:
              return function (value, other) {
                return func.call(context, value, other);
              };
            case 3:
              return function (value, index, collection) {
                return func.call(context, value, index, collection);
              };
            case 4:
              return function (accumulator, value, index, collection) {
                return func.call(context, accumulator, value, index, collection);
              };
          }
          return function () {
            return func.apply(context, arguments);
          };
        };

        // A mostly-internal function to generate callbacks that can be applied
        // to each element in a collection, returning the desired result â€” either
        // identity, an arbitrary callback, a property matcher, or a property accessor.
        _.iteratee = function (value, context, argCount) {
          if (value == null) return _.identity;
          if (_.isFunction(value)) return createCallback(value, context, argCount);
          if (_.isObject(value)) return _.matches(value);
          return _.property(value);
        };

        // Collection Functions
        // --------------------

        // The cornerstone, an `each` implementation, aka `forEach`.
        // Handles raw objects in addition to array-likes. Treats all
        // sparse array-likes as if they were dense.
        _.each = _.forEach = function (obj, iteratee, context) {
          if (obj == null) return obj;
          iteratee = createCallback(iteratee, context);
          var i, length = obj.length;
          if (length === +length) {
            for (i = 0; i < length; i++) {
              iteratee(obj[i], i, obj);
            }
          } else {
            var keys = _.keys(obj);
            for (i = 0, length = keys.length; i < length; i++) {
              iteratee(obj[keys[i]], keys[i], obj);
            }
          }
          return obj;
        };

        // Return the results of applying the iteratee to each element.
        _.map = _.collect = function (obj, iteratee, context) {
          if (obj == null) return [];
          iteratee = _.iteratee(iteratee, context);
          var keys = obj.length !== +obj.length && _.keys(obj),
            length = (keys || obj).length,
            results = Array(length),
            currentKey;
          for (var index = 0; index < length; index++) {
            currentKey = keys ? keys[index] : index;
            results[index] = iteratee(obj[currentKey], currentKey, obj);
          }
          return results;
        };

        var reduceError = 'Reduce of empty array with no initial value';

        // **Reduce** builds up a single result from a list of values, aka `inject`,
        // or `foldl`.
        _.reduce = _.foldl = _.inject = function (obj, iteratee, memo, context) {
          if (obj == null) obj = [];
          iteratee = createCallback(iteratee, context, 4);
          var keys = obj.length !== +obj.length && _.keys(obj),
            length = (keys || obj).length,
            index = 0,
            currentKey;
          if (arguments.length < 3) {
            if (!length) throw new TypeError(reduceError);
            memo = obj[keys ? keys[index++] : index++];
          }
          for (; index < length; index++) {
            currentKey = keys ? keys[index] : index;
            memo = iteratee(memo, obj[currentKey], currentKey, obj);
          }
          return memo;
        };

        // The right-associative version of reduce, also known as `foldr`.
        _.reduceRight = _.foldr = function (obj, iteratee, memo, context) {
          if (obj == null) obj = [];
          iteratee = createCallback(iteratee, context, 4);
          var keys = obj.length !== +obj.length && _.keys(obj),
            index = (keys || obj).length,
            currentKey;
          if (arguments.length < 3) {
            if (!index) throw new TypeError(reduceError);
            memo = obj[keys ? keys[--index] : --index];
          }
          while (index--) {
            currentKey = keys ? keys[index] : index;
            memo = iteratee(memo, obj[currentKey], currentKey, obj);
          }
          return memo;
        };

        // Return the first value which passes a truth test. Aliased as `detect`.
        _.find = _.detect = function (obj, predicate, context) {
          var result;
          predicate = _.iteratee(predicate, context);
          _.some(obj, function (value, index, list) {
            if (predicate(value, index, list)) {
              result = value;
              return true;
            }
          });
          return result;
        };

        // Return all the elements that pass a truth test.
        // Aliased as `select`.
        _.filter = _.select = function (obj, predicate, context) {
          var results = [];
          if (obj == null) return results;
          predicate = _.iteratee(predicate, context);
          _.each(obj, function (value, index, list) {
            if (predicate(value, index, list)) results.push(value);
          });
          return results;
        };

        // Return all the elements for which a truth test fails.
        _.reject = function (obj, predicate, context) {
          return _.filter(obj, _.negate(_.iteratee(predicate)), context);
        };

        // Determine whether all of the elements match a truth test.
        // Aliased as `all`.
        _.every = _.all = function (obj, predicate, context) {
          if (obj == null) return true;
          predicate = _.iteratee(predicate, context);
          var keys = obj.length !== +obj.length && _.keys(obj),
            length = (keys || obj).length,
            index, currentKey;
          for (index = 0; index < length; index++) {
            currentKey = keys ? keys[index] : index;
            if (!predicate(obj[currentKey], currentKey, obj)) return false;
          }
          return true;
        };

        // Determine if at least one element in the object matches a truth test.
        // Aliased as `any`.
        _.some = _.any = function (obj, predicate, context) {
          if (obj == null) return false;
          predicate = _.iteratee(predicate, context);
          var keys = obj.length !== +obj.length && _.keys(obj),
            length = (keys || obj).length,
            index, currentKey;
          for (index = 0; index < length; index++) {
            currentKey = keys ? keys[index] : index;
            if (predicate(obj[currentKey], currentKey, obj)) return true;
          }
          return false;
        };

        // Determine if the array or object contains a given value (using `===`).
        // Aliased as `include`.
        _.contains = _.include = function (obj, target) {
          if (obj == null) return false;
          if (obj.length !== +obj.length) obj = _.values(obj);
          return _.indexOf(obj, target) >= 0;
        };

        // Invoke a method (with arguments) on every item in a collection.
        _.invoke = function (obj, method) {
          var args = slice.call(arguments, 2);
          var isFunc = _.isFunction(method);
          return _.map(obj, function (value) {
            return (isFunc ? method : value[method]).apply(value, args);
          });
        };

        // Convenience version of a common use case of `map`: fetching a property.
        _.pluck = function (obj, key) {
          return _.map(obj, _.property(key));
        };

        // Convenience version of a common use case of `filter`: selecting only objects
        // containing specific `key:value` pairs.
        _.where = function (obj, attrs) {
          return _.filter(obj, _.matches(attrs));
        };

        // Convenience version of a common use case of `find`: getting the first object
        // containing specific `key:value` pairs.
        _.findWhere = function (obj, attrs) {
          return _.find(obj, _.matches(attrs));
        };

        // Return the maximum element (or element-based computation).
        _.max = function (obj, iteratee, context) {
          var result = -Infinity,
            lastComputed = -Infinity,
            value, computed;
          if (iteratee == null && obj != null) {
            obj = obj.length === +obj.length ? obj : _.values(obj);
            for (var i = 0, length = obj.length; i < length; i++) {
              value = obj[i];
              if (value > result) {
                result = value;
              }
            }
          } else {
            iteratee = _.iteratee(iteratee, context);
            _.each(obj, function (value, index, list) {
              computed = iteratee(value, index, list);
              if (computed > lastComputed || computed === -Infinity && result === -Infinity) {
                result = value;
                lastComputed = computed;
              }
            });
          }
          return result;
        };

        // Return the minimum element (or element-based computation).
        _.min = function (obj, iteratee, context) {
          var result = Infinity,
            lastComputed = Infinity,
            value, computed;
          if (iteratee == null && obj != null) {
            obj = obj.length === +obj.length ? obj : _.values(obj);
            for (var i = 0, length = obj.length; i < length; i++) {
              value = obj[i];
              if (value < result) {
                result = value;
              }
            }
          } else {
            iteratee = _.iteratee(iteratee, context);
            _.each(obj, function (value, index, list) {
              computed = iteratee(value, index, list);
              if (computed < lastComputed || computed === Infinity && result === Infinity) {
                result = value;
                lastComputed = computed;
              }
            });
          }
          return result;
        };

        // Shuffle a collection, using the modern version of the
        // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisherâ€“Yates_shuffle).
        _.shuffle = function (obj) {
          var set = obj && obj.length === +obj.length ? obj : _.values(obj);
          var length = set.length;
          var shuffled = Array(length);
          for (var index = 0, rand; index < length; index++) {
            rand = _.random(0, index);
            if (rand !== index) shuffled[index] = shuffled[rand];
            shuffled[rand] = set[index];
          }
          return shuffled;
        };

        // Sample **n** random values from a collection.
        // If **n** is not specified, returns a single random element.
        // The internal `guard` argument allows it to work with `map`.
        _.sample = function (obj, n, guard) {
          if (n == null || guard) {
            if (obj.length !== +obj.length) obj = _.values(obj);
            return obj[_.random(obj.length - 1)];
          }
          return _.shuffle(obj).slice(0, Math.max(0, n));
        };

        // Sort the object's values by a criterion produced by an iteratee.
        _.sortBy = function (obj, iteratee, context) {
          iteratee = _.iteratee(iteratee, context);
          return _.pluck(_.map(obj, function (value, index, list) {
            return {
              value: value,
              index: index,
              criteria: iteratee(value, index, list)
            };
          }).sort(function (left, right) {
            var a = left.criteria;
            var b = right.criteria;
            if (a !== b) {
              if (a > b || a === void 0) return 1;
              if (a < b || b === void 0) return -1;
            }
            return left.index - right.index;
          }), 'value');
        };

        // An internal function used for aggregate "group by" operations.
        var group = function (behavior) {
          return function (obj, iteratee, context) {
            var result = {};
            iteratee = _.iteratee(iteratee, context);
            _.each(obj, function (value, index) {
              var key = iteratee(value, index, obj);
              behavior(result, value, key);
            });
            return result;
          };
        };

        // Groups the object's values by a criterion. Pass either a string attribute
        // to group by, or a function that returns the criterion.
        _.groupBy = group(function (result, value, key) {
          if (_.has(result, key)) result[key].push(value);
          else result[key] = [value];
        });

        // Indexes the object's values by a criterion, similar to `groupBy`, but for
        // when you know that your index values will be unique.
        _.indexBy = group(function (result, value, key) {
          result[key] = value;
        });

        // Counts instances of an object that group by a certain criterion. Pass
        // either a string attribute to count by, or a function that returns the
        // criterion.
        _.countBy = group(function (result, value, key) {
          if (_.has(result, key)) result[key]++;
          else result[key] = 1;
        });

        // Use a comparator function to figure out the smallest index at which
        // an object should be inserted so as to maintain order. Uses binary search.
        _.sortedIndex = function (array, obj, iteratee, context) {
          iteratee = _.iteratee(iteratee, context, 1);
          var value = iteratee(obj);
          var low = 0,
            high = array.length;
          while (low < high) {
            var mid = low + high >>> 1;
            if (iteratee(array[mid]) < value) low = mid + 1;
            else high = mid;
          }
          return low;
        };

        // Safely create a real, live array from anything iterable.
        _.toArray = function (obj) {
          if (!obj) return [];
          if (_.isArray(obj)) return slice.call(obj);
          if (obj.length === +obj.length) return _.map(obj, _.identity);
          return _.values(obj);
        };

        // Return the number of elements in an object.
        _.size = function (obj) {
          if (obj == null) return 0;
          return obj.length === +obj.length ? obj.length : _.keys(obj).length;
        };

        // Split a collection into two arrays: one whose elements all satisfy the given
        // predicate, and one whose elements all do not satisfy the predicate.
        _.partition = function (obj, predicate, context) {
          predicate = _.iteratee(predicate, context);
          var pass = [],
            fail = [];
          _.each(obj, function (value, key, obj) {
            (predicate(value, key, obj) ? pass : fail).push(value);
          });
          return [pass, fail];
        };

        // Array Functions
        // ---------------

        // Get the first element of an array. Passing **n** will return the first N
        // values in the array. Aliased as `head` and `take`. The **guard** check
        // allows it to work with `_.map`.
        _.first = _.head = _.take = function (array, n, guard) {
          if (array == null) return void 0;
          if (n == null || guard) return array[0];
          if (n < 0) return [];
          return slice.call(array, 0, n);
        };

        // Returns everything but the last entry of the array. Especially useful on
        // the arguments object. Passing **n** will return all the values in
        // the array, excluding the last N. The **guard** check allows it to work with
        // `_.map`.
        _.initial = function (array, n, guard) {
          return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
        };

        // Get the last element of an array. Passing **n** will return the last N
        // values in the array. The **guard** check allows it to work with `_.map`.
        _.last = function (array, n, guard) {
          if (array == null) return void 0;
          if (n == null || guard) return array[array.length - 1];
          return slice.call(array, Math.max(array.length - n, 0));
        };

        // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.
        // Especially useful on the arguments object. Passing an **n** will return
        // the rest N values in the array. The **guard**
        // check allows it to work with `_.map`.
        _.rest = _.tail = _.drop = function (array, n, guard) {
          return slice.call(array, n == null || guard ? 1 : n);
        };

        // Trim out all falsy values from an array.
        _.compact = function (array) {
          return _.filter(array, _.identity);
        };

        // Internal implementation of a recursive `flatten` function.
        var flatten = function (input, shallow, strict, output) {
          if (shallow && _.every(input, _.isArray)) {
            return concat.apply(output, input);
          }
          for (var i = 0, length = input.length; i < length; i++) {
            var value = input[i];
            if (!_.isArray(value) && !_.isArguments(value)) {
              if (!strict) output.push(value);
            } else if (shallow) {
              push.apply(output, value);
            } else {
              flatten(value, shallow, strict, output);
            }
          }
          return output;
        };

        // Flatten out an array, either recursively (by default), or just one level.
        _.flatten = function (array, shallow) {
          return flatten(array, shallow, false, []);
        };

        // Return a version of the array that does not contain the specified value(s).
        _.without = function (array) {
          return _.difference(array, slice.call(arguments, 1));
        };

        // Produce a duplicate-free version of the array. If the array has already
        // been sorted, you have the option of using a faster algorithm.
        // Aliased as `unique`.
        _.uniq = _.unique = function (array, isSorted, iteratee, context) {
          if (array == null) return [];
          if (!_.isBoolean(isSorted)) {
            context = iteratee;
            iteratee = isSorted;
            isSorted = false;
          }
          if (iteratee != null) iteratee = _.iteratee(iteratee, context);
          var result = [];
          var seen = [];
          for (var i = 0, length = array.length; i < length; i++) {
            var value = array[i];
            if (isSorted) {
              if (!i || seen !== value) result.push(value);
              seen = value;
            } else if (iteratee) {
              var computed = iteratee(value, i, array);
              if (_.indexOf(seen, computed) < 0) {
                seen.push(computed);
                result.push(value);
              }
            } else if (_.indexOf(result, value) < 0) {
              result.push(value);
            }
          }
          return result;
        };

        // Produce an array that contains the union: each distinct element from all of
        // the passed-in arrays.
        _.union = function () {
          return _.uniq(flatten(arguments, true, true, []));
        };

        // Produce an array that contains every item shared between all the
        // passed-in arrays.
        _.intersection = function (array) {
          if (array == null) return [];
          var result = [];
          var argsLength = arguments.length;
          for (var i = 0, length = array.length; i < length; i++) {
            var item = array[i];
            if (_.contains(result, item)) continue;
            for (var j = 1; j < argsLength; j++) {
              if (!_.contains(arguments[j], item)) break;
            }
            if (j === argsLength) result.push(item);
          }
          return result;
        };

        // Take the difference between one array and a number of other arrays.
        // Only the elements present in just the first array will remain.
        _.difference = function (array) {
          var rest = flatten(slice.call(arguments, 1), true, true, []);
          return _.filter(array, function (value) {
            return !_.contains(rest, value);
          });
        };

        // Zip together multiple lists into a single array -- elements that share
        // an index go together.
        _.zip = function (array) {
          if (array == null) return [];
          var length = _.max(arguments, 'length').length;
          var results = Array(length);
          for (var i = 0; i < length; i++) {
            results[i] = _.pluck(arguments, i);
          }
          return results;
        };

        // Converts lists into objects. Pass either a single array of `[key, value]`
        // pairs, or two parallel arrays of the same length -- one of keys, and one of
        // the corresponding values.
        _.object = function (list, values) {
          if (list == null) return {};
          var result = {};
          for (var i = 0, length = list.length; i < length; i++) {
            if (values) {
              result[list[i]] = values[i];
            } else {
              result[list[i][0]] = list[i][1];
            }
          }
          return result;
        };

        // Return the position of the first occurrence of an item in an array,
        // or -1 if the item is not included in the array.
        // If the array is large and already in sort order, pass `true`
        // for **isSorted** to use binary search.
        _.indexOf = function (array, item, isSorted) {
          if (array == null) return -1;
          var i = 0,
            length = array.length;
          if (isSorted) {
            if (typeof isSorted == 'number') {
              i = isSorted < 0 ? Math.max(0, length + isSorted) : isSorted;
            } else {
              i = _.sortedIndex(array, item);
              return array[i] === item ? i : -1;
            }
          }
          for (; i < length; i++)
            if (array[i] === item) return i;
          return -1;
        };

        _.lastIndexOf = function (array, item, from) {
          if (array == null) return -1;
          var idx = array.length;
          if (typeof from == 'number') {
            idx = from < 0 ? idx + from + 1 : Math.min(idx, from + 1);
          }
          while (--idx >= 0)
            if (array[idx] === item) return idx;
          return -1;
        };

        // Generate an integer Array containing an arithmetic progression. A port of
        // the native Python `range()` function. See
        // [the Python documentation](http://docs.python.org/library/functions.html#range).
        _.range = function (start, stop, step) {
          if (arguments.length <= 1) {
            stop = start || 0;
            start = 0;
          }
          step = step || 1;

          var length = Math.max(Math.ceil((stop - start) / step), 0);
          var range = Array(length);

          for (var idx = 0; idx < length; idx++, start += step) {
            range[idx] = start;
          }

          return range;
        };

        // Function (ahem) Functions
        // ------------------

        // Reusable constructor function for prototype setting.
        var Ctor = function () {
        };

        // Create a function bound to a given object (assigning `this`, and arguments,
        // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if
        // available.
        _.bind = function (func, context) {
          var args, bound;
          if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
          if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');
          args = slice.call(arguments, 2);
          bound = function () {
            if (!(this instanceof bound)) return func.apply(context, args.concat(slice.call(arguments)));
            Ctor.prototype = func.prototype;
            var self = new Ctor;
            Ctor.prototype = null;
            var result = func.apply(self, args.concat(slice.call(arguments)));
            if (_.isObject(result)) return result;
            return self;
          };
          return bound;
        };

        // Partially apply a function by creating a version that has had some of its
        // arguments pre-filled, without changing its dynamic `this` context. _ acts
        // as a placeholder, allowing any combination of arguments to be pre-filled.
        _.partial = function (func) {
          var boundArgs = slice.call(arguments, 1);
          return function () {
            var position = 0;
            var args = boundArgs.slice();
            for (var i = 0, length = args.length; i < length; i++) {
              if (args[i] === _) args[i] = arguments[position++];
            }
            while (position < arguments.length) args.push(arguments[position++]);
            return func.apply(this, args);
          };
        };

        // Bind a number of an object's methods to that object. Remaining arguments
        // are the method names to be bound. Useful for ensuring that all callbacks
        // defined on an object belong to it.
        _.bindAll = function (obj) {
          var i, length = arguments.length,
            key;
          if (length <= 1) throw new Error('bindAll must be passed function names');
          for (i = 1; i < length; i++) {
            key = arguments[i];
            obj[key] = _.bind(obj[key], obj);
          }
          return obj;
        };

        // Memoize an expensive function by storing its results.
        _.memoize = function (func, hasher) {
          var memoize = function (key) {
            var cache = memoize.cache;
            var address = hasher ? hasher.apply(this, arguments) : key;
            if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);
            return cache[address];
          };
          memoize.cache = {};
          return memoize;
        };

        // Delays a function for the given number of milliseconds, and then calls
        // it with the arguments supplied.
        _.delay = function (func, wait) {
          var args = slice.call(arguments, 2);
          return setTimeout(function () {
            return func.apply(null, args);
          }, wait);
        };

        // Defers a function, scheduling it to run after the current call stack has
        // cleared.
        _.defer = function (func) {
          return _.delay.apply(_, [func, 1].concat(slice.call(arguments, 1)));
        };

        // Returns a function, that, when invoked, will only be triggered at most once
        // during a given window of time. Normally, the throttled function will run
        // as much as it can, without ever going more than once per `wait` duration;
        // but if you'd like to disable the execution on the leading edge, pass
        // `{leading: false}`. To disable execution on the trailing edge, ditto.
        _.throttle = function (func, wait, options) {
          var context, args, result;
          var timeout = null;
          var previous = 0;
          if (!options) options = {};
          var later = function () {
            previous = options.leading === false ? 0 : _.now();
            timeout = null;
            result = func.apply(context, args);
            if (!timeout) context = args = null;
          };
          return function () {
            var now = _.now();
            if (!previous && options.leading === false) previous = now;
            var remaining = wait - (now - previous);
            context = this;
            args = arguments;
            if (remaining <= 0 || remaining > wait) {
              clearTimeout(timeout);
              timeout = null;
              previous = now;
              result = func.apply(context, args);
              if (!timeout) context = args = null;
            } else if (!timeout && options.trailing !== false) {
              timeout = setTimeout(later, remaining);
            }
            return result;
          };
        };

        // Returns a function, that, as long as it continues to be invoked, will not
        // be triggered. The function will be called after it stops being called for
        // N milliseconds. If `immediate` is passed, trigger the function on the
        // leading edge, instead of the trailing.
        _.debounce = function (func, wait, immediate) {
          var timeout, args, context, timestamp, result;

          var later = function () {
            var last = _.now() - timestamp;

            if (last < wait && last > 0) {
              timeout = setTimeout(later, wait - last);
            } else {
              timeout = null;
              if (!immediate) {
                result = func.apply(context, args);
                if (!timeout) context = args = null;
              }
            }
          };

          return function () {
            context = this;
            args = arguments;
            timestamp = _.now();
            var callNow = immediate && !timeout;
            if (!timeout) timeout = setTimeout(later, wait);
            if (callNow) {
              result = func.apply(context, args);
              context = args = null;
            }

            return result;
          };
        };

        // Returns the first function passed as an argument to the second,
        // allowing you to adjust arguments, run code before and after, and
        // conditionally execute the original function.
        _.wrap = function (func, wrapper) {
          return _.partial(wrapper, func);
        };

        // Returns a negated version of the passed-in predicate.
        _.negate = function (predicate) {
          return function () {
            return !predicate.apply(this, arguments);
          };
        };

        // Returns a function that is the composition of a list of functions, each
        // consuming the return value of the function that follows.
        _.compose = function () {
          var args = arguments;
          var start = args.length - 1;
          return function () {
            var i = start;
            var result = args[start].apply(this, arguments);
            while (i--) result = args[i].call(this, result);
            return result;
          };
        };

        // Returns a function that will only be executed after being called N times.
        _.after = function (times, func) {
          return function () {
            if (--times < 1) {
              return func.apply(this, arguments);
            }
          };
        };

        // Returns a function that will only be executed before being called N times.
        _.before = function (times, func) {
          var memo;
          return function () {
            if (--times > 0) {
              memo = func.apply(this, arguments);
            } else {
              func = null;
            }
            return memo;
          };
        };

        // Returns a function that will be executed at most one time, no matter how
        // often you call it. Useful for lazy initialization.
        _.once = _.partial(_.before, 2);

        // Object Functions
        // ----------------

        // Retrieve the names of an object's properties.
        // Delegates to **ECMAScript 5**'s native `Object.keys`
        _.keys = function (obj) {
          if (!_.isObject(obj)) return [];
          if (nativeKeys) return nativeKeys(obj);
          var keys = [];
          for (var key in obj)
            if (_.has(obj, key)) keys.push(key);
          return keys;
        };

        // Retrieve the values of an object's properties.
        _.values = function (obj) {
          var keys = _.keys(obj);
          var length = keys.length;
          var values = Array(length);
          for (var i = 0; i < length; i++) {
            values[i] = obj[keys[i]];
          }
          return values;
        };

        // Convert an object into a list of `[key, value]` pairs.
        _.pairs = function (obj) {
          var keys = _.keys(obj);
          var length = keys.length;
          var pairs = Array(length);
          for (var i = 0; i < length; i++) {
            pairs[i] = [keys[i], obj[keys[i]]];
          }
          return pairs;
        };

        // Invert the keys and values of an object. The values must be serializable.
        _.invert = function (obj) {
          var result = {};
          var keys = _.keys(obj);
          for (var i = 0, length = keys.length; i < length; i++) {
            result[obj[keys[i]]] = keys[i];
          }
          return result;
        };

        // Return a sorted list of the function names available on the object.
        // Aliased as `methods`
        _.functions = _.methods = function (obj) {
          var names = [];
          for (var key in obj) {
            if (_.isFunction(obj[key])) names.push(key);
          }
          return names.sort();
        };

        // Extend a given object with all the properties in passed-in object(s).
        _.extend = function (obj) {
          if (!_.isObject(obj)) return obj;
          var source, prop;
          for (var i = 1, length = arguments.length; i < length; i++) {
            source = arguments[i];
            for (prop in source) {
              if (hasOwnProperty.call(source, prop)) {
                obj[prop] = source[prop];
              }
            }
          }
          return obj;
        };

        // Return a copy of the object only containing the whitelisted properties.
        _.pick = function (obj, iteratee, context) {
          var result = {}, key;
          if (obj == null) return result;
          if (_.isFunction(iteratee)) {
            iteratee = createCallback(iteratee, context);
            for (key in obj) {
              var value = obj[key];
              if (iteratee(value, key, obj)) result[key] = value;
            }
          } else {
            var keys = concat.apply([], slice.call(arguments, 1));
            obj = new Object(obj);
            for (var i = 0, length = keys.length; i < length; i++) {
              key = keys[i];
              if (key in obj) result[key] = obj[key];
            }
          }
          return result;
        };

        // Return a copy of the object without the blacklisted properties.
        _.omit = function (obj, iteratee, context) {
          if (_.isFunction(iteratee)) {
            iteratee = _.negate(iteratee);
          } else {
            var keys = _.map(concat.apply([], slice.call(arguments, 1)), String);
            iteratee = function (value, key) {
              return !_.contains(keys, key);
            };
          }
          return _.pick(obj, iteratee, context);
        };

        // Fill in a given object with default properties.
        _.defaults = function (obj) {
          if (!_.isObject(obj)) return obj;
          for (var i = 1, length = arguments.length; i < length; i++) {
            var source = arguments[i];
            for (var prop in source) {
              if (obj[prop] === void 0) obj[prop] = source[prop];
            }
          }
          return obj;
        };

        // Create a (shallow-cloned) duplicate of an object.
        _.clone = function (obj) {
          if (!_.isObject(obj)) return obj;
          return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
        };

        // Invokes interceptor with the obj, and then returns obj.
        // The primary purpose of this method is to "tap into" a method chain, in
        // order to perform operations on intermediate results within the chain.
        _.tap = function (obj, interceptor) {
          interceptor(obj);
          return obj;
        };

        // Internal recursive comparison function for `isEqual`.
        var eq = function (a, b, aStack, bStack) {
          // Identical objects are equal. `0 === -0`, but they aren't identical.
          // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).
          if (a === b) return a !== 0 || 1 / a === 1 / b;
          // A strict comparison is necessary because `null == undefined`.
          if (a == null || b == null) return a === b;
          // Unwrap any wrapped objects.
          if (a instanceof _) a = a._wrapped;
          if (b instanceof _) b = b._wrapped;
          // Compare `[[Class]]` names.
          var className = toString.call(a);
          if (className !== toString.call(b)) return false;
          switch (className) {
            // Strings, numbers, regular expressions, dates, and booleans are compared by value.
            case '[object RegExp]':
            // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
            case '[object String]':
              // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
              // equivalent to `new String("5")`.
              return '' + a === '' + b;
            case '[object Number]':
              // `NaN`s are equivalent, but non-reflexive.
              // Object(NaN) is equivalent to NaN
              if (+a !== +a) return +b !== +b;
              // An `egal` comparison is performed for other numeric values.
              return +a === 0 ? 1 / +a === 1 / b : +a === +b;
            case '[object Date]':
            case '[object Boolean]':
              // Coerce dates and booleans to numeric primitive values. Dates are compared by their
              // millisecond representations. Note that invalid dates with millisecond representations
              // of `NaN` are not equivalent.
              return +a === +b;
          }
          if (typeof a != 'object' || typeof b != 'object') return false;
          // Assume equality for cyclic structures. The algorithm for detecting cyclic
          // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.
          var length = aStack.length;
          while (length--) {
            // Linear search. Performance is inversely proportional to the number of
            // unique nested structures.
            if (aStack[length] === a) return bStack[length] === b;
          }
          // Objects with different constructors are not equivalent, but `Object`s
          // from different frames are.
          var aCtor = a.constructor,
            bCtor = b.constructor;
          if (
            aCtor !== bCtor &&
              // Handle Object.create(x) cases
            'constructor' in a && 'constructor' in b && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&
            _.isFunction(bCtor) && bCtor instanceof bCtor)
          ) {
            return false;
          }
          // Add the first object to the stack of traversed objects.
          aStack.push(a);
          bStack.push(b);
          var size, result;
          // Recursively compare objects and arrays.
          if (className === '[object Array]') {
            // Compare array lengths to determine if a deep comparison is necessary.
            size = a.length;
            result = size === b.length;
            if (result) {
              // Deep compare the contents, ignoring non-numeric properties.
              while (size--) {
                if (!(result = eq(a[size], b[size], aStack, bStack))) break;
              }
            }
          } else {
            // Deep compare objects.
            var keys = _.keys(a),
              key;
            size = keys.length;
            // Ensure that both objects contain the same number of properties before comparing deep equality.
            result = _.keys(b).length === size;
            if (result) {
              while (size--) {
                // Deep compare each member
                key = keys[size];
                if (!(result = _.has(b, key) && eq(a[key], b[key], aStack, bStack))) break;
              }
            }
          }
          // Remove the first object from the stack of traversed objects.
          aStack.pop();
          bStack.pop();
          return result;
        };

        // Perform a deep comparison to check if two objects are equal.
        _.isEqual = function (a, b) {
          return eq(a, b, [], []);
        };

        // Is a given array, string, or object empty?
        // An "empty" object has no enumerable own-properties.
        _.isEmpty = function (obj) {
          if (obj == null) return true;
          if (_.isArray(obj) || _.isString(obj) || _.isArguments(obj)) return obj.length === 0;
          for (var key in obj)
            if (_.has(obj, key)) return false;
          return true;
        };

        // Is a given value a DOM element?
        _.isElement = function (obj) {
          return !!(obj && obj.nodeType === 1);
        };

        // Is a given value an array?
        // Delegates to ECMA5's native Array.isArray
        _.isArray = nativeIsArray || function (obj) {
            return toString.call(obj) === '[object Array]';
          };

        // Is a given variable an object?
        _.isObject = function (obj) {
          var type = typeof obj;
          return type === 'function' || type === 'object' && !!obj;
        };

        // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp.
        _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp'], function (name) {
          _['is' + name] = function (obj) {
            return toString.call(obj) === '[object ' + name + ']';
          };
        });

        // Define a fallback version of the method in browsers (ahem, IE), where
        // there isn't any inspectable "Arguments" type.
        if (!_.isArguments(arguments)) {
          _.isArguments = function (obj) {
            return _.has(obj, 'callee');
          };
        }

        // Optimize `isFunction` if appropriate. Work around an IE 11 bug.
        if (typeof / . / !== 'function') {
          _.isFunction = function (obj) {
            return typeof obj == 'function' || false;
          };
        }

        // Is a given object a finite number?
        _.isFinite = function (obj) {
          return isFinite(obj) && !isNaN(parseFloat(obj));
        };

        // Is the given value `NaN`? (NaN is the only number which does not equal itself).
        _.isNaN = function (obj) {
          return _.isNumber(obj) && obj !== +obj;
        };

        // Is a given value a boolean?
        _.isBoolean = function (obj) {
          return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
        };

        // Is a given value equal to null?
        _.isNull = function (obj) {
          return obj === null;
        };

        // Is a given variable undefined?
        _.isUndefined = function (obj) {
          return obj === void 0;
        };

        // Shortcut function for checking if an object has a given property directly
        // on itself (in other words, not on a prototype).
        _.has = function (obj, key) {
          return obj != null && hasOwnProperty.call(obj, key);
        };

        // Utility Functions
        // -----------------

        // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
        // previous owner. Returns a reference to the Underscore object.
        _.noConflict = function () {
          root._ = previousUnderscore;
          return this;
        };

        // Keep the identity function around for default iteratees.
        _.identity = function (value) {
          return value;
        };

        _.constant = function (value) {
          return function () {
            return value;
          };
        };

        _.noop = function () {
        };

        _.property = function (key) {
          return function (obj) {
            return obj[key];
          };
        };

        // Returns a predicate for checking whether an object has a given set of `key:value` pairs.
        _.matches = function (attrs) {
          var pairs = _.pairs(attrs),
            length = pairs.length;
          return function (obj) {
            if (obj == null) return !length;
            obj = new Object(obj);
            for (var i = 0; i < length; i++) {
              var pair = pairs[i],
                key = pair[0];
              if (pair[1] !== obj[key] || !(key in obj)) return false;
            }
            return true;
          };
        };

        // Run a function **n** times.
        _.times = function (n, iteratee, context) {
          var accum = Array(Math.max(0, n));
          iteratee = createCallback(iteratee, context, 1);
          for (var i = 0; i < n; i++) accum[i] = iteratee(i);
          return accum;
        };

        // Return a random integer between min and max (inclusive).
        _.random = function (min, max) {
          if (max == null) {
            max = min;
            min = 0;
          }
          return min + Math.floor(Math.random() * (max - min + 1));
        };

        // A (possibly faster) way to get the current timestamp as an integer.
        _.now = Date.now || function () {
            return new Date().getTime();
          };

        // List of HTML entities for escaping.
        var escapeMap = {
          '&': '&amp;',
          '<': '&lt;',
          '>': '&gt;',
          '"': '&quot;',
          "'": '&#x27;',
          '`': '&#x60;'
        };
        var unescapeMap = _.invert(escapeMap);

        // Functions for escaping and unescaping strings to/from HTML interpolation.
        var createEscaper = function (map) {
          var escaper = function (match) {
            return map[match];
          };
          // Regexes for identifying a key that needs to be escaped
          var source = '(?:' + _.keys(map).join('|') + ')';
          var testRegexp = RegExp(source);
          var replaceRegexp = RegExp(source, 'g');
          return function (string) {
            string = string == null ? '' : '' + string;
            return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
          };
        };
        _.escape = createEscaper(escapeMap);
        _.unescape = createEscaper(unescapeMap);

        // If the value of the named `property` is a function then invoke it with the
        // `object` as context; otherwise, return it.
        _.result = function (object, property) {
          if (object == null) return void 0;
          var value = object[property];
          return _.isFunction(value) ? object[property]() : value;
        };

        // Generate a unique integer id (unique within the entire client session).
        // Useful for temporary DOM ids.
        var idCounter = 0;
        _.uniqueId = function (prefix) {
          var id = ++idCounter + '';
          return prefix ? prefix + id : id;
        };

        // By default, Underscore uses ERB-style template delimiters, change the
        // following template settings to use alternative delimiters.
        _.templateSettings = {
          evaluate: /<%([\s\S]+?)%>/g,
          interpolate: /<%=([\s\S]+?)%>/g,
          escape: /<%-([\s\S]+?)%>/g
        };

        // When customizing `templateSettings`, if you don't want to define an
        // interpolation, evaluation or escaping regex, we need one that is
        // guaranteed not to match.
        var noMatch = /(.)^/;

        // Certain characters need to be escaped so that they can be put into a
        // string literal.
        var escapes = {
          "'": "'",
          '\\': '\\',
          '\r': 'r',
          '\n': 'n',
          '\u2028': 'u2028',
          '\u2029': 'u2029'
        };

        var escaper = /\\|'|\r|\n|\u2028|\u2029/g;

        var escapeChar = function (match) {
          return '\\' + escapes[match];
        };

        // JavaScript micro-templating, similar to John Resig's implementation.
        // Underscore templating handles arbitrary delimiters, preserves whitespace,
        // and correctly escapes quotes within interpolated code.
        // NB: `oldSettings` only exists for backwards compatibility.
        _.template = function (text, settings, oldSettings) {
          if (!settings && oldSettings) settings = oldSettings;
          settings = _.defaults({}, settings, _.templateSettings);

          // Combine delimiters into one regular expression via alternation.
          var matcher = RegExp([
              (settings.escape || noMatch).source, (settings.interpolate || noMatch).source, (settings.evaluate || noMatch).source
            ].join('|') + '|$', 'g');

          // Compile the template source, escaping string literals appropriately.
          var index = 0;
          var source = "__p+='";
          text.replace(matcher, function (match, escape, interpolate, evaluate, offset) {
            source += text.slice(index, offset).replace(escaper, escapeChar);
            index = offset + match.length;

            if (escape) {
              source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
            } else if (interpolate) {
              source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
            } else if (evaluate) {
              source += "';\n" + evaluate + "\n__p+='";
            }

            // Adobe VMs need the match returned to produce the correct offest.
            return match;
          });
          source += "';\n";

          // If a variable is not specified, place data values in local scope.
          if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';

          source = "var __t,__p='',__j=Array.prototype.join," +
            "print=function(){__p+=__j.call(arguments,'');};\n" +
            source + 'return __p;\n';

          try {
            var render = new Function(settings.variable || 'obj', '_', source);
          } catch (e) {
            e.source = source;
            throw e;
          }

          var template = function (data) {
            return render.call(this, data, _);
          };

          // Provide the compiled source as a convenience for precompilation.
          var argument = settings.variable || 'obj';
          template.source = 'function(' + argument + '){\n' + source + '}';

          return template;
        };

        // Add a "chain" function. Start chaining a wrapped Underscore object.
        _.chain = function (obj) {
          var instance = _(obj);
          instance._chain = true;
          return instance;
        };

        // OOP
        // ---------------
        // If Underscore is called as a function, it returns a wrapped object that
        // can be used OO-style. This wrapper holds altered versions of all the
        // underscore functions. Wrapped objects may be chained.

        // Helper function to continue chaining intermediate results.
        var result = function (obj) {
          return this._chain ? _(obj).chain() : obj;
        };

        // Add your own custom functions to the Underscore object.
        _.mixin = function (obj) {
          _.each(_.functions(obj), function (name) {
            var func = _[name] = obj[name];
            _.prototype[name] = function () {
              var args = [this._wrapped];
              push.apply(args, arguments);
              return result.call(this, func.apply(_, args));
            };
          });
        };

        // Add all of the Underscore functions to the wrapper object.
        _.mixin(_);

        // Add all mutator Array functions to the wrapper.
        _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function (name) {
          var method = ArrayProto[name];
          _.prototype[name] = function () {
            var obj = this._wrapped;
            method.apply(obj, arguments);
            if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];
            return result.call(this, obj);
          };
        });

        // Add all accessor Array functions to the wrapper.
        _.each(['concat', 'join', 'slice'], function (name) {
          var method = ArrayProto[name];
          _.prototype[name] = function () {
            return result.call(this, method.apply(this._wrapped, arguments));
          };
        });

        // Extracts the result from a wrapped and chained object.
        _.prototype.value = function () {
          return this._wrapped;
        };

        // AMD registration happens at the end for compatibility with AMD loaders
        // that may not enforce next-turn semantics on modules. Even though general
        // practice for AMD registration is to be anonymous, underscore registers
        // as a named module because, like jQuery, it is a base library that is
        // popular enough to be bundled in a third party lib, but not be part of
        // an AMD load request. Those cases could generate an error when an
        // anonymous define() is called outside of a loader request.
        if (typeof define === 'function' && define.amd) {
          define('underscore', [], function () {
            return _;
          });
        }
      }.call(this));

    }, {}
  ]


  // Events (copier/coller de Clappr.js)
  ,
  58: [
    function (require, module, exports) {
      (function (global) {
        "use strict";
        var _ = require('underscore');
        var slice = Array.prototype.slice;
        var Events = function Events() {
        };
        ($traceurRuntime.createClass)(Events, {
          on: function (name, callback, context) {
            if (!eventsApi(this, 'on', name, [callback, context]) || !callback)
              return this;
            this._events || (this._events = {});
            var events = this._events[name] || (this._events[name] = []);
            events.push({
              callback: callback,
              context: context,
              ctx: context || this
            });
            return this;
          },
          once: function (name, callback, context) {
            if (!eventsApi(this, 'once', name, [callback, context]) || !callback)
              return this;
            var self = this;
            var once = _.once(function () {
              self.off(name, once);
              callback.apply(this, arguments);
            });
            once._callback = callback;
            return this.on(name, once, context);
          },
          off: function (name, callback, context) {
            var retain,
              ev,
              events,
              names,
              i,
              l,
              j,
              k;
            if (!this._events || !eventsApi(this, 'off', name, [callback, context]))
              return this;
            if (!name && !callback && !context) {
              this._events = void 0;
              return this;
            }
            names = name ? [name] : _.keys(this._events);
            for (i = 0, l = names.length; i < l; i++) {
              name = names[i];
              events = this._events[name];
              if (events) {
                this._events[name] = retain = [];
                if (callback || context) {
                  for (j = 0, k = events.length; j < k; j++) {
                    ev = events[j];
                    if ((callback && callback !== ev.callback && callback !== ev.callback._callback) || (context && context !== ev.context)) {
                      retain.push(ev);
                    }
                  }
                }
                if (!retain.length)
                  delete this._events[name];
              }
            }
            return this;
          },
          trigger: function (name) {
            var klass = arguments[arguments.length - 1];
            if (!this._events)
              return this;
            var args = slice.call(arguments, 1);
            if (!eventsApi(this, 'trigger', name, args))
              return this;
            var events = this._events[name];
            var allEvents = this._events.all;
            if (events)
              triggerEvents(events, args);
            if (allEvents)
              triggerEvents(allEvents, arguments);
            return this;
          },
          stopListening: function (obj, name, callback) {
            var listeningTo = this._listeningTo;
            if (!listeningTo)
              return this;
            var remove = !name && !callback;
            if (!callback && typeof name === 'object')
              callback = this;
            if (obj)
              (listeningTo = {})[obj._listenId] = obj;
            for (var id in listeningTo) {
              obj = listeningTo[id];
              obj.off(name, callback, this);
              if (remove || _.isEmpty(obj._events))
                delete this._listeningTo[id];
            }
            return this;
          }
        }, {});
        var eventSplitter = /\s+/;
        var eventsApi = function (obj, action, name, rest) {
          if (!name)
            return true;
          if (typeof name === 'object') {
            for (var key in name) {
              obj[action].apply(obj, [key, name[key]].concat(rest));
            }
            return false;
          }
          if (eventSplitter.test(name)) {
            var names = name.split(eventSplitter);
            for (var i = 0,
                   l = names.length; i < l; i++) {
              obj[action].apply(obj, [names[i]].concat(rest));
            }
            return false;
          }
          return true;
        };
        var triggerEvents = function (events, args) {
          var ev,
            i = -1,
            l = events.length,
            a1 = args[0],
            a2 = args[1],
            a3 = args[2];
          switch (args.length) {
            case 0:
              while (++i < l)
                (ev = events[i]).callback.call(ev.ctx);
              return;
            case 1:
              while (++i < l)
                (ev = events[i]).callback.call(ev.ctx, a1);
              return;
            case 2:
              while (++i < l)
                (ev = events[i]).callback.call(ev.ctx, a1, a2);
              return;
            case 3:
              while (++i < l)
                (ev = events[i]).callback.call(ev.ctx, a1, a2, a3);
              return;
            default:
              while (++i < l)
                (ev = events[i]).callback.apply(ev.ctx, args);
              return;
          }
        };
        var listenMethods = {
          listenTo: 'on',
          listenToOnce: 'once'
        };
        _.each(listenMethods, function (implementation, method) {
          Events.prototype[method] = function (obj, name, callback) {
            var listeningTo = this._listeningTo || (this._listeningTo = {});
            var id = obj._listenId || (obj._listenId = _.uniqueId('l'));
            listeningTo[id] = obj;
            if (!callback && typeof name === 'object')
              callback = this;
            obj[implementation](name, callback, this);
            return this;
          };
        });
        module.exports = Events;


      }).call(this, typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
    }, {
      "underscore": 57
    }
  ]




  // Mediator (copier/coller de Clappr.js)
  ,
  59: [
    function (require, module, exports) {
      "use strict";
      var Events = require('../base/events');
      var events = new Events();
      var Mediator = function Mediator() {
      };
      ($traceurRuntime.createClass)(Mediator, {}, {});
      Mediator.on = function (name, callback, context) {
        events.on(name, callback, context);
        return;
      };
      Mediator.once = function (name, callback, context) {
        events.once(name, callback, context);
        return;
      };
      Mediator.off = function (name, callback, context) {
        events.off(name, callback, context);
        return;
      };
      Mediator.trigger = function (name, opts) {
        events.trigger(name, opts);
        return;
      };
      Mediator.stopListening = function (obj, name, callback) {
        events.stopListening(obj, name, callback);
        return;
      };
      module.exports = Mediator;


    }, {
      "../base/events": 58
    }
  ]





  // BaseObject (copier/coller de Clappr.js)
  ,
  "base_object": [
    function (require, module, exports) {
      module.exports = require('2HNVgz');
    }, {}
  ],
  "2HNVgz": [
    function (require, module, exports) {
      "use strict";
      var _ = require('underscore');
      //var extend = require('./utils').extend;
      var Events = require('./events');
      var pluginOptions = ['container'];
      var BaseObject = function BaseObject(options) {
        this.uniqueId = _.uniqueId('o');
        options || (options = {});
        _.extend(this, _.pick(options, pluginOptions));
      };
      ($traceurRuntime.createClass)(BaseObject, {}, {}, Events);
      //BaseObject.extend = extend;
      module.exports = BaseObject;


    }, {
      "./events": 58,
      /*"./utils":24,*/ "underscore": 57
    }
  ]


}, {}, [5, 1])

(function UMDish(name, context, definition) {
  context[name] = definition.call(context);
  if (typeof module !== "undefined" && module.exports) {
    module.exports = context[name];
  } else if (typeof define == "function" && define.amd) {
    define(function reference() {
      return context[name];
    });
  }
})("Primus", this, function Primus() {/*globals require, define */
  'use strict';

  /**
   * Representation of a single EventEmitter function.
   *
   * @param {Function} fn Event handler to be called.
   * @param {Mixed} context Context for function execution.
   * @param {Boolean} once Only emit once
   * @api private
   */
  function EE(fn, context, once) {
    this.fn = fn;
    this.context = context;
    this.once = once || false;
  }

  /**
   * Minimal EventEmitter interface that is molded against the Node.js
   * EventEmitter interface.
   *
   * @constructor
   * @api public
   */
  function EventEmitter() { /* Nothing to set */
  }

  /**
   * Holds the assigned EventEmitters by name.
   *
   * @type {Object}
   * @private
   */
  EventEmitter.prototype._events = undefined;

  /**
   * Return a list of assigned event listeners.
   *
   * @param {String} event The events that should be listed.
   * @returns {Array}
   * @api public
   */
  EventEmitter.prototype.listeners = function listeners(event) {
    if (!this._events || !this._events[event]) return [];

    for (var i = 0, l = this._events[event].length, ee = []; i < l; i++) {
      ee.push(this._events[event][i].fn);
    }

    return ee;
  };

  /**
   * Emit an event to all registered event listeners.
   *
   * @param {String} event The name of the event.
   * @returns {Boolean} Indication if we've emitted an event.
   * @api public
   */
  EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {
    if (!this._events || !this._events[event]) return false;

    var listeners = this._events[event]
      , length = listeners.length
      , len = arguments.length
      , ee = listeners[0]
      , args
      , i, j;

    if (1 === length) {
      if (ee.once) this.removeListener(event, ee.fn, true);

      switch (len) {
        case 1:
          return ee.fn.call(ee.context), true;
        case 2:
          return ee.fn.call(ee.context, a1), true;
        case 3:
          return ee.fn.call(ee.context, a1, a2), true;
        case 4:
          return ee.fn.call(ee.context, a1, a2, a3), true;
        case 5:
          return ee.fn.call(ee.context, a1, a2, a3, a4), true;
        case 6:
          return ee.fn.call(ee.context, a1, a2, a3, a4, a5), true;
      }

      for (i = 1, args = new Array(len - 1); i < len; i++) {
        args[i - 1] = arguments[i];
      }

      ee.fn.apply(ee.context, args);
    } else {
      for (i = 0; i < length; i++) {
        if (listeners[i].once) this.removeListener(event, listeners[i].fn, true);

        switch (len) {
          case 1:
            listeners[i].fn.call(listeners[i].context);
            break;
          case 2:
            listeners[i].fn.call(listeners[i].context, a1);
            break;
          case 3:
            listeners[i].fn.call(listeners[i].context, a1, a2);
            break;
          default:
            if (!args) for (j = 1, args = new Array(len - 1); j < len; j++) {
              args[j - 1] = arguments[j];
            }

            listeners[i].fn.apply(listeners[i].context, args);
        }
      }
    }

    return true;
  };

  /**
   * Register a new EventListener for the given event.
   *
   * @param {String} event Name of the event.
   * @param {Functon} fn Callback function.
   * @param {Mixed} context The context of the function.
   * @api public
   */
  EventEmitter.prototype.on = function on(event, fn, context) {
    if (!this._events) this._events = {};
    if (!this._events[event]) this._events[event] = [];
    this._events[event].push(new EE(fn, context || this));

    return this;
  };

  /**
   * Add an EventListener that's only called once.
   *
   * @param {String} event Name of the event.
   * @param {Function} fn Callback function.
   * @param {Mixed} context The context of the function.
   * @api public
   */
  EventEmitter.prototype.once = function once(event, fn, context) {
    if (!this._events) this._events = {};
    if (!this._events[event]) this._events[event] = [];
    this._events[event].push(new EE(fn, context || this, true));

    return this;
  };

  /**
   * Remove event listeners.
   *
   * @param {String} event The event we want to remove.
   * @param {Function} fn The listener that we need to find.
   * @param {Boolean} once Only remove once listeners.
   * @api public
   */
  EventEmitter.prototype.removeListener = function removeListener(event, fn, once) {
    if (!this._events || !this._events[event]) return this;

    var listeners = this._events[event]
      , events = [];

    if (fn) for (var i = 0, length = listeners.length; i < length; i++) {
      if (listeners[i].fn !== fn && listeners[i].once !== once) {
        events.push(listeners[i]);
      }
    }

    //
    // Reset the array, or remove it completely if we have no more listeners.
    //
    if (events.length) this._events[event] = events;
    else this._events[event] = null;

    return this;
  };

  /**
   * Remove all listeners or only the listeners for the specified event.
   *
   * @param {String} event The event want to remove all listeners for.
   * @api public
   */
  EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {
    if (!this._events) return this;

    if (event) this._events[event] = null;
    else this._events = {};

    return this;
  };

//
// Alias methods names because people roll like that.
//
  EventEmitter.prototype.off = EventEmitter.prototype.removeListener;
  EventEmitter.prototype.addListener = EventEmitter.prototype.on;

//
// This function doesn't apply anymore.
//
  EventEmitter.prototype.setMaxListeners = function setMaxListeners() {
    return this;
  };

  /**
   * Context assertion, ensure that some of our public Primus methods are called
   * with the correct context to ensure that
   *
   * @param {Primus} self The context of the function.
   * @param {String} method The method name.
   * @api private
   */
  function context(self, method) {
    if (self instanceof Primus) return;

    var failure = new Error('Primus#' + method + '\'s context should called with a Primus instance');

    if ('function' !== typeof self.listeners || !self.listeners('error').length) {
      throw failure;
    }

    self.emit('error', failure);
  }

//
// Sets the default connection URL, it uses the default origin of the browser
// when supported but degrades for older browsers. In Node.js, we cannot guess
// where the user wants to connect to, so we just default to localhost.
//
  var defaultUrl;

  try {
    if (location.origin) {
      defaultUrl = location.origin;
    } else {
      defaultUrl = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '');
    }
  } catch (e) {
    defaultUrl = 'http://127.0.0.1';
  }

  /**
   * Primus in a real-time library agnostic framework for establishing real-time
   * connections with servers.
   *
   * Options:
   * - reconnect, configuration for the reconnect process.
   * - manual, don't automatically call `.open` to start the connection.
   * - websockets, force the use of WebSockets, even when you should avoid them.
   * - timeout, connect timeout, server didn't respond in a timely manner.
   * - ping, The heartbeat interval for sending a ping packet to the server.
   * - pong, The heartbeat timeout for receiving a response to the ping.
   * - network, Use network events as leading method for network connection drops.
   * - strategy, Reconnection strategies.
   * - transport, Transport options.
   * - url, uri, The URL to use connect with the server.
   *
   * @constructor
   * @param {String} url The URL of your server.
   * @param {Object} options The configuration.
   * @api public
   */
  function Primus(url, options) {
    if (!(this instanceof Primus)) return new Primus(url, options);
    if ('function' !== typeof this.client) {
      var message = 'The client library has not been compiled correctly, ' +
        'see https://github.com/primus/primus#client-library for more details';
      return this.critical(new Error(message));
    }

    if ('object' === typeof url) {
      options = url;
      url = options.url || options.uri || defaultUrl;
    } else {
      options = options || {};
    }

    var primus = this;

    // The maximum number of messages that can be placed in queue.
    options.queueSize = 'queueSize' in options ? options.queueSize : Infinity;

    // Connection timeout duration.
    options.timeout = 'timeout' in options ? options.timeout : 10e3;

    // Stores the back off configuration.
    options.reconnect = 'reconnect' in options ? options.reconnect : {};

    // Heartbeat ping interval.
    options.ping = 'ping' in options ? options.ping : 25000;

    // Heartbeat pong response timeout.
    options.pong = 'pong' in options ? options.pong : 10e3;

    // Reconnect strategies.
    options.strategy = 'strategy' in options ? options.strategy : [];

    // Custom transport options.
    options.transport = 'transport' in options ? options.transport : {};

    primus.buffer = [];                           // Stores premature send data.
    primus.writable = true;                       // Silly stream compatibility.
    primus.readable = true;                       // Silly stream compatibility.
    primus.url = primus.parse(url || defaultUrl); // Parse the URL to a readable format.
    primus.readyState = Primus.CLOSED;            // The readyState of the connection.
    primus.options = options;                     // Reference to the supplied options.
    primus.timers = {};                           // Contains all our timers.
    primus.attempt = null;                        // Current back off attempt.
    primus.socket = null;                         // Reference to the internal connection.
    primus.latency = 0;                           // Latency between messages.
    primus.stamps = 0;                            // Counter to make timestamps unqiue.
    primus.disconnect = false;                    // Did we receive a disconnect packet?
    primus.transport = options.transport;         // Transport options.
    primus.transformers = {                       // Message transformers.
      outgoing: [],
      incoming: []
    };

    //
    // Parse the reconnection strategy. It can have the following strategies:
    //
    // - timeout: Reconnect when we have a network timeout.
    // - disconnect: Reconnect when we have an unexpected disconnect.
    // - online: Reconnect when we're back online.
    //
    if ('string' === typeof options.strategy) {
      options.strategy = options.strategy.split(/\s?\,\s?/g);
    }

    if (false === options.strategy) {
      //
      // Strategies are disabled, but we still need an empty array to join it in
      // to nothing.
      //
      options.strategy = [];
    } else if (!options.strategy.length) {
      options.strategy.push('disconnect', 'online');

      //
      // Timeout based reconnection should only be enabled conditionally. When
      // authorization is enabled it could trigger.
      //
      if (!this.authorization) options.strategy.push('timeout');
    }

    options.strategy = options.strategy.join(',').toLowerCase();

    //
    // Only initialise the EventEmitter interface if we're running in a plain
    // browser environment. The Stream interface is inherited differently when it
    // runs on browserify and on Node.js.
    //
    if (!Stream) EventEmitter.call(primus);

    //
    // Force the use of WebSockets, even when we've detected some potential
    // broken WebSocket implementation.
    //
    if ('websockets' in options) {
      primus.AVOID_WEBSOCKETS = !options.websockets;
    }

    //
    // Force or disable the use of NETWORK events as leading client side
    // disconnection detection.
    //
    if ('network' in options) {
      primus.NETWORK_EVENTS = options.network;
    }

    //
    // Check if the user wants to manually initialise a connection. If they don't,
    // we want to do it after a really small timeout so we give the users enough
    // time to listen for `error` events etc.
    //
    if (!options.manual) primus.timers.open = setTimeout(function open() {
      primus.clearTimeout('open').open();
    }, 0);

    primus.initialise(options);
  }

  /**
   * Simple require wrapper to make browserify, node and require.js play nice.
   *
   * @param {String} name The module to require.
   * @returns {Object|Undefined} The module that we required.
   * @api private
   */
  Primus.require = function requires(name) {
    if ('function' !== typeof require) return undefined;

    return !('function' === typeof define && define.amd)
      ? require(name)
      : undefined;
  };

//
// It's possible that we're running in Node.js or in a Node.js compatible
// environment such as browserify. In these cases we want to use some build in
// libraries to minimize our dependence on the DOM.
//
  var Stream, parse;

  try {
    Primus.Stream = Stream = Primus.require('stream');
    parse = Primus.require('url').parse;

    //
    // Normally inheritance is done in the same way as we do in our catch
    // statement. But due to changes to the EventEmitter interface in Node 0.10
    // this will trigger annoying memory leak warnings and other potential issues
    // outlined in the issue linked below.
    //
    // @see https://github.com/joyent/node/issues/4971
    //
    Primus.require('util').inherits(Primus, Stream);
  } catch (e) {
    Primus.Stream = EventEmitter;
    Primus.prototype = new EventEmitter();

    //
    // In the browsers we can leverage the DOM to parse the URL for us. It will
    // automatically default to host of the current server when we supply it path
    // etc.
    //
    parse = function parse(url) {
      var a = document.createElement('a')
        , data = {}
        , key;

      a.href = url;

      //
      // Transform it from a readOnly object to a read/writable object so we can
      // change some parsed values. This is required if we ever want to override
      // a port number etc. (as browsers remove port 443 and 80 from the URL's).
      //
      for (key in a) {
        if ('string' === typeof a[key] || 'number' === typeof a[key]) {
          data[key] = a[key];
        }
      }

      //
      // If we don't obtain a port number (e.g. when using zombie) then try
      // and guess at a value from the 'href' value.
      //
      if (!data.port) {
        var splits = (data.href || '').split('/');
        if (splits.length > 2) {
          var host = splits[2]
            , atSignIndex = host.lastIndexOf('@');

          if (~atSignIndex) host = host.slice(atSignIndex + 1);

          splits = host.split(':');
          if (splits.length === 2) data.port = splits[1];
        }
      }

      //
      // IE quirk: The `protocol` is parsed as ":" when a protocol agnostic URL
      // is used. In this case we extract the value from the `href` value.
      //
      if (':' === data.protocol) {
        data.protocol = data.href.substr(0, data.href.indexOf(':') + 1);
      }

      //
      // Safari 5.1.7 (windows) quirk: When parsing a URL without a port number
      // the `port` in the data object will default to "0" instead of the expected
      // "". We're going to do an explicit check on "0" and force it to "".
      //
      if ('0' === data.port) data.port = '';

      //
      // Browsers do not parse authorization information, so we need to extract
      // that from the URL.
      //
      if (~data.href.indexOf('@') && !data.auth) {
        var start = data.protocol.length + 2;
        data.auth = data.href.slice(start, data.href.indexOf(data.pathname, start)).split('@')[0];
      }

      return data;
    };
  }

  /**
   * Primus readyStates, used internally to set the correct ready state.
   *
   * @type {Number}
   * @private
   */
  Primus.OPENING = 1;   // We're opening the connection.
  Primus.CLOSED = 2;   // No active connection.
  Primus.OPEN = 3;   // The connection is open.

  /**
   * Are we working with a potentially broken WebSockets implementation? This
   * boolean can be used by transformers to remove `WebSockets` from their
   * supported transports.
   *
   * @type {Boolean}
   * @private
   */
  Primus.prototype.AVOID_WEBSOCKETS = false;

  /**
   * Some browsers support registering emitting `online` and `offline` events when
   * the connection has been dropped on the client. We're going to detect it in
   * a simple `try {} catch (e) {}` statement so we don't have to do complicated
   * feature detection.
   *
   * @type {Boolean}
   * @private
   */
  Primus.prototype.NETWORK_EVENTS = false;
  Primus.prototype.online = true;

  try {
    if (
      Primus.prototype.NETWORK_EVENTS = 'onLine' in navigator
        && (window.addEventListener || document.body.attachEvent)
    ) {
      if (!navigator.onLine) {
        Primus.prototype.online = false;
      }
    }
  } catch (e) {
  }

  /**
   * The Ark contains all our plugins definitions. It's namespaced by
   * name => plugin.
   *
   * @type {Object}
   * @private
   */
  Primus.prototype.ark = {};

  /**
   * Return the given plugin.
   *
   * @param {String} name The name of the plugin.
   * @returns {Object|undefined} The plugin or undefined.
   * @api public
   */
  Primus.prototype.plugin = function plugin(name) {
    context(this, 'plugin');

    if (name) return this.ark[name];

    var plugins = {};

    for (name in this.ark) {
      plugins[name] = this.ark[name];
    }

    return plugins;
  };

  /**
   * Checks if the given event is an emitted event by Primus.
   *
   * @param {String} evt The event name.
   * @returns {Boolean} Indication of the event is reserved for internal use.
   * @api public
   */
  Primus.prototype.reserved = function reserved(evt) {
    return (/^(incoming|outgoing)::/).test(evt)
      || evt in this.reserved.events;
  };

  /**
   * The actual events that are used by the client.
   *
   * @type {Object}
   * @public
   */
  Primus.prototype.reserved.events = {
    readyStateChange: 1,
    reconnecting: 1,
    reconnected: 1,
    reconnect: 1,
    offline: 1,
    timeout: 1,
    online: 1,
    error: 1,
    close: 1,
    open: 1,
    data: 1,
    end: 1
  };

  /**
   * Initialise the Primus and setup all parsers and internal listeners.
   *
   * @param {Object} options The original options object.
   * @returns {Primus}
   * @api private
   */
  Primus.prototype.initialise = function initialise(options) {
    var primus = this
      , start;

    primus.on('outgoing::open', function opening() {
      var readyState = primus.readyState;

      primus.readyState = Primus.OPENING;
      if (readyState !== primus.readyState) {
        primus.emit('readyStateChange', 'opening');
      }

      start = +new Date();
    });

    primus.on('incoming::open', function opened() {
      var readyState = primus.readyState
        , reconnect = primus.attempt;

      if (primus.attempt) primus.attempt = null;

      //
      // The connection has been openend so we should set our state to
      // (writ|read)able so our stream compatibility works as intended.
      //
      primus.writable = true;
      primus.readable = true;

      //
      // Make sure we are flagged as `online` as we've successfully opened the
      // connection.
      //
      if (!primus.online) {
        primus.online = true;
        primus.emit('online');
      }

      primus.readyState = Primus.OPEN;
      if (readyState !== primus.readyState) {
        primus.emit('readyStateChange', 'open');
      }

      primus.latency = +new Date() - start;

      primus.emit('open');
      if (reconnect) primus.emit('reconnected');

      primus.clearTimeout('ping', 'pong').heartbeat();

      if (primus.buffer.length) {
        var data = primus.buffer.slice()
          , length = data.length
          , i = 0;

        primus.buffer.length = 0;

        for (; i < length; i++) {
          primus._write(data[i]);
        }
      }
    });

    primus.on('incoming::pong', function pong(time) {
      primus.online = true;
      primus.clearTimeout('pong').heartbeat();

      primus.latency = (+new Date()) - time;
    });

    primus.on('incoming::error', function error(e) {
      var connect = primus.timers.connect
        , err = e;

      //
      // We're still doing a reconnect attempt, it could be that we failed to
      // connect because the server was down. Failing connect attempts should
      // always emit an `error` event instead of a `open` event.
      //
      if (primus.attempt) return primus.reconnect();

      //
      // When the error is not an Error instance we try to normalize it.
      //
      if ('string' === typeof e) {
        err = new Error(e);
      } else if (!(e instanceof Error) && 'object' === typeof e) {
        //
        // BrowserChannel and SockJS returns an object which contains some
        // details of the error. In order to have a proper error we "copy" the
        // details in an Error instance.
        //
        err = new Error(e.message || e.reason);
        for (var key in e) {
          if (e.hasOwnProperty(key)) err[key] = e[key];
        }
      }
      if (primus.listeners('error').length) primus.emit('error', err);

      //
      // We received an error while connecting, this most likely the result of an
      // unauthorized access to the server. But this something that is only
      // triggered for Node based connections. Browsers trigger the error event.
      //
      if (connect) {
        if (~primus.options.strategy.indexOf('timeout')) primus.reconnect();
        else primus.end();
      }
    });

    primus.on('incoming::data', function message(raw) {
      primus.decoder(raw, function decoding(err, data) {
        //
        // Do a "save" emit('error') when we fail to parse a message. We don't
        // want to throw here as listening to errors should be optional.
        //
        if (err) return primus.listeners('error').length && primus.emit('error', err);

        //
        // Handle all "primus::" prefixed protocol messages.
        //
        if (primus.protocol(data)) return;
        primus.transforms(primus, primus, 'incoming', data, raw);
      });
    });

    primus.on('incoming::end', function end() {
      var readyState = primus.readyState;

      //
      // This `end` started with the receiving of a primus::server::close packet
      // which indicated that the user/developer on the server closed the
      // connection and it was not a result of a network disruption. So we should
      // kill the connection without doing a reconnect.
      //
      if (primus.disconnect) {
        primus.disconnect = false;
        return primus.end();
      }

      //
      // Always set the readyState to closed, and if we're still connecting, close
      // the connection so we're sure that everything after this if statement block
      // is only executed because our readyState is set to `open`.
      //
      primus.readyState = Primus.CLOSED;
      if (readyState !== primus.readyState) {
        primus.emit('readyStateChange', 'end');
      }

      if (primus.timers.connect) primus.end();
      if (readyState !== Primus.OPEN) return;

      this.writable = false;
      this.readable = false;

      //
      // Clear all timers in case we're not going to reconnect.
      //
      for (var timeout in this.timers) {
        this.clearTimeout(timeout);
      }

      //
      // Fire the `close` event as an indication of connection disruption.
      // This is also fired by `primus#end` so it is emitted in all cases.
      //
      primus.emit('close');

      //
      // The disconnect was unintentional, probably because the server has
      // shutdown, so if the reconnection is enabled start a reconnect procedure.
      //
      if (~primus.options.strategy.indexOf('disconnect')) {
        return primus.reconnect();
      }

      primus.emit('outgoing::end');
      primus.emit('end');
    });

    //
    // Setup the real-time client.
    //
    primus.client();

    //
    // Process the potential plugins.
    //
    for (var plugin in primus.ark) {
      primus.ark[plugin].call(primus, primus, options);
    }

    //
    // NOTE: The following code is only required if we're supporting network
    // events as it requires access to browser globals.
    //
    if (!primus.NETWORK_EVENTS) return primus;

    /**
     * Handler for offline notifications.
     *
     * @api private
     */
    function offline() {
      if (!primus.online) return; // Already or still offline, bailout.

      primus.online = false;
      primus.emit('offline');
      primus.end();
    }

    /**
     * Handler for online notifications.
     *
     * @api private
     */
    function online() {
      if (primus.online) return; // Already or still online, bailout

      primus.online = true;
      primus.emit('online');

      if (~primus.options.strategy.indexOf('online')) primus.reconnect();
    }

    if (window.addEventListener) {
      window.addEventListener('offline', offline, false);
      window.addEventListener('online', online, false);
    } else if (document.body.attachEvent) {
      document.body.attachEvent('onoffline', offline);
      document.body.attachEvent('ononline', online);
    }

    return primus;
  };

  /**
   * Really dead simple protocol parser. We simply assume that every message that
   * is prefixed with `primus::` could be used as some sort of protocol definition
   * for Primus.
   *
   * @param {String} msg The data.
   * @returns {Boolean} Is a protocol message.
   * @api private
   */
  Primus.prototype.protocol = function protocol(msg) {
    if (
      'string' !== typeof msg
      || msg.indexOf('primus::') !== 0
    ) return false;

    var last = msg.indexOf(':', 8)
      , value = msg.slice(last + 2);

    switch (msg.slice(8, last)) {
      case 'pong':
        this.emit('incoming::pong', value);
        break;

      case 'server':
        //
        // The server is closing the connection, forcefully disconnect so we don't
        // reconnect again.
        //
        if ('close' === value) {
          this.disconnect = true;
        }
        break;

      case 'id':
        this.emit('incoming::id', value);
        break;

      //
      // Unknown protocol, somebody is probably sending `primus::` prefixed
      // messages.
      //
      default:
        return false;
    }

    return true;
  };

  /**
   * Execute the set of message transformers from Primus on the incoming or
   * outgoing message.
   * This function and it's content should be in sync with Spark#transforms in
   * spark.js.
   *
   * @param {Primus} primus Reference to the Primus instance with message transformers.
   * @param {Spark|Primus} connection Connection that receives or sends data.
   * @param {String} type The type of message, 'incoming' or 'outgoing'.
   * @param {Mixed} data The data to send or that has been received.
   * @param {String} raw The raw encoded data.
   * @returns {Primus}
   * @api public
   */
  Primus.prototype.transforms = function transforms(primus, connection, type, data, raw) {
    var packet = {data: data}
      , fns = primus.transformers[type];

    //
    // Iterate in series over the message transformers so we can allow optional
    // asynchronous execution of message transformers which could for example
    // retrieve additional data from the server, do extra decoding or even
    // message validation.
    //
    (function transform(index, done) {
      var transformer = fns[index++];

      if (!transformer) return done();

      if (1 === transformer.length) {
        if (false === transformer.call(connection, packet)) {
          //
          // When false is returned by an incoming transformer it means that's
          // being handled by the transformer and we should not emit the `data`
          // event.
          //
          return;
        }

        return transform(index, done);
      }

      transformer.call(connection, packet, function finished(err, arg) {
        if (err) return connection.emit('error', err);
        if (false === arg) return;

        transform(index, done);
      });
    }(0, function done() {
      //
      // We always emit 2 arguments for the data event, the first argument is the
      // parsed data and the second argument is the raw string that we received.
      // This allows you, for example, to do some validation on the parsed data
      // and then save the raw string in your database without the stringify
      // overhead.
      //
      if ('incoming' === type) return connection.emit('data', packet.data, raw);

      connection._write(packet.data);
    }));

    return this;
  };

  /**
   * Retrieve the current id from the server.
   *
   * @param {Function} fn Callback function.
   * @returns {Primus}
   * @api public
   */
  Primus.prototype.id = function id(fn) {
    if (this.socket && this.socket.id) return fn(this.socket.id);

    this._write('primus::id::');
    return this.once('incoming::id', fn);
  };

  /**
   * Establish a connection with the server. When this function is called we
   * assume that we don't have any open connections. If you do call it when you
   * have a connection open, it could cause duplicate connections.
   *
   * @returns {Primus}
   * @api public
   */
  Primus.prototype.open = function open() {
    context(this, 'open');

    //
    // Only start a `connection timeout` procedure if we're not reconnecting as
    // that shouldn't count as an initial connection. This should be started
    // before the connection is opened to capture failing connections and kill the
    // timeout.
    //
    if (!this.attempt && this.options.timeout) this.timeout();

    this.emit('outgoing::open');
    return this;
  };

  /**
   * Send a new message.
   *
   * @param {Mixed} data The data that needs to be written.
   * @returns {Boolean} Always returns true as we don't support back pressure.
   * @api public
   */
  Primus.prototype.write = function write(data) {
    context(this, 'write');
    this.transforms(this, this, 'outgoing', data);

    return true;
  };

  /**
   * The actual message writer.
   *
   * @param {Mixed} data The message that needs to be written.
   * @returns {Boolean} Successful write to the underlaying transport.
   * @api private
   */
  Primus.prototype._write = function write(data) {
    var primus = this;

    //
    // The connection is closed, normally this would already be done in the
    // `spark.write` method, but as `_write` is used internally, we should also
    // add the same check here to prevent potential crashes by writing to a dead
    // socket.
    //
    if (Primus.OPEN !== primus.readyState) {
      //
      // If the buffer is at capacity, remove the first item.
      //
      if (this.buffer.length === this.options.queueSize) {
        this.buffer.splice(0, 1);
      }

      this.buffer.push(data);
      return false;
    }

    primus.encoder(data, function encoded(err, packet) {
      //
      // Do a "save" emit('error') when we fail to parse a message. We don't
      // want to throw here as listening to errors should be optional.
      //
      if (err) return primus.listeners('error').length && primus.emit('error', err);
      primus.emit('outgoing::data', packet);
    });

    return true;
  };

  /**
   * Send a new heartbeat over the connection to ensure that we're still
   * connected and our internet connection didn't drop. We cannot use server side
   * heartbeats for this unfortunately.
   *
   * @returns {Primus}
   * @api private
   */
  Primus.prototype.heartbeat = function heartbeat() {
    var primus = this;

    if (!primus.options.ping) return primus;

    /**
     * Exterminate the connection as we've timed out.
     *
     * @api private
     */
    function pong() {
      primus.clearTimeout('pong');

      //
      // The network events already captured the offline event.
      //
      if (!primus.online) return;

      primus.online = false;
      primus.emit('offline');
      primus.emit('incoming::end');
    }

    /**
     * We should send a ping message to the server.
     *
     * @api private
     */
    function ping() {
      var value = +new Date();

      primus.clearTimeout('ping')._write('primus::ping::' + value);
      primus.emit('outgoing::ping', value);
      primus.timers.pong = setTimeout(pong, primus.options.pong);
    }

    primus.timers.ping = setTimeout(ping, primus.options.ping);
    return this;
  };

  /**
   * Start a connection timeout.
   *
   * @returns {Primus}
   * @api private
   */
  Primus.prototype.timeout = function timeout() {
    var primus = this;

    /**
     * Remove all references to the timeout listener as we've received an event
     * that can be used to determine state.
     *
     * @api private
     */
    function remove() {
      primus.removeListener('error', remove)
        .removeListener('open', remove)
        .removeListener('end', remove)
        .clearTimeout('connect');
    }

    primus.timers.connect = setTimeout(function expired() {
      remove(); // Clean up old references.

      if (primus.readyState === Primus.OPEN || primus.attempt) return;

      primus.emit('timeout');

      //
      // We failed to connect to the server.
      //
      if (~primus.options.strategy.indexOf('timeout')) primus.reconnect();
      else primus.end();
    }, primus.options.timeout);

    return primus.on('error', remove)
      .on('open', remove)
      .on('end', remove);
  };

  /**
   * Properly clean up all `setTimeout` references.
   *
   * @param {String} ..args.. The names of the timeout's we need clear.
   * @returns {Primus}
   * @api private
   */
  Primus.prototype.clearTimeout = function clear() {
    for (var args = arguments, i = 0, l = args.length; i < l; i++) {
      if (this.timers[args[i]]) clearTimeout(this.timers[args[i]]);
      delete this.timers[args[i]];
    }

    return this;
  };

  /**
   * Exponential back off algorithm for retry operations. It uses an randomized
   * retry so we don't DDOS our server when it goes down under pressure.
   *
   * @param {Function} callback Callback to be called after the timeout.
   * @param {Object} opts Options for configuring the timeout.
   * @returns {Primus}
   * @api private
   */
  Primus.prototype.backoff = function backoff(callback, opts) {
    opts = opts || {};

    var primus = this;

    //
    // Bailout when we already have a backoff process running. We shouldn't call
    // the callback then as it might cause an unexpected `end` event as another
    // reconnect process is already running.
    //
    if (opts.backoff) return primus;

    opts.maxDelay = 'maxDelay' in opts ? opts.maxDelay : Infinity;  // Maximum delay.
    opts.minDelay = 'minDelay' in opts ? opts.minDelay : 500;       // Minimum delay.
    opts.retries = 'retries' in opts ? opts.retries : 10;           // Allowed retries.
    opts.attempt = (+opts.attempt || 0) + 1;                        // Current attempt.
    opts.factor = 'factor' in opts ? opts.factor : 2;               // Back off factor.

    //
    // Bailout if we are about to make to much attempts. Please note that we use
    // `>` because we already incremented the value above.
    //
    if (opts.attempt > opts.retries) {
      callback(new Error('Unable to retry'), opts);
      return primus;
    }

    //
    // Prevent duplicate back off attempts using the same options object.
    //
    opts.backoff = true;

    //
    // Calculate the timeout, but make it randomly so we don't retry connections
    // at the same interval and defeat the purpose. This exponential back off is
    // based on the work of:
    //
    // http://dthain.blogspot.nl/2009/02/exponential-backoff-in-distributed.html
    //
    opts.timeout = opts.attempt !== 1
      ? Math.min(Math.round(
      (Math.random() + 1) * opts.minDelay * Math.pow(opts.factor, opts.attempt)
    ), opts.maxDelay)
      : opts.minDelay;

    primus.timers.reconnect = setTimeout(function delay() {
      opts.backoff = false;
      primus.clearTimeout('reconnect');

      callback(undefined, opts);
    }, opts.timeout);

    //
    // Emit a `reconnecting` event with current reconnect options. This allows
    // them to update the UI and provide their users with feedback.
    //
    primus.emit('reconnecting', opts);

    return primus;
  };

  /**
   * Start a new reconnect procedure.
   *
   * @returns {Primus}
   * @api private
   */
  Primus.prototype.reconnect = function reconnect() {
    var primus = this;

    //
    // Try to re-use the existing attempt.
    //
    primus.attempt = primus.attempt || primus.clone(primus.options.reconnect);

    primus.backoff(function attempt(fail, backoff) {
      if (fail) {
        primus.attempt = null;
        return primus.emit('end');
      }

      //
      // Try to re-open the connection again.
      //
      primus.emit('reconnect', backoff);
      primus.emit('outgoing::reconnect');
    }, primus.attempt);

    return primus;
  };

  /**
   * Close the connection completely.
   *
   * @param {Mixed} data last packet of data.
   * @returns {Primus}
   * @api public
   */
  Primus.prototype.end = function end(data) {
    context(this, 'end');

    if (this.readyState === Primus.CLOSED && !this.timers.connect) {
      //
      // If we are reconnecting stop the reconnection procedure.
      //
      if (this.timers.reconnect) {
        this.clearTimeout('reconnect');
        this.attempt = null;
        this.emit('end');
      }

      return this;
    }

    if (data !== undefined) this.write(data);

    this.writable = false;
    this.readable = false;

    var readyState = this.readyState;
    this.readyState = Primus.CLOSED;

    if (readyState !== this.readyState) {
      this.emit('readyStateChange', 'end');
    }

    for (var timeout in this.timers) {
      this.clearTimeout(timeout);
    }

    this.emit('outgoing::end');
    this.emit('close');
    this.emit('end');

    return this;
  };

  /**
   * Create a shallow clone of a given object.
   *
   * @param {Object} obj The object that needs to be cloned.
   * @returns {Object} Copy.
   * @api private
   */
  Primus.prototype.clone = function clone(obj) {
    return this.merge({}, obj);
  };

  /**
   * Merge different objects in to one target object.
   *
   * @param {Object} target The object where everything should be merged in.
   * @returns {Object} Original target with all merged objects.
   * @api private
   */
  Primus.prototype.merge = function merge(target) {
    var args = Array.prototype.slice.call(arguments, 1);

    for (var i = 0, l = args.length, key, obj; i < l; i++) {
      obj = args[i];

      for (key in obj) {
        if (obj.hasOwnProperty(key)) target[key] = obj[key];
      }
    }

    return target;
  };

  /**
   * Parse the connection string.
   *
   * @type {Function}
   * @param {String} url Connection URL.
   * @returns {Object} Parsed connection.
   * @api private
   */
  Primus.prototype.parse = parse;

  /**
   * Parse a query string.
   *
   * @param {String} query The query string that needs to be parsed.
   * @returns {Object} Parsed query string.
   * @api private
   */
  Primus.prototype.querystring = function querystring(query) {
    var parser = /([^=?&]+)=([^&]*)/g
      , result = {}
      , part;

    //
    // Little nifty parsing hack, leverage the fact that RegExp.exec increments
    // the lastIndex property so we can continue executing this loop until we've
    // parsed all results.
    //
    for (;
      part = parser.exec(query);
      result[decodeURIComponent(part[1])] = decodeURIComponent(part[2])
    );

    return result;
  };

  /**
   * Transform a query string object back in to string equiv.
   *
   * @param {Object} obj The query string object.
   * @returns {String}
   * @api private
   */
  Primus.prototype.querystringify = function querystringify(obj) {
    var pairs = [];

    for (var key in obj) {
      if (obj.hasOwnProperty(key)) {
        pairs.push(encodeURIComponent(key) + '=' + encodeURIComponent(obj[key]));
      }
    }

    return pairs.join('&');
  };

  /**
   * Generates a connection URI.
   *
   * @param {String} protocol The protocol that should used to crate the URI.
   * @returns {String|options} The URL.
   * @api private
   */
  Primus.prototype.uri = function uri(options) {
    var url = this.url
      , server = []
      , qsa = false;

    //
    // Query strings are only allowed when we've received clearance for it.
    //
    if (options.query) qsa = true;

    options = options || {};
    options.protocol = 'protocol' in options ? options.protocol : 'http';
    options.query = url.search && 'query' in options ? (url.search.charAt(0) === '?' ? url.search.slice(1) : url.search) : false;
    options.secure = 'secure' in options ? options.secure : (url.protocol === 'https:' || url.protocol === 'wss:');
    options.auth = 'auth' in options ? options.auth : url.auth;
    options.pathname = 'pathname' in options ? options.pathname : this.pathname.slice(1);
    options.port = 'port' in options ? +options.port : +url.port || (options.secure ? 443 : 80);
    options.host = 'host' in options ? options.host : url.hostname || url.host.replace(':' + url.port, '');

    //
    // Allow transformation of the options before we construct a full URL from it.
    //
    this.emit('outgoing::url', options);

    //
    // `url.host` might be undefined (e.g. when using zombie) so we use the
    // hostname and port defined above.
    //
    var host = (443 !== options.port && 80 !== options.port)
      ? options.host + ':' + options.port
      : options.host;

    //
    // We need to make sure that we create a unique connection URL every time to
    // prevent bfcache back forward cache of becoming an issue. We're doing this
    // by forcing an cache busting query string in to the URL.
    //
    var querystring = this.querystring(options.query || '');
    querystring._primuscb = +new Date() + '-' + this.stamps++;
    options.query = this.querystringify(querystring);

    //
    // Automatically suffix the protocol so we can supply `ws` and `http` and it gets
    // transformed correctly.
    //
    server.push(options.secure ? options.protocol + 's:' : options.protocol + ':', '');

    if (options.auth) server.push(options.auth + '@' + host);
    else server.push(host);

    //
    // Pathnames are optional as some Transformers would just use the pathname
    // directly.
    //
    if (options.pathname) server.push(options.pathname);

    //
    // Optionally add a search query, again, not supported by all Transformers.
    // SockJS is known to throw errors when a query string is included.
    //
    if (qsa) server.push('?' + options.query);
    else delete options.query;

    if (options.object) return options;
    return server.join('/');
  };

  /**
   * Simple emit wrapper that returns a function that emits an event once it's
   * called. This makes it easier for transports to emit specific events. The
   * scope of this function is limited as it will only emit one single argument.
   *
   * @param {String} event Name of the event that we should emit.
   * @param {Function} parser Argument parser.
   * @returns {Function} The wrapped function that will emit events when called.
   * @api public
   */
  Primus.prototype.emits = function emits(event, parser) {
    var primus = this;

    return function emit(arg) {
      var data = parser ? parser.apply(primus, arguments) : arg;

      //
      // Timeout is required to prevent crashes on WebSockets connections on
      // mobile devices. We need to handle these edge cases in our own library
      // as we cannot be certain that all frameworks fix these issues.
      //
      setTimeout(function timeout() {
        primus.emit('incoming::' + event, data);
      }, 0);
    };
  };

  /**
   * Register a new message transformer. This allows you to easily manipulate incoming
   * and outgoing data which is particularity handy for plugins that want to send
   * meta data together with the messages.
   *
   * @param {String} type Incoming or outgoing
   * @param {Function} fn A new message transformer.
   * @returns {Primus}
   * @api public
   */
  Primus.prototype.transform = function transform(type, fn) {
    context(this, 'transform');

    if (!(type in this.transformers)) {
      return this.critical(new Error('Invalid transformer type'));
    }

    this.transformers[type].push(fn);
    return this;
  };

  /**
   * A critical error has occurred, if we have an `error` listener, emit it there.
   * If not, throw it, so we get a stack trace + proper error message.
   *
   * @param {Error} err The critical error.
   * @returns {Primus}
   * @api private
   */
  Primus.prototype.critical = function critical(err) {
    if (this.listeners('error').length) {
      this.emit('error', err);
      return this;
    }

    throw err;
  };

  /**
   * Syntax sugar, adopt a Socket.IO like API.
   *
   * @param {String} url The URL we want to connect to.
   * @param {Object} options Connection options.
   * @returns {Primus}
   * @api public
   */
  Primus.connect = function connect(url, options) {
    return new Primus(url, options);
  };

//
// Expose the EventEmitter so it can be re-used by wrapping libraries we're also
// exposing the Stream interface.
//
  Primus.EventEmitter = EventEmitter;

//
// These libraries are automatically are automatically inserted at the
// server-side using the Primus#library method.
//
  Primus.prototype.client = function client() {
    var primus = this
      , socket;

    //
    // Selects an available WebSocket constructor.
    //
    var Factory = (function factory() {
      if ('undefined' !== typeof WebSocket) return WebSocket;
      if ('undefined' !== typeof MozWebSocket) return MozWebSocket;

      try {
        return Primus.require('ws');
      }
      catch (e) {
      }

      return undefined;
    })();

    if (!Factory) return primus.critical(new Error('Missing required `ws` module. Please run `npm install --save ws`'));


    //
    // Connect to the given URL.
    //
    primus.on('outgoing::open', function opening() {
      primus.emit('outgoing::end');

      //
      // FireFox will throw an error when we try to establish a connection from
      // a secure page to an unsecured WebSocket connection. This is inconsistent
      // behaviour between different browsers. This should ideally be solved in
      // Primus when we connect.
      //
      try {
        var prot = primus.url.protocol === 'ws+unix:' ? 'ws+unix' : 'ws'
          , qsa = prot === 'ws';

        //
        // Only allow primus.transport object in Node.js, it will throw in
        // browsers with a TypeError if we supply to much arguments.
        //
        if (Factory.length === 3) {
          primus.socket = socket = new Factory(
            primus.uri({protocol: prot, query: qsa}),   // URL
            [],                                           // Sub protocols
            primus.transport                              // options.
          );
        } else {
          primus.socket = socket = new Factory(primus.uri({protocol: prot, query: qsa}));
        }
      } catch (e) {
        return primus.emit('error', e);
      }

      //
      // Setup the Event handlers.
      //
      socket.binaryType = 'arraybuffer';
      socket.onopen = primus.emits('open');
      socket.onerror = primus.emits('error');
      socket.onclose = primus.emits('end');
      socket.onmessage = primus.emits('data', function parse(evt) {
        return evt.data;
      });
    });

    //
    // We need to write a new message to the socket.
    //
    primus.on('outgoing::data', function write(message) {
      if (!socket || socket.readyState !== Factory.OPEN) return;

      try {
        socket.send(message);
      }
      catch (e) {
        primus.emit('incoming::error', e);
      }
    });

    //
    // Attempt to reconnect the socket. It assumes that the `outgoing::end` event is
    // called if it failed to disconnect.
    //
    primus.on('outgoing::reconnect', function reconnect() {
      primus.emit('outgoing::end');
      primus.emit('outgoing::open');
    });

    //
    // We need to close the socket.
    //
    primus.on('outgoing::end', function close() {
      if (socket) {
        socket.onerror = socket.onopen = socket.onclose = socket.onmessage = function () {
        };
        socket.close();
        socket = null;
      }
    });
  };
  Primus.prototype.authorization = false;
  Primus.prototype.pathname = "/primus";
  Primus.prototype.encoder = function encoder(data, fn) {
    fn(null, data);
  };
  Primus.prototype.decoder = function decoder(data, fn) {
    // var isString = typeof data == 'string' || (data instanceof String);
    // var firstChar = isString && data.length > 1 && data.charAt(0);
    // var lastChar = isString && data.length > 1 && data.charAt(data.length - 1);

    // if (! isString) {
    //   return fn(null, data);
    // }

    // // if we have been passed what appears to be a JSONified string
    // // then parse it.  This is required for

    fn(null, data);
  };
  Primus.prototype.version = "2.4.8";

//
// Hack 1: \u2028 and \u2029 are allowed inside string in JSON. But JavaScript
// defines them as newline separators. Because no literal newlines are allowed
// in a string this causes a ParseError. We work around this issue by replacing
// these characters with a properly escaped version for those chars. This can
// cause errors with JSONP requests or if the string is just evaluated.
//
// This could have been solved by replacing the data during the "outgoing::data"
// event. But as it affects the JSON encoding in general I've opted for a global
// patch instead so all JSON.stringify operations are save.
//
  if (
    'object' === typeof JSON
    && 'function' === typeof JSON.stringify
    && JSON.stringify(['\u2028\u2029']) === '["\u2028\u2029"]'
  ) {
    JSON.stringify = function replace(stringify) {
      var u2028 = /\u2028/g
        , u2029 = /\u2029/g;

      return function patched(value, replacer, spaces) {
        var result = stringify.call(this, value, replacer, spaces);

        //
        // Replace the bad chars.
        //
        if (result) {
          if (~result.indexOf('\u2028')) result = result.replace(u2028, '\\u2028');
          if (~result.indexOf('\u2029')) result = result.replace(u2029, '\\u2029');
        }

        return result;
      };
    }(JSON.stringify);
  }

  if (
    'undefined' !== typeof document
    && 'undefined' !== typeof navigator
  ) {
    //
    // Hack 2: If you press ESC in FireFox it will close all active connections.
    // Normally this makes sense, when your page is still loading. But versions
    // before FireFox 22 will close all connections including WebSocket connections
    // after page load. One way to prevent this is to do a `preventDefault()` and
    // cancel the operation before it bubbles up to the browsers default handler.
    // It needs to be added as `keydown` event, if it's added keyup it will not be
    // able to prevent the connection from being closed.
    //
    if (document.addEventListener) {
      document.addEventListener('keydown', function keydown(e) {
        if (e.keyCode !== 27 || !e.preventDefault) return;

        e.preventDefault();
      }, false);
    }

    //
    // Hack 3: This is a Mac/Apple bug only, when you're behind a reverse proxy or
    // have you network settings set to `automatic proxy discovery` the safari
    // browser will crash when the WebSocket constructor is initialised. There is
    // no way to detect the usage of these proxies available in JavaScript so we
    // need to do some nasty browser sniffing. This only affects Safari versions
    // lower then 5.1.4
    //
    var ua = (navigator.userAgent || '').toLowerCase()
      , parsed = ua.match(/.+(?:rv|it|ra|ie)[\/: ](\d+)\.(\d+)(?:\.(\d+))?/) || []
      , version = +[parsed[1], parsed[2]].join('.');

    if (
      !~ua.indexOf('chrome')
      && ~ua.indexOf('safari')
      && version < 534.54
    ) {
      Primus.prototype.AVOID_WEBSOCKETS = true;
    }
  }
  return Primus;
});

/**
 * DASH Media Controller
 *
 * @param {vjs.Player} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
videojs.EasyBroadcast = videojs.Dash.extend({
  /** @constructor */
  init: function (player, options, ready) {
    videojs.Dash.call(this, player, options, ready);
  }
});


videojs.options.easybroadcast = {};

videojs.EasyBroadcast.prototype.setSrc = function (source) {
  this.context_ = this.context_ || new DashEB.classes.Context({
      source: source.src
    });
  videojs.Dash.prototype.setSrc.call(this, source);
};

videojs.EasyBroadcast.prototype.onMetricChanged = function (e) {
  if (e.data.stream !== 'video') {
    return;
  }
  var metricsKey = 'p2pweb';
  var metrics = this.getCribbedMetricsFor(metricsKey);
  if (metrics) {
    this.metrics_[metricsKey] = videojs.util.mergeOptions(this.metrics_[metricsKey], metrics);
  }
  videojs.Dash.prototype.onMetricChanged.call(this, e);
};
videojs.EasyBroadcast.prototype.getCribbedMetricsFor = function (type) {
  if (type !== 'p2pweb') {
    return videojs.Dash.prototype.getCribbedMetricsFor.call(this, type);
  }
  var metrics = this.mediaPlayer_.getMetricsFor(type);
  if (metrics) {
    return metrics.metricsP2PWeb;
  }
  else {
    return null;
  }
};
/**
 * Check if HTML5 video is supported by this browser/device
 * @return {Boolean}
 */
videojs.EasyBroadcast.isSupported = function () {
  return videojs.Dash.isSupported();
};

// Add Source Handler pattern functions to this tech
videojs.MediaTechController.withSourceHandlers(videojs.EasyBroadcast);

/**
 * The default native source handler.
 * This simply passes the source to the video element. Nothing fancy.
 * @param  {Object} source   The source object
 * @param  {videojs.Dash} tech  The instance of the HTML5 tech
 */
/*jshint sub:true*/
videojs.EasyBroadcast['nativeSourceHandler'] = {};
/**
 * Check if the video element can handle the source natively
 * @param  {Object} source  The source object
 * @return {String}         'probably', 'maybe', or '' (empty string)
 */
/*jshint sub:true*/
videojs.EasyBroadcast['nativeSourceHandler']['canHandleSource'] = videojs.Dash['nativeSourceHandler']['canHandleSource'];
/**
 * Pass the source to the video element
 * Adaptive source handlers will have more complicated workflows before passing
 * video data to the video element
 * @param  {Object} source    The source object
 * @param  {vjs.Html5} tech   The instance of the Html5 tech
 */
/*jshint sub:true*/
videojs.EasyBroadcast['nativeSourceHandler']['handleSource'] = videojs.Dash['nativeSourceHandler']['handleSource'];

/**
 * Clean up the source handler when disposing the player or switching sources..
 * (no cleanup is needed when supporting the getTracksForformat natively)
 */
/*jshint sub:true*/
videojs.EasyBroadcast['nativeSourceHandler']['dispose'] = videojs.Dash['nativeSourceHandler']['dispose'];

// Register the native source handler
/*jshint sub:true*/
videojs.EasyBroadcast['registerSourceHandler'](videojs.EasyBroadcast['nativeSourceHandler']);

videojs.Html5.prototype.videoTracks = function (tracks) {
  /*jshint sub:true*/
  if (!this['featuresNativeVideoTracks']) {
    return videojs.MediaTechController.prototype.videoTracks.call(this, tracks);
  }

  if (tracks !== undefined) {
    this.el_.videoTracks = tracks;
  }

  return this.el_.videoTracks;
};

videojs.Html5.prototype.audioTracks = function (tracks) {
  /*jshint sub:true*/
  if (!this['featuresNativeAudioTracks']) {
    return videojs.MediaTechController.prototype.audioTracks.call(this, tracks);
  }

  if (tracks !== undefined) {
    this.el_.audioTracks_ = tracks;
  }

  return this.el_.audioTracks;
};

videojs.Html5.supportsNativeTracks = function (type) {
  var supportsTracks;

  supportsTracks = !!videojs.TEST_VID[type + 'Tracks'];
  if (supportsTracks && videojs.TEST_VID[type + 'Tracks'].length > 0) {
    /*jshint sub:true*/
    supportsTracks = typeof videojs.TEST_VID[type + 'Tracks'][0]['mode'] !== 'number';
  }
  if (supportsTracks && videojs.IS_FIREFOX) {
    supportsTracks = false;
  }

  return supportsTracks;
};
/**
 * Sets the tech's status on native video/audio track support
 * @type {Boolean}
 */
//TODO reactiver la gestion du bitrate et du multipiste audio
/*jshint sub:true*/
videojs.Html5.prototype['featuresNativeVideoTracks'] = false;//videojs.Html5.supportsNativeTracks('video');
videojs.Html5.prototype['featuresNativeAudioTracks'] = false;//videojs.Html5.supportsNativeTracks('audio');


videojs.MediaTechController.METRICS_DATA = {
  bandwidth: -1,
  bitrateIndex: 0,
  pendingIndex: '',
  numBitrates: 0,
  bufferLength: 0,
  droppedFrames: 0,
  movingLatency: 0,
  movingDownload: 0,
  movingRatio: 0,
  requestsQueue: 0
};

videojs.MediaTechController.prototype.metrics_ = {
  video: videojs.util.mergeOptions({
    bandwidth: /*this.el().webkitVideoDecodedByteCount ||*/ -1
  }, videojs.MediaTechController.METRICS_DATA),
  audio: videojs.util.mergeOptions({
    bandwidth: /*this.el().webkitAudioDecodedByteCount || */-1
  }, videojs.MediaTechController.METRICS_DATA),
  p2pweb: {
    chunksFromCDN: 0,
    chunksFromP2P: 0,
    chunksSent: 0,
    bufferLength: -1,
    swarmSize: -1,
    p2pRatio: -1,
    startupTime: -1
  }
};


videojs.MediaTechController.prototype.mediaPlayer_ = null;

videojs.MediaTechController.prototype.mediaPlayer = function () {
  return this.mediaPlayer_;
};

/**
 * Get default metrix statistics object
 * @returns {{video: {bandwidth: number}, audio: {bandwidth: number}}}
 */
videojs.MediaTechController.prototype.getPlaybackStatistics = function () {
  return this.metrics_;
};

/**
 * Get default metrix statistics object for specified type
 * @param type
 * @returns {*}
 */
videojs.MediaTechController.prototype.getCribbedMetricsFor = function (type) {
  return this.metrics_[type];
};

videojs.MediaTechController.prototype.videoTracks_ = null;

videojs.MediaTechController.prototype.videoTracks = function (tracks) {
  if (tracks !== undefined) {
    this.videoTracks_ = tracks;
  }
  return this.videoTracks_ || new videojs.TextTrackList();
};

videojs.MediaTechController.prototype.audioTracks_ = null;

videojs.MediaTechController.prototype.audioTracks = function (tracks) {
  if (tracks !== undefined) {
    this.audioTracks_ = tracks;
  }
  return this.audioTracks_ || new videojs.TextTrackList();
};

videojs.MediaTechController.prototype.setAudioTrack = function (track) {
  var tracks = this.player().audioTracks();
  for (var i = 0; i < tracks.length; i++) {
    var audioTrack = tracks[i];
    audioTrack.enabled = audioTrack === track;
  }
  /*jshint sub:true*/
  this['featuresAudioIndex'] = parseInt(track.id || track.index, 10);
  this.trigger('audiochange');
};

/*jshint sub:true*/
videojs.MediaTechController.prototype.setVideoTrack = function (track) {
  var tracks = this.player().videoTracks();
  for (var i = 0; i < tracks.length; i++) {
    var videoTrack = tracks[i];
    videoTrack.enabled = videoTrack.qualityIndex === track.qualityIndex;
  }
  /*jshint sub:true*/
  this['featuresBitrateIndex'] = track.qualityIndex; //AUTO;
  this.trigger('bitratechange');
};

videojs.Osmf = videojs.Flash.extend({
  init: function (player, options, ready) {
    var source, settings;

    source = options.source;
    settings = player.options();

    player.osmf = this;
    options.swf = settings.osmf.swf;

    options.flashVars = {
      'playerId': player.id(),
      'readyFunction': 'videojs.Osmf.onReady',
      'eventProxyFunction': 'videojs.Osmf.onEvent',
      'errorEventProxyFunction': 'videojs.Osmf.onError'
    };

    videojs.Flash.call(this, player, options, ready);
    this.firstplay = false;
    this.loadstart = false;
    player.on('loadeddata', videojs.Osmf.onLoadedData);
    player.on('ended', videojs.Osmf.onEnded);

    options.source = source;
  }
});

videojs.Osmf.formats = {
  'application/adobe-f4m': 'F4M',
  'application/adobe-f4v': 'F4V',
  'application/dash+xml': 'MPD'
};

//

// Create setters and getters for attributes
var api = videojs.Osmf.prototype,
  readWrite = 'preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted'.split(','),
  readOnly = 'error,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight'.split(',');
// Overridden: buffered, currentTime, currentSrc


/**
 * @this {*}
 * @private
 */
var createSetter = function (attr) {
  var attrUpper = attr.charAt(0).toUpperCase() + attr.slice(1);
  api['set' + attrUpper] = function (val) {
    return this.el_.vjs_setProperty(attr, val);
  };
};

/**
 * @this {*}
 * @private
 */
var createGetter = function (attr) {
  api[attr] = function () {
    return this.el_.vjs_getProperty(attr);
  };
};

(function () {
  var i;
  // Create getter and setters for all read/write attributes
  for (i = 0; i < readWrite.length; i++) {
    createGetter(readWrite[i]);
    createSetter(readWrite[i]);
  }

  // Create getters for read-only attributes
  for (i = 0; i < readOnly.length; i++) {
    createGetter(readOnly[i]);
  }
})();

videojs.Osmf.isSupported = function () {
  return videojs.Flash.version()[0] >= 10;
};

// TODO: Figure out rules of support.
videojs.Osmf.canPlaySource = function (srcObj) {
  var type;

  if (!srcObj.type) {
    return '';
  }

  type = srcObj.type.replace(/;.*/, '').toLowerCase();

  if (type in videojs.Osmf.formats) {
    return 'maybe';
  }
};

videojs.Osmf.prototype.play = function () {
  this.el_.vjs_play();
};

videojs.Osmf.prototype.load = function () {
  this.el_.vjs_load();
};

videojs.Osmf.prototype.paused = function () {
  return this.el_.vjs_paused();
};

videojs.Osmf.prototype.pause = function () {
  this.el_.vjs_pause();
};

videojs.Osmf.prototype.currentTime = function (value) {
  if (value) {
    this.el_.vjs_setProperty('currentTime');
  } else {
    return this.el_.vjs_getProperty('currentTime');
  }
};

videojs.Osmf.prototype.streamStatus = function () {
  console.log('you would like status');
  return this.el_.streamStatus();
};


// Event Handlers
videojs.Osmf.onLoadedData = function () {
  var player = this;
  // If autoplay, go
  if (player.options().autoplay) {
    player.play();
  } else if (player.options().preload) {
    player.currentTime(0);
    player.play();
    player.pause();
    player.bigPlayButton.show();
    player.bigPlayButton.one('click', function () {
      player.bigPlayButton.hide();
    });
  }
};

videojs.Osmf.onEnded = function () {
  var player = this;
  if (player.options().loop) {
    player.currentTime(0);
  }
  player.pause();
};

videojs.Osmf.onReady = function (currentSwf) {
  videojs.log('OSMF', 'Ready', currentSwf);

  // Tell Flash tech we are ready
  videojs.Flash.onReady(currentSwf);

  var player = document.getElementById(currentSwf).player;
  var tech = player.tech;

  // Source known on ready rule (i.e. load it)
  if (player.currentSrc() &&
    player.currentSrc().length > 0) {
    tech.el_.vjs_src(player.currentSrc());
  }
};

videojs.Osmf.onError = function (currentSwf, err) {
  var player = document.getElementById(currentSwf).player;

  videojs.log('OSMF', 'Error', err);

  if (err == 'loaderror') {
    err = 'srcnotfound';
  }

  if (player.tech.options_.reconnectOnError && !player.tech.reconnecting_) {
    player.tech.reconnecting_ = true;
    player.trigger("waiting");
    setTimeout(function () {
      player.src(player.currentSrc());
      player.tech.reconnecting_ = false;
      player.error(null);
    }, 5000);
  }

  player.error({code: 4, msg: ""});
};

videojs.Osmf.onEvent = function (currentSwf, event) {
  var player = document.getElementById(currentSwf).player;

  // First Play Rules
  if (event === 'playing' && player.tech.firstplay === false) {
    videojs.log('OSMF', 'Event', currentSwf, 'loadstart');
    player.trigger('loadstart');
    player.tech.loadstart = true;

    videojs.log('OSMF', 'Event', currentSwf, 'firstplay');
    player.trigger('firstplay');
    player.tech.firstplay = true;
  }

  // Mux events here {OSMF vs. VJS/HTML5}
  if (event === 'buffering') {
    event = 'waiting';
  }

  if (event === 'ready') {
    event = 'loadeddata';
  }

  // Fire via Flash tech
  videojs.Flash.onEvent(currentSwf, event);

  // Logging if not a timeupdate
  if (event !== 'timeupdate') {
    videojs.log('OSMF', 'Event', currentSwf, event);
  }
};
//

videojs.Osmf.prototype.supportsFullScreen = function () {
  return false; // Flash does not allow fullscreen through javascript
};

videojs.Osmf.prototype.enterFullScreen = function () {
  return false;
};


// Setup a base object for osmf configuration
videojs.options.osmf = {};

/*! StreamRoot - v1.1.38 - 2015-07-06
 * www.streamroot.io
 * Copyright (c) 2015 StreamRoot; Licensed  */

(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
  function getFlashVersion(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(t){return"6,0,0"}}catch(t){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){}}return"0,0,0"}var UAParser=require("ua-parser-js"),isFlashVersionSupported=function(){var e=getFlashVersion().split(/,|\./);return parseFloat(e[0])>11||11===parseFloat(e[0])&&parseFloat(e[1])>=4},parser=new UAParser;parser.setUA(window.navigator.userAgent);var uaObject=parser.getResult();window.Streamroot=window.Streamroot||{},window.Streamroot.ua=uaObject,window.Streamroot.isStreamrootFlashSupported=function(){var e="mobile"!==uaObject.device.type&&"tablet"!==uaObject.device.type&&"console"!==uaObject.device.type&&("Chrome"===uaObject.browser.name&&uaObject.browser.major>=38||"Chromium"===uaObject.browser.name&&uaObject.browser.major>=38||"Opera"===uaObject.browser.name&&uaObject.browser.major>=26||"Firefox"===uaObject.browser.name&&uaObject.browser.major>=33)&&"Android"!==uaObject.os.name&&"iOS"!==uaObject.os.name&&isFlashVersionSupported();return e},window.Streamroot.isStreamrootHtml5Supported=function(){var e="mobile"!==uaObject.device.type&&"tablet"!==uaObject.device.type&&"console"!==uaObject.device.type&&("Chrome"===uaObject.browser.name&&uaObject.browser.major>=38||"Chromium"===uaObject.browser.name&&uaObject.browser.major>=38)&&"Android"!==uaObject.os.name&&"iOS"!==uaObject.os.name&&void 0!==window.MediaSource;return e},window.Streamroot.isStreamrootSupported=function(){return window.Streamroot.isStreamrootFlashSupported()||window.Streamroot.isStreamrootHtml5Supported()},window.Streamroot.isFlashVersionSupported=isFlashVersionSupported,window.isStreamrootFlashSupported=window.Streamroot.isStreamrootFlashSupported,window.isStreamrootHtml5Supported=window.Streamroot.isStreamrootHtml5Supported,window.isFlashVersionSupported=window.Streamroot.isFlashVersionSupported;var MediaController=require("./js/media/MediaController"),streamrootAPI=function(e,t,r,o){this.dash=new MediaController(e,t,r,o)};streamrootAPI.prototype.play=function(){this.dash.play()},streamrootAPI.prototype.pause=function(){this.dash.pause()},streamrootAPI.prototype.seek=function(e){this.dash.setCurrentTime(e)},streamrootAPI.prototype.paused=function(){return!this.dash.want_to_play},streamrootAPI.prototype.getCurrentTime=function(){return this.dash.video.currentTime},streamrootAPI.prototype.getBuffered=function(){return this.dash.getBuffered()},streamrootAPI.prototype.switchRepresentation=function(e,t,r){this.dash.manualSwitchRepresentation(e,t,r)},streamrootAPI.prototype.getDuration=function(){return this.dash.getDuration()},streamrootAPI.prototype.addEventListener=function(e,t){this.dash.addEventListener(e,t)},streamrootAPI.prototype.addVideoEventListener=function(e,t){this.dash.addVideoEventListener(e,t)},window.streamrootAPI=streamrootAPI,window.Streamroot.streamrootAPI=streamrootAPI;


},{"./js/media/MediaController":16,"ua-parser-js":264}],2:[function(require,module,exports){
  var Conf=function(){this.LOGGERMANAGER={DISPLAY:!0,SHOWLOGS:3,SHOWBARS:2,SHOWBUFFER:0,CHUNK_DISPLAY:0,SHOWPEERS:2},this.DISPLAY_DEV=!0,this.TRACKER_URL="//tracker.streamroot.io",this.CHUNKPARAMS_WIDTH=5,this.CHUNKPARAMS_HEIGHT=5,this.CHUNK_SIZE=15360,this.P2P_CACHE_MAX_SIZE=136314880,this.MAX_DL_REQUEST_SPEED=1e3,this.TIME_BETWEEN_CHUNK_DL=50,this.NB_CHUNK_DL_GROUP=10,this.MAX_CHUNK_BY_SEED=300,this.NB_SEGMENT_P2P_PREBUFFER=6,this.MAX_SEGMENT_REQUEST_STORE=this.NB_SEGMENT_P2P_PREBUFFER,this.NB_SEGMENT_P2P_SKIP=2,this.MAX_UP_SPEED=600,this.CHUNK_UP_RETRY_DELAY=10,this.PEER_CONNECTION_TIMEOUT=5e4,this.PEER_UP_TIMEOUT=5e3,this.SEND_HEARTBEAT_INTERVAL=5e3,this.CHECK_HEARTBEAT_INTERVAL=1e4,this.MAX_USELESS_COUNT=100,this.MIN_USEFUL_SPEED=10,this.MIN_NUMBER_OF_PEERS=5,this.MAX_NUMBER_OF_PEERS=10,this.ASK_PEERS_INTERVAL=18e4,this.CHECK_USELESS_INTERVAL=24e4,this.CHUNK_TIMEOUT=2500,this.CHUNK_UP_TIMEOUT=this.CHUNK_TIMEOUT-600,this.UP_MAX_BUFFERED_AMOUNT=10,this.OFFER_DECLINED_TIMEOUT=6e4,this.PEER_REMOVED_TIMEOUT=9e5,this.MAX_P2P_PREBUFFERING_TIME=720,this.RETRY_P2P_START_DL_SEGMENT_DELAY=5e3,this.ANALYTICS={DOWNLOAD_TRACK_INTERVAL:12e4,LATENCIES_TRACK_INTERVAL:3e5},this.RY_TRACK=!0,this.RY_TRACKER="srTracker",this.SEGMENTS_HASH_CHECK=!0,this.PROPAGATE_SEGMENT_HASHES=!0,this.ABR_DEL_T=30,this.LIVE={P2P_CACHE_MAX_SIZE:20971520},this.ENABLE_TURN=!0,this.STUNSERVERS=[{url:"stun:stun.l.google.com:19302"}],this.TURNSERVERS=[{url:"turn:23.97.160.254:3478?transport=udp",credential:"streamroot",username:"streamroot"}],this.ALLOW_P2P=!0,this.DISPLAY=!0,this.DISPLAY_ERROR=!1},conf=new Conf;module.exports=conf;


},{}],3:[function(require,module,exports){
  var Conf=function(){this.STREAM_TYPES={DASH:0,SMOOTH:1,HLS:2},this.FORCE_TRACK_BOOL=!1,this.PRESELECTED_TRACKS={video:{id_aset:1,id_rep:1},audio:{id_aset:0,id_rep:0}},this.FORCE_BANDWIDTH={video:1e6,audio:1e5},this.DEFAULT_AUTOSWITCH={video:!1,audio:!1},this.AUTO_LABEL_FIRST=!0,this.RANGE_REQUEST_ALLOWED=!0,this.MAX_CDN_DL=2,this.APPEND_RETRY_INTERVAL=100,this.REMOVE_OLD_SEGMENTS_DELAY=15,this.BUFFER={EMERGENCY_MARGIN:.2,BUFFER_MARGIN:40,SOFT_TRACK_SWITCH_MIN_BUFFER:0,FORCE_SWITCH_CLEAR_ALL:!1,ALWAYS_FORCE_SWITCH:!0,MAX_TRACKS_OFFSET:10},this.REPRESENTATION_NUMBER=0,this.ABR_DEL_T=void 0,this.LIVE={DISTANCE_FROM_LIVE_EDGE:30,MIN_BUFFER_LEVEL:10,ALLOW_LIVE_DELAY:30},this.MPD_UPDATE_INTERVAL=2e3,this.RTT_RELOAD_OFFSET=700,this.MIN_UPDATE_INTERVAL=1e3,this.FREEZE_LIVE_MIN_SEEK_TIME=1e3,this.REPPORT_ERROR=!1,this.ADD_QUERY_PARAM=!1,this.PTS_TOLERANCE=.1,this.HACK_ABR_HLS_AUDIO_ONLY=!0,this.SS_IMPLICIT_AAC_HE=!1},conf=new Conf;module.exports=conf;


},{}],4:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),Backbone=require("backbone"),_=require("underscore"),status=require("../p2p/models/status"),EventEmitter=require("eventemitter3"),overrideDefaults=require("../utils/ObjectHelper").overrideDefaults,_gaq=_gaq||[];_gaq.push(["sr_tracker._setAccount","UA-42851557-1"]),_gaq.push(["sr_tracker._setDomainName","none"]),_gaq.push(["_setSessionCookieTimeout",0]);var VideoAnalytics=function(t,e){this.playerInterface=t,this.apiStartTimestamp=(new Date).getTime(),this.mediaStats="function"==typeof t.getMediaStats?t.getMediaStats():void 0,this.mpdURL=e,this.alreadyPlayed=!1,this.lastP2PDownloaded=0,this.lastP2PDownloadedNewAnalytics=0,this.lastP2PUploaded=0,this.lastCDNDownloaded=0,this.lastCDNCancelled=0,this.lastP2PDownloadedUncorrected=0,this.lastDataDlTwice=0,this.lastDataDlTwice_PP=0,this.lastDataDlTwice_PC=0,this.lastDataDlTwice_CP=0,this.lastDataDlTwice_CC=0,this.lastDataDlTwice_HP=0,this.lastDataDlTwice_HD=0,this.lastDataDlTwice_M=0,this.lastMinSwitchCount=0,this.lastLowerSwitchCount=0,this.lastUpperSwitchCount=0,this.lastTrackerMsgCount=0,this.lastTrackerSgnCount=0,this.downloadTrackCounter=0,this.uploadSaturation=0,this.sumRtt=0,this.maxRtt=0,this.nbRtt=0,this.sumDistance=0,this.maxDistance=0,this.nbDistance=0,this.peerConnecting=[],this.sentOnBeforeUnload=!1,this.onTimeUpdateCallbacks=[],setInterval(this.sendDownloadAnalytics.bind(this),conf.ANALYTICS.DOWNLOAD_TRACK_INTERVAL),setTimeout(this.setRttInterval.bind(this),conf.ANALYTICS.DOWNLOAD_TRACK_INTERVAL/2),setInterval(_.bind(this.sendLatencyAnalytics,this),conf.ANALYTICS.LATENCIES_TRACK_INTERVAL),this.sendLatencyAnalytics(),window.RY=function(t){var e=["identify","track","page"],a="realytics",s=function(t,e){return function(){var a=Array.prototype.slice.call(arguments);t[e]||(t[e]=[]),t[e].push(a)}},i=function(i){for(var n=0;n<e.length;n++){var o=e[n];i?t[i][o]=s(t._q[i],o):t[o]=t[a][o]=s(t._q[a],o)}},n=function(e,s){var n=e?e:a;t[n]||(t[n]={}),t._q[n]||(t._q[n]={}),s&&(t._q[n].init=[[s]]),i(e)};return t._q||(t._q={},n(null,null)),t.init=function(t,a){if(a&&e)for(var s=0;s<e.length;s++)if(a==e[s]||"init"==a)return;n(a,t);var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=("https:"==document.location.protocol?"https://":"http://")+"dcniko1cv0rz.cloudfront.net/realytics-0.2.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(i,o)},t}(window.RY||{}),RY.init(conf.ID_CLIENT,conf.RY_TRACKER),this.realytics_count=0,_gaq.push(["sr_tracker._trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),this.playerInterface.addVideoEventListener("play",this.onPlay.bind(this)),this.playerInterface.addVideoEventListener("pause",this.onPause.bind(this)),this.playerInterface.addVideoEventListener("timeupdate",this.onTimeUpdate.bind(this)),this.registerOnTimeUpdate(this.checkBuffered),this.registerOnTimeUpdate(this.checkEnded),window.addEventListener("beforeunload",this.onBeforeUnload.bind(this)),window.addEventListener("unload",this.onUnload.bind(this)),_.extend(this,Backbone.Events),status.getEE().once("tracker_ready",this.onTrackerReady.bind(this)),this.track("video views"),this.track_realytics("video views")};VideoAnalytics.prototype.track=function(t,e){var a=["sr_tracker._trackEvent"];a.push(this.mpdURL),a.push(t);var s=status.getMyIds();s.length?a.push(s[0]):a.push("0"),e&&a.push(e),_gaq.push(a)},VideoAnalytics.prototype.track_realytics=function(t,e,a){e=e||{},e.customerID="Integros",e.mpdURL=this.mpdURL,a&&(e.conf={p2pMaxCacheSize:conf.P2P_CACHE_MAX_SIZE,maxDlRequestSpeed:conf.MAX_DL_REQUEST_SPEED,maxChunkBySeed:conf.MAX_CHUNK_BY_SEED,nbSegmentP2PPrebuffer:conf.NB_SEGMENT_P2P_PREBUFFER,maxUpSpeed:conf.MAX_UP_SPEED,chunkUpRetryDelay:conf.CHUNK_UP_RETRY_DELAY,chunkTimeout:conf.CHUNK_TIMEOUT,chunkUpTimeout:conf.CHUNK_UP_TIMEOUT}),conf.RY_TRACK&&(t+="1",RY.srTracker.track(t,e)),0,this.realytics_count++,0},VideoAnalytics.prototype.trackTimeElapsed=function(t,e){var a=(new Date).getTime();this.track(t,a-e),this.track_realytics(t,{value:a-e})},VideoAnalytics.prototype.onPlay=function(){this.track("play",Math.round(this.playerInterface.getCurrentTime())),this.track_realytics("play",{value:Math.round(this.playerInterface.getCurrentTime())})},VideoAnalytics.prototype.onPause=function(){this.track("pause",Math.round(this.playerInterface.getCurrentTime())),this.track_realytics("pause",{value:Math.round(this.playerInterface.getCurrentTime())})},VideoAnalytics.prototype.registerOnTimeUpdate=function(t){this.onTimeUpdateCallbacks.push(t)},VideoAnalytics.prototype.unregisterOnTimeUpdate=function(t){this.onTimeUpdateCallbacks=_.reject(this.onTimeUpdateCallbacks,function(e){return e===t},this)},VideoAnalytics.prototype.onTimeUpdate=function(){_.each(this.onTimeUpdateCallbacks,function(t){t.call(this)},this)},VideoAnalytics.prototype.checkEnded=function(){},VideoAnalytics.prototype.checkBuffered=function(){},VideoAnalytics.prototype.sendDownloadAnalytics=function(){var t=status.getP2PDownloaded(),e=status.getp2pDownloadedNewAnalytics(),a=0>t?1:0,s=status.getP2PUploaded(),i=status.getCDNDownloaded(),n=status.getCdnCancelled(),o=status.getP2PDownloadedUncorrected(),r=status.getDataDownloadedTwice_PP(),c=status.getDataDownloadedTwice_PC(),d=status.getDataDownloadedTwice_CP(),l=status.getDataDownloadedTwice_CC(),h=status.getDataDownloadedTwice_HP(),p=status.getDataDownloadedTwice_HD(),u=status.getDataDownloadedTwice_M(),D=r+c+d+l+h+p+u,m=t-this.lastP2PDownloaded,w=e-this.lastP2PDownloadedNewAnalytics,g=s-this.lastP2PUploaded,y=i-this.lastCDNDownloaded,P=n-this.lastCDNCancelled,f=o-this.lastP2PDownloadedUncorrected,C=r-this.lastDataDlTwice_PP,T=c-this.lastDataDlTwice_PC,A=d-this.lastDataDlTwice_CP,_=l-this.lastDataDlTwice_CC,v=h-this.lastDataDlTwice_HP,k=p-this.lastDataDlTwice_HD,S=u-this.lastDataDlTwice_M,R=D-this.lastDataDlTwice,b=status.getNbRightHashP2P(),U=status.getNbWrongHashP2P(),E=status.getNbRightHashDLM(),M=status.getNbWrongHashDLM();status.setNbRightHashP2P(0),status.setNbWrongHashP2P(0),status.setNbRightHashDLM(0),status.setNbWrongHashDLM(0);var N,L=this.trackPeers(),I=this.trackTracker();this.mediaStats&&(N=this.trackABR()),m>0&&(this.track("p2pDownloaded",m),this.lastP2PDownloaded=t),w>0&&(this.track("p2pDownloadedNewAnalytics",w),this.lastP2PDownloadedNewAnalytics=e),g>0&&(this.track("p2pUploaded",g),this.lastP2PUploaded=s),y>0&&(this.track("cdnDownloaded",y),this.lastCDNDownloaded=i),D>0&&(this.track("dataDlTwice",R),this.lastDataDlTwice=D),(m>0||g>0||y>0||R>0)&&(this.track_realytics("download",{p2p:m,nP2p:w,cdn:y,cdnCancelled:P,totalDl:m+y,up:g,p2pUncorrected:f,doubleDl:{PP:C,PC:T,CP:A,CC:_,HP:v,HD:k,M:S,totalDlTwice:R},testP2PNegative:a,peers:L,nbRightHashP2P:b,nbWrongHashP2P:U,nbRightHashDLM:E,nbWrongHashDLM:M,avgRtt:this.nbRtt>0?this.sumRtt/this.nbRtt:0,maxRtt:this.maxRtt,avgDistance:this.nbDistance>0?this.sumDistance/this.nbDistance:0,maxDistance:this.maxDistance,uploadSaturation:this.uploadSaturation,abr:N,tracker:I,downloadTrackCounter:this.downloadTrackCounter},!0),this.lastCDNCancelled=n,this.lastP2PDownloadedUncorrected=o,this.lastDataDlTwice_PP=r,this.lastDataDlTwice_PC=c,this.lastDataDlTwice_CP=d,this.lastDataDlTwice_CC=l,this.lastDataDlTwice_HP=h,this.lastDataDlTwice_HD=p,this.lastDataDlTwice_M=u,this.uploadSaturation=0,this.downloadTrackCounter++)},VideoAnalytics.prototype.trackSpeed=function(){return status.getAvgDlSpeed()&&this.track("avg dl speed",Math.round(status.getAvgDlSpeed())),status.getMaxDlSpeed()&&this.track("max dl speed",Math.round(status.getMaxDlSpeed())),status.getAvgUpSpeed()&&this.track("avg up speed",Math.round(status.getAvgUpSpeed())),status.getMaxUpSpeed()&&this.track("max up speed",Math.round(status.getMaxUpSpeed())),{avgDl:Math.round(status.getAvgDlSpeed()),maxDl:Math.round(status.getMaxDlSpeed()),avgUp:Math.round(status.getAvgUpSpeed()),maxUp:Math.round(status.getMaxUpSpeed())}},VideoAnalytics.prototype.setP2PDownloaderListeners=function(t){this.p2pDownloader=t,t.getEE().on("uploadSaturated",this.incrementUploadSaturation.bind(this))},VideoAnalytics.prototype.incrementUploadSaturation=function(){this.uploadSaturation++},VideoAnalytics.prototype.onBeforeUnload=function(){if(this.p2pDownloader){this.sendDownloadAnalytics();var t=status.getP2PDownloaded(),e=status.getp2pDownloadedNewAnalytics(),a=status.getP2PUploaded(),s=status.getCDNDownloaded(),i=status.getP2PDownloadedUncorrected(),n=status.getDataDownloadedTwice_PP(),o=status.getDataDownloadedTwice_PC(),r=status.getDataDownloadedTwice_CP(),c=status.getDataDownloadedTwice_CC(),d=status.getDataDownloadedTwice_HP(),l=status.getDataDownloadedTwice_HD(),h=status.getDataDownloadedTwice_M(),p=n+o+r+c+d+l+h,u=this.p2pDownloader.doubleCheckP2PDownload_CDNDownload(),D=u.p2pDownloaded+u.cdnDownloaded;this.track("p2pDownloaded_unloadCheck",t),this.track("p2pDownloadedNewAnalytics_unloadCheck",e),this.track("p2pUploaded_unloadCheck",a),this.track("cdnDownloaded_unloadCheck",s),this.track("dataDlTwice_unloadCheck",p),this.track("p2pCache",D);var m=this.trackPeers(),w=this.trackSpeed(),g=this.getRandomPeerLatency(),y=this.trackQoS();this.track_realytics("unload",{p2p:t,nP2p:e,cdn:s,totalDl:t+s,up:a,p2pUncorrected:i,doubleDl:{PP:n,PC:o,CP:r,CC:c,HP:d,HD:l,M:h,totalDlTwice:p},qos:y,p2pCache:D,speeds:w,peers:m,peerConnectionLatency:g},!0),this.sentOnBeforeUnload=!0}},VideoAnalytics.prototype.onUnload=function(){this.sentOnBeforeUnload||this.onBeforeUnload()},VideoAnalytics.prototype.onTrackerReady=function(){this.trackTimeElapsed("time before tracker ready",this.apiStartTimestamp)},VideoAnalytics.prototype.trackPeers=function(){if(this.peerPool){var t=0,e=0,a=0,s=0,i=0;return _.each(this.peerPool.getPeerArray(),function(n){a++,n.getReadyToCommunicate()===!0&&i++;var o=!0;n.getDataDownloaded()&&(t++,o=!1),n.getDataUploaded()&&(e++,o=!1),o&&s++},this),this.track("seeders",t),this.track("leechers",e),this.track("total peers",a),this.track("useless peers",s),this.track("peer ready",i),{seeders:t,leechers:e,totalPeers:a,uselessPeers:s,peerReady:i}}},VideoAnalytics.prototype.setRttInterval=function(){setInterval(this.computeLatencies.bind(this),conf.ANALYTICS.DOWNLOAD_TRACK_INTERVAL)},VideoAnalytics.prototype.computeLatencies=function(){if(this.peerPool){var t;this.sumRtt=0,this.maxRtt=0,this.nbRtt=0,this.sumDistance=0,this.maxDistance=0,this.nbDistance=0,_.each(this.peerPool.getPeerArray(),function(e){e.getRtt(this.onRtt.bind(this)),t=e.getDistance(),t&&(this.sumDistance+=t,this.nbDistance++,t>this.maxDistance&&(this.maxDistance=t))},this)}},VideoAnalytics.prototype.onRtt=function(t){var e=parseInt(t);this.sumRtt+=e,this.nbRtt++,e>this.maxRtt&&(this.maxRtt=e)},VideoAnalytics.prototype.getRtt=function(){return{avgRtt:this.nbRtt>0?this.sumRtt/this.nbRtt:0,maxRtt:this.maxRtt,avgDistance:this.nbDistance>0?this.sumDistance/this.nbDistance:0,maxDistance:this.maxDistance}},VideoAnalytics.prototype.sendLatencyAnalytics=function(){this.avgPeerAnswerTimeElapsed&&(this.track("peer answer latency",Math.round(this.avgPeerAnswerTimeElapsed)),this.avgPeerAnswerTimeElapsed=!1,this.numberOfPeerAnswerInAvg=!1),this.avgPeerReadyCommTimeElapsed&&(this.track("peer ready to comm latency",Math.round(this.avgPeerReadyCommTimeElapsed)),this.avgPeerReadyCommTimeElapsed=!1,this.numberOfPeerReadyCommInAvg=!1)},VideoAnalytics.prototype.setPeerPoolListeners=function(t){this.peerPool=t,t.getEE().on(t,"offerSent",this.onOfferSent.bind(this)),t.getEE().on(t,"answerReceived",this.onAnswerReceived.bind(this)),t.getEE().on("peerReadyCommunicate",this.onPeerReadyCommunicate.bind(this))},VideoAnalytics.prototype.findPeer=function(t){var e=_.where(this.peerConnecting,{peer:t});return e.length?e[0]:!1},VideoAnalytics.prototype.onOfferSent=function(t){var e=(new Date).getTime();this.findPeer(t)||this.peerConnecting.push({peer:t,timestampOffer:e})},VideoAnalytics.prototype.onAnswerReceived=function(t){var e=(new Date).getTime(),a=this.findPeer(t);if(a&&a.timestampOffer){var s=e-a.timestampOffer;0,this.avgPeerAnswerTimeElapsed=this.avgPeerAnswerTimeElapsed?(this.avgPeerAnswerTimeElapsed*this.numberOfPeerAnswerInAvg+s)/(this.numberOfPeerAnswerInAvg+1):s,this.numberOfPeerAnswerInAvg=this.numberOfPeerAnswerInAvg?this.numberOfPeerAnswerInAvg+1:1,a.timestampAnswer=e}},VideoAnalytics.prototype.onPeerReadyCommunicate=function(t){var e=(new Date).getTime(),a=this.findPeer(t);if(a){var s=e-a.timestampOffer;0,this.avgPeerReadyCommTimeElapsed=this.avgPeerReadyCommTimeElapsed?(this.avgPeerReadyCommTimeElapsed*this.numberOfPeerReadyCommInAvg+s)/(this.numberOfPeerReadyCommInAvg+1):s,this.numberOfPeerReadyCommInAvg=this.numberOfPeerReadyCommInAvg?this.numberOfPeerReadyCommInAvg+1:1,a.timeStampReady=e}},VideoAnalytics.prototype.getRandomPeerLatency=function(t){var e=_.filter(this.peerConnecting,function(t){return t.timestampAnswer&&t.timeStampReady});if(e.length){var a=e[Math.floor(Math.random()*e.length)];return{answer:a.timestampAnswer-a.timestampOffer,ready:a.timeStampReady-a.timestampOffer,distance:a.peer.getDistance()}}return void 0},VideoAnalytics.prototype.trackABR=function(){var t,e={minSwitchCount:0,lowerSwitchCount:0,upperSwitchCount:0};this.mediaStats&&(t=this.mediaStats.getStats(),e=overrideDefaults(e,t));var a=e.minSwitchCount-this.lastMinSwitchCount,s=e.lowerSwitchCount-this.lastLowerSwitchCount,i=e.upperSwitchCount-this.lastUpperSwitchCount;return this.lastMinSwitchCount=e.minSwitchCount,this.lastLowerSwitchCount=e.lowerSwitchCount,this.lastUpperSwitchCount=e.upperSwitchCount,{minSwitchCount:a,lowerSwitchCount:s,upperSwitchCount:i}},VideoAnalytics.prototype.trackQoS=function(){var t,e={startupTime:0,startupTimeLoad:0,rebufferingCount:0,timeSpentRebuffering:0,timeSpentPlaying:0,timeSpentSeeking:0,percentageTimeSpentPlaying:0,avgBitrate:0,bitrateSwitchCount:0,minSwitchCount:0,lowerSwitchCount:0,upperSwitchCount:0};return this.mediaStats&&(t=this.mediaStats.getStats(),e=overrideDefaults(e,t)),e},VideoAnalytics.prototype.trackTracker=function(){var t=status.getTrackerMsgCount(),e=status.getTrackerSgnCount(),a=t-this.lastTrackerMsgCount,s=e-this.lastTrackerSgnCount;return this.lastTrackerMsgCount=t,this.lastTrackerSgnCount=e,{trackerMsgCount:a,trackerSgnCount:s}},VideoAnalytics.prototype.isFake=function(){return this.fake},module.exports=VideoAnalytics;


},{"../../conf":2,"../p2p/models/status":57,"../utils/ObjectHelper":61,"backbone":62,"eventemitter3":110,"underscore":265}],5:[function(require,module,exports){
  "use strict";var utils=require("../utils"),conf=require("../../confMedia"),CDNDownloader=function(e,t){this.id=e,this.downloadManager=t,this.intermediateProgress=0,this.updateInterval=300,this.averageDownloadSpeed=!1,this.instantDownloadSpeed=!1,this.downloading=!1};CDNDownloader.prototype.onLoaded=function(e){this.downloading=!1,e.target.status>=200&&e.target.status<299?e.target.cb({response:e.target.response,pptes:e.target.pptes,startTimeStamp:this.beginningTime,endTimeStamp:e.timeStamp}):this.onLoadError(e)},CDNDownloader.prototype.onLoadError=function(e){this.downloading=!1,this.downloadManager.cancelCDNDownloadById(this.id),conf.REPPORT_ERROR&&0===e.srcElement.status&&window.onPlayerError&&window.onPlayerError("download error")},CDNDownloader.prototype.onLoadStart=function(e){this.beginningTime=this.intermediateTime=e.timeStamp},CDNDownloader.prototype.onProgress=function(e){var t=e.timeStamp;this.averageDownloadSpeed=e.position/1024/((t-this.beginningTime)/1e3),t-this.intermediateTime>this.updateInterval&&(this.instantDownloadSpeed=(e.position-this.intermediateProgress)/1024/((t-this.intermediateTime)/1e3),this.intermediateTime=t,this.intermediateProgress=e.position)},CDNDownloader.prototype.getUrl=function(e,t){this.url_infos=e;var o=new XMLHttpRequest;o.addEventListener("load",this.onLoaded.bind(this)),o.addEventListener("loadstart",this.onLoadStart.bind(this)),o.addEventListener("error",this.onLoadError.bind(this)),o.addEventListener("progress",this.onProgress.bind(this)),o.open("GET",e.url),e.responseType&&(o.responseType=e.responseType),e.range&&o.setRequestHeader("Range",utils.make_range(e.range.start,e.range.end)),e.pptes&&(o.pptes=e.pptes),o.cb=t,o.send(),this.downloading=!0,this.xhr=o},CDNDownloader.prototype.abort=function(){this.downloading&&(this.downloading=!1,this.xhr.abort())},module.exports=CDNDownloader;


},{"../../confMedia":3,"../utils":60}],6:[function(require,module,exports){
  "use strict";var CDNDownloader=require("./CDNDownloader"),conf=require("../../confMedia"),PlayerInterface=require("../media/PlayerInterface"),SRModule=require("../p2p/SRModule"),DownloadManager=function(e,n){var r,t,a=this,i=1,o=[],s=n,l=function(n,t){var a,i=null;if(o.length<conf.MAX_CDN_DL){if(a=e.manifestManager.getPieceInfos(n),a.downloading)return;if(r){if(0,i=r.getP2PData(n),i.isLocked())return;if(i.isComplete()){var s={pptes:{piece:n},cdnByteLength:0};return void i.getFullSegment(s,t)}if(conf.RANGE_REQUEST_ALLOWED){if(a.range=i.getUpdatedRange(a.range),a.range&&a.range.end&&a.range.end<a.range.start)return void 0}else a.range&&0;d(n,a,i,t)}}},d=function(n,r,t,s){var l=i,d=new CDNDownloader(l,a);r.responseType="arraybuffer",r.pptes={piece:n,partialSegment:t},i++,o.push(d),d.getUrl(r,c.bind(void 0,l,p.bind(void 0,s))),e.manifestManager.markAsDownloading(n,l)},f=function(n){return function(r,t){e.manifestManager.markAsDownloading(t),e.manifestManager.setSegmentSize(t.id_period,t.id_aset,t.id_rep,t.idPiece,r.response.byteLength),n(r)}},g=function(n){return function(r,t){0,e.manifestManager.markAsDownloading(t),a.getPart(t,!1,n)}},c=function(e,n,r){var t,a;for(a=0;a<o.length;a++)o[a].id==e&&(t=o.splice(a,1)[0]);n(r)},p=function(n,r){r.response?(r.cdnByteLength=r.response.byteLength,r.pptes.partialSegment.getFullSegment(r,f(n),g(n))):e.manifestManager.markAsDownloading(r.pptes.piece)},u=function(n){0;var r=o.splice(n,1)[0];e.manifestManager.markAsDownloading(r.url_infos.pptes.piece),t.emit("cdnCancelled",r.intermediateProgress),r.abort()},m=function(e){var n;for(n=0;n<o.length;n++)e===o[n].id&&u(n)},w=function(e){var n;for(n=o.length-1;n>=0;n--)o[n].url_infos.pptes&&o[n].url_infos.pptes.piece.id_aset===e&&u(n)},h=function(){var e;for(e=o.length-1;e>=0;e--)o[e].url_infos.pptes&&u(e)},D=function(n){var r,t;for(r=0;r<o.length;r++)o[r].url_infos.pptes&&(t=o[r].url_infos.pptes.piece,e.manifestManager.isLiveTimeExpired(t.id_period,t.id_aset,t.id_rep,t.segment.time)&&(u(r),0));a.triggerInterfaceUpdateMap(n)},M=function(){e.addVideoEventListener("seeking",function(){e.manifestManager.isLive()||(h(),0)}),t=new PlayerInterface(e),r=new SRModule(t,e.manifestManager.getMpdUrl(),s,conf)};this.triggerInterfaceUpdateMap=function(e,n){t?t.emit("onMapUpdate",e,n):0},this.triggerInterfaceTrackChange=function(e,n){if(t){var r=n.map(function(e){return{type:e.type,asetId:e.asetId,repId:e.representationId,bufferLevelMax:e.bufferLevelMax}});t.emit("onTrackChange",e,r)}else 0},this.getSRModule=function(){return r},this.getPart=l,this.cancelCDNDownloadById=function(e){m(e)},this.killSegmentDownloadForTrack=w,this.killAllSegmentDownload=h,this.mapUpdated=D,M()};module.exports=DownloadManager;


},{"../../confMedia":3,"../media/PlayerInterface":18,"../p2p/SRModule":41,"./CDNDownloader":5}],7:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),EventEmitter=require("eventemitter3"),debug,ABRController=function(e,t,n){var r,i,u,a,f,o,s=n,p=e,d=!1,c=.16,h=.75,m=.45,g=.55,l=.25,v=.75,S=.55,T=.6,I=13,L=1.1,b=2,B=1.5,C=1.1,_=1.3,M=10,w=(e.mediaStats,conf.ABR_DEL_T),R=!0,y=!1,E=12e3,A=[],D=[],x=0,H=0,O=0,q=0,N=0,k=0,W=new EventEmitter,G=function(e){var t,n,r,i=p.manifestManager.map.periods[e];for(A=[],t=0;t<i.asets.length;t++)if(r=i.asets[t],r.type===s)for(n=0;n<r.reps.length;n++)(!conf.HACK_ABR_HLS_AUDIO_ONLY||"video"!==r.type||r.reps[n].bandwidth>1e5)&&A.push({periodId:e,asetId:t,repId:n,bitrate:r.reps[n].bandwidth});A.sort(function(e,t){return e.bitrate-t.bitrate}),pe()},K=function(e,t){return A[0].asetId===e&&A[0].repId===t},U=function(e,t){var n=A.length-1;return A[n].asetId===e&&A[n].repId===t},V=function(){return A[0]},Y=function(e,t){var n;for(n=0;n<A.length;n++)if(A[n].asetId===e&&A[n].repId===t)return n>0?A[n-1]:A[n]},j=function(e,t){var n;for(n=0;n<A.length;n++)if(A[n].asetId===e&&A[n].repId===t)return n<A.length-1?A[n+1]:A[n]},z=function(e,t){var n;for(n=0;n<A.length;n++)if(A[n].asetId===e&&A[n].repId===t)return A[n].bitrate},F=function(e,t){return j(e,t).bitrate},J=function(e,t){var n=(new Date).getTime(),r={byteLength:e.cdnByteLength,startTimeStamp:e.startTimeStamp,endTimeStamp:e.endTimeStamp,bufferLeft:t,timeStamp:n};D.push(r)},P=function(){var e,t=(new Date).getTime();for(e=D.length-1;e>=0;e--)(t-D[e].timeStamp)/1e3>w&&D.splice(e,1)},Q=function(e){var t,n,r,i=0,u=0;for(P(),t=0;t<D.length;t++)i+=D[t].byteLength,n=Math.max(D[t].endTimeStamp-D[t].startTimeStamp-M,(D[t].endTimeStamp-D[t].startTimeStamp)/2),u+=n/1e3;return r=u>0?i/u:0,x=8*(r+e)},X=function(){var e=D.length;if(3>e)return!0;for(var t=2;t<D.length;t++)if(D[t].bufferLeft<D[t-2].bufferLeft)return!1;return!0},Z=function(){var e=D.length;if(3>e)return!1;for(var t=2;t<D.length;t++)if(D[t].bufferLeft>D[t-2].bufferLeft)return!1;return!0},$=function(e){return r>e},ee=function(e){return i>e},te=function(e){return u>e},ne=function(e){return a>e},re=function(){return H++,V()},ie=function(e,t){return O++,Y(e,t)},ue=function(e,t){return q++,j(e,t)},ae=function(){return y?void 0:re()},fe=function(){I>f?(r=l*f,i=v*f,u=S*f,a=T*f):(r=Math.min(c*f,4),i=h*f,u=m*f,a=g*f)},oe=function(e){var t=z(e.pptes.piece.id_aset,e.pptes.piece.id_rep),n=e.pptes.piece.segment.duration;n>0?(N=(N*k+t/1e6*n)/(k+n),k+=n):0},se=function(e,t,n){d=!0,W.emit("onDecision",s),f=n,t>e.pptes.piece.segment.duration?t-=e.pptes.piece.segment.duration:t=0,oe(e),fe();var r,i,u=e.pptes.piece.id_aset,a=e.pptes.piece.id_rep,p=e.p2pMeanThroughput?e.p2pMeanThroughput:0;if(o||(o={asetId:u,repId:a,bitrate:z(u,a)}),"undefined"!=typeof e.endTimeStamp&&"undefined"!=typeof e.startTimeStamp){var c=Math.max(e.endTimeStamp-e.startTimeStamp-M,(e.endTimeStamp-e.startTimeStamp)/2);r=8*e.cdnByteLength/(c/1e3),J(e,t)}if(i=Q(p),R=X()&&i>=L*z(u,a)){if($(t)){if(i>=b*F(u,a)&&!U(u,a))return o=ue(u,a)}else if(te(t)){if(i>=B*F(u,a)&&!U(u,a))return o=ue(u,a)}else if(i>=C*F(u,a)&&!U(u,a))return o=ue(u,a)}else{if(R=!1,!y&&$(t)&&!K(u,a))return R=!0,o=re();if(ee(t)&&Z())return o=ie(u,a);if(!y&&te(t)){if(r&&z(u,a)>=r&&!K(u,a))return o=ie(u,a)}else if(ne(t));else if(!(U(u,a)||i<=_*F(u,a)))return o=ue(u,a)}return{asetId:u,repId:a}},pe=function(){y=!0,setTimeout(function(){y=!1},E)},de=function(){return{avgBitrate:N,bitrateSwitchCount:H+O+q,minSwitchCount:H,lowerSwitchCount:O,upperSwitchCount:q}},ce=function(){return t.getBufferLeft()},he=function(){return f},me=function(){var e=[{id:"B_MIN",value:r},{id:"B_LOWER",value:i},{id:"B_LOW",value:u},{id:"B_HIGH",value:a}];return e},ge=function(){return o},le=function(){return s},ve=function(){return x},Se=function(){if(o){o.asetId,o.repId;return[{id:"C1",value:L},{id:"C2",value:b},{id:"C3",value:B},{id:"C4",value:C},{id:"C5",value:_}]}},Te=function(){return A},Ie=function(){return d},Le=function(){return R},be=function(){d=!1},Be=function(e,t){W.addListener(e,t)},Ce=function(){p.addVideoEventListener("seeking",pe)};this.getMinRepresentation=V,this.requestMinRepresentationSwitch=ae,this.getNextRepresentation=se,this.setup=G,this.getABRStats=de,this.getBufferLength=ce,this.getBufferMax=he,this.getBufferLengthLevel=me,this.getCurrentTrackInfo=ge,this.getType=le,this.getTroughput=ve,this.getTroughputLevel=Se,this.getSortedRepresentations=Te,this.isEnabled=Ie,this.isAggressiveMode=Le,this.isBufferDecreasing=Z,this.disable=be,this.addEventListener=Be,Ce()};module.exports=ABRController;


},{"../../confMedia":3,"eventemitter3":110}],8:[function(require,module,exports){
  "use strict";var ABRInterface=function(e){var t=function(){for(var t=[],r=0;r<e.length;r++){var n=e[r],f=!1;n.getBufferLengthLevel()&&(f=!0),t.push({enabled:n.isEnabled(),aggressiveMode:n.isAggressiveMode(),isBufferDecreasing:n.isBufferDecreasing(),bufferLength:n.getBufferLength(),bufferMax:n.getBufferMax(),bufferLengthLevel:n.getBufferLengthLevel(),sortedRepresentation:n.getSortedRepresentations(),currentTrackInfo:n.getCurrentTrackInfo(),type:n.getType(),throughput:n.getTroughput(),throughputLevel:n.getTroughputLevel()})}return t},r=function(t,r,n){for(var f=0;f<e.length;f++){if(n&&e[f].getType()===n){e[f].addEventListener(t,r);break}n||e[f].addEventListener(t,r)}},n=function(){window.SR_MEDIA_INTERFACE||(window.SR_MEDIA_INTERFACE={}),window.SR_MEDIA_INTERFACE.abr={},window.SR_MEDIA_INTERFACE.abr.getABRStat=t,window.SR_MEDIA_INTERFACE.abr.addEventListener=r};n()};module.exports=ABRInterface;


},{}],9:[function(require,module,exports){
  "use strict";var AESController=function(){var n=window.crypto||window.msCrypto,t=n.subtle||n.webkitSubtle,r=function(n,t){n.then?n.then(t.bind(null,null),t):(n.oncomplete=function(n){t(null,n.target.result)},n.onerror=t)},e=function(n,e){var o=t.importKey("raw",n,{name:"AES-CBC",length:128},!1,["encrypt","decrypt"]);r(o,e)},o=function(n,e,o,i){var u=t.decrypt({name:"AES-CBC",iv:o},e,n);r(u,i)},i=function(n,t,r){return function(e,i){return e?void r(e):void o(n,i,t,function(n,t){if(n)return void r(n);var e=new Uint8Array(t);r(null,e)})}},u=function(n,t,r,o){e(t,i(n,r,o))};this.decrypt=u};module.exports=AESController;


},{}],10:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),BufferController=require("./BufferController"),DiscontinuityController=require("./DiscontinuityController.js"),MediaSourceFactory=require("./wrapper/MediaSourceFactory"),ABRInterface=require("./ABRInterface"),mapAdd=require("../utils/ObjectHelper").mapAdd,Buffer=function(e){this.MODES={STREAMING:0,PREBUFFERING_MAX:1,STOP_BUFFERING:2,BUFFER_LOCAL_PIECE:3};var t,r,n,i=this,o=[],f=function(){r=new MediaSourceFactory(e),e.addVideoEventListener("loadstart",d),e.addVideoEventListener("playing",g),e.addVideoEventListener("play",l)},u=function(e,t){var r;for(r=0;r<o.length;r++)if(o[r].asetId()===e&&o[r].repId()===t)return o[r];return!1},a=function(f,u,s,d){var c,l;if("closed"===r.readyState)return void setTimeout(function(){a(f,u,s,d)},100);e.manifestManager.isLive()||(r.duration=e.manifestManager.getDuration(e.currentPeriod)),t=new DiscontinuityController(e);var g=[];for(c=0;c<u.length;c++)l=new BufferController(e,i,r,u[c].asetId,u[c].representationId,u[c].type,s,d),l.initBuffer(f),o.push(l),g.push(l.getABRController());n=new ABRInterface(g)},s=function(e){var t;for(t=0;t<o.length;t++)o[t].setBufferingMode(e)},d=function(){s(i.MODES.STREAMING)},c=function(){s(i.MODES.STOP_BUFFERING);for(var e=0;e<o.length;e++)o[e].onEnded()},l=function(){s(i.MODES.STREAMING)},g=function(){s(i.MODES.STREAMING)},h=function(e){for(var t=0;t<o.length;t++)if(o[t].getTrackType()===e)return o[t];0},B=function(e,t){var r=h(t);r.setBufferMarginLive(e)},p=function(){var e,t=!!o.length;for(e=0;e<o.length;e++)t=t&&o[e].isInitialized();return t},S=function(){var e,t=!!o.length;for(e=0;e<o.length;e++)t=t&&o[e].isReady();return t},E=function(){S()&&e.conditionalPlay()},M=function(){var e,t=[];for(e=0;e<o.length;e++)t.push({id_aset:o[e].asetId(),id_rep:o[e].repId()});return t},v=function(){var e,t=[];for(e=0;e<o.length;e++)t.push({buffered:o[e].getBufferedTimeRanges(),bufferedStrict:o[e].getBufferedStrict(),id_aset:o[e].asetId(),id_rep:o[e].repId()});return t},R=function(){for(var e=0;e<o.length;e++)o[e].setBufferingMode(this.MODES.STREAMING)},I=function(){var e,t=[];if(!o.length)return[];for(e=0;e<o.length;e++)t.push(o[e].getBufferedRangeEnd());return o[t.indexOf(Math.min.apply(null,t))].getBufferedTimeRanges()},y=function(e){var t,r,n=1/0;for(r=0;r<o.length;r++)t=o[r].getBufferedRangeEnd(e),n>t&&(n=t);return n},T=function(e,t,r,n,i){var o=u(e,t);o?o.switchedTrack(r,n,i):0},A=function(e){t.applySeekRequest(e)},m=function(e,r){t.requestSeek(e,r)},k=function(){return t.getSeekTarget()},C=function(){S()&&e.onEmergency()},F=function(){for(var e,t,r=0;r<o.length;r++)t=o[r].getABRStats(),e=e?mapAdd(e,t):t;return e};this.initBuffer=a,this.setBufferMarginLive=B,this.isInitialized=p,this.isReady=S,this.bufferControllerReady=E,this.setBufferingMode=s,this.getTracks=M,this.getBufferedTracks=v,this.getBuffered=I,this.getMinBufferedTracks=y,this.switchedTrack=T,this.applySeekRequest=A,this.requestSeek=m,this.getSeekTarget=k,this.onEmergency=C,this.setStreamingMode=R,this.onEnded=c,this.getABRStats=F,f()};module.exports=Buffer;


},{"../../confMedia":3,"../utils/ObjectHelper":61,"./ABRInterface":8,"./BufferController":11,"./DiscontinuityController.js":13,"./wrapper/MediaSourceFactory":28}],11:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),SourceBufferWrapper=require("./SourceBufferWrapper"),SegmentUpdater=require("./SegmentUpdater"),ABRController=require("./ABRController"),EventEmitter=require("eventemitter3"),debug,BufferController=function(e,t,n,r,i,a,o,s){var f,g,u=this,d=(new EventEmitter,!1),c=!1,m=r,p=i,E=a,S=!1,l=!1,T=e.manifestManager.isLive(),M=conf.BUFFER.EMERGENCY_MARGIN,R=T?conf.LIVE.DISTANCE_FROM_LIVE_EDGE:conf.BUFFER.BUFFER_MARGIN,_=t,F=e.isAutoplay()||!e.isPaused()?_.MODES.STREAMING:_.MODES.STOP_BUFFERING,h=new SourceBufferWrapper(n),P=new ABRController(e,this,E),B=!1,k=!1,v=!1,I=function(){return h.getBufferedTimeRanges()},L=function(){return h.getBufferedStrict()},A=function(t,n){var r,i,a;for(void 0===n&&(n=e.getCurrentTime()),a=0;a<t.length;a++)if(r=t.start(a),i=t.end(a),n>=r&&i>=n)return i;return n},w=function(e){return A(I(),e)},C=function(e){return A(L(),e)},O=function(t){var n;n=e.manifestManager.getInitSegment(t,m,p),h.createSourceBuffer(n),S=!0},b=function(t){var n,r,i,a,o;t&&t.response?(c=!0,e.manifestManager.getStreamType()===conf.STREAM_TYPES.SMOOTH?(n=new SegmentUpdater(t.response,t.pptes.piece),r=n.updateSegment()):e.manifestManager.getStreamType()===conf.STREAM_TYPES.DASH?r=new Uint8Array(t.response):e.manifestManager.getStreamType()===conf.STREAM_TYPES.HLS&&(r=new Uint8Array(t.response),r.key=t.pptes.piece.segment.key),i={start:t.pptes.piece.segment.time,end:t.pptes.piece.segment.time+t.pptes.piece.segment.duration},h.append(r,i,g),d=!1,T&&e.manifestManager.markAsDownloaded(t.pptes.piece),v&&v.idPiece<=t.pptes.piece.idPiece&&(0,_.applySeekRequest(v),v=!1,k=!0),e.currentTracks[E].autoswitch?(a=y(),o=P.getNextRepresentation(t,a,R),e.switchRepresentation(t.pptes.piece.id_aset,o.asetId,t.pptes.piece.id_rep,o.repId,!1)):P.disable()):0},y=function(){return w()-e.getCurrentTime()},U=function(){d=!0},D=function(t){if(!T)return!1;var n=e.manifestManager.getPlaybackTargetSegment(e.currentPeriod,m,p),r=t-n.segment.time<-conf.LIVE.ALLOW_LIVE_DELAY;return r},N=function(){var t=_.getSeekTarget();t&&e.manifestManager.isLiveTimeExpired(e.currentPeriod,m,p,t)&&(0,k=!1,v=!1)},V=function(){var r,i,a,o,s,f,u=T&&_.getSeekTarget()&&_.getSeekTarget()>e.getCurrentTime()?_.getSeekTarget():e.getCurrentTime(),d=!1;if(n.duration>0&&u+.5>=n.duration&&!T&&!e.ended&&setTimeout(function(){0,e.onEnded()},500),S&&F!==_.MODES.STOP_BUFFERING){if(i=w(u),o=_.getMinBufferedTracks(u),s=i-u,a=C(u),f=a-u,M>=f&&(d=!0),M>=s){if(e.currentTracks[E].autoswitch){var c=P.requestMinRepresentationSwitch();c&&e.switchRepresentation(m,c.asetId,p,c.repId,!1)}N(),T&&D(u)&&void 0===_.getSeekTarget()&&(0,r=e.manifestManager.getPlaybackTargetSegment(e.currentPeriod,m,p),B=!0,k=!1,v=!1)}if(i-o<conf.BUFFER.MAX_TRACKS_OFFSET){if(!r&&(R>s||F===_.MODES.PREBUFFERING_MAX)){var h=0;0>=s?(T||(i=u),0!==u&&(h=.001)):h=.2,r=e.manifestManager.getPartForTime(e.currentPeriod,i+h,m,p)}!r&&e.manifestManager.isLiveTimeExpired(e.currentPeriod,m,p,i)&&(0,B=!0,k=!1),!B&&r||k||v?r&&(k=!0,g=r.idPiece,e.downloadManager.getPart(r,b)):(r||(r=e.manifestManager.getBeginningSegment(e.currentPeriod,m,p)),H(r),g=r.idPiece,e.downloadManager.getPart(r,b)),d||l?d&&l&&(T||n.duration-u>M+1)&&(0,t.onEmergency(),l=!1):(l=!0,_.bufferControllerReady())}else 0}},G=function(){var t,n,r,i,a=I(),o=e.getCurrentTime();for(i=0;i<a.length;i++)o<a.start(i)||a.end(i)<o?(t=a.start(i),n=a.end(i),h.remove({start:t,end:n})):(t=a.start(i)-.2>=0?a.start(i)-.2:0,r=e.manifestManager.getPartForTime(e.currentPeriod,o-conf.REMOVE_OLD_SEGMENTS_DELAY,m,p),n=r?r.segment.time:o-conf.REMOVE_OLD_SEGMENTS_DELAY,n>t&&h.remove({start:t,end:n}))},q=function(){var t,n,r,i=e.getCurrentTime(),a=h.getPlaybackInterval(i);if(a&&(n=e.manifestManager.getPartForTime(e.currentPeriod,a.end-.2,m,p)))for(t=n.idPiece,r={id_period:e.currentPeriod,id_aset:m,id_rep:p,idPiece:t};;){if(r=e.manifestManager.getNextSegment(r),!r)break;var o=e.downloadManager.getSRModule().getP2PData(r);if(o.isComplete()&&!o.isLocked()){g=r.idPiece,o.getFullSegment({},b);break}}},x=function(t,n,r){var i,a,o,s=e.getCurrentTime(),f=e.manifestManager.getPartForTime(e.currentPeriod,s,m,p),g=f?f.segment.time:!1,u=!1;if(r)if(conf.BUFFER.FORCE_SWITCH_CLEAR_ALL)u=!0,e.video.event_handlers.onBuffering();else if(i=e.manifestManager.getPartForTime(e.currentPeriod,s+conf.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER,m,p))a=i.segment.time+i.segment.duration;else{var d=e.manifestManager.getBeginningSegment(e.currentPeriod,m,p);if(!(s+conf.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER<d.segment.time))return void 0;a=d.segment.time+d.segment.duration}else q();o=e.manifestManager.getInitSegment(e.currentPeriod,t,n),h.switchedTrack(o,g,a,u),m=t,p=n},H=function(t){_.requestSeek(t,E),e.video.isFlash&&h.requestedSeek(),0,v=t},W=function(){return E},Y=function(){return P},K=function(){k=!1},X=function(){P.setup(e.currentPeriod),e.addVideoEventListener("seeking",u.onseeking.bind(u)),e.addVideoEventListener("seeked",u.onseeked.bind(u)),setInterval(V,100),setInterval(G,1e4),e.ee.on("trackSwitch",U)};this.getABRController=Y,this.getTrackType=W,this.getBufferLeft=y,this.asetId=function(){return m},this.repId=function(){return p},this.initBuffer=O,this.setBufferMarginLive=function(e){e<=conf.LIVE.DISTANCE_FROM_LIVE_EDGE-conf.LIVE.MIN_BUFFER_LEVEL?R=conf.LIVE.MIN_BUFFER_LEVEL+e:0},this.isInitialized=function(){return S},this.isReady=function(){return l},this.setBufferingMode=function(e){f=F,F=e},this.getBufferedTimeRanges=I,this.getBufferedStrict=L,this.getBufferedRangeEnd=w,this.switchedTrack=x,this.onseeking=function(){0,e.video.isFlash&&u.setBufferingMode(_.MODES.STOP_BUFFERING),h.onSeeking()},this.onseeked=function(){0,u.setBufferingMode(_.MODES.STREAMING),h.onSeeked(),G(),c=!1},this.onEnded=K,this.getABRStats=P.getABRStats,X()};module.exports=BufferController;


},{"../../confMedia":3,"./ABRController":7,"./SegmentUpdater":20,"./SourceBufferWrapper":21,"eventemitter3":110}],12:[function(require,module,exports){
  "use strict";function isInteger(e){return"number"==typeof e&&e%1===0}var CustomTimeRange=function(e){var n=e;this.length=n.length,this.start=function(e){if(isInteger(e)&&e>=0&&e<n.length)return n[e].start;throw isInteger(e)?new Error("CustomTimeRange index out of range"):new Error("Incorrect index type")},this.end=function(e){if(isInteger(e)&&e>=0&&e<n.length)return n[e].end;throw isInteger(e)?new Error("CustomTimeRange index out of range"):new Error("Incorrect index type")}};module.exports=CustomTimeRange;


},{}],13:[function(require,module,exports){
  "use strict";var SeekRequest=require("./SeekRequest.js"),debug,DiscontinuityController=function(e){var t,n=[],i=function(){return t},r=function(i,r){for(var a=0;a<n.length;a++)n[a].getTrackType()===r&&n.splice(a,1);t=void 0!==t?Math.max(t,i.segment.time):i.segment.time,n.push(new SeekRequest(i,r)),e.manifestManager.isLive()?e.downloadManager.killAllSegmentDownload():e.downloadManager.killSegmentDownloadForTrack(i.id_aset)},a=function(i){var r,a=!0;if(n.length){if(i)for(r=0;r<n.length;r++)n[r].getPiece()===i&&n[r].setReady();for(r=0;r<n.length;r++)a=a&&n[r].isReady();if(a||e.manifestManager.isLive())return e.setCurrentTime(t),t=void 0,n=[],!0}};this.applySeekRequest=a,this.requestSeek=r,this.getSeekTarget=i};module.exports=DiscontinuityController;


},{"./SeekRequest.js":19}],14:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),MapHelper=require("./MapHelper"),_=require("underscore"),ISOBMFF=require("../../../vendor/js/isobmffManager"),utils=require("../utils"),MapGenerator=require("streamroot-map-generator"),ManifestManager=function(e,t){var r,i,n,s,o,a=this,d=conf.ADD_QUERY_PARAM?utils.updateQueryStringParameter(t,"streamroot",1):t,p=d,u={periods:[]},f=new MapHelper,c=!1,l=new MapGenerator({PLAYLIST_HLS_KEEP_LAST_LINES:conf.PLAYLIST_HLS_KEEP_LAST_LINES,SS_IMPLICIT_AAC_HE:conf.SS_IMPLICIT_AAC_HE}),g=function(){var e=u.isLive;return"undefined"==typeof e&&0,e},m=function(e,t,r){var i=!1;return utils.isPosInt(e)&&e<u.periods.length&&utils.isPosInt(t)&&t<u.periods[e].asets.length&&utils.isPosInt(r)&&r<u.periods[e].asets[t].reps.length&&(i=!0),i},h=function(e){var t,r=u.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].segments;for(t=0;t<r.length;t++)if(r[t].id===e.idPiece)return r[t]},S=function(e,t,r){var i=u.periods[e].asets[t].reps[r].segments,n=i[i.length-1];return n.time+n.duration},E=function(e,t,r){var i=S(e,t,r);return Math.max(i-conf.LIVE.DISTANCE_FROM_LIVE_EDGE,u.periods[e].asets[t].reps[r].segments[0].time)},M=function(e,t,r){for(var i,n=u.periods[e].asets[t].reps[r].segments,s=T(e,t,r),o=E(e,t,r),a=n.length-1;i=n[a];a--)if(i.time<=o||s>=a)return a;return 0},v=function(e,t,r){if(!m(e,t,r))return void 0;var i=M(e,t,r),n=u.periods[e].asets[t].reps[r].segments[i];return{id_period:e,id_rep:r,id_aset:t,idPiece:n.id,segment:n}},T=function(e,t,r){var i=0,n=u.periods[e].asets[t].reps[r].segments;return g()&&(n.length>=5?i=2:4===n.length?i=1:3===n.length&&n[2].duration>=9&&(i=1)),i},P=function(e,t,r){if(!m(e,t,r))return void 0;var i=T(e,t,r),n=u.periods[e].asets[t].reps[r].segments[i];return{id_period:e,id_rep:r,id_aset:t,idPiece:n.id,segment:n}},A=function(e,t,r,i){if(!g())return!1;var n=u.periods[e].asets[t].reps[r].segments[0];return i<n.time},I=function(e){"dash"===e?(s=conf.STREAM_TYPES.DASH,a.stream_type=s):"smooth"===e?(s=conf.STREAM_TYPES.SMOOTH,a.stream_type=s):"hls"===e?(s=conf.STREAM_TYPES.HLS,a.stream_type=s):0},L=function(e){e?l.getMap(p,i,y):l.getMap(d,null,w)},w=function(e,t){if(e)return void o(e);var r,s,f=t.map.profile;i=t.map,u=R(i),a.map=u,u.location&&a.stream_type!=conf.STREAM_TYPES.HLS&&(r=utils.parseUrl(u.location),s=utils.parseUrl(d),p=s.protocol+"//"+r.host+r.pathname+r.search+r.hash,conf.ADD_QUERY_PARAM&&(p=utils.updateQueryStringParameter(p,"streamroot",1))),void 0!==f&&(n=f),I(t.type),g()&&H(),c=!0,o()},y=function(t,r){i=r.map,u=R(i),a.map=u,e.downloadManager.mapUpdated(u),0,0,H()},R=function(e){return f.trimMapByBitrate(e,conf.REPRESENTATION_NUMBER)},H=function(){var t=u.periods[e.currentPeriod].asets[0].reps[0].segments,i=t[t.length-1].duration||conf.MPD_UPDATE_INTERVAL,n=Math.max(1e3*i-conf.RTT_RELOAD_OFFSET,conf.MIN_UPDATE_INTERVAL);clearInterval(r),r=setInterval(function(){a.loadManifest(!0)},n)},D=function(e,t,r,i,n,s){for(var o,a=u.periods[e].asets[t].reps[r].segments,d=n,p=a.length,f=0;p>f;f++)if(a[f].id==i){if(o=a[f].time-d,Math.abs(o)>conf.PTS_TOLERANCE)if(g())for(var c=f;p>c;c++)a[c].time-=o;else for(var l=0;p>l;l++)a[l].time-=o;break}},N=function(t,r,i,n,s,o){for(var a,d=0;a=u.periods[t].asets[d];d++)for(var p,f=0;p=a.reps[f];f++)d===r&&f===i?(D(t,r,i,n,s,o),p.ptsVerified=!0):p.ptsVerified||D(t,d,f,n,s,o);e.downloadManager.triggerInterfaceUpdateMap(u)};this.isLive=g,this.hasSegmentHashes=function(e,t,r){return a.stream_type==conf.STREAM_TYPES.HLS?!1:u.periods[e].asets[t].reps[r].hasSegmentHashes},this.getMap=function(){return u},this.getMpdUrl=function(){return d},this.getStreamType=function(){return s},this.getDuration=function(e){return u.periods[e].duration},this.getPlaybackOffset=function(e){return u.periods[e].playbackOffset},this.getPlaybackTargetSegment=v,this.getBeginningSegment=P,this.isLiveTimeExpired=A,this.getNextSegment=function(e){var t=_.filter(u.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].segments,function(t){return t.id>e.idPiece});return t.length?(t=_.sortBy(t,function(e){return e.id}),{id_period:e.id_period,id_aset:e.id_aset,id_rep:e.id_rep,idPiece:t[0].id,segment:t[0]}):!1},this.getInitSegment=function(e,t,r){var i,n,s;return a.stream_type==conf.STREAM_TYPES.HLS?(i=new ArrayBuffer(8),n="application/vnd.apple.mpegurl",s=10):(i=ISOBMFF.extractInit(u.periods[e].asets[t].reps[r].init.value),n=u.periods[e].asets[t].reps[r].mime+'; codecs="'+u.periods[e].asets[t].reps[r].codecs+'"',s=u.periods[e].duration),{duration:s,initSegment:i,mimecodec:n}},this.getPartForTime=function(e,t,r,i){for(var n=u.periods[e].asets[r].reps[i].segments,s=0;s<n.length-1;s++)if(n[s].time<=t&&n[s+1].time>t)return{id_period:e,id_rep:i,id_aset:r,idPiece:n[s].id,segment:n[s]};return n[n.length-1].time<=t&&n[n.length-1].time+n[n.length-1].duration>t?{id_period:e,id_rep:i,id_aset:r,idPiece:n[s].id,segment:n[n.length-1]}:(0,null)},this.getPieceInfos=function(e){var t=h(e);return t?a.stream_type==conf.STREAM_TYPES.HLS?{url:t.url||u.periods[e.id_period].asets[e.id_aset].reps[0].url,range:t.size&&t.offset&&{start:t.offset,end:t.offset+t.size-1}||null,downloading:t.downloading,downloaded:t.downloaded,size:t.size||null,time:t.time}:{url:t.url||u.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].url,range:t.size&&t.offset&&{start:t.offset,end:t.offset+t.size-1}||null,downloading:t.downloading,downloaded:t.downloaded,size:t.size||null,time:t.time}:(0,!1)},this.getSegmentHash=function(e){var t=h(e);return t?t.hash?t.hash:!1:(0,!1)},this.setSegmentSize=function(e,t,r,i,n){var s=h({id_period:e,id_aset:t,id_rep:r,idPiece:i});s&&(s.size||(s.size=n,0))},this.setSegmentHash=function(e,t){var r=h(e);r&&(r.hash=t)},this.loadManifest=function(e,t){0,o=t,L(e)},this.markAsDownloading=function(e,t){var r=h(e);r?r.downloading=t|!1:0},this.markAsDownloaded=function(e){var t=h(e);t?t.downloaded=!0:0},this.getVideoTrackDimensions=function(e,t,r){var i=u.periods[e].asets[t].reps[r];return i.width&&i.height?{width:i.width,height:i.height}:{width:0,height:0}},this.updateMapPTS=N};module.exports=ManifestManager;


},{"../../../vendor/js/isobmffManager":267,"../../confMedia":3,"../utils":60,"./MapHelper":15,"streamroot-map-generator":166,"underscore":265}],15:[function(require,module,exports){
  "use strict";var MapHelper=function(){var r=function(r,n){for(var i,a=t(r),s=r.periods[0],p=Math.abs(n),o=0;i=s.asets[o];o++){for(var l,f=[],u=0;l=i.reps[u];u++)e(f,l);n>0?p<f.length&&f.splice(0,f.length-p):0>n&&p<f.length&&f.splice(p,f.length-p),a.periods[0].asets[o].reps=f}return a},e=function(r,e){for(var t=!1,n=0;n<r.length;n++)if(e.bandwidth<r[n].bandwidth){r.splice(n,0,e),t=!0;break}t||r.push(e)},t=function(r){if(null===r||"object"!=typeof r)return r;var e;e=r instanceof Array?[]:{};for(var n in r)"init"===n?e[n]=r[n]:"reps"===n||(e[n]=t(r[n]));return e};this.trimMapByBitrate=r};module.exports=MapHelper;


},{}],16:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),Buffer=require("./Buffer"),ManifestManager=require("./ManifestManager"),DownloadManager=require("../download/DownloadManager"),utils=require("../utils"),VideoWrapper=require("./VideoWrapper"),VideoExtension=require("./wrapper/VideoExtension"),Track=require("./Track.js"),MediaStats=require("./MediaStats"),EventEmitter=require("eventemitter3"),DRMManager=require("../security/DRMManager.js"),MediaController=function(e,t,r,i){var n=(new Date).getTime();this.playlistDuration=0;var s,a=["onBuffering","onPlaying","onPaused","onFinish","onSpaceBar","onKeyForward","onKeyRewind"],o=function(){},d=utils.overloadConf(conf,i);for(s=0;s<a.length;s++)"undefined"==typeof r[a[s]]&&(r[a[s]]=o);"application/x-shockwave-flash"===e.type?this.video=new VideoExtension(this,e):this.video=e,this.video.event_handlers=r,this.ee=new EventEmitter,this.addVideoEventListener("ended",this.onEnded.bind(this)),this.addVideoEventListener("stalled",this.onStalled.bind(this)),this.video.addEventListener("play",this.onPlay.bind(this)),this.buffer=new Buffer(this),this.videoWrapper=new VideoWrapper(this.video,this,n),this.mediaStats=new MediaStats(this.videoWrapper,this.buffer),this.video.mpd=new ManifestManager(this,t),this.manifestManager=this.video.mpd,this.downloadManager=new DownloadManager(this,d),this.drmManager=new DRMManager(this.video),this.want_to_play=!1,this.currentTracks={},this.currentPeriod=0,conf.FORCE_TRACK_BOOL&&conf.PRESELECTED_TRACKS&&(this.currentTracks=conf.PRESELECTED_TRACKS),this.manifestManager.loadManifest(!1,this.manifestReady.bind(this))};MediaController.prototype.conditionalPlay=function(){this.want_to_play&&this.video.paused&&this.play(!0)},MediaController.prototype.manifestReady=function(e){if(e&&conf.DISPLAY_ERROR)return void this.video.event_handlers.onError(e);var t,r=this.manifestManager.getMap();if(this.manifestManager.isLive())for(var i=r.periods[0].asets[0].reps[0].segments,n=0;n<i.length;n++)this.playlistDuration+=i[n].duration;for(var s,a=0;s=r.periods[this.currentPeriod].asets[a];a++)this.manifestManager.getStreamType()==conf.STREAM_TYPES.HLS&&(s.type="video"),this.currentTracks[s.type]||(this.currentTracks[s.type]=new Track(a,0,!1)),this.currentTracks[s.type].autoswitch=conf.DEFAULT_AUTOSWITCH[s.type]===!0;if(conf.FORCE_TRACK_BOOL||this.chooseBandwidthInitial(),this.video.event_handlers.onMetaData){for(var o,d=[],h=0;o=r.periods[this.currentPeriod].asets[h];h++){for(var c,u=o.lang||null,p=o.type||null,l=0;c=o.reps[l];l++){var f={bandwidth:c.bandwidth,id_rep:l,lang:c.lang||u,width:c.width||null,height:c.height||null};f.type=p,f.id_aset=h,f.type&&(f.selected=this.currentTracks[f.type].autoswitch===!1&&this.currentTracks[f.type].id_aset==f.id_aset&&this.currentTracks[f.type].id_rep==f.id_rep),d.push(f)}0}for(var T in this.currentTracks)t={label:"auto",auto:!0,type:T,selected:this.currentTracks[T].autoswitch!==!1,id_rep:-1},conf.AUTO_LABEL_FIRST?d.splice(0,0,t):d.push(t);d=d.sort(utils.sortDescending),this.video.event_handlers.onMetaData(d),this.emitNewBitrate()}var M=[];for(var v in this.currentTracks)M.push({autoswitch:this.currentTracks[v].autoswitch,asetId:this.currentTracks[v].id_aset,representationId:this.currentTracks[v].id_rep,type:v});this.buffer.initBuffer(this.currentPeriod,M,r.minBufferTime,r.maxSegmentDuration),this.downloadManager.triggerInterfaceUpdateMap(r),this.manifestManager.isLive()&&(M=this.computeBufferLevelMax(M)),this.downloadManager.triggerInterfaceTrackChange(this.currentPeriod,M)},MediaController.prototype.computeBufferLevelMax=function(e){var t=conf.LIVE.DISTANCE_FROM_LIVE_EDGE-conf.LIVE.MIN_BUFFER_LEVEL;return 0>=t&&(0,t=0),e.map(function(e){return e.bufferLevelMax=t,e})},MediaController.prototype.onEnded=function(){this.ended||(0,this.buffer.onEnded(),this.ended=!0,this.videoWrapper.onEnded(),this.video.event_handlers.onFinish(),this.ee.emit("ended"))},MediaController.prototype.onPlay=function(){this.ended&&(this.video.currentTime=0,this.ended=!1)},MediaController.prototype.onStalled=function(){if(0===this.video.currentTime&&this.want_to_play)try{this.video.currentTime=0}catch(e){}},MediaController.prototype.sortMaxBWReps=function(){var e,t=this.currentTracks;for(var r in t)t.hasOwnProperty(r)&&(e=this.manifestManager.getMap().periods[this.currentPeriod].asets[t[r].id_aset].reps,e.sort(utils.sortDescending))},MediaController.prototype.chooseFirstReps=function(){var e=this.currentTracks;for(var t in e)e.hasOwnProperty(t)&&(e[t].id_rep=0)},MediaController.prototype.chooseBandwidthInitial=function(){var e,t,r,i,n;if(conf.FORCE_BANDWIDTH)for(i in this.currentTracks){for(t=1/0,e=this.manifestManager.getMap().periods[this.currentPeriod].asets[this.currentTracks[i].id_aset].reps,n=0;n<e.length;n++)Math.abs(e[n].bandwidth-conf.FORCE_BANDWIDTH[i])<=t&&(t=Math.abs(e[n].bandwidth-conf.FORCE_BANDWIDTH[i]),r=n);this.currentTracks[i].id_rep=r}},MediaController.prototype.onEmergency=function(){this.videoWrapper.setWaiting()},MediaController.prototype.manualSwitchRepresentation=function(e,t,r){var i=this.currentTracks[e].id_aset,n=this.currentTracks[e].id_rep,s=!1,a=this.manifestManager.getMap();-1==r?(0,this.currentTracks[e].autoswitch=!0):(0,this.currentTracks[e].autoswitch=!1,this.currentTracks[e].id_aset=t,this.currentTracks[e].id_rep=r,s=a.periods[this.currentPeriod].asets[t].reps[r].bandwidth>a.periods[this.currentPeriod].asets[i].reps[n].bandwidth||conf.BUFFER.ALWAYS_FORCE_SWITCH,this.switchRepresentation(i,t,n,r,s))},MediaController.prototype.switchRepresentation=function(e,t,r,i,n){if(t!==e||i!==r){this.buffer.switchedTrack(e,r,t,i,n),this.downloadManager.killSegmentDownloadForTrack(e);var s=[];0;for(var a in this.currentTracks)this.currentTracks[a].id_aset===e&&this.currentTracks[a].id_rep===r&&(this.currentTracks[a].id_aset=t,this.currentTracks[a].id_rep=i,0),s.push({autoswitch:this.currentTracks[a].autoswitch,asetId:this.currentTracks[a].id_aset,representationId:this.currentTracks[a].id_rep,type:a});this.downloadManager.triggerInterfaceTrackChange(this.currentPeriod,s),this.ee.emit("trackSwitch"),this.emitNewBitrate()}},MediaController.prototype.emitNewBitrate=function(){var e=0;for(var t in this.currentTracks)e+=this.manifestManager.getMap().periods[this.currentPeriod].asets[this.currentTracks[t].id_aset].reps[this.currentTracks[t].id_rep].bandwidth;this.ee.emit("bitrateswitch",e)},MediaController.prototype.isPaused=function(){return this.video.paused},MediaController.prototype.isAutoplay=function(){return this.video.autoplay},MediaController.prototype.getCurrentTime=function(){return this.video.currentTime},MediaController.prototype.getDuration=function(){return this.video.duration},MediaController.prototype.getVideoBuffered=function(){return this.video.buffered},MediaController.prototype.setCurrentTime=function(e){e>=0&&1/0>e?this.video.currentTime=e:0},MediaController.prototype.play=function(e){e&&this.ended?0:(this.want_to_play=!0,this.video.paused&&(this.buffer.setStreamingMode(),this.video.play()))},MediaController.prototype.pause=function(){0,this.want_to_play=0,this.video.pause(),this.video.event_handlers.onPaused()},MediaController.prototype.getBuffered=function(){return this.buffer.getBuffered()},MediaController.prototype.watchFreezeLive=function(){var e=this.getCurrentTime(),t=-(1/0),r=function(){if(this.buffer.isInitialized()){var r,i=this.getCurrentTime(),n=(new Date).getTime();.002>i-e&&(n-t>conf.FREEZE_LIVE_MIN_SEEK_TIME&&(r=this.manifestManager.map.periods[this.currentPeriod].asets[0].reps[0].segments[0].time+.01,r>=this.getCurrentTime()&&(this.setCurrentTime(r),t=n)),this.play(!0),0),e=i}};setInterval(r.bind(this),1e3)},MediaController.prototype.addVideoEventListener=function(e,t){this.video.addEventListener(e,t)},MediaController.prototype.addEventListener=function(e,t){this.ee.addListener(e,t)},MediaController.prototype.getVideoDimensions=function(){return this.manifestManager.getVideoTrackDimensions(this.currentPeriod,this.currentTracks.video.id_aset,this.currentTracks.video.id_rep)},MediaController.prototype.updateMapPTS=function(e,t,r){return this.manifestManager.updateMapPTS(this.currentPeriod,this.currentTracks.video.id_aset,this.currentTracks.video.id_rep,e,t,r)},module.exports=MediaController;


},{"../../confMedia":3,"../download/DownloadManager":6,"../security/DRMManager.js":58,"../utils":60,"./Buffer":10,"./ManifestManager":14,"./MediaStats":17,"./Track.js":22,"./VideoWrapper":23,"./wrapper/VideoExtension":32,"eventemitter3":110}],17:[function(require,module,exports){
  "use strict";var ObjectHelper=require("../utils/ObjectHelper"),MediaStats=function(t,e){var i=this,r=t,s=e,o=function(){var t=r.getVideoStats(),e=s.getABRStats();return t=ObjectHelper.merge(t,e)},E=function(){window.SR_MEDIA_INTERFACE||(window.SR_MEDIA_INTERFACE={}),window.SR_MEDIA_INTERFACE.qos={},window.SR_MEDIA_INTERFACE.qos.getStats=o};i.getStats=o,E()};module.exports=MediaStats;


},{"../utils/ObjectHelper":61}],18:[function(require,module,exports){
  var EventEmitter=require("eventemitter3").EventEmitter,PlayerInterface=function(e){this.getCurrentTime=function(){return e.getCurrentTime()},this.setCurrentTime=function(t){e.setCurrentTime(t)},this.getPlaybackOffset=function(){return e.manifestManager.getPlaybackOffset(e.currentPeriod)},this.getBuffered=function(){for(var t,r=e.buffer.getBufferedTracks(),i=[],n=0;t=r[n];n++)i.push({buffered:t.buffered,periodId:e.currentPeriod,asetId:t.id_aset,repId:t.id_rep,bufferedStrict:t.bufferedStrict});return i},this.areBuffersInitialized=function(){return e.buffer.isInitialized()},this.setBufferMarginLive=function(t,r){e.buffer.setBufferMarginLive(t,r)},this.addEventListener=function(e,t){this.on(e,t)},this.addVideoEventListener=function(t,r){e.addVideoEventListener(t,r)},this.getMediaStats=function(){return e.mediaStats}};PlayerInterface.prototype=Object.create(EventEmitter.prototype),PlayerInterface.prototype.constructor=PlayerInterface,module.exports=PlayerInterface;


},{"eventemitter3":110}],19:[function(require,module,exports){
  "use strict";var SeekRequest=function(e,t){var n=t,i=!1,u=function(){return n},r=function(){return i},s=function(){i=!0},c=function(){return e};this.isReady=r,this.getTrackType=u,this.setReady=s,this.getPiece=c};module.exports=SeekRequest;


},{}],20:[function(require,module,exports){
  "use strict";function readBytes(t,r,e){for(var n="",a=0;e>a;a++)n+=decToHex(t[r+a]);return n}function decToHex(t,r){var e=Number(t).toString(16);return r="undefined"==typeof r||null===r?r=2:r,r>16&&(r=16),e="0000000000000000".substr(0,r-e.length)+e}function intToUint8Array(t,r){r="undefined"==typeof r||null===r?r=16:r,t=decToHex(t,r);for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return new Uint8Array(e)}var Long=require("./parser/long"),MOOF="6D6F6F66",MFHD="6D666864",TRAF="74726166",TFHD="74666864",TFDT="74666474",TRUN="7472756E",MDAT="6D646174",UUID="75756964",SegmentUpdater=function(t,r){this.piece=r,this.data=new Uint8Array(t)};SegmentUpdater.prototype.updateSegment=function(){var t=this.buildSegment();t.moof.traf.tfdt||(t=this.addTfdt(t)),t=this.updateTfhd(t),t=this.updateTrun(t);var r=this.buildData(t);return 0,r},SegmentUpdater.prototype.buildSegment=function(){for(var t=this.findBox(MOOF,0,this.data.length),r=this.findBox(MFHD,t.start+8,t.length-8),e=this.findBox(TRAF,t.start+8,t.length-8),n=this.findBox(TFHD,e.start+8,e.length-8),a=this.findBox(TRUN,e.start+8,e.length-8),o=this.findBox(TFDT,e.start+8,e.length-8),f=[],h=this.findBox(MDAT,0,this.data.length),i=this.findBox(UUID,e.start+8,e.length-8);i;)f.push(i),i=this.findBox(UUID,i.start+i.length,e.length-8-(i.start-e.start)-i.length);var d=!1,g=!1;a&&(d=this.data.subarray(a.start,a.start+a.length)),o&&(g=this.data.subarray(o.start,o.start+o.length));for(var l=0,s=0;s<f.length;s++){var u=f[s];f[s]=this.data.subarray(u.start,u.start+u.length),l+=u.length}var m=this.data.subarray(r.start,r.start+r.length),p=this.data.subarray(n.start,n.start+n.length),y=this.data.subarray(h.start,h.start+h.length);e.length=p.length+(g.length||0)+d.length+8,t.length=m.length+e.length+8;var T={moof:{length:t.length,mfhd:m,traf:{length:e.length,tfhd:p,tfdt:g,trun:d,uuid:f}},mdat:y};return T},SegmentUpdater.prototype.addTfdt=function(t){for(var r=[0,0,0,20,116,102,100,116,1,0,0,0,0,0,0,0,0,0,0,0],e=intToUint8Array(this.piece.segment.decodeTime,16),n=0;n<e.length;n++)r[12+n]=e[n];return r=new Uint8Array(r),t.moof.traf.tfdt=r,t.moof.length+=20,t.moof.traf.length+=20,t},SegmentUpdater.prototype.addTrun=function(t){},SegmentUpdater.prototype.updateTfhd=function(t){var r=t.moof.traf.tfhd,e=r[11],n=0,a=!1;e%2===1&&(n=-8,a=!0),t.moof.length=t.moof.length+n,t.moof.traf.length=t.moof.traf.length+n;var o=r.length+n,f=new Uint8Array(o),h=0;o=intToUint8Array(o,8);for(var i=0;i<o.length;i++)f[h]=o[i],h++;for(;11>h;)f[h]=r[h],h++;for(a?f[11]=e-1:f[11]=e,h++;15>h;)f[h]=r[h],h++;for(;h<r.length+n;)f[h]=r[h-n],h++;return t.moof.traf.tfhd=f,t},SegmentUpdater.prototype.updateTrun=function(t){var r=t.moof.traf.trun,e=r[11],n=0,a=!0;e%2===0&&(n=4,a=!1),t.moof.length=t.moof.length+n,t.moof.traf.length=t.moof.traf.length+n;var o=r.length+n,f=new Uint8Array(o),h=0;o=intToUint8Array(o,8);for(var i=0;i<o.length;i++)f[h]=o[i],h++;for(;11>h;)f[h]=r[h],h++;for(a?f[11]=e:f[11]=e+1,h++;16>h;)f[h]=r[h],h++;for(var d=intToUint8Array(t.moof.length+8,8),i=0;i<d.length;i++)f[h]=d[i],h++;for(;h<r.length+n;)f[h]=r[h-n],h++;return t.moof.traf.trun=f,t},SegmentUpdater.prototype.buildData=function(t){for(var r=t.moof.length+t.mdat.length,e=new Uint8Array(r),n=0,a=intToUint8Array(t.moof.length,8),o=0;o<a.length;o++)e[n]=a[o],n++;for(e[4]=109,e[5]=111,e[6]=111,e[7]=102,n=8,o=0;o<t.moof.mfhd.length;o++)e[n]=t.moof.mfhd[o],n++;var f=intToUint8Array(t.moof.traf.length,8);for(o=0;o<f.length;o++)e[n]=f[o],n++;for(e[n]=116,n++,e[n]=114,n++,e[n]=97,n++,e[n]=102,n++,o=0;o<t.moof.traf.tfhd.length;o++)15==o?e[n]=2:e[n]=t.moof.traf.tfhd[o],n++;for(o=0;o<t.moof.traf.tfdt.length;o++)e[n]=t.moof.traf.tfdt[o],n++;for(o=0;o<t.moof.traf.trun.length;o++)e[n]=t.moof.traf.trun[o],n++;for(o=0;o<t.mdat.length;o++)e[n]=t.mdat[o],n++;return e},SegmentUpdater.prototype.findBox=function(t,r,e){t=t.toLowerCase();for(var n=r,a="",o=0;r+e>n&&a!=t;)n+=o,o=parseInt(readBytes(this.data,n,4),16),a=readBytes(this.data,n+4,4);return a==t?{start:n,length:o}:!1},module.exports=SegmentUpdater;


},{"./parser/long":25}],21:[function(require,module,exports){
  "use strict";var CustomTimeRange=require("./CustomTimeRange"),AESController=require("./AESController"),SourceBufferWrapper=function(e){this.ACTION_TYPE={REMOVE:0,APPEND:1};var n,t,r,i,u=this,o=[],f=[],a=0,s=[],d=.3,c=!1,l=function(e,n,t,r){e===u.ACTION_TYPE.APPEND?o.push({segmentData:n,segmentInterval:t,seqnum:r}):f.push(n)},p=function(e){e===u.ACTION_TYPE.APPEND?o.splice(0,1):f.splice(0,1)},g=function(){var e;for(e=o.length-1;e>=0;e--)"undefined"!=typeof o[e].segmentInterval&&o.splice(e,1);s=[]},h=function(e){var n;for(n=0;n<s.length;n++)if(e.start<s[n].start)return void s.splice(n,0,e);s.push(e)},v=function(e){var n;for(n=0;n<s.length;n++)s[n]===e&&s.splice(n,1)},m=function(){return 0===o.length&&0===f.length},E=function(e,o,f,s){if(i.updating||t)0,f||l(u.ACTION_TYPE.APPEND,e,o,s);else if(c&&o);else if(f||m()){var d,g;o&&(d=o.start,g=o.end),r=o,f&&p(u.ACTION_TYPE.APPEND);var h=function(e){return function(n,r){return n?void 0:(t=!1,void(a===e?i.isFlash?i.appendBuffer(r,d,g,s):i.appendBuffer(r):P()))}},v=h(a);e.key?(t=!0,n.decrypt(e.buffer,e.key.aesKey.buffer,e.key.iv,v)):v(null,e)}else l(u.ACTION_TYPE.APPEND,e,o,s)},T=function(e,n){i.updating?(0,n||l(u.ACTION_TYPE.REMOVE,e)):n||m()?(n&&p(u.ACTION_TYPE.REMOVE),e.start>=0&&e.end<1/0&&e.start<e.end?i.remove(e.start,e.end):(0,setTimeout(P,0))):l(u.ACTION_TYPE.REMOVE,e)},P=function(){r&&(v(r),r=void 0),f.length?T(f[0],!0):o.length?E(o[0].segmentData,o[0].segmentInterval,!0,o[0].seqnum):s=[]},A=function(){for(var e,n,t,r,u,o=i.buffered,f=[],a=0,c=0;a<o.length||c<s.length;)r=a<o.length?o.start(a):1/0,u=c<s.length?s[c].start:1/0,"undefined"==typeof n?r!==1/0&&u>r?(n=o.start(a),t=o.end(a),a++):(n=s[c].start,t=s[c].end,c++):t>r-d?(t=Math.max(t,o.end(a)),a++):t>u-d?(t=Math.max(t,s[c].end),c++):(f.push({start:n,end:t}),n=void 0,t=void 0);return"undefined"!=typeof n&&f.push({start:n,end:t}),e=new CustomTimeRange(f)},S=function(e){var n,t=A();for(n=0;n<t.length;n++)if(t.start(n)<=e&&e<=t.end(n))return{start:t.start(n),end:t.end(n)};return!1},C=function(e,n,t,r){var u=i.buffered.length?i.buffered.end(i.buffered.length-1):void 0;r?(g(),u&&T({start:i.appendWindowStart,end:u},!1)):(n&&T({start:i.appendWindowStart,end:n},!1),t&&u&&(g(),T({start:t,end:u},!1))),E(e.initSegment,void 0,!1)},N=function(){},B=function(){0,g(),a++};this.createSourceBuffer=function(t){n=new AESController,i=e.addSourceBuffer(t.mimecodec),"undefined"==typeof i.appendBuffer&&(i.appendBuffer=i.append),i.addEventListener("updateend",P),t.initSegment.byteLength>10&&i.appendBuffer(t.initSegment)},this.append=function(e,n,t){h(n),E(e,n,!1,t)},this.remove=function(e){T(e,!1)},this.getBufferedTimeRanges=A,this.getBufferedStrict=function(){return i.buffered},this.getPlaybackInterval=S,this.checkSegment=function(e){var n,t,r,i=A(),u=e.time,o=u+e.duration;for(r=0;r<i.length;r++)if(n=i.start(r),t=i.end(r),u+d>=n&&t>=o-d)return!0;return!1},this.switchedTrack=C,this.clearRemoveJobs=function(){f=[]},this.onSeeking=B,this.requestedSeek=function(){c=!0},this.onSeeked=function(){c=!1,i.updating||m()||(0,P())},N()};module.exports=SourceBufferWrapper;


},{"./AESController":9,"./CustomTimeRange":12}],22:[function(require,module,exports){
  function Track(e,i,t){"use strict";void 0===e&&0,void 0===i&&0,this.autoswitch=t,Object.defineProperty(this,"id_aset",{get:function(){return e},set:function(i){void 0===i&&0,e=i}}),Object.defineProperty(this,"id_rep",{get:function(){return i},set:function(e){void 0===e&&0,i=e}})}module.exports=Track;


},{}],23:[function(require,module,exports){
  "use strict";var debug,debugEvent,VideoWrapper=function(e,n,t){var i,a,r,o,f,d,s=(new Date).getTime(),u=!0,c=0,g=!1,m=0,v=0,p=!1,l=0,w=t,T=function(e){var n;window.performance&&window.performance.timing?(n=window.performance.timing,d=e-n.domInteractive):d=0,o?f=e-o:(0,f=e-w)},y=function(){if(p&&a){var e=(new Date).getTime();v+=(e-a)/1e3,a=e}},b=function(){y(),p=!1,a=!1},E=function(){a||(a=(new Date).getTime()),p=!0},h=function(){n.manifestManager.isLive()||(r=(new Date).getTime(),g=!0,b()),s=(new Date).getTime()},D=function(){g=!1},L=function(){var t=(new Date).getTime();e.isFlash||n.buffer.isReady()?(e.event_handlers.onPlaying(),n.ee.emit("playing"),void 0===f&&T(t),E(),i&&(m+=(t-i)/1e3,i=void 0,n.ee.emit("bufferend")),r&&(l+=(t-r)/1e3,r=void 0)):k()},S=function(){u=!0},k=function(){u=!0,e.isFlash||(e.playbackRate=0),e.event_handlers.onBuffering(),g?g=!1:(_(),n.ee.emit("bufferstart")),b(),setTimeout(function(){V()},200)},R=function(){o||(o=(new Date).getTime()),u=!1},I=function(){b()},P=function(){b()},V=function(){var t=setInterval(function(){n.buffer.isReady()&&(clearInterval(t),e.playbackRate=1,e.paused||e.dispatchEvent(new Event("playing")))},100)},W=function(){e.addEventListener("seeking",h),e.addEventListener("seeked",D),e.addEventListener("playing",L),e.addEventListener("waiting",S),e.addEventListener("play",R),e.addEventListener("pause",I)},_=function(){!i&&f&&(i=(new Date).getTime(),c++)},F=function(){var e=100*v/(m+v);return{startupTime:f,startupTimeLoad:d,rebufferingCount:c,timeSpentRebuffering:m,timeSpentPlaying:v,timeSpentSeeking:l,percentageTimeSpentPlaying:e}},x=function(){W(),setInterval(y,1e3)};this.setWaiting=k,this.onEnded=P,this.getVideoStats=F,x()};module.exports=VideoWrapper;


},{}],24:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),VBM=function(){this.parts=[],this.buffered=[],this.length=0,this.TOLERANCE=.1};VBM.prototype.clear=function(){this.parts=[],this.buffered=[],this.length=0},VBM.prototype.addPiece=function(t){var e;if(this.parts.length)for(e=0;e<this.parts.length;e++){if(t.idPiece<=this.parts[e].idPiece){this.parts.splice(e,0,t);break}if(e===this.parts.length-1){this.parts.push(t);break}}else this.parts.push(t);this.computeBuffered()},VBM.prototype.checkSegment=function(t){var e;for(e=0;e<this.parts.length;e++)if(this.parts[e].idPiece===t)return!0;return!1},VBM.prototype.remove=function(t,e){var s,i,r;for(s=this.parts.length-1;s>=0;s--)if(i=this.parts[s].segment.time,r=i+this.parts[s].segment.duration,e>=i){if(!(r>=t))break;this.parts.splice(s,1)}this.computeBuffered()},VBM.prototype.removePiece=function(t){var e;for(e=0;e<this.parts.length;e++)if(this.parts[e].id_period===t.id_period&&this.parts[e].id_aset===t.id_aset&&this.parts[e].id_rep===t.id_rep&&this.parts[e].idPiece===t.id_segment){this.parts.splice(e,1);break}this.computeBuffered()},VBM.prototype.computeBuffered=function(){var t,e;for(this.buffered=[],e=0;e<this.parts.length;e++)t||0===t?this.parts[e-1].segment.time+this.parts[e-1].segment.duration+this.TOLERANCE<this.parts[e].segment.time&&(this.buffered.push({start:t,end:this.parts[e-1].segment.time+this.parts[e-1].segment.duration}),t=this.parts[e].segment.time):t=this.parts[e].segment.time,e===this.parts.length-1&&this.buffered.push({start:t,end:this.parts[e].segment.time+this.parts[e].segment.duration});this.length=this.buffered.length},VBM.prototype.switchedBitrate=function(t,e){var s,i,r;for(s=0;s<this.parts.length;s++)if("undefined"==typeof i)this.parts[s].segment.time<=t&&t<this.parts[s].segment.time+this.parts[s].segment.duration&&(i=s,r=s);else{if(!(this.parts[s-1].segment.time+this.parts[s-1].segment.duration+this.TOLERANCE>=this.parts[s].segment.time))break;if(r=s,e&&this.parts[s].segment.time>=t+conf.BUFFER.EMERGENCY_MARGIN)break}"undefined"!=typeof i?(this.parts=this.parts.splice(i,r-i+1),this.computeBuffered()):this.clear()},VBM.prototype.getIdLastSegmentInPlaybackInterval=function(t){var e,s,i;for(e=0;e<this.parts.length;e++)if("undefined"==typeof s)this.parts[e].segment.time<=t&&t<this.parts[e].segment.time+this.parts[e].segment.duration&&(s=e,i=this.parts[e].idPiece);else{if(!(this.parts[e-1].segment.time+this.parts[e-1].segment.duration+this.TOLERANCE>=this.parts[e].segment.time))break;i=this.parts[e].idPiece}return i},VBM.prototype.start=function(t){try{return this.buffered[t].start}catch(e){return 0}},VBM.prototype.end=function(t){try{return this.buffered[t].end}catch(e){return 0}},module.exports=VBM;


},{"../../confMedia":3}],25:[function(require,module,exports){
  var Long=function(t,n,i){this.low=0|t,this.high=0|n,this.unsigned=!!i},INT_CACHE={},UINT_CACHE={};Long.fromInt=function(t,n){var i,o;return n?(t>>>=0,t>=0&&256>t&&(o=UINT_CACHE[t])?o:(i=new Long(t,0>(0|t)?-1:0,!0),t>=0&&256>t&&(UINT_CACHE[t]=i),i)):(t=0|t,t>=-128&&128>t&&(o=INT_CACHE[t])?o:(i=new Long(t,0>t?-1:0,!1),t>=-128&&128>t&&(INT_CACHE[t]=i),i))},Long.fromNumber=function(t,n){return n=!!n,isNaN(t)||!isFinite(t)?Long.ZERO:!n&&-TWO_PWR_63_DBL>=t?Long.MIN_SIGNED_VALUE:n&&0>=t?Long.MIN_UNSIGNED_VALUE:!n&&t+1>=TWO_PWR_63_DBL?Long.MAX_SIGNED_VALUE:n&&t>=TWO_PWR_64_DBL?Long.MAX_UNSIGNED_VALUE:0>t?Long.fromNumber(-t,!1).negate():new Long(t%TWO_PWR_32_DBL|0,t/TWO_PWR_32_DBL|0,n)},Long.fromBits=function(t,n,i){return new Long(t,n,i)},Long.from28Bits=function(t,n,i,o){return Long.fromBits(t|n<<28,n>>>4|i<<24,o)},Long.fromString=function(t,n,i){if(0==t.length)throw new Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return Long.ZERO;if("number"==typeof n&&(i=n,n=!1),i=i||10,2>i||i>36)throw new Error("radix out of range: "+i);if("-"==t.charAt(0))return Long.fromString(t.substring(1),n,i).negate();if(t.indexOf("-")>=0)throw new Error('number format error: interior "-" character: '+t);for(var o=Long.fromNumber(Math.pow(i,8)),r=Long.ZERO,e=0;e<t.length;e+=8){var g=Math.min(8,t.length-e),s=parseInt(t.substring(e,e+g),i);if(8>g){var h=Long.fromNumber(Math.pow(i,g));r=r.multiply(h).add(Long.fromNumber(s))}else r=r.multiply(o),r=r.add(Long.fromNumber(s))}return r};var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_31_DBL=TWO_PWR_32_DBL/2,TWO_PWR_48_DBL=TWO_PWR_32_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=Long.fromInt(1<<24);Long.ZERO=Long.fromInt(0),Long.ONE=Long.fromInt(1),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_SIGNED_VALUE=Long.fromBits(-1,2147483647,!1),Long.MAX_UNSIGNED_VALUE=Long.fromBits(-1,-1,!0),Long.MAX_VALUE=Long.MAX_SIGNED_VALUE,Long.MIN_SIGNED_VALUE=Long.fromBits(0,-2147483648,!1),Long.MIN_UNSIGNED_VALUE=Long.fromBits(0,0,!0),Long.MIN_VALUE=Long.MIN_SIGNED_VALUE,Long.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},Long.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},Long.prototype.toString=function(t){if(t=t||10,2>t||t>36)throw new Error("radix out of range: "+t);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(Long.MIN_SIGNED_VALUE)){var i=Long.fromNumber(t),o=this.div(i);return n=o.multiply(i).subtract(this),o.toString(t)+n.toInt().toString(t)}return"-"+this.negate().toString(t)}var r=Long.fromNumber(Math.pow(t,6));n=this;for(var e="";;){var g=n.div(r),s=n.subtract(g.multiply(r)).toInt(),h=s.toString(t);if(n=g,n.isZero())return h+e;for(;h.length<6;)h="0"+h;e=""+h+e}},Long.prototype.getHighBits=function(){return this.high},Long.prototype.getHighBitsUnsigned=function(){return this.high>>>0},Long.prototype.getLowBits=function(){return this.low},Long.prototype.getLowBitsUnsigned=function(){return this.low>>>0},Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Long.MIN_SIGNED_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},Long.prototype.isZero=function(){return 0==this.high&&0==this.low},Long.prototype.isNegative=function(){return!this.unsigned&&this.high<0},Long.prototype.isOdd=function(){return 1==(1&this.low)},Long.prototype.isEven=function(){return 0==(1&this.low)},Long.prototype.equals=function(t){return this.unsigned!=t.unsigned&&this.high>>>31!=t.high>>>31?!1:this.high==t.high&&this.low==t.low},Long.prototype.notEquals=function(t){return!this.equals(t)},Long.prototype.lessThan=function(t){return this.compare(t)<0},Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},Long.prototype.greaterThan=function(t){return this.compare(t)>0},Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},Long.prototype.compare=function(t){if(this.equals(t))return 0;var n=this.isNegative(),i=t.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high==this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1},Long.prototype.negate=function(){return!this.unsigned&&this.equals(Long.MIN_SIGNED_VALUE)?Long.MIN_SIGNED_VALUE:this.not().add(Long.ONE)},Long.prototype.add=function(t){var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r+h,f+=a>>>16,a&=65535,f+=o+s,L+=f>>>16,f&=65535,L+=i+g,u+=L>>>16,L&=65535,u+=n+e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.subtract=function(t){return this.add(t.negate())},Long.prototype.multiply=function(t){if(this.isZero())return Long.ZERO;if(t.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE))return t.isOdd()?Long.MIN_VALUE:Long.ZERO;if(t.equals(Long.MIN_VALUE))return this.isOdd()?Long.MIN_VALUE:Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(TWO_PWR_24)&&t.lessThan(TWO_PWR_24))return Long.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r*h,f+=a>>>16,a&=65535,f+=o*h,L+=f>>>16,f&=65535,f+=r*s,L+=f>>>16,f&=65535,L+=i*h,u+=L>>>16,L&=65535,L+=o*s,u+=L>>>16,L&=65535,L+=r*g,u+=L>>>16,L&=65535,u+=n*h+i*s+o*g+r*e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.div=function(t){if(t.isZero())throw new Error("division by zero");if(this.isZero())return Long.ZERO;if(this.equals(Long.MIN_SIGNED_VALUE)){if(t.equals(Long.ONE)||t.equals(Long.NEG_ONE))return min;if(t.equals(Long.MIN_VALUE))return Long.ONE;var n=this.shiftRight(1),i=n.div(t).shiftLeft(1);if(i.equals(Long.ZERO))return t.isNegative()?Long.ONE:Long.NEG_ONE;var o=this.subtract(t.multiply(i)),r=i.add(o.div(t));return r}if(t.equals(Long.MIN_VALUE))return Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(var e=Long.ZERO,o=this;o.greaterThanOrEqual(t);){for(var i=Math.max(1,Math.floor(o.toNumber()/t.toNumber())),g=Math.ceil(Math.log(i)/Math.LN2),s=48>=g?1:Math.pow(2,g-48),h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);u.isNegative()||u.greaterThan(o);)i-=s,h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);h.isZero()&&(h=Long.ONE),e=e.add(h),o=o.subtract(u)}return e},Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},Long.prototype.not=function(){return Long.fromBits(~this.low,~this.high,this.unsigned)},Long.prototype.and=function(t){return Long.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},Long.prototype.or=function(t){return Long.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},Long.prototype.xor=function(t){return Long.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},Long.prototype.shiftLeft=function(t){if(t&=63,0==t)return this;var n=this.low;if(32>t){var i=this.high;return Long.fromBits(n<<t,i<<t|n>>>32-t,this.unsigned)}return Long.fromBits(0,n<<t-32,this.unsigned)},Long.prototype.shiftRight=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>t,this.unsigned)}return Long.fromBits(n>>t-32,n>=0?0:-1,this.unsigned)},Long.prototype.shiftRightUnsigned=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>>t,this.unsigned)}return 32==t?Long.fromBits(n,0,this.unsigned):Long.fromBits(n>>>t-32,0,this.unsigned)},Long.prototype.toSigned=function(){var t=this.clone();return t.unsigned=!1,t},Long.prototype.toUnsigned=function(){var t=this.clone();return t.unsigned=!0,t},Long.prototype.clone=function(){return new Long(this.low,this.high,this.unsigned)},module.exports=Long;


},{}],26:[function(require,module,exports){
  "use strict";var B64Worker="./B64Worker.js",B64Encoder=function(){var e=this,r=new Worker((window.webkitURL||window.URL).createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module \'"+o+"\'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// Apr 1st 2015\r\n// Was removed by Kevin Oury, see commit 9be8c00a8c20e5889b367fec09448f086d69115f\r\n// Restore by Stanislas Fechner for performance issue\r\n\r\n/**\r\n * B64Encoding is done in a seperate worker to avoid performance issue when the \r\n * user switch tab or use fullscreen\r\n * In these use case, the browser consider the tab is not the active one, and all\r\n * timeout in the main thread are set to minimum 1 second\r\n * Since we need the timeout in the function _arrayBufferToBase64 (for performance issue)\r\n * we do it in a different worker, in which timeout will not be affected\r\n */ \r\n\r\nvar _arrayBufferToBase64 = function(bytes, index) {\r\n    var len = bytes.byteLength,\r\n        b64Data = "";\r\n    for (var i = 0; i < len; i++) {\r\n        b64Data += String.fromCharCode(bytes[i]);\r\n    }\r\n    b64Data = btoa(b64Data);\r\n    self.postMessage({\r\n        b64data: b64Data,\r\n        jobIndex: index\r\n    });\r\n};\r\n\r\nself.onmessage = function(e) {\r\n    _arrayBufferToBase64(new Uint8Array(e.data.data), e.data.jobIndex);\r\n};\r\n\r\n\r\n//Method tick can be used trigger event \'timeUpdate\' in flash.\r\n//We\'ll be able to use this event as a workaroud for the setTimeout / setInterval throttling when the tab is inactive / video in fullscreen\r\n\r\nvar tick = function() {\r\n  self.postMessage({\r\n    tick: true\r\n  });\r\n};\r\n\r\n//setInterval(tick, 125);\r\n\r\n\n},{}]},{},[1])'],{type:"text/javascript"}))),n=[],t=function(e,t){var o=n.push({cb:t})-1;r.postMessage({data:e,jobIndex:o})},o=function(e){var r=e.data.jobIndex,t=n[r];delete n[r],t.cb(e.data.b64data)},a=function(){r.onmessage=o};a(),e.encodeData=t};module.exports=B64Encoder;


},{}],27:[function(require,module,exports){
  "use strict";var FlashMBR=function(e,t){var n=e,a=t,i=[],l=function(e){var t,n,l="";for(n=0;n<e.length;n++)t=e[n],"video"===t.type&&(t.label||(t.height?t.label=t.height+"p":t.label=t.bandwidth/1e3+"kbps"),i.push(t),0!==l.length&&(l+=","),t.selected&&(l+="*"),l+=t.label);a.onTrackList(l)},s=function(e){var t=i[e];n.manualSwitchRepresentation(t.type,t.id_aset,t.id_rep)},h=function(){window.sr_request_quality_change=function(e){s(e)}};this.addTrackList=function(e){l(e)},h()};module.exports=FlashMBR;


},{}],28:[function(require,module,exports){
  "use strict";var MediaSourceFlash=require("./MediaSourceFlash"),MediaSourceWrapper=function(e){if("undefined"!=typeof e.video.getSwf)return new MediaSourceFlash(e.video,e);var i;if(null!==window.MediaSource)0,i=new MediaSource;else{if(!(window.webkitMediaSource=window.WebKitMediaSource||window.webkitMediaSource||window.MozMediaSource))throw new Error("Media Source is not supported in this browser");0,i=new webkitMediaSource}return null!==window.URL?e.video.src=window.URL.createObjectURL(i):(window.webkitURL=window.webkitURL||window.WebKitURL)&&(e.video.src=window.webkitURL.createObjectURL(i)),i};module.exports=MediaSourceWrapper;


},{"./MediaSourceFlash":29}],29:[function(require,module,exports){
  "use strict";var SourceBuffer=require("./SourceBuffer"),B64Encoder=require("./B64Encoder"),conf=require("../../../confMedia"),MediaSourceFlash=function(e,r){var n=this,o=e,t=o.getSwf(),u=new B64Encoder,i={OPEN:"open",CLOSED:"closed"},c=i.CLOSED,f=0,d=[],s=[],a=function(e,r){d[e]||(d[e]=[]),d[e].unshift(r)},E=function(e){for(var r=d[e.type]||[],n=r.length;n--;)r[n](e)},S=function(e){var n;return n=new SourceBuffer(e,t,r,u),s.push(n),o.registerSourceBuffer(n),t.addSourceBuffer(e),n},h=function(){o.createSrc(n),setTimeout(function(){c=i.OPEN},100),window.sr_flash_transcodeError=function(e){0,conf.REPORT_ERROR&&window.onPlayerError&&window.onPlayerError(e)}};this.addSourceBuffer=S,this.addEventListener=a,this.trigger=E,Object.defineProperty(this,"readyState",{get:function(){return c},set:void 0}),Object.defineProperty(this,"duration",{get:function(){return f},set:function(e){f=e}}),h()};module.exports=MediaSourceFlash;


},{"../../../confMedia":3,"./B64Encoder":26,"./SourceBuffer":31}],30:[function(require,module,exports){
  "use strict";var SegmentAppender=function(e,n,d){var t,o,s,u=this,p=d,r=e,c=n,f=!1,i=!1,a=!1,g=function(e){if(a=!1,f)0,f=!1,r.segmentFlushed();else{0;var n="undefined"!=typeof s?0:1;c.appendBuffer(e,t,n,o,s)}},m=function(e,n,d,u,c){i?r.segmentFlushed():(t=n,o=d,s=u,0,a=!0,p.encodeData(e,g))},l=function(){};u.appendBuffer=m,u.seeking=function(){a&&(f=!0),i=!0},u.seeked=function(){i=!1},l()};module.exports=SegmentAppender;


},{}],31:[function(require,module,exports){
  "use strict";var CustomTimeRange=require("../CustomTimeRange"),SegmentAppender=require("./SegmentAppender"),SourceBuffer=function(e,t,n,i){var s,o=this,u=[],d=t,r=new SegmentAppender(o,d,i),a=!1,f=e,c=0,p=0,m=-1,g=!1,h=function(){g=!0},l=function(e,t){u[e]||(u[e]=[]),u[e].unshift(t)},b=function(e){for(var t=u[e.type]||[],n=t.length;n--;)t[n](e)},v=function(e){return 0,Math.abs(e-p)>=1&&(0,0,0),Math.abs(e-p)<1},_=function(e,t,n,i){if(a=!0,b({type:"updatestart"}),v(t)||g||"undefined"==typeof t)s=i,r.appendBuffer(e,f,t,n),m=n;else{var o=c===p;0,y(!0)}},T=function(e,t){if(0>e||t==1/0||e>t)throw new Error("Invalid Arguments: cannot call SourceBuffer.remove");a=!0,e>=p||c>=t||(c>=e&&t>=p?p=d.remove(e,t,f):e>c?p=d.remove(e,t,f):c>=e&&(0,c=t)),m=-1,y()},w=function(){var e=[];return p>c&&e.push({start:c,end:p}),new CustomTimeRange(e)},S=function(e,t,i){a=!1,e||0,0,!e&&m>p?(0,p=m,g=!1):e&&(0,t>0&&i>0&&(B(s,t,i),g||(0,n.setCurrentTime(t/1e3)))),b({type:"updateend"})},y=function(e,t,n){0,setTimeout(function(){S(e,t,n)},5)},k=function(e,t){c=e,p=e,f.match(/audio/)&&"undefined"!=typeof t&&(p=t),m=-1},B=n.updateMapPTS.bind(n),C=function(){f.match(/video/)?window.sr_flash_updateend_video=y:f.match(/audio/)?window.sr_flash_updateend_audio=y:f.match(/vnd/)&&(window.sr_flash_updateend_video=y),n.ee.on("trackSwitch",h)};this.appendBuffer=_,this.remove=T,this.addEventListener=l,this.trigger=b,this.seekTime=k,Object.defineProperty(this,"updating",{get:function(){return a},set:void 0}),Object.defineProperty(this,"buffered",{get:w,set:void 0}),this.appendWindowStart=0,this.seeking=function(e,t){k(e,t),r.seeking()},this.seeked=function(){r.seeked()},this.segmentFlushed=function(){y(!0)},Object.defineProperty(this,"isFlash",{get:function(){return!0},set:void 0}),C()};module.exports=SourceBuffer;


},{"../CustomTimeRange":12,"./SegmentAppender":30}],32:[function(require,module,exports){
  "use strict";var conf=require("../../../confMedia"),FlashMBR=require("./FlashMBR"),VideoExtension=function(e,t){var n,i,r,o,s,a=this,u=t,f=[],d=0,c=0,g=2e3,p=[],l=!1,h=function(){return"undefined"!=typeof u},y=!1,v=function(e,t){p[e]||(p[e]=[]),p[e].unshift(t)},m=function(e){for(var t=p[e.type]||[],n=t.length,i="on"+e.type;n--;)t[n](e);a[i]&&"[object Function]"==getClass.call(a[i])&&a[i](e)},w=function(){var t=e.manifestManager.getDuration(0),n=e.getVideoDimensions();u.onMetaData(t,n.width,n.height)},_=function(t){var n,r=t.onMetaData;if("undefined"==typeof r){var o=new FlashMBR(e,u);r=o.addTrackList}n=function(e){r(e),w()},t.onMetaData=n,i=t},k=function(){h()?(c=void 0,u.play()):new Error("Flash video is not initialized")},F=function(){h()?("undefined"==typeof c&&(c=b()),u.pause()):new Error("Flash video is not initialized")},M=function(){h()?u.stop():new Error("Flash video is not initialized")},P=function(e){if(!y){var t,n;if(s=setTimeout(S,5e3),h()){t=j(e),n=O(t),0,a.trigger({type:"seeking"}),y=!0;for(var i=0;i<f.length;i++)f[i].seeking(t,n);r=c=t,u.seek(t)}else new Error("Flash video is not initialized")}},b=function(){return d=u.currentTime()},E=function(){var e=(new Date).getTime();return l?n.duration:"undefined"!=typeof r?r:"undefined"!=typeof c?c:o&&g>e-o?d+(e-o)/1e3:h()?(o=e,b()):0},T=function(){return h()?u.paused():void new Error("Flash video is not initialized")},j=function(t){var n=e.currentTracks.video,i=e.manifestManager.getPartForTime(e.currentPeriod,t,n.id_aset,n.id_rep);return i?i.segment.time:(0,i=e.manifestManager.getBeginningSegment(e.currentPeriod,n.id_aset,n.id_rep),i.segment.time)},O=function(t){var n,i,r=e.currentTracks.audio;if(r)if(n=e.manifestManager.getPartForTime(e.currentPeriod,t,r.id_aset,r.id_rep)){if(n.segment.time<t)return i=e.manifestManager.getNextSegment(n),i.segment.time}else if(E()<.2)return i=e.manifestManager.getBeginningSegment(e.currentPeriod,r.id_aset,r.id_rep),i.segment.time},S=function(){y=!1,r=void 0,clearTimeout(s),a.trigger({type:"seeked"});for(var e=0;e<f.length;e++)f[e].seeked()},B=function(){l=!1,a.trigger({type:"loadstart"})},D=function(){d=b(),c=void 0,l=!1,a.trigger({type:"play"})},x=function(){c=void 0!==c?c:b(),a.trigger({type:"pause"})},z=function(){c=void 0,a.trigger({type:"playing"})},R=function(){c=void 0!==c?c:b()},q=function(){l=!0,a.trigger({type:"ended"})},V=function(){window.sr_request_seek=function(e){P(e)},window.sr_flash_seeked=function(){S()},window.sr_flash_loadstart=function(){B()},window.sr_flash_play=function(){D()},window.sr_flash_pause=function(){x()},window.sr_flash_playing=function(){z()},window.sr_flash_waiting=function(){R()},window.sr_flash_stopped=function(){q()},u.jsReady()};this.createSrc=function(e){n=e},this.play=function(){k()},this.pause=function(){F()},this.stop=function(){M()},Object.defineProperty(this,"currentTime",{get:E,set:function(e){P(e)}}),Object.defineProperty(this,"seeking",{get:function(){return y},set:void 0}),Object.defineProperty(this,"paused",{get:T,set:void 0}),Object.defineProperty(this,"duration",{get:function(){return n.duration},set:void 0}),Object.defineProperty(this,"playbackRate",{get:function(){return 1},set:function(){0}}),Object.defineProperty(this,"event_handlers",{get:function(){return i},set:function(e){_(e)}}),this.addEventListener=function(e,t){v(e,t)},this.trigger=function(e){m(e)},this.dispatchEvent=m,this.registerSourceBuffer=function(e){f.push(e)},this.getSwf=function(){return u},Object.defineProperty(this,"isFlash",{get:function(){return!0},set:void 0}),V()};module.exports=VideoExtension;


},{"../../../confMedia":3,"./FlashMBR":27}],33:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),ChunkDownloadBuffer=function(e){this.p2pDownloader=e,setInterval(this.downloadChunk.bind(this),conf.TIME_BETWEEN_CHUNK_DL),this.chunkRequests=[]};ChunkDownloadBuffer.prototype.downloadChunk=function(){if(this.calculateDownloadRequestSpeed()+conf.NB_CHUNK_DL_GROUP*conf.CHUNK_SIZE/1024<conf.MAX_DL_REQUEST_SPEED)for(var e=0;e<conf.NB_CHUNK_DL_GROUP;e++)this.p2pDownloader.downloadChunk()},ChunkDownloadBuffer.prototype.calculateDownloadRequestSpeed=function(){var e=this.getIndexRequestOneSecondAgo();return e===!1?this.chunkRequests=[]:e>0&&this.chunkRequests.splice(0,e),this.chunkRequests.length*conf.CHUNK_SIZE/1024},ChunkDownloadBuffer.prototype.getIndexRequestOneSecondAgo=function(){for(var e=(new Date).getTime(),n=0;n<this.chunkRequests.length;n++)if(e-this.chunkRequests[n]<=1e3)return n;return!1},ChunkDownloadBuffer.prototype.addChunkRequest=function(){var e=(new Date).getTime();this.chunkRequests.push(e)},module.exports=ChunkDownloadBuffer;


},{"../../conf":2}],34:[function(require,module,exports){
  var Backbone=require("backbone"),_=require("underscore"),status=require("./models/status"),conf=require("../../conf"),PartialSegment=require("./PartialSegment"),ChunkManager=function(t,n,e){this.p2pDownloader=e,this.size=t,this.dataLocked=!1,this.isEmpty=!0,this.calculateChunkNumber(),this.initializeChunkArray_DownloadStatus(),this.nbChunkDownloading=0,_.extend(this,Backbone.Events)};ChunkManager.prototype.calculateChunkNumber=function(){this.chunkNumber=Math.ceil(this.size/conf.CHUNK_SIZE)},ChunkManager.prototype.initializeChunkArray_DownloadStatus=function(){this.downloadStatus=new Array;for(var t=0;t<this.chunkNumber;t++)this.downloadStatus.push("pending");this.size&&(this.segment=new Uint8Array(this.size))},ChunkManager.prototype.addSegmentSize=function(t){this.size||(this.size=t,this.calculateChunkNumber(),this.initializeChunkArray_DownloadStatus())},ChunkManager.prototype.getChunk=function(t){return this.dataLocked||"downloaded"!=this.downloadStatus[t]&&"CDNdownloaded"!=this.downloadStatus[t]?(this.dataLocked&&0,!1):t<this.chunkNumber-1?this.segment.buffer.slice(t*conf.CHUNK_SIZE,(t+1)*conf.CHUNK_SIZE):this.segment.buffer.slice(t*conf.CHUNK_SIZE)},ChunkManager.prototype.getNextChunk=function(){var t=this.nextChunk();return t>=0&&(this.downloadStatus[t]="downloading",this.nbChunkDownloading++),t},ChunkManager.prototype.nextChunk=function(){var t=this.downloadStatus.indexOf("failed");return 0>t&&(t=this.downloadStatus.indexOf("pending")),t},ChunkManager.prototype.chunkDownloaded=function(t,n,e){if(this.isEmpty=!1,"downloaded"===this.downloadStatus[n])this.p2pDownloader.getP2PManager().correctP2PDownloaded(t.byteLength,"PP");else if("CDNdownloaded"===this.downloadStatus[n])this.p2pDownloader.getP2PManager().correctP2PDownloaded(t.byteLength,"CP");else if(n===this.chunkNumber-1&&t.byteLength+n*conf.CHUNK_SIZE>this.size)0,this.p2pDownloader.getP2PManager().correctP2PDownloaded(t.byteLength,"HP");else if("downloading"===this.downloadStatus[n]&&this.nbChunkDownloading--,this.downloadStatus[n]="downloaded",isNaN(t.byteLength)||status.setp2pDownloadedNewAnalytics(status.getp2pDownloadedNewAnalytics()+t.byteLength),0,this.segment.set(new Uint8Array(t),n*conf.CHUNK_SIZE),this.isSegmentDownloaded()){var o=this.segment.buffer;this.trigger("segmentDownloaded",o)}},ChunkManager.prototype.timeOut=function(t,n){"downloading"===this.downloadStatus[t]&&(this.downloadStatus[t]="failed",this.nbChunkDownloading--,0,n.getHeuristic().incrementNbChunkTimeOut()),"downloaded"!==this.downloadStatus[t]&&this.trigger("chunkTimeOut")},ChunkManager.prototype.isSegmentDownloaded=function(){if(this.segmentDownloaded)return!0;if(this.size){for(var t=this.downloadStatus.length-1;t>=0;t--)if("downloaded"!==this.downloadStatus[t]&&"CDNdownloaded"!==this.downloadStatus[t])return!1;return this.segmentDownloaded=!0,!0}return!1},ChunkManager.prototype.getBiggestSegment=function(t){if(this.size&&!this.isEmpty){var n=this.partialSegment||new PartialSegment(this.p2pDownloader.getP2PManager(),t,this.segment,this.downloadStatus,this.size,this,this.isSegmentDownloaded());return this.dataLocked||(this.partialSegment=n),n}return!1},ChunkManager.prototype.getIndexLastChunkInARow=function(){for(var t=0;t<this.downloadStatus.length;t++)if("downloaded"!==this.downloadStatus[t]&&"CDNdownloaded"!==this.downloadStatus[t])return t-1;return this.downloadStatus.length-1},ChunkManager.prototype.storeSegment=function(t){var n;this.isEmpty=!1,this.size||this.addSegmentSize(t.byteLength),n={start:0,end:this.chunkNumber},this.partialSegment&&this.partialSegment.getCDNIndexRange()&&(n=this.partialSegment.getCDNIndexRange()),this.segment=new Uint8Array(t),this.segmentDownloaded=!0;for(var e=n.start;e<n.end;e++){if("downloaded"===this.downloadStatus[e]||"CDNdownloaded"===this.downloadStatus[e]){var o=conf.CHUNK_SIZE;e===this.chunkNumber-1&&(o=this.size-(this.chunkNumber-1)*conf.CHUNK_SIZE),"downloaded"===this.downloadStatus[e]?this.p2pDownloader.getP2PManager().correctP2PDownloaded(o,"PC"):"CDNdownloaded"===this.downloadStatus[e]&&this.p2pDownloader.getP2PManager().correctP2PDownloaded(o,"CC")}"downloading"===this.downloadStatus[e]&&this.nbChunkDownloading--,this.downloadStatus[e]="CDNdownloaded"}},ChunkManager.prototype.getP2PDownload_CDNDownload=function(){var t=0,n=0;if(this.size){for(var e=0,o=this.downloadStatus.length-1;o>e;e++)"downloaded"===this.downloadStatus[e]?t+=conf.CHUNK_SIZE:"CDNdownloaded"===this.downloadStatus[e]&&(n+=conf.CHUNK_SIZE);var a=this.size-(this.chunkNumber-1)*conf.CHUNK_SIZE;"downloaded"===this.downloadStatus[this.chunkNumber-1]?t+=a:"CDNdownloaded"===this.downloadStatus[this.chunkNumber-1]&&(n+=a)}return{p2pDownloaded:t,cdnDownloaded:n}},ChunkManager.prototype.lockSegmentData=function(){this.dataLocked=!0},ChunkManager.prototype.unlockSegmentData=function(){this.dataLocked=!1},ChunkManager.prototype.clearSegment=function(){delete this.segment,delete this.downloadStatus},module.exports=ChunkManager;


},{"../../conf":2,"./PartialSegment":40,"./models/status":57,"backbone":62,"underscore":265}],35:[function(require,module,exports){
  "use strict";var FakePartialSegment=function(e,n){function t(e){return function(n,t){e(n,t)}}var r,i,u=function(){i=e.segmentMaping(n),i.segment=e.getSegment(i)},o=function(e){var n=new Uint8Array(e);return n.buffer};this.getUpdatedRange=function(e){return e},this.getFullSegment=function(e,n){var r=e.response;e.response=o(r),t(n)(e,i)},this.getCDNIndexRange=function(){return r},this.isComplete=function(){return!1},this.isLocked=function(){return!1},u()};module.exports=FakePartialSegment;


},{}],36:[function(require,module,exports){
  var Backbone=require("backbone"),_=require("underscore"),ChunkDownloadBuffer=require("./ChunkDownloadBuffer"),UploadQueue=require("./UploadQueue"),SegmentRequestQueue=require("./SegmentRequestQueue"),conf=require("../../conf"),SegmentHandler=require("./SegmentHandler"),EventEmitter=require("eventemitter3"),P2PDownloader=function(e,n){var t=this,r=0,d=[],i=n,a=new ChunkDownloadBuffer(t),o=new UploadQueue(t),g=new SegmentRequestQueue(t),u=new EventEmitter,s=function(){_.extend(t,Backbone.Events),e.getEE().on("chunkReceived",m,t),e.getEE().on("segmentRequested",k,t),e.getEE().on("hasSegment",S,t),e.getEE().on("chunkRequested",l,t),e.getEE().on("peerDestroyed",N,t)},c=function(e,n,t,r,d){var a=I(e,n,t,r,d.byteLength),o=a.chunkManager;a.isNew&&u.emit("newChunkManager",o,e,n,t,r),o.storeSegment(d);var s=i.p2pInterface.getSegmentHash({id_period:e,id_aset:n,id_rep:t,idPiece:r});g.answerRequests({id_period:e,id_aset:n,id_rep:t,idPiece:r},d.byteLength,o.chunkNumber,s)},h=function(n){var t=I(n.id_period,n.id_aset,n.id_rep,n.idPiece,n.segment.size,n.segment.duration),r=t.chunkManager;t.isNew&&(u.emit("newChunkManager",r,n.id_period,n.id_aset,n.id_rep,n.idPiece),M(r,n)),_.forEach(_.filter(e.getPeerArray(),function(e){var t=e.getAsetId()==n.id_aset,r=e.getPeriodId()==n.id_period,d=e.getRepId()==n.id_rep;return t&&r&&d}),function(e){e.requestHasSegment(n.idPiece)})},f=function(){var e,n,t,r,d,o=i.ongoingSegments.slice(0).splice(0,conf.NB_SEGMENT_P2P_PREBUFFER);for(n=0;n<o.length;n++)if(e=o[n],e.chunkManagerAndSeeders=e.chunkManagerAndSeeders?e.chunkManagerAndSeeders:D(e.id_period,e.id_aset,e.id_rep,e.idPiece),d=e.chunkManagerAndSeeders,d&&(t=d.seeds.getNextSeed(e.chunkManagerAndSeeders.chunkManager.chunkNumber),t&&(r=d.chunkManager.getNextChunk(),r>=0)))return t.requestChunk(e.idPiece,r),a.addChunkRequest(),void p(r,t,d.chunkManager)},p=function(e,n,r){setTimeout(_.bind(function(){r.timeOut(e,n)},t),conf.CHUNK_TIMEOUT)},S=function(e,n,t,r,d){if(i.p2pInterface.setSegmentSize(e.getPeriodId(),e.getAsetId(),e.getRepId(),n,t,d),i.isSegmentRequested(e.getPeriodId(),e.getAsetId(),e.getRepId(),n)){var a=D(e.getPeriodId(),e.getAsetId(),e.getRepId(),n);a&&(a.chunkManager.addSegmentSize(t),a.seeds.insertSeeder(e))}},m=function(e,n,t,d){r--;var a=D(e.getPeriodId(),e.getAsetId(),e.getRepId(),n).chunkManager;a?a.chunkDownloaded(d,t,e):i.correctP2PDownloaded(d.byteLength,"M"),e.getHeuristic().incrementNbChunkDownloaded()},k=function(e,n){var t=D(e.getPeriodId(),e.getAsetId(),e.getRepId(),n).chunkManager,r={id_period:e.getPeriodId(),id_aset:e.getAsetId(),id_rep:e.getRepId(),idPiece:n};if(t){var d=t.size,a=t.getIndexLastChunkInARow(),o=i.p2pInterface.getSegmentHash(r);if(a>-1)return void e.hasSegment(n,d,a,o)}g.queue(e,n)},l=function(e,n,t){var r=(new Date).getTime(),d=D(e.getPeriodId(),e.getAsetId(),e.getRepId(),n).chunkManager;if(d){var i=d.getChunk(t);i&&o.add(e,n,t,i,r)}},P=function(e){var n=D(e.id_period,e.id_aset,e.id_rep,e.idPiece).chunkManager;return n?n.getBiggestSegment(e):!1},E=function(e,n,t,r){for(var i,a,o=0;a=d[o];o++)if(a.getId_period()==e&&a.getId_aset()==n&&a.getId_rep()==t&&a.getId_segment()==r)return i=a;return!1},I=function(e,n,r,i,a,o){var g=E(e,n,r,i);if(g===!1){var u=new SegmentHandler(e,n,r,i,a,o,t);return d.push(u),H(),{chunkManager:u.getChunkManager(),isNew:!0}}return{chunkManager:g.getChunkManager(),isNew:!1}},M=function(e,n){e.on("segmentDownloaded",_.bind(function(t){var r=E(n.id_period,n.id_aset,n.id_rep,n.idPiece);r.getSeeders().cleanAfterDownloaded(),conf.SEGMENTS_HASH_CHECK?(e.lockSegmentData(),i.p2pInterface.checkHashP2P(e,n,t)):w(e,n,t)},t))},w=function(e,n,t){e.unlockSegmentData(),g.answerRequests(n,t.byteLength,e.chunkNumber,n.segment.hash),u.emit("segmentDownloaded",n,t)},v=function(e){0,0,C(e),i.correctP2PDownloaded(e.segment.size,"HP")},C=function(e){var n=E(e.id_period,e.id_aset,e.id_rep,e.idPiece),t=d.indexOf(n);d.splice(t,1)},D=function(e,n,t,r){var d=E(e,n,t,r);return d!==!1?{chunkManager:d.getChunkManager(),seeds:d.getSeeders()}:!1},R=function(){var e=0,n=0;return _.each(d,function(t){var r=t.getChunkManager().getP2PDownload_CDNDownload();e+=r.p2pDownloaded,n+=r.cdnDownloaded},t),{p2pDownloaded:e,cdnDownloaded:n}},A=function(){u.emit("uploadSaturated")},H=function(){for(var e=0,n=i.p2pInterface.isLive()?conf.LIVE.P2P_CACHE_MAX_SIZE:conf.P2P_CACHE_MAX_SIZE,t=0;t<d.length;t++)d[t].getChunkManager().size&&(e+=d[t].getChunkManager().size);e>n&&(u.emit("segmentRemoved",d[0]),d[0].getChunkManager().clearSegment(),delete d[0],d.splice(0,1))},N=function(e){for(var n,t,r=0;r<i.ongoingSegments.length;r++)n=i.ongoingSegments[r],t=E(n.id_period,n.id_aset,n.id_rep,n.idPiece),t&&t.getSeeders().removeSeeder(e);g.removePeerRequests(e)};t.getP2PManager=function(){return i},t.fillSegment=c,t.startDownloadSegment=h,t.downloadChunk=f,t.getBiggestStartingPartInSegment=P,t.hashVerified=w,t.wrongHash=v,t.removeChunkManager=C,t.getChunkManagerAndSeeders=D,t.doubleCheckP2PDownload_CDNDownload=R,t.uploadSaturated=A,t.getEE=function(){return u},s()};module.exports=P2PDownloader;


},{"../../conf":2,"./ChunkDownloadBuffer":33,"./SegmentHandler":43,"./SegmentRequestQueue":44,"./UploadQueue":47,"backbone":62,"eventemitter3":110,"underscore":265}],37:[function(require,module,exports){
  "use strict";var VideoAnalytics=require("../analytics/VideoAnalytics"),P2PInterface=function(e,t,i){var n,r=null;VideoAnalytics.fake||(n=new VideoAnalytics(e,i)),this.p2pMapController=t,this.setSegmentHasher=function(e){r=e},this.getSegmentHasher=function(){return r},this.getCurrentTime=function(){return e.getCurrentTime()},this.setCurrentTime=function(t){"function"==typeof e.setCurrentTime&&e.setCurrentTime(t)},this.addVideoEventListener=function(t,i){e.addVideoEventListener(t,i)},this.isLive=function(){return t.isLive()},this.hasSegmentHashes=function(e,i,n){return t.hasSegmentHashes(e,i,n)},this.getSegmentHash=function(e){return t.getSegmentHash(e)},this.updateMapWithSegmentsHashes=function(e){return t.updateMapWithSegmentsHashes(e)},this.getMap=function(){return t.getMap()},this.getMpdUrl=function(){return i},this.getOffsetedPlaybackTime=function(){return this.getCurrentTime()+e.getPlaybackOffset()},this.getPieceInfos=function(e){return t.getPieceInfos(e)},this.setSegmentSize=function(e,i,n,r,s,u){t.setSegmentSize(e,i,n,r,s,u)},this.checkHashP2P=function(e,t,i){r.checkHashP2P(e,t,i)},this.areBuffersInitialized=function(){return!e.areBuffersInitialized||e.areBuffersInitialized()},this.getBufferedTracks=function(){for(var t,i=e.getBuffered(),n=[],r=0;t=i[r];r++)n.push({buffered:t.buffered,id_aset:t.asetId,id_rep:t.repId,id_period:t.periodId,bufferedStrict:t.bufferedStrict});return n},this.getTracks=function(){for(var t,i=e.getBuffered(),n=[],r=0;t=i[r];r++)n.push({id_aset:t.asetId,id_rep:t.repId,id_period:t.periodId});return n},this.setBufferMarginLive=function(t,i){e.setBufferMarginLive(t,i)},this.isFake=function(){n.isFake()},this.setPeerPoolListeners=function(e){n.setPeerPoolListeners(e)},this.setP2PDownloaderListeners=function(e){n.setP2PDownloaderListeners(e)}};module.exports=P2PInterface;


},{"../analytics/VideoAnalytics":4}],38:[function(require,module,exports){
  var $=require("jquery"),Backbone=require("backbone");Backbone.$=$;var _=require("underscore"),TrackerManager=require("./TrackerManager"),DisplayManager=require("./display/DisplayManager"),DisplayInterface=require("./display/DisplayInterface"),status=require("./models/status"),PeerPool=require("./collection/peers"),P2PDownloader=require("./P2PDownloader"),conf=require("../../conf"),EventEmitter=require("eventemitter3"),P2PManager=function(e,t){this.p2pInterface=e,this.trackerURL=t,this.trackerManager=new TrackerManager(this.p2pInterface,this.trackerURL),this.peerPool=new PeerPool({TrackerManager:this.trackerManager}),this.maxNumberOfSlots=6,this.p2pDownloader=new P2PDownloader(this.peerPool,this),this.p2pDownloader.getEE().on("segmentDownloaded",_.bind(this.setPieceDownloaded,this)),"undefined"==typeof this.p2pInterface.isFake()&&(this.p2pInterface.setPeerPoolListeners(this.peerPool),this.p2pInterface.setP2PDownloaderListeners(this.p2pDownloader)),this.p2pInterface.addVideoEventListener("seeked",this.onSeeked.bind(this)),_.extend(this,Backbone.Events),this.ongoingSegments=[],this.addFirstOngoingSegments=!1,this.doubleCheckP2PDownload_CDNDownload()};P2PManager.prototype.startDisplayManager=function(){this.p2pInterface.areBuffersInitialized()?(!DisplayManager.fake&&conf.LOGGERMANAGER.DISPLAY&&DisplayManager.start(this),conf.DEBUG&&(this.displayInterface=new DisplayInterface(this))):setTimeout(this.startDisplayManager.bind(this),300)},P2PManager.prototype.fillSegment=function(e,t){this.updateStatusCurrentSegment(e),this.p2pDownloader.fillSegment(e.id_period,e.id_aset,e.id_rep,e.idPiece,t)},P2PManager.prototype.isSegmentRequested=function(e,t,n,s){var i={id_period:e,id_aset:t,id_rep:n,idPiece:s},o=_.where(this.ongoingSegments,i);return o.length?!0:!1},P2PManager.prototype.onSeeked=function(){var e,t,n,s=this.p2pInterface.getBufferedTracks(),i=this.p2pInterface.getCurrentTime();for(t=0;t<s.length;t++)for(n=0;n<s[t].buffered.length;n++)s[t].buffered.start(n)<=i&&i<=s[t].buffered.end(n)&&(e=e?Math.min(e,s[t].buffered.end(n)):s[t].buffered.end(n));e||(e=i),this.ongoingSegments=[],this.addFirstOngoingSegments=!1,this.setOngoingSegments(this.p2pInterface.getMap(),e),0},P2PManager.prototype.setOngoingSegments=function(e,t){for(var n,s,i,o=this,a=0,r=0,g=[],d=!1,p=0,P=o.p2pInterface.getTracks(),c=!0,h=0;h<P.length;h++)c&=o.p2pInterface.hasSegmentHashes(status.getPeriod(),P[h].id_aset,P[h].id_rep);if(!conf.SEGMENTS_HASH_CHECK||c||conf.PROPAGATE_SEGMENT_HASHES){for(a=0;a<e.periods.length;a++){for(o.addFirstOngoingSegments||(r=conf.NB_SEGMENT_P2P_SKIP,o.addFirstOngoingSegments=!0),p=0;p<P.length;p++)g[p]=r;for(;!d;){for(n=1/0,s=-1,p=0;p<P.length;p++)g[p]<e.periods[a].asets[P[p].id_aset].reps[P[p].id_rep].segments.length&&e.periods[a].asets[P[p].id_aset].reps[P[p].id_rep].segments[g[p]].time<n&&(s=p,n=e.periods[a].asets[P[p].id_aset].reps[P[p].id_rep].segments[g[p]].time);if(s>-1){if(i=e.periods[a].asets[P[s].id_aset].reps[P[s].id_rep].segments[g[s]],!t||t&&i.time>=t){var l={id_period:a,id_aset:P[s].id_aset,id_rep:P[s].id_rep,idPiece:i.id,segment:i,id_buffer:s};o.ongoingSegments.push(l)}g[s]+=1}else d=!0}}o.activateP2POngoingSegments()}else 0,o.trackerManager.on("gotSegmentsHashes",o.onSeeked.bind(o))},P2PManager.prototype.onTrackSwitch=function(e,t,n){var s,i,o,a,r,g,d;if(this.peerPool.onTrackSwitch(e),t===e){for(s=0;s<this.ongoingSegments.length;s++)if(this.ongoingSegments[s].id_aset===t){if(o={id_period:this.ongoingSegments[s].id_period,id_aset:t,id_rep:n,idPiece:this.ongoingSegments[s].idPiece,id_buffer:this.ongoingSegments[s].id_buffer},a=this.p2pInterface.getMap().periods[this.ongoingSegments[s].id_period].asets[t].reps[n].segments,this.p2pInterface.isLive()){for(i=0;i<a.length;i++)if(a[i].id===this.ongoingSegments[s].idPiece){o.segment=a[i];break}}else o.segment=a[this.ongoingSegments[s].idPiece];o.segment?this.ongoingSegments.splice(s,1,o):0}}else{for(r=this.p2pInterface.getBufferedTracks(),g=this.p2pInterface.getCurrentTime(),s=0;s<r.length;s++)for(i=0;i<r[s].buffered.length;i++)r[s].buffered.start(i)<=g&&g<=r[s].buffered.end(i)&&(d=d?Math.min(d,r[s].buffered.end(i)):r[s].buffered.end(i));d||(d=g),this.ongoingSegments=[],this.setOngoingSegments(this.p2pInterface.getMap(),d)}this.trigger("repSwitched",e,t,n)},P2PManager.prototype.activateP2POngoingSegments=function(){if(this.ongoingSegments.length)for(var e=Math.min(conf.NB_SEGMENT_P2P_PREBUFFER,this.ongoingSegments.length),t=this.ongoingSegments[0].idPiece,n=0;e>n;n++){if(this.ongoingSegments[n].chunkManager=this.ongoingSegments[n].chunkManager?this.ongoingSegments[n].chunkManager:this.p2pDownloader.getChunkManagerAndSeeders(this.ongoingSegments[n].id_period,this.ongoingSegments[n].id_aset,this.ongoingSegments[n].id_rep,this.ongoingSegments[n].idPiece).chunkManager,this.ongoingSegments[n].chunkManager&&this.ongoingSegments[n].chunkManager.isSegmentDownloaded()){this.removeSegmentFromOngoing(void 0,n);break}this.ongoingSegments[n].p2pActivated||(this.canStartDownloadingSegment(this.ongoingSegments[n])?(this.p2pInterface.isLive()||this.ongoingSegments[n].idPiece-t<=conf.NB_SEGMENT_P2P_PREBUFFER)&&(this.p2pDownloader.startDownloadSegment(this.ongoingSegments[n]),this.ongoingSegments[n].p2pActivated=!0):setTimeout(this.activateP2POngoingSegments.bind(this),conf.RETRY_P2P_START_DL_SEGMENT_DELAY))}},P2PManager.prototype.canStartDownloadingSegment=function(e){var t,n=this.p2pInterface.getPieceInfos(e);return n?t=this.p2pInterface.getPieceInfos(e).time-this.p2pInterface.getCurrentTime()<conf.MAX_P2P_PREBUFFERING_TIME||this.p2pInterface.isLive()&&0===this.p2pInterface.getCurrentTime():(0,this.removeSegmentFromOngoing(e),t=!1),t},P2PManager.prototype.removeSegmentFromOngoing=function(e,t){if(t||0===t)this.ongoingSegments.splice(t,1);else{var n=_.where(this.ongoingSegments,{id_period:e.id_period,id_aset:e.id_aset,id_rep:e.id_rep,idPiece:e.idPiece});n.length&&this.ongoingSegments.splice(this.ongoingSegments.indexOf(n[0]),1)}this.activateP2POngoingSegments()},P2PManager.prototype.setPieceDownloaded=function(e){this.trigger("piece_downloaded_p2pm",e),this.removeSegmentFromOngoing(e),this.updateStatusCurrentSegment(e)},P2PManager.prototype.getBiggestStartingPartInSegment=function(e){return this.p2pDownloader.getBiggestStartingPartInSegment(e)},P2PManager.prototype.correctP2PDownloaded=function(e,t){isNaN(e)||("PP"===t?(status.setDataDownloadedTwice_PP(status.getDataDownloadedTwice_PP()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"PC"===t?(status.setDataDownloadedTwice_PC(status.getDataDownloadedTwice_PC()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e),status.setp2pDownloadedNewAnalytics(status.getp2pDownloadedNewAnalytics()-e),0):"CP"===t?(status.setDataDownloadedTwice_CP(status.getDataDownloadedTwice_CP()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"CC"===t?status.setDataDownloadedTwice_CC(status.getDataDownloadedTwice_CC()+e):"HP"===t?(status.setDataDownloadedTwice_HP(status.getDataDownloadedTwice_HP()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"HD"===t?(status.setDataDownloadedTwice_HD(status.getDataDownloadedTwice_HD()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"M"===t&&(status.setDataDownloadedTwice_M(status.getDataDownloadedTwice_M()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)))},P2PManager.prototype.doubleCheckP2PDownload_CDNDownload=function(){var e=this.p2pDownloader.doubleCheckP2PDownload_CDNDownload();status.setCDNDoubleCheck(e.cdnDownloaded),status.setP2PDoubleCheck(e.p2pDownloaded),setTimeout(_.bind(this.doubleCheckP2PDownload_CDNDownload,this),1e4)},P2PManager.prototype.updateStatusCurrentSegment=function(e){for(var t=status.getTobuffer(),n=0;n<t.length;n++)t[n].asetId===e.id_aset&&t[n].representationId===e.id_rep&&(t[n].currentSegment=e.idPiece,t[n].currentTime=e.segment.time);status.setTobuffer(t)},module.exports=P2PManager;


},{"../../conf":2,"./P2PDownloader":36,"./TrackerManager":46,"./collection/peers":49,"./display/DisplayInterface":50,"./display/DisplayManager":51,"./models/status":57,"backbone":62,"eventemitter3":110,"jquery":111,"underscore":265}],39:[function(require,module,exports){
  var _=require("underscore"),conf=require("../../conf"),utils=require("../utils"),crypto=require("crypto"),url=require("url"),P2PMapController=function(e){var s,t,r,i=function(){M()},n=function(e){s=o(e)},o=function(e){return JSON.parse(JSON.stringify(e))},a=function(e){var s=JSON.parse(JSON.stringify(e));return s},d=function(e){var t={periods:[]};if(!s)return n(e),void(r=s);e=o(e);for(var i,a=0;i=s.periods[a];a++)for(var d,h=0;d=i.asets[h];h++)for(var u,g=0;u=d.reps[g];g++){p(t,a,h,g);for(var f=e.periods[a].asets[h].reps[g].segments,m=u.segments.length,c=0;m>c&&u.segments[0].id!==f[0].id;c++)u.segments.splice(0,1);m=u.segments.length;for(var l=0;m>l;l++)l<f.length&&u.segments[l].id===f[l].id&&(u.segments[l].time=f[l].time);for(var v=f.length,S=0;v>S;S++)if(!u.segments[S]){var _=f[S];u.segments.push(_),t.periods[a].asets[h].reps[g].segments.push(_)}}r=t},p=function(e,s,t,r){e.periods[s]||(e.periods[s]={asets:[],id_period:s}),e.periods[s].asets[t]||(e.periods[s].asets[t]={reps:[],id_aset:t}),e.periods[s].asets[t].reps[r]||(e.periods[s].asets[t].reps[r]={segments:[],id_rep:r})},h=function(e){return _.where(s.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].segments,{id:e.idPiece})[0]},u=function(){var e=s.isLive;return"undefined"==typeof e?void 0:e},g=function(e,t,r){return!!s.periods[e].asets[t].reps[r].hasSegmentHashes},f=function(e){var s=h(e);return s?s.hash?s.hash:!1:(0,!1)},m=function(e,s){var t=h(e);t&&(t.hash=s)},c=function(e){for(var t=e.period,r=e.asetId,i=e.representationId,n=e.segmentsHashes,o=e.segmentsSizes,a=0;a<e.segmentsHashes.length;a++)s.periods[t].asets[r].reps[i].segments[a].hash=n[a];if(o)for(var d=0;d<e.segmentsHashes.length;d++)s.periods[t].asets[r].reps[i].segments[d].size_fromTracker=o[d];s.periods[t].asets[r].reps[i].hasSegmentHashes=!0},l=function(){return s},v=function(){return r},S=function(e){var t=h(e);return t?{url:t.url||s.periods[e.id_period].asets[e.id_aset].reps[e.id_rep].url,range:t.size&&t.offset&&{start:t.offset,end:t.offset+t.size-1}||null,downloading:t.downloading,downloaded:t.downloaded,size:t.size||null,time:t.time}:(0,!1)},H=function(){return t},M=function(){var s=url.parse(e,!0,!0);t=crypto.createHash("md5").update('"'+s.host+s.pathname+'"').digest("hex")},z=function(e,s,t,r,i,n){var o=h({id_period:e,id_aset:s,id_rep:t,idPiece:r});o&&(o.size||(o.size=i,0),n&&!o.hash&&conf.PROPAGATE_SEGMENT_HASHES&&(o.hash=n))};this.updateMap=d,this.segmentMaping=a,this.getSegment=h,this.isLive=u,this.hasSegmentHashes=g,this.getSegmentHash=f,this.setSegmentHash=m,this.updateMapWithSegmentsHashes=c,this.getMap=l,this.getMapWithNewSegments=v,this.getMpdHash=H,this.getPieceInfos=S,this.setSegmentSize=z,i()};module.exports=P2PMapController;


},{"../../conf":2,"../utils":60,"crypto":82,"underscore":265,"url":266}],40:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),status=require("./models/status"),PartialSegment=function(e,t,n,o,r,a,s){function i(t){return function(n,o){g=n.response,e.fillSegment(o,n.response),e.trigger("piece_downloaded_prtl",o),l=!1,a&&a.unlockSegmentData(),t(n,o)}}function c(t){return function(n,o){status.setCdnDataDiscarded(status.getCdnDataDiscarded()+h),e.p2pDownloader.removeChunkManager(o),e.correctP2PDownloaded(u,"HD"),t(n,o)}}var d,u,f,l,g,p,S,h=0,C=function(){var e;for(u=0,e=0;e<p.length;e++)"downloaded"===p[e]&&(u+=e<p.length-1?conf.CHUNK_SIZE:r-(p.length-1)*conf.CHUNK_SIZE)},H=function(){var e=0;for(e=0;e<p.length;e++)if("downloaded"!==p[e]&&"CDNdownloaded"!==p[e])return e},D=function(){var e=0;for(e=p.length-1;e>=0;e--)if("downloaded"!==p[e]&&"CDNdownloaded"!==p[e])return e+1},m=function(e){var t,n,o=H(),r=D();return void 0!==o&&void 0!==r?(t=e?e.start+o*conf.CHUNK_SIZE:o*conf.CHUNK_SIZE,r===p.length&&e?n=e.end:r<p.length&&(n=e?e.start+r*conf.CHUNK_SIZE-1:r*conf.CHUNK_SIZE-1),d={start:o,end:r},{start:t,end:n}):e?e:void 0},E=function(){g=n?n.buffer.slice():[],p=o?o.slice():[],C(),f=s,S=e.p2pInterface.p2pMapController.segmentMaping(t),S.segment=e.p2pInterface.p2pMapController.getSegment(S)},N=function(e){var t;return void 0!==d&&void 0!==g?(t=new Uint8Array(g),t.set(new Uint8Array(e),d.start*conf.CHUNK_SIZE)):t=new Uint8Array(e),t.buffer},_=function(e){status.setCDNDownloaded(status.getCDNDownloaded()+e.byteLength)};this.getUpdatedRange=function(e){return m(e)},this.getFullSegment=function(t,n,o){if(t.p2pMeanThroughput=status.computeP2PThroughput(),this.isComplete())t.response=g,n(t,null);else{e.trigger("CDNSegmentDownloaded",S);var r=t.response;_(r),h=r.byteLength,t.response=N(r),0!==u&&conf.SEGMENTS_HASH_CHECK?(l=!0,a.lockSegmentData(),e.p2pInterface.getSegmentHasher().checkHashDLM(t,S,i(n),c(o))):conf.SEGMENTS_HASH_CHECK&&conf.PROPAGATE_SEGMENT_HASHES?e.p2pInterface.getSegmentHasher().createHash(t,S,i(n)):i(n)(t,S)}},this.getCDNIndexRange=function(){return d},this.isComplete=function(){return f},this.isLocked=function(){return a&&a.dataLocked},E()};module.exports=PartialSegment;


},{"../../conf":2,"./models/status":57}],41:[function(require,module,exports){
  "use strict";var P2PInterface=require("./P2PInterface"),P2PMapController=require("./P2PMapController"),P2PManager=require("./P2PManager"),SegmentHasher=require("../security/SegmentHasher"),PartialSegment=require("./PartialSegment"),FakePartialSegment=require("./FakePartialSegment"),status=require("./models/status"),conf=require("../../conf"),SRModule=function(e,n,t,a){var r,o,i,d,s,c,u=t,f=a,P=!1,l={},g=function(e){if(e.P2P_CACHE_MAX_SIZE&&(conf.P2P_CACHE_MAX_SIZE=e.P2P_CACHE_MAX_SIZE),void 0!==e.ALLOW_P2P&&(conf.ALLOW_P2P=e.ALLOW_P2P),void 0!==e.DEBUG&&(conf.DEBUG=e.DEBUG),(e.TRACKER_URL||!conf.ALLOW_P2P)&&(conf.TRACKER_URL=e.TRACKER_URL),!e.ID_CLIENT)throw new Error("There must be a client ID in the option object");conf.ID_CLIENT=e.ID_CLIENT},_=function(e){e.MIN_BUFFER_LEVEL=conf.MIN_BUFFER_LEVEL,e.MAX_BUFFER_LEVEL=conf.MAX_BUFFER_LEVEL,e.ABR_DEL_T=conf.ABR_DEL_T},p=function(e){var n=e.map(function(e){return{type:e.type,asetId:e.asetId,representationId:e.repId,bufferLevelMax:e.bufferLevelMax}}),t=status.getTobuffer(),a=[];if(0,t)for(var r=0;r<n.length;r++)for(var o=0;o<t.length;o++)t[o].type===n[r].type&&(a.push({id_aset:n[r].asetId,id_rep:n[r].representationId,id_aset_from:t[o].asetId}),t[o].asetId!==n[r].asetId&&status.setAsetIdUpdate(n[r].asetId),t[o].asetId=n[r].asetId,t[o].representationId=n[r].representationId,t[o].bufferLevelMax=n[r].bufferLevelMax);else{for(var i=0;i<n.length;i++)n[i].currentSegment=-1;t=n}return status.setTobuffer(t,!1,!0),a},C=function(e,n){status.setMPD(n),status.setPeriod(e)},E=function(e,n){var t=r.getMpdHash(),a=p(n);C(e,t);for(var o,d=0;o=a[d];d++)i.onTrackSwitch(o.id_aset_from,o.id_aset,o.id_rep);c&&I()},L=function(e){r.updateMap(e),s&&(i.startDisplayManager(),status.getTobuffer()?I():c=!0)},I=function(){var e=r.getMapWithNewSegments();i.setOngoingSegments(e),c=!1},M=function(e){status.setCdnCancelled(status.getCdnCancelled()+e)},m=function(e){return function(){l[e]=arguments}},S=function(){l.onMapUpdate&&L.apply(void 0,l.onMapUpdate),l.cdnCancelled&&M.apply(void 0,l.cdnCancelled),l.onTrackChange&&E.apply(void 0,l.onTrackChange)},v=function(){e.addEventListener("onMapUpdate",L),e.addEventListener("cdnCancelled",M),r=new P2PMapController(n);var t=window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection;s=t&&conf.ALLOW_P2P,s&&(e.addEventListener("onTrackChange",E),o=new P2PInterface(e,r,n),i=new P2PManager(o,conf.TRACKER_URL),d=new SegmentHasher(i),o.setSegmentHasher(d)),S(),P=!0},w=function(){e.addEventListener("onMapUpdate",m("onMapUpdate")),e.addEventListener("cdnCancelled",m("cdnCancelled")),e.addEventListener("onTrackChange",m("onTrackChange")),g(u),_(f)};this.getP2PData=function(e){var n;return P?s?(i.removeSegmentFromOngoing(e),n=i.getBiggestStartingPartInSegment(e)||new PartialSegment(i,e)):n=new FakePartialSegment(r,e):(v(),n=new FakePartialSegment(r,e)),n},w()};window.Streamroot=window.Streamroot||{},window.Streamroot.SRModule=SRModule,module.exports=SRModule;


},{"../../conf":2,"../security/SegmentHasher":59,"./FakePartialSegment":35,"./P2PInterface":37,"./P2PManager":38,"./P2PMapController":39,"./PartialSegment":40,"./models/status":57}],42:[function(require,module,exports){
  "use strict";var _=require("underscore"),conf=require("../../conf"),Seeders=function(){var e=[],t=0,r=function(t){for(var r=0;r<e.length;){if(e[r].getHeuristic().getHeuristicScore()<=t.getHeuristic().getHeuristicScore())return void e.splice(r,0,t);r++}e.push(t)},i=function(t){e=_.reject(e,function(e){return e===t})},n=function(){for(var t=0,r=0;r<e.length;r++)t+=e[r].getHeuristic().getHeuristicScore();return t},u=function(r){var i,u=Math.floor(Math.random()*e.length);switch(t){case 0:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(e[c].getHeuristic().getNbChunkRequested()/e[c].getHeuristic().getHeuristicScore()<=e[e.length-1].getHeuristic().getNbChunkRequested()/e[e.length-1].getHeuristic().getHeuristicScore()&&e[c].canBeAskedChunk()){i=e[c];break}}break;case 1:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(Math.random()<=e[c].getHeuristic().getHeuristicScore()&&e[c].canBeAskedChunk()){i=e[c];break}}break;case 2:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(e[c].getHeuristic().getNbChunkRequested()<=Math.floor(e[c].getHeuristic().getHeuristicScore()/n()*r+1)&&e[c].canBeAskedChunk()){i=e[c];break}}break;case 3:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(e[c].getHeuristic().getNbChunkRequested()/e[c].getHeuristic().getHeuristicScore()<=e[c+1].getHeuristic().getNbChunkRequested()/e[c+1].getHeuristic().getHeuristicScore()&&e[c].canBeAskedChunk()){i=e[c];break}}break;default:i=!1}return i},c=function(){e=[]};this.getNextSeed=function(e){return u(e)},this.getVerifiedSeeders=function(){return e},this.insertSeeder=function(e){r(e)},this.removeSeeder=function(e){i(e)},this.cleanAfterDownloaded=function(){c()}};module.exports=Seeders;


},{"../../conf":2,"underscore":265}],43:[function(require,module,exports){
  "use strict";var ChunkManager=require("./ChunkManager"),Seeders=require("./Seeders"),SegmentHandler=function(e,n,r,t,u,i,s){var a=e,g=n,d=r,h=t,o=new ChunkManager(u,i,s),c=new Seeders;this.getId_period=function(){return a},this.getId_aset=function(){return g},this.getId_rep=function(){return d},this.getId_segment=function(){return h},this.getChunkManager=function(){return o},this.getSeeders=function(){return c}};module.exports=SegmentHandler;


},{"./ChunkManager":34,"./Seeders":42}],44:[function(require,module,exports){
  var conf=require("../../conf"),_=require("underscore"),SegmentRequestQueue=function(e){this.p2pDownloader=e,this.segmentRequests=[],this.peerTimeouts={}};SegmentRequestQueue.prototype.queue=function(e,t){if(this.p2pDownloader.getP2PManager().p2pInterface.isLive())this.segmentRequests.push({id_segment:t,peer:e});else{var s=_.pluck(_.where(this.p2pDownloader.getP2PManager().ongoingSegments,{id_period:e.getPeriodId(),id_aset:e.getAsetId(),id_rep:e.getRepId()},this),"idPiece"),i=_.min(s),n=_.max(s);t>=i&&t<=n+conf.MAX_SEGMENT_REQUEST_STORE?this.segmentRequests.push({id_segment:t,peer:e}):0}},SegmentRequestQueue.prototype.answerRequests=function(e,t,s,i){var n,r=_.filter(this.segmentRequests,function(t){return t.peer.getPeriodId()===e.id_period&&t.peer.getAsetId()===e.id_aset&&t.peer.getRepId()===e.id_rep&&t.id_segment===e.idPiece},this);for(n=0;n<r.length;n++)r[n].peer.hasSegment(e.idPiece,t,s,i);this.segmentRequests=_.reject(this.segmentRequests,function(t){return t.peer.getPeriodId()===e.id_period&&t.peer.getAsetId()===e.id_aset&&t.peer.getRepId()===e.id_rep&&t.id_segment===e.idPiece},this)},SegmentRequestQueue.prototype.removePeerRequests=function(e){this.segmentRequests=_.reject(this.segmentRequests,function(t){return t.peer===e},this)},module.exports=SegmentRequestQueue;


},{"../../conf":2,"underscore":265}],45:[function(require,module,exports){
  var conf=require("../../conf"),SpeedCalculator=function(){this.transferedChunks=[]};SpeedCalculator.prototype.calculateSpeed=function(){var e=this.getIndexTransferOneSecondAgo();return e===!1?this.transferedChunks=[]:e>0&&this.transferedChunks.splice(0,e),this.transferedChunks.length*conf.CHUNK_SIZE/1024},SpeedCalculator.prototype.getIndexTransferOneSecondAgo=function(){for(var e=(new Date).getTime(),t=0;t<this.transferedChunks.length;t++)if(e-this.transferedChunks[t]<=1e3)return t;return!1},SpeedCalculator.prototype.addChunkTransfer=function(){var e=(new Date).getTime();this.transferedChunks.push(e)},module.exports=SpeedCalculator;


},{"../../conf":2}],46:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),socketio=require("socket.io-client"),Backbone=require("backbone"),_=require("underscore"),status=require("./models/status"),TrackerManager=function(e,t){this.p2pProtocolVersion="1.0.0",this.p2pInterface=e,this.trackerURL=t,_.extend(this,Backbone.Events),status.getEE().on("change:tobuffer",this.onTrackerStatusUpdate.bind(this)),this.connect()};TrackerManager.prototype.register=function(e,t){this.socket?this.socket.on(e,t):0},TrackerManager.prototype.connect=function(){this.socket?0:(this.socket=socketio.connect(this.trackerURL,{}),this.socket.on("connect",this.onTrackerConnected.bind(this)),this.socket.on("reconnect",this.onTrackerConnected.bind(this)),this.socket.on("reconnecting",this.onTrackerReconnecting.bind(this)),this.socket.on("disconnect",this.onTrackerDisconnected.bind(this)))};var _updateCount=function(e){switch(e){case"offer":case"answer":case"icecandidate":status.setTrackerSgnCount(status.getTrackerSgnCount()+1);break;default:status.setTrackerMsgCount(status.getTrackerMsgCount()+1)}};TrackerManager.prototype.sockEmit=function(e,t,s){(status.getConnected()||"initSR"===e)&&(this.socket.emit(e,t,s),_updateCount(e))},TrackerManager.prototype.onTrackerConnected=function(){var e=this,t={isLive:this.p2pInterface.isLive(),minBufferLevel:conf.MIN_BUFFER_LEVEL,maxBufferLevel:conf.MAX_BUFFER_LEVEL};this.sockEmit("initSR",{p2pProtocolVersion:e.p2pProtocolVersion,clientId:conf.ID_CLIENT,mpd:status.getMPD(),mpdURL:this.p2pInterface.getMpdUrl(),period:status.getPeriod(),tobuffer:status.getTobuffer(),live:t},this.onTrackerReady.bind(this))},TrackerManager.prototype.onTrackerReady=function(e,t){var s=this;e?0:(status.setConnected(!0),status.setMyIds(t.my_ids),status.setTobuffer(t.updated_tobuffer,!0),s.p2pInterface.isLive()&&t.updated_tobuffer.forEach(function(e){s.p2pInterface.setBufferMarginLive(e.bufferLevel,e.type),0}),s.trigger("tracker_ready",t))},TrackerManager.prototype.onTrackerReconnecting=function(){0,status.setConnected(!1)},TrackerManager.prototype.onTrackerDisconnected=function(){0,status.setConnected(!1)},TrackerManager.prototype.onTrackerStatusUpdate=function(e){e.getConnected()&&(0,0,this.sockEmit("updateAsetStatus",{newTracks:e.getTobuffer(),mpd:status.getMPD()},this.OnStatusUpdated.bind(this)))},TrackerManager.prototype.OnStatusUpdated=function(e,t){var s=this;0,status.updateStatus(t,function(){s.trigger("status_updated")}.bind(s)),!s.p2pInterface.isLive()&&conf.SEGMENTS_HASH_CHECK&&(0,s.askSegmentsHashes(function(){0})),s.p2pInterface.isLive()&&t.updatedTracks.forEach(function(e){s.p2pInterface.setBufferMarginLive(e.bufferLevel,e.type),0})},TrackerManager.prototype.askPeers=function(e,t){var s,n={};e?(n.asetId=e.asetId?e.asetId:"all",n.exclusions=e.exclusions?e.exclusions:[],n.updating=e.updating?e.updating:!1):(n.asetId="all",n.exclusions=[],n.updating=!1),s={mpdhash:status.getMPD(),periodId:status.getPeriod(),tobuffer:status.getTobuffer(),p2pstats:{P2Ppercent:(status.getP2PDownloaded()/(status.getCDNDownloaded()+status.getP2PDownloaded())).toFixed(3),p2p:status.getP2PDownloaded(),cdn:status.getCDNDownloaded(),dataDownloadedTwice:status.getDataDownloadedTwice()},options:n},0,this.sockEmit("updatePeers",s,t),this.alreadyAsked=!0},TrackerManager.prototype.askSegmentsHashes=function(e){for(var t=this,s=status.getMPD(),n=status.getPeriod(),o=status.getTobuffer(),r={mpd:s,period:n,tobuffer:[]},a=0;a<o.length;a++)t.p2pInterface.hasSegmentHashes(n,o[a].asetId,o[a].representationId)||r.tobuffer.push(o[a]);r.tobuffer.length>0&&t.sockEmit("getSegmentsHashes",r,function(s,n){e();for(var o=n.tobuffer,r=0;r<o.length;r++)if(o[r].segmentsHashes){var a={};a.period=n.period,a.asetId=o[r].asetId,a.representationId=o[r].representationId,a.segmentsHashes=o[r].segmentsHashes,a.segmentsSizes=o[r].segmentsSizes,t.p2pInterface.updateMapWithSegmentsHashes(a)}t.trigger("gotSegmentsHashes")})},TrackerManager.prototype.sendPeerOffer=function(e){this.sockEmit("offer",e)},TrackerManager.prototype.sendPeerAnswer=function(e){0,this.sockEmit("answer",e)},TrackerManager.prototype.sendPeerIceCandidate=function(e){0,this.sockEmit("icecandidate",e)},TrackerManager.prototype.sendAnalytics=function(e){0,this.sockEmit("analytics",e)},module.exports=TrackerManager;


},{"../../conf":2,"./models/status":57,"backbone":62,"socket.io-client":112,"underscore":265}],47:[function(require,module,exports){
  var conf=require("../../conf"),_=require("underscore"),SpeedCalculator=require("./SpeedCalculator"),UploadQueue=function(e){this.p2pDownloader=e,this.queue=[],this.peerTimeouts={},this.saturated=!1,this.uploadSpeedCalculator=new SpeedCalculator,this.uploadLimitation=conf.MAX_UP_SPEED};UploadQueue.prototype.add=function(e,t,i,o,u){this.queue.push({peer:e,id_segment:t,id_chunk:i,chunk:o,timeStamp:u}),this.resetPeerTimeout(e),this.sendChunk()},UploadQueue.prototype.removeFirstChunk=function(){this.queue.splice(0,1)},UploadQueue.prototype.getChunkToSend=function(){for(var e=(new Date).getTime();this.queue.length>0;){if(e-this.queue[0].timeStamp<conf.CHUNK_UP_TIMEOUT)return this.queue[0];0,this.removeFirstChunk(),this.p2pDownloader.uploadSaturated()}},UploadQueue.prototype.sendChunk=function(e){var t=this.uploadSpeedCalculator.calculateSpeed();if(t<this.uploadLimitation&&(!this.saturated||e)){var i=this.getChunkToSend();if(!i)return void this.unsetSaturated();if(i.peer.getCommChannel()&&i.peer.getCommChannel().bufferedAmount<conf.UP_MAX_BUFFERED_AMOUNT){this.uploadSpeedCalculator.addChunkTransfer();try{return i.peer.sendChunk(i.id_segment,i.id_chunk,i.chunk),this.removeFirstChunk(),this.resetPeerTimeout(i.peer),this.unsetSaturated(),void(this.uploadLimitation+=5)}catch(o){0,0,this.uploadLimitation>conf.MAX_UP_SPEED&&(this.uploadLimitation=conf.MAX_UP_SPEED),this.uploadLimitation>400?this.uploadLimitation-=200:this.uploadLimitation>100?this.uploadLimitation-=50:this.uploadLimitation=Math.ceil(this.uploadLimitation/2),0,0,this.setSaturated()}this.checkPeerTimeout(i.peer)}else this.uploadLimitation>30&&(this.uploadLimitation-=20,0,this.setSaturated())}this.setSaturated()},UploadQueue.prototype.checkPeerTimeout=function(e){var t=(new Date).getTime();this.peerTimeouts[e.getId()]?t-this.peerTimeouts[e.getId()]>conf.PEER_UP_TIMEOUT&&this.clearChunksForPeer(e.getId()):this.peerTimeouts[e.getId()]=t},UploadQueue.prototype.resetPeerTimeout=function(e){delete this.peerTimeouts[e.getId()]},UploadQueue.prototype.clearChunksForPeer=function(e){this.queue=_.reject(this.queue,function(t){return t.peer.getId()===e}),0},UploadQueue.prototype.setSaturated=function(){if(!this.saturated){0,this.saturated=!0;var e=conf.CHUNK_SIZE/1024/(conf.MAX_UP_SPEED/1e3);this.sendInterval=setInterval(function(){this.sendChunk(!0)}.bind(this),e)}},UploadQueue.prototype.unsetSaturated=function(){this.saturated===!0&&0,this.saturated=!1,this.queue.length||clearInterval(this.sendInterval)},module.exports=UploadQueue;


},{"../../conf":2,"./SpeedCalculator":45,"underscore":265}],48:[function(require,module,exports){
  "use strict";var WebRTCFactory=function(e){var n=e,o=window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,i=window.RTCIceCandidate||window.mozRTCIceCandidate,t=window.mozRTCSessionDescription||window.RTCSessionDescription;this.createPeerConnection=function(){return new o(n,{optional:[{DtlsSrtpKeyAgreement:!0}]})},this.createIceCandidate=function(e){return new i(e)},this.createSessionDescription=function(e){return new t(e)}};module.exports=WebRTCFactory;


},{}],49:[function(require,module,exports){
  var conf=require("../../../conf"),Backbone=require("backbone"),_=require("underscore"),Peer=require("../models/peer"),status=require("../models/status"),EventEmitter=require("eventemitter3"),WebRTCFactory=require("../WebRTCFactory"),PeerPool=function(e){var n,t,a,r=e.TrackerManager,o=!1,i=!1,s=[],d=this,c=new EventEmitter,g=[],u=[],l=function(){r.register("offer",h.bind(d)),r.register("answer",I.bind(d)),r.register("icecandidate",S.bind(d)),r.register("askAnalytics",T.bind(d)),window.PeerConnection=window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection,n=conf.ENABLE_TURN?{iceServers:conf.TURNSERVERS.concat(conf.STUNSERVERS)}:{iceServers:conf.STUNSERVERS},a=new WebRTCFactory(n),_.extend(d,Backbone.Events),m(),c.on("add",E.bind(d)),d.listenTo(r,"tracker_ready",D.bind(d)),d.listenTo(r,"status_updated",function(){k(!0)}.bind(d)),window.addEventListener("beforeunload",N.bind(d)),window.addEventListener("unload",N.bind(d))},f=function(e,n){if(e.length){var t;for(t=0;t<e.length;t++)p(e[t],n)}},p=function(e,n){if(e){var t=new Peer(e,n);s.push(t),c.emit("add",t)}},m=function(){var e=0,n=0;_.forEach(s,function(t){e+=t.getDlSpeed(),n+=t.getUpSpeed()}),status.setDlSpeed(e),status.setUpSpeed(n),status.computeMaxAndAvgSpeed(),setTimeout(_.bind(m,d),1e3)},v=function(e){0},D=function(e){0,k(!o),o=!0},P=function(e){e.getAreListenerSet()?0:(e.getEE().on("connection_lost",w.bind(d)),e.getEE().on("msg_close",_.bind(function(){w(e)},d)),e.getEE().on("msg_requestHasSegment",_.bind(function(n){0,c.emit("segmentRequested",e,n.id)},d)),e.getEE().on("msg_hasSegment",_.bind(function(n){c.emit("hasSegment",e,n.id,n.segmentSize,n.progress,n.segmentHash),0},d)),e.getEE().on("msg_requestChunk",_.bind(function(n){c.emit("chunkRequested",e,n.id_segment,n.id_chunk)},d)),e.getEE().on("msg_sendChunk",_.bind(function(n){c.emit("chunkReceived",e,n.id_segment,n.id_chunk,n.data)},d)),e.getEE().on("msg_cleanDisconnect",_.bind(function(){M(e)},d)),e.getEE().on("change:ready_to_communicate",_.bind(function(){e.getReadyToCommunicate()===!0&&(0,e.establishHeartbeat(),c.emit("peerReadyCommunicate",e))},d)),e.getEE().on("change:connected",_.bind(function(){e.getConnected()&&c.emit("peerConnected",e)},d)),e.setAreListenerSet(!0))},C=function(e){return e=e.replace(/b=AS([^\r\n]+\r\n)/g,""),e=e.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:50\r\n"),e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:256\r\n"),e=e.replace(/a=mid:data\r\n/g,"a=mid:data\r\nb=AS:1638400\r\n")},E=function(e){s.length>=conf.MIN_NUMBER_OF_PEERS&&(clearInterval(t),t=void 0),e.getConnected()===!1&&(P(e),e.getPC()?0:e.setPC(a.createPeerConnection()),e.getPC().onstatechange=R.bind(d),e.getPC().onicecandidate=_.bind(function(n){if(n.candidate){var t=e.toJSON(),a=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),o={receiverData:t,senderData:a,icecandidate:n.candidate};r.sendPeerIceCandidate(o)}},d),e.initChannels(),e.getPC().createOffer(function(n){e.getPC().setLocalDescription(n,function(){n.sdp=C(n.sdp);var t=e.toJSON(),a=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),o={receiverData:t,senderData:a,offer:n};r.sendPeerOffer(o),c.emit("offerSent",e)}.bind(d),v)}.bind(d),v),e.startConnectionTimeout())},w=function(e,n){n&&(u.push(e.getId()),setTimeout(function(){return u.splice(0,1)},conf.PEER_REMOVED_TIMEOUT)),c.emit("peerDestroyed",e),e.destroy(),s=_.without(s,e),c.emit("remove"),s.length<conf.MIN_NUMBER_OF_PEERS&&k()},h=function(e){if(0,0,_.filter(s,function(n){return n.getId()==e.senderData._id}).length){var n=_.filter(s,function(n){return n.getId()==e.senderData._id})[0];n.setConnected("offer received, sending answer")}else{if(!(s.length<conf.MAX_NUMBER_OF_PEERS)){var t=e.senderData,o=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),i={receiverData:t,senderData:o,answer:!1};return void r.sendPeerAnswer(i)}e.senderData.connected="offer received, sending answer",e.senderData.isLive=r.p2pInterface.isLive();var c=r.p2pInterface;p(e.senderData,c);var n=_.filter(s,function(n){return n.getId()==e.senderData._id})[0]}P(n),n.getPC()?0:n.setPC(a.createPeerConnection()),n.getPC().onstatechange=R.bind(d),n.getPC().onicecandidate=_.bind(function(e){if(e.candidate){var t=n.toJSON(),a=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),o={receiverData:t,senderData:a,icecandidate:e.candidate};r.sendPeerIceCandidate(o)}},d),n.initDialog();var g=a.createSessionDescription(e.offer);""!==n.getPC().remoteDescription.sdp?0:n.getPC().setRemoteDescription(g,function(){n.getPC().createAnswer(function(e){n.getPC().setLocalDescription(e,function(){e.sdp=C(e.sdp),0;var t=n.toJSON();0;var a=status.getTrackByTrackInfos(t.periodId,t.asetId,t.representationId),o={receiverData:t,senderData:a,answer:e};r.sendPeerAnswer(o)}.bind(d),v)}.bind(d),v)}.bind(d),v),n.startConnectionTimeout()},I=function(e){0;for(var n,t=0;t<s.length;t++)if(s[t].getId()===e.senderData._id){n=s[t];break}if(n)if(e.answer){c.emit("answerReceived",n),n.setConnected("Answer received, connecting");var r=a.createSessionDescription(e.answer);n.getPC().setRemoteDescription(r,function(){},v)}else w(n),b(n),0;else 0},b=function(e){g.push(e.getId()),setTimeout(function(){g.splice(0,1)},conf.OFFER_DECLINED_TIMEOUT)},S=function(e){if(_.filter(s,function(n){return n.getId()==e.senderData._id}).length){var n=_.filter(s,function(n){return n.getId()==e.senderData._id})[0];0,n.getPC().addIceCandidate(a.createIceCandidate(e.icecandidate)),0}},T=function(e){var n=status.getMPD(),t=e.timestamp;if(n===e.mpdhash){var a={mpdhash:n,timestamp:t,downloadStats:{p2pDownloaded:status.getP2PDownloaded(),p2pUploaded:status.getP2PUploaded(),cdnDownloaded:status.getCDNDownloaded(),p2pDownloadedUncorrected:status.getP2PDownloadedUncorrected(),dataDlTwice_PP:status.getDataDownloadedTwice_PP(),dataDlTwice_PC:status.getDataDownloadedTwice_PC(),dataDlTwice_CP:status.getDataDownloadedTwice_CP(),dataDlTwice_CC:status.getDataDownloadedTwice_CC()},speedStats:{avgDl:Math.round(status.getAvgDlSpeed()),maxDl:Math.round(status.getMaxDlSpeed()),avgUp:Math.round(status.getAvgUpSpeed()),maxUp:Math.round(status.getMaxUpSpeed())}};r.sendAnalytics({timestamp:t,data:a,mpdhash:n})}},R=function(e){var n=_.filter(s,function(n){return n.getPC()==e.target})[0];0,"active"==e.target.readyState||n.getConnected()===!0},k=function(e){0,(!t||e)&&(r.askPeers({asetId:status.getAsetIdUpdate(),exclusions:A(),updating:i},y.bind(d)),t=setInterval(function(){var e={asetId:status.getAsetIdUpdate(),exclusions:A(),updating:i};r.askPeers(e,y.bind(d))}.bind(d),conf.ASK_PEERS_INTERVAL)),i=!0},A=function(){var e,n=[];for(e=0;e<s.length;e++)n.push(s[e].getId());return n=n.concat(u,g)},y=function(e,n){if(0,e)0;else if(n.length){0;var t,a=r.p2pInterface.isLive();for(t=0;t<n.length;t++)n[t].isLive=a;var o=r.p2pInterface;f(n,o)}else 0},U=function(e){var n,t=_.filter(s,function(n){return n.getAsetId()==e});for(0,n=0;n<t.length;n++)t[n].sendCleanDisconnectMsg(),M(t[n])},M=function(e){0,w(e)},N=function(){_.forEach(s,function(e){e.getReadyToCommunicate()&&e.sendMessage("close")})};d.getPeerArray=function(){return s},d.getProtectedPeerArray=function(){for(var e=[],n=0;n<s.length;n++){var t=s[n],a={};for(var r in t)0==r.indexOf("get")&&(a[r]=t[r]);e.push(a)}return e},d.onTrackSwitch=function(e){return U(e)},d.getEE=function(){return c},l()};module.exports=PeerPool;


},{"../../../conf":2,"../WebRTCFactory":48,"../models/peer":56,"../models/status":57,"backbone":62,"eventemitter3":110,"underscore":265}],50:[function(require,module,exports){
  "use strict";var status=require("../models/status"),conf=require("../../../conf.js"),DisplayInterface=function(e){var t=function(){var t,o={download:{p2pDownloaded:status.getP2PDownloaded(),p2pDownloadedNewAnalytics:status.getp2pDownloadedNewAnalytics(),cdnDownloaded:status.getCDNDownloaded(),dlSpeed:status.getDlSpeed(),upSpeed:status.getUpSpeed()},peers:{count:0},bufferLevelList:status.getBufferLevelList(),tracker:{connected:status.getConnected()},isLive:e.p2pInterface.isLive()};for(t=0;t<e.peerPool.getPeerArray().length;t++)e.peerPool.getPeerArray()[t].getId()&&o.peers.count++;return o.peerPool=e.peerPool.getProtectedPeerArray(),o},o=function(){window.SR_DISPLAY_INTERFACE={getStats:t}};o()};module.exports=DisplayInterface;


},{"../../../conf.js":2,"../models/status":57}],51:[function(require,module,exports){
  "use strict";var $=require("jquery"),Backbone=require("backbone");Backbone.$=$;var _=require("underscore"),logtemplate=require("./logtemplate.html"),peertemplate=require("./peertemplate.html"),statustemplate=require("./statustemplate.html"),status=require("../models/status"),conf=require("../../../conf"),VirtualBufferedManager=require("../../media/VirtualBufferedManager"),DisplayInterface=require("./DisplayInterface"),EventEmitter=require("eventemitter3"),GraphDots=function(e,t,i,n,s){this.curves=t,_.each(this.curves,function(e){e.values=[0]},this),this.maxValue=0,this.labelHorizontalAxis=n,this.labelVerticalAxis=i,this.graphTitle=s,this.START_X=25,this.START_Y=20;var r=25,h=20;this.SCALE_X=1.9,this.SCALE_Y=1.5,this.CANVAS_WIDTH=this.START_X+r+100*this.SCALE_X,this.CANVAS_HEIGHT=this.START_Y+h+100*this.SCALE_Y,this.END_X=this.CANVAS_WIDTH-r,this.END_Y=this.CANVAS_HEIGHT-h,this.graphCanvas=this.initialize(e),this.refresh()};GraphDots.prototype.initialize=function(e){var t=document.createElement("canvas");return t.width=this.CANVAS_WIDTH,t.height=this.CANVAS_HEIGHT,e.append(t),t},GraphDots.prototype.drawEmptyGraph=function(){this.graphCanvas.width=this.CANVAS_WIDTH;var e=this.graphCanvas.getContext("2d");e.beginPath(),e.moveTo(this.START_X-5,this.END_Y),e.lineTo(this.END_X+2,this.END_Y),e.moveTo(this.START_X,this.END_Y+5),e.lineTo(this.START_X,this.START_Y-2),e.stroke(),e.closePath(),e.font="10px serif";var t=3;e.font="small-caps bold 20px serif",e.fillStyle="#1E9D4F",e.fillText(this.graphTitle,this.START_X-20+80,this.START_Y-5),e.font="bold 12px serif",e.fillStyle="#1E9D4F",e.fillText(this.labelVerticalAxis,this.START_X-20,this.START_Y-10),e.beginPath(),e.font="10px serif",e.fillStyle="black",e.fillText("0",0,this.END_Y+t),e.strokeStyle="#d3d3d3";for(var i=1;10>=i;i++)e.moveTo(this.START_X+1,this.END_Y-10*i*this.SCALE_Y),e.lineTo(this.END_X,this.END_Y-10*i*this.SCALE_Y),e.fillText(i*this.maxValue/10,0,this.END_Y-10*i*this.SCALE_Y+t);e.stroke(),e.closePath(),e.beginPath(),e.strokeStyle="gray";for(var n=6,s=this.START_X;s<=this.END_X;s+=10*this.SCALE_X){var r=this.END_X+this.START_X-s;e.moveTo(r,this.END_Y+1),e.lineTo(r,this.END_Y+5),e.fillText(-(s-this.START_X)/this.SCALE_X,r-n,this.END_Y+15)}e.font="bold 14px serif",e.fillStyle="#1E9D4F",e.fillText(this.labelHorizontalAxis,this.END_X+5,this.END_Y+2),e.stroke(),e.closePath()},GraphDots.prototype.drawCurve=function(e,t){var i,n=this.graphCanvas.getContext("2d");for(n.beginPath(),n.lineWidth=2,n.strokeStyle=t,i=0;i<e.length-2;i++)this.END_X-(i+1)*this.SCALE_X>=this.START_X?(n.moveTo(this.END_X-i*this.SCALE_X,this.END_Y-100*this.SCALE_Y*e[e.length-i-1]/this.maxValue),n.lineTo(this.END_X-(i+1)*this.SCALE_X,this.END_Y-100*this.SCALE_Y*e[e.length-i-2]/this.maxValue)):e.splice(0,1);n.stroke(),n.closePath()},GraphDots.prototype.setNewMaxValue=function(){this.maxValue<=100?this.maxValue=100:this.maxValue<=1e3?this.maxValue=100*Math.ceil(this.maxValue/100):this.maxValue<=1e4?this.maxValue=1e3*Math.ceil(this.maxValue/1e3):this.maxValue<=1e5?this.maxValue=1e4*Math.ceil(this.maxValue/1e4):this.maxValue<=1e6&&(this.maxValue=1e5*Math.ceil(this.maxValue/1e5))},GraphDots.prototype.refresh=function(){_.each(this.curves,function(e){var t=e.getValue();e.values.push(t),t>this.maxValue&&(this.maxValue=t)},this),this.setNewMaxValue(),this.drawEmptyGraph(),_.each(this.curves,function(e){this.drawCurve(e.values,e.color)},this),setTimeout(_.bind(this.refresh,this),1e3)};var PeerItem=Backbone.View.extend({tagName:"li",template:peertemplate,initialize:function(e){this.renderPeriodically()},renderPeriodically:function(){return this.$el.html(this.template({peer:this.model})),setTimeout(_.bind(this.renderPeriodically,this),1e3),this}}),StatsView=Backbone.View.extend({el:"#connection-stats",template:statustemplate,initialize:function(e){this.p2pManager=e.P2PManager,this.p2pManager.peerPool.getEE().on("add",this.render.bind(this)),this.p2pManager.peerPool.getEE().on("remove",this.render.bind(this)),status.getEE().on("change:connected",this.render.bind(this)),this.render()},render:function(){var e={tracker:status.getConnected(),peersCount:0};return _.each(this.p2pManager.peerPool.getPeerArray(),_.bind(function(t){"undefined"!==t.getId()&&e.peersCount++}),this),this.$el.html(this.template({stats:e})),this}}),LogView=Backbone.View.extend({el:"#dashr_logs",template:logtemplate,initialize:function(e){this.p2pManager=e.P2PManager,this.p2pManager.peerPool.getEE().on("add",this.showPeers.bind(this)),this.p2pManager.peerPool.getEE().on("remove",this.showPeers.bind(this)),this.graphDots=new GraphDots($("#dl_graph"),[{getValue:function(){return status.getP2PDownloaded()/1024},color:"green"},{getValue:function(){return status.getP2PUploaded()/1024},color:"red"},{getValue:function(){return status.getCDNDownloaded()/1024},color:"orange"}],"(kB)","t(s)","Data (kB)"),this.renderPeriodically(),this.peersView=Array()},showPeers:function(e,t,i){2==conf.LOGGERMANAGER.SHOWPEERS&&(_.each(this.peersView,function(e){e.remove()}),_.each(this.p2pManager.peerPool.getPeerArray(),_.bind(function(e){if(e.getId()){var t=new PeerItem({model:e});this.peersView.push(t),$("#listepeers").append(t.el)}},this)))},renderPeriodically:function(){var e={status:status.getAttributes(),conf:conf.LOGGERMANAGER};return $(this.el).html(this.template(e)),setTimeout(_.bind(this.renderPeriodically,this),1e3),this}}),SegmentViewBars=function(e,t,i,n,s){this.el=e,this.chunkManager=t,this.segment_id=i,this.width=n,this.height=s,this.size=this.chunkManager.downloadStatus.length};SegmentViewBars.prototype.getChunkColor=function(e){return"pending"===this.chunkManager.downloadStatus[e]?"gray":"downloading"===this.chunkManager.downloadStatus[e]?"blue":"downloaded"===this.chunkManager.downloadStatus[e]?"green":"CDNdownloaded"===this.chunkManager.downloadStatus[e]?"orange":"failed"===this.chunkManager.downloadStatus[e]?"red":void 0},SegmentViewBars.prototype.render=function(){var e,t=this.el.getContext("2d");if(this.chunkManager.downloadStatus)for(e=0;e<this.chunkManager.downloadStatus.length;e++)t.fillStyle=this.getChunkColor(e),t.fillRect(e*this.width,this.segment_id*this.height,this.width,this.height),t.fillStyle="white",t.fillRect(e*this.width,this.segment_id*this.height,this.width,1),t.fillStyle="black",t.fillRect(e*this.width,(this.segment_id+1)*this.height-1,this.width,1)};var RepViewBars=Backbone.View.extend({initialize:function(e){this.rep=e.rep,this.p2pManager=e.p2pManager,this.p2pInterface=this.p2pManager.p2pInterface,this.period_id=e.period_id,this.aset_id=e.aset_id,this.rep_id=e.rep_id,this._views=[],this.CHUNKWIDTH=this.p2pInterface.isLive()?6:2,this.CHUNKHEIGHT=(this.p2pInterface.isLive(),15),this.WIDTH=900,this.HEIGHT=this.rep.segments.length*this.CHUNKHEIGHT},render:function(){return this.el.width=this.WIDTH,this.el.height=this.HEIGHT,this.preRenderSegments(),this.renderSegments(),this},findSegmentView:function(e){},newSegmentView:function(e,t){},segmentDownloaded:function(e){},preRenderSegments:function(){for(var e=this.el.getContext("2d"),t=0;t<this.rep.segments.length;t++){var i=this.rep.segments[t],n=i.size?i.size/conf.CHUNK_SIZE:2;e.fillRect(0,t*this.CHUNKHEIGHT,n,this.CHUNKHEIGHT)}},renderSegments:function(){var e=this.p2pInterface.getMap(),t=e.periods[this.period_id].asets[this.aset_id].reps[this.rep_id].segments.length,i=conf.DISPLAY_DEV||!this.p2pInterface.isLive()||10>t?t:10;this.el.height=i*this.CHUNKHEIGHT;for(var n=0;i>n;n++){var s=this.p2pManager.p2pDownloader.getChunkManagerAndSeeders(this.period_id,this.aset_id,this.rep_id,e.periods[this.period_id].asets[this.aset_id].reps[this.rep_id].segments[n].id).chunkManager,r=this.el.getContext("2d");r.fillRect(0,n*this.CHUNKHEIGHT,2,this.CHUNKHEIGHT);var h=12,a=e.periods[this.period_id].asets[this.aset_id].reps[this.rep_id].segments[n],o=a.id+"  -  "+a.time;if(s){var l=new SegmentViewBars(this.el,s,n,this.CHUNKWIDTH,this.CHUNKHEIGHT);l.render(),conf.DISPLAY_DEV&&(r.font=h+"px Arial",r.fillStyle="black",r.fillText(o,3,n*this.CHUNKHEIGHT+h))}else{var r=this.el.getContext("2d");if(conf.DISPLAY_DEV&&(r.fillStyle="red"),r.fillRect(0,n*this.CHUNKHEIGHT,2,this.CHUNKHEIGHT),conf.DISPLAY_DEV){var h=12;r.font=h+"px Arial",r.fillText(o,3,n*this.CHUNKHEIGHT+h)}}}setTimeout(_.bind(this.renderSegments,this),400)}}),SegmentViewBuffer=function(e,t,i,n,s,r,h){return this.el=e,this.chunkManager=t,this.segment_id=i,this.width=n,this.height=s,this.firstChunk=r,this.bufferHeight=h,this};SegmentViewBuffer.prototype.getChunkColor=function(e){return"pending"===this.chunkManager.downloadStatus[e]?"gray":"downloading"===this.chunkManager.downloadStatus[e]?"blue":"downloaded"===this.chunkManager.downloadStatus[e]?"green":"CDNdownloaded"===this.chunkManager.downloadStatus[e]?"orange":"failed"===this.chunkManager.downloadStatus[e]?"red":void 0},SegmentViewBuffer.prototype.findCoordinates=function(e){var t=Math.floor((e+this.firstChunk)*this.height/this.bufferHeight)*this.width,i=(e+this.firstChunk)*this.height%this.bufferHeight;return{x:t,y:i}},SegmentViewBuffer.prototype.render=function(){for(var e=this.el.getContext("2d"),t=0;t<this.chunkManager.downloadStatus.length;t++){e.fillStyle=this.getChunkColor(t);var i=this.findCoordinates(t);e.fillRect(i.x,i.y,this.width,this.height)}};var RepViewBuffer=Backbone.View.extend({initialize:function(e){this.rep=e.rep,this.p2pManager=e.p2pManager,this._views=[],this.CHUNKWIDTH=conf.CHUNKPARAMS_WIDTH,this.CHUNKHEIGHT=conf.CHUNKPARAMS_HEIGHT,this.WIDTH=620,this.HEIGHT=40,this.el.width=this.WIDTH,this.el.height=this.HEIGHT,this.preRenderSegments()},render:function(){return this.renderSegments(),this},findSegmentView:function(e){var t=_.where(this._views,{segment_id:e});return t.length>=1?(t.length>1&&0,t[0]):(0,!1)},newSegmentView:function(e,t){for(var i,n=0,s=this.rep.segments.length,r=0;s>r&&(i=this.rep.segments[r].id,i!=t);r++)n+=Math.ceil(this.rep.segments[r].size/conf.CHUNK_SIZE);var h=new SegmentViewBuffer(this.el,e,t,this.CHUNKWIDTH,this.CHUNKHEIGHT,n,this.HEIGHT);this._views.push({view:h,segment_id:t})},segmentDownloaded:function(e){var t=this.findSegmentView(e);setTimeout(_.bind(function(){this._views=_.without(this._views,t)},this),5e3)},renderSegments:function(){for(var e=0;e<this._views.length;e++)this._views[e].view.render();setTimeout(_.bind(this.renderSegments,this),400)},preRenderSegments:function(){for(var e=0,t=this.el.getContext("2d"),i=0;i<this.rep.segments.length;i++){for(var n=Math.ceil(this.rep.segments[i].size/conf.CHUNK_SIZE),s=0;n>s;s++){t.fillStyle="black";var r={x:Math.floor((s+e)*this.CHUNKHEIGHT/this.HEIGHT)*this.CHUNKWIDTH,y:(s+e)*this.CHUNKHEIGHT%this.HEIGHT};t.fillRect(r.x,r.y,this.CHUNKWIDTH,this.CHUNKHEIGHT)}e+=n}}}),ChunkBarView=Backbone.View.extend({el:"#chunks",initialize:function(e){this.container=document.createDocumentFragment(),this._views=[],this.p2pManager=e.P2PManager,this.p2pInterface=this.p2pManager.p2pInterface,this.videoMap=this.p2pInterface.getMap(),this.render(),this.p2pManager.p2pDownloader.getEE().on("newChunkManager",this.onNewChunkManager.bind(this)),this.listenTo(this.p2pManager,"piece_downloaded_p2pm",this.onSegmentDownloaded),this.listenTo(this.p2pManager,"CDNSegmentDownloaded",this.onSegmentDownloaded)},render:function(){var e=this.p2pInterface.getTracks();_.each(this.videoMap.periods,function(t,i){_.each(t.asets,function(t,n){var s=document.createElement("div");s.className="aset-buffer";var r=document.createElement("h6");r.className="bar",r.appendChild(document.createTextNode(t.type+" buffer:")),s.appendChild(r),this.container.appendChild(s),_.each(t.reps,function(t,r){for(var h,a=0;a<e.length;a++)e[a].id_aset===n&&(h=e[a].id_rep);if(2===conf.LOGGERMANAGER.SHOWBARS||1===conf.LOGGERMANAGER.SHOWBARS&&r===h)if(1===conf.LOGGERMANAGER.CHUNK_DISPLAY){var o=document.createElement("canvas"),l=new RepViewBars({el:o,p2pManager:this.p2pManager,rep:t,period_id:i,aset_id:n,rep_id:r});this._views.push({view:l,period_id:i,aset_id:n,rep_id:r}),s.appendChild(l.render().el)}else{var d=document.createElement("canvas"),f=new RepViewBuffer({el:d,p2pManager:this.p2pManager,rep:t});this._views.push({view:f,period_id:i,aset_id:n,rep_id:r}),this.container.appendChild(f.render().el)}},this)},this)},this),this.$el.append(this.container)},findRepView:function(e,t,i){var n=_.where(this._views,{period_id:e,aset_id:t,rep_id:i});return n.length>=1?(n.length>1&&0,n[0].view):(0,!1)},onNewChunkManager:function(e,t,i,n,s){var r=this.findRepView(t,i,n);r&&r.newSegmentView(e,s)},onSegmentDownloaded:function(e,t){var i=this.findRepView(e.id_period,e.id_aset,e.id_rep);i&&i.segmentDownloaded(e.idPiece)}}),bufferDisplay=function(e){var t,i,n,s,r,h,a=e.p2pInterface,o=document.createElement("canvas"),l=[],d=750,f=30,p=15,u=12,g=function(){var t,i,n,s,r=a.getBufferedTracks();o.width=d;var h=document.getElementById("buffers");if(h){for(h.appendChild(o),setInterval(m,200),o.onclick=S,o.onmousemove=E,o.onmouseout=T,n=0;n<a.getMap().periods[0].asets.length;n++)for(s=0;s<a.getMap().periods[0].asets[n].reps.length;s++){for(t={id_aset:n,id_rep:s,vbm:new VirtualBufferedManager},i=0;i<r.length;i++)r[i].id_aset===n&&r[i].id_rep===s&&(t.id_buffer=i);l.push(t)}e.on("piece_downloaded_p2pm",H),e.on("piece_downloaded_prtl",H),e.p2pDownloader.getEE().on("segmentRemoved",C.bind(this)),e.on("repSwitched",b)}},c=function(e){o.height=e*f+p},_=function(){var e,s,o=a.getBufferedTracks();for(t=[],i=[],r=1/0,h=0,s=2===conf.LOGGERMANAGER.SHOWBUFFER?l.length:Math.max(o.length),n!==s&&(c(s),n=Math.max(s)),e=0;e<o.length;e++)i.push(o[e].buffered),i[e].length&&(r=Math.min(r,i[e].start(0)),h=Math.max(h,i[e].end(i[e].length-1))),t.push(o[e].bufferedStrict),t[e]&&t[e].length&&(r=Math.min(r,t[e].start(0)),h=Math.max(h,t[e].end(t[e].length-1)));for(e=0;e<l.length;e++)(2===conf.LOGGERMANAGER.SHOWBUFFER||l[e].id_buffer||0===l[e].id_buffer)&&l[e].vbm.length&&(r=Math.min(r,l[e].vbm.start(0)),h=Math.max(h,l[e].vbm.end(l[e].vbm.length-1)))},m=function(){var e,g,c,m,v=o.getContext("2d");for(_(),s=[],e=0;n>e;e++)v.fillStyle="white",v.fillRect(0,e*f,d,f);for(e=0;n>e;e++)if(2===conf.LOGGERMANAGER.SHOWBUFFER){for(g=0;g<l[e].vbm.length;g++)c=w(l[e].vbm.start(g)),m=w(l[e].vbm.end(g)),v.fillStyle="#97b9e2",v.fillRect(c,e*f,m-c>1?m-c:1,f-3);(l[e].id_buffer||0===l[e].id_buffer)&&(s[l[e].id_buffer]=e)}else if(l[e].id_buffer||0===l[e].id_buffer){for(g=0;g<l[e].vbm.length;g++)c=w(l[e].vbm.start(g)),m=w(l[e].vbm.end(g)),v.fillStyle="#97b9e2",v.fillRect(c,l[e].id_buffer*f,m-c>1?m-c:1,f-3);s[l[e].id_buffer]=e}for(e=0;e<i.length;e++)for(g=0;g<i[e].length;g++)c=w(i[e].start(g)),m=w(i[e].end(g)),v.fillStyle="#566e89",v.fillRect(c,(s[e]+1/3)*f-1,m-c>1?m-c:1,2*f/3-2);for(e=0;e<t.length;e++)if(t[e])for(g=0;g<t[e].length;g++)c=w(t[e].start(g)),m=w(t[e].end(g)),v.fillStyle="#202429",v.fillRect(c,(s[e]+2/3)*f-2,m-c>1?m-c:1,f/3-1);c=w(a.getCurrentTime()),m=c+1,v.fillStyle="#bf0101",v.fillRect(c,0,m-c,o.height-p),v.fillStyle="white",v.fillRect(150,o.height-p,100,p),v.fillStyle="#bf0101",v.font=u+"px Arial",v.fillText(a.getCurrentTime().toFixed(3),150,o.height),v.fillStyle="white",v.fillRect(0,o.height-p,100,p),v.fillRect(o.width-100,o.height-p,100,p),v.fillStyle="black",v.font=u+"px Arial",v.fillText(r.toFixed(3),0,o.height),v.fillText(h.toFixed(3),o.width-h.toFixed(3).toString().length*u*5/9,o.height)},w=function(e){return(e-r)*d/(h-r)},v=function(e){return e*(h-r)/d+r},S=function(e){var t=v(e.offsetX);a.setCurrentTime(t)},E=function(e){var n,a,d=o.getContext("2d"),g=v(e.offsetX),c=Math.floor(e.offsetY/f),_="",m=(h-r)/150;if(a=s.indexOf(c),a>-1&&e.offsetY-c*f>=2*f/3-2&&t[a])for(n=0;n<t[a].length;n++)if(t[a].start(n)-m<=g&&g<=t[a].end(n)+m){_=t[a].start(n).toFixed(3)+" - "+t[a].end(n).toFixed(3);break}if(a>-1&&(e.offsetY-c*f<2*f/3-2&&e.offsetY-c*f>=1*f/3-1||""===_)&&i[a])for(n=0;n<i[a].length;n++)if(i[a].start(n)-m<=g&&g<=i[a].end(n)+m){_=i[a].start(n).toFixed(3)+" - "+i[a].end(n).toFixed(3);break}if((e.offsetY-c*f<1*f/3-1||""===_)&&l[c]&&l[c].vbm)for(n=0;n<l[c].vbm.length;n++)if(l[c].vbm.start(n)-m<=g&&g<=l[c].vbm.end(n)+m){_=l[c].vbm.start(n).toFixed(3)+" - "+l[c].vbm.end(n).toFixed(3);break}d.fillStyle="white",d.fillRect(o.width/2-100,o.height-p,400,p),d.fillStyle="black",d.font=u+"px Arial bold",d.fillText(_,o.width/2-h.toFixed(3).toString().length*u*7/18,o.height),d.fillText(g.toFixed(3),500,o.height)},T=function(e){var t=o.getContext("2d");t.fillStyle="white",t.fillRect(o.width/2-100,o.height-p,400,p)},H=function(e){var t;for(t=0;t<l.length;t++)l[t].id_aset===e.id_aset&&l[t].id_rep===e.id_rep&&l[t].vbm.addPiece(e)},C=function(e){var t;for(t=0;t<l.length;t++)l[t].id_aset===e.id_aset&&l[t].id_rep===e.id_rep&&l[t].vbm.removePiece(e)},b=function(e,t,i){var n,s;for(n=0;n<l.length;n++)l[n].id_aset!==e||!l[n].id_buffer&&0!==l[n].id_buffer||(s=l[n].id_buffer,delete l[n].id_buffer);for(n=0;n<l.length;n++)l[n].id_aset===t&&l[n].id_rep===i&&(l[n].id_buffer=s)};g()},DisplayManager=function(){var e=!1;this.start=function(t){if(!e){new LogView({P2PManager:t}),new StatsView({P2PManager:t}),new ChunkBarView({P2PManager:t});if(conf.LOGGERMANAGER.SHOWBUFFER>0){bufferDisplay(t)}e=!0}}};module.exports=new DisplayManager;


},{"../../../conf":2,"../../media/VirtualBufferedManager":24,"../models/status":57,"./DisplayInterface":50,"./logtemplate.html":52,"./peertemplate.html":53,"./statustemplate.html":54,"backbone":62,"eventemitter3":110,"jquery":111,"underscore":265}],52:[function(require,module,exports){
  module.exports=function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{}){if(__p+="",2==conf.SHOWLOGS){if(__p+='\r\n	<h3> Download stats:</h3>\r\n	<ul id="download_stats" style="font-size:22px" class="unstyled text-center">\r\n		<li>\r\n			P2P Down Speed: <br/>\r\n			<span class="label label-success"> '+(null==(__t=status.dlSpeed.toFixed(2))?"":__t)+'ko/s</span>\r\n		</li>\r\n		<li> \r\n			Total from Peers: <br/>\r\n			<span class="label label-success">'+(null==(__t=(status.p2pDownloaded/1024).toFixed(0))?"":__t)+"ko ("+(null==(__t=(100*status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1))?"":__t)+'%) </span>\r\n		</li>\r\n		<li>\r\n			Total from CDN: <br/>\r\n			<span class="label label-warning">'+(null==(__t=(status.cdnDownloaded/1024).toFixed(0))?"":__t)+"ko ("+(null==(__t=(100*status.cdnDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1))?"":__t)+'%) </span>\r\n		</li>\r\n		<li> \r\n			Data downloaded Twice: <br/>\r\n			<span class="label label-success">'+(null==(__t=(status.dataDownloadedTwice/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n        <li> \r\n			Data downloaded Twice: <br/>\r\n			<span class="label label-success">PP: '+(null==(__t=(status.dataDownloadedTwice_PP/1024).toFixed(0))?"":__t)+'ko </span>\r\n            <span class="label label-success">PC: '+(null==(__t=(status.dataDownloadedTwice_PC/1024).toFixed(0))?"":__t)+'ko </span>\r\n            <span class="label label-success">CP: '+(null==(__t=(status.dataDownloadedTwice_CP/1024).toFixed(0))?"":__t)+'ko </span>\r\n            <span class="label label-success">CC: '+(null==(__t=(status.dataDownloadedTwice_CC/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n        <li> \r\n			p2pDownloaded uncorrected: <br/>\r\n			<span class="label label-success">'+(null==(__t=(status.p2pDownloadedUncorrected/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n		<li> \r\n			Total from Peers (double check): <br/>\r\n			<span class="label label-success">'+(null==(__t=(status.p2pDoubleCheck/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n		<li> \r\n			Total from CDN (double check): <br/>\r\n			<span class="label label-warning">'+(null==(__t=(status.cdnDoubleCheck/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n	</ul>\r\n	<h3> Upload stats:</h3>\r\n	<ul id="upload_stats" style="font-size:22px" class="unstyled text-center">\r\n		<li>\r\n			P2P Up Speed : <br/>\r\n			<span class="label label-danger">'+(null==(__t=status.upSpeed.toFixed(2))?"":__t)+'ko/s</span>\r\n		</li>\r\n		<li> \r\n			Total Uploaded: <br/>\r\n			<span class="label label-danger">'+(null==(__t=(status.p2pUploaded/1024).toFixed(0))?"":__t)+'ko </span>\r\n		</li>\r\n	</ul>\r\n	<h4> Status:</h4>\r\n	<ul class="unstyled">\r\n		<li>\r\n			Connected to Tracker : \r\n			<span class="label label-info">'+(null==(__t=status.connected)?"":__t)+'</span>\r\n		</li>\r\n		<li>\r\n			My peer-ids :\r\n			<span class="label label-info"> ',_.each(status.my_ids,function(l){var s="xx";s+=l,s+="  ",print(s)}),__p+="\r\n			</span>\r\n		</li>\r\n		<li>\r\n			My Aset/Rep ids :\r\n			<ul>\r\n			",status.tobuffer)for(i=0,m=status.tobuffer.length;i<m;i++)__p+="\r\n					<li> Aset : "+(null==(__t=status.tobuffer[i].asetId)?"":__t)+", Rep : "+(null==(__t=status.tobuffer[i].representationId)?"":__t)+"\r\n					</li>\r\n						";__p+="\r\n			</ul>\r\n		</li>\r\n	</ul>\r\n\r\n"}else 1==conf.SHOWLOGS?__p+='\r\n\r\n	<ul id="download_stats" class="list-group">\r\n		<li class="list-group-item">\r\n			<span class="label label-success pull-right"> '+(null==(__t=status.dlSpeed.toFixed(2))?"":__t)+'kB/s</span>\r\n			P2P Down Speed\r\n		</li>\r\n		<li class="list-group-item">\r\n			<span class="label label-danger pull-right">'+(null==(__t=status.upSpeed.toFixed(2))?"":__t)+'kB/s</span>\r\n			P2P Upload Speed\r\n		</li>\r\n		<li class="list-group-item"> \r\n			<span class="label label-success pull-right .from-peers">'+(null==(__t=(status.p2pDownloaded/1024).toFixed(0))?"":__t)+"kB ("+(null==(__t=(100*status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1))?"":__t)+"%) </span>\r\n			Total data from Peers\r\n		</li>\r\n\r\n":3==conf.SHOWLOGS&&(__p+='\r\n<!-- Le template de donnÃ©es P2P pour la demo camping 2 -->\r\n	<div id="big-logs">\r\n		<div class="label label-success">\r\n			P2P: ',print("NaN"===(status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1)?"0.0%":(100*status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1)+"%"),__p+='\r\n		</div>\r\n			<div class="btn-group btn-group-justified" role="toolbar">\r\n				<span class="btn btn-success speed">\r\n				P2P<span class="glyphicon glyphicon glyphicon-arrow-down "></span> '+(null==(__t=status.dlSpeed.toFixed(0))?"":__t)+' kB/s\r\n				</span>\r\n				<span class="btn btn-danger speed">\r\n				P2P<span class="glyphicon glyphicon glyphicon-arrow-up"></span> '+(null==(__t=status.upSpeed.toFixed(0))?"":__t)+' kB/s\r\n				</span>\r\n			</div>\r\n	<div>\r\n	<!-- <ul id="download_stats" class="list-group">\r\n		<li class="list-group-item">\r\n			<span class="label label-success pull-right"> </span>\r\n			\r\n		</li>\r\n		<li class="list-group-item">\r\n			<span class="label label-danger pull-right">'+(null==(__t=status.upSpeed.toFixed(2))?"":__t)+'kB/s</span>\r\n			P2P Upload Speed\r\n		</li>\r\n		<li class="list-group-item"> \r\n			<span class="label label-success pull-right .from-peers">'+(null==(__t=(status.p2pDownloaded/1024).toFixed(0))?"":__t)+"kB ("+(null==(__t=(100*status.p2pDownloaded/(status.cdnDownloaded+status.p2pDownloaded)).toFixed(1))?"":__t)+"%) </span>\r\n			Total data from Peers\r\n		</li> -->\r\n\r\n");__p+="\r\n\r\n"}return __p};


},{}],53:[function(require,module,exports){
  module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+="id = "+(null==(__t=peer.getId())?"":__t)+',\r\n<strong><span style="color:green;font-weight:bold">dlSpeed : '+(null==(__t=peer.getDlSpeed().toFixed(2))?"":__t)+'ko/s</span>, \r\n<span style="color:red;font-weight:bold">upSpeed : '+(null==(__t=peer.getUpSpeed().toFixed(2))?"":__t)+"ko/s</span></strong>\r\n<br/>\r\nStatus: connected: "+(null==(__t=peer.getConnected())?"":__t)+", period:  "+(null==(__t=peer.getPeriodId())?"":__t)+",aset:  "+(null==(__t=peer.getAsetId())?"":__t)+", rep:  "+(null==(__t=peer.getRepId())?"":__t)+", \r\ndataDownloaded (Utile) : "+(null==(__t=(peer.getDataDownloaded()/1024).toFixed(0))?"":__t)+"ko, dataUploaded : "+(null==(__t=(peer.getDataUploaded()/1024).toFixed(0))?"":__t)+"ko\r\n<br />";return __p};


},{}],54:[function(require,module,exports){
  module.exports=function(obj){var __t,__p="";Array.prototype.join;with(obj||{})__p+='<h4>Status</h4>\r\n<ul class="list-unstyled">\r\n  <li>\r\n    Connected to Tracker:\r\n  </li>\r\n  <li>\r\n    <span class="badge">'+(null==(__t=stats.tracker)?"":__t)+'</span>\r\n  </li>\r\n  <li>\r\n    Peers connected to:\r\n  </li>\r\n  <li>\r\n    <span class="badge peersCount">'+(null==(__t=Math.round(stats.peersCount/2))?"":__t)+"</span>\r\n  </li>\r\n</ul>";return __p};


},{}],55:[function(require,module,exports){
  "use strict";var Heuristic=function(n,t){var e=.3,u=0,i=4e3,r=0,c=0,o=0,s=.5,f=0,h=n,a=t,d=function(){r++},N=function(){c++},m=function(){o++},I=function(){var n,t=c/r;return n=isNaN(t)?u:Math.min(t,1),0,f=n,n},b=function(){var n;return 0!==r&&(n=(1-e)*s+e*I(),s=n),0,s},k=function(){r=0,c=0,o=0},g=function(){b(),k()},l=function(){setInterval(g,i)};this.incrementNbChunkRequested=function(){return d()},this.incrementNbChunkDownloaded=function(){return N()},this.incrementNbChunkTimeOut=function(){return m()},this.heurisInst=function(){return I()},this.mean=function(){return b()},this.getNbChunkRequested=function(){return r},this.getHeuristicScore=function(){return s},this.getLastHeuristInst=function(){return f},l()};module.exports=Heuristic;


},{}],56:[function(require,module,exports){
  var _=require("underscore"),Backbone=require("backbone"),status=require("../models/status"),conf=require("../../../conf"),Heuristic=require("./Heuristic"),EventEmitter=require("eventemitter3"),Peer=function(e,t){var n,o,r,i,u,a,c,s,d,f,l,g=0,m=0,h=0,b=0,y=0,p=(new Date).getTime(),C=!1,v=0,T=0,I=e._id,A=e.asetId,E=e.periodId,S=e.representationId,P=e.city,w=e.country,D=e.currentSegment,L=e.currentTime,R=e.ipAddress,M=e.ipFullList,k=e.ipPort,N=e.isp,U=e.latitude,q=e.longitude,H=e.mpdhash,O=e.region,B=e.socketId,J=e.trackerId,x=e.type,F=e.updatedAt,K=e["p2pstats.P2Ppercent"],V=e.bufferLevel,X=0,z=0,Y=new Heuristic(I,B),j=this,G=new EventEmitter,Q=function(){var e={_id:I,asetId:A,city:P,country:w,currentSegment:D,currentTime:L,ipAddress:R,ipFullList:M,ipPort:k,isp:N,latitude:U,longitude:q,mpdhash:H,periodId:E,region:O,representationId:S,socketId:B,trackerId:J,type:x,updatedAt:F};return e},W=function(e){var t;d&&d.getStats(function(n){var o,r,i=n.result();for(r=0;r<i.length;r++)if(o=i[r],o.stat("googRtt")){t=o.stat("googRtt"),e(t);break}})},Z=function(){var e,t,n,o;j.loc?(n=j.loc.coordinates[1],o=j.loc.coordinates[0],e=status.getTobuffer()[0].loc.coordinates[1],t=status.getTobuffer()[0].loc.coordinates[0]):(n=U,o=q,e=status.getTobuffer()[0].latitude,t=status.getTobuffer()[0].longitude);var r=6371,i=(n-e)*Math.PI/180,u=(o-t)*Math.PI/180,a=e*Math.PI/180,c=n*Math.PI/180,s=Math.sin(i/2)*Math.sin(i/2)+Math.sin(u/2)*Math.sin(u/2)*Math.cos(a)*Math.cos(c),d=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),f=r*d;return f},$=function(){var e=(new Date).getTime(),t=e-p;X=h/1024/(t/1e3),z=b/1024/(t/1e3),j.getReadyToCommunicate()===!0&&(h+b)/1024/(t/1e3)<conf.MIN_USEFUL_SPEED?(y++,y>conf.MAX_USELESS_COUNT&&0):y=0,h=0,b=0,p=e},ee=function(){var e=g,t=m;0>=e-v&&0>=t-T&&re(!0),v=e,T=t},te=function(){ie(),0},ne=function(){l||(l=setTimeout(function(){0,re(!0)}.bind(j),conf.PEER_CONNECTION_TIMEOUT))},oe=function(){clearTimeout(l)},re=function(e){G.emit("connection_lost",j,e),0},ie=function(){0,f||(0,0,f=f?f:d.createDataChannel("communication",{reliable:!1}),0,f.binaryType="arraybuffer",0,f.onclose=function(){re(!1)}.bind(j),ue(),f.onerror=function(e){re(!1)}.bind(j))},ue=function(){f.onmessage=_.bind(function(e){if(C=!0,j.setReadyToCommunicate(!0),j.setConnected(!0),status.setRawDataDownloaded(status.getRawDataDownloaded()+e.data.length),"string"==typeof e.data){var t=JSON.parse(e.data);if(t.readyComm)return void setTimeout(_.bind(function(){j.setReadyToCommunicate(!0),j.setConnected(!0),oe()},j),100);"heartbeat"===t.type?0:G.emit("msg_"+t.type,t.args)}else{var n=Ie(e.data);h+=n.data.byteLength,g+=n.data.byteLength,status.setP2PDownloadedUncorrected(status.getP2PDownloadedUncorrected()+n.data.byteLength),status.setP2PDownloaded(status.getP2PDownloaded()+n.data.byteLength),G.emit("msg_sendChunk",n)}},j)},ae=function(e,t){if(void 0===n)return 0,!1;var o=JSON.stringify({type:e,args:t});return status.setRawDataUploaded(status.getRawDataUploaded()+o.length),f.send(o),!0},ce=function(){i=setInterval(function(){C===!0?C=!1:(re(!1),0)}.bind(j),conf.CHECK_HEARTBEAT_INTERVAL),u=setInterval(function(){fe()}.bind(j),conf.SEND_HEARTBEAT_INTERVAL)},se=function(){d.ondatachannel=de.bind(j)},de=function(e){0;var t=e.channel||e;"communication"==t.label&&(f=t,ue(),"connecting"==t.readyState?f.onopen=function(){0,t.send(JSON.stringify({readyComm:!0})),setTimeout(_.bind(function(){j.setReadyToCommunicate(!0),r=!0,oe()},j),100)}.bind(j):(0,t.send(JSON.stringify({readyComm:!0})),setTimeout(_.bind(function(){j.setReadyToCommunicate(!0),r=!0,oe()},j),100)),f.onclose=function(){re(!1)}.bind(j),f.onerror=function(e){re(!1)}.bind(j))},fe=function(){ae("heartbeat")},le=function(e){0,ae("requestHasSegment",{id:e})},ge=function(e,t,n,o){ae("hasSegment",{id:e,segmentSize:t,progress:n,segmentHash:o})},me=function(e,t){ae("requestChunk",{id_segment:e,id_chunk:t}),G.emit("self_requestChunk",j,e,t),Y.incrementNbChunkRequested()},he=function(e,t,n){j.downloading={id_segment:e,id_chunk:t};var o=n.byteLength;n=_e(e,t,n),n!==!1&&f.send(n),b+=o,m+=o,status.setP2PUploaded(status.getP2PUploaded()+o)},be=function(){ae("cleanDisconnect")},ye=function(){return Y.getNbChunkRequested()<conf.MAX_CHUNK_BY_SEED},pe=function(e){e=e?_.clone(e):{};clearTimeout(l),clearInterval(i),clearInterval(u),clearInterval(c),clearInterval(s),f&&(f.close(),f=null);try{d.close()}catch(t){0}d=null},Ce=function(e){var t=Math.floor(e/256),n=e%256;return new Uint8Array([n,t])},ve=function(e){var t=Ce(Math.floor(e/65536)),n=Ce(e%65536);return new Uint8Array([n[0],n[1],t[0],t[1]])},Te=function(e){var n,o;if(t.isLive()){if(o=t.getMap().periods[E].asets[A].reps[S].segments,_.find(o,function(t){return t.id==e}))return e;n=Math.floor(o[o.length-1].id/4294967296);var r=e+4294967296*n;return _.find(o,function(e){return e.id==r})?r:e+4294967296*(n-1)}return e},_e=function(e,t,n){var o=ve(e);if(t>65536)return 0,!1;var r=Ce(t),i=new Uint8Array(n.byteLength+o.byteLength+r.byteLength);return i.set(o,0),i.set(r,4),i.set(new Uint8Array(n),6),i.buffer},Ie=function(e){var t=new Uint32Array(e.slice(0,4)),n=new Uint16Array(e.slice(4,6)),o=e.slice(6),r=Te(t[0]),i=n[0];return{id_segment:r,id_chunk:i,data:o}},Ae=function(e){_.extend(j,Backbone.Events),void 0===r&&(r=!1,o=!0),c=setInterval(_.bind($,j),1e3),s=setInterval(ee.bind(j),conf.CHECK_USELESS_INTERVAL)};j.toJSON=function(){return Q()},j.getConnected=function(){return r},j.setConnected=function(e){e!=r&&(G.emit("change:connected"),r=e,0)},j.getRtt=function(e){return W(e)},j.getDistance=function(){return Z()},j.getReadyToCommunicate=function(){return n},j.setReadyToCommunicate=function(e){e!=n&&(n=e,G.emit("change:ready_to_communicate"))},j.initChannels=function(){return te()},j.startConnectionTimeout=function(){return ne()},j.sendMessage=function(e,t){return ae(e,t)},j.establishHeartbeat=function(){return ce()},j.initDialog=function(){return se()},j.requestHasSegment=function(e){return le(e)},j.hasSegment=function(e,t,n,o){return ge(e,t,n,o)},j.requestChunk=function(e,t){return me(e,t)},j.sendChunk=function(e,t,n){return he(e,t,n)},j.sendCleanDisconnectMsg=function(){return be()},j.canBeAskedChunk=function(){return ye()},j.destroy=function(e){return pe(e)},j.getDataDownloaded=function(){return g},j.getDataUploaded=function(){return m},j.getId=function(){return I},j.getAsetId=function(){return A},j.getPeriodId=function(){return E},j.getRepId=function(){return S},j.getCity=function(){return P},j.getCountry=function(){return w},j.getRegion=function(){return O},j.getIpAddress=function(){return R},j.getType=function(){return x},j.getSocketId=function(){return B},j.getCurrentTime=function(){return L},j.getDlSpeed=function(){return X},j.getUpSpeed=function(){return z},j.setPC=function(e){d=e},j.getPC=function(){return d},j.getCommChannel=function(){return f},j.getHeuristic=function(){return Y},j.getAreListenerSet=function(){return a},j.setAreListenerSet=function(e){a=e},j.getUpdatedAt=function(){return F},j.getEE=function(){return G},j.getP2Pstats=function(){return K},j.getBufferLevel=function(){return V},Ae(e)};module.exports=Peer;


},{"../../../conf":2,"../models/status":57,"./Heuristic":55,"backbone":62,"eventemitter3":110,"underscore":265}],57:[function(require,module,exports){
  var EventEmitter=require("eventemitter3"),_=require("underscore"),Backbone=require("backbone"),conf=require("../../../conf"),Status=function(){var e,n,t,o,r,a,u,d=!1,c=[],i=0,f=0,D=0,s=0,l=0,p=0,g=0,w=0,P=0,T=0,C=0,b=0,h=0,m=0,v=[],S=0,M=0,k=0,N=0,y=0,H=0,U=0,A=0,L=0,x=0,I=0,R=0,E=0,W=0,B=0,q=0,j=this,z=new EventEmitter,F=function(){setInterval(Q.bind(j),1e3),_.extend(j,Backbone.Events)},G=function(){var o={avgDlSpeed:f,avgUpSpeed:l,cdnDoubleCheck:x,cdnDownloaded:h,connected:d,dataDownloadedTwice_CC:N,dataDownloadedTwice_CP:k,dataDownloadedTwice_HD:H,dataDownloadedTwice_HP:y,dataDownloadedTwice_M:U,dataDownloadedTwice_PC:M,dataDownloadedTwice_PP:S,dlSpeed:i,maxDlSpeed:D,maxUpSpeed:p,mpd:n,my_ids:c,nbRightHashDLM:E,nbRightHashP2P:I,nbWrongHashDLM:W,nbWrongHashP2P:R,p2pDoubleCheck:L,p2pDownloaded:g,p2pDownloadedNewAnalytics:w,p2pDownloadedHistory:v,p2pDownloadedUncorrected:P,p2pUploaded:T,period:t,rawDataDownloaded:C,rawDataUploaded:b,tobuffer:e,trackerMsgCount:B,trackerSgnCount:q,upSpeed:s};return o},J=function(){var e,n,t,o;i&&(i>D&&(D=i),e=f?(f*r+i)/(r+1):i,n=r?r+1:1,r=n,f=e),s&&(s>p&&(p=s),t=l?(l*a+s)/(a+1):s,o=a?a+1:1,a=o,l=t)},K=function(n,t,o){var r=_.find(e,function(e){return 0,e.asetId==t&&e.periodId==n&&e.representationId==o});return r?r:"no track found"},O=function(e,n){var t=e.my_ids,o=e.updatedTracks;j.setMyIds(t),j.setTobuffer(o,!0),n()},Q=function(){var e,n=v,t=(new Date).getTime();for(n.push({p2pDownloaded:g,timeStamp:t}),e=n.length-1;e>=0;e--)t-n[e].timeStamp>1e3*conf.ABR_DEL_T&&n.splice(e,1)},V=function(){var e,n,t,o,r=v;return r.length?(e=r[0],n=r[r.length-1],t=n.p2pDownloaded-e.p2pDownloaded,o=(n.timeStamp-e.timeStamp)/1e3,o>0&&t>0?t/o:0):0},X=function(){for(var n=0;n<e.length;n++)e[n]=_.pick(e[n],"type","asetId","representationId","currentSegment","currentTime","bufferLevelMax")};j.getMyIds=function(){return c},j.setMyIds=function(e){c!==e&&(c=e)},j.getDataDownloadedTwice=function(){return o},j.getTobuffer=function(){return e},j.setTobuffer=function(n,t,o){if(n!==e){var r;if(e&&e.length&&(r=e[0].bufferLevelMax),e=n,r)for(var a=0;a<e.length;a++)e[a].bufferLevelMax=r;t||z.emit("change:tobuffer",j,e)}else o&&z.emit("change:tobuffer",j,e)},j.getMPD=function(){return n},j.setMPD=function(e){n=e},j.getPeriod=function(){return t},j.setPeriod=function(e){t=e},j.getAttributes=function(){return G()},j.getDlSpeed=function(){return i},j.setDlSpeed=function(e){i=e},j.getAvgDlSpeed=function(){return f},j.getMaxDlSpeed=function(){return D},j.getUpSpeed=function(){return s},j.setUpSpeed=function(e){s=e},j.getAvgUpSpeed=function(){return l},j.getMaxUpSpeed=function(){return p},j.getP2PDownloaded=function(){return g},j.setP2PDownloaded=function(e){"number"!=typeof e||isNaN(e)?0:g=e},j.getp2pDownloadedNewAnalytics=function(){return w},j.setp2pDownloadedNewAnalytics=function(e){"number"!=typeof e||isNaN(e)?0:w=e},j.getP2PDownloadedUncorrected=function(){return P},j.setP2PDownloadedUncorrected=function(e){P=e},j.getP2PUploaded=function(){return T},j.setP2PUploaded=function(e){T=e},j.getRawDataDownloaded=function(){return C},j.setRawDataDownloaded=function(e){C=e},j.getRawDataUploaded=function(){return b},j.setRawDataUploaded=function(e){b=e},j.getCDNDownloaded=function(){return h},j.setCDNDownloaded=function(e){h=e},j.getCdnCancelled=function(){return m},j.setCdnCancelled=function(e){m=e},j.getDataDownloadedTwice_PP=function(){return S},j.setDataDownloadedTwice_PP=function(e){S=e},j.getDataDownloadedTwice_PC=function(){return M},j.setDataDownloadedTwice_PC=function(e){M=e},j.getDataDownloadedTwice_CP=function(){return k},j.setDataDownloadedTwice_CP=function(e){k=e},j.getDataDownloadedTwice_CC=function(){return N},j.setDataDownloadedTwice_CC=function(e){N=e},j.getDataDownloadedTwice_HP=function(){return y},j.setDataDownloadedTwice_HP=function(e){y=e},j.getDataDownloadedTwice_HD=function(){return H},j.setDataDownloadedTwice_HD=function(e){H=e},j.getDataDownloadedTwice_M=function(){return U},j.setDataDownloadedTwice_M=function(e){U=e},j.getCdnDataDiscarded=function(){return A},j.setCdnDataDiscarded=function(e){A=e},j.getP2PDoubleCheck=function(){return L},j.setP2PDoubleCheck=function(e){L=e},j.getCDNDoubleCheck=function(){return x},j.setCDNDoubleCheck=function(e){x=e},j.getNbRightHashP2P=function(){return I},j.setNbRightHashP2P=function(e){I=e},j.getNbWrongHashP2P=function(){return R},j.setNbWrongHashP2P=function(e){R=e},j.getNbRightHashDLM=function(){return E},j.setNbRightHashDLM=function(e){E=e},j.getNbWrongHashDLM=function(){return W},j.setNbWrongHashDLM=function(e){W=e},j.getTrackerMsgCount=function(){return B},j.setTrackerMsgCount=function(e){B=e},j.getTrackerSgnCount=function(){return q},j.setTrackerSgnCount=function(e){q=e},j.getConnected=function(){return d},j.setConnected=function(e){e||X(),e!==d&&(d=e,z.emit("change:connected"),e===!0&&z.emit("tracker_ready"))},j.getEE=function(){return z},j.setAsetIdUpdate=function(e){u=e},j.getAsetIdUpdate=function(){return u},j.computeMaxAndAvgSpeed=function(){return J()},j.computeMaxAndAvgCDNSpeed=function(){return _computeMaxAndAvgCDNSpeed()},j.getTrackByTrackInfos=function(e,n,t){return K(e,n,t)},j.updateStatus=function(e,n){return O(e,n)},j.computeP2PThroughput=function(){return V()},j.getBufferLevelList=function(){var n=e.map(function(e){return{bufferLevel:e.bufferLevel,trackType:e.type}});return n},F()},status=new Status;module.exports=status;


},{"../../../conf":2,"backbone":62,"eventemitter3":110,"underscore":265}],58:[function(require,module,exports){
  "use strict";var DRMManager=function(e){var t=function(e){e.target.webkitGenerateKeyRequest("com.widevine.alpha",e.initData)},n=function(e){var t=new XMLHttpRequest;t.open("POST","http://wv-ref-eme-player.appspot.com/proxy",!0),t.responseType="arraybuffer",t.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);e.target.webkitAddKey("com.widevine.alpha",t,e.initData,e.sessionId)}},t.send(e.message)},a=function(){e.addEventListener("webkitneedkey",t),e.addEventListener("keymessage",n),e.addEventListener("webkitkeymessage",n)},i=function(){a()};i()};module.exports=DRMManager;


},{}],59:[function(require,module,exports){
  "use strict";var hashWorker="./HashWorker.js",status=require("../p2p/models/status"),SegmentHasher=function(e){var n=new Worker((window.webkitURL||window.URL).createObjectURL(new Blob(['(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module \'"+o+"\'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*\r\n *  The MurmurHash3 algorithm was created by Austin Appleby.  This JavaScript port was authored\r\n *  by Peter Zotov (based on Java port by Yonik Seeley) and is placed into the public domain.\r\n *  The author hereby disclaims copyright to this source code.\r\n *\r\n *  This produces exactly the same hash values as the final C++ version of MurmurHash3 and\r\n *  is thus suitable for producing the same hash values across platforms.\r\n *\r\n *  There are two versions of this hash implementation. First interprets the string as a\r\n *  sequence of bytes, ignoring most significant byte of each codepoint. The second one\r\n *  interprets the string as a UTF-16 codepoint sequence, and appends each 16-bit codepoint\r\n *  to the hash independently. The latter mode was not written to be compatible with\r\n *  any other implementation, but it should offer better performance for JavaScript-only\r\n *  applications.\r\n *\r\n *  See http://github.com/whitequark/murmurhash3-js for future updates to this file.\r\n */\r\n\r\nvar MurmurHash3 = {\r\n    mul32: function(m, n) {\r\n        var nlo = n & 0xffff;\r\n        var nhi = n - nlo;\r\n        return ((nhi * m | 0) + (nlo * m | 0)) | 0;\r\n    },\r\n\r\n    hashBytes: function(data, len, seed) {\r\n        var c1 = 0xcc9e2d51,\r\n            c2 = 0x1b873593;\r\n\r\n        var h1 = seed;\r\n        var roundedEnd = len & ~0x3;\r\n\r\n        for (var i = 0; i < roundedEnd; i += 4) {\r\n            var k1 = (data[i] & 0xff) |\r\n                ((data[i + 1] & 0xff) << 8) |\r\n                ((data[i + 2] & 0xff) << 16) |\r\n                ((data[i + 3] & 0xff) << 24);\r\n\r\n            k1 = this.mul32(k1, c1);\r\n            k1 = ((k1 & 0x1ffff) << 15) | (k1 >>> 17); // ROTL32(k1,15);\r\n            k1 = this.mul32(k1, c2);\r\n\r\n            h1 ^= k1;\r\n            h1 = ((h1 & 0x7ffff) << 13) | (h1 >>> 19); // ROTL32(h1,13);\r\n            h1 = (h1 * 5 + 0xe6546b64) | 0;\r\n        }\r\n\r\n        k1 = 0;\r\n\r\n        switch (len % 4) {\r\n            case 3:\r\n                k1 = (data[roundedEnd + 2] & 0xff) << 16;\r\n                // fallthrough\r\n            case 2:\r\n                k1 |= (data[roundedEnd + 1] & 0xff) << 8;\r\n                // fallthrough\r\n            case 1:\r\n                k1 |= (data[roundedEnd] & 0xff);\r\n                k1 = this.mul32(k1, c1);\r\n                k1 = ((k1 & 0x1ffff) << 15) | (k1 >>> 17); // ROTL32(k1,15);\r\n                k1 = this.mul32(k1, c2);\r\n                h1 ^= k1;\r\n        }\r\n\r\n        // finalization\r\n        h1 ^= len;\r\n\r\n        // fmix(h1);\r\n        h1 ^= h1 >>> 16;\r\n        h1 = this.mul32(h1, 0x85ebca6b);\r\n        h1 ^= h1 >>> 13;\r\n        h1 = this.mul32(h1, 0xc2b2ae35);\r\n        h1 ^= h1 >>> 16;\r\n\r\n        return h1;\r\n    }\r\n};\r\n\r\n\r\n//jshint -W117\r\nself.onmessage = function(e) {\r\n    var segmentData = new Uint8Array(e.data.segmentData);\r\n    var hash = MurmurHash3.hashBytes(segmentData, segmentData.length, 0x0).toString();\r\n    if (e.data.create) {\r\n        self.postMessage({\r\n            segmentData: e.data.segmentData,\r\n            jobIndex: e.data.jobIndex,\r\n            hash: hash,\r\n            create: true\r\n        }, [e.data.segmentData]);\r\n    } else if (hash === e.data.hash) {\r\n        self.postMessage({\r\n            segmentData: e.data.segmentData,\r\n            hashMatch: true,\r\n            jobIndex: e.data.jobIndex,\r\n            hash: hash\r\n        }, [e.data.segmentData]);\r\n    } else {\r\n        self.postMessage({\r\n            segmentData: e.data.segmentData,\r\n            hashMatch: false,\r\n            jobIndex: e.data.jobIndex,\r\n            hash: hash\r\n        }, [e.data.segmentData]);\r\n    }\r\n};\n},{}]},{},[1])'],{type:"text/javascript"}))),t=[],r=function(e,r,a){var s=t.push({result:e,segment:r,cb:a})-1;n.postMessage({segmentData:e.response,jobIndex:s,create:!0},[e.response])},a=function(e,r,a,s){var o=t.push({result:e,segment:r,cbSuccess:a,cbError:s,dlm:!0})-1;n.postMessage({segmentData:e.response,hash:r.segment.hash,jobIndex:o},[e.response])},s=function(e,r,a){var s=t.push({chunkManager:e,segment:r,dlm:!1})-1;n.postMessage({segmentData:a,hash:r.segment.hash,jobIndex:s},[a])},o=function(){n.onmessage=function(n){var r=t[n.data.jobIndex];delete t[n.data.jobIndex],n.data.create?(r.result.response=n.data.segmentData,e.p2pInterface.p2pMapController.setSegmentHash(r.segment,n.data.hash),r.cb(r.result,r.segment)):r.dlm?n.data.hashMatch?(0,status.setNbRightHashDLM(status.getNbRightHashDLM()+1),r.result.response=n.data.segmentData,r.cbSuccess(r.result,r.segment)):(0,status.setNbWrongHashDLM(status.getNbWrongHashDLM()+1),r.cbError(r.result,r.segment)):n.data.hashMatch?(0,status.setNbRightHashP2P(status.getNbRightHashP2P()+1),r.chunkManager.segment=new Uint8Array(n.data.segmentData),e.p2pDownloader.hashVerified(r.chunkManager,r.segment,n.data.segmentData)):(0,status.setNbWrongHashP2P(status.getNbWrongHashP2P()+1),e.p2pDownloader.wrongHash(r.segment))}};this.createHash=r,this.checkHashDLM=a,this.checkHashP2P=s,o()};module.exports=SegmentHasher;


},{"../p2p/models/status":57}],60:[function(require,module,exports){
  exports.clone=function E(_){function e(E,_,e){var t,n,L={};for(t in _)n=_[t],t in E&&(E[t]===n||t in L&&L[t]===n)||(E[t]=e?e(n):n);return E}if(!_||"object"!=typeof _||"[object Function]"===Object.prototype.toString.call(_))return _;if(_.nodeType&&"cloneNode"in _)return _.cloneNode(!0);if(_ instanceof Date)return new Date(_.getTime());if(_ instanceof RegExp)return new RegExp(_);var t,n,L;if(_ instanceof Array)for(t=[],n=0,L=_.length;L>n;++n)n in _&&t.push(E(_[n]));else t=_.constructor?new _.constructor:{};return e(t,_,E)},exports.sortDescending=function(E,_){return _.bandwidth-E.bandwidth},exports.overloadConf=function(E,_){if(!_||void 0===_.ID_CLIENT)throw new Error("There must be a client ID in the option object");E.ID_CLIENT=_.ID_CLIENT,void 0!==_.RANGE_REQUEST_ALLOWED&&(E.RANGE_REQUEST_ALLOWED=_.RANGE_REQUEST_ALLOWED),_.FORCE_BANDWIDTH&&(E.FORCE_BANDWIDTH=_.FORCE_BANDWIDTH),_.DEFAULT_AUTOSWITCH&&(E.DEFAULT_AUTOSWITCH=_.DEFAULT_AUTOSWITCH),_.BUFFER&&(_.BUFFER.BUFFER_MARGIN&&(E.BUFFER.BUFFER_MARGIN=_.BUFFER.BUFFER_MARGIN),_.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER&&(E.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER=_.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER),void 0!==_.BUFFER.FORCE_SWITCH_CLEAR_ALL&&(E.BUFFER.FORCE_SWITCH_CLEAR_ALL=_.BUFFER.FORCE_SWITCH_CLEAR_ALL),void 0!==_.BUFFER.ALWAYS_FORCE_SWITCH&&(E.BUFFER.ALWAYS_FORCE_SWITCH=_.BUFFER.ALWAYS_FORCE_SWITCH)),_.LIVE&&(void 0!==_.LIVE.DISTANCE_FROM_LIVE_EDGE&&(E.LIVE.DISTANCE_FROM_LIVE_EDGE=_.LIVE.DISTANCE_FROM_LIVE_EDGE),void 0!==_.LIVE.MIN_BUFFER_LEVEL&&(E.LIVE.MIN_BUFFER_LEVEL=_.LIVE.MIN_BUFFER_LEVEL),void 0!==_.LIVE.ALLOW_LIVE_DELAY&&(E.LIVE.ALLOW_LIVE_DELAY=_.LIVE.ALLOW_LIVE_DELAY)),"undefined"!=typeof _.ADD_QUERY_PARAM&&(E.ADD_QUERY_PARAM=_.ADD_QUERY_PARAM),void 0!==_.PLAYLIST_HLS_KEEP_LAST_LINES&&(E.PLAYLIST_HLS_KEEP_LAST_LINES=_.PLAYLIST_HLS_KEEP_LAST_LINES),void 0!==_.SS_IMPLICIT_AAC_HE&&(E.SS_IMPLICIT_AAC_HE=_.SS_IMPLICIT_AAC_HE),void 0!==_.DISPLAY_ERROR&&(E.DISPLAY_ERROR=_.DISPLAY_ERROR),void 0!==_.REPRESENTATION_NUMBER&&(E.REPRESENTATION_NUMBER=_.REPRESENTATION_NUMBER);var e={ALLOW_P2P:_.ALLOW_P2P,TRACKER_URL:_.TRACKER_URL,P2P_CACHE_MAX_SIZE:_.P2P_CACHE_MAX_SIZE,DISPLAY:_.DISPLAY,ID_CLIENT:_.ID_CLIENT,DEBUG:_.DEBUG};return e},exports.make_range=function(E,_){return _?"bytes="+E+"-"+_:"bytes="+E+"-"},exports.absURL=function(E,_){if(_.match(/^[a-z]*:\/\//))return _;var e;"/"==_[0]&&(_=_.slice(1,_.length));var t=E.lastIndexOf("/");return t+1<=E.length&&(e=E.slice(0,t+1)),e+_},exports.relToAbs=function(E){var _=document.createElement("a");return _.href=E,_.protocol+"//"+_.host+_.pathname+_.search+_.hash},exports.parseUrl=function(E){var _=document.createElement("a");return _.href=E,_},exports.updateQueryStringParameter=function(E,_,e){var t=new RegExp("([?&])"+_+"=.*?(&|$)","i"),n=-1!==E.indexOf("?")?"&":"?";return E.match(t)?E.replace(t,"$1"+_+"="+e+"$2"):E+n+_+"="+e};var isInt=function(E){return"number"==typeof E&&E%1===0};exports.isInt=isInt,exports.isPosInt=function(E){return isInt(E)&&E>=0};


},{}],61:[function(require,module,exports){
  "use strict";module.exports={merge:function(r,e){for(var o in e)e.hasOwnProperty(o)&&(void 0===r[o]?r[o]=e[o]:0);return r},overrideDefaults:function(r,e){for(var o in r)r.hasOwnProperty(o)&&void 0!==e[o]&&(r[o]=e[o]);return r},mapAdd:function(r,e){var o={};for(var n in r)r.hasOwnProperty(n)&&(o[n]=r[n]+e[n]);return o}};


},{}],62:[function(require,module,exports){
  !function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var s=t.Backbone,r=[],a=(r.push,r.slice);r.splice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!u(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,h,c,l,d;if(!this._events||!u(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),h=0,c=o.length;c>h;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,d=a.length;d>l;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},h=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),a=0,o=r.length;o>a;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){o[e]=function(e,n,s){var r=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i.uniqueId("l"));return r[a]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,h,u,c,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,h=n.silent,o=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,c=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(c[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0,f=o.length;f>d;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(u)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?i.clone(this.changed):!1;var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return e.set(e.parse(i,t),t)?(n&&n(e,i,t),void e.trigger("sync",e,i,t)):!1},U(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var h=this,u=n.success;return n.success=function(t){h.attributes=o;var e=h.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!h.set(e,n)?!1:(u&&u(h,t,n),void h.trigger("sync",h,t,n))},U(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;U(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,v))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;r>s;s++)o=t[s]=this.get(t[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,a,o,h,u,c,l=e.at,f=this.model,p=this.comparator&&null==l&&e.sort!==!1,v=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!p&&b&&x?[]:!1;for(s=0,r=t.length;r>s;s++){if(h=t[s]||{},a=h instanceof d?o=h:h[f.prototype.idAttribute||"id"],u=this.get(a))x&&(_[u.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=u.parse(h,e)),u.set(h,e),p&&!c&&u.hasChanged(v)&&(c=!0)),t[s]=u;else if(b){if(o=t[s]=this._prepareModel(h,e),!o)continue;m.push(o),this._addReference(o,e)}o=u||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,r=this.length;r>s;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(m.length||E&&E.length)if(p&&(c=!0),this.length+=m.length,null!=l)for(s=0,r=m.length;r>s;s++)this.models.splice(l+s,0,m[s]);else{E&&(this.models.length=0);var k=E||m;for(s=0,r=k.length;r>s;s++)this.models.push(k[s])}if(c&&this.sort({silent:!0}),!e.silent){for(s=0,r=m.length;r>s;s++)(o=m[s]).trigger("add",o,this,e);(c||E&&E.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;s>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){p.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(b),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t["class"]=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=E[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||j()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",r),o?o.apply(this,arguments):void 0}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,h,s),h};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,S=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(H,"\\$&").replace(T,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,R=/msie [\w.]+/,O=/\/$/,P=/#.*$/;A.started=!1,i.extend(A.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=R.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);if(this.root=("/"+this.root+"/").replace(N,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!A.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var C=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=p.extend=k.extend=_.extend=A.extend=C;var j=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e});


},{"underscore":265}],63:[function(require,module,exports){

},{}],64:[function(require,module,exports){
  function replacer(t,e){return util.isUndefined(e)?""+e:!util.isNumber(e)||!isNaN(e)&&isFinite(e)?util.isFunction(e)||util.isRegExp(e)?e.toString():e:e.toString()}function truncate(t,e){return util.isString(t)?t.length<e?t:t.slice(0,e):t}function getMessage(t){return truncate(JSON.stringify(t.actual,replacer),128)+" "+t.operator+" "+truncate(JSON.stringify(t.expected,replacer),128)}function fail(t,e,r,i,s){throw new assert.AssertionError({message:r,actual:t,expected:e,operator:i,stackStartFunction:s})}function ok(t,e){t||fail(t,!0,e,"==",assert.ok)}function _deepEqual(t,e){if(t===e)return!0;if(util.isBuffer(t)&&util.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return util.isDate(t)&&util.isDate(e)?t.getTime()===e.getTime():util.isRegExp(t)&&util.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:util.isObject(t)||util.isObject(e)?objEquiv(t,e):t==e}function isArguments(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function objEquiv(t,e){if(util.isNullOrUndefined(t)||util.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(isArguments(t))return isArguments(e)?(t=pSlice.call(t),e=pSlice.call(e),_deepEqual(t,e)):!1;try{var r,i,s=objectKeys(t),n=objectKeys(e)}catch(a){return!1}if(s.length!=n.length)return!1;for(s.sort(),n.sort(),i=s.length-1;i>=0;i--)if(s[i]!=n[i])return!1;for(i=s.length-1;i>=0;i--)if(r=s[i],!_deepEqual(t[r],e[r]))return!1;return!0}function expectedException(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function _throws(t,e,r,i){var s;util.isString(r)&&(i=r,r=null);try{e()}catch(n){s=n}if(i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!s&&fail(s,r,"Missing expected exception"+i),!t&&expectedException(s,r)&&fail(s,r,"Got unwanted exception"+i),t&&s&&r&&!expectedException(s,r)||!t&&s)throw s}var util=require("util/"),pSlice=Array.prototype.slice,hasOwn=Object.prototype.hasOwnProperty,assert=module.exports=ok;assert.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var e=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var i=r.stack,s=e.name,n=i.indexOf("\n"+s);if(n>=0){var a=i.indexOf("\n",n+1);i=i.substring(a+1)}this.stack=i}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(t,e,r){t!=e&&fail(t,e,r,"==",assert.equal)},assert.notEqual=function(t,e,r){t==e&&fail(t,e,r,"!=",assert.notEqual)},assert.deepEqual=function(t,e,r){_deepEqual(t,e)||fail(t,e,r,"deepEqual",assert.deepEqual)},assert.notDeepEqual=function(t,e,r){_deepEqual(t,e)&&fail(t,e,r,"notDeepEqual",assert.notDeepEqual)},assert.strictEqual=function(t,e,r){t!==e&&fail(t,e,r,"===",assert.strictEqual)},assert.notStrictEqual=function(t,e,r){t===e&&fail(t,e,r,"!==",assert.notStrictEqual)},assert["throws"]=function(t,e,r){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(t,e){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(t){if(t)throw t};var objectKeys=Object.keys||function(t){var e=[];for(var r in t)hasOwn.call(t,r)&&e.push(r);return e};


},{"util/":109}],65:[function(require,module,exports){
  "use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var fnTyped={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)return void r.set(t.subarray(e,e+n),a);for(var o=0;n>o;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;e>t;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;e>t;t++)o=r[t],s.set(o,a),a+=o.length;return s}},fnUntyped={arraySet:function(r,t,e,n,a){for(var o=0;n>o;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK);


},{}],66:[function(require,module,exports){
  "use strict";function adler32(e,r,o,t){for(var d=65535&e|0,l=e>>>16&65535|0,u=0;0!==o;){u=o>2e3?2e3:o,o-=u;do d=d+r[t++]|0,l=l+d|0;while(--u);d%=65521,l%=65521}return d|l<<16|0}module.exports=adler32;


},{}],67:[function(require,module,exports){
  module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};


},{}],68:[function(require,module,exports){
  "use strict";function makeTable(){for(var r,a=[],c=0;256>c;c++){r=c;for(var e=0;8>e;e++)r=1&r?3988292384^r>>>1:r>>>1;a[c]=r}return a}function crc32(r,a,c,e){var o=crcTable,t=e+c;r=-1^r;for(var n=e;t>n;n++)r=r>>>8^o[255&(r^a[n])];return-1^r}var crcTable=makeTable();module.exports=crc32;


},{}],69:[function(require,module,exports){
  "use strict";function err(t,e){return t.msg=msg[e],e}function rank(t){return(t<<1)-(t>4?9:0)}function zero(t){for(var e=t.length;--e>=0;)t[e]=0}function flush_pending(t){var e=t.state,_=e.pending;_>t.avail_out&&(_=t.avail_out),0!==_&&(utils.arraySet(t.output,e.pending_buf,e.pending_out,_,t.next_out),t.next_out+=_,e.pending_out+=_,t.total_out+=_,t.avail_out-=_,e.pending-=_,0===e.pending&&(e.pending_out=0))}function flush_block_only(t,e){trees._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,flush_pending(t.strm)}function put_byte(t,e){t.pending_buf[t.pending++]=e}function putShortMSB(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function read_buf(t,e,_,a){var s=t.avail_in;return s>a&&(s=a),0===s?0:(t.avail_in-=s,utils.arraySet(e,t.input,t.next_in,s,_),1===t.state.wrap?t.adler=adler32(t.adler,e,s,_):2===t.state.wrap&&(t.adler=crc32(t.adler,e,s,_)),t.next_in+=s,t.total_in+=s,s)}function longest_match(t,e){var _,a,s=t.max_chain_length,n=t.strstart,i=t.prev_length,r=t.nice_match,l=t.strstart>t.w_size-MIN_LOOKAHEAD?t.strstart-(t.w_size-MIN_LOOKAHEAD):0,h=t.window,o=t.w_mask,d=t.prev,u=t.strstart+MAX_MATCH,f=h[n+i-1],E=h[n+i];t.prev_length>=t.good_match&&(s>>=2),r>t.lookahead&&(r=t.lookahead);do if(_=e,h[_+i]===E&&h[_+i-1]===f&&h[_]===h[n]&&h[++_]===h[n+1]){n+=2,_++;do;while(h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&u>n);if(a=MAX_MATCH-(u-n),n=u-MAX_MATCH,a>i){if(t.match_start=e,i=a,a>=r)break;f=h[n+i-1],E=h[n+i]}}while((e=d[e&o])>l&&0!==--s);return i<=t.lookahead?i:t.lookahead}function fill_window(t){var e,_,a,s,n,i=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=i+(i-MIN_LOOKAHEAD)){utils.arraySet(t.window,t.window,i,i,0),t.match_start-=i,t.strstart-=i,t.block_start-=i,_=t.hash_size,e=_;do a=t.head[--e],t.head[e]=a>=i?a-i:0;while(--_);_=i,e=_;do a=t.prev[--e],t.prev[e]=a>=i?a-i:0;while(--_);s+=i}if(0===t.strm.avail_in)break;if(_=read_buf(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=_,t.lookahead+t.insert>=MIN_MATCH)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+MIN_MATCH-1])&t.hash_mask,t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<MIN_MATCH)););}while(t.lookahead<MIN_LOOKAHEAD&&0!==t.strm.avail_in)}function deflate_stored(t,e){var _=65535;for(_>t.pending_buf_size-5&&(_=t.pending_buf_size-5);;){if(t.lookahead<=1){if(fill_window(t),0===t.lookahead&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+_;if((0===t.strstart||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE;if(t.strstart-t.block_start>=t.w_size-MIN_LOOKAHEAD&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.strstart>t.block_start&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_NEED_MORE}function deflate_fast(t,e){for(var _,a;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(_=0,t.lookahead>=MIN_MATCH&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==_&&t.strstart-_<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,_)),t.match_length>=MIN_MATCH)if(a=trees._tr_tally(t,t.strstart-t.match_start,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=MIN_MATCH){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else a=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(t,e){for(var _,a,s;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(_=0,t.lookahead>=MIN_MATCH&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=MIN_MATCH-1,0!==_&&t.prev_length<t.max_lazy_match&&t.strstart-_<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,_),t.match_length<=5&&(t.strategy===Z_FILTERED||t.match_length===MIN_MATCH&&t.strstart-t.match_start>4096)&&(t.match_length=MIN_MATCH-1)),t.prev_length>=MIN_MATCH&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-MIN_MATCH,a=trees._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-MIN_MATCH),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=MIN_MATCH-1,t.strstart++,a&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}else if(t.match_available){if(a=trees._tr_tally(t,0,t.window[t.strstart-1]),a&&flush_block_only(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return BS_NEED_MORE}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=trees._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(t,e){for(var _,a,s,n,i=t.window;;){if(t.lookahead<=MAX_MATCH){if(fill_window(t),t.lookahead<=MAX_MATCH&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=MIN_MATCH&&t.strstart>0&&(s=t.strstart-1,a=i[s],a===i[++s]&&a===i[++s]&&a===i[++s])){n=t.strstart+MAX_MATCH;do;while(a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&n>s);t.match_length=MAX_MATCH-(n-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=MIN_MATCH?(_=trees._tr_tally(t,1,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(_=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),_&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(t,e){for(var _;;){if(0===t.lookahead&&(fill_window(t),0===t.lookahead)){if(e===Z_NO_FLUSH)return BS_NEED_MORE;break}if(t.match_length=0,_=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,_&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function lm_init(t){t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=configuration_table[t.level].max_lazy,t.good_match=configuration_table[t.level].good_length,t.nice_match=configuration_table[t.level].nice_length,t.max_chain_length=configuration_table[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,t.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(2*HEAP_SIZE),this.dyn_dtree=new utils.Buf16(2*(2*D_CODES+1)),this.bl_tree=new utils.Buf16(2*(2*BL_CODES+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(MAX_BITS+1),this.heap=new utils.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Z_UNKNOWN,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?INIT_STATE:BUSY_STATE,t.adler=2===e.wrap?0:1,e.last_flush=Z_NO_FLUSH,trees._tr_init(e),Z_OK):err(t,Z_STREAM_ERROR)}function deflateReset(t){var e=deflateResetKeep(t);return e===Z_OK&&lm_init(t.state),e}function deflateSetHeader(t,e){return t&&t.state?2!==t.state.wrap?Z_STREAM_ERROR:(t.state.gzhead=e,Z_OK):Z_STREAM_ERROR}function deflateInit2(t,e,_,a,s,n){if(!t)return Z_STREAM_ERROR;var i=1;if(e===Z_DEFAULT_COMPRESSION&&(e=6),0>a?(i=0,a=-a):a>15&&(i=2,a-=16),1>s||s>MAX_MEM_LEVEL||_!==Z_DEFLATED||8>a||a>15||0>e||e>9||0>n||n>Z_FIXED)return err(t,Z_STREAM_ERROR);8===a&&(a=9);var r=new DeflateState;return t.state=r,r.strm=t,r.wrap=i,r.gzhead=null,r.w_bits=a,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=s+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+MIN_MATCH-1)/MIN_MATCH),r.window=new utils.Buf8(2*r.w_size),r.head=new utils.Buf16(r.hash_size),r.prev=new utils.Buf16(r.w_size),r.lit_bufsize=1<<s+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new utils.Buf8(r.pending_buf_size),r.d_buf=r.lit_bufsize>>1,r.l_buf=3*r.lit_bufsize,r.level=e,r.strategy=n,r.method=_,deflateReset(t)}function deflateInit(t,e){return deflateInit2(t,e,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(t,e){var _,a,s,n;if(!t||!t.state||e>Z_BLOCK||0>e)return t?err(t,Z_STREAM_ERROR):Z_STREAM_ERROR;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===FINISH_STATE&&e!==Z_FINISH)return err(t,0===t.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);if(a.strm=t,_=a.last_flush,a.last_flush=e,a.status===INIT_STATE)if(2===a.wrap)t.adler=0,put_byte(a,31),put_byte(a,139),put_byte(a,8),a.gzhead?(put_byte(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),put_byte(a,255&a.gzhead.time),put_byte(a,a.gzhead.time>>8&255),put_byte(a,a.gzhead.time>>16&255),put_byte(a,a.gzhead.time>>24&255),put_byte(a,9===a.level?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(put_byte(a,255&a.gzhead.extra.length),put_byte(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=crc32(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=EXTRA_STATE):(put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,9===a.level?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,OS_CODE),a.status=BUSY_STATE);else{var i=Z_DEFLATED+(a.w_bits-8<<4)<<8,r=-1;r=a.strategy>=Z_HUFFMAN_ONLY||a.level<2?0:a.level<6?1:6===a.level?2:3,i|=r<<6,0!==a.strstart&&(i|=PRESET_DICT),i+=31-i%31,a.status=BUSY_STATE,putShortMSB(a,i),0!==a.strstart&&(putShortMSB(a,t.adler>>>16),putShortMSB(a,65535&t.adler)),t.adler=1}if(a.status===EXTRA_STATE)if(a.gzhead.extra){for(s=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending!==a.pending_buf_size));)put_byte(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=NAME_STATE)}else a.status=NAME_STATE;if(a.status===NAME_STATE)if(a.gzhead.name){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,put_byte(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),0===n&&(a.gzindex=0,a.status=COMMENT_STATE)}else a.status=COMMENT_STATE;if(a.status===COMMENT_STATE)if(a.gzhead.comment){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,put_byte(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),0===n&&(a.status=HCRC_STATE)}else a.status=HCRC_STATE;if(a.status===HCRC_STATE&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&flush_pending(t),a.pending+2<=a.pending_buf_size&&(put_byte(a,255&t.adler),put_byte(a,t.adler>>8&255),t.adler=0,a.status=BUSY_STATE)):a.status=BUSY_STATE),0!==a.pending){if(flush_pending(t),0===t.avail_out)return a.last_flush=-1,Z_OK}else if(0===t.avail_in&&rank(e)<=rank(_)&&e!==Z_FINISH)return err(t,Z_BUF_ERROR);if(a.status===FINISH_STATE&&0!==t.avail_in)return err(t,Z_BUF_ERROR);if(0!==t.avail_in||0!==a.lookahead||e!==Z_NO_FLUSH&&a.status!==FINISH_STATE){var l=a.strategy===Z_HUFFMAN_ONLY?deflate_huff(a,e):a.strategy===Z_RLE?deflate_rle(a,e):configuration_table[a.level].func(a,e);if((l===BS_FINISH_STARTED||l===BS_FINISH_DONE)&&(a.status=FINISH_STATE),l===BS_NEED_MORE||l===BS_FINISH_STARTED)return 0===t.avail_out&&(a.last_flush=-1),Z_OK;if(l===BS_BLOCK_DONE&&(e===Z_PARTIAL_FLUSH?trees._tr_align(a):e!==Z_BLOCK&&(trees._tr_stored_block(a,0,0,!1),e===Z_FULL_FLUSH&&(zero(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),flush_pending(t),0===t.avail_out))return a.last_flush=-1,Z_OK}return e!==Z_FINISH?Z_OK:a.wrap<=0?Z_STREAM_END:(2===a.wrap?(put_byte(a,255&t.adler),put_byte(a,t.adler>>8&255),put_byte(a,t.adler>>16&255),put_byte(a,t.adler>>24&255),put_byte(a,255&t.total_in),put_byte(a,t.total_in>>8&255),put_byte(a,t.total_in>>16&255),put_byte(a,t.total_in>>24&255)):(putShortMSB(a,t.adler>>>16),putShortMSB(a,65535&t.adler)),flush_pending(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?Z_OK:Z_STREAM_END)}function deflateEnd(t){var e;return t&&t.state?(e=t.state.status,e!==INIT_STATE&&e!==EXTRA_STATE&&e!==NAME_STATE&&e!==COMMENT_STATE&&e!==HCRC_STATE&&e!==BUSY_STATE&&e!==FINISH_STATE?err(t,Z_STREAM_ERROR):(t.state=null,e===BUSY_STATE?err(t,Z_DATA_ERROR):Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),trees=require("./trees"),adler32=require("./adler32"),crc32=require("./crc32"),msg=require("./messages"),Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_OK=0,Z_STREAM_END=1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_UNKNOWN=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,Config=function(t,e,_,a,s){this.good_length=t,this.max_lazy=e,this.nice_length=_,this.max_chain=a,this.func=s},configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],exports.deflateInit=deflateInit,exports.deflateInit2=deflateInit2,exports.deflateReset=deflateReset,exports.deflateResetKeep=deflateResetKeep,exports.deflateSetHeader=deflateSetHeader,exports.deflate=deflate,exports.deflateEnd=deflateEnd,exports.deflateInfo="pako deflate (from Nodeca project)";


},{"../utils/common":65,"./adler32":66,"./crc32":68,"./messages":73,"./trees":74}],70:[function(require,module,exports){
  "use strict";var BAD=30,TYPE=12;module.exports=function(i,e){var o,a,t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,A,B,D,p,E;o=i.state,a=i.next_in,p=i.input,t=a+(i.avail_in-5),d=i.next_out,E=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),s=o.dmax,f=o.wsize,r=o.whave,b=o.wnext,c=o.window,u=o.hold,v=o.bits,m=o.lencode,w=o.distcode,h=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;i:do{15>v&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=m[u&h];e:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,0===x)E[d++]=65535&_;else{if(!(16&x)){if(0===(64&x)){_=m[(65535&_)+(u&(1<<x)-1)];continue e}if(32&x){o.mode=TYPE;break i}i.msg="invalid literal/length code",o.mode=BAD;break i}g=65535&_,x&=15,x&&(x>v&&(u+=p[a++]<<v,v+=8),g+=u&(1<<x)-1,u>>>=x,v-=x),15>v&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=w[u&k];o:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,!(16&x)){if(0===(64&x)){_=w[(65535&_)+(u&(1<<x)-1)];continue o}i.msg="invalid distance code",o.mode=BAD;break i}if(A=65535&_,x&=15,x>v&&(u+=p[a++]<<v,v+=8,x>v&&(u+=p[a++]<<v,v+=8)),A+=u&(1<<x)-1,A>s){i.msg="invalid distance too far back",o.mode=BAD;break i}if(u>>>=x,v-=x,x=d-n,A>x){if(x=A-x,x>r&&o.sane){i.msg="invalid distance too far back",o.mode=BAD;break i}if(B=0,D=c,0===b){if(B+=f-x,g>x){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}else if(x>b){if(B+=f+b-x,x-=b,g>x){g-=x;do E[d++]=c[B++];while(--x);if(B=0,g>b){x=b,g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}}else if(B+=b-x,g>x){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}for(;g>2;)E[d++]=D[B++],E[d++]=D[B++],E[d++]=D[B++],g-=3;g&&(E[d++]=D[B++],g>1&&(E[d++]=D[B++]))}else{B=d-A;do E[d++]=E[B++],E[d++]=E[B++],E[d++]=E[B++],g-=3;while(g>2);g&&(E[d++]=E[B++],g>1&&(E[d++]=E[B++]))}break}}break}}while(t>a&&l>d);g=v>>3,a-=g,v-=g<<3,u&=(1<<v)-1,i.next_in=a,i.next_out=d,i.avail_in=t>a?5+(t-a):5-(a-t),i.avail_out=l>d?257+(l-d):257-(d-l),o.hold=u,o.bits=v};


},{}],71:[function(require,module,exports){
  "use strict";function ZSWAP32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var a,i;return e&&e.state?(i=e.state,0>t?(a=0,t=-t):(a=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?Z_STREAM_ERROR:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=a,i.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var a,i;return e?(i=new InflateState,e.state=i,i.window=null,a=inflateReset2(e,t),a!==Z_OK&&(e.state=null),a):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}function fixedtables(e){if(virgin){var t;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,i){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new utils.Buf8(s.wsize)),i>=s.wsize?(utils.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),utils.arraySet(s.window,t,a-i,n,s.wnext),i-=n,i?(utils.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function inflate(e,t){var a,i,n,s,l,r,o,d,f,c,h,E,b,k,_,m,u,w,R,T,g,D,S,x,A=0,v=new utils.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;a=e.state,a.mode===TYPE&&(a.mode=TYPEDO),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,c=r,h=o,D=Z_OK;e:for(;;)switch(a.mode){case HEAD:if(0===a.wrap){a.mode=TYPEDO;break}for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(2&a.wrap&&35615===d){a.check=0,v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0),d=0,f=0,a.mode=FLAGS;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=BAD;break}if((15&d)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(d>>>=4,f-=4,g=(15&d)+8,0===a.wbits)a.wbits=g;else if(g>a.wbits){e.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<g,e.adler=a.check=1,a.mode=512&d?DICTID:TYPE,d=0,f=0;break;case FLAGS:for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.flags=d,(255&a.flags)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=TIME;case TIME:for(;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.time=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,v[2]=d>>>16&255,v[3]=d>>>24&255,a.check=crc32(a.check,v,4,0)),d=0,f=0,a.mode=OS;case OS:for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=EXLEN;case EXLEN:if(1024&a.flags){for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(1024&a.flags&&(E=a.length,E>r&&(E=r),E&&(a.head&&(g=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),utils.arraySet(a.head.extra,i,s,E,g)),512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,a.length-=E),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(2048&a.flags){if(0===r)break e;E=0;do g=i[s+E++],a.head&&g&&a.length<65536&&(a.head.name+=String.fromCharCode(g));while(g&&r>E);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,g)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT;case COMMENT:if(4096&a.flags){if(0===r)break e;E=0;do g=i[s+E++],a.head&&g&&a.length<65536&&(a.head.comment+=String.fromCharCode(g));while(g&&r>E);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,g)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(512&a.flags){for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=BAD;break}d=0,f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}e.adler=a.check=ZSWAP32(d),d=0,f=0,a.mode=DICT;case DICT:if(0===a.havedict)return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,Z_NEED_DICT;e.adler=a.check=1,a.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(a.last){d>>>=7&f,f-=7&f,a.mode=CHECK;break}for(;3>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}switch(a.last=1&d,d>>>=1,f-=1,3&d){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,t===Z_TREES){d>>>=2,f-=2;break e}break;case 2:a.mode=TABLE;break;case 3:e.msg="invalid block type",a.mode=BAD}d>>>=2,f-=2;break;case STORED:for(d>>>=7&f,f-=7&f;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=65535&d,d=0,f=0,a.mode=COPY_,t===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(E=a.length){if(E>r&&(E=r),E>o&&(E=o),0===E)break e;utils.arraySet(n,i,s,E,l),r-=E,s+=E,o-=E,l+=E,a.length-=E;break}a.mode=TYPE;break;case TABLE:for(;14>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.nlen=(31&d)+257,d>>>=5,f-=5,a.ndist=(31&d)+1,d>>>=5,f-=5,a.ncode=(15&d)+4,d>>>=4,f-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;3>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.lens[O[a.have++]]=7&d,d>>>=3,f-=3}for(;a.have<19;)a.lens[O[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},D=inflate_table(CODES,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,D){e.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;A=a.lencode[d&(1<<a.lenbits)-1],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(16>u)d>>>=_,f-=_,a.lens[a.have++]=u;else{if(16===u){for(x=_+2;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d>>>=_,f-=_,0===a.have){e.msg="invalid bit length repeat",a.mode=BAD;break}g=a.lens[a.have-1],E=3+(3&d),d>>>=2,f-=2}else if(17===u){for(x=_+3;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=_,f-=_,g=0,E=3+(7&d),d>>>=3,f-=3}else{for(x=_+7;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=_,f-=_,g=0,E=11+(127&d),d>>>=7,f-=7}if(a.have+E>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=BAD;break}for(;E--;)a.lens[a.have++]=g}}if(a.mode===BAD)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,S={bits:a.lenbits},D=inflate_table(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,D){e.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},D=inflate_table(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,D){e.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,t===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(r>=6&&o>=258){e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,inflate_fast(e,h),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;A=a.lencode[d&(1<<a.lenbits)-1],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(m&&0===(240&m)){for(w=_,R=m,T=u;A=a.lencode[T+((d&(1<<w+R)-1)>>w)],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=w+_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=w,f-=w,a.back+=w}if(d>>>=_,f-=_,a.back+=_,a.length=u,0===m){a.mode=LIT;break}if(32&m){a.back=-1,a.mode=TYPE;break}if(64&m){e.msg="invalid literal/length code",a.mode=BAD;break}a.extra=15&m,a.mode=LENEXT;case LENEXT:if(a.extra){for(x=a.extra;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;A=a.distcode[d&(1<<a.distbits)-1],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(0===(240&m)){for(w=_,R=m,T=u;A=a.distcode[T+((d&(1<<w+R)-1)>>w)],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=w+_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=w,f-=w,a.back+=w}if(d>>>=_,f-=_,a.back+=_,64&m){e.msg="invalid distance code",a.mode=BAD;break}a.offset=u,a.extra=15&m,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(x=a.extra;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(0===o)break e;if(E=h-o,a.offset>E){if(E=a.offset-E,E>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break}E>a.wnext?(E-=a.wnext,b=a.wsize-E):b=a.wnext-E,E>a.length&&(E=a.length),k=a.window}else k=n,b=l-a.offset,E=a.length;E>o&&(E=o),o-=E,a.length-=E;do n[l++]=k[b++];while(--E);0===a.length&&(a.mode=LEN);break;case LIT:if(0===o)break e;n[l++]=a.length,o--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;32>f;){if(0===r)break e;r--,d|=i[s++]<<f,f+=8}if(h-=o,e.total_out+=h,a.total+=h,h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,l-h):adler32(a.check,n,h,l-h)),h=o,(a.flags?d:ZSWAP32(d))!==a.check){e.msg="incorrect data check",a.mode=BAD;break}d=0,f=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=BAD;break}d=0,f=0}a.mode=DONE;case DONE:D=Z_STREAM_END;break e;case BAD:D=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,(a.wsize||h!==e.avail_out&&a.mode<BAD&&(a.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,h-e.avail_out)?(a.mode=MEM,Z_MEM_ERROR):(c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,a.total+=h,a.wrap&&h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,e.next_out-h):adler32(a.check,n,h,e.next_out-h)),e.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(0===c&&0===h||t===Z_FINISH)&&D===Z_OK&&(D=Z_BUF_ERROR),D)}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var a;return e&&e.state?(a=e.state,0===(2&a.wrap)?Z_STREAM_ERROR:(a.head=t,t.done=!1,Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,virgin=!0,lenfix,distfix;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateInfo="pako inflate (from Nodeca project)";


},{"../utils/common":65,"./adler32":66,"./crc32":68,"./inffast":70,"./inftrees":72}],72:[function(require,module,exports){
  "use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(r,S,e,f,t,i,u,o){var E,l,s,n,I,N,T,B,D,O=o.bits,a=0,b=0,A=0,L=0,M=0,X=0,d=0,G=0,H=0,U=0,_=null,x=0,c=new utils.Buf16(MAXBITS+1),m=new utils.Buf16(MAXBITS+1),v=null,w=0;for(a=0;MAXBITS>=a;a++)c[a]=0;for(b=0;f>b;b++)c[S[e+b]]++;for(M=O,L=MAXBITS;L>=1&&0===c[L];L--);if(M>L&&(M=L),0===L)return t[i++]=20971520,t[i++]=20971520,o.bits=1,0;for(A=1;L>A&&0===c[A];A++);for(A>M&&(M=A),G=1,a=1;MAXBITS>=a;a++)if(G<<=1,G-=c[a],0>G)return-1;if(G>0&&(r===CODES||1!==L))return-1;for(m[1]=0,a=1;MAXBITS>a;a++)m[a+1]=m[a]+c[a];for(b=0;f>b;b++)0!==S[e+b]&&(u[m[S[e+b]]++]=b);if(r===CODES?(_=v=u,N=19):r===LENS?(_=lbase,x-=257,v=lext,w-=257,N=256):(_=dbase,v=dext,N=-1),U=0,b=0,a=A,I=i,X=M,d=0,s=-1,H=1<<M,n=H-1,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;for(var C=0;;){C++,T=a-d,u[b]<N?(B=0,D=u[b]):u[b]>N?(B=v[w+u[b]],D=_[x+u[b]]):(B=96,D=0),E=1<<a-d,l=1<<X,A=l;do l-=E,t[I+(U>>d)+l]=T<<24|B<<16|D|0;while(0!==l);for(E=1<<a-1;U&E;)E>>=1;if(0!==E?(U&=E-1,U+=E):U=0,b++,0===--c[a]){if(a===L)break;a=S[e+u[b]]}if(a>M&&(U&n)!==s){for(0===d&&(d=M),I+=A,X=a-d,G=1<<X;L>X+d&&(G-=c[X+d],!(0>=G));)X++,G<<=1;if(H+=1<<X,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;s=U&n,t[s]=M<<24|X<<16|I-i|0}}return 0!==U&&(t[I+U]=a-d<<24|64<<16|0),o.bits=M,0};


},{"../utils/common":65}],73:[function(require,module,exports){
  "use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};


},{}],74:[function(require,module,exports){
  "use strict";function zero(e){for(var _=e.length;--_>=0;)e[_]=0}function d_code(e){return 256>e?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,_){e.pending_buf[e.pending++]=255&_,e.pending_buf[e.pending++]=_>>>8&255}function send_bits(e,_,t){e.bi_valid>Buf_size-t?(e.bi_buf|=_<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=_>>Buf_size-e.bi_valid,e.bi_valid+=t-Buf_size):(e.bi_buf|=_<<e.bi_valid&65535,e.bi_valid+=t)}function send_code(e,_,t){send_bits(e,t[2*_],t[2*_+1])}function bi_reverse(e,_){var t=0;do t|=1&e,e>>>=1,t<<=1;while(--_>0);return t>>>1}function bi_flush(e){16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,_){var t,r,i,n,s,d,a=_.dyn_tree,l=_.max_code,c=_.stat_desc.static_tree,o=_.stat_desc.has_stree,b=_.stat_desc.extra_bits,f=_.stat_desc.extra_base,u=_.stat_desc.max_length,p=0;for(n=0;MAX_BITS>=n;n++)e.bl_count[n]=0;for(a[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;HEAP_SIZE>t;t++)r=e.heap[t],n=a[2*a[2*r+1]+1]+1,n>u&&(n=u,p++),a[2*r+1]=n,r>l||(e.bl_count[n]++,s=0,r>=f&&(s=b[r-f]),d=a[2*r],e.opt_len+=d*(n+s),o&&(e.static_len+=d*(c[2*r+1]+s)));if(0!==p){do{for(n=u-1;0===e.bl_count[n];)n--;e.bl_count[n]--,e.bl_count[n+1]+=2,e.bl_count[u]--,p-=2}while(p>0);for(n=u;0!==n;n--)for(r=e.bl_count[n];0!==r;)i=e.heap[--t],i>l||(a[2*i+1]!==n&&(e.opt_len+=(n-a[2*i+1])*a[2*i],a[2*i+1]=n),r--)}}function gen_codes(e,_,t){var r,i,n=new Array(MAX_BITS+1),s=0;for(r=1;MAX_BITS>=r;r++)n[r]=s=s+t[r-1]<<1;for(i=0;_>=i;i++){var d=e[2*i+1];0!==d&&(e[2*i]=bi_reverse(n[d]++,d))}}function tr_static_init(){var e,_,t,r,i,n=new Array(MAX_BITS+1);for(t=0,r=0;LENGTH_CODES-1>r;r++)for(base_length[r]=t,e=0;e<1<<extra_lbits[r];e++)_length_code[t++]=r;for(_length_code[t-1]=r,i=0,r=0;16>r;r++)for(base_dist[r]=i,e=0;e<1<<extra_dbits[r];e++)_dist_code[i++]=r;for(i>>=7;D_CODES>r;r++)for(base_dist[r]=i<<7,e=0;e<1<<extra_dbits[r]-7;e++)_dist_code[256+i++]=r;for(_=0;MAX_BITS>=_;_++)n[_]=0;for(e=0;143>=e;)static_ltree[2*e+1]=8,e++,n[8]++;for(;255>=e;)static_ltree[2*e+1]=9,e++,n[9]++;for(;279>=e;)static_ltree[2*e+1]=7,e++,n[7]++;for(;287>=e;)static_ltree[2*e+1]=8,e++,n[8]++;for(gen_codes(static_ltree,L_CODES+1,n),e=0;D_CODES>e;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(e){var _;for(_=0;L_CODES>_;_++)e.dyn_ltree[2*_]=0;for(_=0;D_CODES>_;_++)e.dyn_dtree[2*_]=0;for(_=0;BL_CODES>_;_++)e.bl_tree[2*_]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,_,t,r){bi_windup(e),r&&(put_short(e,t),put_short(e,~t)),utils.arraySet(e.pending_buf,e.window,_,t,e.pending),e.pending+=t}function smaller(e,_,t,r){var i=2*_,n=2*t;return e[i]<e[n]||e[i]===e[n]&&r[_]<=r[t]}function pqdownheap(e,_,t){for(var r=e.heap[t],i=t<<1;i<=e.heap_len&&(i<e.heap_len&&smaller(_,e.heap[i+1],e.heap[i],e.depth)&&i++,!smaller(_,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r}function compress_block(e,_,t){var r,i,n,s,d=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],i=e.pending_buf[e.l_buf+d],d++,0===r?send_code(e,i,_):(n=_length_code[i],send_code(e,n+LITERALS+1,_),s=extra_lbits[n],0!==s&&(i-=base_length[n],send_bits(e,i,s)),r--,n=d_code(r),send_code(e,n,t),s=extra_dbits[n],0!==s&&(r-=base_dist[n],send_bits(e,r,s)));while(d<e.last_lit);send_code(e,END_BLOCK,_)}function build_tree(e,_){var t,r,i,n=_.dyn_tree,s=_.stat_desc.static_tree,d=_.stat_desc.has_stree,a=_.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE,t=0;a>t;t++)0!==n[2*t]?(e.heap[++e.heap_len]=l=t,e.depth[t]=0):n[2*t+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=2>l?++l:0,n[2*i]=1,e.depth[i]=0,e.opt_len--,d&&(e.static_len-=s[2*i+1]);for(_.max_code=l,t=e.heap_len>>1;t>=1;t--)pqdownheap(e,n,t);i=a;do t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,n,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,n[2*i]=n[2*t]+n[2*r],e.depth[i]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,n[2*t+1]=n[2*r+1]=i,e.heap[1]=i++,pqdownheap(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,_),gen_codes(n,l,e.bl_count)}function scan_tree(e,_,t){var r,i,n=-1,s=_[1],d=0,a=7,l=4;for(0===s&&(a=138,l=3),_[2*(t+1)+1]=65535,r=0;t>=r;r++)i=s,s=_[2*(r+1)+1],++d<a&&i===s||(l>d?e.bl_tree[2*i]+=d:0!==i?(i!==n&&e.bl_tree[2*i]++,e.bl_tree[2*REP_3_6]++):10>=d?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++,d=0,n=i,0===s?(a=138,l=3):i===s?(a=6,l=3):(a=7,l=4))}function send_tree(e,_,t){var r,i,n=-1,s=_[1],d=0,a=7,l=4;for(0===s&&(a=138,l=3),r=0;t>=r;r++)if(i=s,s=_[2*(r+1)+1],!(++d<a&&i===s)){if(l>d){do send_code(e,i,e.bl_tree);while(0!==--d)}else 0!==i?(i!==n&&(send_code(e,i,e.bl_tree),d--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,d-3,2)):10>=d?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,d-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,d-11,7));d=0,n=i,0===s?(a=138,l=3):i===s?(a=6,l=3):(a=7,l=4)}}function build_bl_tree(e){var _;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),_=BL_CODES-1;_>=3&&0===e.bl_tree[2*bl_order[_]+1];_--);return e.opt_len+=3*(_+1)+5+5+4,_}function send_all_trees(e,_,t,r){var i;for(send_bits(e,_-257,5),send_bits(e,t-1,5),send_bits(e,r-4,4),i=0;r>i;i++)send_bits(e,e.bl_tree[2*bl_order[i]+1],3);send_tree(e,e.dyn_ltree,_-1),send_tree(e,e.dyn_dtree,t-1)}function detect_data_type(e){var _,t=4093624447;for(_=0;31>=_;_++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*_])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(_=32;LITERALS>_;_++)if(0!==e.dyn_ltree[2*_])return Z_TEXT;return Z_BINARY}function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,_,t,r){send_bits(e,(STORED_BLOCK<<1)+(r?1:0),3),copy_block(e,_,t,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,_,t,r){var i,n,s=0;e.level>0?(e.strm.data_type===Z_UNKNOWN&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),s=build_bl_tree(e),i=e.opt_len+3+7>>>3,n=e.static_len+3+7>>>3,i>=n&&(i=n)):i=n=t+5,i>=t+4&&-1!==_?_tr_stored_block(e,_,t,r):e.strategy===Z_FIXED||n===i?(send_bits(e,(STATIC_TREES<<1)+(r?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(r?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),r&&bi_windup(e)}function _tr_tally(e,_,t){return e.pending_buf[e.d_buf+2*e.last_lit]=_>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&_,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===_?e.dyn_ltree[2*t]++:(e.matches++,_--,e.dyn_ltree[2*(_length_code[t]+LITERALS+1)]++,e.dyn_dtree[2*d_code(_)]++),e.last_lit===e.lit_bufsize-1}var utils=require("../utils/common"),Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES+2));zero(static_ltree);var static_dtree=new Array(2*D_CODES);zero(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var base_dist=new Array(D_CODES);zero(base_dist);var StaticTreeDesc=function(e,_,t,r,i){this.static_tree=e,this.extra_bits=_,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length},static_l_desc,static_d_desc,static_bl_desc,TreeDesc=function(e,_){this.dyn_tree=e,this.max_code=0,this.stat_desc=_},static_init_done=!1;exports._tr_init=_tr_init,exports._tr_stored_block=_tr_stored_block,exports._tr_flush_block=_tr_flush_block,exports._tr_tally=_tr_tally,exports._tr_align=_tr_align;


},{"../utils/common":65}],75:[function(require,module,exports){
  "use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream;


},{}],76:[function(require,module,exports){
  (function (process,Buffer){
    function Zlib(t){if(t<exports.DEFLATE||t>exports.UNZIP)throw new TypeError("Bad argument");this.mode=t,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function bufferSet(t,e){for(var s=0;s<t.length;s++)this[e+s]=t[s]}var msg=require("pako/lib/zlib/messages"),zstream=require("pako/lib/zlib/zstream"),zlib_deflate=require("pako/lib/zlib/deflate.js"),zlib_inflate=require("pako/lib/zlib/inflate.js"),constants=require("pako/lib/zlib/constants");for(var key in constants)exports[key]=constants[key];exports.NONE=0,exports.DEFLATE=1,exports.INFLATE=2,exports.GZIP=3,exports.GUNZIP=4,exports.DEFLATERAW=5,exports.INFLATERAW=6,exports.UNZIP=7,Zlib.prototype.init=function(t,e,s,i,r){switch(this.windowBits=t,this.level=e,this.memLevel=s,this.strategy=i,(this.mode===exports.GZIP||this.mode===exports.GUNZIP)&&(this.windowBits+=16),this.mode===exports.UNZIP&&(this.windowBits+=32),(this.mode===exports.DEFLATERAW||this.mode===exports.INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new zstream,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var o=zlib_deflate.deflateInit2(this.strm,this.level,exports.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:case exports.UNZIP:var o=zlib_inflate.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return o!==exports.Z_OK?void this._error(o):(this.write_in_progress=!1,void(this.init_done=!0))},Zlib.prototype.params=function(){throw new Error("deflateParams Not supported")},Zlib.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===exports.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},Zlib.prototype.write=function(t,e,s,i,r,o,n){this._writeCheck(),this.write_in_progress=!0;var a=this;return process.nextTick(function(){a.write_in_progress=!1;var p=a._write(t,e,s,i,r,o,n);a.callback(p[0],p[1]),a.pending_close&&a.close()}),this},Zlib.prototype.writeSync=function(t,e,s,i,r,o,n){return this._writeCheck(),this._write(t,e,s,i,r,o,n)},Zlib.prototype._write=function(t,e,s,i,r,o,n){if(this.write_in_progress=!0,t!==exports.Z_NO_FLUSH&&t!==exports.Z_PARTIAL_FLUSH&&t!==exports.Z_SYNC_FLUSH&&t!==exports.Z_FULL_FLUSH&&t!==exports.Z_FINISH&&t!==exports.Z_BLOCK)throw new Error("Invalid flush value");null==e&&(e=new Buffer(0),i=0,s=0),r._set?r.set=r._set:r.set=bufferSet;var a=this.strm;switch(a.avail_in=i,a.input=e,a.next_in=s,a.avail_out=n,a.output=r,a.next_out=o,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var p=zlib_deflate.deflate(a,t);break;case exports.UNZIP:case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:var p=zlib_inflate.inflate(a,t);break;default:throw new Error("Unknown mode "+this.mode)}return p!==exports.Z_STREAM_END&&p!==exports.Z_OK&&this._error(p),this.write_in_progress=!1,[a.avail_in,a.avail_out]},Zlib.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===exports.DEFLATE||this.mode===exports.GZIP||this.mode===exports.DEFLATERAW?zlib_deflate.deflateEnd(this.strm):zlib_inflate.inflateEnd(this.strm),void(this.mode=exports.NONE))},Zlib.prototype.reset=function(){switch(this.mode){case exports.DEFLATE:case exports.DEFLATERAW:var t=zlib_deflate.deflateReset(this.strm);break;case exports.INFLATE:case exports.INFLATERAW:var t=zlib_inflate.inflateReset(this.strm)}t!==exports.Z_OK&&this._error(t)},Zlib.prototype._error=function(t){this.onerror(msg[t]+": "+this.strm.msg,t),this.write_in_progress=!1,this.pending_close&&this.close()},exports.Zlib=Zlib;


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"buffer":78,"pako/lib/zlib/constants":67,"pako/lib/zlib/deflate.js":69,"pako/lib/zlib/inflate.js":71,"pako/lib/zlib/messages":73,"pako/lib/zlib/zstream":75}],77:[function(require,module,exports){
  (function (process,Buffer){
    function zlibBuffer(e,n,i){function t(){for(var n;null!==(n=e.read());)o.push(n),s+=n.length;e.once("readable",t)}function r(n){e.removeListener("end",f),e.removeListener("readable",t),i(n)}function f(){var n=Buffer.concat(o,s);o=[],i(null,n),e.close()}var o=[],s=0;e.on("error",r),e.on("end",f),e.end(n),t()}function zlibBufferSync(e,n){if("string"==typeof n&&(n=new Buffer(n)),!Buffer.isBuffer(n))throw new TypeError("Not a string or buffer");var i=binding.Z_FINISH;return e._processChunk(n,i)}function Deflate(e){return this instanceof Deflate?void Zlib.call(this,e,binding.DEFLATE):new Deflate(e)}function Inflate(e){return this instanceof Inflate?void Zlib.call(this,e,binding.INFLATE):new Inflate(e)}function Gzip(e){return this instanceof Gzip?void Zlib.call(this,e,binding.GZIP):new Gzip(e)}function Gunzip(e){return this instanceof Gunzip?void Zlib.call(this,e,binding.GUNZIP):new Gunzip(e)}function DeflateRaw(e){return this instanceof DeflateRaw?void Zlib.call(this,e,binding.DEFLATERAW):new DeflateRaw(e)}function InflateRaw(e){return this instanceof InflateRaw?void Zlib.call(this,e,binding.INFLATERAW):new InflateRaw(e)}function Unzip(e){return this instanceof Unzip?void Zlib.call(this,e,binding.UNZIP):new Unzip(e)}function Zlib(e,n){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||exports.Z_DEFAULT_CHUNK,Transform.call(this,e),e.flush&&e.flush!==binding.Z_NO_FLUSH&&e.flush!==binding.Z_PARTIAL_FLUSH&&e.flush!==binding.Z_SYNC_FLUSH&&e.flush!==binding.Z_FULL_FLUSH&&e.flush!==binding.Z_FINISH&&e.flush!==binding.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||binding.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<exports.Z_MIN_CHUNK||e.chunkSize>exports.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<exports.Z_MIN_WINDOWBITS||e.windowBits>exports.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<exports.Z_MIN_LEVEL||e.level>exports.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<exports.Z_MIN_MEMLEVEL||e.memLevel>exports.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=exports.Z_FILTERED&&e.strategy!=exports.Z_HUFFMAN_ONLY&&e.strategy!=exports.Z_RLE&&e.strategy!=exports.Z_FIXED&&e.strategy!=exports.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!Buffer.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new binding.Zlib(n);var i=this;this._hadError=!1,this._binding.onerror=function(e,n){i._binding=null,i._hadError=!0;var t=new Error(e);t.errno=n,t.code=exports.codes[n],i.emit("error",t)};var t=exports.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(t=e.level);var r=exports.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(r=e.strategy),this._binding.init(e.windowBits||exports.Z_DEFAULT_WINDOWBITS,t,e.memLevel||exports.Z_DEFAULT_MEMLEVEL,r,e.dictionary),this._buffer=new Buffer(this._chunkSize),this._offset=0,this._closed=!1,this._level=t,this._strategy=r,this.once("end",this.close)}var Transform=require("_stream_transform"),binding=require("./binding"),util=require("util"),assert=require("assert").ok;binding.Z_MIN_WINDOWBITS=8,binding.Z_MAX_WINDOWBITS=15,binding.Z_DEFAULT_WINDOWBITS=15,binding.Z_MIN_CHUNK=64,binding.Z_MAX_CHUNK=1/0,binding.Z_DEFAULT_CHUNK=16384,binding.Z_MIN_MEMLEVEL=1,binding.Z_MAX_MEMLEVEL=9,binding.Z_DEFAULT_MEMLEVEL=8,binding.Z_MIN_LEVEL=-1,binding.Z_MAX_LEVEL=9,binding.Z_DEFAULT_LEVEL=binding.Z_DEFAULT_COMPRESSION,Object.keys(binding).forEach(function(e){e.match(/^Z/)&&(exports[e]=binding[e])}),exports.codes={Z_OK:binding.Z_OK,Z_STREAM_END:binding.Z_STREAM_END,Z_NEED_DICT:binding.Z_NEED_DICT,Z_ERRNO:binding.Z_ERRNO,Z_STREAM_ERROR:binding.Z_STREAM_ERROR,Z_DATA_ERROR:binding.Z_DATA_ERROR,Z_MEM_ERROR:binding.Z_MEM_ERROR,Z_BUF_ERROR:binding.Z_BUF_ERROR,Z_VERSION_ERROR:binding.Z_VERSION_ERROR},Object.keys(exports.codes).forEach(function(e){exports.codes[exports.codes[e]]=e}),exports.Deflate=Deflate,exports.Inflate=Inflate,exports.Gzip=Gzip,exports.Gunzip=Gunzip,exports.DeflateRaw=DeflateRaw,exports.InflateRaw=InflateRaw,exports.Unzip=Unzip,exports.createDeflate=function(e){return new Deflate(e)},exports.createInflate=function(e){return new Inflate(e)},exports.createDeflateRaw=function(e){return new DeflateRaw(e)},exports.createInflateRaw=function(e){return new InflateRaw(e)},exports.createGzip=function(e){return new Gzip(e)},exports.createGunzip=function(e){return new Gunzip(e)},exports.createUnzip=function(e){return new Unzip(e)},exports.deflate=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Deflate(n),e,i)},exports.deflateSync=function(e,n){return zlibBufferSync(new Deflate(n),e)},exports.gzip=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Gzip(n),e,i)},exports.gzipSync=function(e,n){return zlibBufferSync(new Gzip(n),e)},exports.deflateRaw=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new DeflateRaw(n),e,i)},exports.deflateRawSync=function(e,n){return zlibBufferSync(new DeflateRaw(n),e)},exports.unzip=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Unzip(n),e,i)},exports.unzipSync=function(e,n){return zlibBufferSync(new Unzip(n),e)},exports.inflate=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Inflate(n),e,i)},exports.inflateSync=function(e,n){return zlibBufferSync(new Inflate(n),e)},exports.gunzip=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new Gunzip(n),e,i)},exports.gunzipSync=function(e,n){return zlibBufferSync(new Gunzip(n),e)},exports.inflateRaw=function(e,n,i){return"function"==typeof n&&(i=n,n={}),zlibBuffer(new InflateRaw(n),e,i)},exports.inflateRawSync=function(e,n){return zlibBufferSync(new InflateRaw(n),e)},util.inherits(Zlib,Transform),Zlib.prototype.params=function(e,n,i){if(e<exports.Z_MIN_LEVEL||e>exports.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=exports.Z_FILTERED&&n!=exports.Z_HUFFMAN_ONLY&&n!=exports.Z_RLE&&n!=exports.Z_FIXED&&n!=exports.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var t=this;this.flush(binding.Z_SYNC_FLUSH,function(){t._binding.params(e,n),t._hadError||(t._level=e,t._strategy=n,i&&i())})}else process.nextTick(i)},Zlib.prototype.reset=function(){return this._binding.reset()},Zlib.prototype._flush=function(e){this._transform(new Buffer(0),"",e)},Zlib.prototype.flush=function(e,n){var i=this._writableState;if(("function"==typeof e||void 0===e&&!n)&&(n=e,e=binding.Z_FULL_FLUSH),i.ended)n&&process.nextTick(n);else if(i.ending)n&&this.once("end",n);else if(i.needDrain){var t=this;this.once("drain",function(){t.flush(n)})}else this._flushFlag=e,this.write(new Buffer(0),"",n)},Zlib.prototype.close=function(e){if(e&&process.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var n=this;process.nextTick(function(){n.emit("close")})}},Zlib.prototype._transform=function(e,n,i){var t,r=this._writableState,f=r.ending||r.ended,o=f&&(!e||r.length===e.length);if(null===!e&&!Buffer.isBuffer(e))return i(new Error("invalid input"));o?t=binding.Z_FINISH:(t=this._flushFlag,e.length>=r.length&&(this._flushFlag=this._opts.flush||binding.Z_NO_FLUSH));this._processChunk(e,t,i)},Zlib.prototype._processChunk=function(e,n,i){function t(u,c){if(!s._hadError){var h=f-c;if(assert(h>=0,"have should not go down"),h>0){var p=s._buffer.slice(s._offset,s._offset+h);s._offset+=h,l?s.push(p):(a.push(p),_+=p.length)}if((0===c||s._offset>=s._chunkSize)&&(f=s._chunkSize,s._offset=0,s._buffer=new Buffer(s._chunkSize)),0===c){if(o+=r-u,r=u,!l)return!0;var d=s._binding.write(n,e,o,r,s._buffer,s._offset,s._chunkSize);return d.callback=t,void(d.buffer=e)}return l?void i():!1}}var r=e&&e.length,f=this._chunkSize-this._offset,o=0,s=this,l="function"==typeof i;if(!l){var u,a=[],_=0;this.on("error",function(e){u=e});do var c=this._binding.writeSync(n,e,o,r,this._buffer,this._offset,f);while(!this._hadError&&t(c[0],c[1]));if(this._hadError)throw u;var h=Buffer.concat(a,_);return this.close(),h}var p=this._binding.write(n,e,o,r,this._buffer,this._offset,f);p.buffer=e,p.callback=t},util.inherits(Deflate,Zlib),util.inherits(Inflate,Zlib),util.inherits(Gzip,Zlib),util.inherits(Gunzip,Zlib),util.inherits(DeflateRaw,Zlib),util.inherits(InflateRaw,Zlib),util.inherits(Unzip,Zlib);


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"./binding":76,"Zbi7gb":95,"_stream_transform":105,"assert":64,"buffer":78,"util":109}],78:[function(require,module,exports){
  function Buffer(e,t,r){if(!(this instanceof Buffer))return new Buffer(e,t,r);var n=typeof e;if("base64"===t&&"string"===n)for(e=stringtrim(e);e.length%4!==0;)e+="=";var i;if("number"===n)i=coerce(e);else if("string"===n)i=Buffer.byteLength(e,t);else{if("object"!==n)throw new Error("First argument needs to be a number, array or string.");i=coerce(e.length)}var s;Buffer._useTypedArrays?s=Buffer._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(Buffer._useTypedArrays&&"number"==typeof e.byteLength)s._set(e);else if(isArrayish(e))for(a=0;i>a;a++)Buffer.isBuffer(e)?s[a]=e.readUInt8(a):s[a]=e[a];else if("string"===n)s.write(e,0,t);else if("number"===n&&!Buffer._useTypedArrays&&!r)for(a=0;i>a;a++)s[a]=0;return s}function _hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var s=t.length;assert(s%2===0,"Invalid hex string"),n>s/2&&(n=s/2);for(var a=0;n>a;a++){var o=parseInt(t.substr(2*a,2),16);assert(!isNaN(o),"Invalid hex string"),e[r+a]=o}return Buffer._charsWritten=2*a,a}function _utf8Write(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(utf8ToBytes(t),e,r,n);return i}function _asciiWrite(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(asciiToBytes(t),e,r,n);return i}function _binaryWrite(e,t,r,n){return _asciiWrite(e,t,r,n)}function _base64Write(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(base64ToBytes(t),e,r,n);return i}function _utf16leWrite(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(utf16leToBytes(t),e,r,n);return i}function _base64Slice(e,t,r){return 0===t&&r===e.length?base64.fromByteArray(e):base64.fromByteArray(e.slice(t,r))}function _utf8Slice(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var s=t;r>s;s++)e[s]<=127?(n+=decodeUtf8Char(i)+String.fromCharCode(e[s]),i=""):i+="%"+e[s].toString(16);return n+decodeUtf8Char(i)}function _asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function _binarySlice(e,t,r){return _asciiSlice(e,t,r)}function _hexSlice(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",s=t;r>s;s++)i+=toHex(e[s]);return i}function _utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function _readUInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s;return r?(s=e[t],i>t+1&&(s|=e[t+1]<<8)):(s=e[t]<<8,i>t+1&&(s|=e[t+1])),s}}function _readUInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s;return r?(i>t+2&&(s=e[t+2]<<16),i>t+1&&(s|=e[t+1]<<8),s|=e[t],i>t+3&&(s+=e[t+3]<<24>>>0)):(i>t+1&&(s=e[t+1]<<16),i>t+2&&(s|=e[t+2]<<8),i>t+3&&(s|=e[t+3]),s+=e[t]<<24>>>0),s}}function _readInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s=_readUInt16(e,t,r,!0),a=32768&s;return a?-1*(65535-s+1):s}}function _readInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var s=_readUInt32(e,t,r,!0),a=2147483648&s;return a?-1*(4294967295-s+1):s}}function _readFloat(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+3<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,23,4)}function _readDouble(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+7<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,52,8)}function _writeUInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"trying to write beyond buffer length"),verifuint(t,65535));var s=e.length;if(!(r>=s))for(var a=0,o=Math.min(s-r,2);o>a;a++)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function _writeUInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"trying to write beyond buffer length"),verifuint(t,4294967295));var s=e.length;if(!(r>=s))for(var a=0,o=Math.min(s-r,4);o>a;a++)e[r+a]=t>>>8*(n?a:3-a)&255}function _writeInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"Trying to write beyond buffer length"),verifsint(t,32767,-32768));var s=e.length;r>=s||(t>=0?_writeUInt16(e,t,r,n,i):_writeUInt16(e,65535+t+1,r,n,i))}function _writeInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifsint(t,2147483647,-2147483648));var s=e.length;r>=s||(t>=0?_writeUInt32(e,t,r,n,i):_writeUInt32(e,4294967295+t+1,r,n,i))}function _writeFloat(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,3.4028234663852886e38,-3.4028234663852886e38));var s=e.length;r>=s||ieee754.write(e,t,r,n,23,4)}function _writeDouble(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+7<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,1.7976931348623157e308,-1.7976931348623157e308));var s=e.length;r>=s||ieee754.write(e,t,r,n,52,8)}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function clamp(e,t,r){return"number"!=typeof e?r:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function coerce(e){return e=~~Math.ceil(+e),0>e?0:e}function isArray(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function isArrayish(e){return isArray(e)||Buffer.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function toHex(e){return 16>e?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(e.charCodeAt(r));else{var i=r;n>=55296&&57343>=n&&r++;for(var s=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),a=0;a<s.length;a++)t.push(parseInt(s[a],16))}}return t}function asciiToBytes(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e){for(var t,r,n,i=[],s=0;s<e.length;s++)t=e.charCodeAt(s),r=t>>8,n=t%256,i.push(n),i.push(r);return i}function base64ToBytes(e){return base64.toByteArray(e)}function blitBuffer(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function decodeUtf8Char(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function verifuint(e,t){assert("number"==typeof e,"cannot write a non-number as a number"),assert(e>=0,"specified a negative value for writing an unsigned value"),assert(t>=e,"value is larger than maximum value for type"),assert(Math.floor(e)===e,"value has a fractional component")}function verifsint(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value"),assert(Math.floor(e)===e,"value has a fractional component")}function verifIEEE754(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value")}function assert(e,t){if(!e)throw new Error(t||"Failed assertion")}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192,Buffer._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(r){return!1}}(),Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},Buffer.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=utf8ToBytes(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=base64ToBytes(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},Buffer.concat=function(e,t){if(assert(isArray(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new Buffer(0);if(1===e.length)return e[0];var r;if("number"!=typeof t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new Buffer(t),i=0;for(r=0;r<e.length;r++){var s=e[r];s.copy(n,i),i+=s.length}return n},Buffer.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var i=n;n=t,t=r,r=i}t=Number(t)||0;var s=this.length-t;r?(r=Number(r),r>s&&(r=s)):r=s,n=String(n||"utf8").toLowerCase();var a;switch(n){case"hex":a=_hexWrite(this,e,t,r);break;case"utf8":case"utf-8":a=_utf8Write(this,e,t,r);break;case"ascii":a=_asciiWrite(this,e,t,r);break;case"binary":a=_binaryWrite(this,e,t,r);break;case"base64":a=_base64Write(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=_utf16leWrite(this,e,t,r);break;default:throw new Error("Unknown encoding")}return a},Buffer.prototype.toString=function(e,t,r){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,r=void 0!==r?Number(r):r=n.length,r===t)return"";var i;switch(e){case"hex":i=_hexSlice(n,t,r);break;case"utf8":case"utf-8":i=_utf8Slice(n,t,r);break;case"ascii":i=_asciiSlice(n,t,r);break;case"binary":i=_binarySlice(n,t,r);break;case"base64":i=_base64Slice(n,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=_utf16leSlice(n,t,r);break;default:throw new Error("Unknown encoding")}return i},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.copy=function(e,t,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),t||(t=0),n!==r&&0!==e.length&&0!==i.length){assert(n>=r,"sourceEnd < sourceStart"),assert(t>=0&&t<e.length,"targetStart out of bounds"),assert(r>=0&&r<i.length,"sourceStart out of bounds"),assert(n>=0&&n<=i.length,"sourceEnd out of bounds"),n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r;if(100>s||!Buffer._useTypedArrays)for(var a=0;s>a;a++)e[a+t]=this[a+r];else e._set(this.subarray(r,r+s),t)}},Buffer.prototype.slice=function(e,t){var r=this.length;if(e=clamp(e,r,0),t=clamp(t,r,r),Buffer._useTypedArrays)return Buffer._augment(this.subarray(e,t));for(var n=t-e,i=new Buffer(n,void 0,!0),s=0;n>s;s++)i[s]=this[s+e];return i},Buffer.prototype.get=function(e){return 0,this.readUInt8(e)},Buffer.prototype.set=function(e,t){return 0,this.writeUInt8(e,t)},Buffer.prototype.readUInt8=function(e,t){return t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},Buffer.prototype.readUInt16LE=function(e,t){return _readUInt16(this,e,!0,t)},Buffer.prototype.readUInt16BE=function(e,t){return _readUInt16(this,e,!1,t)},Buffer.prototype.readUInt32LE=function(e,t){return _readUInt32(this,e,!0,t)},Buffer.prototype.readUInt32BE=function(e,t){return _readUInt32(this,e,!1,t)},Buffer.prototype.readInt8=function(e,t){if(t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var r=128&this[e];return r?-1*(255-this[e]+1):this[e]}},Buffer.prototype.readInt16LE=function(e,t){return _readInt16(this,e,!0,t)},Buffer.prototype.readInt16BE=function(e,t){return _readInt16(this,e,!1,t)},Buffer.prototype.readInt32LE=function(e,t){return _readInt32(this,e,!0,t)},Buffer.prototype.readInt32BE=function(e,t){return _readInt32(this,e,!1,t)},Buffer.prototype.readFloatLE=function(e,t){return _readFloat(this,e,!0,t)},Buffer.prototype.readFloatBE=function(e,t){return _readFloat(this,e,!1,t)},Buffer.prototype.readDoubleLE=function(e,t){return _readDouble(this,e,!0,t)},Buffer.prototype.readDoubleBE=function(e,t){return _readDouble(this,e,!1,t)},Buffer.prototype.writeUInt8=function(e,t,r){r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"trying to write beyond buffer length"),verifuint(e,255)),t>=this.length||(this[t]=e)},Buffer.prototype.writeUInt16LE=function(e,t,r){_writeUInt16(this,e,t,!0,r)},Buffer.prototype.writeUInt16BE=function(e,t,r){_writeUInt16(this,e,t,!1,r)},Buffer.prototype.writeUInt32LE=function(e,t,r){_writeUInt32(this,e,t,!0,r)},Buffer.prototype.writeUInt32BE=function(e,t,r){_writeUInt32(this,e,t,!1,r)},Buffer.prototype.writeInt8=function(e,t,r){r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"Trying to write beyond buffer length"),verifsint(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r))},Buffer.prototype.writeInt16LE=function(e,t,r){_writeInt16(this,e,t,!0,r)},Buffer.prototype.writeInt16BE=function(e,t,r){_writeInt16(this,e,t,!1,r)},Buffer.prototype.writeInt32LE=function(e,t,r){_writeInt32(this,e,t,!0,r)},Buffer.prototype.writeInt32BE=function(e,t,r){_writeInt32(this,e,t,!1,r)},Buffer.prototype.writeFloatLE=function(e,t,r){_writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){_writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){_writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){_writeDouble(this,e,t,!1,r)},Buffer.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),assert("number"==typeof e&&!isNaN(e),"value is not a number"),assert(r>=t,"end < start"),r!==t&&0!==this.length){assert(t>=0&&t<this.length,"start out of bounds"),assert(r>=0&&r<=this.length,"end out of bounds");for(var n=t;r>n;n++)this[n]=e}},Buffer.prototype.inspect=function(){for(var e=[],t=this.length,r=0;t>r;r++)if(e[r]=toHex(this[r]),r===exports.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer._useTypedArrays)return new Buffer(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=BP.get,e.set=BP.set,e.write=BP.write,e.toString=BP.toString,e.toLocaleString=BP.toString,e.toJSON=BP.toJSON,e.copy=BP.copy,e.slice=BP.slice,e.readUInt8=BP.readUInt8,e.readUInt16LE=BP.readUInt16LE,e.readUInt16BE=BP.readUInt16BE,e.readUInt32LE=BP.readUInt32LE,e.readUInt32BE=BP.readUInt32BE,e.readInt8=BP.readInt8,e.readInt16LE=BP.readInt16LE,e.readInt16BE=BP.readInt16BE,e.readInt32LE=BP.readInt32LE,e.readInt32BE=BP.readInt32BE,e.readFloatLE=BP.readFloatLE,e.readFloatBE=BP.readFloatBE,e.readDoubleLE=BP.readDoubleLE,e.readDoubleBE=BP.readDoubleBE,e.writeUInt8=BP.writeUInt8,e.writeUInt16LE=BP.writeUInt16LE,e.writeUInt16BE=BP.writeUInt16BE,e.writeUInt32LE=BP.writeUInt32LE,e.writeUInt32BE=BP.writeUInt32BE,e.writeInt8=BP.writeInt8,e.writeInt16LE=BP.writeInt16LE,e.writeInt16BE=BP.writeInt16BE,e.writeInt32LE=BP.writeInt32LE,e.writeInt32BE=BP.writeInt32BE,e.writeFloatLE=BP.writeFloatLE,e.writeFloatBE=BP.writeFloatBE,e.writeDoubleLE=BP.writeDoubleLE,e.writeDoubleBE=BP.writeDoubleBE,e.fill=BP.fill,e.inspect=BP.inspect,e.toArrayBuffer=BP.toArrayBuffer,e};


},{"base64-js":79,"ieee754":80}],79:[function(require,module,exports){
  var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:o>r?-1:o+10>r?r-o+26+26:i+26>r?r-i:A+26>r?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;c>n;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;h>n;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);


},{}],80:[function(require,module,exports){
  exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=0>o||0===o&&0>1/o?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};


},{}],81:[function(require,module,exports){
  function toArray(r,e){if(r.length%intSize!==0){var f=r.length+(intSize-r.length%intSize);r=Buffer.concat([r,zeroBuffer],f)}for(var t=[],n=e?r.readInt32BE:r.readInt32LE,u=0;u<r.length;u+=intSize)t.push(n.call(r,u));return t}function toBuffer(r,e,f){for(var t=new Buffer(e),n=f?t.writeInt32BE:t.writeInt32LE,u=0;u<r.length;u++)n.call(t,r[u],4*u,!0);return t}function hash(r,e,f,t){Buffer.isBuffer(r)||(r=new Buffer(r));var n=e(toArray(r,t),r.length*chrsz);return toBuffer(n,f,t)}var Buffer=require("buffer").Buffer,intSize=4,zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var chrsz=8;module.exports={hash:hash};


},{"buffer":78}],82:[function(require,module,exports){
  function hmac(e,r,f){Buffer.isBuffer(r)||(r=new Buffer(r)),Buffer.isBuffer(f)||(f=new Buffer(f)),r.length>blocksize?r=e(r):r.length<blocksize&&(r=Buffer.concat([r,zeroBuffer],blocksize));for(var t=new Buffer(blocksize),n=new Buffer(blocksize),i=0;blocksize>i;i++)t[i]=54^r[i],n[i]=92^r[i];var c=e(Buffer.concat([t,f]));return e(Buffer.concat([n,c]))}function hash(e,r){e=e||"sha1";var f=algorithms[e],t=[],n=0;return f||error("algorithm:",e,"is not yet supported"),{update:function(e){return Buffer.isBuffer(e)||(e=new Buffer(e)),t.push(e),n+=e.length,this},digest:function(e){var n=Buffer.concat(t),i=r?hmac(f,r,n):f(n);return t=null,e?i.toString(e):i}}}function error(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function each(e,r){for(var f in e)r(e[f],f)}var Buffer=require("buffer").Buffer,sha=require("./sha"),sha256=require("./sha256"),rng=require("./rng"),md5=require("./md5"),algorithms={sha1:sha,sha256:sha256,md5:md5},blocksize=64,zeroBuffer=new Buffer(blocksize);zeroBuffer.fill(0),exports.createHash=function(e){return hash(e)},exports.createHmac=function(e,r){return hash(e,r)},exports.randomBytes=function(e,r){if(!r||!r.call)return new Buffer(rng(e));try{r.call(this,void 0,new Buffer(rng(e)))}catch(f){r(f)}},each(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(e){exports[e]=function(){error("sorry,",e,"is not implemented yet")}});


},{"./md5":83,"./rng":84,"./sha":85,"./sha256":86,"buffer":78}],83:[function(require,module,exports){
  function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(d,_){d[_>>5]|=128<<_%32,d[(_+64>>>9<<4)+14]=_;for(var m=1732584193,f=-271733879,i=-1732584194,h=271733878,r=0;r<d.length;r+=16){var n=m,e=f,g=i,t=h;m=md5_ff(m,f,i,h,d[r+0],7,-680876936),h=md5_ff(h,m,f,i,d[r+1],12,-389564586),i=md5_ff(i,h,m,f,d[r+2],17,606105819),f=md5_ff(f,i,h,m,d[r+3],22,-1044525330),m=md5_ff(m,f,i,h,d[r+4],7,-176418897),h=md5_ff(h,m,f,i,d[r+5],12,1200080426),i=md5_ff(i,h,m,f,d[r+6],17,-1473231341),f=md5_ff(f,i,h,m,d[r+7],22,-45705983),m=md5_ff(m,f,i,h,d[r+8],7,1770035416),h=md5_ff(h,m,f,i,d[r+9],12,-1958414417),i=md5_ff(i,h,m,f,d[r+10],17,-42063),f=md5_ff(f,i,h,m,d[r+11],22,-1990404162),m=md5_ff(m,f,i,h,d[r+12],7,1804603682),h=md5_ff(h,m,f,i,d[r+13],12,-40341101),i=md5_ff(i,h,m,f,d[r+14],17,-1502002290),f=md5_ff(f,i,h,m,d[r+15],22,1236535329),m=md5_gg(m,f,i,h,d[r+1],5,-165796510),h=md5_gg(h,m,f,i,d[r+6],9,-1069501632),i=md5_gg(i,h,m,f,d[r+11],14,643717713),f=md5_gg(f,i,h,m,d[r+0],20,-373897302),m=md5_gg(m,f,i,h,d[r+5],5,-701558691),h=md5_gg(h,m,f,i,d[r+10],9,38016083),i=md5_gg(i,h,m,f,d[r+15],14,-660478335),f=md5_gg(f,i,h,m,d[r+4],20,-405537848),m=md5_gg(m,f,i,h,d[r+9],5,568446438),h=md5_gg(h,m,f,i,d[r+14],9,-1019803690),i=md5_gg(i,h,m,f,d[r+3],14,-187363961),f=md5_gg(f,i,h,m,d[r+8],20,1163531501),m=md5_gg(m,f,i,h,d[r+13],5,-1444681467),h=md5_gg(h,m,f,i,d[r+2],9,-51403784),i=md5_gg(i,h,m,f,d[r+7],14,1735328473),f=md5_gg(f,i,h,m,d[r+12],20,-1926607734),m=md5_hh(m,f,i,h,d[r+5],4,-378558),h=md5_hh(h,m,f,i,d[r+8],11,-2022574463),i=md5_hh(i,h,m,f,d[r+11],16,1839030562),f=md5_hh(f,i,h,m,d[r+14],23,-35309556),m=md5_hh(m,f,i,h,d[r+1],4,-1530992060),h=md5_hh(h,m,f,i,d[r+4],11,1272893353),i=md5_hh(i,h,m,f,d[r+7],16,-155497632),f=md5_hh(f,i,h,m,d[r+10],23,-1094730640),m=md5_hh(m,f,i,h,d[r+13],4,681279174),h=md5_hh(h,m,f,i,d[r+0],11,-358537222),i=md5_hh(i,h,m,f,d[r+3],16,-722521979),f=md5_hh(f,i,h,m,d[r+6],23,76029189),m=md5_hh(m,f,i,h,d[r+9],4,-640364487),h=md5_hh(h,m,f,i,d[r+12],11,-421815835),i=md5_hh(i,h,m,f,d[r+15],16,530742520),f=md5_hh(f,i,h,m,d[r+2],23,-995338651),m=md5_ii(m,f,i,h,d[r+0],6,-198630844),h=md5_ii(h,m,f,i,d[r+7],10,1126891415),i=md5_ii(i,h,m,f,d[r+14],15,-1416354905),f=md5_ii(f,i,h,m,d[r+5],21,-57434055),m=md5_ii(m,f,i,h,d[r+12],6,1700485571),h=md5_ii(h,m,f,i,d[r+3],10,-1894986606),i=md5_ii(i,h,m,f,d[r+10],15,-1051523),f=md5_ii(f,i,h,m,d[r+1],21,-2054922799),m=md5_ii(m,f,i,h,d[r+8],6,1873313359),h=md5_ii(h,m,f,i,d[r+15],10,-30611744),i=md5_ii(i,h,m,f,d[r+6],15,-1560198380),f=md5_ii(f,i,h,m,d[r+13],21,1309151649),m=md5_ii(m,f,i,h,d[r+4],6,-145523070),h=md5_ii(h,m,f,i,d[r+11],10,-1120210379),i=md5_ii(i,h,m,f,d[r+2],15,718787259),f=md5_ii(f,i,h,m,d[r+9],21,-343485551),m=safe_add(m,n),f=safe_add(f,e),i=safe_add(i,g),h=safe_add(h,t)}return Array(m,f,i,h)}function md5_cmn(d,_,m,f,i,h){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,h)),i),m)}function md5_ff(d,_,m,f,i,h,r){return md5_cmn(_&m|~_&f,d,_,i,h,r)}function md5_gg(d,_,m,f,i,h,r){return md5_cmn(_&f|m&~f,d,_,i,h,r)}function md5_hh(d,_,m,f,i,h,r){return md5_cmn(_^m^f,d,_,i,h,r)}function md5_ii(d,_,m,f,i,h,r){return md5_cmn(m^(_|~f),d,_,i,h,r)}function safe_add(d,_){var m=(65535&d)+(65535&_),f=(d>>16)+(_>>16)+(m>>16);return f<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}var helpers=require("./helpers");module.exports=function(d){return helpers.hash(d,core_md5,16)};


},{"./helpers":81}],84:[function(require,module,exports){
  !function(){var r,n,t=this;r=function(r){for(var n,n,t=new Array(r),o=0;r>o;o++)0==(3&o)&&(n=4294967296*Math.random()),t[o]=n>>>((3&o)<<3)&255;return t},t.crypto&&crypto.getRandomValues&&(n=function(r){var n=new Uint8Array(r);return crypto.getRandomValues(n),n}),module.exports=n||r}();


},{}],85:[function(require,module,exports){
  function core_sha1(r,a){r[a>>5]|=128<<24-a%32,r[(a+64>>9<<4)+15]=a;for(var e=Array(80),d=1732584193,s=-271733879,f=-1732584194,n=271733878,t=-1009589776,o=0;o<r.length;o+=16){for(var _=d,u=s,h=f,l=n,c=t,i=0;80>i;i++){16>i?e[i]=r[o+i]:e[i]=rol(e[i-3]^e[i-8]^e[i-14]^e[i-16],1);var v=safe_add(safe_add(rol(d,5),sha1_ft(i,s,f,n)),safe_add(safe_add(t,e[i]),sha1_kt(i)));t=n,n=f,f=rol(s,30),s=d,d=v}d=safe_add(d,_),s=safe_add(s,u),f=safe_add(f,h),n=safe_add(n,l),t=safe_add(t,c)}return Array(d,s,f,n,t)}function sha1_ft(r,a,e,d){return 20>r?a&e|~a&d:40>r?a^e^d:60>r?a&e|a&d|e&d:a^e^d}function sha1_kt(r){return 20>r?1518500249:40>r?1859775393:60>r?-1894007588:-899497514}function safe_add(r,a){var e=(65535&r)+(65535&a),d=(r>>16)+(a>>16)+(e>>16);return d<<16|65535&e}function rol(r,a){return r<<a|r>>>32-a}var helpers=require("./helpers");module.exports=function(r){return helpers.hash(r,core_sha1,20,!0)};


},{"./helpers":81}],86:[function(require,module,exports){
  var helpers=require("./helpers"),safe_add=function(a,e){var r=(65535&a)+(65535&e),d=(a>>16)+(e>>16)+(r>>16);return d<<16|65535&r},S=function(a,e){return a>>>e|a<<32-e},R=function(a,e){return a>>>e},Ch=function(a,e,r){return a&e^~a&r},Maj=function(a,e,r){return a&e^a&r^e&r},Sigma0256=function(a){return S(a,2)^S(a,13)^S(a,22)},Sigma1256=function(a){return S(a,6)^S(a,11)^S(a,25)},Gamma0256=function(a){return S(a,7)^S(a,18)^R(a,3)},Gamma1256=function(a){return S(a,17)^S(a,19)^R(a,10)},core_sha256=function(a,e){var r,d,n,f,s,t,u,_,o,i,S,c,m=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),h=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),g=new Array(64);a[e>>5]|=128<<24-e%32,a[(e+64>>9<<4)+15]=e;for(var o=0;o<a.length;o+=16){r=h[0],d=h[1],n=h[2],f=h[3],s=h[4],t=h[5],u=h[6],_=h[7];for(var i=0;64>i;i++)16>i?g[i]=a[i+o]:g[i]=safe_add(safe_add(safe_add(Gamma1256(g[i-2]),g[i-7]),Gamma0256(g[i-15])),g[i-16]),S=safe_add(safe_add(safe_add(safe_add(_,Sigma1256(s)),Ch(s,t,u)),m[i]),g[i]),c=safe_add(Sigma0256(r),Maj(r,d,n)),_=u,u=t,t=s,s=safe_add(f,S),f=n,n=d,d=r,r=safe_add(S,c);h[0]=safe_add(r,h[0]),h[1]=safe_add(d,h[1]),h[2]=safe_add(n,h[2]),h[3]=safe_add(f,h[3]),h[4]=safe_add(s,h[4]),h[5]=safe_add(t,h[5]),h[6]=safe_add(u,h[6]),h[7]=safe_add(_,h[7])}return h};module.exports=function(a){return helpers.hash(a,core_sha256,32,!0)};


},{"./helpers":81}],87:[function(require,module,exports){
  function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,0,"function"==typeof console.trace&&0)}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};


},{}],88:[function(require,module,exports){
  var http=module.exports,EventEmitter=require("events").EventEmitter,Request=require("./lib/request"),url=require("url");http.request=function(e,t){"string"==typeof e&&(e=url.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.scheme||(e.scheme=window.location.protocol.split(":")[0]),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https"==e.scheme?443:80);var o=new Request(new xhrHttp,e);return t&&o.on("response",t),o},http.get=function(e,t){e.method="GET";var o=http.request(e,t);return o.end(),o},http.Agent=function(){},http.Agent.defaultMaxSockets=4;var xhrHttp=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var o=new window.ActiveXObject(e[t]);return function(){if(o){var r=o;return o=null,r}return new window.ActiveXObject(e[t])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();http.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};


},{"./lib/request":89,"events":87,"url":266}],89:[function(require,module,exports){
  var Stream=require("stream"),Response=require("./response"),Base64=require("Base64"),inherits=require("inherits"),Request=module.exports=function(e,t){var r=this;r.writable=!0,r.xhr=e,r.body=[],r.uri=(t.scheme||"http")+"://"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(s){}if(e.open(t.method||"GET",r.uri,!0),r._headers={},t.headers)for(var o=objectKeys(t.headers),i=0;i<o.length;i++){var n=o[i];if(r.isSafeRequestHeader(n)){var a=t.headers[n];r.setHeader(n,a)}}t.auth&&this.setHeader("Authorization","Basic "+Base64.btoa(t.auth));var h=new Response;h.on("close",function(){r.emit("close")}),h.on("ready",function(){r.emit("response",h)}),e.onreadystatechange=function(){e.__aborted||h.handle(e)}};inherits(Request,Stream),Request.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},Request.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},Request.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},Request.prototype.write=function(e){this.body.push(e)},Request.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},Request.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=objectKeys(this._headers),r=0;r<t.length;r++){var s=t[r],o=this._headers[s];if(isArray(o))for(var i=0;i<o.length;i++)this.xhr.setRequestHeader(s,o[i]);else this.xhr.setRequestHeader(s,o)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(isArray(this.body[0])){for(var n=[],r=0;r<this.body.length;r++)n.push.apply(n,this.body[r]);this.xhr.send(n)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var a=0,r=0;r<this.body.length;r++)a+=this.body[r].length;for(var n=new this.body[0].constructor(a),h=0,r=0;r<this.body.length;r++)for(var d=this.body[r],i=0;i<d.length;i++)n[h++]=d[i];this.xhr.send(n)}else{for(var n="",r=0;r<this.body.length;r++)n+=this.body[r].toString();this.xhr.send(n)}},Request.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],Request.prototype.isSafeRequestHeader=function(e){return e?-1===indexOf(Request.unsafeHeaders,e.toLowerCase()):!1};var objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1};


},{"./response":90,"Base64":91,"inherits":93,"stream":101}],90:[function(require,module,exports){
  function parseHeaders(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),s={},r=0;r<t.length;r++){var a=t[r];if(""!==a){var i=a.match(/^([^:]+):\s*(.*)/);if(i){var o=i[1].toLowerCase(),n=i[2];void 0!==s[o]?isArray(s[o])?s[o].push(n):s[o]=[s[o],n]:s[o]=n}else s[a]=!0}}return s}var Stream=require("stream"),util=require("util"),Response=module.exports=function(e){this.offset=0,this.readable=!0};util.inherits(Response,Stream);var capable={streaming:!0,status2:!0};Response.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},Response.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},Response.prototype.handle=function(e){if(2===e.readyState&&capable.status2){try{this.statusCode=e.status,this.headers=parseHeaders(e)}catch(t){capable.status2=!1}capable.status2&&this.emit("ready")}else if(capable.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=parseHeaders(e),this.emit("ready"))}catch(t){}try{this._emitData(e)}catch(t){capable.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},Response.prototype._emitData=function(e){var t=this.getResponse(e);return t.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};


},{"stream":101,"util":109}],91:[function(require,module,exports){
  !function(){function t(t){this.message=t}var e="undefined"!=typeof exports?exports:this,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var o,n,a=0,i=r,c="";e.charAt(0|a)||(i="=",a%1);c+=i.charAt(63&o>>8-a%1*8)){if(n=e.charCodeAt(a+=.75),n>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");o=o<<8|n}return c}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,n,a=0,i=0,c="";n=e.charAt(i++);~n&&(o=a%4?64*o+n:n,a++%4)?c+=String.fromCharCode(255&o>>(-2*a&6)):0)n=r.indexOf(n);return c})}();


},{}],92:[function(require,module,exports){
  var http=require("http"),https=module.exports;for(var key in http)http.hasOwnProperty(key)&&(https[key]=http[key]);https.request=function(t,e){return t||(t={}),t.scheme="https",http.request.call(this,t,e)};


},{"http":88}],93:[function(require,module,exports){
  "function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};


},{}],94:[function(require,module,exports){
  (function (process){
    function normalizeArray(r,t){for(var e=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function filter(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(r){return splitPathRe.exec(r).slice(1)};exports.resolve=function(){for(var r="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var n=e>=0?arguments[e]:process.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(r=n+"/"+r,t="/"===n.charAt(0))}return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),(t?"/":"")+r||"."},exports.normalize=function(r){var t=exports.isAbsolute(r),e="/"===substr(r,-1);return r=normalizeArray(filter(r.split("/"),function(r){return!!r}),!t).join("/"),r||t||(r="."),r&&e&&(r+="/"),(t?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),s=e(t.split("/")),i=Math.min(n.length,s.length),o=i,u=0;i>u;u++)if(n[u]!==s[u]){o=u;break}for(var l=[],u=o;u<n.length;u++)l.push("..");return l=l.concat(s.slice(o)),l.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){var t=splitPath(r),e=t[0],n=t[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},exports.basename=function(r,t){var e=splitPath(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){return splitPath(r)[3]};var substr="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return 0>t&&(t=r.length+t),r.substr(t,e)};


  }).call(this,require("Zbi7gb"))
},{"Zbi7gb":95}],95:[function(require,module,exports){
  function noop(){}var process=module.exports={};process.nextTick=function(){var o="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(o)return function(o){return window.setImmediate(o)};if(e){var s=[];return window.addEventListener("message",function(o){var e=o.source;if((e===window||null===e)&&"process-tick"===o.data&&(o.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(o){s.push(o),window.postMessage("process-tick","*")}}return function(o){setTimeout(o,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(o){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(o){throw new Error("process.chdir is not supported")};


},{}],96:[function(require,module,exports){
  (function (global){
    !function(o){function e(o){throw RangeError(L[o])}function n(o,e){for(var n=o.length;n--;)o[n]=e(o[n]);return o}function t(o,e){return n(o.split(S),e).join(".")}function r(o){for(var e,n,t=[],r=0,u=o.length;u>r;)e=o.charCodeAt(r++),e>=55296&&56319>=e&&u>r?(n=o.charCodeAt(r++),56320==(64512&n)?t.push(((1023&e)<<10)+(1023&n)+65536):(t.push(e),r--)):t.push(e);return t}function u(o){return n(o,function(o){var e="";return o>65535&&(o-=65536,e+=R(o>>>10&1023|55296),o=56320|1023&o),e+=R(o)}).join("")}function i(o){return 10>o-48?o-22:26>o-65?o-65:26>o-97?o-97:x}function f(o,e){return o+22+75*(26>o)-((0!=e)<<5)}function c(o,e,n){var t=0;for(o=n?P(o/m):o>>1,o+=P(o/e);o>M*C>>1;t+=x)o=P(o/M);return P(t+(M+1)*o/(o+j))}function l(o){var n,t,r,f,l,d,s,a,p,h,v=[],g=o.length,w=0,j=I,m=A;for(t=o.lastIndexOf(F),0>t&&(t=0),r=0;t>r;++r)o.charCodeAt(r)>=128&&e("not-basic"),v.push(o.charCodeAt(r));for(f=t>0?t+1:0;g>f;){for(l=w,d=1,s=x;f>=g&&e("invalid-input"),a=i(o.charCodeAt(f++)),(a>=x||a>P((b-w)/d))&&e("overflow"),w+=a*d,p=m>=s?y:s>=m+C?C:s-m,!(p>a);s+=x)h=x-p,d>P(b/h)&&e("overflow"),d*=h;n=v.length+1,m=c(w-l,n,0==l),P(w/n)>b-j&&e("overflow"),j+=P(w/n),w%=n,v.splice(w++,0,j)}return u(v)}function d(o){var n,t,u,i,l,d,s,a,p,h,v,g,w,j,m,E=[];for(o=r(o),g=o.length,n=I,t=0,l=A,d=0;g>d;++d)v=o[d],128>v&&E.push(R(v));for(u=i=E.length,i&&E.push(F);g>u;){for(s=b,d=0;g>d;++d)v=o[d],v>=n&&s>v&&(s=v);for(w=u+1,s-n>P((b-t)/w)&&e("overflow"),t+=(s-n)*w,n=s,d=0;g>d;++d)if(v=o[d],n>v&&++t>b&&e("overflow"),v==n){for(a=t,p=x;h=l>=p?y:p>=l+C?C:p-l,!(h>a);p+=x)m=a-h,j=x-h,E.push(R(f(h+m%j,0))),a=P(m/j);E.push(R(f(a,0))),l=c(t,w,u==i),t=0,++u}++t,++n}return E.join("")}function s(o){return t(o,function(o){return E.test(o)?l(o.slice(4).toLowerCase()):o})}function a(o){return t(o,function(o){return O.test(o)?"xn--"+d(o):o})}var p="object"==typeof exports&&exports,h="object"==typeof module&&module&&module.exports==p&&module,v="object"==typeof global&&global;(v.global===v||v.window===v)&&(o=v);var g,w,b=2147483647,x=36,y=1,C=26,j=38,m=700,A=72,I=128,F="-",E=/^xn--/,O=/[^ -~]/,S=/\x2E|\u3002|\uFF0E|\uFF61/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=x-y,P=Math.floor,R=String.fromCharCode;if(g={version:"1.2.4",ucs2:{decode:r,encode:u},decode:l,encode:d,toASCII:a,toUnicode:s},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return g});else if(p&&!p.nodeType)if(h)h.exports=g;else for(w in g)g.hasOwnProperty(w)&&(p[w]=g[w]);else o.punycode=g}(this);


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],97:[function(require,module,exports){
  "use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;p>y;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};


},{}],98:[function(require,module,exports){
  "use strict";function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?r[n].map(function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};


},{}],99:[function(require,module,exports){
  "use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");


},{"./decode":97,"./encode":98}],100:[function(require,module,exports){
  function Duplex(e){return this instanceof Duplex?(Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(e)}function onend(){if(!this.allowHalfOpen&&!this._writableState.ended){var e=this;setImmediate(function(){e.end()})}}module.exports=Duplex;var inherits=require("inherits"),setImmediate=require("process/browser.js").nextTick,Readable=require("./readable.js"),Writable=require("./writable.js");inherits(Duplex,Readable),Duplex.prototype.write=Writable.prototype.write,Duplex.prototype.end=Writable.prototype.end,Duplex.prototype._write=Writable.prototype._write;


},{"./readable.js":104,"./writable.js":106,"inherits":93,"process/browser.js":102}],101:[function(require,module,exports){
  function Stream(){EE.call(this)}module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");inherits(Stream,EE),Stream.Readable=require("./readable.js"),Stream.Writable=require("./writable.js"),Stream.Duplex=require("./duplex.js"),Stream.Transform=require("./transform.js"),Stream.PassThrough=require("./passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,r){function t(r){e.writable&&!1===e.write(r)&&m.pause&&m.pause()}function n(){m.readable&&m.resume&&m.resume()}function o(){u||(u=!0,e.end())}function i(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(a(),0===EE.listenerCount(this,"error"))throw e}function a(){m.removeListener("data",t),e.removeListener("drain",n),m.removeListener("end",o),m.removeListener("close",i),m.removeListener("error",s),e.removeListener("error",s),m.removeListener("end",a),m.removeListener("close",a),e.removeListener("close",a)}var m=this;m.on("data",t),e.on("drain",n),e._isStdio||r&&r.end===!1||(m.on("end",o),m.on("close",i));var u=!1;return m.on("error",s),e.on("error",s),m.on("end",a),m.on("close",a),e.on("close",a),e.emit("pipe",m),e};


},{"./duplex.js":100,"./passthrough.js":103,"./readable.js":104,"./transform.js":105,"./writable.js":106,"events":87,"inherits":93}],102:[function(require,module,exports){
  var process=module.exports={};process.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(n){var o=[];return window.addEventListener("message",function(e){var n=e.source;if((n===window||null===n)&&"process-tick"===e.data&&(e.stopPropagation(),o.length>0)){var r=o.shift();r()}},!0),function(e){o.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")};


},{}],103:[function(require,module,exports){
  function PassThrough(r){return this instanceof PassThrough?void Transform.call(this,r):new PassThrough(r)}module.exports=PassThrough;var Transform=require("./transform.js"),inherits=require("inherits");inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,o){o(null,r)};


},{"./transform.js":105,"inherits":93}],104:[function(require,module,exports){
  (function (process){
    function ReadableState(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){return this instanceof Readable?(this._readableState=new ReadableState(e,this),this.readable=!0,void Stream.call(this)):new Readable(e)}function readableAddChunk(e,t,n,r,a){var i=chunkInvalid(t,n);if(i)e.emit("error",i);else if(null===n||void 0===n)t.reading=!1,t.ended||onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!a){var d=new Error("stream.push() after EOF");e.emit("error",d)}else if(t.endEmitted&&a){var d=new Error("stream.unshift() after end event");e.emit("error",d)}else!t.decoder||a||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,a?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&emitReadable(e),maybeReadMore(e,t);else a||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function roundUpToNextPowerOf2(e){if(e>=MAX_HWM)e=MAX_HWM;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function howMuchToRead(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||null===e?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=roundUpToNextPowerOf2(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function chunkInvalid(e,t){var n=null;return Buffer.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||n||(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?emitReadable(e):endReadable(e)}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?setImmediate(function(){emitReadable_(e)}):emitReadable_(e))}function emitReadable_(e){e.emit("readable")}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,setImmediate(function(){maybeReadMore_(e,t)}))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&flow(e)}}function flow(e){function t(e,t,a){var i=e.write(n);!1===i&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):forEach(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(EE.listenerCount(e,"data")>0&&emitDataEvents(e))):void(r.ranOut=!0)}function pipeOnReadable(){this._readableState.ranOut&&(this._readableState.ranOut=!1,flow(this))}function emitDataEvents(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var r=t||!1,a=!1;e.readable=!0,e.pipe=Stream.prototype.pipe,e.on=e.addListener=Stream.prototype.on,e.on("readable",function(){a=!0;for(var t;!r&&null!==(t=e.read());)e.emit("data",t);null===t&&(a=!1,e._readableState.needReadable=!0)}),e.pause=function(){r=!0,this.emit("pause")},e.resume=function(){r=!1,a?setImmediate(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function fromList(e,t){var n,r=t.buffer,a=t.length,i=!!t.decoder,d=!!t.objectMode;if(0===r.length)return null;if(0===a)n=null;else if(d)n=r.shift();else if(!e||e>=a)n=i?r.join(""):Buffer.concat(r,a),r.length=0;else if(e<r[0].length){var o=r[0];n=o.slice(0,e),r[0]=o.slice(e)}else if(e===r[0].length)n=r.shift();else{n=i?"":new Buffer(e);for(var l=0,s=0,u=r.length;u>s&&e>l;s++){var o=r[0],h=Math.min(e-l,o.length);i?n+=o.slice(0,h):o.copy(n,l,0,h),h<o.length?r[0]=o.slice(h):r.shift(),l+=h}}return n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,setImmediate(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function forEach(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}module.exports=Readable,Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter,Stream=require("./index.js"),Buffer=require("buffer").Buffer,setImmediate=require("process/browser.js").nextTick,StringDecoder,inherits=require("inherits");inherits(Readable,Stream),Readable.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new Buffer(e,t),t="")),readableAddChunk(this,n,e,t,!1)},Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)},Readable.prototype.setEncoding=function(e){StringDecoder||(StringDecoder=require("string_decoder").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e};var MAX_HWM=8388608;Readable.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return emitReadable(this),null;if(e=howMuchToRead(e,t),0===e&&t.ended)return 0===t.length&&endReadable(this),null;var r=t.needReadable;t.length-e<=t.highWaterMark&&(r=!0),(t.ended||t.reading)&&(r=!1),r&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=howMuchToRead(n,t));var a;return a=e>0?fromList(e,t):null,null===a&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&endReadable(this),a},Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(e,t){function n(e){e===s&&a()}function r(){e.end()}function a(){e.removeListener("close",d),e.removeListener("finish",o),e.removeListener("drain",p),e.removeListener("error",i),e.removeListener("unpipe",n),s.removeListener("end",r),s.removeListener("end",a),(!e._writableState||e._writableState.needDrain)&&p()}function i(t){l(),0===c&&0===EE.listenerCount(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",o),l()}function o(){e.removeListener("close",d),l()}function l(){s.unpipe(e)}var s=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=e;break;case 1:u.pipes=[u.pipes,e];break;default:u.pipes.push(e)}u.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,f=h?r:a;u.endEmitted?setImmediate(f):s.once("end",f),e.on("unpipe",n);var p=pipeOnDrain(s);e.on("drain",p);var c=EE.listenerCount(e,"error");return e.once("error",i),e.once("close",d),e.once("finish",o),e.emit("pipe",s),u.flowing||(this.on("readable",pipeOnReadable),u.flowing=!0,setImmediate(function(){flow(s)})),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1;for(var a=0;r>a;a++)n[a].emit("unpipe",this);return this}var a=indexOf(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||emitDataEvents(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&emitReadable(this,r):this.read(0))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){emitDataEvents(this),this.read(0),this.emit("resume")},Readable.prototype.pause=function(){emitDataEvents(this,!0),this.emit("pause")},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(a){if(t.decoder&&(a=t.decoder.write(a)),a&&(t.objectMode||a.length)){var i=r.push(a);i||(n=!0,e.pause())}});for(var a in e)"function"==typeof e[a]&&"undefined"==typeof this[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));var i=["error","close","destroy","pause","resume"];return forEach(i,function(t){e.on(t,function(e){return r.emit.apply(r,t,e)})}),r._read=function(t){n&&(n=!1,e.resume())},r},Readable._fromList=fromList;


  }).call(this,require("Zbi7gb"))
},{"./index.js":101,"Zbi7gb":95,"buffer":78,"events":87,"inherits":93,"process/browser.js":102,"string_decoder":107}],105:[function(require,module,exports){
  function TransformState(r,t){this.afterTransform=function(r,n){return afterTransform(t,r,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function afterTransform(r,t,n){var e=r._transformState;e.transforming=!1;var a=e.writecb;if(!a)return r.emit("error",new Error("no writecb in Transform class"));e.writechunk=null,e.writecb=null,null!==n&&void 0!==n&&r.push(n),a&&a(t);var i=r._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&r._read(i.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r);var t=(this._transformState=new TransformState(r,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(r){done(t,r)}):done(t)})}function done(r,t){if(t)return r.emit("error",t);var n=r._writableState,e=(r._readableState,r._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(e.transforming)throw new Error("calling transform done when still transforming");return r.push(null)}module.exports=Transform;var Duplex=require("./duplex.js"),inherits=require("inherits");inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,n){throw new Error("not implemented")},Transform.prototype._write=function(r,t,n){var e=this._transformState;if(e.writecb=n,e.writechunk=r,e.writeencoding=t,!e.transforming){var a=this._readableState;(e.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};


},{"./duplex.js":100,"inherits":93}],106:[function(require,module,exports){
  function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function WritableState(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.buffer=[]}function Writable(e){return this instanceof Writable||this instanceof Stream.Duplex?(this._writableState=new WritableState(e,this),this.writable=!0,void Stream.call(this)):new Writable(e)}function writeAfterEnd(e,t,r){var i=new Error("write after end");e.emit("error",i),setImmediate(function(){r(i)})}function validChunk(e,t,r,i){var n=!0;if(!Buffer.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");e.emit("error",f),setImmediate(function(){i(f)}),n=!1}return n}function decodeChunk(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new Buffer(t,r)),t}function writeOrBuffer(e,t,r,i,n){r=decodeChunk(t,r,i);var f=t.objectMode?1:r.length;t.length+=f;var o=t.length<t.highWaterMark;return t.needDrain=!o,t.writing?t.buffer.push(new WriteReq(r,i,n)):doWrite(e,t,f,r,i,n),o}function doWrite(e,t,r,i,n,f){t.writelen=r,t.writecb=f,t.writing=!0,t.sync=!0,e._write(i,n,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){r?setImmediate(function(){n(i)}):n(i),e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var f=needFinish(e,r);f||r.bufferProcessing||!r.buffer.length||clearBuffer(e,r),i?setImmediate(function(){afterWrite(e,r,f,n)}):afterWrite(e,r,f,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),i(),r&&finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],n=i.chunk,f=i.encoding,o=i.callback,a=t.objectMode?1:n.length;if(doWrite(e,t,a,n,f,o),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function needFinish(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function finishMaybe(e,t){var r=needFinish(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?setImmediate(r):e.once("finish",r)),t.ended=!0}module.exports=Writable,Writable.WritableState=WritableState;var isUint8Array="undefined"!=typeof Uint8Array?function(e){return e instanceof Uint8Array}:function(e){return e&&e.constructor&&"Uint8Array"===e.constructor.name},isArrayBuffer="undefined"!=typeof ArrayBuffer?function(e){return e instanceof ArrayBuffer}:function(e){return e&&e.constructor&&"ArrayBuffer"===e.constructor.name},inherits=require("inherits"),Stream=require("./index.js"),setImmediate=require("process/browser.js").nextTick,Buffer=require("buffer").Buffer;inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1;return"function"==typeof t&&(r=t,t=null),!Buffer.isBuffer(e)&&isUint8Array(e)&&(e=new Buffer(e)),isArrayBuffer(e)&&"undefined"!=typeof Uint8Array&&(e=new Buffer(new Uint8Array(e))),Buffer.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=function(){}),i.ended?writeAfterEnd(this,i,r):validChunk(this,i,e,r)&&(n=writeOrBuffer(this,i,e,t,r)),n},Writable.prototype._write=function(e,t,r){r(new Error("not implemented"))},Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),i.ending||i.finished||endWritable(this,i,r)};


},{"./index.js":101,"buffer":78,"inherits":93,"process/browser.js":102}],107:[function(require,module,exports){
  function assertEncoding(e){if(e&&!Buffer.isEncoding(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){var t=this.charReceived=e.length%2;return this.charLength=t?2:0,t}function base64DetectIncompleteChar(e){var t=this.charReceived=e.length%3;return this.charLength=t?3:0,t}var Buffer=require("buffer").Buffer,StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(e){for(var t="",r=0;this.charLength;){var h=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,r,h),this.charReceived+=h-r,r=h,this.charReceived<this.charLength)return"";t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,h==e.length)return t;e=e.slice(h,e.length);break}this.charLength+=this.surrogateSize,t=""}var c=this.detectIncompleteChar(e),n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-c,n),this.charReceived=c,n-=c),t+=e.toString(this.encoding,0,n);var n=t.length-1,i=t.charCodeAt(n);if(i>=55296&&56319>=i){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),this.charBuffer.write(t.charAt(t.length-1),this.encoding),t.substring(0,n)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}return t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t};


},{"buffer":78}],108:[function(require,module,exports){
  module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};


},{}],109:[function(require,module,exports){
  (function (process,global){
    function inspect(e,r){var t={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(t.depth=arguments[2]),arguments.length>=4&&(t.colors=arguments[3]),isBoolean(r)?t.showHidden=r:r&&exports._extend(t,r),isUndefined(t.showHidden)&&(t.showHidden=!1),isUndefined(t.depth)&&(t.depth=2),isUndefined(t.colors)&&(t.colors=!1),isUndefined(t.customInspect)&&(t.customInspect=!0),t.colors&&(t.stylize=stylizeWithColor),formatValue(t,e,t.depth)}function stylizeWithColor(e,r){var t=inspect.styles[r];return t?"["+inspect.colors[t][0]+"m"+e+"["+inspect.colors[t][1]+"m":e}function stylizeNoColor(e,r){return e}function arrayToHash(e){var r={};return e.forEach(function(e,t){r[e]=!0}),r}function formatValue(e,r,t){if(e.customInspect&&r&&isFunction(r.inspect)&&r.inspect!==exports.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(t,e);return isString(n)||(n=formatValue(e,n,t)),n}var i=formatPrimitive(e,r);if(i)return i;var o=Object.keys(r),s=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),isError(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(r);if(0===o.length){if(isFunction(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(isRegExp(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(isDate(r))return e.stylize(Date.prototype.toString.call(r),"date");if(isError(r))return formatError(r)}var a="",c=!1,l=["{","}"];if(isArray(r)&&(c=!0,l=["[","]"]),isFunction(r)){var p=r.name?": "+r.name:"";a=" [Function"+p+"]"}if(isRegExp(r)&&(a=" "+RegExp.prototype.toString.call(r)),isDate(r)&&(a=" "+Date.prototype.toUTCString.call(r)),isError(r)&&(a=" "+formatError(r)),0===o.length&&(!c||0==r.length))return l[0]+a+l[1];if(0>t)return isRegExp(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var f;return f=c?formatArray(e,r,t,s,o):o.map(function(n){return formatProperty(e,r,t,s,n,c)}),e.seen.pop(),reduceToSingleString(f,a,l)}function formatPrimitive(e,r){if(isUndefined(r))return e.stylize("undefined","undefined");if(isString(r)){var t="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(t,"string")}return isNumber(r)?e.stylize(""+r,"number"):isBoolean(r)?e.stylize(""+r,"boolean"):isNull(r)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,r,t,n,i){for(var o=[],s=0,u=r.length;u>s;++s)hasOwnProperty(r,String(s))?o.push(formatProperty(e,r,t,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(formatProperty(e,r,t,n,i,!0))}),o}function formatProperty(e,r,t,n,i,o){var s,u,a;if(a=Object.getOwnPropertyDescriptor(r,i)||{value:r[i]},a.get?u=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),hasOwnProperty(n,i)||(s="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(u=isNull(t)?formatValue(e,a.value,null):formatValue(e,a.value,t-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),isUndefined(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function reduceToSingleString(e,r,t){var n=0,i=e.reduce(function(e,r){return n++,r.indexOf("\n")>=0&&n++,e+r.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?t[0]+(""===r?"":r+"\n ")+" "+e.join(",\n  ")+" "+t[1]:t[0]+r+" "+e.join(", ")+" "+t[1]}function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return 10>e?"0"+e.toString(10):e.toString(10)}function timestamp(){var e=new Date,r=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],r].join(" ")}function hasOwnProperty(e,r){return Object.prototype.hasOwnProperty.call(e,r)}var formatRegExp=/%[sdj%]/g;exports.format=function(e){if(!isString(e)){for(var r=[],t=0;t<arguments.length;t++)r.push(inspect(arguments[t]));return r.join(" ")}for(var t=1,n=arguments,i=n.length,o=String(e).replace(formatRegExp,function(e){if("%%"===e)return"%";if(t>=i)return e;switch(e){case"%s":return String(n[t++]);case"%d":return Number(n[t++]);case"%j":try{return JSON.stringify(n[t++])}catch(r){return"[Circular]"}default:return e}}),s=n[t];i>t;s=n[++t])o+=isNull(s)||!isObject(s)?" "+s:" "+inspect(s);return o},exports.deprecate=function(e,r){function t(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?0:0,n=!0}return e.apply(this,arguments)}if(isUndefined(global.process))return function(){return exports.deprecate(e,r).apply(this,arguments)};if(process.noDeprecation===!0)return e;var n=!1;return t};var debugs={},debugEnviron;exports.debuglog=function(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){var r=process.pid;debugs[e]=function(){var t=exports.format.apply(exports,arguments);0}}else debugs[e]=function(){};return debugs[e]},exports.inspect=inspect,inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=require("./support/isBuffer");var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.log=function(){0},exports.inherits=require("inherits"),exports._extend=function(e,r){if(!r||!isObject(r))return e;for(var t=Object.keys(r),n=t.length;n--;)e[t[n]]=r[t[n]];return e};


  }).call(this,require("Zbi7gb"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./support/isBuffer":108,"Zbi7gb":95,"inherits":93}],110:[function(require,module,exports){
  "use strict";function EE(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function EventEmitter(){}EventEmitter.prototype._events=void 0,EventEmitter.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,s=new Array(n);n>e;e++)s[e]=this._events[t][e].fn;return s},EventEmitter.prototype.emit=function(t,e,n,s,r,i){if(!this._events||!this._events[t])return!1;var v,o,h=this._events[t],E=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(t,h.fn,!0),E){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,s),!0;case 5:return h.fn.call(h.context,e,n,s,r),!0;case 6:return h.fn.call(h.context,e,n,s,r,i),!0}for(o=1,v=new Array(E-1);E>o;o++)v[o-1]=arguments[o];h.fn.apply(h.context,v)}else{var f,c=h.length;for(o=0;c>o;o++)switch(h[o].once&&this.removeListener(t,h[o].fn,!0),E){case 1:h[o].fn.call(h[o].context);break;case 2:h[o].fn.call(h[o].context,e);break;case 3:h[o].fn.call(h[o].context,e,n);break;default:if(!v)for(f=1,v=new Array(E-1);E>f;f++)v[f-1]=arguments[f];h[o].fn.apply(h[o].context,v)}}return!0},EventEmitter.prototype.on=function(t,e,n){var s=new EE(e,n||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],s]:this._events[t].push(s):this._events[t]=s,this},EventEmitter.prototype.once=function(t,e,n){var s=new EE(e,n||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],s]:this._events[t].push(s):this._events[t]=s,this},EventEmitter.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var s=this._events[t],r=[];if(e&&(s.fn&&(s.fn!==e||n&&!s.once)&&r.push(s),!s.fn))for(var i=0,v=s.length;v>i;i++)(s[i].fn!==e||n&&!s[i].once)&&r.push(s[i]);return r.length?this._events[t]=1===r.length?r[0]:r:delete this._events[t],this},EventEmitter.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.EventEmitter=EventEmitter,EventEmitter.EventEmitter2=EventEmitter,EventEmitter.EventEmitter3=EventEmitter,module.exports=EventEmitter;


},{}],111:[function(require,module,exports){
  !function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Z.type(e);return"function"===n||Z.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(Z.isFunction(t))return Z.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return Z.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(ae.test(t))return Z.filter(t,e,n);t=Z.filter(t,e)}return Z.grep(e,function(e){return U.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=he[e]={};return Z.each(e.match(de)||[],function(e,n){t[n]=!0}),t}function s(){J.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1),Z.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Z.expando+Math.random()}function u(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(be,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:xe.test(n)?Z.parseJSON(n):n}catch(i){}ye.set(e,t,n)}else n=void 0;return n}function l(){return!0}function c(){return!1}function f(){try{return J.activeElement}catch(e){}}function p(e,t){return Z.nodeName(e,"table")&&Z.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Pe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)ve.set(e[n],"globalEval",!t||ve.get(t[n],"globalEval"))}function m(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(ve.hasData(e)&&(o=ve.access(e),s=ve.set(t,o),l=o.events)){delete s.handle,s.events={};for(i in l)for(n=0,r=l[i].length;r>n;n++)Z.event.add(t,i,l[i][n])}ye.hasData(e)&&(a=ye.access(e),u=Z.extend({},a),ye.set(t,u))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Z.nodeName(e,t)?Z.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ne.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function x(t,n){var r,i=Z(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:Z.css(i[0],"display");return i.detach(),o}function b(e){var t=J,n=$e[e];return n||(n=x(e,t),"none"!==n&&n||(We=(We||Z("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=We[0].contentDocument,t.write(),t.close(),n=x(e,t),We.detach()),$e[e]=n),n}function w(e,t,n){var r,i,o,s,a=e.style;return n=n||_e(e),n&&(s=n.getPropertyValue(t)||n[t]),n&&(""!==s||Z.contains(e.ownerDocument,e)||(s=Z.style(e,t)),Ie.test(s)&&Be.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function T(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=Ge.length;i--;)if(t=Ge[i]+n,t in e)return t;return r}function N(e,t,n){var r=Xe.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function k(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;4>o;o+=2)"margin"===n&&(s+=Z.css(e,n+Te[o],!0,i)),r?("content"===n&&(s-=Z.css(e,"padding"+Te[o],!0,i)),"margin"!==n&&(s-=Z.css(e,"border"+Te[o]+"Width",!0,i))):(s+=Z.css(e,"padding"+Te[o],!0,i),"padding"!==n&&(s+=Z.css(e,"border"+Te[o]+"Width",!0,i)));return s}function E(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=_e(e),s="border-box"===Z.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=w(e,t,o),(0>i||null==i)&&(i=e.style[t]),Ie.test(i))return i;r=s&&(Q.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+k(e,t,n||(s?"border":"content"),r,o)+"px"}function S(e,t){for(var n,r,i,o=[],s=0,a=e.length;a>s;s++)r=e[s],r.style&&(o[s]=ve.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&Ce(r)&&(o[s]=ve.access(r,"olddisplay",b(r.nodeName)))):(i=Ce(r),"none"===n&&i||ve.set(r,"olddisplay",i?n:Z.css(r,"display"))));for(s=0;a>s;s++)r=e[s],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function j(e,t,n,r,i){return new j.prototype.init(e,t,n,r,i)}function D(){return setTimeout(function(){Qe=void 0}),Qe=Z.now()}function A(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=Te[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function L(e,t,n){for(var r,i=(nt[t]||[]).concat(nt["*"]),o=0,s=i.length;s>o;o++)if(r=i[o].call(n,t,e))return r}function q(e,t,n){var r,i,o,s,a,u,l,c,f=this,p={},d=e.style,h=e.nodeType&&Ce(e),g=ve.get(e,"fxshow");n.queue||(a=Z._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,Z.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=Z.css(e,"display"),c="none"===l?ve.get(e,"olddisplay")||b(e.nodeName):l,"inline"===c&&"none"===Z.css(e,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Ke.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;h=!0}p[r]=g&&g[r]||Z.style(e,r)}else l=void 0;if(Z.isEmptyObject(p))"inline"===("none"===l?b(e.nodeName):l)&&(d.display=l);else{g?"hidden"in g&&(h=g.hidden):g=ve.access(e,"fxshow",{}),o&&(g.hidden=!h),h?Z(e).show():f.done(function(){Z(e).hide()}),f.done(function(){var t;ve.remove(e,"fxshow");for(t in p)Z.style(e,t,p[t])});for(r in p)s=L(h?g[r]:0,r,f),r in g||(g[r]=s.start,h&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}}function H(e,t){var n,r,i,o,s;for(n in e)if(r=Z.camelCase(n),i=t[r],o=e[n],Z.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),s=Z.cssHooks[r],s&&"expand"in s){o=s.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function O(e,t,n){var r,i,o=0,s=tt.length,a=Z.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Qe||D(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,s=0,u=l.tweens.length;u>s;s++)l.tweens[s].run(o);return a.notifyWith(e,[l,o,n]),1>o&&u?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:Z.extend({},t),opts:Z.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Qe||D(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Z.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),c=l.props;for(H(c,l.opts.specialEasing);s>o;o++)if(r=tt[o].call(l,e,c,l.opts))return r;return Z.map(c,L,l),Z.isFunction(l.opts.start)&&l.opts.start.call(e,l),Z.fx.timer(Z.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(de)||[];if(Z.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function P(e,t,n,r){function i(a){var u;return o[a]=!0,Z.each(e[a]||[],function(e,a){var l=a(t,n,r);return"string"!=typeof l||s||o[l]?s?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),u}var o={},s=e===wt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function M(e,t){var n,r,i=Z.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Z.extend(!0,e,r),e}function R(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s||(s=i)}o=o||s}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function W(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(s=l[u+" "+o]||l["* "+o],!s)for(i in l)if(a=i.split(" "),a[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){s===!0?s=l[i]:l[i]!==!0&&(o=a[0],c.unshift(a[1]));break}if(s!==!0)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(f){return{state:"parsererror",error:s?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function $(e,t,n,r){var i;if(Z.isArray(t))Z.each(t,function(t,i){n||kt.test(e)?r(e,i):$(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==Z.type(t))r(e,t);else for(i in t)$(e+"["+i+"]",t[i],n,r)}function B(e){return Z.isWindow(e)?e:9===e.nodeType&&e.defaultView}var I=[],_=I.slice,z=I.concat,X=I.push,U=I.indexOf,V={},Y=V.toString,G=V.hasOwnProperty,Q={},J=e.document,K="2.1.1",Z=function(e,t){return new Z.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};Z.fn=Z.prototype={jquery:K,constructor:Z,selector:"",length:0,toArray:function(){return _.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:_.call(this)},pushStack:function(e){var t=Z.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Z.each(this,e,t)},map:function(e){return this.pushStack(Z.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(_.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:I.sort,splice:I.splice},Z.extend=Z.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||Z.isFunction(s)||(s={}),a===u&&(s=this,a--);u>a;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],r=e[t],s!==r&&(l&&r&&(Z.isPlainObject(r)||(i=Z.isArray(r)))?(i?(i=!1,o=n&&Z.isArray(n)?n:[]):o=n&&Z.isPlainObject(n)?n:{},s[t]=Z.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},Z.extend({expando:"jQuery"+(K+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Z.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Z.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==Z.type(e)||e.nodeType||Z.isWindow(e)?!1:e.constructor&&!G.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?V[Y.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=Z.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,s=e.length,a=n(e);if(r){if(a)for(;s>o&&(i=t.apply(e[o],r),i!==!1);o++);else for(o in e)if(i=t.apply(e[o],r),i===!1)break}else if(a)for(;s>o&&(i=t.call(e[o],o,e[o]),i!==!1);o++);else for(o in e)if(i=t.call(e[o],o,e[o]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?Z.merge(r,"string"==typeof e?[e]:e):X.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:U.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,s=e.length,a=!n;s>o;o++)r=!t(e[o],o),r!==a&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,s=e.length,a=n(e),u=[];if(a)for(;s>o;o++)i=t(e[o],o,r),null!=i&&u.push(i);else for(o in e)i=t(e[o],o,r),null!=i&&u.push(i);return z.apply([],u)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),Z.isFunction(e)?(r=_.call(arguments,2),i=function(){return e.apply(t||this,r.concat(_.call(arguments)))},i.guid=e.guid=e.guid||Z.guid++,i):void 0},now:Date.now,support:Q}),Z.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){V["[object "+t+"]"]=t.toLowerCase()});var ie=function(e){function t(e,t,n,r){var i,o,s,a,u,l,f,d,h,g;if((t?t.ownerDocument||t:$)!==q&&L(t),t=t||q,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(O&&!r){if(i=ye.exec(e))if(s=i[1]){if(9===a){if(o=t.getElementById(s),!o||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&R(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((s=i[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(s)),n}if(w.qsa&&(!F||!F.test(e))){if(d=f=W,h=t,g=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(l=k(e),(f=t.getAttribute("id"))?d=f.replace(be,"\\$&"):t.setAttribute("id",d),d="[id='"+d+"'] ",u=l.length;u--;)l[u]=d+p(l[u]);h=xe.test(e)&&c(t.parentNode)||t,g=l.join(",")}if(g)try{return Z.apply(n,h.querySelectorAll(g)),n}catch(m){}finally{f||t.removeAttribute("id")}}}return S(e.replace(ue,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[W]=!0,e}function i(e){var t=q.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)T.attrHandle[n[r]]=t}function s(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),s=o.length;s--;)n[i=o[s]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&typeof e.getElementsByTagName!==V&&e}function f(){}function p(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=I++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,s){var a,u,l=[B,o];if(s){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,s))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(u=t[W]||(t[W]={}),(a=u[r])&&a[0]===B&&a[1]===o)return l[2]=a[2];if(u[r]=l,l[2]=e(t,n,s))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function m(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;u>a;a++)(o=e[a])&&(!n||n(o,r,i))&&(s.push(o),l&&t.push(a));return s}function v(e,t,n,i,o,s){return i&&!i[W]&&(i=v(i)),o&&!o[W]&&(o=v(o,s)),r(function(r,s,a,u){var l,c,f,p=[],d=[],h=s.length,v=r||g(t||"*",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:m(v,p,e,a,u),x=n?o||(r?e:h||i)?[]:s:y;if(n&&n(y,x,a,u),i)for(l=m(x,d),i(l,[],a,u),c=l.length;c--;)(f=l[c])&&(x[d[c]]=!(y[d[c]]=f));if(r){if(o||e){if(o){for(l=[],c=x.length;c--;)(f=x[c])&&l.push(y[c]=f);o(null,x=[],l,u)}for(c=x.length;c--;)(f=x[c])&&(l=o?te.call(r,f):p[c])>-1&&(r[l]=!(s[l]=f))}}else x=m(x===s?x.splice(h,x.length):x),o?o(null,s,x,u):Z.apply(s,x)})}function y(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],s=o||T.relative[" "],a=o?1:0,u=d(function(e){return e===t},s,!0),l=d(function(e){return te.call(t,e)>-1},s,!0),c=[function(e,n,r){return!o&&(r||n!==j)||((t=n).nodeType?u(e,n,r):l(e,n,r))}];i>a;a++)if(n=T.relative[e[a].type])c=[d(h(c),n)];else{if(n=T.filter[e[a].type].apply(null,e[a].matches),n[W]){for(r=++a;i>r&&!T.relative[e[r].type];r++);return v(a>1&&h(c),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ue,"$1"),n,r>a&&y(e.slice(a,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}c.push(n)}return h(c)}function x(e,n){var i=n.length>0,o=e.length>0,s=function(r,s,a,u,l){var c,f,p,d=0,h="0",g=r&&[],v=[],y=j,x=r||o&&T.find.TAG("*",l),b=B+=null==y?1:Math.random()||.1,w=x.length;for(l&&(j=s!==q&&s);h!==w&&null!=(c=x[h]);h++){if(o&&c){for(f=0;p=e[f++];)if(p(c,s,a)){u.push(c);break}l&&(B=b)}i&&((c=!p&&c)&&d--,r&&g.push(c))}if(d+=h,i&&h!==d){for(f=0;p=n[f++];)p(g,v,s,a);if(r){if(d>0)for(;h--;)g[h]||v[h]||(v[h]=J.call(u));v=m(v)}Z.apply(u,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(u)}return l&&(B=b,j=y),g};return i?r(s):s}var b,w,T,C,N,k,E,S,j,D,A,L,q,H,O,F,P,M,R,W="sizzle"+-new Date,$=e.document,B=0,I=0,_=n(),z=n(),X=n(),U=function(e,t){return e===t&&(A=!0),0},V="undefined",Y=1<<31,G={}.hasOwnProperty,Q=[],J=Q.pop,K=Q.push,Z=Q.push,ee=Q.slice,te=Q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",re="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=ie.replace("w","w#"),se="\\["+re+"*("+ie+")(?:"+re+"*([*^$|!~]?=)"+re+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+re+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+se+")*)|.*)\\)|)",ue=new RegExp("^"+re+"+|((?:^|[^\\\\])(?:\\\\.)*)"+re+"+$","g"),le=new RegExp("^"+re+"*,"+re+"*"),ce=new RegExp("^"+re+"*([>+~]|"+re+")"+re+"*"),fe=new RegExp("="+re+"*([^\\]'\"]*?)"+re+"*\\]","g"),pe=new RegExp(ae),de=new RegExp("^"+oe+"$"),he={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+re+"*(even|odd|(([+-]|)(\\d*)n|)"+re+"*(?:([+-]|)"+re+"*(\\d+)|))"+re+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+re+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+re+"*((?:-\\d)?\\d*)"+re+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+re+"?|("+re+")|.)","ig"),Te=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Z.apply(Q=ee.call($.childNodes),$.childNodes),Q[$.childNodes.length].nodeType}catch(Ce){Z={apply:Q.length?function(e,t){K.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},N=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},L=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:$,r=n.defaultView;return n!==q&&9===n.nodeType&&n.documentElement?(q=n,H=n.documentElement,O=!N(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){L()},!1):r.attachEvent&&r.attachEvent("onunload",function(){L()})),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=i(function(e){return H.appendChild(e).id=W,!n.getElementsByName||!n.getElementsByName(W).length}),w.getById?(T.find.ID=function(e,t){if(typeof t.getElementById!==V&&O){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){var n=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==V?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==V&&O?t.getElementsByClassName(e):void 0},P=[],F=[],(w.qsa=ve.test(n.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&F.push("[*^$]="+re+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||F.push("\\["+re+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||F.push(":checked")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&F.push("name"+re+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||F.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),F.push(",.*:")})),(w.matchesSelector=ve.test(M=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&i(function(e){w.disconnectedMatch=M.call(e,"div"),M.call(e,"[s!='']:x"),P.push("!=",ae)}),F=F.length&&new RegExp(F.join("|")),P=P.length&&new RegExp(P.join("|")),t=ve.test(H.compareDocumentPosition),R=t||ve.test(H.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return A=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!w.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===$&&R($,e)?-1:t===n||t.ownerDocument===$&&R($,t)?1:D?te.call(D,e)-te.call(D,t):0:4&r?-1:1)}:function(e,t){if(e===t)return A=!0,0;var r,i=0,o=e.parentNode,a=t.parentNode,u=[e],l=[t];if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:D?te.call(D,e)-te.call(D,t):0;if(o===a)return s(e,t);for(r=e;r=r.parentNode;)u.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;u[i]===l[i];)i++;return i?s(u[i],l[i]):u[i]===$?-1:l[i]===$?1:0},n):q},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==q&&L(e),n=n.replace(fe,"='$1']"),!(!w.matchesSelector||!O||P&&P.test(n)||F&&F.test(n)))try{var r=M.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,q,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==q&&L(e),R(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==q&&L(e);var n=T.attrHandle[t.toLowerCase()],r=n&&G.call(T.attrHandle,t.toLowerCase())?n(e,t,!O):void 0;return void 0!==r?r:w.attributes||!O?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(A=!w.detectDuplicates,D=!w.sortStable&&e.slice(0),e.sort(U),A){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return D=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pe.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+re+")"+e+"("+re+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:n?(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n?o===r||o.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),s="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,f,p,d,h,g=o!==s?"nextSibling":"previousSibling",m=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!u&&!a;if(m){if(o){for(;g;){for(f=t;f=f[g];)if(a?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[s?m.firstChild:m.lastChild],s&&y){for(c=m[W]||(m[W]={}),l=c[e]||[],d=l[0]===B&&l[1],p=l[0]===B&&l[2],f=d&&m.childNodes[d];f=++d&&f&&f[g]||(p=d=0)||h.pop();)if(1===f.nodeType&&++p&&f===t){c[e]=[B,d,p];break}}else if(y&&(l=(t[W]||(t[W]={}))[e])&&l[0]===B)p=l[1];else for(;(f=++d&&f&&f[g]||(p=d=0)||h.pop())&&((a?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++p||(y&&((f[W]||(f[W]={}))[e]=[B,p]),f!==t)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[W]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),s=i.length;s--;)r=te.call(e,i[s]),e[r]=!(t[r]=i[s])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=E(e.replace(ue,"$1"));return i[W]?r(function(e,t,n,r){for(var o,s=i(e,null,r,[]),a=e.length;a--;)(o=s[a])&&(e[a]=!(t[a]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Te).toLowerCase(),function(t){var n;do if(n=O?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===H},focus:function(e){return e===q.activeElement&&(!q.hasFocus||q.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},T.pseudos.nth=T.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})T.pseudos[b]=u(b);return f.prototype=T.filters=T.pseudos,T.setFilters=new f,k=t.tokenize=function(e,n){var r,i,o,s,a,u,l,c=z[e+" "];if(c)return n?0:c.slice(0);for(a=e,u=[],l=T.preFilter;a;){(!r||(i=le.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),u.push(o=[])),r=!1,(i=ce.exec(a))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ue," ")}),a=a.slice(r.length));for(s in T.filter)!(i=he[s].exec(a))||l[s]&&!(i=l[s](i))||(r=i.shift(),o.push({value:r,type:s,matches:i}),a=a.slice(r.length));if(!r)break}return n?a.length:a?t.error(e):z(e,u).slice(0)},E=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=y(t[n]),o[W]?r.push(o):i.push(o);o=X(e,x(i,r)),o.selector=e}return o},S=t.select=function(e,t,n,r){var i,o,s,a,u,l="function"==typeof e&&e,f=!r&&k(e=l.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&w.getById&&9===t.nodeType&&O&&T.relative[o[1].type]){if(t=(T.find.ID(s.matches[0].replace(we,Te),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(s=o[i],!T.relative[a=s.type]);)if((u=T.find[a])&&(r=u(s.matches[0].replace(we,Te),xe.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),e=r.length&&p(o),!e)return Z.apply(n,r),n;break}}return(l||E(e,f))(r,t,!O,n,xe.test(e)&&c(t.parentNode)||t),n},w.sortStable=W.split("").sort(U).join("")===W,w.detectDuplicates=!!A,L(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(q.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Z.find=ie,Z.expr=ie.selectors,Z.expr[":"]=Z.expr.pseudos,Z.unique=ie.uniqueSort,Z.text=ie.getText,Z.isXMLDoc=ie.isXML,Z.contains=ie.contains;var oe=Z.expr.match.needsContext,se=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;Z.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Z.find.matchesSelector(r,e)?[r]:[]:Z.find.matches(e,Z.grep(t,function(e){return 1===e.nodeType}))},Z.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(Z(e).filter(function(){
    for(t=0;n>t;t++)if(Z.contains(i[t],this))return!0}));for(t=0;n>t;t++)Z.find(e,i[t],r);return r=this.pushStack(n>1?Z.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&oe.test(e)?Z(e):e||[],!1).length}});var ue,le=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=Z.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:le.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||ue).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Z?t[0]:t,Z.merge(this,Z.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),se.test(n[1])&&Z.isPlainObject(t))for(n in t)Z.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Z.isFunction(e)?"undefined"!=typeof ue.ready?ue.ready(e):e(Z):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Z.makeArray(e,this))};ce.prototype=Z.fn,ue=Z(J);var fe=/^(?:parents|prev(?:Until|All))/,pe={children:!0,contents:!0,next:!0,prev:!0};Z.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Z(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Z.fn.extend({has:function(e){var t=Z(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Z.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=oe.test(e)||"string"!=typeof e?Z(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&Z.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Z.unique(o):o)},index:function(e){return e?"string"==typeof e?U.call(Z(e),this[0]):U.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Z.unique(Z.merge(this.get(),Z(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Z.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Z.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Z.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return Z.dir(e,"nextSibling")},prevAll:function(e){return Z.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Z.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Z.dir(e,"previousSibling",n)},siblings:function(e){return Z.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Z.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Z.merge([],e.childNodes)}},function(e,t){Z.fn[e]=function(n,r){var i=Z.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Z.filter(r,i)),this.length>1&&(pe[e]||Z.unique(i),fe.test(e)&&i.reverse()),this.pushStack(i)}});var de=/\S+/g,he={};Z.Callbacks=function(e){e="string"==typeof e?he[e]||o(e):Z.extend({},e);var t,n,r,i,s,a,u=[],l=!e.once&&[],c=function(o){for(t=e.memory&&o,n=!0,a=i||0,i=0,s=u.length,r=!0;u&&s>a;a++)if(u[a].apply(o[0],o[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,u&&(l?l.length&&c(l.shift()):t?u=[]:f.disable())},f={add:function(){if(u){var n=u.length;!function o(t){Z.each(t,function(t,n){var r=Z.type(n);"function"===r?e.unique&&f.has(n)||u.push(n):n&&n.length&&"string"!==r&&o(n)})}(arguments),r?s=u.length:t&&(i=n,c(t))}return this},remove:function(){return u&&Z.each(arguments,function(e,t){for(var n;(n=Z.inArray(t,u,n))>-1;)u.splice(n,1),r&&(s>=n&&s--,a>=n&&a--)}),this},has:function(e){return e?Z.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],s=0,this},disable:function(){return u=l=t=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,t||f.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!u||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],r?l.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},Z.extend({Deferred:function(e){var t=[["resolve","done",Z.Callbacks("once memory"),"resolved"],["reject","fail",Z.Callbacks("once memory"),"rejected"],["notify","progress",Z.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Z.Deferred(function(n){Z.each(t,function(t,o){var s=Z.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&Z.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Z.extend(e,r):r}},i={};return r.pipe=r.then,Z.each(t,function(e,o){var s=o[2],a=o[3];r[o[1]]=s.add,a&&s.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=s.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=_.call(arguments),s=o.length,a=1!==s||e&&Z.isFunction(e.promise)?s:0,u=1===a?e:Z.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?_.call(arguments):i,r===t?u.notifyWith(n,r):--a||u.resolveWith(n,r)}};if(s>1)for(t=new Array(s),n=new Array(s),r=new Array(s);s>i;i++)o[i]&&Z.isFunction(o[i].promise)?o[i].promise().done(l(i,r,o)).fail(u.reject).progress(l(i,n,t)):--a;return a||u.resolveWith(r,o),u.promise()}});var ge;Z.fn.ready=function(e){return Z.ready.promise().done(e),this},Z.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Z.readyWait++:Z.ready(!0)},ready:function(e){(e===!0?--Z.readyWait:Z.isReady)||(Z.isReady=!0,e!==!0&&--Z.readyWait>0||(ge.resolveWith(J,[Z]),Z.fn.triggerHandler&&(Z(J).triggerHandler("ready"),Z(J).off("ready"))))}}),Z.ready.promise=function(t){return ge||(ge=Z.Deferred(),"complete"===J.readyState?setTimeout(Z.ready):(J.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))),ge.promise(t)},Z.ready.promise();var me=Z.access=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===Z.type(n)){i=!0;for(a in n)Z.access(e,t,a,n[a],!0,o,s)}else if(void 0!==r&&(i=!0,Z.isFunction(r)||(s=!0),l&&(s?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(Z(e),n)})),t))for(;u>a;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o};Z.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},a.uid=1,a.accepts=Z.acceptData,a.prototype={key:function(e){if(!a.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=a.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,Z.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(Z.isEmptyObject(o))Z.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,Z.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),s=this.cache[o];if(void 0===t)this.cache[o]={};else{Z.isArray(t)?r=t.concat(t.map(Z.camelCase)):(i=Z.camelCase(t),t in s?r=[t,i]:(r=i,r=r in s?[r]:r.match(de)||[])),n=r.length;for(;n--;)delete s[r[n]]}},hasData:function(e){return!Z.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var ve=new a,ye=new a,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;Z.extend({hasData:function(e){return ye.hasData(e)||ve.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return ve.access(e,t,n)},_removeData:function(e,t){ve.remove(e,t)}}),Z.fn.extend({data:function(e,t){var n,r,i,o=this[0],s=o&&o.attributes;if(void 0===e){if(this.length&&(i=ye.get(o),1===o.nodeType&&!ve.get(o,"hasDataAttrs"))){for(n=s.length;n--;)s[n]&&(r=s[n].name,0===r.indexOf("data-")&&(r=Z.camelCase(r.slice(5)),u(o,r,i[r])));ve.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ye.set(this,e)}):me(this,function(t){var n,r=Z.camelCase(e);if(o&&void 0===t){if(n=ye.get(o,e),void 0!==n)return n;if(n=ye.get(o,r),void 0!==n)return n;if(n=u(o,r,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,r);ye.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),Z.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ve.get(e,t),n&&(!r||Z.isArray(n)?r=ve.access(e,t,Z.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Z.queue(e,t),r=n.length,i=n.shift(),o=Z._queueHooks(e,t),s=function(){Z.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ve.get(e,n)||ve.access(e,n,{empty:Z.Callbacks("once memory").add(function(){ve.remove(e,[t+"queue",n])})})}}),Z.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Z.queue(this[0],e):void 0===t?this:this.each(function(){var n=Z.queue(this,e,t);Z._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Z.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Z.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Z.Deferred(),o=this,s=this.length,a=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)n=ve.get(o[s],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Te=["Top","Right","Bottom","Left"],Ce=function(e,t){return e=t||e,"none"===Z.css(e,"display")||!Z.contains(e.ownerDocument,e)},Ne=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),Q.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",Q.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var ke="undefined";Q.focusinBubbles="onfocusin"in e;var Ee=/^key/,Se=/^(?:mouse|pointer|contextmenu)|click/,je=/^(?:focusinfocus|focusoutblur)$/,De=/^([^.]*)(?:\.(.+)|)$/;Z.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=ve.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Z.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(t){return typeof Z!==ke&&Z.event.triggered!==t.type?Z.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(de)||[""],l=t.length;l--;)a=De.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d&&(f=Z.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=Z.event.special[d]||{},c=Z.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Z.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||(p=u[d]=[],p.delegateCount=0,f.setup&&f.setup.call(e,r,h,s)!==!1||e.addEventListener&&e.addEventListener(d,s,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),Z.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,m=ve.hasData(e)&&ve.get(e);if(m&&(u=m.events)){for(t=(t||"").match(de)||[""],l=t.length;l--;)if(a=De.exec(t[l])||[],d=g=a[1],h=(a[2]||"").split(".").sort(),d){for(f=Z.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,p=u[d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&f.teardown.call(e,h,m.handle)!==!1||Z.removeEvent(e,d,m.handle),delete u[d])}else for(d in u)Z.event.remove(e,d+t[l],n,r,!0);Z.isEmptyObject(u)&&(delete m.handle,ve.remove(e,"events"))}},trigger:function(t,n,r,i){var o,s,a,u,l,c,f,p=[r||J],d=G.call(t,"type")?t.type:t,h=G.call(t,"namespace")?t.namespace.split("."):[];if(s=a=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!je.test(d+Z.event.triggered)&&(d.indexOf(".")>=0&&(h=d.split("."),d=h.shift(),h.sort()),l=d.indexOf(":")<0&&"on"+d,t=t[Z.expando]?t:new Z.Event(d,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:Z.makeArray(n,[t]),f=Z.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!Z.isWindow(r)){for(u=f.delegateType||d,je.test(u+d)||(s=s.parentNode);s;s=s.parentNode)p.push(s),a=s;a===(r.ownerDocument||J)&&p.push(a.defaultView||a.parentWindow||e)}for(o=0;(s=p[o++])&&!t.isPropagationStopped();)t.type=o>1?u:f.bindType||d,c=(ve.get(s,"events")||{})[t.type]&&ve.get(s,"handle"),c&&c.apply(s,n),c=l&&s[l],c&&c.apply&&Z.acceptData(s)&&(t.result=c.apply(s,n),t.result===!1&&t.preventDefault());return t.type=d,i||t.isDefaultPrevented()||f._default&&f._default.apply(p.pop(),n)!==!1||!Z.acceptData(r)||l&&Z.isFunction(r[d])&&!Z.isWindow(r)&&(a=r[l],a&&(r[l]=null),Z.event.triggered=d,r[d](),Z.event.triggered=void 0,a&&(r[l]=a)),t.result}},dispatch:function(e){e=Z.event.fix(e);var t,n,r,i,o,s=[],a=_.call(arguments),u=(ve.get(this,"events")||{})[e.type]||[],l=Z.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(s=Z.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,r=((Z.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!==this;u=u.parentNode||this)if(u.disabled!==!0||"click"!==e.type){for(r=[],n=0;a>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Z(i,this).index(u)>=0:Z.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Z.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=Se.test(i)?this.mouseHooks:Ee.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new Z.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Z.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Z.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=Z.extend(new Z.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Z.event.trigger(i,null,t):Z.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Z.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Z.Event=function(e,t){return this instanceof Z.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?l:c):this.type=e,t&&Z.extend(this,t),this.timeStamp=e&&e.timeStamp||Z.now(),void(this[Z.expando]=!0)):new Z.Event(e,t)},Z.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=l,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=l,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=l,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Z.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Z.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!Z.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),Q.focusinBubbles||Z.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Z.event.simulate(t,e.target,Z.event.fix(e),!0)};Z.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ve.access(r,t);i||r.addEventListener(e,n,!0),ve.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ve.access(r,t)-1;i?ve.access(r,t,i):(r.removeEventListener(e,n,!0),ve.remove(r,t))}}}),Z.fn.extend({on:function(e,t,n,r,i){var o,s;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(e){return Z().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Z.guid++)),this.each(function(){Z.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Z(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){Z.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Z.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Z.event.trigger(e,t,n,!0):void 0}});var Ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Le=/<([\w:]+)/,qe=/<|&#?\w+;/,He=/<(?:script|style|link)/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Fe=/^$|\/(?:java|ecma)script/i,Pe=/^true\/(.*)/,Me=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Re={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Re.optgroup=Re.option,Re.tbody=Re.tfoot=Re.colgroup=Re.caption=Re.thead,Re.th=Re.td,Z.extend({clone:function(e,t,n){var r,i,o,s,a=e.cloneNode(!0),u=Z.contains(e.ownerDocument,e);if(!(Q.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Z.isXMLDoc(e)))for(s=v(a),o=v(e),r=0,i=o.length;i>r;r++)y(o[r],s[r]);if(t)if(n)for(o=o||v(e),s=s||v(a),r=0,i=o.length;i>r;r++)m(o[r],s[r]);else m(e,a);return s=v(a,"script"),s.length>0&&g(s,!u&&v(e,"script")),a},buildFragment:function(e,t,n,r){for(var i,o,s,a,u,l,c=t.createDocumentFragment(),f=[],p=0,d=e.length;d>p;p++)if(i=e[p],i||0===i)if("object"===Z.type(i))Z.merge(f,i.nodeType?[i]:i);else if(qe.test(i)){for(o=o||c.appendChild(t.createElement("div")),s=(Le.exec(i)||["",""])[1].toLowerCase(),a=Re[s]||Re._default,o.innerHTML=a[1]+i.replace(Ae,"<$1></$2>")+a[2],l=a[0];l--;)o=o.lastChild;Z.merge(f,o.childNodes),o=c.firstChild,o.textContent=""}else f.push(t.createTextNode(i));for(c.textContent="",p=0;i=f[p++];)if((!r||-1===Z.inArray(i,r))&&(u=Z.contains(i.ownerDocument,i),o=v(c.appendChild(i),"script"),u&&g(o),n))for(l=0;i=o[l++];)Fe.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=Z.event.special,s=0;void 0!==(n=e[s]);s++){if(Z.acceptData(n)&&(i=n[ve.expando],i&&(t=ve.cache[i]))){if(t.events)for(r in t.events)o[r]?Z.event.remove(n,r):Z.removeEvent(n,r,t.handle);ve.cache[i]&&delete ve.cache[i]}delete ye.cache[n[ye.expando]]}}}),Z.fn.extend({text:function(e){return me(this,function(e){return void 0===e?Z.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=p(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?Z.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||Z.cleanData(v(n)),n.parentNode&&(t&&Z.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Z.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return Z.clone(this,e,t)})},html:function(e){return me(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!Re[(Le.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ae,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(Z.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Z.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=z.apply([],e);var n,r,i,o,s,a,u=0,l=this.length,c=this,f=l-1,p=e[0],g=Z.isFunction(p);if(g||l>1&&"string"==typeof p&&!Q.checkClone&&Oe.test(p))return this.each(function(n){var r=c.eq(n);g&&(e[0]=p.call(this,n,r.html())),r.domManip(e,t)});if(l&&(n=Z.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(i=Z.map(v(n,"script"),d),o=i.length;l>u;u++)s=n,u!==f&&(s=Z.clone(s,!0,!0),o&&Z.merge(i,v(s,"script"))),t.call(this[u],s,u);if(o)for(a=i[i.length-1].ownerDocument,Z.map(i,h),u=0;o>u;u++)s=i[u],Fe.test(s.type||"")&&!ve.access(s,"globalEval")&&Z.contains(a,s)&&(s.src?Z._evalUrl&&Z._evalUrl(s.src):Z.globalEval(s.textContent.replace(Me,"")))}return this}}),Z.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Z.fn[e]=function(e){for(var n,r=[],i=Z(e),o=i.length-1,s=0;o>=s;s++)n=s===o?this:this.clone(!0),Z(i[s])[t](n),X.apply(r,n.get());return this.pushStack(r)}});var We,$e={},Be=/^margin/,Ie=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),_e=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",s.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(s,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),s=J.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",Q.clearCloneStyle="content-box"===s.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(s),e.getComputedStyle&&Z.extend(Q,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=s.appendChild(J.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),t}}))}(),Z.swap=function(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=s[o];return i};var ze=/^(none|table(?!-c[ea]).+)/,Xe=new RegExp("^("+we+")(.*)$","i"),Ue=new RegExp("^([+-])=("+we+")","i"),Ve={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ge=["Webkit","O","Moz","ms"];Z.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=Z.camelCase(t),u=e.style;return t=Z.cssProps[a]||(Z.cssProps[a]=C(u,a)),s=Z.cssHooks[t]||Z.cssHooks[a],void 0===n?s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t]:(o=typeof n,"string"===o&&(i=Ue.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Z.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||Z.cssNumber[a]||(n+="px"),Q.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n)),void 0)}},css:function(e,t,n,r){var i,o,s,a=Z.camelCase(t);return t=Z.cssProps[a]||(Z.cssProps[a]=C(e.style,a)),s=Z.cssHooks[t]||Z.cssHooks[a],s&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=w(e,t,r)),"normal"===i&&t in Ye&&(i=Ye[t]),""===n||n?(o=parseFloat(i),n===!0||Z.isNumeric(o)?o||0:i):i}}),Z.each(["height","width"],function(e,t){Z.cssHooks[t]={get:function(e,n,r){return n?ze.test(Z.css(e,"display"))&&0===e.offsetWidth?Z.swap(e,Ve,function(){return E(e,t,r)}):E(e,t,r):void 0},set:function(e,n,r){var i=r&&_e(e);return N(e,n,r?k(e,t,r,"border-box"===Z.css(e,"boxSizing",!1,i),i):0)}}}),Z.cssHooks.marginRight=T(Q.reliableMarginRight,function(e,t){return t?Z.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),Z.each({margin:"",padding:"",border:"Width"},function(e,t){Z.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Te[r]+t]=o[r]||o[r-2]||o[0];return i}},Be.test(e)||(Z.cssHooks[e+t].set=N)}),Z.fn.extend({css:function(e,t){return me(this,function(e,t,n){var r,i,o={},s=0;if(Z.isArray(t)){for(r=_e(e),i=t.length;i>s;s++)o[t[s]]=Z.css(e,t[s],!1,r);return o}return void 0!==n?Z.style(e,t,n):Z.css(e,t)},e,t,arguments.length>1)},show:function(){return S(this,!0)},hide:function(){return S(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ce(this)?Z(this).show():Z(this).hide()})}}),Z.Tween=j,j.prototype={constructor:j,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Z.cssNumber[n]?"":"px")},cur:function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},run:function(e){var t,n=j.propHooks[this.prop];return this.options.duration?this.pos=t=Z.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Z.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Z.fx.step[e.prop]?Z.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Z.cssProps[e.prop]]||Z.cssHooks[e.prop])?Z.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Z.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Z.fx=j.prototype.init,Z.fx.step={};var Qe,Je,Ke=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[q],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ze.exec(t),o=i&&i[3]||(Z.cssNumber[e]?"":"px"),s=(Z.cssNumber[e]||"px"!==o&&+r)&&Ze.exec(Z.css(n.elem,e)),a=1,u=20;if(s&&s[3]!==o){o=o||s[3],i=i||[],s=+r||1;do a=a||".5",s/=a,Z.style(n.elem,e,s+o);while(a!==(a=n.cur()/r)&&1!==a&&--u)}return i&&(s=n.start=+s||+r||0,n.unit=o,n.end=i[1]?s+(i[1]+1)*i[2]:+i[2]),n}]};Z.Animation=Z.extend(O,{tweener:function(e,t){Z.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),Z.speed=function(e,t,n){var r=e&&"object"==typeof e?Z.extend({},e):{complete:n||!n&&t||Z.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Z.isFunction(t)&&t};return r.duration=Z.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Z.fx.speeds?Z.fx.speeds[r.duration]:Z.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Z.isFunction(r.old)&&r.old.call(this),r.queue&&Z.dequeue(this,r.queue)},r},Z.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Ce).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Z.isEmptyObject(e),o=Z.speed(t,n,r),s=function(){var t=O(this,Z.extend({},e),o);(i||ve.get(this,"finish"))&&t.stop(!0)};return s.finish=s,i||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Z.timers,s=ve.get(this);if(i)s[i]&&s[i].stop&&r(s[i]);else for(i in s)s[i]&&s[i].stop&&et.test(i)&&r(s[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&Z.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ve.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Z.timers,s=r?r.length:0;for(n.finish=!0,Z.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;s>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);
    delete n.finish})}}),Z.each(["toggle","show","hide"],function(e,t){var n=Z.fn[t];Z.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(A(t,!0),e,r,i)}}),Z.each({slideDown:A("show"),slideUp:A("hide"),slideToggle:A("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Z.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Z.timers=[],Z.fx.tick=function(){var e,t=0,n=Z.timers;for(Qe=Z.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||Z.fx.stop(),Qe=void 0},Z.fx.timer=function(e){Z.timers.push(e),e()?Z.fx.start():Z.timers.pop()},Z.fx.interval=13,Z.fx.start=function(){Je||(Je=setInterval(Z.fx.tick,Z.fx.interval))},Z.fx.stop=function(){clearInterval(Je),Je=null},Z.fx.speeds={slow:600,fast:200,_default:400},Z.fn.delay=function(e,t){return e=Z.fx?Z.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",Q.checkOn=""!==e.value,Q.optSelected=n.selected,t.disabled=!0,Q.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",Q.radioValue="t"===e.value}();var rt,it,ot=Z.expr.attrHandle;Z.fn.extend({attr:function(e,t){return me(this,Z.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Z.removeAttr(this,e)})}}),Z.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===ke?Z.prop(e,t,n):(1===o&&Z.isXMLDoc(e)||(t=t.toLowerCase(),r=Z.attrHooks[t]||(Z.expr.match.bool.test(t)?it:rt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=Z.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void Z.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(de);if(o&&1===e.nodeType)for(;n=o[i++];)r=Z.propFix[n]||n,Z.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!Q.radioValue&&"radio"===t&&Z.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),it={set:function(e,t,n){return t===!1?Z.removeAttr(e,n):e.setAttribute(n,n),n}},Z.each(Z.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ot[t]||Z.find.attr;ot[t]=function(e,t,r){var i,o;return r||(o=ot[t],ot[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,ot[t]=o),i}});var st=/^(?:input|select|textarea|button)$/i;Z.fn.extend({prop:function(e,t){return me(this,Z.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Z.propFix[e]||e]})}}),Z.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!Z.isXMLDoc(e),o&&(t=Z.propFix[t]||t,i=Z.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||st.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),Q.optSelected||(Z.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Z.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Z.propFix[this.toLowerCase()]=this});var at=/[\t\r\n\f]/g;Z.fn.extend({addClass:function(e){var t,n,r,i,o,s,a="string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(de)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");s=Z.trim(r),n.className!==s&&(n.className=s)}return this},removeClass:function(e){var t,n,r,i,o,s,a=0===arguments.length||"string"==typeof e&&e,u=0,l=this.length;if(Z.isFunction(e))return this.each(function(t){Z(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(de)||[];l>u;u++)if(n=this[u],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(at," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");s=e?Z.trim(r):"",n.className!==s&&(n.className=s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):Z.isFunction(e)?this.each(function(n){Z(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=Z(this),o=e.match(de)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===ke||"boolean"===n)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||e===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(at," ").indexOf(t)>=0)return!0;return!1}});var ut=/\r/g;Z.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=Z.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Z(this).val()):e,null==i?i="":"number"==typeof i?i+="":Z.isArray(i)&&(i=Z.map(i,function(e){return null==e?"":e+""})),t=Z.valHooks[this.type]||Z.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return t=Z.valHooks[i.type]||Z.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(ut,""):null==n?"":n)}}}),Z.extend({valHooks:{option:{get:function(e){var t=Z.find.attr(e,"value");return null!=t?t:Z.trim(Z.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,s=o?null:[],a=o?i+1:r.length,u=0>i?a:o?i:0;a>u;u++)if(n=r[u],!(!n.selected&&u!==i||(Q.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Z.nodeName(n.parentNode,"optgroup"))){if(t=Z(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=Z.makeArray(t),s=i.length;s--;)r=i[s],(r.selected=Z.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Z.each(["radio","checkbox"],function(){Z.valHooks[this]={set:function(e,t){return Z.isArray(t)?e.checked=Z.inArray(Z(e).val(),t)>=0:void 0}},Q.checkOn||(Z.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Z.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Z.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Z.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var lt=Z.now(),ct=/\?/;Z.parseJSON=function(e){return JSON.parse(e+"")},Z.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Z.error("Invalid XML: "+e),t};var ft,pt,dt=/#.*$/,ht=/([?&])_=[^&]*/,gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,mt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vt=/^(?:GET|HEAD)$/,yt=/^\/\//,xt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,bt={},wt={},Tt="*/".concat("*");try{pt=location.href}catch(Ct){pt=J.createElement("a"),pt.href="",pt=pt.href}ft=xt.exec(pt.toLowerCase())||[],Z.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt,type:"GET",isLocal:mt.test(ft[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Tt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Z.parseJSON,"text xml":Z.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?M(M(e,Z.ajaxSettings),t):M(Z.ajaxSettings,e)},ajaxPrefilter:F(bt),ajaxTransport:F(wt),ajax:function(e,t){function n(e,t,n,s){var u,c,v,y,b,T=t;2!==x&&(x=2,a&&clearTimeout(a),r=void 0,o=s||"",w.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(y=R(f,w,n)),y=W(f,y,w,u),u?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(Z.lastModified[i]=b),b=w.getResponseHeader("etag"),b&&(Z.etag[i]=b)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=y.state,c=y.data,v=y.error,u=!v)):(v=T,(e||!T)&&(T="error",0>e&&(e=0))),w.status=e,w.statusText=(t||T)+"",u?h.resolveWith(p,[c,T,w]):h.rejectWith(p,[w,T,v]),w.statusCode(m),m=void 0,l&&d.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?c:v]),g.fireWith(p,[w,T]),l&&(d.trigger("ajaxComplete",[w,f]),--Z.active||Z.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,s,a,u,l,c,f=Z.ajaxSetup({},t),p=f.context||f,d=f.context&&(p.nodeType||p.jquery)?Z(p):Z.event,h=Z.Deferred(),g=Z.Callbacks("once memory"),m=f.statusCode||{},v={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!s)for(s={};t=gt.exec(o);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return r&&r.abort(t),n(0,t),this}};if(h.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||pt)+"").replace(dt,"").replace(yt,ft[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=Z.trim(f.dataType||"*").toLowerCase().match(de)||[""],null==f.crossDomain&&(u=xt.exec(f.url.toLowerCase()),f.crossDomain=!(!u||u[1]===ft[1]&&u[2]===ft[2]&&(u[3]||("http:"===u[1]?"80":"443"))===(ft[3]||("http:"===ft[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=Z.param(f.data,f.traditional)),P(bt,f,t,w),2===x)return w;l=f.global,l&&0===Z.active++&&Z.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!vt.test(f.type),i=f.url,f.hasContent||(f.data&&(i=f.url+=(ct.test(i)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=ht.test(i)?i.replace(ht,"$1_="+lt++):i+(ct.test(i)?"&":"?")+"_="+lt++)),f.ifModified&&(Z.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Z.lastModified[i]),Z.etag[i]&&w.setRequestHeader("If-None-Match",Z.etag[i])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Tt+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(p,w,f)===!1||2===x))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=P(wt,f,t,w)){w.readyState=1,l&&d.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},f.timeout));try{x=1,r.send(v,n)}catch(T){if(!(2>x))throw T;n(-1,T)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Z.get(e,t,n,"json")},getScript:function(e,t){return Z.get(e,void 0,t,"script")}}),Z.each(["get","post"],function(e,t){Z[t]=function(e,n,r,i){return Z.isFunction(n)&&(i=i||r,r=n,n=void 0),Z.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),Z.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Z.fn[t]=function(e){return this.on(t,e)}}),Z._evalUrl=function(e){return Z.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Z.fn.extend({wrapAll:function(e){var t;return Z.isFunction(e)?this.each(function(t){Z(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Z(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return Z.isFunction(e)?this.each(function(t){Z(this).wrapInner(e.call(this,t))}):this.each(function(){var t=Z(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Z.isFunction(e);return this.each(function(n){Z(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Z.nodeName(this,"body")||Z(this).replaceWith(this.childNodes)}).end()}}),Z.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Z.expr.filters.visible=function(e){return!Z.expr.filters.hidden(e)};var Nt=/%20/g,kt=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;Z.param=function(e,t){var n,r=[],i=function(e,t){t=Z.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Z.ajaxSettings&&Z.ajaxSettings.traditional),Z.isArray(e)||e.jquery&&!Z.isPlainObject(e))Z.each(e,function(){i(this.name,this.value)});else for(n in e)$(n,e[n],t,i);return r.join("&").replace(Nt,"+")},Z.fn.extend({serialize:function(){return Z.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Z.prop(this,"elements");return e?Z.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Z(this).is(":disabled")&&jt.test(this.nodeName)&&!St.test(e)&&(this.checked||!Ne.test(e))}).map(function(e,t){var n=Z(this).val();return null==n?null:Z.isArray(n)?Z.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}}),Z.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Dt=0,At={},Lt={0:200,1223:204},qt=Z.ajaxSettings.xhr();e.ActiveXObject&&Z(e).on("unload",function(){for(var e in At)At[e]()}),Q.cors=!!qt&&"withCredentials"in qt,Q.ajax=qt=!!qt,Z.ajaxTransport(function(e){var t;return Q.cors||qt&&!e.crossDomain?{send:function(n,r){var i,o=e.xhr(),s=++Dt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete At[s],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(Lt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=At[s]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),Z.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Z.globalEval(e),e}}}),Z.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Z.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Z("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ht=[],Ot=/(=)\?(?=&|$)|\?\?/;Z.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||Z.expando+"_"+lt++;return this[e]=!0,e}}),Z.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,s,a=t.jsonp!==!1&&(Ot.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ot.test(t.data)&&"data");return a||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=Z.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Ot,"$1"+i):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return s||Z.error(i+" was not called"),s[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){s=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Ht.push(i)),s&&Z.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),Z.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=se.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=Z.buildFragment([e],t,i),i&&i.length&&Z(i).remove(),Z.merge([],r.childNodes))};var Ft=Z.fn.load;Z.fn.load=function(e,t,n){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return a>=0&&(r=Z.trim(e.slice(a)),e=e.slice(0,a)),Z.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),s.length>0&&Z.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?Z("<div>").append(Z.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){s.each(n,o||[e.responseText,t,e])}),this},Z.expr.filters.animated=function(e){return Z.grep(Z.timers,function(t){return e===t.elem}).length};var Pt=e.document.documentElement;Z.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l,c=Z.css(e,"position"),f=Z(e),p={};"static"===c&&(e.style.position="relative"),a=f.offset(),o=Z.css(e,"top"),u=Z.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(o+u).indexOf("auto")>-1,l?(r=f.position(),s=r.top,i=r.left):(s=parseFloat(o)||0,i=parseFloat(u)||0),Z.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(p.top=t.top-a.top+s),null!=t.left&&(p.left=t.left-a.left+i),"using"in t?t.using.call(e,p):f.css(p)}},Z.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Z.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;if(o)return t=o.documentElement,Z.contains(t,r)?(typeof r.getBoundingClientRect!==ke&&(i=r.getBoundingClientRect()),n=B(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===Z.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Z.nodeName(e[0],"html")||(r=e.offset()),r.top+=Z.css(e[0],"borderTopWidth",!0),r.left+=Z.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-Z.css(n,"marginTop",!0),left:t.left-r.left-Z.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Pt;e&&!Z.nodeName(e,"html")&&"static"===Z.css(e,"position");)e=e.offsetParent;return e||Pt})}}),Z.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;Z.fn[t]=function(i){return me(this,function(t,i,o){var s=B(t);return void 0===o?s?s[n]:t[i]:void(s?s.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),Z.each(["top","left"],function(e,t){Z.cssHooks[t]=T(Q.pixelPosition,function(e,n){return n?(n=w(e,t),Ie.test(n)?Z(e).position()[t]+"px":n):void 0})}),Z.each({Height:"height",Width:"width"},function(e,t){Z.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Z.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),s=n||(r===!0||i===!0?"margin":"border");return me(this,function(t,n,r){var i;return Z.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?Z.css(t,n,s):Z.style(t,n,r,s)},t,o?r:void 0,o,null)}})}),Z.fn.size=function(){return this.length},Z.fn.andSelf=Z.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Z});var Mt=e.jQuery,Rt=e.$;return Z.noConflict=function(t){return e.$===Z&&(e.$=Rt),t&&e.jQuery===Z&&(e.jQuery=Mt),Z},typeof t===ke&&(e.jQuery=e.$=Z),Z});


},{}],112:[function(require,module,exports){
  module.exports=require("./lib/");


},{"./lib/":113}],113:[function(require,module,exports){
  function lookup(e,r){"object"==typeof e&&(r=e,e=void 0),r=r||{};var o,c=url(e),a=c.source,t=c.id;return r.forceNew||r["force new connection"]||!1===r.multiplex?(debug("ignoring socket cache for %s",a),o=Manager(a,r)):(cache[t]||(debug("new io instance for %s",a),cache[t]=Manager(a,r)),o=cache[t]),o.socket(c.path)}var url=require("./url"),parser=require("socket.io-parser"),Manager=require("./manager"),debug=require("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};exports.protocol=parser.protocol,exports.connect=lookup,exports.Manager=require("./manager"),exports.Socket=require("./socket");


},{"./manager":114,"./socket":116,"./url":117,"debug":121,"socket.io-parser":155}],114:[function(require,module,exports){
  function Manager(e,t){return this instanceof Manager?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new parser.Encoder,this.decoder=new parser.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new Manager(e,t)}var url=require("./url"),eio=require("engine.io-client"),Socket=require("./socket"),Emitter=require("component-emitter"),parser=require("socket.io-parser"),on=require("./on"),bind=require("component-bind"),object=require("object-component"),debug=require("debug")("socket.io-client:manager"),indexOf=require("indexof"),Backoff=require("backo2");module.exports=Manager,Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},Emitter(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(e){if(debug("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri),this.engine=eio(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=on(t,"open",function(){n.onopen(),e&&e()}),i=on(t,"error",function(t){if(debug("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var o=new Error("Connection error");o.data=t,e(o)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var r=this._timeout;debug("connect attempt will timeout after %d",r);var c=setTimeout(function(){debug("connect attempt timed out after %d",r),o.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",r)},r);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(i),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(on(e,"data",bind(this,"ondata"))),this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded"))),this.subs.push(on(e,"error",bind(this,"onerror"))),this.subs.push(on(e,"close",bind(this,"onclose")))},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){debug("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new Socket(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~indexOf(n.connected,t)||n.connected.push(t)})}return t},Manager.prototype.destroy=function(e){var t=indexOf(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},Manager.prototype.packet=function(e){debug("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},Manager.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){debug("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();debug("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(debug("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(debug("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(debug("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};


},{"./on":115,"./socket":116,"./url":117,"backo2":118,"component-bind":119,"component-emitter":120,"debug":121,"engine.io-client":122,"indexof":151,"object-component":152,"socket.io-parser":155}],115:[function(require,module,exports){
  function on(n,o,e){return n.on(o,e),{destroy:function(){n.removeListener(o,e)}}}module.exports=on;


},{}],116:[function(require,module,exports){
  function Socket(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var parser=require("socket.io-parser"),Emitter=require("component-emitter"),toArray=require("to-array"),on=require("./on"),bind=require("component-bind"),debug=require("debug")("socket.io-client:socket"),hasBin=require("has-binary");module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},emit=Emitter.prototype.emit;Emitter(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[on(t,"open",bind(this,"onopen")),on(t,"packet",bind(this,"onpacket")),on(t,"close",bind(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},Socket.prototype.send=function(){var t=toArray(arguments);return t.unshift("message"),this.emit.apply(this,t),this},Socket.prototype.emit=function(t){if(events.hasOwnProperty(t))return emit.apply(this,arguments),this;var e=toArray(arguments),s=parser.EVENT;hasBin(e)&&(s=parser.BINARY_EVENT);var i={type:s,data:e};return"function"==typeof e[e.length-1]&&(debug("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},Socket.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},Socket.prototype.onopen=function(){debug("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:parser.CONNECT})},Socket.prototype.onclose=function(t){debug("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},Socket.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(t);break;case parser.BINARY_EVENT:this.onevent(t);break;case parser.ACK:this.onack(t);break;case parser.BINARY_ACK:this.onack(t);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",t.data)}},Socket.prototype.onevent=function(t){var e=t.data||[];debug("emitting event %j",e),null!=t.id&&(debug("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?emit.apply(this,e):this.receiveBuffer.push(e)},Socket.prototype.ack=function(t){var e=this,s=!1;return function(){if(!s){s=!0;var i=toArray(arguments);debug("sending ack %j",i);var n=hasBin(i)?parser.BINARY_ACK:parser.ACK;e.packet({type:n,id:t,data:i})}}},Socket.prototype.onack=function(t){debug("calling ack %s with %j",t.id,t.data);var e=this.acks[t.id];e.apply(this,t.data),delete this.acks[t.id]},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)emit.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(debug("performing disconnect (%s)",this.nsp),this.packet({type:parser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this};


},{"./on":115,"component-bind":119,"component-emitter":120,"debug":121,"has-binary":149,"socket.io-parser":155,"to-array":159}],117:[function(require,module,exports){
  (function (global){
    function url(t,o){var r=t,o=o||global.location;return null==t&&(t=o.protocol+"//"+o.host),"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?o.protocol+t:o.hostname+t),/^(https?|wss?):\/\//.test(t)||(debug("protocol-less url %s",t),t="undefined"!=typeof o?o.protocol+"//"+t:"https://"+t),debug("parse %s",t),r=parseuri(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/",r.id=r.protocol+"://"+r.host+":"+r.port,r.href=r.protocol+"://"+r.host+(o&&o.port==r.port?"":":"+r.port),r}var parseuri=require("parseuri"),debug=require("debug")("socket.io-client:url");module.exports=url;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"debug":121,"parseuri":153}],118:[function(require,module,exports){
  function Backoff(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}module.exports=Backoff,Backoff.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),i=Math.floor(o*this.jitter*t);t=0==(1&Math.floor(10*o))?t-i:t+i}return 0|Math.min(t,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(t){this.ms=t},Backoff.prototype.setMax=function(t){this.max=t},Backoff.prototype.setJitter=function(t){this.jitter=t};


},{}],119:[function(require,module,exports){
  var slice=[].slice;module.exports=function(n,r){if("string"==typeof r&&(r=n[r]),"function"!=typeof r)throw new Error("bind() requires a function");var e=slice.call(arguments,2);return function(){return r.apply(n,e.concat(slice.call(arguments)))}};


},{}],120:[function(require,module,exports){
  function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};


},{}],121:[function(require,module,exports){
  function debug(e){return debug.enabled(e)?function(n){n=coerce(n);var u=new Date,o=u-(debug[e]||u);debug[e]=u,n=e+" "+n+" +"+debug.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function coerce(e){return e instanceof Error?e.stack||e.message:e}module.exports=debug,debug.names=[],debug.skips=[],debug.enable=function(e){try{localStorage.debug=e}catch(n){}for(var u=(e||"").split(/[\s,]+/),o=u.length,t=0;o>t;t++)e=u[t].replace("*",".*?"),"-"===e[0]?debug.skips.push(new RegExp("^"+e.substr(1)+"$")):debug.names.push(new RegExp("^"+e+"$"))},debug.disable=function(){debug.enable("")},debug.humanize=function(e){var n=1e3,u=6e4,o=60*u;return e>=o?(e/o).toFixed(1)+"h":e>=u?(e/u).toFixed(1)+"m":e>=n?(e/n|0)+"s":e+"ms"},debug.enabled=function(e){for(var n=0,u=debug.skips.length;u>n;n++)if(debug.skips[n].test(e))return!1;for(var n=0,u=debug.names.length;u>n;n++)if(debug.names[n].test(e))return!0;return!1};try{window.localStorage&&debug.enable(localStorage.debug)}catch(e){}


},{}],122:[function(require,module,exports){
  module.exports=require("./lib/");


},{"./lib/":123}],123:[function(require,module,exports){
  module.exports=require("./socket"),module.exports.parser=require("engine.io-parser");


},{"./socket":124,"engine.io-parser":136}],124:[function(require,module,exports){
  (function (global){
    function noop(){}function Socket(e,t){if(!(this instanceof Socket))return new Socket(e,t);if(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e&&(e=parseuri(e),t.host=e.host,t.secure="https"==e.protocol||"wss"==e.protocol,t.port=e.port,e.query&&(t.query=e.query)),this.secure=null!=t.secure?t.secure:global.location&&"https:"==location.protocol,t.host){var r=t.host.split(":");t.hostname=r.shift(),r.length?t.port=r.pop():t.port||(t.port=this.secure?"443":"80")}this.agent=t.agent||!1,this.hostname=t.hostname||(global.location?location.hostname:"localhost"),this.port=t.port||(global.location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=parseqs.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=t.rejectUnauthorized||null,this.open()}function clone(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}var transports=require("./transports"),Emitter=require("component-emitter"),debug=require("debug")("engine.io-client:socket"),index=require("indexof"),parser=require("engine.io-parser"),parseuri=require("parseuri"),parsejson=require("parsejson"),parseqs=require("parseqs");module.exports=Socket,Socket.priorWebsocketSuccess=!1,Emitter(Socket.prototype),Socket.protocol=parser.protocol,Socket.Socket=Socket,Socket.Transport=require("./transport"),Socket.transports=require("./transports"),Socket.parser=require("engine.io-parser"),Socket.prototype.createTransport=function(e){debug('creating transport "%s"',e);var t=clone(this.query);t.EIO=parser.protocol,t.transport=e,this.id&&(t.sid=this.id);var r=new transports[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return r},Socket.prototype.open=function(){var e;if(this.rememberUpgrade&&Socket.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))e="websocket";else{if(0==this.transports.length){var t=this;return void setTimeout(function(){t.emit("error","No transports available")},0)}e=this.transports[0]}this.readyState="opening";var e;try{e=this.createTransport(e)}catch(r){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},Socket.prototype.setTransport=function(e){debug("setting transport %s",e.name);var t=this;this.transport&&(debug("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},Socket.prototype.probe=function(e){function t(){if(h.onlyBinaryUpgrades){var t=!this.supportsBinary&&h.transport.supportsBinary;c=c||t}c||(debug('probe transport "%s" opened',e),p.send([{type:"ping",data:"probe"}]),p.once("packet",function(t){if(!c)if("pong"==t.type&&"probe"==t.data){if(debug('probe transport "%s" pong',e),h.upgrading=!0,h.emit("upgrading",p),!p)return;Socket.priorWebsocketSuccess="websocket"==p.name,debug('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){c||"closed"!=h.readyState&&(debug("changing transport and sending upgrade packet"),a(),h.setTransport(p),p.send([{type:"upgrade"}]),h.emit("upgrade",p),p=null,h.upgrading=!1,h.flush())})}else{debug('probe transport "%s" failed',e);var r=new Error("probe error");r.transport=p.name,h.emit("upgradeError",r)}}))}function r(){c||(c=!0,a(),p.close(),p=null)}function s(t){var s=new Error("probe error: "+t);s.transport=p.name,r(),debug('probe transport "%s" failed because of error: %s',e,t),h.emit("upgradeError",s)}function o(){s("transport closed")}function i(){s("socket closed")}function n(e){p&&e.name!=p.name&&(debug('"%s" works - aborting "%s"',e.name,p.name),r())}function a(){p.removeListener("open",t),p.removeListener("error",s),p.removeListener("close",o),h.removeListener("close",i),h.removeListener("upgrading",n)}debug('probing transport "%s"',e);var p=this.createTransport(e,{probe:1}),c=!1,h=this;Socket.priorWebsocketSuccess=!1,p.once("open",t),p.once("error",s),p.once("close",o),this.once("close",i),this.once("upgrading",n),p.open()},Socket.prototype.onOpen=function(){if(debug("socket open"),this.readyState="open",Socket.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){debug("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},Socket.prototype.onPacket=function(e){if("opening"==this.readyState||"open"==this.readyState)switch(debug('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(parsejson(e.data));break;case"pong":this.setPing();break;case"error":var t=new Error("server error");t.code=e.data,this.emit("error",t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else debug('packet received with socket readyState "%s"',this.readyState)},Socket.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},Socket.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!=t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},Socket.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){debug("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},Socket.prototype.ping=function(){this.sendPacket("ping")},Socket.prototype.onDrain=function(){for(var e=0;e<this.prevBufferLen;e++)this.callbackBuffer[e]&&this.callbackBuffer[e]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},Socket.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(debug("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},Socket.prototype.write=Socket.prototype.send=function(e,t){return this.sendPacket("message",e,t),this},Socket.prototype.sendPacket=function(e,t,r){if("closing"!=this.readyState&&"closed"!=this.readyState){var s={type:e,data:t};this.emit("packetCreate",s),this.writeBuffer.push(s),this.callbackBuffer.push(r),this.flush()}},Socket.prototype.close=function(){function e(){s.onClose("forced close"),debug("socket closing - telling transport to close"),s.transport.close()}function t(){s.removeListener("upgrade",t),s.removeListener("upgradeError",t),e()}function r(){s.once("upgrade",t),s.once("upgradeError",t)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var s=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():e()}):this.upgrading?r():e()}return this},Socket.prototype.onError=function(e){debug("socket error %j",e),Socket.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},Socket.prototype.onClose=function(e,t){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){debug('socket close with reason: "%s"',e);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){r.writeBuffer=[],r.callbackBuffer=[],r.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t)}},Socket.prototype.filterUpgrades=function(e){for(var t=[],r=0,s=e.length;s>r;r++)~index(this.transports,e[r])&&t.push(e[r]);return t};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./transport":125,"./transports":126,"component-emitter":120,"debug":133,"engine.io-parser":136,"indexof":151,"parsejson":145,"parseqs":146,"parseuri":147}],125:[function(require,module,exports){
  function Transport(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized}var parser=require("engine.io-parser"),Emitter=require("component-emitter");module.exports=Transport,Emitter(Transport.prototype),Transport.timestamps=0,Transport.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},Transport.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},Transport.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(t){var e=parser.decodePacket(t,this.socket.binaryType);this.onPacket(e)},Transport.prototype.onPacket=function(t){this.emit("packet",t)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};


},{"component-emitter":120,"engine.io-parser":136}],126:[function(require,module,exports){
  (function (global){
    function polling(e){var o,t=!1,r=!1,n=!1!==e.jsonp;if(global.location){var i="https:"==location.protocol,l=location.port;l||(l=i?443:80),t=e.hostname!=location.hostname||l!=e.port,r=e.secure!=i}if(e.xdomain=t,e.xscheme=r,o=new XMLHttpRequest(e),"open"in o&&!e.forceJSONP)return new XHR(e);if(!n)throw new Error("JSONP disabled");return new JSONP(e)}var XMLHttpRequest=require("xmlhttprequest"),XHR=require("./polling-xhr"),JSONP=require("./polling-jsonp"),websocket=require("./websocket");exports.polling=polling,exports.websocket=websocket;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./polling-jsonp":127,"./polling-xhr":128,"./websocket":130,"xmlhttprequest":131}],127:[function(require,module,exports){
  (function (global){
    function empty(){}function JSONPPolling(e){Polling.call(this,e),this.query=this.query||{},callbacks||(global.___eio||(global.___eio=[]),callbacks=global.___eio),this.index=callbacks.length;var t=this;callbacks.push(function(e){t.onData(e)}),this.query.j=this.index,global.document&&global.addEventListener&&global.addEventListener("beforeunload",function(){t.script&&(t.script.onerror=empty)},!1)}var Polling=require("./polling"),inherit=require("component-inherit");module.exports=JSONPPolling;var rNewline=/\n/g,rEscapedNewline=/\\n/g,callbacks,index=0;inherit(JSONPPolling,Polling),JSONPPolling.prototype.supportsBinary=!1,JSONPPolling.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),Polling.prototype.doClose.call(this)},JSONPPolling.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},JSONPPolling.prototype.doWrite=function(e,t){function i(){r(),t()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';n=document.createElement(t)}catch(e){n=document.createElement("iframe"),n.name=o.iframeId,n.src="javascript:0"}n.id=o.iframeId,o.form.appendChild(n),o.iframe=n}var o=this;if(!this.form){var n,a=document.createElement("form"),l=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=s,a.method="POST",a.setAttribute("accept-charset","utf-8"),l.name="d",a.appendChild(l),document.body.appendChild(a),this.form=a,this.area=l}this.form.action=this.uri(),r(),e=e.replace(rEscapedNewline,"\\\n"),this.area.value=e.replace(rNewline,"\\n");try{this.form.submit()}catch(c){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&i()}:this.iframe.onload=i};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./polling":129,"component-inherit":132}],128:[function(require,module,exports){
  (function (global){
    function empty(){}function XHR(t){if(Polling.call(this,t),global.location){var e="https:"==location.protocol,s=location.port;s||(s=e?443:80),this.xd=t.hostname!=global.location.hostname||s!=t.port,this.xs=t.secure!=e}}function Request(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.create()}function unloadHandler(){for(var t in Request.requests)Request.requests.hasOwnProperty(t)&&Request.requests[t].abort()}var XMLHttpRequest=require("xmlhttprequest"),Polling=require("./polling"),Emitter=require("component-emitter"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:polling-xhr");module.exports=XHR,module.exports.Request=Request,inherit(XHR,Polling),XHR.prototype.supportsBinary=!0,XHR.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,new Request(t)},XHR.prototype.doWrite=function(t,e){var s="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:s}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},XHR.prototype.doPoll=function(){debug("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},Emitter(Request.prototype),Request.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new XMLHttpRequest(t),s=this;try{if(debug("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async),this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){s.onLoad()},e.onerror=function(){s.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?s.onLoad():setTimeout(function(){s.onError(e.status)},0))},debug("xhr data %s",this.data),e.send(this.data)}catch(r){return void setTimeout(function(){s.onError(r)},0)}global.document&&(this.index=Request.requestsCount++,Request.requests[this.index]=this)},Request.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Request.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},Request.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},Request.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=empty:this.xhr.onreadystatechange=empty,t)try{this.xhr.abort()}catch(e){}global.document&&delete Request.requests[this.index],this.xhr=null}},Request.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(s){}t="application/octet-stream"===e?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(s){this.onError(s)}null!=t&&this.onData(t)},Request.prototype.hasXDR=function(){return"undefined"!=typeof global.XDomainRequest&&!this.xs&&this.enablesXDR},Request.prototype.abort=function(){this.cleanup()},global.document&&(Request.requestsCount=0,Request.requests={},global.attachEvent?global.attachEvent("onunload",unloadHandler):global.addEventListener&&global.addEventListener("beforeunload",unloadHandler,!1));


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./polling":129,"component-emitter":120,"component-inherit":132,"debug":133,"xmlhttprequest":131}],129:[function(require,module,exports){
  function Polling(t){var e=t&&t.forceBase64;(!hasXHR2||e)&&(this.supportsBinary=!1),Transport.call(this,t)}var Transport=require("../transport"),parseqs=require("parseqs"),parser=require("engine.io-parser"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){var t=require("xmlhttprequest"),e=new t({xdomain:!1});return null!=e.responseType}();inherit(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(t){function e(){debug("paused"),i.readyState="paused",t()}var i=this;if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(debug("we are currently polling - waiting to pause"),o++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--o||e()})),this.writable||(debug("we are currently writing - waiting to pause"),o++,this.once("drain",function(){debug("pre-pause writing complete"),--o||e()}))}else e()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(t){var e=this;debug("polling got data %s",t);var i=function(t,i,o){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};parser.decodePayload(t,this.socket.binaryType,i),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){function t(){debug("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(debug("transport open - closing"),t()):(debug("transport not open - deferring close"),this.once("open",t))},Polling.prototype.write=function(t){var e=this;this.writable=!1;var i=function(){e.writable=!0,e.emit("drain")},e=this;parser.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,i)})},Polling.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(t[this.timestampParam]=+new Date+"-"+Transport.timestamps++),this.supportsBinary||t.sid||(t.b64=1),t=parseqs.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(i=":"+this.port),t.length&&(t="?"+t),e+"://"+this.hostname+i+this.path+t};


},{"../transport":125,"component-inherit":132,"debug":133,"engine.io-parser":136,"parseqs":146,"xmlhttprequest":131}],130:[function(require,module,exports){
  function WS(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),Transport.call(this,t)}var Transport=require("../transport"),parser=require("engine.io-parser"),parseqs=require("parseqs"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:websocket"),WebSocket=require("ws");module.exports=WS,inherit(WS,Transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,s={agent:this.agent};s.pfx=this.pfx,s.key=this.key,s.passphrase=this.passphrase,s.cert=this.cert,s.ca=this.ca,s.ciphers=this.ciphers,s.rejectUnauthorized=this.rejectUnauthorized,this.ws=new WebSocket(t,e,s),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(WS.prototype.onData=function(t){var e=this;setTimeout(function(){Transport.prototype.onData.call(e,t)},0)}),WS.prototype.write=function(t){function e(){s.writable=!0,s.emit("drain")}var s=this;this.writable=!1;for(var r=0,o=t.length;o>r;r++)parser.encodePacket(t[r],this.supportsBinary,function(t){try{s.ws.send(t)}catch(e){debug("websocket closed before onclose event")}});setTimeout(e,0)},WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},WS.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",s="";return this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(s=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=+new Date),this.supportsBinary||(t.b64=1),t=parseqs.encode(t),t.length&&(t="?"+t),e+"://"+this.hostname+s+this.path+t},WS.prototype.check=function(){return!(!WebSocket||"__initialize"in WebSocket&&this.name===WS.prototype.name)};


},{"../transport":125,"component-inherit":132,"debug":133,"engine.io-parser":136,"parseqs":146,"ws":148}],131:[function(require,module,exports){
  var hasCORS=require("has-cors");module.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||hasCORS))return new XMLHttpRequest}catch(a){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(a){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}};


},{"has-cors":143}],132:[function(require,module,exports){
  module.exports=function(o,t){var p=function(){};p.prototype=t.prototype,o.prototype=new p,o.prototype.constructor=o};


},{}],133:[function(require,module,exports){
  function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var o=arguments,e=this.useColors;if(o[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+o[0]+(e?"%c ":" ")+"+"+exports.humanize(this.diff),!e)return o;var r="color: "+this.color;o=[o[0],r,"color: inherit"].concat(Array.prototype.slice.call(o,1));var t=0,n=0;return o[0].replace(/%[a-z%]/g,function(o){"%%"!==o&&(t++,"%c"===o&&(n=t))}),o.splice(n,0,r),o}function log(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(o){try{null==o?localStorage.removeItem("debug"):localStorage.debug=o}catch(e){}}function load(){var o;try{o=localStorage.debug}catch(e){}return o}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(o){return JSON.stringify(o)},exports.enable(load());


},{"./debug":134}],134:[function(require,module,exports){
  function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(e){function r(){}function o(){var e=o,r=+new Date,s=r-(prevTime||r);e.diff=s,e.prev=prevTime,e.curr=r,prevTime=r,null==e.useColors&&(e.useColors=exports.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var t=Array.prototype.slice.call(arguments);t[0]=exports.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var n=0;t[0]=t[0].replace(/%([a-z%])/g,function(r,o){if("%%"===r)return r;n++;var s=exports.formatters[o];if("function"==typeof s){var p=t[n];r=s.call(e,p),t.splice(n,1),n--}return r}),"function"==typeof exports.formatArgs&&(t=exports.formatArgs.apply(e,t));var p=o.log||exports.log||console.log.bind(console);p.apply(e,t)}r.enabled=!1,o.enabled=!0;var s=exports.enabled(e)?o:r;return s.namespace=e,s}function enable(e){exports.save(e);for(var r=(e||"").split(/[\s,]+/),o=r.length,s=0;o>s;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,o;for(r=0,o=exports.skips.length;o>r;r++)if(exports.skips[r].test(e))return!1;for(r=0,o=exports.names.length;o>r;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevColor=0,prevTime;


},{"ms":135}],135:[function(require,module,exports){
  function parse(e){var r=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"h":return a*h;case"minutes":case"minute":case"m":return a*m;case"seconds":case"second":case"s":return a*s;case"ms":return a}}}function short(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function long(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){return e>s?void 0:1.5*e>s?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){return e=e||{},"string"==typeof s?parse(s):e["long"]?long(s):short(s)};


},{}],136:[function(require,module,exports){
  (function (global){
    function encodeBase64Object(e,r){var t="b"+exports.packets[e.type]+e.data.data;return r(t)}function encodeArrayBuffer(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=e.data,a=new Uint8Array(n),o=new Uint8Array(1+n.byteLength);o[0]=packets[e.type];for(var f=0;f<a.length;f++)o[f+1]=a[f];return t(o.buffer)}function encodeBlobAsArrayBuffer(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=new FileReader;return n.onload=function(){e.data=n.result,exports.encodePacket(e,r,!0,t)},n.readAsArrayBuffer(e.data)}function encodeBlob(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);if(dontSendBlobs)return encodeBlobAsArrayBuffer(e,r,t);var n=new Uint8Array(1);n[0]=packets[e.type];var a=new Blob([n.buffer,e.data]);return t(a)}function map(e,r,t){for(var n=new Array(e.length),a=after(e.length,t),o=function(e,t,a){r(t,function(r,t){n[e]=t,a(r,n)})},f=0;f<e.length;f++)o(f,e[f],a)}var keys=require("./keys"),hasBinary=require("has-binary"),sliceBuffer=require("arraybuffer.slice"),base64encoder=require("base64-arraybuffer"),after=require("after"),utf8=require("utf8"),isAndroid=navigator.userAgent.match(/Android/i),isPhantomJS=/PhantomJS/i.test(navigator.userAgent),dontSendBlobs=isAndroid||isPhantomJS;exports.protocol=3;var packets=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},packetslist=keys(packets),err={type:"error",data:"parser error"},Blob=require("blob");exports.encodePacket=function(e,r,t,n){"function"==typeof r&&(n=r,r=!1),"function"==typeof t&&(n=t,t=null);var a=void 0===e.data?void 0:e.data.buffer||e.data;if(global.ArrayBuffer&&a instanceof ArrayBuffer)return encodeArrayBuffer(e,r,n);if(Blob&&a instanceof global.Blob)return encodeBlob(e,r,n);if(a&&a.base64)return encodeBase64Object(e,n);var o=packets[e.type];return void 0!==e.data&&(o+=t?utf8.encode(String(e.data)):String(e.data)),n(""+o)},exports.encodeBase64Packet=function(e,r){var t="b"+exports.packets[e.type];if(Blob&&e.data instanceof Blob){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];r(t+e)},n.readAsDataURL(e.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(o){for(var f=new Uint8Array(e.data),i=new Array(f.length),u=0;u<f.length;u++)i[u]=f[u];a=String.fromCharCode.apply(null,i)}return t+=global.btoa(a),r(t)},exports.decodePacket=function(e,r,t){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return exports.decodeBase64Packet(e.substr(1),r);if(t)try{e=utf8.decode(e)}catch(n){return err}var a=e.charAt(0);return Number(a)==a&&packetslist[a]?e.length>1?{type:packetslist[a],data:e.substring(1)}:{type:packetslist[a]}:err}var o=new Uint8Array(e),a=o[0],f=sliceBuffer(e,1);return Blob&&"blob"===r&&(f=new Blob([f])),{type:packetslist[a],data:f}},exports.decodeBase64Packet=function(e,r){var t=packetslist[e.charAt(0)];if(!global.ArrayBuffer)return{type:t,data:{base64:!0,data:e.substr(1)}};var n=base64encoder.decode(e.substr(1));return"blob"===r&&Blob&&(n=new Blob([n])),{type:t,data:n}},exports.encodePayload=function(e,r,t){function n(e){return e.length+":"+e}function a(e,t){exports.encodePacket(e,o?r:!1,!0,function(e){t(null,n(e))})}"function"==typeof r&&(t=r,r=null);var o=hasBinary(e);return r&&o?Blob&&!dontSendBlobs?exports.encodePayloadAsBlob(e,t):exports.encodePayloadAsArrayBuffer(e,t):e.length?void map(e,a,function(e,r){return t(r.join(""))}):t("0:")},exports.decodePayload=function(e,r,t){if("string"!=typeof e)return exports.decodePayloadAsBinary(e,r,t);"function"==typeof r&&(t=r,r=null);var n;if(""==e)return t(err,0,1);for(var a,o,f="",i=0,u=e.length;u>i;i++){var c=e.charAt(i);if(":"!=c)f+=c;else{if(""==f||f!=(a=Number(f)))return t(err,0,1);if(o=e.substr(i+1,a),f!=o.length)return t(err,0,1);if(o.length){if(n=exports.decodePacket(o,r,!0),err.type==n.type&&err.data==n.data)return t(err,0,1);var s=t(n,i+a,u);if(!1===s)return}i+=a,f=""}}return""!=f?t(err,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(e,r){function t(e,r){exports.encodePacket(e,!0,!0,function(e){return r(null,e)})}return e.length?void map(e,t,function(e,t){var n=t.reduce(function(e,r){var t;return t="string"==typeof r?r.length:r.byteLength,e+t.toString().length+t+2},0),a=new Uint8Array(n),o=0;return t.forEach(function(e){var r="string"==typeof e,t=e;if(r){for(var n=new Uint8Array(e.length),f=0;f<e.length;f++)n[f]=e.charCodeAt(f);t=n.buffer}r?a[o++]=0:a[o++]=1;for(var i=t.byteLength.toString(),f=0;f<i.length;f++)a[o++]=parseInt(i[f]);a[o++]=255;for(var n=new Uint8Array(t),f=0;f<n.length;f++)a[o++]=n[f]}),r(a.buffer)}):r(new ArrayBuffer(0))},exports.encodePayloadAsBlob=function(e,r){function t(e,r){exports.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);e=n.buffer,t[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,f=o.toString(),i=new Uint8Array(f.length+1),a=0;a<f.length;a++)i[a]=parseInt(f[a]);if(i[f.length]=255,Blob){var u=new Blob([t.buffer,i.buffer,e]);r(null,u)}})}map(e,t,function(e,t){return r(new Blob(t))})},exports.decodePayloadAsBinary=function(e,r,t){"function"==typeof r&&(t=r,r=null);for(var n=e,a=[],o=!1;n.byteLength>0;){for(var f=new Uint8Array(n),i=0===f[0],u="",c=1;255!=f[c];c++){if(u.length>310){o=!0;break}u+=f[c]}if(o)return t(err,0,1);n=sliceBuffer(n,2+u.length),u=parseInt(u);var s=sliceBuffer(n,0,u);if(i)try{s=String.fromCharCode.apply(null,new Uint8Array(s))}catch(l){var d=new Uint8Array(s);s="";for(var c=0;c<d.length;c++)s+=String.fromCharCode(d[c])}a.push(s),n=sliceBuffer(n,u)}var p=a.length;a.forEach(function(e,n){t(exports.decodePacket(e,r,!0),n,p)})};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./keys":137,"after":138,"arraybuffer.slice":139,"base64-arraybuffer":140,"blob":141,"has-binary":149,"utf8":142}],137:[function(require,module,exports){
  module.exports=Object.keys||function(r){var e=[],t=Object.prototype.hasOwnProperty;for(var o in r)t.call(r,o)&&e.push(o);return e};


},{}],138:[function(require,module,exports){
  function after(o,n,t){function r(o,e){if(r.count<=0)throw new Error("after called too many times");--r.count,o?(u=!0,n(o),n=t):0!==r.count||u||n(null,e)}var u=!1;return t=t||noop,r.count=o,0===o?n():r}function noop(){}module.exports=after;


},{}],139:[function(require,module,exports){
  module.exports=function(r,e,n){var t=r.byteLength;if(e=e||0,n=n||t,r.slice)return r.slice(e,n);if(0>e&&(e+=t),0>n&&(n+=t),n>t&&(n=t),e>=t||e>=n||0===t)return new ArrayBuffer(0);for(var f=new Uint8Array(r),i=new Uint8Array(n-e),u=e,a=0;n>u;u++,a++)i[a]=f[u];return i.buffer};


},{}],140:[function(require,module,exports){
  !function(n){"use strict";exports.encode=function(e){var r,t=new Uint8Array(e),i=t.length,f="";for(r=0;i>r;r+=3)f+=n[t[r]>>2],f+=n[(3&t[r])<<4|t[r+1]>>4],f+=n[(15&t[r+1])<<2|t[r+2]>>6],f+=n[63&t[r+2]];return i%3===2?f=f.substring(0,f.length-1)+"=":i%3===1&&(f=f.substring(0,f.length-2)+"=="),f},exports.decode=function(e){var r,t,i,f,g,o=.75*e.length,u=e.length,s=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var d=new ArrayBuffer(o),h=new Uint8Array(d);for(r=0;u>r;r+=4)t=n.indexOf(e[r]),i=n.indexOf(e[r+1]),f=n.indexOf(e[r+2]),g=n.indexOf(e[r+3]),h[s++]=t<<2|i>>4,h[s++]=(15&i)<<4|f>>2,h[s++]=(3&f)<<6|63&g;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");


},{}],141:[function(require,module,exports){
  (function (global){
    function BlobBuilderConstructor(l,o){o=o||{};for(var e=new BlobBuilder,r=0;r<l.length;r++)e.append(l[r]);return o.type?e.getBlob(o.type):e.getBlob()}var BlobBuilder=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,blobSupported=function(){try{var l=new Blob(["hi"]);return 2==l.size}catch(o){return!1}}(),blobBuilderSupported=BlobBuilder&&BlobBuilder.prototype.append&&BlobBuilder.prototype.getBlob;module.exports=function(){return blobSupported?global.Blob:blobBuilderSupported?BlobBuilderConstructor:void 0}();


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],142:[function(require,module,exports){
  (function (global){
    !function(r){function e(r){for(var e,n,t=[],o=0,i=r.length;i>o;)e=r.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=r.charCodeAt(o++),56320==(64512&n)?t.push(((1023&e)<<10)+(1023&n)+65536):(t.push(e),o--)):t.push(e);return t}function n(r){for(var e,n=r.length,t=-1,o="";++t<n;)e=r[t],e>65535&&(e-=65536,o+=s(e>>>10&1023|55296),e=56320|1023&e),o+=s(e);return o}function t(r,e){return s(r>>e&63|128)}function o(r){if(0==(4294967168&r))return s(r);var e="";return 0==(4294965248&r)?e=s(r>>6&31|192):0==(4294901760&r)?(e=s(r>>12&15|224),e+=t(r,6)):0==(4292870144&r)&&(e=s(r>>18&7|240),e+=t(r,12),e+=t(r,6)),e+=s(63&r|128)}function i(r){for(var n,t=e(r),i=t.length,f=-1,u="";++f<i;)n=t[f],u+=o(n);return u}function f(){if(p>=v)throw Error("Invalid byte index");var r=255&h[p];if(p++,128==(192&r))return 63&r;throw Error("Invalid continuation byte")}function u(){var r,e,n,t,o;if(p>v)throw Error("Invalid byte index");if(p==v)return!1;if(r=255&h[p],p++,0==(128&r))return r;if(192==(224&r)){var e=f();if(o=(31&r)<<6|e,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&r)){if(e=f(),n=f(),o=(15&r)<<12|e<<6|n,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&r)&&(e=f(),n=f(),t=f(),o=(15&r)<<18|e<<12|n<<6|t,o>=65536&&1114111>=o))return o;throw Error("Invalid UTF-8 detected")}function a(r){h=e(r),v=h.length,p=0;for(var t,o=[];(t=u())!==!1;)o.push(t);return n(o)}var d="object"==typeof exports&&exports,l="object"==typeof module&&module&&module.exports==d&&module,c="object"==typeof global&&global;(c.global===c||c.window===c)&&(r=c);var h,v,p,s=String.fromCharCode,b={version:"2.0.0",encode:i,decode:a};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return b});else if(d&&!d.nodeType)if(l)l.exports=b;else{var y={},w=y.hasOwnProperty;for(var g in b)w.call(b,g)&&(d[g]=b[g])}else r.utf8=b}(this);


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],143:[function(require,module,exports){
  var global=require("global");try{module.exports="XMLHttpRequest"in global&&"withCredentials"in new global.XMLHttpRequest}catch(err){module.exports=!1}


},{"global":144}],144:[function(require,module,exports){
  module.exports=function(){return this}();


},{}],145:[function(require,module,exports){
  (function (global){
    var rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rtrimLeft=/^\s+/,rtrimRight=/\s+$/;module.exports=function(r){return"string"==typeof r&&r?(r=r.replace(rtrimLeft,"").replace(rtrimRight,""),global.JSON&&JSON.parse?JSON.parse(r):rvalidchars.test(r.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,""))?new Function("return "+r)():void 0):null};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],146:[function(require,module,exports){
  exports.encode=function(e){var n="";for(var o in e)e.hasOwnProperty(o)&&(n.length&&(n+="&"),n+=encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return n},exports.decode=function(e){for(var n={},o=e.split("&"),t=0,r=o.length;r>t;t++){var d=o[t].split("=");n[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return n};


},{}],147:[function(require,module,exports){
  var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(r){var e=r,t=r.indexOf("["),s=r.indexOf("]");-1!=t&&-1!=s&&(r=r.substring(0,t)+r.substring(t,s).replace(/:/g,";")+r.substring(s,r.length));for(var o=re.exec(r||""),a={},u=14;u--;)a[parts[u]]=o[u]||"";return-1!=t&&-1!=s&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a};


},{}],148:[function(require,module,exports){
  function ws(e,o,t){var b;return b=o?new WebSocket(e,o):new WebSocket(e)}var global=function(){return this}(),WebSocket=global.WebSocket||global.MozWebSocket;module.exports=WebSocket?ws:null,WebSocket&&(ws.prototype=WebSocket.prototype);


},{}],149:[function(require,module,exports){
  (function (global){
    function hasBinary(r){function e(r){if(!r)return!1;if(global.Buffer&&global.Buffer.isBuffer(r)||global.ArrayBuffer&&r instanceof ArrayBuffer||global.Blob&&r instanceof Blob||global.File&&r instanceof File)return!0;if(isArray(r)){for(var f=0;f<r.length;f++)if(e(r[f]))return!0}else if(r&&"object"==typeof r){r.toJSON&&(r=r.toJSON());for(var a in r)if(r.hasOwnProperty(a)&&e(r[a]))return!0}return!1}return e(r)}var isArray=require("isarray");module.exports=hasBinary;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"isarray":150}],150:[function(require,module,exports){
  module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],151:[function(require,module,exports){
  var indexOf=[].indexOf;module.exports=function(e,n){if(indexOf)return e.indexOf(n);for(var r=0;r<e.length;++r)if(e[r]===n)return r;return-1};


},{}],152:[function(require,module,exports){
  var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(r){var t=[];for(var e in r)has.call(r,e)&&t.push(e);return t},exports.values=function(r){var t=[];for(var e in r)has.call(r,e)&&t.push(r[e]);return t},exports.merge=function(r,t){for(var e in t)has.call(t,e)&&(r[e]=t[e]);return r},exports.length=function(r){return exports.keys(r).length},exports.isEmpty=function(r){return 0==exports.length(r)};


},{}],153:[function(require,module,exports){
  var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(r){for(var t=re.exec(r||""),e={},o=14;o--;)e[parts[o]]=t[o]||"";return e};


},{}],154:[function(require,module,exports){
  (function (global){
    var isArray=require("isarray"),isBuf=require("./is-buffer");exports.deconstructPacket=function(r){function e(r){if(!r)return r;if(isBuf(r)){var n={_placeholder:!0,num:t.length};return t.push(r),n}if(isArray(r)){for(var a=new Array(r.length),i=0;i<r.length;i++)a[i]=e(r[i]);return a}if("object"==typeof r&&!(r instanceof Date)){var a={};for(var f in r)a[f]=e(r[f]);return a}return r}var t=[],n=r.data,a=r;return a.data=e(n),a.attachments=t.length,{packet:a,buffers:t}},exports.reconstructPacket=function(r,e){function t(r){if(r&&r._placeholder){var n=e[r.num];return n}if(isArray(r)){for(var a=0;a<r.length;a++)r[a]=t(r[a]);return r}if(r&&"object"==typeof r){for(var i in r)r[i]=t(r[i]);return r}return r}return r.data=t(r.data),r.attachments=void 0,r},exports.removeBlobs=function(r,e){function t(r,i,f){if(!r)return r;if(global.Blob&&r instanceof Blob||global.File&&r instanceof File){n++;var o=new FileReader;o.onload=function(){f?f[i]=this.result:a=this.result,--n||e(a)},o.readAsArrayBuffer(r)}else if(isArray(r))for(var u=0;u<r.length;u++)t(r[u],u,r);else if(r&&"object"==typeof r&&!isBuf(r))for(var s in r)t(r[s],s,r)}var n=0,a=r;t(a),n||e(a)};


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./is-buffer":156,"isarray":157}],155:[function(require,module,exports){
  function Encoder(){}function encodeAsString(r){var t="",e=!1;return t+=r.type,(exports.BINARY_EVENT==r.type||exports.BINARY_ACK==r.type)&&(t+=r.attachments,t+="-"),r.nsp&&"/"!=r.nsp&&(e=!0,t+=r.nsp),null!=r.id&&(e&&(t+=",",e=!1),t+=r.id),null!=r.data&&(e&&(t+=","),t+=json.stringify(r.data)),debug("encoded %j as %s",r,t),t}function encodeAsBinary(r,t){function e(r){var e=binary.deconstructPacket(r),o=encodeAsString(e.packet),n=e.buffers;n.unshift(o),t(n)}binary.removeBlobs(r,e)}function Decoder(){this.reconstructor=null}function decodeString(r){var t={},e=0;if(t.type=Number(r.charAt(0)),null==exports.types[t.type])return error();if(exports.BINARY_EVENT==t.type||exports.BINARY_ACK==t.type){for(t.attachments="";"-"!=r.charAt(++e);)t.attachments+=r.charAt(e);t.attachments=Number(t.attachments)}if("/"==r.charAt(e+1))for(t.nsp="";++e;){var o=r.charAt(e);if(","==o)break;if(t.nsp+=o,e+1==r.length)break}else t.nsp="/";var n=r.charAt(e+1);if(""!=n&&Number(n)==n){for(t.id="";++e;){var o=r.charAt(e);if(null==o||Number(o)!=o){--e;break}if(t.id+=r.charAt(e),e+1==r.length)break}t.id=Number(t.id)}if(r.charAt(++e))try{t.data=json.parse(r.substr(e))}catch(s){return error()}return debug("decoded %s as %j",r,t),t}function BinaryReconstructor(r){this.reconPack=r,this.buffers=[]}function error(r){return{type:exports.ERROR,data:"parser error"}}var debug=require("debug")("socket.io-parser"),json=require("json3"),isArray=require("isarray"),Emitter=require("component-emitter"),binary=require("./binary"),isBuf=require("./is-buffer");exports.protocol=4,exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=Encoder,exports.Decoder=Decoder,Encoder.prototype.encode=function(r,t){if(debug("encoding packet %j",r),exports.BINARY_EVENT==r.type||exports.BINARY_ACK==r.type)encodeAsBinary(r,t);else{var e=encodeAsString(r);t([e])}},Emitter(Decoder.prototype),Decoder.prototype.add=function(r){var t;if("string"==typeof r)t=decodeString(r),exports.BINARY_EVENT==t.type||exports.BINARY_ACK==t.type?(this.reconstructor=new BinaryReconstructor(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!isBuf(r)&&!r.base64)throw new Error("Unknown type: "+r);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(r),t&&(this.reconstructor=null,this.emit("decoded",t))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(r){if(this.buffers.push(r),this.buffers.length==this.reconPack.attachments){var t=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};


},{"./binary":154,"./is-buffer":156,"component-emitter":120,"debug":121,"isarray":157,"json3":158}],156:[function(require,module,exports){
  (function (global){
    function isBuf(f){return global.Buffer&&global.Buffer.isBuffer(f)||global.ArrayBuffer&&f instanceof ArrayBuffer}module.exports=isBuf;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],157:[function(require,module,exports){
  module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],158:[function(require,module,exports){
  !function(e){function t(e){if(t[e]!==o)return t[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=t("json-stringify")&&t("json-parse");else{var n,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var i=l.stringify,s="function"==typeof i&&f;if(s){(n=function(){return 1}).toJSON=n;try{s="0"===i(0)&&"0"===i(new Number)&&'""'==i(new String)&&i(c)===o&&i(o)===o&&i()===o&&"1"===i(n)&&"[1]"==i([n])&&"[null]"==i([o])&&"null"==i(null)&&"[null,null,null]"==i([o,c,null])&&i({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==a&&"1"===i(null,n)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new Date(-1))}catch(u){s=!1}}r=s}if("json-parse"==e){var h=l.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){n=h(a);var p=5==n.a.length&&1===n.a[0];if(p){try{p=!h('"	"')}catch(u){}if(p)try{p=1!==h("01")}catch(u){}if(p)try{p=1!==h("1.")}catch(u){}}}}catch(u){p=!1}r=p}}return t[e]=!!r}var r,n,o,c={}.toString,a="function"==typeof define&&define.amd,i="object"==typeof JSON&&JSON,l="object"==typeof exports&&exports&&!exports.nodeType&&exports;l&&i?(l.stringify=i.stringify,l.parse=i.parse):l=e.JSON=i||{};var f=new Date(-0xc782b5b800cec);try{f=-109252==f.getUTCFullYear()&&0===f.getUTCMonth()&&1===f.getUTCDate()&&10==f.getUTCHours()&&37==f.getUTCMinutes()&&6==f.getUTCSeconds()&&708==f.getUTCMilliseconds()}catch(s){}if(!t("json")){var u="[object Function]",h="[object Date]",p="[object Number]",g="[object String]",y="[object Array]",d="[object Boolean]",v=t("bug-string-char-index");if(!f)var b=Math.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(e,t){return C[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};(r={}.hasOwnProperty)||(r=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=c?r=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=n.constructor,r=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),n=null,r.call(this,e)});var A={"boolean":1,number:1,string:1,undefined:1},T=function(e,t){var r=typeof e[t];return"object"==r?!!e[t]:!A[r]};if(n=function(e,t){var o,a,i,l=0;(o=function(){this.valueOf=0}).prototype.valueOf=0,a=new o;for(i in a)r.call(a,i)&&l++;return o=a=null,l?n=2==l?function(e,t){var n,o={},a=c.call(e)==u;for(n in e)a&&"prototype"==n||r.call(o,n)||!(o[n]=1)||!r.call(e,n)||t(n)}:function(e,t){var n,o,a=c.call(e)==u;for(n in e)a&&"prototype"==n||!r.call(e,n)||(o="constructor"===n)||t(n);(o||r.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],n=function(e,t){var n,o,i=c.call(e)==u,l=!i&&"function"!=typeof e.constructor&&T(e,"hasOwnProperty")?e.hasOwnProperty:r;for(n in e)i&&"prototype"==n||!l.call(e,n)||t(n);for(o=a.length;n=a[--o];l.call(e,n)&&t(n));}),n(e,t)},!t("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},_="000000",w=function(e,t){return(_+(t||0)).slice(-e)},O="\\u00",U=function(e){var t,r='"',n=0,o=e.length,c=o>10&&v;for(c&&(t=e.split(""));o>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:r+=S[a];break;default:if(32>a){r+=O+w(2,a.toString(16));break}r+=c?t[n]:v?e.charAt(n):e[n]}}return r+'"'},x=function(e,t,a,i,l,f,s){var u,v,C,A,T,S,_,O,N,D,J,M,k,m,P,Z;try{u=t[e]}catch(E){}if("object"==typeof u&&u)if(v=c.call(u),v!=h||r.call(u,"toJSON"))"function"==typeof u.toJSON&&(v!=p&&v!=g&&v!=y||r.call(u,"toJSON"))&&(u=u.toJSON(e));else if(u>-1/0&&1/0>u){if(j){for(T=b(u/864e5),C=b(T/365.2425)+1970-1;j(C+1,0)<=T;C++);for(A=b((T-j(C,0))/30.42);j(C,A+1)<=T;A++);T=1+T-j(C,A),S=(u%864e5+864e5)%864e5,_=b(S/36e5)%24,O=b(S/6e4)%60,N=b(S/1e3)%60,D=S%1e3}else C=u.getUTCFullYear(),A=u.getUTCMonth(),T=u.getUTCDate(),_=u.getUTCHours(),O=u.getUTCMinutes(),N=u.getUTCSeconds(),D=u.getUTCMilliseconds();u=(0>=C||C>=1e4?(0>C?"-":"+")+w(6,0>C?-C:C):w(4,C))+"-"+w(2,A+1)+"-"+w(2,T)+"T"+w(2,_)+":"+w(2,O)+":"+w(2,N)+"."+w(3,D)+"Z"}else u=null;if(a&&(u=a.call(t,e,u)),null===u)return"null";if(v=c.call(u),v==d)return""+u;if(v==p)return u>-1/0&&1/0>u?""+u:"null";if(v==g)return U(""+u);if("object"==typeof u){for(m=s.length;m--;)if(s[m]===u)throw TypeError();if(s.push(u),J=[],P=f,f+=l,v==y){for(k=0,m=u.length;m>k;k++)M=x(k,u,a,i,l,f,s),J.push(M===o?"null":M);Z=J.length?l?"[\n"+f+J.join(",\n"+f)+"\n"+P+"]":"["+J.join(",")+"]":"[]"}else n(i||u,function(e){var t=x(e,u,a,i,l,f,s);t!==o&&J.push(U(e)+":"+(l?" ":"")+t)}),Z=J.length?l?"{\n"+f+J.join(",\n"+f)+"\n"+P+"}":"{"+J.join(",")+"}":"{}";return s.pop(),Z}};l.stringify=function(e,t,r){var n,o,a,i;if("function"==typeof t||"object"==typeof t&&t)if((i=c.call(t))==u)o=t;else if(i==y){a={};for(var l,f=0,s=t.length;s>f;l=t[f++],i=c.call(l),(i==g||i==p)&&(a[l]=1));}if(r)if((i=c.call(r))==p){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else i==g&&(n=r.length<=10?r:r.slice(0,10));return x("",(l={},l[""]=e,l),o,a,n,"",[])}}if(!t("json-parse")){var N,D,J=String.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},k=function(){throw N=D=null,SyntaxError()},m=function(){for(var e,t,r,n,o,c=D,a=c.length;a>N;)switch(o=c.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=v?c.charAt(N):c[N],N++,e;case 34:for(e="@",N++;a>N;)if(o=c.charCodeAt(N),32>o)k();else if(92==o)switch(o=c.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=M[o],N++;break;case 117:for(t=++N,r=N+4;r>N;N++)o=c.charCodeAt(N),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||k();e+=J("0x"+c.slice(t,N));break;default:k()}else{if(34==o)break;for(o=c.charCodeAt(N),t=N;o>=32&&92!=o&&34!=o;)o=c.charCodeAt(++N);e+=c.slice(t,N)}if(34==c.charCodeAt(N))return N++,e;k();default:if(t=N,45==o&&(n=!0,o=c.charCodeAt(++N)),o>=48&&57>=o){for(48==o&&(o=c.charCodeAt(N+1),o>=48&&57>=o)&&k(),n=!1;a>N&&(o=c.charCodeAt(N),o>=48&&57>=o);N++);if(46==c.charCodeAt(N)){for(r=++N;a>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==N&&k(),N=r}if(o=c.charCodeAt(N),101==o||69==o){for(o=c.charCodeAt(++N),(43==o||45==o)&&N++,r=N;a>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==N&&k(),N=r}return+c.slice(t,N)}if(n&&k(),"true"==c.slice(N,N+4))return N+=4,!0;if("false"==c.slice(N,N+5))return N+=5,!1;if("null"==c.slice(N,N+4))return N+=4,null;k()}return"$"},P=function(e){var t,r;if("$"==e&&k(),"string"==typeof e){if("@"==(v?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=m(),"]"!=e;r||(r=!0))r&&(","==e?(e=m(),"]"==e&&k()):k()),","==e&&k(),t.push(P(e));return t}if("{"==e){for(t={};e=m(),"}"!=e;r||(r=!0))r&&(","==e?(e=m(),"}"==e&&k()):k()),(","==e||"string"!=typeof e||"@"!=(v?e.charAt(0):e[0])||":"!=m())&&k(),t[e.slice(1)]=P(m());return t}k()}return e},Z=function(e,t,r){var n=E(e,t,r);n===o?delete e[t]:e[t]=n},E=function(e,t,r){var o,a=e[t];if("object"==typeof a&&a)if(c.call(a)==y)for(o=a.length;o--;)Z(a,o,r);else n(a,function(e){Z(a,e,r)});return r.call(e,t,a)};l.parse=function(e,t){var r,n;return N=0,D=""+e,r=P(m()),"$"!=m()&&k(),N=D=null,t&&c.call(t)==u?E((n={},n[""]=r,n),"",t):r}}}a&&define(function(){return l})}(this);


},{}],159:[function(require,module,exports){
  function toArray(r,o){var t=[];o=o||0;for(var a=o||0;a<r.length;a++)t[a-o]=r[a];return t}module.exports=toArray;


},{}],160:[function(require,module,exports){
  "use strict";function DashMapGenerator(){var e=function(e,s){0;var r,i=e.profiles;switch(i.name){case"isoff-on-demand":r=new ProfileOnDemand(s);break;case"isoff-live":r=new ProfileLiveFull(s);break;case"isoff-main":r=new ProfileMain(s);break;default:0,r=new ProfileMain(s)}var n=e.getMap(r);return n.profile=i,n.location=e.location,n},s=function(e,s){var r=-1,i=!1;if(s&&s.length)for(var n=s[s.length-1].id,o=e.length-1;o>=0;o--){if(e[o].id===n){i=!0;break}r=o}else r=0;return{minIndex:r,minIndexFound:i}},r=function(e,r,i){for(var n={periods:[]},o=0;o<r.periods.length;o++){for(var a={asets:[]},t=0;t<r.periods[o].asets.length;t++){for(var l={reps:[]},p=0;p<r.periods[o].asets[t].reps.length;p++){var d={},f=new ProfileLiveFull(i),m=f.getSegments(e,e.periods[o],e.periods[o].adaptationSets[t],e.periods[o].adaptationSets[t].representations[p]),u=s(m.segments,r.periods[o].asets[t].reps[p].segments),g=u.minIndex,h=u.minIndexFound,P=m.segments.slice(0);d.segments=h&&g>-1?P.splice(g):[],l.reps.push(d);for(var c=r.periods[o].asets[t].reps[p].segments.length,v=0;c>v&&r.periods[o].asets[t].reps[p].segments[0].id!==m.segments[0].id;v++)r.periods[o].asets[t].reps[p].segments.splice(0,1);for(var M=m.segments.length,D=0;M>D;D++)r.periods[o].asets[t].reps[p].segments[D]||r.periods[o].asets[t].reps[p].segments.push(m.segments[D])}a.asets.push(l)}return n.periods.push(a),{map:r,mapAddToP2P:n}}};this.createMapDash=e,this.updateMapDash=r,this._calcMinIndexes=s}var _=require("lodash"),ProfileOnDemand=require("./MPDProfiles/ProfileOnDemand"),ProfileLiveFull=require("./MPDProfiles/ProfileLiveFull"),ProfileMain=require("./MPDProfiles/ProfileMain");module.exports=DashMapGenerator;


},{"./MPDProfiles/ProfileLiveFull":163,"./MPDProfiles/ProfileMain":164,"./MPDProfiles/ProfileOnDemand":165,"lodash":183}],161:[function(require,module,exports){
  "use strict";var conf=require("./conf"),Downloader=require("streamroot-downloader").Downloader,utils=require("./utils/utils"),m3u8=require("streamroot-m3u8"),Stream=require("stream"),AesKeysHelper=require("./utils/AesKeysHelper"),downloader=new Downloader,HlsMapGenerator=function(){var e=new AesKeysHelper,t=function(e){var t=e.items.StreamItem.length,r=e.items.PlaylistItem.length,s=e.items.MediaItem.length,i=e.items.IframeStreamItem.length;return 0!==t&&0===r&&0===s&&0===i},r=function(e){var t=e.items.StreamItem.length,r=e.items.PlaylistItem.length,s=e.items.MediaItem.length,i=e.items.IframeStreamItem.length;return 0!==r&&0===t&&0===s&&0===i},s=function(t,r,s,i){var n,a,u=s.attributes.get("resolution"),o=0,l=t.items.PlaylistItem;u&&u.length&&u.length>=2&&(n=u[0],a=u[1]);var m={bandwidth:s.attributes.get("bandwidth")||2e5,width:n,height:a,fourCC:null,codecs:null,init:null,mime:null,hasSegmentHashes:!1,segments:[]},p=t.get("mediaSequence")||0;t.properties.liveCutOffset&&(p+=t.properties.liveCutOffset);for(var d=0;d<l.length;d++){var f=l[d],c={time:o,duration:f.properties.duration,url:utils.absURL(r,f.properties.uri)};c.id=p+d;var v=f.get("key");v&&(c.parserKey=v),o+=c.duration,m.segments.push(c)}utils.asyncMap(m.segments,function(t,s,i){if(t.parserKey)switch(t.parserKey.method){case"AES-128":t.key={},t.key.method=t.parserKey.method,t.key.url=utils.absURL(r,t.parserKey.url),t.parserKey.iv?t.key.iv=t.parserKey.iv:t.key.iv=e.getIV(t.id),delete t.parserKey,e.getAESKey(t.key.url,function(e,r){e?i(e):(t.key.aesKey=r,i())});break;case"NONE":delete t.parserKey,i();break;default:i(new Error("Unsupported encryption method"))}else i()},function(e){i(e,m)})},i=function(e,t){var r,s=-1;do r=s,s=e.indexOf("#EXT-X-KEY",s+1);while(-1!=s&&t>s);if(-1!=r){var i=e.indexOf("\n");return e.substring(r,i+1)}},n=function(e,t){var r=t.indexOf("#EXTINF",e);return{index:r,payloadText:t.substr(r)}},a=function(e){return function(t,a,u){var l=t.url,m=t.streamItem,p={url:l,responseType:"text"};downloader.getURL(p,function(t,a){if(t)return t.message="Could not retrieve manifest || Previous error: "+t.message,void u(t);var l=m3u8.createStream();l.on("m3u",function(t){r(t)&&(o(t,e),s(t,p.url,m,u))});var d=new Stream.Readable,f=a.response;if(f.indexOf("#EXT-X-ENDLIST")>-1||f.indexOf("#EXT-X-PLAYLIST-TYPE:VOD")>-1);else if(conf.PLAYLIST_HLS_KEEP_LAST_LINES){var c=f.substring(0,f.indexOf("#EXTINF")),v=utils.occurrences(f,"\n"),h=utils.occurrences(c,"\n"),g=v-h,y=Math.max(0,g-conf.PLAYLIST_HLS_KEEP_LAST_LINES),L=utils.nthChar(f,"\n",h+y-1),S=n(L,f);L=S.index;var I=utils.occurrences(f,"#EXTINF",L),T=S.payloadText,E=i(f,L)||"";f=c+E+T,l.m3u.properties.liveCutOffset=I}d.push(f),d.push(null),d.pipe(l)})}},u=function(e,i,n,u,l,m){if(t(e)){for(var p,d=[],f=0;f<e.items.StreamItem.length;f++){p=e.items.StreamItem[f];var c={streamItem:p,url:utils.absURL(i,p.properties.uri)};d.push(c)}m.m3u=e,utils.asyncMap(d,a(m),function(e,t){e?n(e):(m.periods[0].asets[0].reps=t,u(m,n))})}else if(r(e)){var v=[{attributes:{}}];v.get=function(){};var h={attributes:v,properties:{}};o(e,m),s(e,i,h,function(e,t){e?n(e):(m.periods[0].asets[0].reps=[t],l(m,n))})}},o=function(e,t){var r=t.isLive;"VOD"===e.get("playlistType")?t.isLive=!1:t.isLive=!0;var s=void 0===r||r&&t.isLive||!r&&!t.isLive;s===!1&&0},l=function(e,t,r){function s(e,t){if(e.isLive===!1){for(var r,s=0,i=0;r=e.periods[0].asets[0].reps[0].segments[i];i++)s+=r.duration;e.periods[0].duration=s}t(null,e)}var i={periods:[{asets:[{reps:[]}]}]},n=m3u8.createStream(),a=new Stream.Readable;a.push(e),a.push(null),n.on("m3u",function(e){i.isLive=void 0,u(e,t,r,s,s,i)}),a.pipe(n)},m=function(e,t){for(var r=e.segments.length,s=0;r>s&&e.segments[0].url!==t.segments[0].url;s++)e.segments.splice(0,1);for(var i=t.segments.length,n=e.segments.length;i>n;n++){var a=e.segments.length;0===a?e.segments.push(t.segments[n]):(t.segments[n].time=e.segments[a-1].time+e.segments[a-1].duration,e.segments.push(t.segments[n]))}return e},p=function(e,t){for(var r=0;r<e.periods[0].asets.length;r++)for(var s=0;s<e.periods[0].asets[r].reps.length;s++){var i=e.periods[0].asets[r].reps[s],n=t.periods[0].asets[r].reps[s];e.periods[0].asets[r].reps[s]=m(i,n)}return e},d=function(e,t,r){function s(t,r){t=p(e,t),r(null,{map:t,mapAddToP2P:t})}function i(e,t){t(new Error("This function should never be called"))}var n=e.m3u,a={periods:[{asets:[{reps:[]}]}],isLive:e.isLive};u(n,t,r,s,i,a)},f=function(e,t,r,s){function i(e,t){t(new Error("This function should never be called"))}function n(e,r){e=p(t,e),r(null,{map:e,mapAddToP2P:e})}var a={periods:[{asets:[{reps:[]}]}],isLive:t.isLive},o=m3u8.createStream(),l=new Stream.Readable;l.push(e),l.push(null),o.on("m3u",function(e){a.isLive=void 0,u(e,r,s,i,n,a)}),l.pipe(o)};this.updateMapMasterPlaylist=d,this.updateMapMediaPlaylist=f,this.createMapHls=l};module.exports=HlsMapGenerator;


},{"./conf":177,"./utils/AesKeysHelper":178,"./utils/utils":182,"stream":101,"streamroot-downloader":245,"streamroot-m3u8":260}],162:[function(require,module,exports){
  "use strict";var JSPack=require("./utils/jspack"),Long=require("./utils/long"),InitializationBuilder=function(){var e=new Date,t=2082844800+Math.floor(e.getTime()/1e3),a=Long.fromNumber(t,!0),n=a,c={audio:2,video:2,text:0},i=1,L=3,o=new JSPack,s=0,d=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return new Uint8Array(t)},l=function(e){e=r(e);for(var t,a,n,c,i,L,s,d,l,g,h={audio:[],video:[]},P=32,k=o.Pack(">L4s4sL4s4s4s4s",[P,"ftyp","isom",1,"isom","avc1","mp42","dash"]),H=B(e),f=v(e),p=m(e),A=0;A<e.AudioQualityLevels;A++)t=u("audio",e,A),a=8+H.length+t.length+f.length,n=o.Pack(">L4s",[a,"moov"]),c=n.concat(H,f,t),i=new Uint8Array(k.concat(c)),h.audio.push(i);for(A=0;A<e.VideoQualityLevels;A++)L=u("video",e,A),s=8+H.length+L.length+p.length,d=o.Pack(">L4s",[s,"moov"]),l=d.concat(H,p,L),g=new Uint8Array(k.concat(l)),h.video.push(g);return h},r=function(e){var t,a,n,c,i,L,o=null;e.TimeScale=e.TimeScale||1e7,e.SamplingRate=[],e.Bitrate=[],e.AACL=[],e.acodec=[];for(var s=0;s<e.StreamIndex.length;s++)if(o=e.StreamIndex[s],"video"==o.Type){e.VideoQualityLevels=o.QualityLevel.length,e.MaxHeight=[],e.MaxWidth=[],e.sequenceParameterSetNALUnit=[],e.pictureParameterSetNALUnit=[],t=0;for(var d=0;d<e.VideoQualityLevels;d++){if(a=o.QualityLevel[d],n=a.FourCC,c=a.CodecPrivateData,e.vcodec=n,e.MaxHeight.push(a.MaxHeight),e.MaxWidth.push(a.MaxWidth),"AVC1"==n||"H264"==n||"X264"==n||"DAVC"==n){var l=c.split("00000001");e.sequenceParameterSetNALUnit.push(l[1]),e.pictureParameterSetNALUnit.push(l[2]),e.vcodec="H264"}t++}(null===e.VideoQualityLevels||void 0===e.VideoQualityLevels||isNaN(e.VideoQualityLevels))&&(e.VideoQualityLevels=t)}else if("audio"==o.Type){e.AudioQualityLevels=o.QualityLevel.length,t=0;for(var d=0;d<e.AudioQualityLevels;d++)a=o.QualityLevel[d],n=a.FourCC,c=a.CodecPrivateData,i=a.SamplingRate,L=a.Bitrate,e.acodec.push(n),e.SamplingRate.push(i),e.Bitrate.push(L),e.AACL.push(c),t++;(null===e.AudioQualityLevels||void 0===e.AudioQualityLevels||isNaN(e.AudioQualityLevels))&&(e.AudioQualityLevels=t)}return e},u=function(e,t,L){var s,d,l,r,u,h,P,k,v,m,B,H,f,p,A=t.Duration,U=[65536,0,0,0,65536,0,0,0,1073741824],y=t.TimeScale,x=g(e,L,t),Q=45,S=o.Pack(">L4sL",[Q,"hdlr",0]),C="";return A=Long.fromNumber(A,!0),s="audio"==e?256:0,"video"==e?(d=t.MaxWidth[L],d<<=16,l=t.MaxHeight[L],l<<=16):(d=0,l=0),1===i?(r=104,u=o.Pack(">L4sL",[r,"tkhd",16777223]),u=u.concat(o.Pack(">LLLLLLLL",[a.getHighBitsUnsigned(),a.getLowBitsUnsigned(),n.getHighBitsUnsigned(),n.getLowBitsUnsigned(),c[e],0,A.getHighBitsUnsigned(),A.getLowBitsUnsigned()]))):0===i&&(r=92,u=o.Pack(">L4sL",[r,"tkhd",7]),u=u.concat(o.Pack(">LLLLL",[a,n,c[e],0,A]))),u=u.concat(o.Pack(">dhhhH9l",[0,0,0,s,0].concat(U)),o.Pack(">LL",[d,l])),1===i?(h=o.Pack(">L4sL",[44,"mdhd",16777216]),h=h.concat(o.Pack(">LLLLLLL",[a.getHighBitsUnsigned(),a.getLowBitsUnsigned(),n.getHighBitsUnsigned(),n.getLowBitsUnsigned(),y,A.getHighBitsUnsigned(),A.getLowBitsUnsigned()]))):0===i&&(h=o.Pack(">L4sL",[32,"mdhd",0]),h=h.concat(o.Pack(">LLLL",[a,n,y,A]))),h=h.concat(o.Pack(">HH",[21956,0])),"video"==e?(P="VideoHandler",k="vide"):"audio"==e?(P="AudioHandler",k="soun"):(P="Undfd",k="ndfd"),S=S.concat(o.Pack(">L4s3L12sB",[0,k,0,0,0,P,0])),v=8+h.length+S.length+x.length,m=o.Pack(">L4s",[v,"mdia"]),B=8+r+C.length+v,H=o.Pack(">L4s",[B,"trak"]),f=m.concat(h,S,x),p=H.concat(u,f)},g=function(e,t,a){var n,c,i,L,s,d,l,r=o.Pack(">L4sLd",[20,"vmhd",1,0]),u=o.Pack(">L4sLhH",[16,"smhd",0,0,0]),g=o.Pack(">L4sL",[20,"nmhd",0]);return"video"==e?n=r:"audio"==e?n=u:"metad"==e&&(n=g),c=36,i=o.Pack(">L4sL4sL",[c,"dinf",28,"dref",0]),i=i.concat(o.Pack(">LL4sL",[1,12,"url ",1])),L=h(e,t,a),s=8+n.length+c+L.length,d=o.Pack(">L4s",[s,"minf"]),l=d.concat(n,i,L)},h=function(e,t,a){var n,c,i,L,d,l,r,u,g,h,v,m,B,H,f,p,A,U,y=o.Pack(">L4sLL",[16,"stts",0,0]),x=o.Pack(">L4sLL",[16,"stsc",0,0]),Q=o.Pack(">L4sLL",[16,"stco",0,0]),S=o.Pack(">L4sLLL",[20,"stsz",0,0,0]);return"video"===e?("H264"==a.vcodec?(n="avc1",c=k(t,a)):"WVC1"==a.vcodec&&0,d=86+c.length,l=a.MaxWidth[t],r=a.MaxHeight[t],u=4718592,g=4718592,h="\fVideoHandler",v=24,B=o.Pack(">L4sLHH",[d,n,0,0,1]),B=B.concat(o.Pack(">ddHH",[0,0,l,r]),o.Pack(">LL",[u,g]),o.Pack(">LH32sHh",[0,1,h,v,-1]),c)):"audio"==e&&("AACL"==a.acodec[s]?(i="mp4a",L=P(a)):"WMAP"==a.acodec[s]&&0,d=36+L.length,m=48e3<<16,B=o.Pack(">L4sLHH",[d,i,0,0,1]),B=B.concat(o.Pack(">dHHLL",[0,2,16,0,m]),L)),H=16+B.length,f=o.Pack(">L4sLL",[H,"stsd",0,1]),f=f.concat(B),p=8+f.length+S.length+x.length+y.length+Q.length,A=o.Pack(">L4s",[p,"stbl"]),U=A.concat(f,S,x,y,Q)},P=function(e){var t,a,n,c,i,L,l,r,u,g,h,P,k,v,m,B,H,f,p=e.AACL[s];return""===p&&(p="1210"),p=d(p),t=3,a=2155905024+p.length+18+8,n=0,c=0,i=o.Pack(">BLHB",[t,a,n,c]),t=4,a=2155905024+p.length+18,L=64,l=21,r=[0,48,0],u=128e3,g=128e3,h=o.Pack(">BLBB3B",[t,a,L,l].concat(r)),h=h.concat(o.Pack(">LL",[u,g])),t=5,a=2155905024+p.length,P=o.Pack(">BL",[t,a]),k=o.Pack(">3H",[1664,32896,258]),v=12+i.length+h.length+P.length+p.length+k.length,m=o.Pack(">L4sL",[v,"esds",0]),0!==p.length?(B=">"+p.length+"B",H=o.Pack(B,p),f=m.concat(i,h,P,H,k)):f=m.concat(i,h,P,k),f},k=function(e,t){var a,n,c,i,L,s,l,r,u,g,h=t.sequenceParameterSetNALUnit[e],P=t.pictureParameterSetNALUnit[e],k=3,v=1,m=1;return h=d(h),P=d(P),a=h.length,n=P.length,c=h[1],i=h[2],L=h[3],s=o.Pack(">BBBB",[1,c,i,L]),s=s.concat(o.Pack(">BB",[252+k,224+v])),s=s.concat(o.Pack(">H",[a])),l=">"+a+"B",s=s.concat(o.Pack(l,h)),s=s.concat(o.Pack(">B",[m])),s=s.concat(o.Pack(">H",[n])),l=">"+n+"B",s=s.concat(o.Pack(l,P)),r=8+s.length,u=o.Pack(">L4s",[r,"avcC"]),g=u.concat(s)},v=function(){var e=40,t=o.Pack(">L4s",[e,"mvex"]),a=o.Pack(">L4sLLLLLL",[32,"trex",0,2,1,1,1,0]),n=t.concat(a);return n},m=function(){var e=40,t=o.Pack(">L4s",[e,"mvex"]),a=o.Pack(">L4sLLLLLL",[32,"trex",0,2,1,1,1,0]),n=t.concat(a);return n},B=function(e){var t,c,s=e.TimeScale,d=e.Duration,l=65536,r=256,u=0,g=0,h=[65536,0,0,0,65536,0,0,0,1073741824],P=[0,0,0,0,0,0];return d=Long.fromNumber(d,!0),1===i?(t=120,c=o.Pack(">L4sL",[t,"mvhd",16777216]),c=c.concat(o.Pack(">LLLLLLL",[a.getHighBitsUnsigned(),a.getLowBitsUnsigned(),n.getHighBitsUnsigned(),n.getLowBitsUnsigned(),s,d.getHighBitsUnsigned(),d.getLowBitsUnsigned()]))):0===i&&(t=108,c=o.Pack(">L4sL",[t,"mvhd",0]),c=c.concat(o.Pack(">LLLL",[a,n,s,d]))),c=c.concat(o.Pack(">LHHd9L",[l,r,u,g].concat(h)),o.Pack(">6L",P),o.Pack(">L",[L]))};this.buildInits=l};module.exports=InitializationBuilder;


},{"./utils/jspack":180,"./utils/long":181}],163:[function(require,module,exports){
  "use strict";var SegmentList=require("../MediaPresentation/SegmentList"),SegmentBase=require("../MediaPresentation/SegmentBase"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate"),ProfileLiveFull=function(e){this.url_mpd=e,this.map={periods:[]};var t=function(e,t,s,n){var m;if(n.segmentBase){0;var a=new SegmentBase(n.segmentBase,this.url_mpd);m=a.getSegments(n)}else if(n.segmentList){0;var i=new SegmentList(n,this.url_mpd);m=i.getSegments()}else if(s.segmentTemplate||n.segmentTemplate){var l=t.baseURLs.length?t.baseURLs[0]:"",r=n.segmentTemplate?n.segmentTemplate:s.segmentTemplate,g=new SegmentTemplate(r,this.url_mpd);m=g.getSegments(e,t,n,l)}return m};this.getSegments=t};module.exports=ProfileLiveFull;


},{"../MediaPresentation/SegmentBase":171,"../MediaPresentation/SegmentList":172,"../MediaPresentation/SegmentTemplate":173}],164:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentList=require("../MediaPresentation/SegmentList"),SegmentBase=require("../MediaPresentation/SegmentBase"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate"),ProfileMain=function(e){this.url_mpd=e,this.map={periods:[]};var t=function(e,t,s,n){var m;if(n.segmentBase){var i=new SegmentBase(n.segmentBase,this.url_mpd);m=i.getSegments(n)}else if(n.segmentList){var a=new SegmentList(n,this.url_mpd);m=a.getSegments()}else if(s.segmentTemplate||n.segmentTemplate){var r=t.baseURLs.length?t.baseURLs[0]:"",g=n.segmentTemplate?n.segmentTemplate:s.segmentTemplate,l=new SegmentTemplate(g,this.url_mpd);m=l.getSegments(e,t,n,r)}return m};this.getSegments=t};module.exports=ProfileMain;


},{"../MediaPresentation/SegmentBase":171,"../MediaPresentation/SegmentList":172,"../MediaPresentation/SegmentTemplate":173,"../utils/utils":182}],165:[function(require,module,exports){
  "use strict";var SegmentList=require("../MediaPresentation/SegmentList"),SegmentBase=require("../MediaPresentation/SegmentBase"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate"),ProfileOnDemand=function(e){this.url_mpd=e,this.map={periods:[]};var t=function(e,t,n,s){var m;if(s.segmentBase){var a=new SegmentBase(s.segmentBase,this.url_mpd);m=a.getSegments(s)}else if(s.segmentList){0;var i=new SegmentList(s,this.url_mpd);m=i.getSegments()}else if(n.segmentTemplate||s.segmentTemplate){0,e.profiles.name="main";var r=t.baseURLs.length?t.baseURLs[0]:"",l=s.segmentTemplate?s.segmentTemplate:n.segmentTemplate,g=new SegmentTemplate(l,this.url_mpd);m=g.getSegments(e,t,s,r)}return m};this.getSegments=t};module.exports=ProfileOnDemand;


},{"../MediaPresentation/SegmentBase":171,"../MediaPresentation/SegmentList":172,"../MediaPresentation/SegmentTemplate":173}],166:[function(require,module,exports){
  "use strict";function MapGenerator(e){var r=new SmoothMapGenerator,a=new HlsMapGenerator,n=new DashMapGenerator,t=new ParseMPD,o=new ParseSmooth,s=function(e,r,n){var t;t="undefined"!=typeof window?window.location.protocol:"http:",e=e.replace(/^\/\//,t+"//"),null===r?downloader.getURL({url:e,responseType:"text"},function(r,a){return r?(r.message="Could not retrieve manifest Â«"+e+"Â» || Previous error: "+r.message,n(r)):void i(a.response,e,n)}):r.m3u?a.updateMapMasterPlaylist(r,e,n):downloader.getURL({url:e,responseType:"text"},function(a,t){return a?(a.message="Could not retrieve manifest Â«"+e+"Â» || Previous error: "+a.message,n(a)):void d(t.response,r,e,n)})},i=function(e,s,i){var d,u,f;try{d=l(e),f=m(e)}catch(h){return h.message="Unable to parse manifest Â«"+s+"Â» and create map || PREVIOUS ERROR: "+h.message,i(h)}if("hls"===f)a.createMapHls(e,s,function(e,r){return e?(e.message("Unable to parse manifest Â«"+s+"Â» and create map || PREVIOUS ERROR: "+e.message),i(e)):void p(r,f,i,null)});else{if("dash"===f){var c=t.parser(d);u=n.createMapDash(c,s)}else{if("smooth"!==f)return i(new Error("Unable to parse manifest Â«"+s+"Â» and create map || PREVIOUS ERROR: Unknown streaming format: "+f.toString()));var g=o.parser(d);u=r.createMapSmooth(g,s)}p(u,f,i,null)}},p=function(e,r,a,n){if(n){var t=e.periods[n.pptes.rep.id_period].asets[n.pptes.rep.id_aset].reps[n.pptes.rep.id_rep];if(t.init.value=n.response,"isoff-on-demand"==e.profile.name){try{t.segments=t.segments.concat(ISOBMFF.parseSIDX(n.response))}catch(o){return o.message="Unable to parse manifest and create map || PREVIOUS ERROR: "+o.message,a(o)}for(var s=0;s<t.segments.length;s++)t.segments[s].id=s}}for(var i,d=0;i=e.periods[d];d++)for(var l,m=0;l=i.asets[m];m++)for(var u,f=0;u=l.reps[f];f++){var h;if(u.init&&!u.init.value)return h="isoff-on-demand"==e.profile.name?{start:u.init.start,end:u.init.end}:"isoff-on-demand"==e.profile.name&&u.init.start&&u.init.end?{start:u.init.start,end:u.init.end}:null,void downloader.getURL({url:u.init.url,responseType:"arraybuffer",range:h,pptes:{rep:{id_period:d,id_aset:m,id_rep:f}}},function(n,t){n?a(n):p(e,r,a,t)})}a(null,{map:e,type:r})},d=function(e,s,i,p){var d=l(e),u=m(e);if("dash"===u){var f=t.parser(d);p(null,n.updateMapDash(f,s,i))}else if("smooth"===u){var h=o.parser(d);p(null,r.updateMapSmooth(h,s,i))}else{if("hls"!==u)return;a.updateMapMediaPlaylist(e,s,i,p)}},l=function(e){var r=new DomParser,a=r.parseFromString(e,"application/xml");return a},m=function(e){var r="#EXTM3U";if(e.slice(0,r.length)===r)return"hls";for(var a=l(e),n=[],t=0;t<a.childNodes.length;t++)"MPD"==a.childNodes[t].nodeName?n.push("dash"):"SmoothStreamingMedia"==a.childNodes[t].nodeName&&n.push("smooth");if(0===n.length)throw new Error("no relevant nodes detected for streaming format determination");if(n.length>1)throw new Error("too many nodes detected for streaming format determination");return n[0]},u=function(){for(var r in e)internalConf[r]=e[r]};u(),this.getMap=s}var DomParser=require("xmldom").DOMParser,ParseMPD=require("./Parser/MPDParser"),ParseSmooth=require("./Parser/SmoothParser"),DashMapGenerator=require("./DashMapGenerator"),SmoothMapGenerator=require("./SmoothMapGenerator"),HlsMapGenerator=require("./HlsMapGenerator"),Downloader=require("streamroot-downloader").Downloader,ISOBMFF=require("./utils/isobmffManager"),internalConf=require("./conf"),downloader=new Downloader;module.exports=MapGenerator;


},{"./DashMapGenerator":160,"./HlsMapGenerator":161,"./Parser/MPDParser":174,"./Parser/SmoothParser":175,"./SmoothMapGenerator":176,"./conf":177,"./utils/isobmffManager":179,"streamroot-downloader":245,"xmldom":261}],167:[function(require,module,exports){
  "use strict";var AdaptationSet=function(){this.contentProtection=null,this.segmentBase=null,this.segmentList=null,this.segmentTemplate=null,this.baseURLs=[],this.representations=[];var e=function(e,t,s){var i,n,a={};a.reps=[],this.lang&&(a.lang=this.lang),this.mimeType&&(a.type=this.mimeType.slice(0,this.mimeType.lastIndexOf("/"))),n=this.representations.length;for(var l=0;n>l;l++)i=this.representations[l],i.mimeType&&(a.type=i.mimeType.slice(0,i.mimeType.lastIndexOf("/"))),a.lang||i.lang&&(a.lang=i.lang),a.reps.push(i.getMap(l,e,t,s,this));return a};this.getMap=e};module.exports=AdaptationSet;


},{}],168:[function(require,module,exports){
  "use strict";var MPD=function(){this.baseURLs=[],this.location=null,this.mediaPresentationDuration=null,this.minBufferTime=null,this.periods=[],this.profiles={};var i=function(i){var t,e,r={};r.minBufferTime=this.minBufferTime,r.isLive="dynamic"===this.type,r.periods=[],e=this.periods.length;for(var s=0;e>s;s++)t=this.periods[s],t.duration||(t.duration=this.mediaPresentationDuration,e>1&&0),r.periods.push(t.getMap(i,this));return r};this.getMap=i};module.exports=MPD;


},{}],169:[function(require,module,exports){
  "use strict";var Period=function(){this.contentProtection=null,this.duration=null,this.id=null,this.segmentBase=null,this.segmentList=null,this.segmentTemplate=null,this.baseURLs=[],this.adaptationSets=[];var t=function(t,e){var s,i,a={};a.duration=this.duration||e.mediaPresentationDuration,a.decodeTimeOffset=0,a.playbackOffset=0,a.asets=[],i=this.adaptationSets.length;for(var n=0;i>n;n++)s=this.adaptationSets[n],a.asets.push(s.getMap(t,e,this));return a};this.getMap=t};module.exports=Period;


},{}],170:[function(require,module,exports){
  "use strict";var Representation=function(){this.id=null,this.mimeType=null,this.bandwidth=null,this.codecs=null,this.contentProtection=null,this.frameRate=null,this.height=null,this.width=null,this.segmentBase=null,this.segmentList=null,this.baseURLs=[];var e=function(e,t,i,s,n){var h,l={};return l.bandwidth=this.bandwidth,l.mime=this.mimeType||n.mimeType,l.id_rep=e,l.type=l.mime.slice(0,l.mime.lastIndexOf("/")),l.codecs=this.codecs||n.codecs,l.width=this.width||n.width,l.height=this.height||n.height,l.codecs&&(l.codecs=l.codecs.replace(/0x/,"")),"unknown"==l.codecs&&(l.codecs="mp4a.40.2"),h=t.getSegments(i,s,n,this),l.segments=h.segments,l.init=h.init,l.url=h.url,l};this.getMap=e};module.exports=Representation;


},{}],171:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentBase=function(i,t){this.url_mpd=t,this.timescale=i.timescale||1,this.representationTimeOffset=i.representationTimeOffset||0,this.indexRange=i.indexRange,this.indexRangeExact=i.indexRangeExact||!1,this.initialization=i.initialization;var e=function(i){var t={segments:[],init:{url:utils.absURL(this.url_mpd,i.baseURLs[0]),start:this.initialization&&this.initialization.start||0,end:this.indexRange.end||this.initialization&&this.initialization.end,value:null},url:utils.absURL(this.url_mpd,i.baseURLs[0])};return t};this.getSegments=e};module.exports=SegmentBase;


},{"../utils/utils":182}],172:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentList=function(t,e){var s=function(t,e){for(var s=0;s<e.segmentList.segmentURLs.length;s++)void 0===t[s].media&&(t[s].media=e.baseURLs[0]);return t},i=function(){for(var t=0,e={segments:[]},s=0;s<this.segmentList.segmentURLs.length;s++){var i={url:utils.absURL(this.url_mpd,this.segmentList.segmentURLs[s].media),duration:this.segmentList.timescale&&this.segmentList.duration/this.segmentList.timescale||this.segmentList.duration,time:t,start:this.segmentList.segmentURLs[s].mediaRange?this.segmentList.segmentURLs[s].mediaRange.start:0,end:this.segmentList.segmentURLs[s].mediaRange?this.segmentList.segmentURLs[s].mediaRange.end:void 0,size:this.segmentList.segmentURLs[s].mediaRange?this.segmentList.segmentURLs[s].mediaRange.length:void 0,id:s};e.segments.push(i),t+=i.duration}return e.init={url:utils.absURL(this.url_mpd,this.segmentList.initialization),start:this.segmentList.initialization.start,end:this.segmentList.initialization.end,value:null},e};t.segmentList.segmentURLs=s(t.segmentList.segmentURLs,t),this.segmentList=t.segmentList,this.url_mpd=e,this.getSegments=i};module.exports=SegmentList;


},{"../utils/utils":182}],173:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentTemplate=function(t,e){this.timescale=t?t.timescale:null,this.duration=t?t.duration:null,this.media=t?t.media:null,this.startNumber=t?t.startNumber:null,this.presentationTimeOffset=t?t.presentationTimeOffset:null,this.initialization=t?t.initialization:null,this.segmentTimeline=t?t.segmentTimeline:null,this.url_mpd=e;var i=function(t){if(null===t)return"Null template. Cannot merge.";for(var e in this)this.hasOwnProperty(e)&&(null===this[e]||void 0===this[e])&&(this[e]=t[e])},s=function(t,e,i,s){var a,n,r={segments:[]},l=i.bandwidth,m=0;if(this.segmentTimeline){var u;for(a=0;a<this.segmentTimeline.segments.length;a++){var h=this.segmentTimeline.segments[a];h.r||(h.r=0),(h.t||0===h.t)&&(u=h.t);for(var d=0;d<=h.r;d++)n={url:utils.absURL(this.url_mpd,s+this.media.replace("$RepresentationID$",i.id).replace("$Time$",u).replace("$Bandwidth$",l)),duration:h.d/this.timescale,time:u/this.timescale},n.id=t.isLive?Math.round(10*n.time):m,r.segments.push(n),u+=h.d,m++}}else{var o,p,c,g,$=this.startNumber||1,f=this.presentationTimeOffset||0;c=this.duration/this.timescale;var v=Date.now(),T=0;t.hasOwnProperty("suggestedPresentationDelay")&&(T=t.suggestedPresentationDelay),o=(v-t.availabilityStartTime)/1e3,o-=T,o-=T,p=Math.floor(o/c),$+=p,g=f/this.timescale+Math.floor(o);var b=g%c;if(g-=b,g-=c){var w=Math.floor(t.minimumUpdatePeriod/c);for(a=0;w>a;)n={url:utils.absURL(this.url_mpd,s+this.media.replace("$RepresentationID$",i.id).replace("$Number$",$).replace("$Bandwidth$",l)),duration:c,time:g},n.id=$,a++,r.segments.push(n),g+=n.duration,$++}else for($=this.startNumber||1,g=0,a=0;g<e.duration;)n={url:utils.absURL(this.url_mpd,s+this.media.replace("$RepresentationID$",i.id).replace("$Number$",$).replace("$Bandwidth$",l)),duration:this.timescale&&this.duration/this.timescale||this.duration,time:g},n.time+n.duration>e.duration&&(n.duration=e.duration-n.time),n.id=a,a++,r.segments.push(n),g+=n.duration,$++}return r.init={url:this.initialization&&utils.absURL(this.url_mpd,s+this.initialization.replace("$RepresentationID$",i.id).replace("$Bandwidth$",l))||r.segments[0].url,value:null},r};this.mergeTemplates=i,this.getSegments=s};module.exports=SegmentTemplate;


},{"../utils/utils":182}],174:[function(require,module,exports){
  "use strict";function ParseMPD(){var e=function(e){for(var t=0;t<e.childNodes.length;t++)if("MPD"==e.childNodes[t].nodeName)return C(e.childNodes[t])},t=function(e){return e},n=function(e){var t=/PT(([0-9]*)H)?(([0-9]*)M)?(([0-9.]*)S)?/,n=t.exec(e);return n?3600*parseFloat(n[2]||0)+60*parseFloat(n[4]||0)+parseFloat(n[6]||0):parseFloat(e)},r=function(e){var t=new Date(e).getTime();return t},a=function(e,t,n){var r=[];if(null===n)return r;for(var a=n.firstChild;null!==a;a=a.nextSibling)a.nodeName==e&&r.push(t(a));return r},i=function(e,t,n){return a(e,t,n)[0]||null},s=function(e,t,n){n=n||{};for(var r in e)"undefined"!=typeof t.attributes.getNamedItem(r)&&(n[r]=e[r](t.attributes.getNamedItem(r).value));return n},o=function(e){var t=/([0-9]+)(\/([0-9]+))?/.exec(e);return t?t[3]?parseFloat(t[1])/(parseFloat(t[3])||1):parseFloat(t[1]):1},u=function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var n=parseInt(t[1]),r=parseInt(t[2]);return{start:n,end:r,length:r-n+1}},m={media:t,mediaRange:u,index:t,indexRange:u},p=function(e){return s(m,e)},d=function(e){return e.textContent},l=function(e){return e.attributes.range?u(e.attributes.range.value):e.attributes?e.attributes[0].value:void 0},f={timescale:parseInt,duration:parseInt,indexRange:u,presentationTimeOffset:parseInt,startNumber:parseInt},c=function(e){var t=s(f,e);return t.initialization=i("Initialization",l,e),t},g=function(e){var t=c(e);return t.timescale&&t.duration?t.durationSeconds=t.duration/t.timescale:t.durationSeconds=t.duration,t.segmentURLs=a("SegmentURL",p,e),t},v=function(e){var t=e.attributes.schemeIdUri;if(!t||"http://youtube.com/drm/2012/10/10"!=t.textContent)return null;for(var n={},r=e.firstElementChild;"undefined"!=typeof r;r=r.nextElementSibling)if("yt:SystemURL"===r.nodeName){var a=r.attributes.type.textContent;n[a]=r.textContent}return n},S={id:parseInt,profiles:t,width:parseInt,height:parseInt,frameRate:o,audioSamplingRate:parseInt,mimeType:t,codecs:t},I=function(e,t){var n=s(S,e,t);return n.baseURLs=a("BaseURL",d,e),n.segmentBase=i("SegmentBase",c,e),n.segmentList=i("SegmentList",g,e),n.segmentTemplate=i("SegmentTemplate",h,e),n.contentProtection=i("ContentProtection",v,e),n},P={id:t,bandwidth:parseInt,qualityRanking:parseInt},T=function(e){var t=I(e,new Representation);return s(P,e,t),t},b={timescale:parseInt,duration:parseInt,media:t,startNumber:parseInt,presentationTimeOffset:parseInt,initialization:t},h=function(e){var t=s(b,e);return t.segmentTimeline=i("SegmentTimeline",R,e),t},R=function(e){var t={segments:a("S",y,e)};return t},x={t:parseInt,d:parseInt,r:parseInt},y=function(e){var t=s(x,e);return t},L={lang:t},M=function(e){var t=I(e,new AdaptationSet);s(L,e,t),t.segmentTemplate=i("SegmentTemplate",h,e),t.representations=a("Representation",T,e),t.segmentList=i("SegmentList",g,e);var n,r,o=t.representations.length;for(n=0;o>n;n++)r=t.representations[n],"undefined"!=typeof t.segmentTemplate&&(r.segmentTemplate=new SegmentTemplate(r.segmentTemplate),r.segmentTemplate.mergeTemplates(t.segmentTemplate));return t},D={id:parseInt,start:n,duration:n},N=function(e){var t=I(e,new Period);return s(D,e,t),t.adaptationSets=a("AdaptationSet",M,e),t},U=function(e){var t=e.split(":"),n=t.length,r={};return r.name=t[n-2],r.year=t[n-1],r},w=function(e){return e.textContent},C=function(e){var o=new MPD;return s({mediaPresentationDuration:n,type:t,minBufferTime:n,maxSegmentDuration:n,minimumUpdatePeriod:n,availabilityStartTime:r,suggestedPresentationDelay:n,profiles:U},e,o),o.periods=a("Period",N,e),o.baseURLs=a("BaseURL",d,e),o.location=i("Location",w,e),o.isLive="dynamic"===o.type,o};this.parser=e}var MPD=require("../MediaPresentation/MPD"),Period=require("../MediaPresentation/Period"),AdaptationSet=require("../MediaPresentation/AdaptationSet"),Representation=require("../MediaPresentation/Representation"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate");module.exports=ParseMPD;


},{"../MediaPresentation/AdaptationSet":167,"../MediaPresentation/MPD":168,"../MediaPresentation/Period":169,"../MediaPresentation/Representation":170,"../MediaPresentation/SegmentTemplate":173}],175:[function(require,module,exports){
  "use strict";function ParseSmooth(){var t=function(t){for(var r=0;r<t.childNodes.length;r++)if("SmoothStreamingMedia"==t.childNodes[r].nodeName)return e(t.childNodes[r])},e=function(t){var e={};e.MajorVersion=parseInt(t.getAttribute("MajorVersion")),e.MinorVersion=parseInt(t.getAttribute("MinorVersion")),e.Duration=parseInt(t.getAttribute("Duration")),e.Timescale=parseInt(t.getAttribute("TimeScale")||t.getAttribute("Timescale")),(null===e.Timescale||void 0===e.Timescale)&&(e.Timescale=1e7),e.IsLive=t.getAttribute("IsLive"),e.LookaheadCount=t.getAttribute("LookaheadCount"),e.DVRWindowLength=t.getAttribute("DVRWindowLength"),e.StreamIndex=[];for(var i=t.getElementsByTagName("StreamIndex"),a=0;a<i.length;a++)e.StreamIndex[a]=r(i[a]);return e},r=function(t){var e={},r=t.getAttribute("Type");e.Type=r,e.Chunks=parseInt(t.getAttribute("Chunks")),e.QualityLevels=parseInt(t.getAttribute("QualityLevels")),e.Url=t.getAttribute("Url"),e.Timescale=parseInt(t.getAttribute("TimeScale")||t.getAttribute("Timescale")||"10000000"),e.Name=t.getAttribute("Name"),"video"==r?(e.MaxWidth=parseInt(t.getAttribute("MaxWidth")),e.MaxHeight=parseInt(t.getAttribute("MaxHeight")),e.DisplayWidth=parseInt(t.getAttribute("DisplayWidth")),e.DisplayHeight=parseInt(t.getAttribute("DisplayHeight")),e.Subtype=t.getAttribute("Subtype")):"text"==r&&(e.Subtype=t.getAttribute("Subtype")),e.ParentStreamIndex=t.getAttribute("ParentStreamIndex"),e.ManifestOuput=t.getAttribute("ManifestOuput"),e.Subtype=t.getAttribute("Subtype"),e.QualityLevel=[],e.c=[];for(var n=t.getElementsByTagName("QualityLevel"),u=t.getElementsByTagName("c"),s=0;s<n.length;s++)e.QualityLevel[s]=i(n[s],r);for(var s=0;s<u.length;s++)e.c[s]=a(u[s],r);return e},i=function(t,e){var r={};return r.Index=parseInt(t.getAttribute("Index")),r.Bitrate=parseInt(t.getAttribute("Bitrate")),r.CodecPrivateData=t.getAttribute("CodecPrivateData"),r.Scheme=t.getAttribute("Scheme"),r.SchemeVersion=t.getAttribute("SchemeVersion"),r.BufferTime=t.getAttribute("BufferTime"),r.NominalBitrate=t.getAttribute("NominalBitrate"),r.HardwareProfile=t.getAttribute("HardwareProfile"),r.Index=parseInt(t.getAttribute("Index")),"video"==e?(r.MaxHeight=parseInt(t.getAttribute("MaxHeight")),r.MaxWidth=parseInt(t.getAttribute("MaxWidth")),r.FourCC=t.getAttribute("FourCC"),n(t,"NALUnitLengthField",r)):"audio"==e&&(r.SamplingRate=parseInt(t.getAttribute("SamplingRate")),r.Channels=parseInt(t.getAttribute("Channels")),r.BitsPerSample=parseInt(t.getAttribute("BitsPerSample")),r.PacketSize=parseInt(t.getAttribute("PacketSize")),r.AudioTag=t.getAttribute("AudioTag"),r.FourCC=t.getAttribute("FourCC")),r},a=function(t){var e={};if(e.d=parseInt(t.getAttribute("d")),n(t,"n",e),t.hasAttribute("t")){var r=t.getAttribute("t");if(conf.LONG_TIME){for(var i=conf.TIME_LENGTH,a=r.slice(-conf.TIME_LENGTH),u=0;"0"===a[u];)u+=1;i-=u,e.t=parseInt(r.slice(-i)),e.time_most_significant=parseInt(r.substring(0,r.length-i)||"0")}else e.t=parseInt(r)}return t.hasAttribute("r")&&(e.r=parseInt(t.getAttribute("r"))),e},n=function(t,e,r){t.hasAttribute(e)&&(r[e]=t.getAttribute(e))};this.parser=t}var conf=require("../conf");module.exports=ParseSmooth;


},{"../conf":177}],176:[function(require,module,exports){
  "use strict";function SmoothMapGenerator(){var e=function(e,t){var i,r,s={periods:[]},a=null;s.isLive=!1,void 0!==e.IsLive&&"true"===e.IsLive.toLowerCase()&&(s.isLive=!0);for(var o=0;o<e.StreamIndex.length;o++)i=e.StreamIndex[o].c[0].t||0,null===a?a=i:a>i&&(a=i);r=conf.HACK_OFFSET?a:0;var n=new InitBuilder,d=n.buildInits(e),p={asets:[]},l=e.Timescale||1e7;p.decodeTimeOffset=r,p.playbackOffset=r/l,p.duration=e.Duration/l;for(var o=0;o<e.StreamIndex.length;o++){var m={reps:new Array},u=e.StreamIndex[o];if("text"!=u.Type){u.Type&&(m.type=u.Type),u.Timescale&&(l=u.Timescale);for(var h=utils.rmQueryArgs(t).replace("/Manifest","").replace("/manifest","")+"/"+u.Url,c=0;c<u.QualityLevel.length;c++){var v=u.QualityLevel[c],g=v.Bitrate,f=v.FourCC,C="";if("audio"==u.Type)"AACL"==f?(C="mp4a.40.2",conf.SS_IMPLICIT_AAC_HE&&(C="mp4a.40.5")):"AACH"==f&&(C="mp4a.40.5");else if("video"==u.Type)if("AVC1"==f||"H264"==f||"X264"==f||"DAVC"==f){var y=v.CodecPrivateData.substring(10,12).toLowerCase(),T=v.CodecPrivateData.substring(12,14).toLowerCase(),A=v.CodecPrivateData.substring(14,16).toLowerCase();C="avc1."+y+T+A}else C="Error. Codec "+f+" not supported";var w={value:d[u.Type][c].buffer},L={bandwidth:g,fourCC:f,codecs:C,init:w,mime:m.type+"/mp4",segments:[]};"video"===u.Type&&(u.DisplayWidth?L.width=u.DisplayWidth:v.DisplayWidth?L.width=v.DisplayWidth:u.MaxWidth?L.width=u.MaxWidth:v.MaxWidth?L.width=v.MaxWidth:0,u.DisplayHeight?L.height=u.DisplayHeight:v.DisplayHeight?L.height=v.DisplayHeight:u.MaxHeight?L.height=u.MaxHeight:v.MaxHeight?L.height=v.MaxHeight:0);var D,M=u.c[0].t||0,x=u.c[0].time_most_significant;D=(M-r)/l;for(var b=h.replace("{bitrate}",g),I=0,S=0;S<u.c.length;S++){var H,_,P,W=u.c[S];isNaN(W.d)?void 0!==W.t&&u.c[S+1]&&(_=u.c[S+1].t-W.t):_=W.d,H=_/l,P=W.r||1;for(var Q=0;P>Q;Q++){var B={url:b.replace("{start time}",(x||"")+M.toString()),duration:H,time:D,timeCode:M,decodeTime:M-r},q=M/l,E=q;B.id=s.isLive?Math.floor(E):I,I++,D+=H,M+=_,L.segments.push(B)}}m.reps.push(L)}p.asets.push(m)}}return s.periods.push(p),s},t=function(e,t,i,r){var s={periods:[]},a={asets:[]},o=e.Timescale||1e7;r=t.periods[0].decodeTimeOffset,a.duration=e.Duration/o;for(var n=0;n<e.StreamIndex.length;n++){var d={reps:[]},p=e.StreamIndex[n];p.Type&&(d.type=p.Type),p.Timescale&&(o=p.Timescale);for(var l=utils.rmQueryArgs(i).replace("/Manifest","").replace("/manifest","")+"/"+p.Url,m=0;m<p.QualityLevel.length;m++){var u=p.QualityLevel[m],h=u.Bitrate,c=u.FourCC,v="";if("audio"==p.Type)"AACL"==c?v="mp4a.40.2":"AACH"==c&&(v="mp4a.40.5");else if("video"==p.Type)if("AVC1"==c||"H264"==c||"X264"==c||"DAVC"==c){var g=u.CodecPrivateData.substring(10,12).toLowerCase(),f=u.CodecPrivateData.substring(12,14).toLowerCase(),C=u.CodecPrivateData.substring(14,16).toLowerCase();v="avc1."+g+f+C}else v="Error. Codec "+c+" not supported";for(var y={bandwidth:h,fourCC:c,codecs:v,mime:d.type+"/mp4",segments:[]},T=p.c[0].t,A=p.c[0].time_most_significant,w=(T-r)/o,L=l.replace("{bitrate}",h),D=0;D<p.c.length;D++){var M,x,b,I=p.c[D];isNaN(I.d)?void 0!==I.t&&p.c[D+1]&&(x=p.c[D+1].t-I.t):x=I.d,M=x/o,b=I.r||1;for(var S=0;b>S;S++){var H=T/o,P=H,W={id:Math.floor(P),url:L.replace("{start time}",(A||"")+T.toString()),duration:M,time:w,timeCode:T,decodeTime:T-r};w+=M,T+=x,y.segments.push(W)}}for(var Q=-1,B=!1,q=y.segments.length-1;q>=0;q--)_.where(t.periods[0].asets[n].reps[m].segments,{id:y.segments[q].id}).length||B?B=!0:Q=q;var E=y.segments.slice(0),F={segments:B&&Q>-1?E.splice(Q):[]};d.reps.push(F);for(var N=t.periods[0].asets[n].reps[m].segments.length,q=0;N>q&&t.periods[0].asets[n].reps[m].segments[0].id!==y.segments[0].id;q++)t.periods[0].asets[n].reps[m].segments.splice(0,1);for(var O=y.segments.length,q=0;O>q;q++)t.periods[0].asets[n].reps[m].segments[q]||t.periods[0].asets[n].reps[m].segments.push(y.segments[q])}a.asets.push(d)}return s.periods.push(a),{map:t,mapAddToP2P:s}};this.createMapSmooth=e,this.updateMapSmooth=t}var conf=require("./conf"),_=require("lodash"),InitBuilder=require("./InitializationBuilder"),utils=require("./utils/utils");module.exports=SmoothMapGenerator;


},{"./InitializationBuilder":162,"./conf":177,"./utils/utils":182,"lodash":183}],177:[function(require,module,exports){
  "use strict";var Conf=function(){this.HACK_OFFSET=!0,this.PLAYLIST_HLS_KEEP_LAST_LINES=void 0,this.SS_IMPLICIT_AAC_HE=!1},conf=new Conf;module.exports=conf;


},{}],178:[function(require,module,exports){
  "use strict";var Downloader=require("streamroot-downloader").Downloader,downloader=new Downloader,AesKeysHelper=function(){var e={},r=function(e){var r=new Uint32Array([e]),n=new Uint8Array(r.buffer),o=new Uint8Array([n[3],n[2],n[1],n[0]]),t=new Uint8Array(16);return t.set(o,12),t},n=function(r,n){if(e[r])n(null,e[r]);else{var o={url:r,responseType:"arraybuffer"};downloader.getURL(o,function(o,t){if(o)n(o);else{var a=new Uint8Array(t.response);e[r]=a,n(null,a)}})}};this.getIV=r,this.getAESKey=n};module.exports=AesKeysHelper;


},{"streamroot-downloader":245}],179:[function(require,module,exports){
  var extractinit=function(t){for(var r=new DataView(t),e=0;e<t.byteLength;){var n=r.getUint32(e+4,!1);if(1936286840==n||1836019558==n)break;e+=r.getUint32(e,!1)}return new Uint8Array(t.slice(0,e))},parsesidx=function(t,r){for(var e=new DataView(t),n=0;1936286840!=e.getUint32(n+4,!1);)if(n+=e.getUint32(n,!1),n>=t.byteLength)throw new Error("Could not find sidx");var i=e.getUint32(n,!1)+n;if(i>t.byteLength)throw new Error("sidx terminates after array buffer");var a=e.getUint8(n+8);n+=12;var o=e.getUint32(n+4,!1);n+=8;var f,g;0===a?(f=e.getUint32(n,!1),g=e.getUint32(n+4,!1),n+=8):(f=(e.getUint32(n,!1)<<32)+e.getUint32(n+4,!1),g=(e.getUint32(n+8,!1)<<32)+e.getUint32(n+12,!1),n+=16),g+=i+(r||0);var U=e.getUint16(n+2,!1);n+=4;for(var s=g,d=f,w=[],v=0;U>v;v++){var h=e.getUint32(n,!1),u=2147483648&h;if(u)throw new Error("Unhandled indirect reference");h=2147483647&h;var c=e.getUint32(n+4,!1);n+=12,w.push({size:h,offset:s,duration:c/o,time:d/o}),s+=h,d+=c}if(n!=i)throw new Error("Error: final pos "+n+" differs from SIDX end "+i);return w};module.exports={parseSIDX:parsesidx,extractInit:extractinit};


},{}],180:[function(require,module,exports){
  var JSPack=function(){var e,n=!1,t=this;t._DeArray=function(e,n,t){return[e.slice(n,n+t)]},t._EnArray=function(e,n,t,a){for(var r=0;t>r;e[n+r]=a[r]?a[r]:0,r++);},t._DeChar=function(e,n){return String.fromCharCode(e[n])},t._EnChar=function(e,n,t){e[n]=t.charCodeAt(0)},t._DeInt=function(t,a){var r,i,c,o=n?e.len-1:0,s=n?-1:1,h=o+s*e.len;for(r=0,i=o,c=1;i!=h;r+=t[a+i]*c,i+=s,c*=256);return e.bSigned&&r&Math.pow(2,8*e.len-1)&&(r-=Math.pow(2,8*e.len)),r},t._EnInt=function(t,a,r){var i,c=n?e.len-1:0,o=n?-1:1,s=c+o*e.len;for(r=r<e.min?e.min:r>e.max?e.max:r,i=c;i!=s;t[a+i]=255&r,i+=o,r>>=8);},t._DeString=function(e,n,t){for(var a=new Array(t),r=0;t>r;a[r]=String.fromCharCode(e[n+r]),r++);return a.join("")},t._EnString=function(e,n,t,a){for(var r,i=0;t>i;e[n+i]=(r=a.charCodeAt(i))?r:0,i++);},t._De754=function(t,a){var r,i,c,o,s,h,_,l,u,f;for(_=e.mLen,l=8*e.len-e.mLen-1,f=(1<<l)-1,u=f>>1,o=n?0:e.len-1,s=n?1:-1,r=t[a+o],o+=s,h=-7,i=r&(1<<-h)-1,r>>=-h,h+=l;h>0;i=256*i+t[a+o],o+=s,h-=8);for(c=i&(1<<-h)-1,i>>=-h,h+=_;h>0;c=256*c+t[a+o],o+=s,h-=8);switch(i){case 0:i=1-u;break;case f:return c?NaN:(r?-1:1)*(1/0);default:c+=Math.pow(2,_),i-=u}return(r?-1:1)*c*Math.pow(2,i-_)},t._En754=function(t,a,r){var i,c,o,s,h,_,l,u,f,d;for(l=e.mLen,u=8*e.len-e.mLen-1,d=(1<<u)-1,f=d>>1,i=0>r?1:0,r=Math.abs(r),isNaN(r)||r==1/0?(o=isNaN(r)?1:0,c=d):(c=Math.floor(Math.log(r)/Math.LN2),r*(_=Math.pow(2,-c))<1&&(c--,_*=2),r+=c+f>=1?e.rt/_:e.rt*Math.pow(2,1-f),r*_>=2&&(c++,_/=2),c+f>=d?(o=0,c=d):c+f>=1?(o=(r*_-1)*Math.pow(2,l),c+=f):(o=r*Math.pow(2,f-1)*Math.pow(2,l),c=0)),s=n?e.len-1:0,h=n?-1:1;l>=8;t[a+s]=255&o,s+=h,o/=256,l-=8);for(c=c<<l|o,u+=l;u>0;t[a+s]=255&c,s+=h,c/=256,u-=8);t[a+s-h]|=128*i},t._sPattern="(\\d+)?([AxcbBhHsfdiIlL])",t._lenLut={A:1,x:1,c:1,b:1,B:1,h:2,H:2,s:1,f:4,d:8,i:4,I:4,l:4,L:4},t._elLut={A:{en:t._EnArray,de:t._DeArray},s:{en:t._EnString,de:t._DeString},c:{en:t._EnChar,de:t._DeChar},b:{en:t._EnInt,de:t._DeInt,len:1,bSigned:!0,min:-Math.pow(2,7),max:Math.pow(2,7)-1},B:{en:t._EnInt,de:t._DeInt,len:1,bSigned:!1,min:0,max:Math.pow(2,8)-1},h:{en:t._EnInt,de:t._DeInt,len:2,bSigned:!0,min:-Math.pow(2,15),max:Math.pow(2,15)-1},H:{en:t._EnInt,de:t._DeInt,len:2,bSigned:!1,min:0,max:Math.pow(2,16)-1},i:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!0,min:-Math.pow(2,31),max:Math.pow(2,31)-1},I:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!1,min:0,max:Math.pow(2,32)-1},l:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!0,min:-Math.pow(2,31),max:Math.pow(2,31)-1},L:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!1,min:0,max:Math.pow(2,32)-1},f:{en:t._En754,de:t._De754,len:4,mLen:23,rt:Math.pow(2,-24)-Math.pow(2,-77)},d:{en:t._En754,de:t._De754,len:8,mLen:52,rt:0}},t._UnpackSeries=function(n,t,a,r){for(var i=e.de,c=[],o=0;n>o;c.push(i(a,r+o*t)),o++);return c},t._PackSeries=function(n,t,a,r,i,c){for(var o=e.en,s=0;n>s;o(a,r+s*t,i[c+s]),s++);},t.Unpack=function(t,a,r){n="<"!=t.charAt(0),r=r?r:0;for(var i,c,o,s=new RegExp(this._sPattern,"g"),h=[];i=s.exec(t);){if(c=void 0==i[1]||""==i[1]?1:parseInt(i[1]),o=this._lenLut[i[2]],r+c*o>a.length)return void 0;switch(i[2]){case"A":case"s":h.push(this._elLut[i[2]].de(a,r,c));break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":e=this._elLut[i[2]],h.push(this._UnpackSeries(c,o,a,r))}r+=c*o}return Array.prototype.concat.apply([],h)},t.PackTo=function(t,a,r,i){n="<"!=t.charAt(0);for(var c,o,s,h,_=new RegExp(this._sPattern,"g"),l=0;c=_.exec(t);){if(o=void 0==c[1]||""==c[1]?1:parseInt(c[1]),s=this._lenLut[c[2]],r+o*s>a.length)return!1;switch(c[2]){case"A":case"s":if(l+1>i.length)return!1;this._elLut[c[2]].en(a,r,o,i[l]),l+=1;break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":if(e=this._elLut[c[2]],l+o>i.length)return!1;this._PackSeries(o,s,a,r,i,l),l+=o;break;case"x":for(h=0;o>h;h++)a[r+h]=0}r+=o*s}return a},t.Pack=function(e,n){return this.PackTo(e,new Array(this.CalcLength(e)),0,n)},t.CalcLength=function(e){for(var n,t=new RegExp(this._sPattern,"g"),a=0;n=t.exec(e);)a+=(void 0==n[1]||""==n[1]?1:parseInt(n[1]))*this._lenLut[n[2]];return a}};module.exports=JSPack;


},{}],181:[function(require,module,exports){
  var Long=function(t,n,i){this.low=0|t,this.high=0|n,this.unsigned=!!i},INT_CACHE={},UINT_CACHE={};Long.fromInt=function(t,n){var i,o;return n?(t>>>=0,t>=0&&256>t&&(o=UINT_CACHE[t])?o:(i=new Long(t,0>(0|t)?-1:0,!0),t>=0&&256>t&&(UINT_CACHE[t]=i),i)):(t=0|t,t>=-128&&128>t&&(o=INT_CACHE[t])?o:(i=new Long(t,0>t?-1:0,!1),t>=-128&&128>t&&(INT_CACHE[t]=i),i))},Long.fromNumber=function(t,n){return n=!!n,isNaN(t)||!isFinite(t)?Long.ZERO:!n&&-TWO_PWR_63_DBL>=t?Long.MIN_SIGNED_VALUE:n&&0>=t?Long.MIN_UNSIGNED_VALUE:!n&&t+1>=TWO_PWR_63_DBL?Long.MAX_SIGNED_VALUE:n&&t>=TWO_PWR_64_DBL?Long.MAX_UNSIGNED_VALUE:0>t?Long.fromNumber(-t,!1).negate():new Long(t%TWO_PWR_32_DBL|0,t/TWO_PWR_32_DBL|0,n)},Long.fromBits=function(t,n,i){return new Long(t,n,i)},Long.from28Bits=function(t,n,i,o){return Long.fromBits(t|n<<28,n>>>4|i<<24,o)},Long.fromString=function(t,n,i){if(0==t.length)throw new Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return Long.ZERO;if("number"==typeof n&&(i=n,n=!1),i=i||10,2>i||i>36)throw new Error("radix out of range: "+i);if("-"==t.charAt(0))return Long.fromString(t.substring(1),n,i).negate();if(t.indexOf("-")>=0)throw new Error('number format error: interior "-" character: '+t);for(var o=Long.fromNumber(Math.pow(i,8)),r=Long.ZERO,e=0;e<t.length;e+=8){var g=Math.min(8,t.length-e),s=parseInt(t.substring(e,e+g),i);if(8>g){var h=Long.fromNumber(Math.pow(i,g));r=r.multiply(h).add(Long.fromNumber(s))}else r=r.multiply(o),r=r.add(Long.fromNumber(s))}return r};var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_31_DBL=TWO_PWR_32_DBL/2,TWO_PWR_48_DBL=TWO_PWR_32_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=Long.fromInt(1<<24);Long.ZERO=Long.fromInt(0),Long.ONE=Long.fromInt(1),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_SIGNED_VALUE=Long.fromBits(-1,2147483647,!1),Long.MAX_UNSIGNED_VALUE=Long.fromBits(-1,-1,!0),Long.MAX_VALUE=Long.MAX_SIGNED_VALUE,Long.MIN_SIGNED_VALUE=Long.fromBits(0,-2147483648,!1),Long.MIN_UNSIGNED_VALUE=Long.fromBits(0,0,!0),Long.MIN_VALUE=Long.MIN_SIGNED_VALUE,Long.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},Long.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},Long.prototype.toString=function(t){if(t=t||10,2>t||t>36)throw new Error("radix out of range: "+t);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(Long.MIN_SIGNED_VALUE)){var i=Long.fromNumber(t),o=this.div(i);return n=o.multiply(i).subtract(this),o.toString(t)+n.toInt().toString(t)}return"-"+this.negate().toString(t)}var r=Long.fromNumber(Math.pow(t,6));n=this;for(var e="";;){var g=n.div(r),s=n.subtract(g.multiply(r)).toInt(),h=s.toString(t);if(n=g,n.isZero())return h+e;for(;h.length<6;)h="0"+h;e=""+h+e}},Long.prototype.getHighBits=function(){return this.high},Long.prototype.getHighBitsUnsigned=function(){return this.high>>>0},Long.prototype.getLowBits=function(){return this.low},Long.prototype.getLowBitsUnsigned=function(){return this.low>>>0},Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Long.MIN_SIGNED_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},Long.prototype.isZero=function(){return 0==this.high&&0==this.low},Long.prototype.isNegative=function(){return!this.unsigned&&this.high<0},Long.prototype.isOdd=function(){return 1==(1&this.low)},Long.prototype.isEven=function(){return 0==(1&this.low)},Long.prototype.equals=function(t){return this.unsigned!=t.unsigned&&this.high>>>31!=t.high>>>31?!1:this.high==t.high&&this.low==t.low},Long.prototype.notEquals=function(t){return!this.equals(t)},Long.prototype.lessThan=function(t){return this.compare(t)<0},Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},Long.prototype.greaterThan=function(t){return this.compare(t)>0},Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},Long.prototype.compare=function(t){if(this.equals(t))return 0;var n=this.isNegative(),i=t.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high==this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1},Long.prototype.negate=function(){return!this.unsigned&&this.equals(Long.MIN_SIGNED_VALUE)?Long.MIN_SIGNED_VALUE:this.not().add(Long.ONE)},Long.prototype.add=function(t){var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r+h,f+=a>>>16,a&=65535,f+=o+s,L+=f>>>16,f&=65535,L+=i+g,u+=L>>>16,L&=65535,u+=n+e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.subtract=function(t){return this.add(t.negate())},Long.prototype.multiply=function(t){if(this.isZero())return Long.ZERO;if(t.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE))return t.isOdd()?Long.MIN_VALUE:Long.ZERO;if(t.equals(Long.MIN_VALUE))return this.isOdd()?Long.MIN_VALUE:Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(TWO_PWR_24)&&t.lessThan(TWO_PWR_24))return Long.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r*h,f+=a>>>16,a&=65535,f+=o*h,L+=f>>>16,f&=65535,f+=r*s,L+=f>>>16,f&=65535,L+=i*h,u+=L>>>16,L&=65535,L+=o*s,u+=L>>>16,L&=65535,L+=r*g,u+=L>>>16,L&=65535,u+=n*h+i*s+o*g+r*e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.div=function(t){if(t.isZero())throw new Error("division by zero");if(this.isZero())return Long.ZERO;if(this.equals(Long.MIN_SIGNED_VALUE)){if(t.equals(Long.ONE)||t.equals(Long.NEG_ONE))return min;if(t.equals(Long.MIN_VALUE))return Long.ONE;var n=this.shiftRight(1),i=n.div(t).shiftLeft(1);if(i.equals(Long.ZERO))return t.isNegative()?Long.ONE:Long.NEG_ONE;var o=this.subtract(t.multiply(i)),r=i.add(o.div(t));return r}if(t.equals(Long.MIN_VALUE))return Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(var e=Long.ZERO,o=this;o.greaterThanOrEqual(t);){for(var i=Math.max(1,Math.floor(o.toNumber()/t.toNumber())),g=Math.ceil(Math.log(i)/Math.LN2),s=48>=g?1:Math.pow(2,g-48),h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);u.isNegative()||u.greaterThan(o);)i-=s,h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);h.isZero()&&(h=Long.ONE),e=e.add(h),o=o.subtract(u)}return e},Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},Long.prototype.not=function(){return Long.fromBits(~this.low,~this.high,this.unsigned)},Long.prototype.and=function(t){return Long.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},Long.prototype.or=function(t){return Long.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},Long.prototype.xor=function(t){return Long.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},Long.prototype.shiftLeft=function(t){if(t&=63,0==t)return this;var n=this.low;if(32>t){var i=this.high;return Long.fromBits(n<<t,i<<t|n>>>32-t,this.unsigned)}return Long.fromBits(0,n<<t-32,this.unsigned)},Long.prototype.shiftRight=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>t,this.unsigned)}return Long.fromBits(n>>t-32,n>=0?0:-1,this.unsigned)},Long.prototype.shiftRightUnsigned=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>>t,this.unsigned)}return 32==t?Long.fromBits(n,0,this.unsigned):Long.fromBits(n>>>t-32,0,this.unsigned)},Long.prototype.toSigned=function(){var t=this.clone();return t.unsigned=!1,t},Long.prototype.toUnsigned=function(){var t=this.clone();return t.unsigned=!0,t},Long.prototype.clone=function(){return new Long(this.low,this.high,this.unsigned)},module.exports=Long;


},{}],182:[function(require,module,exports){
  function occurrences(n,e,r){for(var t=0,o=0;;){if(o=n.indexOf(e,o),-1===o||r&&!(r>o))break;t++,o+=e.length}return t}function nthChar(n,e,r){for(var t=0,o=0;r>t&&(o=n.indexOf(e,o)+1);)t++;return t==r?o-1:NaN}var clone=function n(e){function r(n,e,r){var t,o,c={};for(t in e)o=e[t],t in n&&(n[t]===o||t in c&&c[t]===o)||(n[t]=r?r(o):o);return n}if(!e||"object"!=typeof e||"[object Function]"===Object.prototype.toString.call(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,o,c;if(e instanceof Array)for(t=[],o=0,c=e.length;c>o;++o)o in e&&t.push(n(e[o]));else t=e.constructor?new e.constructor:{};return r(t,e,n)},mr=function(n,e){return e?"bytes="+n+"-"+e:"bytes="+n+"-"},absolutizeURL=function(n,e){if(e.match(/^[a-z]*:\/\//))return e;var r;return"/"==e[0]&&(e=e.slice(1,e.length)),i=n.lastIndexOf("/"),i+1<=n.length&&(r=n.slice(0,i+1)),r+e},rmQueryArgs=function(n){var e=n.indexOf("?");return e>0?n.substr(0,e):n},asyncMap=function(n,e,r){var t=n.length,o=[];n.map(function(n,c){e(n,c,function(n,e){n?r(n):(t--,o[c]=e,0===t&&r(null,o))})})};module.exports={make_range:mr,absURL:absolutizeURL,clone:clone,rmQueryArgs:rmQueryArgs,asyncMap:asyncMap,occurrences:occurrences,nthChar:nthChar};


},{}],183:[function(require,module,exports){
  (function (global){
    (function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||"undefined"==typeof n&&e)return 1;if(t>n||!e||"undefined"==typeof t&&r)return-1}return 0}function t(n,t,r){if(t!==t)return h(n,r);for(var e=(r||0)-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function r(n){return"function"==typeof n||!1}function e(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function u(n){return"string"==typeof n?n:null==n?"":n+""}function o(n){return n.charCodeAt(0)}function i(n,t){for(var r=-1,e=n.length;++r<e&&t.indexOf(n.charAt(r))>-1;);return r}function a(n,t){for(var r=n.length;r--&&t.indexOf(n.charAt(r))>-1;);return r}function f(t,r){return n(t.criteria,r.criteria)||t.index-r.index}function c(t,r){for(var e=-1,u=t.criteria,o=r.criteria,i=u.length;++e<i;){var a=n(u[e],o[e]);if(a)return a}return t.index-r.index}function l(n){return Dn[n]}function s(n){return zn[n]}function p(n){return"\\"+Pn[n]}function h(n,t,r){for(var e=n.length,u=r?t||e:(t||0)-1;r?u--:++u<e;){var o=n[u];if(o!==o)return u}return-1}function v(n){return n&&"object"==typeof n||!1}function _(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function g(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=z,o[++u]=r);return o}function y(n,t){for(var r,e=-1,u=n.length,o=-1,i=[];++e<u;){var a=n[e],f=t?t(a,e,n):a;e&&r===f||(r=f,i[++o]=a)}return i}function d(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function m(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function w(n){return Mn[n]}function b(_){function G(n){if(v(n)&&!Hi(n)&&!(n instanceof Dn)){if(n instanceof nn)return n;if(ri.call(n,"__chain__")&&ri.call(n,"__wrapped__"))return Lr(n)}return new nn(n)}function H(){}function nn(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function Dn(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Si,this.__views__=null}function zn(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new Dn(this.__wrapped__);return e.__actions__=n?nt(n):null,e.__dir__=this.__dir__,e.__dropCount__=this.__dropCount__,e.__filtered__=this.__filtered__,e.__iteratees__=t?nt(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?nt(r):null,e}function Mn(){if(this.__filtered__){var n=new Dn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function qn(){var n=this.__wrapped__.value();if(!Hi(n))return Zt(n,this.__actions__);var t=this.__dir__,r=0>t,e=wr(0,n.length,this.__views__),u=e.start,o=e.end,i=o-u,a=this.__dropCount__,f=Ri(i,this.__takeCount__),c=r?o:u-1,l=this.__iteratees__,s=l?l.length:0,p=0,h=[];n:for(;i--&&f>p;){c+=t;for(var v=-1,_=n[c];++v<s;){var g=l[v],y=g.iteratee,d=y(_,c,n),m=g.type;if(m==$)_=d;else if(!d){if(m==L)continue n;break n}}a?a--:h[p++]=_}return h}function Pn(){this.__data__={}}function Vn(n){return this.has(n)&&delete this.__data__[n]}function Yn(n){return"__proto__"==n?x:this.__data__[n]}function Gn(n){return"__proto__"!=n&&ri.call(this.__data__,n)}function Jn(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this}function Zn(n){var t=n?n.length:0;for(this.data={hash:xi(null),set:new _i};t--;)this.push(n[t])}function Hn(n,t){var r=n.data,e="string"==typeof t||ku(t)?r.set.has(t):r.hash[t];return e?0:-1}function Qn(n){var t=this.data;"string"==typeof n||ku(n)?t.set.add(n):t.hash[n]=!0}function nt(n,t){var r=-1,e=n.length;for(t||(t=zo(e));++r<e;)t[r]=n[r];return t}function tt(n,t){for(var r=-1,e=n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function rt(n,t){for(var r=n.length;r--&&t(n[r],r,n)!==!1;);return n}function et(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function ut(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function ot(n,t){for(var r=-1,e=n.length,u=zo(e);++r<e;)u[r]=t(n[r],r,n);return u}function it(n){for(var t=-1,r=n.length,e=Ti;++t<r;){var u=n[t];u>e&&(e=u)}return e}function at(n){for(var t=-1,r=n.length,e=Si;++t<r;){var u=n[t];e>u&&(e=u)}return e}function ft(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function ct(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function lt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function st(n,t){return"undefined"==typeof n?t:n}function pt(n,t,r,e){return"undefined"!=typeof n&&ri.call(e,r)?n:t}function ht(n,t,r){var e=ea(t);if(!r)return _t(t,n,e);for(var u=-1,o=e.length;++u<o;){var i=e[u],a=n[i],f=r(a,t[i],i,n,t);(f===f?f===a:a!==a)&&("undefined"!=typeof a||i in n)||(n[i]=f)}return n}function vt(n,t){for(var r=-1,e=n.length,u=Ir(e),o=t.length,i=zo(o);++r<o;){var a=t[r];u?(a=parseFloat(a),i[r]=Er(a,e)?n[a]:x):i[r]=n[a]}return i}function _t(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var o=r[e];t[o]=n[o]}return t}function gt(n,t){for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=hr(n[u],j,n)}return n}function yt(n,t,r){var e=typeof n;return"function"==e?"undefined"!=typeof t&&jr(n)?nr(n,t,r):n:null==n?Co:"object"==e?Bt(n):"undefined"==typeof t?qt(n+""):Dt(n+"",t)}function dt(n,t,r,e,u,o,i){var a;if(r&&(a=u?r(n,e,u):r(n)),"undefined"!=typeof a)return a;if(!ku(n))return n;var f=Hi(n);if(f){if(a=br(n),!t)return nt(n,a)}else{var c=ui.call(n),l=c==Y;if(c!=X&&c!=M&&(!l||u))return $n[c]?Ar(n,c,t):u?n:{};if(a=xr(l?{}:n),!t)return _t(n,a,ea(n))}o||(o=[]),i||(i=[]);for(var s=o.length;s--;)if(o[s]==n)return i[s];return o.push(n),i.push(a),(f?tt:Tt)(n,function(e,u){a[u]=dt(e,t,r,u,n,o,i)}),a}function mt(n,t,r,e){if("function"!=typeof n)throw new Xo(D);return gi(function(){n.apply(x,Yt(r,e))},t)}function wt(n,r){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=mr(),a=i==t,f=a&&r.length>=200&&Mi(r),c=r.length;f&&(i=Hn,a=!1,r=f);n:for(;++o<e;){var l=n[o];if(a&&l===l){for(var s=c;s--;)if(r[s]===l)continue n;u.push(l)}else i(r,l)<0&&u.push(l)}return u}function bt(n,t){var r=n?n.length:0;if(!Ir(r))return Tt(n,t);for(var e=-1,u=Fr(n);++e<r&&t(u[e],e,u)!==!1;);return n}function xt(n,t){var r=n?n.length:0;if(!Ir(r))return St(n,t);for(var e=Fr(n);r--&&t(e[r],r,e)!==!1;);return n}function At(n,t){var r=!0;return bt(n,function(n,e,u){return r=!!t(n,e,u)}),r}function jt(n,t,r,e){var u=n.length;for(r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e="undefined"==typeof e||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;u>r;)n[r++]=t;return n}function Et(n,t){var r=[];return bt(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function Rt(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,!1):void 0}),u}function It(n,t,r,e){for(var u=(e||0)-1,o=n.length,i=-1,a=[];++u<o;){var f=n[u];if(v(f)&&Ir(f.length)&&(Hi(f)||bu(f))){t&&(f=It(f,t,r));var c=-1,l=f.length;for(a.length+=l;++c<l;)a[++i]=f[c]}else r||(a[++i]=f)}return a}function kt(n,t,r){for(var e=-1,u=Fr(n),o=r(n),i=o.length;++e<i;){var a=o[e];if(t(u[a],a,u)===!1)break}return n}function Ot(n,t,r){for(var e=Fr(n),u=r(n),o=u.length;o--;){var i=u[o];if(t(e[i],i,e)===!1)break}return n}function Ct(n,t){return kt(n,t,Zu)}function Tt(n,t){return kt(n,t,ea)}function St(n,t){return Ot(n,t,ea)}function Nt(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];na(n[i])&&(o[++u]=i)}return o}function Ut(n,t,r){var e=-1,u="function"==typeof t,o=n?n.length:0,i=Ir(o)?zo(o):[];return bt(n,function(n){var o=u?t:null!=n&&n[t];i[++e]=o?o.apply(n,r):x}),i}function Wt(n,t,r,e,u,o){if(n===t)return 0!==n||1/n==1/t;var i=typeof n,a=typeof t;return"function"!=i&&"object"!=i&&"function"!=a&&"object"!=a||null==n||null==t?n!==n&&t!==t:Ft(n,t,Wt,r,e,u,o)}function Ft(n,t,r,e,u,o,i){var a=Hi(n),f=Hi(t),c=q,l=q;a||(c=ui.call(n),c==M?c=X:c!=X&&(a=Fu(n))),f||(l=ui.call(t),l==M?l=X:l!=X&&(f=Fu(t)));var s=c==X,p=l==X,h=c==l;if(h&&!a&&!s)return _r(n,t,c);var v=s&&ri.call(n,"__wrapped__"),_=p&&ri.call(t,"__wrapped__");if(v||_)return r(v?n.value():n,_?t.value():t,e,u,o,i);if(!h)return!1;o||(o=[]),i||(i=[]);for(var g=o.length;g--;)if(o[g]==n)return i[g]==t;o.push(n),i.push(t);var y=(a?vr:gr)(n,t,r,e,u,o,i);return o.pop(),i.pop(),y}function Lt(n,t,r,e,u){var o=t.length;if(null==n)return!o;for(var i=-1,a=!u;++i<o;)if(a&&e[i]?r[i]!==n[t[i]]:!ri.call(n,t[i]))return!1;for(i=-1;++i<o;){var f=t[i];if(a&&e[i])var c=ri.call(n,f);else{var l=n[f],s=r[i];c=u?u(l,s,f):x,"undefined"==typeof c&&(c=Wt(s,l,u,!0))}if(!c)return!1}return!0}function $t(n,t){var r=[];return bt(n,function(n,e,u){r.push(t(n,e,u))}),r}function Bt(n){var t=ea(n),r=t.length;if(1==r){var e=t[0],u=n[e];if(kr(u))return function(n){return null!=n&&n[e]===u&&ri.call(n,e)}}for(var o=zo(r),i=zo(r);r--;)u=n[t[r]],o[r]=u,i[r]=kr(u);return function(n){return Lt(n,t,o,i)}}function Dt(n,t){return kr(t)?function(r){return null!=r&&r[n]===t}:function(r){return null!=r&&Wt(t,r[n],null,!0)}}function zt(n,t,r,e,u){if(!ku(n))return n;var o=Ir(t.length)&&(Hi(t)||Fu(t));return(o?tt:Tt)(t,function(t,i,a){if(v(t))return e||(e=[]),u||(u=[]),Mt(n,a,i,zt,r,e,u);var f=n[i],c=r?r(f,t,i,n,a):x,l="undefined"==typeof c;l&&(c=t),!o&&"undefined"==typeof c||!l&&(c===c?c===f:f!==f)||(n[i]=c)}),n}function Mt(n,t,r,e,u,o,i){for(var a=o.length,f=t[r];a--;)if(o[a]==f)return void(n[r]=i[a]);var c=n[r],l=u?u(c,f,r,n,t):x,s="undefined"==typeof l;s&&(l=f,Ir(f.length)&&(Hi(f)||Fu(f))?l=Hi(c)?c:c?nt(c):[]:ta(f)||bu(f)?l=bu(c)?Bu(c):ta(c)?c:{}:s=!1),o.push(f),i.push(l),s?n[r]=e(l,f,u,o,i):(l===l?l!==c:c===c)&&(n[r]=l)}function qt(n){return function(t){return null==t?x:t[n]}}function Pt(t,r){var e=r.length,u=vt(t,r);for(r.sort(n);e--;){var o=parseFloat(r[e]);if(o!=i&&Er(o)){var i=o;yi.call(t,o,1)}}return u}function Kt(n,t){return n+si(Ci()*(t-n+1))}function Vt(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=!1,n):t(r,n,u,o)}),r}function Yt(n,t,r){var e=-1,u=n.length;t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r="undefined"==typeof r||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var o=zo(u);++e<u;)o[e]=n[e+t];return o}function Gt(n,t){var r;return bt(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Jt(n,r){var e=-1,u=mr(),o=n.length,i=u==t,a=i&&o>=200,f=a&&Mi(),c=[];f?(u=Hn,i=!1):(a=!1,f=r?[]:c);n:for(;++e<o;){var l=n[e],s=r?r(l,e,n):l;if(i&&l===l){for(var p=f.length;p--;)if(f[p]===s)continue n;r&&f.push(s),c.push(l)}else u(f,s)<0&&((r||a)&&f.push(s),c.push(l))}return c}function Xt(n,t){for(var r=-1,e=t.length,u=zo(e);++r<e;)u[r]=n[t[r]];return u}function Zt(n,t){var r=n;r instanceof Dn&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var o=[r],i=t[e];hi.apply(o,i.args),r=i.func.apply(i.thisArg,o)}return r}function Ht(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&Wi>=u){for(;u>e;){var o=e+u>>>1,i=n[o];(r?t>=i:t>i)?e=o+1:u=o}return u}return Qt(n,t,Co,r)}function Qt(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,a="undefined"==typeof t;o>u;){var f=si((u+o)/2),c=r(n[f]),l=c===c;if(i)var s=l||e;else s=a?l&&(e||"undefined"!=typeof c):e?t>=c:t>c;s?u=f+1:o=f}return Ri(o,Ui)}function nr(n,t,r){if("function"!=typeof n)return Co;if("undefined"==typeof t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function tr(n){return fi.call(n,0)}function rr(n,t,r){for(var e=r.length,u=-1,o=Ei(n.length-e,0),i=-1,a=t.length,f=zo(o+a);++i<a;)f[i]=t[i];for(;++u<e;)f[r[u]]=n[u];for(;o--;)f[i++]=n[u++];return f}function er(n,t,r){for(var e=-1,u=r.length,o=-1,i=Ei(n.length-u,0),a=-1,f=t.length,c=zo(i+f);++o<i;)c[o]=n[o];for(var l=o;++a<f;)c[l+a]=t[a];for(;++e<u;)c[l+r[e]]=n[o++];return c}function ur(n,t){return function(r,e,u){var o=t?t():{};if(e=dr(e,u,3),Hi(r))for(var i=-1,a=r.length;++i<a;){var f=r[i];n(o,f,e(f,i,r),r)}else bt(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function or(n){return function(){var t=arguments.length,r=arguments[0];if(2>t||null==r)return r;if(t>3&&Rr(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var e=nr(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(e=arguments[--t]);for(var u=0;++u<t;){var o=arguments[u];o&&n(r,o,e)}return r}}function ir(n,t){function r(){return(this instanceof r?e:n).apply(t,arguments)}var e=fr(n);return r}function ar(n){return function(t){for(var r=-1,e=Ro(co(t)),u=e.length,o="";++r<u;)o=n(o,e[r],r);return o}}function fr(n){return function(){var t=Di(n.prototype),r=n.apply(t,arguments);return ku(r)?r:t}}function cr(n,t){return function(r,e,u){u&&Rr(r,e,u)&&(e=null);var i=dr(),a=null==e;if(i===yt&&a||(a=!1,e=i(e,u,3)),a){var f=Hi(r);if(f||!Wu(r))return n(f?r:Wr(r));e=o}return yr(r,e,t)}}function lr(n,t,r,e,u,o,i,a,f,c){function l(){for(var w=arguments.length,b=w,x=zo(w);b--;)x[b]=arguments[b];if(e&&(x=rr(x,e,u)),o&&(x=er(x,o,i)),v||y){var A=l.placeholder,R=g(x,A);if(w-=R.length,c>w){var I=a?nt(a):null,k=Ei(c-w,0),T=v?R:null,S=v?null:R,N=v?x:null,U=v?null:x;t|=v?O:C,t&=~(v?C:O),_||(t&=~(j|E));var W=lr(n,t,r,N,T,U,S,I,f,k);return W.placeholder=A,W}}var F=p?r:this;return h&&(n=F[m]),a&&(x=Sr(x,a)),s&&f<x.length&&(x.length=f),(this instanceof l?d||fr(n):n).apply(F,x)}var s=t&S,p=t&j,h=t&E,v=t&I,_=t&R,y=t&k,d=!h&&fr(n),m=n;return l}function sr(n,t,r){var e=n.length;if(t=+t,e>=t||!Ai(t))return"";var u=t-e;return r=null==r?" ":r+"",yo(r,ci(u/r.length)).slice(0,u)}function pr(n,t,r,e){function u(){for(var t=-1,a=arguments.length,f=-1,c=e.length,l=zo(a+c);++f<c;)l[f]=e[f];for(;a--;)l[f++]=arguments[++t];return(this instanceof u?i:n).apply(o?r:this,l)}var o=t&j,i=fr(n);return u}function hr(n,t,r,e,u,o,i,a){var f=t&E;if(!f&&"function"!=typeof n)throw new Xo(D);var c=e?e.length:0;if(c||(t&=~(O|C),e=u=null),c-=u?u.length:0,t&C){var l=e,s=u;e=u=null}var p=!f&&qi(n),h=[n,t,r,e,u,l,s,o,i,a];if(p&&p!==!0&&(Or(h,p),t=h[1],a=h[9]),h[9]=null==a?f?0:n.length:Ei(a-c,0)||0,t==j)var v=ir(h[0],h[2]);else v=t!=O&&t!=(j|O)||h[4].length?lr.apply(x,h):pr.apply(x,h);var _=p?zi:Pi;return _(v,h)}function vr(n,t,r,e,u,o,i){var a=-1,f=n.length,c=t.length,l=!0;if(f!=c&&!(u&&c>f))return!1;for(;l&&++a<f;){var s=n[a],p=t[a];if(l=x,e&&(l=u?e(p,s,a):e(s,p,a)),"undefined"==typeof l)if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,o,i))););else l=s&&s===p||r(s,p,e,u,o,i)}return!!l}function _r(n,t,r){switch(r){case P:case K:return+n==+t;case V:return n.name==t.name&&n.message==t.message;case J:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Z:case Q:return n==t+""}return!1}function gr(n,t,r,e,u,o,i){var a=ea(n),f=a.length,c=ea(t),l=c.length;if(f!=l&&!u)return!1;for(var s,p=-1;++p<f;){var h=a[p],v=ri.call(t,h);if(v){var _=n[h],g=t[h];v=x,e&&(v=u?e(g,_,h):e(_,g,h)),"undefined"==typeof v&&(v=_&&_===g||r(_,g,e,u,o,i))}if(!v)return!1;s||(s="constructor"==h)}if(!s){var y=n.constructor,d=t.constructor;if(y!=d&&"constructor"in n&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof d&&d instanceof d))return!1}return!0}function yr(n,t,r){var e=r?Si:Ti,u=e,o=u;return bt(n,function(n,i,a){var f=t(n,i,a);((r?u>f:f>u)||f===e&&f===o)&&(u=f,o=n)}),o}function dr(n,t,r){var e=G.callback||ko;return e=e===ko?yt:e,r?e(n,t,r):e}function mr(n,r,e){var u=G.indexOf||Zr;return u=u===Zr?t:u,n?u(n,r,e):u}function wr(n,t,r){for(var e=-1,u=r?r.length:0;++e<u;){var o=r[e],i=o.size;switch(o.type){case"drop":n+=i;break;case"dropRight":t-=i;break;case"take":t=Ri(t,n+i);break;case"takeRight":n=Ei(n,t-i)}}return{start:n,end:t}}function br(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&ri.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function xr(n){var t=n.constructor;return"function"==typeof t&&t instanceof t||(t=Yo),new t}function Ar(n,t,r){var e=n.constructor;switch(t){case tn:return tr(n);case P:case K:return new e(+n);case rn:case en:case un:case on:case an:case fn:case cn:case ln:case sn:var u=n.buffer;return new e(r?tr(u):u,n.byteOffset,n.length);case J:case Q:return new e(n);case Z:var o=new e(n.source,An.exec(n));o.lastIndex=n.lastIndex}return o}function jr(n){var t=G.support,r=!(t.funcNames?n.name:t.funcDecomp);if(!r){var e=ni.call(n);t.funcNames||(r=!jn.test(e)),r||(r=Tn.test(e)||Tu(n),zi(n,r))}return r}function Er(n,t){return n=+n,t=null==t?Li:t,n>-1&&n%1==0&&t>n}function Rr(n,t,r){if(!ku(r))return!1;var e=typeof t;if("number"==e)var u=r.length,o=Ir(u)&&Er(t,u);else o="string"==e&&t in r;var i=r[t];return o&&(n===n?n===i:i!==i)}function Ir(n){return"number"==typeof n&&n>-1&&n%1==0&&Li>=n}function kr(n){return n===n&&(0===n?1/n>0:!ku(n))}function Or(n,t){var r=n[1],e=t[1],u=r|e,o=S|T,i=j|E,a=o|i|R|k,f=r&S&&!(e&S),c=r&T&&!(e&T),l=(c?n:t)[7],s=(f?n:t)[8],p=!(r>=T&&e>i||r>i&&e>=T),h=u>=o&&a>=u&&(T>r||(c||f)&&l.length<=s);if(!p&&!h)return n;e&j&&(n[2]=t[2],u|=r&j?0:R);var v=t[3];if(v){var _=n[3];n[3]=_?rr(_,v,t[4]):nt(v),n[4]=_?g(n[3],z):nt(t[4])}return v=t[5],v&&(_=n[5],n[5]=_?er(_,v,t[6]):nt(v),n[6]=_?g(n[5],z):nt(t[6])),v=t[7],v&&(n[7]=nt(v)),e&S&&(n[8]=null==n[8]?t[8]:Ri(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Cr(n,t){n=Fr(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function Tr(n,t){var r={};return Ct(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function Sr(n,t){for(var r=n.length,e=Ri(t.length,r),u=nt(n);e--;){var o=t[e];n[e]=Er(o,r)?u[o]:x}return n}function Nr(n){var t;G.support;if(!v(n)||ui.call(n)!=X||!ri.call(n,"constructor")&&(t=n.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return Ct(n,function(n,t){r=t}),"undefined"==typeof r||ri.call(n,r)}function Ur(n){for(var t=Zu(n),r=t.length,e=r&&n.length,u=G.support,o=e&&Ir(e)&&(Hi(n)||u.nonEnumArgs&&bu(n)),i=-1,a=[];++i<r;){var f=t[i];(o&&Er(f,e)||ri.call(n,f))&&a.push(f)}return a}function Wr(n){return null==n?[]:Ir(n.length)?ku(n)?n:Yo(n):uo(n)}function Fr(n){return ku(n)?n:Yo(n)}function Lr(n){return n instanceof Dn?n.clone():new nn(n.__wrapped__,n.__chain__,nt(n.__actions__))}function $r(n,t,r){t=(r?Rr(n,t,r):null==t)?1:Ei(+t||1,1);for(var e=0,u=n?n.length:0,o=-1,i=zo(ci(u/t));u>e;)i[++o]=Yt(n,e,e+=t);return i}function Br(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u}function Dr(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Hi(r)||bu(r))break}return wt(r,It(arguments,!1,!0,++n))}function zr(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),Yt(n,0>t?0:t)):[]}function Mr(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Yt(n,0,0>t?0:t)):[]}function qr(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=dr(t,r,3);e--&&t(n[e],e,n););return Yt(n,0,e+1)}function Pr(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=dr(t,r,3);++u<e&&t(n[u],u,n););return Yt(n,u)}function Kr(n,t,r,e){var u=n?n.length:0;return u?(r&&"number"!=typeof r&&Rr(n,t,r)&&(r=0,e=u),jt(n,t,r,e)):[]}function Vr(n,t,r){var e=-1,u=n?n.length:0;for(t=dr(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function Yr(n,t,r){var e=n?n.length:0;for(t=dr(t,r,3);e--;)if(t(n[e],e,n))return e;return-1}function Gr(n){return n?n[0]:x}function Jr(n,t,r){var e=n?n.length:0;return r&&Rr(n,t,r)&&(t=!1),e?It(n,t):[]}function Xr(n){var t=n?n.length:0;return t?It(n,!0):[]}function Zr(n,r,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=0>e?Ei(u+e,0):e||0;else if(e){var o=Ht(n,r),i=n[o];return(r===r?r===i:i!==i)?o:-1}return t(n,r,e)}function Hr(n){return Mr(n,1)}function Qr(){for(var n=[],r=-1,e=arguments.length,u=[],o=mr(),i=o==t;++r<e;){var a=arguments[r];(Hi(a)||bu(a))&&(n.push(a),u.push(i&&a.length>=120&&Mi(r&&a)))}e=n.length;var f=n[0],c=-1,l=f?f.length:0,s=[],p=u[0];n:for(;++c<l;)if(a=f[c],(p?Hn(p,a):o(s,a))<0){for(r=e;--r;){var h=u[r];if((h?Hn(h,a):o(n[r],a))<0)continue n}p&&p.push(a),s.push(a)}return s}function ne(n){var t=n?n.length:0;return t?n[t-1]:x}function te(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?Ei(e+r,0):Ri(r||0,e-1))+1;else if(r){u=Ht(n,t,!0)-1;var o=n[u];return(t===t?t===o:o!==o)?u:-1}if(t!==t)return h(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1}function re(){var n=arguments[0];if(!n||!n.length)return n;for(var t=0,r=mr(),e=arguments.length;++t<e;)for(var u=0,o=arguments[t];(u=r(n,o,u))>-1;)yi.call(n,u,1);return n}function ee(n){return Pt(n||[],It(arguments,!1,!1,1))}function ue(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=dr(t,r,3);++e<u;){var i=n[e];t(i,e,n)&&(o.push(i),yi.call(n,e--,1),u--)}return o}function oe(n){return zr(n,1)}function ie(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&Rr(n,t,r)&&(t=0,r=e),Yt(n,t,r)):[]}function ae(n,t,r,e){var u=dr(r);return u===yt&&null==r?Ht(n,t):Qt(n,t,u(r,e,1))}function fe(n,t,r,e){var u=dr(r);return u===yt&&null==r?Ht(n,t,!0):Qt(n,t,u(r,e,1),!0)}function ce(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),Yt(n,0,0>t?0:t)):[]}function le(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Yt(n,0>t?0:t)):[]}function se(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=dr(t,r,3);e--&&t(n[e],e,n););return Yt(n,e+1)}function pe(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=dr(t,r,3);++u<e&&t(n[u],u,n););return Yt(n,0,u)}function he(){return Jt(It(arguments,!1,!0))}function ve(n,r,e,u){var o=n?n.length:0;if(!o)return[];null!=r&&"boolean"!=typeof r&&(u=e,e=Rr(n,r,u)?null:r,r=!1);var i=dr();return(i!==yt||null!=e)&&(e=i(e,u,3)),r&&mr()==t?y(n,e):Jt(n,e)}function _e(n){for(var t=-1,r=(n&&n.length&&it(ot(n,ti)))>>>0,e=zo(r);++t<r;)e[t]=ot(n,qt(t));return e}function ge(n){return wt(n,Yt(arguments,1))}function ye(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Hi(r)||bu(r))var e=e?wt(e,r).concat(wt(r,e)):r}return e?Jt(e):[]}function de(){for(var n=arguments.length,t=zo(n);n--;)t[n]=arguments[n];return _e(t)}function me(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Hi(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function we(n){var t=G(n);return t.__chain__=!0,t}function be(n,t,r){return t.call(r,n),n}function xe(n,t,r){return t.call(r,n)}function Ae(){return we(this)}function je(){return new nn(this.value(),this.__chain__)}function Ee(n){for(var t,r=this;r instanceof H;){var e=Lr(r);t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function Re(){var n=this.__wrapped__;return n instanceof Dn?(this.__actions__.length&&(n=new Dn(this)),new nn(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()})}function Ie(){return this.value()+""}function ke(){return Zt(this.__wrapped__,this.__actions__)}function Oe(n){var t=n?n.length:0;return Ir(t)&&(n=Wr(n)),vt(n,It(arguments,!1,!1,1))}function Ce(n,t,r){var e=Hi(n)?et:At;return("function"!=typeof t||"undefined"!=typeof r)&&(t=dr(t,r,3)),e(n,t)}function Te(n,t,r){var e=Hi(n)?ut:Et;return t=dr(t,r,3),e(n,t)}function Se(n,t,r){if(Hi(n)){var e=Vr(n,t,r);return e>-1?n[e]:x}return t=dr(t,r,3),Rt(n,t,bt)}function Ne(n,t,r){return t=dr(t,r,3),Rt(n,t,xt)}function Ue(n,t){return Se(n,Bt(t))}function We(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Hi(n)?tt(n,t):bt(n,nr(t,r,3))}function Fe(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Hi(n)?rt(n,t):xt(n,nr(t,r,3))}function Le(n,t,r){var e=n?n.length:0;return Ir(e)||(n=uo(n),e=n.length),e?(r="number"==typeof r?0>r?Ei(e+r,0):r||0:0,"string"==typeof n||!Hi(n)&&Wu(n)?e>r&&n.indexOf(t,r)>-1:mr(n,t,r)>-1):!1}function $e(n,t){return Ut(n,t,Yt(arguments,2))}function Be(n,t,r){var e=Hi(n)?ot:$t;return t=dr(t,r,3),e(n,t)}function De(n,t){return Be(n,qt(t))}function ze(n,t,r,e){var u=Hi(n)?ft:Vt;return u(n,dr(t,e,4),r,arguments.length<3,bt)}function Me(n,t,r,e){var u=Hi(n)?ct:Vt;return u(n,dr(t,e,4),r,arguments.length<3,xt)}function qe(n,t,r){var e=Hi(n)?ut:Et;return t=dr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})}function Pe(n,t,r){if(r?Rr(n,t,r):null==t){n=Wr(n);var e=n.length;return e>0?n[Kt(0,e-1)]:x}var u=Ke(n);return u.length=Ri(0>t?0:+t||0,u.length),u}function Ke(n){n=Wr(n);for(var t=-1,r=n.length,e=zo(r);++t<r;){var u=Kt(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function Ve(n){var t=n?n.length:0;return Ir(t)?t:ea(n).length}function Ye(n,t,r){var e=Hi(n)?lt:Gt;return("function"!=typeof t||"undefined"!=typeof r)&&(t=dr(t,r,3)),e(n,t)}function Ge(n,t,r){var u=-1,o=n?n.length:0,i=Ir(o)?zo(o):[];return r&&Rr(n,t,r)&&(t=null),t=dr(t,r,3),bt(n,function(n,r,e){i[++u]={criteria:t(n,r,e),index:u,value:n}}),e(i,f)}function Je(n){var t=arguments;t.length>3&&Rr(t[1],t[2],t[3])&&(t=[n,t[1]]);var r=-1,u=n?n.length:0,o=It(t,!1,!1,1),i=Ir(u)?zo(u):[];return bt(n,function(n){for(var t=o.length,e=zo(t);t--;)e[t]=null==n?x:n[o[t]];i[++r]={criteria:e,index:r,value:n}}),e(i,c)}function Xe(n,t){return Te(n,Bt(t))}function Ze(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Xo(D);var r=n;n=t,t=r}return n=Ai(n=+n)?n:0,function(){return--n<1?t.apply(this,arguments):void 0}}function He(n,t,r){return r&&Rr(n,t,r)&&(t=null),t=n&&null==t?n.length:Ei(+t||0,0),hr(n,S,null,null,null,null,t)}function Qe(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Xo(D);var e=n;n=t,t=e}return function(){return--n>0?r=t.apply(this,arguments):t=null,r}}function nu(n,t){var r=j;if(arguments.length>2){var e=Yt(arguments,2),u=g(e,nu.placeholder);r|=O}return hr(n,r,t,e,u)}function tu(n){return gt(n,arguments.length>1?It(arguments,!1,!1,1):Gu(n))}function ru(n,t){var r=j|E;if(arguments.length>2){var e=Yt(arguments,2),u=g(e,ru.placeholder);r|=O}return hr(t,r,n,e,u)}function eu(n,t,r){r&&Rr(n,t,r)&&(t=null);var e=hr(n,I,null,null,null,null,null,t);return e.placeholder=eu.placeholder,e}function uu(n,t,r){r&&Rr(n,t,r)&&(t=null);var e=hr(n,k,null,null,null,null,null,t);return e.placeholder=uu.placeholder,e}function ou(n,t,r){function e(){p&&li(p),f&&li(f),f=p=h=x}function u(){var r=t-(Zi()-l);if(0>=r||r>t){f&&li(f);var e=h;f=p=h=x,e&&(v=Zi(),c=n.apply(s,a),p||f||(a=s=null))}else p=gi(u,r)}function o(){p&&li(p),f=p=h=x,(g||_!==t)&&(v=Zi(),c=n.apply(s,a),p||f||(a=s=null))}function i(){if(a=arguments,l=Zi(),s=this,h=g&&(p||!y),_===!1)var r=y&&!p;else{f||y||(v=l);var e=_-(l-v),i=0>=e||e>_;i?(f&&(f=li(f)),v=l,c=n.apply(s,a)):f||(f=gi(o,e))}return i&&p?p=li(p):p||t===_||(p=gi(u,t)),r&&(i=!0,c=n.apply(s,a)),!i||p||f||(a=s=null),c}var a,f,c,l,s,p,h,v=0,_=!1,g=!0;if("function"!=typeof n)throw new Xo(D);if(t=0>t?0:t,r===!0){var y=!0;g=!1}else ku(r)&&(y=r.leading,_="maxWait"in r&&Ei(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return i.cancel=e,i}function iu(n){return mt(n,1,arguments,1)}function au(n,t){return mt(n,t,arguments,2)}function fu(){var n=arguments,t=n.length;if(!t)return function(){return arguments[0]};if(!et(n,r))throw new Xo(D);return function(){for(var r=0,e=n[r].apply(this,arguments);++r<t;)e=n[r].call(this,e);return e}}function cu(){var n=arguments,t=n.length-1;if(0>t)return function(){return arguments[0]};if(!et(n,r))throw new Xo(D);return function(){for(var r=t,e=n[r].apply(this,arguments);r--;)e=n[r].call(this,e);return e}}function lu(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new Xo(D);var r=function(){var e=r.cache,u=t?t.apply(this,arguments):arguments[0];if(e.has(u))return e.get(u);var o=n.apply(this,arguments);return e.set(u,o),o};return r.cache=new lu.Cache,r}function su(n){if("function"!=typeof n)throw new Xo(D);return function(){return!n.apply(this,arguments)}}function pu(n){return Qe(n,2)}function hu(n){var t=Yt(arguments,1),r=g(t,hu.placeholder);return hr(n,O,null,t,r)}function vu(n){var t=Yt(arguments,1),r=g(t,vu.placeholder);return hr(n,C,null,t,r)}function _u(n){var t=It(arguments,!1,!1,1);return hr(n,T,null,null,null,t)}function gu(n){if("function"!=typeof n)throw new Xo(D);return function(t){return n.apply(this,t)}}function yu(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Xo(D);return r===!1?e=!1:ku(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),Bn.leading=e,Bn.maxWait=+t,Bn.trailing=u,ou(n,t,Bn)}function du(n,t){return t=null==t?Co:t,hr(t,O,null,[n],[])}function mu(n,t,r,e){return t&&"boolean"!=typeof t&&Rr(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),r="function"==typeof r&&nr(r,e,1),dt(n,t,r)}function wu(n,t,r){return t="function"==typeof t&&nr(t,r,1),dt(n,!0,t)}function bu(n){var t=v(n)?n.length:x;return Ir(t)&&ui.call(n)==M||!1}function xu(n){return n===!0||n===!1||v(n)&&ui.call(n)==P||!1}function Au(n){return v(n)&&ui.call(n)==K||!1}function ju(n){return n&&1===n.nodeType&&v(n)&&ui.call(n).indexOf("Element")>-1||!1}function Eu(n){if(null==n)return!0;var t=n.length;return Ir(t)&&(Hi(n)||Wu(n)||bu(n)||v(n)&&na(n.splice))?!t:!ea(n).length}function Ru(n,t,r,e){if(r="function"==typeof r&&nr(r,e,3),!r&&kr(n)&&kr(t))return n===t;var u=r?r(n,t):x;return"undefined"==typeof u?Wt(n,t,r):!!u}function Iu(n){return v(n)&&"string"==typeof n.message&&ui.call(n)==V||!1}function ku(n){var t=typeof n;return"function"==t||n&&"object"==t||!1}function Ou(n,t,r,e){var u=ea(t),o=u.length;if(r="function"==typeof r&&nr(r,e,3),!r&&1==o){var i=u[0],a=t[i];if(kr(a))return null!=n&&a===n[i]&&ri.call(n,i)}for(var f=zo(o),c=zo(o);o--;)a=f[o]=t[u[o]],c[o]=kr(a);return Lt(n,u,f,c,r)}function Cu(n){return Nu(n)&&n!=+n}function Tu(n){return null==n?!1:ui.call(n)==Y?ii.test(ni.call(n)):v(n)&&Rn.test(n)||!1}function Su(n){return null===n}function Nu(n){return"number"==typeof n||v(n)&&ui.call(n)==J||!1}function Uu(n){return v(n)&&ui.call(n)==Z||!1}function Wu(n){return"string"==typeof n||v(n)&&ui.call(n)==Q||!1}function Fu(n){return v(n)&&Ir(n.length)&&Ln[ui.call(n)]||!1}function Lu(n){return"undefined"==typeof n}function $u(n){var t=n?n.length:0;return Ir(t)?t?nt(n):[]:uo(n)}function Bu(n){return _t(n,Zu(n))}function Du(n,t,r){var e=Di(n);return r&&Rr(n,t,r)&&(t=null),t?_t(t,e,ea(t)):e}function zu(n){if(null==n)return n;var t=nt(arguments);return t.push(st),ra.apply(x,t)}function Mu(n,t,r){return t=dr(t,r,3),Rt(n,t,Tt,!0)}function qu(n,t,r){return t=dr(t,r,3),Rt(n,t,St,!0)}function Pu(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=nr(t,r,3)),kt(n,t,Zu)}function Ku(n,t,r){return t=nr(t,r,3),Ot(n,t,Zu)}function Vu(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=nr(t,r,3)),Tt(n,t)}function Yu(n,t,r){return t=nr(t,r,3),Ot(n,t,ea)}function Gu(n){return Nt(n,Zu(n))}function Ju(n,t){return n?ri.call(n,t):!1}function Xu(n,t,r){r&&Rr(n,t,r)&&(t=null);for(var e=-1,u=ea(n),o=u.length,i={};++e<o;){var a=u[e],f=n[a];t?ri.call(i,f)?i[f].push(a):i[f]=[a]:i[f]=a}return i}function Zu(n){if(null==n)return[];ku(n)||(n=Yo(n));var t=n.length;t=t&&Ir(t)&&(Hi(n)||Bi.nonEnumArgs&&bu(n))&&t||0;for(var r=n.constructor,e=-1,u="function"==typeof r&&r.prototype===n,o=zo(t),i=t>0;++e<t;)o[e]=e+"";for(var a in n)i&&Er(a,t)||"constructor"==a&&(u||!ri.call(n,a))||o.push(a);return o}function Hu(n,t,r){var e={};return t=dr(t,r,3),Tt(n,function(n,r,u){e[r]=t(n,r,u)}),e}function Qu(n,t,r){if(null==n)return{};if("function"!=typeof t){var e=ot(It(arguments,!1,!1,1),Jo);return Cr(n,wt(Zu(n),e))}return t=nr(t,r,3),Tr(n,function(n,r,e){return!t(n,r,e)})}function no(n){for(var t=-1,r=ea(n),e=r.length,u=zo(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function to(n,t,r){return null==n?{}:"function"==typeof t?Tr(n,nr(t,r,3)):Cr(n,It(arguments,!1,!1,1))}function ro(n,t,r){var e=null==n?x:n[t];return"undefined"==typeof e&&(e=r),na(e)?e.call(n):e}function eo(n,t,r,e){var u=Hi(n)||Fu(n);if(t=dr(t,e,4),null==r)if(u||ku(n)){var o=n.constructor;r=u?Hi(n)?new o:[]:Di(na(o)&&o.prototype)}else r={};return(u?tt:Tt)(n,function(n,e,u){return t(r,n,e,u)}),r}function uo(n){return Xt(n,ea(n))}function oo(n){return Xt(n,Zu(n))}function io(n,t,r){return t=+t||0,"undefined"==typeof r?(r=t,t=0):r=+r||0,n>=t&&r>n}function ao(n,t,r){r&&Rr(n,t,r)&&(t=r=null);var e=null==n,u=null==t;if(null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var o=Ci();return Ri(n+o*(t-n+parseFloat("1e-"+((o+"").length-1))),t)}return Kt(n,t)}function fo(n){return n=u(n),n&&n.charAt(0).toUpperCase()+n.slice(1)}function co(n){return n=u(n),n&&n.replace(In,l);
    }function lo(n,t,r){n=u(n),t+="";var e=n.length;return r=("undefined"==typeof r?e:Ri(0>r?0:+r||0,e))-t.length,r>=0&&n.indexOf(t,r)==r}function so(n){return n=u(n),n&&dn.test(n)?n.replace(gn,s):n}function po(n){return n=u(n),n&&Cn.test(n)?n.replace(On,"\\$&"):n}function ho(n,t,r){n=u(n),t=+t;var e=n.length;if(e>=t||!Ai(t))return n;var o=(t-e)/2,i=si(o),a=ci(o);return r=sr("",a,r),r.slice(0,i)+n+r}function vo(n,t,r){return n=u(n),n&&sr(n,t,r)+n}function _o(n,t,r){return n=u(n),n&&n+sr(n,t,r)}function go(n,t,r){return r&&Rr(n,t,r)&&(t=0),Oi(n,t)}function yo(n,t){var r="";if(n=u(n),t=+t,1>t||!n||!Ai(t))return r;do t%2&&(r+=n),t=si(t/2),n+=n;while(t);return r}function mo(n,t,r){return n=u(n),r=null==r?0:Ri(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r}function wo(n,t,r){var e=G.templateSettings;r&&Rr(n,t,r)&&(t=r=null),n=u(n),t=ht(ht({},r||t),e,pt);var o,i,a=ht(ht({},t.imports),e.imports,pt),f=ea(a),c=Xt(a,f),l=0,s=t.interpolate||kn,h="__p += '",v=Go((t.escape||kn).source+"|"+s.source+"|"+(s===bn?xn:kn).source+"|"+(t.evaluate||kn).source+"|$","g"),_="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Fn+"]")+"\n";n.replace(v,function(t,r,e,u,a,f){return e||(e=u),h+=n.slice(l,f).replace(Sn,p),r&&(o=!0,h+="' +\n__e("+r+") +\n'"),a&&(i=!0,h+="';\n"+a+";\n__p += '"),e&&(h+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=f+t.length,t}),h+="';\n";var g=t.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(i?h.replace(pn,""):h).replace(hn,"$1").replace(vn,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Io(function(){return Po(f,_+"return "+h).apply(x,c)});if(y.source=h,Iu(y))throw y;return y}function bo(n,t,r){var e=n;return(n=u(n))?(r?Rr(e,t,r):null==t)?n.slice(d(n),m(n)+1):(t+="",n.slice(i(n,t),a(n,t)+1)):n}function xo(n,t,r){var e=n;return n=u(n),n?(r?Rr(e,t,r):null==t)?n.slice(d(n)):n.slice(i(n,t+"")):n}function Ao(n,t,r){var e=n;return n=u(n),n?(r?Rr(e,t,r):null==t)?n.slice(0,m(n)+1):n.slice(0,a(n,t+"")+1):n}function jo(n,t,r){r&&Rr(n,t,r)&&(t=null);var e=N,o=U;if(null!=t)if(ku(t)){var i="separator"in t?t.separator:i;e="length"in t?+t.length||0:e,o="omission"in t?u(t.omission):o}else e=+t||0;if(n=u(n),e>=n.length)return n;var a=e-o.length;if(1>a)return o;var f=n.slice(0,a);if(null==i)return f+o;if(Uu(i)){if(n.slice(a).search(i)){var c,l,s=n.slice(0,a);for(i.global||(i=Go(i.source,(An.exec(i)||"")+"g")),i.lastIndex=0;c=i.exec(s);)l=c.index;f=f.slice(0,null==l?a:l)}}else if(n.indexOf(i,a)!=a){var p=f.lastIndexOf(i);p>-1&&(f=f.slice(0,p))}return f+o}function Eo(n){return n=u(n),n&&yn.test(n)?n.replace(_n,w):n}function Ro(n,t,r){return r&&Rr(n,t,r)&&(t=null),n=u(n),n.match(t||Nn)||[]}function Io(){var n=arguments.length,t=arguments[0];try{for(var r=zo(n?n-1:0);--n>0;)r[n-1]=arguments[n];return t.apply(x,r)}catch(e){return Iu(e)?e:new qo(e)}}function ko(n,t,r){return r&&Rr(n,t,r)&&(t=null),v(n)?To(n):yt(n,t)}function Oo(n){return function(){return n}}function Co(n){return n}function To(n){return Bt(dt(n,!0))}function So(n,t){return Dt(n+"",dt(t,!0))}function No(n,t,r){if(null==r){var e=ku(t),u=e&&ea(t),o=u&&u.length&&Nt(t,u);(o?o.length:e)||(o=!1,r=t,t=n,n=this)}o||(o=Nt(t,ea(t)));var i=!0,a=-1,f=na(n),c=o.length;r===!1?i=!1:ku(r)&&"chain"in r&&(i=r.chain);for(;++a<c;){var l=o[a],s=t[l];n[l]=s,f&&(n.prototype[l]=function(t){return function(){var r=this.__chain__;if(i||r){var e=n(this.__wrapped__);return(e.__actions__=nt(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}var u=[this.value()];return hi.apply(u,arguments),t.apply(n,u)}}(s))}return n}function Uo(){return _._=oi,this}function Wo(){}function Fo(n){return qt(n+"")}function Lo(n){return function(t){return null==n?x:n[t]}}function $o(n,t,r){r&&Rr(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;for(var e=-1,u=Ei(ci((t-n)/(r||1)),0),o=zo(u);++e<u;)o[e]=n,n+=r;return o}function Bo(n,t,r){if(n=+n,1>n||!Ai(n))return[];var e=-1,u=zo(Ri(n,Ni));for(t=nr(t,r,1);++e<n;)Ni>e?u[e]=t(e):t(e);return u}function Do(n){var t=++ei;return u(n)+t}_=_?Xn.defaults(Kn.Object(),_,Xn.pick(Kn,Wn)):Kn;var zo=_.Array,Mo=_.Date,qo=_.Error,Po=_.Function,Ko=_.Math,Vo=_.Number,Yo=_.Object,Go=_.RegExp,Jo=_.String,Xo=_.TypeError,Zo=zo.prototype,Ho=Yo.prototype,Qo=(Qo=_.window)&&Qo.document,ni=Po.prototype.toString,ti=qt("length"),ri=Ho.hasOwnProperty,ei=0,ui=Ho.toString,oi=_._,ii=Go("^"+po(ui).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ai=Tu(ai=_.ArrayBuffer)&&ai,fi=Tu(fi=ai&&new ai(0).slice)&&fi,ci=Ko.ceil,li=_.clearTimeout,si=Ko.floor,pi=Tu(pi=Yo.getPrototypeOf)&&pi,hi=Zo.push,vi=Ho.propertyIsEnumerable,_i=Tu(_i=_.Set)&&_i,gi=_.setTimeout,yi=Zo.splice,di=Tu(di=_.Uint8Array)&&di,mi=Tu(mi=_.WeakMap)&&mi,wi=function(){try{var n=Tu(n=_.Float64Array)&&n,t=new n(new ai(10),0,1)&&n}catch(r){}return t}(),bi=Tu(bi=zo.isArray)&&bi,xi=Tu(xi=Yo.create)&&xi,Ai=_.isFinite,ji=Tu(ji=Yo.keys)&&ji,Ei=Ko.max,Ri=Ko.min,Ii=Tu(Ii=Mo.now)&&Ii,ki=Tu(ki=Vo.isFinite)&&ki,Oi=_.parseInt,Ci=Ko.random,Ti=Vo.NEGATIVE_INFINITY,Si=Vo.POSITIVE_INFINITY,Ni=Ko.pow(2,32)-1,Ui=Ni-1,Wi=Ni>>>1,Fi=wi?wi.BYTES_PER_ELEMENT:0,Li=Ko.pow(2,53)-1,$i=mi&&new mi,Bi=G.support={};!function(n){Bi.funcDecomp=!Tu(_.WinRTError)&&Tn.test(b),Bi.funcNames="string"==typeof Po.name;try{Bi.dom=11===Qo.createDocumentFragment().nodeType}catch(t){Bi.dom=!1}try{Bi.nonEnumArgs=!vi.call(arguments,1)}catch(t){Bi.nonEnumArgs=!0}}(0,0),G.templateSettings={escape:mn,evaluate:wn,interpolate:bn,variable:"",imports:{_:G}};var Di=function(){function n(){}return function(t){if(ku(t)){n.prototype=t;var r=new n;n.prototype=null}return r||_.Object()}}(),zi=$i?function(n,t){return $i.set(n,t),n}:Co;fi||(tr=ai&&di?function(n){var t=n.byteLength,r=wi?si(t/Fi):0,e=r*Fi,u=new ai(t);if(r){var o=new wi(u,0,r);o.set(new wi(n,0,r))}return t!=e&&(o=new di(u,e),o.set(new di(n,e))),u}:Oo(null));var Mi=xi&&_i?function(n){return new Zn(n)}:Oo(null),qi=$i?function(n){return $i.get(n)}:Wo,Pi=function(){var n=0,t=0;return function(r,e){var u=Zi(),o=F-(u-t);if(t=u,o>0){if(++n>=W)return r}else n=0;return zi(r,e)}}(),Ki=ur(function(n,t,r){ri.call(n,r)?++n[r]:n[r]=1}),Vi=ur(function(n,t,r){ri.call(n,r)?n[r].push(t):n[r]=[t]}),Yi=ur(function(n,t,r){n[r]=t}),Gi=cr(it),Ji=cr(at,!0),Xi=ur(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Zi=Ii||function(){return(new Mo).getTime()},Hi=bi||function(n){return v(n)&&Ir(n.length)&&ui.call(n)==q||!1};Bi.dom||(ju=function(n){return n&&1===n.nodeType&&v(n)&&!ta(n)||!1});var Qi=ki||function(n){return"number"==typeof n&&Ai(n)},na=r(/x/)||di&&!r(di)?function(n){return ui.call(n)==Y}:r,ta=pi?function(n){if(!n||ui.call(n)!=X)return!1;var t=n.valueOf,r=Tu(t)&&(r=pi(t))&&pi(r);return r?n==r||pi(n)==r:Nr(n)}:Nr,ra=or(ht),ea=ji?function(n){if(n)var t=n.constructor,r=n.length;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&r&&Ir(r)?Ur(n):ku(n)?ji(n):[]}:Ur,ua=or(zt),oa=ar(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),ia=ar(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()});8!=Oi(Un+"08")&&(go=function(n,t,r){return(r?Rr(n,t,r):null==t)?t=0:t&&(t=+t),n=bo(n),Oi(n,t||(En.test(n)?16:10))});var aa=ar(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),fa=ar(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});return G.prototype=H.prototype,nn.prototype=Di(H.prototype),nn.prototype.constructor=nn,Dn.prototype=Di(H.prototype),Dn.prototype.constructor=Dn,Pn.prototype["delete"]=Vn,Pn.prototype.get=Yn,Pn.prototype.has=Gn,Pn.prototype.set=Jn,Zn.prototype.push=Qn,lu.Cache=Pn,G.after=Ze,G.ary=He,G.assign=ra,G.at=Oe,G.before=Qe,G.bind=nu,G.bindAll=tu,G.bindKey=ru,G.callback=ko,G.chain=we,G.chunk=$r,G.compact=Br,G.constant=Oo,G.countBy=Ki,G.create=Du,G.curry=eu,G.curryRight=uu,G.debounce=ou,G.defaults=zu,G.defer=iu,G.delay=au,G.difference=Dr,G.drop=zr,G.dropRight=Mr,G.dropRightWhile=qr,G.dropWhile=Pr,G.fill=Kr,G.filter=Te,G.flatten=Jr,G.flattenDeep=Xr,G.flow=fu,G.flowRight=cu,G.forEach=We,G.forEachRight=Fe,G.forIn=Pu,G.forInRight=Ku,G.forOwn=Vu,G.forOwnRight=Yu,G.functions=Gu,G.groupBy=Vi,G.indexBy=Yi,G.initial=Hr,G.intersection=Qr,G.invert=Xu,G.invoke=$e,G.keys=ea,G.keysIn=Zu,G.map=Be,G.mapValues=Hu,G.matches=To,G.matchesProperty=So,G.memoize=lu,G.merge=ua,G.mixin=No,G.negate=su,G.omit=Qu,G.once=pu,G.pairs=no,G.partial=hu,G.partialRight=vu,G.partition=Xi,G.pick=to,G.pluck=De,G.property=Fo,G.propertyOf=Lo,G.pull=re,G.pullAt=ee,G.range=$o,G.rearg=_u,G.reject=qe,G.remove=ue,G.rest=oe,G.shuffle=Ke,G.slice=ie,G.sortBy=Ge,G.sortByAll=Je,G.spread=gu,G.take=ce,G.takeRight=le,G.takeRightWhile=se,G.takeWhile=pe,G.tap=be,G.throttle=yu,G.thru=xe,G.times=Bo,G.toArray=$u,G.toPlainObject=Bu,G.transform=eo,G.union=he,G.uniq=ve,G.unzip=_e,G.values=uo,G.valuesIn=oo,G.where=Xe,G.without=ge,G.wrap=du,G.xor=ye,G.zip=de,G.zipObject=me,G.backflow=cu,G.collect=Be,G.compose=cu,G.each=We,G.eachRight=Fe,G.extend=ra,G.iteratee=ko,G.methods=Gu,G.object=me,G.select=Te,G.tail=oe,G.unique=ve,No(G,G),G.attempt=Io,G.camelCase=oa,G.capitalize=fo,G.clone=mu,G.cloneDeep=wu,G.deburr=co,G.endsWith=lo,G.escape=so,G.escapeRegExp=po,G.every=Ce,G.find=Se,G.findIndex=Vr,G.findKey=Mu,G.findLast=Ne,G.findLastIndex=Yr,G.findLastKey=qu,G.findWhere=Ue,G.first=Gr,G.has=Ju,G.identity=Co,G.includes=Le,G.indexOf=Zr,G.inRange=io,G.isArguments=bu,G.isArray=Hi,G.isBoolean=xu,G.isDate=Au,G.isElement=ju,G.isEmpty=Eu,G.isEqual=Ru,G.isError=Iu,G.isFinite=Qi,G.isFunction=na,G.isMatch=Ou,G.isNaN=Cu,G.isNative=Tu,G.isNull=Su,G.isNumber=Nu,G.isObject=ku,G.isPlainObject=ta,G.isRegExp=Uu,G.isString=Wu,G.isTypedArray=Fu,G.isUndefined=Lu,G.kebabCase=ia,G.last=ne,G.lastIndexOf=te,G.max=Gi,G.min=Ji,G.noConflict=Uo,G.noop=Wo,G.now=Zi,G.pad=ho,G.padLeft=vo,G.padRight=_o,G.parseInt=go,G.random=ao,G.reduce=ze,G.reduceRight=Me,G.repeat=yo,G.result=ro,G.runInContext=b,G.size=Ve,G.snakeCase=aa,G.some=Ye,G.sortedIndex=ae,G.sortedLastIndex=fe,G.startCase=fa,G.startsWith=mo,G.template=wo,G.trim=bo,G.trimLeft=xo,G.trimRight=Ao,G.trunc=jo,G.unescape=Eo,G.uniqueId=Do,G.words=Ro,G.all=Ce,G.any=Ye,G.contains=Le,G.detect=Se,G.foldl=ze,G.foldr=Me,G.head=Gr,G.include=Le,G.inject=ze,No(G,function(){var n={};return Tt(G,function(t,r){G.prototype[r]||(n[r]=t)}),n}(),!1),G.sample=Pe,G.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Pe(t,n)}):Pe(this.value())},G.VERSION=A,tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){G[n].placeholder=G}),tt(["filter","map","takeWhile"],function(n,t){var r=t==L,e=t==B;Dn.prototype[n]=function(n,u){var o=this.clone(),i=o.__filtered__,a=o.__iteratees__||(o.__iteratees__=[]);return o.__filtered__=i||r||e&&o.__dir__<0,a.push({iteratee:dr(n,u,3),type:t}),o}}),tt(["drop","take"],function(n,t){var r="__"+n+"Count__",e=n+"While";Dn.prototype[n]=function(e){e=null==e?1:Ei(si(e)||0,0);var u=this.clone();if(u.__filtered__){var o=u[r];u[r]=t?Ri(o,e):o+e}else{var i=u.__views__||(u.__views__=[]);i.push({size:e,type:n+(u.__dir__<0?"Right":"")})}return u},Dn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Dn.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[e](n,t).reverse()}}),tt(["first","last"],function(n,t){var r="take"+(t?"Right":"");Dn.prototype[n]=function(){return this[r](1).value()[0]}}),tt(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");Dn.prototype[n]=function(){return this[r](1)}}),tt(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?Bt:qt;Dn.prototype[n]=function(n){return this[r](e(n))}}),Dn.prototype.compact=function(){return this.filter(Co)},Dn.prototype.dropWhile=function(n,t){var r;return n=dr(n,t,3),this.filter(function(t,e,u){return r||(r=!n(t,e,u))})},Dn.prototype.reject=function(n,t){return n=dr(n,t,3),this.filter(function(t,r,e){return!n(t,r,e)})},Dn.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);return"undefined"!=typeof t&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},Dn.prototype.toArray=function(){return this.drop(0)},Tt(Dn.prototype,function(n,t){var r=G[t],e=/^(?:first|last)$/.test(t);G.prototype[t]=function(){var t=this.__wrapped__,u=arguments,o=this.__chain__,i=!!this.__actions__.length,a=t instanceof Dn,f=a&&!i;if(e&&!o)return f?n.call(t):r.call(G,this.value());var c=function(n){var t=[n];return hi.apply(t,u),r.apply(G,t)};if(a||Hi(t)){var l=f?t:new Dn(this),s=n.apply(l,u);if(!e&&(i||s.__actions__)){var p=s.__actions__||(s.__actions__=[]);p.push({func:xe,args:[c],thisArg:G})}return new nn(s,o)}return this.thru(c)}}),tt(["concat","join","pop","push","shift","sort","splice","unshift"],function(n){var t=Zo[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(n);G.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),Dn.prototype.clone=zn,Dn.prototype.reverse=Mn,Dn.prototype.value=qn,G.prototype.chain=Ae,G.prototype.commit=je,G.prototype.plant=Ee,G.prototype.reverse=Re,G.prototype.toString=Ie,G.prototype.run=G.prototype.toJSON=G.prototype.valueOf=G.prototype.value=ke,G.prototype.collect=G.prototype.map,G.prototype.head=G.prototype.first,G.prototype.select=G.prototype.filter,G.prototype.tail=G.prototype.rest,G}var x,A="3.3.0",j=1,E=2,R=4,I=8,k=16,O=32,C=64,T=128,S=256,N=30,U="...",W=150,F=16,L=0,$=1,B=2,D="Expected a function",z="__lodash_placeholder__",M="[object Arguments]",q="[object Array]",P="[object Boolean]",K="[object Date]",V="[object Error]",Y="[object Function]",G="[object Map]",J="[object Number]",X="[object Object]",Z="[object RegExp]",H="[object Set]",Q="[object String]",nn="[object WeakMap]",tn="[object ArrayBuffer]",rn="[object Float32Array]",en="[object Float64Array]",un="[object Int8Array]",on="[object Int16Array]",an="[object Int32Array]",fn="[object Uint8Array]",cn="[object Uint8ClampedArray]",ln="[object Uint16Array]",sn="[object Uint32Array]",pn=/\b__p \+= '';/g,hn=/\b(__p \+=) '' \+/g,vn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_n=/&(?:amp|lt|gt|quot|#39|#96);/g,gn=/[&<>"'`]/g,yn=RegExp(_n.source),dn=RegExp(gn.source),mn=/<%-([\s\S]+?)%>/g,wn=/<%([\s\S]+?)%>/g,bn=/<%=([\s\S]+?)%>/g,xn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,An=/\w*$/,jn=/^\s*function[ \n\r\t]+\w/,En=/^0[xX]/,Rn=/^\[object .+?Constructor\]$/,In=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,kn=/($^)/,On=/[.*+?^${}()|[\]\/\\]/g,Cn=RegExp(On.source),Tn=/\bthis\b/,Sn=/['\n\r\u2028\u2029\\]/g,Nn=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"{2,}(?="+n+t+")|"+n+"?"+t+"|"+n+"+|[0-9]+","g")}(),Un=" 	\fÂ \ufeff\n\r\u2028\u2029áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€",Wn=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Fn=-1,Ln={};Ln[rn]=Ln[en]=Ln[un]=Ln[on]=Ln[an]=Ln[fn]=Ln[cn]=Ln[ln]=Ln[sn]=!0,Ln[M]=Ln[q]=Ln[tn]=Ln[P]=Ln[K]=Ln[V]=Ln[Y]=Ln[G]=Ln[J]=Ln[X]=Ln[Z]=Ln[H]=Ln[Q]=Ln[nn]=!1;var $n={};$n[M]=$n[q]=$n[tn]=$n[P]=$n[K]=$n[rn]=$n[en]=$n[un]=$n[on]=$n[an]=$n[J]=$n[X]=$n[Z]=$n[Q]=$n[fn]=$n[cn]=$n[ln]=$n[sn]=!0,$n[V]=$n[Y]=$n[G]=$n[H]=$n[nn]=!1;var Bn={leading:!1,maxWait:0,trailing:!1},Dn={"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss"},zn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Mn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},qn={"function":!0,object:!0},Pn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kn=qn[typeof window]&&window!==(this&&this.window)?window:this,Vn=qn[typeof exports]&&exports&&!exports.nodeType&&exports,Yn=qn[typeof module]&&module&&!module.nodeType&&module,Gn=Vn&&Yn&&"object"==typeof global&&global;!Gn||Gn.global!==Gn&&Gn.window!==Gn&&Gn.self!==Gn||(Kn=Gn);var Jn=Yn&&Yn.exports===Vn&&Vn,Xn=b();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Kn._=Xn,define(function(){return Xn})):Vn&&Yn?Jn?(Yn.exports=Xn)._=Xn:Vn._=Xn:Kn._=Xn}).call(this);


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],184:[function(require,module,exports){
  "use strict";function initParams(e,t,r){return r=filterForCallback([t,r]),t=constructOptionsFrom(e,t),constructObject().extend({callback:r}).extend({options:t}).extend({uri:t.uri}).done()}function request(e,t,r){if("undefined"==typeof e)throw new Error("undefined is not a valid uri or options object.");var n=initParams(e,t,r);return t=n.options,t.callback=n.callback,t.uri=n.uri,new request.Request(t)}function requester(e){return"function"==typeof e.options._requester?e.options._requester:request}var extend=require("util")._extend,cookies=require("./lib/cookies"),helpers=require("./lib/helpers"),isFunction=helpers.isFunction,constructObject=helpers.constructObject,filterForCallback=helpers.filterForCallback,constructOptionsFrom=helpers.constructOptionsFrom,paramsHaveRequestBody=helpers.paramsHaveRequestBody;request.get=function(e,t,r){var n=initParams(e,t,r);return n.options.method="GET",requester(n)(n.uri||null,n.options,n.callback)},request.head=function(e,t,r){var n=initParams(e,t,r);if(n.options.method="HEAD",paramsHaveRequestBody(n))throw new Error("HTTP HEAD requests MUST NOT include a request body.");return requester(n)(n.uri||null,n.options,n.callback)},request.post=function(e,t,r){var n=initParams(e,t,r);return n.options.method="POST",requester(n)(n.uri||null,n.options,n.callback)},request.put=function(e,t,r){var n=initParams(e,t,r);return n.options.method="PUT",requester(n)(n.uri||null,n.options,n.callback)},request.patch=function(e,t,r){var n=initParams(e,t,r);return n.options.method="PATCH",requester(n)(n.uri||null,n.options,n.callback)},request.del=function(e,t,r){var n=initParams(e,t,r);return n.options.method="DELETE",requester(n)(n.uri||null,n.options,n.callback)},request.jar=function(e){return cookies.jar(e)},request.cookie=function(e){return cookies.parse(e)},request.defaults=function(e,t){var r=this,n=function(n){var o=function(e){return e=extend({},e),delete e.headers,e},u=function(e,t){return constructObject().extend(t.headers).extend(e.options.headers).done()};return function(s,i,a){var c=initParams(s,i,a);return c.options=extend(o(e),c.options),e.headers&&(c.options.headers=u(c,e)),isFunction(t)&&(n===r?n=t:c.options._requester=t),n(c.options,c.callback)}},o=n(r);return o.get=n(r.get),o.patch=n(r.patch),o.post=n(r.post),o.put=n(r.put),o.head=n(r.head),o.del=n(r.del),o.cookie=n(r.cookie),o.jar=r.jar,o.defaults=r.defaults,o},request.forever=function(e,t){var r=constructObject();return t&&r.extend(t),e&&(r.agentOptions=e),r.extend({forever:!0}),request.defaults(r.done())},module.exports=request,request.Request=require("./request"),request.initParams=initParams,Object.defineProperty(request,"debug",{enumerable:!0,get:function(){return request.Request.debug},set:function(e){request.Request.debug=e}});


},{"./lib/cookies":186,"./lib/helpers":189,"./request":244,"util":109}],185:[function(require,module,exports){
  "use strict";function Auth(){this.hasAuth=!1,this.sentAuth=!1,this.bearerToken=null,this.user=null,this.pass=null}var caseless=require("caseless"),uuid=require("node-uuid"),helpers=require("./helpers"),md5=helpers.md5,toBase64=helpers.toBase64;Auth.prototype.basic=function(e,r,t){var s=this;if("string"!=typeof e||void 0!==r&&"string"!=typeof r)throw new Error("auth() received invalid user or password");s.user=e,s.pass=r,s.hasAuth=!0;var u="undefined"!=typeof r?e+":"+r:e;if(t||"undefined"==typeof t){var a="Basic "+toBase64(u);return s.sentAuth=!0,a}},Auth.prototype.bearer=function(e,r){var t=this;if(t.bearerToken=e,t.hasAuth=!0,r||"undefined"==typeof r){"function"==typeof e&&(e=e());var s="Bearer "+e;return t.sentAuth=!0,s}},Auth.prototype.digest=function(e,r,t){for(var s=this,u={},a=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;;){var n=a.exec(t);if(!n)break;u[n[1]]=n[2]||n[3]}var i=md5(s.user+":"+u.realm+":"+s.pass),o=md5(e+":"+r),h=/(^|,)\s*auth\s*($|,)/.test(u.qop)&&"auth",p=h&&"00000001",c=h&&uuid().replace(/-/g,""),l=md5(h?i+":"+u.nonce+":"+p+":"+c+":"+h+":"+o:i+":"+u.nonce+":"+o),d={username:s.user,realm:u.realm,nonce:u.nonce,uri:r,qop:h,response:l,nc:p,cnonce:c,algorithm:u.algorithm,opaque:u.opaque};t=[];for(var f in d)d[f]&&("qop"===f||"nc"===f||"algorithm"===f?t.push(f+"="+d[f]):t.push(f+'="'+d[f]+'"'));return t="Digest "+t.join(", "),s.sentAuth=!0,t},Auth.prototype.response=function(e,r,t){var s=this;if(!s.hasAuth||s.sentAuth)return null;var u=caseless(t),a=u.get("www-authenticate"),n=a&&a.split(" ")[0].toLowerCase();switch(n){case"basic":return s.basic(s.user,s.pass,!0);case"bearer":return s.bearer(s.bearerToken,!0);case"digest":return s.digest(e,r,a)}},exports.Auth=Auth;


},{"./helpers":189,"caseless":201,"node-uuid":228}],186:[function(require,module,exports){
  "use strict";function RequestJar(e){var o=this;o._jar=new CookieJar(e)}var tough=require("tough-cookie"),Cookie=tough.Cookie,CookieJar=tough.CookieJar;exports.parse=function(e){if(e&&e.uri&&(e=e.uri),"string"!=typeof e)throw new Error("The cookie function only accepts STRING as param");return Cookie.parse(e)},RequestJar.prototype.setCookie=function(e,o,r){var t=this;return t._jar.setCookieSync(e,o,r||{})},RequestJar.prototype.getCookieString=function(e){var o=this;return o._jar.getCookieStringSync(e)},RequestJar.prototype.getCookies=function(e){var o=this;return o._jar.getCookiesSync(e)},exports.jar=function(e){return new RequestJar(e)};


},{"tough-cookie":236}],187:[function(require,module,exports){
  "use strict";module.exports=function(t){var e={};return Object.keys(t).forEach(function(r){e[r]=t[r]}),e};


},{}],188:[function(require,module,exports){
  (function (process){
    "use strict";function formatHostname(o){return o.replace(/^\.*/,".").toLowerCase()}function parseNoProxyZone(o){o=o.trim().toLowerCase();var r=o.split(":",2),t=formatHostname(r[0]),e=r[1],n=o.indexOf(":")>-1;return{hostname:t,port:e,hasPort:n}}function uriInNoProxy(o,r){var t=o.port||("https:"===o.protocol?"443":"80"),e=formatHostname(o.hostname),n=r.split(",");return n.map(parseNoProxyZone).some(function(o){var r=e.indexOf(o.hostname),n=r>-1&&r===e.length-o.hostname.length;return o.hasPort?t===o.port&&n:n})}function getProxyFromURI(o){var r=process.env.NO_PROXY||process.env.no_proxy||"";return"*"===r?null:""!==r&&uriInNoProxy(o,r)?null:"http:"===o.protocol?process.env.HTTP_PROXY||process.env.http_proxy||null:"https:"===o.protocol?process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null:null}module.exports=getProxyFromURI;


  }).call(this,require("Zbi7gb"))
},{"Zbi7gb":95}],189:[function(require,module,exports){
  (function (process,Buffer){
    "use strict";function deferMethod(){return"undefined"==typeof setImmediate?process.nextTick:setImmediate}function constructObject(t){return t=t||{},{extend:function(e){return constructObject(extend(t,e))},done:function(){return t}}}function constructOptionsFrom(t,e){var r=constructObject();return"object"==typeof e?r.extend(e).extend({uri:t}):"string"==typeof t?r.extend({uri:t}):r.extend(t),r.done()}function isFunction(t){return"function"==typeof t}function filterForCallback(t){var e=t.filter(isFunction);return e[0]}function paramsHaveRequestBody(t){return t.options.body||t.options.requestBodyStream||t.options.json&&"boolean"!=typeof t.options.json||t.options.multipart}function safeStringify(t){var e;try{e=JSON.stringify(t)}catch(r){e=jsonSafeStringify(t)}return e}function md5(t){return crypto.createHash("md5").update(t).digest("hex")}function isReadStream(t){return t.readable&&t.path&&t.mode}function toBase64(t){return new Buffer(t||"","ascii").toString("base64")}var extend=require("util")._extend,jsonSafeStringify=require("json-stringify-safe"),crypto=require("crypto");exports.isFunction=isFunction,exports.constructObject=constructObject,exports.constructOptionsFrom=constructOptionsFrom,exports.filterForCallback=filterForCallback,exports.paramsHaveRequestBody=paramsHaveRequestBody,exports.safeStringify=safeStringify,exports.md5=md5,exports.isReadStream=isReadStream,exports.toBase64=toBase64,exports.defer=deferMethod();


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"buffer":78,"crypto":82,"json-stringify-safe":224,"util":109}],190:[function(require,module,exports){
  "use strict";var querystring=require("querystring"),qs=require("qs"),caseless=require("caseless"),uuid=require("node-uuid"),oauth=require("oauth-sign");exports.buildParams=function(e,t,r,a,o,u){var s={};for(var n in e)s["oauth_"+n]=e[n];s.oauth_version||(s.oauth_version="1.0"),s.oauth_timestamp||(s.oauth_timestamp=Math.floor(Date.now()/1e3).toString()),s.oauth_nonce||(s.oauth_nonce=uuid().replace(/-/g,"")),s.oauth_signature_method||(s.oauth_signature_method="HMAC-SHA1");var h=s.oauth_consumer_secret||s.oauth_private_key;delete s.oauth_consumer_secret,delete s.oauth_private_key;var i=s.oauth_token_secret;delete s.oauth_token_secret;var c=s.oauth_realm;delete s.oauth_realm,delete s.oauth_transport_method;var _=t.protocol+"//"+t.host+t.pathname,d=u.parse([].concat(a,o,u.stringify(s)).join("&"));return s.oauth_signature=oauth.sign(s.oauth_signature_method,r,_,d,h,i),c&&(s.realm=c),s},exports.concatParams=function(e,t,r){r=r||"";var a=Object.keys(e).filter(function(e){return"realm"!==e&&"oauth_signature"!==e}).sort();return e.realm&&a.splice(0,1,"realm"),a.push("oauth_signature"),a.map(function(t){return t+"="+r+oauth.rfc3986(e[t])+r}).join(t)},exports.oauth=function(e){var t,r,a=e.uri||{},o=e.method||"",u=caseless(e.headers),s=e.body||"",n=e.oauth||{},h=e.qsLib||qs,i=u.get("content-type")||"",c="application/x-www-form-urlencoded",_=n.transport_method||"header";if(i.slice(0,c.length)===c&&(i=c,t=s),a.query&&(r=a.query),"body"===_&&("POST"!==o||i!==c))throw new Error("oauth: transport_method of 'body' requires 'POST' and content-type '"+c+"'");var d,m=this.buildParams(n,a,o,r,t,h);switch(_){case"header":d="OAuth "+this.concatParams(m,",",'"');break;case"query":d=(r?"&":"?")+this.concatParams(m,"&");break;case"body":d=(t?t+"&":"")+this.concatParams(m,"&");break;default:throw new Error("oauth: transport_method invalid")}return{oauth:d,transport:_}};


},{"caseless":201,"node-uuid":228,"oauth-sign":229,"qs":230,"querystring":99}],191:[function(require,module,exports){
  function authorization(e){return"AWS "+e.key+":"+sign(e)}function hmacSha1(e){return crypto.createHmac("sha1",e.secret).update(e.message).digest("base64")}function sign(e){return e.message=stringToSign(e),hmacSha1(e)}function signQuery(e){return e.message=queryStringToSign(e),hmacSha1(e)}function stringToSign(e){var n=e.amazonHeaders||"";n&&(n+="\n");var r=[e.verb,e.md5,e.contentType,e.date?e.date.toUTCString():"",n+e.resource];return r.join("\n")}function queryStringToSign(e){return"GET\n\n\n"+e.date+"\n"+e.resource}function canonicalizeHeaders(e){for(var n=[],r=Object.keys(e),o=0,t=r.length;t>o;++o){var i=r[o],a=e[i],i=i.toLowerCase();0===i.indexOf("x-amz")&&n.push(i+":"+a)}return n.sort().join("\n")}function canonicalizeResource(e){var n=parse(e,!0),r=n.pathname,o=[];return Object.keys(n.query).forEach(function(e){if(~keys.indexOf(e)){var r=""==n.query[e]?"":"="+encodeURIComponent(n.query[e]);o.push(e+r)}}),r+(o.length?"?"+o.sort().join("&"):"")}var crypto=require("crypto"),parse=require("url").parse,keys=["acl","location","logging","notification","partNumber","policy","requestPayment","torrent","uploadId","uploads","versionId","versioning","versions","website"];module.exports=authorization,module.exports.authorization=authorization,module.exports.hmacSha1=hmacSha1,module.exports.sign=sign,module.exports.signQuery=signQuery,module.exports.queryStringToSign=stringToSign,module.exports.queryStringToSign=queryStringToSign,module.exports.canonicalizeHeaders=canonicalizeHeaders,module.exports.canonicalizeResource=canonicalizeResource;


},{"crypto":82,"url":266}],192:[function(require,module,exports){
  (function (Buffer){
    function BufferList(t){if(!(this instanceof BufferList))return new BufferList(t);if(this._bufs=[],this.length=0,"function"==typeof t){this._callback=t;var e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",e)}),this.on("unpipe",function(t){t.removeListener("error",e)})}else Buffer.isBuffer(t)?this.append(t):Array.isArray(t)&&t.forEach(function(t){Buffer.isBuffer(t)&&this.append(t)}.bind(this));DuplexStream.call(this)}var DuplexStream=require("readable-stream/duplex"),util=require("util");util.inherits(BufferList,DuplexStream),BufferList.prototype._offset=function(t){for(var e,i=0,s=0;s<this._bufs.length;s++){if(e=i+this._bufs[s].length,e>t)return[s,t-i];i=e}},BufferList.prototype.append=function(t){var e=Buffer.isBuffer(t)||t instanceof BufferList;return this._bufs.push(e?t:new Buffer(t)),this.length+=t.length,this},BufferList.prototype._write=function(t,e,i){this.append(t),i&&i()},BufferList.prototype._read=function(t){return this.length?(t=Math.min(t,this.length),this.push(this.slice(0,t)),void this.consume(t)):this.push(null)},BufferList.prototype.end=function(t){DuplexStream.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},BufferList.prototype.get=function(t){return this.slice(t,t+1)[0]},BufferList.prototype.slice=function(t,e){return this.copy(null,0,t,e)},BufferList.prototype.copy=function(t,e,i,s){if(("number"!=typeof i||0>i)&&(i=0),("number"!=typeof s||s>this.length)&&(s=this.length),i>=this.length)return t||new Buffer(0);if(0>=s)return t||new Buffer(0);var r,f,n=!!t,u=this._offset(i),h=s-i,o=h,l=n&&e||0,a=u[1];if(0===i&&s==this.length){if(!n)return Buffer.concat(this._bufs);for(f=0;f<this._bufs.length;f++)this._bufs[f].copy(t,l),l+=this._bufs[f].length;return t}if(o<=this._bufs[u[0]].length-a)return n?this._bufs[u[0]].copy(t,e,a,a+o):this._bufs[u[0]].slice(a,a+o);for(n||(t=new Buffer(h)),f=u[0];f<this._bufs.length;f++){if(r=this._bufs[f].length-a,!(o>r)){this._bufs[f].copy(t,l,a,a+o);break}this._bufs[f].copy(t,l,a),l+=r,o-=r,a&&(a=0)}return t},BufferList.prototype.toString=function(t,e,i){return this.slice(e,i).toString(t)},BufferList.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},BufferList.prototype.duplicate=function(){for(var t=0,e=new BufferList;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},BufferList.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){BufferList.prototype[e]=function(i){return this.slice(i,i+t[e])[e](0)}}(e)}(),module.exports=BufferList;


  }).call(this,require("buffer").Buffer)
},{"buffer":78,"readable-stream/duplex":193,"util":109}],193:[function(require,module,exports){
  module.exports=require("./lib/_stream_duplex.js");


},{"./lib/_stream_duplex.js":194}],194:[function(require,module,exports){
  (function (process){
    function Duplex(e){return this instanceof Duplex?(Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(e)}function onend(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function forEach(e,t){for(var i=0,r=e.length;r>i;i++)t(e[i],i)}module.exports=Duplex;var objectKeys=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t},util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable),forEach(objectKeys(Writable.prototype),function(e){Duplex.prototype[e]||(Duplex.prototype[e]=Writable.prototype[e])});


  }).call(this,require("Zbi7gb"))
},{"./_stream_readable":195,"./_stream_writable":196,"Zbi7gb":95,"core-util-is":197,"inherits":198}],195:[function(require,module,exports){
  (function (process){
    function ReadableState(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){return this instanceof Readable?(this._readableState=new ReadableState(e,this),this.readable=!0,void Stream.call(this)):new Readable(e)}function readableAddChunk(e,t,n,r,i){var a=chunkInvalid(t,n);if(a)e.emit("error",a);else if(null===n||void 0===n)t.reading=!1,t.ended||onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var d=new Error("stream.push() after EOF");e.emit("error",d)}else if(t.endEmitted&&i){var d=new Error("stream.unshift() after end event");e.emit("error",d)}else!t.decoder||i||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&emitReadable(e),maybeReadMore(e,t);else i||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function roundUpToNextPowerOf2(e){if(e>=MAX_HWM)e=MAX_HWM;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function howMuchToRead(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=roundUpToNextPowerOf2(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function chunkInvalid(e,t){var n=null;return Buffer.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?emitReadable(e):endReadable(e)}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?process.nextTick(function(){emitReadable_(e)}):emitReadable_(e))}function emitReadable_(e){e.emit("readable")}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(function(){maybeReadMore_(e,t)}))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&flow(e)}}function flow(e){function t(e,t,i){var a=e.write(n);!1===a&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):forEach(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(EE.listenerCount(e,"data")>0&&emitDataEvents(e))):void(r.ranOut=!0)}function pipeOnReadable(){this._readableState.ranOut&&(this._readableState.ranOut=!1,flow(this))}function emitDataEvents(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var r=t||!1,i=!1;e.readable=!0,e.pipe=Stream.prototype.pipe,e.on=e.addListener=Stream.prototype.on,e.on("readable",function(){i=!0;for(var t;!r&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){r=!0,this.emit("pause")},e.resume=function(){r=!1,i?process.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function fromList(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,d=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(d)n=r.shift();else if(!e||e>=i)n=a?r.join(""):Buffer.concat(r,i),r.length=0;else if(e<r[0].length){var o=r[0];n=o.slice(0,e),r[0]=o.slice(e)}else if(e===r[0].length)n=r.shift();else{n=a?"":new Buffer(e);for(var l=0,s=0,u=r.length;u>s&&e>l;s++){var o=r[0],h=Math.min(e-l,o.length);a?n+=o.slice(0,h):o.copy(n,l,0,h),h<o.length?r[0]=o.slice(h):r.shift(),l+=h}}return n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,process.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function forEach(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}module.exports=Readable;var isArray=require("isarray"),Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;EE.listenerCount||(EE.listenerCount=function(e,t){return e.listeners(t).length});var Stream=require("stream"),util=require("core-util-is");util.inherits=require("inherits");var StringDecoder;util.inherits(Readable,Stream),Readable.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new Buffer(e,t),t="")),readableAddChunk(this,n,e,t,!1)},Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)},Readable.prototype.setEncoding=function(e){StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e};var MAX_HWM=8388608;Readable.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n,r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return emitReadable(this),null;if(e=howMuchToRead(e,t),0===e&&t.ended)return n=null,t.length>0&&t.decoder&&(n=fromList(e,t),t.length-=n.length),0===t.length&&endReadable(this),n;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=howMuchToRead(r,t)),n=e>0?fromList(e,t):null,null===n&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&endReadable(this),n},Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(e,t){function n(e){e===s&&i()}function r(){e.end()}function i(){e.removeListener("close",d),e.removeListener("finish",o),e.removeListener("drain",p),e.removeListener("error",a),e.removeListener("unpipe",n),s.removeListener("end",r),s.removeListener("end",i),(!e._writableState||e._writableState.needDrain)&&p()}function a(t){l(),e.removeListener("error",a),0===EE.listenerCount(e,"error")&&e.emit("error",t)}function d(){e.removeListener("finish",o),l()}function o(){e.removeListener("close",d),l()}function l(){s.unpipe(e)}var s=this,u=this._readableState;switch(u.pipesCount){case 0:u.pipes=e;break;case 1:u.pipes=[u.pipes,e];break;default:u.pipes.push(e)}u.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,f=h?r:i;u.endEmitted?process.nextTick(f):s.once("end",f),e.on("unpipe",n);var p=pipeOnDrain(s);return e.on("drain",p),e._events&&e._events.error?isArray(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",d),e.once("finish",o),e.emit("pipe",s),u.flowing||(this.on("readable",pipeOnReadable),u.flowing=!0,process.nextTick(function(){flow(s)})),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",pipeOnReadable),t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=indexOf(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||emitDataEvents(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&emitReadable(this,r):this.read(0))}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){emitDataEvents(this),this.read(0),this.emit("resume")},Readable.prototype.pause=function(){emitDataEvents(this,!0),this.emit("pause")},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var a=r.push(i);a||(n=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return forEach(a,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){n&&(n=!1,e.resume())},r},Readable._fromList=fromList;


  }).call(this,require("Zbi7gb"))
},{"Zbi7gb":95,"buffer":78,"core-util-is":197,"events":87,"inherits":198,"isarray":199,"stream":101,"string_decoder/":200}],196:[function(require,module,exports){
  (function (process){
    function WriteReq(e,t,i){this.chunk=e,this.encoding=t,this.callback=i}function WritableState(e,t){e=e||{};var i=e.highWaterMark;this.highWaterMark=i||0===i?i:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function Writable(e){var t=require("./_stream_duplex");return this instanceof Writable||this instanceof t?(this._writableState=new WritableState(e,this),this.writable=!0,void Stream.call(this)):new Writable(e)}function writeAfterEnd(e,t,i){var r=new Error("write after end");e.emit("error",r),process.nextTick(function(){i(r)})}function validChunk(e,t,i,r){var n=!0;if(!Buffer.isBuffer(i)&&"string"!=typeof i&&null!==i&&void 0!==i&&!t.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");e.emit("error",f),process.nextTick(function(){r(f)}),n=!1}return n}function decodeChunk(e,t,i){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new Buffer(t,i)),t}function writeOrBuffer(e,t,i,r,n){i=decodeChunk(t,i,r),Buffer.isBuffer(i)&&(r="buffer");var f=t.objectMode?1:i.length;t.length+=f;var o=t.length<t.highWaterMark;return o||(t.needDrain=!0),t.writing?t.buffer.push(new WriteReq(i,r,n)):doWrite(e,t,f,i,r,n),o}function doWrite(e,t,i,r,n,f){t.writelen=i,t.writecb=f,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1}function onwriteError(e,t,i,r,n){i?process.nextTick(function(){n(r)}):n(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var i=e._writableState,r=i.sync,n=i.writecb;if(onwriteStateUpdate(i),t)onwriteError(e,i,r,t,n);else{var f=needFinish(e,i);f||i.bufferProcessing||!i.buffer.length||clearBuffer(e,i),r?process.nextTick(function(){afterWrite(e,i,f,n)}):afterWrite(e,i,f,n)}}function afterWrite(e,t,i,r){i||onwriteDrain(e,t),r(),i&&finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;for(var i=0;i<t.buffer.length;i++){var r=t.buffer[i],n=r.chunk,f=r.encoding,o=r.callback,a=t.objectMode?1:n.length;if(doWrite(e,t,a,n,f,o),t.writing){i++;break}}t.bufferProcessing=!1,i<t.buffer.length?t.buffer=t.buffer.slice(i):t.buffer.length=0}function needFinish(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function finishMaybe(e,t){var i=needFinish(e,t);return i&&(t.finished=!0,e.emit("finish")),i}function endWritable(e,t,i){t.ending=!0,finishMaybe(e,t),i&&(t.finished?process.nextTick(i):e.once("finish",i)),t.ended=!0}module.exports=Writable;var Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream=require("stream");util.inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,t,i){var r=this._writableState,n=!1;return"function"==typeof t&&(i=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof i&&(i=function(){}),r.ended?writeAfterEnd(this,r,i):validChunk(this,r,e,i)&&(n=writeOrBuffer(this,r,e,t,i)),n},Writable.prototype._write=function(e,t,i){i(new Error("not implemented"))},Writable.prototype.end=function(e,t,i){var r=this._writableState;"function"==typeof e?(i=e,e=null,t=null):"function"==typeof t&&(i=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||endWritable(this,r,i)};


  }).call(this,require("Zbi7gb"))
},{"./_stream_duplex":194,"Zbi7gb":95,"buffer":78,"core-util-is":197,"inherits":198,"stream":101}],197:[function(require,module,exports){
  (function (Buffer){
    function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function isBuffer(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=isBuffer;


  }).call(this,require("buffer").Buffer)
},{"buffer":78}],198:[function(require,module,exports){
  "function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};


},{}],199:[function(require,module,exports){
  module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],200:[function(require,module,exports){
  function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var Buffer=require("buffer").Buffer,isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var h=t.charCodeAt(t.length-1);if(!(h>=55296&&56319>=h)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,h=t.charCodeAt(i);if(h>=55296&&56319>=h){var c=this.surrogateSize;return this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),e.copy(this.charBuffer,0,0,c),t.substring(0,i)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t};


},{"buffer":78}],201:[function(require,module,exports){
  function Caseless(e){this.dict=e||{}}Caseless.prototype.set=function(e,t,s){if("object"!=typeof e){"undefined"==typeof s&&(s=!0);var r=this.has(e);return!s&&r?this.dict[r]=this.dict[r]+","+t:this.dict[r||e]=t,r}for(var n in e)this.set(n,e[n],t)},Caseless.prototype.has=function(e){for(var t=Object.keys(this.dict),e=e.toLowerCase(),s=0;s<t.length;s++)if(t[s].toLowerCase()===e)return t[s];return!1},Caseless.prototype.get=function(e){e=e.toLowerCase();var t,s,r=this.dict;return Object.keys(r).forEach(function(n){s=n.toLowerCase(),e===s&&(t=r[n])}),t},Caseless.prototype.swap=function(e){var t=this.has(e);if(!t)throw new Error('There is no header than matches "'+e+'"');this.dict[e]=this.dict[t],delete this.dict[t]},Caseless.prototype.del=function(e){var t=this.has(e);return delete this.dict[t||e]},module.exports=function(e){return new Caseless(e)},module.exports.httpify=function(e,t){var s=new Caseless(t);return e.setHeader=function(e,t,r){return s.set(e,t,r)},e.hasHeader=function(e){return s.has(e)},e.getHeader=function(e){return s.get(e)},e.removeHeader=function(e){return s.del(e)},e.headers=s.dict,s};


},{}],202:[function(require,module,exports){
  (function (Buffer){
    function CombinedStream(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null}var util=require("util"),Stream=require("stream").Stream,DelayedStream=require("delayed-stream");module.exports=CombinedStream,util.inherits(CombinedStream,Stream),CombinedStream.create=function(t){var e=new this;t=t||{};for(var i in t)e[i]=t[i];return e},CombinedStream.isStreamLike=function(t){return"function"!=typeof t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t&&!Buffer.isBuffer(t)},CombinedStream.prototype.append=function(t){var e=CombinedStream.isStreamLike(t);if(e){if(!(t instanceof DelayedStream)){var i=DelayedStream.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=i}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this},CombinedStream.prototype.pipe=function(t,e){return Stream.prototype.pipe.call(this,t,e),this.resume(),t},CombinedStream.prototype._getNext=function(){this._currentStream=null;var t=this._streams.shift();if("undefined"==typeof t)return void this.end();if("function"!=typeof t)return void this._pipeNext(t);var e=t;e(function(t){var e=CombinedStream.isStreamLike(t);e&&(t.on("data",this._checkDataSize.bind(this)),this._handleErrors(t)),this._pipeNext(t)}.bind(this))},CombinedStream.prototype._pipeNext=function(t){this._currentStream=t;var e=CombinedStream.isStreamLike(t);if(e)return t.on("end",this._getNext.bind(this)),void t.pipe(this,{end:!1});var i=t;this.write(i),this._getNext()},CombinedStream.prototype._handleErrors=function(t){var e=this;t.on("error",function(t){e._emitError(t)})},CombinedStream.prototype.write=function(t){this.emit("data",t)},CombinedStream.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},CombinedStream.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},CombinedStream.prototype.end=function(){this._reset(),this.emit("end")},CombinedStream.prototype.destroy=function(){this._reset(),this.emit("close")},CombinedStream.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},CombinedStream.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}},CombinedStream.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},CombinedStream.prototype._emitError=function(t){this._reset(),this.emit("error",t)};


  }).call(this,require("buffer").Buffer)
},{"buffer":78,"delayed-stream":203,"stream":101,"util":109}],203:[function(require,module,exports){
  function DelayedStream(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}var Stream=require("stream").Stream,util=require("util");module.exports=DelayedStream,util.inherits(DelayedStream,Stream),DelayedStream.create=function(e,t){var a=new this;t=t||{};for(var r in t)a[r]=t[r];a.source=e;var i=e.emit;return e.emit=function(){return a._handleEmit(arguments),i.apply(e,arguments)},e.on("error",function(){}),a.pauseStream&&e.pause(),a},DelayedStream.prototype.__defineGetter__("readable",function(){return this.source.readable}),DelayedStream.prototype.resume=function(){this._released||this.release(),this.source.resume()},DelayedStream.prototype.pause=function(){this.source.pause()},DelayedStream.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},DelayedStream.prototype.pipe=function(){var e=Stream.prototype.pipe.apply(this,arguments);return this.resume(),e},DelayedStream.prototype._handleEmit=function(e){return this._released?void this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),void this._bufferedEvents.push(e))},DelayedStream.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}};


},{"stream":101,"util":109}],204:[function(require,module,exports){
  function ForeverAgent(e){var t=this;t.options=e||{},t.requests={},t.sockets={},t.freeSockets={},t.maxSockets=t.options.maxSockets||Agent.defaultMaxSockets,t.minSockets=t.options.minSockets||ForeverAgent.defaultMinSockets,t.on("free",function(e,o,r){var s=o+":"+r;if(t.requests[s]&&t.requests[s].length)t.requests[s].shift().onSocket(e);else if(t.sockets[s].length<t.minSockets){t.freeSockets[s]||(t.freeSockets[s]=[]),t.freeSockets[s].push(e);var n=function(){e.destroy()};e._onIdleError=n,e.on("error",n)}else e.destroy()})}function ForeverAgentSSL(e){ForeverAgent.call(this,e)}function createConnectionSSL(e,t,o){return o="object"==typeof e?e:"object"==typeof t?t:"object"==typeof o?o:{},"number"==typeof e&&(o.port=e),"string"==typeof t&&(o.host=t),tls.connect(o)}module.exports=ForeverAgent,ForeverAgent.SSL=ForeverAgentSSL;var util=require("util"),Agent=require("http").Agent,net=require("net"),tls=require("tls"),AgentSSL=require("https").Agent;util.inherits(ForeverAgent,Agent),ForeverAgent.defaultMinSockets=5,ForeverAgent.prototype.createConnection=net.createConnection,ForeverAgent.prototype.addRequestNoreuse=Agent.prototype.addRequest,ForeverAgent.prototype.addRequest=function(e,t,o){var r=t+":"+o;if(this.freeSockets[r]&&this.freeSockets[r].length>0&&!e.useChunkedEncodingByDefault){var s=this.freeSockets[r].pop();s.removeListener("error",s._onIdleError),delete s._onIdleError,e._reusedSocket=!0,e.onSocket(s)}else this.addRequestNoreuse(e,t,o)},ForeverAgent.prototype.removeSocket=function(e,t,o,r){if(this.sockets[t]){var s=this.sockets[t].indexOf(e);-1!==s&&this.sockets[t].splice(s,1)}else this.sockets[t]&&0===this.sockets[t].length&&(delete this.sockets[t],delete this.requests[t]);if(this.freeSockets[t]){var s=this.freeSockets[t].indexOf(e);-1!==s&&(this.freeSockets[t].splice(s,1),0===this.freeSockets[t].length&&delete this.freeSockets[t])}this.requests[t]&&this.requests[t].length&&this.createSocket(t,o,r).emit("free")},util.inherits(ForeverAgentSSL,ForeverAgent),ForeverAgentSSL.prototype.createConnection=createConnectionSSL,ForeverAgentSSL.prototype.addRequestNoreuse=AgentSSL.prototype.addRequest;


},{"http":88,"https":92,"net":63,"tls":63,"util":109}],205:[function(require,module,exports){
  (function (process,Buffer){
    function FormData(){this._overheadLength=0,this._valueLength=0,this._lengthRetrievers=[],CombinedStream.call(this)}function populate(t,e){for(var r in e)t[r]||(t[r]=e[r]);return t}var CombinedStream=require("combined-stream"),util=require("util"),path=require("path"),http=require("http"),https=require("https"),parseUrl=require("url").parse,fs=require("fs"),mime=require("mime-types"),async=require("async");module.exports=FormData,util.inherits(FormData,CombinedStream),FormData.LINE_BREAK="\r\n",FormData.prototype.append=function(t,e,r){r=r||{};var n=CombinedStream.prototype.append.bind(this);if("number"==typeof e&&(e=""+e),util.isArray(e))return void this._error(new Error("Arrays are not supported."));var a=this._multiPartHeader(t,e,r),o=this._multiPartFooter(t,e,r);n(a),n(e),n(o),this._trackLength(a,e,r)},FormData.prototype._trackLength=function(t,e,r){var n=0;null!=r.knownLength?n+=+r.knownLength:Buffer.isBuffer(e)?n=e.length:"string"==typeof e&&(n=Buffer.byteLength(e)),this._valueLength+=n,this._overheadLength+=Buffer.byteLength(t)+ +FormData.LINE_BREAK.length,e&&(e.path||e.readable&&e.hasOwnProperty("httpVersion"))&&(r.knownLength||this._lengthRetrievers.push(function(t){e.hasOwnProperty("fd")?void 0!=e.end&&e.end!=1/0&&void 0!=e.start?t(null,e.end+1-(e.start?e.start:0)):fs.stat(e.path,function(r,n){var a;return r?void t(r):(a=n.size-(e.start?e.start:0),void t(null,a))}):e.hasOwnProperty("httpVersion")?t(null,+e.headers["content-length"]):e.hasOwnProperty("httpModule")?(e.on("response",function(r){e.pause(),t(null,+r.headers["content-length"])}),e.resume()):t("Unknown stream")}))},FormData.prototype._multiPartHeader=function(t,e,r){var n=this.getBoundary(),a="";return null!=r.header?a=r.header:(a+="--"+n+FormData.LINE_BREAK+'Content-Disposition: form-data; name="'+t+'"',r.filename||e.path?a+='; filename="'+path.basename(r.filename||e.path)+'"'+FormData.LINE_BREAK+"Content-Type: "+(r.contentType||mime.lookup(r.filename||e.path)):e.readable&&e.hasOwnProperty("httpVersion")&&(a+='; filename="'+path.basename(e.client._httpMessage.path)+'"'+FormData.LINE_BREAK+"Content-Type: "+e.headers["content-type"]),a+=FormData.LINE_BREAK+FormData.LINE_BREAK),a},FormData.prototype._multiPartFooter=function(t,e,r){return function(t){var e=FormData.LINE_BREAK,r=0===this._streams.length;r&&(e+=this._lastBoundary()),t(e)}.bind(this)},FormData.prototype._lastBoundary=function(){return"--"+this.getBoundary()+"--"},FormData.prototype.getHeaders=function(t){var e={"content-type":"multipart/form-data; boundary="+this.getBoundary()};for(var r in t)e[r.toLowerCase()]=t[r];return e},FormData.prototype.getCustomHeaders=function(t){t=t?t:"multipart/form-data";var e={"content-type":t+"; boundary="+this.getBoundary(),"content-length":this.getLengthSync()};return e},FormData.prototype.getBoundary=function(){return this._boundary||this._generateBoundary(),this._boundary},FormData.prototype._generateBoundary=function(){for(var t="--------------------------",e=0;24>e;e++)t+=Math.floor(10*Math.random()).toString(16);this._boundary=t},FormData.prototype.getLengthSync=function(t){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this._lengthRetrievers.length&&this._error(new Error("Cannot calculate proper length in synchronous way.")),e},FormData.prototype.getLength=function(t){var e=this._overheadLength+this._valueLength;return this._streams.length&&(e+=this._lastBoundary().length),this._lengthRetrievers.length?void async.parallel(this._lengthRetrievers,function(r,n){return r?void t(r):(n.forEach(function(t){e+=t}),void t(null,e))}):void process.nextTick(t.bind(this,null,e))},FormData.prototype.submit=function(t,e){var r,n,a={method:"post"};return"string"==typeof t?(t=parseUrl(t),n=populate({port:t.port,path:t.pathname,host:t.hostname},a)):(n=populate(t,a),n.port||(n.port="https:"==n.protocol?443:80)),n.headers=this.getHeaders(t.headers),r="https:"==t.protocol?https.request(n):http.request(n),this.getLength(function(t,n){r.setHeader("Content-Length",n),this.pipe(r),e&&(r.on("error",e),r.on("response",e.bind(this,null)))}.bind(this)),r},FormData.prototype._error=function(t){this.error||(this.error=t,this.pause(),this.emit("error",t))};


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"async":206,"buffer":78,"combined-stream":202,"fs":63,"http":88,"https":92,"mime-types":225,"path":94,"url":266,"util":109}],206:[function(require,module,exports){
  (function (process){
    !function(){function n(n){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,n.apply(t,arguments)}}var t,e,r={};t=this,null!=t&&(e=t.async),r.noConflict=function(){return t.async=e,r};var u=Object.prototype.toString,i=Array.isArray||function(n){return"[object Array]"===u.call(n)},c=function(n,t){for(var e=0;e<n.length;e+=1)t(n[e],e,n)},a=function(n,t){if(n.map)return n.map(t);var e=[];return c(n,function(n,r,u){e.push(t(n,r,u))}),e},o=function(n,t,e){return n.reduce?n.reduce(t,e):(c(n,function(n,r,u){e=t(e,n,r,u)}),e)},l=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(r.nextTick=process.nextTick,"undefined"!=typeof setImmediate?r.setImmediate=function(n){setImmediate(n)}:r.setImmediate=r.nextTick):"function"==typeof setImmediate?(r.nextTick=function(n){setImmediate(n)},r.setImmediate=r.nextTick):(r.nextTick=function(n){setTimeout(n,0)},r.setImmediate=r.nextTick),r.each=function(t,e,r){function u(n){n?(r(n),r=function(){}):(i+=1,i>=t.length&&r())}if(r=r||function(){},!t.length)return r();var i=0;c(t,function(t){e(t,n(u))})},r.forEach=r.each,r.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,u=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e():u())})};u()},r.forEachSeries=r.eachSeries,r.eachLimit=function(n,t,e,r){var u=f(t);u.apply(null,[n,e,r])},r.forEachLimit=r.eachLimit;var f=function(n){return function(t,e,r){if(r=r||function(){},!t.length||0>=n)return r();var u=0,i=0,c=0;!function a(){if(u>=t.length)return r();for(;n>c&&i<t.length;)i+=1,c+=1,e(t[i-1],function(n){n?(r(n),r=function(){}):(u+=1,c-=1,u>=t.length?r():a())})}()}},s=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.each].concat(t))}},p=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[f(n)].concat(e))}},d=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.eachSeries].concat(t))}},y=function(n,t,e,r){if(t=a(t,function(n,t){return{index:t,value:n}}),r){var u=[];n(t,function(n,t){e(n.value,function(e,r){u[n.index]=r,t(e)})},function(n){r(n,u)})}else n(t,function(n,t){e(n.value,function(n){t(n)})})};r.map=s(y),r.mapSeries=d(y),r.mapLimit=function(n,t,e,r){return m(t)(n,e,r)};var m=function(n){return p(n,y)};r.reduce=function(n,t,e,u){r.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){u(n,t)})},r.inject=r.reduce,r.foldl=r.reduce,r.reduceRight=function(n,t,e,u){var i=a(n,function(n){return n}).reverse();r.reduce(i,t,e,u)},r.foldr=r.reduceRight;var v=function(n,t,e,r){var u=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&u.push(n),t()})},function(n){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.filter=s(v),r.filterSeries=d(v),r.select=r.filter,r.selectSeries=r.filterSeries;var h=function(n,t,e,r){var u=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||u.push(n),t()})},function(n){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.reject=s(h),r.rejectSeries=d(h);var g=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(n){r()})};r.detect=s(g),r.detectSeries=d(g),r.some=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(n){e(!1)})},r.any=r.some,r.every=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(n){e(!0)})},r.all=r.every,r.sortBy=function(n,t,e){r.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);var r=function(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0};e(null,a(t.sort(r),function(n){return n.value}))})},r.auto=function(n,t){t=t||function(){};var e=l(n),u=e.length;if(!u)return t();var a={},f=[],s=function(n){f.unshift(n)},p=function(n){for(var t=0;t<f.length;t+=1)if(f[t]===n)return void f.splice(t,1)},d=function(){u--,c(f.slice(0),function(n){n()})};s(function(){if(!u){var n=t;t=function(){},n(null,a)}}),c(e,function(e){var u=i(n[e])?n[e]:[n[e]],f=function(n){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1&&(u=u[0]),n){var i={};c(l(a),function(n){i[n]=a[n]}),i[e]=u,t(n,i),t=function(){}}else a[e]=u,r.setImmediate(d)},y=u.slice(0,Math.abs(u.length-1))||[],m=function(){return o(y,function(n,t){return n&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(e)};if(m())u[u.length-1](f,a);else{var v=function(){m()&&(p(v),u[u.length-1](f,a))};s(v)}})},r.retry=function(n,t,e){var u=5,i=[];"function"==typeof n&&(e=t,t=n,n=u),n=parseInt(n,10)||u;var c=function(u,c){for(var a=function(n,t){return function(e){n(function(n,r){e(!n||t,{err:n,result:r})},c)}};n;)i.push(a(t,!(n-=1)));r.series(i,function(n,t){t=t[t.length-1],(u||e)(t.err,t.result)})};return e?c():c},r.waterfall=function(n,t){if(t=t||function(){},!i(n)){var e=new Error("First argument to waterfall must be an array of functions");return t(e)}if(!n.length)return t();var u=function(n){return function(e){if(e)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),c=n.next();c?i.push(u(c)):i.push(t),r.setImmediate(function(){n.apply(null,i)})}}};u(r.iterator(n))()};var k=function(n,t,e){if(e=e||function(){},i(t))n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(l(t),function(n,e){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),r[n]=u,e(t)})},function(n){e(n,r)})}};r.parallel=function(n,t){k({map:r.map,each:r.each},n,t)},r.parallelLimit=function(n,t,e){k({map:m(t),each:f(t)},n,e)},r.series=function(n,t){if(t=t||function(){},i(n))r.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};r.eachSeries(l(n),function(t,r){n[t](function(n){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),e[t]=u,r(n)})},function(n){t(n,e)})}},r.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},r.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var A=function(n,t,e,r){var u=[];n(t,function(n,t){e(n,function(n,e){u=u.concat(e||[]),t(n)})},function(n){r(n,u)})};r.concat=s(A),r.concatSeries=d(A),r.whilst=function(n,t,e){n()?t(function(u){return u?e(u):void r.whilst(n,t,e)}):e()},r.doWhilst=function(n,t,e){n(function(u){if(u)return e(u);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?r.doWhilst(n,t,e):e()})},r.until=function(n,t,e){n()?e():t(function(u){return u?e(u):void r.until(n,t,e)})},r.doUntil=function(n,t,e){n(function(u){if(u)return e(u);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?e():r.doUntil(n,t,e)})},r.queue=function(t,e){function u(n,t,e,u){return n.started||(n.started=!0),i(t)||(t=[t]),0==t.length?r.setImmediate(function(){n.drain&&n.drain()}):void c(t,function(t){var i={data:t,callback:"function"==typeof u?u:null};e?n.tasks.unshift(i):n.tasks.push(i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),r.setImmediate(n.process)})}void 0===e&&(e=1);var a=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(n,t){u(o,n,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(n,t){u(o,n,!0,t)},process:function(){if(!o.paused&&a<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),a+=1;var r=function(){a-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+a===0&&o.drain(),o.process()},u=n(r);t(e.data,u)}},length:function(){return o.tasks.length},running:function(){return a},idle:function(){return o.tasks.length+a===0},pause:function(){o.paused!==!0&&(o.paused=!0)},resume:function(){if(o.paused!==!1){o.paused=!1;for(var n=1;n<=o.concurrency;n++)r.setImmediate(o.process)}}};return o},r.priorityQueue=function(n,t){function e(n,t){return n.priority-t.priority}function u(n,t,e){for(var r=-1,u=n.length-1;u>r;){var i=r+(u-r+1>>>1);e(t,n[i])>=0?r=i:u=i-1}return r}function a(n,t,a,o){return n.started||(n.started=!0),i(t)||(t=[t]),0==t.length?r.setImmediate(function(){n.drain&&n.drain()}):void c(t,function(t){var i={data:t,priority:a,callback:"function"==typeof o?o:null};n.tasks.splice(u(n.tasks,i,e)+1,0,i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),r.setImmediate(n.process)})}var o=r.queue(n,t);return o.push=function(n,t,e){a(o,n,t,e)},delete o.unshift,o},r.cargo=function(n,t){var e=!1,u=[],o={tasks:u,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(n,e){i(n)||(n=[n]),c(n,function(n){u.push({data:n,callback:"function"==typeof e?e:null}),o.drained=!1,o.saturated&&u.length===t&&o.saturated()}),r.setImmediate(o.process)},process:function l(){if(!e){if(0===u.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var r="number"==typeof t?u.splice(0,t):u.splice(0,u.length),i=a(r,function(n){return n.data});o.empty&&o.empty(),e=!0,n(i,function(){e=!1;var n=arguments;c(r,function(t){t.callback&&t.callback.apply(null,n)}),l()})}},length:function(){return u.length},running:function(){return e}};return o};var x=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&0:console[n]&&c(e,function(t){0}))}]))}};r.log=x("log"),r.dir=x("dir"),r.memoize=function(n,t){var e={},u={};t=t||function(n){return n};var i=function(){var i=Array.prototype.slice.call(arguments),c=i.pop(),a=t.apply(null,i);a in e?r.nextTick(function(){c.apply(null,e[a])}):a in u?u[a].push(c):(u[a]=[c],n.apply(null,i.concat([function(){e[a]=arguments;var n=u[a];delete u[a];for(var t=0,r=n.length;r>t;t++)n[t].apply(null,arguments)}])))};return i.memo=e,i.unmemoized=n,i},r.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},r.times=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.map(u,t,e)},r.timesSeries=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.mapSeries(u,t,e)},r.seq=function(){var n=arguments;return function(){var t=this,e=Array.prototype.slice.call(arguments),u=e.pop();r.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){u.apply(t,[n].concat(e))})}},r.compose=function(){return r.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),u=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},u)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};r.applyEach=s(S),r.applyEachSeries=d(S),r.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof define&&define.amd?define([],function(){return r}):t.async=r}();


  }).call(this,require("Zbi7gb"))
},{"Zbi7gb":95}],207:[function(require,module,exports){
  var hawk={internals:{}};hawk.client={header:function(t,e,r){var n={field:"",artifacts:{}};if(!t||"string"!=typeof t&&"object"!=typeof t||!e||"string"!=typeof e||!r||"object"!=typeof r)return n.err="Invalid argument type",n;var a=r.timestamp||hawk.utils.now(r.localtimeOffsetMsec),i=r.credentials;if(!(i&&i.id&&i.key&&i.algorithm))return n.err="Invalid credentials object",n;if(-1===hawk.crypto.algorithms.indexOf(i.algorithm))return n.err="Unknown algorithm",n;"string"==typeof t&&(t=hawk.utils.parseUri(t));var o={ts:a,nonce:r.nonce||hawk.utils.randomString(6),method:e,resource:t.relative,host:t.hostname,port:t.port,hash:r.hash,ext:r.ext,app:r.app,dlg:r.dlg};n.artifacts=o,o.hash||!r.payload&&""!==r.payload||(o.hash=hawk.crypto.calculatePayloadHash(r.payload,i.algorithm,r.contentType));var s=hawk.crypto.calculateMac("header",i,o),h=null!==o.ext&&void 0!==o.ext&&""!==o.ext,c='Hawk id="'+i.id+'", ts="'+o.ts+'", nonce="'+o.nonce+(o.hash?'", hash="'+o.hash:"")+(h?'", ext="'+hawk.utils.escapeHeaderAttribute(o.ext):"")+'", mac="'+s+'"';return o.app&&(c+=', app="'+o.app+(o.dlg?'", dlg="'+o.dlg:"")+'"'),n.field=c,n},bewit:function(t,e){if(!t||"string"!=typeof t||!e||"object"!=typeof e||!e.ttlSec)return"";e.ext=null===e.ext||void 0===e.ext?"":e.ext;var r=hawk.utils.now(e.localtimeOffsetMsec),n=e.credentials;if(!(n&&n.id&&n.key&&n.algorithm))return"";if(-1===hawk.crypto.algorithms.indexOf(n.algorithm))return"";t=hawk.utils.parseUri(t);var a=r+e.ttlSec,i=hawk.crypto.calculateMac("bewit",n,{ts:a,nonce:"",method:"GET",resource:t.relative,host:t.hostname,port:t.port,ext:e.ext}),o=n.id+"\\"+a+"\\"+i+"\\"+e.ext;return hawk.utils.base64urlEncode(o)},authenticate:function(t,e,r,n){n=n||{};var a=function(e){return t.getResponseHeader?t.getResponseHeader(e):t.getHeader(e)},i=a("www-authenticate");if(i){var o=hawk.utils.parseAuthorizationHeader(i,["ts","tsm","error"]);if(!o)return!1;if(o.ts){var s=hawk.crypto.calculateTsMac(o.ts,e);if(s!==o.tsm)return!1;hawk.utils.setNtpOffset(o.ts-Math.floor((new Date).getTime()/1e3))}}var h=a("server-authorization");if(!h&&!n.required)return!0;var o=hawk.utils.parseAuthorizationHeader(h,["mac","ext","hash"]);if(!o)return!1;var c={ts:r.ts,nonce:r.nonce,method:r.method,resource:r.resource,host:r.host,port:r.port,hash:o.hash,ext:o.ext,app:r.app,dlg:r.dlg},l=hawk.crypto.calculateMac("response",e,c);if(l!==o.mac)return!1;if(!n.payload&&""!==n.payload)return!0;if(!o.hash)return!1;var u=hawk.crypto.calculatePayloadHash(n.payload,e.algorithm,a("content-type"));return u===o.hash},message:function(t,e,r,n){if(!t||"string"!=typeof t||!e||"number"!=typeof e||null===r||void 0===r||"string"!=typeof r||!n||"object"!=typeof n)return null;var a=n.timestamp||hawk.utils.now(n.localtimeOffsetMsec),i=n.credentials;if(!(i&&i.id&&i.key&&i.algorithm))return null;if(-1===hawk.crypto.algorithms.indexOf(i.algorithm))return null;var o={ts:a,nonce:n.nonce||hawk.utils.randomString(6),host:t,port:e,hash:hawk.crypto.calculatePayloadHash(r,i.algorithm)},s={id:i.id,ts:o.ts,nonce:o.nonce,hash:o.hash,mac:hawk.crypto.calculateMac("message",i,o)};return s},authenticateTimestamp:function(t,e,r){var n=hawk.crypto.calculateTsMac(t.ts,e);return n!==t.tsm?!1:(r!==!1&&hawk.utils.setNtpOffset(t.ts-Math.floor((new Date).getTime()/1e3)),!0)}},hawk.crypto={headerVersion:"1",algorithms:["sha1","sha256"],calculateMac:function(t,e,r){var n=hawk.crypto.generateNormalizedString(t,r),a=CryptoJS["Hmac"+e.algorithm.toUpperCase()](n,e.key);return a.toString(CryptoJS.enc.Base64)},generateNormalizedString:function(t,e){var r="hawk."+hawk.crypto.headerVersion+"."+t+"\n"+e.ts+"\n"+e.nonce+"\n"+(e.method||"").toUpperCase()+"\n"+(e.resource||"")+"\n"+e.host.toLowerCase()+"\n"+e.port+"\n"+(e.hash||"")+"\n";return e.ext&&(r+=e.ext.replace("\\","\\\\").replace("\n","\\n")),r+="\n",e.app&&(r+=e.app+"\n"+(e.dlg||"")+"\n"),r},calculatePayloadHash:function(t,e,r){var n=CryptoJS.algo[e.toUpperCase()].create();return n.update("hawk."+hawk.crypto.headerVersion+".payload\n"),n.update(hawk.utils.parseContentType(r)+"\n"),n.update(t),n.update("\n"),n.finalize().toString(CryptoJS.enc.Base64)},calculateTsMac:function(t,e){var r=CryptoJS["Hmac"+e.algorithm.toUpperCase()]("hawk."+hawk.crypto.headerVersion+".ts\n"+t+"\n",e.key);return r.toString(CryptoJS.enc.Base64)}},hawk.internals.LocalStorage=function(){this._cache={},this.length=0,this.getItem=function(t){return this._cache.hasOwnProperty(t)?String(this._cache[t]):null},this.setItem=function(t,e){this._cache[t]=String(e),this.length=Object.keys(this._cache).length},this.removeItem=function(t){delete this._cache[t],this.length=Object.keys(this._cache).length},this.clear=function(){this._cache={},this.length=0},this.key=function(t){return Object.keys(this._cache)[t||0]}},hawk.utils={storage:new hawk.internals.LocalStorage,setStorage:function(t){var e=hawk.utils.storage.getItem("hawk_ntp_offset");hawk.utils.storage=t,e&&hawk.utils.setNtpOffset(e)},setNtpOffset:function(t){try{hawk.utils.storage.setItem("hawk_ntp_offset",t)}catch(e){0,0}},getNtpOffset:function(){var t=hawk.utils.storage.getItem("hawk_ntp_offset");return t?parseInt(t,10):0},now:function(t){return Math.floor(((new Date).getTime()+(t||0))/1e3)+hawk.utils.getNtpOffset()},escapeHeaderAttribute:function(t){return t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},parseContentType:function(t){return t?t.split(";")[0].replace(/^\s+|\s+$/g,"").toLowerCase():""},parseAuthorizationHeader:function(t,e){if(!t)return null;var r=t.match(/^(\w+)(?:\s+(.*))?$/);if(!r)return null;var n=r[1];if("hawk"!==n.toLowerCase())return null;var a=r[2];if(!a)return null;var i={},o=a.replace(/(\w+)="([^"\\]*)"\s*(?:,\s*|$)/g,function(t,r,n){return-1===e.indexOf(r)||null===n.match(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~]+$/)||i.hasOwnProperty(r)?void 0:(i[r]=n,"")});return""!==o?null:i},randomString:function(t){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=e.length,n=[],a=0;t>a;++a)n[a]=e[Math.floor(Math.random()*r)];return n.join("")},parseUri:function(t){for(var e=["source","protocol","authority","userInfo","user","password","hostname","port","resource","relative","pathname","directory","file","query","fragment"],r=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?)(?:#(.*))?)/,n=t.match(r),a={},i=0,o=e.length;o>i;++i)a[e[i]]=n[i]||"";return""===a.port&&(a.port="http"===a.protocol.toLowerCase()?"80":"https"===a.protocol.toLowerCase()?"443":""),a},base64urlEncode:function(t){var e=CryptoJS.enc.Utf8.parse(t),r=CryptoJS.enc.Base64.stringify(e);return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}};var CryptoJS=CryptoJS||function(t,e){var r={},n=r.lib={},a=function(){},i=n.Base={extend:function(t){a.prototype=this;var e=new a;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=i.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var a=0;t>a;a++)e[n+a>>>2]|=(r[a>>>2]>>>24-8*(a%4)&255)<<24-8*((n+a)%4);else if(65535<r.length)for(a=0;t>a;a+=4)e[n+a>>>2]=r[a>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-8*(r%4),e.length=t.ceil(r/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],n=0;e>n;n+=4)r.push(4294967296*t.random()|0);return new o.init(r,e)}}),s=r.enc={},h=s.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;t>n;n++){var a=e[n>>>2]>>>24-8*(n%4)&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-4*(n%8);return new o.init(r,e/2)}},c=s.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;t>n;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-8*(n%4)&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-8*(n%4);return new o.init(r,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},u=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,a=r.sigBytes,i=this.blockSize,s=a/(4*i),s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0);if(e=s*i,a=t.min(4*e,a),e){for(var h=0;e>h;h+=i)this._doProcessBlock(n,h);h=n.splice(0,e),r.sigBytes-=a}return new o.init(h,a)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=u.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new f.HMAC.init(t,r).finalize(e)}}});var f=r.algo={};return r}(Math);!function(){var t=CryptoJS,e=t.lib,r=e.WordArray,n=e.Hasher,a=[],e=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],h=r[4],c=0;80>c;c++){if(16>c)a[c]=0|t[e+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}l=(n<<5|n>>>27)+h+a[c],l=20>c?l+((i&o|~i&s)+1518500249):40>c?l+((i^o^s)+1859775393):60>c?l+((i&o|i&s|o&s)-1894007588):l+((i^o^s)-899497514),h=s,s=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+h|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),e[(n+64>>>9<<4)+15]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(e),t.HmacSHA1=n._createHmacHelper(e)}(),function(t){for(var e=CryptoJS,r=e.lib,n=r.WordArray,a=r.Hasher,r=e.algo,i=[],o=[],s=function(t){return 4294967296*(t-(0|t))|0},h=2,c=0;64>c;){var l;t:{l=h;for(var u=t.sqrt(l),f=2;u>=f;f++)if(!(l%f)){l=!1;break t}l=!0}l&&(8>c&&(i[c]=s(t.pow(h,.5))),o[c]=s(t.pow(h,1/3)),c++),h++}var p=[],r=r.SHA256=a.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],a=r[1],i=r[2],s=r[3],h=r[4],c=r[5],l=r[6],u=r[7],f=0;64>f;f++){if(16>f)p[f]=0|t[e+f];else{var d=p[f-15],g=p[f-2];p[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[f-16]}d=u+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&c^~h&l)+o[f]+p[f],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&a^n&i^a&i),u=l,l=c,c=h,h=s+d|0,s=i,i=a,a=n,n=d+g|0}r[0]=r[0]+n|0,r[1]=r[1]+a|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+h|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+u|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;return r[a>>>5]|=128<<24-a%32,r[(a+64>>>9<<4)+14]=t.floor(n/4294967296),r[(a+64>>>9<<4)+15]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=a._createHelper(r),e.HmacSHA256=a._createHmacHelper(r)}(Math),function(){var t=CryptoJS,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,r){t=this._hasher=new t.init,"string"==typeof r&&(r=e.parse(r));var n=t.blockSize,a=4*n;r.sigBytes>a&&(r=t.finalize(r)),r.clamp();for(var i=this._oKey=r.clone(),o=this._iKey=r.clone(),s=i.words,h=o.words,c=0;n>c;c++)s[c]^=1549556828,h[c]^=909522486;i.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=CryptoJS,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var a=0;r>a;a+=3)for(var i=(e[a>>>2]>>>24-8*(a%4)&255)<<16|(e[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|e[a+2>>>2]>>>24-8*((a+2)%4)&255,o=0;4>o&&r>a+.75*o;o++)t.push(n.charAt(i>>>6*(3-o)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var r=t.length,n=this._map,a=n.charAt(64);a&&(a=t.indexOf(a),-1!=a&&(r=a));for(var a=[],i=0,o=0;r>o;o++)if(o%4){var s=n.indexOf(t.charAt(o-1))<<2*(o%4),h=n.indexOf(t.charAt(o))>>>6-2*(o%4);a[i>>>2]|=(s|h)<<24-8*(i%4),i++}return e.create(a,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),hawk.crypto.internals=CryptoJS,"undefined"!=typeof module&&module.exports&&(module.exports=hawk);


},{}],208:[function(require,module,exports){
  var parser=require("./parser"),signer=require("./signer"),verify=require("./verify"),util=require("./util");module.exports={parse:parser.parseRequest,parseRequest:parser.parseRequest,sign:signer.signRequest,signRequest:signer.signRequest,sshKeyToPEM:util.sshKeyToPEM,sshKeyFingerprint:util.fingerprint,pemToRsaSSHKey:util.pemToRsaSSHKey,verify:verify.verifySignature,verifySignature:verify.verifySignature};


},{"./parser":209,"./signer":210,"./util":211,"./verify":212}],209:[function(require,module,exports){
  function HttpSignatureError(r,a){Error.captureStackTrace&&Error.captureStackTrace(this,a||HttpSignatureError),this.message=r,this.name=a.name}function ExpiredRequestError(r){HttpSignatureError.call(this,r,ExpiredRequestError)}function InvalidHeaderError(r){HttpSignatureError.call(this,r,InvalidHeaderError)}function InvalidParamsError(r){HttpSignatureError.call(this,r,InvalidParamsError)}function MissingHeaderError(r){HttpSignatureError.call(this,r,MissingHeaderError)}var assert=require("assert-plus"),util=require("util"),Algorithms={"rsa-sha1":!0,"rsa-sha256":!0,"rsa-sha512":!0,"dsa-sha1":!0,"hmac-sha1":!0,"hmac-sha256":!0,"hmac-sha512":!0},State={New:0,Params:1},ParamsState={Name:0,Quote:1,Value:2,Comma:3};util.inherits(HttpSignatureError,Error),util.inherits(ExpiredRequestError,HttpSignatureError),util.inherits(InvalidHeaderError,HttpSignatureError),util.inherits(InvalidParamsError,HttpSignatureError),util.inherits(MissingHeaderError,HttpSignatureError),module.exports={parseRequest:function(r,a){if(assert.object(r,"request"),assert.object(r.headers,"request.headers"),void 0===a&&(a={}),void 0===a.headers&&(a.headers=[r.headers["x-date"]?"x-date":"date"]),assert.object(a,"options"),assert.arrayOfString(a.headers,"options.headers"),assert.optionalNumber(a.clockSkew,"options.clockSkew"),!r.headers.authorization)throw new MissingHeaderError("no authorization header present in the request");a.clockSkew=a.clockSkew||300;var e=0,t=State.New,s=ParamsState.Name,i="",o="",n={scheme:"",params:{},signingString:"",get algorithm(){return this.params.algorithm.toUpperCase()},get keyId(){return this.params.keyId}},h=r.headers.authorization;for(e=0;e<h.length;e++){var d=h.charAt(e);switch(Number(t)){case State.New:" "!==d?n.scheme+=d:t=State.Params;break;case State.Params:switch(Number(s)){case ParamsState.Name:var m=d.charCodeAt(0);if(m>=65&&90>=m||m>=97&&122>=m)i+=d;else{if("="!==d)throw new InvalidHeaderError("bad param format");if(0===i.length)throw new InvalidHeaderError("bad param format");s=ParamsState.Quote}break;case ParamsState.Quote:if('"'!==d)throw new InvalidHeaderError("bad param format");o="",s=ParamsState.Value;break;case ParamsState.Value:'"'===d?(n.params[i]=o,s=ParamsState.Comma):o+=d;break;case ParamsState.Comma:if(","!==d)throw new InvalidHeaderError("bad param format");i="",s=ParamsState.Name;break;default:throw new Error("Invalid substate")}break;default:throw new Error("Invalid substate")}}if(n.params.headers&&""!==n.params.headers?n.params.headers=n.params.headers.split(" "):r.headers["x-date"]?n.params.headers=["x-date"]:n.params.headers=["date"],!n.scheme||"Signature"!==n.scheme)throw new InvalidHeaderError('scheme was not "Signature"');if(!n.params.keyId)throw new InvalidHeaderError("keyId was not specified");if(!n.params.algorithm)throw new InvalidHeaderError("algorithm was not specified");if(!n.params.signature)throw new InvalidHeaderError("signature was not specified");if(n.params.algorithm=n.params.algorithm.toLowerCase(),!Algorithms[n.params.algorithm])throw new InvalidParamsError(n.params.algorithm+" is not supported");for(e=0;e<n.params.headers.length;e++){var l=n.params.headers[e].toLowerCase();if(n.params.headers[e]=l,"request-line"!==l){var u=r.headers[l];if(!u)throw new MissingHeaderError(l+" was not in the request");n.signingString+=l+": "+u}else n.signingString+=r.method+" "+r.url+" HTTP/"+r.httpVersion;e+1<n.params.headers.length&&(n.signingString+="\n")}var p;if(r.headers.date||r.headers["x-date"]){p=r.headers["x-date"]?new Date(r.headers["x-date"]):new Date(r.headers.date);var c=new Date,g=Math.abs(c.getTime()-p.getTime());if(g>1e3*a.clockSkew)throw new ExpiredRequestError("clock skew of "+g/1e3+"s was greater than "+a.clockSkew+"s")}if(a.headers.forEach(function(r){if(n.params.headers.indexOf(r)<0)throw new MissingHeaderError(r+" was not a signed header")}),a.algorithms&&-1===a.algorithms.indexOf(n.params.algorithm))throw new InvalidParamsError(n.params.algorithm+" is not a supported algorithm");return n}};


},{"assert-plus":219,"util":109}],210:[function(require,module,exports){
  function MissingHeaderError(r){this.name="MissingHeaderError",this.message=r,this.stack=(new Error).stack}function InvalidAlgorithmError(r){this.name="InvalidAlgorithmError",this.message=r,this.stack=(new Error).stack}function _pad(r){return parseInt(r,10)<10&&(r="0"+r),r}function _rfc1123(){var r=new Date,e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t[r.getUTCDay()]+", "+_pad(r.getUTCDate())+" "+e[r.getUTCMonth()]+" "+r.getUTCFullYear()+" "+_pad(r.getUTCHours())+":"+_pad(r.getUTCMinutes())+":"+_pad(r.getUTCSeconds())+" GMT"}var assert=require("assert-plus"),crypto=require("crypto"),http=require("http"),sprintf=require("util").format,Algorithms={"rsa-sha1":!0,"rsa-sha256":!0,"rsa-sha512":!0,"dsa-sha1":!0,"hmac-sha1":!0,"hmac-sha256":!0,"hmac-sha512":!0},Authorization='Signature keyId="%s",algorithm="%s",headers="%s",signature="%s"';MissingHeaderError.prototype=new Error,InvalidAlgorithmError.prototype=new Error,module.exports={signRequest:function(r,e){if(assert.object(r,"request"),assert.object(e,"options"),assert.optionalString(e.algorithm,"options.algorithm"),assert.string(e.keyId,"options.keyId"),assert.optionalArrayOfString(e.headers,"options.headers"),assert.optionalString(e.httpVersion,"options.httpVersion"),r.getHeader("Date")||r.setHeader("Date",_rfc1123()),e.headers||(e.headers=["date"]),e.algorithm||(e.algorithm="rsa-sha256"),e.httpVersion||(e.httpVersion="1.1"),e.algorithm=e.algorithm.toLowerCase(),!Algorithms[e.algorithm])throw new InvalidAlgorithmError(e.algorithm+" is not supported");var t,a="";for(t=0;t<e.headers.length;t++){if("string"!=typeof e.headers[t])throw new TypeError("options.headers must be an array of Strings");var s=e.headers[t].toLowerCase();if("request-line"!==s){var o=r.getHeader(s);if(!o)throw new MissingHeaderError(s+" was not in the request");a+=s+": "+o}else a+=r.method+" "+r.path+" HTTP/"+e.httpVersion;t+1<e.headers.length&&(a+="\n")}var i,n=e.algorithm.match(/(hmac|rsa)-(\w+)/);if("hmac"===n[1]){var h=crypto.createHmac(n[2].toUpperCase(),e.key);h.update(a),i=h.digest("base64")}else{var g=crypto.createSign(e.algorithm.toUpperCase());g.update(a),i=g.sign(e.key,"base64")}return r.setHeader("Authorization",sprintf(Authorization,e.keyId,e.algorithm,e.headers.join(" "),i)),!0}};


},{"assert-plus":219,"crypto":82,"http":88,"util":109}],211:[function(require,module,exports){
  (function (Buffer){
    function readNext(e,t){var r=ctype.ruint32(e,"big",t);t+=4;var n=t+r;return{data:e.slice(t,n),offset:n}}function writeInt(e,t){e.writeByte(2),e.writeLength(t.length);for(var r=0;r<t.length;r++)e.writeByte(t[r]);return e}function rsaToPEM(e){var t,r,n,a,s,o,f,i="",u=0;try{if(t=new Buffer(e.split(" ")[1],"base64"),f=readNext(t,u),o=f.data.toString(),u=f.offset,"ssh-rsa"!==o)throw new Error("Invalid ssh key type: "+o);f=readNext(t,u),n=f.data,u=f.offset,f=readNext(t,u),s=f.data}catch(d){throw new Error("Invalid ssh key: "+e)}for(r=new asn1.BerWriter,r.startSequence(),r.startSequence(),r.writeOID("1.2.840.113549.1.1.1"),r.writeNull(),r.endSequence(),r.startSequence(3),r.writeByte(0),r.startSequence(),writeInt(r,s),writeInt(r,n),r.endSequence(),r.endSequence(),r.endSequence(),f=r.buffer.toString("base64"),a=0;a<f.length;a++)a%64===0&&(i+="\n"),i+=f.charAt(a);return/\\n$/.test(i)||(i+="\n"),"-----BEGIN PUBLIC KEY-----"+i+"-----END PUBLIC KEY-----\n"}function dsaToPEM(e){var t,r,n,a,s,o,f,i,u=0,d="";try{if(t=new Buffer(e.split(" ")[1],"base64"),r=readNext(t,u),a=r.data.toString(),u=r.offset,!/^ssh-ds[as].*/.test(a))throw new Error("Invalid ssh key type: "+a);r=readNext(t,u),s=r.data,u=r.offset,r=readNext(t,u),o=r.data,u=r.offset,r=readNext(t,u),f=r.data,u=r.offset,r=readNext(t,u),i=r.data}catch(c){throw 0,new Error("Invalid ssh key: "+e)}n=new asn1.BerWriter,n.startSequence(),n.startSequence(),n.writeOID("1.2.840.10040.4.1"),n.startSequence(),writeInt(n,s),writeInt(n,o),writeInt(n,f),n.endSequence(),n.endSequence(),n.startSequence(3),n.writeByte(0),writeInt(n,i),n.endSequence(),n.endSequence(),r=n.buffer.toString("base64");for(var h=0;h<r.length;h++)h%64===0&&(d+="\n"),d+=r.charAt(h);return/\\n$/.test(d)||(d+="\n"),"-----BEGIN PUBLIC KEY-----"+d+"-----END PUBLIC KEY-----\n"}var assert=require("assert-plus"),crypto=require("crypto"),asn1=require("asn1"),ctype=require("ctype");module.exports={sshKeyToPEM:function(e){if(assert.string(e,"ssh_key"),/^ssh-rsa.*/.test(e))return rsaToPEM(e);if(/^ssh-ds[as].*/.test(e))return dsaToPEM(e);throw new Error("Only RSA and DSA public keys are allowed")},fingerprint:function(e){assert.string(e,"ssh_key");var t=e.split(" ");if(!t||!t.length||t.length<2)throw new Error("invalid ssh key");var r=new Buffer(t[1],"base64"),n=crypto.createHash("md5");n.update(r);for(var a=n.digest("hex"),s="",o=0;o<a.length;o++)o&&o%2===0&&(s+=":"),s+=a[o];return s},pemToRsaSSHKey:function(e,t){assert.equal("string",typeof e,"typeof pem");var r=e.split("\n").slice(1,-2).join(""),n=new Buffer(r,"base64"),a=new asn1.BerReader(n);a.readSequence(),a.readSequence();var s=a.readOID();assert.equal(s,"1.2.840.113549.1.1.1","pem not in RSA format"),a.readByte(),a.readByte(),a.readSequence(3),a.readByte(),a.readSequence(),assert.equal(a.peek(),asn1.Ber.Integer,"modulus not an integer"),a._offset=a.readLength(a.offset+1);var o=a._buf.slice(a.offset,a.offset+a.length);a._offset+=a.length,assert.equal(a.peek(),asn1.Ber.Integer,"exponent not an integer"),a._offset=a.readLength(a.offset+1);var f=a._buf.slice(a.offset,a.offset+a.length);a._offset+=a.length;var i=new Buffer("ssh-rsa"),u=new Buffer(4+i.length+4+o.length+4+f.length),d=0;u.writeUInt32BE(i.length,d),d+=4,i.copy(u,d),d+=i.length,u.writeUInt32BE(f.length,d),d+=4,f.copy(u,d),d+=f.length,u.writeUInt32BE(o.length,d),d+=4,o.copy(u,d),d+=o.length;var c=i.toString()+" "+u.toString("base64")+" "+(t||"");return c}};


  }).call(this,require("buffer").Buffer)
},{"asn1":218,"assert-plus":219,"buffer":78,"crypto":82,"ctype":222}],212:[function(require,module,exports){
  var assert=require("assert-plus"),crypto=require("crypto");module.exports={verifySignature:function(r,e){assert.object(r,"parsedSignature"),assert.string(e,"key");var t=r.algorithm.match(/(HMAC|RSA|DSA)-(\w+)/);if(!t||3!==t.length)throw new TypeError("parsedSignature: unsupported algorithm "+r.algorithm);if("HMAC"===t[1]){var a=crypto.createHmac(t[2].toUpperCase(),e);return a.update(r.signingString),a.digest("base64")===r.params.signature}var i=crypto.createVerify(t[0]);return i.update(r.signingString),i.verify(e,r.params.signature,"base64")}};


},{"assert-plus":219,"crypto":82}],213:[function(require,module,exports){
  module.exports={newInvalidAsn1Error:function(r){var n=new Error;return n.name="InvalidAsn1Error",n.message=r||"",n}};


},{}],214:[function(require,module,exports){
  var errors=require("./errors"),types=require("./types"),Reader=require("./reader"),Writer=require("./writer");module.exports={Reader:Reader,Writer:Writer};for(var t in types)types.hasOwnProperty(t)&&(module.exports[t]=types[t]);for(var e in errors)errors.hasOwnProperty(e)&&(module.exports[e]=errors[e]);


},{"./errors":213,"./reader":215,"./types":216,"./writer":217}],215:[function(require,module,exports){
  (function (Buffer){
    function Reader(t){if(!t||!Buffer.isBuffer(t))throw new TypeError("data must be a node Buffer");this._buf=t,this._size=t.length,this._len=0,this._offset=0;var e=this;this.__defineGetter__("length",function(){return e._len}),this.__defineGetter__("offset",function(){return e._offset}),this.__defineGetter__("remain",function(){return e._size-e._offset}),this.__defineGetter__("buffer",function(){return e._buf.slice(e._offset)})}var assert=require("assert"),ASN1=require("./types"),errors=require("./errors"),newInvalidAsn1Error=errors.newInvalidAsn1Error;Reader.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=255&this._buf[this._offset];return t||(this._offset+=1),e},Reader.prototype.peek=function(){return this.readByte(!0)},Reader.prototype.readLength=function(t){if(void 0===t&&(t=this._offset),t>=this._size)return null;var e=255&this._buf[t++];if(null===e)return null;if(128==(128&e)){if(e&=127,0==e)throw newInvalidAsn1Error("Indefinite length not supported");if(e>4)throw newInvalidAsn1Error("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;e>r;r++)this._len=(this._len<<8)+(255&this._buf[t++])}else this._len=e;return t},Reader.prototype.readSequence=function(t){var e=this.peek();if(null===e)return null;if(void 0!==t&&t!==e)throw newInvalidAsn1Error("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,e)},Reader.prototype.readInt=function(){return this._readTag(ASN1.Integer)},Reader.prototype.readBoolean=function(){return 0===this._readTag(ASN1.Boolean)?!1:!0},Reader.prototype.readEnumeration=function(){return this._readTag(ASN1.Enumeration)},Reader.prototype.readString=function(t,e){t||(t=ASN1.OctetString);var r=this.peek();if(null===r)return null;if(r!==t)throw newInvalidAsn1Error("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return"";var i=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?i:i.toString("utf8")},Reader.prototype.readOID=function(t){t||(t=ASN1.OID);var e=this.peek();if(null===e)return null;if(e!==t)throw newInvalidAsn1Error("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>this._size-r)return null;this._offset=r;for(var n=[],i=0,s=0;s<this.length;s++){var o=255&this._buf[this._offset++];i<<=7,i+=127&o,0==(128&o)&&(n.push(i),i=0)}return i=n.shift(),n.unshift(i%40),n.unshift(i/40>>0),n.join(".")},Reader.prototype._readTag=function(t){assert.ok(void 0!==t);var e=this.peek();if(null===e)return null;if(e!==t)throw newInvalidAsn1Error("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw newInvalidAsn1Error("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;var n=this._buf[this._offset++],i=0;i=127&n;for(var s=1;s<this.length;s++)i<<=8,i|=255&this._buf[this._offset++];return 128==(128&n)&&(i=-i),i},module.exports=Reader;


  }).call(this,require("buffer").Buffer)
},{"./errors":213,"./types":216,"assert":64,"buffer":78}],216:[function(require,module,exports){
  module.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128};


},{}],217:[function(require,module,exports){
  (function (Buffer){
    function merge(t,e){assert.ok(t),assert.equal(typeof t,"object"),assert.ok(e),assert.equal(typeof e,"object");var r=Object.getOwnPropertyNames(t);return r.forEach(function(r){if(!e[r]){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,s)}}),e}function Writer(t){t=merge(DEFAULT_OPTS,t||{}),this._buf=new Buffer(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[];var e=this;this.__defineGetter__("buffer",function(){if(e._seq.length)throw new InvalidAsn1Error(e._seq.length+" unended sequence(s)");return e._buf.slice(0,e._offset)})}var assert=require("assert"),ASN1=require("./types"),errors=require("./errors"),newInvalidAsn1Error=errors.newInvalidAsn1Error,DEFAULT_OPTS={size:1024,growthFactor:8};Writer.prototype.writeByte=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t},Writer.prototype.writeInt=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");"number"!=typeof e&&(e=ASN1.Integer);for(var r=4;(0===(4286578688&t)||4286578688===(4286578688&t))&&r>1;)r--,t<<=8;if(r>4)throw new InvalidAsn1Error("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=e,this._buf[this._offset++]=r;r-->0;)this._buf[this._offset++]=(4278190080&t)>>24,t<<=8},Writer.prototype.writeNull=function(){this.writeByte(ASN1.Null),this.writeByte(0)},Writer.prototype.writeEnumeration=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");return"number"!=typeof e&&(e=ASN1.Enumeration),this.writeInt(t,e)},Writer.prototype.writeBoolean=function(t,e){if("boolean"!=typeof t)throw new TypeError("argument must be a Boolean");"number"!=typeof e&&(e=ASN1.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0},Writer.prototype.writeString=function(t,e){if("string"!=typeof t)throw new TypeError("argument must be a string (was: "+typeof t+")");"number"!=typeof e&&(e=ASN1.OctetString);var r=Buffer.byteLength(t);this.writeByte(e),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)},Writer.prototype.writeBuffer=function(t,e){if("number"!=typeof e)throw new TypeError("tag must be a number");if(!Buffer.isBuffer(t))throw new TypeError("argument must be a buffer");this.writeByte(e),this.writeLength(t.length),this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length},Writer.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach(function(t){e.writeString(t)})},Writer.prototype.writeOID=function(t,e){function r(t,e){128>e?t.push(e):16384>e?(t.push(e>>>7|128),t.push(127&e)):2097152>e?(t.push(e>>>14|128),t.push(255&(e>>>7|128)),t.push(127&e)):268435456>e?(t.push(e>>>21|128),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e)):(t.push(255&(e>>>28|128)),t.push(255&(e>>>21|128)),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e))}if("string"!=typeof t)throw new TypeError("argument must be a string");if("number"!=typeof e&&(e=ASN1.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");var s=t.split("."),i=[];i.push(40*parseInt(s[0],10)+parseInt(s[1],10)),s.slice(2).forEach(function(t){r(i,parseInt(t,10))});var f=this;this._ensure(2+i.length),this.writeByte(e),this.writeLength(i.length),i.forEach(function(t){f.writeByte(t)})},Writer.prototype.writeLength=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");if(this._ensure(4),127>=t)this._buf[this._offset++]=t;else if(255>=t)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(65535>=t)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else{if(!(16777215>=t))throw new InvalidAsn1ERror("Length too long (> 4 bytes)");this._shift(start,t,1),this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t}},Writer.prototype.startSequence=function(t){"number"!=typeof t&&(t=ASN1.Sequence|ASN1.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3},Writer.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,r=this._offset-e;if(127>=r)this._shift(e,r,-2),this._buf[t]=r;else if(255>=r)this._shift(e,r,-1),this._buf[t]=129,this._buf[t+1]=r;else if(65535>=r)this._buf[t]=130,this._buf[t+1]=r>>8,this._buf[t+2]=r;else{if(!(16777215>=r))throw new InvalidAsn1Error("Sequence too long");this._shift(e,r,1),this._buf[t]=131,this._buf[t+1]=r>>16,this._buf[t+2]=r>>8,this._buf[t+3]=r}},Writer.prototype._shift=function(t,e,r){assert.ok(void 0!==t),assert.ok(void 0!==e),assert.ok(r),this._buf.copy(this._buf,t+r,t,t+e),this._offset+=r},Writer.prototype._ensure=function(t){if(assert.ok(t),this._size-this._offset<t){var e=this._size*this._options.growthFactor;e-this._offset<t&&(e+=t);var r=new Buffer(e);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=e}},module.exports=Writer;


  }).call(this,require("buffer").Buffer)
},{"./errors":213,"./types":216,"assert":64,"buffer":78}],218:[function(require,module,exports){
  var Ber=require("./ber/index");module.exports={Ber:Ber,BerReader:Ber.Reader,BerWriter:Ber.Writer};


},{"./ber/index":214}],219:[function(require,module,exports){
  (function (process,Buffer){
    function capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)}function uncapitalize(e){return e.charAt(0).toLowerCase()+e.slice(1)}function _(){return util.format.apply(util,arguments)}function _assert(e,r,t,a){if(!NDEBUG){t=t||r,a=a||_assert.caller;var n=typeof e;if(n!==r)throw new assert.AssertionError({message:_(TYPE_REQUIRED,t,r),actual:n,expected:r,operator:"===",stackStartFunction:a})}}function _instanceof(e,r,t,a){if(!(NDEBUG||(t=t||r,a=a||_instanceof.caller,e instanceof r)))throw new assert.AssertionError({message:_(TYPE_REQUIRED,t,r.name),actual:_getClass(e),expected:r.name,operator:"instanceof",stackStartFunction:a})}function _getClass(e){return Object.prototype.toString.call(e).slice(8,-1)}function array(e,r,t){if(!NDEBUG){if(t=t||r,!Array.isArray(e))throw new assert.AssertionError({message:_(ARRAY_TYPE_REQUIRED,t,r),actual:typeof e,expected:"array",operator:"Array.isArray",stackStartFunction:array.caller});for(var a=0;a<e.length;a++)_assert(e[a],r,t,array)}}function bool(e,r){_assert(e,"boolean",r,bool)}function buffer(e,r){if(!Buffer.isBuffer(e))throw new assert.AssertionError({message:_(TYPE_REQUIRED,r||"","Buffer"),actual:typeof e,expected:"buffer",operator:"Buffer.isBuffer",stackStartFunction:buffer})}function func(e,r){_assert(e,"function",r)}function number(e,r){if(_assert(e,"number",r),!NDEBUG&&(isNaN(e)||!isFinite(e)))throw new assert.AssertionError({message:_(TYPE_REQUIRED,r,"number"),actual:e,expected:"number",operator:"isNaN",stackStartFunction:number})}function object(e,r){_assert(e,"object",r)}function stream(e,r){_instanceof(e,Stream,r)}function date(e,r){_instanceof(e,Date,r)}function regexp(e,r){_instanceof(e,RegExp,r)}function string(e,r){_assert(e,"string",r)}function uuid(e,r){if(string(e,r),!NDEBUG&&!UUID_REGEXP.test(e))throw new assert.AssertionError({message:_(TYPE_REQUIRED,r,"uuid"),actual:"string",expected:"uuid",operator:"test",stackStartFunction:uuid})}var assert=require("assert"),Stream=require("stream").Stream,util=require("util"),NDEBUG=process.env.NODE_NDEBUG||!1,UUID_REGEXP=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/,ARRAY_TYPE_REQUIRED="%s ([%s]) required",TYPE_REQUIRED="%s (%s) is required";module.exports={bool:bool,buffer:buffer,date:date,func:func,number:number,object:object,regexp:regexp,stream:stream,string:string,uuid:uuid},Object.keys(module.exports).forEach(function(e){if("buffer"!==e){var r="arrayOf"+capitalize(e);"bool"===e&&(e="boolean"),"func"===e&&(e="function"),module.exports[r]=function(r,t){array(r,e,t)}}}),Object.keys(module.exports).forEach(function(e){var r="optional"+capitalize(e),t=uncapitalize(e.replace("arrayOf",""));"bool"===t&&(t="boolean"),"func"===t&&(t="function"),-1!==e.indexOf("arrayOf")?module.exports[r]=function(e,r){NDEBUG||void 0===e||array(e,t,r)}:module.exports[r]=function(e,r){NDEBUG||void 0===e||_assert(e,t,r)}}),Object.keys(assert).forEach(function(e){return"AssertionError"===e?void(module.exports[e]=assert[e]):void(module.exports[e]=function(){NDEBUG||assert[e].apply(assert[e],arguments)})});


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"assert":64,"buffer":78,"stream":101,"util":109}],220:[function(require,module,exports){
  function ctfParseInteger(t,e){var r,n,i,o;if(r=t.name,!("signed"in t.integer))throw new Error("Malformed CTF JSON: integer missing signed value");if(!("length"in t.integer))throw new Error("Malformed CTF JSON: integer missing length value");if(n=t.integer.signed,i=t.integer.length,o=null,n&&1==i?o="int8_t":1==i?o="uint8_t":n&&2==i?o="int16_t":2==i?o="uint16_t":n&&4==i?o="int32_t":4==i?o="uint32_t":n&&8==i?o="int64_t":8==i&&(o="uint64_t"),null===o)throw new Error("Malformed CTF JSON: integer has unsupported length and sign - "+i+"/"+n);return r!=o?"char"==r?void ASSERT("int8_t"==o):void e.typedef(r,o):void 0}function ctfParseFloat(t,e){var r,n;if(r=t.name,!("length"in t["float"]))throw new Error("Malformed CTF JSON: float missing length value");if(n=t["float"].length,4!=n&&8!=n)throw new Error("Malformed CTF JSON: float has invalid length value");if(4==n){if("float"==r)return;e.typedef(r,"float")}else if(8==n){if("double"==r)return;e.typedef(r,"double")}}function ctfParseTypedef(t,e){var r,n,i;if(r=t.name,"string"!=typeof t.typedef)throw new Error("Malformed CTF JSON: typedef value in not a string");for(n=t.typedef,i=0;i<ctf_deftypes.length;i++)if(r==ctf_deftypes[i])return;e.typedef(r,n)}function ctfParseStruct(t,e){var r,n,i,o,a,f,s;if(f=[],!Array.isArray(t.struct))throw new Error("Malformed CTF JSON: struct value is not an array");for(i=0;i<t.struct.length;i++){if(o=t.struct[i],!("name"in o))throw new Error("Malformed CTF JSON: struct member missing name");if(!("type"in o))throw new Error("Malformed CTF JSON: struct member missing type");if("string"!=typeof o.name)throw new Error("Malformed CTF JSON: struct member name isn't a string");if("string"!=typeof o.type)throw new Error("Malformed CTF JSON: struct member type isn't a string");r=o.name,n=o.type,a=n.indexOf(" ["),-1!=a&&(n=n.substring(0,a)+n.substring(a+1,n.length)),s={},s[r]={type:n},f.push(s)}r=t.name,e.typedef(r,f)}function ctfParseEntry(t,e){var r,n;if(!("name"in t))throw new Error('Malformed CTF JSON: entry missing "name" section');for(r=0;r<ctf_entries.length;r++)ctf_entries[r]in t&&n++;if(0===n)throw new Error("Malformed CTF JSON: found no entries");if(n>=2)throw new Error("Malformed CTF JSON: found more than one entry");return"integer"in t?void ctfParseInteger(t,e):"float"in t?void ctfParseFloat(t,e):"typedef"in t?void ctfParseTypedef(t,e):"struct"in t?void ctfParseStruct(t,e):void ASSERT(!1,"shouldn't reach here")}function ctfParseJson(t,e){var r,n;if(ASSERT(t),ASSERT(e),!("metadata"in t))throw new Error("Invalid CTF JSON: missing metadata section");if(!("ctf2json_version"in t.metadata))throw new Error("Invalid CTF JSON: missing ctf2json_version");for(r=t.metadata.ctf2json_version,n=0;n<ctf_versions.length&&ctf_versions[n]!=r;n++);if(n==ctf_versions.length)throw new Error("Unsuported ctf2json_version: "+r);if(!("data"in t))throw new Error("Invalid CTF JSON: missing data section");if(!Array.isArray(t.data))throw new Error("Malformed CTF JSON: data section is not an array");for(n=0;n<t.data.length;n++)ctfParseEntry(t.data[n],e)}var mod_assert=require("assert"),ASSERT=mod_assert.ok,ctf_versions=["1.0"],ctf_entries=["integer","float","typedef","struct"],ctf_deftypes=["int8_t","uint8_t","int16_t","uint16_t","int32_t","uint32_t","float","double"];exports.ctfParseJson=ctfParseJson;


},{"assert":64}],221:[function(require,module,exports){
  function ruint8(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i>=r.length)throw new Error("Trying to read beyond buffer length");return r[i]}function rgint16(r,n,i){var o=0;return"big"==n?(o=r[i]<<8,o|=r[i+1]):(o=r[i],o|=r[i+1]<<8),o}function ruint16(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+1>=r.length)throw new Error("Trying to read beyond buffer length");return rgint16(r,n,i)}function rgint32(r,n,i){var o=0;return"big"==n?(o=r[i+1]<<16,o|=r[i+2]<<8,o|=r[i+3],o+=r[i]<<24>>>0):(o=r[i+2]<<16,o|=r[i+1]<<8,o|=r[i],o+=r[i+3]<<24>>>0),o}function ruint32(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return rgint32(r,n,i)}function rgint64(r,n,i){var o=new Array(2);return"big"==n?(o[0]=ruint32(r,n,i),o[1]=ruint32(r,n,i+4)):(o[0]=ruint32(r,n,i+4),o[1]=ruint32(r,n,i)),o}function ruint64(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+7>=r.length)throw new Error("Trying to read beyond buffer length");return rgint64(r,n,i)}function rsint8(r,n,i){var o;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i>=r.length)throw new Error("Trying to read beyond buffer length");return o=128&r[i],o?-1*(255-r[i]+1):r[i]}function rsint16(r,n,i){var o,e;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+1>=r.length)throw new Error("Trying to read beyond buffer length");return e=rgint16(r,n,i),o=32768&e,o?-1*(65535-e+1):e}function rsint32(r,n,i){var o,e;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return e=rgint32(r,n,i),o=2147483648&e,o?-1*(4294967295-e+1):e}function rsint64(r,n,i){var o,e;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return e=rgint64(r,n,i),(o=2147483648&e[0])?(e[0]=-1*(4294967295-e[0]),e[1]=-1*(4294967295-e[1]+1),mod_assert.ok(e[1]<=4294967296),-4294967296==e[1]&&(e[1]=0,e[0]--),e):e}function rfloat(r,n,i){var o,e,t,f,w=[],s=127,u=255;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return"big"==n?(w[0]=r[i],w[1]=r[i+1],w[2]=r[i+2],w[3]=r[i+3]):(w[3]=r[i],w[2]=r[i+1],w[1]=r[i+2],w[0]=r[i+3]),o=128&w[0],e=(127&w[0])<<1,e|=(128&w[1])>>>7,t=(127&w[1])<<16,t|=w[2]<<8,t|=w[3],o||e!=u||0!==t?o&&e==u&&0===t?Number.NEGATIVE_INFINITY:e==u&&0!==t?Number.NaN:0===e&&0===t?0:(e-=s,e==-s?(e++,f=0):f=1,f=(f+t*Math.pow(2,-23))*Math.pow(2,e),o&&(f*=-1),f):Number.POSITIVE_INFINITY}function rdouble(r,n,i){var o,e,t,f,w,s=[],u=1023,a=2047;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+7>=r.length)throw new Error("Trying to read beyond buffer length");return"big"==n?(s[0]=r[i],s[1]=r[i+1],s[2]=r[i+2],s[3]=r[i+3],s[4]=r[i+4],s[5]=r[i+5],s[6]=r[i+6],s[7]=r[i+7]):(s[7]=r[i],s[6]=r[i+1],s[5]=r[i+2],s[4]=r[i+3],s[3]=r[i+4],s[2]=r[i+5],s[1]=r[i+6],s[0]=r[i+7]),o=128&s[0],e=(127&s[0])<<4,e|=(240&s[1])>>>4,w=s[7],w|=s[6]<<8,w|=s[5]<<16,t=s[4],t|=s[3]<<8,t|=s[2]<<16,t|=(15&s[1])<<24,t*=Math.pow(2,24),t+=w,o||e!=a||0!==t?o&&e==a&&0===t?Number.NEGATIVE_INFINITY:e==a&&0!==t?Number.NaN:0===e&&0===t?0:(e-=u,e==-u?(e++,f=0):f=1,f=(f+t*Math.pow(2,-52))*Math.pow(2,e),o&&(f*=-1),f):Number.POSITIVE_INFINITY}function prepuint(r,n){if("number"!=typeof r)throw new(Error("cannot write a non-number as a number"));if(0>r)throw new Error("specified a negative value for writing an unsigned value");if(r>n)throw new Error("value is larger than maximum value for type");if(Math.floor(r)!==r)throw new Error("value has a fractional component");return r}function wuint8(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o>=i.length)throw new Error("Trying to read beyond buffer length");e=prepuint(r,255),i[o]=e}function wgint16(r,n,i,o){"big"==n?(i[o]=(65280&r)>>>8,i[o+1]=255&r):(i[o+1]=(65280&r)>>>8,i[o]=255&r)}function wuint16(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+1>=i.length)throw new Error("Trying to read beyond buffer length");e=prepuint(r,65535),wgint16(e,n,i,o)}function wgint32(r,n,i,o){"big"==n?(i[o]=(r-(16777215&r))/Math.pow(2,24),i[o+1]=r>>>16&255,i[o+2]=r>>>8&255,i[o+3]=255&r):(i[o+3]=(r-(16777215&r))/Math.pow(2,24),i[o+2]=r>>>16&255,i[o+1]=r>>>8&255,i[o]=255&r)}function wuint32(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+3>=i.length)throw new Error("Trying to read beyond buffer length");e=prepuint(r,4294967295),wgint32(e,n,i,o)}function wgint64(r,n,i,o){"big"==n?(wgint32(r[0],n,i,o),wgint32(r[1],n,i,o+4)):(wgint32(r[0],n,i,o+4),wgint32(r[1],n,i,o))}function wuint64(r,n,i,o){if(void 0===r)throw new Error("missing value");if(!(r instanceof Array))throw new Error("value must be an array");if(2!=r.length)throw new Error("value must be an array of length 2");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+7>=i.length)throw new Error("Trying to read beyond buffer length");prepuint(r[0],4294967295),prepuint(r[1],4294967295),wgint64(r,n,i,o)}function prepsint(r,n,i){if("number"!=typeof r)throw new(Error("cannot write a non-number as a number"));if(r>n)throw new Error("value larger than maximum allowed value");if(i>r)throw new Error("value smaller than minimum allowed value");if(Math.floor(r)!==r)throw new Error("value has a fractional component");return r}function wsint8(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o>=i.length)throw new Error("Trying to read beyond buffer length");e=prepsint(r,127,-128),e>=0?wuint8(e,n,i,o):wuint8(255+e+1,n,i,o)}function wsint16(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+1>=i.length)throw new Error("Trying to read beyond buffer length");e=prepsint(r,32767,-32768),e>=0?wgint16(e,n,i,o):wgint16(65535+e+1,n,i,o)}function wsint32(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+3>=i.length)throw new Error("Trying to read beyond buffer length");e=prepsint(r,2147483647,-2147483648),e>=0?wgint32(e,n,i,o):wgint32(4294967295+e+1,n,i,o)}function wsint64(r,n,i,o){var e,t,f=new Array(2);if(void 0===r)throw new Error("missing value");if(!(r instanceof Array))throw new Error("value must be an array");if(2!=r.length)throw new Error("value must be an array of length 2");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+7>=i.length)throw new Error("Trying to read beyond buffer length");if(e=r[0]*Number.POSITIVE_INFINITY==Number.POSITIVE_INFINITY,t=r[1]*Number.POSITIVE_INFINITY==Number.POSITIVE_INFINITY,0!=r[0]&&0!=r[1]&&e!=t)throw new Error("Both entries in the array must have the same sign");if(e)prepuint(r[0],2147483647),prepuint(r[1],4294967295);else if(prepsint(r[0],0,-2147483648),prepsint(r[1],0,-4294967295),-2147483648==r[0]&&0!=r[1])throw new Error("value smaller than minimum allowed value");r[0]<0||r[1]<0?(f[0]=4294967295-Math.abs(r[0]),f[1]=4294967296-Math.abs(r[1]),4294967296==f[1]&&(f[1]=0,f[0]++)):(f[0]=r[0],f[1]=r[1]),wgint64(f,n,i,o)}function log2(r){return Math.log(r)/Math.log(2)}function intexp(r){return Math.floor(log2(r))}function fracexp(r){return Math.floor(log2(r))}function wfloat(r,n,i,o){var e,t,f,w,s=[];if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+3>=i.length)throw new Error("Trying to read beyond buffer length");isNaN(r)?(e=0,t=255,f=23):r==Number.POSITIVE_INFINITY?(e=0,t=255,f=0):r==Number.NEGATIVE_INFINITY?(e=1,t=255,f=0):(0>r?(e=1,r=Math.abs(r)):e=0,w=1>r?fracexp(r):intexp(r),-127>=w?(t=0,f=r*Math.pow(2,149)&8388607):(t=127+w,f=r*Math.pow(2,23-w),f&=8388607)),s[0]=e<<7|(254&t)>>>1,s[1]=(1&t)<<7|(8323072&f)>>>16,s[2]=(65280&f)>>>8,s[3]=255&f,"big"==n?(i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2],i[o+3]=s[3]):(i[o]=s[3],i[o+1]=s[2],i[o+2]=s[1],i[o+3]=s[0])}function wdouble(r,n,i,o){var e,t,f,w,s=[];if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+7>=i.length)throw new Error("Trying to read beyond buffer length");isNaN(r)?(e=0,t=2047,f=23):r==Number.POSITIVE_INFINITY?(e=0,t=2047,f=0):r==Number.NEGATIVE_INFINITY?(e=1,t=2047,f=0):(0>r?(e=1,r=Math.abs(r)):e=0,w=1>r?fracexp(r):intexp(r),2.225073858507201e-308>=r||-1023>=w?(t=0,f=r*Math.pow(2,1023)*Math.pow(2,51),f%=Math.pow(2,52)):(w>1023&&(w=1023),t=1023+w,f=r*Math.pow(2,-w),f*=Math.pow(2,52),f%=Math.pow(2,52))),s[7]=255&f,s[6]=f>>>8&255,s[5]=f>>>16&255,f=(f-(16777215&f))/Math.pow(2,24),s[4]=255&f,s[3]=f>>>8&255,s[2]=f>>>16&255,s[1]=(15&t)<<4|f>>>24,s[0]=e<<7|(2032&t)>>>4,"big"==n?(i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2],i[o+3]=s[3],i[o+4]=s[4],i[o+5]=s[5],i[o+6]=s[6],i[o+7]=s[7]):(i[o+7]=s[0],i[o+6]=s[1],i[o+5]=s[2],i[o+4]=s[3],i[o+3]=s[4],i[o+2]=s[5],i[o+1]=s[6],i[o]=s[7])}var mod_assert=require("assert");exports.ruint8=ruint8,exports.ruint16=ruint16,exports.ruint32=ruint32,exports.ruint64=ruint64,exports.wuint8=wuint8,exports.wuint16=wuint16,exports.wuint32=wuint32,exports.wuint64=wuint64,exports.rsint8=rsint8,exports.rsint16=rsint16,exports.rsint32=rsint32,exports.rsint64=rsint64,exports.wsint8=wsint8,exports.wsint16=wsint16,exports.wsint32=wsint32,exports.wsint64=wsint64,exports.rfloat=rfloat,exports.rdouble=rdouble,exports.wfloat=wfloat,exports.wdouble=wdouble;


},{"assert":64}],222:[function(require,module,exports){
  (function (Buffer){
    function ctReadUint8(t,r,e){var i=mod_ctio.ruint8(r,t,e);return{value:i,size:1}}function ctReadUint16(t,r,e){var i=mod_ctio.ruint16(r,t,e);return{value:i,size:2}}function ctReadUint32(t,r,e){var i=mod_ctio.ruint32(r,t,e);return{value:i,size:4}}function ctReadUint64(t,r,e){var i=mod_ctio.ruint64(r,t,e);return{value:i,size:8}}function ctReadSint8(t,r,e){var i=mod_ctio.rsint8(r,t,e);return{value:i,size:1}}function ctReadSint16(t,r,e){var i=mod_ctio.rsint16(r,t,e);return{value:i,size:2}}function ctReadSint32(t,r,e){var i=mod_ctio.rsint32(r,t,e);return{value:i,size:4}}function ctReadSint64(t,r,e){var i=mod_ctio.rsint64(r,t,e);return{value:i,size:8}}function ctReadFloat(t,r,e){var i=mod_ctio.rfloat(r,t,e);return{value:i,size:4}}function ctReadDouble(t,r,e){var i=mod_ctio.rdouble(r,t,e);return{value:i,size:8}}function ctReadChar(t,r,e){var i=new Buffer(1);return i[0]=mod_ctio.ruint8(r,t,e),{value:i,size:1}}function ctReadCharArray(t,r,e,i){var n,o=new Buffer(t);for(n=0;t>n;n++)o[n]=mod_ctio.ruint8(e,r,i+n);return{value:o,size:t}}function ctWriteUint8(t,r,e,i){return mod_ctio.wuint8(t,r,e,i),1}function ctWriteUint16(t,r,e,i){return mod_ctio.wuint16(t,r,e,i),2}function ctWriteUint32(t,r,e,i){return mod_ctio.wuint32(t,r,e,i),4}function ctWriteUint64(t,r,e,i){return mod_ctio.wuint64(t,r,e,i),8}function ctWriteSint8(t,r,e,i){return mod_ctio.wsint8(t,r,e,i),1}function ctWriteSint16(t,r,e,i){return mod_ctio.wsint16(t,r,e,i),2}function ctWriteSint32(t,r,e,i){return mod_ctio.wsint32(t,r,e,i),4}function ctWriteSint64(t,r,e,i){return mod_ctio.wsint64(t,r,e,i),8}function ctWriteFloat(t,r,e,i){return mod_ctio.wfloat(t,r,e,i),4}function ctWriteDouble(t,r,e,i){return mod_ctio.wdouble(t,r,e,i),8}function ctWriteChar(t,r,e,i){if(!(t instanceof Buffer))throw new Error("Input must be a buffer");return mod_ctio.ruint8(t[0],r,e,i),1}function ctWriteCharArray(t,r,e,i,n){var o;if(!(t instanceof Buffer))throw new Error("Input must be a buffer");if(t.length>r)throw new Error("value length greater than array length");for(o=0;o<t.length&&r>o;o++)mod_ctio.wuint8(t[o],e,i,n+o);for(;r>o;o++)mod_ctio.wuint8(0,e,n+o);return r}function ctGetBasicTypes(){var t,r={};for(t in deftypes)r[t]=deftypes[t];return r}function ctParseType(t){var r,e,i,n;if("string"!=typeof t)throw new Error("type must be a Javascript string");if(e=t.lastIndexOf("]"),-1==e){if(-1!=t.lastIndexOf("["))throw new Error("found invalid type with '[' but no corresponding ']'");return{type:t}}if(r=t.lastIndexOf("["),-1==r)throw new Error("found invalid type with ']' but no corresponding '['");if(r>=e)throw new Error("malformed type, ']' appears before '['");return i=t.substring(0,r),n=t.substring(r+1,e),{type:i,len:n}}function ctCheckReq(t,r,e){var i,n,o,a,s,u={};if(!(t instanceof Array))throw new Error("definition is not an array");if(0===t.length)throw new Error("definition must have at least one element");for(i=0;i<t.length;i++){if(o=t[i],!(o instanceof Object))throw new Error("definition must be an array ofobjects");if(a=Object.keys(o),1!=a.length)throw new Error("definition entry must only have one key");if(a[0]in u)throw new Error("Specified name already specified: "+a[0]);if(!("type"in o[a[0]]))throw new Error("missing required type definition");for(s=ctParseType(o[a[0]].type);void 0!==s.len;){if(isNaN(parseInt(s.len,10))&&!(s.len in u))throw new Error("Given an array length without a matching type");s=ctParseType(s.type)}if(!(s.type in r))throw new Error("type not found or typdefed: "+s.type);if(void 0!==e)for(n=0;n<e.length;n++)if(!(e[n]in o[a[0]]))throw new Error("Missing required field: "+e[n]);u[a[0]]=!0}}function CTypeParser(t){if(!t)throw new Error("missing required argument");if(!("endian"in t))throw new Error("missing required endian value");if("big"!=t.endian&&"little"!=t.endian)throw new Error("Invalid endian type");if("char-type"in t&&"uint8"!=t["char-type"]&&"int8"!=t["char-type"])throw new Error("invalid option for char-type: "+t["char-type"]);this.endian=t.endian,this.types=ctGetBasicTypes(),"char-type"in t&&"uint8"==t["char-type"]&&(this.types["char"]=this.types.uint8_t),"char-type"in t&&"int8"==t["char-type"]&&(this.types["char"]=this.types.int8_t)}function ctResolveArray(t,r){for(var e="",i=ctParseType(t);void 0!==i.len;){if(isNaN(parseInt(i.len,10))){if("number"!=typeof r[i.len])throw new Error("cannot sawp in non-number for array value");e="["+r[i.len]+"]"+e}else e="["+i.len+"]"+e;i=ctParseType(i.type)}return e=i.type+e}function getValues(t){var r,e,i;for(e=[],r=0;r<t.length;r++)i=Object.keys(t[r])[0],mod_assert.ok("value"in t[r][i]),e.push(t[r][i].value);return e}function toAbs64(t){if(void 0===t)throw new Error("missing required arg: value");if(!Array.isArray(t))throw new Error("value must be an array");if(2!=t.length)throw new Error("value must be an array of length 2");if(t[0]>=1048576)throw new Error("value would become approximated");return t[0]*Math.pow(2,32)+t[1]}function toApprox64(t){if(void 0===t)throw new Error("missing required arg: value");if(!Array.isArray(t))throw new Error("value must be an array");if(2!=t.length)throw new Error("value must be an array of length 2");return Math.pow(2,32)*t[0]+t[1]}function parseCTF(t,r){var e=new CTypeParser(r);return mod_ctf.ctfParseJson(t,e),e}var mod_ctf=require("./ctf.js"),mod_ctio=require("./ctio.js"),mod_assert=require("assert"),deftypes={uint8_t:{read:ctReadUint8,write:ctWriteUint8},uint16_t:{read:ctReadUint16,write:ctWriteUint16},uint32_t:{read:ctReadUint32,write:ctWriteUint32},uint64_t:{read:ctReadUint64,write:ctWriteUint64},int8_t:{read:ctReadSint8,write:ctWriteSint8},int16_t:{read:ctReadSint16,write:ctWriteSint16},int32_t:{read:ctReadSint32,write:ctWriteSint32},int64_t:{read:ctReadSint64,write:ctWriteSint64},"float":{read:ctReadFloat,write:ctWriteFloat},"double":{read:ctReadDouble,write:ctWriteDouble},"char":{read:ctReadChar,write:ctWriteChar},"char[]":{read:ctReadCharArray,write:ctWriteCharArray}};CTypeParser.prototype.setEndian=function(t){if("big"!=t&&"little"!=t)throw new Error("invalid endian type, must be big or little");this.endian=t},CTypeParser.prototype.getEndian=function(){return this.endian},CTypeParser.prototype.typedef=function(t,r){var e;if(void 0===t)throw new(Error("missing required typedef argument: name"));if(void 0===r)throw new(Error("missing required typedef argument: value"));if("string"!=typeof t)throw new(Error("the name of a type must be a string"));if(e=ctParseType(t),void 0!==e.len)throw new Error("Cannot have an array in the typedef name");if(t in this.types)throw new Error("typedef name already present: "+t);if("string"!=typeof r&&!(r instanceof Array))throw new Error("typedef value must either be a string or struct");if("string"==typeof r){if(e=ctParseType(r),void 0!==e.len&&isNaN(parseInt(e.len,10)))throw new(Error("typedef value must use fixed size array when outside of a struct"));this.types[t]=r}else ctCheckReq(r,this.types),this.types[t]=r},CTypeParser.prototype.lstypes=function(){var t,r={};for(t in this.types)t in deftypes||(r[t]=this.types[t]);return r},CTypeParser.prototype.resolveTypedef=function(t,r,e,i,n){var o;if(mod_assert.ok(t in this.types),"string"==typeof this.types[t]){if(o=ctParseType(this.types[t]),"read"==r)return this.readEntry(o,e,i);if("write"==r)return this.writeEntry(n,o,e,i);throw new Error("invalid dispatch type to resolveTypedef")}if("read"==r)return this.readStruct(this.types[t],e,i);if("write"==r)return this.writeStruct(n,this.types[t],e,i);throw new Error("invalid dispatch type to resolveTypedef")},CTypeParser.prototype.readEntry=function(t,r,e){var i,n;if(void 0!==t.len){if(n=parseInt(t.len,10),isNaN(n))throw new Error("somehow got a non-numeric length");i="char"==t.type?this.types["char[]"].read(n,this.endian,r,e):this.readArray(t.type,n,r,e)}else i=t.type in deftypes?this.types[t.type].read(this.endian,r,e):this.resolveTypedef(t.type,"read",r,e);return i},CTypeParser.prototype.readArray=function(t,r,e,i){var n,o,a,s=i,u=new Array(r);for(a=ctParseType(t),n=0;r>n;n++)o=this.readEntry(a,e,i),i+=o.size,u[n]=o.value;return{value:u,size:i-s}},CTypeParser.prototype.readStruct=function(t,r,e){var i,n,o,a,s,u=e,c={};for(n=0;n<t.length;n++)s=Object.keys(t[n])[0],a=t[n][s],o=ctParseType(ctResolveArray(a.type,c)),"offset"in a&&(e=u+a.offset),i=this.readEntry(o,r,e),e+=i.size,c[s]=i.value;return{value:c,size:e-u}},CTypeParser.prototype.readData=function(t,r,e){if(void 0===t)throw new Error("missing definition for what we should beparsing");if(void 0===r)throw new Error("missing buffer for what we should be parsing");if(void 0===e)throw new Error("missing offset for what we should be parsing");return ctCheckReq(t,this.types),this.readStruct(t,r,e).value},CTypeParser.prototype.writeArray=function(t,r,e,i,n){var o,a,s=n;if(!(t instanceof Array))throw new Error("asked to write an array, but value is not an array");if(t.length!=e)throw new Error("asked to write array of length "+e+" but that does not match value length: "+t.length);for(a=ctParseType(r),o=0;e>o;o++)n+=this.writeEntry(t[o],a,i,n);return n-s},CTypeParser.prototype.writeEntry=function(t,r,e,i){var n,o;if(void 0!==r.len){if(n=parseInt(r.len,10),isNaN(n))throw new Error("somehow got a non-numeric length");o="char"==r.type?this.types["char[]"].write(t,n,this.endian,e,i):this.writeArray(t,r.type,n,e,i)}else o=r.type in deftypes?this.types[r.type].write(t,this.endian,e,i):this.resolveTypedef(r.type,"write",e,i,t);return o},CTypeParser.prototype.writeStruct=function(t,r,e,i){var n,o,a,s,u=i,c={};for(n=0;n<r.length;n++)s=Object.keys(r[n])[0],o=r[n][s],a=ctParseType(ctResolveArray(o.type,c)),"offset"in o&&(i=u+o.offset),i+=this.writeEntry(t[n],a,e,i),c[s]=t[n];return i},CTypeParser.prototype.writeData=function(t,r,e,i){var n;if(void 0===t)throw new Error("missing definition for what we should beparsing");if(void 0===r)throw new Error("missing buffer for what we should be parsing");if(void 0===e)throw new Error("missing offset for what we should be parsing");if(n=null!=i&&void 0!=i){if(!Array.isArray(i))throw new Error("missing values for writing");ctCheckReq(t,this.types)}else ctCheckReq(t,this.types,["value"]);this.writeStruct(n?i:getValues(t),t,r,e)},exports.Parser=CTypeParser,exports.toAbs64=toAbs64,exports.toApprox64=toApprox64,exports.parseCTF=parseCTF,exports.ruint8=mod_ctio.ruint8,exports.ruint16=mod_ctio.ruint16,exports.ruint32=mod_ctio.ruint32,exports.ruint64=mod_ctio.ruint64,exports.wuint8=mod_ctio.wuint8,exports.wuint16=mod_ctio.wuint16,exports.wuint32=mod_ctio.wuint32,exports.wuint64=mod_ctio.wuint64,exports.rsint8=mod_ctio.rsint8,exports.rsint16=mod_ctio.rsint16,exports.rsint32=mod_ctio.rsint32,exports.rsint64=mod_ctio.rsint64,exports.wsint8=mod_ctio.wsint8,exports.wsint16=mod_ctio.wsint16,exports.wsint32=mod_ctio.wsint32,exports.wsint64=mod_ctio.wsint64,exports.rfloat=mod_ctio.rfloat,exports.rdouble=mod_ctio.rdouble,exports.wfloat=mod_ctio.wfloat,exports.wdouble=mod_ctio.wdouble;


  }).call(this,require("buffer").Buffer)
},{"./ctf.js":220,"./ctio.js":221,"assert":64,"buffer":78}],223:[function(require,module,exports){
  function isStream(e){return e instanceof stream.Stream}function isReadable(e){return isStream(e)&&"function"==typeof e._read&&"object"==typeof e._readableState}function isWritable(e){return isStream(e)&&"function"==typeof e._write&&"object"==typeof e._writableState}function isDuplex(e){return isReadable(e)&&isWritable(e)}var stream=require("stream");module.exports=isStream,module.exports.isReadable=isReadable,module.exports.isWritable=isWritable,module.exports.isDuplex=isDuplex;


},{"stream":101}],224:[function(require,module,exports){
  function stringify(i,r,e,n){return JSON.stringify(i,serializer(r,n),e)}function serializer(i,r){var e=[],n=[];return null==r&&(r=function(i,r){return e[0]===r?"[Circular ~]":"[Circular ~."+n.slice(0,e.indexOf(r)).join(".")+"]"}),function(l,s){if(e.length>0){var t=e.indexOf(this);~t?e.splice(t+1):e.push(this),~t?n.splice(t,1/0,l):n.push(l),~e.indexOf(s)&&(s=r.call(this,l,s))}else e.push(s);return null==i?s:i.call(this,l,s)}}exports=module.exports=stringify,exports.getSerialize=serializer;


},{}],225:[function(require,module,exports){
  var db=require("mime-db");exports.types=Object.create(null),exports.extensions=Object.create(null),Object.keys(db).forEach(function(e){var t=db[e],r=t.extensions;r&&r.length&&(exports.extensions[e]=r,r.forEach(function(t){exports.types[t]=e}))}),exports.lookup=function(e){return e&&"string"==typeof e?(e=e.replace(/.*[\.\/\\]/,"").toLowerCase(),e?exports.types[e]||!1:!1):!1},exports.extension=function(e){if(!e||"string"!=typeof e)return!1;if(e=e.match(/^\s*([^;\s]*)(?:;|\s|$)/),!e)return!1;var t=exports.extensions[e[1].toLowerCase()];return t&&t.length?t[0]:!1},exports.charset=function(e){var t=db[e];return t&&t.charset?t.charset:/^text\//.test(e)?"UTF-8":!1},exports.charsets={lookup:exports.charset},exports.contentType=function(e){if(!e||"string"!=typeof e)return!1;if(~e.indexOf("/")||(e=exports.lookup(e)),!e)return!1;if(!~e.indexOf("charset")){var t=exports.charset(e);t&&(e+="; charset="+t.toLowerCase())}return e};


},{"mime-db":227}],226:[function(require,module,exports){
  module.exports={
    "application/1d-interleaved-parityfec": {
      "source": "iana"
    },
    "application/3gpdash-qoe-report+xml": {
      "source": "iana"
    },
    "application/3gpp-ims+xml": {
      "source": "iana"
    },
    "application/a2l": {
      "source": "iana"
    },
    "application/activemessage": {
      "source": "iana"
    },
    "application/alto-costmap+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-costmapfilter+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-directory+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointcost+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointcostparams+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointprop+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointpropparams+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-error+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-networkmap+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-networkmapfilter+json": {
      "source": "iana",
      "compressible": true
    },
    "application/aml": {
      "source": "iana"
    },
    "application/andrew-inset": {
      "source": "iana",
      "extensions": ["ez"]
    },
    "application/applefile": {
      "source": "iana"
    },
    "application/applixware": {
      "source": "apache",
      "extensions": ["aw"]
    },
    "application/atf": {
      "source": "iana"
    },
    "application/atfx": {
      "source": "iana"
    },
    "application/atom+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["atom"]
    },
    "application/atomcat+xml": {
      "source": "iana",
      "extensions": ["atomcat"]
    },
    "application/atomdeleted+xml": {
      "source": "iana"
    },
    "application/atomicmail": {
      "source": "iana"
    },
    "application/atomsvc+xml": {
      "source": "iana",
      "extensions": ["atomsvc"]
    },
    "application/atxml": {
      "source": "iana"
    },
    "application/auth-policy+xml": {
      "source": "iana"
    },
    "application/bacnet-xdd+zip": {
      "source": "iana"
    },
    "application/batch-smtp": {
      "source": "iana"
    },
    "application/bdoc": {
      "compressible": false,
      "extensions": ["bdoc"]
    },
    "application/beep+xml": {
      "source": "iana"
    },
    "application/calendar+json": {
      "source": "iana",
      "compressible": true
    },
    "application/calendar+xml": {
      "source": "iana"
    },
    "application/call-completion": {
      "source": "iana"
    },
    "application/cals-1840": {
      "source": "iana"
    },
    "application/cbor": {
      "source": "iana"
    },
    "application/ccmp+xml": {
      "source": "iana"
    },
    "application/ccxml+xml": {
      "source": "iana",
      "extensions": ["ccxml"]
    },
    "application/cdfx+xml": {
      "source": "iana"
    },
    "application/cdmi-capability": {
      "source": "iana",
      "extensions": ["cdmia"]
    },
    "application/cdmi-container": {
      "source": "iana",
      "extensions": ["cdmic"]
    },
    "application/cdmi-domain": {
      "source": "iana",
      "extensions": ["cdmid"]
    },
    "application/cdmi-object": {
      "source": "iana",
      "extensions": ["cdmio"]
    },
    "application/cdmi-queue": {
      "source": "iana",
      "extensions": ["cdmiq"]
    },
    "application/cea": {
      "source": "iana"
    },
    "application/cea-2018+xml": {
      "source": "iana"
    },
    "application/cellml+xml": {
      "source": "iana"
    },
    "application/cfw": {
      "source": "iana"
    },
    "application/cms": {
      "source": "iana"
    },
    "application/cnrp+xml": {
      "source": "iana"
    },
    "application/coap-group+json": {
      "source": "iana",
      "compressible": true
    },
    "application/commonground": {
      "source": "iana"
    },
    "application/conference-info+xml": {
      "source": "iana"
    },
    "application/cpl+xml": {
      "source": "iana"
    },
    "application/csrattrs": {
      "source": "iana"
    },
    "application/csta+xml": {
      "source": "iana"
    },
    "application/cstadata+xml": {
      "source": "iana"
    },
    "application/cu-seeme": {
      "source": "apache",
      "extensions": ["cu"]
    },
    "application/cybercash": {
      "source": "iana"
    },
    "application/dart": {
      "compressible": true
    },
    "application/dash+xml": {
      "source": "iana",
      "extensions": ["mdp"]
    },
    "application/dashdelta": {
      "source": "iana"
    },
    "application/davmount+xml": {
      "source": "iana",
      "extensions": ["davmount"]
    },
    "application/dca-rft": {
      "source": "iana"
    },
    "application/dcd": {
      "source": "iana"
    },
    "application/dec-dx": {
      "source": "iana"
    },
    "application/dialog-info+xml": {
      "source": "iana"
    },
    "application/dicom": {
      "source": "iana"
    },
    "application/dii": {
      "source": "iana"
    },
    "application/dit": {
      "source": "iana"
    },
    "application/dns": {
      "source": "iana"
    },
    "application/docbook+xml": {
      "source": "apache",
      "extensions": ["dbk"]
    },
    "application/dskpp+xml": {
      "source": "iana"
    },
    "application/dssc+der": {
      "source": "iana",
      "extensions": ["dssc"]
    },
    "application/dssc+xml": {
      "source": "iana",
      "extensions": ["xdssc"]
    },
    "application/dvcs": {
      "source": "iana"
    },
    "application/ecmascript": {
      "source": "iana",
      "compressible": true,
      "extensions": ["ecma"]
    },
    "application/edi-consent": {
      "source": "iana"
    },
    "application/edi-x12": {
      "source": "iana",
      "compressible": false
    },
    "application/edifact": {
      "source": "iana",
      "compressible": false
    },
    "application/emma+xml": {
      "source": "iana",
      "extensions": ["emma"]
    },
    "application/emotionml+xml": {
      "source": "iana"
    },
    "application/encaprtp": {
      "source": "iana"
    },
    "application/epp+xml": {
      "source": "iana"
    },
    "application/epub+zip": {
      "source": "iana",
      "extensions": ["epub"]
    },
    "application/eshop": {
      "source": "iana"
    },
    "application/exi": {
      "source": "iana",
      "extensions": ["exi"]
    },
    "application/fastinfoset": {
      "source": "iana"
    },
    "application/fastsoap": {
      "source": "iana"
    },
    "application/fdt+xml": {
      "source": "iana"
    },
    "application/fits": {
      "source": "iana"
    },
    "application/font-sfnt": {
      "source": "iana"
    },
    "application/font-tdpfr": {
      "source": "iana",
      "extensions": ["pfr"]
    },
    "application/font-woff": {
      "source": "iana",
      "compressible": false,
      "extensions": ["woff"]
    },
    "application/font-woff2": {
      "compressible": false,
      "extensions": ["woff2"]
    },
    "application/framework-attributes+xml": {
      "source": "iana"
    },
    "application/gml+xml": {
      "source": "apache",
      "extensions": ["gml"]
    },
    "application/gpx+xml": {
      "source": "apache",
      "extensions": ["gpx"]
    },
    "application/gxf": {
      "source": "apache",
      "extensions": ["gxf"]
    },
    "application/gzip": {
      "source": "iana",
      "compressible": false
    },
    "application/h224": {
      "source": "iana"
    },
    "application/held+xml": {
      "source": "iana"
    },
    "application/http": {
      "source": "iana"
    },
    "application/hyperstudio": {
      "source": "iana",
      "extensions": ["stk"]
    },
    "application/ibe-key-request+xml": {
      "source": "iana"
    },
    "application/ibe-pkg-reply+xml": {
      "source": "iana"
    },
    "application/ibe-pp-data": {
      "source": "iana"
    },
    "application/iges": {
      "source": "iana"
    },
    "application/im-iscomposing+xml": {
      "source": "iana"
    },
    "application/index": {
      "source": "iana"
    },
    "application/index.cmd": {
      "source": "iana"
    },
    "application/index.obj": {
      "source": "iana"
    },
    "application/index.response": {
      "source": "iana"
    },
    "application/index.vnd": {
      "source": "iana"
    },
    "application/inkml+xml": {
      "source": "iana",
      "extensions": ["ink","inkml"]
    },
    "application/iotp": {
      "source": "iana"
    },
    "application/ipfix": {
      "source": "iana",
      "extensions": ["ipfix"]
    },
    "application/ipp": {
      "source": "iana"
    },
    "application/isup": {
      "source": "iana"
    },
    "application/its+xml": {
      "source": "iana"
    },
    "application/java-archive": {
      "source": "apache",
      "compressible": false,
      "extensions": ["jar"]
    },
    "application/java-serialized-object": {
      "source": "apache",
      "compressible": false,
      "extensions": ["ser"]
    },
    "application/java-vm": {
      "source": "apache",
      "compressible": false,
      "extensions": ["class"]
    },
    "application/javascript": {
      "source": "iana",
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["js"]
    },
    "application/jose": {
      "source": "iana"
    },
    "application/jose+json": {
      "source": "iana",
      "compressible": true
    },
    "application/jrd+json": {
      "source": "iana",
      "compressible": true
    },
    "application/json": {
      "source": "iana",
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["json","map"]
    },
    "application/json-patch+json": {
      "source": "iana",
      "compressible": true
    },
    "application/json-seq": {
      "source": "iana"
    },
    "application/json5": {
      "extensions": ["json5"]
    },
    "application/jsonml+json": {
      "source": "apache",
      "compressible": true,
      "extensions": ["jsonml"]
    },
    "application/jwk+json": {
      "source": "iana",
      "compressible": true
    },
    "application/jwk-set+json": {
      "source": "iana",
      "compressible": true
    },
    "application/jwt": {
      "source": "iana"
    },
    "application/kpml-request+xml": {
      "source": "iana"
    },
    "application/kpml-response+xml": {
      "source": "iana"
    },
    "application/ld+json": {
      "source": "iana",
      "compressible": true,
      "extensions": ["jsonld"]
    },
    "application/link-format": {
      "source": "iana"
    },
    "application/load-control+xml": {
      "source": "iana"
    },
    "application/lost+xml": {
      "source": "iana",
      "extensions": ["lostxml"]
    },
    "application/lostsync+xml": {
      "source": "iana"
    },
    "application/lxf": {
      "source": "iana"
    },
    "application/mac-binhex40": {
      "source": "iana",
      "extensions": ["hqx"]
    },
    "application/mac-compactpro": {
      "source": "apache",
      "extensions": ["cpt"]
    },
    "application/macwriteii": {
      "source": "iana"
    },
    "application/mads+xml": {
      "source": "iana",
      "extensions": ["mads"]
    },
    "application/manifest+json": {
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["webmanifest"]
    },
    "application/marc": {
      "source": "iana",
      "extensions": ["mrc"]
    },
    "application/marcxml+xml": {
      "source": "iana",
      "extensions": ["mrcx"]
    },
    "application/mathematica": {
      "source": "iana",
      "extensions": ["ma","nb","mb"]
    },
    "application/mathml+xml": {
      "source": "iana",
      "extensions": ["mathml"]
    },
    "application/mathml-content+xml": {
      "source": "iana"
    },
    "application/mathml-presentation+xml": {
      "source": "iana"
    },
    "application/mbms-associated-procedure-description+xml": {
      "source": "iana"
    },
    "application/mbms-deregister+xml": {
      "source": "iana"
    },
    "application/mbms-envelope+xml": {
      "source": "iana"
    },
    "application/mbms-msk+xml": {
      "source": "iana"
    },
    "application/mbms-msk-response+xml": {
      "source": "iana"
    },
    "application/mbms-protection-description+xml": {
      "source": "iana"
    },
    "application/mbms-reception-report+xml": {
      "source": "iana"
    },
    "application/mbms-register+xml": {
      "source": "iana"
    },
    "application/mbms-register-response+xml": {
      "source": "iana"
    },
    "application/mbms-schedule+xml": {
      "source": "iana"
    },
    "application/mbms-user-service-description+xml": {
      "source": "iana"
    },
    "application/mbox": {
      "source": "iana",
      "extensions": ["mbox"]
    },
    "application/media-policy-dataset+xml": {
      "source": "iana"
    },
    "application/media_control+xml": {
      "source": "iana"
    },
    "application/mediaservercontrol+xml": {
      "source": "iana",
      "extensions": ["mscml"]
    },
    "application/merge-patch+json": {
      "source": "iana",
      "compressible": true
    },
    "application/metalink+xml": {
      "source": "apache",
      "extensions": ["metalink"]
    },
    "application/metalink4+xml": {
      "source": "iana",
      "extensions": ["meta4"]
    },
    "application/mets+xml": {
      "source": "iana",
      "extensions": ["mets"]
    },
    "application/mf4": {
      "source": "iana"
    },
    "application/mikey": {
      "source": "iana"
    },
    "application/mods+xml": {
      "source": "iana",
      "extensions": ["mods"]
    },
    "application/moss-keys": {
      "source": "iana"
    },
    "application/moss-signature": {
      "source": "iana"
    },
    "application/mosskey-data": {
      "source": "iana"
    },
    "application/mosskey-request": {
      "source": "iana"
    },
    "application/mp21": {
      "source": "iana",
      "extensions": ["m21","mp21"]
    },
    "application/mp4": {
      "source": "iana",
      "extensions": ["mp4s","m4p"]
    },
    "application/mpeg4-generic": {
      "source": "iana"
    },
    "application/mpeg4-iod": {
      "source": "iana"
    },
    "application/mpeg4-iod-xmt": {
      "source": "iana"
    },
    "application/mrb-consumer+xml": {
      "source": "iana"
    },
    "application/mrb-publish+xml": {
      "source": "iana"
    },
    "application/msc-ivr+xml": {
      "source": "iana"
    },
    "application/msc-mixer+xml": {
      "source": "iana"
    },
    "application/msword": {
      "source": "iana",
      "compressible": false,
      "extensions": ["doc","dot"]
    },
    "application/mxf": {
      "source": "iana",
      "extensions": ["mxf"]
    },
    "application/nasdata": {
      "source": "iana"
    },
    "application/news-checkgroups": {
      "source": "iana"
    },
    "application/news-groupinfo": {
      "source": "iana"
    },
    "application/news-transmission": {
      "source": "iana"
    },
    "application/nlsml+xml": {
      "source": "iana"
    },
    "application/nss": {
      "source": "iana"
    },
    "application/ocsp-request": {
      "source": "iana"
    },
    "application/ocsp-response": {
      "source": "iana"
    },
    "application/octet-stream": {
      "source": "iana",
      "compressible": false,
      "extensions": ["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","buffer"]
    },
    "application/oda": {
      "source": "iana",
      "extensions": ["oda"]
    },
    "application/odx": {
      "source": "iana"
    },
    "application/oebps-package+xml": {
      "source": "iana",
      "extensions": ["opf"]
    },
    "application/ogg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["ogx"]
    },
    "application/omdoc+xml": {
      "source": "apache",
      "extensions": ["omdoc"]
    },
    "application/onenote": {
      "source": "apache",
      "extensions": ["onetoc","onetoc2","onetmp","onepkg"]
    },
    "application/oxps": {
      "source": "iana",
      "extensions": ["oxps"]
    },
    "application/p2p-overlay+xml": {
      "source": "iana"
    },
    "application/parityfec": {
      "source": "iana"
    },
    "application/patch-ops-error+xml": {
      "source": "iana",
      "extensions": ["xer"]
    },
    "application/pdf": {
      "source": "iana",
      "compressible": false,
      "extensions": ["pdf"]
    },
    "application/pdx": {
      "source": "iana"
    },
    "application/pgp-encrypted": {
      "source": "iana",
      "compressible": false,
      "extensions": ["pgp"]
    },
    "application/pgp-keys": {
      "source": "iana"
    },
    "application/pgp-signature": {
      "source": "iana",
      "extensions": ["asc","sig"]
    },
    "application/pics-rules": {
      "source": "apache",
      "extensions": ["prf"]
    },
    "application/pidf+xml": {
      "source": "iana"
    },
    "application/pidf-diff+xml": {
      "source": "iana"
    },
    "application/pkcs10": {
      "source": "iana",
      "extensions": ["p10"]
    },
    "application/pkcs7-mime": {
      "source": "iana",
      "extensions": ["p7m","p7c"]
    },
    "application/pkcs7-signature": {
      "source": "iana",
      "extensions": ["p7s"]
    },
    "application/pkcs8": {
      "source": "iana",
      "extensions": ["p8"]
    },
    "application/pkix-attr-cert": {
      "source": "iana",
      "extensions": ["ac"]
    },
    "application/pkix-cert": {
      "source": "iana",
      "extensions": ["cer"]
    },
    "application/pkix-crl": {
      "source": "iana",
      "extensions": ["crl"]
    },
    "application/pkix-pkipath": {
      "source": "iana",
      "extensions": ["pkipath"]
    },
    "application/pkixcmp": {
      "source": "iana",
      "extensions": ["pki"]
    },
    "application/pls+xml": {
      "source": "iana",
      "extensions": ["pls"]
    },
    "application/poc-settings+xml": {
      "source": "iana"
    },
    "application/postscript": {
      "source": "iana",
      "compressible": true,
      "extensions": ["ai","eps","ps"]
    },
    "application/provenance+xml": {
      "source": "iana"
    },
    "application/prs.alvestrand.titrax-sheet": {
      "source": "iana"
    },
    "application/prs.cww": {
      "source": "iana",
      "extensions": ["cww"]
    },
    "application/prs.hpub+zip": {
      "source": "iana"
    },
    "application/prs.nprend": {
      "source": "iana"
    },
    "application/prs.plucker": {
      "source": "iana"
    },
    "application/prs.rdf-xml-crypt": {
      "source": "iana"
    },
    "application/prs.xsf+xml": {
      "source": "iana"
    },
    "application/pskc+xml": {
      "source": "iana",
      "extensions": ["pskcxml"]
    },
    "application/qsig": {
      "source": "iana"
    },
    "application/raptorfec": {
      "source": "iana"
    },
    "application/rdap+json": {
      "source": "iana",
      "compressible": true
    },
    "application/rdf+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rdf"]
    },
    "application/reginfo+xml": {
      "source": "iana",
      "extensions": ["rif"]
    },
    "application/relax-ng-compact-syntax": {
      "source": "iana",
      "extensions": ["rnc"]
    },
    "application/remote-printing": {
      "source": "iana"
    },
    "application/reputon+json": {
      "source": "iana",
      "compressible": true
    },
    "application/resource-lists+xml": {
      "source": "iana",
      "extensions": ["rl"]
    },
    "application/resource-lists-diff+xml": {
      "source": "iana",
      "extensions": ["rld"]
    },
    "application/riscos": {
      "source": "iana"
    },
    "application/rlmi+xml": {
      "source": "iana"
    },
    "application/rls-services+xml": {
      "source": "iana",
      "extensions": ["rs"]
    },
    "application/rpki-ghostbusters": {
      "source": "iana",
      "extensions": ["gbr"]
    },
    "application/rpki-manifest": {
      "source": "iana",
      "extensions": ["mft"]
    },
    "application/rpki-roa": {
      "source": "iana",
      "extensions": ["roa"]
    },
    "application/rpki-updown": {
      "source": "iana"
    },
    "application/rsd+xml": {
      "source": "apache",
      "extensions": ["rsd"]
    },
    "application/rss+xml": {
      "source": "apache",
      "compressible": true,
      "extensions": ["rss"]
    },
    "application/rtf": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rtf"]
    },
    "application/rtploopback": {
      "source": "iana"
    },
    "application/rtx": {
      "source": "iana"
    },
    "application/samlassertion+xml": {
      "source": "iana"
    },
    "application/samlmetadata+xml": {
      "source": "iana"
    },
    "application/sbml+xml": {
      "source": "iana",
      "extensions": ["sbml"]
    },
    "application/scaip+xml": {
      "source": "iana"
    },
    "application/scvp-cv-request": {
      "source": "iana",
      "extensions": ["scq"]
    },
    "application/scvp-cv-response": {
      "source": "iana",
      "extensions": ["scs"]
    },
    "application/scvp-vp-request": {
      "source": "iana",
      "extensions": ["spq"]
    },
    "application/scvp-vp-response": {
      "source": "iana",
      "extensions": ["spp"]
    },
    "application/sdp": {
      "source": "iana",
      "extensions": ["sdp"]
    },
    "application/sep+xml": {
      "source": "iana"
    },
    "application/sep-exi": {
      "source": "iana"
    },
    "application/session-info": {
      "source": "iana"
    },
    "application/set-payment": {
      "source": "iana"
    },
    "application/set-payment-initiation": {
      "source": "iana",
      "extensions": ["setpay"]
    },
    "application/set-registration": {
      "source": "iana"
    },
    "application/set-registration-initiation": {
      "source": "iana",
      "extensions": ["setreg"]
    },
    "application/sgml": {
      "source": "iana"
    },
    "application/sgml-open-catalog": {
      "source": "iana"
    },
    "application/shf+xml": {
      "source": "iana",
      "extensions": ["shf"]
    },
    "application/sieve": {
      "source": "iana"
    },
    "application/simple-filter+xml": {
      "source": "iana"
    },
    "application/simple-message-summary": {
      "source": "iana"
    },
    "application/simplesymbolcontainer": {
      "source": "iana"
    },
    "application/slate": {
      "source": "iana"
    },
    "application/smil": {
      "source": "iana"
    },
    "application/smil+xml": {
      "source": "iana",
      "extensions": ["smi","smil"]
    },
    "application/smpte336m": {
      "source": "iana"
    },
    "application/soap+fastinfoset": {
      "source": "iana"
    },
    "application/soap+xml": {
      "source": "iana",
      "compressible": true
    },
    "application/sparql-query": {
      "source": "iana",
      "extensions": ["rq"]
    },
    "application/sparql-results+xml": {
      "source": "iana",
      "extensions": ["srx"]
    },
    "application/spirits-event+xml": {
      "source": "iana"
    },
    "application/sql": {
      "source": "iana"
    },
    "application/srgs": {
      "source": "iana",
      "extensions": ["gram"]
    },
    "application/srgs+xml": {
      "source": "iana",
      "extensions": ["grxml"]
    },
    "application/sru+xml": {
      "source": "iana",
      "extensions": ["sru"]
    },
    "application/ssdl+xml": {
      "source": "apache",
      "extensions": ["ssdl"]
    },
    "application/ssml+xml": {
      "source": "iana",
      "extensions": ["ssml"]
    },
    "application/tamp-apex-update": {
      "source": "iana"
    },
    "application/tamp-apex-update-confirm": {
      "source": "iana"
    },
    "application/tamp-community-update": {
      "source": "iana"
    },
    "application/tamp-community-update-confirm": {
      "source": "iana"
    },
    "application/tamp-error": {
      "source": "iana"
    },
    "application/tamp-sequence-adjust": {
      "source": "iana"
    },
    "application/tamp-sequence-adjust-confirm": {
      "source": "iana"
    },
    "application/tamp-status-query": {
      "source": "iana"
    },
    "application/tamp-status-response": {
      "source": "iana"
    },
    "application/tamp-update": {
      "source": "iana"
    },
    "application/tamp-update-confirm": {
      "source": "iana"
    },
    "application/tar": {
      "compressible": true
    },
    "application/tei+xml": {
      "source": "iana",
      "extensions": ["tei","teicorpus"]
    },
    "application/thraud+xml": {
      "source": "iana",
      "extensions": ["tfi"]
    },
    "application/timestamp-query": {
      "source": "iana"
    },
    "application/timestamp-reply": {
      "source": "iana"
    },
    "application/timestamped-data": {
      "source": "iana",
      "extensions": ["tsd"]
    },
    "application/ttml+xml": {
      "source": "iana"
    },
    "application/tve-trigger": {
      "source": "iana"
    },
    "application/ulpfec": {
      "source": "iana"
    },
    "application/urc-grpsheet+xml": {
      "source": "iana"
    },
    "application/urc-ressheet+xml": {
      "source": "iana"
    },
    "application/urc-targetdesc+xml": {
      "source": "iana"
    },
    "application/urc-uisocketdesc+xml": {
      "source": "iana"
    },
    "application/vcard+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vcard+xml": {
      "source": "iana"
    },
    "application/vemmi": {
      "source": "iana"
    },
    "application/vividence.scriptfile": {
      "source": "apache"
    },
    "application/vnd.3gpp.bsf+xml": {
      "source": "iana"
    },
    "application/vnd.3gpp.pic-bw-large": {
      "source": "iana",
      "extensions": ["plb"]
    },
    "application/vnd.3gpp.pic-bw-small": {
      "source": "iana",
      "extensions": ["psb"]
    },
    "application/vnd.3gpp.pic-bw-var": {
      "source": "iana",
      "extensions": ["pvb"]
    },
    "application/vnd.3gpp.sms": {
      "source": "iana"
    },
    "application/vnd.3gpp2.bcmcsinfo+xml": {
      "source": "iana"
    },
    "application/vnd.3gpp2.sms": {
      "source": "iana"
    },
    "application/vnd.3gpp2.tcap": {
      "source": "iana",
      "extensions": ["tcap"]
    },
    "application/vnd.3m.post-it-notes": {
      "source": "iana",
      "extensions": ["pwn"]
    },
    "application/vnd.accpac.simply.aso": {
      "source": "iana",
      "extensions": ["aso"]
    },
    "application/vnd.accpac.simply.imp": {
      "source": "iana",
      "extensions": ["imp"]
    },
    "application/vnd.acucobol": {
      "source": "iana",
      "extensions": ["acu"]
    },
    "application/vnd.acucorp": {
      "source": "iana",
      "extensions": ["atc","acutc"]
    },
    "application/vnd.adobe.air-application-installer-package+zip": {
      "source": "apache",
      "extensions": ["air"]
    },
    "application/vnd.adobe.flash.movie": {
      "source": "iana"
    },
    "application/vnd.adobe.formscentral.fcdt": {
      "source": "iana",
      "extensions": ["fcdt"]
    },
    "application/vnd.adobe.fxp": {
      "source": "iana",
      "extensions": ["fxp","fxpl"]
    },
    "application/vnd.adobe.partial-upload": {
      "source": "iana"
    },
    "application/vnd.adobe.xdp+xml": {
      "source": "iana",
      "extensions": ["xdp"]
    },
    "application/vnd.adobe.xfdf": {
      "source": "iana",
      "extensions": ["xfdf"]
    },
    "application/vnd.aether.imp": {
      "source": "iana"
    },
    "application/vnd.ah-barcode": {
      "source": "iana"
    },
    "application/vnd.ahead.space": {
      "source": "iana",
      "extensions": ["ahead"]
    },
    "application/vnd.airzip.filesecure.azf": {
      "source": "iana",
      "extensions": ["azf"]
    },
    "application/vnd.airzip.filesecure.azs": {
      "source": "iana",
      "extensions": ["azs"]
    },
    "application/vnd.amazon.ebook": {
      "source": "apache",
      "extensions": ["azw"]
    },
    "application/vnd.americandynamics.acc": {
      "source": "iana",
      "extensions": ["acc"]
    },
    "application/vnd.amiga.ami": {
      "source": "iana",
      "extensions": ["ami"]
    },
    "application/vnd.amundsen.maze+xml": {
      "source": "iana"
    },
    "application/vnd.android.package-archive": {
      "source": "apache",
      "compressible": false,
      "extensions": ["apk"]
    },
    "application/vnd.anser-web-certificate-issue-initiation": {
      "source": "iana",
      "extensions": ["cii"]
    },
    "application/vnd.anser-web-funds-transfer-initiation": {
      "source": "apache",
      "extensions": ["fti"]
    },
    "application/vnd.antix.game-component": {
      "source": "iana",
      "extensions": ["atx"]
    },
    "application/vnd.apache.thrift.binary": {
      "source": "iana"
    },
    "application/vnd.apache.thrift.compact": {
      "source": "iana"
    },
    "application/vnd.apache.thrift.json": {
      "source": "iana"
    },
    "application/vnd.api+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.apple.installer+xml": {
      "source": "iana",
      "extensions": ["mpkg"]
    },
    "application/vnd.apple.mpegurl": {
      "source": "iana",
      "extensions": ["m3u8"]
    },
    "application/vnd.arastra.swi": {
      "source": "iana"
    },
    "application/vnd.aristanetworks.swi": {
      "source": "iana",
      "extensions": ["swi"]
    },
    "application/vnd.artsquare": {
      "source": "iana"
    },
    "application/vnd.astraea-software.iota": {
      "source": "iana",
      "extensions": ["iota"]
    },
    "application/vnd.audiograph": {
      "source": "iana",
      "extensions": ["aep"]
    },
    "application/vnd.autopackage": {
      "source": "iana"
    },
    "application/vnd.avistar+xml": {
      "source": "iana"
    },
    "application/vnd.balsamiq.bmml+xml": {
      "source": "iana"
    },
    "application/vnd.balsamiq.bmpr": {
      "source": "iana"
    },
    "application/vnd.bekitzur-stech+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.blueice.multipass": {
      "source": "iana",
      "extensions": ["mpm"]
    },
    "application/vnd.bluetooth.ep.oob": {
      "source": "iana"
    },
    "application/vnd.bluetooth.le.oob": {
      "source": "iana"
    },
    "application/vnd.bmi": {
      "source": "iana",
      "extensions": ["bmi"]
    },
    "application/vnd.businessobjects": {
      "source": "iana",
      "extensions": ["rep"]
    },
    "application/vnd.cab-jscript": {
      "source": "iana"
    },
    "application/vnd.canon-cpdl": {
      "source": "iana"
    },
    "application/vnd.canon-lips": {
      "source": "iana"
    },
    "application/vnd.cendio.thinlinc.clientconf": {
      "source": "iana"
    },
    "application/vnd.century-systems.tcp_stream": {
      "source": "iana"
    },
    "application/vnd.chemdraw+xml": {
      "source": "iana",
      "extensions": ["cdxml"]
    },
    "application/vnd.chipnuts.karaoke-mmd": {
      "source": "iana",
      "extensions": ["mmd"]
    },
    "application/vnd.cinderella": {
      "source": "iana",
      "extensions": ["cdy"]
    },
    "application/vnd.cirpack.isdn-ext": {
      "source": "iana"
    },
    "application/vnd.citationstyles.style+xml": {
      "source": "iana"
    },
    "application/vnd.claymore": {
      "source": "iana",
      "extensions": ["cla"]
    },
    "application/vnd.cloanto.rp9": {
      "source": "iana",
      "extensions": ["rp9"]
    },
    "application/vnd.clonk.c4group": {
      "source": "iana",
      "extensions": ["c4g","c4d","c4f","c4p","c4u"]
    },
    "application/vnd.cluetrust.cartomobile-config": {
      "source": "iana",
      "extensions": ["c11amc"]
    },
    "application/vnd.cluetrust.cartomobile-config-pkg": {
      "source": "iana",
      "extensions": ["c11amz"]
    },
    "application/vnd.coffeescript": {
      "source": "iana"
    },
    "application/vnd.collection+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.collection.doc+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.collection.next+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.commerce-battelle": {
      "source": "iana"
    },
    "application/vnd.commonspace": {
      "source": "iana",
      "extensions": ["csp"]
    },
    "application/vnd.contact.cmsg": {
      "source": "iana",
      "extensions": ["cdbcmsg"]
    },
    "application/vnd.cosmocaller": {
      "source": "iana",
      "extensions": ["cmc"]
    },
    "application/vnd.crick.clicker": {
      "source": "iana",
      "extensions": ["clkx"]
    },
    "application/vnd.crick.clicker.keyboard": {
      "source": "iana",
      "extensions": ["clkk"]
    },
    "application/vnd.crick.clicker.palette": {
      "source": "iana",
      "extensions": ["clkp"]
    },
    "application/vnd.crick.clicker.template": {
      "source": "iana",
      "extensions": ["clkt"]
    },
    "application/vnd.crick.clicker.wordbank": {
      "source": "iana",
      "extensions": ["clkw"]
    },
    "application/vnd.criticaltools.wbs+xml": {
      "source": "iana",
      "extensions": ["wbs"]
    },
    "application/vnd.ctc-posml": {
      "source": "iana",
      "extensions": ["pml"]
    },
    "application/vnd.ctct.ws+xml": {
      "source": "iana"
    },
    "application/vnd.cups-pdf": {
      "source": "iana"
    },
    "application/vnd.cups-postscript": {
      "source": "iana"
    },
    "application/vnd.cups-ppd": {
      "source": "iana",
      "extensions": ["ppd"]
    },
    "application/vnd.cups-raster": {
      "source": "iana"
    },
    "application/vnd.cups-raw": {
      "source": "iana"
    },
    "application/vnd.curl": {
      "source": "iana"
    },
    "application/vnd.curl.car": {
      "source": "apache",
      "extensions": ["car"]
    },
    "application/vnd.curl.pcurl": {
      "source": "apache",
      "extensions": ["pcurl"]
    },
    "application/vnd.cyan.dean.root+xml": {
      "source": "iana"
    },
    "application/vnd.cybank": {
      "source": "iana"
    },
    "application/vnd.dart": {
      "source": "iana",
      "compressible": true,
      "extensions": ["dart"]
    },
    "application/vnd.data-vision.rdz": {
      "source": "iana",
      "extensions": ["rdz"]
    },
    "application/vnd.debian.binary-package": {
      "source": "iana"
    },
    "application/vnd.dece.data": {
      "source": "iana",
      "extensions": ["uvf","uvvf","uvd","uvvd"]
    },
    "application/vnd.dece.ttml+xml": {
      "source": "iana",
      "extensions": ["uvt","uvvt"]
    },
    "application/vnd.dece.unspecified": {
      "source": "iana",
      "extensions": ["uvx","uvvx"]
    },
    "application/vnd.dece.zip": {
      "source": "iana",
      "extensions": ["uvz","uvvz"]
    },
    "application/vnd.denovo.fcselayout-link": {
      "source": "iana",
      "extensions": ["fe_launch"]
    },
    "application/vnd.desmume-movie": {
      "source": "iana"
    },
    "application/vnd.dir-bi.plate-dl-nosuffix": {
      "source": "iana"
    },
    "application/vnd.dm.delegation+xml": {
      "source": "iana"
    },
    "application/vnd.dna": {
      "source": "iana",
      "extensions": ["dna"]
    },
    "application/vnd.document+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.dolby.mlp": {
      "source": "apache",
      "extensions": ["mlp"]
    },
    "application/vnd.dolby.mobile.1": {
      "source": "iana"
    },
    "application/vnd.dolby.mobile.2": {
      "source": "iana"
    },
    "application/vnd.doremir.scorecloud-binary-document": {
      "source": "iana"
    },
    "application/vnd.dpgraph": {
      "source": "iana",
      "extensions": ["dpg"]
    },
    "application/vnd.dreamfactory": {
      "source": "iana",
      "extensions": ["dfac"]
    },
    "application/vnd.ds-keypoint": {
      "source": "apache",
      "extensions": ["kpxx"]
    },
    "application/vnd.dtg.local": {
      "source": "iana"
    },
    "application/vnd.dtg.local.flash": {
      "source": "iana"
    },
    "application/vnd.dtg.local.html": {
      "source": "iana"
    },
    "application/vnd.dvb.ait": {
      "source": "iana",
      "extensions": ["ait"]
    },
    "application/vnd.dvb.dvbj": {
      "source": "iana"
    },
    "application/vnd.dvb.esgcontainer": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcdftnotifaccess": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcesgaccess": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcesgaccess2": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcesgpdd": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcroaming": {
      "source": "iana"
    },
    "application/vnd.dvb.iptv.alfec-base": {
      "source": "iana"
    },
    "application/vnd.dvb.iptv.alfec-enhancement": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-aggregate-root+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-container+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-generic+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-ia-msglist+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-ia-registration-request+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-ia-registration-response+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-init+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.pfr": {
      "source": "iana"
    },
    "application/vnd.dvb.service": {
      "source": "iana",
      "extensions": ["svc"]
    },
    "application/vnd.dxr": {
      "source": "iana"
    },
    "application/vnd.dynageo": {
      "source": "iana",
      "extensions": ["geo"]
    },
    "application/vnd.dzr": {
      "source": "iana"
    },
    "application/vnd.easykaraoke.cdgdownload": {
      "source": "iana"
    },
    "application/vnd.ecdis-update": {
      "source": "iana"
    },
    "application/vnd.ecowin.chart": {
      "source": "iana",
      "extensions": ["mag"]
    },
    "application/vnd.ecowin.filerequest": {
      "source": "iana"
    },
    "application/vnd.ecowin.fileupdate": {
      "source": "iana"
    },
    "application/vnd.ecowin.series": {
      "source": "iana"
    },
    "application/vnd.ecowin.seriesrequest": {
      "source": "iana"
    },
    "application/vnd.ecowin.seriesupdate": {
      "source": "iana"
    },
    "application/vnd.emclient.accessrequest+xml": {
      "source": "iana"
    },
    "application/vnd.enliven": {
      "source": "iana",
      "extensions": ["nml"]
    },
    "application/vnd.enphase.envoy": {
      "source": "iana"
    },
    "application/vnd.eprints.data+xml": {
      "source": "iana"
    },
    "application/vnd.epson.esf": {
      "source": "iana",
      "extensions": ["esf"]
    },
    "application/vnd.epson.msf": {
      "source": "iana",
      "extensions": ["msf"]
    },
    "application/vnd.epson.quickanime": {
      "source": "iana",
      "extensions": ["qam"]
    },
    "application/vnd.epson.salt": {
      "source": "iana",
      "extensions": ["slt"]
    },
    "application/vnd.epson.ssf": {
      "source": "iana",
      "extensions": ["ssf"]
    },
    "application/vnd.ericsson.quickcall": {
      "source": "iana"
    },
    "application/vnd.eszigno3+xml": {
      "source": "iana",
      "extensions": ["es3","et3"]
    },
    "application/vnd.etsi.aoc+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.asic-e+zip": {
      "source": "iana"
    },
    "application/vnd.etsi.asic-s+zip": {
      "source": "iana"
    },
    "application/vnd.etsi.cug+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvcommand+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvdiscovery+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvprofile+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsad-bc+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsad-cod+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsad-npvr+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvservice+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsync+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvueprofile+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.mcid+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.mheg5": {
      "source": "iana"
    },
    "application/vnd.etsi.overload-control-policy-dataset+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.pstn+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.sci+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.simservs+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.timestamp-token": {
      "source": "iana"
    },
    "application/vnd.etsi.tsl+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.tsl.der": {
      "source": "iana"
    },
    "application/vnd.eudora.data": {
      "source": "iana"
    },
    "application/vnd.ezpix-album": {
      "source": "iana",
      "extensions": ["ez2"]
    },
    "application/vnd.ezpix-package": {
      "source": "iana",
      "extensions": ["ez3"]
    },
    "application/vnd.f-secure.mobile": {
      "source": "iana"
    },
    "application/vnd.fastcopy-disk-image": {
      "source": "iana"
    },
    "application/vnd.fdf": {
      "source": "iana",
      "extensions": ["fdf"]
    },
    "application/vnd.fdsn.mseed": {
      "source": "iana",
      "extensions": ["mseed"]
    },
    "application/vnd.fdsn.seed": {
      "source": "iana",
      "extensions": ["seed","dataless"]
    },
    "application/vnd.ffsns": {
      "source": "iana"
    },
    "application/vnd.fints": {
      "source": "iana"
    },
    "application/vnd.flographit": {
      "source": "iana",
      "extensions": ["gph"]
    },
    "application/vnd.fluxtime.clip": {
      "source": "iana",
      "extensions": ["ftc"]
    },
    "application/vnd.font-fontforge-sfd": {
      "source": "iana"
    },
    "application/vnd.framemaker": {
      "source": "iana",
      "extensions": ["fm","frame","maker","book"]
    },
    "application/vnd.frogans.fnc": {
      "source": "iana",
      "extensions": ["fnc"]
    },
    "application/vnd.frogans.ltf": {
      "source": "iana",
      "extensions": ["ltf"]
    },
    "application/vnd.fsc.weblaunch": {
      "source": "iana",
      "extensions": ["fsc"]
    },
    "application/vnd.fujitsu.oasys": {
      "source": "iana",
      "extensions": ["oas"]
    },
    "application/vnd.fujitsu.oasys2": {
      "source": "iana",
      "extensions": ["oa2"]
    },
    "application/vnd.fujitsu.oasys3": {
      "source": "iana",
      "extensions": ["oa3"]
    },
    "application/vnd.fujitsu.oasysgp": {
      "source": "iana",
      "extensions": ["fg5"]
    },
    "application/vnd.fujitsu.oasysprs": {
      "source": "iana",
      "extensions": ["bh2"]
    },
    "application/vnd.fujixerox.art-ex": {
      "source": "iana"
    },
    "application/vnd.fujixerox.art4": {
      "source": "iana"
    },
    "application/vnd.fujixerox.ddd": {
      "source": "iana",
      "extensions": ["ddd"]
    },
    "application/vnd.fujixerox.docuworks": {
      "source": "iana",
      "extensions": ["xdw"]
    },
    "application/vnd.fujixerox.docuworks.binder": {
      "source": "iana",
      "extensions": ["xbd"]
    },
    "application/vnd.fujixerox.docuworks.container": {
      "source": "iana"
    },
    "application/vnd.fujixerox.hbpl": {
      "source": "iana"
    },
    "application/vnd.fut-misnet": {
      "source": "iana"
    },
    "application/vnd.fuzzysheet": {
      "source": "iana",
      "extensions": ["fzs"]
    },
    "application/vnd.genomatix.tuxedo": {
      "source": "iana",
      "extensions": ["txd"]
    },
    "application/vnd.geo+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.geocube+xml": {
      "source": "iana"
    },
    "application/vnd.geogebra.file": {
      "source": "iana",
      "extensions": ["ggb"]
    },
    "application/vnd.geogebra.tool": {
      "source": "iana",
      "extensions": ["ggt"]
    },
    "application/vnd.geometry-explorer": {
      "source": "iana",
      "extensions": ["gex","gre"]
    },
    "application/vnd.geonext": {
      "source": "iana",
      "extensions": ["gxt"]
    },
    "application/vnd.geoplan": {
      "source": "iana",
      "extensions": ["g2w"]
    },
    "application/vnd.geospace": {
      "source": "iana",
      "extensions": ["g3w"]
    },
    "application/vnd.gerber": {
      "source": "iana"
    },
    "application/vnd.globalplatform.card-content-mgt": {
      "source": "iana"
    },
    "application/vnd.globalplatform.card-content-mgt-response": {
      "source": "iana"
    },
    "application/vnd.gmx": {
      "source": "iana",
      "extensions": ["gmx"]
    },
    "application/vnd.google-earth.kml+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["kml"]
    },
    "application/vnd.google-earth.kmz": {
      "source": "iana",
      "compressible": false,
      "extensions": ["kmz"]
    },
    "application/vnd.gov.sk.e-form+xml": {
      "source": "iana"
    },
    "application/vnd.gov.sk.e-form+zip": {
      "source": "iana"
    },
    "application/vnd.gov.sk.xmldatacontainer+xml": {
      "source": "iana"
    },
    "application/vnd.grafeq": {
      "source": "iana",
      "extensions": ["gqf","gqs"]
    },
    "application/vnd.gridmp": {
      "source": "iana"
    },
    "application/vnd.groove-account": {
      "source": "iana",
      "extensions": ["gac"]
    },
    "application/vnd.groove-help": {
      "source": "iana",
      "extensions": ["ghf"]
    },
    "application/vnd.groove-identity-message": {
      "source": "iana",
      "extensions": ["gim"]
    },
    "application/vnd.groove-injector": {
      "source": "iana",
      "extensions": ["grv"]
    },
    "application/vnd.groove-tool-message": {
      "source": "iana",
      "extensions": ["gtm"]
    },
    "application/vnd.groove-tool-template": {
      "source": "iana",
      "extensions": ["tpl"]
    },
    "application/vnd.groove-vcard": {
      "source": "iana",
      "extensions": ["vcg"]
    },
    "application/vnd.hal+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.hal+xml": {
      "source": "iana",
      "extensions": ["hal"]
    },
    "application/vnd.handheld-entertainment+xml": {
      "source": "iana",
      "extensions": ["zmm"]
    },
    "application/vnd.hbci": {
      "source": "iana",
      "extensions": ["hbci"]
    },
    "application/vnd.hcl-bireports": {
      "source": "iana"
    },
    "application/vnd.heroku+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.hhe.lesson-player": {
      "source": "iana",
      "extensions": ["les"]
    },
    "application/vnd.hp-hpgl": {
      "source": "iana",
      "extensions": ["hpgl"]
    },
    "application/vnd.hp-hpid": {
      "source": "iana",
      "extensions": ["hpid"]
    },
    "application/vnd.hp-hps": {
      "source": "iana",
      "extensions": ["hps"]
    },
    "application/vnd.hp-jlyt": {
      "source": "iana",
      "extensions": ["jlt"]
    },
    "application/vnd.hp-pcl": {
      "source": "iana",
      "extensions": ["pcl"]
    },
    "application/vnd.hp-pclxl": {
      "source": "iana",
      "extensions": ["pclxl"]
    },
    "application/vnd.httphone": {
      "source": "iana"
    },
    "application/vnd.hydrostatix.sof-data": {
      "source": "iana",
      "extensions": ["sfd-hdstx"]
    },
    "application/vnd.hyperdrive+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.hzn-3d-crossword": {
      "source": "iana"
    },
    "application/vnd.ibm.afplinedata": {
      "source": "iana"
    },
    "application/vnd.ibm.electronic-media": {
      "source": "iana"
    },
    "application/vnd.ibm.minipay": {
      "source": "iana",
      "extensions": ["mpy"]
    },
    "application/vnd.ibm.modcap": {
      "source": "iana",
      "extensions": ["afp","listafp","list3820"]
    },
    "application/vnd.ibm.rights-management": {
      "source": "iana",
      "extensions": ["irm"]
    },
    "application/vnd.ibm.secure-container": {
      "source": "iana",
      "extensions": ["sc"]
    },
    "application/vnd.iccprofile": {
      "source": "iana",
      "extensions": ["icc","icm"]
    },
    "application/vnd.ieee.1905": {
      "source": "iana"
    },
    "application/vnd.igloader": {
      "source": "iana",
      "extensions": ["igl"]
    },
    "application/vnd.immervision-ivp": {
      "source": "iana",
      "extensions": ["ivp"]
    },
    "application/vnd.immervision-ivu": {
      "source": "iana",
      "extensions": ["ivu"]
    },
    "application/vnd.ims.imsccv1p1": {
      "source": "iana"
    },
    "application/vnd.ims.imsccv1p2": {
      "source": "iana"
    },
    "application/vnd.ims.imsccv1p3": {
      "source": "iana"
    },
    "application/vnd.ims.lis.v2.result+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolconsumerprofile+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolproxy+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolproxy.id+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolsettings+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolsettings.simple+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.informedcontrol.rms+xml": {
      "source": "iana"
    },
    "application/vnd.informix-visionary": {
      "source": "iana"
    },
    "application/vnd.infotech.project": {
      "source": "iana"
    },
    "application/vnd.infotech.project+xml": {
      "source": "iana"
    },
    "application/vnd.innopath.wamp.notification": {
      "source": "iana"
    },
    "application/vnd.insors.igm": {
      "source": "iana",
      "extensions": ["igm"]
    },
    "application/vnd.intercon.formnet": {
      "source": "iana",
      "extensions": ["xpw","xpx"]
    },
    "application/vnd.intergeo": {
      "source": "iana",
      "extensions": ["i2g"]
    },
    "application/vnd.intertrust.digibox": {
      "source": "iana"
    },
    "application/vnd.intertrust.nncp": {
      "source": "iana"
    },
    "application/vnd.intu.qbo": {
      "source": "iana",
      "extensions": ["qbo"]
    },
    "application/vnd.intu.qfx": {
      "source": "iana",
      "extensions": ["qfx"]
    },
    "application/vnd.iptc.g2.catalogitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.conceptitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.knowledgeitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.newsitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.newsmessage+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.packageitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.planningitem+xml": {
      "source": "iana"
    },
    "application/vnd.ipunplugged.rcprofile": {
      "source": "iana",
      "extensions": ["rcprofile"]
    },
    "application/vnd.irepository.package+xml": {
      "source": "iana",
      "extensions": ["irp"]
    },
    "application/vnd.is-xpr": {
      "source": "iana",
      "extensions": ["xpr"]
    },
    "application/vnd.isac.fcs": {
      "source": "iana",
      "extensions": ["fcs"]
    },
    "application/vnd.jam": {
      "source": "iana",
      "extensions": ["jam"]
    },
    "application/vnd.japannet-directory-service": {
      "source": "iana"
    },
    "application/vnd.japannet-jpnstore-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-payment-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-registration": {
      "source": "iana"
    },
    "application/vnd.japannet-registration-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-setstore-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-verification": {
      "source": "iana"
    },
    "application/vnd.japannet-verification-wakeup": {
      "source": "iana"
    },
    "application/vnd.jcp.javame.midlet-rms": {
      "source": "iana",
      "extensions": ["rms"]
    },
    "application/vnd.jisp": {
      "source": "iana",
      "extensions": ["jisp"]
    },
    "application/vnd.joost.joda-archive": {
      "source": "iana",
      "extensions": ["joda"]
    },
    "application/vnd.jsk.isdn-ngn": {
      "source": "iana"
    },
    "application/vnd.kahootz": {
      "source": "iana",
      "extensions": ["ktz","ktr"]
    },
    "application/vnd.kde.karbon": {
      "source": "iana",
      "extensions": ["karbon"]
    },
    "application/vnd.kde.kchart": {
      "source": "iana",
      "extensions": ["chrt"]
    },
    "application/vnd.kde.kformula": {
      "source": "iana",
      "extensions": ["kfo"]
    },
    "application/vnd.kde.kivio": {
      "source": "iana",
      "extensions": ["flw"]
    },
    "application/vnd.kde.kontour": {
      "source": "iana",
      "extensions": ["kon"]
    },
    "application/vnd.kde.kpresenter": {
      "source": "iana",
      "extensions": ["kpr","kpt"]
    },
    "application/vnd.kde.kspread": {
      "source": "iana",
      "extensions": ["ksp"]
    },
    "application/vnd.kde.kword": {
      "source": "iana",
      "extensions": ["kwd","kwt"]
    },
    "application/vnd.kenameaapp": {
      "source": "iana",
      "extensions": ["htke"]
    },
    "application/vnd.kidspiration": {
      "source": "iana",
      "extensions": ["kia"]
    },
    "application/vnd.kinar": {
      "source": "iana",
      "extensions": ["kne","knp"]
    },
    "application/vnd.koan": {
      "source": "iana",
      "extensions": ["skp","skd","skt","skm"]
    },
    "application/vnd.kodak-descriptor": {
      "source": "iana",
      "extensions": ["sse"]
    },
    "application/vnd.las.las+xml": {
      "source": "iana",
      "extensions": ["lasxml"]
    },
    "application/vnd.liberty-request+xml": {
      "source": "iana"
    },
    "application/vnd.llamagraphics.life-balance.desktop": {
      "source": "iana",
      "extensions": ["lbd"]
    },
    "application/vnd.llamagraphics.life-balance.exchange+xml": {
      "source": "iana",
      "extensions": ["lbe"]
    },
    "application/vnd.lotus-1-2-3": {
      "source": "iana",
      "extensions": ["123"]
    },
    "application/vnd.lotus-approach": {
      "source": "iana",
      "extensions": ["apr"]
    },
    "application/vnd.lotus-freelance": {
      "source": "iana",
      "extensions": ["pre"]
    },
    "application/vnd.lotus-notes": {
      "source": "iana",
      "extensions": ["nsf"]
    },
    "application/vnd.lotus-organizer": {
      "source": "iana",
      "extensions": ["org"]
    },
    "application/vnd.lotus-screencam": {
      "source": "iana",
      "extensions": ["scm"]
    },
    "application/vnd.lotus-wordpro": {
      "source": "iana",
      "extensions": ["lwp"]
    },
    "application/vnd.macports.portpkg": {
      "source": "iana",
      "extensions": ["portpkg"]
    },
    "application/vnd.marlin.drm.actiontoken+xml": {
      "source": "iana"
    },
    "application/vnd.marlin.drm.conftoken+xml": {
      "source": "iana"
    },
    "application/vnd.marlin.drm.license+xml": {
      "source": "iana"
    },
    "application/vnd.marlin.drm.mdcf": {
      "source": "iana"
    },
    "application/vnd.mason+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.maxmind.maxmind-db": {
      "source": "iana"
    },
    "application/vnd.mcd": {
      "source": "iana",
      "extensions": ["mcd"]
    },
    "application/vnd.medcalcdata": {
      "source": "iana",
      "extensions": ["mc1"]
    },
    "application/vnd.mediastation.cdkey": {
      "source": "iana",
      "extensions": ["cdkey"]
    },
    "application/vnd.meridian-slingshot": {
      "source": "iana"
    },
    "application/vnd.mfer": {
      "source": "iana",
      "extensions": ["mwf"]
    },
    "application/vnd.mfmp": {
      "source": "iana",
      "extensions": ["mfm"]
    },
    "application/vnd.micro+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.micrografx.flo": {
      "source": "iana",
      "extensions": ["flo"]
    },
    "application/vnd.micrografx.igx": {
      "source": "iana",
      "extensions": ["igx"]
    },
    "application/vnd.microsoft.portable-executable": {
      "source": "iana"
    },
    "application/vnd.miele+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.mif": {
      "source": "iana",
      "extensions": ["mif"]
    },
    "application/vnd.minisoft-hp3000-save": {
      "source": "iana"
    },
    "application/vnd.mitsubishi.misty-guard.trustweb": {
      "source": "iana"
    },
    "application/vnd.mobius.daf": {
      "source": "iana",
      "extensions": ["daf"]
    },
    "application/vnd.mobius.dis": {
      "source": "iana",
      "extensions": ["dis"]
    },
    "application/vnd.mobius.mbk": {
      "source": "iana",
      "extensions": ["mbk"]
    },
    "application/vnd.mobius.mqy": {
      "source": "iana",
      "extensions": ["mqy"]
    },
    "application/vnd.mobius.msl": {
      "source": "iana",
      "extensions": ["msl"]
    },
    "application/vnd.mobius.plc": {
      "source": "iana",
      "extensions": ["plc"]
    },
    "application/vnd.mobius.txf": {
      "source": "iana",
      "extensions": ["txf"]
    },
    "application/vnd.mophun.application": {
      "source": "iana",
      "extensions": ["mpn"]
    },
    "application/vnd.mophun.certificate": {
      "source": "iana",
      "extensions": ["mpc"]
    },
    "application/vnd.motorola.flexsuite": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.adsi": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.fis": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.gotap": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.kmr": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.ttc": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.wem": {
      "source": "iana"
    },
    "application/vnd.motorola.iprm": {
      "source": "iana"
    },
    "application/vnd.mozilla.xul+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xul"]
    },
    "application/vnd.ms-3mfdocument": {
      "source": "iana"
    },
    "application/vnd.ms-artgalry": {
      "source": "iana",
      "extensions": ["cil"]
    },
    "application/vnd.ms-asf": {
      "source": "iana"
    },
    "application/vnd.ms-cab-compressed": {
      "source": "iana",
      "extensions": ["cab"]
    },
    "application/vnd.ms-color.iccprofile": {
      "source": "apache"
    },
    "application/vnd.ms-excel": {
      "source": "iana",
      "compressible": false,
      "extensions": ["xls","xlm","xla","xlc","xlt","xlw"]
    },
    "application/vnd.ms-excel.addin.macroenabled.12": {
      "source": "iana",
      "extensions": ["xlam"]
    },
    "application/vnd.ms-excel.sheet.binary.macroenabled.12": {
      "source": "iana",
      "extensions": ["xlsb"]
    },
    "application/vnd.ms-excel.sheet.macroenabled.12": {
      "source": "iana",
      "extensions": ["xlsm"]
    },
    "application/vnd.ms-excel.template.macroenabled.12": {
      "source": "iana",
      "extensions": ["xltm"]
    },
    "application/vnd.ms-fontobject": {
      "source": "iana",
      "compressible": true,
      "extensions": ["eot"]
    },
    "application/vnd.ms-htmlhelp": {
      "source": "iana",
      "extensions": ["chm"]
    },
    "application/vnd.ms-ims": {
      "source": "iana",
      "extensions": ["ims"]
    },
    "application/vnd.ms-lrm": {
      "source": "iana",
      "extensions": ["lrm"]
    },
    "application/vnd.ms-office.activex+xml": {
      "source": "iana"
    },
    "application/vnd.ms-officetheme": {
      "source": "iana",
      "extensions": ["thmx"]
    },
    "application/vnd.ms-opentype": {
      "source": "apache",
      "compressible": true
    },
    "application/vnd.ms-package.obfuscated-opentype": {
      "source": "apache"
    },
    "application/vnd.ms-pki.seccat": {
      "source": "apache",
      "extensions": ["cat"]
    },
    "application/vnd.ms-pki.stl": {
      "source": "apache",
      "extensions": ["stl"]
    },
    "application/vnd.ms-playready.initiator+xml": {
      "source": "iana"
    },
    "application/vnd.ms-powerpoint": {
      "source": "iana",
      "compressible": false,
      "extensions": ["ppt","pps","pot"]
    },
    "application/vnd.ms-powerpoint.addin.macroenabled.12": {
      "source": "iana",
      "extensions": ["ppam"]
    },
    "application/vnd.ms-powerpoint.presentation.macroenabled.12": {
      "source": "iana",
      "extensions": ["pptm"]
    },
    "application/vnd.ms-powerpoint.slide.macroenabled.12": {
      "source": "iana",
      "extensions": ["sldm"]
    },
    "application/vnd.ms-powerpoint.slideshow.macroenabled.12": {
      "source": "iana",
      "extensions": ["ppsm"]
    },
    "application/vnd.ms-powerpoint.template.macroenabled.12": {
      "source": "iana",
      "extensions": ["potm"]
    },
    "application/vnd.ms-printing.printticket+xml": {
      "source": "apache"
    },
    "application/vnd.ms-project": {
      "source": "iana",
      "extensions": ["mpp","mpt"]
    },
    "application/vnd.ms-tnef": {
      "source": "iana"
    },
    "application/vnd.ms-windows.printerpairing": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.lic-chlg-req": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.lic-resp": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.meter-chlg-req": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.meter-resp": {
      "source": "iana"
    },
    "application/vnd.ms-word.document.macroenabled.12": {
      "source": "iana",
      "extensions": ["docm"]
    },
    "application/vnd.ms-word.template.macroenabled.12": {
      "source": "iana",
      "extensions": ["dotm"]
    },
    "application/vnd.ms-works": {
      "source": "iana",
      "extensions": ["wps","wks","wcm","wdb"]
    },
    "application/vnd.ms-wpl": {
      "source": "iana",
      "extensions": ["wpl"]
    },
    "application/vnd.ms-xpsdocument": {
      "source": "iana",
      "compressible": false,
      "extensions": ["xps"]
    },
    "application/vnd.msa-disk-image": {
      "source": "iana"
    },
    "application/vnd.mseq": {
      "source": "iana",
      "extensions": ["mseq"]
    },
    "application/vnd.msign": {
      "source": "iana"
    },
    "application/vnd.multiad.creator": {
      "source": "iana"
    },
    "application/vnd.multiad.creator.cif": {
      "source": "iana"
    },
    "application/vnd.music-niff": {
      "source": "iana"
    },
    "application/vnd.musician": {
      "source": "iana",
      "extensions": ["mus"]
    },
    "application/vnd.muvee.style": {
      "source": "iana",
      "extensions": ["msty"]
    },
    "application/vnd.mynfc": {
      "source": "iana",
      "extensions": ["taglet"]
    },
    "application/vnd.ncd.control": {
      "source": "iana"
    },
    "application/vnd.ncd.reference": {
      "source": "iana"
    },
    "application/vnd.nervana": {
      "source": "iana"
    },
    "application/vnd.netfpx": {
      "source": "iana"
    },
    "application/vnd.neurolanguage.nlu": {
      "source": "iana",
      "extensions": ["nlu"]
    },
    "application/vnd.nintendo.nitro.rom": {
      "source": "iana"
    },
    "application/vnd.nintendo.snes.rom": {
      "source": "iana"
    },
    "application/vnd.nitf": {
      "source": "iana",
      "extensions": ["ntf","nitf"]
    },
    "application/vnd.noblenet-directory": {
      "source": "iana",
      "extensions": ["nnd"]
    },
    "application/vnd.noblenet-sealer": {
      "source": "iana",
      "extensions": ["nns"]
    },
    "application/vnd.noblenet-web": {
      "source": "iana",
      "extensions": ["nnw"]
    },
    "application/vnd.nokia.catalogs": {
      "source": "iana"
    },
    "application/vnd.nokia.conml+wbxml": {
      "source": "iana"
    },
    "application/vnd.nokia.conml+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.iptv.config+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.isds-radio-presets": {
      "source": "iana"
    },
    "application/vnd.nokia.landmark+wbxml": {
      "source": "iana"
    },
    "application/vnd.nokia.landmark+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.landmarkcollection+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.n-gage.ac+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.n-gage.data": {
      "source": "iana",
      "extensions": ["ngdat"]
    },
    "application/vnd.nokia.n-gage.symbian.install": {
      "source": "iana",
      "extensions": ["n-gage"]
    },
    "application/vnd.nokia.ncd": {
      "source": "iana"
    },
    "application/vnd.nokia.pcd+wbxml": {
      "source": "iana"
    },
    "application/vnd.nokia.pcd+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.radio-preset": {
      "source": "iana",
      "extensions": ["rpst"]
    },
    "application/vnd.nokia.radio-presets": {
      "source": "iana",
      "extensions": ["rpss"]
    },
    "application/vnd.novadigm.edm": {
      "source": "iana",
      "extensions": ["edm"]
    },
    "application/vnd.novadigm.edx": {
      "source": "iana",
      "extensions": ["edx"]
    },
    "application/vnd.novadigm.ext": {
      "source": "iana",
      "extensions": ["ext"]
    },
    "application/vnd.ntt-local.content-share": {
      "source": "iana"
    },
    "application/vnd.ntt-local.file-transfer": {
      "source": "iana"
    },
    "application/vnd.ntt-local.ogw_remote-access": {
      "source": "iana"
    },
    "application/vnd.ntt-local.sip-ta_remote": {
      "source": "iana"
    },
    "application/vnd.ntt-local.sip-ta_tcp_stream": {
      "source": "iana"
    },
    "application/vnd.oasis.opendocument.chart": {
      "source": "iana",
      "extensions": ["odc"]
    },
    "application/vnd.oasis.opendocument.chart-template": {
      "source": "iana",
      "extensions": ["otc"]
    },
    "application/vnd.oasis.opendocument.database": {
      "source": "iana",
      "extensions": ["odb"]
    },
    "application/vnd.oasis.opendocument.formula": {
      "source": "iana",
      "extensions": ["odf"]
    },
    "application/vnd.oasis.opendocument.formula-template": {
      "source": "iana",
      "extensions": ["odft"]
    },
    "application/vnd.oasis.opendocument.graphics": {
      "source": "iana",
      "compressible": false,
      "extensions": ["odg"]
    },
    "application/vnd.oasis.opendocument.graphics-template": {
      "source": "iana",
      "extensions": ["otg"]
    },
    "application/vnd.oasis.opendocument.image": {
      "source": "iana",
      "extensions": ["odi"]
    },
    "application/vnd.oasis.opendocument.image-template": {
      "source": "iana",
      "extensions": ["oti"]
    },
    "application/vnd.oasis.opendocument.presentation": {
      "source": "iana",
      "compressible": false,
      "extensions": ["odp"]
    },
    "application/vnd.oasis.opendocument.presentation-template": {
      "source": "iana",
      "extensions": ["otp"]
    },
    "application/vnd.oasis.opendocument.spreadsheet": {
      "source": "iana",
      "compressible": false,
      "extensions": ["ods"]
    },
    "application/vnd.oasis.opendocument.spreadsheet-template": {
      "source": "iana",
      "extensions": ["ots"]
    },
    "application/vnd.oasis.opendocument.text": {
      "source": "iana",
      "compressible": false,
      "extensions": ["odt"]
    },
    "application/vnd.oasis.opendocument.text-master": {
      "source": "iana",
      "extensions": ["odm"]
    },
    "application/vnd.oasis.opendocument.text-template": {
      "source": "iana",
      "extensions": ["ott"]
    },
    "application/vnd.oasis.opendocument.text-web": {
      "source": "iana",
      "extensions": ["oth"]
    },
    "application/vnd.obn": {
      "source": "iana"
    },
    "application/vnd.oftn.l10n+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.oipf.contentaccessdownload+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.contentaccessstreaming+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.cspg-hexbinary": {
      "source": "iana"
    },
    "application/vnd.oipf.dae.svg+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.dae.xhtml+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.mippvcontrolmessage+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.pae.gem": {
      "source": "iana"
    },
    "application/vnd.oipf.spdiscovery+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.spdlist+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.ueprofile+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.userprofile+xml": {
      "source": "iana"
    },
    "application/vnd.olpc-sugar": {
      "source": "iana",
      "extensions": ["xo"]
    },
    "application/vnd.oma-scws-config": {
      "source": "iana"
    },
    "application/vnd.oma-scws-http-request": {
      "source": "iana"
    },
    "application/vnd.oma-scws-http-response": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.associated-procedure-parameter+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.drm-trigger+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.imd+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.ltkm": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.notification+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.provisioningtrigger": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sgboot": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sgdd+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sgdu": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.simple-symbol-container": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.smartcard-trigger+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sprov+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.stkm": {
      "source": "iana"
    },
    "application/vnd.oma.cab-address-book+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-feature-handler+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-pcc+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-subs-invite+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-user-prefs+xml": {
      "source": "iana"
    },
    "application/vnd.oma.dcd": {
      "source": "iana"
    },
    "application/vnd.oma.dcdc": {
      "source": "iana"
    },
    "application/vnd.oma.dd2+xml": {
      "source": "iana",
      "extensions": ["dd2"]
    },
    "application/vnd.oma.drm.risd+xml": {
      "source": "iana"
    },
    "application/vnd.oma.group-usage-list+xml": {
      "source": "iana"
    },
    "application/vnd.oma.pal+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.detailed-progress-report+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.final-report+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.groups+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.invocation-descriptor+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.optimized-progress-report+xml": {
      "source": "iana"
    },
    "application/vnd.oma.push": {
      "source": "iana"
    },
    "application/vnd.oma.scidm.messages+xml": {
      "source": "iana"
    },
    "application/vnd.oma.xcap-directory+xml": {
      "source": "iana"
    },
    "application/vnd.omads-email+xml": {
      "source": "iana"
    },
    "application/vnd.omads-file+xml": {
      "source": "iana"
    },
    "application/vnd.omads-folder+xml": {
      "source": "iana"
    },
    "application/vnd.omaloc-supl-init": {
      "source": "iana"
    },
    "application/vnd.openeye.oeb": {
      "source": "iana"
    },
    "application/vnd.openofficeorg.extension": {
      "source": "apache",
      "extensions": ["oxt"]
    },
    "application/vnd.openxmlformats-officedocument.custom-properties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.customxmlproperties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawing+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.chart+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.extended-properties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml-template": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.comments+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.presentation": {
      "source": "iana",
      "compressible": false,
      "extensions": ["pptx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.presprops+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slide": {
      "source": "iana",
      "extensions": ["sldx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slide+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slideshow": {
      "source": "iana",
      "extensions": ["ppsx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.tags+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.template": {
      "source": "apache",
      "extensions": ["potx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.template.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml-template": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
      "source": "iana",
      "compressible": false,
      "extensions": ["xlsx"]
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.template": {
      "source": "apache",
      "extensions": ["xltx"]
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.theme+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.themeoverride+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.vmldrawing": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml-template": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document": {
      "source": "iana",
      "compressible": false,
      "extensions": ["docx"]
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.template": {
      "source": "apache",
      "extensions": ["dotx"]
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-package.core-properties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-package.relationships+xml": {
      "source": "iana"
    },
    "application/vnd.oracle.resource+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.orange.indata": {
      "source": "iana"
    },
    "application/vnd.osa.netdeploy": {
      "source": "iana"
    },
    "application/vnd.osgeo.mapguide.package": {
      "source": "iana",
      "extensions": ["mgp"]
    },
    "application/vnd.osgi.bundle": {
      "source": "iana"
    },
    "application/vnd.osgi.dp": {
      "source": "iana",
      "extensions": ["dp"]
    },
    "application/vnd.osgi.subsystem": {
      "source": "iana",
      "extensions": ["esa"]
    },
    "application/vnd.otps.ct-kip+xml": {
      "source": "iana"
    },
    "application/vnd.palm": {
      "source": "iana",
      "extensions": ["pdb","pqa","oprc"]
    },
    "application/vnd.panoply": {
      "source": "iana"
    },
    "application/vnd.paos+xml": {
      "source": "iana"
    },
    "application/vnd.paos.xml": {
      "source": "apache"
    },
    "application/vnd.pawaafile": {
      "source": "iana",
      "extensions": ["paw"]
    },
    "application/vnd.pcos": {
      "source": "iana"
    },
    "application/vnd.pg.format": {
      "source": "iana",
      "extensions": ["str"]
    },
    "application/vnd.pg.osasli": {
      "source": "iana",
      "extensions": ["ei6"]
    },
    "application/vnd.piaccess.application-licence": {
      "source": "iana"
    },
    "application/vnd.picsel": {
      "source": "iana",
      "extensions": ["efif"]
    },
    "application/vnd.pmi.widget": {
      "source": "iana",
      "extensions": ["wg"]
    },
    "application/vnd.poc.group-advertisement+xml": {
      "source": "iana"
    },
    "application/vnd.pocketlearn": {
      "source": "iana",
      "extensions": ["plf"]
    },
    "application/vnd.powerbuilder6": {
      "source": "iana",
      "extensions": ["pbd"]
    },
    "application/vnd.powerbuilder6-s": {
      "source": "iana"
    },
    "application/vnd.powerbuilder7": {
      "source": "iana"
    },
    "application/vnd.powerbuilder7-s": {
      "source": "iana"
    },
    "application/vnd.powerbuilder75": {
      "source": "iana"
    },
    "application/vnd.powerbuilder75-s": {
      "source": "iana"
    },
    "application/vnd.preminet": {
      "source": "iana"
    },
    "application/vnd.previewsystems.box": {
      "source": "iana",
      "extensions": ["box"]
    },
    "application/vnd.proteus.magazine": {
      "source": "iana",
      "extensions": ["mgz"]
    },
    "application/vnd.publishare-delta-tree": {
      "source": "iana",
      "extensions": ["qps"]
    },
    "application/vnd.pvi.ptid1": {
      "source": "iana",
      "extensions": ["ptid"]
    },
    "application/vnd.pwg-multiplexed": {
      "source": "iana"
    },
    "application/vnd.pwg-xhtml-print+xml": {
      "source": "iana"
    },
    "application/vnd.qualcomm.brew-app-res": {
      "source": "iana"
    },
    "application/vnd.quark.quarkxpress": {
      "source": "iana",
      "extensions": ["qxd","qxt","qwd","qwt","qxl","qxb"]
    },
    "application/vnd.quobject-quoxdocument": {
      "source": "iana"
    },
    "application/vnd.radisys.moml+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-conf+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-conn+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-dialog+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-stream+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-conf+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-base+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-fax-detect+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-fax-sendrecv+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-group+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-speech+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-transform+xml": {
      "source": "iana"
    },
    "application/vnd.rainstor.data": {
      "source": "iana"
    },
    "application/vnd.rapid": {
      "source": "iana"
    },
    "application/vnd.realvnc.bed": {
      "source": "iana",
      "extensions": ["bed"]
    },
    "application/vnd.recordare.musicxml": {
      "source": "iana",
      "extensions": ["mxl"]
    },
    "application/vnd.recordare.musicxml+xml": {
      "source": "iana",
      "extensions": ["musicxml"]
    },
    "application/vnd.renlearn.rlprint": {
      "source": "iana"
    },
    "application/vnd.rig.cryptonote": {
      "source": "iana",
      "extensions": ["cryptonote"]
    },
    "application/vnd.rim.cod": {
      "source": "apache",
      "extensions": ["cod"]
    },
    "application/vnd.rn-realmedia": {
      "source": "apache",
      "extensions": ["rm"]
    },
    "application/vnd.rn-realmedia-vbr": {
      "source": "apache",
      "extensions": ["rmvb"]
    },
    "application/vnd.route66.link66+xml": {
      "source": "iana",
      "extensions": ["link66"]
    },
    "application/vnd.rs-274x": {
      "source": "iana"
    },
    "application/vnd.ruckus.download": {
      "source": "iana"
    },
    "application/vnd.s3sms": {
      "source": "iana"
    },
    "application/vnd.sailingtracker.track": {
      "source": "iana",
      "extensions": ["st"]
    },
    "application/vnd.sbm.cid": {
      "source": "iana"
    },
    "application/vnd.sbm.mid2": {
      "source": "iana"
    },
    "application/vnd.scribus": {
      "source": "iana"
    },
    "application/vnd.sealed.3df": {
      "source": "iana"
    },
    "application/vnd.sealed.csf": {
      "source": "iana"
    },
    "application/vnd.sealed.doc": {
      "source": "iana"
    },
    "application/vnd.sealed.eml": {
      "source": "iana"
    },
    "application/vnd.sealed.mht": {
      "source": "iana"
    },
    "application/vnd.sealed.net": {
      "source": "iana"
    },
    "application/vnd.sealed.ppt": {
      "source": "iana"
    },
    "application/vnd.sealed.tiff": {
      "source": "iana"
    },
    "application/vnd.sealed.xls": {
      "source": "iana"
    },
    "application/vnd.sealedmedia.softseal.html": {
      "source": "iana"
    },
    "application/vnd.sealedmedia.softseal.pdf": {
      "source": "iana"
    },
    "application/vnd.seemail": {
      "source": "iana",
      "extensions": ["see"]
    },
    "application/vnd.sema": {
      "source": "iana",
      "extensions": ["sema"]
    },
    "application/vnd.semd": {
      "source": "iana",
      "extensions": ["semd"]
    },
    "application/vnd.semf": {
      "source": "iana",
      "extensions": ["semf"]
    },
    "application/vnd.shana.informed.formdata": {
      "source": "iana",
      "extensions": ["ifm"]
    },
    "application/vnd.shana.informed.formtemplate": {
      "source": "iana",
      "extensions": ["itp"]
    },
    "application/vnd.shana.informed.interchange": {
      "source": "iana",
      "extensions": ["iif"]
    },
    "application/vnd.shana.informed.package": {
      "source": "iana",
      "extensions": ["ipk"]
    },
    "application/vnd.simtech-mindmapper": {
      "source": "iana",
      "extensions": ["twd","twds"]
    },
    "application/vnd.siren+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.smaf": {
      "source": "iana",
      "extensions": ["mmf"]
    },
    "application/vnd.smart.notebook": {
      "source": "iana"
    },
    "application/vnd.smart.teacher": {
      "source": "iana",
      "extensions": ["teacher"]
    },
    "application/vnd.software602.filler.form+xml": {
      "source": "iana"
    },
    "application/vnd.software602.filler.form-xml-zip": {
      "source": "iana"
    },
    "application/vnd.solent.sdkm+xml": {
      "source": "iana",
      "extensions": ["sdkm","sdkd"]
    },
    "application/vnd.spotfire.dxp": {
      "source": "iana",
      "extensions": ["dxp"]
    },
    "application/vnd.spotfire.sfs": {
      "source": "iana",
      "extensions": ["sfs"]
    },
    "application/vnd.sss-cod": {
      "source": "iana"
    },
    "application/vnd.sss-dtf": {
      "source": "iana"
    },
    "application/vnd.sss-ntf": {
      "source": "iana"
    },
    "application/vnd.stardivision.calc": {
      "source": "apache",
      "extensions": ["sdc"]
    },
    "application/vnd.stardivision.draw": {
      "source": "apache",
      "extensions": ["sda"]
    },
    "application/vnd.stardivision.impress": {
      "source": "apache",
      "extensions": ["sdd"]
    },
    "application/vnd.stardivision.math": {
      "source": "apache",
      "extensions": ["smf"]
    },
    "application/vnd.stardivision.writer": {
      "source": "apache",
      "extensions": ["sdw","vor"]
    },
    "application/vnd.stardivision.writer-global": {
      "source": "apache",
      "extensions": ["sgl"]
    },
    "application/vnd.stepmania.package": {
      "source": "iana",
      "extensions": ["smzip"]
    },
    "application/vnd.stepmania.stepchart": {
      "source": "iana",
      "extensions": ["sm"]
    },
    "application/vnd.street-stream": {
      "source": "iana"
    },
    "application/vnd.sun.wadl+xml": {
      "source": "iana"
    },
    "application/vnd.sun.xml.calc": {
      "source": "apache",
      "extensions": ["sxc"]
    },
    "application/vnd.sun.xml.calc.template": {
      "source": "apache",
      "extensions": ["stc"]
    },
    "application/vnd.sun.xml.draw": {
      "source": "apache",
      "extensions": ["sxd"]
    },
    "application/vnd.sun.xml.draw.template": {
      "source": "apache",
      "extensions": ["std"]
    },
    "application/vnd.sun.xml.impress": {
      "source": "apache",
      "extensions": ["sxi"]
    },
    "application/vnd.sun.xml.impress.template": {
      "source": "apache",
      "extensions": ["sti"]
    },
    "application/vnd.sun.xml.math": {
      "source": "apache",
      "extensions": ["sxm"]
    },
    "application/vnd.sun.xml.writer": {
      "source": "apache",
      "extensions": ["sxw"]
    },
    "application/vnd.sun.xml.writer.global": {
      "source": "apache",
      "extensions": ["sxg"]
    },
    "application/vnd.sun.xml.writer.template": {
      "source": "apache",
      "extensions": ["stw"]
    },
    "application/vnd.sus-calendar": {
      "source": "iana",
      "extensions": ["sus","susp"]
    },
    "application/vnd.svd": {
      "source": "iana",
      "extensions": ["svd"]
    },
    "application/vnd.swiftview-ics": {
      "source": "iana"
    },
    "application/vnd.symbian.install": {
      "source": "apache",
      "extensions": ["sis","sisx"]
    },
    "application/vnd.syncml+xml": {
      "source": "iana",
      "extensions": ["xsm"]
    },
    "application/vnd.syncml.dm+wbxml": {
      "source": "iana",
      "extensions": ["bdm"]
    },
    "application/vnd.syncml.dm+xml": {
      "source": "iana",
      "extensions": ["xdm"]
    },
    "application/vnd.syncml.dm.notification": {
      "source": "iana"
    },
    "application/vnd.syncml.dmddf+wbxml": {
      "source": "iana"
    },
    "application/vnd.syncml.dmddf+xml": {
      "source": "iana"
    },
    "application/vnd.syncml.dmtnds+wbxml": {
      "source": "iana"
    },
    "application/vnd.syncml.dmtnds+xml": {
      "source": "iana"
    },
    "application/vnd.syncml.ds.notification": {
      "source": "iana"
    },
    "application/vnd.tao.intent-module-archive": {
      "source": "iana",
      "extensions": ["tao"]
    },
    "application/vnd.tcpdump.pcap": {
      "source": "iana",
      "extensions": ["pcap","cap","dmp"]
    },
    "application/vnd.tmd.mediaflex.api+xml": {
      "source": "iana"
    },
    "application/vnd.tmobile-livetv": {
      "source": "iana",
      "extensions": ["tmo"]
    },
    "application/vnd.trid.tpt": {
      "source": "iana",
      "extensions": ["tpt"]
    },
    "application/vnd.triscape.mxs": {
      "source": "iana",
      "extensions": ["mxs"]
    },
    "application/vnd.trueapp": {
      "source": "iana",
      "extensions": ["tra"]
    },
    "application/vnd.truedoc": {
      "source": "iana"
    },
    "application/vnd.ubisoft.webplayer": {
      "source": "iana"
    },
    "application/vnd.ufdl": {
      "source": "iana",
      "extensions": ["ufd","ufdl"]
    },
    "application/vnd.uiq.theme": {
      "source": "iana",
      "extensions": ["utz"]
    },
    "application/vnd.umajin": {
      "source": "iana",
      "extensions": ["umj"]
    },
    "application/vnd.unity": {
      "source": "iana",
      "extensions": ["unityweb"]
    },
    "application/vnd.uoml+xml": {
      "source": "iana",
      "extensions": ["uoml"]
    },
    "application/vnd.uplanet.alert": {
      "source": "iana"
    },
    "application/vnd.uplanet.alert-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.bearer-choice": {
      "source": "iana"
    },
    "application/vnd.uplanet.bearer-choice-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.cacheop": {
      "source": "iana"
    },
    "application/vnd.uplanet.cacheop-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.channel": {
      "source": "iana"
    },
    "application/vnd.uplanet.channel-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.list": {
      "source": "iana"
    },
    "application/vnd.uplanet.list-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.listcmd": {
      "source": "iana"
    },
    "application/vnd.uplanet.listcmd-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.signal": {
      "source": "iana"
    },
    "application/vnd.valve.source.material": {
      "source": "iana"
    },
    "application/vnd.vcx": {
      "source": "iana",
      "extensions": ["vcx"]
    },
    "application/vnd.vd-study": {
      "source": "iana"
    },
    "application/vnd.vectorworks": {
      "source": "iana"
    },
    "application/vnd.verimatrix.vcas": {
      "source": "iana"
    },
    "application/vnd.vidsoft.vidconference": {
      "source": "iana"
    },
    "application/vnd.visio": {
      "source": "iana",
      "extensions": ["vsd","vst","vss","vsw"]
    },
    "application/vnd.visionary": {
      "source": "iana",
      "extensions": ["vis"]
    },
    "application/vnd.vividence.scriptfile": {
      "source": "iana"
    },
    "application/vnd.vsf": {
      "source": "iana",
      "extensions": ["vsf"]
    },
    "application/vnd.wap.sic": {
      "source": "iana"
    },
    "application/vnd.wap.slc": {
      "source": "iana"
    },
    "application/vnd.wap.wbxml": {
      "source": "iana",
      "extensions": ["wbxml"]
    },
    "application/vnd.wap.wmlc": {
      "source": "iana",
      "extensions": ["wmlc"]
    },
    "application/vnd.wap.wmlscriptc": {
      "source": "iana",
      "extensions": ["wmlsc"]
    },
    "application/vnd.webturbo": {
      "source": "iana",
      "extensions": ["wtb"]
    },
    "application/vnd.wfa.p2p": {
      "source": "iana"
    },
    "application/vnd.wfa.wsc": {
      "source": "iana"
    },
    "application/vnd.windows.devicepairing": {
      "source": "iana"
    },
    "application/vnd.wmc": {
      "source": "iana"
    },
    "application/vnd.wmf.bootstrap": {
      "source": "iana"
    },
    "application/vnd.wolfram.mathematica": {
      "source": "iana"
    },
    "application/vnd.wolfram.mathematica.package": {
      "source": "iana"
    },
    "application/vnd.wolfram.player": {
      "source": "iana",
      "extensions": ["nbp"]
    },
    "application/vnd.wordperfect": {
      "source": "iana",
      "extensions": ["wpd"]
    },
    "application/vnd.wqd": {
      "source": "iana",
      "extensions": ["wqd"]
    },
    "application/vnd.wrq-hp3000-labelled": {
      "source": "iana"
    },
    "application/vnd.wt.stf": {
      "source": "iana",
      "extensions": ["stf"]
    },
    "application/vnd.wv.csp+wbxml": {
      "source": "iana"
    },
    "application/vnd.wv.csp+xml": {
      "source": "iana"
    },
    "application/vnd.wv.ssp+xml": {
      "source": "iana"
    },
    "application/vnd.xacml+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.xara": {
      "source": "iana",
      "extensions": ["xar"]
    },
    "application/vnd.xfdl": {
      "source": "iana",
      "extensions": ["xfdl"]
    },
    "application/vnd.xfdl.webform": {
      "source": "iana"
    },
    "application/vnd.xmi+xml": {
      "source": "iana"
    },
    "application/vnd.xmpie.cpkg": {
      "source": "iana"
    },
    "application/vnd.xmpie.dpkg": {
      "source": "iana"
    },
    "application/vnd.xmpie.plan": {
      "source": "iana"
    },
    "application/vnd.xmpie.ppkg": {
      "source": "iana"
    },
    "application/vnd.xmpie.xlim": {
      "source": "iana"
    },
    "application/vnd.yamaha.hv-dic": {
      "source": "iana",
      "extensions": ["hvd"]
    },
    "application/vnd.yamaha.hv-script": {
      "source": "iana",
      "extensions": ["hvs"]
    },
    "application/vnd.yamaha.hv-voice": {
      "source": "iana",
      "extensions": ["hvp"]
    },
    "application/vnd.yamaha.openscoreformat": {
      "source": "iana",
      "extensions": ["osf"]
    },
    "application/vnd.yamaha.openscoreformat.osfpvg+xml": {
      "source": "iana",
      "extensions": ["osfpvg"]
    },
    "application/vnd.yamaha.remote-setup": {
      "source": "iana"
    },
    "application/vnd.yamaha.smaf-audio": {
      "source": "iana",
      "extensions": ["saf"]
    },
    "application/vnd.yamaha.smaf-phrase": {
      "source": "iana",
      "extensions": ["spf"]
    },
    "application/vnd.yamaha.through-ngn": {
      "source": "iana"
    },
    "application/vnd.yamaha.tunnel-udpencap": {
      "source": "iana"
    },
    "application/vnd.yaoweme": {
      "source": "iana"
    },
    "application/vnd.yellowriver-custom-menu": {
      "source": "iana",
      "extensions": ["cmp"]
    },
    "application/vnd.zul": {
      "source": "iana",
      "extensions": ["zir","zirz"]
    },
    "application/vnd.zzazz.deck+xml": {
      "source": "iana",
      "extensions": ["zaz"]
    },
    "application/voicexml+xml": {
      "source": "iana",
      "extensions": ["vxml"]
    },
    "application/vq-rtcpxr": {
      "source": "iana"
    },
    "application/watcherinfo+xml": {
      "source": "iana"
    },
    "application/whoispp-query": {
      "source": "iana"
    },
    "application/whoispp-response": {
      "source": "iana"
    },
    "application/widget": {
      "source": "iana",
      "extensions": ["wgt"]
    },
    "application/winhlp": {
      "source": "apache",
      "extensions": ["hlp"]
    },
    "application/wita": {
      "source": "iana"
    },
    "application/wordperfect5.1": {
      "source": "iana"
    },
    "application/wsdl+xml": {
      "source": "iana",
      "extensions": ["wsdl"]
    },
    "application/wspolicy+xml": {
      "source": "iana",
      "extensions": ["wspolicy"]
    },
    "application/x-7z-compressed": {
      "source": "apache",
      "compressible": false,
      "extensions": ["7z"]
    },
    "application/x-abiword": {
      "source": "apache",
      "extensions": ["abw"]
    },
    "application/x-ace-compressed": {
      "source": "apache",
      "extensions": ["ace"]
    },
    "application/x-amf": {
      "source": "apache"
    },
    "application/x-apple-diskimage": {
      "source": "apache",
      "extensions": ["dmg"]
    },
    "application/x-authorware-bin": {
      "source": "apache",
      "extensions": ["aab","x32","u32","vox"]
    },
    "application/x-authorware-map": {
      "source": "apache",
      "extensions": ["aam"]
    },
    "application/x-authorware-seg": {
      "source": "apache",
      "extensions": ["aas"]
    },
    "application/x-bcpio": {
      "source": "apache",
      "extensions": ["bcpio"]
    },
    "application/x-bdoc": {
      "compressible": false,
      "extensions": ["bdoc"]
    },
    "application/x-bittorrent": {
      "source": "apache",
      "extensions": ["torrent"]
    },
    "application/x-blorb": {
      "source": "apache",
      "extensions": ["blb","blorb"]
    },
    "application/x-bzip": {
      "source": "apache",
      "compressible": false,
      "extensions": ["bz"]
    },
    "application/x-bzip2": {
      "source": "apache",
      "compressible": false,
      "extensions": ["bz2","boz"]
    },
    "application/x-cbr": {
      "source": "apache",
      "extensions": ["cbr","cba","cbt","cbz","cb7"]
    },
    "application/x-cdlink": {
      "source": "apache",
      "extensions": ["vcd"]
    },
    "application/x-cfs-compressed": {
      "source": "apache",
      "extensions": ["cfs"]
    },
    "application/x-chat": {
      "source": "apache",
      "extensions": ["chat"]
    },
    "application/x-chess-pgn": {
      "source": "apache",
      "extensions": ["pgn"]
    },
    "application/x-chrome-extension": {
      "extensions": ["crx"]
    },
    "application/x-compress": {
      "source": "apache"
    },
    "application/x-conference": {
      "source": "apache",
      "extensions": ["nsc"]
    },
    "application/x-cpio": {
      "source": "apache",
      "extensions": ["cpio"]
    },
    "application/x-csh": {
      "source": "apache",
      "extensions": ["csh"]
    },
    "application/x-deb": {
      "compressible": false
    },
    "application/x-debian-package": {
      "source": "apache",
      "extensions": ["deb","udeb"]
    },
    "application/x-dgc-compressed": {
      "source": "apache",
      "extensions": ["dgc"]
    },
    "application/x-director": {
      "source": "apache",
      "extensions": ["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]
    },
    "application/x-doom": {
      "source": "apache",
      "extensions": ["wad"]
    },
    "application/x-dtbncx+xml": {
      "source": "apache",
      "extensions": ["ncx"]
    },
    "application/x-dtbook+xml": {
      "source": "apache",
      "extensions": ["dtb"]
    },
    "application/x-dtbresource+xml": {
      "source": "apache",
      "extensions": ["res"]
    },
    "application/x-dvi": {
      "source": "apache",
      "compressible": false,
      "extensions": ["dvi"]
    },
    "application/x-envoy": {
      "source": "apache",
      "extensions": ["evy"]
    },
    "application/x-eva": {
      "source": "apache",
      "extensions": ["eva"]
    },
    "application/x-font-bdf": {
      "source": "apache",
      "extensions": ["bdf"]
    },
    "application/x-font-dos": {
      "source": "apache"
    },
    "application/x-font-framemaker": {
      "source": "apache"
    },
    "application/x-font-ghostscript": {
      "source": "apache",
      "extensions": ["gsf"]
    },
    "application/x-font-libgrx": {
      "source": "apache"
    },
    "application/x-font-linux-psf": {
      "source": "apache",
      "extensions": ["psf"]
    },
    "application/x-font-otf": {
      "source": "apache",
      "compressible": true,
      "extensions": ["otf"]
    },
    "application/x-font-pcf": {
      "source": "apache",
      "extensions": ["pcf"]
    },
    "application/x-font-snf": {
      "source": "apache",
      "extensions": ["snf"]
    },
    "application/x-font-speedo": {
      "source": "apache"
    },
    "application/x-font-sunos-news": {
      "source": "apache"
    },
    "application/x-font-ttf": {
      "source": "apache",
      "compressible": true,
      "extensions": ["ttf","ttc"]
    },
    "application/x-font-type1": {
      "source": "apache",
      "extensions": ["pfa","pfb","pfm","afm"]
    },
    "application/x-font-vfont": {
      "source": "apache"
    },
    "application/x-freearc": {
      "source": "apache",
      "extensions": ["arc"]
    },
    "application/x-futuresplash": {
      "source": "apache",
      "extensions": ["spl"]
    },
    "application/x-gca-compressed": {
      "source": "apache",
      "extensions": ["gca"]
    },
    "application/x-glulx": {
      "source": "apache",
      "extensions": ["ulx"]
    },
    "application/x-gnumeric": {
      "source": "apache",
      "extensions": ["gnumeric"]
    },
    "application/x-gramps-xml": {
      "source": "apache",
      "extensions": ["gramps"]
    },
    "application/x-gtar": {
      "source": "apache",
      "extensions": ["gtar"]
    },
    "application/x-gzip": {
      "source": "apache"
    },
    "application/x-hdf": {
      "source": "apache",
      "extensions": ["hdf"]
    },
    "application/x-install-instructions": {
      "source": "apache",
      "extensions": ["install"]
    },
    "application/x-iso9660-image": {
      "source": "apache",
      "extensions": ["iso"]
    },
    "application/x-java-jnlp-file": {
      "source": "apache",
      "compressible": false,
      "extensions": ["jnlp"]
    },
    "application/x-javascript": {
      "compressible": true
    },
    "application/x-latex": {
      "source": "apache",
      "compressible": false,
      "extensions": ["latex"]
    },
    "application/x-lua-bytecode": {
      "extensions": ["luac"]
    },
    "application/x-lzh-compressed": {
      "source": "apache",
      "extensions": ["lzh","lha"]
    },
    "application/x-mie": {
      "source": "apache",
      "extensions": ["mie"]
    },
    "application/x-mobipocket-ebook": {
      "source": "apache",
      "extensions": ["prc","mobi"]
    },
    "application/x-mpegurl": {
      "compressible": false
    },
    "application/x-ms-application": {
      "source": "apache",
      "extensions": ["application"]
    },
    "application/x-ms-shortcut": {
      "source": "apache",
      "extensions": ["lnk"]
    },
    "application/x-ms-wmd": {
      "source": "apache",
      "extensions": ["wmd"]
    },
    "application/x-ms-wmz": {
      "source": "apache",
      "extensions": ["wmz"]
    },
    "application/x-ms-xbap": {
      "source": "apache",
      "extensions": ["xbap"]
    },
    "application/x-msaccess": {
      "source": "apache",
      "extensions": ["mdb"]
    },
    "application/x-msbinder": {
      "source": "apache",
      "extensions": ["obd"]
    },
    "application/x-mscardfile": {
      "source": "apache",
      "extensions": ["crd"]
    },
    "application/x-msclip": {
      "source": "apache",
      "extensions": ["clp"]
    },
    "application/x-msdownload": {
      "source": "apache",
      "extensions": ["exe","dll","com","bat","msi"]
    },
    "application/x-msmediaview": {
      "source": "apache",
      "extensions": ["mvb","m13","m14"]
    },
    "application/x-msmetafile": {
      "source": "apache",
      "extensions": ["wmf","wmz","emf","emz"]
    },
    "application/x-msmoney": {
      "source": "apache",
      "extensions": ["mny"]
    },
    "application/x-mspublisher": {
      "source": "apache",
      "extensions": ["pub"]
    },
    "application/x-msschedule": {
      "source": "apache",
      "extensions": ["scd"]
    },
    "application/x-msterminal": {
      "source": "apache",
      "extensions": ["trm"]
    },
    "application/x-mswrite": {
      "source": "apache",
      "extensions": ["wri"]
    },
    "application/x-netcdf": {
      "source": "apache",
      "extensions": ["nc","cdf"]
    },
    "application/x-ns-proxy-autoconfig": {
      "compressible": true,
      "extensions": ["pac"]
    },
    "application/x-nzb": {
      "source": "apache",
      "extensions": ["nzb"]
    },
    "application/x-pkcs12": {
      "source": "apache",
      "compressible": false,
      "extensions": ["p12","pfx"]
    },
    "application/x-pkcs7-certificates": {
      "source": "apache",
      "extensions": ["p7b","spc"]
    },
    "application/x-pkcs7-certreqresp": {
      "source": "apache",
      "extensions": ["p7r"]
    },
    "application/x-rar-compressed": {
      "source": "apache",
      "compressible": false,
      "extensions": ["rar"]
    },
    "application/x-research-info-systems": {
      "source": "apache",
      "extensions": ["ris"]
    },
    "application/x-sh": {
      "source": "apache",
      "compressible": true,
      "extensions": ["sh"]
    },
    "application/x-shar": {
      "source": "apache",
      "extensions": ["shar"]
    },
    "application/x-shockwave-flash": {
      "source": "apache",
      "compressible": false,
      "extensions": ["swf"]
    },
    "application/x-silverlight-app": {
      "source": "apache",
      "extensions": ["xap"]
    },
    "application/x-sql": {
      "source": "apache",
      "extensions": ["sql"]
    },
    "application/x-stuffit": {
      "source": "apache",
      "compressible": false,
      "extensions": ["sit"]
    },
    "application/x-stuffitx": {
      "source": "apache",
      "extensions": ["sitx"]
    },
    "application/x-subrip": {
      "source": "apache",
      "extensions": ["srt"]
    },
    "application/x-sv4cpio": {
      "source": "apache",
      "extensions": ["sv4cpio"]
    },
    "application/x-sv4crc": {
      "source": "apache",
      "extensions": ["sv4crc"]
    },
    "application/x-t3vm-image": {
      "source": "apache",
      "extensions": ["t3"]
    },
    "application/x-tads": {
      "source": "apache",
      "extensions": ["gam"]
    },
    "application/x-tar": {
      "source": "apache",
      "compressible": true,
      "extensions": ["tar"]
    },
    "application/x-tcl": {
      "source": "apache",
      "extensions": ["tcl"]
    },
    "application/x-tex": {
      "source": "apache",
      "extensions": ["tex"]
    },
    "application/x-tex-tfm": {
      "source": "apache",
      "extensions": ["tfm"]
    },
    "application/x-texinfo": {
      "source": "apache",
      "extensions": ["texinfo","texi"]
    },
    "application/x-tgif": {
      "source": "apache",
      "extensions": ["obj"]
    },
    "application/x-ustar": {
      "source": "apache",
      "extensions": ["ustar"]
    },
    "application/x-wais-source": {
      "source": "apache",
      "extensions": ["src"]
    },
    "application/x-web-app-manifest+json": {
      "compressible": true,
      "extensions": ["webapp"]
    },
    "application/x-www-form-urlencoded": {
      "source": "iana",
      "compressible": true
    },
    "application/x-x509-ca-cert": {
      "source": "apache",
      "extensions": ["der","crt"]
    },
    "application/x-xfig": {
      "source": "apache",
      "extensions": ["fig"]
    },
    "application/x-xliff+xml": {
      "source": "apache",
      "extensions": ["xlf"]
    },
    "application/x-xpinstall": {
      "source": "apache",
      "compressible": false,
      "extensions": ["xpi"]
    },
    "application/x-xz": {
      "source": "apache",
      "extensions": ["xz"]
    },
    "application/x-zmachine": {
      "source": "apache",
      "extensions": ["z1","z2","z3","z4","z5","z6","z7","z8"]
    },
    "application/x400-bp": {
      "source": "iana"
    },
    "application/xacml+xml": {
      "source": "iana"
    },
    "application/xaml+xml": {
      "source": "apache",
      "extensions": ["xaml"]
    },
    "application/xcap-att+xml": {
      "source": "iana"
    },
    "application/xcap-caps+xml": {
      "source": "iana"
    },
    "application/xcap-diff+xml": {
      "source": "iana",
      "extensions": ["xdf"]
    },
    "application/xcap-el+xml": {
      "source": "iana"
    },
    "application/xcap-error+xml": {
      "source": "iana"
    },
    "application/xcap-ns+xml": {
      "source": "iana"
    },
    "application/xcon-conference-info+xml": {
      "source": "iana"
    },
    "application/xcon-conference-info-diff+xml": {
      "source": "iana"
    },
    "application/xenc+xml": {
      "source": "iana",
      "extensions": ["xenc"]
    },
    "application/xhtml+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xhtml","xht"]
    },
    "application/xhtml-voice+xml": {
      "source": "apache"
    },
    "application/xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xml","xsl","xsd"]
    },
    "application/xml-dtd": {
      "source": "iana",
      "compressible": true,
      "extensions": ["dtd"]
    },
    "application/xml-external-parsed-entity": {
      "source": "iana"
    },
    "application/xml-patch+xml": {
      "source": "iana"
    },
    "application/xmpp+xml": {
      "source": "iana"
    },
    "application/xop+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xop"]
    },
    "application/xproc+xml": {
      "source": "apache",
      "extensions": ["xpl"]
    },
    "application/xslt+xml": {
      "source": "iana",
      "extensions": ["xslt"]
    },
    "application/xspf+xml": {
      "source": "apache",
      "extensions": ["xspf"]
    },
    "application/xv+xml": {
      "source": "iana",
      "extensions": ["mxml","xhvml","xvml","xvm"]
    },
    "application/yang": {
      "source": "iana",
      "extensions": ["yang"]
    },
    "application/yin+xml": {
      "source": "iana",
      "extensions": ["yin"]
    },
    "application/zip": {
      "source": "iana",
      "compressible": false,
      "extensions": ["zip"]
    },
    "application/zlib": {
      "source": "iana"
    },
    "audio/1d-interleaved-parityfec": {
      "source": "iana"
    },
    "audio/32kadpcm": {
      "source": "iana"
    },
    "audio/3gpp": {
      "source": "iana"
    },
    "audio/3gpp2": {
      "source": "iana"
    },
    "audio/ac3": {
      "source": "iana"
    },
    "audio/adpcm": {
      "source": "apache",
      "extensions": ["adp"]
    },
    "audio/amr": {
      "source": "iana"
    },
    "audio/amr-wb": {
      "source": "iana"
    },
    "audio/amr-wb+": {
      "source": "iana"
    },
    "audio/aptx": {
      "source": "iana"
    },
    "audio/asc": {
      "source": "iana"
    },
    "audio/atrac-advanced-lossless": {
      "source": "iana"
    },
    "audio/atrac-x": {
      "source": "iana"
    },
    "audio/atrac3": {
      "source": "iana"
    },
    "audio/basic": {
      "source": "iana",
      "compressible": false,
      "extensions": ["au","snd"]
    },
    "audio/bv16": {
      "source": "iana"
    },
    "audio/bv32": {
      "source": "iana"
    },
    "audio/clearmode": {
      "source": "iana"
    },
    "audio/cn": {
      "source": "iana"
    },
    "audio/dat12": {
      "source": "iana"
    },
    "audio/dls": {
      "source": "iana"
    },
    "audio/dsr-es201108": {
      "source": "iana"
    },
    "audio/dsr-es202050": {
      "source": "iana"
    },
    "audio/dsr-es202211": {
      "source": "iana"
    },
    "audio/dsr-es202212": {
      "source": "iana"
    },
    "audio/dv": {
      "source": "iana"
    },
    "audio/dvi4": {
      "source": "iana"
    },
    "audio/eac3": {
      "source": "iana"
    },
    "audio/encaprtp": {
      "source": "iana"
    },
    "audio/evrc": {
      "source": "iana"
    },
    "audio/evrc-qcp": {
      "source": "iana"
    },
    "audio/evrc0": {
      "source": "iana"
    },
    "audio/evrc1": {
      "source": "iana"
    },
    "audio/evrcb": {
      "source": "iana"
    },
    "audio/evrcb0": {
      "source": "iana"
    },
    "audio/evrcb1": {
      "source": "iana"
    },
    "audio/evrcnw": {
      "source": "iana"
    },
    "audio/evrcnw0": {
      "source": "iana"
    },
    "audio/evrcnw1": {
      "source": "iana"
    },
    "audio/evrcwb": {
      "source": "iana"
    },
    "audio/evrcwb0": {
      "source": "iana"
    },
    "audio/evrcwb1": {
      "source": "iana"
    },
    "audio/fwdred": {
      "source": "iana"
    },
    "audio/g719": {
      "source": "iana"
    },
    "audio/g722": {
      "source": "iana"
    },
    "audio/g7221": {
      "source": "iana"
    },
    "audio/g723": {
      "source": "iana"
    },
    "audio/g726-16": {
      "source": "iana"
    },
    "audio/g726-24": {
      "source": "iana"
    },
    "audio/g726-32": {
      "source": "iana"
    },
    "audio/g726-40": {
      "source": "iana"
    },
    "audio/g728": {
      "source": "iana"
    },
    "audio/g729": {
      "source": "iana"
    },
    "audio/g7291": {
      "source": "iana"
    },
    "audio/g729d": {
      "source": "iana"
    },
    "audio/g729e": {
      "source": "iana"
    },
    "audio/gsm": {
      "source": "iana"
    },
    "audio/gsm-efr": {
      "source": "iana"
    },
    "audio/gsm-hr-08": {
      "source": "iana"
    },
    "audio/ilbc": {
      "source": "iana"
    },
    "audio/ip-mr_v2.5": {
      "source": "iana"
    },
    "audio/isac": {
      "source": "apache"
    },
    "audio/l16": {
      "source": "iana"
    },
    "audio/l20": {
      "source": "iana"
    },
    "audio/l24": {
      "source": "iana",
      "compressible": false
    },
    "audio/l8": {
      "source": "iana"
    },
    "audio/lpc": {
      "source": "iana"
    },
    "audio/midi": {
      "source": "apache",
      "extensions": ["mid","midi","kar","rmi"]
    },
    "audio/mobile-xmf": {
      "source": "iana"
    },
    "audio/mp4": {
      "source": "iana",
      "compressible": false,
      "extensions": ["mp4a","m4a"]
    },
    "audio/mp4a-latm": {
      "source": "iana"
    },
    "audio/mpa": {
      "source": "iana"
    },
    "audio/mpa-robust": {
      "source": "iana"
    },
    "audio/mpeg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["mpga","mp2","mp2a","mp3","m2a","m3a"]
    },
    "audio/mpeg4-generic": {
      "source": "iana"
    },
    "audio/musepack": {
      "source": "apache"
    },
    "audio/ogg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["oga","ogg","spx"]
    },
    "audio/opus": {
      "source": "iana"
    },
    "audio/parityfec": {
      "source": "iana"
    },
    "audio/pcma": {
      "source": "iana"
    },
    "audio/pcma-wb": {
      "source": "iana"
    },
    "audio/pcmu": {
      "source": "iana"
    },
    "audio/pcmu-wb": {
      "source": "iana"
    },
    "audio/prs.sid": {
      "source": "iana"
    },
    "audio/qcelp": {
      "source": "iana"
    },
    "audio/raptorfec": {
      "source": "iana"
    },
    "audio/red": {
      "source": "iana"
    },
    "audio/rtp-enc-aescm128": {
      "source": "iana"
    },
    "audio/rtp-midi": {
      "source": "iana"
    },
    "audio/rtploopback": {
      "source": "iana"
    },
    "audio/rtx": {
      "source": "iana"
    },
    "audio/s3m": {
      "source": "apache",
      "extensions": ["s3m"]
    },
    "audio/silk": {
      "source": "apache",
      "extensions": ["sil"]
    },
    "audio/smv": {
      "source": "iana"
    },
    "audio/smv-qcp": {
      "source": "iana"
    },
    "audio/smv0": {
      "source": "iana"
    },
    "audio/sp-midi": {
      "source": "iana"
    },
    "audio/speex": {
      "source": "iana"
    },
    "audio/t140c": {
      "source": "iana"
    },
    "audio/t38": {
      "source": "iana"
    },
    "audio/telephone-event": {
      "source": "iana"
    },
    "audio/tone": {
      "source": "iana"
    },
    "audio/uemclip": {
      "source": "iana"
    },
    "audio/ulpfec": {
      "source": "iana"
    },
    "audio/vdvi": {
      "source": "iana"
    },
    "audio/vmr-wb": {
      "source": "iana"
    },
    "audio/vnd.3gpp.iufp": {
      "source": "iana"
    },
    "audio/vnd.4sb": {
      "source": "iana"
    },
    "audio/vnd.audiokoz": {
      "source": "iana"
    },
    "audio/vnd.celp": {
      "source": "iana"
    },
    "audio/vnd.cisco.nse": {
      "source": "iana"
    },
    "audio/vnd.cmles.radio-events": {
      "source": "iana"
    },
    "audio/vnd.cns.anp1": {
      "source": "iana"
    },
    "audio/vnd.cns.inf1": {
      "source": "iana"
    },
    "audio/vnd.dece.audio": {
      "source": "iana",
      "extensions": ["uva","uvva"]
    },
    "audio/vnd.digital-winds": {
      "source": "iana",
      "extensions": ["eol"]
    },
    "audio/vnd.dlna.adts": {
      "source": "iana"
    },
    "audio/vnd.dolby.heaac.1": {
      "source": "iana"
    },
    "audio/vnd.dolby.heaac.2": {
      "source": "iana"
    },
    "audio/vnd.dolby.mlp": {
      "source": "iana"
    },
    "audio/vnd.dolby.mps": {
      "source": "iana"
    },
    "audio/vnd.dolby.pl2": {
      "source": "iana"
    },
    "audio/vnd.dolby.pl2x": {
      "source": "iana"
    },
    "audio/vnd.dolby.pl2z": {
      "source": "iana"
    },
    "audio/vnd.dolby.pulse.1": {
      "source": "iana"
    },
    "audio/vnd.dra": {
      "source": "iana",
      "extensions": ["dra"]
    },
    "audio/vnd.dts": {
      "source": "iana",
      "extensions": ["dts"]
    },
    "audio/vnd.dts.hd": {
      "source": "iana",
      "extensions": ["dtshd"]
    },
    "audio/vnd.dvb.file": {
      "source": "iana"
    },
    "audio/vnd.everad.plj": {
      "source": "iana"
    },
    "audio/vnd.hns.audio": {
      "source": "iana"
    },
    "audio/vnd.lucent.voice": {
      "source": "iana",
      "extensions": ["lvp"]
    },
    "audio/vnd.ms-playready.media.pya": {
      "source": "iana",
      "extensions": ["pya"]
    },
    "audio/vnd.nokia.mobile-xmf": {
      "source": "iana"
    },
    "audio/vnd.nortel.vbk": {
      "source": "iana"
    },
    "audio/vnd.nuera.ecelp4800": {
      "source": "iana",
      "extensions": ["ecelp4800"]
    },
    "audio/vnd.nuera.ecelp7470": {
      "source": "iana",
      "extensions": ["ecelp7470"]
    },
    "audio/vnd.nuera.ecelp9600": {
      "source": "iana",
      "extensions": ["ecelp9600"]
    },
    "audio/vnd.octel.sbc": {
      "source": "iana"
    },
    "audio/vnd.qcelp": {
      "source": "iana"
    },
    "audio/vnd.rhetorex.32kadpcm": {
      "source": "iana"
    },
    "audio/vnd.rip": {
      "source": "iana",
      "extensions": ["rip"]
    },
    "audio/vnd.rn-realaudio": {
      "compressible": false
    },
    "audio/vnd.sealedmedia.softseal.mpeg": {
      "source": "iana"
    },
    "audio/vnd.vmx.cvsd": {
      "source": "iana"
    },
    "audio/vnd.wave": {
      "compressible": false
    },
    "audio/vorbis": {
      "source": "iana",
      "compressible": false
    },
    "audio/vorbis-config": {
      "source": "iana"
    },
    "audio/wav": {
      "compressible": false,
      "extensions": ["wav"]
    },
    "audio/wave": {
      "compressible": false,
      "extensions": ["wav"]
    },
    "audio/webm": {
      "source": "apache",
      "compressible": false,
      "extensions": ["weba"]
    },
    "audio/x-aac": {
      "source": "apache",
      "compressible": false,
      "extensions": ["aac"]
    },
    "audio/x-aiff": {
      "source": "apache",
      "extensions": ["aif","aiff","aifc"]
    },
    "audio/x-caf": {
      "source": "apache",
      "compressible": false,
      "extensions": ["caf"]
    },
    "audio/x-flac": {
      "source": "apache",
      "extensions": ["flac"]
    },
    "audio/x-matroska": {
      "source": "apache",
      "extensions": ["mka"]
    },
    "audio/x-mpegurl": {
      "source": "apache",
      "extensions": ["m3u"]
    },
    "audio/x-ms-wax": {
      "source": "apache",
      "extensions": ["wax"]
    },
    "audio/x-ms-wma": {
      "source": "apache",
      "extensions": ["wma"]
    },
    "audio/x-pn-realaudio": {
      "source": "apache",
      "extensions": ["ram","ra"]
    },
    "audio/x-pn-realaudio-plugin": {
      "source": "apache",
      "extensions": ["rmp"]
    },
    "audio/x-tta": {
      "source": "apache"
    },
    "audio/x-wav": {
      "source": "apache",
      "extensions": ["wav"]
    },
    "audio/xm": {
      "source": "apache",
      "extensions": ["xm"]
    },
    "chemical/x-cdx": {
      "source": "apache",
      "extensions": ["cdx"]
    },
    "chemical/x-cif": {
      "source": "apache",
      "extensions": ["cif"]
    },
    "chemical/x-cmdf": {
      "source": "apache",
      "extensions": ["cmdf"]
    },
    "chemical/x-cml": {
      "source": "apache",
      "extensions": ["cml"]
    },
    "chemical/x-csml": {
      "source": "apache",
      "extensions": ["csml"]
    },
    "chemical/x-pdb": {
      "source": "apache"
    },
    "chemical/x-xyz": {
      "source": "apache",
      "extensions": ["xyz"]
    },
    "font/opentype": {
      "compressible": true,
      "extensions": ["otf"]
    },
    "image/bmp": {
      "source": "apache",
      "compressible": true,
      "extensions": ["bmp"]
    },
    "image/cgm": {
      "source": "iana",
      "extensions": ["cgm"]
    },
    "image/fits": {
      "source": "iana"
    },
    "image/g3fax": {
      "source": "iana",
      "extensions": ["g3"]
    },
    "image/gif": {
      "source": "iana",
      "compressible": false,
      "extensions": ["gif"]
    },
    "image/ief": {
      "source": "iana",
      "extensions": ["ief"]
    },
    "image/jp2": {
      "source": "iana"
    },
    "image/jpeg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["jpeg","jpg","jpe"]
    },
    "image/jpm": {
      "source": "iana"
    },
    "image/jpx": {
      "source": "iana"
    },
    "image/ktx": {
      "source": "iana",
      "extensions": ["ktx"]
    },
    "image/naplps": {
      "source": "iana"
    },
    "image/pjpeg": {
      "compressible": false
    },
    "image/png": {
      "source": "iana",
      "compressible": false,
      "extensions": ["png"]
    },
    "image/prs.btif": {
      "source": "iana",
      "extensions": ["btif"]
    },
    "image/prs.pti": {
      "source": "iana"
    },
    "image/pwg-raster": {
      "source": "iana"
    },
    "image/sgi": {
      "source": "apache",
      "extensions": ["sgi"]
    },
    "image/svg+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["svg","svgz"]
    },
    "image/t38": {
      "source": "iana"
    },
    "image/tiff": {
      "source": "iana",
      "compressible": false,
      "extensions": ["tiff","tif"]
    },
    "image/tiff-fx": {
      "source": "iana"
    },
    "image/vnd.adobe.photoshop": {
      "source": "iana",
      "compressible": true,
      "extensions": ["psd"]
    },
    "image/vnd.airzip.accelerator.azv": {
      "source": "iana"
    },
    "image/vnd.cns.inf2": {
      "source": "iana"
    },
    "image/vnd.dece.graphic": {
      "source": "iana",
      "extensions": ["uvi","uvvi","uvg","uvvg"]
    },
    "image/vnd.djvu": {
      "source": "iana",
      "extensions": ["djvu","djv"]
    },
    "image/vnd.dvb.subtitle": {
      "source": "iana",
      "extensions": ["sub"]
    },
    "image/vnd.dwg": {
      "source": "iana",
      "extensions": ["dwg"]
    },
    "image/vnd.dxf": {
      "source": "iana",
      "extensions": ["dxf"]
    },
    "image/vnd.fastbidsheet": {
      "source": "iana",
      "extensions": ["fbs"]
    },
    "image/vnd.fpx": {
      "source": "iana",
      "extensions": ["fpx"]
    },
    "image/vnd.fst": {
      "source": "iana",
      "extensions": ["fst"]
    },
    "image/vnd.fujixerox.edmics-mmr": {
      "source": "iana",
      "extensions": ["mmr"]
    },
    "image/vnd.fujixerox.edmics-rlc": {
      "source": "iana",
      "extensions": ["rlc"]
    },
    "image/vnd.globalgraphics.pgb": {
      "source": "iana"
    },
    "image/vnd.microsoft.icon": {
      "source": "iana"
    },
    "image/vnd.mix": {
      "source": "iana"
    },
    "image/vnd.ms-modi": {
      "source": "iana",
      "extensions": ["mdi"]
    },
    "image/vnd.ms-photo": {
      "source": "apache",
      "extensions": ["wdp"]
    },
    "image/vnd.net-fpx": {
      "source": "iana",
      "extensions": ["npx"]
    },
    "image/vnd.radiance": {
      "source": "iana"
    },
    "image/vnd.sealed.png": {
      "source": "iana"
    },
    "image/vnd.sealedmedia.softseal.gif": {
      "source": "iana"
    },
    "image/vnd.sealedmedia.softseal.jpg": {
      "source": "iana"
    },
    "image/vnd.svf": {
      "source": "iana"
    },
    "image/vnd.tencent.tap": {
      "source": "iana"
    },
    "image/vnd.valve.source.texture": {
      "source": "iana"
    },
    "image/vnd.wap.wbmp": {
      "source": "iana",
      "extensions": ["wbmp"]
    },
    "image/vnd.xiff": {
      "source": "iana",
      "extensions": ["xif"]
    },
    "image/vnd.zbrush.pcx": {
      "source": "iana"
    },
    "image/webp": {
      "source": "apache",
      "extensions": ["webp"]
    },
    "image/x-3ds": {
      "source": "apache",
      "extensions": ["3ds"]
    },
    "image/x-cmu-raster": {
      "source": "apache",
      "extensions": ["ras"]
    },
    "image/x-cmx": {
      "source": "apache",
      "extensions": ["cmx"]
    },
    "image/x-freehand": {
      "source": "apache",
      "extensions": ["fh","fhc","fh4","fh5","fh7"]
    },
    "image/x-icon": {
      "source": "apache",
      "compressible": true,
      "extensions": ["ico"]
    },
    "image/x-mrsid-image": {
      "source": "apache",
      "extensions": ["sid"]
    },
    "image/x-ms-bmp": {
      "compressible": true,
      "extensions": ["bmp"]
    },
    "image/x-pcx": {
      "source": "apache",
      "extensions": ["pcx"]
    },
    "image/x-pict": {
      "source": "apache",
      "extensions": ["pic","pct"]
    },
    "image/x-portable-anymap": {
      "source": "apache",
      "extensions": ["pnm"]
    },
    "image/x-portable-bitmap": {
      "source": "apache",
      "extensions": ["pbm"]
    },
    "image/x-portable-graymap": {
      "source": "apache",
      "extensions": ["pgm"]
    },
    "image/x-portable-pixmap": {
      "source": "apache",
      "extensions": ["ppm"]
    },
    "image/x-rgb": {
      "source": "apache",
      "extensions": ["rgb"]
    },
    "image/x-tga": {
      "source": "apache",
      "extensions": ["tga"]
    },
    "image/x-xbitmap": {
      "source": "apache",
      "extensions": ["xbm"]
    },
    "image/x-xcf": {
      "compressible": false
    },
    "image/x-xpixmap": {
      "source": "apache",
      "extensions": ["xpm"]
    },
    "image/x-xwindowdump": {
      "source": "apache",
      "extensions": ["xwd"]
    },
    "message/cpim": {
      "source": "iana"
    },
    "message/delivery-status": {
      "source": "iana"
    },
    "message/disposition-notification": {
      "source": "iana"
    },
    "message/external-body": {
      "source": "iana"
    },
    "message/feedback-report": {
      "source": "iana"
    },
    "message/global": {
      "source": "iana"
    },
    "message/global-delivery-status": {
      "source": "iana"
    },
    "message/global-disposition-notification": {
      "source": "iana"
    },
    "message/global-headers": {
      "source": "iana"
    },
    "message/http": {
      "source": "iana",
      "compressible": false
    },
    "message/imdn+xml": {
      "source": "iana",
      "compressible": true
    },
    "message/news": {
      "source": "iana"
    },
    "message/partial": {
      "source": "iana",
      "compressible": false
    },
    "message/rfc822": {
      "source": "iana",
      "compressible": true,
      "extensions": ["eml","mime"]
    },
    "message/s-http": {
      "source": "iana"
    },
    "message/sip": {
      "source": "iana"
    },
    "message/sipfrag": {
      "source": "iana"
    },
    "message/tracking-status": {
      "source": "iana"
    },
    "message/vnd.si.simp": {
      "source": "iana"
    },
    "message/vnd.wfa.wsc": {
      "source": "iana"
    },
    "model/iges": {
      "source": "iana",
      "compressible": false,
      "extensions": ["igs","iges"]
    },
    "model/mesh": {
      "source": "iana",
      "compressible": false,
      "extensions": ["msh","mesh","silo"]
    },
    "model/vnd.collada+xml": {
      "source": "iana",
      "extensions": ["dae"]
    },
    "model/vnd.dwf": {
      "source": "iana",
      "extensions": ["dwf"]
    },
    "model/vnd.flatland.3dml": {
      "source": "iana"
    },
    "model/vnd.gdl": {
      "source": "iana",
      "extensions": ["gdl"]
    },
    "model/vnd.gs-gdl": {
      "source": "apache"
    },
    "model/vnd.gs.gdl": {
      "source": "iana"
    },
    "model/vnd.gtw": {
      "source": "iana",
      "extensions": ["gtw"]
    },
    "model/vnd.moml+xml": {
      "source": "iana"
    },
    "model/vnd.mts": {
      "source": "iana",
      "extensions": ["mts"]
    },
    "model/vnd.opengex": {
      "source": "iana"
    },
    "model/vnd.parasolid.transmit.binary": {
      "source": "iana"
    },
    "model/vnd.parasolid.transmit.text": {
      "source": "iana"
    },
    "model/vnd.valve.source.compiled-map": {
      "source": "iana"
    },
    "model/vnd.vtu": {
      "source": "iana",
      "extensions": ["vtu"]
    },
    "model/vrml": {
      "source": "iana",
      "compressible": false,
      "extensions": ["wrl","vrml"]
    },
    "model/x3d+binary": {
      "source": "apache",
      "compressible": false,
      "extensions": ["x3db","x3dbz"]
    },
    "model/x3d+fastinfoset": {
      "source": "iana"
    },
    "model/x3d+vrml": {
      "source": "apache",
      "compressible": false,
      "extensions": ["x3dv","x3dvz"]
    },
    "model/x3d+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["x3d","x3dz"]
    },
    "model/x3d-vrml": {
      "source": "iana"
    },
    "multipart/alternative": {
      "source": "iana",
      "compressible": false
    },
    "multipart/appledouble": {
      "source": "iana"
    },
    "multipart/byteranges": {
      "source": "iana"
    },
    "multipart/digest": {
      "source": "iana"
    },
    "multipart/encrypted": {
      "source": "iana",
      "compressible": false
    },
    "multipart/form-data": {
      "source": "iana",
      "compressible": false
    },
    "multipart/header-set": {
      "source": "iana"
    },
    "multipart/mixed": {
      "source": "iana",
      "compressible": false
    },
    "multipart/parallel": {
      "source": "iana"
    },
    "multipart/related": {
      "source": "iana",
      "compressible": false
    },
    "multipart/report": {
      "source": "iana"
    },
    "multipart/signed": {
      "source": "iana",
      "compressible": false
    },
    "multipart/voice-message": {
      "source": "iana"
    },
    "multipart/x-mixed-replace": {
      "source": "iana"
    },
    "text/1d-interleaved-parityfec": {
      "source": "iana"
    },
    "text/cache-manifest": {
      "source": "iana",
      "compressible": true,
      "extensions": ["appcache","manifest"]
    },
    "text/calendar": {
      "source": "iana",
      "extensions": ["ics","ifb"]
    },
    "text/calender": {
      "compressible": true
    },
    "text/cmd": {
      "compressible": true
    },
    "text/coffeescript": {
      "extensions": ["coffee","litcoffee"]
    },
    "text/css": {
      "source": "iana",
      "compressible": true,
      "extensions": ["css"]
    },
    "text/csv": {
      "source": "iana",
      "compressible": true,
      "extensions": ["csv"]
    },
    "text/csv-schema": {
      "source": "iana"
    },
    "text/directory": {
      "source": "iana"
    },
    "text/dns": {
      "source": "iana"
    },
    "text/ecmascript": {
      "source": "iana"
    },
    "text/encaprtp": {
      "source": "iana"
    },
    "text/enriched": {
      "source": "iana"
    },
    "text/fwdred": {
      "source": "iana"
    },
    "text/grammar-ref-list": {
      "source": "iana"
    },
    "text/hjson": {
      "extensions": ["hjson"]
    },
    "text/html": {
      "source": "iana",
      "compressible": true,
      "extensions": ["html","htm"]
    },
    "text/jade": {
      "extensions": ["jade"]
    },
    "text/javascript": {
      "source": "iana",
      "compressible": true
    },
    "text/jcr-cnd": {
      "source": "iana"
    },
    "text/jsx": {
      "compressible": true,
      "extensions": ["jsx"]
    },
    "text/less": {
      "extensions": ["less"]
    },
    "text/markdown": {
      "source": "iana"
    },
    "text/mizar": {
      "source": "iana"
    },
    "text/n3": {
      "source": "iana",
      "compressible": true,
      "extensions": ["n3"]
    },
    "text/parameters": {
      "source": "iana"
    },
    "text/parityfec": {
      "source": "iana"
    },
    "text/plain": {
      "source": "iana",
      "compressible": true,
      "extensions": ["txt","text","conf","def","list","log","in","ini"]
    },
    "text/provenance-notation": {
      "source": "iana"
    },
    "text/prs.fallenstein.rst": {
      "source": "iana"
    },
    "text/prs.lines.tag": {
      "source": "iana",
      "extensions": ["dsc"]
    },
    "text/raptorfec": {
      "source": "iana"
    },
    "text/red": {
      "source": "iana"
    },
    "text/rfc822-headers": {
      "source": "iana"
    },
    "text/richtext": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rtx"]
    },
    "text/rtf": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rtf"]
    },
    "text/rtp-enc-aescm128": {
      "source": "iana"
    },
    "text/rtploopback": {
      "source": "iana"
    },
    "text/rtx": {
      "source": "iana"
    },
    "text/sgml": {
      "source": "iana",
      "extensions": ["sgml","sgm"]
    },
    "text/stylus": {
      "extensions": ["stylus","styl"]
    },
    "text/t140": {
      "source": "iana"
    },
    "text/tab-separated-values": {
      "source": "iana",
      "compressible": true,
      "extensions": ["tsv"]
    },
    "text/troff": {
      "source": "iana",
      "extensions": ["t","tr","roff","man","me","ms"]
    },
    "text/turtle": {
      "source": "iana",
      "extensions": ["ttl"]
    },
    "text/ulpfec": {
      "source": "iana"
    },
    "text/uri-list": {
      "source": "iana",
      "compressible": true,
      "extensions": ["uri","uris","urls"]
    },
    "text/vcard": {
      "source": "iana",
      "compressible": true,
      "extensions": ["vcard"]
    },
    "text/vnd.a": {
      "source": "iana"
    },
    "text/vnd.abc": {
      "source": "iana"
    },
    "text/vnd.curl": {
      "source": "iana",
      "extensions": ["curl"]
    },
    "text/vnd.curl.dcurl": {
      "source": "apache",
      "extensions": ["dcurl"]
    },
    "text/vnd.curl.mcurl": {
      "source": "apache",
      "extensions": ["mcurl"]
    },
    "text/vnd.curl.scurl": {
      "source": "apache",
      "extensions": ["scurl"]
    },
    "text/vnd.debian.copyright": {
      "source": "iana"
    },
    "text/vnd.dmclientscript": {
      "source": "iana"
    },
    "text/vnd.dvb.subtitle": {
      "source": "iana",
      "extensions": ["sub"]
    },
    "text/vnd.esmertec.theme-descriptor": {
      "source": "iana"
    },
    "text/vnd.fly": {
      "source": "iana",
      "extensions": ["fly"]
    },
    "text/vnd.fmi.flexstor": {
      "source": "iana",
      "extensions": ["flx"]
    },
    "text/vnd.graphviz": {
      "source": "iana",
      "extensions": ["gv"]
    },
    "text/vnd.in3d.3dml": {
      "source": "iana",
      "extensions": ["3dml"]
    },
    "text/vnd.in3d.spot": {
      "source": "iana",
      "extensions": ["spot"]
    },
    "text/vnd.iptc.newsml": {
      "source": "iana"
    },
    "text/vnd.iptc.nitf": {
      "source": "iana"
    },
    "text/vnd.latex-z": {
      "source": "iana"
    },
    "text/vnd.motorola.reflex": {
      "source": "iana"
    },
    "text/vnd.ms-mediapackage": {
      "source": "iana"
    },
    "text/vnd.net2phone.commcenter.command": {
      "source": "iana"
    },
    "text/vnd.radisys.msml-basic-layout": {
      "source": "iana"
    },
    "text/vnd.si.uricatalogue": {
      "source": "iana"
    },
    "text/vnd.sun.j2me.app-descriptor": {
      "source": "iana",
      "extensions": ["jad"]
    },
    "text/vnd.trolltech.linguist": {
      "source": "iana"
    },
    "text/vnd.wap.si": {
      "source": "iana"
    },
    "text/vnd.wap.sl": {
      "source": "iana"
    },
    "text/vnd.wap.wml": {
      "source": "iana",
      "extensions": ["wml"]
    },
    "text/vnd.wap.wmlscript": {
      "source": "iana",
      "extensions": ["wmls"]
    },
    "text/vtt": {
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["vtt"]
    },
    "text/x-asm": {
      "source": "apache",
      "extensions": ["s","asm"]
    },
    "text/x-c": {
      "source": "apache",
      "extensions": ["c","cc","cxx","cpp","h","hh","dic"]
    },
    "text/x-component": {
      "extensions": ["htc"]
    },
    "text/x-fortran": {
      "source": "apache",
      "extensions": ["f","for","f77","f90"]
    },
    "text/x-gwt-rpc": {
      "compressible": true
    },
    "text/x-handlebars-template": {
      "extensions": ["hbs"]
    },
    "text/x-java-source": {
      "source": "apache",
      "extensions": ["java"]
    },
    "text/x-jquery-tmpl": {
      "compressible": true
    },
    "text/x-lua": {
      "extensions": ["lua"]
    },
    "text/x-markdown": {
      "compressible": true,
      "extensions": ["markdown","md","mkd"]
    },
    "text/x-nfo": {
      "source": "apache",
      "extensions": ["nfo"]
    },
    "text/x-opml": {
      "source": "apache",
      "extensions": ["opml"]
    },
    "text/x-pascal": {
      "source": "apache",
      "extensions": ["p","pas"]
    },
    "text/x-sass": {
      "extensions": ["sass"]
    },
    "text/x-scss": {
      "extensions": ["scss"]
    },
    "text/x-setext": {
      "source": "apache",
      "extensions": ["etx"]
    },
    "text/x-sfv": {
      "source": "apache",
      "extensions": ["sfv"]
    },
    "text/x-uuencode": {
      "source": "apache",
      "extensions": ["uu"]
    },
    "text/x-vcalendar": {
      "source": "apache",
      "extensions": ["vcs"]
    },
    "text/x-vcard": {
      "source": "apache",
      "extensions": ["vcf"]
    },
    "text/xml": {
      "source": "iana",
      "compressible": true
    },
    "text/xml-external-parsed-entity": {
      "source": "iana"
    },
    "text/yaml": {
      "extensions": ["yaml","yml"]
    },
    "video/1d-interleaved-parityfec": {
      "source": "apache"
    },
    "video/3gpp": {
      "source": "apache",
      "extensions": ["3gp"]
    },
    "video/3gpp-tt": {
      "source": "apache"
    },
    "video/3gpp2": {
      "source": "apache",
      "extensions": ["3g2"]
    },
    "video/bmpeg": {
      "source": "apache"
    },
    "video/bt656": {
      "source": "apache"
    },
    "video/celb": {
      "source": "apache"
    },
    "video/dv": {
      "source": "apache"
    },
    "video/h261": {
      "source": "apache",
      "extensions": ["h261"]
    },
    "video/h263": {
      "source": "apache",
      "extensions": ["h263"]
    },
    "video/h263-1998": {
      "source": "apache"
    },
    "video/h263-2000": {
      "source": "apache"
    },
    "video/h264": {
      "source": "apache",
      "extensions": ["h264"]
    },
    "video/h264-rcdo": {
      "source": "apache"
    },
    "video/h264-svc": {
      "source": "apache"
    },
    "video/jpeg": {
      "source": "apache",
      "extensions": ["jpgv"]
    },
    "video/jpeg2000": {
      "source": "apache"
    },
    "video/jpm": {
      "source": "apache",
      "extensions": ["jpm","jpgm"]
    },
    "video/mj2": {
      "source": "apache",
      "extensions": ["mj2","mjp2"]
    },
    "video/mp1s": {
      "source": "apache"
    },
    "video/mp2p": {
      "source": "apache"
    },
    "video/mp2t": {
      "source": "apache",
      "extensions": ["ts"]
    },
    "video/mp4": {
      "source": "apache",
      "compressible": false,
      "extensions": ["mp4","mp4v","mpg4"]
    },
    "video/mp4v-es": {
      "source": "apache"
    },
    "video/mpeg": {
      "source": "apache",
      "compressible": false,
      "extensions": ["mpeg","mpg","mpe","m1v","m2v"]
    },
    "video/mpeg4-generic": {
      "source": "apache"
    },
    "video/mpv": {
      "source": "apache"
    },
    "video/nv": {
      "source": "apache"
    },
    "video/ogg": {
      "source": "apache",
      "compressible": false,
      "extensions": ["ogv"]
    },
    "video/parityfec": {
      "source": "apache"
    },
    "video/pointer": {
      "source": "apache"
    },
    "video/quicktime": {
      "source": "apache",
      "compressible": false,
      "extensions": ["qt","mov"]
    },
    "video/raw": {
      "source": "apache"
    },
    "video/rtp-enc-aescm128": {
      "source": "apache"
    },
    "video/rtx": {
      "source": "apache"
    },
    "video/smpte292m": {
      "source": "apache"
    },
    "video/ulpfec": {
      "source": "apache"
    },
    "video/vc1": {
      "source": "apache"
    },
    "video/vnd.cctv": {
      "source": "apache"
    },
    "video/vnd.dece.hd": {
      "source": "apache",
      "extensions": ["uvh","uvvh"]
    },
    "video/vnd.dece.mobile": {
      "source": "apache",
      "extensions": ["uvm","uvvm"]
    },
    "video/vnd.dece.mp4": {
      "source": "apache"
    },
    "video/vnd.dece.pd": {
      "source": "apache",
      "extensions": ["uvp","uvvp"]
    },
    "video/vnd.dece.sd": {
      "source": "apache",
      "extensions": ["uvs","uvvs"]
    },
    "video/vnd.dece.video": {
      "source": "apache",
      "extensions": ["uvv","uvvv"]
    },
    "video/vnd.directv.mpeg": {
      "source": "apache"
    },
    "video/vnd.directv.mpeg-tts": {
      "source": "apache"
    },
    "video/vnd.dlna.mpeg-tts": {
      "source": "apache"
    },
    "video/vnd.dvb.file": {
      "source": "apache",
      "extensions": ["dvb"]
    },
    "video/vnd.fvt": {
      "source": "apache",
      "extensions": ["fvt"]
    },
    "video/vnd.hns.video": {
      "source": "apache"
    },
    "video/vnd.iptvforum.1dparityfec-1010": {
      "source": "apache"
    },
    "video/vnd.iptvforum.1dparityfec-2005": {
      "source": "apache"
    },
    "video/vnd.iptvforum.2dparityfec-1010": {
      "source": "apache"
    },
    "video/vnd.iptvforum.2dparityfec-2005": {
      "source": "apache"
    },
    "video/vnd.iptvforum.ttsavc": {
      "source": "apache"
    },
    "video/vnd.iptvforum.ttsmpeg2": {
      "source": "apache"
    },
    "video/vnd.motorola.video": {
      "source": "apache"
    },
    "video/vnd.motorola.videop": {
      "source": "apache"
    },
    "video/vnd.mpegurl": {
      "source": "apache",
      "extensions": ["mxu","m4u"]
    },
    "video/vnd.ms-playready.media.pyv": {
      "source": "apache",
      "extensions": ["pyv"]
    },
    "video/vnd.nokia.interleaved-multimedia": {
      "source": "apache"
    },
    "video/vnd.nokia.videovoip": {
      "source": "apache"
    },
    "video/vnd.objectvideo": {
      "source": "apache"
    },
    "video/vnd.sealed.mpeg1": {
      "source": "apache"
    },
    "video/vnd.sealed.mpeg4": {
      "source": "apache"
    },
    "video/vnd.sealed.swf": {
      "source": "apache"
    },
    "video/vnd.sealedmedia.softseal.mov": {
      "source": "apache"
    },
    "video/vnd.uvvu.mp4": {
      "source": "apache",
      "extensions": ["uvu","uvvu"]
    },
    "video/vnd.vivo": {
      "source": "apache",
      "extensions": ["viv"]
    },
    "video/webm": {
      "source": "apache",
      "compressible": false,
      "extensions": ["webm"]
    },
    "video/x-f4v": {
      "source": "apache",
      "extensions": ["f4v"]
    },
    "video/x-fli": {
      "source": "apache",
      "extensions": ["fli"]
    },
    "video/x-flv": {
      "source": "apache",
      "compressible": false,
      "extensions": ["flv"]
    },
    "video/x-m4v": {
      "source": "apache",
      "extensions": ["m4v"]
    },
    "video/x-matroska": {
      "source": "apache",
      "compressible": false,
      "extensions": ["mkv","mk3d","mks"]
    },
    "video/x-mng": {
      "source": "apache",
      "extensions": ["mng"]
    },
    "video/x-ms-asf": {
      "source": "apache",
      "extensions": ["asf","asx"]
    },
    "video/x-ms-vob": {
      "source": "apache",
      "extensions": ["vob"]
    },
    "video/x-ms-wm": {
      "source": "apache",
      "extensions": ["wm"]
    },
    "video/x-ms-wmv": {
      "source": "apache",
      "compressible": false,
      "extensions": ["wmv"]
    },
    "video/x-ms-wmx": {
      "source": "apache",
      "extensions": ["wmx"]
    },
    "video/x-ms-wvx": {
      "source": "apache",
      "extensions": ["wvx"]
    },
    "video/x-msvideo": {
      "source": "apache",
      "extensions": ["avi"]
    },
    "video/x-sgi-movie": {
      "source": "apache",
      "extensions": ["movie"]
    },
    "video/x-smv": {
      "source": "apache",
      "extensions": ["smv"]
    },
    "x-conference/x-cooltalk": {
      "source": "apache",
      "extensions": ["ice"]
    },
    "x-shader/x-fragment": {
      "compressible": true
    },
    "x-shader/x-vertex": {
      "compressible": true
    }
  }

},{}],227:[function(require,module,exports){
  module.exports=require("./db.json");


},{"./db.json":226}],228:[function(require,module,exports){
  (function(){function r(r,e,n){var t=e&&n||0,u=0;for(e=e||[],r.toLowerCase().replace(/[0-9a-f]{2}/g,function(r){16>u&&(e[t+u++]=v[r])});16>u;)e[t+u++]=0;return e}function e(r,e){var n=e||0,t=l;return t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]}function n(r,n,t){var u=n&&t||0,o=n||[];r=r||{};var a=null!=r.clockseq?r.clockseq:m,f=null!=r.msecs?r.msecs:(new Date).getTime(),i=null!=r.nsecs?r.nsecs:w+1,c=f-g+(i-w)/1e4;if(0>c&&null==r.clockseq&&(a=a+1&16383),(0>c||f>g)&&null==r.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=f,w=i,m=a,f+=122192928e5;var s=(1e4*(268435455&f)+i)%4294967296;o[u++]=s>>>24&255,o[u++]=s>>>16&255,o[u++]=s>>>8&255,o[u++]=255&s;var l=f/4294967296*1e4&268435455;o[u++]=l>>>8&255,o[u++]=255&l,o[u++]=l>>>24&15|16,o[u++]=l>>>16&255,o[u++]=a>>>8|128,o[u++]=255&a;for(var v=r.node||p,d=0;6>d;d++)o[u+d]=v[d];return n?n:e(o)}function t(r,n,t){var o=n&&t||0;"string"==typeof r&&(n="binary"==r?new s(16):null,r=null),r=r||{};var a=r.random||(r.rng||u)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var f=0;16>f;f++)n[o+f]=a[f];return n||e(a)}var u,o=this;if("function"==typeof o.require)try{var a=o.require("crypto").randomBytes;u=a&&function(){return a(16)}}catch(f){}if(!u&&o.crypto&&crypto.getRandomValues){var i=new Uint8Array(16);u=function(){return crypto.getRandomValues(i),i}}if(!u){var c=new Array(16);u=function(){for(var r,e=0;16>e;e++)0===(3&e)&&(r=4294967296*Math.random()),c[e]=r>>>((3&e)<<3)&255;return c}}for(var s="function"==typeof o.Buffer?o.Buffer:Array,l=[],v={},d=0;256>d;d++)l[d]=(d+256).toString(16).substr(1),v[l[d]]=d;var y=u(),p=[1|y[0],y[1],y[2],y[3],y[4],y[5]],m=16383&(y[6]<<8|y[7]),g=0,w=0,h=t;if(h.v1=n,h.v4=t,h.parse=r,h.unparse=e,h.BufferClass=s,"undefined"!=typeof module&&module.exports)module.exports=h;else if("function"==typeof define&&define.amd)define(function(){return h});else{var q=o.uuid;h.noConflict=function(){return o.uuid=q,h},o.uuid=h}}).call(this);


},{}],229:[function(require,module,exports){
  function sha1(r,e){return crypto.createHmac("sha1",r).update(e).digest("base64")}function rsa(r,e){return crypto.createSign("RSA-SHA1").update(e).sign(r,"base64")}function rfc3986(r){return encodeURIComponent(r).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}function map(r){var e,n,a=[];for(e in r)if(n=r[e],Array.isArray(n))for(var t=0;t<n.length;t++)a.push([e,n[t]]);else a.push([e,n]);return a}function compare(r,e){return r>e?1:e>r?-1:0}function generateBase(r,e,n){var a=map(n).map(function(r){return[rfc3986(r[0]),rfc3986(r[1]||"")]}).sort(function(r,e){return compare(r[0],e[0])||compare(r[1],e[1])}).map(function(r){return r.join("=")}).join("&"),t=[rfc3986(r?r.toUpperCase():"GET"),rfc3986(e),rfc3986(a)].join("&");return t}function hmacsign(r,e,n,a,t){var c=generateBase(r,e,n),s=[a||"",t||""].map(rfc3986).join("&");return sha1(s,c)}function rsasign(r,e,n,a,t){var c=generateBase(r,e,n),s=a||"";return rsa(s,c)}function plaintext(r,e){var n=[r||"",e||""].map(rfc3986).join("&");return n}function sign(r,e,n,a,t,c){var s,i=1;switch(r){case"RSA-SHA1":s=rsasign;break;case"HMAC-SHA1":s=hmacsign;break;case"PLAINTEXT":s=plaintext,i=4;break;default:throw new Error("Signature method not supported: "+r)}return s.apply(null,[].slice.call(arguments,i))}var crypto=require("crypto"),qs=require("querystring");exports.hmacsign=hmacsign,exports.rsasign=rsasign,exports.plaintext=plaintext,exports.sign=sign,exports.rfc3986=rfc3986;


},{"crypto":82,"querystring":99}],230:[function(require,module,exports){
  module.exports=require("./lib/");


},{"./lib/":231}],231:[function(require,module,exports){
  var Stringify=require("./stringify"),Parse=require("./parse"),internals={};module.exports={stringify:Stringify,parse:Parse};


},{"./parse":232,"./stringify":233}],232:[function(require,module,exports){
  var Utils=require("./utils"),internals={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};internals.parseValues=function(e,r){for(var t={},i=e.split(r.delimiter,r.parameterLimit===1/0?void 0:r.parameterLimit),a=0,n=i.length;n>a;++a){var s=i[a],l=-1===s.indexOf("]=")?s.indexOf("="):s.indexOf("]=")+1;if(-1===l)t[Utils.decode(s)]="";else{var p=Utils.decode(s.slice(0,l)),m=Utils.decode(s.slice(l+1));t.hasOwnProperty(p)?t[p]=[].concat(t[p]).concat(m):t[p]=m}}return t},internals.parseObject=function(e,r,t){if(!e.length)return r;var i=e.shift(),a={};if("[]"===i)a=[],a=a.concat(internals.parseObject(e,r,t));else{var n="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,s=parseInt(n,10),l=""+s;!isNaN(s)&&i!==n&&l===n&&s>=0&&s<=t.arrayLimit?(a=[],a[s]=internals.parseObject(e,r,t)):a[n]=internals.parseObject(e,r,t)}return a},internals.parseKeys=function(e,r,t){if(e){var i=/^([^\[\]]*)/,a=/(\[[^\[\]]*\])/g,n=i.exec(e);if(!Object.prototype.hasOwnProperty(n[1])){var s=[];n[1]&&s.push(n[1]);for(var l=0;null!==(n=a.exec(e))&&l<t.depth;)++l,Object.prototype.hasOwnProperty(n[1].replace(/\[|\]/g,""))||s.push(n[1]);return n&&s.push("["+e.slice(n.index)+"]"),internals.parseObject(s,r,t)}}},module.exports=function(e,r){if(""===e||null===e||"undefined"==typeof e)return{};r=r||{},r.delimiter="string"==typeof r.delimiter||Utils.isRegExp(r.delimiter)?r.delimiter:internals.delimiter,r.depth="number"==typeof r.depth?r.depth:internals.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:internals.arrayLimit,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:internals.parameterLimit;for(var t="string"==typeof e?internals.parseValues(e,r):e,i={},a=Object.keys(t),n=0,s=a.length;s>n;++n){var l=a[n],p=internals.parseKeys(l,t[l],r);i=Utils.merge(i,p)}return Utils.compact(i)};


},{"./utils":234}],233:[function(require,module,exports){
  var Utils=require("./utils"),internals={delimiter:"&",indices:!0};internals.stringify=function(e,n,i){if(Utils.isBuffer(e)?e=e.toString():e instanceof Date?e=e.toISOString():null===e&&(e=""),"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return[encodeURIComponent(n)+"="+encodeURIComponent(e)];var t=[];if("undefined"==typeof e)return t;for(var r=Object.keys(e),o=0,s=r.length;s>o;++o){var a=r[o];t=!i.indices&&Array.isArray(e)?t.concat(internals.stringify(e[a],n,i)):t.concat(internals.stringify(e[a],n+"["+a+"]",i))}return t},module.exports=function(e,n){n=n||{};var i="undefined"==typeof n.delimiter?internals.delimiter:n.delimiter;n.indices="boolean"==typeof n.indices?n.indices:internals.indices;var t=[];if("object"!=typeof e||null===e)return"";for(var r=Object.keys(e),o=0,s=r.length;s>o;++o){var a=r[o];t=t.concat(internals.stringify(e[a],a,n))}return t.join(i)};


},{"./utils":234}],234:[function(require,module,exports){
  var internals={};exports.arrayToObject=function(r){for(var e={},t=0,n=r.length;n>t;++t)"undefined"!=typeof r[t]&&(e[t]=r[t]);return e},exports.merge=function(r,e){if(!e)return r;if("object"!=typeof e)return Array.isArray(r)?r.push(e):r[e]=!0,r;if("object"!=typeof r)return r=[r].concat(e);Array.isArray(r)&&!Array.isArray(e)&&(r=exports.arrayToObject(r));for(var t=Object.keys(e),n=0,o=t.length;o>n;++n){var c=t[n],u=e[c];r[c]?r[c]=exports.merge(r[c],u):r[c]=u}return r},exports.decode=function(r){try{return decodeURIComponent(r.replace(/\+/g," "))}catch(e){return r}},exports.compact=function(r,e){if("object"!=typeof r||null===r)return r;e=e||[];var t=e.indexOf(r);if(-1!==t)return e[t];if(e.push(r),Array.isArray(r)){for(var n=[],o=0,c=r.length;c>o;++o)"undefined"!=typeof r[o]&&n.push(r[o]);return n}var u=Object.keys(r);for(o=0,c=u.length;c>o;++o){var f=u[o];r[f]=exports.compact(r[f],e)}return r},exports.isRegExp=function(r){return"[object RegExp]"===Object.prototype.toString.call(r)},exports.isBuffer=function(r){return null===r||"undefined"==typeof r?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))};


},{}],235:[function(require,module,exports){
  (function (Buffer){
    function StringStream(t,e){return this instanceof StringStream?(Stream.call(this),null==t&&(t="utf8"),this.readable=this.writable=!0,this.paused=!1,this.toEncoding=null==e?t:e,this.fromEncoding=null==e?"":t,void(this.decoder=new AlignedStringDecoder(this.toEncoding))):new StringStream(t,e)}function AlignedStringDecoder(t){switch(StringDecoder.call(this,t),this.encoding){case"base64":this.write=alignedWrite,this.alignedBuffer=new Buffer(3),this.alignedBytes=0}}function alignedWrite(t){var e=(this.alignedBytes+t.length)%this.alignedBuffer.length;if(!e&&!this.alignedBytes)return t.toString(this.encoding);var i=new Buffer(this.alignedBytes+t.length-e);return this.alignedBuffer.copy(i,0,0,this.alignedBytes),t.copy(i,this.alignedBytes,0,t.length-e),t.copy(this.alignedBuffer,0,t.length-e,t.length),this.alignedBytes=e,i.toString(this.encoding)}var util=require("util"),Stream=require("stream"),StringDecoder=require("string_decoder").StringDecoder;module.exports=StringStream,module.exports.AlignedStringDecoder=AlignedStringDecoder,util.inherits(StringStream,Stream),StringStream.prototype.write=function(t){if(!this.writable){var e=new Error("stream not writable");return e.code="EPIPE",this.emit("error",e),!1}this.fromEncoding&&(Buffer.isBuffer(t)&&(t=t.toString()),t=new Buffer(t,this.fromEncoding));var i=this.decoder.write(t);return i.length&&this.emit("data",i),!this.paused},StringStream.prototype.flush=function(){if(this.decoder.flush){var t=this.decoder.flush();t.length&&this.emit("data",t)}},StringStream.prototype.end=function(){(this.writable||this.readable)&&(this.flush(),this.emit("end"),this.writable=this.readable=!1,this.destroy())},StringStream.prototype.destroy=function(){this.decoder=null,this.writable=this.readable=!1,this.emit("close")},StringStream.prototype.pause=function(){this.paused=!0},StringStream.prototype.resume=function(){this.paused&&this.emit("drain"),this.paused=!1},util.inherits(AlignedStringDecoder,StringDecoder),AlignedStringDecoder.prototype.flush=function(){if(!this.alignedBuffer||!this.alignedBytes)return"";var t=this.alignedBuffer.toString(this.encoding,0,this.alignedBytes);return this.alignedBytes=0,t};


  }).call(this,require("buffer").Buffer)
},{"buffer":78,"stream":101,"string_decoder":107,"util":109}],236:[function(require,module,exports){
  "use strict";function parseDate(e){if(e){var t=e.split(DATE_DELIM);if(t){for(var o=null,r=null,i=null,n=null,a=null,s=null,u=0;u<t.length;u++){var l=t[u].trim();if(l.length){var p;if(null===i&&(p=TIME.exec(l))){if(o=parseInt(p[1],10),r=parseInt(p[2],10),i=parseInt(p[3],10),o>23||r>59||i>59)return}else if(null===n&&(p=DAY_OF_MONTH.exec(l))){if(n=parseInt(p,10),1>n||n>31)return}else if(null===a&&(p=MONTH.exec(l)))a=MONTH_TO_NUM[p[1].toLowerCase()];else if(null===s&&(p=YEAR.exec(l),p&&(s=parseInt(p[0],10),s>=70&&99>=s?s+=1900:s>=0&&69>=s&&(s+=2e3),1601>s)))return}}if(null!==i&&null!==n&&null!==a&&null!==s)return new Date(Date.UTC(s,a,n,o,r,i))}}}function formatDate(e){var t=e.getUTCDate();t=t>=10?t:"0"+t;var o=e.getUTCHours();o=o>=10?o:"0"+o;var r=e.getUTCMinutes();r=r>=10?r:"0"+r;var i=e.getUTCSeconds();return i=i>=10?i:"0"+i,NUM_TO_DAY[e.getUTCDay()]+", "+t+" "+NUM_TO_MONTH[e.getUTCMonth()]+" "+e.getUTCFullYear()+" "+o+":"+r+":"+i+" GMT"}function canonicalDomain(e){return null==e?null:(e=e.trim().replace(/^\./,""),punycode&&/[^\u0001-\u007f]/.test(e)&&(e=punycode.toASCII(e)),e.toLowerCase())}function domainMatch(e,t,o){if(null==e||null==t)return null;if(o!==!1&&(e=canonicalDomain(e),t=canonicalDomain(t)),e==t)return!0;if(net.isIP(e))return!1;var r=e.indexOf(t);return 0>=r?!1:e.length!==t.length+r?!1:"."!==e.substr(r-1,1)?!1:!0}function defaultPath(e){if(!e||"/"!==e.substr(0,1))return"/";if("/"===e)return e;var t=e.lastIndexOf("/");return 0===t?"/":e.slice(0,t)}function parse(e){e=e.trim();var t=TRAILING_SEMICOLON.exec(e);t&&(e=e.slice(0,t.index));var o=e.indexOf(";"),r=COOKIE_PAIR.exec(-1===o?e:e.substr(0,o));if(r){var i=new Cookie;if(i.key=r[1].trim(),i.value=r[2].trim(),-1===o)return i;var n=e.slice(o).replace(/^\s*;\s*/,"").trim();if(0===n.length)return i;for(var a=n.split(/\s*;\s*/);a.length;){var s,u,l=a.shift(),p=l.indexOf("=");switch(-1===p?(s=l,u=null):(s=l.substr(0,p),u=l.substr(p+1)),s=s.trim().toLowerCase(),u&&(u=u.trim()),s){case"expires":if(u){var c=parseDate(u);c&&(i.expires=c)}break;case"max-age":if(u&&/^-?[0-9]+$/.test(u)){var f=parseInt(u,10);i.setMaxAge(f)}break;case"domain":if(u){var h=u.trim().replace(/^\./,"");h&&(i.domain=h.toLowerCase())}break;case"path":i.path=u&&"/"===u[0]?u:null;break;case"secure":i.secure=!0;break;case"httponly":i.httpOnly=!0;break;default:i.extensions=i.extensions||[],i.extensions.push(l)}}return i}}function jsonParse(e){var t;try{t=JSON.parse(e)}catch(o){return o}return t}function fromJSON(e){if(!e)return null;var t;if("string"==typeof e){if(t=jsonParse(e),t instanceof Error)return null}else t=e;for(var o=new Cookie,r=0;r<Cookie.serializableProperties.length;r++){var i=Cookie.serializableProperties[r];void 0!==t[i]&&t[i]!==Cookie.prototype[i]&&("expires"===i||"creation"===i||"lastAccessed"===i?null===t[i]?o[i]=null:o[i]="Infinity"==t[i]?"Infinity":new Date(t[i]):o[i]=t[i])}return o}function cookieCompare(e,t){var o=0,r=e.path?e.path.length:0,i=t.path?t.path.length:0;if(o=i-r,0!==o)return o;var n=e.creation?e.creation.getTime():MAX_TIME,a=t.creation?t.creation.getTime():MAX_TIME;return o=n-a,0!==o?o:o=e.creationIndex-t.creationIndex}function permutePath(e){if("/"===e)return["/"];e.lastIndexOf("/")===e.length-1&&(e=e.substr(0,e.length-1));for(var t=[e];e.length>1;){var o=e.lastIndexOf("/");if(0===o)break;e=e.substr(0,o),t.push(e)}return t.push("/"),t}function getCookieContext(e){if(e instanceof Object)return e;try{e=decodeURI(e)}catch(t){}return urlParse(e)}function Cookie(e){e=e||{},Object.keys(e).forEach(function(t){Cookie.prototype.hasOwnProperty(t)&&Cookie.prototype[t]!==e[t]&&"_"!==t.substr(0,1)&&(this[t]=e[t])},this),this.creation=this.creation||new Date,Object.defineProperty(this,"creationIndex",{configurable:!1,enumerable:!1,writable:!0,value:++Cookie.cookiesCreated})}function CookieJar(e,t){null!=t&&(this.rejectPublicSuffixes=t),e||(e=new MemoryCookieStore),this.store=e}function syncWrap(e){return function(){if(!this.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");var t,o,r=Array.prototype.slice.call(arguments);if(r.push(function(e,r){t=e,o=r}),this[e].apply(this,r),t)throw t;return o}}var net=require("net"),urlParse=require("url").parse,pubsuffix=require("./pubsuffix"),Store=require("./store").Store,MemoryCookieStore=require("./memstore").MemoryCookieStore,pathMatch=require("./pathMatch").pathMatch,VERSION=require("../package.json").version,punycode;try{punycode=require("punycode")}catch(e){0}var DATE_DELIM=/[\x09\x20-\x2F\x3B-\x40\x5B-\x60\x7B-\x7E]/,COOKIE_OCTET=/[\x21\x23-\x2B\x2D-\x3A\x3C-\x5B\x5D-\x7E]/,COOKIE_OCTETS=new RegExp("^"+COOKIE_OCTET.source+"$"),COOKIE_PAIR=/^([^=;]+)\s*=\s*(("?)[^\n\r\0]*\3)/,PATH_VALUE=/[\x20-\x3A\x3C-\x7E]+/,TRAILING_SEMICOLON=/;+$/,DAY_OF_MONTH=/^(\d{1,2})[^\d]*$/,TIME=/^(\d{1,2})[^\d]*:(\d{1,2})[^\d]*:(\d{1,2})[^\d]*$/,MONTH=/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i,MONTH_TO_NUM={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},NUM_TO_MONTH=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],NUM_TO_DAY=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],YEAR=/^(\d{2}|\d{4})$/,MAX_TIME=2147483647e3,MIN_TIME=0;Cookie.cookiesCreated=0,Cookie.parse=parse,Cookie.fromJSON=fromJSON,Cookie.prototype.key="",Cookie.prototype.value="",Cookie.prototype.expires="Infinity",Cookie.prototype.maxAge=null,Cookie.prototype.domain=null,Cookie.prototype.path=null,Cookie.prototype.secure=!1,Cookie.prototype.httpOnly=!1,Cookie.prototype.extensions=null,Cookie.prototype.hostOnly=null,Cookie.prototype.pathIsDefault=null,Cookie.prototype.creation=null,Cookie.prototype.lastAccessed=null,Object.defineProperty(Cookie.prototype,"creationIndex",{configurable:!0,enumerable:!1,writable:!0,value:0}),Cookie.serializableProperties=Object.keys(Cookie.prototype).filter(function(e){return!(Cookie.prototype[e]instanceof Function||"creationIndex"===e||"_"===e.substr(0,1))}),Cookie.prototype.inspect=function(){var e=Date.now();return'Cookie="'+this.toString()+"; hostOnly="+(null!=this.hostOnly?this.hostOnly:"?")+"; aAge="+(this.lastAccessed?e-this.lastAccessed.getTime()+"ms":"?")+"; cAge="+(this.creation?e-this.creation.getTime()+"ms":"?")+'"'},Cookie.prototype.toJSON=function(){for(var e={},t=Cookie.serializableProperties,o=0;o<t.length;o++){var r=t[o];this[r]!==Cookie.prototype[r]&&("expires"===r||"creation"===r||"lastAccessed"===r?null===this[r]?e[r]=null:e[r]="Infinity"==this[r]?"Infinity":this[r].toISOString():"maxAge"===r?null!==this[r]&&(e[r]=this[r]==1/0||this[r]==-(1/0)?this[r].toString():this[r]):this[r]!==Cookie.prototype[r]&&(e[r]=this[r]))}return e},Cookie.prototype.clone=function(){return fromJSON(this.toJSON())},Cookie.prototype.validate=function(){if(!COOKIE_OCTETS.test(this.value))return!1;if(!(this.expires==1/0||this.expires instanceof Date||parseDate(this.expires)))return!1;if(null!=this.maxAge&&this.maxAge<=0)return!1;if(null!=this.path&&!PATH_VALUE.test(this.path))return!1;var e=this.cdomain();if(e){if(e.match(/\.$/))return!1;var t=pubsuffix.getPublicSuffix(e);if(null==t)return!1}return!0},Cookie.prototype.setExpires=function(e){e instanceof Date?this.expires=e:this.expires=parseDate(e)||"Infinity"},Cookie.prototype.setMaxAge=function(e){e===1/0||e===-(1/0)?this.maxAge=e.toString():this.maxAge=e},Cookie.prototype.cookieString=function(){var e=this.value;return null==e&&(e=""),this.key+"="+e},Cookie.prototype.toString=function(){var e=this.cookieString();return this.expires!=1/0&&(e+=this.expires instanceof Date?"; Expires="+formatDate(this.expires):"; Expires="+this.expires),null!=this.maxAge&&this.maxAge!=1/0&&(e+="; Max-Age="+this.maxAge),this.domain&&!this.hostOnly&&(e+="; Domain="+this.domain),this.path&&(e+="; Path="+this.path),this.secure&&(e+="; Secure"),this.httpOnly&&(e+="; HttpOnly"),this.extensions&&this.extensions.forEach(function(t){e+="; "+t}),e},Cookie.prototype.TTL=function(e){if(null!=this.maxAge)return this.maxAge<=0?0:1e3*this.maxAge;var t=this.expires;return t!=1/0?(t instanceof Date||(t=parseDate(t)||1/0),t==1/0?1/0:t.getTime()-(e||Date.now())):1/0},Cookie.prototype.expiryTime=function(e){if(null!=this.maxAge){var t=e||this.creation||new Date,o=this.maxAge<=0?-(1/0):1e3*this.maxAge;return t.getTime()+o}return this.expires==1/0?1/0:this.expires.getTime()},Cookie.prototype.expiryDate=function(e){var t=this.expiryTime(e);return t==1/0?new Date(MAX_TIME):t==-(1/0)?new Date(MIN_TIME):new Date(t)},Cookie.prototype.isPersistent=function(){return null!=this.maxAge||this.expires!=1/0},Cookie.prototype.cdomain=Cookie.prototype.canonicalizedDomain=function(){return null==this.domain?null:canonicalDomain(this.domain)},CookieJar.prototype.store=null,CookieJar.prototype.rejectPublicSuffixes=!0;var CAN_BE_SYNC=[];CAN_BE_SYNC.push("setCookie"),CookieJar.prototype.setCookie=function(e,t,o,r){function i(t,i){if(t)return r(t);var n=function(t){return t?r(t):void r(null,e)};if(i){if(o.http===!1&&i.httpOnly)return t=new Error("old Cookie is HttpOnly and this isn't an HTTP API"),r(o.ignoreError?null:t);e.creation=i.creation,e.creationIndex=i.creationIndex,e.lastAccessed=u,p.updateCookie(i,e,n)}else e.creation=e.lastAccessed=u,p.putCookie(e,n)}var n,a=getCookieContext(t);o instanceof Function&&(r=o,o={});var s=canonicalDomain(a.hostname);if(e instanceof Cookie||(e=Cookie.parse(e)),!e)return n=new Error("Cookie failed to parse"),r(o.ignoreError?null:n);var u=o.now||new Date;if(this.rejectPublicSuffixes&&e.domain){var l=pubsuffix.getPublicSuffix(e.cdomain());if(null==l)return n=new Error("Cookie has domain set to a public suffix"),r(o.ignoreError?null:n)}if(e.domain){if(!domainMatch(s,e.cdomain(),!1))return n=new Error("Cookie not in this host's domain. Cookie:"+e.cdomain()+" Request:"+s),r(o.ignoreError?null:n);null==e.hostOnly&&(e.hostOnly=!1)}else e.hostOnly=!0,e.domain=s;if(e.path&&"/"===e.path[0]||(e.path=defaultPath(a.pathname),e.pathIsDefault=!0),o.http===!1&&e.httpOnly)return n=new Error("Cookie is HttpOnly and this isn't an HTTP API"),r(o.ignoreError?null:n);var p=this.store;p.updateCookie||(p.updateCookie=function(e,t,o){this.putCookie(t,o)}),p.findCookie(e.domain,e.path,e.key,i)},CAN_BE_SYNC.push("getCookies"),CookieJar.prototype.getCookies=function(e,t,o){function r(e){if(e.hostOnly){if(e.domain!=n)return!1}else if(!domainMatch(n,e.domain,!1))return!1;return c||pathMatch(a,e.path)?e.secure&&!s?!1:e.httpOnly&&!u?!1:p&&e.expiryTime()<=l?(f.removeCookie(e.domain,e.path,e.key,function(){}),!1):!0:!1}var i=getCookieContext(e);t instanceof Function&&(o=t,t={});var n=canonicalDomain(i.hostname),a=i.pathname||"/",s=t.secure;null!=s||!i.protocol||"https:"!=i.protocol&&"wss:"!=i.protocol||(s=!0);var u=t.http;null==u&&(u=!0);var l=t.now||Date.now(),p=t.expire!==!1,c=!!t.allPaths,f=this.store;f.findCookies(n,c?null:a,function(e,i){if(e)return o(e);i=i.filter(r),t.sort!==!1&&(i=i.sort(cookieCompare));var n=new Date;i.forEach(function(e){e.lastAccessed=n}),o(null,i)})},CAN_BE_SYNC.push("getCookieString"),CookieJar.prototype.getCookieString=function(){var e=Array.prototype.slice.call(arguments,0),t=e.pop(),o=function(e,o){e?t(e):t(null,o.sort(cookieCompare).map(function(e){return e.cookieString()}).join("; "))};e.push(o),this.getCookies.apply(this,e)},CAN_BE_SYNC.push("getSetCookieStrings"),CookieJar.prototype.getSetCookieStrings=function(){var e=Array.prototype.slice.call(arguments,0),t=e.pop(),o=function(e,o){e?t(e):t(null,o.map(function(e){return e.toString()}))};e.push(o),this.getCookies.apply(this,e)},CAN_BE_SYNC.push("serialize"),CookieJar.prototype.serialize=function(e){var t=this.store.constructor.name;"Object"===t&&(t=null);var o={version:"tough-cookie@"+VERSION,storeType:t,rejectPublicSuffixes:!!this.rejectPublicSuffixes,cookies:[]};return this.store.getAllCookies&&"function"==typeof this.store.getAllCookies?void this.store.getAllCookies(function(t,r){return t?e(t):(o.cookies=r.map(function(e){return e=e instanceof Cookie?e.toJSON():e,delete e.creationIndex,e}),e(null,o))}):e(new Error("store does not support getAllCookies and cannot be serialized"))},CookieJar.prototype.toJSON=function(){return this.serializeSync()},CAN_BE_SYNC.push("_importCookies"),CookieJar.prototype._importCookies=function(e,t){function o(e){if(e)return t(e);if(!i.length)return t(e,r);var n;try{n=fromJSON(i.shift())}catch(a){return t(a)}return null===n?o(null):void r.store.putCookie(n,o)}var r=this,i=e.cookies;return i&&Array.isArray(i)?void o():t(new Error("serialized jar has no cookies array"))},CookieJar.deserialize=function(e,t,o){3!==arguments.length&&(o=t,t=null);var r;if("string"==typeof e){if(r=jsonParse(e),r instanceof Error)return o(r)}else r=e;var i=new CookieJar(t,r.rejectPublicSuffixes);i._importCookies(r,function(e){return e?o(e):void o(null,i)})},CookieJar.fromJSON=CookieJar.deserializeSync,CookieJar.deserializeSync=function(e,t){var o="string"==typeof e?JSON.parse(e):e,r=new CookieJar(t,o.rejectPublicSuffixes);if(!r.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");return r._importCookiesSync(o),r},CAN_BE_SYNC.push("clone"),CookieJar.prototype.clone=function(e,t){1===arguments.length&&(t=e,e=null),this.serialize(function(o,r){return o?t(o):void CookieJar.deserialize(e,r,t)})},CAN_BE_SYNC.forEach(function(e){CookieJar.prototype[e+"Sync"]=syncWrap(e)}),module.exports={CookieJar:CookieJar,Cookie:Cookie,Store:Store,MemoryCookieStore:MemoryCookieStore,parseDate:parseDate,formatDate:formatDate,parse:parse,fromJSON:fromJSON,domainMatch:domainMatch,defaultPath:defaultPath,pathMatch:pathMatch,getPublicSuffix:pubsuffix.getPublicSuffix,cookieCompare:cookieCompare,permuteDomain:require("./permuteDomain").permuteDomain,permutePath:permutePath,canonicalDomain:canonicalDomain};


},{"../package.json":242,"./memstore":237,"./pathMatch":238,"./permuteDomain":239,"./pubsuffix":240,"./store":241,"net":63,"punycode":96,"url":266}],237:[function(require,module,exports){
  "use strict";function MemoryCookieStore(){Store.call(this),this.idx={}}var Store=require("./store").Store,permuteDomain=require("./permuteDomain").permuteDomain,pathMatch=require("./pathMatch").pathMatch,util=require("util");util.inherits(MemoryCookieStore,Store),exports.MemoryCookieStore=MemoryCookieStore,MemoryCookieStore.prototype.idx=null,MemoryCookieStore.prototype.synchronous=!0,MemoryCookieStore.prototype.inspect=function(){return"{ idx: "+util.inspect(this.idx,!1,2)+" }"},MemoryCookieStore.prototype.findCookie=function(o,t,e,i){return this.idx[o]&&this.idx[o][t]?i(null,this.idx[o][t][e]||null):i(null,void 0)},MemoryCookieStore.prototype.findCookies=function(o,t,e){var i=[];if(!o)return e(null,[]);var r;r=t?function(o){Object.keys(o).forEach(function(e){if(pathMatch(t,e)){var r=o[e];for(var n in r)i.push(r[n])}})}:function(o){for(var t in o){var e=o[t];for(var r in e)i.push(e[r])}};var n=permuteDomain(o)||[o],u=this.idx;n.forEach(function(o){var t=u[o];t&&r(t)}),e(null,i)},MemoryCookieStore.prototype.putCookie=function(o,t){this.idx[o.domain]||(this.idx[o.domain]={}),this.idx[o.domain][o.path]||(this.idx[o.domain][o.path]={}),this.idx[o.domain][o.path][o.key]=o,t(null)},MemoryCookieStore.prototype.updateCookie=function(o,t,e){this.putCookie(t,e)},MemoryCookieStore.prototype.removeCookie=function(o,t,e,i){this.idx[o]&&this.idx[o][t]&&this.idx[o][t][e]&&delete this.idx[o][t][e],i(null)},MemoryCookieStore.prototype.removeCookies=function(o,t,e){return this.idx[o]&&(t?delete this.idx[o][t]:delete this.idx[o]),e(null)},MemoryCookieStore.prototype.getAllCookies=function(o){var t=[],e=this.idx,i=Object.keys(e);i.forEach(function(o){var i=Object.keys(e[o]);i.forEach(function(i){var r=Object.keys(e[o][i]);r.forEach(function(r){null!==r&&t.push(e[o][i][r])})})}),t.sort(function(o,t){return(o.creationIndex||0)-(t.creationIndex||0)}),o(null,t)};


},{"./pathMatch":238,"./permuteDomain":239,"./store":241,"util":109}],238:[function(require,module,exports){
  "use strict";function pathMatch(t,r){if(r===t)return!0;var e=t.indexOf(r);if(0===e){if("/"===r.substr(-1))return!0;if("/"===t.substr(r.length,1))return!0}return!1}exports.pathMatch=pathMatch;


},{}],239:[function(require,module,exports){
  "use strict";function permuteDomain(e){var r=pubsuffix.getPublicSuffix(e);if(!r)return null;if(r==e)return[e];for(var u=e.slice(0,-(r.length+1)),i=u.split(".").reverse(),t=r,f=[t];i.length;)t=i.shift()+"."+t,f.push(t);return f}var pubsuffix=require("./pubsuffix");exports.permuteDomain=permuteDomain;


},{"./pubsuffix":240}],240:[function(require,module,exports){
  "use strict";var punycode=require("punycode");module.exports.getPublicSuffix=function(a){if(!a)return null;if(a.match(/^\./))return null;var o=punycode.toASCII(a),i=!1;if(o!==a&&(a=o,i=!0),index[a])return null;a=a.toLowerCase();for(var n=a.split(".").reverse(),s="",e=0,m=0;m<n.length;m++){var u=n[m],t="*"+s,r=u+s;index[t]?(e=m+1,index[r]===!1&&e--):index[r]&&(e=m+1),s="."+r}if(index["*"+s])return null;if(e=e||1,n.length>e){var p=n.slice(0,e+1).reverse().join(".");return i?punycode.toUnicode(p):p}return null};var index=module.exports.index=Object.freeze({ac:!0,"com.ac":!0,"edu.ac":!0,"gov.ac":!0,"net.ac":!0,"mil.ac":!0,"org.ac":!0,ad:!0,"nom.ad":!0,ae:!0,"co.ae":!0,"net.ae":!0,"org.ae":!0,"sch.ae":!0,"ac.ae":!0,"gov.ae":!0,"mil.ae":!0,aero:!0,"accident-investigation.aero":!0,"accident-prevention.aero":!0,"aerobatic.aero":!0,"aeroclub.aero":!0,"aerodrome.aero":!0,"agents.aero":!0,"aircraft.aero":!0,"airline.aero":!0,"airport.aero":!0,"air-surveillance.aero":!0,"airtraffic.aero":!0,"air-traffic-control.aero":!0,"ambulance.aero":!0,"amusement.aero":!0,"association.aero":!0,"author.aero":!0,"ballooning.aero":!0,"broker.aero":!0,"caa.aero":!0,"cargo.aero":!0,"catering.aero":!0,"certification.aero":!0,"championship.aero":!0,"charter.aero":!0,"civilaviation.aero":!0,"club.aero":!0,"conference.aero":!0,"consultant.aero":!0,"consulting.aero":!0,"control.aero":!0,"council.aero":!0,"crew.aero":!0,"design.aero":!0,"dgca.aero":!0,"educator.aero":!0,"emergency.aero":!0,"engine.aero":!0,"engineer.aero":!0,"entertainment.aero":!0,"equipment.aero":!0,"exchange.aero":!0,"express.aero":!0,"federation.aero":!0,"flight.aero":!0,"freight.aero":!0,"fuel.aero":!0,"gliding.aero":!0,"government.aero":!0,"groundhandling.aero":!0,"group.aero":!0,"hanggliding.aero":!0,"homebuilt.aero":!0,"insurance.aero":!0,"journal.aero":!0,"journalist.aero":!0,"leasing.aero":!0,"logistics.aero":!0,"magazine.aero":!0,"maintenance.aero":!0,"marketplace.aero":!0,"media.aero":!0,"microlight.aero":!0,"modelling.aero":!0,"navigation.aero":!0,"parachuting.aero":!0,"paragliding.aero":!0,"passenger-association.aero":!0,"pilot.aero":!0,"press.aero":!0,"production.aero":!0,"recreation.aero":!0,"repbody.aero":!0,"res.aero":!0,"research.aero":!0,"rotorcraft.aero":!0,"safety.aero":!0,"scientist.aero":!0,"services.aero":!0,"show.aero":!0,"skydiving.aero":!0,"software.aero":!0,"student.aero":!0,"taxi.aero":!0,"trader.aero":!0,"trading.aero":!0,"trainer.aero":!0,"union.aero":!0,"workinggroup.aero":!0,"works.aero":!0,af:!0,"gov.af":!0,"com.af":!0,"org.af":!0,"net.af":!0,"edu.af":!0,ag:!0,"com.ag":!0,"org.ag":!0,"net.ag":!0,"co.ag":!0,"nom.ag":!0,ai:!0,"off.ai":!0,"com.ai":!0,"net.ai":!0,"org.ai":!0,al:!0,"com.al":!0,"edu.al":!0,"gov.al":!0,"mil.al":!0,"net.al":!0,"org.al":!0,am:!0,an:!0,"com.an":!0,"net.an":!0,"org.an":!0,"edu.an":!0,ao:!0,"ed.ao":!0,"gv.ao":!0,"og.ao":!0,"co.ao":!0,"pb.ao":!0,"it.ao":!0,aq:!0,ar:!0,"com.ar":!0,"edu.ar":!0,"gob.ar":!0,"gov.ar":!0,"int.ar":!0,"mil.ar":!0,"net.ar":!0,"org.ar":!0,"tur.ar":!0,arpa:!0,"e164.arpa":!0,"in-addr.arpa":!0,"ip6.arpa":!0,"iris.arpa":!0,"uri.arpa":!0,"urn.arpa":!0,as:!0,"gov.as":!0,asia:!0,at:!0,"ac.at":!0,"co.at":!0,"gv.at":!0,"or.at":!0,au:!0,"com.au":!0,"net.au":!0,"org.au":!0,"edu.au":!0,"gov.au":!0,"asn.au":!0,"id.au":!0,"info.au":!0,"conf.au":!0,"oz.au":!0,"act.au":!0,"nsw.au":!0,"nt.au":!0,"qld.au":!0,"sa.au":!0,"tas.au":!0,"vic.au":!0,"wa.au":!0,"act.edu.au":!0,"nsw.edu.au":!0,"nt.edu.au":!0,"qld.edu.au":!0,"sa.edu.au":!0,"tas.edu.au":!0,"vic.edu.au":!0,"wa.edu.au":!0,"qld.gov.au":!0,"sa.gov.au":!0,"tas.gov.au":!0,"vic.gov.au":!0,"wa.gov.au":!0,aw:!0,"com.aw":!0,ax:!0,az:!0,"com.az":!0,"net.az":!0,"int.az":!0,"gov.az":!0,"org.az":!0,"edu.az":!0,"info.az":!0,"pp.az":!0,"mil.az":!0,"name.az":!0,"pro.az":!0,"biz.az":!0,ba:!0,"org.ba":!0,"net.ba":!0,"edu.ba":!0,"gov.ba":!0,"mil.ba":!0,"unsa.ba":!0,"unbi.ba":!0,"co.ba":!0,"com.ba":!0,"rs.ba":!0,bb:!0,"biz.bb":!0,"co.bb":!0,"com.bb":!0,"edu.bb":!0,"gov.bb":!0,"info.bb":!0,"net.bb":!0,"org.bb":!0,"store.bb":!0,"tv.bb":!0,"*.bd":!0,be:!0,"ac.be":!0,bf:!0,"gov.bf":!0,bg:!0,"a.bg":!0,"b.bg":!0,"c.bg":!0,"d.bg":!0,"e.bg":!0,"f.bg":!0,"g.bg":!0,"h.bg":!0,"i.bg":!0,"j.bg":!0,"k.bg":!0,"l.bg":!0,"m.bg":!0,"n.bg":!0,"o.bg":!0,"p.bg":!0,"q.bg":!0,"r.bg":!0,"s.bg":!0,"t.bg":!0,"u.bg":!0,"v.bg":!0,"w.bg":!0,"x.bg":!0,"y.bg":!0,"z.bg":!0,"0.bg":!0,"1.bg":!0,"2.bg":!0,"3.bg":!0,"4.bg":!0,"5.bg":!0,"6.bg":!0,"7.bg":!0,"8.bg":!0,"9.bg":!0,bh:!0,"com.bh":!0,"edu.bh":!0,"net.bh":!0,"org.bh":!0,"gov.bh":!0,bi:!0,"co.bi":!0,"com.bi":!0,"edu.bi":!0,"or.bi":!0,"org.bi":!0,biz:!0,bj:!0,"asso.bj":!0,"barreau.bj":!0,"gouv.bj":!0,bm:!0,"com.bm":!0,"edu.bm":!0,"gov.bm":!0,"net.bm":!0,"org.bm":!0,"*.bn":!0,bo:!0,"com.bo":!0,"edu.bo":!0,"gov.bo":!0,"gob.bo":!0,"int.bo":!0,"org.bo":!0,"net.bo":!0,"mil.bo":!0,"tv.bo":!0,br:!0,"adm.br":!0,"adv.br":!0,"agr.br":!0,"am.br":!0,"arq.br":!0,"art.br":!0,"ato.br":!0,"b.br":!0,"bio.br":!0,"blog.br":!0,"bmd.br":!0,"cim.br":!0,"cng.br":!0,"cnt.br":!0,"com.br":!0,"coop.br":!0,"ecn.br":!0,"eco.br":!0,"edu.br":!0,"emp.br":!0,"eng.br":!0,"esp.br":!0,"etc.br":!0,"eti.br":!0,"far.br":!0,"flog.br":!0,"fm.br":!0,"fnd.br":!0,"fot.br":!0,"fst.br":!0,"g12.br":!0,"ggf.br":!0,"gov.br":!0,"imb.br":!0,"ind.br":!0,"inf.br":!0,"jor.br":!0,"jus.br":!0,"leg.br":!0,"lel.br":!0,"mat.br":!0,"med.br":!0,"mil.br":!0,"mp.br":!0,"mus.br":!0,"net.br":!0,"*.nom.br":!0,"not.br":!0,"ntr.br":!0,"odo.br":!0,"org.br":!0,"ppg.br":!0,"pro.br":!0,"psc.br":!0,"psi.br":!0,"qsl.br":!0,"radio.br":!0,"rec.br":!0,"slg.br":!0,"srv.br":!0,"taxi.br":!0,"teo.br":!0,"tmp.br":!0,"trd.br":!0,"tur.br":!0,"tv.br":!0,"vet.br":!0,"vlog.br":!0,"wiki.br":!0,"zlg.br":!0,bs:!0,"com.bs":!0,"net.bs":!0,"org.bs":!0,"edu.bs":!0,"gov.bs":!0,bt:!0,"com.bt":!0,"edu.bt":!0,"gov.bt":!0,"net.bt":!0,"org.bt":!0,bv:!0,bw:!0,"co.bw":!0,"org.bw":!0,by:!0,"gov.by":!0,"mil.by":!0,"com.by":!0,"of.by":!0,bz:!0,"com.bz":!0,"net.bz":!0,"org.bz":!0,"edu.bz":!0,"gov.bz":!0,ca:!0,"ab.ca":!0,"bc.ca":!0,"mb.ca":!0,"nb.ca":!0,"nf.ca":!0,"nl.ca":!0,"ns.ca":!0,"nt.ca":!0,"nu.ca":!0,"on.ca":!0,"pe.ca":!0,"qc.ca":!0,"sk.ca":!0,"yk.ca":!0,"gc.ca":!0,cat:!0,cc:!0,cd:!0,"gov.cd":!0,cf:!0,cg:!0,ch:!0,ci:!0,"org.ci":!0,"or.ci":!0,"com.ci":!0,"co.ci":!0,"edu.ci":!0,"ed.ci":!0,"ac.ci":!0,"net.ci":!0,"go.ci":!0,"asso.ci":!0,"xn--aroport-bya.ci":!0,"int.ci":!0,"presse.ci":!0,"md.ci":!0,"gouv.ci":!0,"*.ck":!0,"www.ck":!1,cl:!0,"gov.cl":!0,"gob.cl":!0,"co.cl":!0,"mil.cl":!0,cm:!0,"co.cm":!0,"com.cm":!0,"gov.cm":!0,"net.cm":!0,cn:!0,"ac.cn":!0,"com.cn":!0,"edu.cn":!0,"gov.cn":!0,"net.cn":!0,"org.cn":!0,"mil.cn":!0,"xn--55qx5d.cn":!0,"xn--io0a7i.cn":!0,"xn--od0alg.cn":!0,"ah.cn":!0,"bj.cn":!0,"cq.cn":!0,"fj.cn":!0,"gd.cn":!0,"gs.cn":!0,"gz.cn":!0,"gx.cn":!0,"ha.cn":!0,"hb.cn":!0,"he.cn":!0,"hi.cn":!0,"hl.cn":!0,"hn.cn":!0,"jl.cn":!0,"js.cn":!0,"jx.cn":!0,"ln.cn":!0,"nm.cn":!0,"nx.cn":!0,"qh.cn":!0,"sc.cn":!0,"sd.cn":!0,"sh.cn":!0,"sn.cn":!0,"sx.cn":!0,"tj.cn":!0,"xj.cn":!0,"xz.cn":!0,"yn.cn":!0,"zj.cn":!0,"hk.cn":!0,"mo.cn":!0,"tw.cn":!0,co:!0,"arts.co":!0,"com.co":!0,"edu.co":!0,"firm.co":!0,"gov.co":!0,"info.co":!0,"int.co":!0,"mil.co":!0,"net.co":!0,"nom.co":!0,"org.co":!0,"rec.co":!0,"web.co":!0,com:!0,coop:!0,cr:!0,"ac.cr":!0,"co.cr":!0,"ed.cr":!0,"fi.cr":!0,"go.cr":!0,"or.cr":!0,"sa.cr":!0,cu:!0,"com.cu":!0,"edu.cu":!0,"org.cu":!0,"net.cu":!0,"gov.cu":!0,"inf.cu":!0,cv:!0,cw:!0,"com.cw":!0,"edu.cw":!0,"net.cw":!0,"org.cw":!0,cx:!0,"gov.cx":!0,"*.cy":!0,cz:!0,de:!0,dj:!0,dk:!0,dm:!0,"com.dm":!0,"net.dm":!0,"org.dm":!0,"edu.dm":!0,"gov.dm":!0,"do":!0,"art.do":!0,"com.do":!0,"edu.do":!0,"gob.do":!0,"gov.do":!0,"mil.do":!0,"net.do":!0,"org.do":!0,"sld.do":!0,"web.do":!0,dz:!0,"com.dz":!0,"org.dz":!0,"net.dz":!0,"gov.dz":!0,"edu.dz":!0,"asso.dz":!0,"pol.dz":!0,"art.dz":!0,ec:!0,"com.ec":!0,"info.ec":!0,"net.ec":!0,"fin.ec":!0,"k12.ec":!0,"med.ec":!0,"pro.ec":!0,"org.ec":!0,"edu.ec":!0,"gov.ec":!0,"gob.ec":!0,"mil.ec":!0,edu:!0,ee:!0,"edu.ee":!0,"gov.ee":!0,"riik.ee":!0,"lib.ee":!0,"med.ee":!0,"com.ee":!0,"pri.ee":!0,"aip.ee":!0,"org.ee":!0,"fie.ee":!0,eg:!0,"com.eg":!0,"edu.eg":!0,"eun.eg":!0,"gov.eg":!0,"mil.eg":!0,"name.eg":!0,"net.eg":!0,"org.eg":!0,"sci.eg":!0,"*.er":!0,es:!0,"com.es":!0,"nom.es":!0,"org.es":!0,"gob.es":!0,"edu.es":!0,et:!0,"com.et":!0,"gov.et":!0,"org.et":!0,"edu.et":!0,"biz.et":!0,"name.et":!0,"info.et":!0,eu:!0,fi:!0,"aland.fi":!0,"*.fj":!0,"*.fk":!0,fm:!0,fo:!0,fr:!0,"com.fr":!0,"asso.fr":!0,"nom.fr":!0,"prd.fr":!0,"presse.fr":!0,"tm.fr":!0,"aeroport.fr":!0,"assedic.fr":!0,"avocat.fr":!0,"avoues.fr":!0,"cci.fr":!0,"chambagri.fr":!0,"chirurgiens-dentistes.fr":!0,"experts-comptables.fr":!0,"geometre-expert.fr":!0,"gouv.fr":!0,"greta.fr":!0,"huissier-justice.fr":!0,"medecin.fr":!0,"notaires.fr":!0,"pharmacien.fr":!0,"port.fr":!0,"veterinaire.fr":!0,ga:!0,gb:!0,gd:!0,ge:!0,"com.ge":!0,"edu.ge":!0,"gov.ge":!0,"org.ge":!0,"mil.ge":!0,"net.ge":!0,"pvt.ge":!0,gf:!0,gg:!0,"co.gg":!0,"net.gg":!0,"org.gg":!0,gh:!0,"com.gh":!0,"edu.gh":!0,"gov.gh":!0,"org.gh":!0,"mil.gh":!0,gi:!0,"com.gi":!0,"ltd.gi":!0,"gov.gi":!0,"mod.gi":!0,"edu.gi":!0,"org.gi":!0,gl:!0,gm:!0,gn:!0,"ac.gn":!0,"com.gn":!0,"edu.gn":!0,"gov.gn":!0,"org.gn":!0,"net.gn":!0,gov:!0,gp:!0,"com.gp":!0,"net.gp":!0,"mobi.gp":!0,"edu.gp":!0,"org.gp":!0,"asso.gp":!0,gq:!0,gr:!0,"com.gr":!0,"edu.gr":!0,"net.gr":!0,"org.gr":!0,"gov.gr":!0,gs:!0,gt:!0,"com.gt":!0,"edu.gt":!0,"gob.gt":!0,"ind.gt":!0,"mil.gt":!0,"net.gt":!0,"org.gt":!0,"*.gu":!0,gw:!0,gy:!0,"co.gy":!0,"com.gy":!0,"net.gy":!0,hk:!0,"com.hk":!0,"edu.hk":!0,"gov.hk":!0,"idv.hk":!0,"net.hk":!0,"org.hk":!0,"xn--55qx5d.hk":!0,"xn--wcvs22d.hk":!0,"xn--lcvr32d.hk":!0,"xn--mxtq1m.hk":!0,"xn--gmqw5a.hk":!0,"xn--ciqpn.hk":!0,"xn--gmq050i.hk":!0,"xn--zf0avx.hk":!0,"xn--io0a7i.hk":!0,"xn--mk0axi.hk":!0,"xn--od0alg.hk":!0,"xn--od0aq3b.hk":!0,"xn--tn0ag.hk":!0,"xn--uc0atv.hk":!0,"xn--uc0ay4a.hk":!0,hm:!0,hn:!0,"com.hn":!0,"edu.hn":!0,"org.hn":!0,"net.hn":!0,"mil.hn":!0,"gob.hn":!0,hr:!0,"iz.hr":!0,"from.hr":!0,"name.hr":!0,"com.hr":!0,ht:!0,"com.ht":!0,"shop.ht":!0,"firm.ht":!0,"info.ht":!0,"adult.ht":!0,"net.ht":!0,"pro.ht":!0,"org.ht":!0,"med.ht":!0,"art.ht":!0,"coop.ht":!0,"pol.ht":!0,"asso.ht":!0,"edu.ht":!0,"rel.ht":!0,"gouv.ht":!0,"perso.ht":!0,hu:!0,"co.hu":!0,"info.hu":!0,"org.hu":!0,"priv.hu":!0,"sport.hu":!0,"tm.hu":!0,"2000.hu":!0,"agrar.hu":!0,"bolt.hu":!0,"casino.hu":!0,"city.hu":!0,"erotica.hu":!0,"erotika.hu":!0,"film.hu":!0,"forum.hu":!0,"games.hu":!0,"hotel.hu":!0,"ingatlan.hu":!0,"jogasz.hu":!0,"konyvelo.hu":!0,"lakas.hu":!0,"media.hu":!0,"news.hu":!0,"reklam.hu":!0,"sex.hu":!0,"shop.hu":!0,"suli.hu":!0,"szex.hu":!0,"tozsde.hu":!0,"utazas.hu":!0,"video.hu":!0,id:!0,"ac.id":!0,"biz.id":!0,"co.id":!0,"desa.id":!0,"go.id":!0,"mil.id":!0,"my.id":!0,"net.id":!0,"or.id":!0,"sch.id":!0,"web.id":!0,ie:!0,"gov.ie":!0,"*.il":!0,im:!0,"ac.im":!0,"co.im":!0,"com.im":!0,"ltd.co.im":!0,"net.im":!0,"org.im":!0,"plc.co.im":!0,"tt.im":!0,"tv.im":!0,"in":!0,"co.in":!0,"firm.in":!0,"net.in":!0,"org.in":!0,"gen.in":!0,"ind.in":!0,"nic.in":!0,"ac.in":!0,"edu.in":!0,"res.in":!0,"gov.in":!0,"mil.in":!0,info:!0,"int":!0,"eu.int":!0,io:!0,"com.io":!0,iq:!0,"gov.iq":!0,"edu.iq":!0,"mil.iq":!0,"com.iq":!0,"org.iq":!0,"net.iq":!0,ir:!0,"ac.ir":!0,"co.ir":!0,"gov.ir":!0,"id.ir":!0,"net.ir":!0,"org.ir":!0,"sch.ir":!0,"xn--mgba3a4f16a.ir":!0,"xn--mgba3a4fra.ir":!0,is:!0,"net.is":!0,"com.is":!0,"edu.is":!0,"gov.is":!0,"org.is":!0,"int.is":!0,it:!0,"gov.it":!0,"edu.it":!0,"abr.it":!0,"abruzzo.it":!0,"aosta-valley.it":!0,"aostavalley.it":!0,"bas.it":!0,"basilicata.it":!0,"cal.it":!0,"calabria.it":!0,"cam.it":!0,"campania.it":!0,"emilia-romagna.it":!0,"emiliaromagna.it":!0,"emr.it":!0,"friuli-v-giulia.it":!0,"friuli-ve-giulia.it":!0,"friuli-vegiulia.it":!0,"friuli-venezia-giulia.it":!0,"friuli-veneziagiulia.it":!0,"friuli-vgiulia.it":!0,"friuliv-giulia.it":!0,"friulive-giulia.it":!0,"friulivegiulia.it":!0,"friulivenezia-giulia.it":!0,"friuliveneziagiulia.it":!0,"friulivgiulia.it":!0,"fvg.it":!0,"laz.it":!0,"lazio.it":!0,"lig.it":!0,"liguria.it":!0,"lom.it":!0,"lombardia.it":!0,"lombardy.it":!0,"lucania.it":!0,"mar.it":!0,"marche.it":!0,"mol.it":!0,"molise.it":!0,"piedmont.it":!0,"piemonte.it":!0,"pmn.it":!0,"pug.it":!0,"puglia.it":!0,"sar.it":!0,"sardegna.it":!0,"sardinia.it":!0,"sic.it":!0,"sicilia.it":!0,"sicily.it":!0,"taa.it":!0,"tos.it":!0,"toscana.it":!0,"trentino-a-adige.it":!0,"trentino-aadige.it":!0,"trentino-alto-adige.it":!0,"trentino-altoadige.it":!0,"trentino-s-tirol.it":!0,"trentino-stirol.it":!0,"trentino-sud-tirol.it":!0,"trentino-sudtirol.it":!0,"trentino-sued-tirol.it":!0,"trentino-suedtirol.it":!0,"trentinoa-adige.it":!0,"trentinoaadige.it":!0,"trentinoalto-adige.it":!0,"trentinoaltoadige.it":!0,"trentinos-tirol.it":!0,"trentinostirol.it":!0,"trentinosud-tirol.it":!0,"trentinosudtirol.it":!0,"trentinosued-tirol.it":!0,"trentinosuedtirol.it":!0,"tuscany.it":!0,"umb.it":!0,"umbria.it":!0,"val-d-aosta.it":!0,"val-daosta.it":!0,"vald-aosta.it":!0,"valdaosta.it":!0,"valle-aosta.it":!0,"valle-d-aosta.it":!0,"valle-daosta.it":!0,"valleaosta.it":!0,"valled-aosta.it":!0,"valledaosta.it":!0,"vallee-aoste.it":!0,"valleeaoste.it":!0,"vao.it":!0,"vda.it":!0,"ven.it":!0,"veneto.it":!0,"ag.it":!0,"agrigento.it":!0,"al.it":!0,"alessandria.it":!0,"alto-adige.it":!0,"altoadige.it":!0,"an.it":!0,"ancona.it":!0,"andria-barletta-trani.it":!0,"andria-trani-barletta.it":!0,"andriabarlettatrani.it":!0,"andriatranibarletta.it":!0,"ao.it":!0,"aosta.it":!0,"aoste.it":!0,"ap.it":!0,"aq.it":!0,"aquila.it":!0,"ar.it":!0,"arezzo.it":!0,"ascoli-piceno.it":!0,"ascolipiceno.it":!0,"asti.it":!0,"at.it":!0,"av.it":!0,"avellino.it":!0,"ba.it":!0,"balsan.it":!0,"bari.it":!0,"barletta-trani-andria.it":!0,"barlettatraniandria.it":!0,"belluno.it":!0,"benevento.it":!0,"bergamo.it":!0,"bg.it":!0,"bi.it":!0,"biella.it":!0,"bl.it":!0,"bn.it":!0,"bo.it":!0,"bologna.it":!0,"bolzano.it":!0,"bozen.it":!0,"br.it":!0,"brescia.it":!0,"brindisi.it":!0,"bs.it":!0,"bt.it":!0,"bz.it":!0,"ca.it":!0,"cagliari.it":!0,"caltanissetta.it":!0,"campidano-medio.it":!0,"campidanomedio.it":!0,"campobasso.it":!0,"carbonia-iglesias.it":!0,"carboniaiglesias.it":!0,"carrara-massa.it":!0,"carraramassa.it":!0,"caserta.it":!0,"catania.it":!0,"catanzaro.it":!0,"cb.it":!0,"ce.it":!0,"cesena-forli.it":!0,"cesenaforli.it":!0,"ch.it":!0,"chieti.it":!0,"ci.it":!0,"cl.it":!0,"cn.it":!0,"co.it":!0,"como.it":!0,"cosenza.it":!0,"cr.it":!0,"cremona.it":!0,"crotone.it":!0,"cs.it":!0,"ct.it":!0,"cuneo.it":!0,"cz.it":!0,"dell-ogliastra.it":!0,"dellogliastra.it":!0,"en.it":!0,"enna.it":!0,"fc.it":!0,"fe.it":!0,"fermo.it":!0,"ferrara.it":!0,"fg.it":!0,"fi.it":!0,"firenze.it":!0,"florence.it":!0,"fm.it":!0,"foggia.it":!0,"forli-cesena.it":!0,"forlicesena.it":!0,"fr.it":!0,"frosinone.it":!0,"ge.it":!0,"genoa.it":!0,"genova.it":!0,"go.it":!0,"gorizia.it":!0,"gr.it":!0,"grosseto.it":!0,"iglesias-carbonia.it":!0,"iglesiascarbonia.it":!0,"im.it":!0,"imperia.it":!0,"is.it":!0,"isernia.it":!0,"kr.it":!0,"la-spezia.it":!0,"laquila.it":!0,"laspezia.it":!0,"latina.it":!0,"lc.it":!0,"le.it":!0,"lecce.it":!0,"lecco.it":!0,"li.it":!0,"livorno.it":!0,"lo.it":!0,"lodi.it":!0,"lt.it":!0,"lu.it":!0,"lucca.it":!0,"macerata.it":!0,"mantova.it":!0,"massa-carrara.it":!0,"massacarrara.it":!0,"matera.it":!0,"mb.it":!0,"mc.it":!0,"me.it":!0,"medio-campidano.it":!0,"mediocampidano.it":!0,"messina.it":!0,"mi.it":!0,"milan.it":!0,"milano.it":!0,"mn.it":!0,"mo.it":!0,"modena.it":!0,"monza-brianza.it":!0,"monza-e-della-brianza.it":!0,"monza.it":!0,"monzabrianza.it":!0,"monzaebrianza.it":!0,"monzaedellabrianza.it":!0,"ms.it":!0,"mt.it":!0,"na.it":!0,"naples.it":!0,"napoli.it":!0,"no.it":!0,"novara.it":!0,"nu.it":!0,"nuoro.it":!0,"og.it":!0,"ogliastra.it":!0,"olbia-tempio.it":!0,"olbiatempio.it":!0,"or.it":!0,"oristano.it":!0,"ot.it":!0,"pa.it":!0,"padova.it":!0,"padua.it":!0,"palermo.it":!0,"parma.it":!0,"pavia.it":!0,"pc.it":!0,"pd.it":!0,"pe.it":!0,"perugia.it":!0,"pesaro-urbino.it":!0,"pesarourbino.it":!0,"pescara.it":!0,"pg.it":!0,"pi.it":!0,"piacenza.it":!0,"pisa.it":!0,"pistoia.it":!0,"pn.it":!0,"po.it":!0,"pordenone.it":!0,"potenza.it":!0,"pr.it":!0,"prato.it":!0,"pt.it":!0,"pu.it":!0,"pv.it":!0,"pz.it":!0,"ra.it":!0,"ragusa.it":!0,"ravenna.it":!0,"rc.it":!0,"re.it":!0,"reggio-calabria.it":!0,"reggio-emilia.it":!0,"reggiocalabria.it":!0,"reggioemilia.it":!0,"rg.it":!0,"ri.it":!0,"rieti.it":!0,"rimini.it":!0,"rm.it":!0,"rn.it":!0,"ro.it":!0,"roma.it":!0,"rome.it":!0,"rovigo.it":!0,"sa.it":!0,"salerno.it":!0,"sassari.it":!0,"savona.it":!0,"si.it":!0,"siena.it":!0,"siracusa.it":!0,"so.it":!0,"sondrio.it":!0,"sp.it":!0,"sr.it":!0,"ss.it":!0,"suedtirol.it":!0,"sv.it":!0,"ta.it":!0,"taranto.it":!0,"te.it":!0,"tempio-olbia.it":!0,"tempioolbia.it":!0,"teramo.it":!0,"terni.it":!0,"tn.it":!0,"to.it":!0,"torino.it":!0,"tp.it":!0,"tr.it":!0,"trani-andria-barletta.it":!0,"trani-barletta-andria.it":!0,"traniandriabarletta.it":!0,"tranibarlettaandria.it":!0,"trapani.it":!0,"trentino.it":!0,"trento.it":!0,"treviso.it":!0,"trieste.it":!0,"ts.it":!0,"turin.it":!0,"tv.it":!0,"ud.it":!0,"udine.it":!0,"urbino-pesaro.it":!0,"urbinopesaro.it":!0,"va.it":!0,"varese.it":!0,"vb.it":!0,"vc.it":!0,"ve.it":!0,"venezia.it":!0,"venice.it":!0,"verbania.it":!0,"vercelli.it":!0,"verona.it":!0,"vi.it":!0,"vibo-valentia.it":!0,"vibovalentia.it":!0,"vicenza.it":!0,"viterbo.it":!0,"vr.it":!0,"vs.it":!0,"vt.it":!0,"vv.it":!0,je:!0,"co.je":!0,"net.je":!0,"org.je":!0,"*.jm":!0,jo:!0,"com.jo":!0,"org.jo":!0,"net.jo":!0,"edu.jo":!0,"sch.jo":!0,"gov.jo":!0,"mil.jo":!0,"name.jo":!0,jobs:!0,jp:!0,"ac.jp":!0,"ad.jp":!0,"co.jp":!0,"ed.jp":!0,"go.jp":!0,"gr.jp":!0,"lg.jp":!0,"ne.jp":!0,"or.jp":!0,"aichi.jp":!0,"akita.jp":!0,"aomori.jp":!0,"chiba.jp":!0,"ehime.jp":!0,"fukui.jp":!0,"fukuoka.jp":!0,"fukushima.jp":!0,"gifu.jp":!0,"gunma.jp":!0,"hiroshima.jp":!0,"hokkaido.jp":!0,"hyogo.jp":!0,"ibaraki.jp":!0,"ishikawa.jp":!0,"iwate.jp":!0,"kagawa.jp":!0,"kagoshima.jp":!0,"kanagawa.jp":!0,"kochi.jp":!0,"kumamoto.jp":!0,"kyoto.jp":!0,"mie.jp":!0,"miyagi.jp":!0,"miyazaki.jp":!0,"nagano.jp":!0,"nagasaki.jp":!0,"nara.jp":!0,"niigata.jp":!0,"oita.jp":!0,"okayama.jp":!0,"okinawa.jp":!0,"osaka.jp":!0,"saga.jp":!0,"saitama.jp":!0,"shiga.jp":!0,"shimane.jp":!0,"shizuoka.jp":!0,"tochigi.jp":!0,"tokushima.jp":!0,"tokyo.jp":!0,"tottori.jp":!0,"toyama.jp":!0,"wakayama.jp":!0,"yamagata.jp":!0,"yamaguchi.jp":!0,"yamanashi.jp":!0,"xn--4pvxs.jp":!0,"xn--vgu402c.jp":!0,"xn--c3s14m.jp":!0,"xn--f6qx53a.jp":!0,"xn--8pvr4u.jp":!0,"xn--uist22h.jp":!0,"xn--djrs72d6uy.jp":!0,"xn--mkru45i.jp":!0,"xn--0trq7p7nn.jp":!0,"xn--8ltr62k.jp":!0,"xn--2m4a15e.jp":!0,"xn--efvn9s.jp":!0,"xn--32vp30h.jp":!0,"xn--4it797k.jp":!0,"xn--1lqs71d.jp":!0,"xn--5rtp49c.jp":!0,"xn--5js045d.jp":!0,"xn--ehqz56n.jp":!0,"xn--1lqs03n.jp":!0,"xn--qqqt11m.jp":!0,"xn--kbrq7o.jp":!0,"xn--pssu33l.jp":!0,"xn--ntsq17g.jp":!0,"xn--uisz3g.jp":!0,"xn--6btw5a.jp":!0,"xn--1ctwo.jp":!0,"xn--6orx2r.jp":!0,"xn--rht61e.jp":!0,"xn--rht27z.jp":!0,"xn--djty4k.jp":!0,"xn--nit225k.jp":!0,"xn--rht3d.jp":!0,"xn--klty5x.jp":!0,"xn--kltx9a.jp":!0,"xn--kltp7d.jp":!0,"xn--uuwu58a.jp":!0,"xn--zbx025d.jp":!0,"xn--ntso0iqx3a.jp":!0,"xn--elqq16h.jp":!0,"xn--4it168d.jp":!0,"xn--klt787d.jp":!0,"xn--rny31h.jp":!0,"xn--7t0a264c.jp":!0,"xn--5rtq34k.jp":!0,"xn--k7yn95e.jp":!0,"xn--tor131o.jp":!0,"xn--d5qv7z876c.jp":!0,"*.kawasaki.jp":!0,"*.kitakyushu.jp":!0,"*.kobe.jp":!0,"*.nagoya.jp":!0,"*.sapporo.jp":!0,"*.sendai.jp":!0,"*.yokohama.jp":!0,"city.kawasaki.jp":!1,"city.kitakyushu.jp":!1,"city.kobe.jp":!1,"city.nagoya.jp":!1,"city.sapporo.jp":!1,"city.sendai.jp":!1,"city.yokohama.jp":!1,"aisai.aichi.jp":!0,"ama.aichi.jp":!0,"anjo.aichi.jp":!0,"asuke.aichi.jp":!0,"chiryu.aichi.jp":!0,"chita.aichi.jp":!0,"fuso.aichi.jp":!0,"gamagori.aichi.jp":!0,"handa.aichi.jp":!0,"hazu.aichi.jp":!0,"hekinan.aichi.jp":!0,"higashiura.aichi.jp":!0,"ichinomiya.aichi.jp":!0,"inazawa.aichi.jp":!0,"inuyama.aichi.jp":!0,"isshiki.aichi.jp":!0,"iwakura.aichi.jp":!0,"kanie.aichi.jp":!0,"kariya.aichi.jp":!0,"kasugai.aichi.jp":!0,"kira.aichi.jp":!0,"kiyosu.aichi.jp":!0,"komaki.aichi.jp":!0,"konan.aichi.jp":!0,"kota.aichi.jp":!0,"mihama.aichi.jp":!0,"miyoshi.aichi.jp":!0,"nishio.aichi.jp":!0,"nisshin.aichi.jp":!0,"obu.aichi.jp":!0,"oguchi.aichi.jp":!0,"oharu.aichi.jp":!0,"okazaki.aichi.jp":!0,"owariasahi.aichi.jp":!0,"seto.aichi.jp":!0,"shikatsu.aichi.jp":!0,"shinshiro.aichi.jp":!0,"shitara.aichi.jp":!0,"tahara.aichi.jp":!0,"takahama.aichi.jp":!0,"tobishima.aichi.jp":!0,"toei.aichi.jp":!0,"togo.aichi.jp":!0,"tokai.aichi.jp":!0,"tokoname.aichi.jp":!0,"toyoake.aichi.jp":!0,"toyohashi.aichi.jp":!0,"toyokawa.aichi.jp":!0,"toyone.aichi.jp":!0,"toyota.aichi.jp":!0,"tsushima.aichi.jp":!0,"yatomi.aichi.jp":!0,"akita.akita.jp":!0,"daisen.akita.jp":!0,"fujisato.akita.jp":!0,"gojome.akita.jp":!0,"hachirogata.akita.jp":!0,"happou.akita.jp":!0,"higashinaruse.akita.jp":!0,"honjo.akita.jp":!0,"honjyo.akita.jp":!0,"ikawa.akita.jp":!0,"kamikoani.akita.jp":!0,"kamioka.akita.jp":!0,"katagami.akita.jp":!0,"kazuno.akita.jp":!0,"kitaakita.akita.jp":!0,"kosaka.akita.jp":!0,"kyowa.akita.jp":!0,"misato.akita.jp":!0,"mitane.akita.jp":!0,"moriyoshi.akita.jp":!0,"nikaho.akita.jp":!0,"noshiro.akita.jp":!0,"odate.akita.jp":!0,"oga.akita.jp":!0,"ogata.akita.jp":!0,"semboku.akita.jp":!0,"yokote.akita.jp":!0,"yurihonjo.akita.jp":!0,"aomori.aomori.jp":!0,"gonohe.aomori.jp":!0,"hachinohe.aomori.jp":!0,"hashikami.aomori.jp":!0,"hiranai.aomori.jp":!0,"hirosaki.aomori.jp":!0,"itayanagi.aomori.jp":!0,"kuroishi.aomori.jp":!0,"misawa.aomori.jp":!0,"mutsu.aomori.jp":!0,"nakadomari.aomori.jp":!0,"noheji.aomori.jp":!0,"oirase.aomori.jp":!0,"owani.aomori.jp":!0,"rokunohe.aomori.jp":!0,"sannohe.aomori.jp":!0,"shichinohe.aomori.jp":!0,"shingo.aomori.jp":!0,"takko.aomori.jp":!0,"towada.aomori.jp":!0,"tsugaru.aomori.jp":!0,"tsuruta.aomori.jp":!0,"abiko.chiba.jp":!0,"asahi.chiba.jp":!0,"chonan.chiba.jp":!0,"chosei.chiba.jp":!0,"choshi.chiba.jp":!0,"chuo.chiba.jp":!0,"funabashi.chiba.jp":!0,"futtsu.chiba.jp":!0,"hanamigawa.chiba.jp":!0,"ichihara.chiba.jp":!0,"ichikawa.chiba.jp":!0,"ichinomiya.chiba.jp":!0,"inzai.chiba.jp":!0,"isumi.chiba.jp":!0,"kamagaya.chiba.jp":!0,"kamogawa.chiba.jp":!0,"kashiwa.chiba.jp":!0,"katori.chiba.jp":!0,"katsuura.chiba.jp":!0,"kimitsu.chiba.jp":!0,"kisarazu.chiba.jp":!0,"kozaki.chiba.jp":!0,"kujukuri.chiba.jp":!0,"kyonan.chiba.jp":!0,"matsudo.chiba.jp":!0,"midori.chiba.jp":!0,"mihama.chiba.jp":!0,"minamiboso.chiba.jp":!0,"mobara.chiba.jp":!0,"mutsuzawa.chiba.jp":!0,"nagara.chiba.jp":!0,"nagareyama.chiba.jp":!0,"narashino.chiba.jp":!0,"narita.chiba.jp":!0,"noda.chiba.jp":!0,"oamishirasato.chiba.jp":!0,"omigawa.chiba.jp":!0,"onjuku.chiba.jp":!0,"otaki.chiba.jp":!0,"sakae.chiba.jp":!0,"sakura.chiba.jp":!0,"shimofusa.chiba.jp":!0,"shirako.chiba.jp":!0,"shiroi.chiba.jp":!0,"shisui.chiba.jp":!0,"sodegaura.chiba.jp":!0,"sosa.chiba.jp":!0,"tako.chiba.jp":!0,"tateyama.chiba.jp":!0,"togane.chiba.jp":!0,"tohnosho.chiba.jp":!0,"tomisato.chiba.jp":!0,"urayasu.chiba.jp":!0,"yachimata.chiba.jp":!0,"yachiyo.chiba.jp":!0,"yokaichiba.chiba.jp":!0,"yokoshibahikari.chiba.jp":!0,"yotsukaido.chiba.jp":!0,"ainan.ehime.jp":!0,"honai.ehime.jp":!0,"ikata.ehime.jp":!0,"imabari.ehime.jp":!0,"iyo.ehime.jp":!0,"kamijima.ehime.jp":!0,"kihoku.ehime.jp":!0,"kumakogen.ehime.jp":!0,"masaki.ehime.jp":!0,"matsuno.ehime.jp":!0,"matsuyama.ehime.jp":!0,"namikata.ehime.jp":!0,"niihama.ehime.jp":!0,"ozu.ehime.jp":!0,"saijo.ehime.jp":!0,"seiyo.ehime.jp":!0,"shikokuchuo.ehime.jp":!0,"tobe.ehime.jp":!0,"toon.ehime.jp":!0,"uchiko.ehime.jp":!0,"uwajima.ehime.jp":!0,"yawatahama.ehime.jp":!0,"echizen.fukui.jp":!0,"eiheiji.fukui.jp":!0,"fukui.fukui.jp":!0,"ikeda.fukui.jp":!0,"katsuyama.fukui.jp":!0,"mihama.fukui.jp":!0,"minamiechizen.fukui.jp":!0,"obama.fukui.jp":!0,"ohi.fukui.jp":!0,"ono.fukui.jp":!0,"sabae.fukui.jp":!0,"sakai.fukui.jp":!0,"takahama.fukui.jp":!0,"tsuruga.fukui.jp":!0,"wakasa.fukui.jp":!0,"ashiya.fukuoka.jp":!0,"buzen.fukuoka.jp":!0,"chikugo.fukuoka.jp":!0,"chikuho.fukuoka.jp":!0,"chikujo.fukuoka.jp":!0,"chikushino.fukuoka.jp":!0,"chikuzen.fukuoka.jp":!0,"chuo.fukuoka.jp":!0,"dazaifu.fukuoka.jp":!0,"fukuchi.fukuoka.jp":!0,"hakata.fukuoka.jp":!0,"higashi.fukuoka.jp":!0,"hirokawa.fukuoka.jp":!0,"hisayama.fukuoka.jp":!0,"iizuka.fukuoka.jp":!0,"inatsuki.fukuoka.jp":!0,"kaho.fukuoka.jp":!0,"kasuga.fukuoka.jp":!0,"kasuya.fukuoka.jp":!0,"kawara.fukuoka.jp":!0,"keisen.fukuoka.jp":!0,"koga.fukuoka.jp":!0,"kurate.fukuoka.jp":!0,"kurogi.fukuoka.jp":!0,"kurume.fukuoka.jp":!0,"minami.fukuoka.jp":!0,"miyako.fukuoka.jp":!0,"miyama.fukuoka.jp":!0,"miyawaka.fukuoka.jp":!0,"mizumaki.fukuoka.jp":!0,"munakata.fukuoka.jp":!0,"nakagawa.fukuoka.jp":!0,"nakama.fukuoka.jp":!0,"nishi.fukuoka.jp":!0,"nogata.fukuoka.jp":!0,"ogori.fukuoka.jp":!0,"okagaki.fukuoka.jp":!0,"okawa.fukuoka.jp":!0,"oki.fukuoka.jp":!0,"omuta.fukuoka.jp":!0,"onga.fukuoka.jp":!0,"onojo.fukuoka.jp":!0,"oto.fukuoka.jp":!0,"saigawa.fukuoka.jp":!0,"sasaguri.fukuoka.jp":!0,"shingu.fukuoka.jp":!0,"shinyoshitomi.fukuoka.jp":!0,"shonai.fukuoka.jp":!0,"soeda.fukuoka.jp":!0,"sue.fukuoka.jp":!0,"tachiarai.fukuoka.jp":!0,"tagawa.fukuoka.jp":!0,"takata.fukuoka.jp":!0,"toho.fukuoka.jp":!0,"toyotsu.fukuoka.jp":!0,"tsuiki.fukuoka.jp":!0,"ukiha.fukuoka.jp":!0,"umi.fukuoka.jp":!0,"usui.fukuoka.jp":!0,"yamada.fukuoka.jp":!0,"yame.fukuoka.jp":!0,"yanagawa.fukuoka.jp":!0,"yukuhashi.fukuoka.jp":!0,"aizubange.fukushima.jp":!0,"aizumisato.fukushima.jp":!0,"aizuwakamatsu.fukushima.jp":!0,"asakawa.fukushima.jp":!0,"bandai.fukushima.jp":!0,"date.fukushima.jp":!0,"fukushima.fukushima.jp":!0,"furudono.fukushima.jp":!0,"futaba.fukushima.jp":!0,"hanawa.fukushima.jp":!0,"higashi.fukushima.jp":!0,"hirata.fukushima.jp":!0,"hirono.fukushima.jp":!0,"iitate.fukushima.jp":!0,"inawashiro.fukushima.jp":!0,"ishikawa.fukushima.jp":!0,"iwaki.fukushima.jp":!0,"izumizaki.fukushima.jp":!0,"kagamiishi.fukushima.jp":!0,"kaneyama.fukushima.jp":!0,"kawamata.fukushima.jp":!0,"kitakata.fukushima.jp":!0,"kitashiobara.fukushima.jp":!0,"koori.fukushima.jp":!0,"koriyama.fukushima.jp":!0,"kunimi.fukushima.jp":!0,"miharu.fukushima.jp":!0,"mishima.fukushima.jp":!0,"namie.fukushima.jp":!0,"nango.fukushima.jp":!0,"nishiaizu.fukushima.jp":!0,"nishigo.fukushima.jp":!0,"okuma.fukushima.jp":!0,"omotego.fukushima.jp":!0,"ono.fukushima.jp":!0,"otama.fukushima.jp":!0,"samegawa.fukushima.jp":!0,"shimogo.fukushima.jp":!0,"shirakawa.fukushima.jp":!0,"showa.fukushima.jp":!0,"soma.fukushima.jp":!0,"sukagawa.fukushima.jp":!0,"taishin.fukushima.jp":!0,"tamakawa.fukushima.jp":!0,"tanagura.fukushima.jp":!0,"tenei.fukushima.jp":!0,"yabuki.fukushima.jp":!0,"yamato.fukushima.jp":!0,"yamatsuri.fukushima.jp":!0,"yanaizu.fukushima.jp":!0,"yugawa.fukushima.jp":!0,"anpachi.gifu.jp":!0,"ena.gifu.jp":!0,"gifu.gifu.jp":!0,"ginan.gifu.jp":!0,"godo.gifu.jp":!0,"gujo.gifu.jp":!0,"hashima.gifu.jp":!0,"hichiso.gifu.jp":!0,"hida.gifu.jp":!0,"higashishirakawa.gifu.jp":!0,"ibigawa.gifu.jp":!0,"ikeda.gifu.jp":!0,"kakamigahara.gifu.jp":!0,"kani.gifu.jp":!0,"kasahara.gifu.jp":!0,"kasamatsu.gifu.jp":!0,"kawaue.gifu.jp":!0,"kitagata.gifu.jp":!0,"mino.gifu.jp":!0,"minokamo.gifu.jp":!0,"mitake.gifu.jp":!0,"mizunami.gifu.jp":!0,"motosu.gifu.jp":!0,"nakatsugawa.gifu.jp":!0,"ogaki.gifu.jp":!0,"sakahogi.gifu.jp":!0,"seki.gifu.jp":!0,"sekigahara.gifu.jp":!0,"shirakawa.gifu.jp":!0,"tajimi.gifu.jp":!0,"takayama.gifu.jp":!0,"tarui.gifu.jp":!0,"toki.gifu.jp":!0,"tomika.gifu.jp":!0,"wanouchi.gifu.jp":!0,"yamagata.gifu.jp":!0,"yaotsu.gifu.jp":!0,"yoro.gifu.jp":!0,"annaka.gunma.jp":!0,"chiyoda.gunma.jp":!0,"fujioka.gunma.jp":!0,"higashiagatsuma.gunma.jp":!0,"isesaki.gunma.jp":!0,"itakura.gunma.jp":!0,"kanna.gunma.jp":!0,"kanra.gunma.jp":!0,"katashina.gunma.jp":!0,"kawaba.gunma.jp":!0,"kiryu.gunma.jp":!0,"kusatsu.gunma.jp":!0,"maebashi.gunma.jp":!0,"meiwa.gunma.jp":!0,"midori.gunma.jp":!0,"minakami.gunma.jp":!0,"naganohara.gunma.jp":!0,"nakanojo.gunma.jp":!0,"nanmoku.gunma.jp":!0,"numata.gunma.jp":!0,"oizumi.gunma.jp":!0,"ora.gunma.jp":!0,"ota.gunma.jp":!0,"shibukawa.gunma.jp":!0,"shimonita.gunma.jp":!0,"shinto.gunma.jp":!0,"showa.gunma.jp":!0,"takasaki.gunma.jp":!0,"takayama.gunma.jp":!0,"tamamura.gunma.jp":!0,"tatebayashi.gunma.jp":!0,"tomioka.gunma.jp":!0,"tsukiyono.gunma.jp":!0,"tsumagoi.gunma.jp":!0,"ueno.gunma.jp":!0,"yoshioka.gunma.jp":!0,"asaminami.hiroshima.jp":!0,"daiwa.hiroshima.jp":!0,"etajima.hiroshima.jp":!0,"fuchu.hiroshima.jp":!0,"fukuyama.hiroshima.jp":!0,"hatsukaichi.hiroshima.jp":!0,"higashihiroshima.hiroshima.jp":!0,"hongo.hiroshima.jp":!0,"jinsekikogen.hiroshima.jp":!0,"kaita.hiroshima.jp":!0,"kui.hiroshima.jp":!0,"kumano.hiroshima.jp":!0,"kure.hiroshima.jp":!0,"mihara.hiroshima.jp":!0,"miyoshi.hiroshima.jp":!0,"naka.hiroshima.jp":!0,"onomichi.hiroshima.jp":!0,"osakikamijima.hiroshima.jp":!0,"otake.hiroshima.jp":!0,"saka.hiroshima.jp":!0,"sera.hiroshima.jp":!0,"seranishi.hiroshima.jp":!0,"shinichi.hiroshima.jp":!0,"shobara.hiroshima.jp":!0,"takehara.hiroshima.jp":!0,"abashiri.hokkaido.jp":!0,"abira.hokkaido.jp":!0,"aibetsu.hokkaido.jp":!0,"akabira.hokkaido.jp":!0,"akkeshi.hokkaido.jp":!0,"asahikawa.hokkaido.jp":!0,"ashibetsu.hokkaido.jp":!0,"ashoro.hokkaido.jp":!0,"assabu.hokkaido.jp":!0,"atsuma.hokkaido.jp":!0,"bibai.hokkaido.jp":!0,"biei.hokkaido.jp":!0,"bifuka.hokkaido.jp":!0,"bihoro.hokkaido.jp":!0,"biratori.hokkaido.jp":!0,"chippubetsu.hokkaido.jp":!0,"chitose.hokkaido.jp":!0,"date.hokkaido.jp":!0,"ebetsu.hokkaido.jp":!0,"embetsu.hokkaido.jp":!0,"eniwa.hokkaido.jp":!0,"erimo.hokkaido.jp":!0,"esan.hokkaido.jp":!0,"esashi.hokkaido.jp":!0,"fukagawa.hokkaido.jp":!0,"fukushima.hokkaido.jp":!0,"furano.hokkaido.jp":!0,"furubira.hokkaido.jp":!0,"haboro.hokkaido.jp":!0,"hakodate.hokkaido.jp":!0,"hamatonbetsu.hokkaido.jp":!0,"hidaka.hokkaido.jp":!0,"higashikagura.hokkaido.jp":!0,"higashikawa.hokkaido.jp":!0,"hiroo.hokkaido.jp":!0,"hokuryu.hokkaido.jp":!0,"hokuto.hokkaido.jp":!0,"honbetsu.hokkaido.jp":!0,"horokanai.hokkaido.jp":!0,"horonobe.hokkaido.jp":!0,"ikeda.hokkaido.jp":!0,"imakane.hokkaido.jp":!0,"ishikari.hokkaido.jp":!0,"iwamizawa.hokkaido.jp":!0,"iwanai.hokkaido.jp":!0,"kamifurano.hokkaido.jp":!0,"kamikawa.hokkaido.jp":!0,"kamishihoro.hokkaido.jp":!0,"kamisunagawa.hokkaido.jp":!0,"kamoenai.hokkaido.jp":!0,"kayabe.hokkaido.jp":!0,"kembuchi.hokkaido.jp":!0,"kikonai.hokkaido.jp":!0,"kimobetsu.hokkaido.jp":!0,"kitahiroshima.hokkaido.jp":!0,"kitami.hokkaido.jp":!0,"kiyosato.hokkaido.jp":!0,"koshimizu.hokkaido.jp":!0,"kunneppu.hokkaido.jp":!0,"kuriyama.hokkaido.jp":!0,"kuromatsunai.hokkaido.jp":!0,"kushiro.hokkaido.jp":!0,"kutchan.hokkaido.jp":!0,"kyowa.hokkaido.jp":!0,"mashike.hokkaido.jp":!0,"matsumae.hokkaido.jp":!0,"mikasa.hokkaido.jp":!0,"minamifurano.hokkaido.jp":!0,"mombetsu.hokkaido.jp":!0,"moseushi.hokkaido.jp":!0,"mukawa.hokkaido.jp":!0,"muroran.hokkaido.jp":!0,"naie.hokkaido.jp":!0,"nakagawa.hokkaido.jp":!0,"nakasatsunai.hokkaido.jp":!0,"nakatombetsu.hokkaido.jp":!0,"nanae.hokkaido.jp":!0,"nanporo.hokkaido.jp":!0,"nayoro.hokkaido.jp":!0,"nemuro.hokkaido.jp":!0,"niikappu.hokkaido.jp":!0,"niki.hokkaido.jp":!0,"nishiokoppe.hokkaido.jp":!0,"noboribetsu.hokkaido.jp":!0,"numata.hokkaido.jp":!0,"obihiro.hokkaido.jp":!0,"obira.hokkaido.jp":!0,"oketo.hokkaido.jp":!0,"okoppe.hokkaido.jp":!0,"otaru.hokkaido.jp":!0,"otobe.hokkaido.jp":!0,"otofuke.hokkaido.jp":!0,"otoineppu.hokkaido.jp":!0,"oumu.hokkaido.jp":!0,"ozora.hokkaido.jp":!0,"pippu.hokkaido.jp":!0,"rankoshi.hokkaido.jp":!0,"rebun.hokkaido.jp":!0,"rikubetsu.hokkaido.jp":!0,"rishiri.hokkaido.jp":!0,"rishirifuji.hokkaido.jp":!0,"saroma.hokkaido.jp":!0,"sarufutsu.hokkaido.jp":!0,"shakotan.hokkaido.jp":!0,"shari.hokkaido.jp":!0,"shibecha.hokkaido.jp":!0,"shibetsu.hokkaido.jp":!0,"shikabe.hokkaido.jp":!0,"shikaoi.hokkaido.jp":!0,"shimamaki.hokkaido.jp":!0,"shimizu.hokkaido.jp":!0,"shimokawa.hokkaido.jp":!0,"shinshinotsu.hokkaido.jp":!0,"shintoku.hokkaido.jp":!0,"shiranuka.hokkaido.jp":!0,"shiraoi.hokkaido.jp":!0,"shiriuchi.hokkaido.jp":!0,"sobetsu.hokkaido.jp":!0,"sunagawa.hokkaido.jp":!0,"taiki.hokkaido.jp":!0,"takasu.hokkaido.jp":!0,"takikawa.hokkaido.jp":!0,
    "takinoue.hokkaido.jp":!0,"teshikaga.hokkaido.jp":!0,"tobetsu.hokkaido.jp":!0,"tohma.hokkaido.jp":!0,"tomakomai.hokkaido.jp":!0,"tomari.hokkaido.jp":!0,"toya.hokkaido.jp":!0,"toyako.hokkaido.jp":!0,"toyotomi.hokkaido.jp":!0,"toyoura.hokkaido.jp":!0,"tsubetsu.hokkaido.jp":!0,"tsukigata.hokkaido.jp":!0,"urakawa.hokkaido.jp":!0,"urausu.hokkaido.jp":!0,"uryu.hokkaido.jp":!0,"utashinai.hokkaido.jp":!0,"wakkanai.hokkaido.jp":!0,"wassamu.hokkaido.jp":!0,"yakumo.hokkaido.jp":!0,"yoichi.hokkaido.jp":!0,"aioi.hyogo.jp":!0,"akashi.hyogo.jp":!0,"ako.hyogo.jp":!0,"amagasaki.hyogo.jp":!0,"aogaki.hyogo.jp":!0,"asago.hyogo.jp":!0,"ashiya.hyogo.jp":!0,"awaji.hyogo.jp":!0,"fukusaki.hyogo.jp":!0,"goshiki.hyogo.jp":!0,"harima.hyogo.jp":!0,"himeji.hyogo.jp":!0,"ichikawa.hyogo.jp":!0,"inagawa.hyogo.jp":!0,"itami.hyogo.jp":!0,"kakogawa.hyogo.jp":!0,"kamigori.hyogo.jp":!0,"kamikawa.hyogo.jp":!0,"kasai.hyogo.jp":!0,"kasuga.hyogo.jp":!0,"kawanishi.hyogo.jp":!0,"miki.hyogo.jp":!0,"minamiawaji.hyogo.jp":!0,"nishinomiya.hyogo.jp":!0,"nishiwaki.hyogo.jp":!0,"ono.hyogo.jp":!0,"sanda.hyogo.jp":!0,"sannan.hyogo.jp":!0,"sasayama.hyogo.jp":!0,"sayo.hyogo.jp":!0,"shingu.hyogo.jp":!0,"shinonsen.hyogo.jp":!0,"shiso.hyogo.jp":!0,"sumoto.hyogo.jp":!0,"taishi.hyogo.jp":!0,"taka.hyogo.jp":!0,"takarazuka.hyogo.jp":!0,"takasago.hyogo.jp":!0,"takino.hyogo.jp":!0,"tamba.hyogo.jp":!0,"tatsuno.hyogo.jp":!0,"toyooka.hyogo.jp":!0,"yabu.hyogo.jp":!0,"yashiro.hyogo.jp":!0,"yoka.hyogo.jp":!0,"yokawa.hyogo.jp":!0,"ami.ibaraki.jp":!0,"asahi.ibaraki.jp":!0,"bando.ibaraki.jp":!0,"chikusei.ibaraki.jp":!0,"daigo.ibaraki.jp":!0,"fujishiro.ibaraki.jp":!0,"hitachi.ibaraki.jp":!0,"hitachinaka.ibaraki.jp":!0,"hitachiomiya.ibaraki.jp":!0,"hitachiota.ibaraki.jp":!0,"ibaraki.ibaraki.jp":!0,"ina.ibaraki.jp":!0,"inashiki.ibaraki.jp":!0,"itako.ibaraki.jp":!0,"iwama.ibaraki.jp":!0,"joso.ibaraki.jp":!0,"kamisu.ibaraki.jp":!0,"kasama.ibaraki.jp":!0,"kashima.ibaraki.jp":!0,"kasumigaura.ibaraki.jp":!0,"koga.ibaraki.jp":!0,"miho.ibaraki.jp":!0,"mito.ibaraki.jp":!0,"moriya.ibaraki.jp":!0,"naka.ibaraki.jp":!0,"namegata.ibaraki.jp":!0,"oarai.ibaraki.jp":!0,"ogawa.ibaraki.jp":!0,"omitama.ibaraki.jp":!0,"ryugasaki.ibaraki.jp":!0,"sakai.ibaraki.jp":!0,"sakuragawa.ibaraki.jp":!0,"shimodate.ibaraki.jp":!0,"shimotsuma.ibaraki.jp":!0,"shirosato.ibaraki.jp":!0,"sowa.ibaraki.jp":!0,"suifu.ibaraki.jp":!0,"takahagi.ibaraki.jp":!0,"tamatsukuri.ibaraki.jp":!0,"tokai.ibaraki.jp":!0,"tomobe.ibaraki.jp":!0,"tone.ibaraki.jp":!0,"toride.ibaraki.jp":!0,"tsuchiura.ibaraki.jp":!0,"tsukuba.ibaraki.jp":!0,"uchihara.ibaraki.jp":!0,"ushiku.ibaraki.jp":!0,"yachiyo.ibaraki.jp":!0,"yamagata.ibaraki.jp":!0,"yawara.ibaraki.jp":!0,"yuki.ibaraki.jp":!0,"anamizu.ishikawa.jp":!0,"hakui.ishikawa.jp":!0,"hakusan.ishikawa.jp":!0,"kaga.ishikawa.jp":!0,"kahoku.ishikawa.jp":!0,"kanazawa.ishikawa.jp":!0,"kawakita.ishikawa.jp":!0,"komatsu.ishikawa.jp":!0,"nakanoto.ishikawa.jp":!0,"nanao.ishikawa.jp":!0,"nomi.ishikawa.jp":!0,"nonoichi.ishikawa.jp":!0,"noto.ishikawa.jp":!0,"shika.ishikawa.jp":!0,"suzu.ishikawa.jp":!0,"tsubata.ishikawa.jp":!0,"tsurugi.ishikawa.jp":!0,"uchinada.ishikawa.jp":!0,"wajima.ishikawa.jp":!0,"fudai.iwate.jp":!0,"fujisawa.iwate.jp":!0,"hanamaki.iwate.jp":!0,"hiraizumi.iwate.jp":!0,"hirono.iwate.jp":!0,"ichinohe.iwate.jp":!0,"ichinoseki.iwate.jp":!0,"iwaizumi.iwate.jp":!0,"iwate.iwate.jp":!0,"joboji.iwate.jp":!0,"kamaishi.iwate.jp":!0,"kanegasaki.iwate.jp":!0,"karumai.iwate.jp":!0,"kawai.iwate.jp":!0,"kitakami.iwate.jp":!0,"kuji.iwate.jp":!0,"kunohe.iwate.jp":!0,"kuzumaki.iwate.jp":!0,"miyako.iwate.jp":!0,"mizusawa.iwate.jp":!0,"morioka.iwate.jp":!0,"ninohe.iwate.jp":!0,"noda.iwate.jp":!0,"ofunato.iwate.jp":!0,"oshu.iwate.jp":!0,"otsuchi.iwate.jp":!0,"rikuzentakata.iwate.jp":!0,"shiwa.iwate.jp":!0,"shizukuishi.iwate.jp":!0,"sumita.iwate.jp":!0,"tanohata.iwate.jp":!0,"tono.iwate.jp":!0,"yahaba.iwate.jp":!0,"yamada.iwate.jp":!0,"ayagawa.kagawa.jp":!0,"higashikagawa.kagawa.jp":!0,"kanonji.kagawa.jp":!0,"kotohira.kagawa.jp":!0,"manno.kagawa.jp":!0,"marugame.kagawa.jp":!0,"mitoyo.kagawa.jp":!0,"naoshima.kagawa.jp":!0,"sanuki.kagawa.jp":!0,"tadotsu.kagawa.jp":!0,"takamatsu.kagawa.jp":!0,"tonosho.kagawa.jp":!0,"uchinomi.kagawa.jp":!0,"utazu.kagawa.jp":!0,"zentsuji.kagawa.jp":!0,"akune.kagoshima.jp":!0,"amami.kagoshima.jp":!0,"hioki.kagoshima.jp":!0,"isa.kagoshima.jp":!0,"isen.kagoshima.jp":!0,"izumi.kagoshima.jp":!0,"kagoshima.kagoshima.jp":!0,"kanoya.kagoshima.jp":!0,"kawanabe.kagoshima.jp":!0,"kinko.kagoshima.jp":!0,"kouyama.kagoshima.jp":!0,"makurazaki.kagoshima.jp":!0,"matsumoto.kagoshima.jp":!0,"minamitane.kagoshima.jp":!0,"nakatane.kagoshima.jp":!0,"nishinoomote.kagoshima.jp":!0,"satsumasendai.kagoshima.jp":!0,"soo.kagoshima.jp":!0,"tarumizu.kagoshima.jp":!0,"yusui.kagoshima.jp":!0,"aikawa.kanagawa.jp":!0,"atsugi.kanagawa.jp":!0,"ayase.kanagawa.jp":!0,"chigasaki.kanagawa.jp":!0,"ebina.kanagawa.jp":!0,"fujisawa.kanagawa.jp":!0,"hadano.kanagawa.jp":!0,"hakone.kanagawa.jp":!0,"hiratsuka.kanagawa.jp":!0,"isehara.kanagawa.jp":!0,"kaisei.kanagawa.jp":!0,"kamakura.kanagawa.jp":!0,"kiyokawa.kanagawa.jp":!0,"matsuda.kanagawa.jp":!0,"minamiashigara.kanagawa.jp":!0,"miura.kanagawa.jp":!0,"nakai.kanagawa.jp":!0,"ninomiya.kanagawa.jp":!0,"odawara.kanagawa.jp":!0,"oi.kanagawa.jp":!0,"oiso.kanagawa.jp":!0,"sagamihara.kanagawa.jp":!0,"samukawa.kanagawa.jp":!0,"tsukui.kanagawa.jp":!0,"yamakita.kanagawa.jp":!0,"yamato.kanagawa.jp":!0,"yokosuka.kanagawa.jp":!0,"yugawara.kanagawa.jp":!0,"zama.kanagawa.jp":!0,"zushi.kanagawa.jp":!0,"aki.kochi.jp":!0,"geisei.kochi.jp":!0,"hidaka.kochi.jp":!0,"higashitsuno.kochi.jp":!0,"ino.kochi.jp":!0,"kagami.kochi.jp":!0,"kami.kochi.jp":!0,"kitagawa.kochi.jp":!0,"kochi.kochi.jp":!0,"mihara.kochi.jp":!0,"motoyama.kochi.jp":!0,"muroto.kochi.jp":!0,"nahari.kochi.jp":!0,"nakamura.kochi.jp":!0,"nankoku.kochi.jp":!0,"nishitosa.kochi.jp":!0,"niyodogawa.kochi.jp":!0,"ochi.kochi.jp":!0,"okawa.kochi.jp":!0,"otoyo.kochi.jp":!0,"otsuki.kochi.jp":!0,"sakawa.kochi.jp":!0,"sukumo.kochi.jp":!0,"susaki.kochi.jp":!0,"tosa.kochi.jp":!0,"tosashimizu.kochi.jp":!0,"toyo.kochi.jp":!0,"tsuno.kochi.jp":!0,"umaji.kochi.jp":!0,"yasuda.kochi.jp":!0,"yusuhara.kochi.jp":!0,"amakusa.kumamoto.jp":!0,"arao.kumamoto.jp":!0,"aso.kumamoto.jp":!0,"choyo.kumamoto.jp":!0,"gyokuto.kumamoto.jp":!0,"hitoyoshi.kumamoto.jp":!0,"kamiamakusa.kumamoto.jp":!0,"kashima.kumamoto.jp":!0,"kikuchi.kumamoto.jp":!0,"kosa.kumamoto.jp":!0,"kumamoto.kumamoto.jp":!0,"mashiki.kumamoto.jp":!0,"mifune.kumamoto.jp":!0,"minamata.kumamoto.jp":!0,"minamioguni.kumamoto.jp":!0,"nagasu.kumamoto.jp":!0,"nishihara.kumamoto.jp":!0,"oguni.kumamoto.jp":!0,"ozu.kumamoto.jp":!0,"sumoto.kumamoto.jp":!0,"takamori.kumamoto.jp":!0,"uki.kumamoto.jp":!0,"uto.kumamoto.jp":!0,"yamaga.kumamoto.jp":!0,"yamato.kumamoto.jp":!0,"yatsushiro.kumamoto.jp":!0,"ayabe.kyoto.jp":!0,"fukuchiyama.kyoto.jp":!0,"higashiyama.kyoto.jp":!0,"ide.kyoto.jp":!0,"ine.kyoto.jp":!0,"joyo.kyoto.jp":!0,"kameoka.kyoto.jp":!0,"kamo.kyoto.jp":!0,"kita.kyoto.jp":!0,"kizu.kyoto.jp":!0,"kumiyama.kyoto.jp":!0,"kyotamba.kyoto.jp":!0,"kyotanabe.kyoto.jp":!0,"kyotango.kyoto.jp":!0,"maizuru.kyoto.jp":!0,"minami.kyoto.jp":!0,"minamiyamashiro.kyoto.jp":!0,"miyazu.kyoto.jp":!0,"muko.kyoto.jp":!0,"nagaokakyo.kyoto.jp":!0,"nakagyo.kyoto.jp":!0,"nantan.kyoto.jp":!0,"oyamazaki.kyoto.jp":!0,"sakyo.kyoto.jp":!0,"seika.kyoto.jp":!0,"tanabe.kyoto.jp":!0,"uji.kyoto.jp":!0,"ujitawara.kyoto.jp":!0,"wazuka.kyoto.jp":!0,"yamashina.kyoto.jp":!0,"yawata.kyoto.jp":!0,"asahi.mie.jp":!0,"inabe.mie.jp":!0,"ise.mie.jp":!0,"kameyama.mie.jp":!0,"kawagoe.mie.jp":!0,"kiho.mie.jp":!0,"kisosaki.mie.jp":!0,"kiwa.mie.jp":!0,"komono.mie.jp":!0,"kumano.mie.jp":!0,"kuwana.mie.jp":!0,"matsusaka.mie.jp":!0,"meiwa.mie.jp":!0,"mihama.mie.jp":!0,"minamiise.mie.jp":!0,"misugi.mie.jp":!0,"miyama.mie.jp":!0,"nabari.mie.jp":!0,"shima.mie.jp":!0,"suzuka.mie.jp":!0,"tado.mie.jp":!0,"taiki.mie.jp":!0,"taki.mie.jp":!0,"tamaki.mie.jp":!0,"toba.mie.jp":!0,"tsu.mie.jp":!0,"udono.mie.jp":!0,"ureshino.mie.jp":!0,"watarai.mie.jp":!0,"yokkaichi.mie.jp":!0,"furukawa.miyagi.jp":!0,"higashimatsushima.miyagi.jp":!0,"ishinomaki.miyagi.jp":!0,"iwanuma.miyagi.jp":!0,"kakuda.miyagi.jp":!0,"kami.miyagi.jp":!0,"kawasaki.miyagi.jp":!0,"kesennuma.miyagi.jp":!0,"marumori.miyagi.jp":!0,"matsushima.miyagi.jp":!0,"minamisanriku.miyagi.jp":!0,"misato.miyagi.jp":!0,"murata.miyagi.jp":!0,"natori.miyagi.jp":!0,"ogawara.miyagi.jp":!0,"ohira.miyagi.jp":!0,"onagawa.miyagi.jp":!0,"osaki.miyagi.jp":!0,"rifu.miyagi.jp":!0,"semine.miyagi.jp":!0,"shibata.miyagi.jp":!0,"shichikashuku.miyagi.jp":!0,"shikama.miyagi.jp":!0,"shiogama.miyagi.jp":!0,"shiroishi.miyagi.jp":!0,"tagajo.miyagi.jp":!0,"taiwa.miyagi.jp":!0,"tome.miyagi.jp":!0,"tomiya.miyagi.jp":!0,"wakuya.miyagi.jp":!0,"watari.miyagi.jp":!0,"yamamoto.miyagi.jp":!0,"zao.miyagi.jp":!0,"aya.miyazaki.jp":!0,"ebino.miyazaki.jp":!0,"gokase.miyazaki.jp":!0,"hyuga.miyazaki.jp":!0,"kadogawa.miyazaki.jp":!0,"kawaminami.miyazaki.jp":!0,"kijo.miyazaki.jp":!0,"kitagawa.miyazaki.jp":!0,"kitakata.miyazaki.jp":!0,"kitaura.miyazaki.jp":!0,"kobayashi.miyazaki.jp":!0,"kunitomi.miyazaki.jp":!0,"kushima.miyazaki.jp":!0,"mimata.miyazaki.jp":!0,"miyakonojo.miyazaki.jp":!0,"miyazaki.miyazaki.jp":!0,"morotsuka.miyazaki.jp":!0,"nichinan.miyazaki.jp":!0,"nishimera.miyazaki.jp":!0,"nobeoka.miyazaki.jp":!0,"saito.miyazaki.jp":!0,"shiiba.miyazaki.jp":!0,"shintomi.miyazaki.jp":!0,"takaharu.miyazaki.jp":!0,"takanabe.miyazaki.jp":!0,"takazaki.miyazaki.jp":!0,"tsuno.miyazaki.jp":!0,"achi.nagano.jp":!0,"agematsu.nagano.jp":!0,"anan.nagano.jp":!0,"aoki.nagano.jp":!0,"asahi.nagano.jp":!0,"azumino.nagano.jp":!0,"chikuhoku.nagano.jp":!0,"chikuma.nagano.jp":!0,"chino.nagano.jp":!0,"fujimi.nagano.jp":!0,"hakuba.nagano.jp":!0,"hara.nagano.jp":!0,"hiraya.nagano.jp":!0,"iida.nagano.jp":!0,"iijima.nagano.jp":!0,"iiyama.nagano.jp":!0,"iizuna.nagano.jp":!0,"ikeda.nagano.jp":!0,"ikusaka.nagano.jp":!0,"ina.nagano.jp":!0,"karuizawa.nagano.jp":!0,"kawakami.nagano.jp":!0,"kiso.nagano.jp":!0,"kisofukushima.nagano.jp":!0,"kitaaiki.nagano.jp":!0,"komagane.nagano.jp":!0,"komoro.nagano.jp":!0,"matsukawa.nagano.jp":!0,"matsumoto.nagano.jp":!0,"miasa.nagano.jp":!0,"minamiaiki.nagano.jp":!0,"minamimaki.nagano.jp":!0,"minamiminowa.nagano.jp":!0,"minowa.nagano.jp":!0,"miyada.nagano.jp":!0,"miyota.nagano.jp":!0,"mochizuki.nagano.jp":!0,"nagano.nagano.jp":!0,"nagawa.nagano.jp":!0,"nagiso.nagano.jp":!0,"nakagawa.nagano.jp":!0,"nakano.nagano.jp":!0,"nozawaonsen.nagano.jp":!0,"obuse.nagano.jp":!0,"ogawa.nagano.jp":!0,"okaya.nagano.jp":!0,"omachi.nagano.jp":!0,"omi.nagano.jp":!0,"ookuwa.nagano.jp":!0,"ooshika.nagano.jp":!0,"otaki.nagano.jp":!0,"otari.nagano.jp":!0,"sakae.nagano.jp":!0,"sakaki.nagano.jp":!0,"saku.nagano.jp":!0,"sakuho.nagano.jp":!0,"shimosuwa.nagano.jp":!0,"shinanomachi.nagano.jp":!0,"shiojiri.nagano.jp":!0,"suwa.nagano.jp":!0,"suzaka.nagano.jp":!0,"takagi.nagano.jp":!0,"takamori.nagano.jp":!0,"takayama.nagano.jp":!0,"tateshina.nagano.jp":!0,"tatsuno.nagano.jp":!0,"togakushi.nagano.jp":!0,"togura.nagano.jp":!0,"tomi.nagano.jp":!0,"ueda.nagano.jp":!0,"wada.nagano.jp":!0,"yamagata.nagano.jp":!0,"yamanouchi.nagano.jp":!0,"yasaka.nagano.jp":!0,"yasuoka.nagano.jp":!0,"chijiwa.nagasaki.jp":!0,"futsu.nagasaki.jp":!0,"goto.nagasaki.jp":!0,"hasami.nagasaki.jp":!0,"hirado.nagasaki.jp":!0,"iki.nagasaki.jp":!0,"isahaya.nagasaki.jp":!0,"kawatana.nagasaki.jp":!0,"kuchinotsu.nagasaki.jp":!0,"matsuura.nagasaki.jp":!0,"nagasaki.nagasaki.jp":!0,"obama.nagasaki.jp":!0,"omura.nagasaki.jp":!0,"oseto.nagasaki.jp":!0,"saikai.nagasaki.jp":!0,"sasebo.nagasaki.jp":!0,"seihi.nagasaki.jp":!0,"shimabara.nagasaki.jp":!0,"shinkamigoto.nagasaki.jp":!0,"togitsu.nagasaki.jp":!0,"tsushima.nagasaki.jp":!0,"unzen.nagasaki.jp":!0,"ando.nara.jp":!0,"gose.nara.jp":!0,"heguri.nara.jp":!0,"higashiyoshino.nara.jp":!0,"ikaruga.nara.jp":!0,"ikoma.nara.jp":!0,"kamikitayama.nara.jp":!0,"kanmaki.nara.jp":!0,"kashiba.nara.jp":!0,"kashihara.nara.jp":!0,"katsuragi.nara.jp":!0,"kawai.nara.jp":!0,"kawakami.nara.jp":!0,"kawanishi.nara.jp":!0,"koryo.nara.jp":!0,"kurotaki.nara.jp":!0,"mitsue.nara.jp":!0,"miyake.nara.jp":!0,"nara.nara.jp":!0,"nosegawa.nara.jp":!0,"oji.nara.jp":!0,"ouda.nara.jp":!0,"oyodo.nara.jp":!0,"sakurai.nara.jp":!0,"sango.nara.jp":!0,"shimoichi.nara.jp":!0,"shimokitayama.nara.jp":!0,"shinjo.nara.jp":!0,"soni.nara.jp":!0,"takatori.nara.jp":!0,"tawaramoto.nara.jp":!0,"tenkawa.nara.jp":!0,"tenri.nara.jp":!0,"uda.nara.jp":!0,"yamatokoriyama.nara.jp":!0,"yamatotakada.nara.jp":!0,"yamazoe.nara.jp":!0,"yoshino.nara.jp":!0,"aga.niigata.jp":!0,"agano.niigata.jp":!0,"gosen.niigata.jp":!0,"itoigawa.niigata.jp":!0,"izumozaki.niigata.jp":!0,"joetsu.niigata.jp":!0,"kamo.niigata.jp":!0,"kariwa.niigata.jp":!0,"kashiwazaki.niigata.jp":!0,"minamiuonuma.niigata.jp":!0,"mitsuke.niigata.jp":!0,"muika.niigata.jp":!0,"murakami.niigata.jp":!0,"myoko.niigata.jp":!0,"nagaoka.niigata.jp":!0,"niigata.niigata.jp":!0,"ojiya.niigata.jp":!0,"omi.niigata.jp":!0,"sado.niigata.jp":!0,"sanjo.niigata.jp":!0,"seiro.niigata.jp":!0,"seirou.niigata.jp":!0,"sekikawa.niigata.jp":!0,"shibata.niigata.jp":!0,"tagami.niigata.jp":!0,"tainai.niigata.jp":!0,"tochio.niigata.jp":!0,"tokamachi.niigata.jp":!0,"tsubame.niigata.jp":!0,"tsunan.niigata.jp":!0,"uonuma.niigata.jp":!0,"yahiko.niigata.jp":!0,"yoita.niigata.jp":!0,"yuzawa.niigata.jp":!0,"beppu.oita.jp":!0,"bungoono.oita.jp":!0,"bungotakada.oita.jp":!0,"hasama.oita.jp":!0,"hiji.oita.jp":!0,"himeshima.oita.jp":!0,"hita.oita.jp":!0,"kamitsue.oita.jp":!0,"kokonoe.oita.jp":!0,"kuju.oita.jp":!0,"kunisaki.oita.jp":!0,"kusu.oita.jp":!0,"oita.oita.jp":!0,"saiki.oita.jp":!0,"taketa.oita.jp":!0,"tsukumi.oita.jp":!0,"usa.oita.jp":!0,"usuki.oita.jp":!0,"yufu.oita.jp":!0,"akaiwa.okayama.jp":!0,"asakuchi.okayama.jp":!0,"bizen.okayama.jp":!0,"hayashima.okayama.jp":!0,"ibara.okayama.jp":!0,"kagamino.okayama.jp":!0,"kasaoka.okayama.jp":!0,"kibichuo.okayama.jp":!0,"kumenan.okayama.jp":!0,"kurashiki.okayama.jp":!0,"maniwa.okayama.jp":!0,"misaki.okayama.jp":!0,"nagi.okayama.jp":!0,"niimi.okayama.jp":!0,"nishiawakura.okayama.jp":!0,"okayama.okayama.jp":!0,"satosho.okayama.jp":!0,"setouchi.okayama.jp":!0,"shinjo.okayama.jp":!0,"shoo.okayama.jp":!0,"soja.okayama.jp":!0,"takahashi.okayama.jp":!0,"tamano.okayama.jp":!0,"tsuyama.okayama.jp":!0,"wake.okayama.jp":!0,"yakage.okayama.jp":!0,"aguni.okinawa.jp":!0,"ginowan.okinawa.jp":!0,"ginoza.okinawa.jp":!0,"gushikami.okinawa.jp":!0,"haebaru.okinawa.jp":!0,"higashi.okinawa.jp":!0,"hirara.okinawa.jp":!0,"iheya.okinawa.jp":!0,"ishigaki.okinawa.jp":!0,"ishikawa.okinawa.jp":!0,"itoman.okinawa.jp":!0,"izena.okinawa.jp":!0,"kadena.okinawa.jp":!0,"kin.okinawa.jp":!0,"kitadaito.okinawa.jp":!0,"kitanakagusuku.okinawa.jp":!0,"kumejima.okinawa.jp":!0,"kunigami.okinawa.jp":!0,"minamidaito.okinawa.jp":!0,"motobu.okinawa.jp":!0,"nago.okinawa.jp":!0,"naha.okinawa.jp":!0,"nakagusuku.okinawa.jp":!0,"nakijin.okinawa.jp":!0,"nanjo.okinawa.jp":!0,"nishihara.okinawa.jp":!0,"ogimi.okinawa.jp":!0,"okinawa.okinawa.jp":!0,"onna.okinawa.jp":!0,"shimoji.okinawa.jp":!0,"taketomi.okinawa.jp":!0,"tarama.okinawa.jp":!0,"tokashiki.okinawa.jp":!0,"tomigusuku.okinawa.jp":!0,"tonaki.okinawa.jp":!0,"urasoe.okinawa.jp":!0,"uruma.okinawa.jp":!0,"yaese.okinawa.jp":!0,"yomitan.okinawa.jp":!0,"yonabaru.okinawa.jp":!0,"yonaguni.okinawa.jp":!0,"zamami.okinawa.jp":!0,"abeno.osaka.jp":!0,"chihayaakasaka.osaka.jp":!0,"chuo.osaka.jp":!0,"daito.osaka.jp":!0,"fujiidera.osaka.jp":!0,"habikino.osaka.jp":!0,"hannan.osaka.jp":!0,"higashiosaka.osaka.jp":!0,"higashisumiyoshi.osaka.jp":!0,"higashiyodogawa.osaka.jp":!0,"hirakata.osaka.jp":!0,"ibaraki.osaka.jp":!0,"ikeda.osaka.jp":!0,"izumi.osaka.jp":!0,"izumiotsu.osaka.jp":!0,"izumisano.osaka.jp":!0,"kadoma.osaka.jp":!0,"kaizuka.osaka.jp":!0,"kanan.osaka.jp":!0,"kashiwara.osaka.jp":!0,"katano.osaka.jp":!0,"kawachinagano.osaka.jp":!0,"kishiwada.osaka.jp":!0,"kita.osaka.jp":!0,"kumatori.osaka.jp":!0,"matsubara.osaka.jp":!0,"minato.osaka.jp":!0,"minoh.osaka.jp":!0,"misaki.osaka.jp":!0,"moriguchi.osaka.jp":!0,"neyagawa.osaka.jp":!0,"nishi.osaka.jp":!0,"nose.osaka.jp":!0,"osakasayama.osaka.jp":!0,"sakai.osaka.jp":!0,"sayama.osaka.jp":!0,"sennan.osaka.jp":!0,"settsu.osaka.jp":!0,"shijonawate.osaka.jp":!0,"shimamoto.osaka.jp":!0,"suita.osaka.jp":!0,"tadaoka.osaka.jp":!0,"taishi.osaka.jp":!0,"tajiri.osaka.jp":!0,"takaishi.osaka.jp":!0,"takatsuki.osaka.jp":!0,"tondabayashi.osaka.jp":!0,"toyonaka.osaka.jp":!0,"toyono.osaka.jp":!0,"yao.osaka.jp":!0,"ariake.saga.jp":!0,"arita.saga.jp":!0,"fukudomi.saga.jp":!0,"genkai.saga.jp":!0,"hamatama.saga.jp":!0,"hizen.saga.jp":!0,"imari.saga.jp":!0,"kamimine.saga.jp":!0,"kanzaki.saga.jp":!0,"karatsu.saga.jp":!0,"kashima.saga.jp":!0,"kitagata.saga.jp":!0,"kitahata.saga.jp":!0,"kiyama.saga.jp":!0,"kouhoku.saga.jp":!0,"kyuragi.saga.jp":!0,"nishiarita.saga.jp":!0,"ogi.saga.jp":!0,"omachi.saga.jp":!0,"ouchi.saga.jp":!0,"saga.saga.jp":!0,"shiroishi.saga.jp":!0,"taku.saga.jp":!0,"tara.saga.jp":!0,"tosu.saga.jp":!0,"yoshinogari.saga.jp":!0,"arakawa.saitama.jp":!0,"asaka.saitama.jp":!0,"chichibu.saitama.jp":!0,"fujimi.saitama.jp":!0,"fujimino.saitama.jp":!0,"fukaya.saitama.jp":!0,"hanno.saitama.jp":!0,"hanyu.saitama.jp":!0,"hasuda.saitama.jp":!0,"hatogaya.saitama.jp":!0,"hatoyama.saitama.jp":!0,"hidaka.saitama.jp":!0,"higashichichibu.saitama.jp":!0,"higashimatsuyama.saitama.jp":!0,"honjo.saitama.jp":!0,"ina.saitama.jp":!0,"iruma.saitama.jp":!0,"iwatsuki.saitama.jp":!0,"kamiizumi.saitama.jp":!0,"kamikawa.saitama.jp":!0,"kamisato.saitama.jp":!0,"kasukabe.saitama.jp":!0,"kawagoe.saitama.jp":!0,"kawaguchi.saitama.jp":!0,"kawajima.saitama.jp":!0,"kazo.saitama.jp":!0,"kitamoto.saitama.jp":!0,"koshigaya.saitama.jp":!0,"kounosu.saitama.jp":!0,"kuki.saitama.jp":!0,"kumagaya.saitama.jp":!0,"matsubushi.saitama.jp":!0,"minano.saitama.jp":!0,"misato.saitama.jp":!0,"miyashiro.saitama.jp":!0,"miyoshi.saitama.jp":!0,"moroyama.saitama.jp":!0,"nagatoro.saitama.jp":!0,"namegawa.saitama.jp":!0,"niiza.saitama.jp":!0,"ogano.saitama.jp":!0,"ogawa.saitama.jp":!0,"ogose.saitama.jp":!0,"okegawa.saitama.jp":!0,"omiya.saitama.jp":!0,"otaki.saitama.jp":!0,"ranzan.saitama.jp":!0,"ryokami.saitama.jp":!0,"saitama.saitama.jp":!0,"sakado.saitama.jp":!0,"satte.saitama.jp":!0,"sayama.saitama.jp":!0,"shiki.saitama.jp":!0,"shiraoka.saitama.jp":!0,"soka.saitama.jp":!0,"sugito.saitama.jp":!0,"toda.saitama.jp":!0,"tokigawa.saitama.jp":!0,"tokorozawa.saitama.jp":!0,"tsurugashima.saitama.jp":!0,"urawa.saitama.jp":!0,"warabi.saitama.jp":!0,"yashio.saitama.jp":!0,"yokoze.saitama.jp":!0,"yono.saitama.jp":!0,"yorii.saitama.jp":!0,"yoshida.saitama.jp":!0,"yoshikawa.saitama.jp":!0,"yoshimi.saitama.jp":!0,"aisho.shiga.jp":!0,"gamo.shiga.jp":!0,"higashiomi.shiga.jp":!0,"hikone.shiga.jp":!0,"koka.shiga.jp":!0,"konan.shiga.jp":!0,"kosei.shiga.jp":!0,"koto.shiga.jp":!0,"kusatsu.shiga.jp":!0,"maibara.shiga.jp":!0,"moriyama.shiga.jp":!0,"nagahama.shiga.jp":!0,"nishiazai.shiga.jp":!0,"notogawa.shiga.jp":!0,"omihachiman.shiga.jp":!0,"otsu.shiga.jp":!0,"ritto.shiga.jp":!0,"ryuoh.shiga.jp":!0,"takashima.shiga.jp":!0,"takatsuki.shiga.jp":!0,"torahime.shiga.jp":!0,"toyosato.shiga.jp":!0,"yasu.shiga.jp":!0,"akagi.shimane.jp":!0,"ama.shimane.jp":!0,"gotsu.shimane.jp":!0,"hamada.shimane.jp":!0,"higashiizumo.shimane.jp":!0,"hikawa.shimane.jp":!0,"hikimi.shimane.jp":!0,"izumo.shimane.jp":!0,"kakinoki.shimane.jp":!0,"masuda.shimane.jp":!0,"matsue.shimane.jp":!0,"misato.shimane.jp":!0,"nishinoshima.shimane.jp":!0,"ohda.shimane.jp":!0,"okinoshima.shimane.jp":!0,"okuizumo.shimane.jp":!0,"shimane.shimane.jp":!0,"tamayu.shimane.jp":!0,"tsuwano.shimane.jp":!0,"unnan.shimane.jp":!0,"yakumo.shimane.jp":!0,"yasugi.shimane.jp":!0,"yatsuka.shimane.jp":!0,"arai.shizuoka.jp":!0,"atami.shizuoka.jp":!0,"fuji.shizuoka.jp":!0,"fujieda.shizuoka.jp":!0,"fujikawa.shizuoka.jp":!0,"fujinomiya.shizuoka.jp":!0,"fukuroi.shizuoka.jp":!0,"gotemba.shizuoka.jp":!0,"haibara.shizuoka.jp":!0,"hamamatsu.shizuoka.jp":!0,"higashiizu.shizuoka.jp":!0,"ito.shizuoka.jp":!0,"iwata.shizuoka.jp":!0,"izu.shizuoka.jp":!0,"izunokuni.shizuoka.jp":!0,"kakegawa.shizuoka.jp":!0,"kannami.shizuoka.jp":!0,"kawanehon.shizuoka.jp":!0,"kawazu.shizuoka.jp":!0,"kikugawa.shizuoka.jp":!0,"kosai.shizuoka.jp":!0,"makinohara.shizuoka.jp":!0,"matsuzaki.shizuoka.jp":!0,"minamiizu.shizuoka.jp":!0,"mishima.shizuoka.jp":!0,"morimachi.shizuoka.jp":!0,"nishiizu.shizuoka.jp":!0,"numazu.shizuoka.jp":!0,"omaezaki.shizuoka.jp":!0,"shimada.shizuoka.jp":!0,"shimizu.shizuoka.jp":!0,"shimoda.shizuoka.jp":!0,"shizuoka.shizuoka.jp":!0,"susono.shizuoka.jp":!0,"yaizu.shizuoka.jp":!0,"yoshida.shizuoka.jp":!0,"ashikaga.tochigi.jp":!0,"bato.tochigi.jp":!0,"haga.tochigi.jp":!0,"ichikai.tochigi.jp":!0,"iwafune.tochigi.jp":!0,"kaminokawa.tochigi.jp":!0,"kanuma.tochigi.jp":!0,"karasuyama.tochigi.jp":!0,"kuroiso.tochigi.jp":!0,"mashiko.tochigi.jp":!0,"mibu.tochigi.jp":!0,"moka.tochigi.jp":!0,"motegi.tochigi.jp":!0,"nasu.tochigi.jp":!0,"nasushiobara.tochigi.jp":!0,"nikko.tochigi.jp":!0,"nishikata.tochigi.jp":!0,"nogi.tochigi.jp":!0,"ohira.tochigi.jp":!0,"ohtawara.tochigi.jp":!0,"oyama.tochigi.jp":!0,"sakura.tochigi.jp":!0,"sano.tochigi.jp":!0,"shimotsuke.tochigi.jp":!0,"shioya.tochigi.jp":!0,"takanezawa.tochigi.jp":!0,"tochigi.tochigi.jp":!0,"tsuga.tochigi.jp":!0,"ujiie.tochigi.jp":!0,"utsunomiya.tochigi.jp":!0,"yaita.tochigi.jp":!0,"aizumi.tokushima.jp":!0,"anan.tokushima.jp":!0,"ichiba.tokushima.jp":!0,"itano.tokushima.jp":!0,"kainan.tokushima.jp":!0,"komatsushima.tokushima.jp":!0,"matsushige.tokushima.jp":!0,"mima.tokushima.jp":!0,"minami.tokushima.jp":!0,"miyoshi.tokushima.jp":!0,"mugi.tokushima.jp":!0,"nakagawa.tokushima.jp":!0,"naruto.tokushima.jp":!0,"sanagochi.tokushima.jp":!0,"shishikui.tokushima.jp":!0,"tokushima.tokushima.jp":!0,"wajiki.tokushima.jp":!0,"adachi.tokyo.jp":!0,"akiruno.tokyo.jp":!0,"akishima.tokyo.jp":!0,"aogashima.tokyo.jp":!0,"arakawa.tokyo.jp":!0,"bunkyo.tokyo.jp":!0,"chiyoda.tokyo.jp":!0,"chofu.tokyo.jp":!0,"chuo.tokyo.jp":!0,"edogawa.tokyo.jp":!0,"fuchu.tokyo.jp":!0,"fussa.tokyo.jp":!0,"hachijo.tokyo.jp":!0,"hachioji.tokyo.jp":!0,"hamura.tokyo.jp":!0,"higashikurume.tokyo.jp":!0,"higashimurayama.tokyo.jp":!0,"higashiyamato.tokyo.jp":!0,"hino.tokyo.jp":!0,"hinode.tokyo.jp":!0,"hinohara.tokyo.jp":!0,"inagi.tokyo.jp":!0,"itabashi.tokyo.jp":!0,"katsushika.tokyo.jp":!0,"kita.tokyo.jp":!0,"kiyose.tokyo.jp":!0,"kodaira.tokyo.jp":!0,"koganei.tokyo.jp":!0,"kokubunji.tokyo.jp":!0,"komae.tokyo.jp":!0,"koto.tokyo.jp":!0,"kouzushima.tokyo.jp":!0,"kunitachi.tokyo.jp":!0,"machida.tokyo.jp":!0,"meguro.tokyo.jp":!0,"minato.tokyo.jp":!0,"mitaka.tokyo.jp":!0,"mizuho.tokyo.jp":!0,"musashimurayama.tokyo.jp":!0,"musashino.tokyo.jp":!0,"nakano.tokyo.jp":!0,"nerima.tokyo.jp":!0,"ogasawara.tokyo.jp":!0,"okutama.tokyo.jp":!0,"ome.tokyo.jp":!0,"oshima.tokyo.jp":!0,"ota.tokyo.jp":!0,"setagaya.tokyo.jp":!0,"shibuya.tokyo.jp":!0,"shinagawa.tokyo.jp":!0,"shinjuku.tokyo.jp":!0,"suginami.tokyo.jp":!0,"sumida.tokyo.jp":!0,"tachikawa.tokyo.jp":!0,"taito.tokyo.jp":!0,"tama.tokyo.jp":!0,"toshima.tokyo.jp":!0,"chizu.tottori.jp":!0,"hino.tottori.jp":!0,"kawahara.tottori.jp":!0,"koge.tottori.jp":!0,"kotoura.tottori.jp":!0,"misasa.tottori.jp":!0,"nanbu.tottori.jp":!0,"nichinan.tottori.jp":!0,"sakaiminato.tottori.jp":!0,"tottori.tottori.jp":!0,"wakasa.tottori.jp":!0,"yazu.tottori.jp":!0,"yonago.tottori.jp":!0,"asahi.toyama.jp":!0,"fuchu.toyama.jp":!0,"fukumitsu.toyama.jp":!0,"funahashi.toyama.jp":!0,"himi.toyama.jp":!0,"imizu.toyama.jp":!0,"inami.toyama.jp":!0,"johana.toyama.jp":!0,"kamiichi.toyama.jp":!0,"kurobe.toyama.jp":!0,"nakaniikawa.toyama.jp":!0,"namerikawa.toyama.jp":!0,"nanto.toyama.jp":!0,"nyuzen.toyama.jp":!0,"oyabe.toyama.jp":!0,"taira.toyama.jp":!0,"takaoka.toyama.jp":!0,"tateyama.toyama.jp":!0,"toga.toyama.jp":!0,"tonami.toyama.jp":!0,"toyama.toyama.jp":!0,"unazuki.toyama.jp":!0,"uozu.toyama.jp":!0,"yamada.toyama.jp":!0,"arida.wakayama.jp":!0,"aridagawa.wakayama.jp":!0,"gobo.wakayama.jp":!0,"hashimoto.wakayama.jp":!0,"hidaka.wakayama.jp":!0,"hirogawa.wakayama.jp":!0,"inami.wakayama.jp":!0,"iwade.wakayama.jp":!0,"kainan.wakayama.jp":!0,"kamitonda.wakayama.jp":!0,"katsuragi.wakayama.jp":!0,"kimino.wakayama.jp":!0,"kinokawa.wakayama.jp":!0,"kitayama.wakayama.jp":!0,"koya.wakayama.jp":!0,"koza.wakayama.jp":!0,"kozagawa.wakayama.jp":!0,"kudoyama.wakayama.jp":!0,"kushimoto.wakayama.jp":!0,"mihama.wakayama.jp":!0,"misato.wakayama.jp":!0,"nachikatsuura.wakayama.jp":!0,"shingu.wakayama.jp":!0,"shirahama.wakayama.jp":!0,"taiji.wakayama.jp":!0,"tanabe.wakayama.jp":!0,"wakayama.wakayama.jp":!0,"yuasa.wakayama.jp":!0,"yura.wakayama.jp":!0,"asahi.yamagata.jp":!0,"funagata.yamagata.jp":!0,"higashine.yamagata.jp":!0,"iide.yamagata.jp":!0,"kahoku.yamagata.jp":!0,"kaminoyama.yamagata.jp":!0,"kaneyama.yamagata.jp":!0,"kawanishi.yamagata.jp":!0,"mamurogawa.yamagata.jp":!0,"mikawa.yamagata.jp":!0,"murayama.yamagata.jp":!0,"nagai.yamagata.jp":!0,"nakayama.yamagata.jp":!0,"nanyo.yamagata.jp":!0,"nishikawa.yamagata.jp":!0,"obanazawa.yamagata.jp":!0,"oe.yamagata.jp":!0,"oguni.yamagata.jp":!0,"ohkura.yamagata.jp":!0,"oishida.yamagata.jp":!0,"sagae.yamagata.jp":!0,"sakata.yamagata.jp":!0,"sakegawa.yamagata.jp":!0,"shinjo.yamagata.jp":!0,"shirataka.yamagata.jp":!0,"shonai.yamagata.jp":!0,"takahata.yamagata.jp":!0,"tendo.yamagata.jp":!0,"tozawa.yamagata.jp":!0,"tsuruoka.yamagata.jp":!0,"yamagata.yamagata.jp":!0,"yamanobe.yamagata.jp":!0,"yonezawa.yamagata.jp":!0,"yuza.yamagata.jp":!0,"abu.yamaguchi.jp":!0,"hagi.yamaguchi.jp":!0,"hikari.yamaguchi.jp":!0,"hofu.yamaguchi.jp":!0,"iwakuni.yamaguchi.jp":!0,"kudamatsu.yamaguchi.jp":!0,"mitou.yamaguchi.jp":!0,"nagato.yamaguchi.jp":!0,"oshima.yamaguchi.jp":!0,"shimonoseki.yamaguchi.jp":!0,"shunan.yamaguchi.jp":!0,"tabuse.yamaguchi.jp":!0,"tokuyama.yamaguchi.jp":!0,"toyota.yamaguchi.jp":!0,"ube.yamaguchi.jp":!0,"yuu.yamaguchi.jp":!0,"chuo.yamanashi.jp":!0,"doshi.yamanashi.jp":!0,"fuefuki.yamanashi.jp":!0,"fujikawa.yamanashi.jp":!0,"fujikawaguchiko.yamanashi.jp":!0,"fujiyoshida.yamanashi.jp":!0,"hayakawa.yamanashi.jp":!0,"hokuto.yamanashi.jp":!0,"ichikawamisato.yamanashi.jp":!0,"kai.yamanashi.jp":!0,"kofu.yamanashi.jp":!0,"koshu.yamanashi.jp":!0,"kosuge.yamanashi.jp":!0,"minami-alps.yamanashi.jp":!0,"minobu.yamanashi.jp":!0,"nakamichi.yamanashi.jp":!0,"nanbu.yamanashi.jp":!0,"narusawa.yamanashi.jp":!0,"nirasaki.yamanashi.jp":!0,"nishikatsura.yamanashi.jp":!0,"oshino.yamanashi.jp":!0,"otsuki.yamanashi.jp":!0,"showa.yamanashi.jp":!0,"tabayama.yamanashi.jp":!0,"tsuru.yamanashi.jp":!0,"uenohara.yamanashi.jp":!0,"yamanakako.yamanashi.jp":!0,"yamanashi.yamanashi.jp":!0,"*.ke":!0,kg:!0,"org.kg":!0,"net.kg":!0,"com.kg":!0,"edu.kg":!0,"gov.kg":!0,"mil.kg":!0,"*.kh":!0,ki:!0,"edu.ki":!0,"biz.ki":!0,"net.ki":!0,"org.ki":!0,"gov.ki":!0,"info.ki":!0,"com.ki":!0,km:!0,"org.km":!0,"nom.km":!0,"gov.km":!0,"prd.km":!0,"tm.km":!0,"edu.km":!0,"mil.km":!0,"ass.km":!0,"com.km":!0,"coop.km":!0,"asso.km":!0,"presse.km":!0,"medecin.km":!0,"notaires.km":!0,"pharmaciens.km":!0,"veterinaire.km":!0,"gouv.km":!0,kn:!0,"net.kn":!0,"org.kn":!0,"edu.kn":!0,"gov.kn":!0,kp:!0,"com.kp":!0,"edu.kp":!0,"gov.kp":!0,"org.kp":!0,"rep.kp":!0,"tra.kp":!0,kr:!0,"ac.kr":!0,"co.kr":!0,"es.kr":!0,"go.kr":!0,"hs.kr":!0,"kg.kr":!0,"mil.kr":!0,"ms.kr":!0,"ne.kr":!0,"or.kr":!0,"pe.kr":!0,"re.kr":!0,"sc.kr":!0,"busan.kr":!0,"chungbuk.kr":!0,"chungnam.kr":!0,"daegu.kr":!0,"daejeon.kr":!0,"gangwon.kr":!0,"gwangju.kr":!0,"gyeongbuk.kr":!0,"gyeonggi.kr":!0,"gyeongnam.kr":!0,"incheon.kr":!0,"jeju.kr":!0,"jeonbuk.kr":!0,"jeonnam.kr":!0,"seoul.kr":!0,"ulsan.kr":!0,"*.kw":!0,ky:!0,"edu.ky":!0,"gov.ky":!0,"com.ky":!0,"org.ky":!0,"net.ky":!0,kz:!0,"org.kz":!0,"edu.kz":!0,"net.kz":!0,"gov.kz":!0,"mil.kz":!0,"com.kz":!0,la:!0,"int.la":!0,"net.la":!0,"info.la":!0,"edu.la":!0,"gov.la":!0,"per.la":!0,"com.la":!0,"org.la":!0,lb:!0,"com.lb":!0,"edu.lb":!0,"gov.lb":!0,"net.lb":!0,"org.lb":!0,lc:!0,"com.lc":!0,"net.lc":!0,"co.lc":!0,"org.lc":!0,"edu.lc":!0,"gov.lc":!0,li:!0,lk:!0,"gov.lk":!0,"sch.lk":!0,"net.lk":!0,"int.lk":!0,"com.lk":!0,"org.lk":!0,"edu.lk":!0,"ngo.lk":!0,"soc.lk":!0,"web.lk":!0,"ltd.lk":!0,"assn.lk":!0,"grp.lk":!0,"hotel.lk":!0,lr:!0,"com.lr":!0,"edu.lr":!0,"gov.lr":!0,"org.lr":!0,"net.lr":!0,ls:!0,"co.ls":!0,"org.ls":!0,lt:!0,"gov.lt":!0,lu:!0,lv:!0,"com.lv":!0,"edu.lv":!0,"gov.lv":!0,"org.lv":!0,"mil.lv":!0,"id.lv":!0,"net.lv":!0,"asn.lv":!0,"conf.lv":!0,ly:!0,"com.ly":!0,"net.ly":!0,"gov.ly":!0,"plc.ly":!0,"edu.ly":!0,"sch.ly":!0,"med.ly":!0,"org.ly":!0,"id.ly":!0,ma:!0,"co.ma":!0,"net.ma":!0,"gov.ma":!0,"org.ma":!0,"ac.ma":!0,"press.ma":!0,mc:!0,"tm.mc":!0,"asso.mc":!0,md:!0,me:!0,"co.me":!0,"net.me":!0,"org.me":!0,"edu.me":!0,"ac.me":!0,"gov.me":!0,"its.me":!0,"priv.me":!0,mg:!0,"org.mg":!0,"nom.mg":!0,"gov.mg":!0,"prd.mg":!0,"tm.mg":!0,"edu.mg":!0,"mil.mg":!0,"com.mg":!0,mh:!0,mil:!0,mk:!0,"com.mk":!0,"org.mk":!0,"net.mk":!0,"edu.mk":!0,"gov.mk":!0,"inf.mk":!0,"name.mk":!0,ml:!0,"com.ml":!0,"edu.ml":!0,"gouv.ml":!0,"gov.ml":!0,"net.ml":!0,"org.ml":!0,"presse.ml":!0,"*.mm":!0,mn:!0,"gov.mn":!0,"edu.mn":!0,"org.mn":!0,mo:!0,"com.mo":!0,"net.mo":!0,"org.mo":!0,"edu.mo":!0,"gov.mo":!0,mobi:!0,mp:!0,mq:!0,mr:!0,"gov.mr":!0,ms:!0,"com.ms":!0,"edu.ms":!0,"gov.ms":!0,"net.ms":!0,"org.ms":!0,mt:!0,"com.mt":!0,"edu.mt":!0,"net.mt":!0,"org.mt":!0,mu:!0,"com.mu":!0,"net.mu":!0,"org.mu":!0,"gov.mu":!0,"ac.mu":!0,"co.mu":!0,"or.mu":!0,museum:!0,"academy.museum":!0,"agriculture.museum":!0,"air.museum":!0,"airguard.museum":!0,"alabama.museum":!0,"alaska.museum":!0,"amber.museum":!0,"ambulance.museum":!0,"american.museum":!0,"americana.museum":!0,"americanantiques.museum":!0,"americanart.museum":!0,"amsterdam.museum":!0,"and.museum":!0,"annefrank.museum":!0,"anthro.museum":!0,"anthropology.museum":!0,"antiques.museum":!0,"aquarium.museum":!0,"arboretum.museum":!0,"archaeological.museum":!0,"archaeology.museum":!0,"architecture.museum":!0,"art.museum":!0,"artanddesign.museum":!0,"artcenter.museum":!0,"artdeco.museum":!0,"arteducation.museum":!0,"artgallery.museum":!0,"arts.museum":!0,"artsandcrafts.museum":!0,"asmatart.museum":!0,"assassination.museum":!0,"assisi.museum":!0,"association.museum":!0,"astronomy.museum":!0,"atlanta.museum":!0,"austin.museum":!0,"australia.museum":!0,"automotive.museum":!0,"aviation.museum":!0,"axis.museum":!0,"badajoz.museum":!0,"baghdad.museum":!0,"bahn.museum":!0,"bale.museum":!0,"baltimore.museum":!0,"barcelona.museum":!0,"baseball.museum":!0,"basel.museum":!0,"baths.museum":!0,"bauern.museum":!0,"beauxarts.museum":!0,"beeldengeluid.museum":!0,"bellevue.museum":!0,"bergbau.museum":!0,"berkeley.museum":!0,"berlin.museum":!0,"bern.museum":!0,"bible.museum":!0,"bilbao.museum":!0,"bill.museum":!0,"birdart.museum":!0,"birthplace.museum":!0,"bonn.museum":!0,"boston.museum":!0,"botanical.museum":!0,"botanicalgarden.museum":!0,"botanicgarden.museum":!0,"botany.museum":!0,"brandywinevalley.museum":!0,"brasil.museum":!0,"bristol.museum":!0,"british.museum":!0,"britishcolumbia.museum":!0,"broadcast.museum":!0,"brunel.museum":!0,"brussel.museum":!0,"brussels.museum":!0,"bruxelles.museum":!0,"building.museum":!0,"burghof.museum":!0,"bus.museum":!0,"bushey.museum":!0,"cadaques.museum":!0,"california.museum":!0,"cambridge.museum":!0,"can.museum":!0,"canada.museum":!0,"capebreton.museum":!0,"carrier.museum":!0,"cartoonart.museum":!0,"casadelamoneda.museum":!0,"castle.museum":!0,"castres.museum":!0,"celtic.museum":!0,"center.museum":!0,"chattanooga.museum":!0,"cheltenham.museum":!0,"chesapeakebay.museum":!0,"chicago.museum":!0,"children.museum":!0,"childrens.museum":!0,"childrensgarden.museum":!0,"chiropractic.museum":!0,"chocolate.museum":!0,"christiansburg.museum":!0,"cincinnati.museum":!0,"cinema.museum":!0,"circus.museum":!0,"civilisation.museum":!0,"civilization.museum":!0,"civilwar.museum":!0,"clinton.museum":!0,"clock.museum":!0,"coal.museum":!0,"coastaldefence.museum":!0,"cody.museum":!0,"coldwar.museum":!0,"collection.museum":!0,"colonialwilliamsburg.museum":!0,"coloradoplateau.museum":!0,"columbia.museum":!0,"columbus.museum":!0,"communication.museum":!0,
    "communications.museum":!0,"community.museum":!0,"computer.museum":!0,"computerhistory.museum":!0,"xn--comunicaes-v6a2o.museum":!0,"contemporary.museum":!0,"contemporaryart.museum":!0,"convent.museum":!0,"copenhagen.museum":!0,"corporation.museum":!0,"xn--correios-e-telecomunicaes-ghc29a.museum":!0,"corvette.museum":!0,"costume.museum":!0,"countryestate.museum":!0,"county.museum":!0,"crafts.museum":!0,"cranbrook.museum":!0,"creation.museum":!0,"cultural.museum":!0,"culturalcenter.museum":!0,"culture.museum":!0,"cyber.museum":!0,"cymru.museum":!0,"dali.museum":!0,"dallas.museum":!0,"database.museum":!0,"ddr.museum":!0,"decorativearts.museum":!0,"delaware.museum":!0,"delmenhorst.museum":!0,"denmark.museum":!0,"depot.museum":!0,"design.museum":!0,"detroit.museum":!0,"dinosaur.museum":!0,"discovery.museum":!0,"dolls.museum":!0,"donostia.museum":!0,"durham.museum":!0,"eastafrica.museum":!0,"eastcoast.museum":!0,"education.museum":!0,"educational.museum":!0,"egyptian.museum":!0,"eisenbahn.museum":!0,"elburg.museum":!0,"elvendrell.museum":!0,"embroidery.museum":!0,"encyclopedic.museum":!0,"england.museum":!0,"entomology.museum":!0,"environment.museum":!0,"environmentalconservation.museum":!0,"epilepsy.museum":!0,"essex.museum":!0,"estate.museum":!0,"ethnology.museum":!0,"exeter.museum":!0,"exhibition.museum":!0,"family.museum":!0,"farm.museum":!0,"farmequipment.museum":!0,"farmers.museum":!0,"farmstead.museum":!0,"field.museum":!0,"figueres.museum":!0,"filatelia.museum":!0,"film.museum":!0,"fineart.museum":!0,"finearts.museum":!0,"finland.museum":!0,"flanders.museum":!0,"florida.museum":!0,"force.museum":!0,"fortmissoula.museum":!0,"fortworth.museum":!0,"foundation.museum":!0,"francaise.museum":!0,"frankfurt.museum":!0,"franziskaner.museum":!0,"freemasonry.museum":!0,"freiburg.museum":!0,"fribourg.museum":!0,"frog.museum":!0,"fundacio.museum":!0,"furniture.museum":!0,"gallery.museum":!0,"garden.museum":!0,"gateway.museum":!0,"geelvinck.museum":!0,"gemological.museum":!0,"geology.museum":!0,"georgia.museum":!0,"giessen.museum":!0,"glas.museum":!0,"glass.museum":!0,"gorge.museum":!0,"grandrapids.museum":!0,"graz.museum":!0,"guernsey.museum":!0,"halloffame.museum":!0,"hamburg.museum":!0,"handson.museum":!0,"harvestcelebration.museum":!0,"hawaii.museum":!0,"health.museum":!0,"heimatunduhren.museum":!0,"hellas.museum":!0,"helsinki.museum":!0,"hembygdsforbund.museum":!0,"heritage.museum":!0,"histoire.museum":!0,"historical.museum":!0,"historicalsociety.museum":!0,"historichouses.museum":!0,"historisch.museum":!0,"historisches.museum":!0,"history.museum":!0,"historyofscience.museum":!0,"horology.museum":!0,"house.museum":!0,"humanities.museum":!0,"illustration.museum":!0,"imageandsound.museum":!0,"indian.museum":!0,"indiana.museum":!0,"indianapolis.museum":!0,"indianmarket.museum":!0,"intelligence.museum":!0,"interactive.museum":!0,"iraq.museum":!0,"iron.museum":!0,"isleofman.museum":!0,"jamison.museum":!0,"jefferson.museum":!0,"jerusalem.museum":!0,"jewelry.museum":!0,"jewish.museum":!0,"jewishart.museum":!0,"jfk.museum":!0,"journalism.museum":!0,"judaica.museum":!0,"judygarland.museum":!0,"juedisches.museum":!0,"juif.museum":!0,"karate.museum":!0,"karikatur.museum":!0,"kids.museum":!0,"koebenhavn.museum":!0,"koeln.museum":!0,"kunst.museum":!0,"kunstsammlung.museum":!0,"kunstunddesign.museum":!0,"labor.museum":!0,"labour.museum":!0,"lajolla.museum":!0,"lancashire.museum":!0,"landes.museum":!0,"lans.museum":!0,"xn--lns-qla.museum":!0,"larsson.museum":!0,"lewismiller.museum":!0,"lincoln.museum":!0,"linz.museum":!0,"living.museum":!0,"livinghistory.museum":!0,"localhistory.museum":!0,"london.museum":!0,"losangeles.museum":!0,"louvre.museum":!0,"loyalist.museum":!0,"lucerne.museum":!0,"luxembourg.museum":!0,"luzern.museum":!0,"mad.museum":!0,"madrid.museum":!0,"mallorca.museum":!0,"manchester.museum":!0,"mansion.museum":!0,"mansions.museum":!0,"manx.museum":!0,"marburg.museum":!0,"maritime.museum":!0,"maritimo.museum":!0,"maryland.museum":!0,"marylhurst.museum":!0,"media.museum":!0,"medical.museum":!0,"medizinhistorisches.museum":!0,"meeres.museum":!0,"memorial.museum":!0,"mesaverde.museum":!0,"michigan.museum":!0,"midatlantic.museum":!0,"military.museum":!0,"mill.museum":!0,"miners.museum":!0,"mining.museum":!0,"minnesota.museum":!0,"missile.museum":!0,"missoula.museum":!0,"modern.museum":!0,"moma.museum":!0,"money.museum":!0,"monmouth.museum":!0,"monticello.museum":!0,"montreal.museum":!0,"moscow.museum":!0,"motorcycle.museum":!0,"muenchen.museum":!0,"muenster.museum":!0,"mulhouse.museum":!0,"muncie.museum":!0,"museet.museum":!0,"museumcenter.museum":!0,"museumvereniging.museum":!0,"music.museum":!0,"national.museum":!0,"nationalfirearms.museum":!0,"nationalheritage.museum":!0,"nativeamerican.museum":!0,"naturalhistory.museum":!0,"naturalhistorymuseum.museum":!0,"naturalsciences.museum":!0,"nature.museum":!0,"naturhistorisches.museum":!0,"natuurwetenschappen.museum":!0,"naumburg.museum":!0,"naval.museum":!0,"nebraska.museum":!0,"neues.museum":!0,"newhampshire.museum":!0,"newjersey.museum":!0,"newmexico.museum":!0,"newport.museum":!0,"newspaper.museum":!0,"newyork.museum":!0,"niepce.museum":!0,"norfolk.museum":!0,"north.museum":!0,"nrw.museum":!0,"nuernberg.museum":!0,"nuremberg.museum":!0,"nyc.museum":!0,"nyny.museum":!0,"oceanographic.museum":!0,"oceanographique.museum":!0,"omaha.museum":!0,"online.museum":!0,"ontario.museum":!0,"openair.museum":!0,"oregon.museum":!0,"oregontrail.museum":!0,"otago.museum":!0,"oxford.museum":!0,"pacific.museum":!0,"paderborn.museum":!0,"palace.museum":!0,"paleo.museum":!0,"palmsprings.museum":!0,"panama.museum":!0,"paris.museum":!0,"pasadena.museum":!0,"pharmacy.museum":!0,"philadelphia.museum":!0,"philadelphiaarea.museum":!0,"philately.museum":!0,"phoenix.museum":!0,"photography.museum":!0,"pilots.museum":!0,"pittsburgh.museum":!0,"planetarium.museum":!0,"plantation.museum":!0,"plants.museum":!0,"plaza.museum":!0,"portal.museum":!0,"portland.museum":!0,"portlligat.museum":!0,"posts-and-telecommunications.museum":!0,"preservation.museum":!0,"presidio.museum":!0,"press.museum":!0,"project.museum":!0,"public.museum":!0,"pubol.museum":!0,"quebec.museum":!0,"railroad.museum":!0,"railway.museum":!0,"research.museum":!0,"resistance.museum":!0,"riodejaneiro.museum":!0,"rochester.museum":!0,"rockart.museum":!0,"roma.museum":!0,"russia.museum":!0,"saintlouis.museum":!0,"salem.museum":!0,"salvadordali.museum":!0,"salzburg.museum":!0,"sandiego.museum":!0,"sanfrancisco.museum":!0,"santabarbara.museum":!0,"santacruz.museum":!0,"santafe.museum":!0,"saskatchewan.museum":!0,"satx.museum":!0,"savannahga.museum":!0,"schlesisches.museum":!0,"schoenbrunn.museum":!0,"schokoladen.museum":!0,"school.museum":!0,"schweiz.museum":!0,"science.museum":!0,"scienceandhistory.museum":!0,"scienceandindustry.museum":!0,"sciencecenter.museum":!0,"sciencecenters.museum":!0,"science-fiction.museum":!0,"sciencehistory.museum":!0,"sciences.museum":!0,"sciencesnaturelles.museum":!0,"scotland.museum":!0,"seaport.museum":!0,"settlement.museum":!0,"settlers.museum":!0,"shell.museum":!0,"sherbrooke.museum":!0,"sibenik.museum":!0,"silk.museum":!0,"ski.museum":!0,"skole.museum":!0,"society.museum":!0,"sologne.museum":!0,"soundandvision.museum":!0,"southcarolina.museum":!0,"southwest.museum":!0,"space.museum":!0,"spy.museum":!0,"square.museum":!0,"stadt.museum":!0,"stalbans.museum":!0,"starnberg.museum":!0,"state.museum":!0,"stateofdelaware.museum":!0,"station.museum":!0,"steam.museum":!0,"steiermark.museum":!0,"stjohn.museum":!0,"stockholm.museum":!0,"stpetersburg.museum":!0,"stuttgart.museum":!0,"suisse.museum":!0,"surgeonshall.museum":!0,"surrey.museum":!0,"svizzera.museum":!0,"sweden.museum":!0,"sydney.museum":!0,"tank.museum":!0,"tcm.museum":!0,"technology.museum":!0,"telekommunikation.museum":!0,"television.museum":!0,"texas.museum":!0,"textile.museum":!0,"theater.museum":!0,"time.museum":!0,"timekeeping.museum":!0,"topology.museum":!0,"torino.museum":!0,"touch.museum":!0,"town.museum":!0,"transport.museum":!0,"tree.museum":!0,"trolley.museum":!0,"trust.museum":!0,"trustee.museum":!0,"uhren.museum":!0,"ulm.museum":!0,"undersea.museum":!0,"university.museum":!0,"usa.museum":!0,"usantiques.museum":!0,"usarts.museum":!0,"uscountryestate.museum":!0,"usculture.museum":!0,"usdecorativearts.museum":!0,"usgarden.museum":!0,"ushistory.museum":!0,"ushuaia.museum":!0,"uslivinghistory.museum":!0,"utah.museum":!0,"uvic.museum":!0,"valley.museum":!0,"vantaa.museum":!0,"versailles.museum":!0,"viking.museum":!0,"village.museum":!0,"virginia.museum":!0,"virtual.museum":!0,"virtuel.museum":!0,"vlaanderen.museum":!0,"volkenkunde.museum":!0,"wales.museum":!0,"wallonie.museum":!0,"war.museum":!0,"washingtondc.museum":!0,"watchandclock.museum":!0,"watch-and-clock.museum":!0,"western.museum":!0,"westfalen.museum":!0,"whaling.museum":!0,"wildlife.museum":!0,"williamsburg.museum":!0,"windmill.museum":!0,"workshop.museum":!0,"york.museum":!0,"yorkshire.museum":!0,"yosemite.museum":!0,"youth.museum":!0,"zoological.museum":!0,"zoology.museum":!0,"xn--9dbhblg6di.museum":!0,"xn--h1aegh.museum":!0,mv:!0,"aero.mv":!0,"biz.mv":!0,"com.mv":!0,"coop.mv":!0,"edu.mv":!0,"gov.mv":!0,"info.mv":!0,"int.mv":!0,"mil.mv":!0,"museum.mv":!0,"name.mv":!0,"net.mv":!0,"org.mv":!0,"pro.mv":!0,mw:!0,"ac.mw":!0,"biz.mw":!0,"co.mw":!0,"com.mw":!0,"coop.mw":!0,"edu.mw":!0,"gov.mw":!0,"int.mw":!0,"museum.mw":!0,"net.mw":!0,"org.mw":!0,mx:!0,"com.mx":!0,"org.mx":!0,"gob.mx":!0,"edu.mx":!0,"net.mx":!0,my:!0,"com.my":!0,"net.my":!0,"org.my":!0,"gov.my":!0,"edu.my":!0,"mil.my":!0,"name.my":!0,"*.mz":!0,"teledata.mz":!1,na:!0,"info.na":!0,"pro.na":!0,"name.na":!0,"school.na":!0,"or.na":!0,"dr.na":!0,"us.na":!0,"mx.na":!0,"ca.na":!0,"in.na":!0,"cc.na":!0,"tv.na":!0,"ws.na":!0,"mobi.na":!0,"co.na":!0,"com.na":!0,"org.na":!0,name:!0,nc:!0,"asso.nc":!0,ne:!0,net:!0,nf:!0,"com.nf":!0,"net.nf":!0,"per.nf":!0,"rec.nf":!0,"web.nf":!0,"arts.nf":!0,"firm.nf":!0,"info.nf":!0,"other.nf":!0,"store.nf":!0,ng:!0,"com.ng":!0,"edu.ng":!0,"name.ng":!0,"net.ng":!0,"org.ng":!0,"sch.ng":!0,"gov.ng":!0,"mil.ng":!0,"mobi.ng":!0,"*.ni":!0,nl:!0,"bv.nl":!0,no:!0,"fhs.no":!0,"vgs.no":!0,"fylkesbibl.no":!0,"folkebibl.no":!0,"museum.no":!0,"idrett.no":!0,"priv.no":!0,"mil.no":!0,"stat.no":!0,"dep.no":!0,"kommune.no":!0,"herad.no":!0,"aa.no":!0,"ah.no":!0,"bu.no":!0,"fm.no":!0,"hl.no":!0,"hm.no":!0,"jan-mayen.no":!0,"mr.no":!0,"nl.no":!0,"nt.no":!0,"of.no":!0,"ol.no":!0,"oslo.no":!0,"rl.no":!0,"sf.no":!0,"st.no":!0,"svalbard.no":!0,"tm.no":!0,"tr.no":!0,"va.no":!0,"vf.no":!0,"gs.aa.no":!0,"gs.ah.no":!0,"gs.bu.no":!0,"gs.fm.no":!0,"gs.hl.no":!0,"gs.hm.no":!0,"gs.jan-mayen.no":!0,"gs.mr.no":!0,"gs.nl.no":!0,"gs.nt.no":!0,"gs.of.no":!0,"gs.ol.no":!0,"gs.oslo.no":!0,"gs.rl.no":!0,"gs.sf.no":!0,"gs.st.no":!0,"gs.svalbard.no":!0,"gs.tm.no":!0,"gs.tr.no":!0,"gs.va.no":!0,"gs.vf.no":!0,"akrehamn.no":!0,"xn--krehamn-dxa.no":!0,"algard.no":!0,"xn--lgrd-poac.no":!0,"arna.no":!0,"brumunddal.no":!0,"bryne.no":!0,"bronnoysund.no":!0,"xn--brnnysund-m8ac.no":!0,"drobak.no":!0,"xn--drbak-wua.no":!0,"egersund.no":!0,"fetsund.no":!0,"floro.no":!0,"xn--flor-jra.no":!0,"fredrikstad.no":!0,"hokksund.no":!0,"honefoss.no":!0,"xn--hnefoss-q1a.no":!0,"jessheim.no":!0,"jorpeland.no":!0,"xn--jrpeland-54a.no":!0,"kirkenes.no":!0,"kopervik.no":!0,"krokstadelva.no":!0,"langevag.no":!0,"xn--langevg-jxa.no":!0,"leirvik.no":!0,"mjondalen.no":!0,"xn--mjndalen-64a.no":!0,"mo-i-rana.no":!0,"mosjoen.no":!0,"xn--mosjen-eya.no":!0,"nesoddtangen.no":!0,"orkanger.no":!0,"osoyro.no":!0,"xn--osyro-wua.no":!0,"raholt.no":!0,"xn--rholt-mra.no":!0,"sandnessjoen.no":!0,"xn--sandnessjen-ogb.no":!0,"skedsmokorset.no":!0,"slattum.no":!0,"spjelkavik.no":!0,"stathelle.no":!0,"stavern.no":!0,"stjordalshalsen.no":!0,"xn--stjrdalshalsen-sqb.no":!0,"tananger.no":!0,"tranby.no":!0,"vossevangen.no":!0,"afjord.no":!0,"xn--fjord-lra.no":!0,"agdenes.no":!0,"al.no":!0,"xn--l-1fa.no":!0,"alesund.no":!0,"xn--lesund-hua.no":!0,"alstahaug.no":!0,"alta.no":!0,"xn--lt-liac.no":!0,"alaheadju.no":!0,"xn--laheadju-7ya.no":!0,"alvdal.no":!0,"amli.no":!0,"xn--mli-tla.no":!0,"amot.no":!0,"xn--mot-tla.no":!0,"andebu.no":!0,"andoy.no":!0,"xn--andy-ira.no":!0,"andasuolo.no":!0,"ardal.no":!0,"xn--rdal-poa.no":!0,"aremark.no":!0,"arendal.no":!0,"xn--s-1fa.no":!0,"aseral.no":!0,"xn--seral-lra.no":!0,"asker.no":!0,"askim.no":!0,"askvoll.no":!0,"askoy.no":!0,"xn--asky-ira.no":!0,"asnes.no":!0,"xn--snes-poa.no":!0,"audnedaln.no":!0,"aukra.no":!0,"aure.no":!0,"aurland.no":!0,"aurskog-holand.no":!0,"xn--aurskog-hland-jnb.no":!0,"austevoll.no":!0,"austrheim.no":!0,"averoy.no":!0,"xn--avery-yua.no":!0,"balestrand.no":!0,"ballangen.no":!0,"balat.no":!0,"xn--blt-elab.no":!0,"balsfjord.no":!0,"bahccavuotna.no":!0,"xn--bhccavuotna-k7a.no":!0,"bamble.no":!0,"bardu.no":!0,"beardu.no":!0,"beiarn.no":!0,"bajddar.no":!0,"xn--bjddar-pta.no":!0,"baidar.no":!0,"xn--bidr-5nac.no":!0,"berg.no":!0,"bergen.no":!0,"berlevag.no":!0,"xn--berlevg-jxa.no":!0,"bearalvahki.no":!0,"xn--bearalvhki-y4a.no":!0,"bindal.no":!0,"birkenes.no":!0,"bjarkoy.no":!0,"xn--bjarky-fya.no":!0,"bjerkreim.no":!0,"bjugn.no":!0,"bodo.no":!0,"xn--bod-2na.no":!0,"badaddja.no":!0,"xn--bdddj-mrabd.no":!0,"budejju.no":!0,"bokn.no":!0,"bremanger.no":!0,"bronnoy.no":!0,"xn--brnny-wuac.no":!0,"bygland.no":!0,"bykle.no":!0,"barum.no":!0,"xn--brum-voa.no":!0,"bo.telemark.no":!0,"xn--b-5ga.telemark.no":!0,"bo.nordland.no":!0,"xn--b-5ga.nordland.no":!0,"bievat.no":!0,"xn--bievt-0qa.no":!0,"bomlo.no":!0,"xn--bmlo-gra.no":!0,"batsfjord.no":!0,"xn--btsfjord-9za.no":!0,"bahcavuotna.no":!0,"xn--bhcavuotna-s4a.no":!0,"dovre.no":!0,"drammen.no":!0,"drangedal.no":!0,"dyroy.no":!0,"xn--dyry-ira.no":!0,"donna.no":!0,"xn--dnna-gra.no":!0,"eid.no":!0,"eidfjord.no":!0,"eidsberg.no":!0,"eidskog.no":!0,"eidsvoll.no":!0,"eigersund.no":!0,"elverum.no":!0,"enebakk.no":!0,"engerdal.no":!0,"etne.no":!0,"etnedal.no":!0,"evenes.no":!0,"evenassi.no":!0,"xn--eveni-0qa01ga.no":!0,"evje-og-hornnes.no":!0,"farsund.no":!0,"fauske.no":!0,"fuossko.no":!0,"fuoisku.no":!0,"fedje.no":!0,"fet.no":!0,"finnoy.no":!0,"xn--finny-yua.no":!0,"fitjar.no":!0,"fjaler.no":!0,"fjell.no":!0,"flakstad.no":!0,"flatanger.no":!0,"flekkefjord.no":!0,"flesberg.no":!0,"flora.no":!0,"fla.no":!0,"xn--fl-zia.no":!0,"folldal.no":!0,"forsand.no":!0,"fosnes.no":!0,"frei.no":!0,"frogn.no":!0,"froland.no":!0,"frosta.no":!0,"frana.no":!0,"xn--frna-woa.no":!0,"froya.no":!0,"xn--frya-hra.no":!0,"fusa.no":!0,"fyresdal.no":!0,"forde.no":!0,"xn--frde-gra.no":!0,"gamvik.no":!0,"gangaviika.no":!0,"xn--ggaviika-8ya47h.no":!0,"gaular.no":!0,"gausdal.no":!0,"gildeskal.no":!0,"xn--gildeskl-g0a.no":!0,"giske.no":!0,"gjemnes.no":!0,"gjerdrum.no":!0,"gjerstad.no":!0,"gjesdal.no":!0,"gjovik.no":!0,"xn--gjvik-wua.no":!0,"gloppen.no":!0,"gol.no":!0,"gran.no":!0,"grane.no":!0,"granvin.no":!0,"gratangen.no":!0,"grimstad.no":!0,"grong.no":!0,"kraanghke.no":!0,"xn--kranghke-b0a.no":!0,"grue.no":!0,"gulen.no":!0,"hadsel.no":!0,"halden.no":!0,"halsa.no":!0,"hamar.no":!0,"hamaroy.no":!0,"habmer.no":!0,"xn--hbmer-xqa.no":!0,"hapmir.no":!0,"xn--hpmir-xqa.no":!0,"hammerfest.no":!0,"hammarfeasta.no":!0,"xn--hmmrfeasta-s4ac.no":!0,"haram.no":!0,"hareid.no":!0,"harstad.no":!0,"hasvik.no":!0,"aknoluokta.no":!0,"xn--koluokta-7ya57h.no":!0,"hattfjelldal.no":!0,"aarborte.no":!0,"haugesund.no":!0,"hemne.no":!0,"hemnes.no":!0,"hemsedal.no":!0,"heroy.more-og-romsdal.no":!0,"xn--hery-ira.xn--mre-og-romsdal-qqb.no":!0,"heroy.nordland.no":!0,"xn--hery-ira.nordland.no":!0,"hitra.no":!0,"hjartdal.no":!0,"hjelmeland.no":!0,"hobol.no":!0,"xn--hobl-ira.no":!0,"hof.no":!0,"hol.no":!0,"hole.no":!0,"holmestrand.no":!0,"holtalen.no":!0,"xn--holtlen-hxa.no":!0,"hornindal.no":!0,"horten.no":!0,"hurdal.no":!0,"hurum.no":!0,"hvaler.no":!0,"hyllestad.no":!0,"hagebostad.no":!0,"xn--hgebostad-g3a.no":!0,"hoyanger.no":!0,"xn--hyanger-q1a.no":!0,"hoylandet.no":!0,"xn--hylandet-54a.no":!0,"ha.no":!0,"xn--h-2fa.no":!0,"ibestad.no":!0,"inderoy.no":!0,"xn--indery-fya.no":!0,"iveland.no":!0,"jevnaker.no":!0,"jondal.no":!0,"jolster.no":!0,"xn--jlster-bya.no":!0,"karasjok.no":!0,"karasjohka.no":!0,"xn--krjohka-hwab49j.no":!0,"karlsoy.no":!0,"galsa.no":!0,"xn--gls-elac.no":!0,"karmoy.no":!0,"xn--karmy-yua.no":!0,"kautokeino.no":!0,"guovdageaidnu.no":!0,"klepp.no":!0,"klabu.no":!0,"xn--klbu-woa.no":!0,"kongsberg.no":!0,"kongsvinger.no":!0,"kragero.no":!0,"xn--krager-gya.no":!0,"kristiansand.no":!0,"kristiansund.no":!0,"krodsherad.no":!0,"xn--krdsherad-m8a.no":!0,"kvalsund.no":!0,"rahkkeravju.no":!0,"xn--rhkkervju-01af.no":!0,"kvam.no":!0,"kvinesdal.no":!0,"kvinnherad.no":!0,"kviteseid.no":!0,"kvitsoy.no":!0,"xn--kvitsy-fya.no":!0,"kvafjord.no":!0,"xn--kvfjord-nxa.no":!0,"giehtavuoatna.no":!0,"kvanangen.no":!0,"xn--kvnangen-k0a.no":!0,"navuotna.no":!0,"xn--nvuotna-hwa.no":!0,"kafjord.no":!0,"xn--kfjord-iua.no":!0,"gaivuotna.no":!0,"xn--givuotna-8ya.no":!0,"larvik.no":!0,"lavangen.no":!0,"lavagis.no":!0,"loabat.no":!0,"xn--loabt-0qa.no":!0,"lebesby.no":!0,"davvesiida.no":!0,"leikanger.no":!0,"leirfjord.no":!0,"leka.no":!0,"leksvik.no":!0,"lenvik.no":!0,"leangaviika.no":!0,"xn--leagaviika-52b.no":!0,"lesja.no":!0,"levanger.no":!0,"lier.no":!0,"lierne.no":!0,"lillehammer.no":!0,"lillesand.no":!0,"lindesnes.no":!0,"lindas.no":!0,"xn--linds-pra.no":!0,"lom.no":!0,"loppa.no":!0,"lahppi.no":!0,"xn--lhppi-xqa.no":!0,"lund.no":!0,"lunner.no":!0,"luroy.no":!0,"xn--lury-ira.no":!0,"luster.no":!0,"lyngdal.no":!0,"lyngen.no":!0,"ivgu.no":!0,"lardal.no":!0,"lerdal.no":!0,"xn--lrdal-sra.no":!0,"lodingen.no":!0,"xn--ldingen-q1a.no":!0,"lorenskog.no":!0,"xn--lrenskog-54a.no":!0,"loten.no":!0,"xn--lten-gra.no":!0,"malvik.no":!0,"masoy.no":!0,"xn--msy-ula0h.no":!0,"muosat.no":!0,"xn--muost-0qa.no":!0,"mandal.no":!0,"marker.no":!0,"marnardal.no":!0,"masfjorden.no":!0,"meland.no":!0,"meldal.no":!0,"melhus.no":!0,"meloy.no":!0,"xn--mely-ira.no":!0,"meraker.no":!0,"xn--merker-kua.no":!0,"moareke.no":!0,"xn--moreke-jua.no":!0,"midsund.no":!0,"midtre-gauldal.no":!0,"modalen.no":!0,"modum.no":!0,"molde.no":!0,"moskenes.no":!0,"moss.no":!0,"mosvik.no":!0,"malselv.no":!0,"xn--mlselv-iua.no":!0,"malatvuopmi.no":!0,"xn--mlatvuopmi-s4a.no":!0,"namdalseid.no":!0,"aejrie.no":!0,"namsos.no":!0,"namsskogan.no":!0,"naamesjevuemie.no":!0,"xn--nmesjevuemie-tcba.no":!0,"laakesvuemie.no":!0,"nannestad.no":!0,"narvik.no":!0,"narviika.no":!0,"naustdal.no":!0,"nedre-eiker.no":!0,"nes.akershus.no":!0,"nes.buskerud.no":!0,"nesna.no":!0,"nesodden.no":!0,"nesseby.no":!0,"unjarga.no":!0,"xn--unjrga-rta.no":!0,"nesset.no":!0,"nissedal.no":!0,"nittedal.no":!0,"nord-aurdal.no":!0,"nord-fron.no":!0,"nord-odal.no":!0,"norddal.no":!0,"nordkapp.no":!0,"davvenjarga.no":!0,"xn--davvenjrga-y4a.no":!0,"nordre-land.no":!0,"nordreisa.no":!0,"raisa.no":!0,"xn--risa-5na.no":!0,"nore-og-uvdal.no":!0,"notodden.no":!0,"naroy.no":!0,"xn--nry-yla5g.no":!0,"notteroy.no":!0,"xn--nttery-byae.no":!0,"odda.no":!0,"oksnes.no":!0,"xn--ksnes-uua.no":!0,"oppdal.no":!0,"oppegard.no":!0,"xn--oppegrd-ixa.no":!0,"orkdal.no":!0,"orland.no":!0,"xn--rland-uua.no":!0,"orskog.no":!0,"xn--rskog-uua.no":!0,"orsta.no":!0,"xn--rsta-fra.no":!0,"os.hedmark.no":!0,"os.hordaland.no":!0,"osen.no":!0,"osteroy.no":!0,"xn--ostery-fya.no":!0,"ostre-toten.no":!0,"xn--stre-toten-zcb.no":!0,"overhalla.no":!0,"ovre-eiker.no":!0,"xn--vre-eiker-k8a.no":!0,"oyer.no":!0,"xn--yer-zna.no":!0,"oygarden.no":!0,"xn--ygarden-p1a.no":!0,"oystre-slidre.no":!0,"xn--ystre-slidre-ujb.no":!0,"porsanger.no":!0,"porsangu.no":!0,"xn--porsgu-sta26f.no":!0,"porsgrunn.no":!0,"radoy.no":!0,"xn--rady-ira.no":!0,"rakkestad.no":!0,"rana.no":!0,"ruovat.no":!0,"randaberg.no":!0,"rauma.no":!0,"rendalen.no":!0,"rennebu.no":!0,"rennesoy.no":!0,"xn--rennesy-v1a.no":!0,"rindal.no":!0,"ringebu.no":!0,"ringerike.no":!0,"ringsaker.no":!0,"rissa.no":!0,"risor.no":!0,"xn--risr-ira.no":!0,"roan.no":!0,"rollag.no":!0,"rygge.no":!0,"ralingen.no":!0,"xn--rlingen-mxa.no":!0,"rodoy.no":!0,"xn--rdy-0nab.no":!0,"romskog.no":!0,"xn--rmskog-bya.no":!0,"roros.no":!0,"xn--rros-gra.no":!0,"rost.no":!0,"xn--rst-0na.no":!0,"royken.no":!0,"xn--ryken-vua.no":!0,"royrvik.no":!0,"xn--ryrvik-bya.no":!0,"rade.no":!0,"xn--rde-ula.no":!0,"salangen.no":!0,"siellak.no":!0,"saltdal.no":!0,"salat.no":!0,"xn--slt-elab.no":!0,"xn--slat-5na.no":!0,"samnanger.no":!0,"sande.more-og-romsdal.no":!0,"sande.xn--mre-og-romsdal-qqb.no":!0,"sande.vestfold.no":!0,"sandefjord.no":!0,"sandnes.no":!0,"sandoy.no":!0,"xn--sandy-yua.no":!0,"sarpsborg.no":!0,"sauda.no":!0,"sauherad.no":!0,"sel.no":!0,"selbu.no":!0,"selje.no":!0,"seljord.no":!0,"sigdal.no":!0,"siljan.no":!0,"sirdal.no":!0,"skaun.no":!0,"skedsmo.no":!0,"ski.no":!0,"skien.no":!0,"skiptvet.no":!0,"skjervoy.no":!0,"xn--skjervy-v1a.no":!0,"skierva.no":!0,"xn--skierv-uta.no":!0,"skjak.no":!0,"xn--skjk-soa.no":!0,"skodje.no":!0,"skanland.no":!0,"xn--sknland-fxa.no":!0,"skanit.no":!0,"xn--sknit-yqa.no":!0,"smola.no":!0,"xn--smla-hra.no":!0,"snillfjord.no":!0,"snasa.no":!0,"xn--snsa-roa.no":!0,"snoasa.no":!0,"snaase.no":!0,"xn--snase-nra.no":!0,"sogndal.no":!0,"sokndal.no":!0,"sola.no":!0,"solund.no":!0,"songdalen.no":!0,"sortland.no":!0,"spydeberg.no":!0,"stange.no":!0,"stavanger.no":!0,"steigen.no":!0,"steinkjer.no":!0,"stjordal.no":!0,"xn--stjrdal-s1a.no":!0,"stokke.no":!0,"stor-elvdal.no":!0,"stord.no":!0,"stordal.no":!0,"storfjord.no":!0,"omasvuotna.no":!0,"strand.no":!0,"stranda.no":!0,"stryn.no":!0,"sula.no":!0,"suldal.no":!0,"sund.no":!0,"sunndal.no":!0,"surnadal.no":!0,"sveio.no":!0,"svelvik.no":!0,"sykkylven.no":!0,"sogne.no":!0,"xn--sgne-gra.no":!0,"somna.no":!0,"xn--smna-gra.no":!0,"sondre-land.no":!0,"xn--sndre-land-0cb.no":!0,"sor-aurdal.no":!0,"xn--sr-aurdal-l8a.no":!0,"sor-fron.no":!0,"xn--sr-fron-q1a.no":!0,"sor-odal.no":!0,"xn--sr-odal-q1a.no":!0,"sor-varanger.no":!0,"xn--sr-varanger-ggb.no":!0,"matta-varjjat.no":!0,"xn--mtta-vrjjat-k7af.no":!0,"sorfold.no":!0,"xn--srfold-bya.no":!0,"sorreisa.no":!0,"xn--srreisa-q1a.no":!0,"sorum.no":!0,"xn--srum-gra.no":!0,"tana.no":!0,"deatnu.no":!0,"time.no":!0,"tingvoll.no":!0,"tinn.no":!0,"tjeldsund.no":!0,"dielddanuorri.no":!0,"tjome.no":!0,"xn--tjme-hra.no":!0,"tokke.no":!0,"tolga.no":!0,"torsken.no":!0,"tranoy.no":!0,"xn--trany-yua.no":!0,"tromso.no":!0,"xn--troms-zua.no":!0,"tromsa.no":!0,"romsa.no":!0,"trondheim.no":!0,"troandin.no":!0,"trysil.no":!0,"trana.no":!0,"xn--trna-woa.no":!0,"trogstad.no":!0,"xn--trgstad-r1a.no":!0,"tvedestrand.no":!0,"tydal.no":!0,"tynset.no":!0,"tysfjord.no":!0,"divtasvuodna.no":!0,"divttasvuotna.no":!0,"tysnes.no":!0,"tysvar.no":!0,"xn--tysvr-vra.no":!0,"tonsberg.no":!0,"xn--tnsberg-q1a.no":!0,"ullensaker.no":!0,"ullensvang.no":!0,"ulvik.no":!0,"utsira.no":!0,"vadso.no":!0,"xn--vads-jra.no":!0,"cahcesuolo.no":!0,"xn--hcesuolo-7ya35b.no":!0,"vaksdal.no":!0,"valle.no":!0,"vang.no":!0,"vanylven.no":!0,"vardo.no":!0,"xn--vard-jra.no":!0,"varggat.no":!0,"xn--vrggt-xqad.no":!0,"vefsn.no":!0,"vaapste.no":!0,"vega.no":!0,"vegarshei.no":!0,"xn--vegrshei-c0a.no":!0,"vennesla.no":!0,"verdal.no":!0,"verran.no":!0,"vestby.no":!0,"vestnes.no":!0,"vestre-slidre.no":!0,"vestre-toten.no":!0,"vestvagoy.no":!0,"xn--vestvgy-ixa6o.no":!0,"vevelstad.no":!0,"vik.no":!0,"vikna.no":!0,"vindafjord.no":!0,"volda.no":!0,"voss.no":!0,"varoy.no":!0,"xn--vry-yla5g.no":!0,"vagan.no":!0,"xn--vgan-qoa.no":!0,"voagat.no":!0,"vagsoy.no":!0,"xn--vgsy-qoa0j.no":!0,"vaga.no":!0,"xn--vg-yiab.no":!0,"valer.ostfold.no":!0,"xn--vler-qoa.xn--stfold-9xa.no":!0,"valer.hedmark.no":!0,"xn--vler-qoa.hedmark.no":!0,"*.np":!0,nr:!0,"biz.nr":!0,"info.nr":!0,"gov.nr":!0,"edu.nr":!0,"org.nr":!0,"net.nr":!0,"com.nr":!0,nu:!0,nz:!0,"ac.nz":!0,"co.nz":!0,"cri.nz":!0,"geek.nz":!0,"gen.nz":!0,"govt.nz":!0,"health.nz":!0,"iwi.nz":!0,"kiwi.nz":!0,"maori.nz":!0,"mil.nz":!0,"xn--mori-qsa.nz":!0,"net.nz":!0,"org.nz":!0,"parliament.nz":!0,"school.nz":!0,om:!0,"co.om":!0,"com.om":!0,"edu.om":!0,"gov.om":!0,"med.om":!0,"museum.om":!0,"net.om":!0,"org.om":!0,"pro.om":!0,org:!0,pa:!0,"ac.pa":!0,"gob.pa":!0,"com.pa":!0,"org.pa":!0,"sld.pa":!0,"edu.pa":!0,"net.pa":!0,"ing.pa":!0,"abo.pa":!0,"med.pa":!0,"nom.pa":!0,pe:!0,"edu.pe":!0,"gob.pe":!0,"nom.pe":!0,"mil.pe":!0,"org.pe":!0,"com.pe":!0,"net.pe":!0,pf:!0,"com.pf":!0,"org.pf":!0,"edu.pf":!0,"*.pg":!0,ph:!0,"com.ph":!0,"net.ph":!0,"org.ph":!0,"gov.ph":!0,"edu.ph":!0,"ngo.ph":!0,"mil.ph":!0,"i.ph":!0,pk:!0,"com.pk":!0,"net.pk":!0,"edu.pk":!0,"org.pk":!0,"fam.pk":!0,"biz.pk":!0,"web.pk":!0,"gov.pk":!0,"gob.pk":!0,"gok.pk":!0,"gon.pk":!0,"gop.pk":!0,"gos.pk":!0,"info.pk":!0,pl:!0,"com.pl":!0,"net.pl":!0,"org.pl":!0,"info.pl":!0,"waw.pl":!0,"gov.pl":!0,"aid.pl":!0,"agro.pl":!0,"atm.pl":!0,"auto.pl":!0,"biz.pl":!0,"edu.pl":!0,"gmina.pl":!0,"gsm.pl":!0,"mail.pl":!0,"miasta.pl":!0,"media.pl":!0,"mil.pl":!0,"nieruchomosci.pl":!0,"nom.pl":!0,"pc.pl":!0,"powiat.pl":!0,"priv.pl":!0,"realestate.pl":!0,"rel.pl":!0,"sex.pl":!0,"shop.pl":!0,"sklep.pl":!0,"sos.pl":!0,"szkola.pl":!0,"targi.pl":!0,"tm.pl":!0,"tourism.pl":!0,"travel.pl":!0,"turystyka.pl":!0,"uw.gov.pl":!0,"um.gov.pl":!0,"ug.gov.pl":!0,"upow.gov.pl":!0,"starostwo.gov.pl":!0,"so.gov.pl":!0,"sr.gov.pl":!0,"po.gov.pl":!0,"pa.gov.pl":!0,"augustow.pl":!0,"babia-gora.pl":!0,"bedzin.pl":!0,"beskidy.pl":!0,"bialowieza.pl":!0,"bialystok.pl":!0,"bielawa.pl":!0,"bieszczady.pl":!0,"boleslawiec.pl":!0,"bydgoszcz.pl":!0,"bytom.pl":!0,"cieszyn.pl":!0,"czeladz.pl":!0,"czest.pl":!0,"dlugoleka.pl":!0,"elblag.pl":!0,"elk.pl":!0,"glogow.pl":!0,"gniezno.pl":!0,"gorlice.pl":!0,"grajewo.pl":!0,"ilawa.pl":!0,"jaworzno.pl":!0,"jelenia-gora.pl":!0,"jgora.pl":!0,"kalisz.pl":!0,"kazimierz-dolny.pl":!0,"karpacz.pl":!0,"kartuzy.pl":!0,"kaszuby.pl":!0,"katowice.pl":!0,"kepno.pl":!0,"ketrzyn.pl":!0,"klodzko.pl":!0,"kobierzyce.pl":!0,"kolobrzeg.pl":!0,"konin.pl":!0,"konskowola.pl":!0,"kutno.pl":!0,"lapy.pl":!0,"lebork.pl":!0,"legnica.pl":!0,"lezajsk.pl":!0,"limanowa.pl":!0,"lomza.pl":!0,"lowicz.pl":!0,"lubin.pl":!0,"lukow.pl":!0,"malbork.pl":!0,"malopolska.pl":!0,"mazowsze.pl":!0,"mazury.pl":!0,"mielec.pl":!0,"mielno.pl":!0,"mragowo.pl":!0,"naklo.pl":!0,"nowaruda.pl":!0,"nysa.pl":!0,"olawa.pl":!0,"olecko.pl":!0,"olkusz.pl":!0,"olsztyn.pl":!0,"opoczno.pl":!0,"opole.pl":!0,"ostroda.pl":!0,"ostroleka.pl":!0,"ostrowiec.pl":!0,"ostrowwlkp.pl":!0,"pila.pl":!0,"pisz.pl":!0,"podhale.pl":!0,"podlasie.pl":!0,"polkowice.pl":!0,"pomorze.pl":!0,"pomorskie.pl":!0,"prochowice.pl":!0,"pruszkow.pl":!0,"przeworsk.pl":!0,"pulawy.pl":!0,"radom.pl":!0,"rawa-maz.pl":!0,"rybnik.pl":!0,"rzeszow.pl":!0,"sanok.pl":!0,"sejny.pl":!0,"slask.pl":!0,"slupsk.pl":!0,"sosnowiec.pl":!0,"stalowa-wola.pl":!0,"skoczow.pl":!0,"starachowice.pl":!0,"stargard.pl":!0,"suwalki.pl":!0,"swidnica.pl":!0,"swiebodzin.pl":!0,"swinoujscie.pl":!0,"szczecin.pl":!0,"szczytno.pl":!0,"tarnobrzeg.pl":!0,"tgory.pl":!0,"turek.pl":!0,"tychy.pl":!0,"ustka.pl":!0,"walbrzych.pl":!0,"warmia.pl":!0,"warszawa.pl":!0,"wegrow.pl":!0,"wielun.pl":!0,"wlocl.pl":!0,"wloclawek.pl":!0,"wodzislaw.pl":!0,"wolomin.pl":!0,"wroclaw.pl":!0,"zachpomor.pl":!0,"zagan.pl":!0,"zarow.pl":!0,"zgora.pl":!0,"zgorzelec.pl":!0,pm:!0,pn:!0,"gov.pn":!0,"co.pn":!0,"org.pn":!0,"edu.pn":!0,"net.pn":!0,post:!0,pr:!0,"com.pr":!0,"net.pr":!0,"org.pr":!0,"gov.pr":!0,"edu.pr":!0,"isla.pr":!0,"pro.pr":!0,"biz.pr":!0,"info.pr":!0,"name.pr":!0,"est.pr":!0,"prof.pr":!0,"ac.pr":!0,pro:!0,"aca.pro":!0,"bar.pro":!0,"cpa.pro":!0,"jur.pro":!0,"law.pro":!0,"med.pro":!0,"eng.pro":!0,ps:!0,"edu.ps":!0,"gov.ps":!0,"sec.ps":!0,"plo.ps":!0,"com.ps":!0,"org.ps":!0,"net.ps":!0,pt:!0,"net.pt":!0,"gov.pt":!0,"org.pt":!0,"edu.pt":!0,"int.pt":!0,"publ.pt":!0,"com.pt":!0,"nome.pt":!0,pw:!0,"co.pw":!0,"ne.pw":!0,"or.pw":!0,"ed.pw":!0,"go.pw":!0,"belau.pw":!0,py:!0,"com.py":!0,"coop.py":!0,"edu.py":!0,"gov.py":!0,"mil.py":!0,"net.py":!0,"org.py":!0,qa:!0,"com.qa":!0,"edu.qa":!0,"gov.qa":!0,"mil.qa":!0,"name.qa":!0,"net.qa":!0,"org.qa":!0,"sch.qa":!0,re:!0,"com.re":!0,"asso.re":!0,"nom.re":!0,ro:!0,"com.ro":!0,"org.ro":!0,"tm.ro":!0,"nt.ro":!0,"nom.ro":!0,"info.ro":!0,"rec.ro":!0,"arts.ro":!0,"firm.ro":!0,"store.ro":!0,"www.ro":!0,rs:!0,"co.rs":!0,"org.rs":!0,"edu.rs":!0,"ac.rs":!0,"gov.rs":!0,"in.rs":!0,ru:!0,"ac.ru":!0,"com.ru":!0,"edu.ru":!0,"int.ru":!0,"net.ru":!0,"org.ru":!0,"pp.ru":!0,"adygeya.ru":!0,"altai.ru":!0,"amur.ru":!0,"arkhangelsk.ru":!0,"astrakhan.ru":!0,"bashkiria.ru":!0,"belgorod.ru":!0,"bir.ru":!0,"bryansk.ru":!0,"buryatia.ru":!0,"cbg.ru":!0,"chel.ru":!0,"chelyabinsk.ru":!0,"chita.ru":!0,"chukotka.ru":!0,"chuvashia.ru":!0,"dagestan.ru":!0,"dudinka.ru":!0,"e-burg.ru":!0,"grozny.ru":!0,"irkutsk.ru":!0,"ivanovo.ru":!0,"izhevsk.ru":!0,"jar.ru":!0,"joshkar-ola.ru":!0,"kalmykia.ru":!0,"kaluga.ru":!0,"kamchatka.ru":!0,"karelia.ru":!0,"kazan.ru":!0,"kchr.ru":!0,"kemerovo.ru":!0,"khabarovsk.ru":!0,"khakassia.ru":!0,"khv.ru":!0,"kirov.ru":!0,"koenig.ru":!0,"komi.ru":!0,"kostroma.ru":!0,"krasnoyarsk.ru":!0,"kuban.ru":!0,"kurgan.ru":!0,"kursk.ru":!0,"lipetsk.ru":!0,"magadan.ru":!0,"mari.ru":!0,"mari-el.ru":!0,"marine.ru":!0,"mordovia.ru":!0,"msk.ru":!0,"murmansk.ru":!0,"nalchik.ru":!0,"nnov.ru":!0,"nov.ru":!0,"novosibirsk.ru":!0,"nsk.ru":!0,"omsk.ru":!0,"orenburg.ru":!0,"oryol.ru":!0,"palana.ru":!0,"penza.ru":!0,"perm.ru":!0,"ptz.ru":!0,"rnd.ru":!0,"ryazan.ru":!0,"sakhalin.ru":!0,"samara.ru":!0,"saratov.ru":!0,"simbirsk.ru":!0,"smolensk.ru":!0,"spb.ru":!0,"stavropol.ru":!0,"stv.ru":!0,"surgut.ru":!0,"tambov.ru":!0,"tatarstan.ru":!0,"tom.ru":!0,"tomsk.ru":!0,"tsaritsyn.ru":!0,"tsk.ru":!0,"tula.ru":!0,"tuva.ru":!0,"tver.ru":!0,"tyumen.ru":!0,"udm.ru":!0,"udmurtia.ru":!0,"ulan-ude.ru":!0,"vladikavkaz.ru":!0,"vladimir.ru":!0,"vladivostok.ru":!0,"volgograd.ru":!0,"vologda.ru":!0,"voronezh.ru":!0,"vrn.ru":!0,"vyatka.ru":!0,"yakutia.ru":!0,"yamal.ru":!0,"yaroslavl.ru":!0,"yekaterinburg.ru":!0,"yuzhno-sakhalinsk.ru":!0,"amursk.ru":!0,"baikal.ru":!0,"cmw.ru":!0,"fareast.ru":!0,"jamal.ru":!0,"kms.ru":!0,"k-uralsk.ru":!0,"kustanai.ru":!0,"kuzbass.ru":!0,"magnitka.ru":!0,"mytis.ru":!0,"nakhodka.ru":!0,"nkz.ru":!0,"norilsk.ru":!0,"oskol.ru":!0,"pyatigorsk.ru":!0,"rubtsovsk.ru":!0,"snz.ru":!0,"syzran.ru":!0,"vdonsk.ru":!0,"zgrad.ru":!0,"gov.ru":!0,"mil.ru":!0,"test.ru":!0,rw:!0,"gov.rw":!0,"net.rw":!0,"edu.rw":!0,"ac.rw":!0,"com.rw":!0,"co.rw":!0,"int.rw":!0,"mil.rw":!0,"gouv.rw":!0,sa:!0,"com.sa":!0,"net.sa":!0,"org.sa":!0,"gov.sa":!0,"med.sa":!0,"pub.sa":!0,"edu.sa":!0,"sch.sa":!0,sb:!0,"com.sb":!0,"edu.sb":!0,"gov.sb":!0,"net.sb":!0,"org.sb":!0,sc:!0,"com.sc":!0,"gov.sc":!0,"net.sc":!0,"org.sc":!0,"edu.sc":!0,sd:!0,"com.sd":!0,"net.sd":!0,"org.sd":!0,"edu.sd":!0,"med.sd":!0,"tv.sd":!0,"gov.sd":!0,"info.sd":!0,se:!0,"a.se":!0,"ac.se":!0,"b.se":!0,"bd.se":!0,"brand.se":!0,"c.se":!0,"d.se":!0,"e.se":!0,"f.se":!0,"fh.se":!0,"fhsk.se":!0,"fhv.se":!0,"g.se":!0,"h.se":!0,"i.se":!0,"k.se":!0,"komforb.se":!0,"kommunalforbund.se":!0,"komvux.se":!0,"l.se":!0,"lanbib.se":!0,"m.se":!0,"n.se":!0,"naturbruksgymn.se":!0,"o.se":!0,"org.se":!0,"p.se":!0,"parti.se":!0,"pp.se":!0,"press.se":!0,"r.se":!0,"s.se":!0,"t.se":!0,"tm.se":!0,"u.se":!0,"w.se":!0,"x.se":!0,"y.se":!0,"z.se":!0,sg:!0,"com.sg":!0,"net.sg":!0,"org.sg":!0,"gov.sg":!0,"edu.sg":!0,"per.sg":!0,sh:!0,"com.sh":!0,"net.sh":!0,"gov.sh":!0,"org.sh":!0,"mil.sh":!0,si:!0,sj:!0,sk:!0,sl:!0,"com.sl":!0,"net.sl":!0,"edu.sl":!0,"gov.sl":!0,"org.sl":!0,sm:!0,sn:!0,"art.sn":!0,"com.sn":!0,"edu.sn":!0,"gouv.sn":!0,"org.sn":!0,"perso.sn":!0,"univ.sn":!0,so:!0,"com.so":!0,"net.so":!0,"org.so":!0,sr:!0,st:!0,"co.st":!0,"com.st":!0,"consulado.st":!0,"edu.st":!0,"embaixada.st":!0,"gov.st":!0,"mil.st":!0,"net.st":!0,"org.st":!0,"principe.st":!0,"saotome.st":!0,"store.st":!0,su:!0,"adygeya.su":!0,"arkhangelsk.su":!0,"balashov.su":!0,"bashkiria.su":!0,"bryansk.su":!0,"dagestan.su":!0,"grozny.su":!0,"ivanovo.su":!0,"kalmykia.su":!0,"kaluga.su":!0,"karelia.su":!0,"khakassia.su":!0,"krasnodar.su":!0,"kurgan.su":!0,"lenug.su":!0,"mordovia.su":!0,"msk.su":!0,"murmansk.su":!0,"nalchik.su":!0,"nov.su":!0,"obninsk.su":!0,"penza.su":!0,"pokrovsk.su":!0,"sochi.su":!0,"spb.su":!0,"togliatti.su":!0,"troitsk.su":!0,
    "tula.su":!0,"tuva.su":!0,"vladikavkaz.su":!0,"vladimir.su":!0,"vologda.su":!0,sv:!0,"com.sv":!0,"edu.sv":!0,"gob.sv":!0,"org.sv":!0,"red.sv":!0,sx:!0,"gov.sx":!0,sy:!0,"edu.sy":!0,"gov.sy":!0,"net.sy":!0,"mil.sy":!0,"com.sy":!0,"org.sy":!0,sz:!0,"co.sz":!0,"ac.sz":!0,"org.sz":!0,tc:!0,td:!0,tel:!0,tf:!0,tg:!0,th:!0,"ac.th":!0,"co.th":!0,"go.th":!0,"in.th":!0,"mi.th":!0,"net.th":!0,"or.th":!0,tj:!0,"ac.tj":!0,"biz.tj":!0,"co.tj":!0,"com.tj":!0,"edu.tj":!0,"go.tj":!0,"gov.tj":!0,"int.tj":!0,"mil.tj":!0,"name.tj":!0,"net.tj":!0,"nic.tj":!0,"org.tj":!0,"test.tj":!0,"web.tj":!0,tk:!0,tl:!0,"gov.tl":!0,tm:!0,"com.tm":!0,"co.tm":!0,"org.tm":!0,"net.tm":!0,"nom.tm":!0,"gov.tm":!0,"mil.tm":!0,"edu.tm":!0,tn:!0,"com.tn":!0,"ens.tn":!0,"fin.tn":!0,"gov.tn":!0,"ind.tn":!0,"intl.tn":!0,"nat.tn":!0,"net.tn":!0,"org.tn":!0,"info.tn":!0,"perso.tn":!0,"tourism.tn":!0,"edunet.tn":!0,"rnrt.tn":!0,"rns.tn":!0,"rnu.tn":!0,"mincom.tn":!0,"agrinet.tn":!0,"defense.tn":!0,"turen.tn":!0,to:!0,"com.to":!0,"gov.to":!0,"net.to":!0,"org.to":!0,"edu.to":!0,"mil.to":!0,tp:!0,tr:!0,"com.tr":!0,"info.tr":!0,"biz.tr":!0,"net.tr":!0,"org.tr":!0,"web.tr":!0,"gen.tr":!0,"tv.tr":!0,"av.tr":!0,"dr.tr":!0,"bbs.tr":!0,"name.tr":!0,"tel.tr":!0,"gov.tr":!0,"bel.tr":!0,"pol.tr":!0,"mil.tr":!0,"k12.tr":!0,"edu.tr":!0,"kep.tr":!0,"nc.tr":!0,"gov.nc.tr":!0,travel:!0,tt:!0,"co.tt":!0,"com.tt":!0,"org.tt":!0,"net.tt":!0,"biz.tt":!0,"info.tt":!0,"pro.tt":!0,"int.tt":!0,"coop.tt":!0,"jobs.tt":!0,"mobi.tt":!0,"travel.tt":!0,"museum.tt":!0,"aero.tt":!0,"name.tt":!0,"gov.tt":!0,"edu.tt":!0,tv:!0,tw:!0,"edu.tw":!0,"gov.tw":!0,"mil.tw":!0,"com.tw":!0,"net.tw":!0,"org.tw":!0,"idv.tw":!0,"game.tw":!0,"ebiz.tw":!0,"club.tw":!0,"xn--zf0ao64a.tw":!0,"xn--uc0atv.tw":!0,"xn--czrw28b.tw":!0,tz:!0,"ac.tz":!0,"co.tz":!0,"go.tz":!0,"hotel.tz":!0,"info.tz":!0,"me.tz":!0,"mil.tz":!0,"mobi.tz":!0,"ne.tz":!0,"or.tz":!0,"sc.tz":!0,"tv.tz":!0,ua:!0,"com.ua":!0,"edu.ua":!0,"gov.ua":!0,"in.ua":!0,"net.ua":!0,"org.ua":!0,"cherkassy.ua":!0,"cherkasy.ua":!0,"chernigov.ua":!0,"chernihiv.ua":!0,"chernivtsi.ua":!0,"chernovtsy.ua":!0,"ck.ua":!0,"cn.ua":!0,"cr.ua":!0,"crimea.ua":!0,"cv.ua":!0,"dn.ua":!0,"dnepropetrovsk.ua":!0,"dnipropetrovsk.ua":!0,"dominic.ua":!0,"donetsk.ua":!0,"dp.ua":!0,"if.ua":!0,"ivano-frankivsk.ua":!0,"kh.ua":!0,"kharkiv.ua":!0,"kharkov.ua":!0,"kherson.ua":!0,"khmelnitskiy.ua":!0,"khmelnytskyi.ua":!0,"kiev.ua":!0,"kirovograd.ua":!0,"km.ua":!0,"kr.ua":!0,"krym.ua":!0,"ks.ua":!0,"kv.ua":!0,"kyiv.ua":!0,"lg.ua":!0,"lt.ua":!0,"lugansk.ua":!0,"lutsk.ua":!0,"lv.ua":!0,"lviv.ua":!0,"mk.ua":!0,"mykolaiv.ua":!0,"nikolaev.ua":!0,"od.ua":!0,"odesa.ua":!0,"odessa.ua":!0,"pl.ua":!0,"poltava.ua":!0,"rivne.ua":!0,"rovno.ua":!0,"rv.ua":!0,"sb.ua":!0,"sebastopol.ua":!0,"sevastopol.ua":!0,"sm.ua":!0,"sumy.ua":!0,"te.ua":!0,"ternopil.ua":!0,"uz.ua":!0,"uzhgorod.ua":!0,"vinnica.ua":!0,"vinnytsia.ua":!0,"vn.ua":!0,"volyn.ua":!0,"yalta.ua":!0,"zaporizhzhe.ua":!0,"zaporizhzhia.ua":!0,"zhitomir.ua":!0,"zhytomyr.ua":!0,"zp.ua":!0,"zt.ua":!0,"co.ua":!0,"pp.ua":!0,ug:!0,"co.ug":!0,"or.ug":!0,"ac.ug":!0,"sc.ug":!0,"go.ug":!0,"ne.ug":!0,"com.ug":!0,"org.ug":!0,uk:!0,"ac.uk":!0,"co.uk":!0,"gov.uk":!0,"ltd.uk":!0,"me.uk":!0,"net.uk":!0,"nhs.uk":!0,"org.uk":!0,"plc.uk":!0,"police.uk":!0,"*.sch.uk":!0,us:!0,"dni.us":!0,"fed.us":!0,"isa.us":!0,"kids.us":!0,"nsn.us":!0,"ak.us":!0,"al.us":!0,"ar.us":!0,"as.us":!0,"az.us":!0,"ca.us":!0,"co.us":!0,"ct.us":!0,"dc.us":!0,"de.us":!0,"fl.us":!0,"ga.us":!0,"gu.us":!0,"hi.us":!0,"ia.us":!0,"id.us":!0,"il.us":!0,"in.us":!0,"ks.us":!0,"ky.us":!0,"la.us":!0,"ma.us":!0,"md.us":!0,"me.us":!0,"mi.us":!0,"mn.us":!0,"mo.us":!0,"ms.us":!0,"mt.us":!0,"nc.us":!0,"nd.us":!0,"ne.us":!0,"nh.us":!0,"nj.us":!0,"nm.us":!0,"nv.us":!0,"ny.us":!0,"oh.us":!0,"ok.us":!0,"or.us":!0,"pa.us":!0,"pr.us":!0,"ri.us":!0,"sc.us":!0,"sd.us":!0,"tn.us":!0,"tx.us":!0,"ut.us":!0,"vi.us":!0,"vt.us":!0,"va.us":!0,"wa.us":!0,"wi.us":!0,"wv.us":!0,"wy.us":!0,"k12.ak.us":!0,"k12.al.us":!0,"k12.ar.us":!0,"k12.as.us":!0,"k12.az.us":!0,"k12.ca.us":!0,"k12.co.us":!0,"k12.ct.us":!0,"k12.dc.us":!0,"k12.de.us":!0,"k12.fl.us":!0,"k12.ga.us":!0,"k12.gu.us":!0,"k12.ia.us":!0,"k12.id.us":!0,"k12.il.us":!0,"k12.in.us":!0,"k12.ks.us":!0,"k12.ky.us":!0,"k12.la.us":!0,"k12.ma.us":!0,"k12.md.us":!0,"k12.me.us":!0,"k12.mi.us":!0,"k12.mn.us":!0,"k12.mo.us":!0,"k12.ms.us":!0,"k12.mt.us":!0,"k12.nc.us":!0,"k12.ne.us":!0,"k12.nh.us":!0,"k12.nj.us":!0,"k12.nm.us":!0,"k12.nv.us":!0,"k12.ny.us":!0,"k12.oh.us":!0,"k12.ok.us":!0,"k12.or.us":!0,"k12.pa.us":!0,"k12.pr.us":!0,"k12.ri.us":!0,"k12.sc.us":!0,"k12.tn.us":!0,"k12.tx.us":!0,"k12.ut.us":!0,"k12.vi.us":!0,"k12.vt.us":!0,"k12.va.us":!0,"k12.wa.us":!0,"k12.wi.us":!0,"k12.wy.us":!0,"cc.ak.us":!0,"cc.al.us":!0,"cc.ar.us":!0,"cc.as.us":!0,"cc.az.us":!0,"cc.ca.us":!0,"cc.co.us":!0,"cc.ct.us":!0,"cc.dc.us":!0,"cc.de.us":!0,"cc.fl.us":!0,"cc.ga.us":!0,"cc.gu.us":!0,"cc.hi.us":!0,"cc.ia.us":!0,"cc.id.us":!0,"cc.il.us":!0,"cc.in.us":!0,"cc.ks.us":!0,"cc.ky.us":!0,"cc.la.us":!0,"cc.ma.us":!0,"cc.md.us":!0,"cc.me.us":!0,"cc.mi.us":!0,"cc.mn.us":!0,"cc.mo.us":!0,"cc.ms.us":!0,"cc.mt.us":!0,"cc.nc.us":!0,"cc.nd.us":!0,"cc.ne.us":!0,"cc.nh.us":!0,"cc.nj.us":!0,"cc.nm.us":!0,"cc.nv.us":!0,"cc.ny.us":!0,"cc.oh.us":!0,"cc.ok.us":!0,"cc.or.us":!0,"cc.pa.us":!0,"cc.pr.us":!0,"cc.ri.us":!0,"cc.sc.us":!0,"cc.sd.us":!0,"cc.tn.us":!0,"cc.tx.us":!0,"cc.ut.us":!0,"cc.vi.us":!0,"cc.vt.us":!0,"cc.va.us":!0,"cc.wa.us":!0,"cc.wi.us":!0,"cc.wv.us":!0,"cc.wy.us":!0,"lib.ak.us":!0,"lib.al.us":!0,"lib.ar.us":!0,"lib.as.us":!0,"lib.az.us":!0,"lib.ca.us":!0,"lib.co.us":!0,"lib.ct.us":!0,"lib.dc.us":!0,"lib.de.us":!0,"lib.fl.us":!0,"lib.ga.us":!0,"lib.gu.us":!0,"lib.hi.us":!0,"lib.ia.us":!0,"lib.id.us":!0,"lib.il.us":!0,"lib.in.us":!0,"lib.ks.us":!0,"lib.ky.us":!0,"lib.la.us":!0,"lib.ma.us":!0,"lib.md.us":!0,"lib.me.us":!0,"lib.mi.us":!0,"lib.mn.us":!0,"lib.mo.us":!0,"lib.ms.us":!0,"lib.mt.us":!0,"lib.nc.us":!0,"lib.nd.us":!0,"lib.ne.us":!0,"lib.nh.us":!0,"lib.nj.us":!0,"lib.nm.us":!0,"lib.nv.us":!0,"lib.ny.us":!0,"lib.oh.us":!0,"lib.ok.us":!0,"lib.or.us":!0,"lib.pa.us":!0,"lib.pr.us":!0,"lib.ri.us":!0,"lib.sc.us":!0,"lib.sd.us":!0,"lib.tn.us":!0,"lib.tx.us":!0,"lib.ut.us":!0,"lib.vi.us":!0,"lib.vt.us":!0,"lib.va.us":!0,"lib.wa.us":!0,"lib.wi.us":!0,"lib.wy.us":!0,"pvt.k12.ma.us":!0,"chtr.k12.ma.us":!0,"paroch.k12.ma.us":!0,uy:!0,"com.uy":!0,"edu.uy":!0,"gub.uy":!0,"mil.uy":!0,"net.uy":!0,"org.uy":!0,uz:!0,"co.uz":!0,"com.uz":!0,"net.uz":!0,"org.uz":!0,va:!0,vc:!0,"com.vc":!0,"net.vc":!0,"org.vc":!0,"gov.vc":!0,"mil.vc":!0,"edu.vc":!0,ve:!0,"arts.ve":!0,"co.ve":!0,"com.ve":!0,"e12.ve":!0,"edu.ve":!0,"firm.ve":!0,"gob.ve":!0,"gov.ve":!0,"info.ve":!0,"int.ve":!0,"mil.ve":!0,"net.ve":!0,"org.ve":!0,"rec.ve":!0,"store.ve":!0,"tec.ve":!0,"web.ve":!0,vg:!0,vi:!0,"co.vi":!0,"com.vi":!0,"k12.vi":!0,"net.vi":!0,"org.vi":!0,vn:!0,"com.vn":!0,"net.vn":!0,"org.vn":!0,"edu.vn":!0,"gov.vn":!0,"int.vn":!0,"ac.vn":!0,"biz.vn":!0,"info.vn":!0,"name.vn":!0,"pro.vn":!0,"health.vn":!0,vu:!0,"com.vu":!0,"edu.vu":!0,"net.vu":!0,"org.vu":!0,wf:!0,ws:!0,"com.ws":!0,"net.ws":!0,"org.ws":!0,"gov.ws":!0,"edu.ws":!0,yt:!0,"xn--mgbaam7a8h":!0,"xn--54b7fta0cc":!0,"xn--fiqs8s":!0,"xn--fiqz9s":!0,"xn--lgbbat1ad8j":!0,"xn--wgbh1c":!0,"xn--node":!0,"xn--j6w193g":!0,"xn--h2brj9c":!0,"xn--mgbbh1a71e":!0,"xn--fpcrj9c3d":!0,"xn--gecrj9c":!0,"xn--s9brj9c":!0,"xn--45brj9c":!0,"xn--xkc2dl3a5ee0h":!0,"xn--mgba3a4f16a":!0,"xn--mgba3a4fra":!0,"xn--mgbayh7gpa":!0,"xn--3e0b707e":!0,"xn--80ao21a":!0,"xn--fzc2c9e2c":!0,"xn--xkc2al3hye2a":!0,"xn--mgbc0a9azcg":!0,"xn--l1acc":!0,"xn--mgbx4cd0ab":!0,"xn--mgb9awbf":!0,"xn--ygbi2ammx":!0,"xn--90a3ac":!0,"xn--o1ac.xn--90a3ac":!0,"xn--c1avg.xn--90a3ac":!0,"xn--90azh.xn--90a3ac":!0,"xn--d1at.xn--90a3ac":!0,"xn--o1ach.xn--90a3ac":!0,"xn--80au.xn--90a3ac":!0,"xn--p1ai":!0,"xn--wgbl6a":!0,"xn--mgberp4a5d4ar":!0,"xn--mgberp4a5d4a87g":!0,"xn--mgbqly7c0a67fbc":!0,"xn--mgbqly7cvafr":!0,"xn--ogbpf8fl":!0,"xn--mgbtf8fl":!0,"xn--yfro4i67o":!0,"xn--clchc0ea0b2g2a9gcd":!0,"xn--o3cw4h":!0,"xn--pgbs0dh":!0,"xn--kpry57d":!0,"xn--kprw13d":!0,"xn--nnx388a":!0,"xn--j1amh":!0,"xn--mgb2ddes":!0,xxx:!0,"*.ye":!0,"*.za":!0,"*.zm":!0,"*.zw":!0,aaa:!0,abb:!0,abbott:!0,abogado:!0,academy:!0,accenture:!0,accountant:!0,accountants:!0,aco:!0,active:!0,actor:!0,ads:!0,adult:!0,aeg:!0,afl:!0,africa:!0,africamagic:!0,agency:!0,aig:!0,airforce:!0,airtel:!0,alibaba:!0,alipay:!0,allfinanz:!0,alsace:!0,amsterdam:!0,analytics:!0,android:!0,anquan:!0,apartments:!0,aquarelle:!0,aramco:!0,archi:!0,army:!0,arte:!0,associates:!0,attorney:!0,auction:!0,audio:!0,author:!0,auto:!0,autos:!0,avianca:!0,axa:!0,azure:!0,baidu:!0,band:!0,bank:!0,bar:!0,barcelona:!0,barclaycard:!0,barclays:!0,bargains:!0,bauhaus:!0,bayern:!0,bbc:!0,bbva:!0,bcg:!0,bcn:!0,beer:!0,bentley:!0,berlin:!0,best:!0,bharti:!0,bible:!0,bid:!0,bike:!0,bing:!0,bingo:!0,bio:!0,black:!0,blackfriday:!0,bloomberg:!0,blue:!0,bms:!0,bmw:!0,bnl:!0,bnpparibas:!0,boats:!0,bom:!0,bond:!0,boo:!0,boots:!0,bot:!0,boutique:!0,bradesco:!0,bridgestone:!0,broadway:!0,broker:!0,brother:!0,brussels:!0,budapest:!0,build:!0,builders:!0,business:!0,buy:!0,buzz:!0,bzh:!0,cab:!0,cafe:!0,cal:!0,call:!0,camera:!0,camp:!0,cancerresearch:!0,canon:!0,capetown:!0,capital:!0,car:!0,caravan:!0,cards:!0,care:!0,career:!0,careers:!0,cars:!0,cartier:!0,casa:!0,cash:!0,casino:!0,catering:!0,cba:!0,cbn:!0,center:!0,ceo:!0,cern:!0,cfa:!0,cfd:!0,channel:!0,chat:!0,cheap:!0,chloe:!0,christmas:!0,chrome:!0,church:!0,cipriani:!0,circle:!0,cisco:!0,citic:!0,city:!0,cityeats:!0,claims:!0,cleaning:!0,click:!0,clinic:!0,clothing:!0,club:!0,coach:!0,codes:!0,coffee:!0,college:!0,cologne:!0,commbank:!0,community:!0,company:!0,computer:!0,comsec:!0,condos:!0,construction:!0,consulting:!0,contact:!0,contractors:!0,cooking:!0,cool:!0,corsica:!0,country:!0,coupon:!0,coupons:!0,courses:!0,credit:!0,creditcard:!0,creditunion:!0,cricket:!0,crown:!0,crs:!0,cruises:!0,csc:!0,cuisinella:!0,cymru:!0,cyou:!0,dabur:!0,dad:!0,dance:!0,date:!0,dating:!0,datsun:!0,day:!0,dclk:!0,dealer:!0,deals:!0,degree:!0,delivery:!0,dell:!0,delta:!0,democrat:!0,dental:!0,dentist:!0,desi:!0,design:!0,dev:!0,diamonds:!0,diet:!0,digital:!0,direct:!0,directory:!0,discount:!0,dnp:!0,docs:!0,dog:!0,doha:!0,domains:!0,doosan:!0,download:!0,drive:!0,dstv:!0,dubai:!0,durban:!0,dvag:!0,earth:!0,eat:!0,edeka:!0,education:!0,email:!0,emerck:!0,energy:!0,engineer:!0,engineering:!0,enterprises:!0,epson:!0,equipment:!0,erni:!0,esq:!0,estate:!0,eurovision:!0,eus:!0,events:!0,everbank:!0,exchange:!0,expert:!0,exposed:!0,express:!0,fage:!0,fail:!0,fairwinds:!0,faith:!0,family:!0,fan:!0,fans:!0,farm:!0,fashion:!0,fast:!0,feedback:!0,ferrero:!0,film:!0,"final":!0,finance:!0,financial:!0,firestone:!0,firmdale:!0,fish:!0,fishing:!0,fit:!0,fitness:!0,flickr:!0,flights:!0,florist:!0,flowers:!0,flsmidth:!0,fly:!0,foo:!0,football:!0,ford:!0,forex:!0,forsale:!0,forum:!0,foundation:!0,frl:!0,frogans:!0,frontier:!0,fund:!0,furniture:!0,futbol:!0,fyi:!0,gal:!0,gallery:!0,gallup:!0,garden:!0,gbiz:!0,gdn:!0,gea:!0,gent:!0,genting:!0,ggee:!0,gift:!0,gifts:!0,gives:!0,giving:!0,glass:!0,gle:!0,global:!0,globo:!0,gmail:!0,gmo:!0,gmx:!0,gold:!0,goldpoint:!0,golf:!0,goo:!0,goog:!0,google:!0,gop:!0,got:!0,gotv:!0,graphics:!0,gratis:!0,green:!0,gripe:!0,group:!0,gucci:!0,guge:!0,guide:!0,guitars:!0,guru:!0,hamburg:!0,hangout:!0,haus:!0,hdfcbank:!0,health:!0,healthcare:!0,help:!0,helsinki:!0,here:!0,hermes:!0,hiphop:!0,hitachi:!0,hiv:!0,hockey:!0,holdings:!0,holiday:!0,homedepot:!0,homes:!0,honda:!0,horse:!0,host:!0,hosting:!0,hoteles:!0,hotmail:!0,house:!0,how:!0,hsbc:!0,htc:!0,ibm:!0,icbc:!0,ice:!0,icu:!0,ifm:!0,iinet:!0,immo:!0,immobilien:!0,industries:!0,infiniti:!0,ing:!0,ink:!0,institute:!0,insurance:!0,insure:!0,international:!0,investments:!0,ipiranga:!0,irish:!0,iselect:!0,ist:!0,istanbul:!0,itau:!0,iwc:!0,jaguar:!0,java:!0,jcb:!0,jetzt:!0,jewelry:!0,jio:!0,jlc:!0,jll:!0,jmp:!0,joburg:!0,jot:!0,joy:!0,jprs:!0,juegos:!0,kaufen:!0,kddi:!0,kfh:!0,kim:!0,kinder:!0,kitchen:!0,kiwi:!0,koeln:!0,komatsu:!0,kpn:!0,krd:!0,kred:!0,kyknet:!0,kyoto:!0,lacaixa:!0,lancaster:!0,land:!0,landrover:!0,lasalle:!0,lat:!0,latrobe:!0,law:!0,lawyer:!0,lds:!0,lease:!0,leclerc:!0,legal:!0,lgbt:!0,liaison:!0,lidl:!0,life:!0,lifeinsurance:!0,lifestyle:!0,lighting:!0,like:!0,limited:!0,limo:!0,lincoln:!0,linde:!0,link:!0,live:!0,lixil:!0,loan:!0,loans:!0,lol:!0,london:!0,lotte:!0,lotto:!0,love:!0,ltd:!0,ltda:!0,lupin:!0,luxe:!0,luxury:!0,madrid:!0,maif:!0,maison:!0,makeup:!0,man:!0,management:!0,mango:!0,market:!0,marketing:!0,markets:!0,marriott:!0,mba:!0,media:!0,meet:!0,melbourne:!0,meme:!0,memorial:!0,men:!0,menu:!0,meo:!0,miami:!0,microsoft:!0,mini:!0,mma:!0,mnet:!0,mobily:!0,moda:!0,moe:!0,moi:!0,monash:!0,money:!0,montblanc:!0,mormon:!0,mortgage:!0,moscow:!0,motorcycles:!0,mov:!0,movie:!0,movistar:!0,mtn:!0,mtpc:!0,mtr:!0,multichoice:!0,mutual:!0,mzansimagic:!0,nadex:!0,nagoya:!0,naspers:!0,natura:!0,navy:!0,nec:!0,netbank:!0,network:!0,neustar:!0,"new":!0,news:!0,nexus:!0,ngo:!0,nhk:!0,nico:!0,ninja:!0,nissan:!0,nokia:!0,norton:!0,nowruz:!0,nra:!0,nrw:!0,ntt:!0,nyc:!0,obi:!0,office:!0,okinawa:!0,omega:!0,one:!0,ong:!0,onl:!0,online:!0,ooo:!0,oracle:!0,orange:!0,organic:!0,orientexpress:!0,osaka:!0,otsuka:!0,ovh:!0,page:!0,pamperedchef:!0,panerai:!0,paris:!0,pars:!0,partners:!0,parts:!0,party:!0,passagens:!0,payu:!0,pharmacy:!0,philips:!0,photo:!0,photography:!0,photos:!0,physio:!0,piaget:!0,pics:!0,pictet:!0,pictures:!0,pid:!0,pin:!0,pink:!0,pizza:!0,place:!0,play:!0,plumbing:!0,plus:!0,pohl:!0,poker:!0,porn:!0,praxi:!0,press:!0,prod:!0,productions:!0,prof:!0,promo:!0,properties:!0,property:!0,pub:!0,qpon:!0,quebec:!0,quest:!0,racing:!0,read:!0,realtor:!0,realty:!0,recipes:!0,red:!0,redstone:!0,redumbrella:!0,rehab:!0,reise:!0,reisen:!0,reit:!0,reliance:!0,ren:!0,rent:!0,rentals:!0,repair:!0,report:!0,republican:!0,rest:!0,restaurant:!0,review:!0,reviews:!0,rich:!0,ricoh:!0,ril:!0,rio:!0,rip:!0,rocher:!0,rocks:!0,rodeo:!0,room:!0,rsvp:!0,ruhr:!0,run:!0,rwe:!0,ryukyu:!0,saarland:!0,safe:!0,safety:!0,sakura:!0,sale:!0,salon:!0,samsung:!0,sandvik:!0,sandvikcoromant:!0,sanofi:!0,sap:!0,sapo:!0,sarl:!0,sas:!0,saxo:!0,sbi:!0,sbs:!0,sca:!0,scb:!0,schmidt:!0,scholarships:!0,school:!0,schule:!0,schwarz:!0,science:!0,scor:!0,scot:!0,seat:!0,seek:!0,sener:!0,services:!0,sew:!0,sex:!0,sexy:!0,sharp:!0,shia:!0,shiksha:!0,shoes:!0,shouji:!0,show:!0,shriram:!0,sina:!0,singles:!0,site:!0,skin:!0,sky:!0,skype:!0,smile:!0,sncf:!0,soccer:!0,social:!0,software:!0,sohu:!0,solar:!0,solutions:!0,song:!0,sony:!0,soy:!0,space:!0,spiegel:!0,spot:!0,spreadbetting:!0,stada:!0,star:!0,starhub:!0,statebank:!0,statoil:!0,stc:!0,stcgroup:!0,stockholm:!0,storage:!0,studio:!0,study:!0,style:!0,sucks:!0,supersport:!0,supplies:!0,supply:!0,support:!0,surf:!0,surgery:!0,suzuki:!0,swatch:!0,swiss:!0,sydney:!0,symantec:!0,systems:!0,tab:!0,taipei:!0,taobao:!0,tatamotors:!0,tatar:!0,tattoo:!0,tax:!0,taxi:!0,tci:!0,team:!0,tech:!0,technology:!0,telecity:!0,telefonica:!0,temasek:!0,tennis:!0,thd:!0,theater:!0,tickets:!0,tienda:!0,tiffany:!0,tips:!0,tires:!0,tirol:!0,tmall:!0,today:!0,tokyo:!0,tools:!0,top:!0,toray:!0,toshiba:!0,tours:!0,town:!0,toys:!0,trade:!0,trading:!0,training:!0,travelers:!0,travelersinsurance:!0,trust:!0,trv:!0,tui:!0,tunes:!0,tushu:!0,tvs:!0,ubs:!0,university:!0,uno:!0,uol:!0,vacations:!0,vana:!0,vegas:!0,ventures:!0,versicherung:!0,vet:!0,viajes:!0,video:!0,viking:!0,villas:!0,vip:!0,virgin:!0,vision:!0,vista:!0,vistaprint:!0,viva:!0,vlaanderen:!0,vodka:!0,vote:!0,voting:!0,voto:!0,voyage:!0,vuelos:!0,wales:!0,walter:!0,wang:!0,wanggou:!0,watch:!0,watches:!0,weather:!0,weatherchannel:!0,webcam:!0,website:!0,wed:!0,wedding:!0,weibo:!0,weir:!0,whoswho:!0,wien:!0,wiki:!0,williamhill:!0,win:!0,windows:!0,wme:!0,work:!0,works:!0,world:!0,wtc:!0,wtf:!0,xbox:!0,xerox:!0,xihuan:!0,xin:!0,"xn--11b4c3d":!0,"xn--1ck2e1b":!0,"xn--1qqw23a":!0,"xn--30rr7y":!0,"xn--3bst00m":!0,"xn--3ds443g":!0,"xn--3pxu8k":!0,"xn--42c2d9a":!0,"xn--45q11c":!0,"xn--4gbrim":!0,"xn--55qw42g":!0,"xn--55qx5d":!0,"xn--5tzm5g":!0,"xn--6frz82g":!0,"xn--6qq986b3xl":!0,"xn--80adxhks":!0,"xn--80asehdb":!0,"xn--80aswg":!0,"xn--8y0a063a":!0,"xn--9dbq2a":!0,"xn--9et52u":!0,"xn--9krt00a":!0,"xn--b4w605ferd":!0,"xn--bck1b9a5dre4c":!0,"xn--c1avg":!0,"xn--c2br7g":!0,"xn--cck2b3b":!0,"xn--cg4bki":!0,"xn--czr694b":!0,"xn--czrs0t":!0,"xn--czru2d":!0,"xn--d1acj3b":!0,"xn--eckvdtc9d":!0,"xn--efvy88h":!0,"xn--estv75g":!0,"xn--fhbei":!0,"xn--fiq228c5hs":!0,"xn--fiq64b":!0,"xn--fjq720a":!0,"xn--flw351e":!0,"xn--g2xx48c":!0,"xn--gckr3f0f":!0,"xn--hxt814e":!0,"xn--i1b6b1a6a2e":!0,"xn--imr513n":!0,"xn--io0a7i":!0,"xn--j1aef":!0,"xn--jlq61u9w7b":!0,"xn--jvr189m":!0,"xn--kcrx77d1x4a":!0,"xn--kpu716f":!0,"xn--kput3i":!0,"xn--mgba3a3ejt":!0,"xn--mgbab2bd":!0,"xn--mgbb9fbpob":!0,"xn--mgbt3dhd":!0,"xn--mk1bu44c":!0,"xn--mxtq1m":!0,"xn--ngbc5azd":!0,"xn--ngbe9e0a":!0,"xn--nqv7f":!0,"xn--nqv7fs00ema":!0,"xn--nyqy26a":!0,"xn--p1acf":!0,"xn--pbt977c":!0,"xn--pssy2u":!0,"xn--q9jyb4c":!0,"xn--qcka1pmc":!0,"xn--rhqv96g":!0,"xn--rovu88b":!0,"xn--ses554g":!0,"xn--t60b56a":!0,"xn--tckwe":!0,"xn--unup4y":!0,"xn--vermgensberater-ctb":!0,"xn--vermgensberatung-pwb":!0,"xn--vhquv":!0,"xn--vuq861b":!0,"xn--xhq521b":!0,"xn--zfr164b":!0,xyz:!0,yachts:!0,yahoo:!0,yamaxun:!0,yandex:!0,yodobashi:!0,yoga:!0,yokohama:!0,youtube:!0,yun:!0,zara:!0,zero:!0,zip:!0,zone:!0,zuerich:!0,"cloudfront.net":!0,"ap-northeast-1.compute.amazonaws.com":!0,"ap-southeast-1.compute.amazonaws.com":!0,"ap-southeast-2.compute.amazonaws.com":!0,"cn-north-1.compute.amazonaws.cn":!0,"compute.amazonaws.cn":!0,"compute.amazonaws.com":!0,"compute-1.amazonaws.com":!0,"eu-west-1.compute.amazonaws.com":!0,"eu-central-1.compute.amazonaws.com":!0,"sa-east-1.compute.amazonaws.com":!0,"us-east-1.amazonaws.com":!0,"us-gov-west-1.compute.amazonaws.com":!0,"us-west-1.compute.amazonaws.com":!0,"us-west-2.compute.amazonaws.com":!0,"z-1.compute-1.amazonaws.com":!0,"z-2.compute-1.amazonaws.com":!0,"elasticbeanstalk.com":!0,"elb.amazonaws.com":!0,"s3.amazonaws.com":!0,"s3-us-west-2.amazonaws.com":!0,"s3-us-west-1.amazonaws.com":!0,"s3-eu-west-1.amazonaws.com":!0,"s3-ap-southeast-1.amazonaws.com":!0,"s3-ap-southeast-2.amazonaws.com":!0,"s3-ap-northeast-1.amazonaws.com":!0,"s3-sa-east-1.amazonaws.com":!0,"s3-us-gov-west-1.amazonaws.com":!0,"s3-fips-us-gov-west-1.amazonaws.com":!0,"s3-website-us-east-1.amazonaws.com":!0,"s3-website-us-west-2.amazonaws.com":!0,"s3-website-us-west-1.amazonaws.com":!0,"s3-website-eu-west-1.amazonaws.com":!0,"s3-website-ap-southeast-1.amazonaws.com":!0,"s3-website-ap-southeast-2.amazonaws.com":!0,"s3-website-ap-northeast-1.amazonaws.com":!0,"s3-website-sa-east-1.amazonaws.com":!0,"s3-website-us-gov-west-1.amazonaws.com":!0,"betainabox.com":!0,"ae.org":!0,"ar.com":!0,"br.com":!0,"cn.com":!0,"com.de":!0,"com.se":!0,"de.com":!0,"eu.com":!0,"gb.com":!0,"gb.net":!0,"hu.com":!0,"hu.net":!0,"jp.net":!0,"jpn.com":!0,"kr.com":!0,"mex.com":!0,"no.com":!0,"qc.com":!0,"ru.com":!0,"sa.com":!0,"se.com":!0,"se.net":!0,"uk.com":!0,"uk.net":!0,"us.com":!0,"uy.com":!0,"za.bz":!0,"za.com":!0,"africa.com":!0,"gr.com":!0,"in.net":!0,"us.org":!0,"co.com":!0,"c.la":!0,"cloudcontrolled.com":!0,"cloudcontrolapp.com":!0,"co.ca":!0,"co.nl":!0,"co.no":!0,"*.platform.sh":!0,"cupcake.is":!0,"dreamhosters.com":!0,"dyndns-at-home.com":!0,"dyndns-at-work.com":!0,"dyndns-blog.com":!0,"dyndns-free.com":!0,"dyndns-home.com":!0,"dyndns-ip.com":!0,"dyndns-mail.com":!0,"dyndns-office.com":!0,"dyndns-pics.com":!0,"dyndns-remote.com":!0,"dyndns-server.com":!0,"dyndns-web.com":!0,"dyndns-wiki.com":!0,"dyndns-work.com":!0,"dyndns.biz":!0,"dyndns.info":!0,"dyndns.org":!0,"dyndns.tv":!0,"at-band-camp.net":!0,"ath.cx":!0,"barrel-of-knowledge.info":!0,"barrell-of-knowledge.info":!0,"better-than.tv":!0,"blogdns.com":!0,"blogdns.net":!0,"blogdns.org":!0,"blogsite.org":!0,"boldlygoingnowhere.org":!0,"broke-it.net":!0,"buyshouses.net":!0,"cechire.com":!0,"dnsalias.com":!0,"dnsalias.net":!0,"dnsalias.org":!0,"dnsdojo.com":!0,"dnsdojo.net":!0,"dnsdojo.org":!0,"does-it.net":!0,"doesntexist.com":!0,"doesntexist.org":!0,"dontexist.com":!0,"dontexist.net":!0,"dontexist.org":!0,"doomdns.com":!0,"doomdns.org":!0,"dvrdns.org":!0,"dyn-o-saur.com":!0,"dynalias.com":!0,"dynalias.net":!0,"dynalias.org":!0,"dynathome.net":!0,"dyndns.ws":!0,"endofinternet.net":!0,"endofinternet.org":!0,"endoftheinternet.org":!0,"est-a-la-maison.com":!0,"est-a-la-masion.com":!0,"est-le-patron.com":!0,"est-mon-blogueur.com":!0,"for-better.biz":!0,"for-more.biz":!0,"for-our.info":!0,"for-some.biz":!0,"for-the.biz":!0,"forgot.her.name":!0,"forgot.his.name":!0,"from-ak.com":!0,"from-al.com":!0,"from-ar.com":!0,"from-az.net":!0,"from-ca.com":!0,"from-co.net":!0,"from-ct.com":!0,"from-dc.com":!0,"from-de.com":!0,"from-fl.com":!0,"from-ga.com":!0,"from-hi.com":!0,"from-ia.com":!0,"from-id.com":!0,"from-il.com":!0,"from-in.com":!0,"from-ks.com":!0,"from-ky.com":!0,"from-la.net":!0,"from-ma.com":!0,"from-md.com":!0,"from-me.org":!0,"from-mi.com":!0,"from-mn.com":!0,"from-mo.com":!0,"from-ms.com":!0,"from-mt.com":!0,"from-nc.com":!0,"from-nd.com":!0,"from-ne.com":!0,"from-nh.com":!0,"from-nj.com":!0,"from-nm.com":!0,"from-nv.com":!0,"from-ny.net":!0,"from-oh.com":!0,"from-ok.com":!0,"from-or.com":!0,"from-pa.com":!0,"from-pr.com":!0,"from-ri.com":!0,"from-sc.com":!0,"from-sd.com":!0,"from-tn.com":!0,"from-tx.com":!0,"from-ut.com":!0,"from-va.com":!0,"from-vt.com":!0,"from-wa.com":!0,"from-wi.com":!0,"from-wv.com":!0,"from-wy.com":!0,"ftpaccess.cc":!0,"fuettertdasnetz.de":!0,"game-host.org":!0,"game-server.cc":!0,"getmyip.com":!0,"gets-it.net":!0,"go.dyndns.org":!0,"gotdns.com":!0,"gotdns.org":!0,"groks-the.info":!0,"groks-this.info":!0,"ham-radio-op.net":!0,"here-for-more.info":!0,"hobby-site.com":!0,"hobby-site.org":!0,"home.dyndns.org":!0,"homedns.org":!0,"homeftp.net":!0,"homeftp.org":!0,"homeip.net":!0,"homelinux.com":!0,"homelinux.net":!0,"homelinux.org":!0,"homeunix.com":!0,"homeunix.net":!0,"homeunix.org":!0,"iamallama.com":!0,"in-the-band.net":!0,"is-a-anarchist.com":!0,"is-a-blogger.com":!0,"is-a-bookkeeper.com":!0,"is-a-bruinsfan.org":!0,"is-a-bulls-fan.com":!0,"is-a-candidate.org":!0,"is-a-caterer.com":!0,"is-a-celticsfan.org":!0,"is-a-chef.com":!0,"is-a-chef.net":!0,"is-a-chef.org":!0,"is-a-conservative.com":!0,"is-a-cpa.com":!0,"is-a-cubicle-slave.com":!0,"is-a-democrat.com":!0,"is-a-designer.com":!0,"is-a-doctor.com":!0,"is-a-financialadvisor.com":!0,"is-a-geek.com":!0,"is-a-geek.net":!0,"is-a-geek.org":!0,"is-a-green.com":!0,"is-a-guru.com":!0,"is-a-hard-worker.com":!0,"is-a-hunter.com":!0,"is-a-knight.org":!0,"is-a-landscaper.com":!0,"is-a-lawyer.com":!0,"is-a-liberal.com":!0,"is-a-libertarian.com":!0,"is-a-linux-user.org":!0,"is-a-llama.com":!0,"is-a-musician.com":!0,"is-a-nascarfan.com":!0,"is-a-nurse.com":!0,"is-a-painter.com":!0,"is-a-patsfan.org":!0,"is-a-personaltrainer.com":!0,"is-a-photographer.com":!0,"is-a-player.com":!0,"is-a-republican.com":!0,"is-a-rockstar.com":!0,"is-a-socialist.com":!0,"is-a-soxfan.org":!0,"is-a-student.com":!0,"is-a-teacher.com":!0,"is-a-techie.com":!0,"is-a-therapist.com":!0,"is-an-accountant.com":!0,"is-an-actor.com":!0,"is-an-actress.com":!0,"is-an-anarchist.com":!0,"is-an-artist.com":!0,"is-an-engineer.com":!0,"is-an-entertainer.com":!0,"is-by.us":!0,"is-certified.com":!0,"is-found.org":!0,"is-gone.com":!0,"is-into-anime.com":!0,"is-into-cars.com":!0,"is-into-cartoons.com":!0,"is-into-games.com":!0,"is-leet.com":!0,"is-lost.org":!0,"is-not-certified.com":!0,"is-saved.org":!0,"is-slick.com":!0,"is-uberleet.com":!0,"is-very-bad.org":!0,"is-very-evil.org":!0,"is-very-good.org":!0,"is-very-nice.org":!0,"is-very-sweet.org":!0,"is-with-theband.com":!0,"isa-geek.com":!0,"isa-geek.net":!0,"isa-geek.org":!0,"isa-hockeynut.com":!0,"issmarterthanyou.com":!0,"isteingeek.de":!0,"istmein.de":!0,"kicks-ass.net":!0,"kicks-ass.org":!0,"knowsitall.info":!0,"land-4-sale.us":!0,"lebtimnetz.de":!0,"leitungsen.de":!0,"likes-pie.com":!0,"likescandy.com":!0,"merseine.nu":!0,"mine.nu":!0,"misconfused.org":!0,"mypets.ws":!0,"myphotos.cc":!0,"neat-url.com":!0,"office-on-the.net":!0,"on-the-web.tv":!0,"podzone.net":!0,"podzone.org":!0,"readmyblog.org":!0,"saves-the-whales.com":!0,"scrapper-site.net":!0,"scrapping.cc":!0,"selfip.biz":!0,"selfip.com":!0,"selfip.info":!0,"selfip.net":!0,"selfip.org":!0,"sells-for-less.com":!0,"sells-for-u.com":!0,"sells-it.net":!0,"sellsyourhome.org":!0,"servebbs.com":!0,"servebbs.net":!0,"servebbs.org":!0,"serveftp.net":!0,"serveftp.org":!0,"servegame.org":!0,"shacknet.nu":!0,"simple-url.com":!0,"space-to-rent.com":!0,"stuff-4-sale.org":!0,"stuff-4-sale.us":!0,"teaches-yoga.com":!0,"thruhere.net":!0,"traeumtgerade.de":!0,"webhop.biz":!0,"webhop.info":!0,"webhop.net":!0,"webhop.org":!0,"worse-than.tv":!0,"writesthisblog.com":!0,"a.ssl.fastly.net":!0,"b.ssl.fastly.net":!0,"global.ssl.fastly.net":!0,"a.prod.fastly.net":!0,"global.prod.fastly.net":!0,"firebaseapp.com":!0,"flynnhub.com":!0,"service.gov.uk":!0,"github.io":!0,"githubusercontent.com":!0,"ro.com":!0,"appspot.com":!0,"blogspot.ae":!0,"blogspot.be":!0,"blogspot.bj":!0,"blogspot.ca":!0,"blogspot.cf":!0,"blogspot.ch":!0,"blogspot.co.at":!0,"blogspot.co.il":!0,"blogspot.co.nz":!0,"blogspot.co.uk":!0,"blogspot.com":!0,"blogspot.com.ar":!0,"blogspot.com.au":!0,"blogspot.com.br":!0,"blogspot.com.es":!0,"blogspot.com.tr":!0,"blogspot.cv":!0,"blogspot.cz":!0,"blogspot.de":!0,"blogspot.dk":!0,"blogspot.fi":!0,"blogspot.fr":!0,"blogspot.gr":!0,"blogspot.hk":!0,"blogspot.hu":!0,"blogspot.ie":!0,"blogspot.in":!0,"blogspot.it":!0,"blogspot.jp":!0,"blogspot.kr":!0,"blogspot.mr":!0,"blogspot.mx":!0,"blogspot.nl":!0,"blogspot.no":!0,"blogspot.pt":!0,"blogspot.re":!0,"blogspot.ro":!0,"blogspot.ru":!0,"blogspot.se":!0,"blogspot.sg":!0,"blogspot.sk":!0,"blogspot.td":!0,"blogspot.tw":!0,"codespot.com":!0,"googleapis.com":!0,"googlecode.com":!0,"pagespeedmobilizer.com":!0,"withgoogle.com":!0,"herokuapp.com":!0,"herokussl.com":!0,"iki.fi":!0,"biz.at":!0,"info.at":!0,"co.pl":!0,"azurewebsites.net":!0,"azure-mobile.net":!0,"cloudapp.net":!0,"nfshost.com":!0,"nyc.mn":!0,"nid.io":!0,"operaunite.com":!0,"outsystemscloud.com":!0,"art.pl":!0,"gliwice.pl":!0,"krakow.pl":!0,"poznan.pl":!0,"wroc.pl":!0,"zakopane.pl":!0,"priv.at":!0,"rhcloud.com":!0,"sinaapp.com":!0,"vipsinaapp.com":!0,"1kapp.com":!0,"gda.pl":!0,"gdansk.pl":!0,"gdynia.pl":!0,"med.pl":!0,"sopot.pl":!0,"hk.com":!0,"hk.org":!0,"ltd.hk":!0,"inc.hk":!0,"yolasite.com":!0,"za.net":!0,"za.org":!0});


},{"punycode":96}],241:[function(require,module,exports){
  "use strict";function Store(){}exports.Store=Store,Store.prototype.synchronous=!1,Store.prototype.findCookie=function(o,e,t,r){throw new Error("findCookie is not implemented")},Store.prototype.findCookies=function(o,e,t){throw new Error("findCookies is not implemented")},Store.prototype.putCookie=function(o,e){throw new Error("putCookie is not implemented")},Store.prototype.updateCookie=function(o,e,t){throw new Error("updateCookie is not implemented")},Store.prototype.removeCookie=function(o,e,t,r){throw new Error("removeCookie is not implemented")},Store.prototype.removeCookies=function(o,e,t){throw new Error("removeCookies is not implemented")},Store.prototype.getAllCookies=function(o){throw new Error("getAllCookies is not implemented (therefore jar cannot be serialized)")};


},{}],242:[function(require,module,exports){
  module.exports={
    "author": {
      "name": "Jeremy Stashewsky",
      "email": "jstashewsky@salesforce.com"
    },
    "license": "BSD-3-Clause",
    "name": "tough-cookie",
    "description": "RFC6265 Cookies and Cookie Jar for node.js",
    "keywords": [
      "HTTP",
      "cookie",
      "cookies",
      "set-cookie",
      "cookiejar",
      "jar",
      "RFC6265",
      "RFC2965"
    ],
    "version": "2.0.0",
    "homepage": "https://github.com/SalesforceEng/tough-cookie",
    "repository": {
      "type": "git",
      "url": "git://github.com/SalesforceEng/tough-cookie.git"
    },
    "bugs": {
      "url": "https://github.com/SalesforceEng/tough-cookie/issues"
    },
    "main": "./lib/cookie",
    "scripts": {
      "test": "vows test/*_test.js"
    },
    "engines": {
      "node": ">=0.10.0"
    },
    "devDependencies": {
      "vows": "0.7.0",
      "async": ">=0.1.12"
    },
    "gitHead": "a3af6104da7787c23bb98910109b0e0e8a10153c",
    "_id": "tough-cookie@2.0.0",
    "_shasum": "41ce08720b35cf90beb044dd2609fb19e928718f",
    "_from": "tough-cookie@>=0.12.0",
    "_npmVersion": "2.7.4",
    "_nodeVersion": "0.12.2",
    "_npmUser": {
      "name": "jstash",
      "email": "jstash@gmail.com"
    },
    "dist": {
      "shasum": "41ce08720b35cf90beb044dd2609fb19e928718f",
      "tarball": "http://54.194.16.76:4873/tough-cookie/-/tough-cookie-2.0.0.tgz"
    },
    "maintainers": [
      {
        "name": "jstash",
        "email": "jeremy@goinstant.com"
      },
      {
        "name": "goinstant",
        "email": "services@goinstant.com"
      }
    ],
    "directories": {},
    "_resolved": "http://54.194.16.76:4873/tough-cookie/-/tough-cookie-2.0.0.tgz",
    "readme": "ERROR: No README data found!"
  }

},{}],243:[function(require,module,exports){
  (function (process,Buffer){
    "use strict";function httpOverHttp(e){var t=new TunnelingAgent(e);return t.request=http.request,t}function httpsOverHttp(e){var t=new TunnelingAgent(e);return t.request=http.request,t.createSocket=createSecureSocket,t}function httpOverHttps(e){var t=new TunnelingAgent(e);return t.request=https.request,t}function httpsOverHttps(e){var t=new TunnelingAgent(e);return t.request=https.request,t.createSocket=createSecureSocket,t}function TunnelingAgent(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||http.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(e,r,n){for(var s=0,o=t.requests.length;o>s;++s){var u=t.requests[s];if(u.host===r&&u.port===n)return t.requests.splice(s,1),void u.request.onSocket(e)}e.destroy(),t.removeSocket(e)})}function createSecureSocket(e,t){var r=this;TunnelingAgent.prototype.createSocket.call(r,e,function(n){var s=tls.connect(0,mergeOptions({},r.options,{servername:e.host,socket:n}));t(s)})}function mergeOptions(e){for(var t=1,r=arguments.length;r>t;++t){var n=arguments[t];if("object"==typeof n)for(var s=Object.keys(n),o=0,u=s.length;u>o;++o){var i=s[o];void 0!==n[i]&&(e[i]=n[i])}}return e}var net=require("net"),tls=require("tls"),http=require("http"),https=require("https"),events=require("events"),assert=require("assert"),util=require("util");exports.httpOverHttp=httpOverHttp,exports.httpsOverHttp=httpsOverHttp,exports.httpOverHttps=httpOverHttps,exports.httpsOverHttps=httpsOverHttps,util.inherits(TunnelingAgent,events.EventEmitter),TunnelingAgent.prototype.addRequest=function(e,t){var r=this;return"string"==typeof t&&(t={host:t,port:arguments[2],path:arguments[3]}),r.sockets.length>=this.maxSockets?void r.requests.push({host:host,port:port,request:e}):void r.createSocket({host:t.host,port:t.port,request:e},function(n){function s(){r.emit("free",n,t.host,t.port)}function o(e){r.removeSocket(),n.removeListener("free",s),n.removeListener("close",o),n.removeListener("agentRemove",o)}n.on("free",s),n.on("close",o),n.on("agentRemove",o),e.onSocket(n)})},TunnelingAgent.prototype.createSocket=function(e,t){function r(e){e.upgrade=!0}function n(e,t,r){process.nextTick(function(){s(e,t,r)})}function s(r,n,s){if(p.removeAllListeners(),n.removeAllListeners(),200===r.statusCode)assert.equal(s.length,0),debug("tunneling connection has established"),u.sockets[u.sockets.indexOf(i)]=n,t(n);else{debug("tunneling socket could not be established, statusCode=%d",r.statusCode);var o=new Error("tunneling socket could not be established, statusCode="+r.statusCode);o.code="ECONNRESET",e.request.emit("error",o),u.removeSocket(i)}}function o(t){p.removeAllListeners(),debug("tunneling socket could not be established, cause=%s\n",t.message,t.stack);var r=new Error("tunneling socket could not be established, cause="+t.message);r.code="ECONNRESET",e.request.emit("error",r),u.removeSocket(i)}var u=this,i={};u.sockets.push(i);var c=mergeOptions({},u.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1});c.proxyAuth&&(c.headers=c.headers||{},c.headers["Proxy-Authorization"]="Basic "+new Buffer(c.proxyAuth).toString("base64")),debug("making CONNECT request");var p=u.request(c);p.useChunkedEncodingByDefault=!1,p.once("response",r),p.once("upgrade",n),p.once("connect",s),p.once("error",o),p.end()},TunnelingAgent.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createSocket(r,function(e){r.request.onSocket(e)})}};var debug;debug=process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:function(){},exports.debug=debug;


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"Zbi7gb":95,"assert":64,"buffer":78,"events":87,"http":88,"https":92,"net":63,"tls":63,"util":109}],244:[function(require,module,exports){
  (function (process,Buffer){
    "use strict";function filterForNonReserved(e,t){var r={};for(var o in t){var n=-1===e.indexOf(o);n&&(r[o]=t[o])}return r}function filterOutReservedFunctions(e,t){var r={};for(var o in t){var n=!(-1===e.indexOf(o)),a="function"==typeof t[o];n&&a||(r[o]=t[o])}return r}function constructProxyHost(e){var t=e.portA,r=e.protocol,o=e.hostname+":";return o+=t?t:"https:"===r?"443":"80"}function constructProxyHeaderWhiteList(e,t){var r=t.reduce(function(e,t){return e[t.toLowerCase()]=!0,e},{});return Object.keys(e).filter(function(e){return r[e.toLowerCase()]}).reduce(function(t,r){return t[r]=e[r],t},{})}function getTunnelOption(e,t){return"undefined"!=typeof e.tunnel?e.tunnel:"undefined"!=typeof t.tunnel?t.tunnel:"https:"===e.uri.protocol?!0:void 0}function constructTunnelOptions(e){var t=e.proxy,r={proxy:{host:t.hostname,port:+t.port,proxyAuth:t.auth,headers:e.proxyHeaders},headers:e.headers,ca:e.ca,cert:e.cert,key:e.key,passphrase:e.passphrase,pfx:e.pfx,ciphers:e.ciphers,rejectUnauthorized:e.rejectUnauthorized,secureOptions:e.secureOptions,secureProtocol:e.secureProtocol};return r}function constructTunnelFnName(e,t){var r="https:"===e.protocol?"https":"http",o="https:"===t.protocol?"Https":"Http";return[r,o].join("Over")}function getTunnelFn(e){var t=e.uri,r=e.proxy,o=constructTunnelFnName(t,r);return tunnel[o]}function connectionErrorHandler(e){var t=this;t.res?t.res.request?t.res.request.emit("error",e):t.res.emit("error",e):t._httpMessage.emit("error",e)}function requestToJSON(){var e=this;return{uri:e.uri,method:e.method,headers:e.headers}}function responseToJSON(){var e=this;return{statusCode:e.statusCode,body:e.body,headers:e.headers,request:requestToJSON.call(e.request)}}function rfc3986(e){return e.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Request(e){var t=this;stream.Stream.call(t);var r=Object.keys(Request.prototype),o=filterForNonReserved(r,e);stream.Stream.call(t),util._extend(t,o),e=filterOutReservedFunctions(r,e),t.readable=!0,t.writable=!0,e.method&&(t.explicitMethod=!0),t.init(e)}function debug(){Request.debug&&0}var http=require("http"),https=require("https"),url=require("url"),util=require("util"),stream=require("stream"),qs=require("qs"),querystring=require("querystring"),zlib=require("zlib"),helpers=require("./lib/helpers"),bl=require("bl"),hawk=require("hawk"),aws=require("aws-sign2"),httpSignature=require("http-signature"),uuid=require("node-uuid"),mime=require("mime-types"),tunnel=require("tunnel-agent"),stringstream=require("stringstream"),caseless=require("caseless"),ForeverAgent=require("forever-agent"),FormData=require("form-data"),cookies=require("./lib/cookies"),copy=require("./lib/copy"),net=require("net"),CombinedStream=require("combined-stream"),isstream=require("isstream"),getProxyFromURI=require("./lib/getProxyFromURI"),Auth=require("./lib/auth").Auth,oauth=require("./lib/oauth"),safeStringify=helpers.safeStringify,md5=helpers.md5,isReadStream=helpers.isReadStream,toBase64=helpers.toBase64,defer=helpers.defer,globalCookieJar=cookies.jar(),globalPool={},isUrl=/^https?:/,defaultProxyHeaderWhiteList=["accept","accept-charset","accept-encoding","accept-language","accept-ranges","cache-control","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","connection","date","expect","max-forwards","pragma","referer","te","transfer-encoding","user-agent","via"],defaultProxyHeaderExclusiveList=["proxy-authorization"];util.inherits(Request,stream.Stream),Request.debug=process.env.NODE_DEBUG&&/\brequest\b/.test(process.env.NODE_DEBUG),Request.prototype.setupTunnel=function(){var e=this;if("string"==typeof e.proxy&&(e.proxy=url.parse(e.proxy)),!e.proxy||!e.tunnel)return!1;e.proxyHeaderExclusiveList=e.proxyHeaderExclusiveList||[],e.proxyHeaderWhiteList=e.proxyHeaderWhiteList||defaultProxyHeaderWhiteList;var t=e.proxyHeaderExclusiveList.concat(defaultProxyHeaderExclusiveList),r=e.proxyHeaderWhiteList.concat(t);e.proxyHeaders=constructProxyHeaderWhiteList(e.headers,r),e.proxyHeaders.host=constructProxyHost(e.uri),t.forEach(e.removeHeader,e);var o=getTunnelFn(e),n=constructTunnelOptions(e);return e.agent=o(n),!0},Request.prototype.init=function(e){var t=this;if(e||(e={}),t.headers=t.headers?copy(t.headers):{},caseless.httpify(t,t.headers),t.method||(t.method=e.method||"GET"),t.localAddress=e.localAddress,t.qsLib||(t.qsLib=e.useQuerystring?querystring:qs),debug(e),t.pool||t.pool===!1||(t.pool=globalPool),t.dests=t.dests||[],t.__isRequestRequest=!0,!t._callback&&t.callback&&(t._callback=t.callback,t.callback=function(){t._callbackCalled||(t._callbackCalled=!0,t._callback.apply(t,arguments))},t.on("error",t.callback.bind()),t.on("complete",t.callback.bind(t,null))),!t.uri&&t.url&&(t.uri=t.url,delete t.url),!t.uri)return t.emit("error",new Error("options.uri is a required argument"));if("string"==typeof t.uri&&(t.uri=url.parse(t.uri)),"unix:"===t.uri.protocol)return t.emit("error",new Error("`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`"));if("unix"===t.uri.host){var r=t.uri.path.split(":"),o=r[0],n=r[1];t.socketPath=o,t.uri.pathname=n,t.uri.path=n,t.uri.host=o,t.uri.hostname=o,t.uri.isUnix=!0}if(t.strictSSL===!1&&(t.rejectUnauthorized=!1),t.hasOwnProperty("proxy")||(t.proxy=getProxyFromURI(t.uri)),t.tunnel=getTunnelOption(t,e),t.proxy&&t.setupTunnel(),t.uri.pathname||(t.uri.pathname="/"),!(t.uri.host||t.uri.hostname&&t.uri.port||t.uri.isUnix)){var a=url.format(t.uri),s='Invalid URI "'+a+'"';return 0===Object.keys(e).length&&(s+=". This can be caused by a crappy redirection."),t.emit("error",new Error(s))}if(t._redirectsFollowed=t._redirectsFollowed||0,t.maxRedirects=void 0!==t.maxRedirects?t.maxRedirects:10,t.allowRedirect="function"==typeof t.followRedirect?t.followRedirect:function(e){return!0},t.followRedirects=void 0!==t.followRedirect?!!t.followRedirect:!0,t.followAllRedirects=void 0!==t.followAllRedirects?t.followAllRedirects:!1,(t.followRedirects||t.followAllRedirects)&&(t.redirects=t.redirects||[]),t.setHost=!1,!t.hasHeader("host")){var i=t.originalHostHeaderName||"host";t.setHeader(i,t.uri.hostname),t.uri.port&&(80===t.uri.port&&"http:"===t.uri.protocol||443===t.uri.port&&"https:"===t.uri.protocol||t.setHeader(i,t.getHeader("host")+(":"+t.uri.port))),t.setHost=!0}if(t.jar(t._jar||e.jar),t.uri.port||("http:"===t.uri.protocol?t.uri.port=80:"https:"===t.uri.protocol&&(t.uri.port=443)),t.proxy&&!t.tunnel?(t.port=t.proxy.port,t.host=t.proxy.hostname):(t.port=t.uri.port,t.host=t.uri.hostname),e.form&&t.form(e.form),e.formData){var u=e.formData,d=t.form(),c=function(e,t){t.hasOwnProperty("value")&&t.hasOwnProperty("options")?d.append(e,t.value,t.options):d.append(e,t)};for(var p in u)if(u.hasOwnProperty(p)){var l=u[p];if(l instanceof Array)for(var h=0;h<l.length;h++)c(p,l[h]);else c(p,l)}}if(e.qs&&t.qs(e.qs),t.uri.path?t.path=t.uri.path:t.path=t.uri.pathname+(t.uri.search||""),0===t.path.length&&(t.path="/"),t._auth=new Auth,e.oauth&&t.oauth(e.oauth),e.aws&&t.aws(e.aws),e.hawk&&t.hawk(e.hawk),e.httpSignature&&t.httpSignature(e.httpSignature),e.auth&&(Object.prototype.hasOwnProperty.call(e.auth,"username")&&(e.auth.user=e.auth.username),Object.prototype.hasOwnProperty.call(e.auth,"password")&&(e.auth.pass=e.auth.password),t.auth(e.auth.user,e.auth.pass,e.auth.sendImmediately,e.auth.bearer)),t.gzip&&!t.hasHeader("accept-encoding")&&t.setHeader("accept-encoding","gzip"),t.uri.auth&&!t.hasHeader("authorization")){var f=t.uri.auth.split(":").map(function(e){return querystring.unescape(e)});t.auth(f[0],f.slice(1).join(":"),!0)}if(!t.tunnel&&t.proxy&&t.proxy.auth&&!t.hasHeader("proxy-authorization")){var g=t.proxy.auth.split(":").map(function(e){return querystring.unescape(e)}),y="Basic "+toBase64(g.join(":"));t.setHeader("proxy-authorization",y)}if(t.proxy&&!t.tunnel&&(t.path=t.uri.protocol+"//"+t.uri.host+t.path),e.json&&t.json(e.json),e.multipart&&(t.boundary=uuid(),t.multipart(e.multipart)),t.body){var m=0;if(Buffer.isBuffer(t.body))m=t.body.length;else if(Array.isArray(t.body))for(var b=0;b<t.body.length;b++)m+=t.body[b].length;else t.body=new Buffer(t.body),m=t.body.length;if(!m)throw new Error("Argument error, options.body.");t.hasHeader("content-length")||t.setHeader("content-length",m)}var v=t.proxy&&!t.tunnel?t.proxy.protocol:t.uri.protocol,q={"http:":http,"https:":https},H=t.httpModules||{};return t.httpModule=H[v]||q[v],t.httpModule?(e.ca&&(t.ca=e.ca),t.agent||(e.agentOptions&&(t.agentOptions=e.agentOptions),e.agentClass?t.agentClass=e.agentClass:e.forever?t.agentClass="http:"===v?ForeverAgent:ForeverAgent.SSL:t.agentClass=t.httpModule.Agent),t.pool===!1?t.agent=!1:t.agent=t.agent||t.getNewAgent(),t.on("pipe",function(e){if(t.ntick&&t._started)throw new Error("You cannot pipe to this stream after the outbound request has started.");if(t.src=e,isReadStream(e))t.hasHeader("content-type")||t.setHeader("content-type",mime.lookup(e.path));else{if(e.headers)for(var r in e.headers)t.hasHeader(r)||t.setHeader(r,e.headers[r]);t._json&&!t.hasHeader("content-type")&&t.setHeader("content-type","application/json"),e.method&&!t.explicitMethod&&(t.method=e.method)}}),void defer(function(){if(!t._aborted){var e=function(){t._form&&t._form.pipe(t),t._multipart&&t._multipart.pipe(t),t.body?(Array.isArray(t.body)?t.body.forEach(function(e){t.write(e)}):t.write(t.body),t.end()):t.requestBodyStream?(0,t.requestBodyStream.pipe(t)):t.src||("GET"!==t.method&&"undefined"!=typeof t.method&&t.setHeader("content-length",0),t.end())};t._form&&!t.hasHeader("content-length")?(t.setHeader(t._form.getHeaders()),t._form.getLength(function(r,o){r||t.setHeader("content-length",o),e()})):e(),t.ntick=!0}})):t.emit("error",new Error("Invalid protocol: "+v))},Request.prototype._updateProtocol=function(){var e=this,t=e.uri.protocol;if("https:"===t||e.tunnel){if(e.proxy&&e.setupTunnel())return;switch(e.httpModule=https,e.agentClass){case ForeverAgent:e.agentClass=ForeverAgent.SSL;break;case http.Agent:e.agentClass=https.Agent;break;default:return}e.agent&&(e.agent=e.getNewAgent())}else{switch(e.httpModule=http,e.agentClass){case ForeverAgent.SSL:e.agentClass=ForeverAgent;break;case https.Agent:e.agentClass=http.Agent;break;default:return}e.agent&&(e.agent=null,e.agent=e.getNewAgent())}},Request.prototype.getNewAgent=function(){var e=this,t=e.agentClass,r={};if(e.agentOptions)for(var o in e.agentOptions)r[o]=e.agentOptions[o];e.ca&&(r.ca=e.ca),e.ciphers&&(r.ciphers=e.ciphers),e.secureProtocol&&(r.secureProtocol=e.secureProtocol),e.secureOptions&&(r.secureOptions=e.secureOptions),"undefined"!=typeof e.rejectUnauthorized&&(r.rejectUnauthorized=e.rejectUnauthorized),e.cert&&e.key&&(r.key=e.key,r.cert=e.cert),e.pfx&&(r.pfx=e.pfx),e.passphrase&&(r.passphrase=e.passphrase);var n="";t!==e.httpModule.Agent&&(n+=t.name);var a=e.proxy;"string"==typeof a&&(a=url.parse(a));var s=a&&"https:"===a.protocol||"https:"===this.uri.protocol;return s&&(r.ca&&(n&&(n+=":"),n+=r.ca),"undefined"!=typeof r.rejectUnauthorized&&(n&&(n+=":"),n+=r.rejectUnauthorized),r.cert&&(n&&(n+=":"),n+=r.cert.toString("ascii")+r.key.toString("ascii")),r.pfx&&(n&&(n+=":"),n+=r.pfx.toString("ascii")),r.ciphers&&(n&&(n+=":"),n+=r.ciphers),r.secureProtocol&&(n&&(n+=":"),n+=r.secureProtocol),r.secureOptions&&(n&&(n+=":"),n+=r.secureOptions)),e.pool===globalPool&&!n&&0===Object.keys(r).length&&e.httpModule.globalAgent?e.httpModule.globalAgent:(n=e.uri.protocol+n,e.pool[n]||(e.pool[n]=new t(r),e.pool.maxSockets&&(e.pool[n].maxSockets=e.pool.maxSockets)),e.pool[n])},Request.prototype.start=function(){var e=this;if(!e._aborted){e._started=!0,e.method=e.method||"GET",e.href=e.uri.href,e.src&&e.src.stat&&e.src.stat.size&&!e.hasHeader("content-length")&&e.setHeader("content-length",e.src.stat.size),e._aws&&e.aws(e._aws,!0);var t=copy(e);delete t.auth,debug("make request",e.uri.href),e.req=e.httpModule.request(t),e.timeout&&!e.timeoutTimer&&(e.timeoutTimer=setTimeout(function(){e.abort();var t=new Error("ETIMEDOUT");t.code="ETIMEDOUT",e.emit("error",t)},e.timeout),e.req.setTimeout&&e.req.setTimeout(e.timeout,function(){if(e.req){e.req.abort();var t=new Error("ESOCKETTIMEDOUT");t.code="ESOCKETTIMEDOUT",e.emit("error",t)}})),e.req.on("response",e.onRequestResponse.bind(e)),e.req.on("error",e.onRequestError.bind(e)),e.req.on("drain",function(){e.emit("drain")}),e.req.on("socket",function(t){e.emit("socket",t)}),e.on("end",function(){e.req.connection&&e.req.connection.removeListener("error",connectionErrorHandler)}),e.emit("request",e.req)}},Request.prototype.onRequestError=function(e){var t=this;if(!t._aborted){if(t.req&&t.req._reusedSocket&&"ECONNRESET"===e.code&&t.agent.addRequestNoreuse)return t.agent={addRequest:t.agent.addRequestNoreuse.bind(t.agent)},t.start(),void t.req.end();t.timeout&&t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=null),t.emit("error",e)}},Request.prototype.onRequestResponse=function(e){var t=this;if(debug("onRequestResponse",t.uri.href,e.statusCode,e.headers),e.on("end",function(){debug("response end",t.uri.href,e.statusCode,e.headers)}),e.connection&&-1===e.connection.listeners("error").indexOf(connectionErrorHandler)&&(e.connection.setMaxListeners(0),e.connection.once("error",connectionErrorHandler)),t._aborted)return debug("aborted",t.uri.href),void e.resume();if(t._paused?e.pause():e.resume&&e.resume(),t.response=e,e.request=t,e.toJSON=responseToJSON,t.httpModule===https&&t.strictSSL&&(!e.hasOwnProperty("client")||!e.client.authorized)){debug("strict ssl error",t.uri.href);var r=e.hasOwnProperty("client")?e.client.authorizationError:t.uri.href+" does not support SSL";return void t.emit("error",new Error("SSL Error: "+r))}t.originalHost=t.getHeader("host"),t.originalHostHeaderName||(t.originalHostHeaderName=t.hasHeader("host")),t.setHost&&t.removeHeader("host"),t.timeout&&t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=null);var o=t._jar&&t._jar.setCookie?t._jar:globalCookieJar,n=function(e){try{o.setCookie(e,t.uri.href,{ignoreError:!0})}catch(r){t.emit("error",r)}};if(e.caseless=caseless(e.headers),e.caseless.has("set-cookie")&&!t._disableCookies){var a=e.caseless.has("set-cookie");Array.isArray(e.headers[a])?e.headers[a].forEach(n):n(e.headers[a])}var s=null;if(e.statusCode>=300&&e.statusCode<400&&e.caseless.has("location")){var i=e.caseless.get("location");if(debug("redirect",i),t.followAllRedirects)s=i;else if(t.followRedirects)switch(t.method){case"PATCH":case"PUT":case"POST":case"DELETE":break;default:s=i}}else if(401===e.statusCode){var u=t._auth.response(t.method,t.uri.path,e.headers);u&&(t.setHeader("authorization",u),s=t.uri)}if(s&&t.allowRedirect.call(t,e)){if(debug("redirect to",s),t._paused&&e.resume(),t._redirectsFollowed>=t.maxRedirects)return void t.emit("error",new Error("Exceeded maxRedirects. Probably stuck in a redirect loop "+t.uri.href));t._redirectsFollowed+=1,isUrl.test(s)||(s=url.resolve(t.uri.href,s));var d=t.uri;return t.uri=url.parse(s),t.uri.protocol!==d.protocol&&t._updateProtocol(),t.redirects.push({statusCode:e.statusCode,redirectUri:s}),t.followAllRedirects&&401!==e.statusCode&&307!==e.statusCode&&(t.method="GET"),delete t.src,delete t.req,delete t.agent,delete t._started,401!==e.statusCode&&307!==e.statusCode&&(delete t.body,delete t._form,t.headers&&(t.removeHeader("host"),t.removeHeader("content-type"),t.removeHeader("content-length"),t.uri.hostname!==t.originalHost.split(":")[0]&&t.removeHeader("authorization"))),t.emit("redirect"),void t.init()}t._redirectsFollowed=t._redirectsFollowed||0,e.on("close",function(){t._ended||t.response.emit("end")}),e.on("end",function(){t._ended=!0});var c;if(t.gzip){var p=e.headers["content-encoding"]||"identity";p=p.trim().toLowerCase(),"gzip"===p?(c=zlib.createGunzip(),e.pipe(c)):("identity"!==p&&debug("ignoring unrecognized Content-Encoding "+p),c=e)}else c=e;if(t.encoding&&(0!==t.dests.length?0:c.setEncoding?c.setEncoding(t.encoding):c=c.pipe(stringstream(t.encoding))),t.emit("response",e),t.dests.forEach(function(e){t.pipeDest(e)}),c.on("data",function(e){t._destdata=!0,t.emit("data",e)}),c.on("end",function(e){t.emit("end",e)}),c.on("error",function(e){t.emit("error",e)}),c.on("close",function(){t.emit("close")}),t.callback){var l=bl(),h=[];t.on("data",function(e){Buffer.isBuffer(e)?l.append(e):h.push(e)}),t.on("end",function(){if(debug("end event",t.uri.href),t._aborted)return void debug("aborted",t.uri.href);if(l.length?(debug("has body",t.uri.href,l.length),null===t.encoding?e.body=l.slice():e.body=l.toString(t.encoding)):h.length&&("utf8"===t.encoding&&h[0].length>0&&"\ufeff"===h[0][0]&&(h[0]=h[0].substring(1)),e.body=h.join("")),t._json)try{e.body=JSON.parse(e.body,t._jsonReviver)}catch(r){}debug("emitting complete",t.uri.href),"undefined"!=typeof e.body||t._json||(e.body=null===t.encoding?new Buffer(0):""),t.emit("complete",e,e.body)})}else t.on("end",function(){return t._aborted?void debug("aborted",t.uri.href):void t.emit("complete",e)});debug("finish init function",t.uri.href)},Request.prototype.abort=function(){var e=this;e._aborted=!0,e.req?e.req.abort():e.response&&e.response.abort(),e.emit("abort")},Request.prototype.pipeDest=function(e){var t=this,r=t.response;if(e.headers&&!e.headersSent){if(r.caseless.has("content-type")){var o=r.caseless.has("content-type");e.setHeader?e.setHeader(o,r.headers[o]):e.headers[o]=r.headers[o]}if(r.caseless.has("content-length")){var n=r.caseless.has("content-length");e.setHeader?e.setHeader(n,r.headers[n]):e.headers[n]=r.headers[n]}}if(e.setHeader&&!e.headersSent){for(var a in r.headers)t.gzip&&"content-encoding"===a||e.setHeader(a,r.headers[a]);e.statusCode=r.statusCode}t.pipefilter&&t.pipefilter(r,e)},Request.prototype.qs=function(e,t){var r,o=this;r=!t&&o.uri.query?o.qsLib.parse(o.uri.query):{};for(var n in e)r[n]=e[n];if(""===o.qsLib.stringify(r))return o;var a=o.qsLib.stringify(r);return o.uri=url.parse(o.uri.href.split("?")[0]+"?"+rfc3986(a)),o.url=o.uri,o.path=o.uri.path,o},Request.prototype.form=function(e){var t=this;return e?(t.setHeader("content-type","application/x-www-form-urlencoded"),t.body="string"==typeof e?e.toString("utf8"):t.qsLib.stringify(e).toString("utf8"),t.body=rfc3986(t.body),t):(t._form=new FormData,t._form.on("error",function(e){e.message="form-data: "+e.message,t.emit("error",e),t.abort()}),t._form)},Request.prototype.multipart=function(e){function t(e){return o?s.append(e):s.push(new Buffer(e))}var r=this,o=!1,n=e.data||e;if(!n.forEach)throw new Error("Argument error, options.multipart.");"chunked"===r.getHeader("transfer-encoding")&&(o=!0),void 0!==e.chunked&&(o=e.chunked),o||n.forEach(function(e){if("undefined"==typeof e.body)throw new Error("Body attribute missing in multipart.");isstream(e.body)&&(o=!0)}),o&&!r.hasHeader("transfer-encoding")&&r.setHeader("transfer-encoding","chunked");var a=r.hasHeader("content-type");a&&-1!==r.headers[a].indexOf("multipart")?r.setHeader(a,r.headers[a].split(";")[0]+"; boundary="+r.boundary):r.setHeader("content-type","multipart/related; boundary="+r.boundary);var s=o?new CombinedStream:[];return r.preambleCRLF&&t("\r\n"),n.forEach(function(e){var o=e.body,n="--"+r.boundary+"\r\n";Object.keys(e).forEach(function(t){"body"!==t&&(n+=t+": "+e[t]+"\r\n")}),n+="\r\n",t(n),t(o),t("\r\n")}),t("--"+r.boundary+"--"),r.postambleCRLF&&t("\r\n"),r[o?"_multipart":"body"]=s,r},Request.prototype.json=function(e){var t=this;return t.hasHeader("accept")||t.setHeader("accept","application/json"),t._json=!0,"boolean"==typeof e?void 0!==t.body&&(/^application\/x-www-form-urlencoded\b/.test(t.getHeader("content-type"))?t.body=rfc3986(t.body):t.body=safeStringify(t.body),t.hasHeader("content-type")||t.setHeader("content-type","application/json")):(t.body=safeStringify(e),t.hasHeader("content-type")||t.setHeader("content-type","application/json")),"function"==typeof t.jsonReviver&&(t._jsonReviver=t.jsonReviver),t},Request.prototype.getHeader=function(e,t){var r,o,n,a=this;return t||(t=a.headers),Object.keys(t).forEach(function(a){a.length===e.length&&(o=new RegExp(e,"i"),n=a.match(o),n&&(r=t[a]))}),r};var getHeader=Request.prototype.getHeader;Request.prototype.auth=function(e,t,r,o){var n,a=this;return n=void 0!==o?a._auth.bearer(o,r):a._auth.basic(e,t,r),n&&a.setHeader("authorization",n),a},Request.prototype.aws=function(e,t){var r=this;if(!t)return r._aws=e,r;var o=new Date;r.setHeader("date",o.toUTCString());var n={key:e.key,secret:e.secret,verb:r.method.toUpperCase(),date:o,contentType:r.getHeader("content-type")||"",md5:r.getHeader("content-md5")||"",amazonHeaders:aws.canonicalizeHeaders(r.headers)},a=r.uri.path;return e.bucket&&a?n.resource="/"+e.bucket+a:e.bucket&&!a?n.resource="/"+e.bucket:!e.bucket&&a?n.resource=a:e.bucket||a||(n.resource="/"),n.resource=aws.canonicalizeResource(n.resource),r.setHeader("authorization",aws.authorization(n)),r},Request.prototype.httpSignature=function(e){var t=this;return httpSignature.signRequest({getHeader:function(e){return getHeader(e,t.headers)},setHeader:function(e,r){t.setHeader(e,r)},method:t.method,path:t.path},e),debug("httpSignature authorization",t.getHeader("authorization")),t},Request.prototype.hawk=function(e){var t=this;t.setHeader("Authorization",hawk.client.header(t.uri,t.method,e).field)},Request.prototype.oauth=function(e){var t=this,r=oauth.oauth({uri:t.uri,method:t.method,headers:t.headers,body:t.body,oauth:e,qsLib:t.qsLib});return"header"===r.transport?t.setHeader("Authorization",r.oauth):"query"===r.transport?t.path+=r.oauth:"body"===r.transport&&(t.body=r.oauth),t},Request.prototype.jar=function(e){var t,r=this;if(0===r._redirectsFollowed&&(r.originalCookieHeader=r.getHeader("cookie")),e){var o=e&&e.getCookieString?e:globalCookieJar,n=r.uri.href;o&&(t=o.getCookieString(n))}else t=!1,r._disableCookies=!0;return t&&t.length&&(r.originalCookieHeader?r.setHeader("cookie",r.originalCookieHeader+"; "+t):r.setHeader("cookie",t)),r._jar=e,r},Request.prototype.pipe=function(e,t){var r=this;if(r.response){if(r._destdata)throw new Error("You cannot pipe after data has been emitted from the response.");if(r._ended)throw new Error("You cannot pipe after the response has been ended.");return stream.Stream.prototype.pipe.call(r,e,t),r.pipeDest(e),e}return r.dests.push(e),stream.Stream.prototype.pipe.call(r,e,t),e},Request.prototype.write=function(){var e=this;return e._started||e.start(),e.req.write.apply(e.req,arguments)},Request.prototype.end=function(e){var t=this;e&&t.write(e),t._started||t.start(),t.req.end()},Request.prototype.pause=function(){var e=this;e.response?e.response.pause.apply(e.response,arguments):e._paused=!0},Request.prototype.resume=function(){var e=this;e.response?e.response.resume.apply(e.response,arguments):e._paused=!1},Request.prototype.destroy=function(){var e=this;e._ended?e.response&&e.response.destroy():e.end()},Request.defaultProxyHeaderWhiteList=defaultProxyHeaderWhiteList.slice(),Request.defaultProxyHeaderExclusiveList=defaultProxyHeaderExclusiveList.slice(),Request.prototype.toJSON=requestToJSON,module.exports=Request;


  }).call(this,require("Zbi7gb"),require("buffer").Buffer)
},{"./lib/auth":185,"./lib/cookies":186,"./lib/copy":187,"./lib/getProxyFromURI":188,"./lib/helpers":189,"./lib/oauth":190,"Zbi7gb":95,"aws-sign2":191,"bl":192,"buffer":78,"caseless":201,"combined-stream":202,"forever-agent":204,"form-data":205,"hawk":207,"http":88,"http-signature":208,"https":92,"isstream":223,"mime-types":225,"net":63,"node-uuid":228,"qs":230,"querystring":99,"stream":101,"stringstream":235,"tunnel-agent":243,"url":266,"util":109,"zlib":77}],245:[function(require,module,exports){
  "use strict";var XHRDownloader=require("./lib/XHRDownloader"),NodeDownloader=require("./lib/NodeDownloader"),Downloader=require("./lib/Downloader");module.exports={XHRDownloader:XHRDownloader,NodeDownloader:NodeDownloader,Downloader:Downloader};


},{"./lib/Downloader":247,"./lib/NodeDownloader":248,"./lib/XHRDownloader":249}],246:[function(require,module,exports){
  var uuid=require("uuid"),AbstractDownloader=function(o,n){if(!(this instanceof AbstractDownloader))throw new Error("XHRDownloader should be called as a constructor.");n&&n.hasOwnProperty("cancelCDNDownloadById")&&n.cancelCDNDownloadById instanceof Function?this.downloadManager=n:this.downloadManager={cancelCDNDownloadById:function(){}},this.downloading=!1,this.id=o||uuid.v4(),this.downloadRequest=null};AbstractDownloader.prototype._makeRange=function(o,n){var t=o||0;return n?"bytes="+t+"-"+n:"bytes="+t+"-"},AbstractDownloader.prototype.abort=function(){this.downloading&&this.downloadRequest&&(this.downloading=!1,this.downloadRequest.abort())},module.exports=AbstractDownloader;


},{"uuid":251}],247:[function(require,module,exports){
  "use strict";var Downloader;Downloader="undefined"!=typeof window&&window.XMLHttpRequest&&window.XMLHttpRequest instanceof Function?require("./XHRDownloader"):require("./NodeDownloader"),module.exports=Downloader;


},{"./NodeDownloader":248,"./XHRDownloader":249}],248:[function(require,module,exports){
  "use strict";var request=require("request"),AbstractDownloader=require("./AbstractDownloader"),NodeDownloader=function(e,r){AbstractDownloader.call(this,e,r)};NodeDownloader.prototype=Object.create(AbstractDownloader.prototype),NodeDownloader.prototype.constructor=NodeDownloader,NodeDownloader.prototype._toArrayBuffer=function(e){for(var r=e||[],o=new ArrayBuffer(r.length),a=new Uint8Array(o),t=0;t<r.length;++t)a[t]=r[t];return o},NodeDownloader.prototype.getURL=function(e,r){var o=this;o.downloading=!0;var a,t,n,d=r||function(){},s={url:e.url,headers:{}};switch(e.responseType&&(a=e.responseType.toLowerCase()),a){case"buffer":case"arraybuffer":s.encoding=null;break;case"text":s.encoding="utf8";break;default:s.encoding="utf8"}e.range&&(s.headers.Range=o._makeRange(e.range.start,e.range.end)),t=Date.now(),o.downloadRequest=request.get(s,function(r,s,u){if(n=Date.now(),r)return o.downloading=!1,o.downloadManager.cancelCDNDownloadById(o.id),void d(r);if("4"===s.statusCode[0]||"5"===s.statusCode[0])return o.downloading=!1,o.downloadManager.cancelCDNDownloadById(o.id),void d(new Error("Server returned a 4XX or 5XX error code."));var l;switch(a){case"buffer":case"text":l=u;break;case"arraybuffer":l=o._toArrayBuffer(u);break;default:l=u}d(null,{response:l,pptes:e.pptes,startTimestamp:t,endTimestamp:n})})},module.exports=NodeDownloader;


},{"./AbstractDownloader":246,"request":184}],249:[function(require,module,exports){
  "use strict";var AbstractDownloader=require("./AbstractDownloader"),XHRDownloader=function(t,e){AbstractDownloader.call(this,t,e)};XHRDownloader.prototype=Object.create(AbstractDownloader.prototype),XHRDownloader.prototype.constructor=XHRDownloader,XHRDownloader.prototype._generateArrayBufferView=function(t){return new Uint8Array(t)},XHRDownloader.prototype._onLoadStart=function(t){this.downloading=!0,this.startDownloadTimestamp=Date.now()},XHRDownloader.prototype._onLoaded=function(t){if(this.downloading=!1,this.endDownloadTimestamp=Date.now(),!(t.target.status>=200&&t.target.status<=299))return void this._onLoadError(t);var e;"arraybuffer"===t.target.responseType&&(e=this._generateArrayBufferView(t.target.response)),t.target._cb(null,{response:t.target.response,pptes:t.target._pptes,startTimestamp:this.startDownloadTimestamp,endTimestamp:this.endDownloadTimestamp,arrayBufferView:e})},XHRDownloader.prototype._onLoadError=function(t){var e;0,this.downloading=!1,this.downloadManager.cancelCDNDownloadById(this.id),e=new Error("Error when processing the request."),e.status=t.target.status,t.target._cb(e)},XHRDownloader.prototype.getURL=function(t,e){var o=e||function(){};this.url_infos=t,this.downloadRequest=new XMLHttpRequest,this.downloadRequest.onloadstart=this._onLoadStart.bind(this),this.downloadRequest.onerror=this._onLoadError.bind(this),this.downloadRequest.onloadend=this._onLoaded.bind(this),this.downloadRequest._pptes=t.pptes,this.downloadRequest._cb=o,this.downloadRequest.open("GET",t.url),t.range&&this.downloadRequest.setRequestHeader("Range",this._makeRange(t.range.start,t.range.end)),t.responseType&&(this.downloadRequest.responseType=t.responseType),this.downloadRequest.send()},module.exports=XHRDownloader;


},{"./AbstractDownloader":246}],250:[function(require,module,exports){
  (function (global){
    var rng;if(global.crypto&&crypto.getRandomValues){var _rnds8=new Uint8Array(16);rng=function(){return crypto.getRandomValues(_rnds8),_rnds8}}if(!rng){var _rnds=new Array(16);rng=function(){for(var r,n=0;16>n;n++)0===(3&n)&&(r=4294967296*Math.random()),_rnds[n]=r>>>((3&n)<<3)&255;return _rnds}}module.exports=rng;


  }).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],251:[function(require,module,exports){
  function parse(e,s,r){var t=s&&r||0,n=0;for(s=s||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>n&&(s[t+n++]=_hexToByte[e])});16>n;)s[t+n++]=0;return s}function unparse(e,s){var r=s||0,t=_byteToHex;return t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]}function v1(e,s,r){var t=s&&r||0,n=s||[];e=e||{};var o=void 0!==e.clockseq?e.clockseq:_clockseq,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,c=a-_lastMSecs+(u-_lastNSecs)/1e4;if(0>c&&void 0===e.clockseq&&(o=o+1&16383),(0>c||a>_lastMSecs)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=a,_lastNSecs=u,_clockseq=o,a+=122192928e5;var i=(1e4*(268435455&a)+u)%4294967296;n[t++]=i>>>24&255,n[t++]=i>>>16&255,n[t++]=i>>>8&255,n[t++]=255&i;var _=a/4294967296*1e4&268435455;n[t++]=_>>>8&255,n[t++]=255&_,n[t++]=_>>>24&15|16,n[t++]=_>>>16&255,n[t++]=o>>>8|128,n[t++]=255&o;for(var d=e.node||_nodeId,v=0;6>v;v++)n[t+v]=d[v];return s?s:unparse(n)}function v4(e,s,r){var t=s&&r||0;"string"==typeof e&&(s="binary"==e?new Array(16):null,e=null),e=e||{};var n=e.random||(e.rng||_rng)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,s)for(var o=0;16>o;o++)s[t+o]=n[o];return s||unparse(n)}for(var _rng=require("./rng"),_byteToHex=[],_hexToByte={},i=0;256>i;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=_rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse,module.exports=uuid;


},{"./rng":250}],252:[function(require,module,exports){
  var M3U = module.exports = function M3U() {
    this.items = {
      PlaylistItem: [],
      StreamItem: [],
      IframeStreamItem: [],
      MediaItem: []
    };
    this.properties = {};
  };

  M3U.PlaylistItem     = require('./m3u/PlaylistItem');
  M3U.MediaItem        = require('./m3u/MediaItem');
  M3U.StreamItem       = require('./m3u/StreamItem');
  M3U.IframeStreamItem = require('./m3u/IframeStreamItem');

  var Item = require('./m3u/Item');

  M3U.create = function createM3U() {
    return new M3U;
  };

  M3U.prototype.get = function getProperty(key) {
    return this.properties[key];
  };

  M3U.prototype.set = function setProperty(key, value) {
    var tagKey = propertyMap.findByTag(key);
    if (tagKey) key = tagKey.key;
    this.properties[key] = coerce[dataTypes[key] || 'unknown'](value);

    return this;
  };

  M3U.prototype.addItem = function addItem(item) {
    var itemClassName = item.constructor.name || item.getClassName();
    this.items[itemClassName].push(item);

    return this;
  };

  M3U.prototype.addPlaylistItem = function addPlaylistItem(data) {
    this.items.PlaylistItem.push(M3U.PlaylistItem.create(data));
  };

  M3U.prototype.addMediaItem = function addMediaItem(data) {
    this.items.MediaItem.push(M3U.MediaItem.create(data));
  };

  M3U.prototype.addStreamItem = function addStreamItem(data) {
    this.items.StreamItem.push(M3U.StreamItem.create(data));
  };

  M3U.prototype.addIframeStreamItem = function addIframeStreamItem(data) {
    this.items.IframeStreamItem.push(M3U.IframeStreamItem.create(data));
  };

  M3U.prototype.domainDurations = function domainDurations() {
    var index = 0;
    return this.items.PlaylistItem.reduce(function(duration, item) {
      if (item.get('discontinuity')) {
        index = duration.push(0) - 1;
      }

      duration[index] += item.get('duration');
      return duration;
    }, [0]);
  };

  M3U.prototype.totalDuration = function totalDuration() {
    return this.items.PlaylistItem.reduce(function(duration, item) {
      return duration + item.get('duration');
    }, 0);
  };

  M3U.prototype.merge = function merge(m3u) {
    if (m3u.get('targetDuration') > this.get('targetDuration')) {
      this.set('targetDuration', m3u.get('targetDuration'));
    }
    m3u.items.PlaylistItem[0].set('discontinuity', true);
    this.items.PlaylistItem = this.items.PlaylistItem.concat(m3u.items.PlaylistItem);

    return this;
  };

  M3U.prototype.toString = function toString() {
    var self   = this;
    var output = ['#EXTM3U'];
    Object.keys(this.properties).forEach(function(key) {
      var tagKey = propertyMap.findByKey(key);
      var tag = tagKey ? tagKey.tag : key;

      if (dataTypes[key] == 'boolean') {
        output.push('#' + tag);
      } else {
        output.push('#' + tag + ':' + self.get(key));
      }
    });

    if (this.items.PlaylistItem.length) {
      output.push(this.items.PlaylistItem.map(itemToString).join('\n'));

      if (this.get('playlistType') === 'VOD') {
        output.push('#EXT-X-ENDLIST');
      }
    } else {
      if (this.items.StreamItem.length) {
        output.push(this.items.StreamItem.map(itemToString).join('\n') + '\n');
      }
      if (this.items.IframeStreamItem.length) {
        output.push(this.items.IframeStreamItem.map(itemToString).join('\n') + '\n');
      }
      if (this.items.MediaItem.length) {
        output.push(this.items.MediaItem.map(itemToString).join('\n') + '\n');
      }
    }

    return output.join('\n') + '\n';
  };

  M3U.prototype.serialize = function serialize() {
    var object = { properties: this.properties, items: {} };
    var self   = this;
    Object.keys(this.items).forEach(function(constructor) {
      object.items[constructor] = self.items[constructor].map(serializeItem);
    });
    return object;
  };

  M3U.unserialize = function unserialize(object) {
    var m3u = new M3U;
    m3u.properties = object.properties;
    Object.keys(object.items).forEach(function(constructor) {
      m3u.items[constructor] = object.items[constructor].map(
        Item.unserialize.bind(null, M3U[constructor])
      );
    });
    return m3u;
  };

  function itemToString(item) {
    return item.toString();
  }

  function serializeItem(item) {
    return item.serialize();
  }

  var coerce = {
    boolean: function coerceBoolean(value) {
      return true;
    },
    integer: function coerceInteger(value) {
      return parseInt(value, 10);
    },
    unknown: function coerceUnknown(value) {
      return value;
    }
  };

  var dataTypes = {
    iframesOnly    : 'boolean',
    targetDuration : 'integer',
    mediaSequence  : 'integer',
    version        : 'integer'
  };

  var propertyMap = [
    { tag: 'EXT-X-ALLOW-CACHE',    key: 'allowCache' },
    { tag: 'EXT-X-I-FRAMES-ONLY',  key: 'iframesOnly' },
    { tag: 'EXT-X-MEDIA-SEQUENCE', key: 'mediaSequence' },
    { tag: 'EXT-X-PLAYLIST-TYPE',  key: 'playlistType' },
    { tag: 'EXT-X-TARGETDURATION', key: 'targetDuration' },
    { tag: 'EXT-X-VERSION',        key: 'version' }
  ];

  propertyMap.findByTag = function findByTag(tag) {
    return propertyMap[propertyMap.map(function(tagKey) {
      return tagKey.tag;
    }).indexOf(tag)];
  };

  propertyMap.findByKey = function findByKey(key) {
    return propertyMap[propertyMap.map(function(tagKey) {
      return tagKey.key;
    }).indexOf(key)];
  };

},{"./m3u/IframeStreamItem":254,"./m3u/Item":255,"./m3u/MediaItem":256,"./m3u/PlaylistItem":257,"./m3u/StreamItem":258}],253:[function(require,module,exports){
  var AttributeList = module.exports = function AttributeList(attributes) {
    this.attributes = {};
    this.mergeAttributes(attributes);
  };

  var dataTypes = AttributeList.dataTypes = {
    'audio'      : 'quoted-string',
    'autoselect' : 'boolean',
    'bandwidth'  : 'decimal-integer',
    'byterange'  : 'enumerated-string',
    'codecs'     : 'quoted-string',
    'default'    : 'boolean',
    'duration'   : 'decimal-floating-point',
    'forced'     : 'boolean',
    'group-id'   : 'quoted-string',
    'language'   : 'quoted-string',
    'name'       : 'quoted-string',
    'program-id' : 'decimal-integer',
    'resolution' : 'decimal-resolution',
    'subtitles'  : 'quoted-string',
    'title'      : 'enumerated-string',
    'type'       : 'enumerated-string',
    'uri'        : 'quoted-string',
    'video'      : 'quoted-string'
  };

  AttributeList.prototype.mergeAttributes = function mergeAttributes(attributes) {
    var self = this;
    if (Array.isArray(attributes)) {
      attributes.forEach(function(attribute) {
        self.set(attribute.key, attribute.value);
      });
    }
  };

  AttributeList.prototype.get = function getValue(key) {
    return this.attributes[key];
  };

  AttributeList.prototype.set = function setValue(key, value) {
    key = key.toLowerCase();
    this.attributes[key] = parse[dataTypes[key] || 'unknown'](value, key);

    return this;
  };

  AttributeList.prototype.getCoerced = function getCoerced(key) {
    return coerce[dataTypes[key] || 'unknown'](this.get(key));
  };

  AttributeList.prototype.toString = function toString() {
    var self = this;
    return Object.keys(this.attributes).map(function(key) {
      return [key.toUpperCase(), self.getCoerced(key)].join('=');
    }).join(',');
  };

  AttributeList.prototype.serialize = function serialize() {
    return this.attributes;
  };

  AttributeList.unserialize = function unserialize(object) {
    var list = new AttributeList;
    list.attributes = object;
    return list;
  };

  var coerce = {
    'boolean': function coerceBoolean(value) {
      return value ? 'YES' : 'NO';
    },
    'decimal-floating-point': parseFloat,
    'decimal-integer': function coerceDecimalInteger(value) {
      return parseInt(value, 10);
    },
    'decimal-resolution': function coerceDecimalResolution(value) {
      if (Array.isArray(value)) {
        return value.join('x');
      } else {
        return value;
      }
    },
    'enumerated-string': function coerceEnumeratedString(value) {
      return value;
    },
    'quoted-string': function coerceQuotedString(value) {
      return '"' + value.replace(/"/g, '\\"') + '"';
    },
    'unknown': function coerceUnknown(value) {
      return value;
    }
  };

  var parse = {
    'boolean': function parseBoolean(value) {
      return typeof value == 'boolean'
        ? value
        : (value == 'YES' ? true : false);
    },
    'decimal-floating-point': parseFloat,
    'decimal-integer': function parseDecimalInteger(value) {
      return parseInt(value, 10);
    },
    'decimal-resolution': function coerceDecimalResolution(value) {
      return value.split('x').map(parse['decimal-integer']);
    },
    'enumerated-string': function parseEnumeratedString(value) {
      return value;
    },
    'quoted-string': function parseQuotedString(value) {
      if (Array.isArray(value)) {
        return value.join(',');
      } else if (value.indexOf('"') === 0 &&
        value.lastIndexOf('"') == value.length - 1) {
        return value.slice(1,-1);
      } else {
        return value;
      }
    },
    'unknown': function parseUnknown(value, key) {
      0;
      return value;
    }
  };
},{}],254:[function(require,module,exports){
  var util       = require('util'),
    StreamItem = require('./StreamItem');

  var IframeStreamItem = module.exports = function IframeStreamItem(attributes) {
    StreamItem.apply(this, arguments);

    delete this.properties['uri'];
  };

  util.inherits(IframeStreamItem, StreamItem);

  IframeStreamItem.create = function createIframeStreamItem(data) {
    var item =  new IframeStreamItem();
    item.setData(data);
    return item;
  };

  IframeStreamItem.prototype.toString = function toString() {
    return '#EXT-X-I-FRAME-STREAM-INF:' + this.attributes.toString();
  };
},{"./StreamItem":258,"util":109}],255:[function(require,module,exports){
  var AttributeList    = require('./AttributeList');

  var Item = module.exports = function Item(attributes) {
    this.attributes = new AttributeList(attributes);
    this.properties = {
      byteRange     : null,
      date          : null,
      discontinuity : null,
      duration      : null,
      title         : null,
      uri           : null
    };
  };

  Item.prototype.get = function get(key) {
    if (this.propertiesHasKey(key)) {
      return this.properties[key];
    } else {
      return this.attributes.get(key);
    }
  };

  Item.prototype.set = function set(key, value) {
    if (this.propertiesHasKey(key)) {
      this.properties[key] = value;
    } else {
      this.attributes.set(key, value);
    }

    return this;
  };

  Item.prototype.serialize = function serialize() {
    return {
      attributes  : this.attributes.serialize(),
      properties  : this.properties
    }
  };

  Item.unserialize = function unserialize(constructor, object) {
    var item = new constructor;
    item.attributes = AttributeList.unserialize(object.attributes);
    item.properties = object.properties;
    return item;
  };

  Item.prototype.setData = function setData(data) {
    var self = this;
    Object.keys(data).forEach(function(key) {
      self.set(key, data[key]);
    });
  };

  Item.prototype.propertiesHasKey = function hasKey(key) {
    return Object.keys(this.properties).indexOf(key) > -1;
  };

  Item.prototype.getClassName = function getName() {
    return this.constructor.toString().match(/function (\w*)/)[1];
  };

},{"./AttributeList":253}],256:[function(require,module,exports){
  var util = require('util'),
    Item = require('./Item');

  var MediaItem = module.exports = function MediaItem(attributes) {
    Item.apply(this, arguments);

    delete this.properties['uri'];
  };

  util.inherits(MediaItem, Item);

  MediaItem.create = function createMediaItem(data) {
    var item = new MediaItem();
    item.setData(data);
    return item;
  };

  MediaItem.prototype.toString = function toString() {
    return '#EXT-X-MEDIA:' + this.attributes.toString();
  };
},{"./Item":255,"util":109}],257:[function(require,module,exports){
  var util = require('util'),
    Item = require('./Item');

  var PlaylistItem = module.exports = function PlaylistItem() {
    Item.call(this);
    this.properties.key = null;
  };

  util.inherits(PlaylistItem, Item);

  PlaylistItem.create = function createPlaylistItem(data) {
    var item = new PlaylistItem();
    item.setData(data);
    return item;
  };

  PlaylistItem.prototype.toString = function toString() {
    var output = [];
    if (this.get('discontinuity')) {
      output.push('#EXT-X-DISCONTINUITY');
    }
    if (this.get('date')) {
      var date = this.get('date');
      if (date.getMonth) {
        date = date.toISOString();
      }
      output.push('#EXT-X-PROGRAM-DATE-TIME:' + date);
    }
    if (this.get('duration') != null || this.get('title') != null) {
      output.push(
        '#EXTINF:' + [this.get('duration').toFixed(4), this.get('title')].join(',')
      );
    }
    if (this.get('byteRange') != null) {
      output.push('#EXT-X-BYTERANGE:' + this.get('byteRange'));
    }
    output.push(this.get('uri'));

    return output.join('\n');
  };

},{"./Item":255,"util":109}],258:[function(require,module,exports){
  var util = require('util'),
    Item = require('./Item'),
    AttributeList = require('./AttributeList');

  var StreamItem = module.exports = function StreamItem(attributes) {
    Item.apply(this, arguments);
  };

  util.inherits(StreamItem, Item);

  StreamItem.create = function createStreamItem(data) {
    var item = new StreamItem();
    item.setData(data);
    return item;
  };

  StreamItem.prototype.toString = function toString() {
    var output = [];
    output.push('#EXT-X-STREAM-INF:' + this.attributes.toString());
    output.push(this.get('uri'));

    return output.join('\n');
  };
},{"./AttributeList":253,"./Item":255,"util":109}],259:[function(require,module,exports){
  /*!
   * ChunkedStream
   * Copyright(c) 2012 Daniel D. Shaw <dshaw@dshaw.com>
   * MIT Licensed
   */

  /**
   * Module dependencies.
   */

  var Stream = require('stream').Stream
    , util = require('util')

  /**
   * Exports.
   */

  module.exports = ChunkedStream

  /**
   * Chunked Stream
   *
   * - Buffers and rechunks on a specific character, by default '\n'.
   */


  function ChunkedStream (matcher, passEmpty) {
    if (!(this instanceof ChunkedStream)) return new ChunkedStream(matcher, passEmpty)

    if (typeof matcher === 'undefined') {
      matcher = '\n'
    }

    this.matcher = matcher
    this.passEmpty = passEmpty
    this.buffer = ''

    this.writable = true
    this.readable = true
  }

  util.inherits(ChunkedStream, Stream)


  ChunkedStream.prototype.write = function (chunk) {
    chunk = chunk.toString()
    var len = chunk.length
      , i = 0

    while (i < len) {
      var char = chunk[i].toString()
      this.buffer += char
      if (char == this.matcher) {
        var data = this.buffer
        this.buffer = ''
        if (!this.passEmpty && data == this.matcher) {
          return true // skip
        }
        this.emit('data', data)
      }
      i++
    }
    return true
  }

  ChunkedStream.prototype.end = function () {
    if (this.buffer) {
      this.emit('data', this.buffer)
    }
    this.emit('end')
  }

},{"stream":101,"util":109}],260:[function(require,module,exports){
  var util = require('util'),
    ChunkedStream = require('chunked-stream'),
    M3U = require('./m3u'),
    PlaylistItem = require('./m3u/PlaylistItem'),
    StreamItem = require('./m3u/StreamItem'),
    IframeStreamItem = require('./m3u/IframeStreamItem'),
    MediaItem = require('./m3u/MediaItem');

// used for splitting strings by commas not within double quotes
  var NON_QUOTED_COMMA = /,(?=(?:[^"]|"[^"]*")*$)/;

  var REG = /METHOD=([^,]*)(?:,URI="([^"]*)"(?:,IV=0[xX](.*))?)?/;

  var m3uParser = module.exports = function m3uParser() {
    ChunkedStream.apply(this, ['\n', true]);

    this.linesRead = 0;
    this.m3u = new M3U;

    this.on('data', this.parse.bind(this));
    var self = this;
    this.on('end', function() {
      self.emit('m3u', self.m3u);
    });
  };

  util.inherits(m3uParser, ChunkedStream);

  m3uParser.M3U = M3U;

  m3uParser.createStream = function() {
    return new m3uParser;
  };

  m3uParser.prototype.parse = function parse(line) {
    line = line.trim();
    if (this.linesRead == 0) {
      if (line != '#EXTM3U') {
        return this.emit('error', new Error(
          'Non-valid M3U file. First line: ' + line
        ));
      }
      this.linesRead++;
      return true;
    }
    if ([''].indexOf(line) > -1) return true;
    if (['#EXT-X-ENDLIST'].indexOf(line) > -1){
      this.m3u.set("EXT-X-PLAYLIST-TYPE", "VOD");
      return true;
    }
    if (line.indexOf('#') == 0) {
      this.parseLine(line);
    } else {
      if (this.currentItem.attributes.uri != undefined) {
        this.addItem(new PlaylistItem);
      }
      this.currentItem.set('uri', line);
      this.emit('item', this.currentItem);
    }
    this.linesRead++;
  };

  m3uParser.prototype.parseLine = function parseLine(line) {
    var parts = line.slice(1).split(/:(.*)/);
    var tag   = parts[0];
    var data  = parts[1];
    if (typeof this[tag] == 'function') {
      this[tag](data, tag);
    } else {
      this.m3u.set(tag, data);
    }
  };

  m3uParser.prototype.addItem = function addItem(item) {
    this.m3u.addItem(item);
    this.currentItem = item;
    return item;
  };

  m3uParser.prototype['EXTINF'] = function parseInf(data) {
    this.addItem(new PlaylistItem);
    if(this.currentKey){
      this.currentItem.set('key',this.currentKey);
    }
    data = data.split(',');
    this.currentItem.set('duration', parseFloat(data[0]));
    this.currentItem.set('title', data[1]);
  };


  m3uParser.prototype['EXT-X-KEY'] = function parseInf(data) {

    var method = data.replace(REG,"$1");
    var uri = data.replace(REG,"$2");
    var ivString = data.replace(REG,"$3");
    var iv;

    //TODO: replace the raw JavaScript object by a Object inheriting from Item
    this.currentKey = {
      method: method
    };
    if(uri.length){
      this.currentKey.url= uri;
    }

    if(ivString.length){
      iv = new Uint8Array(16);
      for(var i=0; i<32; i+=2){
        var byteString = ivString.substr(i, 2);
        var byteInt = parseInt(byteString, 16);
        iv.set([byteInt],i/2);
      }
      this.currentKey.iv= iv;
    }
  };

  m3uParser.prototype['EXT-X-BYTERANGE'] = function parseByteRange(data) {
    this.currentItem.set('byteRange', data);
  };

  m3uParser.prototype['EXT-X-STREAM-INF'] = function(data) {
    this.addItem(new StreamItem(this.parseAttributes(data)));
  };

  m3uParser.prototype['EXT-X-I-FRAME-STREAM-INF'] = function(data) {
    this.addItem(new IframeStreamItem(this.parseAttributes(data)));
    this.emit('item', this.currentItem);
  };

  m3uParser.prototype['EXT-X-MEDIA'] = function(data) {
    this.addItem(new MediaItem(this.parseAttributes(data)));
    this.emit('item', this.currentItem);
  };

  m3uParser.prototype.parseAttributes = function parseAttributes(data) {
    data = data.split(NON_QUOTED_COMMA);
    var self = this;
    return data.map(function(attribute) {
      var keyValue = attribute.split(/=(.+)/).map(function(str) {
        return str.trim();
      });
      return {
        key   : keyValue[0],
        value : keyValue[1]
      };
    });
  };

},{"./m3u":252,"./m3u/IframeStreamItem":254,"./m3u/MediaItem":256,"./m3u/PlaylistItem":257,"./m3u/StreamItem":258,"chunked-stream":259,"util":109}],261:[function(require,module,exports){
  function DOMParser(t){this.options=t||{locator:{}}}function buildErrorHandler(t,e,n){function r(e){var r=t[e];if(!r)if(i)r=2==t.length?function(n){t(e,n)}:t;else for(var a=arguments.length;--a&&!(r=t[arguments[a]]););o[e]=r&&function(t){r(t+_locator(n))}||function(){}}if(!t){if(e instanceof DOMHandler)return e;t=e}var o={},i=t instanceof Function;return n=n||{},r("warning","warn"),r("error","warn","warning"),r("fatalError","warn","warning","error"),o}function DOMHandler(){this.cdata=!1}function position(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function _locator(t){return t?"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]":void 0}function _toString(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function appendElement(t,e){t.currentElement?t.currentElement.appendChild(e):t.document.appendChild(e)}if(DOMParser.prototype.parseFromString=function(t,e){var n=this.options,r=new XMLReader,o=n.domBuilder||new DOMHandler,i=n.errorHandler,a=n.locator,c=n.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),r.errorHandler=buildErrorHandler(i,o,a),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(l.nbsp="Â ",l.copy="Â©",c[""]="http://www.w3.org/1999/xhtml"),t?r.parse(t,c,l):r.errorHandler.error("invalid document source"),o.document},DOMHandler.prototype={startDocument:function(){this.document=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var o=this.document,i=o.createElementNS(t,n||e),a=r.length;appendElement(this,i),this.currentElement=i,this.locator&&position(this.locator,i);for(var c=0;a>c;c++){var t=r.getURI(c),l=r.getValue(c),n=r.getQName(c),s=o.createAttributeNS(t,n);s.getOffset&&position(s.getOffset(1),s),s.value=s.nodeValue=l,i.setAttributeNode(s)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.document.createProcessingInstruction(t,e);this.locator&&position(this.locator,n),appendElement(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=_toString.apply(this,arguments),this.currentElement&&t){if(this.cdata){var r=this.document.createCDATASection(t);this.currentElement.appendChild(r)}else{var r=this.document.createTextNode(t);this.currentElement.appendChild(r)}this.locator&&position(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=_toString.apply(this,arguments);var r=this.document.createComment(t);this.locator&&position(this.locator,r),appendElement(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.document.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(t,e,n);this.locator&&position(this.locator,o),appendElement(this,o)}},warning:function(t){0},error:function(t){0},fatalError:function(t){throw 0,t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){DOMHandler.prototype[t]=function(){return null}}),"function"==typeof require){var XMLReader=require("./sax").XMLReader,DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer,exports.DOMParser=DOMParser}


},{"./dom":262,"./sax":263}],262:[function(require,module,exports){
  function copy(e,t){for(var n in e)t[n]=e[n]}function _extends(e,t){function n(){}var o=e.prototype;if(Object.create){var i=Object.create(t.prototype);o.__proto__=i}o instanceof t||(n.prototype=t.prototype,n=new n,copy(o,n),e.prototype=o=n),o.constructor!=e&&("function"!=typeof e&&0,o.constructor=e)}function DOMException(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);__set__(e,"length",n.length),copy(n,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,o){if(o?t[_findNodeIndex(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(o&&_onRemoveAttribute(i,e,o),_onAddAttribute(i,e,n))}}function _removeNamedNode(e,t,n){var o=_findNodeIndex(t,n);if(!(o>=0))throw DOMException(NOT_FOUND_ERR,new Error);for(var i=t.length-1;i>o;)t[o]=t[++o];if(t.length=i,e){var r=e.ownerDocument;r&&(_onRemoveAttribute(r,e,n),n.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do if(_visitNode(e,t))return!0;while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,n){e&&e._inc++;var o=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==o&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function _onRemoveAttribute(e,t,n,o){e&&e._inc++;var i=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==i&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var i=t.firstChild,r=0;i;)o[r++]=i,i=i.nextSibling;o.length=r}}}function _removeChild(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var i=t.firstChild;if(null==i)return t;var r=t.lastChild}else i=r=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,r.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=r:n.previousSibling=r;do i.parentNode=e;while(i!==r&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var n=t.parentNode;if(n){var o=e.lastChild;n.removeChild(t);var o=e.lastChild}var o=e.lastChild;return t.parentNode=e,t.previousSibling=o,t.nextSibling=null,o?o.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function serializeToString(e,t){switch(e.nodeType){case ELEMENT_NODE:var n=e.attributes,o=n.length,i=e.firstChild,r=e.tagName,a=htmlns===e.namespaceURI;t.push("<",r);for(var s=0;o>s;s++)serializeToString(n.item(s),t,a);if(i||a&&!/^(?:meta|link|img|br|hr|input)$/i.test(r)){if(t.push(">"),a&&/^script$/i.test(r))i&&t.push(i.data);else for(;i;)serializeToString(i,t),i=i.nextSibling;t.push("</",r,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var i=e.firstChild;i;)serializeToString(i,t),i=i.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("<!--",e.data,"-->");case DOCUMENT_TYPE_NODE:var u=e.publicId,d=e.systemId;if(t.push("<!DOCTYPE ",e.name),u)t.push(' PUBLIC "',u),d&&"."!=d&&t.push('" "',d),t.push('">');else if(d&&"."!=d)t.push(' SYSTEM "',d,'">');else{var c=e.internalSubset;c&&t.push(" [",c,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,n){var o;switch(t.nodeType){case ELEMENT_NODE:o=t.cloneNode(!1),o.ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:n=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,n)for(var i=t.firstChild;i;)o.appendChild(importNode(e,i,n)),i=i.nextSibling;return o}function cloneNode(e,t,n){var o=new t.constructor;for(var i in t){var r=t[i];"object"!=typeof r&&r!=o[i]&&(o[i]=r)}switch(t.childNodes&&(o.childNodes=new NodeList),o.ownerDocument=e,o.nodeType){case ELEMENT_NODE:var a=t.attributes,s=o.attributes=new NamedNodeMap,u=a.length;s._ownerElement=o;for(var d=0;u>d;d++)o.setAttributeNode(cloneNode(e,a.item(d),!0));break;case ATTRIBUTE_NODE:n=!0}if(n)for(var c=t.firstChild;c;)o.appendChild(cloneNode(e,c,n)),c=c.nextSibling;return o}function __set__(e,t,n){e[t]=n}function getTextContent(e){switch(e.nodeType){case 1:case 11:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return n&&(!t||t in n)?!0:!1},createDocument:function(e,t,n){var o=new Document;if(o.doctype=n,n&&o.appendChild(n),o.implementation=this,o.childNodes=new NodeList,t){var i=o.createElementNS(e,t);o.appendChild(i)}return o},createDocumentType:function(e,t,n){var o=new DocumentType;return o.name=e,o.nodeName=e,o.publicId=t,o.systemId=n,o}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(n[o]==e)return o;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,function(n){return 1==n.nodeType&&n.getAttribute("id")==e?(t=n,!0):void 0}),t},createElement:function(e){var t=new Element;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList;var n=t.attributes=new NamedNodeMap;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,o=t.split(":"),i=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Attr,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,function(t){var n=[];return _visitNode(t,function(o){o===t||o.nodeType!=ELEMENT_NODE||"*"!==e&&o.tagName!=e||n.push(o)}),n})},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,function(n){var o=[];return _visitNode(n,function(i){i===n||i.nodeType!==ELEMENT_NODE||i.namespaceURI!==e||"*"!==t&&i.localName!=t||o.push(i)}),o})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ExceptionMessage[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var o=this.data.substring(0,e),i=this.data.substring(e+t);n=o+n+i,this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e){var t=[];return serializeToString(e,t),t.join("")},Node.prototype.toString=function(){return XMLSerializer.prototype.serializeToString(this)};try{Object.defineProperty&&(Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=value,this.nodeValue=e}}}),__set__=function(e,t,n){e["$$"+t]=n})}catch(e){}"function"==typeof require&&(exports.DOMImplementation=DOMImplementation,exports.XMLSerializer=XMLSerializer);


},{}],263:[function(require,module,exports){
//[4]   	NameStartChar	   ::=   	":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]
//[4a]   	NameChar	   ::=   	NameStartChar | "-" | "." | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]
//[5]   	Name	   ::=   	NameStartChar (NameChar)*
  var nameStartChar = /[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]///\u10000-\uEFFFF
  var nameChar = new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\u00B7\u0300-\u036F\\ux203F-\u2040]");
  var tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\:'+nameStartChar.source+nameChar.source+'*)?$');
//var tagNamePattern = /^[a-zA-Z_][\w\-\.]*(?:\:[a-zA-Z_][\w\-\.]*)?$/
//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')

//S_TAG,	S_ATTR,	S_EQ,	S_V
//S_ATTR_S,	S_E,	S_S,	S_C
  var S_TAG = 0;//tag name offerring
  var S_ATTR = 1;//attr name offerring 
  var S_ATTR_S=2;//attr name end and space offer
  var S_EQ = 3;//=space?
  var S_V = 4;//attr value(no quot value only)
  var S_E = 5;//attr value end and no space(quot end)
  var S_S = 6;//(attr value end || tag end ) && (space offer)
  var S_C = 7;//closed el<el />

  function XMLReader(){

  }

  XMLReader.prototype = {
    parse:function(source,defaultNSMap,entityMap){
      var domBuilder = this.domBuilder;
      domBuilder.startDocument();
      _copy(defaultNSMap ,defaultNSMap = {})
      parse(source,defaultNSMap,entityMap,
        domBuilder,this.errorHandler);
      domBuilder.endDocument();
    }
  }
  function parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){
    function fixedFromCharCode(code) {
      // String.prototype.fromCharCode does not supports
      // > 2 bytes unicode chars directly
      if (code > 0xffff) {
        code -= 0x10000;
        var surrogate1 = 0xd800 + (code >> 10)
          , surrogate2 = 0xdc00 + (code & 0x3ff);

        return String.fromCharCode(surrogate1, surrogate2);
      } else {
        return String.fromCharCode(code);
      }
    }
    function entityReplacer(a){
      var k = a.slice(1,-1);
      if(k in entityMap){
        return entityMap[k];
      }else if(k.charAt(0) === '#'){
        return fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))
      }else{
        errorHandler.error('entity not found:'+a);
        return a;
      }
    }
    function appendText(end){//has some bugs
      var xt = source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);
      locator&&position(start);
      domBuilder.characters(xt,0,end-start);
      start = end
    }
    function position(start,m){
      while(start>=endPos && (m = linePattern.exec(source))){
        startPos = m.index;
        endPos = startPos + m[0].length;
        locator.lineNumber++;
        //console.log('line++:',locator,startPos,endPos)
      }
      locator.columnNumber = start-startPos+1;
    }
    var startPos = 0;
    var endPos = 0;
    var linePattern = /.+(?:\r\n?|\n)|.*$/g
    var locator = domBuilder.locator;

    var parseStack = [{currentNSMap:defaultNSMapCopy}]
    var closeMap = {};
    var start = 0;
    while(true){
      var i = source.indexOf('<',start);
      if(i<0){
        if(!source.substr(start).match(/^\s*$/)){
          var doc = domBuilder.document;
          var text = doc.createTextNode(source.substr(start));
          doc.appendChild(text);
          domBuilder.currentElement = text;
        }
        return;
      }
      if(i>start){
        appendText(i);
      }
      switch(source.charAt(i+1)){
        case '/':
          var end = source.indexOf('>',i+3);
          var tagName = source.substring(i+2,end);
          var config = parseStack.pop();
          var localNSMap = config.localNSMap;

          if(config.tagName != tagName){
            errorHandler.fatalError("end tag name: "+tagName+' is not match the current start tagName:'+config.tagName );
          }
          domBuilder.endElement(config.uri,config.localName,tagName);
          if(localNSMap){
            for(var prefix in localNSMap){
              domBuilder.endPrefixMapping(prefix) ;
            }
          }
          end++;
          break;
        // end elment
        case '?':// <?...?>
          locator&&position(i);
          end = parseInstruction(source,i,domBuilder);
          break;
        case '!':// <!doctype,<![CDATA,<!--
          locator&&position(i);
          end = parseDCC(source,i,domBuilder,errorHandler);
          break;
        default:
          try{
            locator&&position(i);

            var el = new ElementAttributes();

            //elStartEnd
            var end = parseElementStartPart(source,i,el,entityReplacer,errorHandler);
            var len = el.length;
            //position fixed
            if(len && locator){
              var backup = copyLocator(locator,{});
              for(var i = 0;i<len;i++){
                var a = el[i];
                position(a.offset);
                a.offset = copyLocator(locator,{});
              }
              copyLocator(backup,locator);
            }
            if(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){
              el.closed = true;
              if(!entityMap.nbsp){
                errorHandler.warning('unclosed xml attribute');
              }
            }
            appendElement(el,domBuilder,parseStack);


            if(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){
              end = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)
            }else{
              end++;
            }
          }catch(e){
            errorHandler.error('element parse error: '+e);
            end = -1;
          }

      }
      if(end<0){
        //TODO: è¿™é‡Œæœ‰å¯èƒ½saxå›žé€€ï¼Œæœ‰ä½ç½®é”™è¯¯é£Žé™©
        appendText(i+1);
      }else{
        start = end;
      }
    }
  }
  function copyLocator(f,t){
    t.lineNumber = f.lineNumber;
    t.columnNumber = f.columnNumber;
    return t;

  }

  /**
   * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);
   * @return end of the elementStartPart(end of elementEndPart for selfClosed el)
   */
  function parseElementStartPart(source,start,el,entityReplacer,errorHandler){
    var attrName;
    var value;
    var p = ++start;
    var s = S_TAG;//status
    while(true){
      var c = source.charAt(p);
      switch(c){
        case '=':
          if(s === S_ATTR){//attrName
            attrName = source.slice(start,p);
            s = S_EQ;
          }else if(s === S_ATTR_S){
            s = S_EQ;
          }else{
            //fatalError: equal must after attrName or space after attrName
            throw new Error('attribute equal must after attrName');
          }
          break;
        case '\'':
        case '"':
          if(s === S_EQ){//equal
            start = p+1;
            p = source.indexOf(c,start)
            if(p>0){
              value = source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);
              el.add(attrName,value,start-1);
              s = S_E;
            }else{
              //fatalError: no end quot match
              throw new Error('attribute value no end \''+c+'\' match');
            }
          }else if(s == S_V){
            value = source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);
            //console.log(attrName,value,start,p)
            el.add(attrName,value,start);
            //console.dir(el)
            errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+')!!');
            start = p+1;
            s = S_E
          }else{
            //fatalError: no equal before
            throw new Error('attribute value must after "="');
          }
          break;
        case '/':
          switch(s){
            case S_TAG:
              el.setTagName(source.slice(start,p));
            case S_E:
            case S_S:
            case S_C:
              s = S_C;
              el.closed = true;
            case S_V:
            case S_ATTR:
            case S_ATTR_S:
              break;
            //case S_EQ:
            default:
              throw new Error("attribute invalid close char('/')")
          }
          break;
        case ''://end document
          //throw new Error('unexpected end of input')
          errorHandler.error('unexpected end of input');
        case '>':
          switch(s){
            case S_TAG:
              el.setTagName(source.slice(start,p));
            case S_E:
            case S_S:
            case S_C:
              break;//normal
            case S_V://Compatible state
            case S_ATTR:
              value = source.slice(start,p);
              if(value.slice(-1) === '/'){
                el.closed  = true;
                value = value.slice(0,-1)
              }
            case S_ATTR_S:
              if(s === S_ATTR_S){
                value = attrName;
              }
              if(s == S_V){
                errorHandler.warning('attribute "'+value+'" missed quot(")!!');
                el.add(attrName,value.replace(/&#?\w+;/g,entityReplacer),start)
              }else{
                errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!')
                el.add(value,value,start)
              }
              break;
            case S_EQ:
              throw new Error('attribute value missed!!');
          }
//			console.log(tagName,tagNamePattern,tagNamePattern.test(tagName))
          return p;
        /*xml space '\x20' | #x9 | #xD | #xA; */
        case '\u0080':
          c = ' ';
        default:
          if(c<= ' '){//space
            switch(s){
              case S_TAG:
                el.setTagName(source.slice(start,p));//tagName
                s = S_S;
                break;
              case S_ATTR:
                attrName = source.slice(start,p)
                s = S_ATTR_S;
                break;
              case S_V:
                var value = source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);
                errorHandler.warning('attribute "'+value+'" missed quot(")!!');
                el.add(attrName,value,start)
              case S_E:
                s = S_S;
                break;
              //case S_S:
              //case S_EQ:
              //case S_ATTR_S:
              //	void();break;
              //case S_C:
              //ignore warning
            }
          }else{//not space
//S_TAG,	S_ATTR,	S_EQ,	S_V
//S_ATTR_S,	S_E,	S_S,	S_C
            switch(s){
              //case S_TAG:void();break;
              //case S_ATTR:void();break;
              //case S_V:void();break;
              case S_ATTR_S:
                errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead!!')
                el.add(attrName,attrName,start);
                start = p;
                s = S_ATTR;
                break;
              case S_E:
                errorHandler.warning('attribute space is required"'+attrName+'"!!')
              case S_S:
                s = S_ATTR;
                start = p;
                break;
              case S_EQ:
                s = S_V;
                start = p;
                break;
              case S_C:
                throw new Error("elements closed character '/' and '>' must be connected to");
            }
          }
      }
      p++;
    }
  }
  /**
   * @return end of the elementStartPart(end of elementEndPart for selfClosed el)
   */
  function appendElement(el,domBuilder,parseStack){
    var tagName = el.tagName;
    var localNSMap = null;
    var currentNSMap = parseStack[parseStack.length-1].currentNSMap;
    var i = el.length;
    while(i--){
      var a = el[i];
      var qName = a.qName;
      var value = a.value;
      var nsp = qName.indexOf(':');
      if(nsp>0){
        var prefix = a.prefix = qName.slice(0,nsp);
        var localName = qName.slice(nsp+1);
        var nsPrefix = prefix === 'xmlns' && localName
      }else{
        localName = qName;
        prefix = null
        nsPrefix = qName === 'xmlns' && ''
      }
      //can not set prefix,because prefix !== ''
      a.localName = localName ;
      //prefix == null for no ns prefix attribute 
      if(nsPrefix !== false){//hack!!
        if(localNSMap == null){
          localNSMap = {}
          //console.log(currentNSMap,0)
          _copy(currentNSMap,currentNSMap={})
          //console.log(currentNSMap,1)
        }
        currentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;
        a.uri = 'http://www.w3.org/2000/xmlns/'
        domBuilder.startPrefixMapping(nsPrefix, value)
      }
    }
    var i = el.length;
    while(i--){
      a = el[i];
      var prefix = a.prefix;
      if(prefix){//no prefix attribute has no namespace
        if(prefix === 'xml'){
          a.uri = 'http://www.w3.org/XML/1998/namespace';
        }if(prefix !== 'xmlns'){
          a.uri = currentNSMap[prefix]

          //{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}
        }
      }
    }
    var nsp = tagName.indexOf(':');
    if(nsp>0){
      prefix = el.prefix = tagName.slice(0,nsp);
      localName = el.localName = tagName.slice(nsp+1);
    }else{
      prefix = null;//important!!
      localName = el.localName = tagName;
    }
    //no prefix element has default namespace
    var ns = el.uri = currentNSMap[prefix || ''];
    domBuilder.startElement(ns,localName,tagName,el);
    //endPrefixMapping and startPrefixMapping have not any help for dom builder
    //localNSMap = null
    if(el.closed){
      domBuilder.endElement(ns,localName,tagName);
      if(localNSMap){
        for(prefix in localNSMap){
          domBuilder.endPrefixMapping(prefix)
        }
      }
    }else{
      el.currentNSMap = currentNSMap;
      el.localNSMap = localNSMap;
      parseStack.push(el);
    }
  }
  function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){
    if(/^(?:script|textarea)$/i.test(tagName)){
      var elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);
      var text = source.substring(elStartEnd+1,elEndStart);
      if(/[&<]/.test(text)){
        if(/^script$/i.test(tagName)){
          //if(!/\]\]>/.test(text)){
          //lexHandler.startCDATA();
          domBuilder.characters(text,0,text.length);
          //lexHandler.endCDATA();
          return elEndStart;
          //}
        }//}else{//text area
        text = text.replace(/&#?\w+;/g,entityReplacer);
        domBuilder.characters(text,0,text.length);
        return elEndStart;
        //}

      }
    }
    return elStartEnd+1;
  }
  function fixSelfClosed(source,elStartEnd,tagName,closeMap){
    //if(tagName in closeMap){
    var pos = closeMap[tagName];
    if(pos == null){
      //console.log(tagName)
      pos = closeMap[tagName] = source.lastIndexOf('</'+tagName+'>')
    }
    return pos<elStartEnd;
    //} 
  }
  function _copy(source,target){
    for(var n in source){target[n] = source[n]}
  }
  function parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'
    var next= source.charAt(start+2)
    switch(next){
      case '-':
        if(source.charAt(start + 3) === '-'){
          var end = source.indexOf('-->',start+4);
          //append comment source.substring(4,end)//<!--
          if(end>start){
            domBuilder.comment(source,start+4,end-start-4);
            return end+3;
          }else{
            errorHandler.error("Unclosed comment");
            return -1;
          }
        }else{
          //error
          return -1;
        }
      default:
        if(source.substr(start+3,6) == 'CDATA['){
          var end = source.indexOf(']]>',start+9);
          domBuilder.startCDATA();
          domBuilder.characters(source,start+9,end-start-9);
          domBuilder.endCDATA()
          return end+3;
        }
        //<!DOCTYPE
        //startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) 
        var matchs = split(source,start);
        var len = matchs.length;
        if(len>1 && /!doctype/i.test(matchs[0][0])){
          var name = matchs[1][0];
          var pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0]
          var sysid = len>4 && matchs[4][0];
          var lastMatch = matchs[len-1]
          domBuilder.startDTD(name,pubid && pubid.replace(/^(['"])(.*?)\1$/,'$2'),
            sysid && sysid.replace(/^(['"])(.*?)\1$/,'$2'));
          domBuilder.endDTD();

          return lastMatch.index+lastMatch[0].length
        }
    }
    return -1;
  }



  function parseInstruction(source,start,domBuilder){
    var end = source.indexOf('?>',start);
    if(end){
      var match = source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
      if(match){
        var len = match[0].length;
        domBuilder.processingInstruction(match[1], match[2]) ;
        return end+2;
      }else{//error
        return -1;
      }
    }
    return -1;
  }

  /**
   * @param source
   */
  function ElementAttributes(source){

  }
  ElementAttributes.prototype = {
    setTagName:function(tagName){
      if(!tagNamePattern.test(tagName)){
        throw new Error('invalid tagName:'+tagName)
      }
      this.tagName = tagName
    },
    add:function(qName,value,offset){
      if(!tagNamePattern.test(qName)){
        throw new Error('invalid attribute:'+qName)
      }
      this[this.length++] = {qName:qName,value:value,offset:offset}
    },
    length:0,
    getLocalName:function(i){return this[i].localName},
    getOffset:function(i){return this[i].offset},
    getQName:function(i){return this[i].qName},
    getURI:function(i){return this[i].uri},
    getValue:function(i){return this[i].value}
//	,getIndex:function(uri, localName)){
//		if(localName){
//			
//		}else{
//			var qName = uri
//		}
//	},
//	getValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},
//	getType:function(uri,localName){}
//	getType:function(i){},
  }




  function _set_proto_(thiz,parent){
    thiz.__proto__ = parent;
    return thiz;
  }
  if(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){
    _set_proto_ = function(thiz,parent){
      function p(){};
      p.prototype = parent;
      p = new p();
      for(parent in thiz){
        p[parent] = thiz[parent];
      }
      return p;
    }
  }

  function split(source,start){
    var match;
    var buf = [];
    var reg = /'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
    reg.lastIndex = start;
    reg.exec(source);//skip <
    while(match = reg.exec(source)){
      buf.push(match);
      if(match[1])return buf;
    }
  }

  if(typeof require == 'function'){
    exports.XMLReader = XMLReader;
  }


},{}],264:[function(require,module,exports){
  !function(i,e){"use strict";var s="0.7.3",o="",r="?",n="function",a="undefined",t="object",w="major",d="model",l="name",c="type",p="vendor",m="version",u="architecture",f="console",g="mobile",h="tablet",b="smarttv",v="wearable",x="embedded",k={extend:function(i,e){for(var s in e)-1!=="browser cpu device engine os".indexOf(s)&&e[s].length%2===0&&(i[s]=e[s].concat(i[s]));return i},has:function(i,e){return"string"==typeof i?-1!==e.toLowerCase().indexOf(i.toLowerCase()):void 0},lowerize:function(i){return i.toLowerCase()}},y={rgx:function(){for(var i,s,o,r,w,d,l,c=0,p=arguments;c<p.length&&!d;){var m=p[c],u=p[c+1];if(typeof i===a){i={};for(r in u)w=u[r],typeof w===t?i[w[0]]=e:i[w]=e}for(s=o=0;s<m.length&&!d;)if(d=m[s++].exec(this.getUA()))for(r=0;r<u.length;r++)l=d[++o],w=u[r],typeof w===t&&w.length>0?2==w.length?typeof w[1]==n?i[w[0]]=w[1].call(this,l):i[w[0]]=w[1]:3==w.length?typeof w[1]!==n||w[1].exec&&w[1].test?i[w[0]]=l?l.replace(w[1],w[2]):e:i[w[0]]=l?w[1].call(this,l,w[2]):e:4==w.length&&(i[w[0]]=l?w[3].call(this,l.replace(w[1],w[2])):e):i[w]=l?l:e;c+=2}return i},str:function(i,s){for(var o in s)if(typeof s[o]===t&&s[o].length>0){for(var n=0;n<s[o].length;n++)if(k.has(s[o][n],i))return o===r?e:o}else if(k.has(s[o],i))return o===r?e:o;return i}},A={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:"NT 6.4",RT:"ARM"}}}},E={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[l,m,w],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[l,"Opera"],m,w],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[l,m,w],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[l,"IE"],m,w],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[l,"Yandex"],m,w],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[l,/_/g," "],m,w],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i],[l,m,w],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[l,"Dolphin"],m,w],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[l,"Chrome"],m,w],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[m,w,[l,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[m,w,l],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[l,[w,y.str,A.browser.oldsafari.major],[m,y.str,A.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[l,m,w],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[l,"Netscape"],m,w],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[l,m,w]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[u,"amd64"]],[/(ia32(?=;))/i],[[u,k.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[u,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[u,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[u,/ower/,"",k.lowerize]],[/(sun4\w)[;\)]/i],[[u,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[u,k.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[d,p,[c,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[d,[p,"Apple"],[c,h]],[/(apple\s{0,1}tv)/i],[[d,"Apple TV"],[p,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[p,d,[c,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[d,[p,"Amazon"],[c,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[d,y.str,A.device.amazon.model],[p,"Amazon"],[c,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[d,p,[c,g]],[/\((ip[honed|\s\w*]+);/i],[d,[p,"Apple"],[c,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[p,d,[c,g]],[/\(bb10;\s(\w+)/i],[d,[p,"BlackBerry"],[c,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[d,[p,"Asus"],[c,h]],[/(sony)\s(tablet\s[ps])/i],[p,d,[c,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[p,d,[c,f]],[/android.+;\s(shield)\sbuild/i],[d,[p,"Nvidia"],[c,f]],[/(playstation\s[3portablevi]+)/i],[d,[p,"Sony"],[c,f]],[/(sprint\s(\w+))/i],[[p,y.str,A.device.sprint.vendor],[d,y.str,A.device.sprint.model],[c,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[p,d,[c,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[p,[d,/_/g," "],[c,g]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[d,[p,"Microsoft"],[c,f]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[p,"Microsoft"],[c,g]],[/\s((milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?))[\w\s]+build\//i,/(mot)[\s-]?(\w+)*/i],[[p,"Motorola"],d,[c,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[p,"Motorola"],[c,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[p,"Samsung"],d,[c,h]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[p,"Samsung"],d,[c,g]],[/(samsung);smarttv/i],[p,d,[c,b]],[/\(dtv[\);].+(aquos)/i],[d,[p,"Sharp"],[c,b]],[/sie-(\w+)*/i],[d,[p,"Siemens"],[c,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[p,"Nokia"],d,[c,g]],[/android\s3\.[\s\w-;]{10}(a\d{3})/i],[d,[p,"Acer"],[c,h]],[/android\s3\.[\s\w-;]{10}(lg?)-([06cv9]{3,4})/i],[[p,"LG"],d,[c,h]],[/(lg) netcast\.tv/i],[p,d,[c,b]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[d,[p,"LG"],[c,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[d,[p,"Lenovo"],[c,h]],[/linux;.+((jolla));/i],[p,d,[c,g]],[/((pebble))app\/[\d\.]+\s/i],[p,d,[c,v]],[/android.+;\s(glass)\s\d/i],[d,[p,"Google"],[c,v]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[c,k.lowerize],p,d]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,m],[/rv\:([\w\.]+).*(gecko)/i],[m,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[m,y.str,A.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[m,y.str,A.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[l,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[l,"Symbian"],m],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],m],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[l,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[l,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[l,m],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[l,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[l,m]]},S=function(e,s){if(!(this instanceof S))return new S(e,s).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:o),n=s?k.extend(E,s):E;this.getBrowser=function(){return y.rgx.apply(this,n.browser)},this.getCPU=function(){return y.rgx.apply(this,n.cpu)},this.getDevice=function(){return y.rgx.apply(this,n.device)},this.getEngine=function(){return y.rgx.apply(this,n.engine)},this.getOS=function(){return y.rgx.apply(this,n.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(i){return r=i,this},this.setUA(r)};if(S.VERSION=s,S.BROWSER={NAME:l,MAJOR:w,VERSION:m},S.CPU={ARCHITECTURE:u},S.DEVICE={MODEL:d,VENDOR:p,TYPE:c,CONSOLE:f,MOBILE:g,SMARTTV:b,TABLET:h,WEARABLE:v,EMBEDDED:x},S.ENGINE={NAME:l,VERSION:m},S.OS={NAME:l,VERSION:m},typeof exports!==a)typeof module!==a&&module.exports&&(exports=module.exports=S),exports.UAParser=S;else{i.UAParser=S,typeof define===n&&define.amd&&define(function(){return S});var N=i.jQuery||i.Zepto;if(typeof N!==a){var T=new S;N.ua=T.getResult(),N.ua.get=function(){return T.getUA()},N.ua.set=function(i){T.setUA(i);var e=T.getResult();for(var s in e)N.ua[s]=e[s]}}}}(this);


},{}],265:[function(require,module,exports){
  (function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?void(this._wrapped=n):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.6.0";var A=j.each=j.forEach=function(n,t,e){if(null==n)return n;if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return;return n};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},j.find=j.detect=function(n,t,r){var e;return k(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var k=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?-1!=n.indexOf(t):k(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,j.property(t))},j.where=function(n,t){return j.filter(n,j.matches(t))},j.findWhere=function(n,t){return j.find(n,j.matches(t))},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-(1/0),u=-(1/0);return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;o>u&&(e=n,u=o)}),e},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,u=1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;u>o&&(e=n,u=o)}),e},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=j.values(n)),n[j.random(n.length-1)]):j.shuffle(n).slice(0,Math.max(0,t))};var E=function(n){return null==n?j.identity:j.isFunction(n)?n:j.property(n)};j.sortBy=function(n,t,r){return t=E(t),j.pluck(j.map(n,function(n,e,u){return{value:n,index:e,criteria:t.call(r,n,e,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=E(r),A(t,function(i,a){var o=r.call(e,i,a,t);n(u,o,i)}),u}};j.groupBy=F(function(n,t,r){j.has(n,t)?n[t].push(r):n[t]=[r]}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=E(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.partition=function(n,t){var r=[],e=[];return A(n,function(n){(t(n)?r:e).push(n)}),[r,e]},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.contains(t,n)})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===j&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:j.now(),a=null,i=n.apply(e,u),e=u=null};return function(){var l=j.now();o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u),e=u=null):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o,c=function(){var l=j.now()-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u),i=u=null))};return function(){i=this,u=arguments,a=j.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u),i=u=null),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return j.partial(t,n)},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=function(n){if(!j.isObject(n))return[];if(w)return w(n);var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return void 0===n},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.constant=function(n){return function(){return n}},j.property=function(n){return function(t){return t[n]}},j.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},j.now=Date.now||function(){return(new Date).getTime()};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};T.unescape=j.invert(T.escape);var I={escape:new RegExp("["+j.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(T.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(I[n],function(t){return T[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return j})}).call(this);


},{}],266:[function(require,module,exports){
  function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(t,s,e){if(t&&isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}function urlFormat(t){return isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,s){return urlParse(t,!1,!0).resolve(s)}function urlResolveObject(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s}function isString(t){return"string"==typeof t}function isObject(t){return"object"==typeof t&&null!==t}function isNull(t){return null===t}function isNullOrUndefined(t){return null==t}var punycode=require("punycode");exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");Url.prototype.parse=function(t,s,e){if(!isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t;h=h.trim();var r=protocolPattern.exec(h);if(r){r=r[0];var o=r.toLowerCase();this.protocol=o,h=h.substr(r.length)}if(e||r||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===h.substr(0,2);!a||r&&hostlessProtocol[r]||(h=h.substr(2),this.slashes=!0)}if(!hostlessProtocol[r]&&(a||r&&!slashedProtocol[r])){for(var n=-1,i=0;i<hostEndingChars.length;i++){var l=h.indexOf(hostEndingChars[i]);-1!==l&&(-1===n||n>l)&&(n=l)}var c,u;u=-1===n?h.lastIndexOf("@"):h.lastIndexOf("@",n),-1!==u&&(c=h.slice(0,u),h=h.slice(u+1),this.auth=decodeURIComponent(c)),n=-1;for(var i=0;i<nonHostChars.length;i++){var l=h.indexOf(nonHostChars[i]);-1!==l&&(-1===n||n>l)&&(n=l)}-1===n&&(n=h.length),this.host=h.slice(0,n),h=h.slice(n),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var f=this.hostname.split(/\./),i=0,m=f.length;m>i;i++){var v=f[i];if(v&&!v.match(hostnamePartPattern)){for(var g="",y=0,d=v.length;d>y;y++)g+=v.charCodeAt(y)>127?"x":v[y];if(!g.match(hostnamePartPattern)){var P=f.slice(0,i),b=f.slice(i+1),j=v.match(hostnamePartStart);j&&(P.push(j[1]),b.unshift(j[2])),b.length&&(h="/"+b.join(".")+h),this.hostname=P.join(".");break}}}if(this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var O=this.hostname.split("."),q=[],i=0;i<O.length;++i){var x=O[i];q.push(x.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(x):x)}this.hostname=q.join(".")}var U=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+U,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!unsafeProtocol[o])for(var i=0,m=autoEscape.length;m>i;i++){var A=autoEscape[i],E=encodeURIComponent(A);E===A&&(E=escape(A)),h=h.split(A).join(E)}var w=h.indexOf("#");-1!==w&&(this.hash=h.substr(w),h=h.slice(0,w));var R=h.indexOf("?");if(-1!==R?(this.search=h.substr(R),this.query=h.substr(R+1),s&&(this.query=querystring.parse(this.query)),h=h.slice(0,R)):s&&(this.search="",this.query={}),h&&(this.pathname=h),slashedProtocol[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",x=this.search||"";this.path=U+x}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&isObject(this.query)&&Object.keys(this.query).length&&(o=querystring.stringify(this.query));var a=this.search||o&&"?"+o||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&r!==!1?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),a&&"?"!==a.charAt(0)&&(a="?"+a),e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),s+r+e+a+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}var e=new Url;if(Object.keys(this).forEach(function(t){e[t]=this[t]},this),e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(s){"protocol"!==s&&(e[s]=t[s])}),slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e;if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol])return Object.keys(t).forEach(function(s){e[s]=t[s]}),e.href=e.format(),e;if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),e.pathname=h.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var r=e.pathname||"",o=e.search||"";e.path=r+o}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var a=e.pathname&&"/"===e.pathname.charAt(0),n=t.host||t.pathname&&"/"===t.pathname.charAt(0),i=n||a||e.host&&t.pathname,l=i,c=e.pathname&&e.pathname.split("/")||[],h=t.pathname&&t.pathname.split("/")||[],u=e.protocol&&!slashedProtocol[e.protocol];if(u&&(e.hostname="",e.port=null,e.host&&(""===c[0]?c[0]=e.host:c.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),i=i&&(""===h[0]||""===c[0])),n)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,c=h;else if(h.length)c||(c=[]),c.pop(),c=c.concat(h),e.search=t.search,e.query=t.query;else if(!isNullOrUndefined(t.search)){if(u){e.hostname=e.host=c.shift();var p=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;p&&(e.auth=p.shift(),e.host=e.hostname=p.shift())}return e.search=t.search,e.query=t.query,isNull(e.pathname)&&isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!c.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var f=c.slice(-1)[0],m=(e.host||t.host)&&("."===f||".."===f)||""===f,v=0,g=c.length;g>=0;g--)f=c[g],"."==f?c.splice(g,1):".."===f?(c.splice(g,1),v++):v&&(c.splice(g,1),v--);if(!i&&!l)for(;v--;v)c.unshift("..");!i||""===c[0]||c[0]&&"/"===c[0].charAt(0)||c.unshift(""),m&&"/"!==c.join("/").substr(-1)&&c.push("");var y=""===c[0]||c[0]&&"/"===c[0].charAt(0);if(u){e.hostname=e.host=y?"":c.length?c.shift():"";var p=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;p&&(e.auth=p.shift(),e.host=e.hostname=p.shift())}return i=i||e.host&&c.length,i&&!y&&c.unshift(""),c.length?e.pathname=c.join("/"):(e.pathname=null,e.path=null),isNull(e.pathname)&&isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(s=s[0],":"!==s&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};


},{"punycode":96,"querystring":99}],267:[function(require,module,exports){
  var extractinit=function(t){for(var e=new DataView(t),r=0;r<t.byteLength;){var i=e.getUint32(r+4,!1);if(1936286840==i||1836019558==i)break;r+=e.getUint32(r,!1)}return new Uint8Array(t.slice(0,r))},parsesidx=function(t,e){for(var r=new DataView(t),i=0;1936286840!=r.getUint32(i+4,!1);)if(i+=r.getUint32(i,!1),i>=t.byteLength)throw"Could not find sidx";var n=r.getUint32(i,!1)+i;if(n>t.byteLength)throw"sidx terminates after array buffer";var a=r.getUint8(i+8);i+=12;var f=r.getUint32(i+4,!1);i+=8;var g,o;0==a?(g=r.getUint32(i,!1),o=r.getUint32(i+4,!1),i+=8):(g=(r.getUint32(i,!1)<<32)+r.getUint32(i+4,!1),o=(r.getUint32(i+8,!1)<<32)+r.getUint32(i+12,!1),i+=16),o+=n+(e||0);var U=r.getUint16(i+2,!1);i+=4;for(var s=o,d=g,v=[],h=0;U>h;h++){var u=r.getUint32(i,!1),w=2147483648&u;if(w)throw"Unhandled indirect reference";u=2147483647&u;var c=r.getUint32(i+4,!1);i+=12,v.push({size:u,offset:s,duration:c/f,time:d/f}),s+=u,d+=c}if(i!=n)throw"Error: final pos "+i+" differs from SIDX end "+n;return v};module.exports={parseSIDX:parsesidx,extractInit:extractinit};


},{}]},{},[1])
/**
 * HTML5 Media Controller - Wrapper for HTML5 Media API
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Srflash = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.MediaTechController.call(this, player, options, ready);

    var source = options['source'],

    //TODO: changed swfPath compared to what it was supposed to be. Check that (before was options['swf'])
      swfPath = player.options_.flash.streamrootswf,

    // Which element to embed in
      parentEl = options['parentEl'],

    // Create a temporary element to be replaced by swf object
      placeHolder = this.el_ = vjs.createEl('div', { id: player.id() + '_temp_flash' }),

    // Generate ID for swf object
      objId = player.id()+'_flash_api',

    // Store player options in local var for optimization
    // TODO: switch to using player methods instead of options
    // e.g. player.autoplay();
      playerOptions = player.options_,

    // Merge default flashvars with ones passed in to init
      flashVars = vjs.obj.merge({

        // SWF Callback Functions
        'readyFunction': 'videojs.Srflash.onReady',
        'eventProxyFunction': 'videojs.Srflash.onEvent',
        'errorEventProxyFunction': 'videojs.Srflash.onError',

        // Player Settings
        'autoplay': playerOptions.autoplay,
        'preload': playerOptions.preload,
        'loop': playerOptions.loop,
        'muted': playerOptions.muted

      }, options['flashVars']),

    // Merge default parames with ones passed in
      params = vjs.obj.merge({
        'wmode': 'opaque', // Opaque is needed to overlay controls, but can affect playback performance
        'bgcolor': '#000000' // Using bgcolor prevents a white flash when the object is loading
      }, options['params']),

    // Merge default attributes with ones passed in
      attributes = vjs.obj.merge({
        'id': objId,
        'name': objId, // Both ID and Name needed or swf to identifty itself
        'class': 'vjs-tech'
      }, options['attributes'])
      ;


    //Don't supply source to flash player, so that VJS's NetStream wrapper is configured for appendBytes mode
    flashVars['src'] = null;
    /*
     if (source) {
     if (source.type && vjs.Srflash.isStreamingType(source.type)) {
     var parts = vjs.Srflash.streamToParts(source.src);
     flashVars['rtmpConnection'] = encodeURIComponent(parts.connection);
     flashVars['rtmpStream'] = encodeURIComponent(parts.stream);
     }
     else {
     flashVars['src'] = encodeURIComponent(vjs.getAbsoluteURL(source.src));
     }
     }
     */

    // Add placeholder to player div
    vjs.insertFirst(placeHolder, parentEl);

    // Having issues with Flash reloading on certain page actions (hide/resize/fullscreen) in certain browsers
    // This allows resetting the playhead when we catch the reload
    if (options['startTime']) {
      this.ready(function(){
        this.load();
        this.play();
        this.currentTime(options['startTime']);
      });
    }

    // Flash iFrame Mode
    // In web browsers there are multiple instances where changing the parent element or visibility of a plugin causes the plugin to reload.
    // - Firefox just about always. https://bugzilla.mozilla.org/show_bug.cgi?id=90268 (might be fixed by version 13)
    // - Webkit when hiding the plugin
    // - Webkit and Firefox when using requestFullScreen on a parent element
    // Loading the flash plugin into a dynamically generated iFrame gets around most of these issues.
    // Issues that remain include hiding the element and requestFullScreen in Firefox specifically

    // There's on particularly annoying issue with this method which is that Firefox throws a security error on an offsite Flash object loaded into a dynamically created iFrame.
    // Even though the iframe was inserted into a page on the web, Firefox + Flash considers it a local app trying to access an internet file.
    // I tried mulitple ways of setting the iframe src attribute but couldn't find a src that worked well. Tried a real/fake source, in/out of domain.
    // Also tried a method from stackoverflow that caused a security error in all browsers. http://stackoverflow.com/questions/2486901/how-to-set-document-domain-for-a-dynamically-generated-iframe
    // In the end the solution I found to work was setting the iframe window.location.href right before doing a document.write of the Flash object.
    // The only downside of this it seems to trigger another http request to the original page (no matter what's put in the href). Not sure why that is.

    // NOTE (2012-01-29): Cannot get Firefox to load the remote hosted SWF into a dynamically created iFrame
    // Firefox 9 throws a security error, unleess you call location.href right before doc.write.
    //    Not sure why that even works, but it causes the browser to look like it's continuously trying to load the page.
    // Firefox 3.6 keeps calling the iframe onload function anytime I write to it, causing an endless loop.

    if (options['iFrameMode'] === true && !vjs.IS_FIREFOX) {

      // Create iFrame with vjs-tech class so it's 100% width/height
      var iFrm = vjs.createEl('iframe', {
        'id': objId + '_iframe',
        'name': objId + '_iframe',
        'className': 'vjs-tech',
        'scrolling': 'no',
        'marginWidth': 0,
        'marginHeight': 0,
        'frameBorder': 0
      });

      // Update ready function names in flash vars for iframe window
      flashVars['readyFunction'] = 'ready';
      flashVars['eventProxyFunction'] = 'events';
      flashVars['errorEventProxyFunction'] = 'errors';

      // Tried multiple methods to get this to work in all browsers

      // Tried embedding the flash object in the page first, and then adding a place holder to the iframe, then replacing the placeholder with the page object.
      // The goal here was to try to load the swf URL in the parent page first and hope that got around the firefox security error
      // var newObj = vjs.Flash.embed(options['swf'], placeHolder, flashVars, params, attributes);
      // (in onload)
      //  var temp = vjs.createEl('a', { id:'asdf', innerHTML: 'asdf' } );
      //  iDoc.body.appendChild(temp);

      // Tried embedding the flash object through javascript in the iframe source.
      // This works in webkit but still triggers the firefox security error
      // iFrm.src = 'javascript: document.write('"+vjs.Flash.getEmbedCode(options['swf'], flashVars, params, attributes)+"');";

      // Tried an actual local iframe just to make sure that works, but it kills the easiness of the CDN version if you require the user to host an iframe
      // We should add an option to host the iframe locally though, because it could help a lot of issues.
      // iFrm.src = "iframe.html";

      // Wait until iFrame has loaded to write into it.
      vjs.on(iFrm, 'load', vjs.bind(this, function(){

        var iDoc,
          iWin = iFrm.contentWindow;

        // The one working method I found was to use the iframe's document.write() to create the swf object
        // This got around the security issue in all browsers except firefox.
        // I did find a hack where if I call the iframe's window.location.href='', it would get around the security error
        // However, the main page would look like it was loading indefinitely (URL bar loading spinner would never stop)
        // Plus Firefox 3.6 didn't work no matter what I tried.
        // if (vjs.USER_AGENT.match('Firefox')) {
        //   iWin.location.href = '';
        // }

        // Get the iFrame's document depending on what the browser supports
        iDoc = iFrm.contentDocument ? iFrm.contentDocument : iFrm.contentWindow.document;

        // Tried ensuring both document domains were the same, but they already were, so that wasn't the issue.
        // Even tried adding /. that was mentioned in a browser security writeup
        // document.domain = document.domain+'/.';
        // iDoc.domain = document.domain+'/.';

        // Tried adding the object to the iframe doc's innerHTML. Security error in all browsers.
        // iDoc.body.innerHTML = swfObjectHTML;

        // Tried appending the object to the iframe doc's body. Security error in all browsers.
        // iDoc.body.appendChild(swfObject);

        // Using document.write actually got around the security error that browsers were throwing.
        // Again, it's a dynamically generated (same domain) iframe, loading an external Flash swf.
        // Not sure why that's a security issue, but apparently it is.
        iDoc.write(vjs.Srflash.getEmbedCode(swfPath, flashVars, params, attributes));

        // Setting variables on the window needs to come after the doc write because otherwise they can get reset in some browsers
        // So far no issues with swf ready event being called before it's set on the window.
        iWin['player'] = this.player_;

        // Create swf ready function for iFrame window
        iWin['ready'] = vjs.bind(this.player_, function(currSwf){
          var el = iDoc.getElementById(currSwf),
            player = this,
            tech = player.tech;

          // Update reference to playback technology element
          tech.el_ = el;

          // Make sure swf is actually ready. Sometimes the API isn't actually yet.
          vjs.Srflash.checkReady(tech);
        });

        // Create event listener for all swf events
        iWin['events'] = vjs.bind(this.player_, function(swfID, eventName){
          var player = this;
          if (player && player.techName === 'flash') {
            player.trigger(eventName);
          }
        });

        // Create error listener for all swf errors
        iWin['errors'] = vjs.bind(this.player_, function(swfID, eventName){
          vjs.log('Flash Error', eventName);
        });

      }));

      // Replace placeholder with iFrame (it will load now)
      placeHolder.parentNode.replaceChild(iFrm, placeHolder);

      // If not using iFrame mode, embed as normal object
    } else {
      vjs.Srflash.embed(swfPath, placeHolder, flashVars, params, attributes);
    }
  }
});

vjs.Srflash.prototype.dispose = function(){
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Srflash.prototype.play = function(){
  this.aDash.play();
};

vjs.Srflash.prototype.pause = function(){
  this.aDash.pause();
};

vjs.Srflash.prototype.setCurrentTime = function(time){
  this.aDash.seek(time);
};

vjs.Srflash.prototype.currentTime = function(){
  return this.aDash.getCurrentTime();
};

vjs.Srflash.prototype.src = function(src){
  if (vjs.Srflash.isStreamingSrc(src)) {
    src = vjs.Srflash.streamToParts(src);
    this.setRtmpConnection(src.connection);
    this.setRtmpStream(src.stream);
  }
  else {
    // Make sure source URL is abosolute.
    src = vjs.getAbsoluteURL(src);
    this.el_.vjs_src(src);
  }

  // Currently the SWF doesn't autoplay if you load a source later.
  // e.g. Load player w/ no source, wait 2s, set src.
  if (this.player_.autoplay()) {
    var tech = this;
    setTimeout(function(){ tech.play(); }, 0);
  }
};

vjs.Srflash.prototype.currentSrc = function(){
  var src = this.el_.vjs_getProperty('currentSrc');
  // no src, check and see if RTMP
  if (src == null) {
    var connection = this.rtmpConnection(),
      stream = this.rtmpStream();

    if (connection && stream) {
      src = vjs.Srflash.streamFromParts(connection, stream);
    }
  }
  return src;
};

vjs.Srflash.prototype.load = function(){
  this.el_.vjs_load();
};

vjs.Srflash.prototype.poster = function(){
  this.el_.vjs_getProperty('poster');
};

vjs.Srflash.prototype.buffered = function(){
  return this.aDash.getBuffered();
};

vjs.Srflash.prototype.supportsFullScreen = function(){
  return false; // Flash does not allow fullscreen through javascript
};

vjs.Srflash.prototype.enterFullScreen = function(){
  return false;
};


// Create setters and getters for attributes
var api = vjs.Srflash.prototype,
  readWrite = 'rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted'.split(','),
  readOnly = 'error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks'.split(',');
// Overridden: buffered

/**
 * @this {*}
 */
var createSetter = function(attr){
  var attrUpper = attr.charAt(0).toUpperCase() + attr.slice(1);
  api['set'+attrUpper] = function(val){ return this.el_.vjs_setProperty(attr, val); };
};

/**
 * @this {*}
 */
var createGetter = function(attr){
  api[attr] = function(){ return this.el_.vjs_getProperty(attr); };
};

(function(){
  var i;
  // Create getter and setters for all read/write attributes
  for (i = 0; i < readWrite.length; i++) {
    createGetter(readWrite[i]);
    createSetter(readWrite[i]);
  }

  // Create getters for read-only attributes
  for (i = 0; i < readOnly.length; i++) {
    createGetter(readOnly[i]);
  }
})();

/* Flash Support Testing -------------------------------------------------------- */

vjs.Srflash.isSupported = function(){
  return (vjs.Srflash.version()[0] >= 10)&&(window.Streamroot.isStreamrootFlashSupported());
};

vjs.Srflash.canPlaySource = function(srcObj){
  if (srcObj.type in vjs.Srflash.formats || srcObj.type in vjs.Srflash.streamingFormats) { return 'maybe'; }
};

vjs.Srflash.formats = {
  'video/dash': 'DASH',
  'application/x-mpegurl': 'HLS',
  'video/smooth': 'SMOOTH'
};

vjs.Srflash.streamingFormats = {
};

vjs.Srflash['onReady'] = function(currSwf){
  var el = vjs.el(currSwf);

  // Get player from box
  // On firefox reloads, el might already have a player
  var player = el['player'] || el.parentNode['player'],
    tech = player.tech;

  // Reference player on tech element
  el['player'] = player;

  // Update reference to playback technology element
  tech.el_ = el;

  vjs.Srflash.checkReady(tech);
};

// The SWF isn't alwasy ready when it says it is. Sometimes the API functions still need to be added to the object.
// If it's not ready, we set a timeout to check again shortly.
vjs.Srflash.checkReady = function(tech){
  //TODO: call ready on our API?

  // Check if API property exists
  if (tech.el().vjs_getProperty) {

    var srapi = window.Streamroot.streamrootAPI;
    console.log('MPEG-DASH Module Loading');

    //TODO: replace dummy event_handlers
    var event_handlers = {
      onMetaData: function (tracklist){
        tech.onMetaData.call(tech, tracklist);
      }
    };
    tech.aDash = new srapi(tech.el_, tech.options_.source.src, event_handlers, tech.player_.options_.sr_options);

    // If so, tell tech it's ready
    tech.triggerReady();

    // Otherwise wait longer.
  } else {

    setTimeout((function(){
      vjs.Srflash.checkReady(tech);
    }).bind(this), 50);

  }
};

var eventQueue = [];

// Trigger events from the swf on the player
vjs.Srflash['onEvent'] = function(swfID, eventName){
  var player = vjs.el(swfID)['player'];
  console.info(eventName);
  console.info(player);

  //At the initialization, player is not always initialized, so important events might be missed (like the one triggering the removal of the poster)
  //This is a HACK to queue them and try to send them right before the next event
  if (!player) {
    eventQueue.push(eventName);
  } else if (eventQueue.length > 0) {
    for (var i=0; i<eventQueue.length; i++) {
      player.trigger(eventQueue[i]);
      console.info("triggering queued event" +eventQueue[i]);
    }
    eventQueue = [];
  }
  player.trigger(eventName);
};

// Log errors from the swf
vjs.Srflash['onError'] = function(swfID, err){
  var player = vjs.el(swfID)['player'];
  player.trigger('error');
  vjs.log('Flash Error', err, swfID);
};

// Flash Version Check
vjs.Srflash.version = function(){
  var version = '0,0,0';

  // IE
  try {
    version = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];

    // other browsers
  } catch(e) {
    try {
      if (navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){
        version = (navigator.plugins['Shockwave Flash 2.0'] || navigator.plugins['Shockwave Flash']).description.replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];
      }
    } catch(err) {}
  }
  return version.split(',');
};

// Flash embedding method. Only used in non-iframe mode
vjs.Srflash.embed = function(swf, placeHolder, flashVars, params, attributes){
  var code = vjs.Srflash.getEmbedCode(swf, flashVars, params, attributes),

  // Get element by embedding code and retrieving created element
    obj = vjs.createEl('div', { innerHTML: code }).childNodes[0],

    par = placeHolder.parentNode
    ;

  placeHolder.parentNode.replaceChild(obj, placeHolder);

  // IE6 seems to have an issue where it won't initialize the swf object after injecting it.
  // This is a dumb fix
  var newObj = par.childNodes[0];
  setTimeout(function(){
    newObj.style.display = 'block';
  }, 1000);

  return obj;

};

vjs.Srflash.getEmbedCode = function(swf, flashVars, params, attributes){

  var objTag = '<object type="application/x-shockwave-flash"',
    flashVarsString = '',
    paramsString = '',
    attrsString = '';

  // Convert flash vars to string
  if (flashVars) {
    vjs.obj.each(flashVars, function(key, val){
      flashVarsString += (key + '=' + val + '&amp;');
    });
  }

  // Add swf, flashVars, and other default params
  params = vjs.obj.merge({
    'movie': swf,
    'flashvars': flashVarsString,
    'allowScriptAccess': 'always', // Required to talk to swf
    'allowNetworking': 'all' // All should be default, but having security issues.
  }, params);

  // Create param tags string
  vjs.obj.each(params, function(key, val){
    paramsString += '<param name="'+key+'" value="'+val+'" />';
  });

  attributes = vjs.obj.merge({
    // Add swf to attributes (need both for IE and Others to work)
    'data': swf,

    // Default to 100% width/height
    'width': '100%',
    'height': '100%'

  }, attributes);

  // Create Attributes string
  vjs.obj.each(attributes, function(key, val){
    attrsString += (key + '="' + val + '" ');
  });

  return objTag + attrsString + '>' + paramsString + '</object>';
};

vjs.Srflash.streamFromParts = function(connection, stream) {
  return connection + '&' + stream;
};

vjs.Srflash.streamToParts = function(src) {
  var parts = {
    connection: '',
    stream: ''
  };

  if (! src) {
    return parts;
  }

  // Look for the normal URL separator we expect, '&'.
  // If found, we split the URL into two pieces around the
  // first '&'.
  var connEnd = src.indexOf('&');
  var streamBegin;
  if (connEnd !== -1) {
    streamBegin = connEnd + 1;
  }
  else {
    // If there's not a '&', we use the last '/' as the delimiter.
    connEnd = streamBegin = src.lastIndexOf('/') + 1;
    if (connEnd === 0) {
      // really, there's not a '/'?
      connEnd = streamBegin = src.length;
    }
  }
  parts.connection = src.substring(0, connEnd);
  parts.stream = src.substring(streamBegin, src.length);

  return parts;
};

vjs.Srflash.isStreamingType = function(srcType) {
  return srcType in vjs.Srflash.streamingFormats;
};

// RTMP has four variations, any string starting
// with one of these protocols should be valid
vjs.Srflash.RTMP_RE = /^rtmp[set]?:\/\//i;

vjs.Srflash.isStreamingSrc = function(src) {
  return vjs.Srflash.RTMP_RE.test(src);
};

videojs.Srflash.prototype.onMetaData = function(trackList) {
  //removed the different quality buttons

  console.log('onMetaDataReceived');
  //console.log(trackList);
  var audiotracksinfos = [];
  var videotracksinfos = [];
  for(var i=0;i<trackList.length;i++) {
    trackList[i].bitrate = (trackList[i].bandwidth/1000).toFixed(0);
    //console.log(trackList[i]);
    if(trackList[i].type == 'audio') {
      audiotracksinfos.push(trackList[i]);
    } else if(trackList[i].type =='video') {
      videotracksinfos.push(trackList[i]);
    }
  }
  if(audiotracksinfos.length) {
    var audioButton = new videojs.AudioButton(this.player_,audiotracksinfos);
    this.player_.controlBar.addChild(audioButton);
  }
  if(videotracksinfos.length) {
    var videoButton = new videojs.VideoButton(this.player_,videotracksinfos);
    this.player_.controlBar.addChild(videoButton);
  }
};
(function(videojs) {

  videojs.Streamroot = videojs.MediaTechController.extend({

    /** @constructor */
    init: function(player, options, ready) {

      // ///////////////////////////////////////
      // RODI : CopiÃ© depuis la tech HTML5

      videojs.MediaTechController.call(this, player, options, ready);

      // In iOS, if you move a video element in the DOM, it breaks video playback.
      this.features['movingMediaElementInDOM'] = !videojs.IS_IOS;

      // HTML video is able to automatically resize when going to fullscreen
      this.features['fullscreenResize'] = true;

      var source = options['source'];


      // If the element source is already set, we may have missed the loadstart event, and want to trigger it.
      // We don't want to set the source again and interrupt playback.
      if (source && this.el_.currentSrc === source.src && this.el_.networkState > 0) {
        player.trigger('loadstart');

        // Otherwise set the source if one was provided.
      } else if (source) {
        this.el_.src = source.src;
      }

      // ///////////////////////////////////////// ///////////////////////////////////////

      this.player_ = player;
      this.options_ = options;

      console.log("Streamroot MPEG-DASH Tech for VideoJS!");

      this.event_handlers = {
        onMetaData: videojs.Streamroot.onMetaData.bind(this),
        onBuffering: videojs.Streamroot.onBuffering.bind(this),
        onPlaying: videojs.Streamroot.onPlaying.bind(this),
        onFinish: videojs.Streamroot.onFinish.bind(this),
        onSpaceBar: videojs.Streamroot.onSpaceBar.bind(this),
        onKeyForward: videojs.Streamroot.onKeyForward.bind(this),
        onKeyRewind: videojs.Streamroot.onKeyRewind.bind(this)
      };

      /*require.config({
       baseUrl: this.player_.options_.DASHR_API
       })
       require(['api'], videojs.Streamroot.onReady.bind(this));*/

      // Maniere assez sale de mettre l'autoplay
      this.player_.ready(videojs.Streamroot.CheckAutoplay.bind(this));
      this.setupTriggers();


      // got from old onREady function
      var api = window.Streamroot.streamrootAPI;
      console.log('MPEG-DASH Module Loading');
      this.aDash = new api(this.el_, this.options_.source.src, this.event_handlers, this.player_.options_.sr_options);

      //this.player_.triggerReady();
      // histoire de setTimeout pas claire ! Hack dangereux...
      setTimeout(this.triggerReady.bind(this), 100);
    }
  });

  videojs.Streamroot.prototype.dispose = function() {
    videojs.MediaTechController.prototype.dispose.call(this);
  };

  videojs.Streamroot.prototype.setupTriggers = function() {
    for (var i = videojs.Streamroot.Events.length - 1; i >= 0; i--) {
      videojs.on(this.el_, videojs.Streamroot.Events[i], videojs.bind(this.player_, this.eventHandler));
    }
  };

  videojs.Streamroot.prototype.eventHandler = function(e) {
    this.trigger(e);
    e.stopPropagation();
  };

  videojs.Streamroot.prototype.createEl = function() {
    var player = this.player_,
    // If possible, reuse original tag for HTML5 playback technology element
      el = player.tag,
      newEl,
      clone;

    // Check if this browser supports moving the element into the box.
    // On the iPhone video will break if you move the element,
    // So we have to create a brand new element.
    if (!el || this.features['movingMediaElementInDOM'] === false) {
      // If the original tag is still there, clone and remove it.
      if (el) {
        clone = el.cloneNode(false);
        videojs.Streamroot.disposeMediaElement(el);
        el = clone;
        player.tag = null;
      } else {
        el = videojs.createEl('video', {
          id: player.id() + '_dashr_api',
          className: 'vjs-tech'
        });
      }
      // associate the player with the new tag
      el['player'] = player;
      videojs.insertFirst(el, player.el());
    }

    // Update specific tag settings, in case they were overridden
    var attrs = ['autoplay', 'preload', 'loop', 'muted'];
    for (var i = attrs.length - 1; i >= 0; i--) {
      var attr = attrs[i];
      if (player.options_[attr] !== null) {
        el[attr] = player.options_[attr];
      }
    }
    return el;
  };

  videojs.Streamroot.prototype.play = function() {
    this.aDash.play(); //SR: not sure if useful to use aDash here
    this.player_.trigger('play');
  };
  videojs.Streamroot.prototype.pause = function() {
    if (!this.el_.seeking) {
      this.aDash.pause(); //SR: not sure if useful to use aDash here
      this.player_.trigger('pause');
    }
  };
  videojs.Streamroot.prototype.paused = function() {
    return this.el_.paused;
  }; //ne pas pauser si on est en train de seeker
  videojs.Streamroot.prototype.currentTime = function() {
    return this.el_.currentTime;
  };
  videojs.Streamroot.prototype.setCurrentTime = function(seconds) {
    this.el_.currentTime = seconds;
  };

  videojs.Streamroot.prototype.duration = function() {
    return this.el_.duration || 0;
  };
  videojs.Streamroot.prototype.buffered = function() {
    var r = this.el_.buffered;
    //video-js doesn't handle buffer ranges with multiranges
    var max_time = this.getMaxTime(r);
    return videojs.createTimeRange(0, max_time);
  };

  videojs.Streamroot.prototype.getMaxTime = function(buf) {
    for (var i = 0; i < buf.length; i++) {
      if (buf.start(i) <= this.currentTime() && this.currentTime() <= buf.end(i)) {
        return buf.end(i);
      }
    }
    return this.currentTime();
  };

  videojs.Streamroot.prototype.volume = function() {
    return this.el_.volume;
  };
  videojs.Streamroot.prototype.setVolume = function(percentAsDecimal) {
    this.el_.volume = percentAsDecimal;
  };
  videojs.Streamroot.prototype.muted = function() {
    return this.el_.muted;
  };
  videojs.Streamroot.prototype.setMuted = function(muted) {
    this.el_.muted = muted;
  };

  videojs.Streamroot.prototype.width = function() {
    return this.el_.offsetWidth;
  };
  videojs.Streamroot.prototype.height = function() {
    return this.el_.offsetHeight;
  };

  videojs.Streamroot.prototype.src = function(src) {
    this.el_.src = src;
  };
  videojs.Streamroot.prototype.load = function() {
    this.el_.load();
  };
  videojs.Streamroot.prototype.currentSrc = function() {
    return this.el_.currentSrc;
  };

  videojs.Streamroot.prototype.preload = function() {
    return this.el_.preload;
  };
  videojs.Streamroot.prototype.setPreload = function(val) {
    this.el_.preload = val;
  };
  videojs.Streamroot.prototype.autoplay = function() {
    return this.el_.autoplay;
  };
  videojs.Streamroot.prototype.setAutoplay = function(val) {
    this.el_.autoplay = val;
  };
  videojs.Streamroot.prototype.loop = function() {
    return this.el_.loop;
  };
  videojs.Streamroot.prototype.setLoop = function(val) {
    this.el_.loop = val;
  };

  videojs.Streamroot.prototype.error = function() {
    return this.el_.error;
  };
  // networkState= function(){ return this.el.networkState; },
  // readyState= function(){ return this.el.readyState; },
  videojs.Streamroot.prototype.seeking = function() {
    return this.el_.seeking;
  };
  // initialTime= function(){ return this.el.initialTime; },
  // startOffsetTime= function(){ return this.el.startOffsetTime; },
  // played= function(){ return this.el.played; },
  // seekable= function(){ return this.el.seekable; },
  videojs.Streamroot.prototype.ended = function() {
    return this.el_.ended;
  };
  // videoTracks= function(){ return this.el.videoTracks; },
  // audioTracks= function(){ return this.el.audioTracks; },
  // videoWidth= function(){ return this.el.videoWidth; },
  // videoHeight= function(){ return this.el.videoHeight; },
  // textTracks= function(){ return this.el.textTracks; },
  // defaultPlaybackRate= function(){ return this.el.defaultPlaybackRate; },
  // playbackRate= function(){ return this.el.playbackRate; },
  // mediaGroup= function(){ return this.el.mediaGroup; },
  // controller= function(){ return this.el.controller; },
  videojs.Streamroot.prototype.controls = function() {
    return this.player_.options_.controls;
  };
  videojs.Streamroot.prototype.defaultMuted = function() {
    return this.el_.defaultMuted;
  };
  videojs.Streamroot.prototype.supportsFullScreen = function() {
    if (typeof this.el_.webkitEnterFullScreen == 'function') {

      // Seems to be broken in Chromium/Chrome && Safari in Leopard
      if (/Android/.test(videojs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(videojs.USER_AGENT)) {
        return true;
      }
    }
    return false;
  };

  videojs.Streamroot.prototype.enterFullScreen = function() {
    var video = this.el_;
    if (video.paused && video.networkState <= video.HAVE_METADATA) {
      // attempt to prime the video element for programmatic access
      // this isn't necessary on the desktop but shouldn't hurt
      this.el_.play();

      // playing and pausing synchronously during the transition to fullscreen
      // can get iOS ~6.1 devices into a play/pause loop
      setTimeout(function() {
        video.pause();
        video.webkitEnterFullScreen();
      }, 0);
    } else {
      video.webkitEnterFullScreen();
    }
  };
  videojs.Streamroot.prototype.exitFullScreen = function() {
    this.el_.webkitExitFullScreen();
  };



  /* StreamrootDash Support Testing -------------------------------------------------------- */

  videojs.Streamroot.isSupported = function() {
    // voir api.js
    return window.Streamroot.isStreamrootHtml5Supported();
  };

  videojs.Streamroot.canPlaySource = function(srcObj) {
    if (srcObj.type in vjs.Streamroot.formats || srcObj.type in vjs.Streamroot.streamingFormats) { return 'maybe'; }
  };

  videojs.Streamroot.formats = {
    'video/dash': 'DASH',
    'video/smooth': 'SMOOTH'
  };

  videojs.Streamroot.streamingFormats = {
  };

  // List of all HTML5 events (various uses).
  videojs.Streamroot.Events = 'loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,ratechange,volumechange'.split(','); // tous sauf play et pause pour pouvoir controler les etat reels de lecture/buffering.

  videojs.Streamroot.disposeMediaElement = function(el) {
    if (!el) {
      return;
    }

    el['player'] = null;

    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }

    // remove any child track or source nodes to prevent their loading
    while (el.hasChildNodes()) {
      el.removeChild(el.firstChild);
    }

    // remove any src reference. not setting `src=''` because that causes a warning
    // in firefox
    el.removeAttribute('src');

    // force the media element to update its loading state by calling load()
    if (typeof el.load === 'function') {
      el.load();
    }
  };

  // HTML5 Feature detection and Device Fixes --------------------------------- //

  // Override Android 2.2 and less canPlayType method which is broken
  if (videojs.IS_OLD_ANDROID) {
    document.createElement('video').constructor.prototype.canPlayType = function(type) {
      return (type && type.toLowerCase().indexOf('video/mp4') != -1) ? 'maybe' : '';
    };
  }

  // Keyboard Shortcuts ---------------------------------------------------------

  videojs.Streamroot.prototype.addKeyboardShortcuts = function() {
    var self = this;
    // activates the keyboard shortcuts document.onkeydown = function (e) {
  }

  // Event callbacks ------------------------------------------------------------
  videojs.Streamroot.CheckAutoplay = function() {
    if (this.el_.autoplay && this.paused()) {
      this.play();
    }
  }

  videojs.Streamroot.onMetaData = function(trackList) {
    //removed the different quality buttons

    console.log('onMetaDataReceived');
    //console.log(trackList);
    var audiotracksinfos = [];
    var videotracksinfos = [];
    for(var i=0;i<trackList.length;i++) {
      trackList[i].bitrate = (trackList[i].bandwidth/1000).toFixed(0);
      //console.log(trackList[i]);
      if(trackList[i].type == 'audio') {
        audiotracksinfos.push(trackList[i]);
      } else if(trackList[i].type =='video') {
        videotracksinfos.push(trackList[i]);
      }
    }
    if(audiotracksinfos.length) {
      var audioButton = new videojs.AudioButton(this.player_,audiotracksinfos);
      this.player_.controlBar.addChild(audioButton);
    }
    if(videotracksinfos.length) {
      var videoButton = new videojs.VideoButton(this.player_,videotracksinfos);
      this.player_.controlBar.addChild(videoButton);
    }
  };

  videojs.Streamroot.onBuffering = function() {
    this.player_.trigger("waiting");
  };

  videojs.Streamroot.onPlaying = function() {
    this.player_.trigger("playing");
  };

  videojs.Streamroot.onFinish = function() {
    this.player_.trigger("ended");
    this.pause();
  };

  videojs.Streamroot.onSpaceBar = function() {
    console.log("onspace");
    //console.log(this);
    if (this.paused()) {
      this.play();
    } else {
      this.pause();
    }
  };

  videojs.Streamroot.onKeyForward = function() {
    this.setCurrentTime(this.currentTime() + 10);
  };

  videojs.Streamroot.onKeyRewind = function() {
    this.setCurrentTime(this.currentTime() - 10);
  };


  /* Text Track Menu Items
   ================================================================================ */
  videojs.AlternativeTrackMenuItem = videojs.MenuItem.extend({

    init: function(player, options, parent) {
      // Modify options for parent MenuItem class's init.

      function _levelLabel(level) {
        if (level.label) return level.label;
        else if (level.auto) return "auto";
        else if (level.height) return level.height + "p";
        else if (level.width) return Math.round(level.width * 9 / 16) + "p";
        else if (level.bitrate) return level.bitrate + "kbps";
        else return 0;
      };
      this.parentMenu = parent;
      var prefix = options.lang ? '[' + options.lang + ']' : "";
      if (!options.auto) {
        options.label = prefix + _levelLabel(options);
      } else {
        options.label = (options.lang) ? '[' + options.lang + '] ' + "Auto" : 'Auto';
      }
      this.track = options;
      options.selected = options.selected || false;
      videojs.MenuItem.call(this, player, options);
    },

    onClick: function() {
      videojs.MenuItem.prototype.onClick.call(this);
      for (var i = 0; i < this.parentMenu.items.length; i++) {
        if (this !== this.parentMenu.items[i]) {
          this.parentMenu.items[i].selected(false);
        }
      }
      this.player_.tech.aDash.switchRepresentation(this.track.type, this.track.id_aset, this.track.id_rep);
    }

  });

  /* Alternative Tracks Button
   // Herite de sprpriÃ©tÃ©s de MenuButton,
   // mais comme on override createMenu, on doit aussi overrider l'init
   ================================================================================ */
  videojs.AlternativeTrackButton = videojs.MenuButton.extend({

    init: function(player, options) {

      videojs.Button.call(this, player, options);
      this.options_ = this.options = options;
      this.player_ = this.player = player;

      this.menu = this.createMenu();
    },

    createMenu: function() {

      var menu = new videojs.Menu(this.player_);

      // Add a title list item to the top => inutile maintenant
      /*    menu.el_.appendChild(videojs.createEl("li", {
       className: "videojs-menu-title",
       innerHTML: videojs.capitalize(this.kind)
       }));*/
      this.items = new Array();

      for (var i = 0; i < this.options.length; i++) {
        if (this.options[i].auto) {
          var m = new videojs.AlternativeTrackMenuItem(this.player_, {
            type: this.options[i].type,
            lang: this.options[i].lang,
            id_rep: this.options[i].id_rep,
            auto: true,
            selected: this.options[i].selected
          }, this);
        } else {
          var id_aset = this.options[i].id_aset;
          //var bw = this.options[i].bandwidth;
          var bitrate = this.options[i].bitrate;
          var id_rep = this.options[i].id_rep;
          var selected = this.options[i].selected | false;
          var height = this.options[i].height;
          var width = this.options[i].width;

          if (this.options[i].lang) {
            var tracklang = this.options[i].lang;
          };
          var buttonOptions = {
            type: this.options[i].type,
            lang: tracklang,
            id_aset: id_aset,
            id_rep: id_rep,
            bitrate: bitrate,
            width : width,
            height : height,
            selected: selected
          };
          var m = new videojs.AlternativeTrackMenuItem(this.player_, buttonOptions, this);
        }
        this.items.push(m);
        menu.addItem(m);
      };

      // Add list to element
      this.addChild(menu);
      return menu;
    },

    buildCSSClass: function() {
      return this.className + " vjs-menu-button " + videojs.MenuItem.prototype.buildCSSClass.call(this);
    },

  });

  /////////////////////////////////////////////////////////
  // extensions des boutons videoJS !

  videojs.AudioButton = videojs.AlternativeTrackButton.extend({

    init: function(player, options) {
      videojs.AlternativeTrackButton.call(this, player, options);
    },
    kind: "audio",
    buttonText: "Audio Tracks",
    className: "vjs-sr-audiotracks-button"
  });

  videojs.VideoButton = videojs.AlternativeTrackButton.extend({

    init: function(player, options) {
      videojs.AlternativeTrackButton.call(this, player, options);
    },
    kind: "video",
    buttonText: "Video Tracks",
    className: "vjs-sr-videotracks-button"
  });
})(videojs)
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
  function getFlashVersion(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(t){return"6,0,0"}}catch(t){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){}}return"0,0,0"}var UAParser=require("ua-parser-js"),isFlashVersionSupported=function(){var e=getFlashVersion().split(/,|\./);return parseFloat(e[0])>11||11===parseFloat(e[0])&&parseFloat(e[1])>=4},parser=new UAParser;parser.setUA(window.navigator.userAgent);var uaObject=parser.getResult();window.Streamroot=window.Streamroot||{},window.Streamroot.ua=uaObject,window.Streamroot.isStreamrootFlashSupported=function(){var e="mobile"!==uaObject.device.type&&"tablet"!==uaObject.device.type&&"console"!==uaObject.device.type&&("Chrome"===uaObject.browser.name&&uaObject.browser.major>=38||"Chromium"===uaObject.browser.name&&uaObject.browser.major>=38||"Opera"===uaObject.browser.name&&uaObject.browser.major>=26||"Firefox"===uaObject.browser.name&&uaObject.browser.major>=33)&&"Android"!==uaObject.os.name&&"iOS"!==uaObject.os.name&&isFlashVersionSupported();return e},window.Streamroot.isStreamrootHtml5Supported=function(){var e="mobile"!==uaObject.device.type&&"tablet"!==uaObject.device.type&&"console"!==uaObject.device.type&&("Chrome"===uaObject.browser.name&&uaObject.browser.major>=38||"Chromium"===uaObject.browser.name&&uaObject.browser.major>=38)&&"Android"!==uaObject.os.name&&"iOS"!==uaObject.os.name&&void 0!==window.MediaSource;return e},window.Streamroot.isStreamrootSupported=function(){return window.Streamroot.isStreamrootFlashSupported()||window.Streamroot.isStreamrootHtml5Supported()},window.Streamroot.isFlashVersionSupported=isFlashVersionSupported,window.isStreamrootFlashSupported=window.Streamroot.isStreamrootFlashSupported,window.isStreamrootHtml5Supported=window.Streamroot.isStreamrootHtml5Supported,window.isFlashVersionSupported=window.Streamroot.isFlashVersionSupported;var MediaController=require("./js/media/MediaController"),streamrootAPI=function(e,t,r,o){this.dash=new MediaController(e,t,r,o)};streamrootAPI.prototype.play=function(){this.dash.play()},streamrootAPI.prototype.pause=function(){this.dash.pause()},streamrootAPI.prototype.seek=function(e){this.dash.setCurrentTime(e)},streamrootAPI.prototype.paused=function(){return!this.dash.want_to_play},streamrootAPI.prototype.getCurrentTime=function(){return this.dash.video.currentTime},streamrootAPI.prototype.getBuffered=function(){return this.dash.getBuffered()},streamrootAPI.prototype.switchRepresentation=function(e,t,r){this.dash.manualSwitchRepresentation(e,t,r)},streamrootAPI.prototype.getDuration=function(){return this.dash.getDuration()},streamrootAPI.prototype.addEventListener=function(e,t){this.dash.addEventListener(e,t)},streamrootAPI.prototype.addVideoEventListener=function(e,t){this.dash.addVideoEventListener(e,t)},window.streamrootAPI=streamrootAPI,window.Streamroot.streamrootAPI=streamrootAPI;


},{"./js/media/MediaController":13,"ua-parser-js":296}],2:[function(require,module,exports){
  var Conf=function(){this.STREAM_TYPES={DASH:0,SMOOTH:1,HLS:2},this.FORCE_TRACK_BOOL=!1,this.PRESELECTED_TRACKS={video:{asetId:1,repId:1},audio:{asetId:0,repId:0}},this.FORCE_BANDWIDTH={video:1e6,audio:1e5},this.DEFAULT_AUTOSWITCH={video:!1,audio:!1},this.AUTO_LABEL_FIRST=!0,this.RANGE_REQUEST_ALLOWED=!0,this.MAX_CDN_DL=2,this.APPEND_RETRY_INTERVAL=100,this.REMOVE_OLD_SEGMENTS_DELAY=15,this.BUFFER={EMERGENCY_MARGIN:.2,BUFFER_MARGIN:40,SOFT_TRACK_SWITCH_MIN_BUFFER:0,FORCE_SWITCH_CLEAR_ALL:!1,ALWAYS_FORCE_SWITCH:!0,MAX_TRACKS_OFFSET:10},this.REPRESENTATION_NUMBER=0,this.ABR_DEL_T=void 0,this.LIVE={DISTANCE_FROM_LIVE_EDGE:30,MIN_BUFFER_LEVEL:10,ALLOW_LIVE_DELAY:30},this.MPD_UPDATE_INTERVAL=2e3,this.RTT_RELOAD_OFFSET=700,this.MIN_UPDATE_INTERVAL=1e3,this.FREEZE_LIVE_MIN_SEEK_TIME=1e3,this.REPPORT_ERROR=!1,this.ADD_QUERY_PARAM=!1,this.PTS_TOLERANCE=.1,this.HACK_ABR_HLS_AUDIO_ONLY=!0,this.SS_IMPLICIT_AAC_HE=!1,this.SEEK_ON_RESTART=!0},conf=new Conf;module.exports=conf;


},{}],3:[function(require,module,exports){
  "use strict";var CDNDownloader=require("streamroot-downloader").Downloader,conf=require("../../confMedia"),PlayerInterface=require("../media/PlayerInterface"),SRModule=require("streamroot-p2p"),utils=require("../utils"),DownloadManager=function(e,n){var t,r,a=this,i=1,o=[],s=n,f=function(n,r){var a,i=null;if(o.length<conf.MAX_CDN_DL){if(a=e.manifestManager.getPieceInfos(n),a.downloading)return;if(t){if(i=t.getP2PData(n),i.isLocked())return;if(i.isComplete()){var s={pptes:{piece:n},cdnByteLength:0};return void i.getFullSegment(s,r)}if(conf.RANGE_REQUEST_ALLOWED){if(a.range=i.getUpdatedRange(a.range),a.range&&a.range.end&&a.range.end<a.range.start)return}else a.range;d(n,a,i,r)}}},d=function(n,t,r,s){var f=i,d=new CDNDownloader(f,a);t.responseType="arraybuffer",t.pptes={piece:n,partialSegment:r},i++,o.push(d),d.getURL(t,l.bind(void 0,f,u.bind(void 0,s))),e.manifestManager.markAsDownloading(n,f)},g=function(n){return function(t,r){e.manifestManager.markAsDownloading(r),e.manifestManager.setSegmentSize(r.periodId,r.asetId,r.repId,r.idPiece,t.response.byteLength),n(t)}},p=function(n){return function(t,r){e.manifestManager.markAsDownloading(r),a.getPart(r,!1,n)}},l=function(e,n,t,r){if(t)0===t.status;else{var a,i;for(i=0;i<o.length;i++)o[i].id==e&&(a=o.splice(i,1)[0]);n(r)}},u=function(n,t){t.response?(t.cdnByteLength=t.response.byteLength,t.pptes.partialSegment.getFullSegment(t,g(n),p(n))):e.manifestManager.markAsDownloading(t.pptes.piece)},c=function(n){var t=o.splice(n,1)[0];e.manifestManager.markAsDownloading(t.url_infos.pptes.piece),r.emit("cdnCancelled",t.intermediateProgress),t.abort()},m=function(e){var n;for(n=0;n<o.length;n++)e===o[n].id&&c(n)},M=function(e){var n;for(n=o.length-1;n>=0;n--)o[n].url_infos.pptes&&o[n].url_infos.pptes.piece.asetId===e&&c(n)},h=function(){var e;for(e=o.length-1;e>=0;e--)o[e].url_infos.pptes&&c(e)},v=function(n){var t,r;for(t=0;t<o.length;t++)o[t].url_infos.pptes&&(r=o[t].url_infos.pptes.piece,e.manifestManager.isLiveTimeExpired(r.periodId,r.asetId,r.repId,r.segment.time)&&c(t));a.triggerInterfaceUpdateMap(n)},D=function(){e.addVideoEventListener("seeking",function(){e.manifestManager.isLive()||h()}),r=new PlayerInterface(e),t=new SRModule(r,e.manifestManager.getMpdUrl(),s,utils.mapMapping,utils.trackMapping,utils.segmentMapping,conf)};this.triggerInterfaceUpdateMap=function(e,n){r&&r.emit("onMapUpdate",e,n)},this.triggerInterfaceTrackChange=function(e,n){if(r){var t=n.map(function(n){return{type:n.type,coord:{periodId:e,asetId:n.asetId,repId:n.representationId},bufferLevelMax:n.bufferLevelMax}});r.emit("onTrackChange",e,t)}},this.getSRModule=function(){return t},this.getPart=f,this.cancelCDNDownloadById=function(e){m(e)},this.killSegmentDownloadForTrack=M,this.killAllSegmentDownload=h,this.mapUpdated=v,D()};module.exports=DownloadManager;


},{"../../confMedia":2,"../media/PlayerInterface":15,"../utils":31,"streamroot-downloader":131,"streamroot-p2p":278}],4:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),EventEmitter=require("eventemitter3"),debug,ABRController=function(e,t,n){var r,i,u,f,a,o,s=n,p=e,d=!1,c=.16,h=.75,m=.45,g=.55,l=.25,v=.75,I=.55,S=.6,T=13,L=1.1,b=2,B=1.5,C=1.1,M=1.3,w=10,R=(e.mediaStats,conf.ABR_DEL_T),_=!0,y=!1,E=12e3,A=[],D=[],x=0,H=0,O=0,q=0,N=0,k=0,W=new EventEmitter,G=function(e){var t,n,r,i=p.manifestManager.map.periods[e];for(A=[],t=0;t<i.asets.length;t++)if(r=i.asets[t],r.type===s)for(n=0;n<r.reps.length;n++)(!conf.HACK_ABR_HLS_AUDIO_ONLY||"video"!==r.type||r.reps[n].bandwidth>1e5)&&A.push({periodId:e,asetId:t,repId:n,bitrate:r.reps[n].bandwidth});A.sort(function(e,t){return e.bitrate-t.bitrate}),pe()},K=function(e,t){return A[0].asetId===e&&A[0].repId===t},U=function(e,t){var n=A.length-1;return A[n].asetId===e&&A[n].repId===t},V=function(){return A[0]},Y=function(e,t){var n;for(n=0;n<A.length;n++)if(A[n].asetId===e&&A[n].repId===t)return n>0?A[n-1]:A[n]},j=function(e,t){var n;for(n=0;n<A.length;n++)if(A[n].asetId===e&&A[n].repId===t)return n<A.length-1?A[n+1]:A[n]},z=function(e,t){var n;for(n=0;n<A.length;n++)if(A[n].asetId===e&&A[n].repId===t)return A[n].bitrate},F=function(e,t){return j(e,t).bitrate},J=function(e,t){var n=(new Date).getTime(),r={byteLength:e.cdnByteLength,startTimeStamp:e.startTimeStamp,endTimeStamp:e.endTimeStamp,bufferLeft:t,timeStamp:n};D.push(r)},P=function(){var e,t=(new Date).getTime();for(e=D.length-1;e>=0;e--)(t-D[e].timeStamp)/1e3>R&&D.splice(e,1)},Q=function(e){var t,n,r,i=0,u=0;for(P(),t=0;t<D.length;t++)i+=D[t].byteLength,n=Math.max(D[t].endTimeStamp-D[t].startTimeStamp-w,(D[t].endTimeStamp-D[t].startTimeStamp)/2),u+=n/1e3;return r=u>0?i/u:0,x=8*(r+e)},X=function(){var e=D.length;if(3>e)return!0;for(var t=2;t<D.length;t++)if(D[t].bufferLeft<D[t-2].bufferLeft)return!1;return!0},Z=function(){var e=D.length;if(3>e)return!1;for(var t=2;t<D.length;t++)if(D[t].bufferLeft>D[t-2].bufferLeft)return!1;return!0},$=function(e){return r>e},ee=function(e){return i>e},te=function(e){return u>e},ne=function(e){return f>e},re=function(){return H++,V()},ie=function(e,t){return O++,Y(e,t)},ue=function(e,t){return q++,j(e,t)},fe=function(){return y?void 0:re()},ae=function(){T>a?(r=l*a,i=v*a,u=I*a,f=S*a):(r=Math.min(c*a,4),i=h*a,u=m*a,f=g*a)},oe=function(e){var t=z(e.pptes.piece.asetId,e.pptes.piece.repId),n=e.pptes.piece.segment.duration;n>0&&(N=(N*k+t/1e6*n)/(k+n),k+=n)},se=function(e,t,n){d=!0,W.emit("onDecision",s),a=n,t>e.pptes.piece.segment.duration?t-=e.pptes.piece.segment.duration:t=0,oe(e),ae();var r,i,u=e.pptes.piece.asetId,f=e.pptes.piece.repId,p=e.p2pMeanThroughput?e.p2pMeanThroughput:0;if(o||(o={asetId:u,repId:f,bitrate:z(u,f)}),"undefined"!=typeof e.endTimeStamp&&"undefined"!=typeof e.startTimeStamp){var c=Math.max(e.endTimeStamp-e.startTimeStamp-w,(e.endTimeStamp-e.startTimeStamp)/2);r=8*e.cdnByteLength/(c/1e3),J(e,t)}if(i=Q(p),_=X()&&i>=L*z(u,f)){if($(t)){if(i>=b*F(u,f)&&!U(u,f))return o=ue(u,f)}else if(te(t)){if(i>=B*F(u,f)&&!U(u,f))return o=ue(u,f)}else if(i>=C*F(u,f)&&!U(u,f))return o=ue(u,f)}else{if(_=!1,!y&&$(t)&&!K(u,f))return _=!0,o=re();if(ee(t)&&Z())return o=ie(u,f);if(!y&&te(t)){if(r&&z(u,f)>=r&&!K(u,f))return o=ie(u,f)}else if(ne(t));else if(!(U(u,f)||i<=M*F(u,f)))return o=ue(u,f)}return{asetId:u,repId:f}},pe=function(){y=!0,setTimeout(function(){y=!1},E)},de=function(){return{avgBitrate:N,bitrateSwitchCount:H+O+q,minSwitchCount:H,lowerSwitchCount:O,upperSwitchCount:q}},ce=function(){return t.getBufferLeft()},he=function(){return a},me=function(){var e=[{id:"B_MIN",value:r},{id:"B_LOWER",value:i},{id:"B_LOW",value:u},{id:"B_HIGH",value:f}];return e},ge=function(){return o},le=function(){return s},ve=function(){return x},Ie=function(){if(o){o.asetId,o.repId;return[{id:"C1",value:L},{id:"C2",value:b},{id:"C3",value:B},{id:"C4",value:C},{id:"C5",value:M}]}},Se=function(){return A},Te=function(){return d},Le=function(){return _},be=function(){d=!1},Be=function(e,t){W.addListener(e,t)},Ce=function(){p.addVideoEventListener("seeking",pe)};this.getMinRepresentation=V,this.requestMinRepresentationSwitch=fe,this.getNextRepresentation=se,this.setup=G,this.getABRStats=de,this.getBufferLength=ce,this.getBufferMax=he,this.getBufferLengthLevel=me,this.getCurrentTrackInfo=ge,this.getType=le,this.getTroughput=ve,this.getTroughputLevel=Ie,this.getSortedRepresentations=Se,this.isEnabled=Te,this.isAggressiveMode=Le,this.isBufferDecreasing=Z,this.disable=be,this.addEventListener=Be,Ce()};module.exports=ABRController;


},{"../../confMedia":2,"eventemitter3":82}],5:[function(require,module,exports){
  "use strict";var ABRInterface=function(e){var t=function(){for(var t=[],r=0;r<e.length;r++){var n=e[r],f=!1;n.getBufferLengthLevel()&&(f=!0),t.push({enabled:n.isEnabled(),aggressiveMode:n.isAggressiveMode(),isBufferDecreasing:n.isBufferDecreasing(),bufferLength:n.getBufferLength(),bufferMax:n.getBufferMax(),bufferLengthLevel:n.getBufferLengthLevel(),sortedRepresentation:n.getSortedRepresentations(),currentTrackInfo:n.getCurrentTrackInfo(),type:n.getType(),throughput:n.getTroughput(),throughputLevel:n.getTroughputLevel()})}return t},r=function(t,r,n){for(var f=0;f<e.length;f++){if(n&&e[f].getType()===n){e[f].addEventListener(t,r);break}n||e[f].addEventListener(t,r)}},n=function(){window.SR_MEDIA_INTERFACE||(window.SR_MEDIA_INTERFACE={}),window.SR_MEDIA_INTERFACE.abr={},window.SR_MEDIA_INTERFACE.abr.getABRStat=t,window.SR_MEDIA_INTERFACE.abr.addEventListener=r};n()};module.exports=ABRInterface;


},{}],6:[function(require,module,exports){
  "use strict";var AESController=function(){var n=window.crypto||window.msCrypto,t=n.subtle||n.webkitSubtle,r=function(n,t){n.then?n.then(t.bind(null,null),t):(n.oncomplete=function(n){t(null,n.target.result)},n.onerror=t)},e=function(n,e){var o=t.importKey("raw",n,{name:"AES-CBC",length:128},!1,["encrypt","decrypt"]);r(o,e)},o=function(n,e,o,i){var u=t.decrypt({name:"AES-CBC",iv:o},e,n);r(u,i)},i=function(n,t,r){return function(e,i){return e?void r(e):void o(n,i,t,function(n,t){if(n)return void r(n);var e=new Uint8Array(t);r(null,e)})}},u=function(n,t,r,o){e(t,i(n,r,o))};this.decrypt=u};module.exports=AESController;


},{}],7:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),BufferController=require("./BufferController"),DiscontinuityController=require("./DiscontinuityController.js"),MediaSourceFactory=require("./wrapper/MediaSourceFactory"),ABRInterface=require("./ABRInterface"),mapAdd=require("../utils/ObjectHelper").mapAdd,Buffer=function(e){this.MODES={STREAMING:0,PREBUFFERING_MAX:1,STOP_BUFFERING:2,BUFFER_LOCAL_PIECE:3};var t,r,n,i=this,f=[],u=function(){r=new MediaSourceFactory(e),e.addVideoEventListener("loadstart",d),e.addVideoEventListener("playing",l),e.addVideoEventListener("play",g)},o=function(e,t){var r;for(r=0;r<f.length;r++)if(f[r].asetId()===e&&f[r].repId()===t)return f[r];return!1},a=function(u,o,s,d){var c,g;if("closed"===r.readyState)return void setTimeout(function(){a(u,o,s,d)},100);e.manifestManager.isLive()||(r.duration=e.manifestManager.getDuration(e.currentPeriod)),t=new DiscontinuityController(e);var l=[];for(c=0;c<o.length;c++)g=new BufferController(e,i,r,o[c].asetId,o[c].representationId,o[c].type,s,d),g.initBuffer(u),f.push(g),l.push(g.getABRController());n=new ABRInterface(l)},s=function(e){var t;for(t=0;t<f.length;t++)f[t].setBufferingMode(e)},d=function(){s(i.MODES.STREAMING)},c=function(){s(i.MODES.STOP_BUFFERING);for(var e=0;e<f.length;e++)f[e].onEnded()},g=function(){s(i.MODES.STREAMING)},l=function(){s(i.MODES.STREAMING)},h=function(e){for(var t=0;t<f.length;t++)f[t].setBufferMarginLive(e)},B=function(){var e,t=!!f.length;for(e=0;e<f.length;e++)t=t&&f[e].isInitialized();return t},S=function(){var e,t=!!f.length;for(e=0;e<f.length;e++)t=t&&f[e].isReady();return t},p=function(){S()&&e.conditionalPlay()},E=function(){var e,t=[];for(e=0;e<f.length;e++)t.push({asetId:f[e].asetId(),repId:f[e].repId()});return t},I=function(){var e,t=[];for(e=0;e<f.length;e++)t.push({buffered:f[e].getBufferedTimeRanges(),bufferedStrict:f[e].getBufferedStrict(),asetId:f[e].asetId(),repId:f[e].repId()});return t},M=function(){for(var e=0;e<f.length;e++)f[e].setBufferingMode(this.MODES.STREAMING)},R=function(){var e,t=[];if(!f.length)return[];for(e=0;e<f.length;e++)t.push(f[e].getBufferedRangeEnd());return f[t.indexOf(Math.min.apply(null,t))].getBufferedTimeRanges()},v=function(e){var t,r,n=1/0;for(r=0;r<f.length;r++)t=f[r].getBufferedRangeEnd(e),n>t&&(n=t);return n},y=function(e,t,r,n,i){var f=o(e,t);f&&f.switchedTrack(r,n,i)},T=function(e){t.applySeekRequest(e)},A=function(e,r){t.requestSeek(e,r)},m=function(){return t.getSeekTarget()},k=function(){S()&&e.onEmergency()},F=function(){for(var e,t,r=0;r<f.length;r++)t=f[r].getABRStats(),e=e?mapAdd(e,t):t;return e};this.initBuffer=a,this.setBufferMarginLive=h,this.isInitialized=B,this.isReady=S,this.bufferControllerReady=p,this.setBufferingMode=s,this.getTracks=E,this.getBufferedTracks=I,this.getBuffered=R,this.getMinBufferedTracks=v,this.switchedTrack=y,this.applySeekRequest=T,this.requestSeek=A,this.getSeekTarget=m,this.onEmergency=k,this.setStreamingMode=M,this.onEnded=c,this.getABRStats=F,u()};module.exports=Buffer;


},{"../../confMedia":2,"../utils/ObjectHelper":32,"./ABRInterface":5,"./BufferController":8,"./DiscontinuityController.js":10,"./wrapper/MediaSourceFactory":25}],8:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),SourceBufferWrapper=require("./SourceBufferWrapper"),SegmentUpdater=require("./SegmentUpdater"),ABRController=require("./ABRController"),EventEmitter=require("eventemitter3"),debug,BufferController=function(e,t,n,r,i,a,o,s){var f,u,g=this,c=(new EventEmitter,!1),d=!1,m=r,E=i,S=a,p=!1,T=!1,M=e.manifestManager.isLive(),R=conf.BUFFER.EMERGENCY_MARGIN,F=M?conf.LIVE.DISTANCE_FROM_LIVE_EDGE:conf.BUFFER.BUFFER_MARGIN,B=t,I=e.isAutoplay()||!e.isPaused()?B.MODES.STREAMING:B.MODES.STOP_BUFFERING,l=new SourceBufferWrapper(n),P=new ABRController(e,this,S),_=!1,v=!1,h=!1,k=function(){return l.getBufferedTimeRanges()},A=function(){return l.getBufferedStrict()},L=function(t,n){var r,i,a;for(void 0===n&&(n=e.getCurrentTime()),a=0;a<t.length;a++)if(r=t.start(a),i=t.end(a),n>=r&&i>=n)return i;return n},C=function(e){return L(k(),e)},O=function(e){return L(A(),e)},U=function(t){var n;n=e.manifestManager.getInitSegment(t,m,E),l.createSourceBuffer(n),p=!0},N=function(t){var n,r,i,a,o;t&&t.response&&(d=!0,e.manifestManager.getStreamType()===conf.STREAM_TYPES.SMOOTH?(n=new SegmentUpdater(t.response,t.pptes.piece),r=n.updateSegment()):e.manifestManager.getStreamType()===conf.STREAM_TYPES.DASH?r=new Uint8Array(t.response):e.manifestManager.getStreamType()===conf.STREAM_TYPES.HLS&&(r=new Uint8Array(t.response),r.key=t.pptes.piece.segment.key),i={start:t.pptes.piece.segment.time,end:t.pptes.piece.segment.time+t.pptes.piece.segment.duration},l.append(r,i,u),c=!1,M&&e.manifestManager.markAsDownloaded(t.pptes.piece),h&&h.idPiece<=t.pptes.piece.idPiece&&(B.applySeekRequest(h),h=!1,v=!0),e.currentTracks[S].autoswitch?(a=w(),o=P.getNextRepresentation(t,a,F),e.switchRepresentation(t.pptes.piece.asetId,o.asetId,t.pptes.piece.repId,o.repId,!1)):P.disable())},w=function(){return C()-e.getCurrentTime()},D=function(){c=!0},y=function(t){if(!M)return!1;var n=e.manifestManager.getPlaybackTargetSegment(e.currentPeriod,m,E),r=t-n.segment.time<-conf.LIVE.ALLOW_LIVE_DELAY;return r},V=function(){var t=B.getSeekTarget();t&&e.manifestManager.isLiveTimeExpired(e.currentPeriod,m,E,t)&&(v=!1,h=!1)},G=function(){var r,i,a,o,s,f,g=M&&B.getSeekTarget()&&B.getSeekTarget()>e.getCurrentTime()?B.getSeekTarget():e.getCurrentTime(),c=!1;if(n.duration>0&&g+.5>=n.duration&&!M&&!e.ended&&setTimeout(function(){e.onEnded()},500),p&&I!==B.MODES.STOP_BUFFERING){if(i=C(g),o=B.getMinBufferedTracks(g),s=i-g,a=O(g),f=a-g,R>=f&&(c=!0),R>=s){if(e.currentTracks[S].autoswitch){var d=P.requestMinRepresentationSwitch();d&&e.switchRepresentation(m,d.asetId,E,d.repId,!1)}V(),M&&(y(g)||0===g)&&void 0===B.getSeekTarget()&&(r=e.manifestManager.getPlaybackTargetSegment(e.currentPeriod,m,E),_=!0,v=!1,h=!1)}if(i-o<conf.BUFFER.MAX_TRACKS_OFFSET){if(!r&&(F>s||I===B.MODES.PREBUFFERING_MAX)){var l=0;0>=s?(M||(i=g),0!==g&&(l=.001)):l=.2,r=e.manifestManager.getPartForTime(e.currentPeriod,i+l,m,E)}!r&&e.manifestManager.isLiveTimeExpired(e.currentPeriod,m,E,i)&&(_=!0,v=!1),!_&&r||v||h?r&&(v=!0,u=r.idPiece,e.downloadManager.getPart(r,N)):(r||(r=e.manifestManager.getBeginningSegment(e.currentPeriod,m,E)),Y(r),u=r.idPiece,e.downloadManager.getPart(r,N)),c||T?c&&T&&(M||n.duration-g>R+1)&&(t.onEmergency(),T=!1):(T=!0,B.bufferControllerReady())}}},b=function(){var t,n,r,i,a=k(),o=e.getCurrentTime();for(i=0;i<a.length;i++)o<a.start(i)||a.end(i)<o?(t=a.start(i),n=a.end(i),l.remove({start:t,end:n})):(t=a.start(i)-.2>=0?a.start(i)-.2:0,r=e.manifestManager.getPartForTime(e.currentPeriod,o-conf.REMOVE_OLD_SEGMENTS_DELAY,m,E),n=r?r.segment.time:o-conf.REMOVE_OLD_SEGMENTS_DELAY,n>t&&l.remove({start:t,end:n}))},q=function(){var t,n,r,i=e.getCurrentTime(),a=l.getPlaybackInterval(i);if(a&&(n=e.manifestManager.getPartForTime(e.currentPeriod,a.end-.2,m,E)))for(t=n.idPiece,r={periodId:e.currentPeriod,asetId:m,repId:E,idPiece:t};;){if(r=e.manifestManager.getNextSegment(r),!r)break;var o=e.downloadManager.getSRModule().getP2PData(r);if(o.isComplete()&&!o.isLocked()){u=r.idPiece,o.getFullSegment({},N);break}}},W=function(t,n,r){var i,a,o,s=e.getCurrentTime(),f=e.manifestManager.getPartForTime(e.currentPeriod,s,m,E),u=f?f.segment.time:!1,g=!1;if(r)if(conf.BUFFER.FORCE_SWITCH_CLEAR_ALL)g=!0,e.video.event_handlers.onBuffering();else if(i=e.manifestManager.getPartForTime(e.currentPeriod,s+conf.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER,m,E))a=i.segment.time+i.segment.duration;else{var c=e.manifestManager.getBeginningSegment(e.currentPeriod,m,E);if(!(s+conf.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER<c.segment.time))return;a=c.segment.time+c.segment.duration}else q();o=e.manifestManager.getInitSegment(e.currentPeriod,t,n),l.switchedTrack(o,u,a,g),m=t,E=n},Y=function(t){B.requestSeek(t,S),e.video.isFlash&&l.requestedSeek(),h=t},H=function(){return S},x=function(){return P},K=function(){v=!1},X=function(){P.setup(e.currentPeriod),e.addVideoEventListener("seeking",g.onseeking.bind(g)),e.addVideoEventListener("seeked",g.onseeked.bind(g)),setInterval(G,100),setInterval(b,1e4),e.ee.on("trackSwitch",D)};this.getABRController=x,this.getTrackType=H,this.getBufferLeft=w,this.asetId=function(){return m},this.repId=function(){return E},this.initBuffer=U,this.setBufferMarginLive=function(e){e<=conf.LIVE.DISTANCE_FROM_LIVE_EDGE-conf.LIVE.MIN_BUFFER_LEVEL&&(F=conf.LIVE.MIN_BUFFER_LEVEL+e)},this.isInitialized=function(){return p},this.isReady=function(){return T},this.setBufferingMode=function(e){f=I,I=e},this.getBufferedTimeRanges=k,this.getBufferedStrict=A,this.getBufferedRangeEnd=C,this.switchedTrack=W,this.onseeking=function(){e.video.isFlash&&g.setBufferingMode(B.MODES.STOP_BUFFERING),l.onSeeking()},this.onseeked=function(){g.setBufferingMode(B.MODES.STREAMING),l.onSeeked(),b(),d=!1},this.onEnded=K,this.getABRStats=P.getABRStats,X()};module.exports=BufferController;


},{"../../confMedia":2,"./ABRController":4,"./SegmentUpdater":17,"./SourceBufferWrapper":18,"eventemitter3":82}],9:[function(require,module,exports){
  "use strict";function isInteger(e){return"number"==typeof e&&e%1===0}var CustomTimeRange=function(e){var n=e;this.length=n.length,this.start=function(e){if(isInteger(e)&&e>=0&&e<n.length)return n[e].start;throw isInteger(e)?new Error("CustomTimeRange index out of range"):new Error("Incorrect index type")},this.end=function(e){if(isInteger(e)&&e>=0&&e<n.length)return n[e].end;throw isInteger(e)?new Error("CustomTimeRange index out of range"):new Error("Incorrect index type")}};module.exports=CustomTimeRange;


},{}],10:[function(require,module,exports){
  "use strict";var SeekRequest=require("./SeekRequest.js"),debug,DiscontinuityController=function(e){var t,n=[],i=function(){return t},r=function(i,r){for(var a=0;a<n.length;a++)n[a].getTrackType()===r&&n.splice(a,1);t=void 0!==t?Math.max(t,i.segment.time):i.segment.time,n.push(new SeekRequest(i,r)),e.manifestManager.isLive()?e.downloadManager.killAllSegmentDownload():e.downloadManager.killSegmentDownloadForTrack(i.asetId)},a=function(i){var r,a=!0;if(n.length){if(i)for(r=0;r<n.length;r++)n[r].getPiece()===i&&n[r].setReady();for(r=0;r<n.length;r++)a=a&&n[r].isReady();if(a||e.manifestManager.isLive())return e.setCurrentTime(t),t=void 0,n=[],!0}};this.applySeekRequest=a,this.requestSeek=r,this.getSeekTarget=i};module.exports=DiscontinuityController;


},{"./SeekRequest.js":16}],11:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),MapHelper=require("./MapHelper"),_=require("underscore"),ISOBMFF=require("../../../vendor/js/isobmffManager"),utils=require("../utils"),MapGenerator=require("streamroot-map-generator"),ManifestManager=function(e,t){var r,i,n,s,a,o=this,d=conf.ADD_QUERY_PARAM?utils.updateQueryStringParameter(t,"streamroot",1):t,p=d,u={periods:[]},f=new MapHelper,c=!1,g=new MapGenerator({PLAYLIST_HLS_KEEP_LAST_LINES:conf.PLAYLIST_HLS_KEEP_LAST_LINES,SS_IMPLICIT_AAC_HE:conf.SS_IMPLICIT_AAC_HE}),l=function(){var e=u.isLive;return e},m=function(e,t,r){var i=!1;return utils.isPosInt(e)&&e<u.periods.length&&utils.isPosInt(t)&&t<u.periods[e].asets.length&&utils.isPosInt(r)&&r<u.periods[e].asets[t].reps.length&&(i=!0),i},h=function(e){var t,r=u.periods[e.periodId].asets[e.asetId].reps[e.repId].segments;for(t=0;t<r.length;t++)if(r[t].id===e.idPiece)return r[t]},I=function(e,t,r){var i=u.periods[e].asets[t].reps[r].segments,n=i[i.length-1];return n.time+n.duration},S=function(e,t,r){var i=I(e,t,r);return Math.max(i-conf.LIVE.DISTANCE_FROM_LIVE_EDGE,u.periods[e].asets[t].reps[r].segments[0].time)},M=function(e,t,r){for(var i,n=u.periods[e].asets[t].reps[r].segments,s=v(e,t,r),a=S(e,t,r),o=n.length-1;i=n[o];o--)if(i.time<=a||s>=o)return o;return 0},E=function(e,t,r){if(!m(e,t,r))return void 0;var i=M(e,t,r),n=u.periods[e].asets[t].reps[r].segments[i];return{periodId:e,repId:r,asetId:t,idPiece:n.id,segment:n}},v=function(e,t,r){var i=0,n=u.periods[e].asets[t].reps[r].segments;return l()&&(n.length>=5?i=2:4===n.length?i=1:3===n.length&&n[2].duration>=9&&(i=1)),i},P=function(e,t,r){if(!m(e,t,r))return void 0;var i=v(e,t,r),n=u.periods[e].asets[t].reps[r].segments[i];return{periodId:e,repId:r,asetId:t,idPiece:n.id,segment:n}},T=function(e,t,r,i){if(!l())return!1;var n=u.periods[e].asets[t].reps[r].segments[0];return i<n.time},A=function(e){"dash"===e?(s=conf.STREAM_TYPES.DASH,o.stream_type=s):"smooth"===e?(s=conf.STREAM_TYPES.SMOOTH,o.stream_type=s):"hls"===e&&(s=conf.STREAM_TYPES.HLS,o.stream_type=s)},L=function(e){e?g.getMap(p,i,R):g.getMap(d,null,w)},w=function(e,t){if(e)return void a(e);var r,s,f=t.map.profile;i=t.map,u=H(i),o.map=u,u.location&&o.stream_type!=conf.STREAM_TYPES.HLS&&(r=utils.parseUrl(u.location),s=utils.parseUrl(d),p=s.protocol+"//"+r.host+r.pathname+r.search+r.hash,conf.ADD_QUERY_PARAM&&(p=utils.updateQueryStringParameter(p,"streamroot",1))),void 0!==f&&(n=f),A(t.type),l()&&y(),c=!0,a()},R=function(t,r){t||(i=r.map,u=H(i),o.map=u,e.downloadManager.mapUpdated(u),y())},H=function(e){return f.trimMapByBitrate(e,conf.REPRESENTATION_NUMBER)},y=function(){var t=u.periods[e.currentPeriod].asets[0].reps[0].segments,i=t[t.length-1].duration||conf.MPD_UPDATE_INTERVAL,n=Math.max(1e3*i-conf.RTT_RELOAD_OFFSET,conf.MIN_UPDATE_INTERVAL);clearInterval(r),r=setInterval(function(){o.loadManifest(!0)},n)},D=function(e,t,r,i,n,s){for(var a,o=u.periods[e].asets[t].reps[r].segments,d=n,p=o.length,f=0;p>f;f++)if(o[f].id==i){if(a=o[f].time-d,Math.abs(a)>conf.PTS_TOLERANCE)if(l())for(var c=f;p>c;c++)o[c].time-=a;else for(var g=0;p>g;g++)o[g].time-=a;break}},z=function(t,r,i,n,s,a){for(var o,d=0;o=u.periods[t].asets[d];d++)for(var p,f=0;p=o.reps[f];f++)d===r&&f===i?(D(t,r,i,n,s,a),p.ptsVerified=!0):p.ptsVerified||D(t,d,f,n,s,a);e.downloadManager.triggerInterfaceUpdateMap(u)};this.isLive=l,this.hasSegmentHashes=function(e,t,r){return o.stream_type==conf.STREAM_TYPES.HLS?!1:u.periods[e].asets[t].reps[r].hasSegmentHashes},this.getMap=function(){return u},this.getMpdUrl=function(){return d},this.getStreamType=function(){return s},this.getDuration=function(e){return u.periods[e].duration},this.getPlaybackOffset=function(e){return u.periods[e].playbackOffset},this.getPlaybackTargetSegment=E,this.getBeginningSegment=P,this.isLiveTimeExpired=T,this.getNextSegment=function(e){var t=_.filter(u.periods[e.periodId].asets[e.asetId].reps[e.repId].segments,function(t){return t.id>e.idPiece});return t.length?(t=_.sortBy(t,function(e){return e.id}),{periodId:e.periodId,asetId:e.asetId,repId:e.repId,idPiece:t[0].id,segment:t[0]}):!1},this.getInitSegment=function(e,t,r){var i,n,s;return o.stream_type==conf.STREAM_TYPES.HLS?(i=new ArrayBuffer(8),n="application/vnd.apple.mpegurl",s=10):(i=ISOBMFF.extractInit(u.periods[e].asets[t].reps[r].init.value),n=u.periods[e].asets[t].reps[r].mime+'; codecs="'+u.periods[e].asets[t].reps[r].codecs+'"',s=u.periods[e].duration),{duration:s,initSegment:i,mimecodec:n}},this.getPartForTime=function(e,t,r,i){for(var n=u.periods[e].asets[r].reps[i].segments,s=0;s<n.length-1;s++)if(n[s].time<=t&&n[s+1].time>t)return{periodId:e,repId:i,asetId:r,idPiece:n[s].id,segment:n[s]};return n[n.length-1].time<=t&&n[n.length-1].time+n[n.length-1].duration>t?{periodId:e,repId:i,asetId:r,idPiece:n[s].id,segment:n[n.length-1]}:null},this.getPieceInfos=function(e){var t=h(e);return t?o.stream_type==conf.STREAM_TYPES.HLS?{url:t.url||u.periods[e.periodId].asets[e.asetId].reps[0].url,range:t.size&&t.offset&&{start:t.offset,end:t.offset+t.size-1}||null,downloading:t.downloading,downloaded:t.downloaded,size:t.size||null,time:t.time}:{url:t.url||u.periods[e.periodId].asets[e.asetId].reps[e.repId].url,range:t.size&&t.offset&&{start:t.offset,end:t.offset+t.size-1}||null,downloading:t.downloading,downloaded:t.downloaded,size:t.size||null,time:t.time}:!1},this.getSegmentHash=function(e){var t=h(e);return t&&t.hash?t.hash:!1},this.setSegmentSize=function(e,t,r,i,n){var s=h({periodId:e,asetId:t,repId:r,idPiece:i});s&&(s.size||(s.size=n))},this.setSegmentHash=function(e,t){var r=h(e);r&&(r.hash=t)},this.loadManifest=function(e,t){a=t,L(e)},this.markAsDownloading=function(e,t){var r=h(e);r&&(r.downloading=t|!1)},this.markAsDownloaded=function(e){var t=h(e);t&&(t.downloaded=!0)},this.getVideoTrackDimensions=function(e,t,r){var i=u.periods[e].asets[t].reps[r];return i.width&&i.height?{width:i.width,height:i.height}:{width:0,height:0}},this.updateMapPTS=z};module.exports=ManifestManager;


},{"../../../vendor/js/isobmffManager":299,"../../confMedia":2,"../utils":31,"./MapHelper":12,"streamroot-map-generator":235,"underscore":297}],12:[function(require,module,exports){
  "use strict";var MapHelper=function(){var r=function(r,n){for(var i,a=t(r),s=r.periods[0],p=Math.abs(n),o=0;i=s.asets[o];o++){for(var l,f=[],u=0;l=i.reps[u];u++)e(f,l);n>0?p<f.length&&f.splice(0,f.length-p):0>n&&p<f.length&&f.splice(p,f.length-p),a.periods[0].asets[o].reps=f}return a},e=function(r,e){for(var t=!1,n=0;n<r.length;n++)if(e.bandwidth<r[n].bandwidth){r.splice(n,0,e),t=!0;break}t||r.push(e)},t=function(r){if(null===r||"object"!=typeof r)return r;var e;e=r instanceof Array?[]:{};for(var n in r)"init"===n?e[n]=r[n]:"reps"===n||(e[n]=t(r[n]));return e};this.trimMapByBitrate=r};module.exports=MapHelper;


},{}],13:[function(require,module,exports){
  "use strict";var conf=require("../../confMedia"),Buffer=require("./Buffer"),ManifestManager=require("./ManifestManager"),DownloadManager=require("../download/DownloadManager"),utils=require("../utils"),VideoWrapper=require("./VideoWrapper"),VideoExtension=require("./wrapper/VideoExtension"),Track=require("./Track.js"),MediaStats=require("./MediaStats"),EventEmitter=require("eventemitter3"),DRMManager=require("../security/DRMManager.js"),MediaController=function(e,t,r,i){var n=(new Date).getTime();this.playlistDuration=0;var a,s=["onBuffering","onPlaying","onPaused","onFinish","onSpaceBar","onKeyForward","onKeyRewind"],o=function(){},d=utils.overloadConf(conf,i);for(a=0;a<s.length;a++)"undefined"==typeof r[s[a]]&&(r[s[a]]=o);"application/x-shockwave-flash"===e.type?this.video=new VideoExtension(this,e):this.video=e,this.video.event_handlers=r,this.ee=new EventEmitter,this.addVideoEventListener("ended",this.onEnded.bind(this)),this.addVideoEventListener("stalled",this.onStalled.bind(this)),this.video.addEventListener("play",this.onPlay.bind(this)),this.buffer=new Buffer(this),this.videoWrapper=new VideoWrapper(this.video,this,n),this.mediaStats=new MediaStats(this.videoWrapper,this.buffer),this.video.mpd=new ManifestManager(this,t),this.manifestManager=this.video.mpd,this.downloadManager=new DownloadManager(this,d),this.drmManager=new DRMManager(this.video),this.want_to_play=!1,this.currentTracks={},this.currentPeriod=0,conf.FORCE_TRACK_BOOL&&conf.PRESELECTED_TRACKS&&(this.currentTracks=conf.PRESELECTED_TRACKS),this.manifestManager.loadManifest(!1,this.manifestReady.bind(this))};MediaController.prototype.conditionalPlay=function(){this.want_to_play&&this.video.paused&&this.play(!0)},MediaController.prototype.manifestReady=function(e){if(e)return void(conf.DISPLAY_ERROR&&this.video.event_handlers.onError(e));var t,r=this.manifestManager.getMap();if(this.manifestManager.isLive())for(var i=r.periods[0].asets[0].reps[0].segments,n=0;n<i.length;n++)this.playlistDuration+=i[n].duration;for(var a,s=0;a=r.periods[this.currentPeriod].asets[s];s++)this.manifestManager.getStreamType()==conf.STREAM_TYPES.HLS&&(a.type="video"),this.currentTracks[a.type]||(this.currentTracks[a.type]=new Track(s,0,!1)),this.currentTracks[a.type].autoswitch=conf.DEFAULT_AUTOSWITCH[a.type]===!0;if(conf.FORCE_TRACK_BOOL||this.chooseBandwidthInitial(),this.video.event_handlers.onMetaData){for(var o,d=[],h=0;o=r.periods[this.currentPeriod].asets[h];h++)for(var c,u=o.lang||null,p=o.type||null,l=0;c=o.reps[l];l++){var f={bandwidth:c.bandwidth,repId:l,lang:c.lang||u,width:c.width||null,height:c.height||null};f.type=p,f.asetId=h,f.type&&(f.selected=this.currentTracks[f.type].autoswitch===!1&&this.currentTracks[f.type].asetId==f.asetId&&this.currentTracks[f.type].repId==f.repId),d.push(f)}for(var v in this.currentTracks)t={label:"auto",auto:!0,type:v,selected:this.currentTracks[v].autoswitch!==!1,repId:-1},conf.AUTO_LABEL_FIRST?d.splice(0,0,t):d.push(t);d=d.sort(utils.sortDescending),this.video.event_handlers.onMetaData(d),this.emitNewBitrate()}var M=[];for(var T in this.currentTracks)M.push({autoswitch:this.currentTracks[T].autoswitch,asetId:this.currentTracks[T].asetId,representationId:this.currentTracks[T].repId,type:T});this.buffer.initBuffer(this.currentPeriod,M,r.minBufferTime,r.maxSegmentDuration),this.downloadManager.triggerInterfaceUpdateMap(r),this.manifestManager.isLive()&&(M=this.computeBufferLevelMax(M)),this.downloadManager.triggerInterfaceTrackChange(this.currentPeriod,M)},MediaController.prototype.computeBufferLevelMax=function(e){var t=conf.LIVE.DISTANCE_FROM_LIVE_EDGE-conf.LIVE.MIN_BUFFER_LEVEL;return 0>=t&&(t=0),e.map(function(e){return e.bufferLevelMax=t,e})},MediaController.prototype.onEnded=function(){this.ended||(this.buffer.onEnded(),this.ended=!0,this.videoWrapper.onEnded(),this.video.event_handlers.onFinish(),this.ee.emit("ended"))},MediaController.prototype.onPlay=function(){this.ended&&conf.SEEK_ON_RESTART&&(this.video.currentTime=0,this.ended=!1)},MediaController.prototype.onStalled=function(){if(0===this.video.currentTime&&this.want_to_play)try{this.video.currentTime=0}catch(e){}},MediaController.prototype.sortMaxBWReps=function(){var e,t=this.currentTracks;for(var r in t)t.hasOwnProperty(r)&&(e=this.manifestManager.getMap().periods[this.currentPeriod].asets[t[r].asetId].reps,e.sort(utils.sortDescending))},MediaController.prototype.chooseFirstReps=function(){var e=this.currentTracks;for(var t in e)e.hasOwnProperty(t)&&(e[t].repId=0)},MediaController.prototype.chooseBandwidthInitial=function(){var e,t,r,i,n;if(conf.FORCE_BANDWIDTH)for(i in this.currentTracks){for(t=1/0,e=this.manifestManager.getMap().periods[this.currentPeriod].asets[this.currentTracks[i].asetId].reps,n=0;n<e.length;n++)Math.abs(e[n].bandwidth-conf.FORCE_BANDWIDTH[i])<=t&&(t=Math.abs(e[n].bandwidth-conf.FORCE_BANDWIDTH[i]),r=n);this.currentTracks[i].repId=r}},MediaController.prototype.onEmergency=function(){this.videoWrapper.setWaiting()},MediaController.prototype.manualSwitchRepresentation=function(e,t,r){var i=this.currentTracks[e].asetId,n=this.currentTracks[e].repId,a=!1,s=this.manifestManager.getMap();-1==r?this.currentTracks[e].autoswitch=!0:(this.currentTracks[e].autoswitch=!1,this.currentTracks[e].asetId=t,this.currentTracks[e].repId=r,a=s.periods[this.currentPeriod].asets[t].reps[r].bandwidth>s.periods[this.currentPeriod].asets[i].reps[n].bandwidth||conf.BUFFER.ALWAYS_FORCE_SWITCH,this.switchRepresentation(i,t,n,r,a))},MediaController.prototype.switchRepresentation=function(e,t,r,i,n){if(t!==e||i!==r){this.buffer.switchedTrack(e,r,t,i,n),this.downloadManager.killSegmentDownloadForTrack(e);var a=[];for(var s in this.currentTracks)this.currentTracks[s].asetId===e&&this.currentTracks[s].repId===r&&(this.currentTracks[s].asetId=t,this.currentTracks[s].repId=i),a.push({autoswitch:this.currentTracks[s].autoswitch,asetId:this.currentTracks[s].asetId,representationId:this.currentTracks[s].repId,type:s});this.downloadManager.triggerInterfaceTrackChange(this.currentPeriod,a),this.ee.emit("trackSwitch"),this.emitNewBitrate()}},MediaController.prototype.emitNewBitrate=function(){var e=0;for(var t in this.currentTracks)e+=this.manifestManager.getMap().periods[this.currentPeriod].asets[this.currentTracks[t].asetId].reps[this.currentTracks[t].repId].bandwidth;this.ee.emit("bitrateswitch",e)},MediaController.prototype.isPaused=function(){return this.video.paused},MediaController.prototype.isAutoplay=function(){return this.video.autoplay},MediaController.prototype.getCurrentTime=function(){return this.video.currentTime},MediaController.prototype.getDuration=function(){return this.video.duration},MediaController.prototype.getVideoBuffered=function(){return this.video.buffered},MediaController.prototype.setCurrentTime=function(e){e>=0&&1/0>e&&(this.video.currentTime=e)},MediaController.prototype.play=function(e){e&&this.ended||(this.want_to_play=!0,this.video.paused&&(this.buffer.setStreamingMode(),this.video.play()))},MediaController.prototype.pause=function(){this.want_to_play=0,this.video.pause(),this.video.event_handlers.onPaused()},MediaController.prototype.getBuffered=function(){return this.buffer.getBuffered()},MediaController.prototype.watchFreezeLive=function(){var e=this.getCurrentTime(),t=-(1/0),r=function(){if(this.buffer.isInitialized()){var r,i=this.getCurrentTime(),n=(new Date).getTime();.002>i-e&&(n-t>conf.FREEZE_LIVE_MIN_SEEK_TIME&&(r=this.manifestManager.map.periods[this.currentPeriod].asets[0].reps[0].segments[0].time+.01,r>=this.getCurrentTime()&&(this.setCurrentTime(r),t=n)),this.play(!0)),e=i}};setInterval(r.bind(this),1e3)},MediaController.prototype.addVideoEventListener=function(e,t){this.video.addEventListener(e,t)},MediaController.prototype.addEventListener=function(e,t){this.ee.addListener(e,t)},MediaController.prototype.removeVideoEventListener=function(e,t){this.video.removeEventListener(e,t)},MediaController.prototype.getVideoDimensions=function(){return this.manifestManager.getVideoTrackDimensions(this.currentPeriod,this.currentTracks.video.asetId,this.currentTracks.video.repId)},MediaController.prototype.updateMapPTS=function(e,t,r){return this.manifestManager.updateMapPTS(this.currentPeriod,this.currentTracks.video.asetId,this.currentTracks.video.repId,e,t,r)},module.exports=MediaController;


},{"../../confMedia":2,"../download/DownloadManager":3,"../security/DRMManager.js":30,"../utils":31,"./Buffer":7,"./ManifestManager":11,"./MediaStats":14,"./Track.js":19,"./VideoWrapper":20,"./wrapper/VideoExtension":29,"eventemitter3":82}],14:[function(require,module,exports){
  "use strict";var ObjectHelper=require("../utils/ObjectHelper"),MediaStats=function(t,e){var i=this,r=t,s=e,o=function(){var t=r.getVideoStats(),e=s.getABRStats();return t=ObjectHelper.merge(t,e)},E=function(){window.SR_MEDIA_INTERFACE||(window.SR_MEDIA_INTERFACE={}),window.SR_MEDIA_INTERFACE.qos={},window.SR_MEDIA_INTERFACE.qos.getStats=o};i.getStats=o,E()};module.exports=MediaStats;


},{"../utils/ObjectHelper":32}],15:[function(require,module,exports){
  var EventEmitter=require("eventemitter3").EventEmitter,PlayerInterface=function(e){this.getCurrentTime=function(){return e.getCurrentTime()},this.setCurrentTime=function(t){e.setCurrentTime(t)},this.getPlaybackOffset=function(){return e.manifestManager.getPlaybackOffset(e.currentPeriod)},this.getBuffered=function(){for(var t,r=e.buffer.getBufferedTracks(),n=[],i=0;t=r[i];i++)n.push({buffered:t.buffered,coord:{periodId:e.currentPeriod,asetId:t.asetId,repId:t.repId},bufferedStrict:t.bufferedStrict});return n},this.areBuffersInitialized=function(){return e.buffer.isInitialized()},this.setBufferMarginLive=function(t){e.buffer.setBufferMarginLive(t)},this.addEventListener=function(e,t){this.on(e,t)},this.addVideoEventListener=function(t,r){e.addVideoEventListener(t,r)},this.removeEventListener=function(e,t){this.removeListener(e,t)},this.removeVideoEventListener=function(t,r){e.removeVideoEventListener(t,r)},this.getMediaStats=function(){return e.mediaStats}};PlayerInterface.prototype=Object.create(EventEmitter.prototype),PlayerInterface.prototype.constructor=PlayerInterface,module.exports=PlayerInterface;


},{"eventemitter3":82}],16:[function(require,module,exports){
  "use strict";var SeekRequest=function(e,t){var n=t,i=!1,u=function(){return n},r=function(){return i},s=function(){i=!0},c=function(){return e};this.isReady=r,this.getTrackType=u,this.setReady=s,this.getPiece=c};module.exports=SeekRequest;


},{}],17:[function(require,module,exports){
  "use strict";function readBytes(t,r,e){for(var n="",a=0;e>a;a++)n+=decToHex(t[r+a]);return n}function decToHex(t,r){var e=Number(t).toString(16);return r="undefined"==typeof r||null===r?r=2:r,r>16&&(r=16),e="0000000000000000".substr(0,r-e.length)+e}function intToUint8Array(t,r){r="undefined"==typeof r||null===r?r=16:r,t=decToHex(t,r);for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return new Uint8Array(e)}var Long=require("./parser/long"),MOOF="6D6F6F66",MFHD="6D666864",TRAF="74726166",TFHD="74666864",TFDT="74666474",TRUN="7472756E",MDAT="6D646174",UUID="75756964",SegmentUpdater=function(t,r){this.piece=r,this.data=new Uint8Array(t)};SegmentUpdater.prototype.updateSegment=function(){var t=this.buildSegment();t.moof.traf.tfdt||(t=this.addTfdt(t)),t=this.updateTfhd(t),t=this.updateTrun(t);var r=this.buildData(t);return r},SegmentUpdater.prototype.buildSegment=function(){for(var t=this.findBox(MOOF,0,this.data.length),r=this.findBox(MFHD,t.start+8,t.length-8),e=this.findBox(TRAF,t.start+8,t.length-8),n=this.findBox(TFHD,e.start+8,e.length-8),a=this.findBox(TRUN,e.start+8,e.length-8),o=this.findBox(TFDT,e.start+8,e.length-8),f=[],h=this.findBox(MDAT,0,this.data.length),i=this.findBox(UUID,e.start+8,e.length-8);i;)f.push(i),i=this.findBox(UUID,i.start+i.length,e.length-8-(i.start-e.start)-i.length);var d=!1,g=!1;a&&(d=this.data.subarray(a.start,a.start+a.length)),o&&(g=this.data.subarray(o.start,o.start+o.length));for(var l=0,s=0;s<f.length;s++){var u=f[s];f[s]=this.data.subarray(u.start,u.start+u.length),l+=u.length}var m=this.data.subarray(r.start,r.start+r.length),p=this.data.subarray(n.start,n.start+n.length),y=this.data.subarray(h.start,h.start+h.length);e.length=p.length+(g.length||0)+d.length+8,t.length=m.length+e.length+8;var U={moof:{length:t.length,mfhd:m,traf:{length:e.length,tfhd:p,tfdt:g,trun:d,uuid:f}},mdat:y};return U},SegmentUpdater.prototype.addTfdt=function(t){for(var r=[0,0,0,20,116,102,100,116,1,0,0,0,0,0,0,0,0,0,0,0],e=intToUint8Array(this.piece.segment.decodeTime,16),n=0;n<e.length;n++)r[12+n]=e[n];return r=new Uint8Array(r),t.moof.traf.tfdt=r,t.moof.length+=20,t.moof.traf.length+=20,t},SegmentUpdater.prototype.addTrun=function(t){},SegmentUpdater.prototype.updateTfhd=function(t){var r=t.moof.traf.tfhd,e=r[11],n=0,a=!1;e%2===1&&(n=-8,a=!0),t.moof.length=t.moof.length+n,t.moof.traf.length=t.moof.traf.length+n;var o=r.length+n,f=new Uint8Array(o),h=0;o=intToUint8Array(o,8);for(var i=0;i<o.length;i++)f[h]=o[i],h++;for(;11>h;)f[h]=r[h],h++;for(a?f[11]=e-1:f[11]=e,h++;15>h;)f[h]=r[h],h++;for(;h<r.length+n;)f[h]=r[h-n],h++;return t.moof.traf.tfhd=f,t},SegmentUpdater.prototype.updateTrun=function(t){var r=t.moof.traf.trun,e=r[11],n=0,a=!0;e%2===0&&(n=4,a=!1),t.moof.length=t.moof.length+n,t.moof.traf.length=t.moof.traf.length+n;var o=r.length+n,f=new Uint8Array(o),h=0;o=intToUint8Array(o,8);for(var i=0;i<o.length;i++)f[h]=o[i],h++;for(;11>h;)f[h]=r[h],h++;for(a?f[11]=e:f[11]=e+1,h++;16>h;)f[h]=r[h],h++;for(var d=intToUint8Array(t.moof.length+8,8),i=0;i<d.length;i++)f[h]=d[i],h++;for(;h<r.length+n;)f[h]=r[h-n],h++;return t.moof.traf.trun=f,t},SegmentUpdater.prototype.buildData=function(t){for(var r=t.moof.length+t.mdat.length,e=new Uint8Array(r),n=0,a=intToUint8Array(t.moof.length,8),o=0;o<a.length;o++)e[n]=a[o],n++;for(e[4]=109,e[5]=111,e[6]=111,e[7]=102,n=8,o=0;o<t.moof.mfhd.length;o++)e[n]=t.moof.mfhd[o],n++;var f=intToUint8Array(t.moof.traf.length,8);for(o=0;o<f.length;o++)e[n]=f[o],n++;for(e[n]=116,n++,e[n]=114,n++,e[n]=97,n++,e[n]=102,n++,o=0;o<t.moof.traf.tfhd.length;o++)15==o?e[n]=2:e[n]=t.moof.traf.tfhd[o],n++;for(o=0;o<t.moof.traf.tfdt.length;o++)e[n]=t.moof.traf.tfdt[o],n++;for(o=0;o<t.moof.traf.trun.length;o++)e[n]=t.moof.traf.trun[o],n++;for(o=0;o<t.mdat.length;o++)e[n]=t.mdat[o],n++;return e},SegmentUpdater.prototype.findBox=function(t,r,e){t=t.toLowerCase();for(var n=r,a="",o=0;r+e>n&&a!=t;)n+=o,o=parseInt(readBytes(this.data,n,4),16),a=readBytes(this.data,n+4,4);return a==t?{start:n,length:o}:!1},module.exports=SegmentUpdater;


},{"./parser/long":21}],18:[function(require,module,exports){
  "use strict";var CustomTimeRange=require("./CustomTimeRange"),AESController=require("./AESController"),SourceBufferWrapper=function(e){this.ACTION_TYPE={REMOVE:0,APPEND:1};var t,n,r,i,u=this,f=[],a=[],s=0,o=[],d=.3,c=!1,p=function(e,t,n,r){e===u.ACTION_TYPE.APPEND?f.push({segmentData:t,segmentInterval:n,seqnum:r}):a.push(t)},h=function(e){e===u.ACTION_TYPE.APPEND?f.splice(0,1):a.splice(0,1)},l=function(){var e;for(e=f.length-1;e>=0;e--)"undefined"!=typeof f[e].segmentInterval&&f.splice(e,1);o=[]},g=function(e){var t;for(t=0;t<o.length;t++)if(e.start<o[t].start)return void o.splice(t,0,e);o.push(e)},m=function(e){var t;for(t=0;t<o.length;t++)o[t]===e&&o.splice(t,1)},E=function(){return 0===f.length&&0===a.length},v=function(e,f,a,o){if(i.updating||n)a||p(u.ACTION_TYPE.APPEND,e,f,o);else if(c&&f);else if(a||E()){var d,l;f&&(d=f.start,l=f.end),r=f,a&&h(u.ACTION_TYPE.APPEND);var g=function(e){return function(t,r){t||(n=!1,s===e?i.isFlash?i.appendBuffer(r,d,l,o):i.appendBuffer(r):P())}},m=g(s);e.key?(n=!0,t.decrypt(e.buffer,e.key.aesKey.buffer,e.key.iv,m)):m(null,e)}else p(u.ACTION_TYPE.APPEND,e,f,o)},T=function(e,t){i.updating?t||p(u.ACTION_TYPE.REMOVE,e):t||E()?(t&&h(u.ACTION_TYPE.REMOVE),e.start>=0&&e.end<1/0&&e.start<e.end?i.remove(e.start,e.end):setTimeout(P,0)):p(u.ACTION_TYPE.REMOVE,e)},P=function(){r&&(m(r),r=void 0),a.length?T(a[0],!0):f.length?v(f[0].segmentData,f[0].segmentInterval,!0,f[0].seqnum):o=[]},A=function(){for(var e,t,n,r,u,f=i.buffered,a=[],s=0,c=0;s<f.length||c<o.length;)r=s<f.length?f.start(s):1/0,u=c<o.length?o[c].start:1/0,"undefined"==typeof t?r!==1/0&&u>r?(t=f.start(s),n=f.end(s),s++):(t=o[c].start,n=o[c].end,c++):n>r-d?(n=Math.max(n,f.end(s)),s++):n>u-d?(n=Math.max(n,o[c].end),c++):(a.push({start:t,end:n}),t=void 0,n=void 0);return"undefined"!=typeof t&&a.push({start:t,end:n}),e=new CustomTimeRange(a)},S=function(e){var t,n=A();for(t=0;t<n.length;t++)if(n.start(t)<=e&&e<=n.end(t))return{start:n.start(t),end:n.end(t)};return!1},C=function(e,t,n,r){var u=i.buffered.length?i.buffered.end(i.buffered.length-1):void 0;r?(l(),u&&T({start:i.appendWindowStart,end:u},!1)):(t&&T({start:i.appendWindowStart,end:t},!1),n&&u&&(l(),T({start:n,end:u},!1))),v(e.initSegment,void 0,!1)},N=function(){},I=function(){l(),s++};this.createSourceBuffer=function(n){t=new AESController,i=e.addSourceBuffer(n.mimecodec),"undefined"==typeof i.appendBuffer&&(i.appendBuffer=i.append),i.addEventListener("updateend",P),n.initSegment.byteLength>10&&i.appendBuffer(n.initSegment)},this.append=function(e,t,n){g(t),v(e,t,!1,n)},this.remove=function(e){T(e,!1)},this.getBufferedTimeRanges=A,this.getBufferedStrict=function(){return i.buffered},this.getPlaybackInterval=S,this.checkSegment=function(e){var t,n,r,i=A(),u=e.time,f=u+e.duration;for(r=0;r<i.length;r++)if(t=i.start(r),n=i.end(r),u+d>=t&&n>=f-d)return!0;return!1},this.switchedTrack=C,this.clearRemoveJobs=function(){a=[]},this.onSeeking=I,this.requestedSeek=function(){c=!0},this.onSeeked=function(){c=!1,i.updating||E()||P()},N()};module.exports=SourceBufferWrapper;


},{"./AESController":6,"./CustomTimeRange":9}],19:[function(require,module,exports){
  function Track(t,e,n){"use strict";this.autoswitch=n,Object.defineProperty(this,"asetId",{get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"repId",{get:function(){return e},set:function(t){e=t}})}module.exports=Track;


},{}],20:[function(require,module,exports){
  "use strict";var debug,debugEvent,VideoWrapper=function(e,n,t){var i,a,r,o,f,u,d=(new Date).getTime(),s=!0,c=0,g=!1,m=0,v=0,p=!1,l=0,w=t,T=function(e){var n;window.performance&&window.performance.timing?(n=window.performance.timing,u=e-n.domInteractive):u=0,f=o?e-o:e-w},y=function(){if(p&&a){var e=(new Date).getTime();v+=(e-a)/1e3,a=e}},b=function(){y(),p=!1,a=!1},E=function(){a||(a=(new Date).getTime()),p=!0},h=function(){n.manifestManager.isLive()||(r=(new Date).getTime(),g=!0,b()),d=(new Date).getTime()},D=function(){g=!1},L=function(){var t=(new Date).getTime();e.isFlash||n.buffer.isReady()?(e.event_handlers.onPlaying(),n.ee.emit("playing"),void 0===f&&T(t),E(),i&&(m+=(t-i)/1e3,i=void 0,n.ee.emit("bufferend")),r&&(l+=(t-r)/1e3,r=void 0)):k()},S=function(){s=!0},k=function(){s=!0,e.isFlash||(e.playbackRate=0),e.event_handlers.onBuffering(),g?g=!1:(F(),n.ee.emit("bufferstart")),b(),setTimeout(function(){V()},200)},R=function(){o||(o=(new Date).getTime()),s=!1},I=function(){b()},P=function(){b()},V=function(){var t=setInterval(function(){n.buffer.isReady()&&(clearInterval(t),e.playbackRate=1,e.paused||e.dispatchEvent(new Event("playing")))},100)},W=function(){e.addEventListener("seeking",h),e.addEventListener("seeked",D),e.addEventListener("playing",L),e.addEventListener("waiting",S),e.addEventListener("play",R),e.addEventListener("pause",I)},F=function(){!i&&f&&(i=(new Date).getTime(),c++)},_=function(){var e=100*v/(m+v);return{startupTime:f,startupTimeLoad:u,rebufferingCount:c,timeSpentRebuffering:m,timeSpentPlaying:v,timeSpentSeeking:l,percentageTimeSpentPlaying:e}},x=function(){W(),setInterval(y,1e3)};this.setWaiting=k,this.onEnded=P,this.getVideoStats=_,x()};module.exports=VideoWrapper;


},{}],21:[function(require,module,exports){
  var Long=function(t,n,i){this.low=0|t,this.high=0|n,this.unsigned=!!i},INT_CACHE={},UINT_CACHE={};Long.fromInt=function(t,n){var i,o;return n?(t>>>=0,t>=0&&256>t&&(o=UINT_CACHE[t])?o:(i=new Long(t,0>(0|t)?-1:0,!0),t>=0&&256>t&&(UINT_CACHE[t]=i),i)):(t=0|t,t>=-128&&128>t&&(o=INT_CACHE[t])?o:(i=new Long(t,0>t?-1:0,!1),t>=-128&&128>t&&(INT_CACHE[t]=i),i))},Long.fromNumber=function(t,n){return n=!!n,isNaN(t)||!isFinite(t)?Long.ZERO:!n&&-TWO_PWR_63_DBL>=t?Long.MIN_SIGNED_VALUE:n&&0>=t?Long.MIN_UNSIGNED_VALUE:!n&&t+1>=TWO_PWR_63_DBL?Long.MAX_SIGNED_VALUE:n&&t>=TWO_PWR_64_DBL?Long.MAX_UNSIGNED_VALUE:0>t?Long.fromNumber(-t,!1).negate():new Long(t%TWO_PWR_32_DBL|0,t/TWO_PWR_32_DBL|0,n)},Long.fromBits=function(t,n,i){return new Long(t,n,i)},Long.from28Bits=function(t,n,i,o){return Long.fromBits(t|n<<28,n>>>4|i<<24,o)},Long.fromString=function(t,n,i){if(0==t.length)throw new Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return Long.ZERO;if("number"==typeof n&&(i=n,n=!1),i=i||10,2>i||i>36)throw new Error("radix out of range: "+i);if("-"==t.charAt(0))return Long.fromString(t.substring(1),n,i).negate();if(t.indexOf("-")>=0)throw new Error('number format error: interior "-" character: '+t);for(var o=Long.fromNumber(Math.pow(i,8)),r=Long.ZERO,e=0;e<t.length;e+=8){var g=Math.min(8,t.length-e),s=parseInt(t.substring(e,e+g),i);if(8>g){var h=Long.fromNumber(Math.pow(i,g));r=r.multiply(h).add(Long.fromNumber(s))}else r=r.multiply(o),r=r.add(Long.fromNumber(s))}return r};var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_31_DBL=TWO_PWR_32_DBL/2,TWO_PWR_48_DBL=TWO_PWR_32_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=Long.fromInt(1<<24);Long.ZERO=Long.fromInt(0),Long.ONE=Long.fromInt(1),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_SIGNED_VALUE=Long.fromBits(-1,2147483647,!1),Long.MAX_UNSIGNED_VALUE=Long.fromBits(-1,-1,!0),Long.MAX_VALUE=Long.MAX_SIGNED_VALUE,Long.MIN_SIGNED_VALUE=Long.fromBits(0,-2147483648,!1),Long.MIN_UNSIGNED_VALUE=Long.fromBits(0,0,!0),Long.MIN_VALUE=Long.MIN_SIGNED_VALUE,Long.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},Long.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},Long.prototype.toString=function(t){if(t=t||10,2>t||t>36)throw new Error("radix out of range: "+t);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(Long.MIN_SIGNED_VALUE)){var i=Long.fromNumber(t),o=this.div(i);return n=o.multiply(i).subtract(this),o.toString(t)+n.toInt().toString(t)}return"-"+this.negate().toString(t)}var r=Long.fromNumber(Math.pow(t,6));n=this;for(var e="";;){var g=n.div(r),s=n.subtract(g.multiply(r)).toInt(),h=s.toString(t);if(n=g,n.isZero())return h+e;for(;h.length<6;)h="0"+h;e=""+h+e}},Long.prototype.getHighBits=function(){return this.high},Long.prototype.getHighBitsUnsigned=function(){return this.high>>>0},Long.prototype.getLowBits=function(){return this.low},Long.prototype.getLowBitsUnsigned=function(){return this.low>>>0},Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Long.MIN_SIGNED_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},Long.prototype.isZero=function(){return 0==this.high&&0==this.low},Long.prototype.isNegative=function(){return!this.unsigned&&this.high<0},Long.prototype.isOdd=function(){return 1==(1&this.low)},Long.prototype.isEven=function(){return 0==(1&this.low)},Long.prototype.equals=function(t){return this.unsigned!=t.unsigned&&this.high>>>31!=t.high>>>31?!1:this.high==t.high&&this.low==t.low},Long.prototype.notEquals=function(t){return!this.equals(t)},Long.prototype.lessThan=function(t){return this.compare(t)<0},Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},Long.prototype.greaterThan=function(t){return this.compare(t)>0},Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},Long.prototype.compare=function(t){if(this.equals(t))return 0;var n=this.isNegative(),i=t.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high==this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1},Long.prototype.negate=function(){return!this.unsigned&&this.equals(Long.MIN_SIGNED_VALUE)?Long.MIN_SIGNED_VALUE:this.not().add(Long.ONE)},Long.prototype.add=function(t){var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r+h,f+=a>>>16,a&=65535,f+=o+s,L+=f>>>16,f&=65535,L+=i+g,u+=L>>>16,L&=65535,u+=n+e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.subtract=function(t){return this.add(t.negate())},Long.prototype.multiply=function(t){if(this.isZero())return Long.ZERO;if(t.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE))return t.isOdd()?Long.MIN_VALUE:Long.ZERO;if(t.equals(Long.MIN_VALUE))return this.isOdd()?Long.MIN_VALUE:Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(TWO_PWR_24)&&t.lessThan(TWO_PWR_24))return Long.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r*h,f+=a>>>16,a&=65535,f+=o*h,L+=f>>>16,f&=65535,f+=r*s,L+=f>>>16,f&=65535,L+=i*h,u+=L>>>16,L&=65535,L+=o*s,u+=L>>>16,L&=65535,L+=r*g,u+=L>>>16,L&=65535,u+=n*h+i*s+o*g+r*e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.div=function(t){if(t.isZero())throw new Error("division by zero");if(this.isZero())return Long.ZERO;if(this.equals(Long.MIN_SIGNED_VALUE)){if(t.equals(Long.ONE)||t.equals(Long.NEG_ONE))return min;if(t.equals(Long.MIN_VALUE))return Long.ONE;var n=this.shiftRight(1),i=n.div(t).shiftLeft(1);if(i.equals(Long.ZERO))return t.isNegative()?Long.ONE:Long.NEG_ONE;var o=this.subtract(t.multiply(i)),r=i.add(o.div(t));return r}if(t.equals(Long.MIN_VALUE))return Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(var e=Long.ZERO,o=this;o.greaterThanOrEqual(t);){for(var i=Math.max(1,Math.floor(o.toNumber()/t.toNumber())),g=Math.ceil(Math.log(i)/Math.LN2),s=48>=g?1:Math.pow(2,g-48),h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);u.isNegative()||u.greaterThan(o);)i-=s,h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);h.isZero()&&(h=Long.ONE),e=e.add(h),o=o.subtract(u)}return e},Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},Long.prototype.not=function(){return Long.fromBits(~this.low,~this.high,this.unsigned)},Long.prototype.and=function(t){return Long.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},Long.prototype.or=function(t){return Long.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},Long.prototype.xor=function(t){return Long.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},Long.prototype.shiftLeft=function(t){if(t&=63,0==t)return this;var n=this.low;if(32>t){var i=this.high;return Long.fromBits(n<<t,i<<t|n>>>32-t,this.unsigned)}return Long.fromBits(0,n<<t-32,this.unsigned)},Long.prototype.shiftRight=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>t,this.unsigned)}return Long.fromBits(n>>t-32,n>=0?0:-1,this.unsigned)},Long.prototype.shiftRightUnsigned=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>>t,this.unsigned)}return 32==t?Long.fromBits(n,0,this.unsigned):Long.fromBits(n>>>t-32,0,this.unsigned)},Long.prototype.toSigned=function(){var t=this.clone();return t.unsigned=!1,t},Long.prototype.toUnsigned=function(){var t=this.clone();return t.unsigned=!0,t},Long.prototype.clone=function(){return new Long(this.low,this.high,this.unsigned)},module.exports=Long;


},{}],22:[function(require,module,exports){
  "use strict";var B64Worker=require("./B64Worker.js"),B64Encoder=function(){var e,r=this,t=[],a=function(){var e=URL.createObjectURL(new Blob(["("+B64Worker.toString()+")()"],{type:"application/javascript"})),r=new Worker(e);return URL.revokeObjectURL(e),r},o=function(r,a){var o=t.push({cb:a})-1;e.postMessage({data:r,jobIndex:o})},n=function(e){var r=e.data.jobIndex,a=t[r];delete t[r],a.cb(e.data.b64data)},c=function(){e=a(),e.onmessage=n};c(),r.encodeData=o};module.exports=B64Encoder;


},{"./B64Worker.js":23}],23:[function(require,module,exports){
  function B64Worker(){var e=function(e,a){for(var o=e.byteLength,t="",n=0;o>n;n++)t+=String.fromCharCode(e[n]);t=btoa(t),self.postMessage({b64data:t,jobIndex:a})};self.onmessage=function(a){e(new Uint8Array(a.data.data),a.data.jobIndex)}}module.exports=B64Worker;


},{}],24:[function(require,module,exports){
  "use strict";var FlashMBR=function(e,t){var n=e,a=t,i=[],l=function(e){var t,n,l="";for(n=0;n<e.length;n++)t=e[n],"video"===t.type&&(t.label||(t.height?t.label=t.height+"p":t.label=t.bandwidth/1e3+"kbps"),i.push(t),0!==l.length&&(l+=","),t.selected&&(l+="*"),l+=t.label);a.onTrackList(l)},s=function(e){var t=i[e];n.manualSwitchRepresentation(t.type,t.asetId,t.repId)},h=function(){window.sr_request_quality_change=function(e){s(e)}};this.addTrackList=function(e){l(e)},h()};module.exports=FlashMBR;


},{}],25:[function(require,module,exports){
  "use strict";var MediaSourceFlash=require("./MediaSourceFlash"),MediaSourceWrapper=function(e){if("undefined"!=typeof e.video.getSwf)return new MediaSourceFlash(e.video,e);var i;if(null!==window.MediaSource)i=new MediaSource;else{if(!(window.webkitMediaSource=window.WebKitMediaSource||window.webkitMediaSource||window.MozMediaSource))throw new Error("Media Source is not supported in this browser");i=new webkitMediaSource}return null!==window.URL?e.video.src=window.URL.createObjectURL(i):(window.webkitURL=window.webkitURL||window.WebKitURL)&&(e.video.src=window.webkitURL.createObjectURL(i)),i};module.exports=MediaSourceWrapper;


},{"./MediaSourceFlash":26}],26:[function(require,module,exports){
  "use strict";var SourceBuffer=require("./SourceBuffer"),B64Encoder=require("./B64Encoder"),conf=require("../../../confMedia"),MediaSourceFlash=function(e,r){var n=this,t=e,o=t.getSwf(),u=new B64Encoder,i={OPEN:"open",CLOSED:"closed"},c=i.CLOSED,f=0,d=[],s=[],a=function(e,r){d[e]||(d[e]=[]),d[e].unshift(r)},E=function(e){for(var r=d[e.type]||[],n=r.length;n--;)r[n](e)},S=function(e){var n;return n=new SourceBuffer(e,o,r,u),s.push(n),t.registerSourceBuffer(n),o.addSourceBuffer(e),n},h=function(){t.createSrc(n),setTimeout(function(){c=i.OPEN},100),window.sr_flash_transcodeError=function(e){conf.REPORT_ERROR&&window.onPlayerError&&window.onPlayerError(e)}};this.addSourceBuffer=S,this.addEventListener=a,this.trigger=E,Object.defineProperty(this,"readyState",{get:function(){return c},set:void 0}),Object.defineProperty(this,"duration",{get:function(){return f},set:function(e){f=e}}),h()};module.exports=MediaSourceFlash;


},{"../../../confMedia":2,"./B64Encoder":22,"./SourceBuffer":28}],27:[function(require,module,exports){
  "use strict";var SegmentAppender=function(e,n,t){var f,u,d,i=this,s=t,o=e,p=n,r=!1,c=!1,a=!1,g=function(e){if(a=!1,r)r=!1,o.segmentFlushed();else{var n="undefined"!=typeof d?0:1;p.appendBuffer(e,f,n,u,d)}},m=function(e,n,t,i,p){c?o.segmentFlushed():(f=n,u=t,d=i,a=!0,s.encodeData(e,g))},l=function(){};i.appendBuffer=m,i.seeking=function(){a&&(r=!0),c=!0},i.seeked=function(){c=!1},l()};module.exports=SegmentAppender;


},{}],28:[function(require,module,exports){
  "use strict";var CustomTimeRange=require("../CustomTimeRange"),SegmentAppender=require("./SegmentAppender"),SourceBuffer=function(e,t,n,i){var r,u=this,o=[],d=t,s=new SegmentAppender(u,d,i),f=!1,a=e,c=0,p=0,h=-1,m=!1,g=function(){m=!0},v=function(e,t){o[e]||(o[e]=[]),o[e].unshift(t)},w=function(e){for(var t=o[e.type]||[],n=t.length;n--;)t[n](e)},l=function(e){return Math.abs(e-p)>=1,Math.abs(e-p)<1},S=function(e,t,n,i){if(f=!0,w({type:"updatestart"}),l(t)||m||"undefined"==typeof t)r=i,s.appendBuffer(e,a,t,n),h=n;else{T(!0)}},_=function(e,t){if(0>e||t==1/0||e>t)throw new Error("Invalid Arguments: cannot call SourceBuffer.remove");f=!0,e>=p||c>=t||(c>=e&&t>=p?p=d.remove(e,t,a):e>c?p=d.remove(e,t,a):c>=e&&(c=t)),h=-1,T()},y=function(){var e=[];return p>c&&e.push({start:c,end:p}),new CustomTimeRange(e)},b=function(e,t,i){f=!1,!e&&h>p?(p=h,m=!1):e&&t>0&&i>0&&(B(r,t,i),m||n.setCurrentTime(t/1e3)),w({type:"updateend"})},T=function(e,t,n){setTimeout(function(){b(e,t,n)},5)},k=function(e,t){c=e,p=e,a.match(/audio/)&&"undefined"!=typeof t&&(p=t),h=-1},B=n.updateMapPTS.bind(n),A=function(){a.match(/video/)?window.sr_flash_updateend_video=T:a.match(/audio/)?window.sr_flash_updateend_audio=T:a.match(/vnd/)&&(window.sr_flash_updateend_video=T),n.ee.on("trackSwitch",g)};this.appendBuffer=S,this.remove=_,this.addEventListener=v,this.trigger=w,this.seekTime=k,Object.defineProperty(this,"updating",{get:function(){return f},set:void 0}),Object.defineProperty(this,"buffered",{get:y,set:void 0}),this.appendWindowStart=0,this.seeking=function(e,t){k(e,t),s.seeking()},this.seeked=function(){s.seeked()},this.segmentFlushed=function(){T(!0)},Object.defineProperty(this,"isFlash",{get:function(){return!0},set:void 0}),A()};module.exports=SourceBuffer;


},{"../CustomTimeRange":9,"./SegmentAppender":27}],29:[function(require,module,exports){
  "use strict";var conf=require("../../../confMedia"),FlashMBR=require("./FlashMBR"),VideoExtension=function(e,t){var n,i,r,o,s,a=this,u=t,f=[],d=0,c=0,g=2e3,p=[],h=!1,l=function(){return"undefined"!=typeof u},v=!1,m=function(e,t){p[e]||(p[e]=[]),p[e].unshift(t)},y=function(e,t){for(var n=p[e],i=n.length;i--;)if(n[i]===t)return n.splice(i,1)},w=function(e){for(var t=p[e.type]||[],n=t.length,i="on"+e.type;n--;)t[n](e);a[i]&&"[object Function]"==getClass.call(a[i])&&a[i](e)},_=function(){var t=e.manifestManager.getDuration(0),n=e.getVideoDimensions();u.onMetaData(t,n.width,n.height)},M=function(t){var n,r=t.onMetaData;if("undefined"==typeof r){var o=new FlashMBR(e,u);r=o.addTrackList}n=function(e){r(e),_()},t.onMetaData=n,i=t},P=function(){l()?(c=void 0,u.play()):new Error("Flash video is not initialized")},k=function(){l()?("undefined"==typeof c&&(c=T()),u.pause()):new Error("Flash video is not initialized")},F=function(e){if(!v){var t,n;if(s=setTimeout(O,5e3),l()){t=E(e),n=I(t),a.trigger({type:"seeking"}),v=!0;for(var i=0;i<f.length;i++)f[i].seeking(t,n);r=c=t,u.seek(t)}else new Error("Flash video is not initialized")}},T=function(){return d=u.currentTime()},b=function(){var e=(new Date).getTime();return h?n.duration:"undefined"!=typeof r?r:"undefined"!=typeof c?c:o&&g>e-o?d+(e-o)/1e3:l()?(o=e,T()):0},j=function(){return l()?u.paused():void new Error("Flash video is not initialized")},E=function(t){var n=e.currentTracks.video,i=e.manifestManager.getPartForTime(e.currentPeriod,t,n.asetId,n.repId);return i?i.segment.time:(i=e.manifestManager.getBeginningSegment(e.currentPeriod,n.asetId,n.repId),i.segment.time)},I=function(t){var n,i,r=e.currentTracks.audio;if(r)if(n=e.manifestManager.getPartForTime(e.currentPeriod,t,r.asetId,r.repId)){if(n.segment.time<t)return i=e.manifestManager.getNextSegment(n),i.segment.time}else if(b()<.2)return i=e.manifestManager.getBeginningSegment(e.currentPeriod,r.asetId,r.repId),i.segment.time},O=function(){v=!1,h=!1,r=void 0,clearTimeout(s),a.trigger({type:"seeked"});for(var e=0;e<f.length;e++)f[e].seeked()},B=function(){h=!1,a.trigger({type:"loadstart"})},D=function(){d=T(),c=void 0,h=!1,a.trigger({type:"play"})},S=function(){c=void 0!==c?c:T(),a.trigger({type:"pause"})},R=function(){c=void 0,a.trigger({type:"playing"})},x=function(){c=void 0!==c?c:T()},z=function(){h=!0,a.trigger({type:"ended"})},q=function(){window.sr_request_seek=function(e){F(e)},window.sr_flash_seeked=function(){O()},window.sr_flash_loadstart=function(){B()},window.sr_flash_play=function(){D()},window.sr_flash_pause=function(){S()},window.sr_flash_playing=function(){R()},window.sr_flash_waiting=function(){x()},window.sr_flash_stopped=function(){z()},u.jsReady()};Object.defineProperty(this,"currentTime",{get:b,set:function(e){F(e)}}),Object.defineProperty(this,"seeking",{get:function(){return v},set:void 0}),Object.defineProperty(this,"paused",{get:j,set:void 0}),Object.defineProperty(this,"duration",{get:function(){return n.duration},set:void 0}),Object.defineProperty(this,"playbackRate",{get:function(){return 1},set:function(){}}),Object.defineProperty(this,"event_handlers",{get:function(){return i},set:function(e){M(e)}}),Object.defineProperty(this,"isFlash",{get:function(){return!0},set:void 0}),this.createSrc=function(e){n=e,this.dispatchEvent=w},this.registerSourceBuffer=function(e){f.push(e)},this.getSwf=function(){return u},this.play=P,this.pause=k,this.addEventListener=m,this.removeEventListener=y,this.trigger=w,q()};module.exports=VideoExtension;


},{"../../../confMedia":2,"./FlashMBR":24}],30:[function(require,module,exports){
  "use strict";var DRMManager=function(e){var t=function(e){e.target.webkitGenerateKeyRequest("com.widevine.alpha",e.initData)},n=function(e){var t=new XMLHttpRequest;t.open("POST","http://wv-ref-eme-player.appspot.com/proxy",!0),t.responseType="arraybuffer",t.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);e.target.webkitAddKey("com.widevine.alpha",t,e.initData,e.sessionId)}},t.send(e.message)},a=function(){e.addEventListener("webkitneedkey",t),e.addEventListener("keymessage",n),e.addEventListener("webkitkeymessage",n)},i=function(){a()};i()};module.exports=DRMManager;


},{}],31:[function(require,module,exports){
  exports.clone=function e(E){function t(e,E,t){var r,n,_={};for(r in E)n=E[r],r in e&&(e[r]===n||r in _&&_[r]===n)||(e[r]=t?t(n):n);return e}if(!E||"object"!=typeof E||"[object Function]"===Object.prototype.toString.call(E))return E;if(E.nodeType&&"cloneNode"in E)return E.cloneNode(!0);if(E instanceof Date)return new Date(E.getTime());if(E instanceof RegExp)return new RegExp(E);var r,n,_;if(E instanceof Array)for(r=[],n=0,_=E.length;_>n;++n)n in E&&r.push(e(E[n]));else r=E.constructor?new E.constructor:{};return t(r,E,e)},exports.sortDescending=function(e,E){return E.bandwidth-e.bandwidth},exports.overloadConf=function(e,E){if(!E||void 0===E.ID_CLIENT)throw new Error("There must be a client ID in the option object");e.ID_CLIENT=E.ID_CLIENT,void 0!==E.RANGE_REQUEST_ALLOWED&&(e.RANGE_REQUEST_ALLOWED=E.RANGE_REQUEST_ALLOWED),E.FORCE_BANDWIDTH&&(e.FORCE_BANDWIDTH=E.FORCE_BANDWIDTH),E.DEFAULT_AUTOSWITCH&&(e.DEFAULT_AUTOSWITCH=E.DEFAULT_AUTOSWITCH),E.BUFFER&&(E.BUFFER.BUFFER_MARGIN&&(e.BUFFER.BUFFER_MARGIN=E.BUFFER.BUFFER_MARGIN),E.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER&&(e.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER=E.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER),void 0!==E.BUFFER.FORCE_SWITCH_CLEAR_ALL&&(e.BUFFER.FORCE_SWITCH_CLEAR_ALL=E.BUFFER.FORCE_SWITCH_CLEAR_ALL),void 0!==E.BUFFER.ALWAYS_FORCE_SWITCH&&(e.BUFFER.ALWAYS_FORCE_SWITCH=E.BUFFER.ALWAYS_FORCE_SWITCH)),E.LIVE&&(void 0!==E.LIVE.DISTANCE_FROM_LIVE_EDGE&&(e.LIVE.DISTANCE_FROM_LIVE_EDGE=E.LIVE.DISTANCE_FROM_LIVE_EDGE),void 0!==E.LIVE.MIN_BUFFER_LEVEL&&(e.LIVE.MIN_BUFFER_LEVEL=E.LIVE.MIN_BUFFER_LEVEL),void 0!==E.LIVE.ALLOW_LIVE_DELAY&&(e.LIVE.ALLOW_LIVE_DELAY=E.LIVE.ALLOW_LIVE_DELAY)),"undefined"!=typeof E.ADD_QUERY_PARAM&&(e.ADD_QUERY_PARAM=E.ADD_QUERY_PARAM),void 0!==E.PLAYLIST_HLS_KEEP_LAST_LINES&&(e.PLAYLIST_HLS_KEEP_LAST_LINES=E.PLAYLIST_HLS_KEEP_LAST_LINES),void 0!==E.SS_IMPLICIT_AAC_HE&&(e.SS_IMPLICIT_AAC_HE=E.SS_IMPLICIT_AAC_HE),void 0!==E.DISPLAY_ERROR&&(e.DISPLAY_ERROR=E.DISPLAY_ERROR),void 0!==E.REPRESENTATION_NUMBER&&(e.REPRESENTATION_NUMBER=E.REPRESENTATION_NUMBER),void 0!==E.SEEK_ON_RESTART&&(e.SEEK_ON_RESTART=E.SEEK_ON_RESTART);var t={ALLOW_P2P:E.ALLOW_P2P,TRACKER_URL:E.TRACKER_URL,P2P_CACHE_MAX_SIZE:E.P2P_CACHE_MAX_SIZE,DISPLAY:E.DISPLAY,ID_CLIENT:E.ID_CLIENT,DEBUG:E.DEBUG};return t},exports.make_range=function(e,E){return E?"bytes="+e+"-"+E:"bytes="+e+"-"},exports.absURL=function(e,E){if(E.match(/^[a-z]*:\/\//))return E;var t;"/"==E[0]&&(E=E.slice(1,E.length));var r=e.lastIndexOf("/");return r+1<=e.length&&(t=e.slice(0,r+1)),t+E},exports.relToAbs=function(e){var E=document.createElement("a");return E.href=e,E.protocol+"//"+E.host+E.pathname+E.search+E.hash},exports.parseUrl=function(e){var E=document.createElement("a");return E.href=e,E},exports.updateQueryStringParameter=function(e,E,t){var r=new RegExp("([?&])"+E+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+E+"="+t+"$2"):e+n+E+"="+t};var isInt=function(e){return"number"==typeof e&&e%1===0};exports.isInt=isInt,exports.isPosInt=function(e){return isInt(e)&&e>=0},exports.mapMapping=function(e){var E={};E.isLive=e.isLive,E.periods=[];for(var t,r=0;t=e.periods[r];r++){var n={};n.asets=[];for(var _,o=0;_=t.asets[o];o++){var I={};I.type=_.type,I.reps=[];for(var i,L=0;i=_.reps[L];L++){var R={};R.segments=[];for(var s,A=0;s=i.segments[A];A++){var a={id:s.id,size:s.size,offset:s.offset,duration:s.duration,time:s.time};R.segments.push(a)}I.reps.push(R)}n.asets.push(I)}E.periods.push(n)}return E},exports.segmentMapping=function(e){var E={};return E.periodId=e.periodId,E.asetId=e.asetId,E.repId=e.repId,E.idPiece=e.idPiece,e.segment&&(E.segment={id:e.segment.id,size:e.segment.size,offset:e.segment.offset,duration:e.segment.duration,time:e.segment.time}),E},exports.trackMapping=function(e){var E={};return E.periodId=e.periodId,E.asetId=e.asetId,E.repId=e.repId,E};


},{}],32:[function(require,module,exports){
  "use strict";module.exports={merge:function(r,n){for(var e in n)n.hasOwnProperty(e)&&void 0===r[e]&&(r[e]=n[e]);return r},mapAdd:function(r,n){var e={};for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o]+n[o]);return e}};


},{}],33:[function(require,module,exports){

},{}],34:[function(require,module,exports){
  function replacer(t,e){return util.isUndefined(e)?""+e:!util.isNumber(e)||!isNaN(e)&&isFinite(e)?util.isFunction(e)||util.isRegExp(e)?e.toString():e:e.toString()}function truncate(t,e){return util.isString(t)?t.length<e?t:t.slice(0,e):t}function getMessage(t){return truncate(JSON.stringify(t.actual,replacer),128)+" "+t.operator+" "+truncate(JSON.stringify(t.expected,replacer),128)}function fail(t,e,r,i,s){throw new assert.AssertionError({message:r,actual:t,expected:e,operator:i,stackStartFunction:s})}function ok(t,e){t||fail(t,!0,e,"==",assert.ok)}function _deepEqual(t,e){if(t===e)return!0;if(util.isBuffer(t)&&util.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return util.isDate(t)&&util.isDate(e)?t.getTime()===e.getTime():util.isRegExp(t)&&util.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:util.isObject(t)||util.isObject(e)?objEquiv(t,e):t==e}function isArguments(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function objEquiv(t,e){if(util.isNullOrUndefined(t)||util.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(isArguments(t))return isArguments(e)?(t=pSlice.call(t),e=pSlice.call(e),_deepEqual(t,e)):!1;try{var r,i,s=objectKeys(t),n=objectKeys(e)}catch(a){return!1}if(s.length!=n.length)return!1;for(s.sort(),n.sort(),i=s.length-1;i>=0;i--)if(s[i]!=n[i])return!1;for(i=s.length-1;i>=0;i--)if(r=s[i],!_deepEqual(t[r],e[r]))return!1;return!0}function expectedException(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function _throws(t,e,r,i){var s;util.isString(r)&&(i=r,r=null);try{e()}catch(n){s=n}if(i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!s&&fail(s,r,"Missing expected exception"+i),!t&&expectedException(s,r)&&fail(s,r,"Got unwanted exception"+i),t&&s&&r&&!expectedException(s,r)||!t&&s)throw s}var util=require("util/"),pSlice=Array.prototype.slice,hasOwn=Object.prototype.hasOwnProperty,assert=module.exports=ok;assert.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var e=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var i=r.stack,s=e.name,n=i.indexOf("\n"+s);if(n>=0){var a=i.indexOf("\n",n+1);i=i.substring(a+1)}this.stack=i}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(t,e,r){t!=e&&fail(t,e,r,"==",assert.equal)},assert.notEqual=function(t,e,r){t==e&&fail(t,e,r,"!=",assert.notEqual)},assert.deepEqual=function(t,e,r){_deepEqual(t,e)||fail(t,e,r,"deepEqual",assert.deepEqual)},assert.notDeepEqual=function(t,e,r){_deepEqual(t,e)&&fail(t,e,r,"notDeepEqual",assert.notDeepEqual)},assert.strictEqual=function(t,e,r){t!==e&&fail(t,e,r,"===",assert.strictEqual)},assert.notStrictEqual=function(t,e,r){t===e&&fail(t,e,r,"!==",assert.notStrictEqual)},assert["throws"]=function(t,e,r){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(t,e){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(t){if(t)throw t};var objectKeys=Object.keys||function(t){var e=[];for(var r in t)hasOwn.call(t,r)&&e.push(r);return e};


},{"util/":81}],35:[function(require,module,exports){



},{}],36:[function(require,module,exports){
  "use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var fnTyped={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)return void r.set(t.subarray(e,e+n),a);for(var o=0;n>o;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;e>t;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;e>t;t++)o=r[t],s.set(o,a),a+=o.length;return s}},fnUntyped={arraySet:function(r,t,e,n,a){for(var o=0;n>o;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK);


},{}],37:[function(require,module,exports){
  "use strict";function adler32(e,r,o,t){for(var d=65535&e|0,l=e>>>16&65535|0,u=0;0!==o;){u=o>2e3?2e3:o,o-=u;do d=d+r[t++]|0,l=l+d|0;while(--u);d%=65521,l%=65521}return d|l<<16|0}module.exports=adler32;


},{}],38:[function(require,module,exports){
  module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};


},{}],39:[function(require,module,exports){
  "use strict";function makeTable(){for(var r,a=[],c=0;256>c;c++){r=c;for(var e=0;8>e;e++)r=1&r?3988292384^r>>>1:r>>>1;a[c]=r}return a}function crc32(r,a,c,e){var o=crcTable,t=e+c;r=-1^r;for(var n=e;t>n;n++)r=r>>>8^o[255&(r^a[n])];return-1^r}var crcTable=makeTable();module.exports=crc32;


},{}],40:[function(require,module,exports){
  "use strict";function err(t,e){return t.msg=msg[e],e}function rank(t){return(t<<1)-(t>4?9:0)}function zero(t){for(var e=t.length;--e>=0;)t[e]=0}function flush_pending(t){var e=t.state,_=e.pending;_>t.avail_out&&(_=t.avail_out),0!==_&&(utils.arraySet(t.output,e.pending_buf,e.pending_out,_,t.next_out),t.next_out+=_,e.pending_out+=_,t.total_out+=_,t.avail_out-=_,e.pending-=_,0===e.pending&&(e.pending_out=0))}function flush_block_only(t,e){trees._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,flush_pending(t.strm)}function put_byte(t,e){t.pending_buf[t.pending++]=e}function putShortMSB(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function read_buf(t,e,_,a){var s=t.avail_in;return s>a&&(s=a),0===s?0:(t.avail_in-=s,utils.arraySet(e,t.input,t.next_in,s,_),1===t.state.wrap?t.adler=adler32(t.adler,e,s,_):2===t.state.wrap&&(t.adler=crc32(t.adler,e,s,_)),t.next_in+=s,t.total_in+=s,s)}function longest_match(t,e){var _,a,s=t.max_chain_length,n=t.strstart,i=t.prev_length,r=t.nice_match,l=t.strstart>t.w_size-MIN_LOOKAHEAD?t.strstart-(t.w_size-MIN_LOOKAHEAD):0,h=t.window,o=t.w_mask,d=t.prev,u=t.strstart+MAX_MATCH,f=h[n+i-1],E=h[n+i];t.prev_length>=t.good_match&&(s>>=2),r>t.lookahead&&(r=t.lookahead);do if(_=e,h[_+i]===E&&h[_+i-1]===f&&h[_]===h[n]&&h[++_]===h[n+1]){n+=2,_++;do;while(h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&h[++n]===h[++_]&&u>n);if(a=MAX_MATCH-(u-n),n=u-MAX_MATCH,a>i){if(t.match_start=e,i=a,a>=r)break;f=h[n+i-1],E=h[n+i]}}while((e=d[e&o])>l&&0!==--s);return i<=t.lookahead?i:t.lookahead}function fill_window(t){var e,_,a,s,n,i=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=i+(i-MIN_LOOKAHEAD)){utils.arraySet(t.window,t.window,i,i,0),t.match_start-=i,t.strstart-=i,t.block_start-=i,_=t.hash_size,e=_;do a=t.head[--e],t.head[e]=a>=i?a-i:0;while(--_);_=i,e=_;do a=t.prev[--e],t.prev[e]=a>=i?a-i:0;while(--_);s+=i}if(0===t.strm.avail_in)break;if(_=read_buf(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=_,t.lookahead+t.insert>=MIN_MATCH)for(n=t.strstart-t.insert,t.ins_h=t.window[n],t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[n+MIN_MATCH-1])&t.hash_mask,t.prev[n&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=n,n++,t.insert--,!(t.lookahead+t.insert<MIN_MATCH)););}while(t.lookahead<MIN_LOOKAHEAD&&0!==t.strm.avail_in)}function deflate_stored(t,e){var _=65535;for(_>t.pending_buf_size-5&&(_=t.pending_buf_size-5);;){if(t.lookahead<=1){if(fill_window(t),0===t.lookahead&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var a=t.block_start+_;if((0===t.strstart||t.strstart>=a)&&(t.lookahead=t.strstart-a,t.strstart=a,flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE;if(t.strstart-t.block_start>=t.w_size-MIN_LOOKAHEAD&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.strstart>t.block_start&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_NEED_MORE}function deflate_fast(t,e){for(var _,a;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(_=0,t.lookahead>=MIN_MATCH&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==_&&t.strstart-_<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,_)),t.match_length>=MIN_MATCH)if(a=trees._tr_tally(t,t.strstart-t.match_start,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=MIN_MATCH){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else a=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(a&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_slow(t,e){for(var _,a,s;;){if(t.lookahead<MIN_LOOKAHEAD){if(fill_window(t),t.lookahead<MIN_LOOKAHEAD&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(_=0,t.lookahead>=MIN_MATCH&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=MIN_MATCH-1,0!==_&&t.prev_length<t.max_lazy_match&&t.strstart-_<=t.w_size-MIN_LOOKAHEAD&&(t.match_length=longest_match(t,_),t.match_length<=5&&(t.strategy===Z_FILTERED||t.match_length===MIN_MATCH&&t.strstart-t.match_start>4096)&&(t.match_length=MIN_MATCH-1)),t.prev_length>=MIN_MATCH&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-MIN_MATCH,a=trees._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-MIN_MATCH),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+MIN_MATCH-1])&t.hash_mask,_=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=MIN_MATCH-1,t.strstart++,a&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}else if(t.match_available){if(a=trees._tr_tally(t,0,t.window[t.strstart-1]),a&&flush_block_only(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return BS_NEED_MORE}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(a=trees._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<MIN_MATCH-1?t.strstart:MIN_MATCH-1,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_rle(t,e){for(var _,a,s,n,i=t.window;;){if(t.lookahead<=MAX_MATCH){if(fill_window(t),t.lookahead<=MAX_MATCH&&e===Z_NO_FLUSH)return BS_NEED_MORE;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=MIN_MATCH&&t.strstart>0&&(s=t.strstart-1,a=i[s],a===i[++s]&&a===i[++s]&&a===i[++s])){n=t.strstart+MAX_MATCH;do;while(a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&a===i[++s]&&n>s);t.match_length=MAX_MATCH-(n-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=MIN_MATCH?(_=trees._tr_tally(t,1,t.match_length-MIN_MATCH),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(_=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),_&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function deflate_huff(t,e){for(var _;;){if(0===t.lookahead&&(fill_window(t),0===t.lookahead)){if(e===Z_NO_FLUSH)return BS_NEED_MORE;break}if(t.match_length=0,_=trees._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,_&&(flush_block_only(t,!1),0===t.strm.avail_out))return BS_NEED_MORE}return t.insert=0,e===Z_FINISH?(flush_block_only(t,!0),0===t.strm.avail_out?BS_FINISH_STARTED:BS_FINISH_DONE):t.last_lit&&(flush_block_only(t,!1),0===t.strm.avail_out)?BS_NEED_MORE:BS_BLOCK_DONE}function lm_init(t){t.window_size=2*t.w_size,zero(t.head),t.max_lazy_match=configuration_table[t.level].max_lazy,t.good_match=configuration_table[t.level].good_length,t.nice_match=configuration_table[t.level].nice_length,t.max_chain_length=configuration_table[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=MIN_MATCH-1,t.match_available=0,t.ins_h=0}function DeflateState(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Z_DEFLATED,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new utils.Buf16(2*HEAP_SIZE),this.dyn_dtree=new utils.Buf16(2*(2*D_CODES+1)),this.bl_tree=new utils.Buf16(2*(2*BL_CODES+1)),zero(this.dyn_ltree),zero(this.dyn_dtree),zero(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new utils.Buf16(MAX_BITS+1),this.heap=new utils.Buf16(2*L_CODES+1),zero(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new utils.Buf16(2*L_CODES+1),zero(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function deflateResetKeep(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Z_UNKNOWN,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?INIT_STATE:BUSY_STATE,t.adler=2===e.wrap?0:1,e.last_flush=Z_NO_FLUSH,trees._tr_init(e),Z_OK):err(t,Z_STREAM_ERROR)}function deflateReset(t){var e=deflateResetKeep(t);return e===Z_OK&&lm_init(t.state),e}function deflateSetHeader(t,e){return t&&t.state?2!==t.state.wrap?Z_STREAM_ERROR:(t.state.gzhead=e,Z_OK):Z_STREAM_ERROR}function deflateInit2(t,e,_,a,s,n){if(!t)return Z_STREAM_ERROR;var i=1;if(e===Z_DEFAULT_COMPRESSION&&(e=6),0>a?(i=0,a=-a):a>15&&(i=2,a-=16),1>s||s>MAX_MEM_LEVEL||_!==Z_DEFLATED||8>a||a>15||0>e||e>9||0>n||n>Z_FIXED)return err(t,Z_STREAM_ERROR);8===a&&(a=9);var r=new DeflateState;return t.state=r,r.strm=t,r.wrap=i,r.gzhead=null,r.w_bits=a,r.w_size=1<<r.w_bits,r.w_mask=r.w_size-1,r.hash_bits=s+7,r.hash_size=1<<r.hash_bits,r.hash_mask=r.hash_size-1,r.hash_shift=~~((r.hash_bits+MIN_MATCH-1)/MIN_MATCH),r.window=new utils.Buf8(2*r.w_size),r.head=new utils.Buf16(r.hash_size),r.prev=new utils.Buf16(r.w_size),r.lit_bufsize=1<<s+6,r.pending_buf_size=4*r.lit_bufsize,r.pending_buf=new utils.Buf8(r.pending_buf_size),r.d_buf=r.lit_bufsize>>1,r.l_buf=3*r.lit_bufsize,r.level=e,r.strategy=n,r.method=_,deflateReset(t)}function deflateInit(t,e){return deflateInit2(t,e,Z_DEFLATED,MAX_WBITS,DEF_MEM_LEVEL,Z_DEFAULT_STRATEGY)}function deflate(t,e){var _,a,s,n;if(!t||!t.state||e>Z_BLOCK||0>e)return t?err(t,Z_STREAM_ERROR):Z_STREAM_ERROR;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===FINISH_STATE&&e!==Z_FINISH)return err(t,0===t.avail_out?Z_BUF_ERROR:Z_STREAM_ERROR);if(a.strm=t,_=a.last_flush,a.last_flush=e,a.status===INIT_STATE)if(2===a.wrap)t.adler=0,put_byte(a,31),put_byte(a,139),put_byte(a,8),a.gzhead?(put_byte(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),put_byte(a,255&a.gzhead.time),put_byte(a,a.gzhead.time>>8&255),put_byte(a,a.gzhead.time>>16&255),put_byte(a,a.gzhead.time>>24&255),put_byte(a,9===a.level?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(put_byte(a,255&a.gzhead.extra.length),put_byte(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=crc32(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=EXTRA_STATE):(put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,0),put_byte(a,9===a.level?2:a.strategy>=Z_HUFFMAN_ONLY||a.level<2?4:0),put_byte(a,OS_CODE),a.status=BUSY_STATE);else{var i=Z_DEFLATED+(a.w_bits-8<<4)<<8,r=-1;r=a.strategy>=Z_HUFFMAN_ONLY||a.level<2?0:a.level<6?1:6===a.level?2:3,i|=r<<6,0!==a.strstart&&(i|=PRESET_DICT),i+=31-i%31,a.status=BUSY_STATE,putShortMSB(a,i),0!==a.strstart&&(putShortMSB(a,t.adler>>>16),putShortMSB(a,65535&t.adler)),t.adler=1}if(a.status===EXTRA_STATE)if(a.gzhead.extra){for(s=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending!==a.pending_buf_size));)put_byte(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=NAME_STATE)}else a.status=NAME_STATE;if(a.status===NAME_STATE)if(a.gzhead.name){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,put_byte(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),0===n&&(a.gzindex=0,a.status=COMMENT_STATE)}else a.status=COMMENT_STATE;if(a.status===COMMENT_STATE)if(a.gzhead.comment){s=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),flush_pending(t),s=a.pending,a.pending===a.pending_buf_size)){n=1;break}n=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,put_byte(a,n)}while(0!==n);a.gzhead.hcrc&&a.pending>s&&(t.adler=crc32(t.adler,a.pending_buf,a.pending-s,s)),0===n&&(a.status=HCRC_STATE)}else a.status=HCRC_STATE;if(a.status===HCRC_STATE&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&flush_pending(t),a.pending+2<=a.pending_buf_size&&(put_byte(a,255&t.adler),put_byte(a,t.adler>>8&255),t.adler=0,a.status=BUSY_STATE)):a.status=BUSY_STATE),0!==a.pending){if(flush_pending(t),0===t.avail_out)return a.last_flush=-1,Z_OK}else if(0===t.avail_in&&rank(e)<=rank(_)&&e!==Z_FINISH)return err(t,Z_BUF_ERROR);if(a.status===FINISH_STATE&&0!==t.avail_in)return err(t,Z_BUF_ERROR);if(0!==t.avail_in||0!==a.lookahead||e!==Z_NO_FLUSH&&a.status!==FINISH_STATE){var l=a.strategy===Z_HUFFMAN_ONLY?deflate_huff(a,e):a.strategy===Z_RLE?deflate_rle(a,e):configuration_table[a.level].func(a,e);if((l===BS_FINISH_STARTED||l===BS_FINISH_DONE)&&(a.status=FINISH_STATE),l===BS_NEED_MORE||l===BS_FINISH_STARTED)return 0===t.avail_out&&(a.last_flush=-1),Z_OK;if(l===BS_BLOCK_DONE&&(e===Z_PARTIAL_FLUSH?trees._tr_align(a):e!==Z_BLOCK&&(trees._tr_stored_block(a,0,0,!1),e===Z_FULL_FLUSH&&(zero(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),flush_pending(t),0===t.avail_out))return a.last_flush=-1,Z_OK}return e!==Z_FINISH?Z_OK:a.wrap<=0?Z_STREAM_END:(2===a.wrap?(put_byte(a,255&t.adler),put_byte(a,t.adler>>8&255),put_byte(a,t.adler>>16&255),put_byte(a,t.adler>>24&255),put_byte(a,255&t.total_in),put_byte(a,t.total_in>>8&255),put_byte(a,t.total_in>>16&255),put_byte(a,t.total_in>>24&255)):(putShortMSB(a,t.adler>>>16),putShortMSB(a,65535&t.adler)),flush_pending(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?Z_OK:Z_STREAM_END)}function deflateEnd(t){var e;return t&&t.state?(e=t.state.status,e!==INIT_STATE&&e!==EXTRA_STATE&&e!==NAME_STATE&&e!==COMMENT_STATE&&e!==HCRC_STATE&&e!==BUSY_STATE&&e!==FINISH_STATE?err(t,Z_STREAM_ERROR):(t.state=null,e===BUSY_STATE?err(t,Z_DATA_ERROR):Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),trees=require("./trees"),adler32=require("./adler32"),crc32=require("./crc32"),msg=require("./messages"),Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_BLOCK=5,Z_OK=0,Z_STREAM_END=1,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_RLE=3,Z_FIXED=4,Z_DEFAULT_STRATEGY=0,Z_UNKNOWN=2,Z_DEFLATED=8,MAX_MEM_LEVEL=9,MAX_WBITS=15,DEF_MEM_LEVEL=8,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,PRESET_DICT=32,INIT_STATE=42,EXTRA_STATE=69,NAME_STATE=73,COMMENT_STATE=91,HCRC_STATE=103,BUSY_STATE=113,FINISH_STATE=666,BS_NEED_MORE=1,BS_BLOCK_DONE=2,BS_FINISH_STARTED=3,BS_FINISH_DONE=4,OS_CODE=3,Config=function(t,e,_,a,s){this.good_length=t,this.max_lazy=e,this.nice_length=_,this.max_chain=a,this.func=s},configuration_table;configuration_table=[new Config(0,0,0,0,deflate_stored),new Config(4,4,8,4,deflate_fast),new Config(4,5,16,8,deflate_fast),new Config(4,6,32,32,deflate_fast),new Config(4,4,16,16,deflate_slow),new Config(8,16,32,32,deflate_slow),new Config(8,16,128,128,deflate_slow),new Config(8,32,128,256,deflate_slow),new Config(32,128,258,1024,deflate_slow),new Config(32,258,258,4096,deflate_slow)],exports.deflateInit=deflateInit,exports.deflateInit2=deflateInit2,exports.deflateReset=deflateReset,exports.deflateResetKeep=deflateResetKeep,exports.deflateSetHeader=deflateSetHeader,exports.deflate=deflate,exports.deflateEnd=deflateEnd,exports.deflateInfo="pako deflate (from Nodeca project)";


},{"../utils/common":36,"./adler32":37,"./crc32":39,"./messages":44,"./trees":45}],41:[function(require,module,exports){
  "use strict";var BAD=30,TYPE=12;module.exports=function(i,e){var o,a,t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,A,B,D,p,E;o=i.state,a=i.next_in,p=i.input,t=a+(i.avail_in-5),d=i.next_out,E=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),s=o.dmax,f=o.wsize,r=o.whave,b=o.wnext,c=o.window,u=o.hold,v=o.bits,m=o.lencode,w=o.distcode,h=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;i:do{15>v&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=m[u&h];e:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,0===x)E[d++]=65535&_;else{if(!(16&x)){if(0===(64&x)){_=m[(65535&_)+(u&(1<<x)-1)];continue e}if(32&x){o.mode=TYPE;break i}i.msg="invalid literal/length code",o.mode=BAD;break i}g=65535&_,x&=15,x&&(x>v&&(u+=p[a++]<<v,v+=8),g+=u&(1<<x)-1,u>>>=x,v-=x),15>v&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=w[u&k];o:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,!(16&x)){if(0===(64&x)){_=w[(65535&_)+(u&(1<<x)-1)];continue o}i.msg="invalid distance code",o.mode=BAD;break i}if(A=65535&_,x&=15,x>v&&(u+=p[a++]<<v,v+=8,x>v&&(u+=p[a++]<<v,v+=8)),A+=u&(1<<x)-1,A>s){i.msg="invalid distance too far back",o.mode=BAD;break i}if(u>>>=x,v-=x,x=d-n,A>x){if(x=A-x,x>r&&o.sane){i.msg="invalid distance too far back",o.mode=BAD;break i}if(B=0,D=c,0===b){if(B+=f-x,g>x){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}else if(x>b){if(B+=f+b-x,x-=b,g>x){g-=x;do E[d++]=c[B++];while(--x);if(B=0,g>b){x=b,g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}}else if(B+=b-x,g>x){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}for(;g>2;)E[d++]=D[B++],E[d++]=D[B++],E[d++]=D[B++],g-=3;g&&(E[d++]=D[B++],g>1&&(E[d++]=D[B++]))}else{B=d-A;do E[d++]=E[B++],E[d++]=E[B++],E[d++]=E[B++],g-=3;while(g>2);g&&(E[d++]=E[B++],g>1&&(E[d++]=E[B++]))}break}}break}}while(t>a&&l>d);g=v>>3,a-=g,v-=g<<3,u&=(1<<v)-1,i.next_in=a,i.next_out=d,i.avail_in=t>a?5+(t-a):5-(a-t),i.avail_out=l>d?257+(l-d):257-(d-l),o.hold=u,o.bits=v};


},{}],42:[function(require,module,exports){
  "use strict";function ZSWAP32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var a,i;return e&&e.state?(i=e.state,0>t?(a=0,t=-t):(a=(t>>4)+1,48>t&&(t&=15)),t&&(8>t||t>15)?Z_STREAM_ERROR:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=a,i.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var a,i;return e?(i=new InflateState,e.state=i,i.window=null,a=inflateReset2(e,t),a!==Z_OK&&(e.state=null),a):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}function fixedtables(e){if(virgin){var t;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,i){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new utils.Buf8(s.wsize)),i>=s.wsize?(utils.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),utils.arraySet(s.window,t,a-i,n,s.wnext),i-=n,i?(utils.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function inflate(e,t){var a,i,n,s,l,r,o,d,f,c,h,E,b,k,_,m,u,w,R,T,g,D,S,x,A=0,v=new utils.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;a=e.state,a.mode===TYPE&&(a.mode=TYPEDO),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,c=r,h=o,D=Z_OK;e:for(;;)switch(a.mode){case HEAD:if(0===a.wrap){a.mode=TYPEDO;break}for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(2&a.wrap&&35615===d){a.check=0,v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0),d=0,f=0,a.mode=FLAGS;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=BAD;break}if((15&d)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(d>>>=4,f-=4,g=(15&d)+8,0===a.wbits)a.wbits=g;else if(g>a.wbits){e.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<g,e.adler=a.check=1,a.mode=512&d?DICTID:TYPE,d=0,f=0;break;case FLAGS:for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.flags=d,(255&a.flags)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=TIME;case TIME:for(;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.time=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,v[2]=d>>>16&255,v[3]=d>>>24&255,a.check=crc32(a.check,v,4,0)),d=0,f=0,a.mode=OS;case OS:for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=EXLEN;case EXLEN:if(1024&a.flags){for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(1024&a.flags&&(E=a.length,E>r&&(E=r),E&&(a.head&&(g=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),utils.arraySet(a.head.extra,i,s,E,g)),512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,a.length-=E),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(2048&a.flags){if(0===r)break e;E=0;do g=i[s+E++],a.head&&g&&a.length<65536&&(a.head.name+=String.fromCharCode(g));while(g&&r>E);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,g)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT;case COMMENT:if(4096&a.flags){if(0===r)break e;E=0;do g=i[s+E++],a.head&&g&&a.length<65536&&(a.head.comment+=String.fromCharCode(g));while(g&&r>E);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,g)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(512&a.flags){for(;16>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=BAD;break}d=0,f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}e.adler=a.check=ZSWAP32(d),d=0,f=0,a.mode=DICT;case DICT:if(0===a.havedict)return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,Z_NEED_DICT;e.adler=a.check=1,a.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(a.last){d>>>=7&f,f-=7&f,a.mode=CHECK;break}for(;3>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}switch(a.last=1&d,d>>>=1,f-=1,3&d){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,t===Z_TREES){d>>>=2,f-=2;break e}break;case 2:a.mode=TABLE;break;case 3:e.msg="invalid block type",a.mode=BAD}d>>>=2,f-=2;break;case STORED:for(d>>>=7&f,f-=7&f;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=65535&d,d=0,f=0,a.mode=COPY_,t===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(E=a.length){if(E>r&&(E=r),E>o&&(E=o),0===E)break e;utils.arraySet(n,i,s,E,l),r-=E,s+=E,o-=E,l+=E,a.length-=E;break}a.mode=TYPE;break;case TABLE:for(;14>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.nlen=(31&d)+257,d>>>=5,f-=5,a.ndist=(31&d)+1,d>>>=5,f-=5,a.ncode=(15&d)+4,d>>>=4,f-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;3>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.lens[O[a.have++]]=7&d,d>>>=3,f-=3}for(;a.have<19;)a.lens[O[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},D=inflate_table(CODES,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,D){e.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;A=a.lencode[d&(1<<a.lenbits)-1],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(16>u)d>>>=_,f-=_,a.lens[a.have++]=u;else{if(16===u){for(x=_+2;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d>>>=_,f-=_,0===a.have){e.msg="invalid bit length repeat",a.mode=BAD;break}g=a.lens[a.have-1],E=3+(3&d),d>>>=2,f-=2}else if(17===u){for(x=_+3;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=_,f-=_,g=0,E=3+(7&d),d>>>=3,f-=3}else{for(x=_+7;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=_,f-=_,g=0,E=11+(127&d),d>>>=7,f-=7}if(a.have+E>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=BAD;break}for(;E--;)a.lens[a.have++]=g}}if(a.mode===BAD)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,S={bits:a.lenbits},D=inflate_table(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,D){e.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},D=inflate_table(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,D){e.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,t===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(r>=6&&o>=258){e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,inflate_fast(e,h),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;A=a.lencode[d&(1<<a.lenbits)-1],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(m&&0===(240&m)){for(w=_,R=m,T=u;A=a.lencode[T+((d&(1<<w+R)-1)>>w)],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=w+_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=w,f-=w,a.back+=w}if(d>>>=_,f-=_,a.back+=_,a.length=u,0===m){a.mode=LIT;break}if(32&m){a.back=-1,a.mode=TYPE;break}if(64&m){e.msg="invalid literal/length code",a.mode=BAD;break}a.extra=15&m,a.mode=LENEXT;case LENEXT:if(a.extra){for(x=a.extra;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;A=a.distcode[d&(1<<a.distbits)-1],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(0===(240&m)){for(w=_,R=m,T=u;A=a.distcode[T+((d&(1<<w+R)-1)>>w)],_=A>>>24,m=A>>>16&255,u=65535&A,!(f>=w+_);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=w,f-=w,a.back+=w}if(d>>>=_,f-=_,a.back+=_,64&m){e.msg="invalid distance code",a.mode=BAD;break}a.offset=u,a.extra=15&m,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(x=a.extra;x>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(0===o)break e;if(E=h-o,a.offset>E){if(E=a.offset-E,E>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break}E>a.wnext?(E-=a.wnext,b=a.wsize-E):b=a.wnext-E,E>a.length&&(E=a.length),k=a.window}else k=n,b=l-a.offset,E=a.length;E>o&&(E=o),o-=E,a.length-=E;do n[l++]=k[b++];while(--E);0===a.length&&(a.mode=LEN);break;case LIT:if(0===o)break e;n[l++]=a.length,o--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;32>f;){if(0===r)break e;r--,d|=i[s++]<<f,f+=8}if(h-=o,e.total_out+=h,a.total+=h,h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,l-h):adler32(a.check,n,h,l-h)),h=o,(a.flags?d:ZSWAP32(d))!==a.check){e.msg="incorrect data check",a.mode=BAD;break}d=0,f=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;32>f;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=BAD;break}d=0,f=0}a.mode=DONE;case DONE:D=Z_STREAM_END;break e;case BAD:D=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,(a.wsize||h!==e.avail_out&&a.mode<BAD&&(a.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,h-e.avail_out)?(a.mode=MEM,Z_MEM_ERROR):(c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,a.total+=h,a.wrap&&h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,e.next_out-h):adler32(a.check,n,h,e.next_out-h)),e.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(0===c&&0===h||t===Z_FINISH)&&D===Z_OK&&(D=Z_BUF_ERROR),D)}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var a;return e&&e.state?(a=e.state,0===(2&a.wrap)?Z_STREAM_ERROR:(a.head=t,t.done=!1,Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,virgin=!0,lenfix,distfix;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateInfo="pako inflate (from Nodeca project)";


},{"../utils/common":36,"./adler32":37,"./crc32":39,"./inffast":41,"./inftrees":43}],43:[function(require,module,exports){
  "use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(r,S,e,f,t,i,u,o){var E,l,s,n,I,N,T,B,D,O=o.bits,a=0,b=0,A=0,L=0,M=0,X=0,d=0,G=0,H=0,U=0,_=null,x=0,c=new utils.Buf16(MAXBITS+1),m=new utils.Buf16(MAXBITS+1),v=null,w=0;for(a=0;MAXBITS>=a;a++)c[a]=0;for(b=0;f>b;b++)c[S[e+b]]++;for(M=O,L=MAXBITS;L>=1&&0===c[L];L--);if(M>L&&(M=L),0===L)return t[i++]=20971520,t[i++]=20971520,o.bits=1,0;for(A=1;L>A&&0===c[A];A++);for(A>M&&(M=A),G=1,a=1;MAXBITS>=a;a++)if(G<<=1,G-=c[a],0>G)return-1;if(G>0&&(r===CODES||1!==L))return-1;for(m[1]=0,a=1;MAXBITS>a;a++)m[a+1]=m[a]+c[a];for(b=0;f>b;b++)0!==S[e+b]&&(u[m[S[e+b]]++]=b);if(r===CODES?(_=v=u,N=19):r===LENS?(_=lbase,x-=257,v=lext,w-=257,N=256):(_=dbase,v=dext,N=-1),U=0,b=0,a=A,I=i,X=M,d=0,s=-1,H=1<<M,n=H-1,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;for(var C=0;;){C++,T=a-d,u[b]<N?(B=0,D=u[b]):u[b]>N?(B=v[w+u[b]],D=_[x+u[b]]):(B=96,D=0),E=1<<a-d,l=1<<X,A=l;do l-=E,t[I+(U>>d)+l]=T<<24|B<<16|D|0;while(0!==l);for(E=1<<a-1;U&E;)E>>=1;if(0!==E?(U&=E-1,U+=E):U=0,b++,0===--c[a]){if(a===L)break;a=S[e+u[b]]}if(a>M&&(U&n)!==s){for(0===d&&(d=M),I+=A,X=a-d,G=1<<X;L>X+d&&(G-=c[X+d],!(0>=G));)X++,G<<=1;if(H+=1<<X,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;s=U&n,t[s]=M<<24|X<<16|I-i|0}}return 0!==U&&(t[I+U]=a-d<<24|64<<16|0),o.bits=M,0};


},{"../utils/common":36}],44:[function(require,module,exports){
  "use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};


},{}],45:[function(require,module,exports){
  "use strict";function zero(e){for(var _=e.length;--_>=0;)e[_]=0}function d_code(e){return 256>e?_dist_code[e]:_dist_code[256+(e>>>7)]}function put_short(e,_){e.pending_buf[e.pending++]=255&_,e.pending_buf[e.pending++]=_>>>8&255}function send_bits(e,_,t){e.bi_valid>Buf_size-t?(e.bi_buf|=_<<e.bi_valid&65535,put_short(e,e.bi_buf),e.bi_buf=_>>Buf_size-e.bi_valid,e.bi_valid+=t-Buf_size):(e.bi_buf|=_<<e.bi_valid&65535,e.bi_valid+=t)}function send_code(e,_,t){send_bits(e,t[2*_],t[2*_+1])}function bi_reverse(e,_){var t=0;do t|=1&e,e>>>=1,t<<=1;while(--_>0);return t>>>1}function bi_flush(e){16===e.bi_valid?(put_short(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function gen_bitlen(e,_){var t,r,i,n,s,d,a=_.dyn_tree,l=_.max_code,c=_.stat_desc.static_tree,o=_.stat_desc.has_stree,b=_.stat_desc.extra_bits,f=_.stat_desc.extra_base,u=_.stat_desc.max_length,p=0;for(n=0;MAX_BITS>=n;n++)e.bl_count[n]=0;for(a[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;HEAP_SIZE>t;t++)r=e.heap[t],n=a[2*a[2*r+1]+1]+1,n>u&&(n=u,p++),a[2*r+1]=n,r>l||(e.bl_count[n]++,s=0,r>=f&&(s=b[r-f]),d=a[2*r],e.opt_len+=d*(n+s),o&&(e.static_len+=d*(c[2*r+1]+s)));if(0!==p){do{for(n=u-1;0===e.bl_count[n];)n--;e.bl_count[n]--,e.bl_count[n+1]+=2,e.bl_count[u]--,p-=2}while(p>0);for(n=u;0!==n;n--)for(r=e.bl_count[n];0!==r;)i=e.heap[--t],i>l||(a[2*i+1]!==n&&(e.opt_len+=(n-a[2*i+1])*a[2*i],a[2*i+1]=n),r--)}}function gen_codes(e,_,t){var r,i,n=new Array(MAX_BITS+1),s=0;for(r=1;MAX_BITS>=r;r++)n[r]=s=s+t[r-1]<<1;for(i=0;_>=i;i++){var d=e[2*i+1];0!==d&&(e[2*i]=bi_reverse(n[d]++,d))}}function tr_static_init(){var e,_,t,r,i,n=new Array(MAX_BITS+1);for(t=0,r=0;LENGTH_CODES-1>r;r++)for(base_length[r]=t,e=0;e<1<<extra_lbits[r];e++)_length_code[t++]=r;for(_length_code[t-1]=r,i=0,r=0;16>r;r++)for(base_dist[r]=i,e=0;e<1<<extra_dbits[r];e++)_dist_code[i++]=r;for(i>>=7;D_CODES>r;r++)for(base_dist[r]=i<<7,e=0;e<1<<extra_dbits[r]-7;e++)_dist_code[256+i++]=r;for(_=0;MAX_BITS>=_;_++)n[_]=0;for(e=0;143>=e;)static_ltree[2*e+1]=8,e++,n[8]++;for(;255>=e;)static_ltree[2*e+1]=9,e++,n[9]++;for(;279>=e;)static_ltree[2*e+1]=7,e++,n[7]++;for(;287>=e;)static_ltree[2*e+1]=8,e++,n[8]++;for(gen_codes(static_ltree,L_CODES+1,n),e=0;D_CODES>e;e++)static_dtree[2*e+1]=5,static_dtree[2*e]=bi_reverse(e,5);static_l_desc=new StaticTreeDesc(static_ltree,extra_lbits,LITERALS+1,L_CODES,MAX_BITS),static_d_desc=new StaticTreeDesc(static_dtree,extra_dbits,0,D_CODES,MAX_BITS),static_bl_desc=new StaticTreeDesc(new Array(0),extra_blbits,0,BL_CODES,MAX_BL_BITS)}function init_block(e){var _;for(_=0;L_CODES>_;_++)e.dyn_ltree[2*_]=0;for(_=0;D_CODES>_;_++)e.dyn_dtree[2*_]=0;for(_=0;BL_CODES>_;_++)e.bl_tree[2*_]=0;e.dyn_ltree[2*END_BLOCK]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function bi_windup(e){e.bi_valid>8?put_short(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function copy_block(e,_,t,r){bi_windup(e),r&&(put_short(e,t),put_short(e,~t)),utils.arraySet(e.pending_buf,e.window,_,t,e.pending),e.pending+=t}function smaller(e,_,t,r){var i=2*_,n=2*t;return e[i]<e[n]||e[i]===e[n]&&r[_]<=r[t]}function pqdownheap(e,_,t){for(var r=e.heap[t],i=t<<1;i<=e.heap_len&&(i<e.heap_len&&smaller(_,e.heap[i+1],e.heap[i],e.depth)&&i++,!smaller(_,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r}function compress_block(e,_,t){var r,i,n,s,d=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],i=e.pending_buf[e.l_buf+d],d++,0===r?send_code(e,i,_):(n=_length_code[i],send_code(e,n+LITERALS+1,_),s=extra_lbits[n],0!==s&&(i-=base_length[n],send_bits(e,i,s)),r--,n=d_code(r),send_code(e,n,t),s=extra_dbits[n],0!==s&&(r-=base_dist[n],send_bits(e,r,s)));while(d<e.last_lit);send_code(e,END_BLOCK,_)}function build_tree(e,_){var t,r,i,n=_.dyn_tree,s=_.stat_desc.static_tree,d=_.stat_desc.has_stree,a=_.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE,t=0;a>t;t++)0!==n[2*t]?(e.heap[++e.heap_len]=l=t,e.depth[t]=0):n[2*t+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=2>l?++l:0,n[2*i]=1,e.depth[i]=0,e.opt_len--,d&&(e.static_len-=s[2*i+1]);for(_.max_code=l,t=e.heap_len>>1;t>=1;t--)pqdownheap(e,n,t);i=a;do t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],pqdownheap(e,n,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,n[2*i]=n[2*t]+n[2*r],e.depth[i]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,n[2*t+1]=n[2*r+1]=i,e.heap[1]=i++,pqdownheap(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],gen_bitlen(e,_),gen_codes(n,l,e.bl_count)}function scan_tree(e,_,t){var r,i,n=-1,s=_[1],d=0,a=7,l=4;for(0===s&&(a=138,l=3),_[2*(t+1)+1]=65535,r=0;t>=r;r++)i=s,s=_[2*(r+1)+1],++d<a&&i===s||(l>d?e.bl_tree[2*i]+=d:0!==i?(i!==n&&e.bl_tree[2*i]++,e.bl_tree[2*REP_3_6]++):10>=d?e.bl_tree[2*REPZ_3_10]++:e.bl_tree[2*REPZ_11_138]++,d=0,n=i,0===s?(a=138,l=3):i===s?(a=6,l=3):(a=7,l=4))}function send_tree(e,_,t){var r,i,n=-1,s=_[1],d=0,a=7,l=4;for(0===s&&(a=138,l=3),r=0;t>=r;r++)if(i=s,s=_[2*(r+1)+1],!(++d<a&&i===s)){if(l>d){do send_code(e,i,e.bl_tree);while(0!==--d)}else 0!==i?(i!==n&&(send_code(e,i,e.bl_tree),d--),send_code(e,REP_3_6,e.bl_tree),send_bits(e,d-3,2)):10>=d?(send_code(e,REPZ_3_10,e.bl_tree),send_bits(e,d-3,3)):(send_code(e,REPZ_11_138,e.bl_tree),send_bits(e,d-11,7));d=0,n=i,0===s?(a=138,l=3):i===s?(a=6,l=3):(a=7,l=4)}}function build_bl_tree(e){var _;for(scan_tree(e,e.dyn_ltree,e.l_desc.max_code),scan_tree(e,e.dyn_dtree,e.d_desc.max_code),build_tree(e,e.bl_desc),_=BL_CODES-1;_>=3&&0===e.bl_tree[2*bl_order[_]+1];_--);return e.opt_len+=3*(_+1)+5+5+4,_}function send_all_trees(e,_,t,r){var i;for(send_bits(e,_-257,5),send_bits(e,t-1,5),send_bits(e,r-4,4),i=0;r>i;i++)send_bits(e,e.bl_tree[2*bl_order[i]+1],3);send_tree(e,e.dyn_ltree,_-1),send_tree(e,e.dyn_dtree,t-1)}function detect_data_type(e){var _,t=4093624447;for(_=0;31>=_;_++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*_])return Z_BINARY;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return Z_TEXT;for(_=32;LITERALS>_;_++)if(0!==e.dyn_ltree[2*_])return Z_TEXT;return Z_BINARY}function _tr_init(e){static_init_done||(tr_static_init(),static_init_done=!0),e.l_desc=new TreeDesc(e.dyn_ltree,static_l_desc),e.d_desc=new TreeDesc(e.dyn_dtree,static_d_desc),e.bl_desc=new TreeDesc(e.bl_tree,static_bl_desc),e.bi_buf=0,e.bi_valid=0,init_block(e)}function _tr_stored_block(e,_,t,r){send_bits(e,(STORED_BLOCK<<1)+(r?1:0),3),copy_block(e,_,t,!0)}function _tr_align(e){send_bits(e,STATIC_TREES<<1,3),send_code(e,END_BLOCK,static_ltree),bi_flush(e)}function _tr_flush_block(e,_,t,r){var i,n,s=0;e.level>0?(e.strm.data_type===Z_UNKNOWN&&(e.strm.data_type=detect_data_type(e)),build_tree(e,e.l_desc),build_tree(e,e.d_desc),s=build_bl_tree(e),i=e.opt_len+3+7>>>3,n=e.static_len+3+7>>>3,i>=n&&(i=n)):i=n=t+5,i>=t+4&&-1!==_?_tr_stored_block(e,_,t,r):e.strategy===Z_FIXED||n===i?(send_bits(e,(STATIC_TREES<<1)+(r?1:0),3),compress_block(e,static_ltree,static_dtree)):(send_bits(e,(DYN_TREES<<1)+(r?1:0),3),send_all_trees(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),compress_block(e,e.dyn_ltree,e.dyn_dtree)),init_block(e),r&&bi_windup(e)}function _tr_tally(e,_,t){return e.pending_buf[e.d_buf+2*e.last_lit]=_>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&_,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===_?e.dyn_ltree[2*t]++:(e.matches++,_--,e.dyn_ltree[2*(_length_code[t]+LITERALS+1)]++,e.dyn_dtree[2*d_code(_)]++),e.last_lit===e.lit_bufsize-1}var utils=require("../utils/common"),Z_FIXED=4,Z_BINARY=0,Z_TEXT=1,Z_UNKNOWN=2,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,D_CODES=30,BL_CODES=19,HEAP_SIZE=2*L_CODES+1,MAX_BITS=15,Buf_size=16,MAX_BL_BITS=7,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],DIST_CODE_LEN=512,static_ltree=new Array(2*(L_CODES+2));zero(static_ltree);var static_dtree=new Array(2*D_CODES);zero(static_dtree);var _dist_code=new Array(DIST_CODE_LEN);zero(_dist_code);var _length_code=new Array(MAX_MATCH-MIN_MATCH+1);zero(_length_code);var base_length=new Array(LENGTH_CODES);zero(base_length);var base_dist=new Array(D_CODES);zero(base_dist);var StaticTreeDesc=function(e,_,t,r,i){this.static_tree=e,this.extra_bits=_,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length},static_l_desc,static_d_desc,static_bl_desc,TreeDesc=function(e,_){this.dyn_tree=e,this.max_code=0,this.stat_desc=_},static_init_done=!1;exports._tr_init=_tr_init,exports._tr_stored_block=_tr_stored_block,exports._tr_flush_block=_tr_flush_block,exports._tr_tally=_tr_tally,exports._tr_align=_tr_align;


},{"../utils/common":36}],46:[function(require,module,exports){
  "use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream;


},{}],47:[function(require,module,exports){
  (function(t,e){function r(t){if(t<exports.DEFLATE||t>exports.UNZIP)throw new TypeError("Bad argument");this.mode=t,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function s(t,e){for(var r=0;r<t.length;r++)this[e+r]=t[r]}var i=require("pako/lib/zlib/messages"),o=require("pako/lib/zlib/zstream"),n=require("pako/lib/zlib/deflate.js"),p=require("pako/lib/zlib/inflate.js"),h=require("pako/lib/zlib/constants");for(var a in h)exports[a]=h[a];exports.NONE=0,exports.DEFLATE=1,exports.INFLATE=2,exports.GZIP=3,exports.GUNZIP=4,exports.DEFLATERAW=5,exports.INFLATERAW=6,exports.UNZIP=7,r.prototype.init=function(t,e,r,s,i){switch(this.windowBits=t,this.level=e,this.memLevel=r,this.strategy=s,(this.mode===exports.GZIP||this.mode===exports.GUNZIP)&&(this.windowBits+=16),this.mode===exports.UNZIP&&(this.windowBits+=32),(this.mode===exports.DEFLATERAW||this.mode===exports.INFLATERAW)&&(this.windowBits=-this.windowBits),this.strm=new o,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var h=n.deflateInit2(this.strm,this.level,exports.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:case exports.UNZIP:var h=p.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}return h!==exports.Z_OK?void this._error(h):(this.write_in_progress=!1,void(this.init_done=!0))},r.prototype.params=function(){throw new Error("deflateParams Not supported")},r.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===exports.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},r.prototype.write=function(e,r,s,i,o,n,p){this._writeCheck(),this.write_in_progress=!0;var h=this;return t.nextTick(function(){h.write_in_progress=!1;var t=h._write(e,r,s,i,o,n,p);h.callback(t[0],t[1]),h.pending_close&&h.close()}),this},r.prototype.writeSync=function(t,e,r,s,i,o,n){return this._writeCheck(),this._write(t,e,r,s,i,o,n)},r.prototype._write=function(t,r,i,o,h,a,l){if(this.write_in_progress=!0,t!==exports.Z_NO_FLUSH&&t!==exports.Z_PARTIAL_FLUSH&&t!==exports.Z_SYNC_FLUSH&&t!==exports.Z_FULL_FLUSH&&t!==exports.Z_FINISH&&t!==exports.Z_BLOCK)throw new Error("Invalid flush value");null==r&&(r=new e(0),o=0,i=0),h._set?h.set=h._set:h.set=s;var _=this.strm;switch(_.avail_in=o,_.input=r,_.next_in=i,_.avail_out=l,_.output=h,_.next_out=a,this.mode){case exports.DEFLATE:case exports.GZIP:case exports.DEFLATERAW:var w=n.deflate(_,t);break;case exports.UNZIP:case exports.INFLATE:case exports.GUNZIP:case exports.INFLATERAW:var w=p.inflate(_,t);break;default:throw new Error("Unknown mode "+this.mode)}return w!==exports.Z_STREAM_END&&w!==exports.Z_OK&&this._error(w),this.write_in_progress=!1,[_.avail_in,_.avail_out]},r.prototype.close=function(){return this.write_in_progress?void(this.pending_close=!0):(this.pending_close=!1,this.mode===exports.DEFLATE||this.mode===exports.GZIP||this.mode===exports.DEFLATERAW?n.deflateEnd(this.strm):p.inflateEnd(this.strm),void(this.mode=exports.NONE))},r.prototype.reset=function(){switch(this.mode){case exports.DEFLATE:case exports.DEFLATERAW:var t=n.deflateReset(this.strm);break;case exports.INFLATE:case exports.INFLATERAW:var t=p.inflateReset(this.strm)}t!==exports.Z_OK&&this._error(t)},r.prototype._error=function(t){this.onerror(i[t]+": "+this.strm.msg,t),this.write_in_progress=!1,this.pending_close&&this.close()},exports.Zlib=r}).call(this,require("FWaASH"),require("buffer").Buffer);


},{"FWaASH":67,"buffer":49,"pako/lib/zlib/constants":38,"pako/lib/zlib/deflate.js":40,"pako/lib/zlib/inflate.js":42,"pako/lib/zlib/messages":44,"pako/lib/zlib/zstream":46}],48:[function(require,module,exports){
  (function(e,t){function n(e,n,r){function i(){for(var t;null!==(t=e.read());)f.push(t),_+=t.length;e.once("readable",i)}function o(t){e.removeListener("end",s),e.removeListener("readable",i),r(t)}function s(){var n=t.concat(f,_);f=[],r(null,n),e.close()}var f=[],_=0;e.on("error",o),e.on("end",s),e.end(n),i()}function r(e,n){if("string"==typeof n&&(n=new t(n)),!t.isBuffer(n))throw new TypeError("Not a string or buffer");var r=l.Z_FINISH;return e._processChunk(n,r)}function i(e){return this instanceof i?void a.call(this,e,l.DEFLATE):new i(e)}function o(e){return this instanceof o?void a.call(this,e,l.INFLATE):new o(e)}function s(e){return this instanceof s?void a.call(this,e,l.GZIP):new s(e)}function f(e){return this instanceof f?void a.call(this,e,l.GUNZIP):new f(e)}function _(e){return this instanceof _?void a.call(this,e,l.DEFLATERAW):new _(e)}function u(e){return this instanceof u?void a.call(this,e,l.INFLATERAW):new u(e)}function c(e){return this instanceof c?void a.call(this,e,l.UNZIP):new c(e)}function a(e,n){if(this._opts=e=e||{},this._chunkSize=e.chunkSize||exports.Z_DEFAULT_CHUNK,h.call(this,e),e.flush&&e.flush!==l.Z_NO_FLUSH&&e.flush!==l.Z_PARTIAL_FLUSH&&e.flush!==l.Z_SYNC_FLUSH&&e.flush!==l.Z_FULL_FLUSH&&e.flush!==l.Z_FINISH&&e.flush!==l.Z_BLOCK)throw new Error("Invalid flush flag: "+e.flush);if(this._flushFlag=e.flush||l.Z_NO_FLUSH,e.chunkSize&&(e.chunkSize<exports.Z_MIN_CHUNK||e.chunkSize>exports.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<exports.Z_MIN_WINDOWBITS||e.windowBits>exports.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<exports.Z_MIN_LEVEL||e.level>exports.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<exports.Z_MIN_MEMLEVEL||e.memLevel>exports.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=exports.Z_FILTERED&&e.strategy!=exports.Z_HUFFMAN_ONLY&&e.strategy!=exports.Z_RLE&&e.strategy!=exports.Z_FIXED&&e.strategy!=exports.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!t.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new l.Zlib(n);var r=this;this._hadError=!1,this._binding.onerror=function(e,t){r._binding=null,r._hadError=!0;var n=new Error(e);n.errno=t,n.code=exports.codes[t],r.emit("error",n)};var i=exports.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(i=e.level);var o=exports.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(o=e.strategy),this._binding.init(e.windowBits||exports.Z_DEFAULT_WINDOWBITS,i,e.memLevel||exports.Z_DEFAULT_MEMLEVEL,o,e.dictionary),this._buffer=new t(this._chunkSize),this._offset=0,this._closed=!1,this._level=i,this._strategy=o,this.once("end",this.close)}var h=require("_stream_transform"),l=require("./binding"),p=require("util"),E=require("assert").ok;l.Z_MIN_WINDOWBITS=8,l.Z_MAX_WINDOWBITS=15,l.Z_DEFAULT_WINDOWBITS=15,l.Z_MIN_CHUNK=64,l.Z_MAX_CHUNK=1/0,l.Z_DEFAULT_CHUNK=16384,l.Z_MIN_MEMLEVEL=1,l.Z_MAX_MEMLEVEL=9,l.Z_DEFAULT_MEMLEVEL=8,l.Z_MIN_LEVEL=-1,l.Z_MAX_LEVEL=9,l.Z_DEFAULT_LEVEL=l.Z_DEFAULT_COMPRESSION,Object.keys(l).forEach(function(e){e.match(/^Z/)&&(exports[e]=l[e])}),exports.codes={Z_OK:l.Z_OK,Z_STREAM_END:l.Z_STREAM_END,Z_NEED_DICT:l.Z_NEED_DICT,Z_ERRNO:l.Z_ERRNO,Z_STREAM_ERROR:l.Z_STREAM_ERROR,Z_DATA_ERROR:l.Z_DATA_ERROR,Z_MEM_ERROR:l.Z_MEM_ERROR,Z_BUF_ERROR:l.Z_BUF_ERROR,Z_VERSION_ERROR:l.Z_VERSION_ERROR},Object.keys(exports.codes).forEach(function(e){exports.codes[exports.codes[e]]=e}),exports.Deflate=i,exports.Inflate=o,exports.Gzip=s,exports.Gunzip=f,exports.DeflateRaw=_,exports.InflateRaw=u,exports.Unzip=c,exports.createDeflate=function(e){return new i(e)},exports.createInflate=function(e){return new o(e)},exports.createDeflateRaw=function(e){return new _(e)},exports.createInflateRaw=function(e){return new u(e)},exports.createGzip=function(e){return new s(e)},exports.createGunzip=function(e){return new f(e)},exports.createUnzip=function(e){return new c(e)},exports.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new i(t),e,r)},exports.deflateSync=function(e,t){return r(new i(t),e)},exports.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new s(t),e,r)},exports.gzipSync=function(e,t){return r(new s(t),e)},exports.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new _(t),e,r)},exports.deflateRawSync=function(e,t){return r(new _(t),e)},exports.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new c(t),e,r)},exports.unzipSync=function(e,t){return r(new c(t),e)},exports.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new o(t),e,r)},exports.inflateSync=function(e,t){return r(new o(t),e)},exports.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new f(t),e,r)},exports.gunzipSync=function(e,t){return r(new f(t),e)},exports.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new u(t),e,r)},exports.inflateRawSync=function(e,t){return r(new u(t),e)},p.inherits(a,h),a.prototype.params=function(t,n,r){if(t<exports.Z_MIN_LEVEL||t>exports.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(n!=exports.Z_FILTERED&&n!=exports.Z_HUFFMAN_ONLY&&n!=exports.Z_RLE&&n!=exports.Z_FIXED&&n!=exports.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==t||this._strategy!==n){var i=this;this.flush(l.Z_SYNC_FLUSH,function(){i._binding.params(t,n),i._hadError||(i._level=t,i._strategy=n,r&&r())})}else e.nextTick(r)},a.prototype.reset=function(){return this._binding.reset()},a.prototype._flush=function(e){this._transform(new t(0),"",e)},a.prototype.flush=function(n,r){var i=this._writableState;if(("function"==typeof n||void 0===n&&!r)&&(r=n,n=l.Z_FULL_FLUSH),i.ended)r&&e.nextTick(r);else if(i.ending)r&&this.once("end",r);else if(i.needDrain){var o=this;this.once("drain",function(){o.flush(r)})}else this._flushFlag=n,this.write(new t(0),"",r)},a.prototype.close=function(t){if(t&&e.nextTick(t),!this._closed){this._closed=!0,this._binding.close();var n=this;e.nextTick(function(){n.emit("close")})}},a.prototype._transform=function(e,n,r){var i,o=this._writableState,s=o.ending||o.ended,f=s&&(!e||o.length===e.length);if(null===!e&&!t.isBuffer(e))return r(new Error("invalid input"));f?i=l.Z_FINISH:(i=this._flushFlag,e.length>=o.length&&(this._flushFlag=this._opts.flush||l.Z_NO_FLUSH));this._processChunk(e,i,r)},a.prototype._processChunk=function(e,n,r){function i(c,l){if(!_._hadError){var p=s-l;if(E(p>=0,"have should not go down"),p>0){var w=_._buffer.slice(_._offset,_._offset+p);_._offset+=p,u?_.push(w):(a.push(w),h+=w.length)}if((0===l||_._offset>=_._chunkSize)&&(s=_._chunkSize,_._offset=0,_._buffer=new t(_._chunkSize)),0===l){if(f+=o-c,o=c,!u)return!0;var d=_._binding.write(n,e,f,o,_._buffer,_._offset,_._chunkSize);return d.callback=i,void(d.buffer=e)}return u?void r():!1}}var o=e&&e.length,s=this._chunkSize-this._offset,f=0,_=this,u="function"==typeof r;if(!u){var c,a=[],h=0;this.on("error",function(e){c=e});do var l=this._binding.writeSync(n,e,f,o,this._buffer,this._offset,s);while(!this._hadError&&i(l[0],l[1]));if(this._hadError)throw c;var p=t.concat(a,h);return this.close(),p}var w=this._binding.write(n,e,f,o,this._buffer,this._offset,s);w.buffer=e,w.callback=i},p.inherits(i,a),p.inherits(o,a),p.inherits(s,a),p.inherits(f,a),p.inherits(_,a),p.inherits(u,a),p.inherits(c,a)}).call(this,require("FWaASH"),require("buffer").Buffer);


},{"./binding":47,"FWaASH":67,"_stream_transform":77,"assert":34,"buffer":49,"util":81}],49:[function(require,module,exports){
  function Buffer(e,t,r){if(!(this instanceof Buffer))return new Buffer(e,t,r);var n=typeof e;if("base64"===t&&"string"===n)for(e=stringtrim(e);e.length%4!==0;)e+="=";var i;if("number"===n)i=coerce(e);else if("string"===n)i=Buffer.byteLength(e,t);else{if("object"!==n)throw new Error("First argument needs to be a number, array or string.");i=coerce(e.length)}var a;Buffer._useTypedArrays?a=Buffer._augment(new Uint8Array(i)):(a=this,a.length=i,a._isBuffer=!0);var s;if(Buffer._useTypedArrays&&"number"==typeof e.byteLength)a._set(e);else if(isArrayish(e))for(s=0;i>s;s++)Buffer.isBuffer(e)?a[s]=e.readUInt8(s):a[s]=e[s];else if("string"===n)a.write(e,0,t);else if("number"===n&&!Buffer._useTypedArrays&&!r)for(s=0;i>s;s++)a[s]=0;return a}function _hexWrite(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var a=t.length;assert(a%2===0,"Invalid hex string"),n>a/2&&(n=a/2);for(var s=0;n>s;s++){var o=parseInt(t.substr(2*s,2),16);assert(!isNaN(o),"Invalid hex string"),e[r+s]=o}return Buffer._charsWritten=2*s,s}function _utf8Write(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(utf8ToBytes(t),e,r,n);return i}function _asciiWrite(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(asciiToBytes(t),e,r,n);return i}function _binaryWrite(e,t,r,n){return _asciiWrite(e,t,r,n)}function _base64Write(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(base64ToBytes(t),e,r,n);return i}function _utf16leWrite(e,t,r,n){var i=Buffer._charsWritten=blitBuffer(utf16leToBytes(t),e,r,n);return i}function _base64Slice(e,t,r){return 0===t&&r===e.length?base64.fromByteArray(e):base64.fromByteArray(e.slice(t,r))}function _utf8Slice(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var a=t;r>a;a++)e[a]<=127?(n+=decodeUtf8Char(i)+String.fromCharCode(e[a]),i=""):i+="%"+e[a].toString(16);return n+decodeUtf8Char(i)}function _asciiSlice(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function _binarySlice(e,t,r){return _asciiSlice(e,t,r)}function _hexSlice(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",a=t;r>a;a++)i+=toHex(e[a]);return i}function _utf16leSlice(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}function _readUInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a;return r?(a=e[t],i>t+1&&(a|=e[t+1]<<8)):(a=e[t]<<8,i>t+1&&(a|=e[t+1])),a}}function _readUInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a;return r?(i>t+2&&(a=e[t+2]<<16),i>t+1&&(a|=e[t+1]<<8),a|=e[t],i>t+3&&(a+=e[t+3]<<24>>>0)):(i>t+1&&(a=e[t+1]<<16),i>t+2&&(a|=e[t+2]<<8),i>t+3&&(a|=e[t+3]),a+=e[t]<<24>>>0),a}}function _readInt16(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a=_readUInt16(e,t,r,!0),s=32768&a;return s?-1*(65535-a+1):a}}function _readInt32(e,t,r,n){n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(void 0!==t&&null!==t,"missing offset"),assert(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var a=_readUInt32(e,t,r,!0),s=2147483648&a;return s?-1*(4294967295-a+1):a}}function _readFloat(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+3<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,23,4)}function _readDouble(e,t,r,n){return n||(assert("boolean"==typeof r,"missing or invalid endian"),assert(t+7<e.length,"Trying to read beyond buffer length")),ieee754.read(e,t,r,52,8)}function _writeUInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"trying to write beyond buffer length"),verifuint(t,65535));var a=e.length;if(!(r>=a))for(var s=0,o=Math.min(a-r,2);o>s;s++)e[r+s]=(t&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function _writeUInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"trying to write beyond buffer length"),verifuint(t,4294967295));var a=e.length;if(!(r>=a))for(var s=0,o=Math.min(a-r,4);o>s;s++)e[r+s]=t>>>8*(n?s:3-s)&255}function _writeInt16(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+1<e.length,"Trying to write beyond buffer length"),verifsint(t,32767,-32768));var a=e.length;r>=a||(t>=0?_writeUInt16(e,t,r,n,i):_writeUInt16(e,65535+t+1,r,n,i))}function _writeInt32(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifsint(t,2147483647,-2147483648));var a=e.length;r>=a||(t>=0?_writeUInt32(e,t,r,n,i):_writeUInt32(e,4294967295+t+1,r,n,i))}function _writeFloat(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+3<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,3.4028234663852886e38,-3.4028234663852886e38));var a=e.length;r>=a||ieee754.write(e,t,r,n,23,4)}function _writeDouble(e,t,r,n,i){i||(assert(void 0!==t&&null!==t,"missing value"),assert("boolean"==typeof n,"missing or invalid endian"),assert(void 0!==r&&null!==r,"missing offset"),assert(r+7<e.length,"Trying to write beyond buffer length"),verifIEEE754(t,1.7976931348623157e308,-1.7976931348623157e308));var a=e.length;r>=a||ieee754.write(e,t,r,n,52,8)}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function clamp(e,t,r){return"number"!=typeof e?r:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function coerce(e){return e=~~Math.ceil(+e),0>e?0:e}function isArray(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function isArrayish(e){return isArray(e)||Buffer.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function toHex(e){return 16>e?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(e.charCodeAt(r));else{var i=r;n>=55296&&57343>=n&&r++;for(var a=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),s=0;s<a.length;s++)t.push(parseInt(a[s],16))}}return t}function asciiToBytes(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function utf16leToBytes(e){for(var t,r,n,i=[],a=0;a<e.length;a++)t=e.charCodeAt(a),r=t>>8,n=t%256,i.push(n),i.push(r);return i}function base64ToBytes(e){return base64.toByteArray(e)}function blitBuffer(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function decodeUtf8Char(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function verifuint(e,t){assert("number"==typeof e,"cannot write a non-number as a number"),assert(e>=0,"specified a negative value for writing an unsigned value"),assert(t>=e,"value is larger than maximum value for type"),assert(Math.floor(e)===e,"value has a fractional component")}function verifsint(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value"),assert(Math.floor(e)===e,"value has a fractional component")}function verifIEEE754(e,t,r){assert("number"==typeof e,"cannot write a non-number as a number"),assert(t>=e,"value larger than maximum allowed value"),assert(e>=r,"value smaller than minimum allowed value")}function assert(e,t){if(!e)throw new Error(t||"Failed assertion")}var base64=require("base64-js"),ieee754=require("ieee754");exports.Buffer=Buffer,exports.SlowBuffer=Buffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192,Buffer._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(r){return!1}}(),Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},Buffer.byteLength=function(e,t){var r;switch(e+="",t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=utf8ToBytes(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=base64ToBytes(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},Buffer.concat=function(e,t){if(assert(isArray(e),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===e.length)return new Buffer(0);if(1===e.length)return e[0];var r;if("number"!=typeof t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var n=new Buffer(t),i=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(n,i),i+=a.length}return n},Buffer.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var i=n;n=t,t=r,r=i}t=Number(t)||0;var a=this.length-t;r?(r=Number(r),r>a&&(r=a)):r=a,n=String(n||"utf8").toLowerCase();var s;switch(n){case"hex":s=_hexWrite(this,e,t,r);break;case"utf8":case"utf-8":s=_utf8Write(this,e,t,r);break;case"ascii":s=_asciiWrite(this,e,t,r);break;case"binary":s=_binaryWrite(this,e,t,r);break;case"base64":s=_base64Write(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":s=_utf16leWrite(this,e,t,r);break;default:throw new Error("Unknown encoding")}return s},Buffer.prototype.toString=function(e,t,r){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,r=void 0!==r?Number(r):r=n.length,r===t)return"";var i;switch(e){case"hex":i=_hexSlice(n,t,r);break;case"utf8":case"utf-8":i=_utf8Slice(n,t,r);break;case"ascii":i=_asciiSlice(n,t,r);break;case"binary":i=_binarySlice(n,t,r);break;case"base64":i=_base64Slice(n,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=_utf16leSlice(n,t,r);break;default:throw new Error("Unknown encoding")}return i},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.copy=function(e,t,r,n){var i=this;if(r||(r=0),n||0===n||(n=this.length),t||(t=0),n!==r&&0!==e.length&&0!==i.length){assert(n>=r,"sourceEnd < sourceStart"),assert(t>=0&&t<e.length,"targetStart out of bounds"),assert(r>=0&&r<i.length,"sourceStart out of bounds"),assert(n>=0&&n<=i.length,"sourceEnd out of bounds"),n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a=n-r;if(100>a||!Buffer._useTypedArrays)for(var s=0;a>s;s++)e[s+t]=this[s+r];else e._set(this.subarray(r,r+a),t)}},Buffer.prototype.slice=function(e,t){var r=this.length;if(e=clamp(e,r,0),t=clamp(t,r,r),Buffer._useTypedArrays)return Buffer._augment(this.subarray(e,t));for(var n=t-e,i=new Buffer(n,void 0,!0),a=0;n>a;a++)i[a]=this[a+e];return i},Buffer.prototype.get=function(e){return this.readUInt8(e)},Buffer.prototype.set=function(e,t){return this.writeUInt8(e,t)},Buffer.prototype.readUInt8=function(e,t){return t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},Buffer.prototype.readUInt16LE=function(e,t){return _readUInt16(this,e,!0,t)},Buffer.prototype.readUInt16BE=function(e,t){return _readUInt16(this,e,!1,t)},Buffer.prototype.readUInt32LE=function(e,t){return _readUInt32(this,e,!0,t)},Buffer.prototype.readUInt32BE=function(e,t){return _readUInt32(this,e,!1,t)},Buffer.prototype.readInt8=function(e,t){if(t||(assert(void 0!==e&&null!==e,"missing offset"),assert(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var r=128&this[e];return r?-1*(255-this[e]+1):this[e]}},Buffer.prototype.readInt16LE=function(e,t){return _readInt16(this,e,!0,t)},Buffer.prototype.readInt16BE=function(e,t){return _readInt16(this,e,!1,t)},Buffer.prototype.readInt32LE=function(e,t){return _readInt32(this,e,!0,t)},Buffer.prototype.readInt32BE=function(e,t){return _readInt32(this,e,!1,t)},Buffer.prototype.readFloatLE=function(e,t){return _readFloat(this,e,!0,t)},Buffer.prototype.readFloatBE=function(e,t){return _readFloat(this,e,!1,t)},Buffer.prototype.readDoubleLE=function(e,t){return _readDouble(this,e,!0,t)},Buffer.prototype.readDoubleBE=function(e,t){return _readDouble(this,e,!1,t)},Buffer.prototype.writeUInt8=function(e,t,r){r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"trying to write beyond buffer length"),verifuint(e,255)),t>=this.length||(this[t]=e)},Buffer.prototype.writeUInt16LE=function(e,t,r){_writeUInt16(this,e,t,!0,r)},Buffer.prototype.writeUInt16BE=function(e,t,r){_writeUInt16(this,e,t,!1,r)},Buffer.prototype.writeUInt32LE=function(e,t,r){_writeUInt32(this,e,t,!0,r)},Buffer.prototype.writeUInt32BE=function(e,t,r){_writeUInt32(this,e,t,!1,r)},Buffer.prototype.writeInt8=function(e,t,r){r||(assert(void 0!==e&&null!==e,"missing value"),assert(void 0!==t&&null!==t,"missing offset"),assert(t<this.length,"Trying to write beyond buffer length"),verifsint(e,127,-128)),t>=this.length||(e>=0?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r))},Buffer.prototype.writeInt16LE=function(e,t,r){_writeInt16(this,e,t,!0,r)},Buffer.prototype.writeInt16BE=function(e,t,r){_writeInt16(this,e,t,!1,r)},Buffer.prototype.writeInt32LE=function(e,t,r){_writeInt32(this,e,t,!0,r)},Buffer.prototype.writeInt32BE=function(e,t,r){_writeInt32(this,e,t,!1,r)},Buffer.prototype.writeFloatLE=function(e,t,r){_writeFloat(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){_writeFloat(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){_writeDouble(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){_writeDouble(this,e,t,!1,r)},Buffer.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),"string"==typeof e&&(e=e.charCodeAt(0)),assert("number"==typeof e&&!isNaN(e),"value is not a number"),assert(r>=t,"end < start"),r!==t&&0!==this.length){assert(t>=0&&t<this.length,"start out of bounds"),assert(r>=0&&r<=this.length,"end out of bounds");for(var n=t;r>n;n++)this[n]=e}},Buffer.prototype.inspect=function(){for(var e=[],t=this.length,r=0;t>r;r++)if(e[r]=toHex(this[r]),r===exports.INSPECT_MAX_BYTES){e[r+1]="...";break}return"<Buffer "+e.join(" ")+">"},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer._useTypedArrays)return new Buffer(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=BP.get,e.set=BP.set,e.write=BP.write,e.toString=BP.toString,e.toLocaleString=BP.toString,e.toJSON=BP.toJSON,e.copy=BP.copy,e.slice=BP.slice,e.readUInt8=BP.readUInt8,e.readUInt16LE=BP.readUInt16LE,e.readUInt16BE=BP.readUInt16BE,e.readUInt32LE=BP.readUInt32LE,e.readUInt32BE=BP.readUInt32BE,e.readInt8=BP.readInt8,e.readInt16LE=BP.readInt16LE,e.readInt16BE=BP.readInt16BE,e.readInt32LE=BP.readInt32LE,e.readInt32BE=BP.readInt32BE,e.readFloatLE=BP.readFloatLE,e.readFloatBE=BP.readFloatBE,e.readDoubleLE=BP.readDoubleLE,e.readDoubleBE=BP.readDoubleBE,e.writeUInt8=BP.writeUInt8,e.writeUInt16LE=BP.writeUInt16LE,e.writeUInt16BE=BP.writeUInt16BE,e.writeUInt32LE=BP.writeUInt32LE,e.writeUInt32BE=BP.writeUInt32BE,e.writeInt8=BP.writeInt8,e.writeInt16LE=BP.writeInt16LE,e.writeInt16BE=BP.writeInt16BE,e.writeInt32LE=BP.writeInt32LE,e.writeInt32BE=BP.writeInt32BE,e.writeFloatLE=BP.writeFloatLE,e.writeFloatBE=BP.writeFloatBE,e.writeDoubleLE=BP.writeDoubleLE,e.writeDoubleBE=BP.writeDoubleBE,e.fill=BP.fill,e.inspect=BP.inspect,e.toArrayBuffer=BP.toArrayBuffer,e};


},{"base64-js":50,"ieee754":51}],50:[function(require,module,exports){
  var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:o>r?-1:o+10>r?r-o+26+26:i+26>r?r-i:A+26>r?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;c>n;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;h>n;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);


},{}],51:[function(require,module,exports){
  exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=0>o||0===o&&0>1/o?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};


},{}],52:[function(require,module,exports){
  (function(n){function e(){}function o(){s.log.apply(s,arguments)}function r(){s.log.apply(s,arguments)}function t(){s.warn.apply(s,arguments)}function a(n){w[n]=Date.now()}function i(n){var e=w[n];if(!e)throw new Error("No such label: "+n);var o=Date.now()-e;s.log(n+": "+o+"ms")}function l(){var n=new Error;n.name="Trace",n.message=c.format.apply(null,arguments),s.error(n.stack)}function f(n){s.log(c.inspect(n)+"\n")}function u(n){if(!n){var e=p.call(arguments,1);u.ok(!1,c.format.apply(null,e))}}var s,c=require("util"),u=require("assert"),p=Array.prototype.slice,w={};s="undefined"!=typeof n&&n.console?n.console:"undefined"!=typeof window&&window.console?window.console:{};for(var d=[[e,"log"],[o,"info"],[r,"warn"],[t,"error"],[a,"time"],[i,"timeEnd"],[l,"trace"],[f,"dir"],[u,"assert"]],m=0;m<d.length;m++){var g=d[m],y=g[0],v=g[1];s[v]||(s[v]=y)}module.exports=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"assert":34,"util":81}],53:[function(require,module,exports){
  function toArray(r,e){if(r.length%intSize!==0){var f=r.length+(intSize-r.length%intSize);r=Buffer.concat([r,zeroBuffer],f)}for(var t=[],n=e?r.readInt32BE:r.readInt32LE,u=0;u<r.length;u+=intSize)t.push(n.call(r,u));return t}function toBuffer(r,e,f){for(var t=new Buffer(e),n=f?t.writeInt32BE:t.writeInt32LE,u=0;u<r.length;u++)n.call(t,r[u],4*u,!0);return t}function hash(r,e,f,t){Buffer.isBuffer(r)||(r=new Buffer(r));var n=e(toArray(r,t),r.length*chrsz);return toBuffer(n,f,t)}var Buffer=require("buffer").Buffer,intSize=4,zeroBuffer=new Buffer(intSize);zeroBuffer.fill(0);var chrsz=8;module.exports={hash:hash};


},{"buffer":49}],54:[function(require,module,exports){
  function hmac(e,r,f){Buffer.isBuffer(r)||(r=new Buffer(r)),Buffer.isBuffer(f)||(f=new Buffer(f)),r.length>blocksize?r=e(r):r.length<blocksize&&(r=Buffer.concat([r,zeroBuffer],blocksize));for(var t=new Buffer(blocksize),n=new Buffer(blocksize),i=0;blocksize>i;i++)t[i]=54^r[i],n[i]=92^r[i];var c=e(Buffer.concat([t,f]));return e(Buffer.concat([n,c]))}function hash(e,r){e=e||"sha1";var f=algorithms[e],t=[],n=0;return f||error("algorithm:",e,"is not yet supported"),{update:function(e){return Buffer.isBuffer(e)||(e=new Buffer(e)),t.push(e),n+=e.length,this},digest:function(e){var n=Buffer.concat(t),i=r?hmac(f,r,n):f(n);return t=null,e?i.toString(e):i}}}function error(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function each(e,r){for(var f in e)r(e[f],f)}var Buffer=require("buffer").Buffer,sha=require("./sha"),sha256=require("./sha256"),rng=require("./rng"),md5=require("./md5"),algorithms={sha1:sha,sha256:sha256,md5:md5},blocksize=64,zeroBuffer=new Buffer(blocksize);zeroBuffer.fill(0),exports.createHash=function(e){return hash(e)},exports.createHmac=function(e,r){return hash(e,r)},exports.randomBytes=function(e,r){if(!r||!r.call)return new Buffer(rng(e));try{r.call(this,void 0,new Buffer(rng(e)))}catch(f){r(f)}},each(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(e){exports[e]=function(){error("sorry,",e,"is not implemented yet")}});


},{"./md5":55,"./rng":56,"./sha":57,"./sha256":58,"buffer":49}],55:[function(require,module,exports){
  function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(d,_){d[_>>5]|=128<<_%32,d[(_+64>>>9<<4)+14]=_;for(var m=1732584193,f=-271733879,i=-1732584194,h=271733878,r=0;r<d.length;r+=16){var n=m,e=f,g=i,t=h;m=md5_ff(m,f,i,h,d[r+0],7,-680876936),h=md5_ff(h,m,f,i,d[r+1],12,-389564586),i=md5_ff(i,h,m,f,d[r+2],17,606105819),f=md5_ff(f,i,h,m,d[r+3],22,-1044525330),m=md5_ff(m,f,i,h,d[r+4],7,-176418897),h=md5_ff(h,m,f,i,d[r+5],12,1200080426),i=md5_ff(i,h,m,f,d[r+6],17,-1473231341),f=md5_ff(f,i,h,m,d[r+7],22,-45705983),m=md5_ff(m,f,i,h,d[r+8],7,1770035416),h=md5_ff(h,m,f,i,d[r+9],12,-1958414417),i=md5_ff(i,h,m,f,d[r+10],17,-42063),f=md5_ff(f,i,h,m,d[r+11],22,-1990404162),m=md5_ff(m,f,i,h,d[r+12],7,1804603682),h=md5_ff(h,m,f,i,d[r+13],12,-40341101),i=md5_ff(i,h,m,f,d[r+14],17,-1502002290),f=md5_ff(f,i,h,m,d[r+15],22,1236535329),m=md5_gg(m,f,i,h,d[r+1],5,-165796510),h=md5_gg(h,m,f,i,d[r+6],9,-1069501632),i=md5_gg(i,h,m,f,d[r+11],14,643717713),f=md5_gg(f,i,h,m,d[r+0],20,-373897302),m=md5_gg(m,f,i,h,d[r+5],5,-701558691),h=md5_gg(h,m,f,i,d[r+10],9,38016083),i=md5_gg(i,h,m,f,d[r+15],14,-660478335),f=md5_gg(f,i,h,m,d[r+4],20,-405537848),m=md5_gg(m,f,i,h,d[r+9],5,568446438),h=md5_gg(h,m,f,i,d[r+14],9,-1019803690),i=md5_gg(i,h,m,f,d[r+3],14,-187363961),f=md5_gg(f,i,h,m,d[r+8],20,1163531501),m=md5_gg(m,f,i,h,d[r+13],5,-1444681467),h=md5_gg(h,m,f,i,d[r+2],9,-51403784),i=md5_gg(i,h,m,f,d[r+7],14,1735328473),f=md5_gg(f,i,h,m,d[r+12],20,-1926607734),m=md5_hh(m,f,i,h,d[r+5],4,-378558),h=md5_hh(h,m,f,i,d[r+8],11,-2022574463),i=md5_hh(i,h,m,f,d[r+11],16,1839030562),f=md5_hh(f,i,h,m,d[r+14],23,-35309556),m=md5_hh(m,f,i,h,d[r+1],4,-1530992060),h=md5_hh(h,m,f,i,d[r+4],11,1272893353),i=md5_hh(i,h,m,f,d[r+7],16,-155497632),f=md5_hh(f,i,h,m,d[r+10],23,-1094730640),m=md5_hh(m,f,i,h,d[r+13],4,681279174),h=md5_hh(h,m,f,i,d[r+0],11,-358537222),i=md5_hh(i,h,m,f,d[r+3],16,-722521979),f=md5_hh(f,i,h,m,d[r+6],23,76029189),m=md5_hh(m,f,i,h,d[r+9],4,-640364487),h=md5_hh(h,m,f,i,d[r+12],11,-421815835),i=md5_hh(i,h,m,f,d[r+15],16,530742520),f=md5_hh(f,i,h,m,d[r+2],23,-995338651),m=md5_ii(m,f,i,h,d[r+0],6,-198630844),h=md5_ii(h,m,f,i,d[r+7],10,1126891415),i=md5_ii(i,h,m,f,d[r+14],15,-1416354905),f=md5_ii(f,i,h,m,d[r+5],21,-57434055),m=md5_ii(m,f,i,h,d[r+12],6,1700485571),h=md5_ii(h,m,f,i,d[r+3],10,-1894986606),i=md5_ii(i,h,m,f,d[r+10],15,-1051523),f=md5_ii(f,i,h,m,d[r+1],21,-2054922799),m=md5_ii(m,f,i,h,d[r+8],6,1873313359),h=md5_ii(h,m,f,i,d[r+15],10,-30611744),i=md5_ii(i,h,m,f,d[r+6],15,-1560198380),f=md5_ii(f,i,h,m,d[r+13],21,1309151649),m=md5_ii(m,f,i,h,d[r+4],6,-145523070),h=md5_ii(h,m,f,i,d[r+11],10,-1120210379),i=md5_ii(i,h,m,f,d[r+2],15,718787259),f=md5_ii(f,i,h,m,d[r+9],21,-343485551),m=safe_add(m,n),f=safe_add(f,e),i=safe_add(i,g),h=safe_add(h,t)}return Array(m,f,i,h)}function md5_cmn(d,_,m,f,i,h){return safe_add(bit_rol(safe_add(safe_add(_,d),safe_add(f,h)),i),m)}function md5_ff(d,_,m,f,i,h,r){return md5_cmn(_&m|~_&f,d,_,i,h,r)}function md5_gg(d,_,m,f,i,h,r){return md5_cmn(_&f|m&~f,d,_,i,h,r)}function md5_hh(d,_,m,f,i,h,r){return md5_cmn(_^m^f,d,_,i,h,r)}function md5_ii(d,_,m,f,i,h,r){return md5_cmn(m^(_|~f),d,_,i,h,r)}function safe_add(d,_){var m=(65535&d)+(65535&_),f=(d>>16)+(_>>16)+(m>>16);return f<<16|65535&m}function bit_rol(d,_){return d<<_|d>>>32-_}var helpers=require("./helpers");module.exports=function(d){return helpers.hash(d,core_md5,16)};


},{"./helpers":53}],56:[function(require,module,exports){
  !function(){var r,n,t=this;r=function(r){for(var n,n,t=new Array(r),o=0;r>o;o++)0==(3&o)&&(n=4294967296*Math.random()),t[o]=n>>>((3&o)<<3)&255;return t},t.crypto&&crypto.getRandomValues&&(n=function(r){var n=new Uint8Array(r);return crypto.getRandomValues(n),n}),module.exports=n||r}();


},{}],57:[function(require,module,exports){
  function core_sha1(r,a){r[a>>5]|=128<<24-a%32,r[(a+64>>9<<4)+15]=a;for(var e=Array(80),d=1732584193,s=-271733879,f=-1732584194,n=271733878,t=-1009589776,o=0;o<r.length;o+=16){for(var _=d,u=s,h=f,l=n,c=t,i=0;80>i;i++){16>i?e[i]=r[o+i]:e[i]=rol(e[i-3]^e[i-8]^e[i-14]^e[i-16],1);var v=safe_add(safe_add(rol(d,5),sha1_ft(i,s,f,n)),safe_add(safe_add(t,e[i]),sha1_kt(i)));t=n,n=f,f=rol(s,30),s=d,d=v}d=safe_add(d,_),s=safe_add(s,u),f=safe_add(f,h),n=safe_add(n,l),t=safe_add(t,c)}return Array(d,s,f,n,t)}function sha1_ft(r,a,e,d){return 20>r?a&e|~a&d:40>r?a^e^d:60>r?a&e|a&d|e&d:a^e^d}function sha1_kt(r){return 20>r?1518500249:40>r?1859775393:60>r?-1894007588:-899497514}function safe_add(r,a){var e=(65535&r)+(65535&a),d=(r>>16)+(a>>16)+(e>>16);return d<<16|65535&e}function rol(r,a){return r<<a|r>>>32-a}var helpers=require("./helpers");module.exports=function(r){return helpers.hash(r,core_sha1,20,!0)};


},{"./helpers":53}],58:[function(require,module,exports){
  var helpers=require("./helpers"),safe_add=function(a,e){var r=(65535&a)+(65535&e),d=(a>>16)+(e>>16)+(r>>16);return d<<16|65535&r},S=function(a,e){return a>>>e|a<<32-e},R=function(a,e){return a>>>e},Ch=function(a,e,r){return a&e^~a&r},Maj=function(a,e,r){return a&e^a&r^e&r},Sigma0256=function(a){return S(a,2)^S(a,13)^S(a,22)},Sigma1256=function(a){return S(a,6)^S(a,11)^S(a,25)},Gamma0256=function(a){return S(a,7)^S(a,18)^R(a,3)},Gamma1256=function(a){return S(a,17)^S(a,19)^R(a,10)},core_sha256=function(a,e){var r,d,n,f,s,t,u,_,o,i,S,c,m=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),h=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),g=new Array(64);a[e>>5]|=128<<24-e%32,a[(e+64>>9<<4)+15]=e;for(var o=0;o<a.length;o+=16){r=h[0],d=h[1],n=h[2],f=h[3],s=h[4],t=h[5],u=h[6],_=h[7];for(var i=0;64>i;i++)16>i?g[i]=a[i+o]:g[i]=safe_add(safe_add(safe_add(Gamma1256(g[i-2]),g[i-7]),Gamma0256(g[i-15])),g[i-16]),S=safe_add(safe_add(safe_add(safe_add(_,Sigma1256(s)),Ch(s,t,u)),m[i]),g[i]),c=safe_add(Sigma0256(r),Maj(r,d,n)),_=u,u=t,t=s,s=safe_add(f,S),f=n,n=d,d=r,r=safe_add(S,c);h[0]=safe_add(r,h[0]),h[1]=safe_add(d,h[1]),h[2]=safe_add(n,h[2]),h[3]=safe_add(f,h[3]),h[4]=safe_add(s,h[4]),h[5]=safe_add(t,h[5]),h[6]=safe_add(u,h[6]),h[7]=safe_add(_,h[7])}return h};module.exports=function(a){return helpers.hash(a,core_sha256,32,!0)};


},{"./helpers":53}],59:[function(require,module,exports){
  function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,"function"==typeof console.trace)}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};


},{}],60:[function(require,module,exports){
  var http=module.exports,EventEmitter=require("events").EventEmitter,Request=require("./lib/request"),url=require("url");http.request=function(e,t){"string"==typeof e&&(e=url.parse(e)),e||(e={}),e.host||e.port||(e.port=parseInt(window.location.port,10)),!e.host&&e.hostname&&(e.host=e.hostname),e.scheme||(e.scheme=window.location.protocol.split(":")[0]),e.host||(e.host=window.location.hostname||window.location.host),/:/.test(e.host)&&(e.port||(e.port=e.host.split(":")[1]),e.host=e.host.split(":")[0]),e.port||(e.port="https"==e.scheme?443:80);var o=new Request(new xhrHttp,e);return t&&o.on("response",t),o},http.get=function(e,t){e.method="GET";var o=http.request(e,t);return o.end(),o},http.Agent=function(){},http.Agent.defaultMaxSockets=4;var xhrHttp=function(){if("undefined"==typeof window)throw new Error("no window object present");if(window.XMLHttpRequest)return window.XMLHttpRequest;if(window.ActiveXObject){for(var e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"],t=0;t<e.length;t++)try{var o=new window.ActiveXObject(e[t]);return function(){if(o){var r=o;return o=null,r}return new window.ActiveXObject(e[t])}}catch(r){}throw new Error("ajax not supported in this browser")}throw new Error("ajax not supported in this browser")}();http.STATUS_CODES={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Time-out",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Large",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Time-out",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"};


},{"./lib/request":61,"events":59,"url":298}],61:[function(require,module,exports){
  var Stream=require("stream"),Response=require("./response"),Base64=require("Base64"),inherits=require("inherits"),Request=module.exports=function(e,t){var r=this;r.writable=!0,r.xhr=e,r.body=[],r.uri=(t.scheme||"http")+"://"+t.host+(t.port?":"+t.port:"")+(t.path||"/"),"undefined"==typeof t.withCredentials&&(t.withCredentials=!0);try{e.withCredentials=t.withCredentials}catch(s){}if(e.open(t.method||"GET",r.uri,!0),r._headers={},t.headers)for(var o=objectKeys(t.headers),i=0;i<o.length;i++){var n=o[i];if(r.isSafeRequestHeader(n)){var a=t.headers[n];r.setHeader(n,a)}}t.auth&&this.setHeader("Authorization","Basic "+Base64.btoa(t.auth));var h=new Response;h.on("close",function(){r.emit("close")}),h.on("ready",function(){r.emit("response",h)}),e.onreadystatechange=function(){e.__aborted||h.handle(e)}};inherits(Request,Stream),Request.prototype.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},Request.prototype.getHeader=function(e){return this._headers[e.toLowerCase()]},Request.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},Request.prototype.write=function(e){this.body.push(e)},Request.prototype.destroy=function(e){this.xhr.__aborted=!0,this.xhr.abort(),this.emit("close")},Request.prototype.end=function(e){void 0!==e&&this.body.push(e);for(var t=objectKeys(this._headers),r=0;r<t.length;r++){var s=t[r],o=this._headers[s];if(isArray(o))for(var i=0;i<o.length;i++)this.xhr.setRequestHeader(s,o[i]);else this.xhr.setRequestHeader(s,o)}if(0===this.body.length)this.xhr.send("");else if("string"==typeof this.body[0])this.xhr.send(this.body.join(""));else if(isArray(this.body[0])){for(var n=[],r=0;r<this.body.length;r++)n.push.apply(n,this.body[r]);this.xhr.send(n)}else if(/Array/.test(Object.prototype.toString.call(this.body[0]))){for(var a=0,r=0;r<this.body.length;r++)a+=this.body[r].length;for(var n=new this.body[0].constructor(a),h=0,r=0;r<this.body.length;r++)for(var d=this.body[r],i=0;i<d.length;i++)n[h++]=d[i];this.xhr.send(n)}else{for(var n="",r=0;r<this.body.length;r++)n+=this.body[r].toString();this.xhr.send(n)}},Request.unsafeHeaders=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"],Request.prototype.isSafeRequestHeader=function(e){return e?-1===indexOf(Request.unsafeHeaders,e.toLowerCase()):!1};var objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1};


},{"./response":62,"Base64":63,"inherits":65,"stream":73}],62:[function(require,module,exports){
  function parseHeaders(e){for(var t=e.getAllResponseHeaders().split(/\r?\n/),s={},r=0;r<t.length;r++){var a=t[r];if(""!==a){var i=a.match(/^([^:]+):\s*(.*)/);if(i){var o=i[1].toLowerCase(),n=i[2];void 0!==s[o]?isArray(s[o])?s[o].push(n):s[o]=[s[o],n]:s[o]=n}else s[a]=!0}}return s}var Stream=require("stream"),util=require("util"),Response=module.exports=function(e){this.offset=0,this.readable=!0};util.inherits(Response,Stream);var capable={streaming:!0,status2:!0};Response.prototype.getResponse=function(e){var t=String(e.responseType).toLowerCase();return"blob"===t?e.responseBlob||e.response:"arraybuffer"===t?e.response:e.responseText},Response.prototype.getHeader=function(e){return this.headers[e.toLowerCase()]},Response.prototype.handle=function(e){if(2===e.readyState&&capable.status2){try{this.statusCode=e.status,this.headers=parseHeaders(e)}catch(t){capable.status2=!1}capable.status2&&this.emit("ready")}else if(capable.streaming&&3===e.readyState){try{this.statusCode||(this.statusCode=e.status,this.headers=parseHeaders(e),this.emit("ready"))}catch(t){}try{this._emitData(e)}catch(t){capable.streaming=!1}}else 4===e.readyState&&(this.statusCode||(this.statusCode=e.status,this.emit("ready")),this._emitData(e),e.error?this.emit("error",this.getResponse(e)):this.emit("end"),this.emit("close"))},Response.prototype._emitData=function(e){var t=this.getResponse(e);return t.toString().match(/ArrayBuffer/)?(this.emit("data",new Uint8Array(t,this.offset)),void(this.offset=t.byteLength)):void(t.length>this.offset&&(this.emit("data",t.slice(this.offset)),this.offset=t.length))};var isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};


},{"stream":73,"util":81}],63:[function(require,module,exports){
  !function(){function t(t){this.message=t}var e="undefined"!=typeof exports?exports:this,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error,t.prototype.name="InvalidCharacterError",e.btoa||(e.btoa=function(e){for(var o,n,a=0,i=r,c="";e.charAt(0|a)||(i="=",a%1);c+=i.charAt(63&o>>8-a%1*8)){if(n=e.charCodeAt(a+=.75),n>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");o=o<<8|n}return c}),e.atob||(e.atob=function(e){if(e=e.replace(/=+$/,""),e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,n,a=0,i=0,c="";n=e.charAt(i++);~n&&(o=a%4?64*o+n:n,a++%4)?c+=String.fromCharCode(255&o>>(-2*a&6)):0)n=r.indexOf(n);return c})}();


},{}],64:[function(require,module,exports){
  var http=require("http"),https=module.exports;for(var key in http)http.hasOwnProperty(key)&&(https[key]=http[key]);https.request=function(t,e){return t||(t={}),t.scheme="https",http.request.call(this,t,e)};


},{"http":60}],65:[function(require,module,exports){
  "function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};


},{}],66:[function(require,module,exports){
  (function(r){function t(r,t){for(var e=0,n=r.length-1;n>=0;n--){var s=r[n];"."===s?r.splice(n,1):".."===s?(r.splice(n,1),e++):e&&(r.splice(n,1),e--)}if(t)for(;e--;e)r.unshift("..");return r}function e(r,t){if(r.filter)return r.filter(t);for(var e=[],n=0;n<r.length;n++)t(r[n],n,r)&&e.push(r[n]);return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(r){return n.exec(r).slice(1)};exports.resolve=function(){for(var n="",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var i=o>=0?arguments[o]:r.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(n=i+"/"+n,s="/"===i.charAt(0))}return n=t(e(n.split("/"),function(r){return!!r}),!s).join("/"),(s?"/":"")+n||"."},exports.normalize=function(r){var n=exports.isAbsolute(r),s="/"===o(r,-1);return r=t(e(r.split("/"),function(r){return!!r}),!n).join("/"),r||n||(r="."),r&&s&&(r+="/"),(n?"/":"")+r},exports.isAbsolute=function(r){return"/"===r.charAt(0)},exports.join=function(){var r=Array.prototype.slice.call(arguments,0);return exports.normalize(e(r,function(r,t){if("string"!=typeof r)throw new TypeError("Arguments to path.join must be strings");return r}).join("/"))},exports.relative=function(r,t){function e(r){for(var t=0;t<r.length&&""===r[t];t++);for(var e=r.length-1;e>=0&&""===r[e];e--);return t>e?[]:r.slice(t,e-t+1)}r=exports.resolve(r).substr(1),t=exports.resolve(t).substr(1);for(var n=e(r.split("/")),s=e(t.split("/")),o=Math.min(n.length,s.length),i=o,u=0;o>u;u++)if(n[u]!==s[u]){i=u;break}for(var l=[],u=i;u<n.length;u++)l.push("..");return l=l.concat(s.slice(i)),l.join("/")},exports.sep="/",exports.delimiter=":",exports.dirname=function(r){var t=s(r),e=t[0],n=t[1];return e||n?(n&&(n=n.substr(0,n.length-1)),e+n):"."},exports.basename=function(r,t){var e=s(r)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e},exports.extname=function(r){return s(r)[3]};var o="b"==="ab".substr(-1)?function(r,t,e){return r.substr(t,e)}:function(r,t,e){return 0>t&&(t=r.length+t),r.substr(t,e)}}).call(this,require("FWaASH"));


},{"FWaASH":67}],67:[function(require,module,exports){
  function noop(){}var process=module.exports={};process.nextTick=function(){var o="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(o)return function(o){return window.setImmediate(o)};if(e){var s=[];return window.addEventListener("message",function(o){var e=o.source;if((e===window||null===e)&&"process-tick"===o.data&&(o.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(o){s.push(o),window.postMessage("process-tick","*")}}return function(o){setTimeout(o,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(o){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(o){throw new Error("process.chdir is not supported")};


},{}],68:[function(require,module,exports){
  (function(e){!function(o){function n(e){throw RangeError(M[e])}function t(e,o){for(var n=e.length;n--;)e[n]=o(e[n]);return e}function r(e,o){return t(e.split(L),o).join(".")}function f(e){for(var o,n,t=[],r=0,f=e.length;f>r;)o=e.charCodeAt(r++),o>=55296&&56319>=o&&f>r?(n=e.charCodeAt(r++),56320==(64512&n)?t.push(((1023&o)<<10)+(1023&n)+65536):(t.push(o),r--)):t.push(o);return t}function i(e){return t(e,function(e){var o="";return e>65535&&(e-=65536,o+=T(e>>>10&1023|55296),e=56320|1023&e),o+=T(e)}).join("")}function u(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:C}function c(e,o){return e+22+75*(26>e)-((0!=o)<<5)}function d(e,o,n){var t=0;for(e=n?R(e/A):e>>1,e+=R(e/o);e>P*j>>1;t+=C)e=R(e/P);return R(t+(P+1)*e/(e+m))}function l(e){var o,t,r,f,c,l,s,p,a,h,v=[],w=e.length,g=0,y=F,m=I;for(t=e.lastIndexOf(E),0>t&&(t=0),r=0;t>r;++r)e.charCodeAt(r)>=128&&n("not-basic"),v.push(e.charCodeAt(r));for(f=t>0?t+1:0;w>f;){for(c=g,l=1,s=C;f>=w&&n("invalid-input"),p=u(e.charCodeAt(f++)),(p>=C||p>R((x-g)/l))&&n("overflow"),g+=p*l,a=m>=s?b:s>=m+j?j:s-m,!(a>p);s+=C)h=C-a,l>R(x/h)&&n("overflow"),l*=h;o=v.length+1,m=d(g-c,o,0==c),R(g/o)>x-y&&n("overflow"),y+=R(g/o),g%=o,v.splice(g++,0,y)}return i(v)}function s(e){var o,t,r,i,u,l,s,p,a,h,v,w,g,y,m,A=[];for(e=f(e),w=e.length,o=F,t=0,u=I,l=0;w>l;++l)v=e[l],128>v&&A.push(T(v));for(r=i=A.length,i&&A.push(E);w>r;){for(s=x,l=0;w>l;++l)v=e[l],v>=o&&s>v&&(s=v);for(g=r+1,s-o>R((x-t)/g)&&n("overflow"),t+=(s-o)*g,o=s,l=0;w>l;++l)if(v=e[l],o>v&&++t>x&&n("overflow"),v==o){for(p=t,a=C;h=u>=a?b:a>=u+j?j:a-u,!(h>p);a+=C)m=p-h,y=C-h,A.push(T(c(h+m%y,0))),p=R(m/y);A.push(T(c(p,0))),u=d(t,g,r==i),t=0,++r}++t,++o}return A.join("")}function p(e){return r(e,function(e){return O.test(e)?l(e.slice(4).toLowerCase()):e})}function a(e){return r(e,function(e){return S.test(e)?"xn--"+s(e):e})}var h="object"==typeof exports&&exports,v="object"==typeof module&&module&&module.exports==h&&module,w="object"==typeof e&&e;(w.global===w||w.window===w)&&(o=w);var g,y,x=2147483647,C=36,b=1,j=26,m=38,A=700,I=72,F=128,E="-",O=/^xn--/,S=/[^ -~]/,L=/\x2E|\u3002|\uFF0E|\uFF61/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=C-b,R=Math.floor,T=String.fromCharCode;if(g={version:"1.2.4",ucs2:{decode:f,encode:i},decode:l,encode:s,toASCII:a,toUnicode:p},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return g});else if(h&&!h.nodeType)if(v)v.exports=g;else for(y in g)g.hasOwnProperty(y)&&(h[y]=g[y]);else o.punycode=g}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{}],69:[function(require,module,exports){
  "use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;p>y;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};


},{}],70:[function(require,module,exports){
  "use strict";function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?r[n].map(function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};


},{}],71:[function(require,module,exports){
  "use strict";exports.decode=exports.parse=require("./decode"),exports.encode=exports.stringify=require("./encode");


},{"./decode":69,"./encode":70}],72:[function(require,module,exports){
  function Duplex(e){return this instanceof Duplex?(Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(e)}function onend(){if(!this.allowHalfOpen&&!this._writableState.ended){var e=this;setImmediate(function(){e.end()})}}module.exports=Duplex;var inherits=require("inherits"),setImmediate=require("process/browser.js").nextTick,Readable=require("./readable.js"),Writable=require("./writable.js");inherits(Duplex,Readable),Duplex.prototype.write=Writable.prototype.write,Duplex.prototype.end=Writable.prototype.end,Duplex.prototype._write=Writable.prototype._write;


},{"./readable.js":76,"./writable.js":78,"inherits":65,"process/browser.js":74}],73:[function(require,module,exports){
  function Stream(){EE.call(this)}module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");inherits(Stream,EE),Stream.Readable=require("./readable.js"),Stream.Writable=require("./writable.js"),Stream.Duplex=require("./duplex.js"),Stream.Transform=require("./transform.js"),Stream.PassThrough=require("./passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,r){function t(r){e.writable&&!1===e.write(r)&&m.pause&&m.pause()}function n(){m.readable&&m.resume&&m.resume()}function o(){u||(u=!0,e.end())}function i(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(a(),0===EE.listenerCount(this,"error"))throw e}function a(){m.removeListener("data",t),e.removeListener("drain",n),m.removeListener("end",o),m.removeListener("close",i),m.removeListener("error",s),e.removeListener("error",s),m.removeListener("end",a),m.removeListener("close",a),e.removeListener("close",a)}var m=this;m.on("data",t),e.on("drain",n),e._isStdio||r&&r.end===!1||(m.on("end",o),m.on("close",i));var u=!1;return m.on("error",s),e.on("error",s),m.on("end",a),m.on("close",a),e.on("close",a),e.emit("pipe",m),e};


},{"./duplex.js":72,"./passthrough.js":75,"./readable.js":76,"./transform.js":77,"./writable.js":78,"events":59,"inherits":65}],74:[function(require,module,exports){
  var process=module.exports={};process.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(n){var o=[];return window.addEventListener("message",function(e){var n=e.source;if((n===window||null===n)&&"process-tick"===e.data&&(e.stopPropagation(),o.length>0)){var r=o.shift();r()}},!0),function(e){o.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")};


},{}],75:[function(require,module,exports){
  function PassThrough(r){return this instanceof PassThrough?void Transform.call(this,r):new PassThrough(r)}module.exports=PassThrough;var Transform=require("./transform.js"),inherits=require("inherits");inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,o){o(null,r)};


},{"./transform.js":77,"inherits":65}],76:[function(require,module,exports){
  (function(e){function t(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(_||(_=require("string_decoder").StringDecoder),this.decoder=new _(e.encoding),this.encoding=e.encoding)}function n(e){return this instanceof n?(this._readableState=new t(e,this),this.readable=!0,void S.call(this)):new n(e)}function r(e,t,n,r,a){var o=d(t,n);if(o)e.emit("error",o);else if(null===n||void 0===n)t.reading=!1,t.ended||s(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!a){var u=new Error("stream.push() after EOF");e.emit("error",u)}else if(t.endEmitted&&a){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else!t.decoder||a||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,a?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&l(e),h(e,t);else a||(t.reading=!1);return i(t)}function i(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=L)e=L;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function o(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||null===e?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function d(e,t){var n=null;return R.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||n||(n=new TypeError("Invalid non-string/buffer chunk")),n}function s(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?l(e):m(e)}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?E(function(){u(e)}):u(e))}function u(e){e.emit("readable")}function h(e,t){t.readingMore||(t.readingMore=!0,E(function(){f(e,t)}))}function f(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function p(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&c(e)}}function c(e){function t(e,t,i){var a=e.write(n);!1===a&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):w(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(M.listenerCount(e,"data")>0&&b(e))):void(r.ranOut=!0)}function g(){this._readableState.ranOut&&(this._readableState.ranOut=!1,c(this))}function b(e,t){var n=e._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var r=t||!1,i=!1;e.readable=!0,e.pipe=S.prototype.pipe,e.on=e.addListener=S.prototype.on,e.on("readable",function(){i=!0;for(var t;!r&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){r=!0,this.emit("pause")},e.resume=function(){r=!1,i?E(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function v(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,o=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(o)n=r.shift();else if(!e||e>=i)n=a?r.join(""):R.concat(r,i),r.length=0;else if(e<r[0].length){var d=r[0];n=d.slice(0,e),r[0]=d.slice(e)}else if(e===r[0].length)n=r.shift();else{n=a?"":new R(e);for(var s=0,l=0,u=r.length;u>l&&e>s;l++){var d=r[0],h=Math.min(e-s,d.length);a?n+=d.slice(0,h):d.copy(n,s,0,h),h<d.length?r[0]=d.slice(h):r.shift(),s+=h}}return n}function m(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,E(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function y(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}module.exports=n,n.ReadableState=t;var _,M=require("events").EventEmitter,S=require("./index.js"),R=require("buffer").Buffer,E=require("process/browser.js").nextTick,C=require("inherits");C(n,S),n.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new R(e,t),t="")),r(this,n,e,t,!1)},n.prototype.unshift=function(e){var t=this._readableState;return r(this,t,e,"",!0)},n.prototype.setEncoding=function(e){_||(_=require("string_decoder").StringDecoder),this._readableState.decoder=new _(e),this._readableState.encoding=e};var L=8388608;n.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l(this),null;if(e=o(e,t),0===e&&t.ended)return 0===t.length&&m(this),null;var r=t.needReadable;t.length-e<=t.highWaterMark&&(r=!0),(t.ended||t.reading)&&(r=!1),r&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=o(n,t));var i;return i=e>0?v(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&m(this),i},n.prototype._read=function(e){this.emit("error",new Error("not implemented"))},n.prototype.pipe=function(t,n){function r(e){e===u&&a()}function i(){t.end()}function a(){t.removeListener("close",d),t.removeListener("finish",s),t.removeListener("drain",v),t.removeListener("error",o),t.removeListener("unpipe",r),u.removeListener("end",i),u.removeListener("end",a),(!t._writableState||t._writableState.needDrain)&&v()}function o(e){l(),0===m&&0===M.listenerCount(t,"error")&&t.emit("error",e)}function d(){t.removeListener("finish",s),l()}function s(){t.removeListener("close",d),l()}function l(){u.unpipe(t)}var u=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1;var f=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,b=f?i:a;h.endEmitted?E(b):u.once("end",b),t.on("unpipe",r);var v=p(u);t.on("drain",v);var m=M.listenerCount(t,"error");return t.once("error",o),t.once("close",d),t.once("finish",s),t.emit("pipe",u),h.flowing||(this.on("readable",g),h.flowing=!0,E(function(){c(u)})),t},n.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",g),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",g),t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=y(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},n.prototype.on=function(e,t){var n=S.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||b(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&l(this,r):this.read(0))}return n},n.prototype.addListener=n.prototype.on,n.prototype.resume=function(){b(this),this.read(0),this.emit("resume")},n.prototype.pause=function(){b(this,!0),this.emit("pause")},n.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var a=r.push(i);a||(n=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return w(a,function(t){e.on(t,function(e){return r.emit.apply(r,t,e)})}),r._read=function(t){n&&(n=!1,e.resume())},r},n._fromList=v}).call(this,require("FWaASH"));


},{"./index.js":73,"FWaASH":67,"buffer":49,"events":59,"inherits":65,"process/browser.js":74,"string_decoder":79}],77:[function(require,module,exports){
  function TransformState(r,t){this.afterTransform=function(r,n){return afterTransform(t,r,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function afterTransform(r,t,n){var e=r._transformState;e.transforming=!1;var a=e.writecb;if(!a)return r.emit("error",new Error("no writecb in Transform class"));e.writechunk=null,e.writecb=null,null!==n&&void 0!==n&&r.push(n),a&&a(t);var i=r._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&r._read(i.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r);var t=(this._transformState=new TransformState(r,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(r){done(t,r)}):done(t)})}function done(r,t){if(t)return r.emit("error",t);var n=r._writableState,e=(r._readableState,r._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(e.transforming)throw new Error("calling transform done when still transforming");return r.push(null)}module.exports=Transform;var Duplex=require("./duplex.js"),inherits=require("inherits");inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,n){throw new Error("not implemented")},Transform.prototype._write=function(r,t,n){var e=this._transformState;if(e.writecb=n,e.writechunk=r,e.writeencoding=t,!e.transforming){var a=this._readableState;(e.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};


},{"./duplex.js":72,"inherits":65}],78:[function(require,module,exports){
  function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function WritableState(e,t){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.buffer=[]}function Writable(e){return this instanceof Writable||this instanceof Stream.Duplex?(this._writableState=new WritableState(e,this),this.writable=!0,void Stream.call(this)):new Writable(e)}function writeAfterEnd(e,t,r){var i=new Error("write after end");e.emit("error",i),setImmediate(function(){r(i)})}function validChunk(e,t,r,i){var n=!0;if(!Buffer.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");e.emit("error",f),setImmediate(function(){i(f)}),n=!1}return n}function decodeChunk(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new Buffer(t,r)),t}function writeOrBuffer(e,t,r,i,n){r=decodeChunk(t,r,i);var f=t.objectMode?1:r.length;t.length+=f;var o=t.length<t.highWaterMark;return t.needDrain=!o,t.writing?t.buffer.push(new WriteReq(r,i,n)):doWrite(e,t,f,r,i,n),o}function doWrite(e,t,r,i,n,f){t.writelen=r,t.writecb=f,t.writing=!0,t.sync=!0,e._write(i,n,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){r?setImmediate(function(){n(i)}):n(i),e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var f=needFinish(e,r);f||r.bufferProcessing||!r.buffer.length||clearBuffer(e,r),i?setImmediate(function(){afterWrite(e,r,f,n)}):afterWrite(e,r,f,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),i(),r&&finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],n=i.chunk,f=i.encoding,o=i.callback,a=t.objectMode?1:n.length;if(doWrite(e,t,a,n,f,o),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function needFinish(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function finishMaybe(e,t){var r=needFinish(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?setImmediate(r):e.once("finish",r)),t.ended=!0}module.exports=Writable,Writable.WritableState=WritableState;var isUint8Array="undefined"!=typeof Uint8Array?function(e){return e instanceof Uint8Array}:function(e){return e&&e.constructor&&"Uint8Array"===e.constructor.name},isArrayBuffer="undefined"!=typeof ArrayBuffer?function(e){return e instanceof ArrayBuffer}:function(e){return e&&e.constructor&&"ArrayBuffer"===e.constructor.name},inherits=require("inherits"),Stream=require("./index.js"),setImmediate=require("process/browser.js").nextTick,Buffer=require("buffer").Buffer;inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1;return"function"==typeof t&&(r=t,t=null),!Buffer.isBuffer(e)&&isUint8Array(e)&&(e=new Buffer(e)),isArrayBuffer(e)&&"undefined"!=typeof Uint8Array&&(e=new Buffer(new Uint8Array(e))),Buffer.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=function(){}),i.ended?writeAfterEnd(this,i,r):validChunk(this,i,e,r)&&(n=writeOrBuffer(this,i,e,t,r)),n},Writable.prototype._write=function(e,t,r){r(new Error("not implemented"))},Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),i.ending||i.finished||endWritable(this,i,r)};


},{"./index.js":73,"buffer":49,"inherits":65,"process/browser.js":74}],79:[function(require,module,exports){
  function assertEncoding(e){if(e&&!Buffer.isEncoding(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){var t=this.charReceived=e.length%2;return this.charLength=t?2:0,t}function base64DetectIncompleteChar(e){var t=this.charReceived=e.length%3;return this.charLength=t?3:0,t}var Buffer=require("buffer").Buffer,StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(e){for(var t="",r=0;this.charLength;){var h=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,r,h),this.charReceived+=h-r,r=h,this.charReceived<this.charLength)return"";t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var i=t.charCodeAt(t.length-1);if(!(i>=55296&&56319>=i)){if(this.charReceived=this.charLength=0,h==e.length)return t;e=e.slice(h,e.length);break}this.charLength+=this.surrogateSize,t=""}var c=this.detectIncompleteChar(e),n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-c,n),this.charReceived=c,n-=c),t+=e.toString(this.encoding,0,n);var n=t.length-1,i=t.charCodeAt(n);if(i>=55296&&56319>=i){var a=this.surrogateSize;return this.charLength+=a,this.charReceived+=a,this.charBuffer.copy(this.charBuffer,a,0,a),this.charBuffer.write(t.charAt(t.length-1),this.encoding),t.substring(0,n)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}return t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t};


},{"buffer":49}],80:[function(require,module,exports){
  module.exports=function(o){return o&&"object"==typeof o&&"function"==typeof o.copy&&"function"==typeof o.fill&&"function"==typeof o.readUInt8};


},{}],81:[function(require,module,exports){
  (function(e,t){function r(e,t){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&exports._extend(r,t),b(r.showHidden)&&(r.showHidden=!1),b(r.depth)&&(r.depth=2),b(r.colors)&&(r.colors=!1),b(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=n),u(r,e,r.depth)}function n(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function i(e,t){return e}function o(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,t,r){if(e.customInspect&&t&&j(t.inspect)&&t.inspect!==exports.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return x(n)||(n=u(e,n,r)),n}var i=s(e,t);if(i)return i;var g=Object.keys(t),y=o(g);if(e.showHidden&&(g=Object.getOwnPropertyNames(t)),z(t)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return c(t);if(0===g.length){if(j(t)){var d=t.name?": "+t.name:"";return e.stylize("[Function"+d+"]","special")}if(v(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(z(t))return c(t)}var m="",h=!1,b=["{","}"];if(f(t)&&(h=!0,b=["[","]"]),j(t)){var O=t.name?": "+t.name:"";m=" [Function"+O+"]"}if(v(t)&&(m=" "+RegExp.prototype.toString.call(t)),w(t)&&(m=" "+Date.prototype.toUTCString.call(t)),z(t)&&(m=" "+c(t)),0===g.length&&(!h||0==t.length))return b[0]+m+b[1];if(0>r)return v(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=h?l(e,t,r,y,g):g.map(function(n){return p(e,t,r,y,n,h)}),e.seen.pop(),a(S,m,b)}function s(e,t){if(b(t))return e.stylize("undefined","undefined");if(x(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,i){for(var o=[],u=0,s=t.length;s>u;++u)D(t,String(u))?o.push(p(e,t,r,n,String(u),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,r,n,i,!0))}),o}function p(e,t,r,n,i,o){var s,c,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?c=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(c=e.stylize("[Setter]","special")),D(n,i)||(s="["+i+"]"),c||(e.seen.indexOf(l.value)<0?(c=y(r)?u(e,l.value,null):u(e,l.value,r-1),c.indexOf("\n")>-1&&(c=o?c.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+c.split("\n").map(function(e){return"   "+e}).join("\n"))):c=e.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return c;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+c}function a(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function f(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function y(e){return null===e}function d(e){return null==e}function m(e){return"number"==typeof e}function x(e){return"string"==typeof e}function h(e){return"symbol"==typeof e}function b(e){return void 0===e}function v(e){return O(e)&&"[object RegExp]"===E(e)}function O(e){return"object"==typeof e&&null!==e}function w(e){return O(e)&&"[object Date]"===E(e)}function z(e){return O(e)&&("[object Error]"===E(e)||e instanceof Error)}function j(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function E(e){return Object.prototype.toString.call(e)}function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var N=/%[sdj%]/g;exports.format=function(e){if(!x(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,u=String(e).replace(N,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}}),s=i[n];o>n;s=i[++n])u+=y(s)||!O(s)?" "+s:" "+r(s);return u},exports.deprecate=function(r,n){function i(){if(!o){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation,o=!0}return r.apply(this,arguments)}if(b(t.process))return function(){return exports.deprecate(r,n).apply(this,arguments)};if(e.noDeprecation===!0)return r;var o=!1;return i};var A,R={};exports.debuglog=function(t){if(b(A)&&(A=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!R[t])if(new RegExp("\\b"+t+"\\b","i").test(A)){e.pid;R[t]=function(){exports.format.apply(exports,arguments)}}else R[t]=function(){};return R[t]},exports.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},exports.isArray=f,exports.isBoolean=g,exports.isNull=y,exports.isNullOrUndefined=d,exports.isNumber=m,exports.isString=x,exports.isSymbol=h,exports.isUndefined=b,exports.isRegExp=v,exports.isObject=O,exports.isDate=w,exports.isError=z,exports.isFunction=j,exports.isPrimitive=S,exports.isBuffer=require("./support/isBuffer");exports.log=function(){},exports.inherits=require("inherits"),exports._extend=function(e,t){if(!t||!O(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,require("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"./support/isBuffer":80,"FWaASH":67,"inherits":65}],82:[function(require,module,exports){
  "use strict";function EE(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function EventEmitter(){}EventEmitter.prototype._events=void 0,EventEmitter.prototype.listeners=function(t){if(!this._events||!this._events[t])return[];if(this._events[t].fn)return[this._events[t].fn];for(var e=0,n=this._events[t].length,s=new Array(n);n>e;e++)s[e]=this._events[t][e].fn;return s},EventEmitter.prototype.emit=function(t,e,n,s,r,i){if(!this._events||!this._events[t])return!1;var v,o,h=this._events[t],E=arguments.length;if("function"==typeof h.fn){switch(h.once&&this.removeListener(t,h.fn,!0),E){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,s),!0;case 5:return h.fn.call(h.context,e,n,s,r),!0;case 6:return h.fn.call(h.context,e,n,s,r,i),!0}for(o=1,v=new Array(E-1);E>o;o++)v[o-1]=arguments[o];h.fn.apply(h.context,v)}else{var f,c=h.length;for(o=0;c>o;o++)switch(h[o].once&&this.removeListener(t,h[o].fn,!0),E){case 1:h[o].fn.call(h[o].context);break;case 2:h[o].fn.call(h[o].context,e);break;case 3:h[o].fn.call(h[o].context,e,n);break;default:if(!v)for(f=1,v=new Array(E-1);E>f;f++)v[f-1]=arguments[f];h[o].fn.apply(h[o].context,v)}}return!0},EventEmitter.prototype.on=function(t,e,n){var s=new EE(e,n||this);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],s]:this._events[t].push(s):this._events[t]=s,this},EventEmitter.prototype.once=function(t,e,n){var s=new EE(e,n||this,!0);return this._events||(this._events={}),this._events[t]?this._events[t].fn?this._events[t]=[this._events[t],s]:this._events[t].push(s):this._events[t]=s,this},EventEmitter.prototype.removeListener=function(t,e,n){if(!this._events||!this._events[t])return this;var s=this._events[t],r=[];if(e&&(s.fn&&(s.fn!==e||n&&!s.once)&&r.push(s),!s.fn))for(var i=0,v=s.length;v>i;i++)(s[i].fn!==e||n&&!s[i].once)&&r.push(s[i]);return r.length?this._events[t]=1===r.length?r[0]:r:delete this._events[t],this},EventEmitter.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[t]:this._events={},this):this},EventEmitter.prototype.off=EventEmitter.prototype.removeListener,EventEmitter.prototype.addListener=EventEmitter.prototype.on,EventEmitter.prototype.setMaxListeners=function(){return this},EventEmitter.EventEmitter=EventEmitter,EventEmitter.EventEmitter2=EventEmitter,EventEmitter.EventEmitter3=EventEmitter,module.exports=EventEmitter;


},{}],83:[function(require,module,exports){
  module.exports=require("./lib/");


},{"./lib/":84}],84:[function(require,module,exports){
  function lookup(e,r){"object"==typeof e&&(r=e,e=void 0),r=r||{};var o,c=url(e),a=c.source,t=c.id;return r.forceNew||r["force new connection"]||!1===r.multiplex?(debug("ignoring socket cache for %s",a),o=Manager(a,r)):(cache[t]||(debug("new io instance for %s",a),cache[t]=Manager(a,r)),o=cache[t]),o.socket(c.path)}var url=require("./url"),parser=require("socket.io-parser"),Manager=require("./manager"),debug=require("debug")("socket.io-client");module.exports=exports=lookup;var cache=exports.managers={};exports.protocol=parser.protocol,exports.connect=lookup,exports.Manager=require("./manager"),exports.Socket=require("./socket");


},{"./manager":85,"./socket":87,"./url":88,"debug":92,"socket.io-parser":126}],85:[function(require,module,exports){
  function Manager(e,t){return this instanceof Manager?(e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connected=[],this.encoding=!1,this.packetBuffer=[],this.encoder=new parser.Encoder,this.decoder=new parser.Decoder,this.autoConnect=t.autoConnect!==!1,void(this.autoConnect&&this.open())):new Manager(e,t)}var url=require("./url"),eio=require("engine.io-client"),Socket=require("./socket"),Emitter=require("component-emitter"),parser=require("socket.io-parser"),on=require("./on"),bind=require("component-bind"),object=require("object-component"),debug=require("debug")("socket.io-client:manager"),indexOf=require("indexof"),Backoff=require("backo2");module.exports=Manager,Manager.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)this.nsps[e].emit.apply(this.nsps[e],arguments)},Manager.prototype.updateSocketIds=function(){for(var e in this.nsps)this.nsps[e].id=this.engine.id},Emitter(Manager.prototype),Manager.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},Manager.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},Manager.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},Manager.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},Manager.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},Manager.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},Manager.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},Manager.prototype.open=Manager.prototype.connect=function(e){if(debug("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;debug("opening %s",this.uri),this.engine=eio(this.uri,this.opts);var t=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var o=on(t,"open",function(){n.onopen(),e&&e()}),i=on(t,"error",function(t){if(debug("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var o=new Error("Connection error");o.data=t,e(o)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var r=this._timeout;debug("connect attempt will timeout after %d",r);var c=setTimeout(function(){debug("connect attempt timed out after %d",r),o.destroy(),t.close(),t.emit("error","timeout"),n.emitAll("connect_timeout",r)},r);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(i),this},Manager.prototype.onopen=function(){debug("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(on(e,"data",bind(this,"ondata"))),this.subs.push(on(this.decoder,"decoded",bind(this,"ondecoded"))),this.subs.push(on(e,"error",bind(this,"onerror"))),this.subs.push(on(e,"close",bind(this,"onclose")))},Manager.prototype.ondata=function(e){this.decoder.add(e)},Manager.prototype.ondecoded=function(e){this.emit("packet",e)},Manager.prototype.onerror=function(e){debug("error",e),this.emitAll("error",e)},Manager.prototype.socket=function(e){var t=this.nsps[e];if(!t){t=new Socket(this,e),this.nsps[e]=t;var n=this;t.on("connect",function(){t.id=n.engine.id,~indexOf(n.connected,t)||n.connected.push(t)})}return t},Manager.prototype.destroy=function(e){var t=indexOf(this.connected,e);~t&&this.connected.splice(t,1),this.connected.length||this.close()},Manager.prototype.packet=function(e){debug("writing packet %j",e);var t=this;t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(e){for(var n=0;n<e.length;n++)t.engine.write(e[n]);t.encoding=!1,t.processPacketQueue()}))},Manager.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},Manager.prototype.cleanup=function(){for(var e;e=this.subs.shift();)e.destroy();this.packetBuffer=[],this.encoding=!1,this.decoder.destroy()},Manager.prototype.close=Manager.prototype.disconnect=function(){this.skipReconnect=!0,this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},Manager.prototype.onclose=function(e){debug("close"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},Manager.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)debug("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();debug("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout(function(){e.skipReconnect||(debug("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(debug("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(debug("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(n)}})}},Manager.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)};


},{"./on":86,"./socket":87,"./url":88,"backo2":89,"component-bind":90,"component-emitter":91,"debug":92,"engine.io-client":93,"indexof":122,"object-component":123,"socket.io-parser":126}],86:[function(require,module,exports){
  function on(n,o,e){return n.on(o,e),{destroy:function(){n.removeListener(o,e)}}}module.exports=on;


},{}],87:[function(require,module,exports){
  function Socket(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.io.autoConnect&&this.open(),this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0}var parser=require("socket.io-parser"),Emitter=require("component-emitter"),toArray=require("to-array"),on=require("./on"),bind=require("component-bind"),debug=require("debug")("socket.io-client:socket"),hasBin=require("has-binary");module.exports=exports=Socket;var events={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},emit=Emitter.prototype.emit;Emitter(Socket.prototype),Socket.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[on(t,"open",bind(this,"onopen")),on(t,"packet",bind(this,"onpacket")),on(t,"close",bind(this,"onclose"))]}},Socket.prototype.open=Socket.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this)},Socket.prototype.send=function(){var t=toArray(arguments);return t.unshift("message"),this.emit.apply(this,t),this},Socket.prototype.emit=function(t){if(events.hasOwnProperty(t))return emit.apply(this,arguments),this;var e=toArray(arguments),s=parser.EVENT;hasBin(e)&&(s=parser.BINARY_EVENT);var i={type:s,data:e};return"function"==typeof e[e.length-1]&&(debug("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),i.id=this.ids++),this.connected?this.packet(i):this.sendBuffer.push(i),this},Socket.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},Socket.prototype.onopen=function(){debug("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:parser.CONNECT})},Socket.prototype.onclose=function(t){debug("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},Socket.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case parser.CONNECT:this.onconnect();break;case parser.EVENT:this.onevent(t);break;case parser.BINARY_EVENT:this.onevent(t);break;case parser.ACK:this.onack(t);break;case parser.BINARY_ACK:this.onack(t);break;case parser.DISCONNECT:this.ondisconnect();break;case parser.ERROR:this.emit("error",t.data)}},Socket.prototype.onevent=function(t){var e=t.data||[];debug("emitting event %j",e),null!=t.id&&(debug("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?emit.apply(this,e):this.receiveBuffer.push(e)},Socket.prototype.ack=function(t){var e=this,s=!1;return function(){if(!s){s=!0;var i=toArray(arguments);debug("sending ack %j",i);var n=hasBin(i)?parser.BINARY_ACK:parser.ACK;e.packet({type:n,id:t,data:i})}}},Socket.prototype.onack=function(t){debug("calling ack %s with %j",t.id,t.data);var e=this.acks[t.id];e.apply(this,t.data),delete this.acks[t.id]},Socket.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},Socket.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)emit.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},Socket.prototype.ondisconnect=function(){debug("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},Socket.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},Socket.prototype.close=Socket.prototype.disconnect=function(){return this.connected&&(debug("performing disconnect (%s)",this.nsp),this.packet({type:parser.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this};


},{"./on":86,"component-bind":90,"component-emitter":91,"debug":92,"has-binary":120,"socket.io-parser":126,"to-array":130}],88:[function(require,module,exports){
  (function(t){function o(o,p){var s=o,p=p||t.location;return null==o&&(o=p.protocol+"//"+p.host),"string"==typeof o&&("/"==o.charAt(0)&&(o="/"==o.charAt(1)?p.protocol+o:p.hostname+o),/^(https?|wss?):\/\//.test(o)||(e("protocol-less url %s",o),o="undefined"!=typeof p?p.protocol+"//"+o:"https://"+o),e("parse %s",o),s=r(o)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/",s.id=s.protocol+"://"+s.host+":"+s.port,s.href=s.protocol+"://"+s.host+(p&&p.port==s.port?"":":"+s.port),s}var r=require("parseuri"),e=require("debug")("socket.io-client:url");module.exports=o}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"debug":92,"parseuri":124}],89:[function(require,module,exports){
  function Backoff(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}module.exports=Backoff,Backoff.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),i=Math.floor(o*this.jitter*t);t=0==(1&Math.floor(10*o))?t-i:t+i}return 0|Math.min(t,this.max)},Backoff.prototype.reset=function(){this.attempts=0},Backoff.prototype.setMin=function(t){this.ms=t},Backoff.prototype.setMax=function(t){this.max=t},Backoff.prototype.setJitter=function(t){this.jitter=t};


},{}],90:[function(require,module,exports){
  var slice=[].slice;module.exports=function(n,r){if("string"==typeof r&&(r=n[r]),"function"!=typeof r)throw new Error("bind() requires a function");var e=slice.call(arguments,2);return function(){return r.apply(n,e.concat(slice.call(arguments)))}};


},{}],91:[function(require,module,exports){
  function Emitter(t){return t?mixin(t):void 0}function mixin(t){for(var e in Emitter.prototype)t[e]=Emitter.prototype[e];return t}module.exports=Emitter,Emitter.prototype.on=Emitter.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},Emitter.prototype.once=function(t,e){function i(){r.off(t,i),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,s=0;s<i.length;s++)if(r=i[s],r===e||r.fn===e){i.splice(s,1);break}return this},Emitter.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var r=0,s=i.length;s>r;++r)i[r].apply(this,e)}return this},Emitter.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},Emitter.prototype.hasListeners=function(t){return!!this.listeners(t).length};


},{}],92:[function(require,module,exports){
  function debug(e){return debug.enabled(e)?function(n){n=coerce(n);var u=new Date,o=u-(debug[e]||u);debug[e]=u,n=e+" "+n+" +"+debug.humanize(o),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}function coerce(e){return e instanceof Error?e.stack||e.message:e}module.exports=debug,debug.names=[],debug.skips=[],debug.enable=function(e){try{localStorage.debug=e}catch(n){}for(var u=(e||"").split(/[\s,]+/),o=u.length,t=0;o>t;t++)e=u[t].replace("*",".*?"),"-"===e[0]?debug.skips.push(new RegExp("^"+e.substr(1)+"$")):debug.names.push(new RegExp("^"+e+"$"))},debug.disable=function(){debug.enable("")},debug.humanize=function(e){var n=1e3,u=6e4,o=60*u;return e>=o?(e/o).toFixed(1)+"h":e>=u?(e/u).toFixed(1)+"m":e>=n?(e/n|0)+"s":e+"ms"},debug.enabled=function(e){for(var n=0,u=debug.skips.length;u>n;n++)if(debug.skips[n].test(e))return!1;for(var n=0,u=debug.names.length;u>n;n++)if(debug.names[n].test(e))return!0;return!1};try{window.localStorage&&debug.enable(localStorage.debug)}catch(e){}


},{}],93:[function(require,module,exports){
  module.exports=require("./lib/");


},{"./lib/":94}],94:[function(require,module,exports){
  module.exports=require("./socket"),module.exports.parser=require("engine.io-parser");


},{"./socket":95,"engine.io-parser":107}],95:[function(require,module,exports){
  (function(t){function e(r,s){if(!(this instanceof e))return new e(r,s);if(s=s||{},r&&"object"==typeof r&&(s=r,r=null),r&&(r=p(r),s.host=r.host,s.secure="https"==r.protocol||"wss"==r.protocol,s.port=r.port,r.query&&(s.query=r.query)),this.secure=null!=s.secure?s.secure:t.location&&"https:"==location.protocol,s.host){var i=s.host.split(":");s.hostname=i.shift(),i.length?s.port=i.pop():s.port||(s.port=this.secure?"443":"80")}this.agent=s.agent||!1,this.hostname=s.hostname||(t.location?location.hostname:"localhost"),this.port=s.port||(t.location&&location.port?location.port:this.secure?443:80),this.query=s.query||{},"string"==typeof this.query&&(this.query=c.decode(this.query)),this.upgrade=!1!==s.upgrade,this.path=(s.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!s.forceJSONP,this.jsonp=!1!==s.jsonp,this.forceBase64=!!s.forceBase64,this.enablesXDR=!!s.enablesXDR,this.timestampParam=s.timestampParam||"t",this.timestampRequests=s.timestampRequests,this.transports=s.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.callbackBuffer=[],this.policyPort=s.policyPort||843,this.rememberUpgrade=s.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=s.onlyBinaryUpgrades,this.pfx=s.pfx||null,this.key=s.key||null,this.passphrase=s.passphrase||null,this.cert=s.cert||null,this.ca=s.ca||null,this.ciphers=s.ciphers||null,this.rejectUnauthorized=s.rejectUnauthorized||null,this.open()}function r(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var s=require("./transports"),i=require("component-emitter"),o=require("debug")("engine.io-client:socket"),n=require("indexof"),a=require("engine.io-parser"),p=require("parseuri"),h=require("parsejson"),c=require("parseqs");module.exports=e,e.priorWebsocketSuccess=!1,i(e.prototype),e.protocol=a.protocol,e.Socket=e,e.Transport=require("./transport"),e.transports=require("./transports"),e.parser=require("engine.io-parser"),e.prototype.createTransport=function(t){o('creating transport "%s"',t);var e=r(this.query);e.EIO=a.protocol,e.transport=t,this.id&&(e.sid=this.id);var i=new s[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized});return i},e.prototype.open=function(){var t;if(this.rememberUpgrade&&e.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0==this.transports.length){var r=this;return void setTimeout(function(){r.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";var t;try{t=this.createTransport(t)}catch(s){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},e.prototype.setTransport=function(t){o("setting transport %s",t.name);var e=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},e.prototype.probe=function(t){function r(){if(l.onlyBinaryUpgrades){var r=!this.supportsBinary&&l.transport.supportsBinary;u=u||r}u||(o('probe transport "%s" opened',t),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(r){if(!u)if("pong"==r.type&&"probe"==r.data){if(o('probe transport "%s" pong',t),l.upgrading=!0,l.emit("upgrading",c),!c)return;e.priorWebsocketSuccess="websocket"==c.name,o('pausing current transport "%s"',l.transport.name),l.transport.pause(function(){u||"closed"!=l.readyState&&(o("changing transport and sending upgrade packet"),h(),l.setTransport(c),c.send([{type:"upgrade"}]),l.emit("upgrade",c),c=null,l.upgrading=!1,l.flush())})}else{o('probe transport "%s" failed',t);var s=new Error("probe error");s.transport=c.name,l.emit("upgradeError",s)}}))}function s(){u||(u=!0,h(),c.close(),c=null)}function i(e){var r=new Error("probe error: "+e);r.transport=c.name,s(),o('probe transport "%s" failed because of error: %s',t,e),l.emit("upgradeError",r)}function n(){i("transport closed")}function a(){i("socket closed")}function p(t){c&&t.name!=c.name&&(o('"%s" works - aborting "%s"',t.name,c.name),s())}function h(){c.removeListener("open",r),c.removeListener("error",i),c.removeListener("close",n),l.removeListener("close",a),l.removeListener("upgrading",p)}o('probing transport "%s"',t);var c=this.createTransport(t,{probe:1}),u=!1,l=this;e.priorWebsocketSuccess=!1,c.once("open",r),c.once("error",i),c.once("close",n),this.once("close",a),this.once("upgrading",p),c.open()},e.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",e.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var t=0,r=this.upgrades.length;r>t;t++)this.probe(this.upgrades[t])}},e.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(o('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(h(t.data));break;case"pong":this.setPing();break;case"error":var e=new Error("server error");e.code=t.data,this.emit("error",e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else o('packet received with socket readyState "%s"',this.readyState)},e.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},e.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},e.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){o("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},e.prototype.ping=function(){this.sendPacket("ping")},e.prototype.onDrain=function(){for(var t=0;t<this.prevBufferLen;t++)this.callbackBuffer[t]&&this.callbackBuffer[t]();this.writeBuffer.splice(0,this.prevBufferLen),this.callbackBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0==this.writeBuffer.length?this.emit("drain"):this.flush()},e.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},e.prototype.write=e.prototype.send=function(t,e){return this.sendPacket("message",t,e),this},e.prototype.sendPacket=function(t,e,r){if("closing"!=this.readyState&&"closed"!=this.readyState){var s={type:t,data:e};this.emit("packetCreate",s),this.writeBuffer.push(s),this.callbackBuffer.push(r),this.flush()}},e.prototype.close=function(){function t(){s.onClose("forced close"),o("socket closing - telling transport to close"),s.transport.close()}function e(){s.removeListener("upgrade",e),s.removeListener("upgradeError",e),t()}function r(){s.once("upgrade",e),s.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var s=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},e.prototype.onError=function(t){o("socket error %j",t),e.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},e.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){o('socket close with reason: "%s"',t);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),setTimeout(function(){r.writeBuffer=[],r.callbackBuffer=[],r.prevBufferLen=0},0),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e)}},e.prototype.filterUpgrades=function(t){for(var e=[],r=0,s=t.length;s>r;r++)~n(this.transports,t[r])&&e.push(t[r]);return e}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"./transport":96,"./transports":97,"component-emitter":91,"debug":104,"engine.io-parser":107,"indexof":122,"parsejson":116,"parseqs":117,"parseuri":118}],96:[function(require,module,exports){
  function Transport(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized}var parser=require("engine.io-parser"),Emitter=require("component-emitter");module.exports=Transport,Emitter(Transport.prototype),Transport.timestamps=0,Transport.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},Transport.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},Transport.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},Transport.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},Transport.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},Transport.prototype.onData=function(t){var e=parser.decodePacket(t,this.socket.binaryType);this.onPacket(e)},Transport.prototype.onPacket=function(t){this.emit("packet",t)},Transport.prototype.onClose=function(){this.readyState="closed",this.emit("close")};


},{"component-emitter":91,"engine.io-parser":107}],97:[function(require,module,exports){
  (function(e){function o(o){var i,l=!1,s=!1,p=!1!==o.jsonp;if(e.location){var c="https:"==location.protocol,a=location.port;a||(a=c?443:80),l=o.hostname!=location.hostname||a!=o.port,s=o.secure!=c}if(o.xdomain=l,o.xscheme=s,i=new n(o),"open"in i&&!o.forceJSONP)return new r(o);if(!p)throw new Error("JSONP disabled");return new t(o)}var n=require("xmlhttprequest"),r=require("./polling-xhr"),t=require("./polling-jsonp"),i=require("./websocket");exports.polling=o,exports.websocket=i}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"./polling-jsonp":98,"./polling-xhr":99,"./websocket":101,"xmlhttprequest":102}],98:[function(require,module,exports){
  (function(e){function t(){}function i(i){r.call(this,i),this.query=this.query||{},n||(e.___eio||(e.___eio=[]),n=e.___eio),this.index=n.length;var o=this;n.push(function(e){o.onData(e)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener("beforeunload",function(){o.script&&(o.script.onerror=t)},!1)}var r=require("./polling"),o=require("component-inherit");module.exports=i;var n,a=/\n/g,s=/\\n/g;o(i,r),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},i.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(t,i),this.script=t;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype.doWrite=function(e,t){function i(){r(),t()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(e){o.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+o.iframeId+'">';n=document.createElement(t)}catch(e){n=document.createElement("iframe"),n.name=o.iframeId,n.src="javascript:0"}n.id=o.iframeId,o.form.appendChild(n),o.iframe=n}var o=this;if(!this.form){var n,c=document.createElement("form"),m=document.createElement("textarea"),d=this.iframeId="eio_iframe_"+this.index;c.className="socketio",c.style.position="absolute",c.style.top="-1000px",c.style.left="-1000px",c.target=d,c.method="POST",c.setAttribute("accept-charset","utf-8"),m.name="d",c.appendChild(m),document.body.appendChild(c),this.form=c,this.area=m}this.form.action=this.uri(),r(),e=e.replace(s,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(p){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==o.iframe.readyState&&i()}:this.iframe.onload=i}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"./polling":100,"component-inherit":103}],99:[function(require,module,exports){
  (function(t){function e(){}function s(e){if(o.call(this,e),t.location){var s="https:"==location.protocol,r=location.port;r||(r=s?443:80),this.xd=e.hostname!=t.location.hostname||r!=e.port,this.xs=e.secure!=s}}function r(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.create()}function i(){for(var t in r.requests)r.requests.hasOwnProperty(t)&&r.requests[t].abort()}var n=require("xmlhttprequest"),o=require("./polling"),h=require("component-emitter"),a=require("component-inherit"),p=require("debug")("engine.io-client:polling-xhr");module.exports=s,module.exports.Request=r,a(s,o),s.prototype.supportsBinary=!0,s.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,new r(t)},s.prototype.doWrite=function(t,e){var s="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:s}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},s.prototype.doPoll=function(){p("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},h(r.prototype),r.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var s=this.xhr=new n(e),i=this;try{if(p("xhr open %s: %s",this.method,this.uri),s.open(this.method,this.uri,this.async),this.supportsBinary&&(s.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?s.setRequestHeader("Content-type","application/octet-stream"):s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}"withCredentials"in s&&(s.withCredentials=!0),this.hasXDR()?(s.onload=function(){i.onLoad()},s.onerror=function(){i.onError(s.responseText)}):s.onreadystatechange=function(){4==s.readyState&&(200==s.status||1223==s.status?i.onLoad():setTimeout(function(){i.onError(s.status)},0))},p("xhr data %s",this.data),s.send(this.data)}catch(o){return void setTimeout(function(){i.onError(o)},0)}t.document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},r.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},r.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},r.prototype.cleanup=function(s){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=e:this.xhr.onreadystatechange=e,s)try{this.xhr.abort()}catch(i){}t.document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(s){}t="application/octet-stream"===e?this.xhr.response:this.supportsBinary?"ok":this.xhr.responseText}catch(s){this.onError(s)}null!=t&&this.onData(t)},r.prototype.hasXDR=function(){return"undefined"!=typeof t.XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},t.document&&(r.requestsCount=0,r.requests={},t.attachEvent?t.attachEvent("onunload",i):t.addEventListener&&t.addEventListener("beforeunload",i,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"./polling":100,"component-emitter":91,"component-inherit":103,"debug":104,"xmlhttprequest":102}],100:[function(require,module,exports){
  function Polling(t){var e=t&&t.forceBase64;(!hasXHR2||e)&&(this.supportsBinary=!1),Transport.call(this,t)}var Transport=require("../transport"),parseqs=require("parseqs"),parser=require("engine.io-parser"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:polling");module.exports=Polling;var hasXHR2=function(){var t=require("xmlhttprequest"),e=new t({xdomain:!1});return null!=e.responseType}();inherit(Polling,Transport),Polling.prototype.name="polling",Polling.prototype.doOpen=function(){this.poll()},Polling.prototype.pause=function(t){function e(){debug("paused"),i.readyState="paused",t()}var i=this;if(this.readyState="pausing",this.polling||!this.writable){var o=0;this.polling&&(debug("we are currently polling - waiting to pause"),o++,this.once("pollComplete",function(){debug("pre-pause polling complete"),--o||e()})),this.writable||(debug("we are currently writing - waiting to pause"),o++,this.once("drain",function(){debug("pre-pause writing complete"),--o||e()}))}else e()},Polling.prototype.poll=function(){debug("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},Polling.prototype.onData=function(t){var e=this;debug("polling got data %s",t);var i=function(t,i,o){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};parser.decodePayload(t,this.socket.binaryType,i),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():debug('ignoring poll - transport state "%s"',this.readyState))},Polling.prototype.doClose=function(){function t(){debug("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(debug("transport open - closing"),t()):(debug("transport not open - deferring close"),this.once("open",t))},Polling.prototype.write=function(t){var e=this;this.writable=!1;var i=function(){e.writable=!0,e.emit("drain")},e=this;parser.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,i)})},Polling.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",i="";return!1!==this.timestampRequests&&(t[this.timestampParam]=+new Date+"-"+Transport.timestamps++),this.supportsBinary||t.sid||(t.b64=1),t=parseqs.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(i=":"+this.port),t.length&&(t="?"+t),e+"://"+this.hostname+i+this.path+t};


},{"../transport":96,"component-inherit":103,"debug":104,"engine.io-parser":107,"parseqs":117,"xmlhttprequest":102}],101:[function(require,module,exports){
  function WS(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),Transport.call(this,t)}var Transport=require("../transport"),parser=require("engine.io-parser"),parseqs=require("parseqs"),inherit=require("component-inherit"),debug=require("debug")("engine.io-client:websocket"),WebSocket=require("ws");module.exports=WS,inherit(WS,Transport),WS.prototype.name="websocket",WS.prototype.supportsBinary=!0,WS.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,s={agent:this.agent};s.pfx=this.pfx,s.key=this.key,s.passphrase=this.passphrase,s.cert=this.cert,s.ca=this.ca,s.ciphers=this.ciphers,s.rejectUnauthorized=this.rejectUnauthorized,this.ws=new WebSocket(t,e,s),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.binaryType="arraybuffer",this.addEventListeners()}},WS.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(WS.prototype.onData=function(t){var e=this;setTimeout(function(){Transport.prototype.onData.call(e,t)},0)}),WS.prototype.write=function(t){function e(){s.writable=!0,s.emit("drain")}var s=this;this.writable=!1;for(var r=0,o=t.length;o>r;r++)parser.encodePacket(t[r],this.supportsBinary,function(t){try{s.ws.send(t)}catch(e){debug("websocket closed before onclose event")}});setTimeout(e,0)},WS.prototype.onClose=function(){Transport.prototype.onClose.call(this)},WS.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},WS.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",s="";return this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(s=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=+new Date),this.supportsBinary||(t.b64=1),t=parseqs.encode(t),t.length&&(t="?"+t),e+"://"+this.hostname+s+this.path+t},WS.prototype.check=function(){return!(!WebSocket||"__initialize"in WebSocket&&this.name===WS.prototype.name)};


},{"../transport":96,"component-inherit":103,"debug":104,"engine.io-parser":107,"parseqs":117,"ws":119}],102:[function(require,module,exports){
  var hasCORS=require("has-cors");module.exports=function(e){var t=e.xdomain,n=e.xscheme,r=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||hasCORS))return new XMLHttpRequest}catch(a){}try{if("undefined"!=typeof XDomainRequest&&!n&&r)return new XDomainRequest}catch(a){}if(!t)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}};


},{"has-cors":114}],103:[function(require,module,exports){
  module.exports=function(o,t){var p=function(){};p.prototype=t.prototype,o.prototype=new p,o.prototype.constructor=o};


},{}],104:[function(require,module,exports){
  function useColors(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function formatArgs(){var o=arguments,e=this.useColors;if(o[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+o[0]+(e?"%c ":" ")+"+"+exports.humanize(this.diff),!e)return o;var r="color: "+this.color;o=[o[0],r,"color: inherit"].concat(Array.prototype.slice.call(o,1));var t=0,n=0;return o[0].replace(/%[a-z%]/g,function(o){"%%"!==o&&(t++,"%c"===o&&(n=t))}),o.splice(n,0,r),o}function log(){return"object"==typeof console&&"function"==typeof console.log&&Function.prototype.apply.call(console.log,console,arguments)}function save(o){try{null==o?localStorage.removeItem("debug"):localStorage.debug=o}catch(e){}}function load(){var o;try{o=localStorage.debug}catch(e){}return o}exports=module.exports=require("./debug"),exports.log=log,exports.formatArgs=formatArgs,exports.save=save,exports.load=load,exports.useColors=useColors,exports.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],exports.formatters.j=function(o){return JSON.stringify(o)},exports.enable(load());


},{"./debug":105}],105:[function(require,module,exports){
  function selectColor(){return exports.colors[prevColor++%exports.colors.length]}function debug(e){function r(){}function o(){var e=o,r=+new Date,s=r-(prevTime||r);e.diff=s,e.prev=prevTime,e.curr=r,prevTime=r,null==e.useColors&&(e.useColors=exports.useColors()),null==e.color&&e.useColors&&(e.color=selectColor());var t=Array.prototype.slice.call(arguments);t[0]=exports.coerce(t[0]),"string"!=typeof t[0]&&(t=["%o"].concat(t));var n=0;t[0]=t[0].replace(/%([a-z%])/g,function(r,o){if("%%"===r)return r;n++;var s=exports.formatters[o];if("function"==typeof s){var p=t[n];r=s.call(e,p),t.splice(n,1),n--}return r}),"function"==typeof exports.formatArgs&&(t=exports.formatArgs.apply(e,t));var p=o.log||exports.log||void 0;p.apply(e,t)}r.enabled=!1,o.enabled=!0;var s=exports.enabled(e)?o:r;return s.namespace=e,s}function enable(e){exports.save(e);for(var r=(e||"").split(/[\s,]+/),o=r.length,s=0;o>s;s++)r[s]&&(e=r[s].replace(/\*/g,".*?"),"-"===e[0]?exports.skips.push(new RegExp("^"+e.substr(1)+"$")):exports.names.push(new RegExp("^"+e+"$")))}function disable(){exports.enable("")}function enabled(e){var r,o;for(r=0,o=exports.skips.length;o>r;r++)if(exports.skips[r].test(e))return!1;for(r=0,o=exports.names.length;o>r;r++)if(exports.names[r].test(e))return!0;return!1}function coerce(e){return e instanceof Error?e.stack||e.message:e}exports=module.exports=debug,exports.coerce=coerce,exports.disable=disable,exports.enable=enable,exports.enabled=enabled,exports.humanize=require("ms"),exports.names=[],exports.skips=[],exports.formatters={};var prevColor=0,prevTime;


},{"ms":106}],106:[function(require,module,exports){
  function parse(e){var r=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(r){var a=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"y":return a*y;case"days":case"day":case"d":return a*d;case"hours":case"hour":case"h":return a*h;case"minutes":case"minute":case"m":return a*m;case"seconds":case"second":case"s":return a*s;case"ms":return a}}}function short(e){return e>=d?Math.round(e/d)+"d":e>=h?Math.round(e/h)+"h":e>=m?Math.round(e/m)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function long(e){return plural(e,d,"day")||plural(e,h,"hour")||plural(e,m,"minute")||plural(e,s,"second")||e+" ms"}function plural(s,e,r){return e>s?void 0:1.5*e>s?Math.floor(s/e)+" "+r:Math.ceil(s/e)+" "+r+"s"}var s=1e3,m=60*s,h=60*m,d=24*h,y=365.25*d;module.exports=function(s,e){return e=e||{},"string"==typeof s?parse(s):e["long"]?long(s):short(s)};


},{}],107:[function(require,module,exports){
  (function(e){function r(e,r){var t="b"+exports.packets[e.type]+e.data.data;return r(t)}function t(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=e.data,a=new Uint8Array(n),o=new Uint8Array(1+n.byteLength);o[0]=g[e.type];for(var f=0;f<a.length;f++)o[f+1]=a[f];return t(o.buffer)}function n(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);var n=new FileReader;return n.onload=function(){e.data=n.result,exports.encodePacket(e,r,!0,t)},n.readAsArrayBuffer(e.data)}function a(e,r,t){if(!r)return exports.encodeBase64Packet(e,t);if(p)return n(e,r,t);var a=new Uint8Array(1);a[0]=g[e.type];var o=new A([a.buffer,e.data]);return t(o)}function o(e,r,t){for(var n=new Array(e.length),a=d(e.length,t),o=function(e,t,a){r(t,function(r,t){n[e]=t,a(r,n)})},f=0;f<e.length;f++)o(f,e[f],a)}var f=require("./keys"),i=require("has-binary"),u=require("arraybuffer.slice"),c=require("base64-arraybuffer"),d=require("after"),s=require("utf8"),l=navigator.userAgent.match(/Android/i),y=/PhantomJS/i.test(navigator.userAgent),p=l||y;exports.protocol=3;var g=exports.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=f(g),v={type:"error",data:"parser error"},A=require("blob");exports.encodePacket=function(n,o,f,i){"function"==typeof o&&(i=o,o=!1),"function"==typeof f&&(i=f,f=null);var u=void 0===n.data?void 0:n.data.buffer||n.data;if(e.ArrayBuffer&&u instanceof ArrayBuffer)return t(n,o,i);if(A&&u instanceof e.Blob)return a(n,o,i);if(u&&u.base64)return r(n,i);var c=g[n.type];return void 0!==n.data&&(c+=f?s.encode(String(n.data)):String(n.data)),i(""+c)},exports.encodeBase64Packet=function(r,t){var n="b"+exports.packets[r.type];if(A&&r.data instanceof A){var a=new FileReader;return a.onload=function(){var e=a.result.split(",")[1];t(n+e)},a.readAsDataURL(r.data)}var o;try{o=String.fromCharCode.apply(null,new Uint8Array(r.data))}catch(f){for(var i=new Uint8Array(r.data),u=new Array(i.length),c=0;c<i.length;c++)u[c]=i[c];o=String.fromCharCode.apply(null,u)}return n+=e.btoa(o),t(n)},exports.decodePacket=function(e,r,t){if("string"==typeof e||void 0===e){if("b"==e.charAt(0))return exports.decodeBase64Packet(e.substr(1),r);if(t)try{e=s.decode(e)}catch(n){return v}var a=e.charAt(0);return Number(a)==a&&h[a]?e.length>1?{type:h[a],data:e.substring(1)}:{type:h[a]}:v}var o=new Uint8Array(e),a=o[0],f=u(e,1);return A&&"blob"===r&&(f=new A([f])),{type:h[a],data:f}},exports.decodeBase64Packet=function(r,t){var n=h[r.charAt(0)];if(!e.ArrayBuffer)return{type:n,data:{base64:!0,data:r.substr(1)}};var a=c.decode(r.substr(1));return"blob"===t&&A&&(a=new A([a])),{type:n,data:a}},exports.encodePayload=function(e,r,t){function n(e){return e.length+":"+e}function a(e,t){exports.encodePacket(e,f?r:!1,!0,function(e){t(null,n(e))})}"function"==typeof r&&(t=r,r=null);var f=i(e);return r&&f?A&&!p?exports.encodePayloadAsBlob(e,t):exports.encodePayloadAsArrayBuffer(e,t):e.length?void o(e,a,function(e,r){return t(r.join(""))}):t("0:")},exports.decodePayload=function(e,r,t){if("string"!=typeof e)return exports.decodePayloadAsBinary(e,r,t);"function"==typeof r&&(t=r,r=null);var n;if(""==e)return t(v,0,1);for(var a,o,f="",i=0,u=e.length;u>i;i++){var c=e.charAt(i);if(":"!=c)f+=c;else{if(""==f||f!=(a=Number(f)))return t(v,0,1);if(o=e.substr(i+1,a),f!=o.length)return t(v,0,1);if(o.length){if(n=exports.decodePacket(o,r,!0),v.type==n.type&&v.data==n.data)return t(v,0,1);var d=t(n,i+a,u);if(!1===d)return}i+=a,f=""}}return""!=f?t(v,0,1):void 0},exports.encodePayloadAsArrayBuffer=function(e,r){function t(e,r){exports.encodePacket(e,!0,!0,function(e){return r(null,e)})}return e.length?void o(e,t,function(e,t){var n=t.reduce(function(e,r){var t;return t="string"==typeof r?r.length:r.byteLength,e+t.toString().length+t+2},0),a=new Uint8Array(n),o=0;return t.forEach(function(e){var r="string"==typeof e,t=e;if(r){for(var n=new Uint8Array(e.length),f=0;f<e.length;f++)n[f]=e.charCodeAt(f);t=n.buffer}r?a[o++]=0:a[o++]=1;for(var i=t.byteLength.toString(),f=0;f<i.length;f++)a[o++]=parseInt(i[f]);a[o++]=255;for(var n=new Uint8Array(t),f=0;f<n.length;f++)a[o++]=n[f]}),r(a.buffer)}):r(new ArrayBuffer(0))},exports.encodePayloadAsBlob=function(e,r){function t(e,r){exports.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);e=n.buffer,t[0]=0}for(var o=e instanceof ArrayBuffer?e.byteLength:e.size,f=o.toString(),i=new Uint8Array(f.length+1),a=0;a<f.length;a++)i[a]=parseInt(f[a]);if(i[f.length]=255,A){var u=new A([t.buffer,i.buffer,e]);r(null,u)}})}o(e,t,function(e,t){return r(new A(t))})},exports.decodePayloadAsBinary=function(e,r,t){"function"==typeof r&&(t=r,r=null);for(var n=e,a=[],o=!1;n.byteLength>0;){for(var f=new Uint8Array(n),i=0===f[0],c="",d=1;255!=f[d];d++){if(c.length>310){o=!0;break}c+=f[d]}if(o)return t(v,0,1);n=u(n,2+c.length),c=parseInt(c);var s=u(n,0,c);if(i)try{s=String.fromCharCode.apply(null,new Uint8Array(s))}catch(l){var y=new Uint8Array(s);s="";for(var d=0;d<y.length;d++)s+=String.fromCharCode(y[d])}a.push(s),n=u(n,c)}var p=a.length;a.forEach(function(e,n){t(exports.decodePacket(e,r,!0),n,p)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"./keys":108,"after":109,"arraybuffer.slice":110,"base64-arraybuffer":111,"blob":112,"has-binary":120,"utf8":113}],108:[function(require,module,exports){
  module.exports=Object.keys||function(r){var e=[],t=Object.prototype.hasOwnProperty;for(var o in r)t.call(r,o)&&e.push(o);return e};


},{}],109:[function(require,module,exports){
  function after(o,n,t){function r(o,e){if(r.count<=0)throw new Error("after called too many times");--r.count,o?(u=!0,n(o),n=t):0!==r.count||u||n(null,e)}var u=!1;return t=t||noop,r.count=o,0===o?n():r}function noop(){}module.exports=after;


},{}],110:[function(require,module,exports){
  module.exports=function(r,e,n){var t=r.byteLength;if(e=e||0,n=n||t,r.slice)return r.slice(e,n);if(0>e&&(e+=t),0>n&&(n+=t),n>t&&(n=t),e>=t||e>=n||0===t)return new ArrayBuffer(0);for(var f=new Uint8Array(r),i=new Uint8Array(n-e),u=e,a=0;n>u;u++,a++)i[a]=f[u];return i.buffer};


},{}],111:[function(require,module,exports){
  !function(n){"use strict";exports.encode=function(e){var r,t=new Uint8Array(e),i=t.length,f="";for(r=0;i>r;r+=3)f+=n[t[r]>>2],f+=n[(3&t[r])<<4|t[r+1]>>4],f+=n[(15&t[r+1])<<2|t[r+2]>>6],f+=n[63&t[r+2]];return i%3===2?f=f.substring(0,f.length-1)+"=":i%3===1&&(f=f.substring(0,f.length-2)+"=="),f},exports.decode=function(e){var r,t,i,f,g,o=.75*e.length,u=e.length,s=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var d=new ArrayBuffer(o),h=new Uint8Array(d);for(r=0;u>r;r+=4)t=n.indexOf(e[r]),i=n.indexOf(e[r+1]),f=n.indexOf(e[r+2]),g=n.indexOf(e[r+3]),h[s++]=t<<2|i>>4,h[s++]=(15&i)<<4|f>>2,h[s++]=(3&f)<<6|63&g;return d}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/");


},{}],112:[function(require,module,exports){
  (function(e){function o(e,o){o=o||{};for(var n=new t,r=0;r<e.length;r++)n.append(e[r]);return o.type?n.getBlob(o.type):n.getBlob()}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,n=function(){try{var e=new Blob(["hi"]);return 2==e.size}catch(o){return!1}}(),r=t&&t.prototype.append&&t.prototype.getBlob;module.exports=function(){return n?e.Blob:r?o:void 0}()}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{}],113:[function(require,module,exports){
  (function(r){!function(e){function n(r){for(var e,n,t=[],o=0,i=r.length;i>o;)e=r.charCodeAt(o++),e>=55296&&56319>=e&&i>o?(n=r.charCodeAt(o++),56320==(64512&n)?t.push(((1023&e)<<10)+(1023&n)+65536):(t.push(e),o--)):t.push(e);return t}function t(r){for(var e,n=r.length,t=-1,o="";++t<n;)e=r[t],e>65535&&(e-=65536,o+=y(e>>>10&1023|55296),e=56320|1023&e),o+=y(e);return o}function o(r,e){return y(r>>e&63|128)}function i(r){if(0==(4294967168&r))return y(r);var e="";return 0==(4294965248&r)?e=y(r>>6&31|192):0==(4294901760&r)?(e=y(r>>12&15|224),e+=o(r,6)):0==(4292870144&r)&&(e=y(r>>18&7|240),e+=o(r,12),e+=o(r,6)),e+=y(63&r|128)}function f(r){for(var e,t=n(r),o=t.length,f=-1,u="";++f<o;)e=t[f],u+=i(e);return u}function u(){if(s>=p)throw Error("Invalid byte index");var r=255&v[s];if(s++,128==(192&r))return 63&r;throw Error("Invalid continuation byte")}function d(){var r,e,n,t,o;if(s>p)throw Error("Invalid byte index");if(s==p)return!1;if(r=255&v[s],s++,0==(128&r))return r;if(192==(224&r)){var e=u();if(o=(31&r)<<6|e,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&r)){if(e=u(),n=u(),o=(15&r)<<12|e<<6|n,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&r)&&(e=u(),n=u(),t=u(),o=(15&r)<<18|e<<12|n<<6|t,o>=65536&&1114111>=o))return o;throw Error("Invalid UTF-8 detected")}function a(r){v=n(r),p=v.length,s=0;for(var e,o=[];(e=d())!==!1;)o.push(e);return t(o)}var c="object"==typeof exports&&exports,l="object"==typeof module&&module&&module.exports==c&&module,h="object"==typeof r&&r;(h.global===h||h.window===h)&&(e=h);var v,p,s,y=String.fromCharCode,w={version:"2.0.0",encode:f,decode:a};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return w});else if(c&&!c.nodeType)if(l)l.exports=w;else{var b={},m=b.hasOwnProperty;for(var g in w)m.call(w,g)&&(c[g]=w[g])}else e.utf8=w}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{}],114:[function(require,module,exports){
  var global=require("global");try{module.exports="XMLHttpRequest"in global&&"withCredentials"in new global.XMLHttpRequest}catch(err){module.exports=!1}


},{"global":115}],115:[function(require,module,exports){
  module.exports=function(){return this}();


},{}],116:[function(require,module,exports){
  (function(e){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,l=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,t=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,f=/\s+$/;module.exports=function(u){return"string"==typeof u&&u?(u=u.replace(s,"").replace(f,""),e.JSON&&JSON.parse?JSON.parse(u):n.test(u.replace(r,"@").replace(l,"]").replace(t,""))?new Function("return "+u)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{}],117:[function(require,module,exports){
  exports.encode=function(e){var n="";for(var o in e)e.hasOwnProperty(o)&&(n.length&&(n+="&"),n+=encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return n},exports.decode=function(e){for(var n={},o=e.split("&"),t=0,r=o.length;r>t;t++){var d=o[t].split("=");n[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return n};


},{}],118:[function(require,module,exports){
  var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(r){var e=r,t=r.indexOf("["),s=r.indexOf("]");-1!=t&&-1!=s&&(r=r.substring(0,t)+r.substring(t,s).replace(/:/g,";")+r.substring(s,r.length));for(var o=re.exec(r||""),a={},u=14;u--;)a[parts[u]]=o[u]||"";return-1!=t&&-1!=s&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a};


},{}],119:[function(require,module,exports){
  function ws(e,o,t){var b;return b=o?new WebSocket(e,o):new WebSocket(e)}var global=function(){return this}(),WebSocket=global.WebSocket||global.MozWebSocket;module.exports=WebSocket?ws:null,WebSocket&&(ws.prototype=WebSocket.prototype);


},{}],120:[function(require,module,exports){
  (function(e){function r(r){function n(r){if(!r)return!1;if(e.Buffer&&e.Buffer.isBuffer(r)||e.ArrayBuffer&&r instanceof ArrayBuffer||e.Blob&&r instanceof Blob||e.File&&r instanceof File)return!0;if(f(r)){for(var i=0;i<r.length;i++)if(n(r[i]))return!0}else if(r&&"object"==typeof r){r.toJSON&&(r=r.toJSON());for(var t in r)if(r.hasOwnProperty(t)&&n(r[t]))return!0}return!1}return n(r)}var f=require("isarray");module.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"isarray":121}],121:[function(require,module,exports){
  module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],122:[function(require,module,exports){
  var indexOf=[].indexOf;module.exports=function(e,n){if(indexOf)return e.indexOf(n);for(var r=0;r<e.length;++r)if(e[r]===n)return r;return-1};


},{}],123:[function(require,module,exports){
  var has=Object.prototype.hasOwnProperty;exports.keys=Object.keys||function(r){var t=[];for(var e in r)has.call(r,e)&&t.push(e);return t},exports.values=function(r){var t=[];for(var e in r)has.call(r,e)&&t.push(r[e]);return t},exports.merge=function(r,t){for(var e in t)has.call(t,e)&&(r[e]=t[e]);return r},exports.length=function(r){return exports.keys(r).length},exports.isEmpty=function(r){return 0==exports.length(r)};


},{}],124:[function(require,module,exports){
  var re=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];module.exports=function(r){for(var t=re.exec(r||""),e={},o=14;o--;)e[parts[o]]=t[o]||"";return e};


},{}],125:[function(require,module,exports){
  (function(e){var r=require("isarray"),t=require("./is-buffer");exports.deconstructPacket=function(e){function n(e){if(!e)return e;if(t(e)){var a={_placeholder:!0,num:f.length};return f.push(e),a}if(r(e)){for(var o=new Array(e.length),i=0;i<e.length;i++)o[i]=n(e[i]);return o}if("object"==typeof e&&!(e instanceof Date)){var o={};for(var u in e)o[u]=n(e[u]);return o}return e}var f=[],a=e.data,o=e;return o.data=n(a),o.attachments=f.length,{packet:o,buffers:f}},exports.reconstructPacket=function(e,t){function n(e){if(e&&e._placeholder){var f=t[e.num];return f}if(r(e)){for(var a=0;a<e.length;a++)e[a]=n(e[a]);return e}if(e&&"object"==typeof e){for(var o in e)e[o]=n(e[o]);return e}return e}return e.data=n(e.data),e.attachments=void 0,e},exports.removeBlobs=function(n,f){function a(n,u,c){if(!n)return n;if(e.Blob&&n instanceof Blob||e.File&&n instanceof File){o++;var l=new FileReader;l.onload=function(){c?c[u]=this.result:i=this.result,--o||f(i)},l.readAsArrayBuffer(n)}else if(r(n))for(var s=0;s<n.length;s++)a(n[s],s,n);else if(n&&"object"==typeof n&&!t(n))for(var d in n)a(n[d],d,n)}var o=0,i=n;a(i),o||f(i)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{"./is-buffer":127,"isarray":128}],126:[function(require,module,exports){
  function Encoder(){}function encodeAsString(r){var t="",e=!1;return t+=r.type,(exports.BINARY_EVENT==r.type||exports.BINARY_ACK==r.type)&&(t+=r.attachments,t+="-"),r.nsp&&"/"!=r.nsp&&(e=!0,t+=r.nsp),null!=r.id&&(e&&(t+=",",e=!1),t+=r.id),null!=r.data&&(e&&(t+=","),t+=json.stringify(r.data)),debug("encoded %j as %s",r,t),t}function encodeAsBinary(r,t){function e(r){var e=binary.deconstructPacket(r),o=encodeAsString(e.packet),n=e.buffers;n.unshift(o),t(n)}binary.removeBlobs(r,e)}function Decoder(){this.reconstructor=null}function decodeString(r){var t={},e=0;if(t.type=Number(r.charAt(0)),null==exports.types[t.type])return error();if(exports.BINARY_EVENT==t.type||exports.BINARY_ACK==t.type){for(t.attachments="";"-"!=r.charAt(++e);)t.attachments+=r.charAt(e);t.attachments=Number(t.attachments)}if("/"==r.charAt(e+1))for(t.nsp="";++e;){var o=r.charAt(e);if(","==o)break;if(t.nsp+=o,e+1==r.length)break}else t.nsp="/";var n=r.charAt(e+1);if(""!=n&&Number(n)==n){for(t.id="";++e;){var o=r.charAt(e);if(null==o||Number(o)!=o){--e;break}if(t.id+=r.charAt(e),e+1==r.length)break}t.id=Number(t.id)}if(r.charAt(++e))try{t.data=json.parse(r.substr(e))}catch(s){return error()}return debug("decoded %s as %j",r,t),t}function BinaryReconstructor(r){this.reconPack=r,this.buffers=[]}function error(r){return{type:exports.ERROR,data:"parser error"}}var debug=require("debug")("socket.io-parser"),json=require("json3"),isArray=require("isarray"),Emitter=require("component-emitter"),binary=require("./binary"),isBuf=require("./is-buffer");exports.protocol=4,exports.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],exports.CONNECT=0,exports.DISCONNECT=1,exports.EVENT=2,exports.ACK=3,exports.ERROR=4,exports.BINARY_EVENT=5,exports.BINARY_ACK=6,exports.Encoder=Encoder,exports.Decoder=Decoder,Encoder.prototype.encode=function(r,t){if(debug("encoding packet %j",r),exports.BINARY_EVENT==r.type||exports.BINARY_ACK==r.type)encodeAsBinary(r,t);else{var e=encodeAsString(r);t([e])}},Emitter(Decoder.prototype),Decoder.prototype.add=function(r){var t;if("string"==typeof r)t=decodeString(r),exports.BINARY_EVENT==t.type||exports.BINARY_ACK==t.type?(this.reconstructor=new BinaryReconstructor(t),0==this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!isBuf(r)&&!r.base64)throw new Error("Unknown type: "+r);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(r),t&&(this.reconstructor=null,this.emit("decoded",t))}},Decoder.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},BinaryReconstructor.prototype.takeBinaryData=function(r){if(this.buffers.push(r),this.buffers.length==this.reconPack.attachments){var t=binary.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},BinaryReconstructor.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]};


},{"./binary":125,"./is-buffer":127,"component-emitter":91,"debug":92,"isarray":128,"json3":129}],127:[function(require,module,exports){
  (function(f){function e(e){return f.Buffer&&f.Buffer.isBuffer(e)||f.ArrayBuffer&&e instanceof ArrayBuffer}module.exports=e}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{}],128:[function(require,module,exports){
  module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],129:[function(require,module,exports){
  !function(e){function t(e){if(t[e]!==o)return t[e];var r;if("bug-string-char-index"==e)r="a"!="a"[0];else if("json"==e)r=t("json-stringify")&&t("json-parse");else{var n,a='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var i=l.stringify,s="function"==typeof i&&f;if(s){(n=function(){return 1}).toJSON=n;try{s="0"===i(0)&&"0"===i(new Number)&&'""'==i(new String)&&i(c)===o&&i(o)===o&&i()===o&&"1"===i(n)&&"[1]"==i([n])&&"[null]"==i([o])&&"null"==i(null)&&"[null,null,null]"==i([o,c,null])&&i({a:[n,!0,!1,null,"\x00\b\n\f\r	"]})==a&&"1"===i(null,n)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new Date(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new Date(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new Date(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new Date(-1))}catch(u){s=!1}}r=s}if("json-parse"==e){var h=l.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){n=h(a);var p=5==n.a.length&&1===n.a[0];if(p){try{p=!h('"	"')}catch(u){}if(p)try{p=1!==h("01")}catch(u){}if(p)try{p=1!==h("1.")}catch(u){}}}}catch(u){p=!1}r=p}}return t[e]=!!r}var r,n,o,c={}.toString,a="function"==typeof define&&define.amd,i="object"==typeof JSON&&JSON,l="object"==typeof exports&&exports&&!exports.nodeType&&exports;l&&i?(l.stringify=i.stringify,l.parse=i.parse):l=e.JSON=i||{};var f=new Date(-0xc782b5b800cec);try{f=-109252==f.getUTCFullYear()&&0===f.getUTCMonth()&&1===f.getUTCDate()&&10==f.getUTCHours()&&37==f.getUTCMinutes()&&6==f.getUTCSeconds()&&708==f.getUTCMilliseconds()}catch(s){}if(!t("json")){var u="[object Function]",h="[object Date]",p="[object Number]",g="[object String]",y="[object Array]",d="[object Boolean]",v=t("bug-string-char-index");if(!f)var b=Math.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],j=function(e,t){return C[t]+365*(e-1970)+b((e-1969+(t=+(t>1)))/4)-b((e-1901+t)/100)+b((e-1601+t)/400)};(r={}.hasOwnProperty)||(r=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=c?r=function(e){var t=this.__proto__,r=e in(this.__proto__=null,this);return this.__proto__=t,r}:(t=n.constructor,r=function(e){var r=(this.constructor||t).prototype;return e in this&&!(e in r&&this[e]===r[e])}),n=null,r.call(this,e)});var A={"boolean":1,number:1,string:1,undefined:1},T=function(e,t){var r=typeof e[t];return"object"==r?!!e[t]:!A[r]};if(n=function(e,t){var o,a,i,l=0;(o=function(){this.valueOf=0}).prototype.valueOf=0,a=new o;for(i in a)r.call(a,i)&&l++;return o=a=null,l?n=2==l?function(e,t){var n,o={},a=c.call(e)==u;for(n in e)a&&"prototype"==n||r.call(o,n)||!(o[n]=1)||!r.call(e,n)||t(n)}:function(e,t){var n,o,a=c.call(e)==u;for(n in e)a&&"prototype"==n||!r.call(e,n)||(o="constructor"===n)||t(n);(o||r.call(e,n="constructor"))&&t(n)}:(a=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],n=function(e,t){var n,o,i=c.call(e)==u,l=!i&&"function"!=typeof e.constructor&&T(e,"hasOwnProperty")?e.hasOwnProperty:r;for(n in e)i&&"prototype"==n||!l.call(e,n)||t(n);for(o=a.length;n=a[--o];l.call(e,n)&&t(n));}),n(e,t)},!t("json-stringify")){var S={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},_="000000",w=function(e,t){return(_+(t||0)).slice(-e)},O="\\u00",U=function(e){var t,r='"',n=0,o=e.length,c=o>10&&v;for(c&&(t=e.split(""));o>n;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:r+=S[a];break;default:if(32>a){r+=O+w(2,a.toString(16));break}r+=c?t[n]:v?e.charAt(n):e[n]}}return r+'"'},x=function(e,t,a,i,l,f,s){var u,v,C,A,T,S,_,O,N,D,J,M,k,m,P,Z;try{u=t[e]}catch(E){}if("object"==typeof u&&u)if(v=c.call(u),v!=h||r.call(u,"toJSON"))"function"==typeof u.toJSON&&(v!=p&&v!=g&&v!=y||r.call(u,"toJSON"))&&(u=u.toJSON(e));else if(u>-1/0&&1/0>u){if(j){for(T=b(u/864e5),C=b(T/365.2425)+1970-1;j(C+1,0)<=T;C++);for(A=b((T-j(C,0))/30.42);j(C,A+1)<=T;A++);T=1+T-j(C,A),S=(u%864e5+864e5)%864e5,_=b(S/36e5)%24,O=b(S/6e4)%60,N=b(S/1e3)%60,D=S%1e3}else C=u.getUTCFullYear(),A=u.getUTCMonth(),T=u.getUTCDate(),_=u.getUTCHours(),O=u.getUTCMinutes(),N=u.getUTCSeconds(),D=u.getUTCMilliseconds();u=(0>=C||C>=1e4?(0>C?"-":"+")+w(6,0>C?-C:C):w(4,C))+"-"+w(2,A+1)+"-"+w(2,T)+"T"+w(2,_)+":"+w(2,O)+":"+w(2,N)+"."+w(3,D)+"Z"}else u=null;if(a&&(u=a.call(t,e,u)),null===u)return"null";if(v=c.call(u),v==d)return""+u;if(v==p)return u>-1/0&&1/0>u?""+u:"null";if(v==g)return U(""+u);if("object"==typeof u){for(m=s.length;m--;)if(s[m]===u)throw TypeError();if(s.push(u),J=[],P=f,f+=l,v==y){for(k=0,m=u.length;m>k;k++)M=x(k,u,a,i,l,f,s),J.push(M===o?"null":M);Z=J.length?l?"[\n"+f+J.join(",\n"+f)+"\n"+P+"]":"["+J.join(",")+"]":"[]"}else n(i||u,function(e){var t=x(e,u,a,i,l,f,s);t!==o&&J.push(U(e)+":"+(l?" ":"")+t)}),Z=J.length?l?"{\n"+f+J.join(",\n"+f)+"\n"+P+"}":"{"+J.join(",")+"}":"{}";return s.pop(),Z}};l.stringify=function(e,t,r){var n,o,a,i;if("function"==typeof t||"object"==typeof t&&t)if((i=c.call(t))==u)o=t;else if(i==y){a={};for(var l,f=0,s=t.length;s>f;l=t[f++],i=c.call(l),(i==g||i==p)&&(a[l]=1));}if(r)if((i=c.call(r))==p){if((r-=r%1)>0)for(n="",r>10&&(r=10);n.length<r;n+=" ");}else i==g&&(n=r.length<=10?r:r.slice(0,10));return x("",(l={},l[""]=e,l),o,a,n,"",[])}}if(!t("json-parse")){var N,D,J=String.fromCharCode,M={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},k=function(){throw N=D=null,SyntaxError()},m=function(){for(var e,t,r,n,o,c=D,a=c.length;a>N;)switch(o=c.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=v?c.charAt(N):c[N],N++,e;case 34:for(e="@",N++;a>N;)if(o=c.charCodeAt(N),32>o)k();else if(92==o)switch(o=c.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=M[o],N++;break;case 117:for(t=++N,r=N+4;r>N;N++)o=c.charCodeAt(N),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||k();e+=J("0x"+c.slice(t,N));break;default:k()}else{if(34==o)break;for(o=c.charCodeAt(N),t=N;o>=32&&92!=o&&34!=o;)o=c.charCodeAt(++N);e+=c.slice(t,N)}if(34==c.charCodeAt(N))return N++,e;k();default:if(t=N,45==o&&(n=!0,o=c.charCodeAt(++N)),o>=48&&57>=o){for(48==o&&(o=c.charCodeAt(N+1),o>=48&&57>=o)&&k(),n=!1;a>N&&(o=c.charCodeAt(N),o>=48&&57>=o);N++);if(46==c.charCodeAt(N)){for(r=++N;a>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==N&&k(),N=r}if(o=c.charCodeAt(N),101==o||69==o){for(o=c.charCodeAt(++N),(43==o||45==o)&&N++,r=N;a>r&&(o=c.charCodeAt(r),o>=48&&57>=o);r++);r==N&&k(),N=r}return+c.slice(t,N)}if(n&&k(),"true"==c.slice(N,N+4))return N+=4,!0;if("false"==c.slice(N,N+5))return N+=5,!1;if("null"==c.slice(N,N+4))return N+=4,null;k()}return"$"},P=function(e){var t,r;if("$"==e&&k(),"string"==typeof e){if("@"==(v?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=m(),"]"!=e;r||(r=!0))r&&(","==e?(e=m(),"]"==e&&k()):k()),","==e&&k(),t.push(P(e));return t}if("{"==e){for(t={};e=m(),"}"!=e;r||(r=!0))r&&(","==e?(e=m(),"}"==e&&k()):k()),(","==e||"string"!=typeof e||"@"!=(v?e.charAt(0):e[0])||":"!=m())&&k(),t[e.slice(1)]=P(m());return t}k()}return e},Z=function(e,t,r){var n=E(e,t,r);n===o?delete e[t]:e[t]=n},E=function(e,t,r){var o,a=e[t];if("object"==typeof a&&a)if(c.call(a)==y)for(o=a.length;o--;)Z(a,o,r);else n(a,function(e){Z(a,e,r)});return r.call(e,t,a)};l.parse=function(e,t){var r,n;return N=0,D=""+e,r=P(m()),"$"!=m()&&k(),N=D=null,t&&c.call(t)==u?E((n={},n[""]=r,n),"",t):r}}}a&&define(function(){return l})}(this);


},{}],130:[function(require,module,exports){
  function toArray(r,o){var t=[];o=o||0;for(var a=o||0;a<r.length;a++)t[a-o]=r[a];return t}module.exports=toArray;


},{}],131:[function(require,module,exports){
  "use strict";var XHRDownloader=require("./lib/XHRDownloader"),NodeDownloader=require("./lib/NodeDownloader"),Downloader=require("./lib/Downloader");module.exports={XHRDownloader:XHRDownloader,NodeDownloader:NodeDownloader,Downloader:Downloader};


},{"./lib/Downloader":133,"./lib/NodeDownloader":134,"./lib/XHRDownloader":135}],132:[function(require,module,exports){
  var uuid=require("uuid"),AbstractDownloader=function(o,n){if(!(this instanceof AbstractDownloader))throw new Error("XHRDownloader should be called as a constructor.");n&&n.hasOwnProperty("cancelCDNDownloadById")&&n.cancelCDNDownloadById instanceof Function?this.downloadManager=n:this.downloadManager={cancelCDNDownloadById:function(){}},this.downloading=!1,this.id=o||uuid.v4(),this.downloadRequest=null};AbstractDownloader.prototype._makeRange=function(o,n){var t=o||0;return n?"bytes="+t+"-"+n:"bytes="+t+"-"},AbstractDownloader.prototype.abort=function(){this.downloading&&this.downloadRequest&&(this.downloading=!1,this.downloadRequest.abort())},module.exports=AbstractDownloader;


},{"uuid":228}],133:[function(require,module,exports){
  "use strict";var Downloader;Downloader="undefined"!=typeof window&&window.XMLHttpRequest&&window.XMLHttpRequest instanceof Function?require("./XHRDownloader"):require("./NodeDownloader"),module.exports=Downloader;


},{"./NodeDownloader":134,"./XHRDownloader":135}],134:[function(require,module,exports){
  "use strict";var request=require("request"),AbstractDownloader=require("./AbstractDownloader"),NodeDownloader=function(e,r){AbstractDownloader.call(this,e,r)};NodeDownloader.prototype=Object.create(AbstractDownloader.prototype),NodeDownloader.prototype.constructor=NodeDownloader,NodeDownloader.prototype._toArrayBuffer=function(e){for(var r=e||[],o=new ArrayBuffer(r.length),a=new Uint8Array(o),t=0;t<r.length;++t)a[t]=r[t];return o},NodeDownloader.prototype.getURL=function(e,r){var o=this;o.downloading=!0;var a,t,n,d=r||function(){},s={url:e.url,headers:{}};switch(e.responseType&&(a=e.responseType.toLowerCase()),a){case"buffer":case"arraybuffer":s.encoding=null;break;case"text":s.encoding="utf8";break;default:s.encoding="utf8"}e.range&&(s.headers.Range=o._makeRange(e.range.start,e.range.end)),t=Date.now(),o.downloadRequest=request.get(s,function(r,s,u){if(n=Date.now(),r)return o.downloading=!1,o.downloadManager.cancelCDNDownloadById(o.id),void d(r);if(s.statusCode>=400&&s.statusCode<=599)return o.downloading=!1,o.downloadManager.cancelCDNDownloadById(o.id),void d(new Error("Server returned a "+s.statusCode+" error code."));var l;switch(a){case"buffer":case"text":l=u;break;case"arraybuffer":l=o._toArrayBuffer(u);break;default:l=u}d(null,{response:l,pptes:e.pptes,startTimestamp:t,endTimestamp:n})})},module.exports=NodeDownloader;


},{"./AbstractDownloader":132,"request":136}],135:[function(require,module,exports){
  "use strict";var AbstractDownloader=require("./AbstractDownloader"),XHRDownloader=function(t,e){AbstractDownloader.call(this,t,e)};XHRDownloader.prototype=Object.create(AbstractDownloader.prototype),XHRDownloader.prototype.constructor=XHRDownloader,XHRDownloader.prototype._generateArrayBufferView=function(t){return new Uint8Array(t)},XHRDownloader.prototype._onLoadStart=function(t){this.downloading=!0,this.startDownloadTimestamp=Date.now()},XHRDownloader.prototype._onLoaded=function(t){if(this.downloading=!1,this.endDownloadTimestamp=Date.now(),!(t.target.status>=200&&t.target.status<=299))return void this._onLoadError(t);var e;"arraybuffer"===t.target.responseType&&(e=this._generateArrayBufferView(t.target.response)),t.target._cb(null,{response:t.target.response,pptes:t.target._pptes,startTimestamp:this.startDownloadTimestamp,endTimestamp:this.endDownloadTimestamp,arrayBufferView:e})},XHRDownloader.prototype._onLoadError=function(t){var e;this.downloading=!1,this.downloadManager.cancelCDNDownloadById(this.id),e=new Error("Error when processing the request. Status: "+t.target.status),e.status=t.target.status,t.target._cb(e)},XHRDownloader.prototype.getURL=function(t,e){var o=e||function(){};this.url_infos=t,this.downloadRequest=new XMLHttpRequest,this.downloadRequest.onloadstart=this._onLoadStart.bind(this),this.downloadRequest.onerror=this._onLoadError.bind(this),this.downloadRequest.onloadend=this._onLoaded.bind(this),this.downloadRequest._pptes=t.pptes,this.downloadRequest._cb=o,this.downloadRequest.open("GET",t.url),t.range&&this.downloadRequest.setRequestHeader("Range",this._makeRange(t.range.start,t.range.end)),t.responseType&&(this.downloadRequest.responseType=t.responseType),this.downloadRequest.send()},module.exports=XHRDownloader;


},{"./AbstractDownloader":132}],136:[function(require,module,exports){
  "use strict";function initParams(e,t,r){"function"==typeof t&&(r=t);var u={};return"object"==typeof t?extend(u,t,{uri:e}):"string"==typeof e?extend(u,{uri:e}):extend(u,e),u.callback=r,u}function request(e,t,r){if("undefined"==typeof e)throw new Error("undefined is not a valid uri or options object.");var u=initParams(e,t,r);if("HEAD"===u.method&&paramsHaveRequestBody(u))throw new Error("HTTP HEAD requests MUST NOT include a request body.");return new request.Request(u)}function verbFunc(e){var t="del"===e?"DELETE":e.toUpperCase();return function(e,r,u){var n=initParams(e,r,u);return n.method=t,request(n,n.callback)}}function wrapRequestMethod(e,t,r,u){return function(n,o,s){var a=initParams(n,o,s),i={};return extend(!0,i,t,a),i.pool=a.pool||t.pool,u&&(i.method="del"===u?"DELETE":u.toUpperCase()),isFunction(r)&&(e=r),e(i,i.callback)}}var extend=require("extend"),cookies=require("./lib/cookies"),helpers=require("./lib/helpers"),isFunction=helpers.isFunction,paramsHaveRequestBody=helpers.paramsHaveRequestBody;request.get=verbFunc("get"),request.head=verbFunc("head"),request.post=verbFunc("post"),request.put=verbFunc("put"),request.patch=verbFunc("patch"),request.del=verbFunc("del"),request.jar=function(e){return cookies.jar(e)},request.cookie=function(e){return cookies.parse(e)},request.defaults=function(e,t){var r=this;"function"==typeof e&&(t=e,e={});var u=wrapRequestMethod(r,e,t),n=["get","head","post","put","patch","del"];return n.forEach(function(n){u[n]=wrapRequestMethod(r[n],e,t,n)}),u.cookie=wrapRequestMethod(r.cookie,e,t),u.jar=r.jar,u.defaults=r.defaults,u},request.forever=function(e,t){var r={};return t&&extend(r,t),e&&(r.agentOptions=e),r.forever=!0,request.defaults(r)},module.exports=request,request.Request=require("./request"),request.initParams=initParams,Object.defineProperty(request,"debug",{enumerable:!0,get:function(){return request.Request.debug},set:function(e){request.Request.debug=e}});


},{"./lib/cookies":138,"./lib/helpers":141,"./request":226,"extend":162}],137:[function(require,module,exports){
  "use strict";function Auth(e){this.request=e,this.hasAuth=!1,this.sentAuth=!1,this.bearerToken=null,this.user=null,this.pass=null}var caseless=require("caseless"),uuid=require("node-uuid"),helpers=require("./helpers"),md5=helpers.md5,toBase64=helpers.toBase64;Auth.prototype.basic=function(e,r,t){var s=this;("string"!=typeof e||void 0!==r&&"string"!=typeof r)&&s.request.emit("error",new Error("auth() received invalid user or password")),s.user=e,s.pass=r,s.hasAuth=!0;var u=e+":"+(r||"");if(t||"undefined"==typeof t){var a="Basic "+toBase64(u);return s.sentAuth=!0,a}},Auth.prototype.bearer=function(e,r){var t=this;if(t.bearerToken=e,t.hasAuth=!0,r||"undefined"==typeof r){"function"==typeof e&&(e=e());var s="Bearer "+(e||"");return t.sentAuth=!0,s}},Auth.prototype.digest=function(e,r,t){for(var s=this,u={},a=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;;){var n=a.exec(t);if(!n)break;u[n[1]]=n[2]||n[3]}var o=md5(s.user+":"+u.realm+":"+s.pass),i=md5(e+":"+r),h=/(^|,)\s*auth\s*($|,)/.test(u.qop)&&"auth",p=h&&"00000001",c=h&&uuid().replace(/-/g,""),d=md5(h?o+":"+u.nonce+":"+p+":"+c+":"+h+":"+i:o+":"+u.nonce+":"+i),l={username:s.user,realm:u.realm,nonce:u.nonce,uri:r,qop:h,response:d,nc:p,cnonce:c,algorithm:u.algorithm,opaque:u.opaque};t=[];for(var f in l)l[f]&&("qop"===f||"nc"===f||"algorithm"===f?t.push(f+"="+l[f]):t.push(f+'="'+l[f]+'"'));return t="Digest "+t.join(", "),s.sentAuth=!0,t},Auth.prototype.onRequest=function(e,r,t,s){var u,a=this,n=a.request;void 0===s&&void 0===e?a.request.emit("error",new Error("no auth mechanism defined")):u=void 0!==s?a.bearer(s,t):a.basic(e,r,t),u&&n.setHeader("authorization",u)},Auth.prototype.onResponse=function(e){var r=this,t=r.request;if(!r.hasAuth||r.sentAuth)return null;var s=caseless(e.headers),u=s.get("www-authenticate"),a=u&&u.split(" ")[0].toLowerCase();switch(t.debug("reauth",a),a){case"basic":return r.basic(r.user,r.pass,!0);case"bearer":return r.bearer(r.bearerToken,!0);case"digest":return r.digest(t.method,t.path,u)}},exports.Auth=Auth;


},{"./helpers":141,"caseless":159,"node-uuid":211}],138:[function(require,module,exports){
  "use strict";function RequestJar(e){var o=this;o._jar=new CookieJar(e)}var tough=require("tough-cookie"),Cookie=tough.Cookie,CookieJar=tough.CookieJar;exports.parse=function(e){if(e&&e.uri&&(e=e.uri),"string"!=typeof e)throw new Error("The cookie function only accepts STRING as param");return Cookie.parse(e)},RequestJar.prototype.setCookie=function(e,o,r){var t=this;return t._jar.setCookieSync(e,o,r||{})},RequestJar.prototype.getCookieString=function(e){var o=this;return o._jar.getCookieStringSync(e)},RequestJar.prototype.getCookies=function(e){var o=this;return o._jar.getCookiesSync(e)},exports.jar=function(e){return new RequestJar(e)};


},{"tough-cookie":218}],139:[function(require,module,exports){
  (function(t){"use strict";function n(t){return t.replace(/^\.*/,".").toLowerCase()}function o(t){t=t.trim().toLowerCase();var o=t.split(":",2),r=n(o[0]),e=o[1],l=t.indexOf(":")>-1;return{hostname:r,port:e,hasPort:l}}function r(t,r){var e=t.port||("https:"===t.protocol?"443":"80"),l=n(t.hostname),p=r.split(",");return p.map(o).some(function(t){var n=l.indexOf(t.hostname),o=n>-1&&n===l.length-t.hostname.length;return t.hasPort?e===t.port&&o:o})}function e(n){var o=t.env.NO_PROXY||t.env.no_proxy||"";return"*"===o?null:""!==o&&r(n,o)?null:"http:"===n.protocol?t.env.HTTP_PROXY||t.env.http_proxy||null:"https:"===n.protocol?t.env.HTTPS_PROXY||t.env.https_proxy||t.env.HTTP_PROXY||t.env.http_proxy||null:null}module.exports=e}).call(this,require("FWaASH"));


},{"FWaASH":67}],140:[function(require,module,exports){
  "use strict";function Har(e){this.request=e}var fs=require("fs"),qs=require("querystring"),validate=require("har-validator"),util=require("util");Har.prototype.reducer=function(e,a){if(void 0===e[a.name])return e[a.name]=a.value,e;var t=[e[a.name],a.value];return e[a.name]=t,e},Har.prototype.prep=function(e){if(e.queryObj={},e.headersObj={},e.postData.jsonObj=!1,e.postData.paramsObj=!1,e.queryString&&e.queryString.length&&(e.queryObj=e.queryString.reduce(this.reducer,{})),e.headers&&e.headers.length&&(e.headersObj=e.headers.reduceRight(function(e,a){return e[a.name]=a.value,e},{})),e.cookies&&e.cookies.length){var a=e.cookies.map(function(e){return e.name+"="+e.value});a.length&&(e.headersObj.cookie=a.join("; "))}switch(e.postData.mimeType){case"multipart/mixed":case"multipart/related":case"multipart/form-data":case"multipart/alternative":e.postData.mimeType="multipart/form-data";break;case"application/x-www-form-urlencoded":e.postData.params?(e.postData.paramsObj=e.postData.params.reduce(this.reducer,{}),e.postData.text=qs.stringify(e.postData.paramsObj)):e.postData.text="";break;case"text/json":case"text/x-json":case"application/json":case"application/x-json":if(e.postData.mimeType="application/json",e.postData.text)try{e.postData.jsonObj=JSON.parse(e.postData.text)}catch(t){this.request.debug(t),e.postData.mimeType="text/plain"}}return e},Har.prototype.options=function(e){if(!e.har)return e;var a=util._extend({},e.har);if(a.log&&a.log.entries&&(a=a.log.entries[0]),a.url=a.url||e.url||e.uri||e.baseUrl||"/",a.httpVersion=a.httpVersion||"HTTP/1.1",a.queryString=a.queryString||[],a.headers=a.headers||[],a.cookies=a.cookies||[],a.postData=a.postData||{},a.postData.mimeType=a.postData.mimeType||"application/octet-stream",a.bodySize=0,a.headersSize=0,a.postData.size=0,!validate.request(a))return e;var t=this.prep(a);switch(t.url&&(e.url=t.url),t.method&&(e.method=t.method),Object.keys(t.queryObj).length&&(e.qs=t.queryObj),Object.keys(t.headersObj).length&&(e.headers=t.headersObj),t.postData.mimeType){case"application/x-www-form-urlencoded":e.form=t.postData.paramsObj;break;case"application/json":t.postData.jsonObj&&(e.body=t.postData.jsonObj,e.json=!0);break;case"multipart/form-data":e.formData={},t.postData.params.forEach(function(a){var t={};return a.fileName||a.fileName||a.contentType?(a.fileName&&!a.value?t.value=fs.createReadStream(a.fileName):a.value&&(t.value=a.value),a.fileName&&(t.options={filename:a.fileName,contentType:a.contentType?a.contentType:null}),void(e.formData[a.name]=t)):void(e.formData[a.name]=a.value)});break;default:t.postData.text&&(e.body=t.postData.text)}return e},exports.Har=Har;


},{"fs":33,"har-validator":166,"querystring":71,"util":81}],141:[function(require,module,exports){
  (function(e,t){"use strict";function r(){return"undefined"==typeof setImmediate?e.nextTick:setImmediate}function n(e){return"function"==typeof e}function o(e){return e.body||e.requestBodyStream||e.json&&"boolean"!=typeof e.json||e.multipart}function i(e){var t;try{t=JSON.stringify(e)}catch(r){t=p(e)}return t}function s(e){return d.createHash("md5").update(e).digest("hex")}function u(e){return e.readable&&e.path&&e.mode}function a(e){return new t(e||"","utf8").toString("base64")}function f(e){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),t}function c(){var t=e.version.replace("v","").split(".");return{major:parseInt(t[0],10),minor:parseInt(t[1],10),patch:parseInt(t[2],10)}}var p=require("json-stringify-safe"),d=require("crypto");exports.isFunction=n,exports.paramsHaveRequestBody=o,exports.safeStringify=i,exports.md5=s,exports.isReadStream=u,exports.toBase64=a,exports.copy=f,exports.version=c,exports.defer=r()}).call(this,require("FWaASH"),require("buffer").Buffer);


},{"FWaASH":67,"buffer":49,"crypto":54,"json-stringify-safe":207}],142:[function(require,module,exports){
  (function(e){"use strict";function r(e){this.request=e,this.boundary=t(),this.chunked=!1,this.body=null}var t=require("node-uuid"),n=require("combined-stream"),u=require("isstream");r.prototype.isChunked=function(e){var r=this,t=!1,n=e.data||e;return n.forEach||r.request.emit("error",new Error("Argument error, options.multipart.")),void 0!==e.chunked&&(t=e.chunked),"chunked"===r.request.getHeader("transfer-encoding")&&(t=!0),t||n.forEach(function(e){"undefined"==typeof e.body&&r.request.emit("error",new Error("Body attribute missing in multipart.")),u(e.body)&&(t=!0)}),t},r.prototype.setHeaders=function(e){var r=this;e&&!r.request.hasHeader("transfer-encoding")&&r.request.setHeader("transfer-encoding","chunked");var t=r.request.getHeader("content-type");t&&-1!==t.indexOf("multipart")?-1!==t.indexOf("boundary")?r.boundary=t.replace(/.*boundary=([^\s;]+).*/,"$1"):r.request.setHeader("content-type",t+"; boundary="+r.boundary):r.request.setHeader("content-type","multipart/related; boundary="+r.boundary)},r.prototype.build=function(r,t){function u(r){return t?a.append(r):a.push(new e(r))}var o=this,a=t?new n:[];return o.request.preambleCRLF&&u("\r\n"),r.forEach(function(e){var r="--"+o.boundary+"\r\n";Object.keys(e).forEach(function(t){"body"!==t&&(r+=t+": "+e[t]+"\r\n")}),r+="\r\n",u(r),u(e.body),u("\r\n")}),u("--"+o.boundary+"--"),o.request.postambleCRLF&&u("\r\n"),a},r.prototype.onRequest=function(e){var r=this,t=r.isChunked(e),n=e.data||e;r.setHeaders(t),r.chunked=t,r.body=r.build(n,t)},exports.Multipart=r}).call(this,require("buffer").Buffer);


},{"buffer":49,"combined-stream":160,"isstream":206,"node-uuid":211}],143:[function(require,module,exports){
  (function(e){"use strict";function t(e){this.request=e,this.params=null}var r=require("url"),a=require("qs"),o=require("caseless"),u=require("node-uuid"),s=require("oauth-sign"),n=require("crypto");t.prototype.buildParams=function(e,t,r,a,o,n){var i={};for(var h in e)i["oauth_"+h]=e[h];i.oauth_version||(i.oauth_version="1.0"),i.oauth_timestamp||(i.oauth_timestamp=Math.floor(Date.now()/1e3).toString()),i.oauth_nonce||(i.oauth_nonce=u().replace(/-/g,"")),i.oauth_signature_method||(i.oauth_signature_method="HMAC-SHA1");var d=i.oauth_consumer_secret||i.oauth_private_key;delete i.oauth_consumer_secret,delete i.oauth_private_key;var c=i.oauth_token_secret;delete i.oauth_token_secret;var _=i.oauth_realm;delete i.oauth_realm,delete i.oauth_transport_method;var p=t.protocol+"//"+t.host+t.pathname,m=n.parse([].concat(a,o,n.stringify(i)).join("&"));return i.oauth_signature=s.sign(i.oauth_signature_method,r,p,m,d,c),_&&(i.realm=_),i},t.prototype.buildBodyHash=function(t,r){["HMAC-SHA1","RSA-SHA1"].indexOf(t.signature_method||"HMAC-SHA1")<0&&this.request.emit("error",new Error("oauth: "+t.signature_method+" signature_method not supported with body_hash signing."));var a=n.createHash("sha1");a.update(r||"");var o=a.digest("hex");return new e(o).toString("base64")},t.prototype.concatParams=function(e,t,r){r=r||"";var a=Object.keys(e).filter(function(e){return"realm"!==e&&"oauth_signature"!==e}).sort();return e.realm&&a.splice(0,0,"realm"),a.push("oauth_signature"),a.map(function(t){return t+"="+r+s.rfc3986(e[t])+r}).join(t)},t.prototype.onRequest=function(e){var t=this;t.params=e;var u,s,n=t.request.uri||{},i=t.request.method||"",h=o(t.request.headers),d=t.request.body||"",c=t.request.qsLib||a,_=h.get("content-type")||"",p="application/x-www-form-urlencoded",m=e.transport_method||"header";_.slice(0,p.length)===p&&(_=p,u=d),n.query&&(s=n.query),"body"!==m||"POST"===i&&_===p||t.request.emit("error",new Error("oauth: transport_method of body requires POST and content-type "+p)),u||"boolean"!=typeof e.body_hash||(e.body_hash=t.buildBodyHash(e,t.request.body.toString()));var l=t.buildParams(e,n,i,s,u,c);switch(m){case"header":t.request.setHeader("Authorization","OAuth "+t.concatParams(l,",",'"'));break;case"query":var q=t.request.uri.href+=(s?"&":"?")+t.concatParams(l,"&");t.request.uri=r.parse(q),t.request.path=t.request.uri.path;break;case"body":t.request.body=(u?u+"&":"")+t.concatParams(l,"&");break;default:t.request.emit("error",new Error("oauth: transport_method invalid"))}},exports.OAuth=t}).call(this,require("buffer").Buffer);


},{"buffer":49,"caseless":159,"crypto":54,"node-uuid":211,"oauth-sign":212,"qs":213,"url":298}],144:[function(require,module,exports){
  "use strict";function Querystring(i){this.request=i,this.lib=null,this.useQuerystring=null,this.parseOptions=null,this.stringifyOptions=null}var qs=require("qs"),querystring=require("querystring");Querystring.prototype.init=function(i){this.lib||(this.useQuerystring=i.useQuerystring,this.lib=this.useQuerystring?querystring:qs,this.parseOptions=i.qsParseOptions||{},this.stringifyOptions=i.qsStringifyOptions||{})},Querystring.prototype.stringify=function(i){return this.useQuerystring?this.rfc3986(this.lib.stringify(i,this.stringifyOptions.sep||null,this.stringifyOptions.eq||null,this.stringifyOptions)):this.lib.stringify(i,this.stringifyOptions)},Querystring.prototype.parse=function(i){return this.useQuerystring?this.lib.parse(i,this.parseOptions.sep||null,this.parseOptions.eq||null,this.parseOptions):this.lib.parse(i,this.parseOptions)},Querystring.prototype.rfc3986=function(i){return i.replace(/[!'()*]/g,function(i){return"%"+i.charCodeAt(0).toString(16).toUpperCase()})},Querystring.prototype.unescape=querystring.unescape,exports.Querystring=Querystring;


},{"qs":213,"querystring":71}],145:[function(require,module,exports){
  "use strict";function Redirect(e){this.request=e,this.followRedirect=!0,this.followRedirects=!0,this.followAllRedirects=!1,this.allowRedirect=function(){return!0},this.maxRedirects=10,this.redirects=[],this.redirectsFollowed=0,this.removeRefererHeader=!1}var url=require("url"),isUrl=/^https?:/;Redirect.prototype.onRequest=function(e){var r=this;void 0!==e.maxRedirects&&(r.maxRedirects=e.maxRedirects),"function"==typeof e.followRedirect&&(r.allowRedirect=e.followRedirect),void 0!==e.followRedirect&&(r.followRedirects=!!e.followRedirect),void 0!==e.followAllRedirects&&(r.followAllRedirects=e.followAllRedirects),(r.followRedirects||r.followAllRedirects)&&(r.redirects=r.redirects||[]),void 0!==e.removeRefererHeader&&(r.removeRefererHeader=e.removeRefererHeader)},Redirect.prototype.redirectTo=function(e){var r=this,t=r.request,o=null;if(e.statusCode>=300&&e.statusCode<400&&e.caseless.has("location")){var i=e.caseless.get("location");if(t.debug("redirect",i),r.followAllRedirects)o=i;else if(r.followRedirects)switch(t.method){case"PATCH":case"PUT":case"POST":case"DELETE":break;default:o=i}}else if(401===e.statusCode){var s=t._auth.onResponse(e);s&&(t.setHeader("authorization",s),o=t.uri)}return o},Redirect.prototype.onResponse=function(e){var r=this,t=r.request,o=r.redirectTo(e);if(!o||!r.allowRedirect.call(t,e))return!1;if(t.debug("redirect to",o),e.resume&&e.resume(),r.redirectsFollowed>=r.maxRedirects)return t.emit("error",new Error("Exceeded maxRedirects. Probably stuck in a redirect loop "+t.uri.href)),!1;r.redirectsFollowed+=1,isUrl.test(o)||(o=url.resolve(t.uri.href,o));var i=t.uri;return t.uri=url.parse(o),t.uri.protocol!==i.protocol&&t._updateProtocol(),r.redirects.push({statusCode:e.statusCode,redirectUri:o}),r.followAllRedirects&&"HEAD"!==t.method&&401!==e.statusCode&&307!==e.statusCode&&(t.method="GET"),delete t.src,delete t.req,delete t.agent,delete t._started,401!==e.statusCode&&307!==e.statusCode&&(delete t.body,delete t._form,t.headers&&(t.removeHeader("host"),t.removeHeader("content-type"),t.removeHeader("content-length"),t.uri.hostname!==t.originalHost.split(":")[0]&&t.removeHeader("authorization"))),r.removeRefererHeader||t.setHeader("referer",t.uri.href),t.emit("redirect"),t.init(),!0},exports.Redirect=Redirect;


},{"url":298}],146:[function(require,module,exports){
  "use strict";function constructProxyHost(e){var t=e.portA,r=e.protocol,n=e.hostname+":";return n+=t?t:"https:"===r?"443":"80"}function constructProxyHeaderWhiteList(e,t){var r=t.reduce(function(e,t){return e[t.toLowerCase()]=!0,e},{});return Object.keys(e).filter(function(e){return r[e.toLowerCase()]}).reduce(function(t,r){return t[r]=e[r],t},{})}function constructTunnelOptions(e,t){var r=e.proxy,n={proxy:{host:r.hostname,port:+r.port,proxyAuth:r.auth,headers:t},headers:e.headers,ca:e.ca,cert:e.cert,key:e.key,passphrase:e.passphrase,pfx:e.pfx,ciphers:e.ciphers,rejectUnauthorized:e.rejectUnauthorized,secureOptions:e.secureOptions,secureProtocol:e.secureProtocol};return n}function constructTunnelFnName(e,t){var r="https:"===e.protocol?"https":"http",n="https:"===t.protocol?"Https":"Http";return[r,n].join("Over")}function getTunnelFn(e){var t=e.uri,r=e.proxy,n=constructTunnelFnName(t,r);return tunnel[n]}function Tunnel(e){this.request=e,this.proxyHeaderWhiteList=defaultProxyHeaderWhiteList,this.proxyHeaderExclusiveList=[]}var url=require("url"),tunnel=require("tunnel-agent"),defaultProxyHeaderWhiteList=["accept","accept-charset","accept-encoding","accept-language","accept-ranges","cache-control","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","connection","date","expect","max-forwards","pragma","referer","te","transfer-encoding","user-agent","via"],defaultProxyHeaderExclusiveList=["proxy-authorization"];Tunnel.prototype.isEnabled=function(e){var t=this.request;return"undefined"!=typeof t.tunnel?t.tunnel:"undefined"!=typeof e.tunnel?e.tunnel:"https:"===t.uri.protocol?!0:void 0},Tunnel.prototype.setup=function(e){var t=this,r=t.request;if(e=e||{},"string"==typeof r.proxy&&(r.proxy=url.parse(r.proxy)),!r.proxy||!r.tunnel)return!1;e.proxyHeaderWhiteList&&(t.proxyHeaderWhiteList=e.proxyHeaderWhiteList),e.proxyHeaderExclusiveList&&(t.proxyHeaderExclusiveList=e.proxyHeaderExclusiveList);var n=t.proxyHeaderExclusiveList.concat(defaultProxyHeaderExclusiveList),o=t.proxyHeaderWhiteList.concat(n),u=constructProxyHeaderWhiteList(r.headers,o);u.host=constructProxyHost(r.uri),n.forEach(r.removeHeader,r);var s=getTunnelFn(r),c=constructTunnelOptions(r,u);return r.agent=s(c),!0},Tunnel.defaultProxyHeaderWhiteList=defaultProxyHeaderWhiteList,Tunnel.defaultProxyHeaderExclusiveList=defaultProxyHeaderExclusiveList,exports.Tunnel=Tunnel;


},{"tunnel-agent":225,"url":298}],147:[function(require,module,exports){
  function authorization(e){return"AWS "+e.key+":"+sign(e)}function hmacSha1(e){return crypto.createHmac("sha1",e.secret).update(e.message).digest("base64")}function sign(e){return e.message=stringToSign(e),hmacSha1(e)}function signQuery(e){return e.message=queryStringToSign(e),hmacSha1(e)}function stringToSign(e){var n=e.amazonHeaders||"";n&&(n+="\n");var r=[e.verb,e.md5,e.contentType,e.date?e.date.toUTCString():"",n+e.resource];return r.join("\n")}function queryStringToSign(e){return"GET\n\n\n"+e.date+"\n"+e.resource}function canonicalizeHeaders(e){for(var n=[],r=Object.keys(e),o=0,t=r.length;t>o;++o){var i=r[o],a=e[i],i=i.toLowerCase();0===i.indexOf("x-amz")&&n.push(i+":"+a)}return n.sort().join("\n")}function canonicalizeResource(e){var n=parse(e,!0),r=n.pathname,o=[];return Object.keys(n.query).forEach(function(e){if(~keys.indexOf(e)){var r=""==n.query[e]?"":"="+encodeURIComponent(n.query[e]);o.push(e+r)}}),r+(o.length?"?"+o.sort().join("&"):"")}var crypto=require("crypto"),parse=require("url").parse,keys=["acl","location","logging","notification","partNumber","policy","requestPayment","torrent","uploadId","uploads","versionId","versioning","versions","website"];module.exports=authorization,module.exports.authorization=authorization,module.exports.hmacSha1=hmacSha1,module.exports.sign=sign,module.exports.signQuery=signQuery,module.exports.queryStringToSign=stringToSign,module.exports.queryStringToSign=queryStringToSign,module.exports.canonicalizeHeaders=canonicalizeHeaders,module.exports.canonicalizeResource=canonicalizeResource;


},{"crypto":54,"url":298}],148:[function(require,module,exports){
  (function(t){function e(i){if(!(this instanceof e))return new e(i);if(this._bufs=[],this.length=0,"function"==typeof i){this._callback=i;var s=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",s)}),this.on("unpipe",function(t){t.removeListener("error",s)})}else t.isBuffer(i)?this.append(i):Array.isArray(i)&&i.forEach(function(e){t.isBuffer(e)&&this.append(e)}.bind(this));n.call(this)}var n=require("readable-stream/duplex"),i=require("util");i.inherits(e,n),e.prototype._offset=function(t){for(var e,n=0,i=0;i<this._bufs.length;i++){if(e=n+this._bufs[i].length,e>t)return[i,t-n];n=e}},e.prototype.append=function(n){var i=t.isBuffer(n)||n instanceof e;return this._bufs.push(i?n:new t(n)),this.length+=n.length,this},e.prototype._write=function(t,e,n){this.append(t),n&&n()},e.prototype._read=function(t){return this.length?(t=Math.min(t,this.length),this.push(this.slice(0,t)),void this.consume(t)):this.push(null)},e.prototype.end=function(t){n.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},e.prototype.get=function(t){return this.slice(t,t+1)[0]},e.prototype.slice=function(t,e){return this.copy(null,0,t,e)},e.prototype.copy=function(e,n,i,s){if(("number"!=typeof i||0>i)&&(i=0),("number"!=typeof s||s>this.length)&&(s=this.length),i>=this.length)return e||new t(0);if(0>=s)return e||new t(0);var r,h,u=!!e,o=this._offset(i),f=s-i,l=f,c=u&&n||0,a=o[1];if(0===i&&s==this.length){if(!u)return t.concat(this._bufs);for(h=0;h<this._bufs.length;h++)this._bufs[h].copy(e,c),c+=this._bufs[h].length;return e}if(l<=this._bufs[o[0]].length-a)return u?this._bufs[o[0]].copy(e,n,a,a+l):this._bufs[o[0]].slice(a,a+l);for(u||(e=new t(f)),h=o[0];h<this._bufs.length;h++){if(r=this._bufs[h].length-a,!(l>r)){this._bufs[h].copy(e,c,a,a+l);break}this._bufs[h].copy(e,c,a),c+=r,l-=r,a&&(a=0)}return e},e.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},e.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},e.prototype.duplicate=function(){for(var t=0,n=new e;t<this._bufs.length;t++)n.append(this._bufs[t]);return n},e.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var n in t)!function(n){e.prototype[n]=function(e){return this.slice(e,e+t[n])[n](0)}}(n)}(),module.exports=e}).call(this,require("buffer").Buffer);


},{"buffer":49,"readable-stream/duplex":149,"util":81}],149:[function(require,module,exports){
  module.exports=require("./lib/_stream_duplex.js");


},{"./lib/_stream_duplex.js":150}],150:[function(require,module,exports){
  "use strict";function Duplex(e){return this instanceof Duplex?(Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(e)}function onend(){this.allowHalfOpen||this._writableState.ended||processNextTick(onEndNT,this)}function onEndNT(e){e.end()}function forEach(e,t){for(var r=0,i=e.length;i>r;r++)t(e[r],r)}var objectKeys=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=Duplex;var processNextTick=require("process-nextick-args"),util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}


},{"./_stream_readable":151,"./_stream_writable":152,"core-util-is":153,"inherits":154,"process-nextick-args":156}],151:[function(require,module,exports){
  (function(e){"use strict";function t(e,t){var n=require("./_stream_duplex");e=e||{},this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(C||(C=require("string_decoder/").StringDecoder),this.decoder=new C(e.encoding),this.encoding=e.encoding)}function n(e){require("./_stream_duplex");return this instanceof n?(this._readableState=new t(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void k.call(this)):new n(e)}function r(e,t,n,r,a){var o=d(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,s(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!a){var u=new Error("stream.push() after EOF");e.emit("error",u)}else if(t.endEmitted&&a){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else!t.decoder||a||r||(n=t.decoder.write(n)),a||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,a?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e)),h(e,t);else a||(t.reading=!1);return i(t)}function i(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=D)e=D;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function o(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function d(e,t){var n=null;return E.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function s(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,l(e)}}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(q("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?S(u,e):u(e))}function u(e){q("emit readable"),e.emit("readable"),v(e)}function h(e,t){t.readingMore||(t.readingMore=!0,S(f,e,t))}function f(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(q("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function p(e){return function(){var t=e._readableState;q("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&j.listenerCount(e,"data")&&(t.flowing=!0,v(e))}}function c(e){q("readable nexttick read 0"),e.read(0)}function g(e,t){t.resumeScheduled||(t.resumeScheduled=!0,S(b,e,t))}function b(e,t){t.reading||(q("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;if(q("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function m(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,o=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(o)n=r.shift();else if(!e||e>=i)n=a?r.join(""):E.concat(r,i),r.length=0;else if(e<r[0].length){var d=r[0];n=d.slice(0,e),r[0]=d.slice(e)}else if(e===r[0].length)n=r.shift();else{n=a?"":new E(e);for(var s=0,l=0,u=r.length;u>l&&e>s;l++){var d=r[0],h=Math.min(e-s,d.length);a?n+=d.slice(0,h):d.copy(n,s,0,h),h<d.length?r[0]=d.slice(h):r.shift(),s+=h}}return n}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,S(_,t,e))}function _(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function y(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function M(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}module.exports=n;var S=require("process-nextick-args"),R=require("isarray"),E=require("buffer").Buffer;n.ReadableState=t;var j=require("events").EventEmitter;j.listenerCount||(j.listenerCount=function(e,t){return e.listeners(t).length});var k;!function(){try{k=require("stream")}catch(e){}finally{k||(k=require("events").EventEmitter)}}();var E=require("buffer").Buffer,L=require("core-util-is");L.inherits=require("inherits");var q=require("util");q=q&&q.debuglog?q.debuglog("stream"):function(){};var C;L.inherits(n,k),n.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new E(e,t),t="")),r(this,n,e,t,!1)},n.prototype.unshift=function(e){var t=this._readableState;return r(this,t,e,"",!0)},n.prototype.isPaused=function(){return this._readableState.flowing===!1},n.prototype.setEncoding=function(e){return C||(C=require("string_decoder/").StringDecoder),this._readableState.decoder=new C(e),this._readableState.encoding=e,this};var D=8388608;n.prototype.read=function(e){q("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return q("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):l(this),null;if(e=o(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var r=t.needReadable;q("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,q("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,q("reading or ended",r)),r&&(q("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=o(n,t));var i;return i=e>0?m(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&w(this),null!==i&&this.emit("data",i),i},n.prototype._read=function(e){this.emit("error",new Error("not implemented"))},n.prototype.pipe=function(t,n){function r(e){q("onunpipe"),e===h&&a()}function i(){q("onend"),t.end()}function a(){q("cleanup"),t.removeListener("close",s),t.removeListener("finish",l),t.removeListener("drain",b),t.removeListener("error",d),t.removeListener("unpipe",r),h.removeListener("end",i),h.removeListener("end",a),h.removeListener("data",o),!f.awaitDrain||t._writableState&&!t._writableState.needDrain||b()}function o(e){q("ondata");var n=t.write(e);!1===n&&(q("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,h.pause())}function d(e){q("onerror",e),u(),t.removeListener("error",d),0===j.listenerCount(t,"error")&&t.emit("error",e)}function s(){t.removeListener("finish",l),u()}function l(){q("onfinish"),t.removeListener("close",s),u()}function u(){q("unpipe"),h.unpipe(t)}var h=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1,q("pipe count=%d opts=%j",f.pipesCount,n);var c=(!n||n.end!==!1)&&t!==e.stdout&&t!==e.stderr,g=c?i:a;f.endEmitted?S(g):h.once("end",g),t.on("unpipe",r);var b=p(h);return t.on("drain",b),h.on("data",o),t._events&&t._events.error?R(t._events.error)?t._events.error.unshift(d):t._events.error=[d,t._events.error]:t.on("error",d),t.once("close",s),t.once("finish",l),t.emit("pipe",h),f.flowing||(q("pipe resume"),h.resume()),t},n.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=M(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},n.prototype.on=function(e,t){var n=k.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&l(this,r):S(c,this))}return n},n.prototype.addListener=n.prototype.on,n.prototype.resume=function(){var e=this._readableState;return e.flowing||(q("resume"),e.flowing=!0,g(this,e)),this},n.prototype.pause=function(){return q("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(q("pause"),this._readableState.flowing=!1,this.emit("pause")),this},n.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(q("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(q("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var a=r.push(i);a||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return y(a,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){q("wrapped _read",t),n&&(n=!1,e.resume())},r},n._fromList=m}).call(this,require("FWaASH"));


},{"./_stream_duplex":150,"FWaASH":67,"buffer":49,"core-util-is":153,"events":59,"inherits":154,"isarray":155,"process-nextick-args":156,"stream":73,"string_decoder/":157,"util":35}],152:[function(require,module,exports){
  "use strict";function nop(){}function WriteReq(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function WritableState(e,t){var r=require("./_stream_duplex");e=e||{},this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var f=e.decodeStrings===!1;this.decodeStrings=!f,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function Writable(e){var t=require("./_stream_duplex");return this instanceof Writable||this instanceof t?(this._writableState=new WritableState(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void Stream.call(this)):new Writable(e)}function writeAfterEnd(e,t){var r=new Error("write after end");e.emit("error",r),processNextTick(t,r)}function validChunk(e,t,r,i){var n=!0;if(!Buffer.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var f=new TypeError("Invalid non-string/buffer chunk");e.emit("error",f),processNextTick(i,f),n=!1}return n}function decodeChunk(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new Buffer(t,r)),t}function writeOrBuffer(e,t,r,i,n){r=decodeChunk(t,r,i),Buffer.isBuffer(r)&&(i="buffer");var f=t.objectMode?1:r.length;t.length+=f;var o=t.length<t.highWaterMark;if(o||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest=new WriteReq(r,i,n),u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest}else doWrite(e,t,!1,f,r,i,n);return o}function doWrite(e,t,r,i,n,f,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,f,t.onwrite),t.sync=!1}function onwriteError(e,t,r,i,n){--t.pendingcb,r?processNextTick(n,i):n(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(onwriteStateUpdate(r),t)onwriteError(e,r,i,t,n);else{var f=needFinish(r);f||r.corked||r.bufferProcessing||!r.bufferedRequest||clearBuffer(e,r),i?processNextTick(afterWrite,e,r,f,n):afterWrite(e,r,f,n)}}function afterWrite(e,t,r,i){r||onwriteDrain(e,t),t.pendingcb--,i(),finishMaybe(e,t)}function onwriteDrain(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function clearBuffer(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){for(var i=[],n=[];r;)n.push(r.callback),i.push(r),r=r.next;t.pendingcb++,t.lastBufferedRequest=null,doWrite(e,t,!0,t.length,i,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)})}else{for(;r;){var f=r.chunk,o=r.encoding,u=r.callback,s=t.objectMode?1:f.length;if(doWrite(e,t,!1,s,f,o,u),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function needFinish(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function prefinish(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,t){var r=needFinish(t);return r&&(0===t.pendingcb?(prefinish(e,t),t.finished=!0,e.emit("finish")):prefinish(e,t)),r}function endWritable(e,t,r){t.ending=!0,finishMaybe(e,t),r&&(t.finished?processNextTick(r):e.once("finish",r)),t.ended=!0}module.exports=Writable;var processNextTick=require("process-nextick-args"),Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream;!function(){try{Stream=require("stream")}catch(e){}finally{Stream||(Stream=require("events").EventEmitter)}}();var Buffer=require("buffer").Buffer;util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:require("util-deprecate")(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer() instead.")})}catch(e){}}(),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,t,r){var i=this._writableState,n=!1;return"function"==typeof t&&(r=t,t=null),Buffer.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof r&&(r=nop),i.ended?writeAfterEnd(this,r):validChunk(this,i,e,r)&&(i.pendingcb++,n=writeOrBuffer(this,i,e,t,r)),n},Writable.prototype.cork=function(){var e=this._writableState;e.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||clearBuffer(this,e))},Writable.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},Writable.prototype._write=function(e,t,r){r(new Error("not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,t,r){var i=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||endWritable(this,i,r)};


},{"./_stream_duplex":150,"buffer":49,"core-util-is":153,"events":59,"inherits":154,"process-nextick-args":156,"stream":73,"util-deprecate":158}],153:[function(require,module,exports){
  (function(t){function r(t){return Array.isArray(t)}function n(t){return"boolean"==typeof t}function e(t){return null===t}function o(t){return null==t}function i(t){return"number"==typeof t}function u(t){return"string"==typeof t}function f(t){return"symbol"==typeof t}function s(t){return void 0===t}function p(t){return c(t)&&"[object RegExp]"===d(t)}function c(t){return"object"==typeof t&&null!==t}function l(t){return c(t)&&"[object Date]"===d(t)}function y(t){return c(t)&&("[object Error]"===d(t)||t instanceof Error)}function x(t){return"function"==typeof t}function b(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function a(r){return t.isBuffer(r)}function d(t){return Object.prototype.toString.call(t)}exports.isArray=r,exports.isBoolean=n,exports.isNull=e,exports.isNullOrUndefined=o,exports.isNumber=i,exports.isString=u,exports.isSymbol=f,exports.isUndefined=s,exports.isRegExp=p,exports.isObject=c,exports.isDate=l,exports.isError=y,exports.isFunction=x,exports.isPrimitive=b,exports.isBuffer=a}).call(this,require("buffer").Buffer);


},{"buffer":49}],154:[function(require,module,exports){
  "function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};


},{}],155:[function(require,module,exports){
  module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],156:[function(require,module,exports){
  (function(n){"use strict";function t(t){for(var e=new Array(arguments.length-1),r=0;r<arguments.length;)e[r++]=arguments[r];n.nextTick(function(){t.apply(null,e)})}module.exports=t}).call(this,require("FWaASH"));


},{"FWaASH":67}],157:[function(require,module,exports){
  function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var Buffer=require("buffer").Buffer,isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var h=t.charCodeAt(t.length-1);if(!(h>=55296&&56319>=h)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,h=t.charCodeAt(i);if(h>=55296&&56319>=h){var c=this.surrogateSize;return this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),e.copy(this.charBuffer,0,0,c),t.substring(0,i)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(2>=t&&r>>4==14){this.charLength=3;break}if(3>=t&&r>>3==30){this.charLength=4;break}}this.charReceived=t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t};


},{"buffer":49}],158:[function(require,module,exports){
  (function(e){function r(e,r){function t(){if(!o){if(n("throwDeprecation"))throw new Error(r);n("traceDeprecation"),o=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var o=!1;return t}function n(r){if(!e.localStorage)return!1;var n=e.localStorage[r];return null==n?!1:"true"===String(n).toLowerCase()}module.exports=r}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{}],159:[function(require,module,exports){
  function Caseless(e){this.dict=e||{}}Caseless.prototype.set=function(e,t,s){if("object"!=typeof e){"undefined"==typeof s&&(s=!0);var r=this.has(e);return!s&&r?this.dict[r]=this.dict[r]+","+t:this.dict[r||e]=t,r}for(var n in e)this.set(n,e[n],t)},Caseless.prototype.has=function(e){for(var t=Object.keys(this.dict),e=e.toLowerCase(),s=0;s<t.length;s++)if(t[s].toLowerCase()===e)return t[s];return!1},Caseless.prototype.get=function(e){e=e.toLowerCase();var t,s,r=this.dict;return Object.keys(r).forEach(function(n){s=n.toLowerCase(),e===s&&(t=r[n])}),t},Caseless.prototype.swap=function(e){var t=this.has(e);if(!t)throw new Error('There is no header than matches "'+e+'"');this.dict[e]=this.dict[t],delete this.dict[t]},Caseless.prototype.del=function(e){var t=this.has(e);return delete this.dict[t||e]},module.exports=function(e){return new Caseless(e)},module.exports.httpify=function(e,t){var s=new Caseless(t);return e.setHeader=function(e,t,r){return"undefined"!=typeof t?s.set(e,t,r):void 0},e.hasHeader=function(e){return s.has(e)},e.getHeader=function(e){return s.get(e)},e.removeHeader=function(e){return s.del(e)},e.headers=s.dict,s};


},{}],160:[function(require,module,exports){
  (function(t){function e(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null}var i=require("util"),r=require("stream").Stream,s=require("delayed-stream");module.exports=e,i.inherits(e,r),e.create=function(t){var e=new this;t=t||{};for(var i in t)e[i]=t[i];return e},e.isStreamLike=function(e){return"function"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e&&!t.isBuffer(e)},e.prototype.append=function(t){var i=e.isStreamLike(t);if(i){if(!(t instanceof s)){var r=s.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=r}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this},e.prototype.pipe=function(t,e){return r.prototype.pipe.call(this,t,e),this.resume(),t},e.prototype._getNext=function(){this._currentStream=null;var t=this._streams.shift();if("undefined"==typeof t)return void this.end();if("function"!=typeof t)return void this._pipeNext(t);var i=t;i(function(t){var i=e.isStreamLike(t);i&&(t.on("data",this._checkDataSize.bind(this)),this._handleErrors(t)),this._pipeNext(t)}.bind(this))},e.prototype._pipeNext=function(t){this._currentStream=t;var i=e.isStreamLike(t);if(i)return t.on("end",this._getNext.bind(this)),void t.pipe(this,{end:!1});var r=t;this.write(r),this._getNext()},e.prototype._handleErrors=function(t){var e=this;t.on("error",function(t){e._emitError(t)})},e.prototype.write=function(t){this.emit("data",t)},e.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},e.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},e.prototype.end=function(){this._reset(),this.emit("end")},e.prototype.destroy=function(){this._reset(),this.emit("close")},e.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},e.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}},e.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},e.prototype._emitError=function(t){this._reset(),this.emit("error",t)}}).call(this,require("buffer").Buffer);


},{"buffer":49,"delayed-stream":161,"stream":73,"util":81}],161:[function(require,module,exports){
  function DelayedStream(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}var Stream=require("stream").Stream,util=require("util");module.exports=DelayedStream,util.inherits(DelayedStream,Stream),DelayedStream.create=function(e,t){var a=new this;t=t||{};for(var r in t)a[r]=t[r];a.source=e;var i=e.emit;return e.emit=function(){return a._handleEmit(arguments),i.apply(e,arguments)},e.on("error",function(){}),a.pauseStream&&e.pause(),a},Object.defineProperty(DelayedStream.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),DelayedStream.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},DelayedStream.prototype.resume=function(){this._released||this.release(),this.source.resume()},DelayedStream.prototype.pause=function(){this.source.pause()},DelayedStream.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(e){this.emit.apply(this,e)}.bind(this)),this._bufferedEvents=[]},DelayedStream.prototype.pipe=function(){var e=Stream.prototype.pipe.apply(this,arguments);return this.resume(),e},DelayedStream.prototype._handleEmit=function(e){return this._released?void this.emit.apply(this,e):("data"===e[0]&&(this.dataSize+=e[1].length,this._checkIfMaxDataSizeExceeded()),void this._bufferedEvents.push(e))},DelayedStream.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var e="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(e))}};


},{"stream":73,"util":81}],162:[function(require,module,exports){
  "use strict";var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,isArray=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===toStr.call(t)},isPlainObject=function(t){if(!t||"[object Object]"!==toStr.call(t))return!1;var r=hasOwn.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&hasOwn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!o)return!1;var n;for(n in t);return"undefined"==typeof n||hasOwn.call(t,n)};module.exports=function t(){var r,o,n,e,a,c,i=arguments[0],s=1,u=arguments.length,f=!1;for("boolean"==typeof i?(f=i,i=arguments[1]||{},s=2):("object"!=typeof i&&"function"!=typeof i||null==i)&&(i={});u>s;++s)if(r=arguments[s],null!=r)for(o in r)n=i[o],e=r[o],i!==e&&(f&&e&&(isPlainObject(e)||(a=isArray(e)))?(a?(a=!1,c=n&&isArray(n)?n:[]):c=n&&isPlainObject(n)?n:{},i[o]=t(f,c,e)):"undefined"!=typeof e&&(i[o]=e));return i};


},{}],163:[function(require,module,exports){
  function getConnectionName(e,t){var o="";return o="string"==typeof e?e+":"+t:e.host+":"+e.port+":"+(e.localAddress?e.localAddress+":":":")}function ForeverAgent(e){var t=this;t.options=e||{},t.requests={},t.sockets={},t.freeSockets={},t.maxSockets=t.options.maxSockets||Agent.defaultMaxSockets,t.minSockets=t.options.minSockets||ForeverAgent.defaultMinSockets,t.on("free",function(e,o,r){var s=getConnectionName(o,r);if(t.requests[s]&&t.requests[s].length)t.requests[s].shift().onSocket(e);else if(t.sockets[s].length<t.minSockets){t.freeSockets[s]||(t.freeSockets[s]=[]),t.freeSockets[s].push(e);var n=function(){e.destroy()};e._onIdleError=n,e.on("error",n)}else e.destroy()})}function ForeverAgentSSL(e){ForeverAgent.call(this,e)}function createConnectionSSL(e,t,o){return o="object"==typeof e?e:"object"==typeof t?t:"object"==typeof o?o:{},"number"==typeof e&&(o.port=e),"string"==typeof t&&(o.host=t),tls.connect(o)}module.exports=ForeverAgent,ForeverAgent.SSL=ForeverAgentSSL;var util=require("util"),Agent=require("http").Agent,net=require("net"),tls=require("tls"),AgentSSL=require("https").Agent;util.inherits(ForeverAgent,Agent),ForeverAgent.defaultMinSockets=5,ForeverAgent.prototype.createConnection=net.createConnection,ForeverAgent.prototype.addRequestNoreuse=Agent.prototype.addRequest,ForeverAgent.prototype.addRequest=function(e,t,o){var r=getConnectionName(t,o);if("string"!=typeof t){var s=t;o=s.port,t=s.host}if(this.freeSockets[r]&&this.freeSockets[r].length>0&&!e.useChunkedEncodingByDefault){var n=this.freeSockets[r].pop();n.removeListener("error",n._onIdleError),delete n._onIdleError,e._reusedSocket=!0,e.onSocket(n)}else this.addRequestNoreuse(e,t,o)},ForeverAgent.prototype.removeSocket=function(e,t,o,r){if(this.sockets[t]){var s=this.sockets[t].indexOf(e);-1!==s&&this.sockets[t].splice(s,1)}else this.sockets[t]&&0===this.sockets[t].length&&(delete this.sockets[t],delete this.requests[t]);if(this.freeSockets[t]){var s=this.freeSockets[t].indexOf(e);-1!==s&&(this.freeSockets[t].splice(s,1),0===this.freeSockets[t].length&&delete this.freeSockets[t])}this.requests[t]&&this.requests[t].length&&this.createSocket(t,o,r).emit("free")},util.inherits(ForeverAgentSSL,ForeverAgent),ForeverAgentSSL.prototype.createConnection=createConnectionSSL,ForeverAgentSSL.prototype.addRequestNoreuse=AgentSSL.prototype.addRequest;


},{"http":60,"https":64,"net":33,"tls":33,"util":81}],164:[function(require,module,exports){
  module.exports=FormData;


},{}],165:[function(require,module,exports){
  "use strict";function ValidationError(r){this.name="ValidationError",this.errors=r}ValidationError.prototype=Error.prototype,module.exports=ValidationError;


},{}],166:[function(require,module,exports){
  "use strict";var schemas=require("./schemas"),ValidationError=require("./error"),validator=require("is-my-json-valid"),runner=function(r,e,s){var n=validator(r,{greedy:!0,verbose:!0,schemas:schemas}),a=!1;return void 0!==e&&(a=n(e)),s?s(n.errors?new ValidationError(n.errors):null,a):a};module.exports=function(r,e){return runner(schemas.har,r,e)},Object.keys(schemas).map(function(r){module.exports[r]=function(e,s){return runner(schemas[r],e,s)}});


},{"./error":165,"./schemas":174,"is-my-json-valid":184}],167:[function(require,module,exports){
  module.exports={
    "properties": {
      "beforeRequest": {
        "$ref": "#cacheEntry"
      },
      "afterRequest": {
        "$ref": "#cacheEntry"
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],168:[function(require,module,exports){
  module.exports={
    "oneOf": [{
      "type": "object",
      "optional": true,
      "required": [
        "lastAccess",
        "eTag",
        "hitCount"
      ],
      "properties": {
        "expires": {
          "type": "string"
        },
        "lastAccess": {
          "type": "string"
        },
        "eTag": {
          "type": "string"
        },
        "hitCount": {
          "type": "integer"
        },
        "comment": {
          "type": "string"
        }
      }
    }, {
      "type": null,
      "additionalProperties": false
    }]
  }

},{}],169:[function(require,module,exports){
  module.exports={
    "type": "object",
    "required": [
      "size",
      "mimeType"
    ],
    "properties": {
      "size": {
        "type": "integer"
      },
      "compression": {
        "type": "integer"
      },
      "mimeType": {
        "type": "string"
      },
      "text": {
        "type": "string"
      },
      "encoding": {
        "type": "string"
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],170:[function(require,module,exports){
  module.exports={
    "type": "object",
    "required": [
      "name",
      "value"
    ],
    "properties": {
      "name": {
        "type": "string"
      },
      "value": {
        "type": "string"
      },
      "path": {
        "type": "string"
      },
      "domain": {
        "type": "string"
      },
      "expires": {
        "type": ["string", "null"],
        "format": "date-time"
      },
      "httpOnly": {
        "type": "boolean"
      },
      "secure": {
        "type": "boolean"
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],171:[function(require,module,exports){
  module.exports={
    "type": "object",
    "required": [
      "name",
      "version"
    ],
    "properties": {
      "name": {
        "type": "string"
      },
      "version": {
        "type": "string"
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],172:[function(require,module,exports){
  module.exports={
    "type": "object",
    "optional": true,
    "required": [
      "startedDateTime",
      "time",
      "request",
      "response",
      "cache",
      "timings"
    ],
    "properties": {
      "pageref": {
        "type": "string"
      },
      "startedDateTime": {
        "type": "string",
        "format": "date-time",
        "pattern": "^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"
      },
      "time": {
        "type": "number",
        "min": 0
      },
      "request": {
        "$ref": "#request"
      },
      "response": {
        "$ref": "#response"
      },
      "cache": {
        "$ref": "#cache"
      },
      "timings": {
        "$ref": "#timings"
      },
      "serverIPAddress": {
        "type": "string",
        "oneOf": [
          { "format": "ipv4" },
          { "format": "ipv6" }
        ]
      },
      "connection": {
        "type": "string"
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],173:[function(require,module,exports){
  module.exports={
    "type": "object",
    "required": [
      "log"
    ],
    "properties": {
      "log": {
        "$ref": "#log"
      }
    }
  }

},{}],174:[function(require,module,exports){
  "use strict";var schemas={cache:require("./cache.json"),cacheEntry:require("./cacheEntry.json"),content:require("./content.json"),cookie:require("./cookie.json"),creator:require("./creator.json"),entry:require("./entry.json"),har:require("./har.json"),log:require("./log.json"),page:require("./page.json"),pageTimings:require("./pageTimings.json"),postData:require("./postData.json"),record:require("./record.json"),request:require("./request.json"),response:require("./response.json"),timings:require("./timings.json")};schemas.cache.properties.beforeRequest=schemas.cacheEntry,schemas.cache.properties.afterRequest=schemas.cacheEntry,schemas.page.properties.pageTimings=schemas.pageTimings,schemas.request.properties.cookies.items=schemas.cookie,schemas.request.properties.headers.items=schemas.record,schemas.request.properties.queryString.items=schemas.record,schemas.request.properties.postData=schemas.postData,schemas.response.properties.cookies.items=schemas.cookie,schemas.response.properties.headers.items=schemas.record,schemas.response.properties.content=schemas.content,schemas.entry.properties.request=schemas.request,schemas.entry.properties.response=schemas.response,schemas.entry.properties.cache=schemas.cache,schemas.entry.properties.timings=schemas.timings,schemas.log.properties.creator=schemas.creator,schemas.log.properties.browser=schemas.creator,schemas.log.properties.pages.items=schemas.page,schemas.log.properties.entries.items=schemas.entry,schemas.har.properties.log=schemas.log,module.exports=schemas;


},{"./cache.json":167,"./cacheEntry.json":168,"./content.json":169,"./cookie.json":170,"./creator.json":171,"./entry.json":172,"./har.json":173,"./log.json":175,"./page.json":176,"./pageTimings.json":177,"./postData.json":178,"./record.json":179,"./request.json":180,"./response.json":181,"./timings.json":182}],175:[function(require,module,exports){
  module.exports={
    "type": "object",
    "required": [
      "version",
      "creator",
      "entries"
    ],
    "properties": {
      "version": {
        "type": "string"
      },
      "creator": {
        "$ref": "#creator"
      },
      "browser": {
        "$ref": "#creator"
      },
      "pages": {
        "type": "array",
        "items": {
          "$ref": "#page"
        }
      },
      "entries": {
        "type": "array",
        "items": {
          "$ref": "#entry"
        }
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],176:[function(require,module,exports){
  module.exports={
    "type": "object",
    "optional": true,
    "required": [
      "startedDateTime",
      "id",
      "title",
      "pageTimings"
    ],
    "properties": {
      "startedDateTime": {
        "type": "string",
        "format": "date-time",
        "pattern": "^(\\d{4})(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)(:)?(\\d\\d)(\\.\\d+)?(Z|([+-])(\\d\\d)(:)?(\\d\\d))"
      },
      "id": {
        "type": "string",
        "unique": true
      },
      "title": {
        "type": "string"
      },
      "pageTimings": {
        "$ref": "#pageTimings"
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],177:[function(require,module,exports){
  module.exports={
    "type": "object",
    "properties": {
      "onContentLoad": {
        "type": "number",
        "min": -1
      },
      "onLoad": {
        "type": "number",
        "min": -1
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],178:[function(require,module,exports){
  module.exports={
    "type": "object",
    "optional": true,
    "required": [
      "mimeType"
    ],
    "properties": {
      "mimeType": {
        "type": "string"
      },
      "text": {
        "type": "string"
      },
      "params": {
        "type": "array",
        "required": [
          "name"
        ],
        "properties": {
          "name": {
            "type": "string"
          },
          "value": {
            "type": "string"
          },
          "fileName": {
            "type": "string"
          },
          "contentType": {
            "type": "string"
          },
          "comment": {
            "type": "string"
          }
        }
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],179:[function(require,module,exports){
  module.exports={
    "type": "object",
    "required": [
      "name",
      "value"
    ],
    "properties": {
      "name": {
        "type": "string"
      },
      "value": {
        "type": "string"
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],180:[function(require,module,exports){
  module.exports={
    "type": "object",
    "required": [
      "method",
      "url",
      "httpVersion",
      "cookies",
      "headers",
      "queryString",
      "headersSize",
      "bodySize"
    ],
    "properties": {
      "method": {
        "type": "string"
      },
      "url": {
        "type": "string",
        "format": "uri"
      },
      "httpVersion": {
        "type": "string"
      },
      "cookies": {
        "type": "array",
        "items": {
          "$ref": "#cookie"
        }
      },
      "headers": {
        "type": "array",
        "items": {
          "$ref": "#record"
        }
      },
      "queryString": {
        "type": "array",
        "items": {
          "$ref": "#record"
        }
      },
      "postData": {
        "$ref": "#postData"
      },
      "headersSize": {
        "type": "integer"
      },
      "bodySize": {
        "type": "integer"
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],181:[function(require,module,exports){
  module.exports={
    "type": "object",
    "required": [
      "status",
      "statusText",
      "httpVersion",
      "cookies",
      "headers",
      "content",
      "redirectURL",
      "headersSize",
      "bodySize"
    ],
    "properties": {
      "status": {
        "type": "integer"
      },
      "statusText": {
        "type": "string"
      },
      "httpVersion": {
        "type": "string"
      },
      "cookies": {
        "type": "array",
        "items": {
          "$ref": "#cookie"
        }
      },
      "headers": {
        "type": "array",
        "items": {
          "$ref": "#record"
        }
      },
      "content": {
        "$ref": "#content"
      },
      "redirectURL": {
        "type": "string"
      },
      "headersSize": {
        "type": "integer"
      },
      "bodySize": {
        "type": "integer"
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],182:[function(require,module,exports){
  module.exports={
    "required": [
      "send",
      "wait",
      "receive"
    ],
    "properties": {
      "dns": {
        "type": "number",
        "min": -1
      },
      "connect": {
        "type": "number",
        "min": -1
      },
      "blocked": {
        "type": "number",
        "min": -1
      },
      "send": {
        "type": "number",
        "min": -1
      },
      "wait": {
        "type": "number",
        "min": -1
      },
      "receive": {
        "type": "number",
        "min": -1
      },
      "ssl": {
        "type": "number",
        "min": -1
      },
      "comment": {
        "type": "string"
      }
    }
  }

},{}],183:[function(require,module,exports){
  exports["date-time"]=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(\.\d+)?([zZ]|[+-]\d{2}:\d{2})$/,exports.date=/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}$/,exports.time=/^\d{2}:\d{2}:\d{2}$/,exports.email=/^\S+@\S+$/,exports["ip-address"]=exports.ipv4=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,exports.ipv6=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,exports.uri=/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,exports.color=/(#?([0-9A-Fa-f]{3,6})\b)|(aqua)|(black)|(blue)|(fuchsia)|(gray)|(green)|(lime)|(maroon)|(navy)|(olive)|(orange)|(purple)|(red)|(silver)|(teal)|(white)|(yellow)|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\))/,exports.hostname=/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,exports.alpha=/^[a-zA-Z]+$/,exports.alphanumeric=/^[a-zA-Z0-9]+$/,exports.style=/\s*(.+?):\s*([^;]+);?/g,exports.phone=/^\+(?:[0-9] ?){6,14}[0-9]$/,exports["utc-millisec"]=/^[0-9]+(\.?[0-9]+)?$/;


},{}],184:[function(require,module,exports){
  var genobj=require("generate-object-property"),genfun=require("generate-function"),jsonpointer=require("jsonpointer"),xtend=require("xtend"),formats=require("./formats"),get=function(e,r,t){if(/^https?:\/\//.test(t))return null;var n=function(e){return e&&e.id===t?e:"object"==typeof e&&e?Object.keys(e).reduce(function(r,t){return r||n(e[t])},null):null},i=n(e);if(i)return i;t=t.replace(/^#/,""),t=t.replace(/\/$/,"");try{return jsonpointer.get(e,decodeURI(t))}catch(s){var a,o=t.indexOf("#");if(0!==o)if(-1===o)a=r[t];else{var f=t.slice(0,o);a=r[f];var u=t.slice(o).replace(/^#/,"");try{return jsonpointer.get(a,u)}catch(s){}}else a=r[t];return a||null}},formatName=function(e){e=JSON.stringify(e);for(var r=/\[([^\[\]"]+)\]/;r.test(e);)e=e.replace(r,'."+$1+"');return e},types={};types.any=function(){return"true"},types["null"]=function(e){return e+" === null"},types["boolean"]=function(e){return"typeof "+e+' === "boolean"'},types.array=function(e){return"Array.isArray("+e+")"},types.object=function(e){return"typeof "+e+' === "object" && '+e+" && !Array.isArray("+e+")"},types.number=function(e){return"typeof "+e+' === "number"'},types.integer=function(e){return"typeof "+e+' === "number" && (Math.floor('+e+") === "+e+" || "+e+" > 9007199254740992 || "+e+" < -9007199254740992)"},types.string=function(e){return"typeof "+e+' === "string"'};var unique=function(e){for(var r=[],t=0;t<e.length;t++)r.push("object"==typeof e[t]?JSON.stringify(e[t]):e[t]);for(var t=1;t<r.length;t++)if(r.indexOf(r[t])!==t)return!1;return!0},toType=function(e){return e.type},compile=function(e,r,t,n,i){var s=i?xtend(formats,i.formats):formats,a={unique:unique,formats:s},o=i?!!i.verbose:!1,f=i&&void 0!==i.greedy?i.greedy:!1,u={},l=function(e){return e+(u[e]=(u[e]||0)+1)},m={},c=function(e){if(m[e])return m[e];var r=l("pattern");return a[r]=new RegExp(e),m[e]=r,r},p=["i","j","k","l","m","n","o","p","q","r","s","t","u","v","x","y","z"],d=function(){var e=p.shift();return p.push(e+e[0]),e},y=function(e,n,u,m){var p=n.properties,v=n.type,h=!1;Array.isArray(n.items)&&(p={},n.items.forEach(function(e,r){p[r]=e}),v="array",h=!0);var b=0,j=function(r,t,n){g("errors++"),u===!0&&(g("if (validate.errors === null) validate.errors = []"),o?g("validate.errors.push({field:%s,message:%s,value:%s})",formatName(t||e),JSON.stringify(r),n||e):g("validate.errors.push({field:%s,message:%s})",formatName(t||e),JSON.stringify(r)))};n.required===!0?(b++,g("if (%s === undefined) {",e),j("is required"),g("} else {")):(b++,g("if (%s !== undefined) {",e));var O=[].concat(v).map(function(r){return types[r||"any"](e)}).join(" || ")||"true";if("true"!==O&&(b++,g("if (!(%s)) {",O),j("is the wrong type"),g("} else {")),h)if(n.additionalItems===!1)g("if (%s.length > %d) {",e,n.items.length),j("has additional items"),g("}");else if(n.additionalItems){var x=d();g("for (var %s = %d; %s < %s.length; %s++) {",x,n.items.length,x,e,x),y(e+"["+x+"]",n.additionalItems,u,m),g("}")}if(n.format&&s[n.format]){"string"!==v&&formats[n.format]&&g("if (%s) {",types.string(e));var q=l("format");a[q]=s[n.format],"function"==typeof a[q]?g("if (!%s(%s)) {",q,e):g("if (!%s.test(%s)) {",q,e),j("must be "+n.format+" format"),g("}"),"string"!==v&&formats[n.format]&&g("}")}if(Array.isArray(n.required)){var N=function(r){var t=genobj(e,r);g("if (%s === undefined) {",t),j("is required",t),g("missing++"),g("}")};g("if ((%s)) {","object"!==v?types.object(e):"true"),g("var missing = 0"),n.required.map(N),g("}"),f||(g("if (missing === 0) {"),b++)}if(n.uniqueItems&&("array"!==v&&g("if (%s) {",types.array(e)),g("if (!(unique(%s))) {",e),j("must be unique"),g("}"),"array"!==v&&g("}")),n["enum"]){var A=n["enum"].some(function(e){return"object"==typeof e}),k=A?function(r){return"JSON.stringify("+e+") !== JSON.stringify("+JSON.stringify(r)+")"}:function(r){return e+" !== "+JSON.stringify(r)};g("if (%s) {",n["enum"].map(k).join(" && ")||"false"),j("must be an enum value"),g("}")}if(n.dependencies&&("object"!==v&&g("if (%s) {",types.object(e)),Object.keys(n.dependencies).forEach(function(r){var t=n.dependencies[r];"string"==typeof t&&(t=[t]);var i=function(r){return genobj(e,r)+" !== undefined"};Array.isArray(t)&&(g("if (%s !== undefined && !(%s)) {",genobj(e,r),t.map(i).join(" && ")||"true"),j("dependencies not set"),g("}")),"object"==typeof t&&(g("if (%s !== undefined) {",genobj(e,r)),y(e,t,u,m),g("}"))}),"object"!==v&&g("}")),n.additionalProperties||n.additionalProperties===!1){"object"!==v&&g("if (%s) {",types.object(e));var x=d(),S=l("keys"),J=function(e){return S+"["+x+"] !== "+JSON.stringify(e)},P=function(e){return"!"+c(e)+".test("+S+"["+x+"])"},w=Object.keys(p||{}).map(J).concat(Object.keys(n.patternProperties||{}).map(P)).join(" && ")||"true";g("var %s = Object.keys(%s)",S,e)("for (var %s = 0; %s < %s.length; %s++) {",x,x,S,x)("if (%s) {",w),n.additionalProperties===!1?(m&&g("delete %s",e+"["+S+"["+x+"]]"),j("has additional properties",null,JSON.stringify(e+".")+" + "+S+"["+x+"]")):y(e+"["+S+"["+x+"]]",n.additionalProperties,u,m),g("}")("}"),"object"!==v&&g("}")}if(n.$ref){var E=get(t,i&&i.schemas||{},n.$ref);if(E){var I=r[n.$ref];I||(r[n.$ref]=function(e){return I(e)},I=compile(E,r,t,!1,i));var q=l("ref");a[q]=I,g("if (!(%s(%s))) {",q,e),j("referenced schema does not match"),g("}")}}if(n.not){var $=l("prev");g("var %s = errors",$),y(e,n.not,!1,m),g("if (%s === errors) {",$),j("negative schema matches"),g("} else {")("errors = %s",$)("}")}if(n.items&&!h){"array"!==v&&g("if (%s) {",types.array(e));var x=d();g("for (var %s = 0; %s < %s.length; %s++) {",x,x,e,x),y(e+"["+x+"]",n.items,u,m),g("}"),"array"!==v&&g("}")}if(n.patternProperties){"object"!==v&&g("if (%s) {",types.object(e));var S=l("keys"),x=d();g("var %s = Object.keys(%s)",S,e)("for (var %s = 0; %s < %s.length; %s++) {",x,x,S,x),Object.keys(n.patternProperties).forEach(function(r){var t=c(r);g("if (%s.test(%s)) {",t,S+"["+x+"]"),y(e+"["+S+"["+x+"]]",n.patternProperties[r],u,m),g("}")}),g("}"),"object"!==v&&g("}")}if(n.pattern){var L=c(n.pattern);"string"!==v&&g("if (%s) {",types.string(e)),g("if (!(%s.test(%s))) {",L,e),j("pattern mismatch"),g("}"),"string"!==v&&g("}")}if(n.allOf&&n.allOf.forEach(function(r){y(e,r,u,m)}),n.anyOf&&n.anyOf.length){var $=l("prev");n.anyOf.forEach(function(r,t){0===t?g("var %s = errors",$):g("if (errors !== %s) {",$)("errors = %s",$),y(e,r,!1,!1)}),n.anyOf.forEach(function(e,r){r&&g("}")}),g("if (%s !== errors) {",$),j("no schemas match"),g("}")}if(n.oneOf&&n.oneOf.length){var $=l("prev"),M=l("passes");g("var %s = errors",$)("var %s = 0",M),n.oneOf.forEach(function(r,t){y(e,r,!1,!1),g("if (%s === errors) {",$)("%s++",M)("} else {")("errors = %s",$)("}")}),g("if (%s !== 1) {",M),j("no (or more than one) schemas match"),g("}")}if(void 0!==n.multipleOf){"number"!==v&&"integer"!==v&&g("if (%s) {",types.number(e));var _=(0|n.multipleOf)!==n.multipleOf?Math.pow(10,n.multipleOf.toString().split(".").pop().length):1;_>1?g("if ((%d*%s) % %d) {",_,e,_*n.multipleOf):g("if (%s % %d) {",e,n.multipleOf),j("has a remainder"),g("}"),"number"!==v&&"integer"!==v&&g("}")}for(void 0!==n.maxProperties&&("object"!==v&&g("if (%s) {",types.object(e)),g("if (Object.keys(%s).length > %d) {",e,n.maxProperties),j("has more properties than allowed"),g("}"),"object"!==v&&g("}")),void 0!==n.minProperties&&("object"!==v&&g("if (%s) {",types.object(e)),g("if (Object.keys(%s).length < %d) {",e,n.minProperties),j("has less properties than allowed"),g("}"),"object"!==v&&g("}")),void 0!==n.maxItems&&("array"!==v&&g("if (%s) {",types.array(e)),g("if (%s.length > %d) {",e,n.maxItems),j("has more items than allowed"),g("}"),"array"!==v&&g("}")),void 0!==n.minItems&&("array"!==v&&g("if (%s) {",types.array(e)),g("if (%s.length < %d) {",e,n.minItems),j("has less items than allowed"),g("}"),"array"!==v&&g("}")),void 0!==n.maxLength&&("string"!==v&&g("if (%s) {",types.string(e)),g("if (%s.length > %d) {",e,n.maxLength),j("has longer length than allowed"),g("}"),"string"!==v&&g("}")),void 0!==n.minLength&&("string"!==v&&g("if (%s) {",types.string(e)),g("if (%s.length < %d) {",e,n.minLength),j("has less length than allowed"),g("}"),"string"!==v&&g("}")),void 0!==n.minimum&&(g("if (%s %s %d) {",e,n.exclusiveMinimum?"<=":"<",n.minimum),j("is less than minimum"),g("}")),void 0!==n.maximum&&(g("if (%s %s %d) {",e,n.exclusiveMaximum?">=":">",n.maximum),j("is more than maximum"),g("}")),p&&Object.keys(p).forEach(function(r){Array.isArray(v)&&-1!==v.indexOf("null")&&g("if (%s !== null) {",e),y(genobj(e,r),p[r],u,m),Array.isArray(v)&&-1!==v.indexOf("null")&&g("}")});b--;)g("}")},g=genfun("function validate(data) {")("validate.errors = null")("var errors = 0");return y("data",e,n,i&&i.filter),g("return errors === 0")("}"),g=g.toFunction(a),g.errors=null,g.__defineGetter__("error",function(){return g.errors?g.errors.map(function(e){return e.field+" "+e.message}).join("\n"):""}),g.toJSON=function(){return e},g};module.exports=function(e,r){return"string"==typeof e&&(e=JSON.parse(e)),compile(e,{},e,!0,r)},module.exports.filter=function(e,r){var t=module.exports(e,xtend(r,{filter:!0}));return function(e){return t(e),e}};


},{"./formats":183,"generate-function":185,"generate-object-property":186,"jsonpointer":188,"xtend":189}],185:[function(require,module,exports){
  var util=require("util"),INDENT_START=/[\{\[]/,INDENT_END=/[\}\]]/;module.exports=function(){var t=[],n=0,u=function(u){for(var r="";r.length<2*n;)r+="  ";t.push(r+u)},r=function(t){return t?INDENT_END.test(t.trim()[0])&&INDENT_START.test(t[t.length-1])?(n--,u(util.format.apply(util,arguments)),n++,r):INDENT_START.test(t[t.length-1])?(u(util.format.apply(util,arguments)),n++,r):INDENT_END.test(t.trim()[0])?(n--,u(util.format.apply(util,arguments)),r):(u(util.format.apply(util,arguments)),r):r};return r.toString=function(){return t.join("\n")},r.toFunction=function(t){var n="return ("+r.toString()+")",u=Object.keys(t||{}).map(function(t){return t}),l=u.map(function(n){return t[n]});return Function.apply(null,u.concat(n)).apply(null,l)},arguments.length&&r.apply(null,arguments),r};


},{"util":81}],186:[function(require,module,exports){
  var isProperty=require("is-property"),gen=function(r,e){return isProperty(e)?r+"."+e:r+"["+JSON.stringify(e)+"]"};gen.valid=isProperty,gen.property=function(r){return isProperty(r)?r:JSON.stringify(r)},module.exports=gen;


},{"is-property":187}],187:[function(require,module,exports){
  "use strict";function isProperty(u){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(u)}module.exports=isProperty;


},{}],188:[function(require,module,exports){
  var console=require("console"),untilde=function(e){return e.replace(/~./g,function(e){switch(e){case"~0":return"~";case"~1":return"/"}throw"Invalid tilde escape: "+e})},traverse=function(e,t,n){var r=untilde(t.shift());if("undefined"==typeof e[r])throw"Value for pointer '"+t+"' not found.";if(0!==t.length)return traverse(e[r],t,n);if("undefined"==typeof n)return e[r];var i=e[r];return null===n?delete e[r]:e[r]=n,i},validate_input=function(e,t){if("object"!=typeof e)throw"Invalid input object.";if(""===t)return[];if(!t)throw"Invalid JSON pointer.";t=t.split("/");var n=t.shift();if(""!==n)throw"Invalid JSON pointer.";return t},get=function(e,t){return t=validate_input(e,t),0===t.length?e:traverse(e,t)},set=function(e,t,n){if(t=validate_input(e,t),0===t.length)throw"Invalid JSON pointer for set.";return traverse(e,t,n)};exports.get=get,exports.set=set;


},{"console":52}],189:[function(require,module,exports){
  function extend(){for(var r={},e=0;e<arguments.length;e++){var n=arguments[e];for(var t in n)n.hasOwnProperty(t)&&(r[t]=n[t])}return r}module.exports=extend;


},{}],190:[function(require,module,exports){
  var hawk={internals:{}};hawk.client={header:function(t,e,r){var n={field:"",artifacts:{}};if(!t||"string"!=typeof t&&"object"!=typeof t||!e||"string"!=typeof e||!r||"object"!=typeof r)return n.err="Invalid argument type",n;var a=r.timestamp||hawk.utils.now(r.localtimeOffsetMsec),i=r.credentials;if(!(i&&i.id&&i.key&&i.algorithm))return n.err="Invalid credentials object",n;if(-1===hawk.crypto.algorithms.indexOf(i.algorithm))return n.err="Unknown algorithm",n;"string"==typeof t&&(t=hawk.utils.parseUri(t));var o={ts:a,nonce:r.nonce||hawk.utils.randomString(6),method:e,resource:t.relative,host:t.hostname,port:t.port,hash:r.hash,ext:r.ext,app:r.app,dlg:r.dlg};n.artifacts=o,o.hash||!r.payload&&""!==r.payload||(o.hash=hawk.crypto.calculatePayloadHash(r.payload,i.algorithm,r.contentType));var s=hawk.crypto.calculateMac("header",i,o),h=null!==o.ext&&void 0!==o.ext&&""!==o.ext,c='Hawk id="'+i.id+'", ts="'+o.ts+'", nonce="'+o.nonce+(o.hash?'", hash="'+o.hash:"")+(h?'", ext="'+hawk.utils.escapeHeaderAttribute(o.ext):"")+'", mac="'+s+'"';return o.app&&(c+=', app="'+o.app+(o.dlg?'", dlg="'+o.dlg:"")+'"'),n.field=c,n},bewit:function(t,e){if(!t||"string"!=typeof t||!e||"object"!=typeof e||!e.ttlSec)return"";e.ext=null===e.ext||void 0===e.ext?"":e.ext;var r=hawk.utils.now(e.localtimeOffsetMsec),n=e.credentials;if(!(n&&n.id&&n.key&&n.algorithm))return"";if(-1===hawk.crypto.algorithms.indexOf(n.algorithm))return"";t=hawk.utils.parseUri(t);var a=r+e.ttlSec,i=hawk.crypto.calculateMac("bewit",n,{ts:a,nonce:"",method:"GET",resource:t.relative,host:t.hostname,port:t.port,ext:e.ext}),o=n.id+"\\"+a+"\\"+i+"\\"+e.ext;return hawk.utils.base64urlEncode(o)},authenticate:function(t,e,r,n){n=n||{};var a=function(e){return t.getResponseHeader?t.getResponseHeader(e):t.getHeader(e)},i=a("www-authenticate");if(i){var o=hawk.utils.parseAuthorizationHeader(i,["ts","tsm","error"]);if(!o)return!1;if(o.ts){var s=hawk.crypto.calculateTsMac(o.ts,e);if(s!==o.tsm)return!1;hawk.utils.setNtpOffset(o.ts-Math.floor((new Date).getTime()/1e3))}}var h=a("server-authorization");if(!h&&!n.required)return!0;var c=hawk.utils.parseAuthorizationHeader(h,["mac","ext","hash"]);if(!c)return!1;var l={ts:r.ts,nonce:r.nonce,method:r.method,resource:r.resource,host:r.host,port:r.port,hash:c.hash,ext:c.ext,app:r.app,dlg:r.dlg},u=hawk.crypto.calculateMac("response",e,l);if(u!==c.mac)return!1;if(!n.payload&&""!==n.payload)return!0;if(!c.hash)return!1;var f=hawk.crypto.calculatePayloadHash(n.payload,e.algorithm,a("content-type"));return f===c.hash},message:function(t,e,r,n){if(!t||"string"!=typeof t||!e||"number"!=typeof e||null===r||void 0===r||"string"!=typeof r||!n||"object"!=typeof n)return null;var a=n.timestamp||hawk.utils.now(n.localtimeOffsetMsec),i=n.credentials;if(!(i&&i.id&&i.key&&i.algorithm))return null;if(-1===hawk.crypto.algorithms.indexOf(i.algorithm))return null;var o={ts:a,nonce:n.nonce||hawk.utils.randomString(6),host:t,port:e,hash:hawk.crypto.calculatePayloadHash(r,i.algorithm)},s={id:i.id,ts:o.ts,nonce:o.nonce,hash:o.hash,mac:hawk.crypto.calculateMac("message",i,o)};return s},authenticateTimestamp:function(t,e,r){var n=hawk.crypto.calculateTsMac(t.ts,e);return n!==t.tsm?!1:(r!==!1&&hawk.utils.setNtpOffset(t.ts-Math.floor((new Date).getTime()/1e3)),!0)}},hawk.crypto={headerVersion:"1",algorithms:["sha1","sha256"],calculateMac:function(t,e,r){var n=hawk.crypto.generateNormalizedString(t,r),a=CryptoJS["Hmac"+e.algorithm.toUpperCase()](n,e.key);return a.toString(CryptoJS.enc.Base64)},generateNormalizedString:function(t,e){var r="hawk."+hawk.crypto.headerVersion+"."+t+"\n"+e.ts+"\n"+e.nonce+"\n"+(e.method||"").toUpperCase()+"\n"+(e.resource||"")+"\n"+e.host.toLowerCase()+"\n"+e.port+"\n"+(e.hash||"")+"\n";return e.ext&&(r+=e.ext.replace("\\","\\\\").replace("\n","\\n")),r+="\n",e.app&&(r+=e.app+"\n"+(e.dlg||"")+"\n"),r},calculatePayloadHash:function(t,e,r){var n=CryptoJS.algo[e.toUpperCase()].create();return n.update("hawk."+hawk.crypto.headerVersion+".payload\n"),n.update(hawk.utils.parseContentType(r)+"\n"),n.update(t),n.update("\n"),n.finalize().toString(CryptoJS.enc.Base64)},calculateTsMac:function(t,e){var r=CryptoJS["Hmac"+e.algorithm.toUpperCase()]("hawk."+hawk.crypto.headerVersion+".ts\n"+t+"\n",e.key);return r.toString(CryptoJS.enc.Base64)}},hawk.internals.LocalStorage=function(){this._cache={},this.length=0,this.getItem=function(t){return this._cache.hasOwnProperty(t)?String(this._cache[t]):null},this.setItem=function(t,e){this._cache[t]=String(e),this.length=Object.keys(this._cache).length},this.removeItem=function(t){delete this._cache[t],this.length=Object.keys(this._cache).length},this.clear=function(){this._cache={},this.length=0},this.key=function(t){return Object.keys(this._cache)[t||0]}},hawk.utils={storage:new hawk.internals.LocalStorage,setStorage:function(t){var e=hawk.utils.storage.getItem("hawk_ntp_offset");hawk.utils.storage=t,e&&hawk.utils.setNtpOffset(e)},setNtpOffset:function(t){try{hawk.utils.storage.setItem("hawk_ntp_offset",t)}catch(e){}},getNtpOffset:function(){var t=hawk.utils.storage.getItem("hawk_ntp_offset");return t?parseInt(t,10):0},now:function(t){return Math.floor(((new Date).getTime()+(t||0))/1e3)+hawk.utils.getNtpOffset()},escapeHeaderAttribute:function(t){return t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},parseContentType:function(t){return t?t.split(";")[0].replace(/^\s+|\s+$/g,"").toLowerCase():""},parseAuthorizationHeader:function(t,e){if(!t)return null;var r=t.match(/^(\w+)(?:\s+(.*))?$/);if(!r)return null;var n=r[1];if("hawk"!==n.toLowerCase())return null;var a=r[2];if(!a)return null;var i={},o=a.replace(/(\w+)="([^"\\]*)"\s*(?:,\s*|$)/g,function(t,r,n){return-1===e.indexOf(r)||null===n.match(/^[ \w\!#\$%&'\(\)\*\+,\-\.\/\:;<\=>\?@\[\]\^`\{\|\}~]+$/)||i.hasOwnProperty(r)?void 0:(i[r]=n,"")});return""!==o?null:i},randomString:function(t){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=e.length,n=[],a=0;t>a;++a)n[a]=e[Math.floor(Math.random()*r)];return n.join("")},parseUri:function(t){for(var e=["source","protocol","authority","userInfo","user","password","hostname","port","resource","relative","pathname","directory","file","query","fragment"],r=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?)(?:#(.*))?)/,n=t.match(r),a={},i=0,o=e.length;o>i;++i)a[e[i]]=n[i]||"";return""===a.port&&(a.port="http"===a.protocol.toLowerCase()?"80":"https"===a.protocol.toLowerCase()?"443":""),a},base64urlEncode:function(t){var e=CryptoJS.enc.Utf8.parse(t),r=CryptoJS.enc.Base64.stringify(e);return r.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}};var CryptoJS=CryptoJS||function(t,e){var r={},n=r.lib={},a=function(){},i=n.Base={extend:function(t){a.prototype=this;var e=new a;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},o=n.WordArray=i.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var a=0;t>a;a++)e[n+a>>>2]|=(r[a>>>2]>>>24-8*(a%4)&255)<<24-8*((n+a)%4);else if(65535<r.length)for(a=0;t>a;a+=4)e[n+a>>>2]=r[a>>>2];else e.push.apply(e,r);return this.sigBytes+=t,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-8*(r%4),e.length=t.ceil(r/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],n=0;e>n;n+=4)r.push(4294967296*t.random()|0);return new o.init(r,e)}}),s=r.enc={},h=s.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;t>n;n++){var a=e[n>>>2]>>>24-8*(n%4)&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-4*(n%8);return new o.init(r,e/2)}},c=s.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var r=[],n=0;t>n;n++)r.push(String.fromCharCode(e[n>>>2]>>>24-8*(n%4)&255));return r.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-8*(n%4);return new o.init(r,e)}},l=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},u=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,a=r.sigBytes,i=this.blockSize,s=a/(4*i),s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0);if(e=s*i,a=t.min(4*e,a),e){for(var h=0;e>h;h+=i)this._doProcessBlock(n,h);h=n.splice(0,e),r.sigBytes-=a}return new o.init(h,a)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=u.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new f.HMAC.init(t,r).finalize(e)}}});var f=r.algo={};return r}(Math);!function(){var t=CryptoJS,e=t.lib,r=e.WordArray,n=e.Hasher,a=[],e=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],h=r[4],c=0;80>c;c++){if(16>c)a[c]=0|t[e+c];else{var l=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=l<<1|l>>>31}l=(n<<5|n>>>27)+h+a[c],l=20>c?l+((i&o|~i&s)+1518500249):40>c?l+((i^o^s)+1859775393):60>c?l+((i&o|i&s|o&s)-1894007588):l+((i^o^s)-899497514),h=s,s=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+h|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),e[(n+64>>>9<<4)+15]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=n.clone.call(this);return t._hash=this._hash.clone(),t}});t.SHA1=n._createHelper(e),t.HmacSHA1=n._createHmacHelper(e)}(),function(t){for(var e=CryptoJS,r=e.lib,n=r.WordArray,a=r.Hasher,r=e.algo,i=[],o=[],s=function(t){return 4294967296*(t-(0|t))|0},h=2,c=0;64>c;){var l;t:{l=h;for(var u=t.sqrt(l),f=2;u>=f;f++)if(!(l%f)){l=!1;break t}l=!0}l&&(8>c&&(i[c]=s(t.pow(h,.5))),o[c]=s(t.pow(h,1/3)),c++),h++}var p=[],r=r.SHA256=a.extend({_doReset:function(){this._hash=new n.init(i.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],a=r[1],i=r[2],s=r[3],h=r[4],c=r[5],l=r[6],u=r[7],f=0;64>f;f++){if(16>f)p[f]=0|t[e+f];else{var d=p[f-15],g=p[f-2];p[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[f-16]}d=u+((h<<26|h>>>6)^(h<<21|h>>>11)^(h<<7|h>>>25))+(h&c^~h&l)+o[f]+p[f],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&a^n&i^a&i),u=l,l=c,c=h,h=s+d|0,s=i,i=a,a=n,n=d+g|0}r[0]=r[0]+n|0,r[1]=r[1]+a|0,r[2]=r[2]+i|0,r[3]=r[3]+s|0,r[4]=r[4]+h|0,r[5]=r[5]+c|0,r[6]=r[6]+l|0,r[7]=r[7]+u|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,a=8*e.sigBytes;return r[a>>>5]|=128<<24-a%32,r[(a+64>>>9<<4)+14]=t.floor(n/4294967296),r[(a+64>>>9<<4)+15]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=a.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=a._createHelper(r),e.HmacSHA256=a._createHmacHelper(r)}(Math),function(){var t=CryptoJS,e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,r){t=this._hasher=new t.init,"string"==typeof r&&(r=e.parse(r));var n=t.blockSize,a=4*n;r.sigBytes>a&&(r=t.finalize(r)),r.clamp();for(var i=this._oKey=r.clone(),o=this._iKey=r.clone(),s=i.words,h=o.words,c=0;n>c;c++)s[c]^=1549556828,h[c]^=909522486;i.sigBytes=o.sigBytes=a,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher;return t=e.finalize(t),e.reset(),e.finalize(this._oKey.clone().concat(t))}})}(),function(){var t=CryptoJS,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp(),t=[];for(var a=0;r>a;a+=3)for(var i=(e[a>>>2]>>>24-8*(a%4)&255)<<16|(e[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|e[a+2>>>2]>>>24-8*((a+2)%4)&255,o=0;4>o&&r>a+.75*o;o++)t.push(n.charAt(i>>>6*(3-o)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var r=t.length,n=this._map,a=n.charAt(64);a&&(a=t.indexOf(a),-1!=a&&(r=a));for(var a=[],i=0,o=0;r>o;o++)if(o%4){var s=n.indexOf(t.charAt(o-1))<<2*(o%4),h=n.indexOf(t.charAt(o))>>>6-2*(o%4);a[i>>>2]|=(s|h)<<24-8*(i%4),i++}return e.create(a,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),hawk.crypto.internals=CryptoJS,"undefined"!=typeof module&&module.exports&&(module.exports=hawk);


},{}],191:[function(require,module,exports){
  var parser=require("./parser"),signer=require("./signer"),verify=require("./verify"),util=require("./util");module.exports={parse:parser.parseRequest,parseRequest:parser.parseRequest,sign:signer.signRequest,signRequest:signer.signRequest,sshKeyToPEM:util.sshKeyToPEM,sshKeyFingerprint:util.fingerprint,pemToRsaSSHKey:util.pemToRsaSSHKey,verify:verify.verifySignature,verifySignature:verify.verifySignature,verifyHMAC:verify.verifyHMAC};


},{"./parser":192,"./signer":193,"./util":194,"./verify":195}],192:[function(require,module,exports){
  function HttpSignatureError(r,a){Error.captureStackTrace&&Error.captureStackTrace(this,a||HttpSignatureError),this.message=r,this.name=a.name}function ExpiredRequestError(r){HttpSignatureError.call(this,r,ExpiredRequestError)}function InvalidHeaderError(r){HttpSignatureError.call(this,r,InvalidHeaderError)}function InvalidParamsError(r){HttpSignatureError.call(this,r,InvalidParamsError)}function MissingHeaderError(r){HttpSignatureError.call(this,r,MissingHeaderError)}var assert=require("assert-plus"),util=require("util"),Algorithms={"rsa-sha1":!0,"rsa-sha256":!0,"rsa-sha512":!0,"dsa-sha1":!0,"hmac-sha1":!0,"hmac-sha256":!0,"hmac-sha512":!0},State={New:0,Params:1},ParamsState={Name:0,Quote:1,Value:2,Comma:3};util.inherits(HttpSignatureError,Error),util.inherits(ExpiredRequestError,HttpSignatureError),util.inherits(InvalidHeaderError,HttpSignatureError),util.inherits(InvalidParamsError,HttpSignatureError),util.inherits(MissingHeaderError,HttpSignatureError),module.exports={parseRequest:function(r,a){if(assert.object(r,"request"),assert.object(r.headers,"request.headers"),void 0===a&&(a={}),void 0===a.headers&&(a.headers=[r.headers["x-date"]?"x-date":"date"]),assert.object(a,"options"),assert.arrayOfString(a.headers,"options.headers"),assert.optionalNumber(a.clockSkew,"options.clockSkew"),!r.headers.authorization)throw new MissingHeaderError("no authorization header present in the request");a.clockSkew=a.clockSkew||300;var e=0,t=State.New,s=ParamsState.Name,i="",o="",n={scheme:"",params:{},signingString:"",get algorithm(){return this.params.algorithm.toUpperCase()},get keyId(){return this.params.keyId}},h=r.headers.authorization;for(e=0;e<h.length;e++){var d=h.charAt(e);switch(Number(t)){case State.New:" "!==d?n.scheme+=d:t=State.Params;break;case State.Params:switch(Number(s)){case ParamsState.Name:var m=d.charCodeAt(0);if(m>=65&&90>=m||m>=97&&122>=m)i+=d;else{if("="!==d)throw new InvalidHeaderError("bad param format");if(0===i.length)throw new InvalidHeaderError("bad param format");s=ParamsState.Quote}break;case ParamsState.Quote:if('"'!==d)throw new InvalidHeaderError("bad param format");o="",s=ParamsState.Value;break;case ParamsState.Value:'"'===d?(n.params[i]=o,s=ParamsState.Comma):o+=d;break;case ParamsState.Comma:if(","!==d)throw new InvalidHeaderError("bad param format");i="",s=ParamsState.Name;break;default:throw new Error("Invalid substate")}break;default:throw new Error("Invalid substate")}}if(n.params.headers&&""!==n.params.headers?n.params.headers=n.params.headers.split(" "):r.headers["x-date"]?n.params.headers=["x-date"]:n.params.headers=["date"],!n.scheme||"Signature"!==n.scheme)throw new InvalidHeaderError('scheme was not "Signature"');if(!n.params.keyId)throw new InvalidHeaderError("keyId was not specified");if(!n.params.algorithm)throw new InvalidHeaderError("algorithm was not specified");if(!n.params.signature)throw new InvalidHeaderError("signature was not specified");if(n.params.algorithm=n.params.algorithm.toLowerCase(),!Algorithms[n.params.algorithm])throw new InvalidParamsError(n.params.algorithm+" is not supported");for(e=0;e<n.params.headers.length;e++){var l=n.params.headers[e].toLowerCase();if(n.params.headers[e]=l,"request-line"!==l){var u=r.headers[l];if(!u)throw new MissingHeaderError(l+" was not in the request");n.signingString+=l+": "+u}else n.signingString+=r.method+" "+r.url+" HTTP/"+r.httpVersion;e+1<n.params.headers.length&&(n.signingString+="\n")}var p;if(r.headers.date||r.headers["x-date"]){p=r.headers["x-date"]?new Date(r.headers["x-date"]):new Date(r.headers.date);var c=new Date,g=Math.abs(c.getTime()-p.getTime());if(g>1e3*a.clockSkew)throw new ExpiredRequestError("clock skew of "+g/1e3+"s was greater than "+a.clockSkew+"s")}if(a.headers.forEach(function(r){if(n.params.headers.indexOf(r)<0)throw new MissingHeaderError(r+" was not a signed header")}),a.algorithms&&-1===a.algorithms.indexOf(n.params.algorithm))throw new InvalidParamsError(n.params.algorithm+" is not a supported algorithm");return n}};


},{"assert-plus":202,"util":81}],193:[function(require,module,exports){
  function MissingHeaderError(r){this.name="MissingHeaderError",this.message=r,this.stack=(new Error).stack}function InvalidAlgorithmError(r){this.name="InvalidAlgorithmError",this.message=r,this.stack=(new Error).stack}function _pad(r){return parseInt(r,10)<10&&(r="0"+r),r}function _rfc1123(){var r=new Date,e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return t[r.getUTCDay()]+", "+_pad(r.getUTCDate())+" "+e[r.getUTCMonth()]+" "+r.getUTCFullYear()+" "+_pad(r.getUTCHours())+":"+_pad(r.getUTCMinutes())+":"+_pad(r.getUTCSeconds())+" GMT"}var assert=require("assert-plus"),crypto=require("crypto"),http=require("http"),sprintf=require("util").format,Algorithms={"rsa-sha1":!0,"rsa-sha256":!0,"rsa-sha512":!0,"dsa-sha1":!0,"hmac-sha1":!0,"hmac-sha256":!0,"hmac-sha512":!0},Authorization='Signature keyId="%s",algorithm="%s",headers="%s",signature="%s"';MissingHeaderError.prototype=new Error,InvalidAlgorithmError.prototype=new Error,module.exports={signRequest:function(r,e){if(assert.object(r,"request"),assert.object(e,"options"),assert.optionalString(e.algorithm,"options.algorithm"),assert.string(e.keyId,"options.keyId"),assert.optionalArrayOfString(e.headers,"options.headers"),assert.optionalString(e.httpVersion,"options.httpVersion"),r.getHeader("Date")||r.setHeader("Date",_rfc1123()),e.headers||(e.headers=["date"]),e.algorithm||(e.algorithm="rsa-sha256"),e.httpVersion||(e.httpVersion="1.1"),e.algorithm=e.algorithm.toLowerCase(),!Algorithms[e.algorithm])throw new InvalidAlgorithmError(e.algorithm+" is not supported");var t,a="";for(t=0;t<e.headers.length;t++){if("string"!=typeof e.headers[t])throw new TypeError("options.headers must be an array of Strings");var s=e.headers[t].toLowerCase();if("request-line"!==s){var o=r.getHeader(s);if(!o)throw new MissingHeaderError(s+" was not in the request");a+=s+": "+o}else a+=r.method+" "+r.path+" HTTP/"+e.httpVersion;t+1<e.headers.length&&(a+="\n")}var i,n=e.algorithm.match(/(hmac|rsa)-(\w+)/);if("hmac"===n[1]){var h=crypto.createHmac(n[2].toUpperCase(),e.key);h.update(a),i=h.digest("base64")}else{var g=crypto.createSign(e.algorithm.toUpperCase());g.update(a),i=g.sign(e.key,"base64")}return r.setHeader("Authorization",sprintf(Authorization,e.keyId,e.algorithm,e.headers.join(" "),i)),!0}};


},{"assert-plus":202,"crypto":54,"http":60,"util":81}],194:[function(require,module,exports){
  (function(e){function t(e,t){var r=o.ruint32(e,"big",t);t+=4;var n=t+r;return{data:e.slice(t,n),offset:n}}function r(e,t){e.writeByte(2),e.writeLength(t.length);for(var r=0;r<t.length;r++)e.writeByte(t[r]);return e}function n(n){var s,a,f,o,u,h,l,c="",d=0;try{if(s=new e(n.split(" ")[1],"base64"),l=t(s,d),h=l.data.toString(),d=l.offset,"ssh-rsa"!==h)throw new Error("Invalid ssh key type: "+h);l=t(s,d),f=l.data,d=l.offset,l=t(s,d),u=l.data}catch(g){throw new Error("Invalid ssh key: "+n)}for(a=new i.BerWriter,a.startSequence(),a.startSequence(),a.writeOID("1.2.840.113549.1.1.1"),a.writeNull(),a.endSequence(),a.startSequence(3),a.writeByte(0),a.startSequence(),r(a,u),r(a,f),a.endSequence(),a.endSequence(),a.endSequence(),l=a.buffer.toString("base64"),o=0;o<l.length;o++)o%64===0&&(c+="\n"),c+=l.charAt(o);return/\\n$/.test(c)||(c+="\n"),"-----BEGIN PUBLIC KEY-----"+c+"-----END PUBLIC KEY-----\n"}function s(n){var s,a,f,o,u,h,l,c,d=0,g="";try{if(s=new e(n.split(" ")[1],"base64"),a=t(s,d),o=a.data.toString(),d=a.offset,!/^ssh-ds[as].*/.test(o))throw new Error("Invalid ssh key type: "+o);a=t(s,d),u=a.data,d=a.offset,a=t(s,d),h=a.data,d=a.offset,a=t(s,d),l=a.data,d=a.offset,a=t(s,d),c=a.data}catch(w){throw new Error("Invalid ssh key: "+n)}f=new i.BerWriter,f.startSequence(),f.startSequence(),f.writeOID("1.2.840.10040.4.1"),f.startSequence(),r(f,u),r(f,h),r(f,l),f.endSequence(),f.endSequence(),f.startSequence(3),f.writeByte(0),r(f,c),f.endSequence(),f.endSequence(),a=f.buffer.toString("base64");for(var S=0;S<a.length;S++)S%64===0&&(g+="\n"),g+=a.charAt(S);return/\\n$/.test(g)||(g+="\n"),"-----BEGIN PUBLIC KEY-----"+g+"-----END PUBLIC KEY-----\n"}var a=require("assert-plus"),f=require("crypto"),i=require("asn1"),o=require("ctype");module.exports={sshKeyToPEM:function(e){if(a.string(e,"ssh_key"),/^ssh-rsa.*/.test(e))return n(e);if(/^ssh-ds[as].*/.test(e))return s(e);throw new Error("Only RSA and DSA public keys are allowed")},fingerprint:function(t){a.string(t,"ssh_key");var r=t.split(" ");if(!r||!r.length||r.length<2)throw new Error("invalid ssh key");var n=new e(r[1],"base64"),s=f.createHash("md5");s.update(n);for(var i=s.digest("hex"),o="",u=0;u<i.length;u++)u&&u%2===0&&(o+=":"),o+=i[u];return o},pemToRsaSSHKey:function(t,r){a.equal("string",typeof t,"typeof pem");var n=t.split("\n").slice(1,-2).join(""),s=new e(n,"base64"),f=new i.BerReader(s);f.readSequence(),f.readSequence();var o=f.readOID();a.equal(o,"1.2.840.113549.1.1.1","pem not in RSA format"),f.readByte(),f.readByte(),f.readSequence(3),f.readByte(),f.readSequence(),a.equal(f.peek(),i.Ber.Integer,"modulus not an integer"),f._offset=f.readLength(f.offset+1);var u=f._buf.slice(f.offset,f.offset+f.length);f._offset+=f.length,a.equal(f.peek(),i.Ber.Integer,"exponent not an integer"),f._offset=f.readLength(f.offset+1);var h=f._buf.slice(f.offset,f.offset+f.length);f._offset+=f.length;var l=new e("ssh-rsa"),c=new e(4+l.length+4+u.length+4+h.length),d=0;c.writeUInt32BE(l.length,d),d+=4,l.copy(c,d),d+=l.length,c.writeUInt32BE(h.length,d),d+=4,h.copy(c,d),d+=h.length,c.writeUInt32BE(u.length,d),d+=4,u.copy(c,d),d+=u.length;var g=l.toString()+" "+c.toString("base64")+" "+(r||"");return g}}}).call(this,require("buffer").Buffer);


},{"asn1":201,"assert-plus":202,"buffer":49,"crypto":54,"ctype":205}],195:[function(require,module,exports){
  var assert=require("assert-plus"),crypto=require("crypto");module.exports={verifySignature:function(r,e){assert.object(r,"parsedSignature"),assert.string(e,"pubkey");var t=r.algorithm.match(/^(RSA|DSA)-(\w+)/);if(!t||3!==t.length)throw new TypeError("parsedSignature: unsupported algorithm "+r.algorithm);var a=crypto.createVerify(t[0]);return a.update(r.signingString),a.verify(e,r.params.signature,"base64")},verifyHMAC:function(r,e){assert.object(r,"parsedHMAC"),assert.string(e,"secret");var t=r.algorithm.match(/^HMAC-(\w+)/);if(!t||2!==t.length)throw new TypeError("parsedSignature: unsupported algorithm "+r.algorithm);var a=crypto.createHmac(t[1].toUpperCase(),e);return a.update(r.signingString),a.digest("base64")===r.params.signature}};


},{"assert-plus":202,"crypto":54}],196:[function(require,module,exports){
  module.exports={newInvalidAsn1Error:function(r){var n=new Error;return n.name="InvalidAsn1Error",n.message=r||"",n}};


},{}],197:[function(require,module,exports){
  var errors=require("./errors"),types=require("./types"),Reader=require("./reader"),Writer=require("./writer");module.exports={Reader:Reader,Writer:Writer};for(var t in types)types.hasOwnProperty(t)&&(module.exports[t]=types[t]);for(var e in errors)errors.hasOwnProperty(e)&&(module.exports[e]=errors[e]);


},{"./errors":196,"./reader":198,"./types":199,"./writer":200}],198:[function(require,module,exports){
  (function(t){function e(e){if(!e||!t.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0;var r=this;this.__defineGetter__("length",function(){return r._len}),this.__defineGetter__("offset",function(){return r._offset}),this.__defineGetter__("remain",function(){return r._size-r._offset}),this.__defineGetter__("buffer",function(){return r._buf.slice(r._offset)})}var r=require("assert"),i=require("./types"),n=require("./errors"),f=n.newInvalidAsn1Error;e.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=255&this._buf[this._offset];return t||(this._offset+=1),e},e.prototype.peek=function(){return this.readByte(!0)},e.prototype.readLength=function(t){if(void 0===t&&(t=this._offset),t>=this._size)return null;var e=255&this._buf[t++];if(null===e)return null;if(128==(128&e)){if(e&=127,0==e)throw f("Indefinite length not supported");if(e>4)throw f("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;e>r;r++)this._len=(this._len<<8)+(255&this._buf[t++])}else this._len=e;return t},e.prototype.readSequence=function(t){var e=this.peek();if(null===e)return null;if(void 0!==t&&t!==e)throw f("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,e)},e.prototype.readInt=function(){return this._readTag(i.Integer)},e.prototype.readBoolean=function(){return 0===this._readTag(i.Boolean)?!1:!0},e.prototype.readEnumeration=function(){return this._readTag(i.Enumeration)},e.prototype.readString=function(t,e){t||(t=i.OctetString);var r=this.peek();if(null===r)return null;if(r!==t)throw f("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(null===n)return null;if(this.length>this._size-n)return null;if(this._offset=n,0===this.length)return"";var s=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?s:s.toString("utf8")},e.prototype.readOID=function(t){t||(t=i.OID);var e=this.peek();if(null===e)return null;if(e!==t)throw f("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>this._size-r)return null;this._offset=r;for(var n=[],s=0,o=0;o<this.length;o++){var h=255&this._buf[this._offset++];s<<=7,s+=127&h,0==(128&h)&&(n.push(s),s=0)}return s=n.shift(),n.unshift(s%40),n.unshift(s/40>>0),n.join(".")},e.prototype._readTag=function(t){r.ok(void 0!==t);var e=this.peek();if(null===e)return null;if(e!==t)throw f("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var i=this.readLength(this._offset+1);if(null===i)return null;if(this.length>4)throw f("Integer too long: "+this.length);if(this.length>this._size-i)return null;this._offset=i;var n=this._buf[this._offset++],s=0;s=127&n;for(var o=1;o<this.length;o++)s<<=8,s|=255&this._buf[this._offset++];return 128==(128&n)&&(s=-s),s},module.exports=e}).call(this,require("buffer").Buffer);


},{"./errors":196,"./types":199,"assert":34,"buffer":49}],199:[function(require,module,exports){
  module.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128};


},{}],200:[function(require,module,exports){
  (function(t){function e(t,e){i.ok(t),i.equal(typeof t,"object"),i.ok(e),i.equal(typeof e,"object");var s=Object.getOwnPropertyNames(t);return s.forEach(function(s){if(!e[s]){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(e,s,i)}}),e}function s(s){s=e(o,s||{}),this._buf=new t(s.size||1024),this._size=this._buf.length,this._offset=0,this._options=s,this._seq=[];var i=this;this.__defineGetter__("buffer",function(){if(i._seq.length)throw new InvalidAsn1Error(i._seq.length+" unended sequence(s)");return i._buf.slice(0,i._offset)})}var i=require("assert"),r=require("./types"),f=require("./errors"),o=(f.newInvalidAsn1Error,{size:1024,growthFactor:8});s.prototype.writeByte=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t},s.prototype.writeInt=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");"number"!=typeof e&&(e=r.Integer);for(var s=4;(0===(4286578688&t)||4286578688===(4286578688&t))&&s>1;)s--,t<<=8;if(s>4)throw new InvalidAsn1Error("BER ints cannot be > 0xffffffff");for(this._ensure(2+s),this._buf[this._offset++]=e,this._buf[this._offset++]=s;s-->0;)this._buf[this._offset++]=(4278190080&t)>>24,t<<=8},s.prototype.writeNull=function(){this.writeByte(r.Null),this.writeByte(0)},s.prototype.writeEnumeration=function(t,e){if("number"!=typeof t)throw new TypeError("argument must be a Number");return"number"!=typeof e&&(e=r.Enumeration),this.writeInt(t,e)},s.prototype.writeBoolean=function(t,e){if("boolean"!=typeof t)throw new TypeError("argument must be a Boolean");"number"!=typeof e&&(e=r.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0},s.prototype.writeString=function(e,s){if("string"!=typeof e)throw new TypeError("argument must be a string (was: "+typeof e+")");"number"!=typeof s&&(s=r.OctetString);var i=t.byteLength(e);this.writeByte(s),this.writeLength(i),i&&(this._ensure(i),this._buf.write(e,this._offset),this._offset+=i)},s.prototype.writeBuffer=function(e,s){if("number"!=typeof s)throw new TypeError("tag must be a number");if(!t.isBuffer(e))throw new TypeError("argument must be a buffer");this.writeByte(s),this.writeLength(e.length),this._ensure(e.length),e.copy(this._buf,this._offset,0,e.length),this._offset+=e.length},s.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach(function(t){e.writeString(t)})},s.prototype.writeOID=function(t,e){function s(t,e){128>e?t.push(e):16384>e?(t.push(e>>>7|128),t.push(127&e)):2097152>e?(t.push(e>>>14|128),t.push(255&(e>>>7|128)),t.push(127&e)):268435456>e?(t.push(e>>>21|128),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e)):(t.push(255&(e>>>28|128)),t.push(255&(e>>>21|128)),t.push(255&(e>>>14|128)),t.push(255&(e>>>7|128)),t.push(127&e))}if("string"!=typeof t)throw new TypeError("argument must be a string");if("number"!=typeof e&&(e=r.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");var i=t.split("."),f=[];f.push(40*parseInt(i[0],10)+parseInt(i[1],10)),i.slice(2).forEach(function(t){s(f,parseInt(t,10))});var o=this;this._ensure(2+f.length),this.writeByte(e),this.writeLength(f.length),f.forEach(function(t){o.writeByte(t)})},s.prototype.writeLength=function(t){if("number"!=typeof t)throw new TypeError("argument must be a Number");if(this._ensure(4),127>=t)this._buf[this._offset++]=t;else if(255>=t)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(65535>=t)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else{if(!(16777215>=t))throw new InvalidAsn1ERror("Length too long (> 4 bytes)");this._shift(start,t,1),this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t}},s.prototype.startSequence=function(t){"number"!=typeof t&&(t=r.Sequence|r.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3},s.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,s=this._offset-e;if(127>=s)this._shift(e,s,-2),this._buf[t]=s;else if(255>=s)this._shift(e,s,-1),this._buf[t]=129,this._buf[t+1]=s;else if(65535>=s)this._buf[t]=130,this._buf[t+1]=s>>8,this._buf[t+2]=s;else{if(!(16777215>=s))throw new InvalidAsn1Error("Sequence too long");this._shift(e,s,1),this._buf[t]=131,this._buf[t+1]=s>>16,this._buf[t+2]=s>>8,this._buf[t+3]=s}},s.prototype._shift=function(t,e,s){i.ok(void 0!==t),i.ok(void 0!==e),i.ok(s),this._buf.copy(this._buf,t+s,t,t+e),this._offset+=s},s.prototype._ensure=function(e){if(i.ok(e),this._size-this._offset<e){var s=this._size*this._options.growthFactor;s-this._offset<e&&(s+=e);var r=new t(s);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=s}},module.exports=s}).call(this,require("buffer").Buffer);


},{"./errors":196,"./types":199,"assert":34,"buffer":49}],201:[function(require,module,exports){
  var Ber=require("./ber/index");module.exports={Ber:Ber,BerReader:Ber.Reader,BerWriter:Ber.Writer};


},{"./ber/index":197}],202:[function(require,module,exports){
  (function(e,r){function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){return e.charAt(0).toLowerCase()+e.slice(1)}function n(){return w.format.apply(w,arguments)}function a(e,r,t,o){if(!E){t=t||r,o=o||a.caller;var i=typeof e;if(i!==r)throw new g.AssertionError({message:n(k,t,r),actual:i,expected:r,operator:"===",stackStartFunction:o})}}function i(e,r,t,o){if(!(E||(t=t||r,o=o||i.caller,e instanceof r)))throw new g.AssertionError({message:n(k,t,r.name),actual:u(e),expected:r.name,operator:"instanceof",stackStartFunction:o})}function u(e){return Object.prototype.toString.call(e).slice(8,-1)}function c(e,r,t){if(!E){if(t=t||r,!Array.isArray(e))throw new g.AssertionError({message:n(v,t,r),actual:typeof e,expected:"array",operator:"Array.isArray",stackStartFunction:c.caller});for(var o=0;o<e.length;o++)a(e[o],r,t,c)}}function f(e,r){a(e,"boolean",r,f)}function s(e,t){if(!r.isBuffer(e))throw new g.AssertionError({message:n(k,t||"","Buffer"),actual:typeof e,expected:"buffer",operator:"Buffer.isBuffer",stackStartFunction:s})}function l(e,r){a(e,"function",r)}function p(e,r){if(a(e,"number",r),!E&&(isNaN(e)||!isFinite(e)))throw new g.AssertionError({message:n(k,r,"number"),actual:e,expected:"number",operator:"isNaN",stackStartFunction:p})}function m(e,r){a(e,"object",r)}function d(e,r){i(e,h,r)}function b(e,r){i(e,Date,r)}function A(e,r){i(e,RegExp,r)}function x(e,r){a(e,"string",r)}function y(e,r){if(x(e,r),!E&&!F.test(e))throw new g.AssertionError({message:n(k,r,"uuid"),actual:"string",expected:"uuid",operator:"test",stackStartFunction:y})}var g=require("assert"),h=require("stream").Stream,w=require("util"),E=e.env.NODE_NDEBUG||!1,F=/^[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{4}-[a-fA-F0-9]{12}$/,v="%s ([%s]) required",k="%s (%s) is required";module.exports={bool:f,buffer:s,date:b,func:l,number:p,object:m,regexp:A,stream:d,string:x,uuid:y},Object.keys(module.exports).forEach(function(e){if("buffer"!==e){var r="arrayOf"+t(e);"bool"===e&&(e="boolean"),"func"===e&&(e="function"),module.exports[r]=function(r,t){c(r,e,t)}}}),Object.keys(module.exports).forEach(function(e){var r="optional"+t(e),n=o(e.replace("arrayOf",""));"bool"===n&&(n="boolean"),"func"===n&&(n="function"),-1!==e.indexOf("arrayOf")?module.exports[r]=function(e,r){E||void 0===e||c(e,n,r)}:module.exports[r]=function(e,r){E||void 0===e||a(e,n,r)}}),Object.keys(g).forEach(function(e){return"AssertionError"===e?void(module.exports[e]=g[e]):void(module.exports[e]=function(){E||g[e].apply(g[e],arguments)})})}).call(this,require("FWaASH"),require("buffer").Buffer);


},{"FWaASH":67,"assert":34,"buffer":49,"stream":73,"util":81}],203:[function(require,module,exports){
  function ctfParseInteger(t,e){var r,n,i,o;if(r=t.name,!("signed"in t.integer))throw new Error("Malformed CTF JSON: integer missing signed value");if(!("length"in t.integer))throw new Error("Malformed CTF JSON: integer missing length value");if(n=t.integer.signed,i=t.integer.length,o=null,n&&1==i?o="int8_t":1==i?o="uint8_t":n&&2==i?o="int16_t":2==i?o="uint16_t":n&&4==i?o="int32_t":4==i?o="uint32_t":n&&8==i?o="int64_t":8==i&&(o="uint64_t"),null===o)throw new Error("Malformed CTF JSON: integer has unsupported length and sign - "+i+"/"+n);return r!=o?"char"==r?void ASSERT("int8_t"==o):void e.typedef(r,o):void 0}function ctfParseFloat(t,e){var r,n;if(r=t.name,!("length"in t["float"]))throw new Error("Malformed CTF JSON: float missing length value");if(n=t["float"].length,4!=n&&8!=n)throw new Error("Malformed CTF JSON: float has invalid length value");if(4==n){if("float"==r)return;e.typedef(r,"float")}else if(8==n){if("double"==r)return;e.typedef(r,"double")}}function ctfParseTypedef(t,e){var r,n,i;if(r=t.name,"string"!=typeof t.typedef)throw new Error("Malformed CTF JSON: typedef value in not a string");for(n=t.typedef,i=0;i<ctf_deftypes.length;i++)if(r==ctf_deftypes[i])return;e.typedef(r,n)}function ctfParseStruct(t,e){var r,n,i,o,a,f,s;if(f=[],!Array.isArray(t.struct))throw new Error("Malformed CTF JSON: struct value is not an array");for(i=0;i<t.struct.length;i++){if(o=t.struct[i],!("name"in o))throw new Error("Malformed CTF JSON: struct member missing name");if(!("type"in o))throw new Error("Malformed CTF JSON: struct member missing type");if("string"!=typeof o.name)throw new Error("Malformed CTF JSON: struct member name isn't a string");if("string"!=typeof o.type)throw new Error("Malformed CTF JSON: struct member type isn't a string");r=o.name,n=o.type,a=n.indexOf(" ["),-1!=a&&(n=n.substring(0,a)+n.substring(a+1,n.length)),s={},s[r]={type:n},f.push(s)}r=t.name,e.typedef(r,f)}function ctfParseEntry(t,e){var r,n;if(!("name"in t))throw new Error('Malformed CTF JSON: entry missing "name" section');for(r=0;r<ctf_entries.length;r++)ctf_entries[r]in t&&n++;if(0===n)throw new Error("Malformed CTF JSON: found no entries");if(n>=2)throw new Error("Malformed CTF JSON: found more than one entry");return"integer"in t?void ctfParseInteger(t,e):"float"in t?void ctfParseFloat(t,e):"typedef"in t?void ctfParseTypedef(t,e):"struct"in t?void ctfParseStruct(t,e):void ASSERT(!1,"shouldn't reach here")}function ctfParseJson(t,e){var r,n;if(ASSERT(t),ASSERT(e),!("metadata"in t))throw new Error("Invalid CTF JSON: missing metadata section");if(!("ctf2json_version"in t.metadata))throw new Error("Invalid CTF JSON: missing ctf2json_version");for(r=t.metadata.ctf2json_version,n=0;n<ctf_versions.length&&ctf_versions[n]!=r;n++);if(n==ctf_versions.length)throw new Error("Unsuported ctf2json_version: "+r);if(!("data"in t))throw new Error("Invalid CTF JSON: missing data section");if(!Array.isArray(t.data))throw new Error("Malformed CTF JSON: data section is not an array");for(n=0;n<t.data.length;n++)ctfParseEntry(t.data[n],e)}var mod_assert=require("assert"),ASSERT=mod_assert.ok,ctf_versions=["1.0"],ctf_entries=["integer","float","typedef","struct"],ctf_deftypes=["int8_t","uint8_t","int16_t","uint16_t","int32_t","uint32_t","float","double"];exports.ctfParseJson=ctfParseJson;


},{"assert":34}],204:[function(require,module,exports){
  function ruint8(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i>=r.length)throw new Error("Trying to read beyond buffer length");return r[i]}function rgint16(r,n,i){var o=0;return"big"==n?(o=r[i]<<8,o|=r[i+1]):(o=r[i],o|=r[i+1]<<8),o}function ruint16(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+1>=r.length)throw new Error("Trying to read beyond buffer length");return rgint16(r,n,i)}function rgint32(r,n,i){var o=0;return"big"==n?(o=r[i+1]<<16,o|=r[i+2]<<8,o|=r[i+3],o+=r[i]<<24>>>0):(o=r[i+2]<<16,o|=r[i+1]<<8,o|=r[i],o+=r[i+3]<<24>>>0),o}function ruint32(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return rgint32(r,n,i)}function rgint64(r,n,i){var o=new Array(2);return"big"==n?(o[0]=ruint32(r,n,i),o[1]=ruint32(r,n,i+4)):(o[0]=ruint32(r,n,i+4),o[1]=ruint32(r,n,i)),o}function ruint64(r,n,i){if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+7>=r.length)throw new Error("Trying to read beyond buffer length");return rgint64(r,n,i)}function rsint8(r,n,i){var o;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i>=r.length)throw new Error("Trying to read beyond buffer length");return o=128&r[i],o?-1*(255-r[i]+1):r[i]}function rsint16(r,n,i){var o,e;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+1>=r.length)throw new Error("Trying to read beyond buffer length");return e=rgint16(r,n,i),o=32768&e,o?-1*(65535-e+1):e}function rsint32(r,n,i){var o,e;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return e=rgint32(r,n,i),o=2147483648&e,o?-1*(4294967295-e+1):e}function rsint64(r,n,i){var o,e;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return e=rgint64(r,n,i),(o=2147483648&e[0])?(e[0]=-1*(4294967295-e[0]),e[1]=-1*(4294967295-e[1]+1),mod_assert.ok(e[1]<=4294967296),-4294967296==e[1]&&(e[1]=0,e[0]--),e):e}function rfloat(r,n,i){var o,e,t,f,w=[],s=127,u=255;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+3>=r.length)throw new Error("Trying to read beyond buffer length");return"big"==n?(w[0]=r[i],w[1]=r[i+1],w[2]=r[i+2],w[3]=r[i+3]):(w[3]=r[i],w[2]=r[i+1],w[1]=r[i+2],w[0]=r[i+3]),o=128&w[0],e=(127&w[0])<<1,e|=(128&w[1])>>>7,t=(127&w[1])<<16,t|=w[2]<<8,t|=w[3],o||e!=u||0!==t?o&&e==u&&0===t?Number.NEGATIVE_INFINITY:e==u&&0!==t?Number.NaN:0===e&&0===t?0:(e-=s,e==-s?(e++,f=0):f=1,f=(f+t*Math.pow(2,-23))*Math.pow(2,e),o&&(f*=-1),f):Number.POSITIVE_INFINITY}function rdouble(r,n,i){var o,e,t,f,w,s=[],u=1023,a=2047;if(void 0===n)throw new Error("missing endian");if(void 0===r)throw new Error("missing buffer");if(void 0===i)throw new Error("missing offset");if(i+7>=r.length)throw new Error("Trying to read beyond buffer length");return"big"==n?(s[0]=r[i],s[1]=r[i+1],s[2]=r[i+2],s[3]=r[i+3],s[4]=r[i+4],s[5]=r[i+5],s[6]=r[i+6],s[7]=r[i+7]):(s[7]=r[i],s[6]=r[i+1],s[5]=r[i+2],s[4]=r[i+3],s[3]=r[i+4],s[2]=r[i+5],s[1]=r[i+6],s[0]=r[i+7]),o=128&s[0],e=(127&s[0])<<4,e|=(240&s[1])>>>4,w=s[7],w|=s[6]<<8,w|=s[5]<<16,t=s[4],t|=s[3]<<8,t|=s[2]<<16,t|=(15&s[1])<<24,t*=Math.pow(2,24),t+=w,o||e!=a||0!==t?o&&e==a&&0===t?Number.NEGATIVE_INFINITY:e==a&&0!==t?Number.NaN:0===e&&0===t?0:(e-=u,e==-u?(e++,f=0):f=1,f=(f+t*Math.pow(2,-52))*Math.pow(2,e),o&&(f*=-1),f):Number.POSITIVE_INFINITY}function prepuint(r,n){if("number"!=typeof r)throw new(Error("cannot write a non-number as a number"));if(0>r)throw new Error("specified a negative value for writing an unsigned value");if(r>n)throw new Error("value is larger than maximum value for type");if(Math.floor(r)!==r)throw new Error("value has a fractional component");return r}function wuint8(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o>=i.length)throw new Error("Trying to read beyond buffer length");e=prepuint(r,255),i[o]=e}function wgint16(r,n,i,o){"big"==n?(i[o]=(65280&r)>>>8,i[o+1]=255&r):(i[o+1]=(65280&r)>>>8,i[o]=255&r)}function wuint16(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+1>=i.length)throw new Error("Trying to read beyond buffer length");e=prepuint(r,65535),wgint16(e,n,i,o)}function wgint32(r,n,i,o){"big"==n?(i[o]=(r-(16777215&r))/Math.pow(2,24),i[o+1]=r>>>16&255,i[o+2]=r>>>8&255,i[o+3]=255&r):(i[o+3]=(r-(16777215&r))/Math.pow(2,24),i[o+2]=r>>>16&255,i[o+1]=r>>>8&255,i[o]=255&r)}function wuint32(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+3>=i.length)throw new Error("Trying to read beyond buffer length");e=prepuint(r,4294967295),wgint32(e,n,i,o)}function wgint64(r,n,i,o){"big"==n?(wgint32(r[0],n,i,o),wgint32(r[1],n,i,o+4)):(wgint32(r[0],n,i,o+4),wgint32(r[1],n,i,o))}function wuint64(r,n,i,o){if(void 0===r)throw new Error("missing value");if(!(r instanceof Array))throw new Error("value must be an array");if(2!=r.length)throw new Error("value must be an array of length 2");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+7>=i.length)throw new Error("Trying to read beyond buffer length");prepuint(r[0],4294967295),prepuint(r[1],4294967295),wgint64(r,n,i,o)}function prepsint(r,n,i){if("number"!=typeof r)throw new(Error("cannot write a non-number as a number"));if(r>n)throw new Error("value larger than maximum allowed value");if(i>r)throw new Error("value smaller than minimum allowed value");if(Math.floor(r)!==r)throw new Error("value has a fractional component");return r}function wsint8(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o>=i.length)throw new Error("Trying to read beyond buffer length");e=prepsint(r,127,-128),e>=0?wuint8(e,n,i,o):wuint8(255+e+1,n,i,o)}function wsint16(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+1>=i.length)throw new Error("Trying to read beyond buffer length");e=prepsint(r,32767,-32768),e>=0?wgint16(e,n,i,o):wgint16(65535+e+1,n,i,o)}function wsint32(r,n,i,o){var e;if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+3>=i.length)throw new Error("Trying to read beyond buffer length");e=prepsint(r,2147483647,-2147483648),e>=0?wgint32(e,n,i,o):wgint32(4294967295+e+1,n,i,o)}function wsint64(r,n,i,o){var e,t,f=new Array(2);if(void 0===r)throw new Error("missing value");if(!(r instanceof Array))throw new Error("value must be an array");if(2!=r.length)throw new Error("value must be an array of length 2");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+7>=i.length)throw new Error("Trying to read beyond buffer length");if(e=r[0]*Number.POSITIVE_INFINITY==Number.POSITIVE_INFINITY,t=r[1]*Number.POSITIVE_INFINITY==Number.POSITIVE_INFINITY,0!=r[0]&&0!=r[1]&&e!=t)throw new Error("Both entries in the array must have the same sign");if(e)prepuint(r[0],2147483647),prepuint(r[1],4294967295);else if(prepsint(r[0],0,-2147483648),prepsint(r[1],0,-4294967295),-2147483648==r[0]&&0!=r[1])throw new Error("value smaller than minimum allowed value");r[0]<0||r[1]<0?(f[0]=4294967295-Math.abs(r[0]),f[1]=4294967296-Math.abs(r[1]),4294967296==f[1]&&(f[1]=0,f[0]++)):(f[0]=r[0],f[1]=r[1]),wgint64(f,n,i,o)}function log2(r){return Math.log(r)/Math.log(2)}function intexp(r){return Math.floor(log2(r))}function fracexp(r){return Math.floor(log2(r))}function wfloat(r,n,i,o){var e,t,f,w,s=[];if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+3>=i.length)throw new Error("Trying to read beyond buffer length");isNaN(r)?(e=0,t=255,f=23):r==Number.POSITIVE_INFINITY?(e=0,t=255,f=0):r==Number.NEGATIVE_INFINITY?(e=1,t=255,f=0):(0>r?(e=1,r=Math.abs(r)):e=0,w=1>r?fracexp(r):intexp(r),-127>=w?(t=0,f=r*Math.pow(2,149)&8388607):(t=127+w,f=r*Math.pow(2,23-w),f&=8388607)),s[0]=e<<7|(254&t)>>>1,s[1]=(1&t)<<7|(8323072&f)>>>16,s[2]=(65280&f)>>>8,s[3]=255&f,"big"==n?(i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2],i[o+3]=s[3]):(i[o]=s[3],i[o+1]=s[2],i[o+2]=s[1],i[o+3]=s[0])}function wdouble(r,n,i,o){var e,t,f,w,s=[];if(void 0===r)throw new Error("missing value");if(void 0===n)throw new Error("missing endian");if(void 0===i)throw new Error("missing buffer");if(void 0===o)throw new Error("missing offset");if(o+7>=i.length)throw new Error("Trying to read beyond buffer length");isNaN(r)?(e=0,t=2047,f=23):r==Number.POSITIVE_INFINITY?(e=0,t=2047,f=0):r==Number.NEGATIVE_INFINITY?(e=1,t=2047,f=0):(0>r?(e=1,r=Math.abs(r)):e=0,w=1>r?fracexp(r):intexp(r),2.225073858507201e-308>=r||-1023>=w?(t=0,f=r*Math.pow(2,1023)*Math.pow(2,51),f%=Math.pow(2,52)):(w>1023&&(w=1023),t=1023+w,f=r*Math.pow(2,-w),f*=Math.pow(2,52),f%=Math.pow(2,52))),s[7]=255&f,s[6]=f>>>8&255,s[5]=f>>>16&255,f=(f-(16777215&f))/Math.pow(2,24),s[4]=255&f,s[3]=f>>>8&255,s[2]=f>>>16&255,s[1]=(15&t)<<4|f>>>24,s[0]=e<<7|(2032&t)>>>4,"big"==n?(i[o]=s[0],i[o+1]=s[1],i[o+2]=s[2],i[o+3]=s[3],i[o+4]=s[4],i[o+5]=s[5],i[o+6]=s[6],i[o+7]=s[7]):(i[o+7]=s[0],i[o+6]=s[1],i[o+5]=s[2],i[o+4]=s[3],i[o+3]=s[4],i[o+2]=s[5],i[o+1]=s[6],i[o]=s[7])}var mod_assert=require("assert");exports.ruint8=ruint8,exports.ruint16=ruint16,exports.ruint32=ruint32,exports.ruint64=ruint64,exports.wuint8=wuint8,exports.wuint16=wuint16,exports.wuint32=wuint32,exports.wuint64=wuint64,exports.rsint8=rsint8,exports.rsint16=rsint16,exports.rsint32=rsint32,exports.rsint64=rsint64,exports.wsint8=wsint8,exports.wsint16=wsint16,exports.wsint32=wsint32,exports.wsint64=wsint64,exports.rfloat=rfloat,exports.rdouble=rdouble,exports.wfloat=wfloat,exports.wdouble=wdouble;


},{"assert":34}],205:[function(require,module,exports){
  (function(r){function t(r,t,e){var n=C.ruint8(t,r,e);return{value:n,size:1}}function e(r,t,e){var n=C.ruint16(t,r,e);return{value:n,size:2}}function n(r,t,e){var n=C.ruint32(t,r,e);return{value:n,size:4}}function i(r,t,e){var n=C.ruint64(t,r,e);return{value:n,size:8}}function o(r,t,e){var n=C.rsint8(t,r,e);return{value:n,size:1}}function a(r,t,e){var n=C.rsint16(t,r,e);return{value:n,size:2}}function s(r,t,e){var n=C.rsint32(t,r,e);return{value:n,size:4}}function u(r,t,e){var n=C.rsint64(t,r,e);return{value:n,size:8}}function f(r,t,e){var n=C.rfloat(t,r,e);return{value:n,size:4}}function w(r,t,e){var n=C.rdouble(t,r,e);return{value:n,size:8}}function p(t,e,n){var i=new r(1);return i[0]=C.ruint8(e,t,n),{value:i,size:1}}function h(t,e,n,i){var o,a=new r(t);for(o=0;t>o;o++)a[o]=C.ruint8(n,e,i+o);return{value:a,size:t}}function y(r,t,e,n){return C.wuint8(r,t,e,n),1}function d(r,t,e,n){return C.wuint16(r,t,e,n),2}function l(r,t,e,n){return C.wuint32(r,t,e,n),4}function c(r,t,e,n){return C.wuint64(r,t,e,n),8}function v(r,t,e,n){return C.wsint8(r,t,e,n),1}function g(r,t,e,n){return C.wsint16(r,t,e,n),2}function E(r,t,e,n){return C.wsint32(r,t,e,n),4}function b(r,t,e,n){return C.wsint64(r,t,e,n),8}function m(r,t,e,n){return C.wfloat(r,t,e,n),4}function x(r,t,e,n){return C.wdouble(r,t,e,n),8}function z(t,e,n,i){if(!(t instanceof r))throw new Error("Input must be a buffer");return C.ruint8(t[0],e,n,i),1}function A(t,e,n,i,o){var a;if(!(t instanceof r))throw new Error("Input must be a buffer");if(t.length>e)throw new Error("value length greater than array length");for(a=0;a<t.length&&e>a;a++)C.wuint8(t[a],n,i,o+a);for(;e>a;a++)C.wuint8(0,n,o+a);return e}function q(){var r,t={};for(r in J)t[r]=J[r];return t}function I(r){var t,e,n,i;if("string"!=typeof r)throw new Error("type must be a Javascript string");if(e=r.lastIndexOf("]"),-1==e){if(-1!=r.lastIndexOf("["))throw new Error("found invalid type with '[' but no corresponding ']'");return{type:r}}if(t=r.lastIndexOf("["),-1==t)throw new Error("found invalid type with ']' but no corresponding '['");if(t>=e)throw new Error("malformed type, ']' appears before '['");return n=r.substring(0,t),i=r.substring(t+1,e),{type:n,len:i}}function N(r,t,e){var n,i,o,a,s,u={};if(!(r instanceof Array))throw new Error("definition is not an array");if(0===r.length)throw new Error("definition must have at least one element");for(n=0;n<r.length;n++){if(o=r[n],!(o instanceof Object))throw new Error("definition must be an array ofobjects");if(a=Object.keys(o),1!=a.length)throw new Error("definition entry must only have one key");if(a[0]in u)throw new Error("Specified name already specified: "+a[0]);if(!("type"in o[a[0]]))throw new Error("missing required type definition");for(s=I(o[a[0]].type);void 0!==s.len;){if(isNaN(parseInt(s.len,10))&&!(s.len in u))throw new Error("Given an array length without a matching type");s=I(s.type)}if(!(s.type in t))throw new Error("type not found or typdefed: "+s.type);if(void 0!==e)for(i=0;i<e.length;i++)if(!(e[i]in o[a[0]]))throw new Error("Missing required field: "+e[i]);u[a[0]]=!0}}function _(r){if(!r)throw new Error("missing required argument");if(!("endian"in r))throw new Error("missing required endian value");if("big"!=r.endian&&"little"!=r.endian)throw new Error("Invalid endian type");if("char-type"in r&&"uint8"!=r["char-type"]&&"int8"!=r["char-type"])throw new Error("invalid option for char-type: "+r["char-type"]);this.endian=r.endian,this.types=q(),"char-type"in r&&"uint8"==r["char-type"]&&(this.types["char"]=this.types.uint8_t),"char-type"in r&&"int8"==r["char-type"]&&(this.types["char"]=this.types.int8_t)}function k(r,t){for(var e="",n=I(r);void 0!==n.len;){if(isNaN(parseInt(n.len,10))){if("number"!=typeof t[n.len])throw new Error("cannot sawp in non-number for array value");e="["+t[n.len]+"]"+e}else e="["+n.len+"]"+e;n=I(n.type)}return e=n.type+e}function j(r){var t,e,n;for(e=[],t=0;t<r.length;t++)n=Object.keys(r[t])[0],D.ok("value"in r[t][n]),e.push(r[t][n].value);return e}function O(r){if(void 0===r)throw new Error("missing required arg: value");if(!Array.isArray(r))throw new Error("value must be an array");if(2!=r.length)throw new Error("value must be an array of length 2");if(r[0]>=1048576)throw new Error("value would become approximated");return r[0]*Math.pow(2,32)+r[1]}function S(r){if(void 0===r)throw new Error("missing required arg: value");if(!Array.isArray(r))throw new Error("value must be an array");if(2!=r.length)throw new Error("value must be an array of length 2");return Math.pow(2,32)*r[0]+r[1]}function T(r,t){var e=new _(t);return M.ctfParseJson(r,e),e}var M=require("./ctf.js"),C=require("./ctio.js"),D=require("assert"),J={uint8_t:{read:t,write:y},uint16_t:{read:e,write:d},uint32_t:{read:n,write:l},uint64_t:{read:i,write:c},int8_t:{read:o,write:v},int16_t:{read:a,write:g},int32_t:{read:s,write:E},int64_t:{read:u,write:b},"float":{read:f,write:m},"double":{read:w,write:x},"char":{read:p,write:z},"char[]":{read:h,write:A}};_.prototype.setEndian=function(r){if("big"!=r&&"little"!=r)throw new Error("invalid endian type, must be big or little");this.endian=r},_.prototype.getEndian=function(){return this.endian},_.prototype.typedef=function(r,t){var e;if(void 0===r)throw new(Error("missing required typedef argument: name"));if(void 0===t)throw new(Error("missing required typedef argument: value"));if("string"!=typeof r)throw new(Error("the name of a type must be a string"));if(e=I(r),void 0!==e.len)throw new Error("Cannot have an array in the typedef name");if(r in this.types)throw new Error("typedef name already present: "+r);if("string"!=typeof t&&!(t instanceof Array))throw new Error("typedef value must either be a string or struct");if("string"==typeof t){if(e=I(t),void 0!==e.len&&isNaN(parseInt(e.len,10)))throw new(Error("typedef value must use fixed size array when outside of a struct"));this.types[r]=t}else N(t,this.types),this.types[r]=t},_.prototype.lstypes=function(){var r,t={};for(r in this.types)r in J||(t[r]=this.types[r]);return t},_.prototype.resolveTypedef=function(r,t,e,n,i){var o;if(D.ok(r in this.types),"string"==typeof this.types[r]){if(o=I(this.types[r]),"read"==t)return this.readEntry(o,e,n);if("write"==t)return this.writeEntry(i,o,e,n);throw new Error("invalid dispatch type to resolveTypedef")}if("read"==t)return this.readStruct(this.types[r],e,n);if("write"==t)return this.writeStruct(i,this.types[r],e,n);throw new Error("invalid dispatch type to resolveTypedef")},_.prototype.readEntry=function(r,t,e){var n,i;if(void 0!==r.len){if(i=parseInt(r.len,10),isNaN(i))throw new Error("somehow got a non-numeric length");n="char"==r.type?this.types["char[]"].read(i,this.endian,t,e):this.readArray(r.type,i,t,e)}else n=r.type in J?this.types[r.type].read(this.endian,t,e):this.resolveTypedef(r.type,"read",t,e);return n},_.prototype.readArray=function(r,t,e,n){var i,o,a,s=n,u=new Array(t);for(a=I(r),i=0;t>i;i++)o=this.readEntry(a,e,n),n+=o.size,u[i]=o.value;return{value:u,size:n-s}},_.prototype.readStruct=function(r,t,e){var n,i,o,a,s,u=e,f={};for(i=0;i<r.length;i++)s=Object.keys(r[i])[0],a=r[i][s],o=I(k(a.type,f)),"offset"in a&&(e=u+a.offset),n=this.readEntry(o,t,e),e+=n.size,f[s]=n.value;return{value:f,size:e-u}},_.prototype.readData=function(r,t,e){if(void 0===r)throw new Error("missing definition for what we should beparsing");if(void 0===t)throw new Error("missing buffer for what we should be parsing");if(void 0===e)throw new Error("missing offset for what we should be parsing");return N(r,this.types),this.readStruct(r,t,e).value},_.prototype.writeArray=function(r,t,e,n,i){var o,a,s=i;if(!(r instanceof Array))throw new Error("asked to write an array, but value is not an array");if(r.length!=e)throw new Error("asked to write array of length "+e+" but that does not match value length: "+r.length);for(a=I(t),o=0;e>o;o++)i+=this.writeEntry(r[o],a,n,i);return i-s},_.prototype.writeEntry=function(r,t,e,n){var i,o;if(void 0!==t.len){if(i=parseInt(t.len,10),isNaN(i))throw new Error("somehow got a non-numeric length");o="char"==t.type?this.types["char[]"].write(r,i,this.endian,e,n):this.writeArray(r,t.type,i,e,n)}else o=t.type in J?this.types[t.type].write(r,this.endian,e,n):this.resolveTypedef(t.type,"write",e,n,r);return o},_.prototype.writeStruct=function(r,t,e,n){var i,o,a,s,u=n,f={};for(i=0;i<t.length;i++)s=Object.keys(t[i])[0],o=t[i][s],a=I(k(o.type,f)),"offset"in o&&(n=u+o.offset),n+=this.writeEntry(r[i],a,e,n),f[s]=r[i];return n},_.prototype.writeData=function(r,t,e,n){var i;if(void 0===r)throw new Error("missing definition for what we should beparsing");if(void 0===t)throw new Error("missing buffer for what we should be parsing");if(void 0===e)throw new Error("missing offset for what we should be parsing");if(i=null!=n&&void 0!=n){if(!Array.isArray(n))throw new Error("missing values for writing");N(r,this.types)}else N(r,this.types,["value"]);this.writeStruct(i?n:j(r),r,t,e)},exports.Parser=_,exports.toAbs64=O,exports.toApprox64=S,exports.parseCTF=T,exports.ruint8=C.ruint8,exports.ruint16=C.ruint16,exports.ruint32=C.ruint32,exports.ruint64=C.ruint64,exports.wuint8=C.wuint8,exports.wuint16=C.wuint16,exports.wuint32=C.wuint32,exports.wuint64=C.wuint64,exports.rsint8=C.rsint8,exports.rsint16=C.rsint16,exports.rsint32=C.rsint32,exports.rsint64=C.rsint64,exports.wsint8=C.wsint8,exports.wsint16=C.wsint16,exports.wsint32=C.wsint32,exports.wsint64=C.wsint64,exports.rfloat=C.rfloat,exports.rdouble=C.rdouble,exports.wfloat=C.wfloat,exports.wdouble=C.wdouble}).call(this,require("buffer").Buffer);


},{"./ctf.js":203,"./ctio.js":204,"assert":34,"buffer":49}],206:[function(require,module,exports){
  function isStream(e){return e instanceof stream.Stream}function isReadable(e){return isStream(e)&&"function"==typeof e._read&&"object"==typeof e._readableState}function isWritable(e){return isStream(e)&&"function"==typeof e._write&&"object"==typeof e._writableState}function isDuplex(e){return isReadable(e)&&isWritable(e)}var stream=require("stream");module.exports=isStream,module.exports.isReadable=isReadable,module.exports.isWritable=isWritable,module.exports.isDuplex=isDuplex;


},{"stream":73}],207:[function(require,module,exports){
  function stringify(i,r,e,n){return JSON.stringify(i,serializer(r,n),e)}function serializer(i,r){var e=[],n=[];return null==r&&(r=function(i,r){return e[0]===r?"[Circular ~]":"[Circular ~."+n.slice(0,e.indexOf(r)).join(".")+"]"}),function(l,s){if(e.length>0){var t=e.indexOf(this);~t?e.splice(t+1):e.push(this),~t?n.splice(t,1/0,l):n.push(l),~e.indexOf(s)&&(s=r.call(this,l,s))}else e.push(s);return null==i?s:i.call(this,l,s)}}exports=module.exports=stringify,exports.getSerialize=serializer;


},{}],208:[function(require,module,exports){
  "use strict";function charset(e){if(!e||"string"!=typeof e)return!1;var t=extractTypeRegExp.exec(e),r=t&&db[t[1].toLowerCase()];return r&&r.charset?r.charset:t&&textTypeRegExp.test(t[1])?"UTF-8":!1}function contentType(e){if(!e||"string"!=typeof e)return!1;var t=-1===e.indexOf("/")?exports.lookup(e):e;if(!t)return!1;if(-1===t.indexOf("charset")){var r=exports.charset(t);r&&(t+="; charset="+r.toLowerCase())}return t}function extension(e){if(!e||"string"!=typeof e)return!1;var t=extractTypeRegExp.exec(e),r=t&&exports.extensions[t[1].toLowerCase()];return r&&r.length?r[0]:!1}function lookup(e){if(!e||"string"!=typeof e)return!1;var t=extname("x."+e).toLowerCase().substr(1);return t?exports.types[t]||!1:!1}function populateMaps(e,t){var r=["nginx","apache",void 0,"iana"];Object.keys(db).forEach(function(n){var s=db[n],o=s.extensions;if(o&&o.length){e[n]=o;for(var p=0;p<o.length;p++){var a=o[p];if(t[a]){var i=r.indexOf(db[t[a]].source),x=r.indexOf(s.source);if("application/octet-stream"!==t[a]&&i>x||i===x&&"application/"===t[a].substr(0,12))return}t[a]=n}}})}var db=require("mime-db"),extname=require("path").extname,extractTypeRegExp=/^\s*([^;\s]*)(?:;|\s|$)/,textTypeRegExp=/^text\//i;exports.charset=charset,exports.charsets={lookup:charset},exports.contentType=contentType,exports.extension=extension,exports.extensions=Object.create(null),exports.lookup=lookup,exports.types=Object.create(null),populateMaps(exports.extensions,exports.types);


},{"mime-db":210,"path":66}],209:[function(require,module,exports){
  module.exports={
    "application/1d-interleaved-parityfec": {
      "source": "iana"
    },
    "application/3gpdash-qoe-report+xml": {
      "source": "iana"
    },
    "application/3gpp-ims+xml": {
      "source": "iana"
    },
    "application/a2l": {
      "source": "iana"
    },
    "application/activemessage": {
      "source": "iana"
    },
    "application/alto-costmap+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-costmapfilter+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-directory+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointcost+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointcostparams+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointprop+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-endpointpropparams+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-error+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-networkmap+json": {
      "source": "iana",
      "compressible": true
    },
    "application/alto-networkmapfilter+json": {
      "source": "iana",
      "compressible": true
    },
    "application/aml": {
      "source": "iana"
    },
    "application/andrew-inset": {
      "source": "iana",
      "extensions": ["ez"]
    },
    "application/applefile": {
      "source": "iana"
    },
    "application/applixware": {
      "source": "apache",
      "extensions": ["aw"]
    },
    "application/atf": {
      "source": "iana"
    },
    "application/atfx": {
      "source": "iana"
    },
    "application/atom+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["atom"]
    },
    "application/atomcat+xml": {
      "source": "iana",
      "extensions": ["atomcat"]
    },
    "application/atomdeleted+xml": {
      "source": "iana"
    },
    "application/atomicmail": {
      "source": "iana"
    },
    "application/atomsvc+xml": {
      "source": "iana",
      "extensions": ["atomsvc"]
    },
    "application/atxml": {
      "source": "iana"
    },
    "application/auth-policy+xml": {
      "source": "iana"
    },
    "application/bacnet-xdd+zip": {
      "source": "iana"
    },
    "application/batch-smtp": {
      "source": "iana"
    },
    "application/bdoc": {
      "compressible": false,
      "extensions": ["bdoc"]
    },
    "application/beep+xml": {
      "source": "iana"
    },
    "application/calendar+json": {
      "source": "iana",
      "compressible": true
    },
    "application/calendar+xml": {
      "source": "iana"
    },
    "application/call-completion": {
      "source": "iana"
    },
    "application/cals-1840": {
      "source": "iana"
    },
    "application/cbor": {
      "source": "iana"
    },
    "application/ccmp+xml": {
      "source": "iana"
    },
    "application/ccxml+xml": {
      "source": "iana",
      "extensions": ["ccxml"]
    },
    "application/cdfx+xml": {
      "source": "iana"
    },
    "application/cdmi-capability": {
      "source": "iana",
      "extensions": ["cdmia"]
    },
    "application/cdmi-container": {
      "source": "iana",
      "extensions": ["cdmic"]
    },
    "application/cdmi-domain": {
      "source": "iana",
      "extensions": ["cdmid"]
    },
    "application/cdmi-object": {
      "source": "iana",
      "extensions": ["cdmio"]
    },
    "application/cdmi-queue": {
      "source": "iana",
      "extensions": ["cdmiq"]
    },
    "application/cea": {
      "source": "iana"
    },
    "application/cea-2018+xml": {
      "source": "iana"
    },
    "application/cellml+xml": {
      "source": "iana"
    },
    "application/cfw": {
      "source": "iana"
    },
    "application/cms": {
      "source": "iana"
    },
    "application/cnrp+xml": {
      "source": "iana"
    },
    "application/coap-group+json": {
      "source": "iana",
      "compressible": true
    },
    "application/commonground": {
      "source": "iana"
    },
    "application/conference-info+xml": {
      "source": "iana"
    },
    "application/cpl+xml": {
      "source": "iana"
    },
    "application/csrattrs": {
      "source": "iana"
    },
    "application/csta+xml": {
      "source": "iana"
    },
    "application/cstadata+xml": {
      "source": "iana"
    },
    "application/cu-seeme": {
      "source": "apache",
      "extensions": ["cu"]
    },
    "application/cybercash": {
      "source": "iana"
    },
    "application/dart": {
      "compressible": true
    },
    "application/dash+xml": {
      "source": "iana",
      "extensions": ["mdp"]
    },
    "application/dashdelta": {
      "source": "iana"
    },
    "application/davmount+xml": {
      "source": "iana",
      "extensions": ["davmount"]
    },
    "application/dca-rft": {
      "source": "iana"
    },
    "application/dcd": {
      "source": "iana"
    },
    "application/dec-dx": {
      "source": "iana"
    },
    "application/dialog-info+xml": {
      "source": "iana"
    },
    "application/dicom": {
      "source": "iana"
    },
    "application/dii": {
      "source": "iana"
    },
    "application/dit": {
      "source": "iana"
    },
    "application/dns": {
      "source": "iana"
    },
    "application/docbook+xml": {
      "source": "apache",
      "extensions": ["dbk"]
    },
    "application/dskpp+xml": {
      "source": "iana"
    },
    "application/dssc+der": {
      "source": "iana",
      "extensions": ["dssc"]
    },
    "application/dssc+xml": {
      "source": "iana",
      "extensions": ["xdssc"]
    },
    "application/dvcs": {
      "source": "iana"
    },
    "application/ecmascript": {
      "source": "iana",
      "compressible": true,
      "extensions": ["ecma"]
    },
    "application/edi-consent": {
      "source": "iana"
    },
    "application/edi-x12": {
      "source": "iana",
      "compressible": false
    },
    "application/edifact": {
      "source": "iana",
      "compressible": false
    },
    "application/emma+xml": {
      "source": "iana",
      "extensions": ["emma"]
    },
    "application/emotionml+xml": {
      "source": "iana"
    },
    "application/encaprtp": {
      "source": "iana"
    },
    "application/epp+xml": {
      "source": "iana"
    },
    "application/epub+zip": {
      "source": "iana",
      "extensions": ["epub"]
    },
    "application/eshop": {
      "source": "iana"
    },
    "application/exi": {
      "source": "iana",
      "extensions": ["exi"]
    },
    "application/fastinfoset": {
      "source": "iana"
    },
    "application/fastsoap": {
      "source": "iana"
    },
    "application/fdt+xml": {
      "source": "iana"
    },
    "application/fits": {
      "source": "iana"
    },
    "application/font-sfnt": {
      "source": "iana"
    },
    "application/font-tdpfr": {
      "source": "iana",
      "extensions": ["pfr"]
    },
    "application/font-woff": {
      "source": "iana",
      "compressible": false,
      "extensions": ["woff"]
    },
    "application/font-woff2": {
      "compressible": false,
      "extensions": ["woff2"]
    },
    "application/framework-attributes+xml": {
      "source": "iana"
    },
    "application/gml+xml": {
      "source": "apache",
      "extensions": ["gml"]
    },
    "application/gpx+xml": {
      "source": "apache",
      "extensions": ["gpx"]
    },
    "application/gxf": {
      "source": "apache",
      "extensions": ["gxf"]
    },
    "application/gzip": {
      "source": "iana",
      "compressible": false
    },
    "application/h224": {
      "source": "iana"
    },
    "application/held+xml": {
      "source": "iana"
    },
    "application/http": {
      "source": "iana"
    },
    "application/hyperstudio": {
      "source": "iana",
      "extensions": ["stk"]
    },
    "application/ibe-key-request+xml": {
      "source": "iana"
    },
    "application/ibe-pkg-reply+xml": {
      "source": "iana"
    },
    "application/ibe-pp-data": {
      "source": "iana"
    },
    "application/iges": {
      "source": "iana"
    },
    "application/im-iscomposing+xml": {
      "source": "iana"
    },
    "application/index": {
      "source": "iana"
    },
    "application/index.cmd": {
      "source": "iana"
    },
    "application/index.obj": {
      "source": "iana"
    },
    "application/index.response": {
      "source": "iana"
    },
    "application/index.vnd": {
      "source": "iana"
    },
    "application/inkml+xml": {
      "source": "iana",
      "extensions": ["ink","inkml"]
    },
    "application/iotp": {
      "source": "iana"
    },
    "application/ipfix": {
      "source": "iana",
      "extensions": ["ipfix"]
    },
    "application/ipp": {
      "source": "iana"
    },
    "application/isup": {
      "source": "iana"
    },
    "application/its+xml": {
      "source": "iana"
    },
    "application/java-archive": {
      "source": "apache",
      "compressible": false,
      "extensions": ["jar","war","ear"]
    },
    "application/java-serialized-object": {
      "source": "apache",
      "compressible": false,
      "extensions": ["ser"]
    },
    "application/java-vm": {
      "source": "apache",
      "compressible": false,
      "extensions": ["class"]
    },
    "application/javascript": {
      "source": "iana",
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["js"]
    },
    "application/jose": {
      "source": "iana"
    },
    "application/jose+json": {
      "source": "iana",
      "compressible": true
    },
    "application/jrd+json": {
      "source": "iana",
      "compressible": true
    },
    "application/json": {
      "source": "iana",
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["json","map"]
    },
    "application/json-patch+json": {
      "source": "iana",
      "compressible": true
    },
    "application/json-seq": {
      "source": "iana"
    },
    "application/json5": {
      "extensions": ["json5"]
    },
    "application/jsonml+json": {
      "source": "apache",
      "compressible": true,
      "extensions": ["jsonml"]
    },
    "application/jwk+json": {
      "source": "iana",
      "compressible": true
    },
    "application/jwk-set+json": {
      "source": "iana",
      "compressible": true
    },
    "application/jwt": {
      "source": "iana"
    },
    "application/kpml-request+xml": {
      "source": "iana"
    },
    "application/kpml-response+xml": {
      "source": "iana"
    },
    "application/ld+json": {
      "source": "iana",
      "compressible": true,
      "extensions": ["jsonld"]
    },
    "application/link-format": {
      "source": "iana"
    },
    "application/load-control+xml": {
      "source": "iana"
    },
    "application/lost+xml": {
      "source": "iana",
      "extensions": ["lostxml"]
    },
    "application/lostsync+xml": {
      "source": "iana"
    },
    "application/lxf": {
      "source": "iana"
    },
    "application/mac-binhex40": {
      "source": "iana",
      "extensions": ["hqx"]
    },
    "application/mac-compactpro": {
      "source": "apache",
      "extensions": ["cpt"]
    },
    "application/macwriteii": {
      "source": "iana"
    },
    "application/mads+xml": {
      "source": "iana",
      "extensions": ["mads"]
    },
    "application/manifest+json": {
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["webmanifest"]
    },
    "application/marc": {
      "source": "iana",
      "extensions": ["mrc"]
    },
    "application/marcxml+xml": {
      "source": "iana",
      "extensions": ["mrcx"]
    },
    "application/mathematica": {
      "source": "iana",
      "extensions": ["ma","nb","mb"]
    },
    "application/mathml+xml": {
      "source": "iana",
      "extensions": ["mathml"]
    },
    "application/mathml-content+xml": {
      "source": "iana"
    },
    "application/mathml-presentation+xml": {
      "source": "iana"
    },
    "application/mbms-associated-procedure-description+xml": {
      "source": "iana"
    },
    "application/mbms-deregister+xml": {
      "source": "iana"
    },
    "application/mbms-envelope+xml": {
      "source": "iana"
    },
    "application/mbms-msk+xml": {
      "source": "iana"
    },
    "application/mbms-msk-response+xml": {
      "source": "iana"
    },
    "application/mbms-protection-description+xml": {
      "source": "iana"
    },
    "application/mbms-reception-report+xml": {
      "source": "iana"
    },
    "application/mbms-register+xml": {
      "source": "iana"
    },
    "application/mbms-register-response+xml": {
      "source": "iana"
    },
    "application/mbms-schedule+xml": {
      "source": "iana"
    },
    "application/mbms-user-service-description+xml": {
      "source": "iana"
    },
    "application/mbox": {
      "source": "iana",
      "extensions": ["mbox"]
    },
    "application/media-policy-dataset+xml": {
      "source": "iana"
    },
    "application/media_control+xml": {
      "source": "iana"
    },
    "application/mediaservercontrol+xml": {
      "source": "iana",
      "extensions": ["mscml"]
    },
    "application/merge-patch+json": {
      "source": "iana",
      "compressible": true
    },
    "application/metalink+xml": {
      "source": "apache",
      "extensions": ["metalink"]
    },
    "application/metalink4+xml": {
      "source": "iana",
      "extensions": ["meta4"]
    },
    "application/mets+xml": {
      "source": "iana",
      "extensions": ["mets"]
    },
    "application/mf4": {
      "source": "iana"
    },
    "application/mikey": {
      "source": "iana"
    },
    "application/mods+xml": {
      "source": "iana",
      "extensions": ["mods"]
    },
    "application/moss-keys": {
      "source": "iana"
    },
    "application/moss-signature": {
      "source": "iana"
    },
    "application/mosskey-data": {
      "source": "iana"
    },
    "application/mosskey-request": {
      "source": "iana"
    },
    "application/mp21": {
      "source": "iana",
      "extensions": ["m21","mp21"]
    },
    "application/mp4": {
      "source": "iana",
      "extensions": ["mp4s","m4p"]
    },
    "application/mpeg4-generic": {
      "source": "iana"
    },
    "application/mpeg4-iod": {
      "source": "iana"
    },
    "application/mpeg4-iod-xmt": {
      "source": "iana"
    },
    "application/mrb-consumer+xml": {
      "source": "iana"
    },
    "application/mrb-publish+xml": {
      "source": "iana"
    },
    "application/msc-ivr+xml": {
      "source": "iana"
    },
    "application/msc-mixer+xml": {
      "source": "iana"
    },
    "application/msword": {
      "source": "iana",
      "compressible": false,
      "extensions": ["doc","dot"]
    },
    "application/mxf": {
      "source": "iana",
      "extensions": ["mxf"]
    },
    "application/nasdata": {
      "source": "iana"
    },
    "application/news-checkgroups": {
      "source": "iana"
    },
    "application/news-groupinfo": {
      "source": "iana"
    },
    "application/news-transmission": {
      "source": "iana"
    },
    "application/nlsml+xml": {
      "source": "iana"
    },
    "application/nss": {
      "source": "iana"
    },
    "application/ocsp-request": {
      "source": "iana"
    },
    "application/ocsp-response": {
      "source": "iana"
    },
    "application/octet-stream": {
      "source": "iana",
      "compressible": false,
      "extensions": ["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]
    },
    "application/oda": {
      "source": "iana",
      "extensions": ["oda"]
    },
    "application/odx": {
      "source": "iana"
    },
    "application/oebps-package+xml": {
      "source": "iana",
      "extensions": ["opf"]
    },
    "application/ogg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["ogx"]
    },
    "application/omdoc+xml": {
      "source": "apache",
      "extensions": ["omdoc"]
    },
    "application/onenote": {
      "source": "apache",
      "extensions": ["onetoc","onetoc2","onetmp","onepkg"]
    },
    "application/oxps": {
      "source": "iana",
      "extensions": ["oxps"]
    },
    "application/p2p-overlay+xml": {
      "source": "iana"
    },
    "application/parityfec": {
      "source": "iana"
    },
    "application/patch-ops-error+xml": {
      "source": "iana",
      "extensions": ["xer"]
    },
    "application/pdf": {
      "source": "iana",
      "compressible": false,
      "extensions": ["pdf"]
    },
    "application/pdx": {
      "source": "iana"
    },
    "application/pgp-encrypted": {
      "source": "iana",
      "compressible": false,
      "extensions": ["pgp"]
    },
    "application/pgp-keys": {
      "source": "iana"
    },
    "application/pgp-signature": {
      "source": "iana",
      "extensions": ["asc","sig"]
    },
    "application/pics-rules": {
      "source": "apache",
      "extensions": ["prf"]
    },
    "application/pidf+xml": {
      "source": "iana"
    },
    "application/pidf-diff+xml": {
      "source": "iana"
    },
    "application/pkcs10": {
      "source": "iana",
      "extensions": ["p10"]
    },
    "application/pkcs7-mime": {
      "source": "iana",
      "extensions": ["p7m","p7c"]
    },
    "application/pkcs7-signature": {
      "source": "iana",
      "extensions": ["p7s"]
    },
    "application/pkcs8": {
      "source": "iana",
      "extensions": ["p8"]
    },
    "application/pkix-attr-cert": {
      "source": "iana",
      "extensions": ["ac"]
    },
    "application/pkix-cert": {
      "source": "iana",
      "extensions": ["cer"]
    },
    "application/pkix-crl": {
      "source": "iana",
      "extensions": ["crl"]
    },
    "application/pkix-pkipath": {
      "source": "iana",
      "extensions": ["pkipath"]
    },
    "application/pkixcmp": {
      "source": "iana",
      "extensions": ["pki"]
    },
    "application/pls+xml": {
      "source": "iana",
      "extensions": ["pls"]
    },
    "application/poc-settings+xml": {
      "source": "iana"
    },
    "application/postscript": {
      "source": "iana",
      "compressible": true,
      "extensions": ["ai","eps","ps"]
    },
    "application/provenance+xml": {
      "source": "iana"
    },
    "application/prs.alvestrand.titrax-sheet": {
      "source": "iana"
    },
    "application/prs.cww": {
      "source": "iana",
      "extensions": ["cww"]
    },
    "application/prs.hpub+zip": {
      "source": "iana"
    },
    "application/prs.nprend": {
      "source": "iana"
    },
    "application/prs.plucker": {
      "source": "iana"
    },
    "application/prs.rdf-xml-crypt": {
      "source": "iana"
    },
    "application/prs.xsf+xml": {
      "source": "iana"
    },
    "application/pskc+xml": {
      "source": "iana",
      "extensions": ["pskcxml"]
    },
    "application/qsig": {
      "source": "iana"
    },
    "application/raptorfec": {
      "source": "iana"
    },
    "application/rdap+json": {
      "source": "iana",
      "compressible": true
    },
    "application/rdf+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rdf"]
    },
    "application/reginfo+xml": {
      "source": "iana",
      "extensions": ["rif"]
    },
    "application/relax-ng-compact-syntax": {
      "source": "iana",
      "extensions": ["rnc"]
    },
    "application/remote-printing": {
      "source": "iana"
    },
    "application/reputon+json": {
      "source": "iana",
      "compressible": true
    },
    "application/resource-lists+xml": {
      "source": "iana",
      "extensions": ["rl"]
    },
    "application/resource-lists-diff+xml": {
      "source": "iana",
      "extensions": ["rld"]
    },
    "application/riscos": {
      "source": "iana"
    },
    "application/rlmi+xml": {
      "source": "iana"
    },
    "application/rls-services+xml": {
      "source": "iana",
      "extensions": ["rs"]
    },
    "application/rpki-ghostbusters": {
      "source": "iana",
      "extensions": ["gbr"]
    },
    "application/rpki-manifest": {
      "source": "iana",
      "extensions": ["mft"]
    },
    "application/rpki-roa": {
      "source": "iana",
      "extensions": ["roa"]
    },
    "application/rpki-updown": {
      "source": "iana"
    },
    "application/rsd+xml": {
      "source": "apache",
      "extensions": ["rsd"]
    },
    "application/rss+xml": {
      "source": "apache",
      "compressible": true,
      "extensions": ["rss"]
    },
    "application/rtf": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rtf"]
    },
    "application/rtploopback": {
      "source": "iana"
    },
    "application/rtx": {
      "source": "iana"
    },
    "application/samlassertion+xml": {
      "source": "iana"
    },
    "application/samlmetadata+xml": {
      "source": "iana"
    },
    "application/sbml+xml": {
      "source": "iana",
      "extensions": ["sbml"]
    },
    "application/scaip+xml": {
      "source": "iana"
    },
    "application/scim+json": {
      "source": "iana",
      "compressible": true
    },
    "application/scvp-cv-request": {
      "source": "iana",
      "extensions": ["scq"]
    },
    "application/scvp-cv-response": {
      "source": "iana",
      "extensions": ["scs"]
    },
    "application/scvp-vp-request": {
      "source": "iana",
      "extensions": ["spq"]
    },
    "application/scvp-vp-response": {
      "source": "iana",
      "extensions": ["spp"]
    },
    "application/sdp": {
      "source": "iana",
      "extensions": ["sdp"]
    },
    "application/sep+xml": {
      "source": "iana"
    },
    "application/sep-exi": {
      "source": "iana"
    },
    "application/session-info": {
      "source": "iana"
    },
    "application/set-payment": {
      "source": "iana"
    },
    "application/set-payment-initiation": {
      "source": "iana",
      "extensions": ["setpay"]
    },
    "application/set-registration": {
      "source": "iana"
    },
    "application/set-registration-initiation": {
      "source": "iana",
      "extensions": ["setreg"]
    },
    "application/sgml": {
      "source": "iana"
    },
    "application/sgml-open-catalog": {
      "source": "iana"
    },
    "application/shf+xml": {
      "source": "iana",
      "extensions": ["shf"]
    },
    "application/sieve": {
      "source": "iana"
    },
    "application/simple-filter+xml": {
      "source": "iana"
    },
    "application/simple-message-summary": {
      "source": "iana"
    },
    "application/simplesymbolcontainer": {
      "source": "iana"
    },
    "application/slate": {
      "source": "iana"
    },
    "application/smil": {
      "source": "iana"
    },
    "application/smil+xml": {
      "source": "iana",
      "extensions": ["smi","smil"]
    },
    "application/smpte336m": {
      "source": "iana"
    },
    "application/soap+fastinfoset": {
      "source": "iana"
    },
    "application/soap+xml": {
      "source": "iana",
      "compressible": true
    },
    "application/sparql-query": {
      "source": "iana",
      "extensions": ["rq"]
    },
    "application/sparql-results+xml": {
      "source": "iana",
      "extensions": ["srx"]
    },
    "application/spirits-event+xml": {
      "source": "iana"
    },
    "application/sql": {
      "source": "iana"
    },
    "application/srgs": {
      "source": "iana",
      "extensions": ["gram"]
    },
    "application/srgs+xml": {
      "source": "iana",
      "extensions": ["grxml"]
    },
    "application/sru+xml": {
      "source": "iana",
      "extensions": ["sru"]
    },
    "application/ssdl+xml": {
      "source": "apache",
      "extensions": ["ssdl"]
    },
    "application/ssml+xml": {
      "source": "iana",
      "extensions": ["ssml"]
    },
    "application/tamp-apex-update": {
      "source": "iana"
    },
    "application/tamp-apex-update-confirm": {
      "source": "iana"
    },
    "application/tamp-community-update": {
      "source": "iana"
    },
    "application/tamp-community-update-confirm": {
      "source": "iana"
    },
    "application/tamp-error": {
      "source": "iana"
    },
    "application/tamp-sequence-adjust": {
      "source": "iana"
    },
    "application/tamp-sequence-adjust-confirm": {
      "source": "iana"
    },
    "application/tamp-status-query": {
      "source": "iana"
    },
    "application/tamp-status-response": {
      "source": "iana"
    },
    "application/tamp-update": {
      "source": "iana"
    },
    "application/tamp-update-confirm": {
      "source": "iana"
    },
    "application/tar": {
      "compressible": true
    },
    "application/tei+xml": {
      "source": "iana",
      "extensions": ["tei","teicorpus"]
    },
    "application/thraud+xml": {
      "source": "iana",
      "extensions": ["tfi"]
    },
    "application/timestamp-query": {
      "source": "iana"
    },
    "application/timestamp-reply": {
      "source": "iana"
    },
    "application/timestamped-data": {
      "source": "iana",
      "extensions": ["tsd"]
    },
    "application/ttml+xml": {
      "source": "iana"
    },
    "application/tve-trigger": {
      "source": "iana"
    },
    "application/ulpfec": {
      "source": "iana"
    },
    "application/urc-grpsheet+xml": {
      "source": "iana"
    },
    "application/urc-ressheet+xml": {
      "source": "iana"
    },
    "application/urc-targetdesc+xml": {
      "source": "iana"
    },
    "application/urc-uisocketdesc+xml": {
      "source": "iana"
    },
    "application/vcard+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vcard+xml": {
      "source": "iana"
    },
    "application/vemmi": {
      "source": "iana"
    },
    "application/vividence.scriptfile": {
      "source": "apache"
    },
    "application/vnd.3gpp.bsf+xml": {
      "source": "iana"
    },
    "application/vnd.3gpp.pic-bw-large": {
      "source": "iana",
      "extensions": ["plb"]
    },
    "application/vnd.3gpp.pic-bw-small": {
      "source": "iana",
      "extensions": ["psb"]
    },
    "application/vnd.3gpp.pic-bw-var": {
      "source": "iana",
      "extensions": ["pvb"]
    },
    "application/vnd.3gpp.sms": {
      "source": "iana"
    },
    "application/vnd.3gpp.ussd+xml": {
      "source": "iana"
    },
    "application/vnd.3gpp2.bcmcsinfo+xml": {
      "source": "iana"
    },
    "application/vnd.3gpp2.sms": {
      "source": "iana"
    },
    "application/vnd.3gpp2.tcap": {
      "source": "iana",
      "extensions": ["tcap"]
    },
    "application/vnd.3m.post-it-notes": {
      "source": "iana",
      "extensions": ["pwn"]
    },
    "application/vnd.accpac.simply.aso": {
      "source": "iana",
      "extensions": ["aso"]
    },
    "application/vnd.accpac.simply.imp": {
      "source": "iana",
      "extensions": ["imp"]
    },
    "application/vnd.acucobol": {
      "source": "iana",
      "extensions": ["acu"]
    },
    "application/vnd.acucorp": {
      "source": "iana",
      "extensions": ["atc","acutc"]
    },
    "application/vnd.adobe.air-application-installer-package+zip": {
      "source": "apache",
      "extensions": ["air"]
    },
    "application/vnd.adobe.flash.movie": {
      "source": "iana"
    },
    "application/vnd.adobe.formscentral.fcdt": {
      "source": "iana",
      "extensions": ["fcdt"]
    },
    "application/vnd.adobe.fxp": {
      "source": "iana",
      "extensions": ["fxp","fxpl"]
    },
    "application/vnd.adobe.partial-upload": {
      "source": "iana"
    },
    "application/vnd.adobe.xdp+xml": {
      "source": "iana",
      "extensions": ["xdp"]
    },
    "application/vnd.adobe.xfdf": {
      "source": "iana",
      "extensions": ["xfdf"]
    },
    "application/vnd.aether.imp": {
      "source": "iana"
    },
    "application/vnd.ah-barcode": {
      "source": "iana"
    },
    "application/vnd.ahead.space": {
      "source": "iana",
      "extensions": ["ahead"]
    },
    "application/vnd.airzip.filesecure.azf": {
      "source": "iana",
      "extensions": ["azf"]
    },
    "application/vnd.airzip.filesecure.azs": {
      "source": "iana",
      "extensions": ["azs"]
    },
    "application/vnd.amazon.ebook": {
      "source": "apache",
      "extensions": ["azw"]
    },
    "application/vnd.americandynamics.acc": {
      "source": "iana",
      "extensions": ["acc"]
    },
    "application/vnd.amiga.ami": {
      "source": "iana",
      "extensions": ["ami"]
    },
    "application/vnd.amundsen.maze+xml": {
      "source": "iana"
    },
    "application/vnd.android.package-archive": {
      "source": "apache",
      "compressible": false,
      "extensions": ["apk"]
    },
    "application/vnd.anser-web-certificate-issue-initiation": {
      "source": "iana",
      "extensions": ["cii"]
    },
    "application/vnd.anser-web-funds-transfer-initiation": {
      "source": "apache",
      "extensions": ["fti"]
    },
    "application/vnd.antix.game-component": {
      "source": "iana",
      "extensions": ["atx"]
    },
    "application/vnd.apache.thrift.binary": {
      "source": "iana"
    },
    "application/vnd.apache.thrift.compact": {
      "source": "iana"
    },
    "application/vnd.apache.thrift.json": {
      "source": "iana"
    },
    "application/vnd.api+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.apple.installer+xml": {
      "source": "iana",
      "extensions": ["mpkg"]
    },
    "application/vnd.apple.mpegurl": {
      "source": "iana",
      "extensions": ["m3u8"]
    },
    "application/vnd.arastra.swi": {
      "source": "iana"
    },
    "application/vnd.aristanetworks.swi": {
      "source": "iana",
      "extensions": ["swi"]
    },
    "application/vnd.artsquare": {
      "source": "iana"
    },
    "application/vnd.astraea-software.iota": {
      "source": "iana",
      "extensions": ["iota"]
    },
    "application/vnd.audiograph": {
      "source": "iana",
      "extensions": ["aep"]
    },
    "application/vnd.autopackage": {
      "source": "iana"
    },
    "application/vnd.avistar+xml": {
      "source": "iana"
    },
    "application/vnd.balsamiq.bmml+xml": {
      "source": "iana"
    },
    "application/vnd.balsamiq.bmpr": {
      "source": "iana"
    },
    "application/vnd.bekitzur-stech+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.biopax.rdf+xml": {
      "source": "iana"
    },
    "application/vnd.blueice.multipass": {
      "source": "iana",
      "extensions": ["mpm"]
    },
    "application/vnd.bluetooth.ep.oob": {
      "source": "iana"
    },
    "application/vnd.bluetooth.le.oob": {
      "source": "iana"
    },
    "application/vnd.bmi": {
      "source": "iana",
      "extensions": ["bmi"]
    },
    "application/vnd.businessobjects": {
      "source": "iana",
      "extensions": ["rep"]
    },
    "application/vnd.cab-jscript": {
      "source": "iana"
    },
    "application/vnd.canon-cpdl": {
      "source": "iana"
    },
    "application/vnd.canon-lips": {
      "source": "iana"
    },
    "application/vnd.cendio.thinlinc.clientconf": {
      "source": "iana"
    },
    "application/vnd.century-systems.tcp_stream": {
      "source": "iana"
    },
    "application/vnd.chemdraw+xml": {
      "source": "iana",
      "extensions": ["cdxml"]
    },
    "application/vnd.chipnuts.karaoke-mmd": {
      "source": "iana",
      "extensions": ["mmd"]
    },
    "application/vnd.cinderella": {
      "source": "iana",
      "extensions": ["cdy"]
    },
    "application/vnd.cirpack.isdn-ext": {
      "source": "iana"
    },
    "application/vnd.citationstyles.style+xml": {
      "source": "iana"
    },
    "application/vnd.claymore": {
      "source": "iana",
      "extensions": ["cla"]
    },
    "application/vnd.cloanto.rp9": {
      "source": "iana",
      "extensions": ["rp9"]
    },
    "application/vnd.clonk.c4group": {
      "source": "iana",
      "extensions": ["c4g","c4d","c4f","c4p","c4u"]
    },
    "application/vnd.cluetrust.cartomobile-config": {
      "source": "iana",
      "extensions": ["c11amc"]
    },
    "application/vnd.cluetrust.cartomobile-config-pkg": {
      "source": "iana",
      "extensions": ["c11amz"]
    },
    "application/vnd.coffeescript": {
      "source": "iana"
    },
    "application/vnd.collection+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.collection.doc+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.collection.next+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.commerce-battelle": {
      "source": "iana"
    },
    "application/vnd.commonspace": {
      "source": "iana",
      "extensions": ["csp"]
    },
    "application/vnd.contact.cmsg": {
      "source": "iana",
      "extensions": ["cdbcmsg"]
    },
    "application/vnd.cosmocaller": {
      "source": "iana",
      "extensions": ["cmc"]
    },
    "application/vnd.crick.clicker": {
      "source": "iana",
      "extensions": ["clkx"]
    },
    "application/vnd.crick.clicker.keyboard": {
      "source": "iana",
      "extensions": ["clkk"]
    },
    "application/vnd.crick.clicker.palette": {
      "source": "iana",
      "extensions": ["clkp"]
    },
    "application/vnd.crick.clicker.template": {
      "source": "iana",
      "extensions": ["clkt"]
    },
    "application/vnd.crick.clicker.wordbank": {
      "source": "iana",
      "extensions": ["clkw"]
    },
    "application/vnd.criticaltools.wbs+xml": {
      "source": "iana",
      "extensions": ["wbs"]
    },
    "application/vnd.ctc-posml": {
      "source": "iana",
      "extensions": ["pml"]
    },
    "application/vnd.ctct.ws+xml": {
      "source": "iana"
    },
    "application/vnd.cups-pdf": {
      "source": "iana"
    },
    "application/vnd.cups-postscript": {
      "source": "iana"
    },
    "application/vnd.cups-ppd": {
      "source": "iana",
      "extensions": ["ppd"]
    },
    "application/vnd.cups-raster": {
      "source": "iana"
    },
    "application/vnd.cups-raw": {
      "source": "iana"
    },
    "application/vnd.curl": {
      "source": "iana"
    },
    "application/vnd.curl.car": {
      "source": "apache",
      "extensions": ["car"]
    },
    "application/vnd.curl.pcurl": {
      "source": "apache",
      "extensions": ["pcurl"]
    },
    "application/vnd.cyan.dean.root+xml": {
      "source": "iana"
    },
    "application/vnd.cybank": {
      "source": "iana"
    },
    "application/vnd.dart": {
      "source": "iana",
      "compressible": true,
      "extensions": ["dart"]
    },
    "application/vnd.data-vision.rdz": {
      "source": "iana",
      "extensions": ["rdz"]
    },
    "application/vnd.debian.binary-package": {
      "source": "iana"
    },
    "application/vnd.dece.data": {
      "source": "iana",
      "extensions": ["uvf","uvvf","uvd","uvvd"]
    },
    "application/vnd.dece.ttml+xml": {
      "source": "iana",
      "extensions": ["uvt","uvvt"]
    },
    "application/vnd.dece.unspecified": {
      "source": "iana",
      "extensions": ["uvx","uvvx"]
    },
    "application/vnd.dece.zip": {
      "source": "iana",
      "extensions": ["uvz","uvvz"]
    },
    "application/vnd.denovo.fcselayout-link": {
      "source": "iana",
      "extensions": ["fe_launch"]
    },
    "application/vnd.desmume-movie": {
      "source": "iana"
    },
    "application/vnd.dir-bi.plate-dl-nosuffix": {
      "source": "iana"
    },
    "application/vnd.dm.delegation+xml": {
      "source": "iana"
    },
    "application/vnd.dna": {
      "source": "iana",
      "extensions": ["dna"]
    },
    "application/vnd.document+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.dolby.mlp": {
      "source": "apache",
      "extensions": ["mlp"]
    },
    "application/vnd.dolby.mobile.1": {
      "source": "iana"
    },
    "application/vnd.dolby.mobile.2": {
      "source": "iana"
    },
    "application/vnd.doremir.scorecloud-binary-document": {
      "source": "iana"
    },
    "application/vnd.dpgraph": {
      "source": "iana",
      "extensions": ["dpg"]
    },
    "application/vnd.dreamfactory": {
      "source": "iana",
      "extensions": ["dfac"]
    },
    "application/vnd.ds-keypoint": {
      "source": "apache",
      "extensions": ["kpxx"]
    },
    "application/vnd.dtg.local": {
      "source": "iana"
    },
    "application/vnd.dtg.local.flash": {
      "source": "iana"
    },
    "application/vnd.dtg.local.html": {
      "source": "iana"
    },
    "application/vnd.dvb.ait": {
      "source": "iana",
      "extensions": ["ait"]
    },
    "application/vnd.dvb.dvbj": {
      "source": "iana"
    },
    "application/vnd.dvb.esgcontainer": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcdftnotifaccess": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcesgaccess": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcesgaccess2": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcesgpdd": {
      "source": "iana"
    },
    "application/vnd.dvb.ipdcroaming": {
      "source": "iana"
    },
    "application/vnd.dvb.iptv.alfec-base": {
      "source": "iana"
    },
    "application/vnd.dvb.iptv.alfec-enhancement": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-aggregate-root+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-container+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-generic+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-ia-msglist+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-ia-registration-request+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-ia-registration-response+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.notif-init+xml": {
      "source": "iana"
    },
    "application/vnd.dvb.pfr": {
      "source": "iana"
    },
    "application/vnd.dvb.service": {
      "source": "iana",
      "extensions": ["svc"]
    },
    "application/vnd.dxr": {
      "source": "iana"
    },
    "application/vnd.dynageo": {
      "source": "iana",
      "extensions": ["geo"]
    },
    "application/vnd.dzr": {
      "source": "iana"
    },
    "application/vnd.easykaraoke.cdgdownload": {
      "source": "iana"
    },
    "application/vnd.ecdis-update": {
      "source": "iana"
    },
    "application/vnd.ecowin.chart": {
      "source": "iana",
      "extensions": ["mag"]
    },
    "application/vnd.ecowin.filerequest": {
      "source": "iana"
    },
    "application/vnd.ecowin.fileupdate": {
      "source": "iana"
    },
    "application/vnd.ecowin.series": {
      "source": "iana"
    },
    "application/vnd.ecowin.seriesrequest": {
      "source": "iana"
    },
    "application/vnd.ecowin.seriesupdate": {
      "source": "iana"
    },
    "application/vnd.emclient.accessrequest+xml": {
      "source": "iana"
    },
    "application/vnd.enliven": {
      "source": "iana",
      "extensions": ["nml"]
    },
    "application/vnd.enphase.envoy": {
      "source": "iana"
    },
    "application/vnd.eprints.data+xml": {
      "source": "iana"
    },
    "application/vnd.epson.esf": {
      "source": "iana",
      "extensions": ["esf"]
    },
    "application/vnd.epson.msf": {
      "source": "iana",
      "extensions": ["msf"]
    },
    "application/vnd.epson.quickanime": {
      "source": "iana",
      "extensions": ["qam"]
    },
    "application/vnd.epson.salt": {
      "source": "iana",
      "extensions": ["slt"]
    },
    "application/vnd.epson.ssf": {
      "source": "iana",
      "extensions": ["ssf"]
    },
    "application/vnd.ericsson.quickcall": {
      "source": "iana"
    },
    "application/vnd.eszigno3+xml": {
      "source": "iana",
      "extensions": ["es3","et3"]
    },
    "application/vnd.etsi.aoc+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.asic-e+zip": {
      "source": "iana"
    },
    "application/vnd.etsi.asic-s+zip": {
      "source": "iana"
    },
    "application/vnd.etsi.cug+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvcommand+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvdiscovery+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvprofile+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsad-bc+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsad-cod+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsad-npvr+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvservice+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvsync+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.iptvueprofile+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.mcid+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.mheg5": {
      "source": "iana"
    },
    "application/vnd.etsi.overload-control-policy-dataset+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.pstn+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.sci+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.simservs+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.timestamp-token": {
      "source": "iana"
    },
    "application/vnd.etsi.tsl+xml": {
      "source": "iana"
    },
    "application/vnd.etsi.tsl.der": {
      "source": "iana"
    },
    "application/vnd.eudora.data": {
      "source": "iana"
    },
    "application/vnd.ezpix-album": {
      "source": "iana",
      "extensions": ["ez2"]
    },
    "application/vnd.ezpix-package": {
      "source": "iana",
      "extensions": ["ez3"]
    },
    "application/vnd.f-secure.mobile": {
      "source": "iana"
    },
    "application/vnd.fastcopy-disk-image": {
      "source": "iana"
    },
    "application/vnd.fdf": {
      "source": "iana",
      "extensions": ["fdf"]
    },
    "application/vnd.fdsn.mseed": {
      "source": "iana",
      "extensions": ["mseed"]
    },
    "application/vnd.fdsn.seed": {
      "source": "iana",
      "extensions": ["seed","dataless"]
    },
    "application/vnd.ffsns": {
      "source": "iana"
    },
    "application/vnd.fints": {
      "source": "iana"
    },
    "application/vnd.flographit": {
      "source": "iana",
      "extensions": ["gph"]
    },
    "application/vnd.fluxtime.clip": {
      "source": "iana",
      "extensions": ["ftc"]
    },
    "application/vnd.font-fontforge-sfd": {
      "source": "iana"
    },
    "application/vnd.framemaker": {
      "source": "iana",
      "extensions": ["fm","frame","maker","book"]
    },
    "application/vnd.frogans.fnc": {
      "source": "iana",
      "extensions": ["fnc"]
    },
    "application/vnd.frogans.ltf": {
      "source": "iana",
      "extensions": ["ltf"]
    },
    "application/vnd.fsc.weblaunch": {
      "source": "iana",
      "extensions": ["fsc"]
    },
    "application/vnd.fujitsu.oasys": {
      "source": "iana",
      "extensions": ["oas"]
    },
    "application/vnd.fujitsu.oasys2": {
      "source": "iana",
      "extensions": ["oa2"]
    },
    "application/vnd.fujitsu.oasys3": {
      "source": "iana",
      "extensions": ["oa3"]
    },
    "application/vnd.fujitsu.oasysgp": {
      "source": "iana",
      "extensions": ["fg5"]
    },
    "application/vnd.fujitsu.oasysprs": {
      "source": "iana",
      "extensions": ["bh2"]
    },
    "application/vnd.fujixerox.art-ex": {
      "source": "iana"
    },
    "application/vnd.fujixerox.art4": {
      "source": "iana"
    },
    "application/vnd.fujixerox.ddd": {
      "source": "iana",
      "extensions": ["ddd"]
    },
    "application/vnd.fujixerox.docuworks": {
      "source": "iana",
      "extensions": ["xdw"]
    },
    "application/vnd.fujixerox.docuworks.binder": {
      "source": "iana",
      "extensions": ["xbd"]
    },
    "application/vnd.fujixerox.docuworks.container": {
      "source": "iana"
    },
    "application/vnd.fujixerox.hbpl": {
      "source": "iana"
    },
    "application/vnd.fut-misnet": {
      "source": "iana"
    },
    "application/vnd.fuzzysheet": {
      "source": "iana",
      "extensions": ["fzs"]
    },
    "application/vnd.genomatix.tuxedo": {
      "source": "iana",
      "extensions": ["txd"]
    },
    "application/vnd.geo+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.geocube+xml": {
      "source": "iana"
    },
    "application/vnd.geogebra.file": {
      "source": "iana",
      "extensions": ["ggb"]
    },
    "application/vnd.geogebra.tool": {
      "source": "iana",
      "extensions": ["ggt"]
    },
    "application/vnd.geometry-explorer": {
      "source": "iana",
      "extensions": ["gex","gre"]
    },
    "application/vnd.geonext": {
      "source": "iana",
      "extensions": ["gxt"]
    },
    "application/vnd.geoplan": {
      "source": "iana",
      "extensions": ["g2w"]
    },
    "application/vnd.geospace": {
      "source": "iana",
      "extensions": ["g3w"]
    },
    "application/vnd.gerber": {
      "source": "iana"
    },
    "application/vnd.globalplatform.card-content-mgt": {
      "source": "iana"
    },
    "application/vnd.globalplatform.card-content-mgt-response": {
      "source": "iana"
    },
    "application/vnd.gmx": {
      "source": "iana",
      "extensions": ["gmx"]
    },
    "application/vnd.google-earth.kml+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["kml"]
    },
    "application/vnd.google-earth.kmz": {
      "source": "iana",
      "compressible": false,
      "extensions": ["kmz"]
    },
    "application/vnd.gov.sk.e-form+xml": {
      "source": "iana"
    },
    "application/vnd.gov.sk.e-form+zip": {
      "source": "iana"
    },
    "application/vnd.gov.sk.xmldatacontainer+xml": {
      "source": "iana"
    },
    "application/vnd.grafeq": {
      "source": "iana",
      "extensions": ["gqf","gqs"]
    },
    "application/vnd.gridmp": {
      "source": "iana"
    },
    "application/vnd.groove-account": {
      "source": "iana",
      "extensions": ["gac"]
    },
    "application/vnd.groove-help": {
      "source": "iana",
      "extensions": ["ghf"]
    },
    "application/vnd.groove-identity-message": {
      "source": "iana",
      "extensions": ["gim"]
    },
    "application/vnd.groove-injector": {
      "source": "iana",
      "extensions": ["grv"]
    },
    "application/vnd.groove-tool-message": {
      "source": "iana",
      "extensions": ["gtm"]
    },
    "application/vnd.groove-tool-template": {
      "source": "iana",
      "extensions": ["tpl"]
    },
    "application/vnd.groove-vcard": {
      "source": "iana",
      "extensions": ["vcg"]
    },
    "application/vnd.hal+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.hal+xml": {
      "source": "iana",
      "extensions": ["hal"]
    },
    "application/vnd.handheld-entertainment+xml": {
      "source": "iana",
      "extensions": ["zmm"]
    },
    "application/vnd.hbci": {
      "source": "iana",
      "extensions": ["hbci"]
    },
    "application/vnd.hcl-bireports": {
      "source": "iana"
    },
    "application/vnd.heroku+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.hhe.lesson-player": {
      "source": "iana",
      "extensions": ["les"]
    },
    "application/vnd.hp-hpgl": {
      "source": "iana",
      "extensions": ["hpgl"]
    },
    "application/vnd.hp-hpid": {
      "source": "iana",
      "extensions": ["hpid"]
    },
    "application/vnd.hp-hps": {
      "source": "iana",
      "extensions": ["hps"]
    },
    "application/vnd.hp-jlyt": {
      "source": "iana",
      "extensions": ["jlt"]
    },
    "application/vnd.hp-pcl": {
      "source": "iana",
      "extensions": ["pcl"]
    },
    "application/vnd.hp-pclxl": {
      "source": "iana",
      "extensions": ["pclxl"]
    },
    "application/vnd.httphone": {
      "source": "iana"
    },
    "application/vnd.hydrostatix.sof-data": {
      "source": "iana",
      "extensions": ["sfd-hdstx"]
    },
    "application/vnd.hyperdrive+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.hzn-3d-crossword": {
      "source": "iana"
    },
    "application/vnd.ibm.afplinedata": {
      "source": "iana"
    },
    "application/vnd.ibm.electronic-media": {
      "source": "iana"
    },
    "application/vnd.ibm.minipay": {
      "source": "iana",
      "extensions": ["mpy"]
    },
    "application/vnd.ibm.modcap": {
      "source": "iana",
      "extensions": ["afp","listafp","list3820"]
    },
    "application/vnd.ibm.rights-management": {
      "source": "iana",
      "extensions": ["irm"]
    },
    "application/vnd.ibm.secure-container": {
      "source": "iana",
      "extensions": ["sc"]
    },
    "application/vnd.iccprofile": {
      "source": "iana",
      "extensions": ["icc","icm"]
    },
    "application/vnd.ieee.1905": {
      "source": "iana"
    },
    "application/vnd.igloader": {
      "source": "iana",
      "extensions": ["igl"]
    },
    "application/vnd.immervision-ivp": {
      "source": "iana",
      "extensions": ["ivp"]
    },
    "application/vnd.immervision-ivu": {
      "source": "iana",
      "extensions": ["ivu"]
    },
    "application/vnd.ims.imsccv1p1": {
      "source": "iana"
    },
    "application/vnd.ims.imsccv1p2": {
      "source": "iana"
    },
    "application/vnd.ims.imsccv1p3": {
      "source": "iana"
    },
    "application/vnd.ims.lis.v2.result+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolconsumerprofile+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolproxy+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolproxy.id+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolsettings+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.ims.lti.v2.toolsettings.simple+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.informedcontrol.rms+xml": {
      "source": "iana"
    },
    "application/vnd.informix-visionary": {
      "source": "iana"
    },
    "application/vnd.infotech.project": {
      "source": "iana"
    },
    "application/vnd.infotech.project+xml": {
      "source": "iana"
    },
    "application/vnd.innopath.wamp.notification": {
      "source": "iana"
    },
    "application/vnd.insors.igm": {
      "source": "iana",
      "extensions": ["igm"]
    },
    "application/vnd.intercon.formnet": {
      "source": "iana",
      "extensions": ["xpw","xpx"]
    },
    "application/vnd.intergeo": {
      "source": "iana",
      "extensions": ["i2g"]
    },
    "application/vnd.intertrust.digibox": {
      "source": "iana"
    },
    "application/vnd.intertrust.nncp": {
      "source": "iana"
    },
    "application/vnd.intu.qbo": {
      "source": "iana",
      "extensions": ["qbo"]
    },
    "application/vnd.intu.qfx": {
      "source": "iana",
      "extensions": ["qfx"]
    },
    "application/vnd.iptc.g2.catalogitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.conceptitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.knowledgeitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.newsitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.newsmessage+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.packageitem+xml": {
      "source": "iana"
    },
    "application/vnd.iptc.g2.planningitem+xml": {
      "source": "iana"
    },
    "application/vnd.ipunplugged.rcprofile": {
      "source": "iana",
      "extensions": ["rcprofile"]
    },
    "application/vnd.irepository.package+xml": {
      "source": "iana",
      "extensions": ["irp"]
    },
    "application/vnd.is-xpr": {
      "source": "iana",
      "extensions": ["xpr"]
    },
    "application/vnd.isac.fcs": {
      "source": "iana",
      "extensions": ["fcs"]
    },
    "application/vnd.jam": {
      "source": "iana",
      "extensions": ["jam"]
    },
    "application/vnd.japannet-directory-service": {
      "source": "iana"
    },
    "application/vnd.japannet-jpnstore-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-payment-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-registration": {
      "source": "iana"
    },
    "application/vnd.japannet-registration-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-setstore-wakeup": {
      "source": "iana"
    },
    "application/vnd.japannet-verification": {
      "source": "iana"
    },
    "application/vnd.japannet-verification-wakeup": {
      "source": "iana"
    },
    "application/vnd.jcp.javame.midlet-rms": {
      "source": "iana",
      "extensions": ["rms"]
    },
    "application/vnd.jisp": {
      "source": "iana",
      "extensions": ["jisp"]
    },
    "application/vnd.joost.joda-archive": {
      "source": "iana",
      "extensions": ["joda"]
    },
    "application/vnd.jsk.isdn-ngn": {
      "source": "iana"
    },
    "application/vnd.kahootz": {
      "source": "iana",
      "extensions": ["ktz","ktr"]
    },
    "application/vnd.kde.karbon": {
      "source": "iana",
      "extensions": ["karbon"]
    },
    "application/vnd.kde.kchart": {
      "source": "iana",
      "extensions": ["chrt"]
    },
    "application/vnd.kde.kformula": {
      "source": "iana",
      "extensions": ["kfo"]
    },
    "application/vnd.kde.kivio": {
      "source": "iana",
      "extensions": ["flw"]
    },
    "application/vnd.kde.kontour": {
      "source": "iana",
      "extensions": ["kon"]
    },
    "application/vnd.kde.kpresenter": {
      "source": "iana",
      "extensions": ["kpr","kpt"]
    },
    "application/vnd.kde.kspread": {
      "source": "iana",
      "extensions": ["ksp"]
    },
    "application/vnd.kde.kword": {
      "source": "iana",
      "extensions": ["kwd","kwt"]
    },
    "application/vnd.kenameaapp": {
      "source": "iana",
      "extensions": ["htke"]
    },
    "application/vnd.kidspiration": {
      "source": "iana",
      "extensions": ["kia"]
    },
    "application/vnd.kinar": {
      "source": "iana",
      "extensions": ["kne","knp"]
    },
    "application/vnd.koan": {
      "source": "iana",
      "extensions": ["skp","skd","skt","skm"]
    },
    "application/vnd.kodak-descriptor": {
      "source": "iana",
      "extensions": ["sse"]
    },
    "application/vnd.las.las+xml": {
      "source": "iana",
      "extensions": ["lasxml"]
    },
    "application/vnd.liberty-request+xml": {
      "source": "iana"
    },
    "application/vnd.llamagraphics.life-balance.desktop": {
      "source": "iana",
      "extensions": ["lbd"]
    },
    "application/vnd.llamagraphics.life-balance.exchange+xml": {
      "source": "iana",
      "extensions": ["lbe"]
    },
    "application/vnd.lotus-1-2-3": {
      "source": "iana",
      "extensions": ["123"]
    },
    "application/vnd.lotus-approach": {
      "source": "iana",
      "extensions": ["apr"]
    },
    "application/vnd.lotus-freelance": {
      "source": "iana",
      "extensions": ["pre"]
    },
    "application/vnd.lotus-notes": {
      "source": "iana",
      "extensions": ["nsf"]
    },
    "application/vnd.lotus-organizer": {
      "source": "iana",
      "extensions": ["org"]
    },
    "application/vnd.lotus-screencam": {
      "source": "iana",
      "extensions": ["scm"]
    },
    "application/vnd.lotus-wordpro": {
      "source": "iana",
      "extensions": ["lwp"]
    },
    "application/vnd.macports.portpkg": {
      "source": "iana",
      "extensions": ["portpkg"]
    },
    "application/vnd.marlin.drm.actiontoken+xml": {
      "source": "iana"
    },
    "application/vnd.marlin.drm.conftoken+xml": {
      "source": "iana"
    },
    "application/vnd.marlin.drm.license+xml": {
      "source": "iana"
    },
    "application/vnd.marlin.drm.mdcf": {
      "source": "iana"
    },
    "application/vnd.mason+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.maxmind.maxmind-db": {
      "source": "iana"
    },
    "application/vnd.mcd": {
      "source": "iana",
      "extensions": ["mcd"]
    },
    "application/vnd.medcalcdata": {
      "source": "iana",
      "extensions": ["mc1"]
    },
    "application/vnd.mediastation.cdkey": {
      "source": "iana",
      "extensions": ["cdkey"]
    },
    "application/vnd.meridian-slingshot": {
      "source": "iana"
    },
    "application/vnd.mfer": {
      "source": "iana",
      "extensions": ["mwf"]
    },
    "application/vnd.mfmp": {
      "source": "iana",
      "extensions": ["mfm"]
    },
    "application/vnd.micro+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.micrografx.flo": {
      "source": "iana",
      "extensions": ["flo"]
    },
    "application/vnd.micrografx.igx": {
      "source": "iana",
      "extensions": ["igx"]
    },
    "application/vnd.microsoft.portable-executable": {
      "source": "iana"
    },
    "application/vnd.miele+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.mif": {
      "source": "iana",
      "extensions": ["mif"]
    },
    "application/vnd.minisoft-hp3000-save": {
      "source": "iana"
    },
    "application/vnd.mitsubishi.misty-guard.trustweb": {
      "source": "iana"
    },
    "application/vnd.mobius.daf": {
      "source": "iana",
      "extensions": ["daf"]
    },
    "application/vnd.mobius.dis": {
      "source": "iana",
      "extensions": ["dis"]
    },
    "application/vnd.mobius.mbk": {
      "source": "iana",
      "extensions": ["mbk"]
    },
    "application/vnd.mobius.mqy": {
      "source": "iana",
      "extensions": ["mqy"]
    },
    "application/vnd.mobius.msl": {
      "source": "iana",
      "extensions": ["msl"]
    },
    "application/vnd.mobius.plc": {
      "source": "iana",
      "extensions": ["plc"]
    },
    "application/vnd.mobius.txf": {
      "source": "iana",
      "extensions": ["txf"]
    },
    "application/vnd.mophun.application": {
      "source": "iana",
      "extensions": ["mpn"]
    },
    "application/vnd.mophun.certificate": {
      "source": "iana",
      "extensions": ["mpc"]
    },
    "application/vnd.motorola.flexsuite": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.adsi": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.fis": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.gotap": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.kmr": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.ttc": {
      "source": "iana"
    },
    "application/vnd.motorola.flexsuite.wem": {
      "source": "iana"
    },
    "application/vnd.motorola.iprm": {
      "source": "iana"
    },
    "application/vnd.mozilla.xul+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xul"]
    },
    "application/vnd.ms-3mfdocument": {
      "source": "iana"
    },
    "application/vnd.ms-artgalry": {
      "source": "iana",
      "extensions": ["cil"]
    },
    "application/vnd.ms-asf": {
      "source": "iana"
    },
    "application/vnd.ms-cab-compressed": {
      "source": "iana",
      "extensions": ["cab"]
    },
    "application/vnd.ms-color.iccprofile": {
      "source": "apache"
    },
    "application/vnd.ms-excel": {
      "source": "iana",
      "compressible": false,
      "extensions": ["xls","xlm","xla","xlc","xlt","xlw"]
    },
    "application/vnd.ms-excel.addin.macroenabled.12": {
      "source": "iana",
      "extensions": ["xlam"]
    },
    "application/vnd.ms-excel.sheet.binary.macroenabled.12": {
      "source": "iana",
      "extensions": ["xlsb"]
    },
    "application/vnd.ms-excel.sheet.macroenabled.12": {
      "source": "iana",
      "extensions": ["xlsm"]
    },
    "application/vnd.ms-excel.template.macroenabled.12": {
      "source": "iana",
      "extensions": ["xltm"]
    },
    "application/vnd.ms-fontobject": {
      "source": "iana",
      "compressible": true,
      "extensions": ["eot"]
    },
    "application/vnd.ms-htmlhelp": {
      "source": "iana",
      "extensions": ["chm"]
    },
    "application/vnd.ms-ims": {
      "source": "iana",
      "extensions": ["ims"]
    },
    "application/vnd.ms-lrm": {
      "source": "iana",
      "extensions": ["lrm"]
    },
    "application/vnd.ms-office.activex+xml": {
      "source": "iana"
    },
    "application/vnd.ms-officetheme": {
      "source": "iana",
      "extensions": ["thmx"]
    },
    "application/vnd.ms-opentype": {
      "source": "apache",
      "compressible": true
    },
    "application/vnd.ms-package.obfuscated-opentype": {
      "source": "apache"
    },
    "application/vnd.ms-pki.seccat": {
      "source": "apache",
      "extensions": ["cat"]
    },
    "application/vnd.ms-pki.stl": {
      "source": "apache",
      "extensions": ["stl"]
    },
    "application/vnd.ms-playready.initiator+xml": {
      "source": "iana"
    },
    "application/vnd.ms-powerpoint": {
      "source": "iana",
      "compressible": false,
      "extensions": ["ppt","pps","pot"]
    },
    "application/vnd.ms-powerpoint.addin.macroenabled.12": {
      "source": "iana",
      "extensions": ["ppam"]
    },
    "application/vnd.ms-powerpoint.presentation.macroenabled.12": {
      "source": "iana",
      "extensions": ["pptm"]
    },
    "application/vnd.ms-powerpoint.slide.macroenabled.12": {
      "source": "iana",
      "extensions": ["sldm"]
    },
    "application/vnd.ms-powerpoint.slideshow.macroenabled.12": {
      "source": "iana",
      "extensions": ["ppsm"]
    },
    "application/vnd.ms-powerpoint.template.macroenabled.12": {
      "source": "iana",
      "extensions": ["potm"]
    },
    "application/vnd.ms-printing.printticket+xml": {
      "source": "apache"
    },
    "application/vnd.ms-project": {
      "source": "iana",
      "extensions": ["mpp","mpt"]
    },
    "application/vnd.ms-tnef": {
      "source": "iana"
    },
    "application/vnd.ms-windows.printerpairing": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.lic-chlg-req": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.lic-resp": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.meter-chlg-req": {
      "source": "iana"
    },
    "application/vnd.ms-wmdrm.meter-resp": {
      "source": "iana"
    },
    "application/vnd.ms-word.document.macroenabled.12": {
      "source": "iana",
      "extensions": ["docm"]
    },
    "application/vnd.ms-word.template.macroenabled.12": {
      "source": "iana",
      "extensions": ["dotm"]
    },
    "application/vnd.ms-works": {
      "source": "iana",
      "extensions": ["wps","wks","wcm","wdb"]
    },
    "application/vnd.ms-wpl": {
      "source": "iana",
      "extensions": ["wpl"]
    },
    "application/vnd.ms-xpsdocument": {
      "source": "iana",
      "compressible": false,
      "extensions": ["xps"]
    },
    "application/vnd.msa-disk-image": {
      "source": "iana"
    },
    "application/vnd.mseq": {
      "source": "iana",
      "extensions": ["mseq"]
    },
    "application/vnd.msign": {
      "source": "iana"
    },
    "application/vnd.multiad.creator": {
      "source": "iana"
    },
    "application/vnd.multiad.creator.cif": {
      "source": "iana"
    },
    "application/vnd.music-niff": {
      "source": "iana"
    },
    "application/vnd.musician": {
      "source": "iana",
      "extensions": ["mus"]
    },
    "application/vnd.muvee.style": {
      "source": "iana",
      "extensions": ["msty"]
    },
    "application/vnd.mynfc": {
      "source": "iana",
      "extensions": ["taglet"]
    },
    "application/vnd.ncd.control": {
      "source": "iana"
    },
    "application/vnd.ncd.reference": {
      "source": "iana"
    },
    "application/vnd.nervana": {
      "source": "iana"
    },
    "application/vnd.netfpx": {
      "source": "iana"
    },
    "application/vnd.neurolanguage.nlu": {
      "source": "iana",
      "extensions": ["nlu"]
    },
    "application/vnd.nintendo.nitro.rom": {
      "source": "iana"
    },
    "application/vnd.nintendo.snes.rom": {
      "source": "iana"
    },
    "application/vnd.nitf": {
      "source": "iana",
      "extensions": ["ntf","nitf"]
    },
    "application/vnd.noblenet-directory": {
      "source": "iana",
      "extensions": ["nnd"]
    },
    "application/vnd.noblenet-sealer": {
      "source": "iana",
      "extensions": ["nns"]
    },
    "application/vnd.noblenet-web": {
      "source": "iana",
      "extensions": ["nnw"]
    },
    "application/vnd.nokia.catalogs": {
      "source": "iana"
    },
    "application/vnd.nokia.conml+wbxml": {
      "source": "iana"
    },
    "application/vnd.nokia.conml+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.iptv.config+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.isds-radio-presets": {
      "source": "iana"
    },
    "application/vnd.nokia.landmark+wbxml": {
      "source": "iana"
    },
    "application/vnd.nokia.landmark+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.landmarkcollection+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.n-gage.ac+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.n-gage.data": {
      "source": "iana",
      "extensions": ["ngdat"]
    },
    "application/vnd.nokia.n-gage.symbian.install": {
      "source": "iana",
      "extensions": ["n-gage"]
    },
    "application/vnd.nokia.ncd": {
      "source": "iana"
    },
    "application/vnd.nokia.pcd+wbxml": {
      "source": "iana"
    },
    "application/vnd.nokia.pcd+xml": {
      "source": "iana"
    },
    "application/vnd.nokia.radio-preset": {
      "source": "iana",
      "extensions": ["rpst"]
    },
    "application/vnd.nokia.radio-presets": {
      "source": "iana",
      "extensions": ["rpss"]
    },
    "application/vnd.novadigm.edm": {
      "source": "iana",
      "extensions": ["edm"]
    },
    "application/vnd.novadigm.edx": {
      "source": "iana",
      "extensions": ["edx"]
    },
    "application/vnd.novadigm.ext": {
      "source": "iana",
      "extensions": ["ext"]
    },
    "application/vnd.ntt-local.content-share": {
      "source": "iana"
    },
    "application/vnd.ntt-local.file-transfer": {
      "source": "iana"
    },
    "application/vnd.ntt-local.ogw_remote-access": {
      "source": "iana"
    },
    "application/vnd.ntt-local.sip-ta_remote": {
      "source": "iana"
    },
    "application/vnd.ntt-local.sip-ta_tcp_stream": {
      "source": "iana"
    },
    "application/vnd.oasis.opendocument.chart": {
      "source": "iana",
      "extensions": ["odc"]
    },
    "application/vnd.oasis.opendocument.chart-template": {
      "source": "iana",
      "extensions": ["otc"]
    },
    "application/vnd.oasis.opendocument.database": {
      "source": "iana",
      "extensions": ["odb"]
    },
    "application/vnd.oasis.opendocument.formula": {
      "source": "iana",
      "extensions": ["odf"]
    },
    "application/vnd.oasis.opendocument.formula-template": {
      "source": "iana",
      "extensions": ["odft"]
    },
    "application/vnd.oasis.opendocument.graphics": {
      "source": "iana",
      "compressible": false,
      "extensions": ["odg"]
    },
    "application/vnd.oasis.opendocument.graphics-template": {
      "source": "iana",
      "extensions": ["otg"]
    },
    "application/vnd.oasis.opendocument.image": {
      "source": "iana",
      "extensions": ["odi"]
    },
    "application/vnd.oasis.opendocument.image-template": {
      "source": "iana",
      "extensions": ["oti"]
    },
    "application/vnd.oasis.opendocument.presentation": {
      "source": "iana",
      "compressible": false,
      "extensions": ["odp"]
    },
    "application/vnd.oasis.opendocument.presentation-template": {
      "source": "iana",
      "extensions": ["otp"]
    },
    "application/vnd.oasis.opendocument.spreadsheet": {
      "source": "iana",
      "compressible": false,
      "extensions": ["ods"]
    },
    "application/vnd.oasis.opendocument.spreadsheet-template": {
      "source": "iana",
      "extensions": ["ots"]
    },
    "application/vnd.oasis.opendocument.text": {
      "source": "iana",
      "compressible": false,
      "extensions": ["odt"]
    },
    "application/vnd.oasis.opendocument.text-master": {
      "source": "iana",
      "extensions": ["odm"]
    },
    "application/vnd.oasis.opendocument.text-template": {
      "source": "iana",
      "extensions": ["ott"]
    },
    "application/vnd.oasis.opendocument.text-web": {
      "source": "iana",
      "extensions": ["oth"]
    },
    "application/vnd.obn": {
      "source": "iana"
    },
    "application/vnd.oftn.l10n+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.oipf.contentaccessdownload+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.contentaccessstreaming+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.cspg-hexbinary": {
      "source": "iana"
    },
    "application/vnd.oipf.dae.svg+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.dae.xhtml+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.mippvcontrolmessage+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.pae.gem": {
      "source": "iana"
    },
    "application/vnd.oipf.spdiscovery+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.spdlist+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.ueprofile+xml": {
      "source": "iana"
    },
    "application/vnd.oipf.userprofile+xml": {
      "source": "iana"
    },
    "application/vnd.olpc-sugar": {
      "source": "iana",
      "extensions": ["xo"]
    },
    "application/vnd.oma-scws-config": {
      "source": "iana"
    },
    "application/vnd.oma-scws-http-request": {
      "source": "iana"
    },
    "application/vnd.oma-scws-http-response": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.associated-procedure-parameter+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.drm-trigger+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.imd+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.ltkm": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.notification+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.provisioningtrigger": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sgboot": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sgdd+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sgdu": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.simple-symbol-container": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.smartcard-trigger+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.sprov+xml": {
      "source": "iana"
    },
    "application/vnd.oma.bcast.stkm": {
      "source": "iana"
    },
    "application/vnd.oma.cab-address-book+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-feature-handler+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-pcc+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-subs-invite+xml": {
      "source": "iana"
    },
    "application/vnd.oma.cab-user-prefs+xml": {
      "source": "iana"
    },
    "application/vnd.oma.dcd": {
      "source": "iana"
    },
    "application/vnd.oma.dcdc": {
      "source": "iana"
    },
    "application/vnd.oma.dd2+xml": {
      "source": "iana",
      "extensions": ["dd2"]
    },
    "application/vnd.oma.drm.risd+xml": {
      "source": "iana"
    },
    "application/vnd.oma.group-usage-list+xml": {
      "source": "iana"
    },
    "application/vnd.oma.pal+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.detailed-progress-report+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.final-report+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.groups+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.invocation-descriptor+xml": {
      "source": "iana"
    },
    "application/vnd.oma.poc.optimized-progress-report+xml": {
      "source": "iana"
    },
    "application/vnd.oma.push": {
      "source": "iana"
    },
    "application/vnd.oma.scidm.messages+xml": {
      "source": "iana"
    },
    "application/vnd.oma.xcap-directory+xml": {
      "source": "iana"
    },
    "application/vnd.omads-email+xml": {
      "source": "iana"
    },
    "application/vnd.omads-file+xml": {
      "source": "iana"
    },
    "application/vnd.omads-folder+xml": {
      "source": "iana"
    },
    "application/vnd.omaloc-supl-init": {
      "source": "iana"
    },
    "application/vnd.openeye.oeb": {
      "source": "iana"
    },
    "application/vnd.openofficeorg.extension": {
      "source": "apache",
      "extensions": ["oxt"]
    },
    "application/vnd.openxmlformats-officedocument.custom-properties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.customxmlproperties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawing+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.chart+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.extended-properties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml-template": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.comments+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.presentation": {
      "source": "iana",
      "compressible": false,
      "extensions": ["pptx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.presprops+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slide": {
      "source": "iana",
      "extensions": ["sldx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slide+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slideshow": {
      "source": "iana",
      "extensions": ["ppsx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.tags+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.template": {
      "source": "apache",
      "extensions": ["potx"]
    },
    "application/vnd.openxmlformats-officedocument.presentationml.template.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml-template": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet": {
      "source": "iana",
      "compressible": false,
      "extensions": ["xlsx"]
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.template": {
      "source": "apache",
      "extensions": ["xltx"]
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.theme+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.themeoverride+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.vmldrawing": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml-template": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document": {
      "source": "iana",
      "compressible": false,
      "extensions": ["docx"]
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.template": {
      "source": "apache",
      "extensions": ["dotx"]
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-package.core-properties+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml": {
      "source": "iana"
    },
    "application/vnd.openxmlformats-package.relationships+xml": {
      "source": "iana"
    },
    "application/vnd.oracle.resource+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.orange.indata": {
      "source": "iana"
    },
    "application/vnd.osa.netdeploy": {
      "source": "iana"
    },
    "application/vnd.osgeo.mapguide.package": {
      "source": "iana",
      "extensions": ["mgp"]
    },
    "application/vnd.osgi.bundle": {
      "source": "iana"
    },
    "application/vnd.osgi.dp": {
      "source": "iana",
      "extensions": ["dp"]
    },
    "application/vnd.osgi.subsystem": {
      "source": "iana",
      "extensions": ["esa"]
    },
    "application/vnd.otps.ct-kip+xml": {
      "source": "iana"
    },
    "application/vnd.palm": {
      "source": "iana",
      "extensions": ["pdb","pqa","oprc"]
    },
    "application/vnd.panoply": {
      "source": "iana"
    },
    "application/vnd.paos+xml": {
      "source": "iana"
    },
    "application/vnd.paos.xml": {
      "source": "apache"
    },
    "application/vnd.pawaafile": {
      "source": "iana",
      "extensions": ["paw"]
    },
    "application/vnd.pcos": {
      "source": "iana"
    },
    "application/vnd.pg.format": {
      "source": "iana",
      "extensions": ["str"]
    },
    "application/vnd.pg.osasli": {
      "source": "iana",
      "extensions": ["ei6"]
    },
    "application/vnd.piaccess.application-licence": {
      "source": "iana"
    },
    "application/vnd.picsel": {
      "source": "iana",
      "extensions": ["efif"]
    },
    "application/vnd.pmi.widget": {
      "source": "iana",
      "extensions": ["wg"]
    },
    "application/vnd.poc.group-advertisement+xml": {
      "source": "iana"
    },
    "application/vnd.pocketlearn": {
      "source": "iana",
      "extensions": ["plf"]
    },
    "application/vnd.powerbuilder6": {
      "source": "iana",
      "extensions": ["pbd"]
    },
    "application/vnd.powerbuilder6-s": {
      "source": "iana"
    },
    "application/vnd.powerbuilder7": {
      "source": "iana"
    },
    "application/vnd.powerbuilder7-s": {
      "source": "iana"
    },
    "application/vnd.powerbuilder75": {
      "source": "iana"
    },
    "application/vnd.powerbuilder75-s": {
      "source": "iana"
    },
    "application/vnd.preminet": {
      "source": "iana"
    },
    "application/vnd.previewsystems.box": {
      "source": "iana",
      "extensions": ["box"]
    },
    "application/vnd.proteus.magazine": {
      "source": "iana",
      "extensions": ["mgz"]
    },
    "application/vnd.publishare-delta-tree": {
      "source": "iana",
      "extensions": ["qps"]
    },
    "application/vnd.pvi.ptid1": {
      "source": "iana",
      "extensions": ["ptid"]
    },
    "application/vnd.pwg-multiplexed": {
      "source": "iana"
    },
    "application/vnd.pwg-xhtml-print+xml": {
      "source": "iana"
    },
    "application/vnd.qualcomm.brew-app-res": {
      "source": "iana"
    },
    "application/vnd.quark.quarkxpress": {
      "source": "iana",
      "extensions": ["qxd","qxt","qwd","qwt","qxl","qxb"]
    },
    "application/vnd.quobject-quoxdocument": {
      "source": "iana"
    },
    "application/vnd.radisys.moml+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-conf+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-conn+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-dialog+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-audit-stream+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-conf+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-base+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-fax-detect+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-fax-sendrecv+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-group+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-speech+xml": {
      "source": "iana"
    },
    "application/vnd.radisys.msml-dialog-transform+xml": {
      "source": "iana"
    },
    "application/vnd.rainstor.data": {
      "source": "iana"
    },
    "application/vnd.rapid": {
      "source": "iana"
    },
    "application/vnd.realvnc.bed": {
      "source": "iana",
      "extensions": ["bed"]
    },
    "application/vnd.recordare.musicxml": {
      "source": "iana",
      "extensions": ["mxl"]
    },
    "application/vnd.recordare.musicxml+xml": {
      "source": "iana",
      "extensions": ["musicxml"]
    },
    "application/vnd.renlearn.rlprint": {
      "source": "iana"
    },
    "application/vnd.rig.cryptonote": {
      "source": "iana",
      "extensions": ["cryptonote"]
    },
    "application/vnd.rim.cod": {
      "source": "apache",
      "extensions": ["cod"]
    },
    "application/vnd.rn-realmedia": {
      "source": "apache",
      "extensions": ["rm"]
    },
    "application/vnd.rn-realmedia-vbr": {
      "source": "apache",
      "extensions": ["rmvb"]
    },
    "application/vnd.route66.link66+xml": {
      "source": "iana",
      "extensions": ["link66"]
    },
    "application/vnd.rs-274x": {
      "source": "iana"
    },
    "application/vnd.ruckus.download": {
      "source": "iana"
    },
    "application/vnd.s3sms": {
      "source": "iana"
    },
    "application/vnd.sailingtracker.track": {
      "source": "iana",
      "extensions": ["st"]
    },
    "application/vnd.sbm.cid": {
      "source": "iana"
    },
    "application/vnd.sbm.mid2": {
      "source": "iana"
    },
    "application/vnd.scribus": {
      "source": "iana"
    },
    "application/vnd.sealed.3df": {
      "source": "iana"
    },
    "application/vnd.sealed.csf": {
      "source": "iana"
    },
    "application/vnd.sealed.doc": {
      "source": "iana"
    },
    "application/vnd.sealed.eml": {
      "source": "iana"
    },
    "application/vnd.sealed.mht": {
      "source": "iana"
    },
    "application/vnd.sealed.net": {
      "source": "iana"
    },
    "application/vnd.sealed.ppt": {
      "source": "iana"
    },
    "application/vnd.sealed.tiff": {
      "source": "iana"
    },
    "application/vnd.sealed.xls": {
      "source": "iana"
    },
    "application/vnd.sealedmedia.softseal.html": {
      "source": "iana"
    },
    "application/vnd.sealedmedia.softseal.pdf": {
      "source": "iana"
    },
    "application/vnd.seemail": {
      "source": "iana",
      "extensions": ["see"]
    },
    "application/vnd.sema": {
      "source": "iana",
      "extensions": ["sema"]
    },
    "application/vnd.semd": {
      "source": "iana",
      "extensions": ["semd"]
    },
    "application/vnd.semf": {
      "source": "iana",
      "extensions": ["semf"]
    },
    "application/vnd.shana.informed.formdata": {
      "source": "iana",
      "extensions": ["ifm"]
    },
    "application/vnd.shana.informed.formtemplate": {
      "source": "iana",
      "extensions": ["itp"]
    },
    "application/vnd.shana.informed.interchange": {
      "source": "iana",
      "extensions": ["iif"]
    },
    "application/vnd.shana.informed.package": {
      "source": "iana",
      "extensions": ["ipk"]
    },
    "application/vnd.simtech-mindmapper": {
      "source": "iana",
      "extensions": ["twd","twds"]
    },
    "application/vnd.siren+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.smaf": {
      "source": "iana",
      "extensions": ["mmf"]
    },
    "application/vnd.smart.notebook": {
      "source": "iana"
    },
    "application/vnd.smart.teacher": {
      "source": "iana",
      "extensions": ["teacher"]
    },
    "application/vnd.software602.filler.form+xml": {
      "source": "iana"
    },
    "application/vnd.software602.filler.form-xml-zip": {
      "source": "iana"
    },
    "application/vnd.solent.sdkm+xml": {
      "source": "iana",
      "extensions": ["sdkm","sdkd"]
    },
    "application/vnd.spotfire.dxp": {
      "source": "iana",
      "extensions": ["dxp"]
    },
    "application/vnd.spotfire.sfs": {
      "source": "iana",
      "extensions": ["sfs"]
    },
    "application/vnd.sss-cod": {
      "source": "iana"
    },
    "application/vnd.sss-dtf": {
      "source": "iana"
    },
    "application/vnd.sss-ntf": {
      "source": "iana"
    },
    "application/vnd.stardivision.calc": {
      "source": "apache",
      "extensions": ["sdc"]
    },
    "application/vnd.stardivision.draw": {
      "source": "apache",
      "extensions": ["sda"]
    },
    "application/vnd.stardivision.impress": {
      "source": "apache",
      "extensions": ["sdd"]
    },
    "application/vnd.stardivision.math": {
      "source": "apache",
      "extensions": ["smf"]
    },
    "application/vnd.stardivision.writer": {
      "source": "apache",
      "extensions": ["sdw","vor"]
    },
    "application/vnd.stardivision.writer-global": {
      "source": "apache",
      "extensions": ["sgl"]
    },
    "application/vnd.stepmania.package": {
      "source": "iana",
      "extensions": ["smzip"]
    },
    "application/vnd.stepmania.stepchart": {
      "source": "iana",
      "extensions": ["sm"]
    },
    "application/vnd.street-stream": {
      "source": "iana"
    },
    "application/vnd.sun.wadl+xml": {
      "source": "iana"
    },
    "application/vnd.sun.xml.calc": {
      "source": "apache",
      "extensions": ["sxc"]
    },
    "application/vnd.sun.xml.calc.template": {
      "source": "apache",
      "extensions": ["stc"]
    },
    "application/vnd.sun.xml.draw": {
      "source": "apache",
      "extensions": ["sxd"]
    },
    "application/vnd.sun.xml.draw.template": {
      "source": "apache",
      "extensions": ["std"]
    },
    "application/vnd.sun.xml.impress": {
      "source": "apache",
      "extensions": ["sxi"]
    },
    "application/vnd.sun.xml.impress.template": {
      "source": "apache",
      "extensions": ["sti"]
    },
    "application/vnd.sun.xml.math": {
      "source": "apache",
      "extensions": ["sxm"]
    },
    "application/vnd.sun.xml.writer": {
      "source": "apache",
      "extensions": ["sxw"]
    },
    "application/vnd.sun.xml.writer.global": {
      "source": "apache",
      "extensions": ["sxg"]
    },
    "application/vnd.sun.xml.writer.template": {
      "source": "apache",
      "extensions": ["stw"]
    },
    "application/vnd.sus-calendar": {
      "source": "iana",
      "extensions": ["sus","susp"]
    },
    "application/vnd.svd": {
      "source": "iana",
      "extensions": ["svd"]
    },
    "application/vnd.swiftview-ics": {
      "source": "iana"
    },
    "application/vnd.symbian.install": {
      "source": "apache",
      "extensions": ["sis","sisx"]
    },
    "application/vnd.syncml+xml": {
      "source": "iana",
      "extensions": ["xsm"]
    },
    "application/vnd.syncml.dm+wbxml": {
      "source": "iana",
      "extensions": ["bdm"]
    },
    "application/vnd.syncml.dm+xml": {
      "source": "iana",
      "extensions": ["xdm"]
    },
    "application/vnd.syncml.dm.notification": {
      "source": "iana"
    },
    "application/vnd.syncml.dmddf+wbxml": {
      "source": "iana"
    },
    "application/vnd.syncml.dmddf+xml": {
      "source": "iana"
    },
    "application/vnd.syncml.dmtnds+wbxml": {
      "source": "iana"
    },
    "application/vnd.syncml.dmtnds+xml": {
      "source": "iana"
    },
    "application/vnd.syncml.ds.notification": {
      "source": "iana"
    },
    "application/vnd.tao.intent-module-archive": {
      "source": "iana",
      "extensions": ["tao"]
    },
    "application/vnd.tcpdump.pcap": {
      "source": "iana",
      "extensions": ["pcap","cap","dmp"]
    },
    "application/vnd.tmd.mediaflex.api+xml": {
      "source": "iana"
    },
    "application/vnd.tmobile-livetv": {
      "source": "iana",
      "extensions": ["tmo"]
    },
    "application/vnd.trid.tpt": {
      "source": "iana",
      "extensions": ["tpt"]
    },
    "application/vnd.triscape.mxs": {
      "source": "iana",
      "extensions": ["mxs"]
    },
    "application/vnd.trueapp": {
      "source": "iana",
      "extensions": ["tra"]
    },
    "application/vnd.truedoc": {
      "source": "iana"
    },
    "application/vnd.ubisoft.webplayer": {
      "source": "iana"
    },
    "application/vnd.ufdl": {
      "source": "iana",
      "extensions": ["ufd","ufdl"]
    },
    "application/vnd.uiq.theme": {
      "source": "iana",
      "extensions": ["utz"]
    },
    "application/vnd.umajin": {
      "source": "iana",
      "extensions": ["umj"]
    },
    "application/vnd.unity": {
      "source": "iana",
      "extensions": ["unityweb"]
    },
    "application/vnd.uoml+xml": {
      "source": "iana",
      "extensions": ["uoml"]
    },
    "application/vnd.uplanet.alert": {
      "source": "iana"
    },
    "application/vnd.uplanet.alert-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.bearer-choice": {
      "source": "iana"
    },
    "application/vnd.uplanet.bearer-choice-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.cacheop": {
      "source": "iana"
    },
    "application/vnd.uplanet.cacheop-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.channel": {
      "source": "iana"
    },
    "application/vnd.uplanet.channel-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.list": {
      "source": "iana"
    },
    "application/vnd.uplanet.list-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.listcmd": {
      "source": "iana"
    },
    "application/vnd.uplanet.listcmd-wbxml": {
      "source": "iana"
    },
    "application/vnd.uplanet.signal": {
      "source": "iana"
    },
    "application/vnd.uri-map": {
      "source": "iana"
    },
    "application/vnd.valve.source.material": {
      "source": "iana"
    },
    "application/vnd.vcx": {
      "source": "iana",
      "extensions": ["vcx"]
    },
    "application/vnd.vd-study": {
      "source": "iana"
    },
    "application/vnd.vectorworks": {
      "source": "iana"
    },
    "application/vnd.verimatrix.vcas": {
      "source": "iana"
    },
    "application/vnd.vidsoft.vidconference": {
      "source": "iana"
    },
    "application/vnd.visio": {
      "source": "iana",
      "extensions": ["vsd","vst","vss","vsw"]
    },
    "application/vnd.visionary": {
      "source": "iana",
      "extensions": ["vis"]
    },
    "application/vnd.vividence.scriptfile": {
      "source": "iana"
    },
    "application/vnd.vsf": {
      "source": "iana",
      "extensions": ["vsf"]
    },
    "application/vnd.wap.sic": {
      "source": "iana"
    },
    "application/vnd.wap.slc": {
      "source": "iana"
    },
    "application/vnd.wap.wbxml": {
      "source": "iana",
      "extensions": ["wbxml"]
    },
    "application/vnd.wap.wmlc": {
      "source": "iana",
      "extensions": ["wmlc"]
    },
    "application/vnd.wap.wmlscriptc": {
      "source": "iana",
      "extensions": ["wmlsc"]
    },
    "application/vnd.webturbo": {
      "source": "iana",
      "extensions": ["wtb"]
    },
    "application/vnd.wfa.p2p": {
      "source": "iana"
    },
    "application/vnd.wfa.wsc": {
      "source": "iana"
    },
    "application/vnd.windows.devicepairing": {
      "source": "iana"
    },
    "application/vnd.wmc": {
      "source": "iana"
    },
    "application/vnd.wmf.bootstrap": {
      "source": "iana"
    },
    "application/vnd.wolfram.mathematica": {
      "source": "iana"
    },
    "application/vnd.wolfram.mathematica.package": {
      "source": "iana"
    },
    "application/vnd.wolfram.player": {
      "source": "iana",
      "extensions": ["nbp"]
    },
    "application/vnd.wordperfect": {
      "source": "iana",
      "extensions": ["wpd"]
    },
    "application/vnd.wqd": {
      "source": "iana",
      "extensions": ["wqd"]
    },
    "application/vnd.wrq-hp3000-labelled": {
      "source": "iana"
    },
    "application/vnd.wt.stf": {
      "source": "iana",
      "extensions": ["stf"]
    },
    "application/vnd.wv.csp+wbxml": {
      "source": "iana"
    },
    "application/vnd.wv.csp+xml": {
      "source": "iana"
    },
    "application/vnd.wv.ssp+xml": {
      "source": "iana"
    },
    "application/vnd.xacml+json": {
      "source": "iana",
      "compressible": true
    },
    "application/vnd.xara": {
      "source": "iana",
      "extensions": ["xar"]
    },
    "application/vnd.xfdl": {
      "source": "iana",
      "extensions": ["xfdl"]
    },
    "application/vnd.xfdl.webform": {
      "source": "iana"
    },
    "application/vnd.xmi+xml": {
      "source": "iana"
    },
    "application/vnd.xmpie.cpkg": {
      "source": "iana"
    },
    "application/vnd.xmpie.dpkg": {
      "source": "iana"
    },
    "application/vnd.xmpie.plan": {
      "source": "iana"
    },
    "application/vnd.xmpie.ppkg": {
      "source": "iana"
    },
    "application/vnd.xmpie.xlim": {
      "source": "iana"
    },
    "application/vnd.yamaha.hv-dic": {
      "source": "iana",
      "extensions": ["hvd"]
    },
    "application/vnd.yamaha.hv-script": {
      "source": "iana",
      "extensions": ["hvs"]
    },
    "application/vnd.yamaha.hv-voice": {
      "source": "iana",
      "extensions": ["hvp"]
    },
    "application/vnd.yamaha.openscoreformat": {
      "source": "iana",
      "extensions": ["osf"]
    },
    "application/vnd.yamaha.openscoreformat.osfpvg+xml": {
      "source": "iana",
      "extensions": ["osfpvg"]
    },
    "application/vnd.yamaha.remote-setup": {
      "source": "iana"
    },
    "application/vnd.yamaha.smaf-audio": {
      "source": "iana",
      "extensions": ["saf"]
    },
    "application/vnd.yamaha.smaf-phrase": {
      "source": "iana",
      "extensions": ["spf"]
    },
    "application/vnd.yamaha.through-ngn": {
      "source": "iana"
    },
    "application/vnd.yamaha.tunnel-udpencap": {
      "source": "iana"
    },
    "application/vnd.yaoweme": {
      "source": "iana"
    },
    "application/vnd.yellowriver-custom-menu": {
      "source": "iana",
      "extensions": ["cmp"]
    },
    "application/vnd.zul": {
      "source": "iana",
      "extensions": ["zir","zirz"]
    },
    "application/vnd.zzazz.deck+xml": {
      "source": "iana",
      "extensions": ["zaz"]
    },
    "application/voicexml+xml": {
      "source": "iana",
      "extensions": ["vxml"]
    },
    "application/vq-rtcpxr": {
      "source": "iana"
    },
    "application/watcherinfo+xml": {
      "source": "iana"
    },
    "application/whoispp-query": {
      "source": "iana"
    },
    "application/whoispp-response": {
      "source": "iana"
    },
    "application/widget": {
      "source": "iana",
      "extensions": ["wgt"]
    },
    "application/winhlp": {
      "source": "apache",
      "extensions": ["hlp"]
    },
    "application/wita": {
      "source": "iana"
    },
    "application/wordperfect5.1": {
      "source": "iana"
    },
    "application/wsdl+xml": {
      "source": "iana",
      "extensions": ["wsdl"]
    },
    "application/wspolicy+xml": {
      "source": "iana",
      "extensions": ["wspolicy"]
    },
    "application/x-7z-compressed": {
      "source": "apache",
      "compressible": false,
      "extensions": ["7z"]
    },
    "application/x-abiword": {
      "source": "apache",
      "extensions": ["abw"]
    },
    "application/x-ace-compressed": {
      "source": "apache",
      "extensions": ["ace"]
    },
    "application/x-amf": {
      "source": "apache"
    },
    "application/x-apple-diskimage": {
      "source": "apache",
      "extensions": ["dmg"]
    },
    "application/x-authorware-bin": {
      "source": "apache",
      "extensions": ["aab","x32","u32","vox"]
    },
    "application/x-authorware-map": {
      "source": "apache",
      "extensions": ["aam"]
    },
    "application/x-authorware-seg": {
      "source": "apache",
      "extensions": ["aas"]
    },
    "application/x-bcpio": {
      "source": "apache",
      "extensions": ["bcpio"]
    },
    "application/x-bdoc": {
      "compressible": false,
      "extensions": ["bdoc"]
    },
    "application/x-bittorrent": {
      "source": "apache",
      "extensions": ["torrent"]
    },
    "application/x-blorb": {
      "source": "apache",
      "extensions": ["blb","blorb"]
    },
    "application/x-bzip": {
      "source": "apache",
      "compressible": false,
      "extensions": ["bz"]
    },
    "application/x-bzip2": {
      "source": "apache",
      "compressible": false,
      "extensions": ["bz2","boz"]
    },
    "application/x-cbr": {
      "source": "apache",
      "extensions": ["cbr","cba","cbt","cbz","cb7"]
    },
    "application/x-cdlink": {
      "source": "apache",
      "extensions": ["vcd"]
    },
    "application/x-cfs-compressed": {
      "source": "apache",
      "extensions": ["cfs"]
    },
    "application/x-chat": {
      "source": "apache",
      "extensions": ["chat"]
    },
    "application/x-chess-pgn": {
      "source": "apache",
      "extensions": ["pgn"]
    },
    "application/x-chrome-extension": {
      "extensions": ["crx"]
    },
    "application/x-cocoa": {
      "source": "nginx",
      "extensions": ["cco"]
    },
    "application/x-compress": {
      "source": "apache"
    },
    "application/x-conference": {
      "source": "apache",
      "extensions": ["nsc"]
    },
    "application/x-cpio": {
      "source": "apache",
      "extensions": ["cpio"]
    },
    "application/x-csh": {
      "source": "apache",
      "extensions": ["csh"]
    },
    "application/x-deb": {
      "compressible": false
    },
    "application/x-debian-package": {
      "source": "apache",
      "extensions": ["deb","udeb"]
    },
    "application/x-dgc-compressed": {
      "source": "apache",
      "extensions": ["dgc"]
    },
    "application/x-director": {
      "source": "apache",
      "extensions": ["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]
    },
    "application/x-doom": {
      "source": "apache",
      "extensions": ["wad"]
    },
    "application/x-dtbncx+xml": {
      "source": "apache",
      "extensions": ["ncx"]
    },
    "application/x-dtbook+xml": {
      "source": "apache",
      "extensions": ["dtb"]
    },
    "application/x-dtbresource+xml": {
      "source": "apache",
      "extensions": ["res"]
    },
    "application/x-dvi": {
      "source": "apache",
      "compressible": false,
      "extensions": ["dvi"]
    },
    "application/x-envoy": {
      "source": "apache",
      "extensions": ["evy"]
    },
    "application/x-eva": {
      "source": "apache",
      "extensions": ["eva"]
    },
    "application/x-font-bdf": {
      "source": "apache",
      "extensions": ["bdf"]
    },
    "application/x-font-dos": {
      "source": "apache"
    },
    "application/x-font-framemaker": {
      "source": "apache"
    },
    "application/x-font-ghostscript": {
      "source": "apache",
      "extensions": ["gsf"]
    },
    "application/x-font-libgrx": {
      "source": "apache"
    },
    "application/x-font-linux-psf": {
      "source": "apache",
      "extensions": ["psf"]
    },
    "application/x-font-otf": {
      "source": "apache",
      "compressible": true,
      "extensions": ["otf"]
    },
    "application/x-font-pcf": {
      "source": "apache",
      "extensions": ["pcf"]
    },
    "application/x-font-snf": {
      "source": "apache",
      "extensions": ["snf"]
    },
    "application/x-font-speedo": {
      "source": "apache"
    },
    "application/x-font-sunos-news": {
      "source": "apache"
    },
    "application/x-font-ttf": {
      "source": "apache",
      "compressible": true,
      "extensions": ["ttf","ttc"]
    },
    "application/x-font-type1": {
      "source": "apache",
      "extensions": ["pfa","pfb","pfm","afm"]
    },
    "application/x-font-vfont": {
      "source": "apache"
    },
    "application/x-freearc": {
      "source": "apache",
      "extensions": ["arc"]
    },
    "application/x-futuresplash": {
      "source": "apache",
      "extensions": ["spl"]
    },
    "application/x-gca-compressed": {
      "source": "apache",
      "extensions": ["gca"]
    },
    "application/x-glulx": {
      "source": "apache",
      "extensions": ["ulx"]
    },
    "application/x-gnumeric": {
      "source": "apache",
      "extensions": ["gnumeric"]
    },
    "application/x-gramps-xml": {
      "source": "apache",
      "extensions": ["gramps"]
    },
    "application/x-gtar": {
      "source": "apache",
      "extensions": ["gtar"]
    },
    "application/x-gzip": {
      "source": "apache"
    },
    "application/x-hdf": {
      "source": "apache",
      "extensions": ["hdf"]
    },
    "application/x-httpd-php": {
      "compressible": true,
      "extensions": ["php"]
    },
    "application/x-install-instructions": {
      "source": "apache",
      "extensions": ["install"]
    },
    "application/x-iso9660-image": {
      "source": "apache",
      "extensions": ["iso"]
    },
    "application/x-java-archive-diff": {
      "source": "nginx",
      "extensions": ["jardiff"]
    },
    "application/x-java-jnlp-file": {
      "source": "apache",
      "compressible": false,
      "extensions": ["jnlp"]
    },
    "application/x-javascript": {
      "compressible": true
    },
    "application/x-latex": {
      "source": "apache",
      "compressible": false,
      "extensions": ["latex"]
    },
    "application/x-lua-bytecode": {
      "extensions": ["luac"]
    },
    "application/x-lzh-compressed": {
      "source": "apache",
      "extensions": ["lzh","lha"]
    },
    "application/x-makeself": {
      "source": "nginx",
      "extensions": ["run"]
    },
    "application/x-mie": {
      "source": "apache",
      "extensions": ["mie"]
    },
    "application/x-mobipocket-ebook": {
      "source": "apache",
      "extensions": ["prc","mobi"]
    },
    "application/x-mpegurl": {
      "compressible": false
    },
    "application/x-ms-application": {
      "source": "apache",
      "extensions": ["application"]
    },
    "application/x-ms-shortcut": {
      "source": "apache",
      "extensions": ["lnk"]
    },
    "application/x-ms-wmd": {
      "source": "apache",
      "extensions": ["wmd"]
    },
    "application/x-ms-wmz": {
      "source": "apache",
      "extensions": ["wmz"]
    },
    "application/x-ms-xbap": {
      "source": "apache",
      "extensions": ["xbap"]
    },
    "application/x-msaccess": {
      "source": "apache",
      "extensions": ["mdb"]
    },
    "application/x-msbinder": {
      "source": "apache",
      "extensions": ["obd"]
    },
    "application/x-mscardfile": {
      "source": "apache",
      "extensions": ["crd"]
    },
    "application/x-msclip": {
      "source": "apache",
      "extensions": ["clp"]
    },
    "application/x-msdownload": {
      "source": "apache",
      "extensions": ["exe","dll","com","bat","msi"]
    },
    "application/x-msmediaview": {
      "source": "apache",
      "extensions": ["mvb","m13","m14"]
    },
    "application/x-msmetafile": {
      "source": "apache",
      "extensions": ["wmf","wmz","emf","emz"]
    },
    "application/x-msmoney": {
      "source": "apache",
      "extensions": ["mny"]
    },
    "application/x-mspublisher": {
      "source": "apache",
      "extensions": ["pub"]
    },
    "application/x-msschedule": {
      "source": "apache",
      "extensions": ["scd"]
    },
    "application/x-msterminal": {
      "source": "apache",
      "extensions": ["trm"]
    },
    "application/x-mswrite": {
      "source": "apache",
      "extensions": ["wri"]
    },
    "application/x-netcdf": {
      "source": "apache",
      "extensions": ["nc","cdf"]
    },
    "application/x-ns-proxy-autoconfig": {
      "compressible": true,
      "extensions": ["pac"]
    },
    "application/x-nzb": {
      "source": "apache",
      "extensions": ["nzb"]
    },
    "application/x-perl": {
      "source": "nginx",
      "extensions": ["pl","pm"]
    },
    "application/x-pilot": {
      "source": "nginx",
      "extensions": ["prc","pdb"]
    },
    "application/x-pkcs12": {
      "source": "apache",
      "compressible": false,
      "extensions": ["p12","pfx"]
    },
    "application/x-pkcs7-certificates": {
      "source": "apache",
      "extensions": ["p7b","spc"]
    },
    "application/x-pkcs7-certreqresp": {
      "source": "apache",
      "extensions": ["p7r"]
    },
    "application/x-rar-compressed": {
      "source": "apache",
      "compressible": false,
      "extensions": ["rar"]
    },
    "application/x-redhat-package-manager": {
      "source": "nginx",
      "extensions": ["rpm"]
    },
    "application/x-research-info-systems": {
      "source": "apache",
      "extensions": ["ris"]
    },
    "application/x-sea": {
      "source": "nginx",
      "extensions": ["sea"]
    },
    "application/x-sh": {
      "source": "apache",
      "compressible": true,
      "extensions": ["sh"]
    },
    "application/x-shar": {
      "source": "apache",
      "extensions": ["shar"]
    },
    "application/x-shockwave-flash": {
      "source": "apache",
      "compressible": false,
      "extensions": ["swf"]
    },
    "application/x-silverlight-app": {
      "source": "apache",
      "extensions": ["xap"]
    },
    "application/x-sql": {
      "source": "apache",
      "extensions": ["sql"]
    },
    "application/x-stuffit": {
      "source": "apache",
      "compressible": false,
      "extensions": ["sit"]
    },
    "application/x-stuffitx": {
      "source": "apache",
      "extensions": ["sitx"]
    },
    "application/x-subrip": {
      "source": "apache",
      "extensions": ["srt"]
    },
    "application/x-sv4cpio": {
      "source": "apache",
      "extensions": ["sv4cpio"]
    },
    "application/x-sv4crc": {
      "source": "apache",
      "extensions": ["sv4crc"]
    },
    "application/x-t3vm-image": {
      "source": "apache",
      "extensions": ["t3"]
    },
    "application/x-tads": {
      "source": "apache",
      "extensions": ["gam"]
    },
    "application/x-tar": {
      "source": "apache",
      "compressible": true,
      "extensions": ["tar"]
    },
    "application/x-tcl": {
      "source": "apache",
      "extensions": ["tcl","tk"]
    },
    "application/x-tex": {
      "source": "apache",
      "extensions": ["tex"]
    },
    "application/x-tex-tfm": {
      "source": "apache",
      "extensions": ["tfm"]
    },
    "application/x-texinfo": {
      "source": "apache",
      "extensions": ["texinfo","texi"]
    },
    "application/x-tgif": {
      "source": "apache",
      "extensions": ["obj"]
    },
    "application/x-ustar": {
      "source": "apache",
      "extensions": ["ustar"]
    },
    "application/x-wais-source": {
      "source": "apache",
      "extensions": ["src"]
    },
    "application/x-web-app-manifest+json": {
      "compressible": true,
      "extensions": ["webapp"]
    },
    "application/x-www-form-urlencoded": {
      "source": "iana",
      "compressible": true
    },
    "application/x-x509-ca-cert": {
      "source": "apache",
      "extensions": ["der","crt","pem"]
    },
    "application/x-xfig": {
      "source": "apache",
      "extensions": ["fig"]
    },
    "application/x-xliff+xml": {
      "source": "apache",
      "extensions": ["xlf"]
    },
    "application/x-xpinstall": {
      "source": "apache",
      "compressible": false,
      "extensions": ["xpi"]
    },
    "application/x-xz": {
      "source": "apache",
      "extensions": ["xz"]
    },
    "application/x-zmachine": {
      "source": "apache",
      "extensions": ["z1","z2","z3","z4","z5","z6","z7","z8"]
    },
    "application/x400-bp": {
      "source": "iana"
    },
    "application/xacml+xml": {
      "source": "iana"
    },
    "application/xaml+xml": {
      "source": "apache",
      "extensions": ["xaml"]
    },
    "application/xcap-att+xml": {
      "source": "iana"
    },
    "application/xcap-caps+xml": {
      "source": "iana"
    },
    "application/xcap-diff+xml": {
      "source": "iana",
      "extensions": ["xdf"]
    },
    "application/xcap-el+xml": {
      "source": "iana"
    },
    "application/xcap-error+xml": {
      "source": "iana"
    },
    "application/xcap-ns+xml": {
      "source": "iana"
    },
    "application/xcon-conference-info+xml": {
      "source": "iana"
    },
    "application/xcon-conference-info-diff+xml": {
      "source": "iana"
    },
    "application/xenc+xml": {
      "source": "iana",
      "extensions": ["xenc"]
    },
    "application/xhtml+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xhtml","xht"]
    },
    "application/xhtml-voice+xml": {
      "source": "apache"
    },
    "application/xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xml","xsl","xsd"]
    },
    "application/xml-dtd": {
      "source": "iana",
      "compressible": true,
      "extensions": ["dtd"]
    },
    "application/xml-external-parsed-entity": {
      "source": "iana"
    },
    "application/xml-patch+xml": {
      "source": "iana"
    },
    "application/xmpp+xml": {
      "source": "iana"
    },
    "application/xop+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xop"]
    },
    "application/xproc+xml": {
      "source": "apache",
      "extensions": ["xpl"]
    },
    "application/xslt+xml": {
      "source": "iana",
      "extensions": ["xslt"]
    },
    "application/xspf+xml": {
      "source": "apache",
      "extensions": ["xspf"]
    },
    "application/xv+xml": {
      "source": "iana",
      "extensions": ["mxml","xhvml","xvml","xvm"]
    },
    "application/yang": {
      "source": "iana",
      "extensions": ["yang"]
    },
    "application/yin+xml": {
      "source": "iana",
      "extensions": ["yin"]
    },
    "application/zip": {
      "source": "iana",
      "compressible": false,
      "extensions": ["zip"]
    },
    "application/zlib": {
      "source": "iana"
    },
    "audio/1d-interleaved-parityfec": {
      "source": "iana"
    },
    "audio/32kadpcm": {
      "source": "iana"
    },
    "audio/3gpp": {
      "source": "iana"
    },
    "audio/3gpp2": {
      "source": "iana"
    },
    "audio/ac3": {
      "source": "iana"
    },
    "audio/adpcm": {
      "source": "apache",
      "extensions": ["adp"]
    },
    "audio/amr": {
      "source": "iana"
    },
    "audio/amr-wb": {
      "source": "iana"
    },
    "audio/amr-wb+": {
      "source": "iana"
    },
    "audio/aptx": {
      "source": "iana"
    },
    "audio/asc": {
      "source": "iana"
    },
    "audio/atrac-advanced-lossless": {
      "source": "iana"
    },
    "audio/atrac-x": {
      "source": "iana"
    },
    "audio/atrac3": {
      "source": "iana"
    },
    "audio/basic": {
      "source": "iana",
      "compressible": false,
      "extensions": ["au","snd"]
    },
    "audio/bv16": {
      "source": "iana"
    },
    "audio/bv32": {
      "source": "iana"
    },
    "audio/clearmode": {
      "source": "iana"
    },
    "audio/cn": {
      "source": "iana"
    },
    "audio/dat12": {
      "source": "iana"
    },
    "audio/dls": {
      "source": "iana"
    },
    "audio/dsr-es201108": {
      "source": "iana"
    },
    "audio/dsr-es202050": {
      "source": "iana"
    },
    "audio/dsr-es202211": {
      "source": "iana"
    },
    "audio/dsr-es202212": {
      "source": "iana"
    },
    "audio/dv": {
      "source": "iana"
    },
    "audio/dvi4": {
      "source": "iana"
    },
    "audio/eac3": {
      "source": "iana"
    },
    "audio/encaprtp": {
      "source": "iana"
    },
    "audio/evrc": {
      "source": "iana"
    },
    "audio/evrc-qcp": {
      "source": "iana"
    },
    "audio/evrc0": {
      "source": "iana"
    },
    "audio/evrc1": {
      "source": "iana"
    },
    "audio/evrcb": {
      "source": "iana"
    },
    "audio/evrcb0": {
      "source": "iana"
    },
    "audio/evrcb1": {
      "source": "iana"
    },
    "audio/evrcnw": {
      "source": "iana"
    },
    "audio/evrcnw0": {
      "source": "iana"
    },
    "audio/evrcnw1": {
      "source": "iana"
    },
    "audio/evrcwb": {
      "source": "iana"
    },
    "audio/evrcwb0": {
      "source": "iana"
    },
    "audio/evrcwb1": {
      "source": "iana"
    },
    "audio/fwdred": {
      "source": "iana"
    },
    "audio/g719": {
      "source": "iana"
    },
    "audio/g722": {
      "source": "iana"
    },
    "audio/g7221": {
      "source": "iana"
    },
    "audio/g723": {
      "source": "iana"
    },
    "audio/g726-16": {
      "source": "iana"
    },
    "audio/g726-24": {
      "source": "iana"
    },
    "audio/g726-32": {
      "source": "iana"
    },
    "audio/g726-40": {
      "source": "iana"
    },
    "audio/g728": {
      "source": "iana"
    },
    "audio/g729": {
      "source": "iana"
    },
    "audio/g7291": {
      "source": "iana"
    },
    "audio/g729d": {
      "source": "iana"
    },
    "audio/g729e": {
      "source": "iana"
    },
    "audio/gsm": {
      "source": "iana"
    },
    "audio/gsm-efr": {
      "source": "iana"
    },
    "audio/gsm-hr-08": {
      "source": "iana"
    },
    "audio/ilbc": {
      "source": "iana"
    },
    "audio/ip-mr_v2.5": {
      "source": "iana"
    },
    "audio/isac": {
      "source": "apache"
    },
    "audio/l16": {
      "source": "iana"
    },
    "audio/l20": {
      "source": "iana"
    },
    "audio/l24": {
      "source": "iana",
      "compressible": false
    },
    "audio/l8": {
      "source": "iana"
    },
    "audio/lpc": {
      "source": "iana"
    },
    "audio/midi": {
      "source": "apache",
      "extensions": ["mid","midi","kar","rmi"]
    },
    "audio/mobile-xmf": {
      "source": "iana"
    },
    "audio/mp4": {
      "source": "iana",
      "compressible": false,
      "extensions": ["mp4a","m4a"]
    },
    "audio/mp4a-latm": {
      "source": "iana"
    },
    "audio/mpa": {
      "source": "iana"
    },
    "audio/mpa-robust": {
      "source": "iana"
    },
    "audio/mpeg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["mpga","mp2","mp2a","mp3","m2a","m3a"]
    },
    "audio/mpeg4-generic": {
      "source": "iana"
    },
    "audio/musepack": {
      "source": "apache"
    },
    "audio/ogg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["oga","ogg","spx"]
    },
    "audio/opus": {
      "source": "iana"
    },
    "audio/parityfec": {
      "source": "iana"
    },
    "audio/pcma": {
      "source": "iana"
    },
    "audio/pcma-wb": {
      "source": "iana"
    },
    "audio/pcmu": {
      "source": "iana"
    },
    "audio/pcmu-wb": {
      "source": "iana"
    },
    "audio/prs.sid": {
      "source": "iana"
    },
    "audio/qcelp": {
      "source": "iana"
    },
    "audio/raptorfec": {
      "source": "iana"
    },
    "audio/red": {
      "source": "iana"
    },
    "audio/rtp-enc-aescm128": {
      "source": "iana"
    },
    "audio/rtp-midi": {
      "source": "iana"
    },
    "audio/rtploopback": {
      "source": "iana"
    },
    "audio/rtx": {
      "source": "iana"
    },
    "audio/s3m": {
      "source": "apache",
      "extensions": ["s3m"]
    },
    "audio/silk": {
      "source": "apache",
      "extensions": ["sil"]
    },
    "audio/smv": {
      "source": "iana"
    },
    "audio/smv-qcp": {
      "source": "iana"
    },
    "audio/smv0": {
      "source": "iana"
    },
    "audio/sp-midi": {
      "source": "iana"
    },
    "audio/speex": {
      "source": "iana"
    },
    "audio/t140c": {
      "source": "iana"
    },
    "audio/t38": {
      "source": "iana"
    },
    "audio/telephone-event": {
      "source": "iana"
    },
    "audio/tone": {
      "source": "iana"
    },
    "audio/uemclip": {
      "source": "iana"
    },
    "audio/ulpfec": {
      "source": "iana"
    },
    "audio/vdvi": {
      "source": "iana"
    },
    "audio/vmr-wb": {
      "source": "iana"
    },
    "audio/vnd.3gpp.iufp": {
      "source": "iana"
    },
    "audio/vnd.4sb": {
      "source": "iana"
    },
    "audio/vnd.audiokoz": {
      "source": "iana"
    },
    "audio/vnd.celp": {
      "source": "iana"
    },
    "audio/vnd.cisco.nse": {
      "source": "iana"
    },
    "audio/vnd.cmles.radio-events": {
      "source": "iana"
    },
    "audio/vnd.cns.anp1": {
      "source": "iana"
    },
    "audio/vnd.cns.inf1": {
      "source": "iana"
    },
    "audio/vnd.dece.audio": {
      "source": "iana",
      "extensions": ["uva","uvva"]
    },
    "audio/vnd.digital-winds": {
      "source": "iana",
      "extensions": ["eol"]
    },
    "audio/vnd.dlna.adts": {
      "source": "iana"
    },
    "audio/vnd.dolby.heaac.1": {
      "source": "iana"
    },
    "audio/vnd.dolby.heaac.2": {
      "source": "iana"
    },
    "audio/vnd.dolby.mlp": {
      "source": "iana"
    },
    "audio/vnd.dolby.mps": {
      "source": "iana"
    },
    "audio/vnd.dolby.pl2": {
      "source": "iana"
    },
    "audio/vnd.dolby.pl2x": {
      "source": "iana"
    },
    "audio/vnd.dolby.pl2z": {
      "source": "iana"
    },
    "audio/vnd.dolby.pulse.1": {
      "source": "iana"
    },
    "audio/vnd.dra": {
      "source": "iana",
      "extensions": ["dra"]
    },
    "audio/vnd.dts": {
      "source": "iana",
      "extensions": ["dts"]
    },
    "audio/vnd.dts.hd": {
      "source": "iana",
      "extensions": ["dtshd"]
    },
    "audio/vnd.dvb.file": {
      "source": "iana"
    },
    "audio/vnd.everad.plj": {
      "source": "iana"
    },
    "audio/vnd.hns.audio": {
      "source": "iana"
    },
    "audio/vnd.lucent.voice": {
      "source": "iana",
      "extensions": ["lvp"]
    },
    "audio/vnd.ms-playready.media.pya": {
      "source": "iana",
      "extensions": ["pya"]
    },
    "audio/vnd.nokia.mobile-xmf": {
      "source": "iana"
    },
    "audio/vnd.nortel.vbk": {
      "source": "iana"
    },
    "audio/vnd.nuera.ecelp4800": {
      "source": "iana",
      "extensions": ["ecelp4800"]
    },
    "audio/vnd.nuera.ecelp7470": {
      "source": "iana",
      "extensions": ["ecelp7470"]
    },
    "audio/vnd.nuera.ecelp9600": {
      "source": "iana",
      "extensions": ["ecelp9600"]
    },
    "audio/vnd.octel.sbc": {
      "source": "iana"
    },
    "audio/vnd.qcelp": {
      "source": "iana"
    },
    "audio/vnd.rhetorex.32kadpcm": {
      "source": "iana"
    },
    "audio/vnd.rip": {
      "source": "iana",
      "extensions": ["rip"]
    },
    "audio/vnd.rn-realaudio": {
      "compressible": false
    },
    "audio/vnd.sealedmedia.softseal.mpeg": {
      "source": "iana"
    },
    "audio/vnd.vmx.cvsd": {
      "source": "iana"
    },
    "audio/vnd.wave": {
      "compressible": false
    },
    "audio/vorbis": {
      "source": "iana",
      "compressible": false
    },
    "audio/vorbis-config": {
      "source": "iana"
    },
    "audio/wav": {
      "compressible": false,
      "extensions": ["wav"]
    },
    "audio/wave": {
      "compressible": false,
      "extensions": ["wav"]
    },
    "audio/webm": {
      "source": "apache",
      "compressible": false,
      "extensions": ["weba"]
    },
    "audio/x-aac": {
      "source": "apache",
      "compressible": false,
      "extensions": ["aac"]
    },
    "audio/x-aiff": {
      "source": "apache",
      "extensions": ["aif","aiff","aifc"]
    },
    "audio/x-caf": {
      "source": "apache",
      "compressible": false,
      "extensions": ["caf"]
    },
    "audio/x-flac": {
      "source": "apache",
      "extensions": ["flac"]
    },
    "audio/x-m4a": {
      "source": "nginx",
      "extensions": ["m4a"]
    },
    "audio/x-matroska": {
      "source": "apache",
      "extensions": ["mka"]
    },
    "audio/x-mpegurl": {
      "source": "apache",
      "extensions": ["m3u"]
    },
    "audio/x-ms-wax": {
      "source": "apache",
      "extensions": ["wax"]
    },
    "audio/x-ms-wma": {
      "source": "apache",
      "extensions": ["wma"]
    },
    "audio/x-pn-realaudio": {
      "source": "apache",
      "extensions": ["ram","ra"]
    },
    "audio/x-pn-realaudio-plugin": {
      "source": "apache",
      "extensions": ["rmp"]
    },
    "audio/x-realaudio": {
      "source": "nginx",
      "extensions": ["ra"]
    },
    "audio/x-tta": {
      "source": "apache"
    },
    "audio/x-wav": {
      "source": "apache",
      "extensions": ["wav"]
    },
    "audio/xm": {
      "source": "apache",
      "extensions": ["xm"]
    },
    "chemical/x-cdx": {
      "source": "apache",
      "extensions": ["cdx"]
    },
    "chemical/x-cif": {
      "source": "apache",
      "extensions": ["cif"]
    },
    "chemical/x-cmdf": {
      "source": "apache",
      "extensions": ["cmdf"]
    },
    "chemical/x-cml": {
      "source": "apache",
      "extensions": ["cml"]
    },
    "chemical/x-csml": {
      "source": "apache",
      "extensions": ["csml"]
    },
    "chemical/x-pdb": {
      "source": "apache"
    },
    "chemical/x-xyz": {
      "source": "apache",
      "extensions": ["xyz"]
    },
    "font/opentype": {
      "compressible": true,
      "extensions": ["otf"]
    },
    "image/bmp": {
      "source": "apache",
      "compressible": true,
      "extensions": ["bmp"]
    },
    "image/cgm": {
      "source": "iana",
      "extensions": ["cgm"]
    },
    "image/fits": {
      "source": "iana"
    },
    "image/g3fax": {
      "source": "iana",
      "extensions": ["g3"]
    },
    "image/gif": {
      "source": "iana",
      "compressible": false,
      "extensions": ["gif"]
    },
    "image/ief": {
      "source": "iana",
      "extensions": ["ief"]
    },
    "image/jp2": {
      "source": "iana"
    },
    "image/jpeg": {
      "source": "iana",
      "compressible": false,
      "extensions": ["jpeg","jpg","jpe"]
    },
    "image/jpm": {
      "source": "iana"
    },
    "image/jpx": {
      "source": "iana"
    },
    "image/ktx": {
      "source": "iana",
      "extensions": ["ktx"]
    },
    "image/naplps": {
      "source": "iana"
    },
    "image/pjpeg": {
      "compressible": false
    },
    "image/png": {
      "source": "iana",
      "compressible": false,
      "extensions": ["png"]
    },
    "image/prs.btif": {
      "source": "iana",
      "extensions": ["btif"]
    },
    "image/prs.pti": {
      "source": "iana"
    },
    "image/pwg-raster": {
      "source": "iana"
    },
    "image/sgi": {
      "source": "apache",
      "extensions": ["sgi"]
    },
    "image/svg+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["svg","svgz"]
    },
    "image/t38": {
      "source": "iana"
    },
    "image/tiff": {
      "source": "iana",
      "compressible": false,
      "extensions": ["tiff","tif"]
    },
    "image/tiff-fx": {
      "source": "iana"
    },
    "image/vnd.adobe.photoshop": {
      "source": "iana",
      "compressible": true,
      "extensions": ["psd"]
    },
    "image/vnd.airzip.accelerator.azv": {
      "source": "iana"
    },
    "image/vnd.cns.inf2": {
      "source": "iana"
    },
    "image/vnd.dece.graphic": {
      "source": "iana",
      "extensions": ["uvi","uvvi","uvg","uvvg"]
    },
    "image/vnd.djvu": {
      "source": "iana",
      "extensions": ["djvu","djv"]
    },
    "image/vnd.dvb.subtitle": {
      "source": "iana",
      "extensions": ["sub"]
    },
    "image/vnd.dwg": {
      "source": "iana",
      "extensions": ["dwg"]
    },
    "image/vnd.dxf": {
      "source": "iana",
      "extensions": ["dxf"]
    },
    "image/vnd.fastbidsheet": {
      "source": "iana",
      "extensions": ["fbs"]
    },
    "image/vnd.fpx": {
      "source": "iana",
      "extensions": ["fpx"]
    },
    "image/vnd.fst": {
      "source": "iana",
      "extensions": ["fst"]
    },
    "image/vnd.fujixerox.edmics-mmr": {
      "source": "iana",
      "extensions": ["mmr"]
    },
    "image/vnd.fujixerox.edmics-rlc": {
      "source": "iana",
      "extensions": ["rlc"]
    },
    "image/vnd.globalgraphics.pgb": {
      "source": "iana"
    },
    "image/vnd.microsoft.icon": {
      "source": "iana"
    },
    "image/vnd.mix": {
      "source": "iana"
    },
    "image/vnd.ms-modi": {
      "source": "iana",
      "extensions": ["mdi"]
    },
    "image/vnd.ms-photo": {
      "source": "apache",
      "extensions": ["wdp"]
    },
    "image/vnd.net-fpx": {
      "source": "iana",
      "extensions": ["npx"]
    },
    "image/vnd.radiance": {
      "source": "iana"
    },
    "image/vnd.sealed.png": {
      "source": "iana"
    },
    "image/vnd.sealedmedia.softseal.gif": {
      "source": "iana"
    },
    "image/vnd.sealedmedia.softseal.jpg": {
      "source": "iana"
    },
    "image/vnd.svf": {
      "source": "iana"
    },
    "image/vnd.tencent.tap": {
      "source": "iana"
    },
    "image/vnd.valve.source.texture": {
      "source": "iana"
    },
    "image/vnd.wap.wbmp": {
      "source": "iana",
      "extensions": ["wbmp"]
    },
    "image/vnd.xiff": {
      "source": "iana",
      "extensions": ["xif"]
    },
    "image/vnd.zbrush.pcx": {
      "source": "iana"
    },
    "image/webp": {
      "source": "apache",
      "extensions": ["webp"]
    },
    "image/x-3ds": {
      "source": "apache",
      "extensions": ["3ds"]
    },
    "image/x-cmu-raster": {
      "source": "apache",
      "extensions": ["ras"]
    },
    "image/x-cmx": {
      "source": "apache",
      "extensions": ["cmx"]
    },
    "image/x-freehand": {
      "source": "apache",
      "extensions": ["fh","fhc","fh4","fh5","fh7"]
    },
    "image/x-icon": {
      "source": "apache",
      "compressible": true,
      "extensions": ["ico"]
    },
    "image/x-jng": {
      "source": "nginx",
      "extensions": ["jng"]
    },
    "image/x-mrsid-image": {
      "source": "apache",
      "extensions": ["sid"]
    },
    "image/x-ms-bmp": {
      "source": "nginx",
      "compressible": true,
      "extensions": ["bmp"]
    },
    "image/x-pcx": {
      "source": "apache",
      "extensions": ["pcx"]
    },
    "image/x-pict": {
      "source": "apache",
      "extensions": ["pic","pct"]
    },
    "image/x-portable-anymap": {
      "source": "apache",
      "extensions": ["pnm"]
    },
    "image/x-portable-bitmap": {
      "source": "apache",
      "extensions": ["pbm"]
    },
    "image/x-portable-graymap": {
      "source": "apache",
      "extensions": ["pgm"]
    },
    "image/x-portable-pixmap": {
      "source": "apache",
      "extensions": ["ppm"]
    },
    "image/x-rgb": {
      "source": "apache",
      "extensions": ["rgb"]
    },
    "image/x-tga": {
      "source": "apache",
      "extensions": ["tga"]
    },
    "image/x-xbitmap": {
      "source": "apache",
      "extensions": ["xbm"]
    },
    "image/x-xcf": {
      "compressible": false
    },
    "image/x-xpixmap": {
      "source": "apache",
      "extensions": ["xpm"]
    },
    "image/x-xwindowdump": {
      "source": "apache",
      "extensions": ["xwd"]
    },
    "message/cpim": {
      "source": "iana"
    },
    "message/delivery-status": {
      "source": "iana"
    },
    "message/disposition-notification": {
      "source": "iana"
    },
    "message/external-body": {
      "source": "iana"
    },
    "message/feedback-report": {
      "source": "iana"
    },
    "message/global": {
      "source": "iana"
    },
    "message/global-delivery-status": {
      "source": "iana"
    },
    "message/global-disposition-notification": {
      "source": "iana"
    },
    "message/global-headers": {
      "source": "iana"
    },
    "message/http": {
      "source": "iana",
      "compressible": false
    },
    "message/imdn+xml": {
      "source": "iana",
      "compressible": true
    },
    "message/news": {
      "source": "iana"
    },
    "message/partial": {
      "source": "iana",
      "compressible": false
    },
    "message/rfc822": {
      "source": "iana",
      "compressible": true,
      "extensions": ["eml","mime"]
    },
    "message/s-http": {
      "source": "iana"
    },
    "message/sip": {
      "source": "iana"
    },
    "message/sipfrag": {
      "source": "iana"
    },
    "message/tracking-status": {
      "source": "iana"
    },
    "message/vnd.si.simp": {
      "source": "iana"
    },
    "message/vnd.wfa.wsc": {
      "source": "iana"
    },
    "model/iges": {
      "source": "iana",
      "compressible": false,
      "extensions": ["igs","iges"]
    },
    "model/mesh": {
      "source": "iana",
      "compressible": false,
      "extensions": ["msh","mesh","silo"]
    },
    "model/vnd.collada+xml": {
      "source": "iana",
      "extensions": ["dae"]
    },
    "model/vnd.dwf": {
      "source": "iana",
      "extensions": ["dwf"]
    },
    "model/vnd.flatland.3dml": {
      "source": "iana"
    },
    "model/vnd.gdl": {
      "source": "iana",
      "extensions": ["gdl"]
    },
    "model/vnd.gs-gdl": {
      "source": "apache"
    },
    "model/vnd.gs.gdl": {
      "source": "iana"
    },
    "model/vnd.gtw": {
      "source": "iana",
      "extensions": ["gtw"]
    },
    "model/vnd.moml+xml": {
      "source": "iana"
    },
    "model/vnd.mts": {
      "source": "iana",
      "extensions": ["mts"]
    },
    "model/vnd.opengex": {
      "source": "iana"
    },
    "model/vnd.parasolid.transmit.binary": {
      "source": "iana"
    },
    "model/vnd.parasolid.transmit.text": {
      "source": "iana"
    },
    "model/vnd.valve.source.compiled-map": {
      "source": "iana"
    },
    "model/vnd.vtu": {
      "source": "iana",
      "extensions": ["vtu"]
    },
    "model/vrml": {
      "source": "iana",
      "compressible": false,
      "extensions": ["wrl","vrml"]
    },
    "model/x3d+binary": {
      "source": "apache",
      "compressible": false,
      "extensions": ["x3db","x3dbz"]
    },
    "model/x3d+fastinfoset": {
      "source": "iana"
    },
    "model/x3d+vrml": {
      "source": "apache",
      "compressible": false,
      "extensions": ["x3dv","x3dvz"]
    },
    "model/x3d+xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["x3d","x3dz"]
    },
    "model/x3d-vrml": {
      "source": "iana"
    },
    "multipart/alternative": {
      "source": "iana",
      "compressible": false
    },
    "multipart/appledouble": {
      "source": "iana"
    },
    "multipart/byteranges": {
      "source": "iana"
    },
    "multipart/digest": {
      "source": "iana"
    },
    "multipart/encrypted": {
      "source": "iana",
      "compressible": false
    },
    "multipart/form-data": {
      "source": "iana",
      "compressible": false
    },
    "multipart/header-set": {
      "source": "iana"
    },
    "multipart/mixed": {
      "source": "iana",
      "compressible": false
    },
    "multipart/parallel": {
      "source": "iana"
    },
    "multipart/related": {
      "source": "iana",
      "compressible": false
    },
    "multipart/report": {
      "source": "iana"
    },
    "multipart/signed": {
      "source": "iana",
      "compressible": false
    },
    "multipart/voice-message": {
      "source": "iana"
    },
    "multipart/x-mixed-replace": {
      "source": "iana"
    },
    "text/1d-interleaved-parityfec": {
      "source": "iana"
    },
    "text/cache-manifest": {
      "source": "iana",
      "compressible": true,
      "extensions": ["appcache","manifest"]
    },
    "text/calendar": {
      "source": "iana",
      "extensions": ["ics","ifb"]
    },
    "text/calender": {
      "compressible": true
    },
    "text/cmd": {
      "compressible": true
    },
    "text/coffeescript": {
      "extensions": ["coffee","litcoffee"]
    },
    "text/css": {
      "source": "iana",
      "compressible": true,
      "extensions": ["css"]
    },
    "text/csv": {
      "source": "iana",
      "compressible": true,
      "extensions": ["csv"]
    },
    "text/csv-schema": {
      "source": "iana"
    },
    "text/directory": {
      "source": "iana"
    },
    "text/dns": {
      "source": "iana"
    },
    "text/ecmascript": {
      "source": "iana"
    },
    "text/encaprtp": {
      "source": "iana"
    },
    "text/enriched": {
      "source": "iana"
    },
    "text/fwdred": {
      "source": "iana"
    },
    "text/grammar-ref-list": {
      "source": "iana"
    },
    "text/hjson": {
      "extensions": ["hjson"]
    },
    "text/html": {
      "source": "iana",
      "compressible": true,
      "extensions": ["html","htm","shtml"]
    },
    "text/jade": {
      "extensions": ["jade"]
    },
    "text/javascript": {
      "source": "iana",
      "compressible": true
    },
    "text/jcr-cnd": {
      "source": "iana"
    },
    "text/jsx": {
      "compressible": true,
      "extensions": ["jsx"]
    },
    "text/less": {
      "extensions": ["less"]
    },
    "text/markdown": {
      "source": "iana"
    },
    "text/mathml": {
      "source": "nginx",
      "extensions": ["mml"]
    },
    "text/mizar": {
      "source": "iana"
    },
    "text/n3": {
      "source": "iana",
      "compressible": true,
      "extensions": ["n3"]
    },
    "text/parameters": {
      "source": "iana"
    },
    "text/parityfec": {
      "source": "iana"
    },
    "text/plain": {
      "source": "iana",
      "compressible": true,
      "extensions": ["txt","text","conf","def","list","log","in","ini"]
    },
    "text/provenance-notation": {
      "source": "iana"
    },
    "text/prs.fallenstein.rst": {
      "source": "iana"
    },
    "text/prs.lines.tag": {
      "source": "iana",
      "extensions": ["dsc"]
    },
    "text/raptorfec": {
      "source": "iana"
    },
    "text/red": {
      "source": "iana"
    },
    "text/rfc822-headers": {
      "source": "iana"
    },
    "text/richtext": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rtx"]
    },
    "text/rtf": {
      "source": "iana",
      "compressible": true,
      "extensions": ["rtf"]
    },
    "text/rtp-enc-aescm128": {
      "source": "iana"
    },
    "text/rtploopback": {
      "source": "iana"
    },
    "text/rtx": {
      "source": "iana"
    },
    "text/sgml": {
      "source": "iana",
      "extensions": ["sgml","sgm"]
    },
    "text/stylus": {
      "extensions": ["stylus","styl"]
    },
    "text/t140": {
      "source": "iana"
    },
    "text/tab-separated-values": {
      "source": "iana",
      "compressible": true,
      "extensions": ["tsv"]
    },
    "text/troff": {
      "source": "iana",
      "extensions": ["t","tr","roff","man","me","ms"]
    },
    "text/turtle": {
      "source": "iana",
      "extensions": ["ttl"]
    },
    "text/ulpfec": {
      "source": "iana"
    },
    "text/uri-list": {
      "source": "iana",
      "compressible": true,
      "extensions": ["uri","uris","urls"]
    },
    "text/vcard": {
      "source": "iana",
      "compressible": true,
      "extensions": ["vcard"]
    },
    "text/vnd.a": {
      "source": "iana"
    },
    "text/vnd.abc": {
      "source": "iana"
    },
    "text/vnd.curl": {
      "source": "iana",
      "extensions": ["curl"]
    },
    "text/vnd.curl.dcurl": {
      "source": "apache",
      "extensions": ["dcurl"]
    },
    "text/vnd.curl.mcurl": {
      "source": "apache",
      "extensions": ["mcurl"]
    },
    "text/vnd.curl.scurl": {
      "source": "apache",
      "extensions": ["scurl"]
    },
    "text/vnd.debian.copyright": {
      "source": "iana"
    },
    "text/vnd.dmclientscript": {
      "source": "iana"
    },
    "text/vnd.dvb.subtitle": {
      "source": "iana",
      "extensions": ["sub"]
    },
    "text/vnd.esmertec.theme-descriptor": {
      "source": "iana"
    },
    "text/vnd.fly": {
      "source": "iana",
      "extensions": ["fly"]
    },
    "text/vnd.fmi.flexstor": {
      "source": "iana",
      "extensions": ["flx"]
    },
    "text/vnd.graphviz": {
      "source": "iana",
      "extensions": ["gv"]
    },
    "text/vnd.in3d.3dml": {
      "source": "iana",
      "extensions": ["3dml"]
    },
    "text/vnd.in3d.spot": {
      "source": "iana",
      "extensions": ["spot"]
    },
    "text/vnd.iptc.newsml": {
      "source": "iana"
    },
    "text/vnd.iptc.nitf": {
      "source": "iana"
    },
    "text/vnd.latex-z": {
      "source": "iana"
    },
    "text/vnd.motorola.reflex": {
      "source": "iana"
    },
    "text/vnd.ms-mediapackage": {
      "source": "iana"
    },
    "text/vnd.net2phone.commcenter.command": {
      "source": "iana"
    },
    "text/vnd.radisys.msml-basic-layout": {
      "source": "iana"
    },
    "text/vnd.si.uricatalogue": {
      "source": "iana"
    },
    "text/vnd.sun.j2me.app-descriptor": {
      "source": "iana",
      "extensions": ["jad"]
    },
    "text/vnd.trolltech.linguist": {
      "source": "iana"
    },
    "text/vnd.wap.si": {
      "source": "iana"
    },
    "text/vnd.wap.sl": {
      "source": "iana"
    },
    "text/vnd.wap.wml": {
      "source": "iana",
      "extensions": ["wml"]
    },
    "text/vnd.wap.wmlscript": {
      "source": "iana",
      "extensions": ["wmls"]
    },
    "text/vtt": {
      "charset": "UTF-8",
      "compressible": true,
      "extensions": ["vtt"]
    },
    "text/x-asm": {
      "source": "apache",
      "extensions": ["s","asm"]
    },
    "text/x-c": {
      "source": "apache",
      "extensions": ["c","cc","cxx","cpp","h","hh","dic"]
    },
    "text/x-component": {
      "source": "nginx",
      "extensions": ["htc"]
    },
    "text/x-fortran": {
      "source": "apache",
      "extensions": ["f","for","f77","f90"]
    },
    "text/x-gwt-rpc": {
      "compressible": true
    },
    "text/x-handlebars-template": {
      "extensions": ["hbs"]
    },
    "text/x-java-source": {
      "source": "apache",
      "extensions": ["java"]
    },
    "text/x-jquery-tmpl": {
      "compressible": true
    },
    "text/x-lua": {
      "extensions": ["lua"]
    },
    "text/x-markdown": {
      "compressible": true,
      "extensions": ["markdown","md","mkd"]
    },
    "text/x-nfo": {
      "source": "apache",
      "extensions": ["nfo"]
    },
    "text/x-opml": {
      "source": "apache",
      "extensions": ["opml"]
    },
    "text/x-pascal": {
      "source": "apache",
      "extensions": ["p","pas"]
    },
    "text/x-processing": {
      "compressible": true,
      "extensions": ["pde"]
    },
    "text/x-sass": {
      "extensions": ["sass"]
    },
    "text/x-scss": {
      "extensions": ["scss"]
    },
    "text/x-setext": {
      "source": "apache",
      "extensions": ["etx"]
    },
    "text/x-sfv": {
      "source": "apache",
      "extensions": ["sfv"]
    },
    "text/x-uuencode": {
      "source": "apache",
      "extensions": ["uu"]
    },
    "text/x-vcalendar": {
      "source": "apache",
      "extensions": ["vcs"]
    },
    "text/x-vcard": {
      "source": "apache",
      "extensions": ["vcf"]
    },
    "text/xml": {
      "source": "iana",
      "compressible": true,
      "extensions": ["xml"]
    },
    "text/xml-external-parsed-entity": {
      "source": "iana"
    },
    "text/yaml": {
      "extensions": ["yaml","yml"]
    },
    "video/1d-interleaved-parityfec": {
      "source": "apache"
    },
    "video/3gpp": {
      "source": "apache",
      "extensions": ["3gp","3gpp"]
    },
    "video/3gpp-tt": {
      "source": "apache"
    },
    "video/3gpp2": {
      "source": "apache",
      "extensions": ["3g2"]
    },
    "video/bmpeg": {
      "source": "apache"
    },
    "video/bt656": {
      "source": "apache"
    },
    "video/celb": {
      "source": "apache"
    },
    "video/dv": {
      "source": "apache"
    },
    "video/h261": {
      "source": "apache",
      "extensions": ["h261"]
    },
    "video/h263": {
      "source": "apache",
      "extensions": ["h263"]
    },
    "video/h263-1998": {
      "source": "apache"
    },
    "video/h263-2000": {
      "source": "apache"
    },
    "video/h264": {
      "source": "apache",
      "extensions": ["h264"]
    },
    "video/h264-rcdo": {
      "source": "apache"
    },
    "video/h264-svc": {
      "source": "apache"
    },
    "video/jpeg": {
      "source": "apache",
      "extensions": ["jpgv"]
    },
    "video/jpeg2000": {
      "source": "apache"
    },
    "video/jpm": {
      "source": "apache",
      "extensions": ["jpm","jpgm"]
    },
    "video/mj2": {
      "source": "apache",
      "extensions": ["mj2","mjp2"]
    },
    "video/mp1s": {
      "source": "apache"
    },
    "video/mp2p": {
      "source": "apache"
    },
    "video/mp2t": {
      "source": "apache",
      "extensions": ["ts"]
    },
    "video/mp4": {
      "source": "apache",
      "compressible": false,
      "extensions": ["mp4","mp4v","mpg4"]
    },
    "video/mp4v-es": {
      "source": "apache"
    },
    "video/mpeg": {
      "source": "apache",
      "compressible": false,
      "extensions": ["mpeg","mpg","mpe","m1v","m2v"]
    },
    "video/mpeg4-generic": {
      "source": "apache"
    },
    "video/mpv": {
      "source": "apache"
    },
    "video/nv": {
      "source": "apache"
    },
    "video/ogg": {
      "source": "apache",
      "compressible": false,
      "extensions": ["ogv"]
    },
    "video/parityfec": {
      "source": "apache"
    },
    "video/pointer": {
      "source": "apache"
    },
    "video/quicktime": {
      "source": "apache",
      "compressible": false,
      "extensions": ["qt","mov"]
    },
    "video/raw": {
      "source": "apache"
    },
    "video/rtp-enc-aescm128": {
      "source": "apache"
    },
    "video/rtx": {
      "source": "apache"
    },
    "video/smpte292m": {
      "source": "apache"
    },
    "video/ulpfec": {
      "source": "apache"
    },
    "video/vc1": {
      "source": "apache"
    },
    "video/vnd.cctv": {
      "source": "apache"
    },
    "video/vnd.dece.hd": {
      "source": "apache",
      "extensions": ["uvh","uvvh"]
    },
    "video/vnd.dece.mobile": {
      "source": "apache",
      "extensions": ["uvm","uvvm"]
    },
    "video/vnd.dece.mp4": {
      "source": "apache"
    },
    "video/vnd.dece.pd": {
      "source": "apache",
      "extensions": ["uvp","uvvp"]
    },
    "video/vnd.dece.sd": {
      "source": "apache",
      "extensions": ["uvs","uvvs"]
    },
    "video/vnd.dece.video": {
      "source": "apache",
      "extensions": ["uvv","uvvv"]
    },
    "video/vnd.directv.mpeg": {
      "source": "apache"
    },
    "video/vnd.directv.mpeg-tts": {
      "source": "apache"
    },
    "video/vnd.dlna.mpeg-tts": {
      "source": "apache"
    },
    "video/vnd.dvb.file": {
      "source": "apache",
      "extensions": ["dvb"]
    },
    "video/vnd.fvt": {
      "source": "apache",
      "extensions": ["fvt"]
    },
    "video/vnd.hns.video": {
      "source": "apache"
    },
    "video/vnd.iptvforum.1dparityfec-1010": {
      "source": "apache"
    },
    "video/vnd.iptvforum.1dparityfec-2005": {
      "source": "apache"
    },
    "video/vnd.iptvforum.2dparityfec-1010": {
      "source": "apache"
    },
    "video/vnd.iptvforum.2dparityfec-2005": {
      "source": "apache"
    },
    "video/vnd.iptvforum.ttsavc": {
      "source": "apache"
    },
    "video/vnd.iptvforum.ttsmpeg2": {
      "source": "apache"
    },
    "video/vnd.motorola.video": {
      "source": "apache"
    },
    "video/vnd.motorola.videop": {
      "source": "apache"
    },
    "video/vnd.mpegurl": {
      "source": "apache",
      "extensions": ["mxu","m4u"]
    },
    "video/vnd.ms-playready.media.pyv": {
      "source": "apache",
      "extensions": ["pyv"]
    },
    "video/vnd.nokia.interleaved-multimedia": {
      "source": "apache"
    },
    "video/vnd.nokia.videovoip": {
      "source": "apache"
    },
    "video/vnd.objectvideo": {
      "source": "apache"
    },
    "video/vnd.sealed.mpeg1": {
      "source": "apache"
    },
    "video/vnd.sealed.mpeg4": {
      "source": "apache"
    },
    "video/vnd.sealed.swf": {
      "source": "apache"
    },
    "video/vnd.sealedmedia.softseal.mov": {
      "source": "apache"
    },
    "video/vnd.uvvu.mp4": {
      "source": "apache",
      "extensions": ["uvu","uvvu"]
    },
    "video/vnd.vivo": {
      "source": "apache",
      "extensions": ["viv"]
    },
    "video/webm": {
      "source": "apache",
      "compressible": false,
      "extensions": ["webm"]
    },
    "video/x-f4v": {
      "source": "apache",
      "extensions": ["f4v"]
    },
    "video/x-fli": {
      "source": "apache",
      "extensions": ["fli"]
    },
    "video/x-flv": {
      "source": "apache",
      "compressible": false,
      "extensions": ["flv"]
    },
    "video/x-m4v": {
      "source": "apache",
      "extensions": ["m4v"]
    },
    "video/x-matroska": {
      "source": "apache",
      "compressible": false,
      "extensions": ["mkv","mk3d","mks"]
    },
    "video/x-mng": {
      "source": "apache",
      "extensions": ["mng"]
    },
    "video/x-ms-asf": {
      "source": "apache",
      "extensions": ["asf","asx"]
    },
    "video/x-ms-vob": {
      "source": "apache",
      "extensions": ["vob"]
    },
    "video/x-ms-wm": {
      "source": "apache",
      "extensions": ["wm"]
    },
    "video/x-ms-wmv": {
      "source": "apache",
      "compressible": false,
      "extensions": ["wmv"]
    },
    "video/x-ms-wmx": {
      "source": "apache",
      "extensions": ["wmx"]
    },
    "video/x-ms-wvx": {
      "source": "apache",
      "extensions": ["wvx"]
    },
    "video/x-msvideo": {
      "source": "apache",
      "extensions": ["avi"]
    },
    "video/x-sgi-movie": {
      "source": "apache",
      "extensions": ["movie"]
    },
    "video/x-smv": {
      "source": "apache",
      "extensions": ["smv"]
    },
    "x-conference/x-cooltalk": {
      "source": "apache",
      "extensions": ["ice"]
    },
    "x-shader/x-fragment": {
      "compressible": true
    },
    "x-shader/x-vertex": {
      "compressible": true
    }
  }

},{}],210:[function(require,module,exports){
  module.exports=require("./db.json");


},{"./db.json":209}],211:[function(require,module,exports){
  (function(){function r(r,e,n){var t=e&&n||0,u=0;for(e=e||[],r.toLowerCase().replace(/[0-9a-f]{2}/g,function(r){16>u&&(e[t+u++]=v[r])});16>u;)e[t+u++]=0;return e}function e(r,e){var n=e||0,t=l;return t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+"-"+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]+t[r[n++]]}function n(r,n,t){var u=n&&t||0,o=n||[];r=r||{};var a=null!=r.clockseq?r.clockseq:m,f=null!=r.msecs?r.msecs:(new Date).getTime(),i=null!=r.nsecs?r.nsecs:w+1,c=f-g+(i-w)/1e4;if(0>c&&null==r.clockseq&&(a=a+1&16383),(0>c||f>g)&&null==r.nsecs&&(i=0),i>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");g=f,w=i,m=a,f+=122192928e5;var s=(1e4*(268435455&f)+i)%4294967296;o[u++]=s>>>24&255,o[u++]=s>>>16&255,o[u++]=s>>>8&255,o[u++]=255&s;var l=f/4294967296*1e4&268435455;o[u++]=l>>>8&255,o[u++]=255&l,o[u++]=l>>>24&15|16,o[u++]=l>>>16&255,o[u++]=a>>>8|128,o[u++]=255&a;for(var v=r.node||p,d=0;6>d;d++)o[u+d]=v[d];return n?n:e(o)}function t(r,n,t){var o=n&&t||0;"string"==typeof r&&(n="binary"==r?new s(16):null,r=null),r=r||{};var a=r.random||(r.rng||u)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,n)for(var f=0;16>f;f++)n[o+f]=a[f];return n||e(a)}var u,o=this;if("function"==typeof o.require)try{var a=o.require("crypto").randomBytes;u=a&&function(){return a(16)}}catch(f){}if(!u&&o.crypto&&crypto.getRandomValues){var i=new Uint8Array(16);u=function(){return crypto.getRandomValues(i),i}}if(!u){var c=new Array(16);u=function(){for(var r,e=0;16>e;e++)0===(3&e)&&(r=4294967296*Math.random()),c[e]=r>>>((3&e)<<3)&255;return c}}for(var s="function"==typeof o.Buffer?o.Buffer:Array,l=[],v={},d=0;256>d;d++)l[d]=(d+256).toString(16).substr(1),v[l[d]]=d;var y=u(),p=[1|y[0],y[1],y[2],y[3],y[4],y[5]],m=16383&(y[6]<<8|y[7]),g=0,w=0,h=t;if(h.v1=n,h.v4=t,h.parse=r,h.unparse=e,h.BufferClass=s,"undefined"!=typeof module&&module.exports)module.exports=h;else if("function"==typeof define&&define.amd)define(function(){return h});else{var q=o.uuid;h.noConflict=function(){return o.uuid=q,h},o.uuid=h}}).call(this);


},{}],212:[function(require,module,exports){
  function sha1(r,e){return crypto.createHmac("sha1",r).update(e).digest("base64")}function rsa(r,e){return crypto.createSign("RSA-SHA1").update(e).sign(r,"base64")}function rfc3986(r){return encodeURIComponent(r).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/'/g,"%27")}function map(r){var e,n,a=[];for(e in r)if(n=r[e],Array.isArray(n))for(var t=0;t<n.length;t++)a.push([e,n[t]]);else if("object"==typeof n)for(var c in n)a.push([e+"["+c+"]",n[c]]);else a.push([e,n]);return a}function compare(r,e){return r>e?1:e>r?-1:0}function generateBase(r,e,n){var a=map(n).map(function(r){return[rfc3986(r[0]),rfc3986(r[1]||"")]}).sort(function(r,e){return compare(r[0],e[0])||compare(r[1],e[1])}).map(function(r){return r.join("=")}).join("&"),t=[rfc3986(r?r.toUpperCase():"GET"),rfc3986(e),rfc3986(a)].join("&");return t}function hmacsign(r,e,n,a,t){var c=generateBase(r,e,n),s=[a||"",t||""].map(rfc3986).join("&");return sha1(s,c)}function rsasign(r,e,n,a,t){var c=generateBase(r,e,n),s=a||"";return rsa(s,c)}function plaintext(r,e){var n=[r||"",e||""].map(rfc3986).join("&");return n}function sign(r,e,n,a,t,c){var s,i=1;switch(r){case"RSA-SHA1":s=rsasign;break;case"HMAC-SHA1":s=hmacsign;break;case"PLAINTEXT":s=plaintext,i=4;break;default:throw new Error("Signature method not supported: "+r)}return s.apply(null,[].slice.call(arguments,i))}var crypto=require("crypto"),qs=require("querystring");exports.hmacsign=hmacsign,exports.rsasign=rsasign,exports.plaintext=plaintext,exports.sign=sign,exports.rfc3986=rfc3986;


},{"crypto":54,"querystring":71}],213:[function(require,module,exports){
  var Stringify=require("./stringify"),Parse=require("./parse"),internals={};module.exports={stringify:Stringify,parse:Parse};


},{"./parse":214,"./stringify":215}],214:[function(require,module,exports){
  var Utils=require("./utils"),internals={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1};internals.parseValues=function(e,t){for(var r={},i=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),l=0,a=i.length;a>l;++l){var n=i[l],s=-1===n.indexOf("]=")?n.indexOf("="):n.indexOf("]=")+1;if(-1===s)r[Utils.decode(n)]="",t.strictNullHandling&&(r[Utils.decode(n)]=null);else{var p=Utils.decode(n.slice(0,s)),o=Utils.decode(n.slice(s+1));Object.prototype.hasOwnProperty.call(r,p)?r[p]=[].concat(r[p]).concat(o):r[p]=o}}return r},internals.parseObject=function(e,t,r){if(!e.length)return t;var i,l=e.shift();if("[]"===l)i=[],i=i.concat(internals.parseObject(e,t,r));else{i=r.plainObjects?Object.create(null):{};var a="["===l[0]&&"]"===l[l.length-1]?l.slice(1,l.length-1):l,n=parseInt(a,10),s=""+n;!isNaN(n)&&l!==a&&s===a&&n>=0&&r.parseArrays&&n<=r.arrayLimit?(i=[],i[n]=internals.parseObject(e,t,r)):i[a]=internals.parseObject(e,t,r)}return i},internals.parseKeys=function(e,t,r){if(e){r.allowDots&&(e=e.replace(/\.([^\.\[]+)/g,"[$1]"));var i=/^([^\[\]]*)/,l=/(\[[^\[\]]*\])/g,a=i.exec(e),n=[];if(a[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(a[1])&&!r.allowPrototypes)return;n.push(a[1])}for(var s=0;null!==(a=l.exec(e))&&s<r.depth;)++s,(r.plainObjects||!Object.prototype.hasOwnProperty(a[1].replace(/\[|\]/g,""))||r.allowPrototypes)&&n.push(a[1]);return a&&n.push("["+e.slice(a.index)+"]"),internals.parseObject(n,t,r)}},module.exports=function(e,t){if(t=t||{},t.delimiter="string"==typeof t.delimiter||Utils.isRegExp(t.delimiter)?t.delimiter:internals.delimiter,t.depth="number"==typeof t.depth?t.depth:internals.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:internals.arrayLimit,t.parseArrays=t.parseArrays!==!1,t.allowDots=t.allowDots!==!1,t.plainObjects="boolean"==typeof t.plainObjects?t.plainObjects:internals.plainObjects,t.allowPrototypes="boolean"==typeof t.allowPrototypes?t.allowPrototypes:internals.allowPrototypes,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:internals.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:internals.strictNullHandling,""===e||null===e||"undefined"==typeof e)return t.plainObjects?Object.create(null):{};for(var r="string"==typeof e?internals.parseValues(e,t):e,i=t.plainObjects?Object.create(null):{},l=Object.keys(r),a=0,n=l.length;n>a;++a){var s=l[a],p=internals.parseKeys(s,r[s],t);i=Utils.merge(i,p,t)}return Utils.compact(i)};


},{"./utils":216}],215:[function(require,module,exports){
  var Utils=require("./utils"),internals={delimiter:"&",arrayPrefixGenerators:{brackets:function(r,e){return r+"[]"},indices:function(r,e){return r+"["+e+"]"},repeat:function(r,e){return r}},strictNullHandling:!1};internals.stringify=function(r,e,n,i,t){if("function"==typeof t)r=t(e,r);else if(Utils.isBuffer(r))r=r.toString();else if(r instanceof Date)r=r.toISOString();else if(null===r){if(i)return Utils.encode(e);r=""}if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)return[Utils.encode(e)+"="+Utils.encode(r)];var a=[];if("undefined"==typeof r)return a;for(var l=Array.isArray(t)?t:Object.keys(r),s=0,f=l.length;f>s;++s){var o=l[s];a=Array.isArray(r)?a.concat(internals.stringify(r[o],n(e,o),n,i,t)):a.concat(internals.stringify(r[o],e+"["+o+"]",n,i,t))}return a},module.exports=function(r,e){e=e||{};var n,i,t="undefined"==typeof e.delimiter?internals.delimiter:e.delimiter,a="boolean"==typeof e.strictNullHandling?e.strictNullHandling:internals.strictNullHandling;"function"==typeof e.filter?(i=e.filter,r=i("",r)):Array.isArray(e.filter)&&(n=i=e.filter);var l=[];if("object"!=typeof r||null===r)return"";var s;s=e.arrayFormat in internals.arrayPrefixGenerators?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":"indices";var f=internals.arrayPrefixGenerators[s];n||(n=Object.keys(r));for(var o=0,c=n.length;c>o;++o){var u=n[o];l=l.concat(internals.stringify(r[u],u,f,a,i))}return l.join(t)};


},{"./utils":216}],216:[function(require,module,exports){
  var internals={};internals.hexTable=new Array(256);for(var h=0;256>h;++h)internals.hexTable[h]="%"+((16>h?"0":"")+h.toString(16)).toUpperCase();exports.arrayToObject=function(e,r){for(var t=r.plainObjects?Object.create(null):{},n=0,a=e.length;a>n;++n)"undefined"!=typeof e[n]&&(t[n]=e[n]);return t},exports.merge=function(e,r,t){if(!r)return e;if("object"!=typeof r)return Array.isArray(e)?e.push(r):"object"==typeof e?e[r]=!0:e=[e,r],e;if("object"!=typeof e)return e=[e].concat(r);Array.isArray(e)&&!Array.isArray(r)&&(e=exports.arrayToObject(e,t));for(var n=Object.keys(r),a=0,o=n.length;o>a;++a){var c=n[a],i=r[c];Object.prototype.hasOwnProperty.call(e,c)?e[c]=exports.merge(e[c],i,t):e[c]=i}return e},exports.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(r){return e}},exports.encode=function(e){if(0===e.length)return e;"string"!=typeof e&&(e=""+e);for(var r="",t=0,n=e.length;n>t;++t){var a=e.charCodeAt(t);45===a||46===a||95===a||126===a||a>=48&&57>=a||a>=65&&90>=a||a>=97&&122>=a?r+=e[t]:128>a?r+=internals.hexTable[a]:2048>a?r+=internals.hexTable[192|a>>6]+internals.hexTable[128|63&a]:55296>a||a>=57344?r+=internals.hexTable[224|a>>12]+internals.hexTable[128|a>>6&63]+internals.hexTable[128|63&a]:(++t,a=65536+((1023&a)<<10|1023&e.charCodeAt(t)),r+=internals.hexTable[240|a>>18]+internals.hexTable[128|a>>12&63]+internals.hexTable[128|a>>6&63]+internals.hexTable[128|63&a])}return r},exports.compact=function(e,r){if("object"!=typeof e||null===e)return e;r=r||[];var t=r.indexOf(e);if(-1!==t)return r[t];if(r.push(e),Array.isArray(e)){for(var n=[],a=0,o=e.length;o>a;++a)"undefined"!=typeof e[a]&&n.push(e[a]);return n}var c=Object.keys(e);for(a=0,o=c.length;o>a;++a){var i=c[a];e[i]=exports.compact(e[i],r)}return e},exports.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},exports.isBuffer=function(e){return null===e||"undefined"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))};


},{}],217:[function(require,module,exports){
  (function(t){function e(t,n){return this instanceof e?(r.call(this),null==t&&(t="utf8"),this.readable=this.writable=!0,this.paused=!1,this.toEncoding=null==n?t:n,this.fromEncoding=null==n?"":t,void(this.decoder=new i(this.toEncoding))):new e(t,n)}function i(e){switch(h.call(this,e),this.encoding){case"base64":this.write=n,this.alignedBuffer=new t(3),this.alignedBytes=0}}function n(e){var i=(this.alignedBytes+e.length)%this.alignedBuffer.length;if(!i&&!this.alignedBytes)return e.toString(this.encoding);var n=new t(this.alignedBytes+e.length-i);return this.alignedBuffer.copy(n,0,0,this.alignedBytes),e.copy(n,this.alignedBytes,0,e.length-i),e.copy(this.alignedBuffer,0,e.length-i,e.length),this.alignedBytes=i,n.toString(this.encoding)}var s=require("util"),r=require("stream"),h=require("string_decoder").StringDecoder;module.exports=e,module.exports.AlignedStringDecoder=i,s.inherits(e,r),e.prototype.write=function(e){if(!this.writable){var i=new Error("stream not writable");return i.code="EPIPE",this.emit("error",i),!1}this.fromEncoding&&(t.isBuffer(e)&&(e=e.toString()),e=new t(e,this.fromEncoding));var n=this.decoder.write(e);return n.length&&this.emit("data",n),!this.paused},e.prototype.flush=function(){if(this.decoder.flush){var t=this.decoder.flush();t.length&&this.emit("data",t)}},e.prototype.end=function(){(this.writable||this.readable)&&(this.flush(),this.emit("end"),this.writable=this.readable=!1,this.destroy())},e.prototype.destroy=function(){this.decoder=null,this.writable=this.readable=!1,this.emit("close")},e.prototype.pause=function(){this.paused=!0},e.prototype.resume=function(){this.paused&&this.emit("drain"),this.paused=!1},s.inherits(i,h),i.prototype.flush=function(){if(!this.alignedBuffer||!this.alignedBytes)return"";var t=this.alignedBuffer.toString(this.encoding,0,this.alignedBytes);return this.alignedBytes=0,t}}).call(this,require("buffer").Buffer);


},{"buffer":49,"stream":73,"string_decoder":79,"util":81}],218:[function(require,module,exports){
  "use strict";function parseDate(e){if(e){var t=e.split(DATE_DELIM);if(t){for(var o=null,r=null,i=null,n=null,a=null,s=null,u=0;u<t.length;u++){var l=t[u].trim();if(l.length){var p;if(null===i&&(p=TIME.exec(l))){if(o=parseInt(p[1],10),r=parseInt(p[2],10),i=parseInt(p[3],10),o>23||r>59||i>59)return}else if(null===n&&(p=DAY_OF_MONTH.exec(l))){if(n=parseInt(p,10),1>n||n>31)return}else if(null===a&&(p=MONTH.exec(l)))a=MONTH_TO_NUM[p[1].toLowerCase()];else if(null===s&&(p=YEAR.exec(l),p&&(s=parseInt(p[0],10),s>=70&&99>=s?s+=1900:s>=0&&69>=s&&(s+=2e3),1601>s)))return}}if(null!==i&&null!==n&&null!==a&&null!==s)return new Date(Date.UTC(s,a,n,o,r,i))}}}function formatDate(e){var t=e.getUTCDate();t=t>=10?t:"0"+t;var o=e.getUTCHours();o=o>=10?o:"0"+o;var r=e.getUTCMinutes();r=r>=10?r:"0"+r;var i=e.getUTCSeconds();return i=i>=10?i:"0"+i,NUM_TO_DAY[e.getUTCDay()]+", "+t+" "+NUM_TO_MONTH[e.getUTCMonth()]+" "+e.getUTCFullYear()+" "+o+":"+r+":"+i+" GMT"}function canonicalDomain(e){return null==e?null:(e=e.trim().replace(/^\./,""),punycode&&/[^\u0001-\u007f]/.test(e)&&(e=punycode.toASCII(e)),e.toLowerCase())}function domainMatch(e,t,o){if(null==e||null==t)return null;if(o!==!1&&(e=canonicalDomain(e),t=canonicalDomain(t)),e==t)return!0;if(net.isIP(e))return!1;var r=e.indexOf(t);return 0>=r?!1:e.length!==t.length+r?!1:"."!==e.substr(r-1,1)?!1:!0}function defaultPath(e){if(!e||"/"!==e.substr(0,1))return"/";if("/"===e)return e;var t=e.lastIndexOf("/");return 0===t?"/":e.slice(0,t)}function parse(e){e=e.trim();var t=TRAILING_SEMICOLON.exec(e);t&&(e=e.slice(0,t.index));var o=e.indexOf(";"),r=COOKIE_PAIR.exec(-1===o?e:e.substr(0,o));if(r){var i=new Cookie;if(i.key=r[1].trim(),i.value=r[2].trim(),-1===o)return i;var n=e.slice(o).replace(/^\s*;\s*/,"").trim();if(0===n.length)return i;for(var a=n.split(/\s*;\s*/);a.length;){var s,u,l=a.shift(),p=l.indexOf("=");switch(-1===p?(s=l,u=null):(s=l.substr(0,p),u=l.substr(p+1)),s=s.trim().toLowerCase(),u&&(u=u.trim()),s){case"expires":if(u){var c=parseDate(u);c&&(i.expires=c)}break;case"max-age":if(u&&/^-?[0-9]+$/.test(u)){var f=parseInt(u,10);i.setMaxAge(f)}break;case"domain":if(u){var h=u.trim().replace(/^\./,"");h&&(i.domain=h.toLowerCase())}break;case"path":i.path=u&&"/"===u[0]?u:null;break;case"secure":i.secure=!0;break;case"httponly":i.httpOnly=!0;break;default:i.extensions=i.extensions||[],i.extensions.push(l)}}return i}}function jsonParse(e){var t;try{t=JSON.parse(e)}catch(o){return o}return t}function fromJSON(e){if(!e)return null;var t;if("string"==typeof e){if(t=jsonParse(e),t instanceof Error)return null}else t=e;for(var o=new Cookie,r=0;r<Cookie.serializableProperties.length;r++){var i=Cookie.serializableProperties[r];void 0!==t[i]&&t[i]!==Cookie.prototype[i]&&("expires"===i||"creation"===i||"lastAccessed"===i?null===t[i]?o[i]=null:o[i]="Infinity"==t[i]?"Infinity":new Date(t[i]):o[i]=t[i])}return o}function cookieCompare(e,t){var o=0,r=e.path?e.path.length:0,i=t.path?t.path.length:0;if(o=i-r,0!==o)return o;var n=e.creation?e.creation.getTime():MAX_TIME,a=t.creation?t.creation.getTime():MAX_TIME;return o=n-a,0!==o?o:o=e.creationIndex-t.creationIndex}function permutePath(e){if("/"===e)return["/"];e.lastIndexOf("/")===e.length-1&&(e=e.substr(0,e.length-1));for(var t=[e];e.length>1;){var o=e.lastIndexOf("/");if(0===o)break;e=e.substr(0,o),t.push(e)}return t.push("/"),t}function getCookieContext(e){if(e instanceof Object)return e;try{e=decodeURI(e)}catch(t){}return urlParse(e)}function Cookie(e){e=e||{},Object.keys(e).forEach(function(t){Cookie.prototype.hasOwnProperty(t)&&Cookie.prototype[t]!==e[t]&&"_"!==t.substr(0,1)&&(this[t]=e[t])},this),this.creation=this.creation||new Date,Object.defineProperty(this,"creationIndex",{configurable:!1,enumerable:!1,writable:!0,value:++Cookie.cookiesCreated})}function CookieJar(e,t){null!=t&&(this.rejectPublicSuffixes=t),e||(e=new MemoryCookieStore),this.store=e}function syncWrap(e){return function(){if(!this.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");var t,o,r=Array.prototype.slice.call(arguments);if(r.push(function(e,r){t=e,o=r}),this[e].apply(this,r),t)throw t;return o}}var net=require("net"),urlParse=require("url").parse,pubsuffix=require("./pubsuffix"),Store=require("./store").Store,MemoryCookieStore=require("./memstore").MemoryCookieStore,pathMatch=require("./pathMatch").pathMatch,VERSION=require("../package.json").version,punycode;try{punycode=require("punycode")}catch(e){}var DATE_DELIM=/[\x09\x20-\x2F\x3B-\x40\x5B-\x60\x7B-\x7E]/,COOKIE_OCTET=/[\x21\x23-\x2B\x2D-\x3A\x3C-\x5B\x5D-\x7E]/,COOKIE_OCTETS=new RegExp("^"+COOKIE_OCTET.source+"$"),COOKIE_PAIR=/^([^=;]+)\s*=\s*(("?)[^\n\r\0]*\3)/,PATH_VALUE=/[\x20-\x3A\x3C-\x7E]+/,TRAILING_SEMICOLON=/;+$/,DAY_OF_MONTH=/^(\d{1,2})[^\d]*$/,TIME=/^(\d{1,2})[^\d]*:(\d{1,2})[^\d]*:(\d{1,2})[^\d]*$/,MONTH=/^(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i,MONTH_TO_NUM={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11},NUM_TO_MONTH=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],NUM_TO_DAY=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],YEAR=/^(\d{2}|\d{4})$/,MAX_TIME=2147483647e3,MIN_TIME=0;Cookie.cookiesCreated=0,Cookie.parse=parse,Cookie.fromJSON=fromJSON,Cookie.prototype.key="",Cookie.prototype.value="",Cookie.prototype.expires="Infinity",Cookie.prototype.maxAge=null,Cookie.prototype.domain=null,Cookie.prototype.path=null,Cookie.prototype.secure=!1,Cookie.prototype.httpOnly=!1,Cookie.prototype.extensions=null,Cookie.prototype.hostOnly=null,Cookie.prototype.pathIsDefault=null,Cookie.prototype.creation=null,Cookie.prototype.lastAccessed=null,Object.defineProperty(Cookie.prototype,"creationIndex",{configurable:!0,enumerable:!1,writable:!0,value:0}),Cookie.serializableProperties=Object.keys(Cookie.prototype).filter(function(e){return!(Cookie.prototype[e]instanceof Function||"creationIndex"===e||"_"===e.substr(0,1))}),Cookie.prototype.inspect=function(){var e=Date.now();return'Cookie="'+this.toString()+"; hostOnly="+(null!=this.hostOnly?this.hostOnly:"?")+"; aAge="+(this.lastAccessed?e-this.lastAccessed.getTime()+"ms":"?")+"; cAge="+(this.creation?e-this.creation.getTime()+"ms":"?")+'"'},Cookie.prototype.toJSON=function(){for(var e={},t=Cookie.serializableProperties,o=0;o<t.length;o++){var r=t[o];this[r]!==Cookie.prototype[r]&&("expires"===r||"creation"===r||"lastAccessed"===r?null===this[r]?e[r]=null:e[r]="Infinity"==this[r]?"Infinity":this[r].toISOString():"maxAge"===r?null!==this[r]&&(e[r]=this[r]==1/0||this[r]==-(1/0)?this[r].toString():this[r]):this[r]!==Cookie.prototype[r]&&(e[r]=this[r]))}return e},Cookie.prototype.clone=function(){return fromJSON(this.toJSON())},Cookie.prototype.validate=function(){if(!COOKIE_OCTETS.test(this.value))return!1;if(!(this.expires==1/0||this.expires instanceof Date||parseDate(this.expires)))return!1;if(null!=this.maxAge&&this.maxAge<=0)return!1;if(null!=this.path&&!PATH_VALUE.test(this.path))return!1;var e=this.cdomain();if(e){if(e.match(/\.$/))return!1;var t=pubsuffix.getPublicSuffix(e);if(null==t)return!1}return!0},Cookie.prototype.setExpires=function(e){e instanceof Date?this.expires=e:this.expires=parseDate(e)||"Infinity"},Cookie.prototype.setMaxAge=function(e){e===1/0||e===-(1/0)?this.maxAge=e.toString():this.maxAge=e},Cookie.prototype.cookieString=function(){var e=this.value;return null==e&&(e=""),this.key+"="+e},Cookie.prototype.toString=function(){var e=this.cookieString();return this.expires!=1/0&&(e+=this.expires instanceof Date?"; Expires="+formatDate(this.expires):"; Expires="+this.expires),null!=this.maxAge&&this.maxAge!=1/0&&(e+="; Max-Age="+this.maxAge),this.domain&&!this.hostOnly&&(e+="; Domain="+this.domain),this.path&&(e+="; Path="+this.path),this.secure&&(e+="; Secure"),this.httpOnly&&(e+="; HttpOnly"),this.extensions&&this.extensions.forEach(function(t){e+="; "+t}),e},Cookie.prototype.TTL=function(e){if(null!=this.maxAge)return this.maxAge<=0?0:1e3*this.maxAge;var t=this.expires;return t!=1/0?(t instanceof Date||(t=parseDate(t)||1/0),t==1/0?1/0:t.getTime()-(e||Date.now())):1/0},Cookie.prototype.expiryTime=function(e){if(null!=this.maxAge){var t=e||this.creation||new Date,o=this.maxAge<=0?-(1/0):1e3*this.maxAge;return t.getTime()+o}return this.expires==1/0?1/0:this.expires.getTime()},Cookie.prototype.expiryDate=function(e){var t=this.expiryTime(e);return t==1/0?new Date(MAX_TIME):t==-(1/0)?new Date(MIN_TIME):new Date(t)},Cookie.prototype.isPersistent=function(){return null!=this.maxAge||this.expires!=1/0},Cookie.prototype.cdomain=Cookie.prototype.canonicalizedDomain=function(){return null==this.domain?null:canonicalDomain(this.domain)},CookieJar.prototype.store=null,CookieJar.prototype.rejectPublicSuffixes=!0;var CAN_BE_SYNC=[];CAN_BE_SYNC.push("setCookie"),CookieJar.prototype.setCookie=function(e,t,o,r){function i(t,i){if(t)return r(t);var n=function(t){return t?r(t):void r(null,e)};if(i){if(o.http===!1&&i.httpOnly)return t=new Error("old Cookie is HttpOnly and this isn't an HTTP API"),r(o.ignoreError?null:t);e.creation=i.creation,e.creationIndex=i.creationIndex,e.lastAccessed=u,p.updateCookie(i,e,n)}else e.creation=e.lastAccessed=u,p.putCookie(e,n)}var n,a=getCookieContext(t);o instanceof Function&&(r=o,o={});var s=canonicalDomain(a.hostname);if(e instanceof Cookie||(e=Cookie.parse(e)),!e)return n=new Error("Cookie failed to parse"),r(o.ignoreError?null:n);var u=o.now||new Date;if(this.rejectPublicSuffixes&&e.domain){var l=pubsuffix.getPublicSuffix(e.cdomain());if(null==l)return n=new Error("Cookie has domain set to a public suffix"),r(o.ignoreError?null:n)}if(e.domain){if(!domainMatch(s,e.cdomain(),!1))return n=new Error("Cookie not in this host's domain. Cookie:"+e.cdomain()+" Request:"+s),r(o.ignoreError?null:n);null==e.hostOnly&&(e.hostOnly=!1)}else e.hostOnly=!0,e.domain=s;if(e.path&&"/"===e.path[0]||(e.path=defaultPath(a.pathname),e.pathIsDefault=!0),o.http===!1&&e.httpOnly)return n=new Error("Cookie is HttpOnly and this isn't an HTTP API"),r(o.ignoreError?null:n);var p=this.store;p.updateCookie||(p.updateCookie=function(e,t,o){this.putCookie(t,o)}),p.findCookie(e.domain,e.path,e.key,i)},CAN_BE_SYNC.push("getCookies"),CookieJar.prototype.getCookies=function(e,t,o){function r(e){if(e.hostOnly){if(e.domain!=n)return!1}else if(!domainMatch(n,e.domain,!1))return!1;return c||pathMatch(a,e.path)?e.secure&&!s?!1:e.httpOnly&&!u?!1:p&&e.expiryTime()<=l?(f.removeCookie(e.domain,e.path,e.key,function(){}),!1):!0:!1}var i=getCookieContext(e);t instanceof Function&&(o=t,t={});var n=canonicalDomain(i.hostname),a=i.pathname||"/",s=t.secure;null!=s||!i.protocol||"https:"!=i.protocol&&"wss:"!=i.protocol||(s=!0);var u=t.http;null==u&&(u=!0);var l=t.now||Date.now(),p=t.expire!==!1,c=!!t.allPaths,f=this.store;f.findCookies(n,c?null:a,function(e,i){if(e)return o(e);i=i.filter(r),t.sort!==!1&&(i=i.sort(cookieCompare));var n=new Date;i.forEach(function(e){e.lastAccessed=n}),o(null,i)})},CAN_BE_SYNC.push("getCookieString"),CookieJar.prototype.getCookieString=function(){var e=Array.prototype.slice.call(arguments,0),t=e.pop(),o=function(e,o){e?t(e):t(null,o.sort(cookieCompare).map(function(e){return e.cookieString()}).join("; "))};e.push(o),this.getCookies.apply(this,e)},CAN_BE_SYNC.push("getSetCookieStrings"),CookieJar.prototype.getSetCookieStrings=function(){var e=Array.prototype.slice.call(arguments,0),t=e.pop(),o=function(e,o){e?t(e):t(null,o.map(function(e){return e.toString()}))};e.push(o),this.getCookies.apply(this,e)},CAN_BE_SYNC.push("serialize"),CookieJar.prototype.serialize=function(e){var t=this.store.constructor.name;"Object"===t&&(t=null);var o={version:"tough-cookie@"+VERSION,storeType:t,rejectPublicSuffixes:!!this.rejectPublicSuffixes,cookies:[]};return this.store.getAllCookies&&"function"==typeof this.store.getAllCookies?void this.store.getAllCookies(function(t,r){return t?e(t):(o.cookies=r.map(function(e){return e=e instanceof Cookie?e.toJSON():e,delete e.creationIndex,e}),e(null,o))}):e(new Error("store does not support getAllCookies and cannot be serialized"))},CookieJar.prototype.toJSON=function(){return this.serializeSync()},CAN_BE_SYNC.push("_importCookies"),CookieJar.prototype._importCookies=function(e,t){function o(e){if(e)return t(e);if(!i.length)return t(e,r);var n;try{n=fromJSON(i.shift())}catch(a){return t(a)}return null===n?o(null):void r.store.putCookie(n,o)}var r=this,i=e.cookies;return i&&Array.isArray(i)?void o():t(new Error("serialized jar has no cookies array"))},CookieJar.deserialize=function(e,t,o){3!==arguments.length&&(o=t,t=null);var r;if("string"==typeof e){if(r=jsonParse(e),r instanceof Error)return o(r)}else r=e;var i=new CookieJar(t,r.rejectPublicSuffixes);i._importCookies(r,function(e){return e?o(e):void o(null,i)})},CookieJar.fromJSON=CookieJar.deserializeSync,CookieJar.deserializeSync=function(e,t){var o="string"==typeof e?JSON.parse(e):e,r=new CookieJar(t,o.rejectPublicSuffixes);if(!r.store.synchronous)throw new Error("CookieJar store is not synchronous; use async API instead.");return r._importCookiesSync(o),r},CAN_BE_SYNC.push("clone"),CookieJar.prototype.clone=function(e,t){1===arguments.length&&(t=e,e=null),this.serialize(function(o,r){return o?t(o):void CookieJar.deserialize(e,r,t)})},CAN_BE_SYNC.forEach(function(e){CookieJar.prototype[e+"Sync"]=syncWrap(e)}),module.exports={CookieJar:CookieJar,Cookie:Cookie,Store:Store,MemoryCookieStore:MemoryCookieStore,parseDate:parseDate,formatDate:formatDate,parse:parse,fromJSON:fromJSON,domainMatch:domainMatch,defaultPath:defaultPath,pathMatch:pathMatch,getPublicSuffix:pubsuffix.getPublicSuffix,cookieCompare:cookieCompare,permuteDomain:require("./permuteDomain").permuteDomain,permutePath:permutePath,canonicalDomain:canonicalDomain};


},{"../package.json":224,"./memstore":219,"./pathMatch":220,"./permuteDomain":221,"./pubsuffix":222,"./store":223,"net":33,"punycode":68,"url":298}],219:[function(require,module,exports){
  "use strict";function MemoryCookieStore(){Store.call(this),this.idx={}}var Store=require("./store").Store,permuteDomain=require("./permuteDomain").permuteDomain,pathMatch=require("./pathMatch").pathMatch,util=require("util");util.inherits(MemoryCookieStore,Store),exports.MemoryCookieStore=MemoryCookieStore,MemoryCookieStore.prototype.idx=null,MemoryCookieStore.prototype.synchronous=!0,MemoryCookieStore.prototype.inspect=function(){return"{ idx: "+util.inspect(this.idx,!1,2)+" }"},MemoryCookieStore.prototype.findCookie=function(o,t,e,i){return this.idx[o]&&this.idx[o][t]?i(null,this.idx[o][t][e]||null):i(null,void 0)},MemoryCookieStore.prototype.findCookies=function(o,t,e){var i=[];if(!o)return e(null,[]);var r;r=t?function(o){Object.keys(o).forEach(function(e){if(pathMatch(t,e)){var r=o[e];for(var n in r)i.push(r[n])}})}:function(o){for(var t in o){var e=o[t];for(var r in e)i.push(e[r])}};var n=permuteDomain(o)||[o],u=this.idx;n.forEach(function(o){var t=u[o];t&&r(t)}),e(null,i)},MemoryCookieStore.prototype.putCookie=function(o,t){this.idx[o.domain]||(this.idx[o.domain]={}),this.idx[o.domain][o.path]||(this.idx[o.domain][o.path]={}),this.idx[o.domain][o.path][o.key]=o,t(null)},MemoryCookieStore.prototype.updateCookie=function(o,t,e){this.putCookie(t,e)},MemoryCookieStore.prototype.removeCookie=function(o,t,e,i){this.idx[o]&&this.idx[o][t]&&this.idx[o][t][e]&&delete this.idx[o][t][e],i(null)},MemoryCookieStore.prototype.removeCookies=function(o,t,e){return this.idx[o]&&(t?delete this.idx[o][t]:delete this.idx[o]),e(null)},MemoryCookieStore.prototype.getAllCookies=function(o){var t=[],e=this.idx,i=Object.keys(e);i.forEach(function(o){var i=Object.keys(e[o]);i.forEach(function(i){var r=Object.keys(e[o][i]);r.forEach(function(r){null!==r&&t.push(e[o][i][r])})})}),t.sort(function(o,t){return(o.creationIndex||0)-(t.creationIndex||0)}),o(null,t)};


},{"./pathMatch":220,"./permuteDomain":221,"./store":223,"util":81}],220:[function(require,module,exports){
  "use strict";function pathMatch(t,r){if(r===t)return!0;var e=t.indexOf(r);if(0===e){if("/"===r.substr(-1))return!0;if("/"===t.substr(r.length,1))return!0}return!1}exports.pathMatch=pathMatch;


},{}],221:[function(require,module,exports){
  "use strict";function permuteDomain(e){var r=pubsuffix.getPublicSuffix(e);if(!r)return null;if(r==e)return[e];for(var u=e.slice(0,-(r.length+1)),i=u.split(".").reverse(),t=r,f=[t];i.length;)t=i.shift()+"."+t,f.push(t);return f}var pubsuffix=require("./pubsuffix");exports.permuteDomain=permuteDomain;


},{"./pubsuffix":222}],222:[function(require,module,exports){
  "use strict";var punycode=require("punycode");module.exports.getPublicSuffix=function(a){if(!a)return null;if(a.match(/^\./))return null;var o=punycode.toASCII(a),i=!1;if(o!==a&&(a=o,i=!0),index[a])return null;a=a.toLowerCase();for(var n=a.split(".").reverse(),s="",e=0,m=0;m<n.length;m++){var u=n[m],t="*"+s,r=u+s;index[t]?(e=m+1,index[r]===!1&&e--):index[r]&&(e=m+1),s="."+r}if(index["*"+s])return null;if(e=e||1,n.length>e){var p=n.slice(0,e+1).reverse().join(".");return i?punycode.toUnicode(p):p}return null};var index=module.exports.index=Object.freeze({ac:!0,"com.ac":!0,"edu.ac":!0,"gov.ac":!0,"net.ac":!0,"mil.ac":!0,"org.ac":!0,ad:!0,"nom.ad":!0,ae:!0,"co.ae":!0,"net.ae":!0,"org.ae":!0,"sch.ae":!0,"ac.ae":!0,"gov.ae":!0,"mil.ae":!0,aero:!0,"accident-investigation.aero":!0,"accident-prevention.aero":!0,"aerobatic.aero":!0,"aeroclub.aero":!0,"aerodrome.aero":!0,"agents.aero":!0,"aircraft.aero":!0,"airline.aero":!0,"airport.aero":!0,"air-surveillance.aero":!0,"airtraffic.aero":!0,"air-traffic-control.aero":!0,"ambulance.aero":!0,"amusement.aero":!0,"association.aero":!0,"author.aero":!0,"ballooning.aero":!0,"broker.aero":!0,"caa.aero":!0,"cargo.aero":!0,"catering.aero":!0,"certification.aero":!0,"championship.aero":!0,"charter.aero":!0,"civilaviation.aero":!0,"club.aero":!0,"conference.aero":!0,"consultant.aero":!0,"consulting.aero":!0,"control.aero":!0,"council.aero":!0,"crew.aero":!0,"design.aero":!0,"dgca.aero":!0,"educator.aero":!0,"emergency.aero":!0,"engine.aero":!0,"engineer.aero":!0,"entertainment.aero":!0,"equipment.aero":!0,"exchange.aero":!0,"express.aero":!0,"federation.aero":!0,"flight.aero":!0,"freight.aero":!0,"fuel.aero":!0,"gliding.aero":!0,"government.aero":!0,"groundhandling.aero":!0,"group.aero":!0,"hanggliding.aero":!0,"homebuilt.aero":!0,"insurance.aero":!0,"journal.aero":!0,"journalist.aero":!0,"leasing.aero":!0,"logistics.aero":!0,"magazine.aero":!0,"maintenance.aero":!0,"marketplace.aero":!0,"media.aero":!0,"microlight.aero":!0,"modelling.aero":!0,"navigation.aero":!0,"parachuting.aero":!0,"paragliding.aero":!0,"passenger-association.aero":!0,"pilot.aero":!0,"press.aero":!0,"production.aero":!0,"recreation.aero":!0,"repbody.aero":!0,"res.aero":!0,"research.aero":!0,"rotorcraft.aero":!0,"safety.aero":!0,"scientist.aero":!0,"services.aero":!0,"show.aero":!0,"skydiving.aero":!0,"software.aero":!0,"student.aero":!0,"taxi.aero":!0,"trader.aero":!0,"trading.aero":!0,"trainer.aero":!0,"union.aero":!0,"workinggroup.aero":!0,"works.aero":!0,af:!0,"gov.af":!0,"com.af":!0,"org.af":!0,"net.af":!0,"edu.af":!0,ag:!0,"com.ag":!0,"org.ag":!0,"net.ag":!0,"co.ag":!0,"nom.ag":!0,ai:!0,"off.ai":!0,"com.ai":!0,"net.ai":!0,"org.ai":!0,al:!0,"com.al":!0,"edu.al":!0,"gov.al":!0,"mil.al":!0,"net.al":!0,"org.al":!0,am:!0,an:!0,"com.an":!0,"net.an":!0,"org.an":!0,"edu.an":!0,ao:!0,"ed.ao":!0,"gv.ao":!0,"og.ao":!0,"co.ao":!0,"pb.ao":!0,"it.ao":!0,aq:!0,ar:!0,"com.ar":!0,"edu.ar":!0,"gob.ar":!0,"gov.ar":!0,"int.ar":!0,"mil.ar":!0,"net.ar":!0,"org.ar":!0,"tur.ar":!0,arpa:!0,"e164.arpa":!0,"in-addr.arpa":!0,"ip6.arpa":!0,"iris.arpa":!0,"uri.arpa":!0,"urn.arpa":!0,as:!0,"gov.as":!0,asia:!0,at:!0,"ac.at":!0,"co.at":!0,"gv.at":!0,"or.at":!0,au:!0,"com.au":!0,"net.au":!0,"org.au":!0,"edu.au":!0,"gov.au":!0,"asn.au":!0,"id.au":!0,"info.au":!0,"conf.au":!0,"oz.au":!0,"act.au":!0,"nsw.au":!0,"nt.au":!0,"qld.au":!0,"sa.au":!0,"tas.au":!0,"vic.au":!0,"wa.au":!0,"act.edu.au":!0,"nsw.edu.au":!0,"nt.edu.au":!0,"qld.edu.au":!0,"sa.edu.au":!0,"tas.edu.au":!0,"vic.edu.au":!0,"wa.edu.au":!0,"qld.gov.au":!0,"sa.gov.au":!0,"tas.gov.au":!0,"vic.gov.au":!0,"wa.gov.au":!0,aw:!0,"com.aw":!0,ax:!0,az:!0,"com.az":!0,"net.az":!0,"int.az":!0,"gov.az":!0,"org.az":!0,"edu.az":!0,"info.az":!0,"pp.az":!0,"mil.az":!0,"name.az":!0,"pro.az":!0,"biz.az":!0,ba:!0,"org.ba":!0,"net.ba":!0,"edu.ba":!0,"gov.ba":!0,"mil.ba":!0,"unsa.ba":!0,"unbi.ba":!0,"co.ba":!0,"com.ba":!0,"rs.ba":!0,bb:!0,"biz.bb":!0,"co.bb":!0,"com.bb":!0,"edu.bb":!0,"gov.bb":!0,"info.bb":!0,"net.bb":!0,"org.bb":!0,"store.bb":!0,"tv.bb":!0,"*.bd":!0,be:!0,"ac.be":!0,bf:!0,"gov.bf":!0,bg:!0,"a.bg":!0,"b.bg":!0,"c.bg":!0,"d.bg":!0,"e.bg":!0,"f.bg":!0,"g.bg":!0,"h.bg":!0,"i.bg":!0,"j.bg":!0,"k.bg":!0,"l.bg":!0,"m.bg":!0,"n.bg":!0,"o.bg":!0,"p.bg":!0,"q.bg":!0,"r.bg":!0,"s.bg":!0,"t.bg":!0,"u.bg":!0,"v.bg":!0,"w.bg":!0,"x.bg":!0,"y.bg":!0,"z.bg":!0,"0.bg":!0,"1.bg":!0,"2.bg":!0,"3.bg":!0,"4.bg":!0,"5.bg":!0,"6.bg":!0,"7.bg":!0,"8.bg":!0,"9.bg":!0,bh:!0,"com.bh":!0,"edu.bh":!0,"net.bh":!0,"org.bh":!0,"gov.bh":!0,bi:!0,"co.bi":!0,"com.bi":!0,"edu.bi":!0,"or.bi":!0,"org.bi":!0,biz:!0,bj:!0,"asso.bj":!0,"barreau.bj":!0,"gouv.bj":!0,bm:!0,"com.bm":!0,"edu.bm":!0,"gov.bm":!0,"net.bm":!0,"org.bm":!0,"*.bn":!0,bo:!0,"com.bo":!0,"edu.bo":!0,"gov.bo":!0,"gob.bo":!0,"int.bo":!0,"org.bo":!0,"net.bo":!0,"mil.bo":!0,"tv.bo":!0,br:!0,"adm.br":!0,"adv.br":!0,"agr.br":!0,"am.br":!0,"arq.br":!0,"art.br":!0,"ato.br":!0,"b.br":!0,"bio.br":!0,"blog.br":!0,"bmd.br":!0,"cim.br":!0,"cng.br":!0,"cnt.br":!0,"com.br":!0,"coop.br":!0,"ecn.br":!0,"eco.br":!0,"edu.br":!0,"emp.br":!0,"eng.br":!0,"esp.br":!0,"etc.br":!0,"eti.br":!0,"far.br":!0,"flog.br":!0,"fm.br":!0,"fnd.br":!0,"fot.br":!0,"fst.br":!0,"g12.br":!0,"ggf.br":!0,"gov.br":!0,"imb.br":!0,"ind.br":!0,"inf.br":!0,"jor.br":!0,"jus.br":!0,"leg.br":!0,"lel.br":!0,"mat.br":!0,"med.br":!0,"mil.br":!0,"mp.br":!0,"mus.br":!0,"net.br":!0,"*.nom.br":!0,"not.br":!0,"ntr.br":!0,"odo.br":!0,"org.br":!0,"ppg.br":!0,"pro.br":!0,"psc.br":!0,"psi.br":!0,"qsl.br":!0,"radio.br":!0,"rec.br":!0,"slg.br":!0,"srv.br":!0,"taxi.br":!0,"teo.br":!0,"tmp.br":!0,"trd.br":!0,"tur.br":!0,"tv.br":!0,"vet.br":!0,"vlog.br":!0,"wiki.br":!0,"zlg.br":!0,bs:!0,"com.bs":!0,"net.bs":!0,"org.bs":!0,"edu.bs":!0,"gov.bs":!0,bt:!0,"com.bt":!0,"edu.bt":!0,"gov.bt":!0,"net.bt":!0,"org.bt":!0,bv:!0,bw:!0,"co.bw":!0,"org.bw":!0,by:!0,"gov.by":!0,"mil.by":!0,"com.by":!0,"of.by":!0,bz:!0,"com.bz":!0,"net.bz":!0,"org.bz":!0,"edu.bz":!0,"gov.bz":!0,ca:!0,"ab.ca":!0,"bc.ca":!0,"mb.ca":!0,"nb.ca":!0,"nf.ca":!0,"nl.ca":!0,"ns.ca":!0,"nt.ca":!0,"nu.ca":!0,"on.ca":!0,"pe.ca":!0,"qc.ca":!0,"sk.ca":!0,"yk.ca":!0,"gc.ca":!0,cat:!0,cc:!0,cd:!0,"gov.cd":!0,cf:!0,cg:!0,ch:!0,ci:!0,"org.ci":!0,"or.ci":!0,"com.ci":!0,"co.ci":!0,"edu.ci":!0,"ed.ci":!0,"ac.ci":!0,"net.ci":!0,"go.ci":!0,"asso.ci":!0,"xn--aroport-bya.ci":!0,"int.ci":!0,"presse.ci":!0,"md.ci":!0,"gouv.ci":!0,"*.ck":!0,"www.ck":!1,cl:!0,"gov.cl":!0,"gob.cl":!0,"co.cl":!0,"mil.cl":!0,cm:!0,"co.cm":!0,"com.cm":!0,"gov.cm":!0,"net.cm":!0,cn:!0,"ac.cn":!0,"com.cn":!0,"edu.cn":!0,"gov.cn":!0,"net.cn":!0,"org.cn":!0,"mil.cn":!0,"xn--55qx5d.cn":!0,"xn--io0a7i.cn":!0,"xn--od0alg.cn":!0,"ah.cn":!0,"bj.cn":!0,"cq.cn":!0,"fj.cn":!0,"gd.cn":!0,"gs.cn":!0,"gz.cn":!0,"gx.cn":!0,"ha.cn":!0,"hb.cn":!0,"he.cn":!0,"hi.cn":!0,"hl.cn":!0,"hn.cn":!0,"jl.cn":!0,"js.cn":!0,"jx.cn":!0,"ln.cn":!0,"nm.cn":!0,"nx.cn":!0,"qh.cn":!0,"sc.cn":!0,"sd.cn":!0,"sh.cn":!0,"sn.cn":!0,"sx.cn":!0,"tj.cn":!0,"xj.cn":!0,"xz.cn":!0,"yn.cn":!0,"zj.cn":!0,"hk.cn":!0,"mo.cn":!0,"tw.cn":!0,co:!0,"arts.co":!0,"com.co":!0,"edu.co":!0,"firm.co":!0,"gov.co":!0,"info.co":!0,"int.co":!0,"mil.co":!0,"net.co":!0,"nom.co":!0,"org.co":!0,"rec.co":!0,"web.co":!0,com:!0,coop:!0,cr:!0,"ac.cr":!0,"co.cr":!0,"ed.cr":!0,"fi.cr":!0,"go.cr":!0,"or.cr":!0,"sa.cr":!0,cu:!0,"com.cu":!0,"edu.cu":!0,"org.cu":!0,"net.cu":!0,"gov.cu":!0,"inf.cu":!0,cv:!0,cw:!0,"com.cw":!0,"edu.cw":!0,"net.cw":!0,"org.cw":!0,cx:!0,"gov.cx":!0,"*.cy":!0,cz:!0,de:!0,dj:!0,dk:!0,dm:!0,"com.dm":!0,"net.dm":!0,"org.dm":!0,"edu.dm":!0,"gov.dm":!0,"do":!0,"art.do":!0,"com.do":!0,"edu.do":!0,"gob.do":!0,"gov.do":!0,"mil.do":!0,"net.do":!0,"org.do":!0,"sld.do":!0,"web.do":!0,dz:!0,"com.dz":!0,"org.dz":!0,"net.dz":!0,"gov.dz":!0,"edu.dz":!0,"asso.dz":!0,"pol.dz":!0,"art.dz":!0,ec:!0,"com.ec":!0,"info.ec":!0,"net.ec":!0,"fin.ec":!0,"k12.ec":!0,"med.ec":!0,"pro.ec":!0,"org.ec":!0,"edu.ec":!0,"gov.ec":!0,"gob.ec":!0,"mil.ec":!0,edu:!0,ee:!0,"edu.ee":!0,"gov.ee":!0,"riik.ee":!0,"lib.ee":!0,"med.ee":!0,"com.ee":!0,"pri.ee":!0,"aip.ee":!0,"org.ee":!0,"fie.ee":!0,eg:!0,"com.eg":!0,"edu.eg":!0,"eun.eg":!0,"gov.eg":!0,"mil.eg":!0,"name.eg":!0,"net.eg":!0,"org.eg":!0,"sci.eg":!0,"*.er":!0,es:!0,"com.es":!0,"nom.es":!0,"org.es":!0,"gob.es":!0,"edu.es":!0,et:!0,"com.et":!0,"gov.et":!0,"org.et":!0,"edu.et":!0,"biz.et":!0,"name.et":!0,"info.et":!0,eu:!0,fi:!0,"aland.fi":!0,"*.fj":!0,"*.fk":!0,fm:!0,fo:!0,fr:!0,"com.fr":!0,"asso.fr":!0,"nom.fr":!0,"prd.fr":!0,"presse.fr":!0,"tm.fr":!0,"aeroport.fr":!0,"assedic.fr":!0,"avocat.fr":!0,"avoues.fr":!0,"cci.fr":!0,"chambagri.fr":!0,"chirurgiens-dentistes.fr":!0,"experts-comptables.fr":!0,"geometre-expert.fr":!0,"gouv.fr":!0,"greta.fr":!0,"huissier-justice.fr":!0,"medecin.fr":!0,"notaires.fr":!0,"pharmacien.fr":!0,"port.fr":!0,"veterinaire.fr":!0,ga:!0,gb:!0,gd:!0,ge:!0,"com.ge":!0,"edu.ge":!0,"gov.ge":!0,"org.ge":!0,"mil.ge":!0,"net.ge":!0,"pvt.ge":!0,gf:!0,gg:!0,"co.gg":!0,"net.gg":!0,"org.gg":!0,gh:!0,"com.gh":!0,"edu.gh":!0,"gov.gh":!0,"org.gh":!0,"mil.gh":!0,gi:!0,"com.gi":!0,"ltd.gi":!0,"gov.gi":!0,"mod.gi":!0,"edu.gi":!0,"org.gi":!0,gl:!0,gm:!0,gn:!0,"ac.gn":!0,"com.gn":!0,"edu.gn":!0,"gov.gn":!0,"org.gn":!0,"net.gn":!0,gov:!0,gp:!0,"com.gp":!0,"net.gp":!0,"mobi.gp":!0,"edu.gp":!0,"org.gp":!0,"asso.gp":!0,gq:!0,gr:!0,"com.gr":!0,"edu.gr":!0,"net.gr":!0,"org.gr":!0,"gov.gr":!0,gs:!0,gt:!0,"com.gt":!0,"edu.gt":!0,"gob.gt":!0,"ind.gt":!0,"mil.gt":!0,"net.gt":!0,"org.gt":!0,"*.gu":!0,gw:!0,gy:!0,"co.gy":!0,"com.gy":!0,"net.gy":!0,hk:!0,"com.hk":!0,"edu.hk":!0,"gov.hk":!0,"idv.hk":!0,"net.hk":!0,"org.hk":!0,"xn--55qx5d.hk":!0,"xn--wcvs22d.hk":!0,"xn--lcvr32d.hk":!0,"xn--mxtq1m.hk":!0,"xn--gmqw5a.hk":!0,"xn--ciqpn.hk":!0,"xn--gmq050i.hk":!0,"xn--zf0avx.hk":!0,"xn--io0a7i.hk":!0,"xn--mk0axi.hk":!0,"xn--od0alg.hk":!0,"xn--od0aq3b.hk":!0,"xn--tn0ag.hk":!0,"xn--uc0atv.hk":!0,"xn--uc0ay4a.hk":!0,hm:!0,hn:!0,"com.hn":!0,"edu.hn":!0,"org.hn":!0,"net.hn":!0,"mil.hn":!0,"gob.hn":!0,hr:!0,"iz.hr":!0,"from.hr":!0,"name.hr":!0,"com.hr":!0,ht:!0,"com.ht":!0,"shop.ht":!0,"firm.ht":!0,"info.ht":!0,"adult.ht":!0,"net.ht":!0,"pro.ht":!0,"org.ht":!0,"med.ht":!0,"art.ht":!0,"coop.ht":!0,"pol.ht":!0,"asso.ht":!0,"edu.ht":!0,"rel.ht":!0,"gouv.ht":!0,"perso.ht":!0,hu:!0,"co.hu":!0,"info.hu":!0,"org.hu":!0,"priv.hu":!0,"sport.hu":!0,"tm.hu":!0,"2000.hu":!0,"agrar.hu":!0,"bolt.hu":!0,"casino.hu":!0,"city.hu":!0,"erotica.hu":!0,"erotika.hu":!0,"film.hu":!0,"forum.hu":!0,"games.hu":!0,"hotel.hu":!0,"ingatlan.hu":!0,"jogasz.hu":!0,"konyvelo.hu":!0,"lakas.hu":!0,"media.hu":!0,"news.hu":!0,"reklam.hu":!0,"sex.hu":!0,"shop.hu":!0,"suli.hu":!0,"szex.hu":!0,"tozsde.hu":!0,"utazas.hu":!0,"video.hu":!0,id:!0,"ac.id":!0,"biz.id":!0,"co.id":!0,"desa.id":!0,"go.id":!0,"mil.id":!0,"my.id":!0,"net.id":!0,"or.id":!0,"sch.id":!0,"web.id":!0,ie:!0,"gov.ie":!0,"*.il":!0,im:!0,"ac.im":!0,"co.im":!0,"com.im":!0,"ltd.co.im":!0,"net.im":!0,"org.im":!0,"plc.co.im":!0,"tt.im":!0,"tv.im":!0,"in":!0,"co.in":!0,"firm.in":!0,"net.in":!0,"org.in":!0,"gen.in":!0,"ind.in":!0,"nic.in":!0,"ac.in":!0,"edu.in":!0,"res.in":!0,"gov.in":!0,"mil.in":!0,info:!0,"int":!0,"eu.int":!0,io:!0,"com.io":!0,iq:!0,"gov.iq":!0,"edu.iq":!0,"mil.iq":!0,"com.iq":!0,"org.iq":!0,"net.iq":!0,ir:!0,"ac.ir":!0,"co.ir":!0,"gov.ir":!0,"id.ir":!0,"net.ir":!0,"org.ir":!0,"sch.ir":!0,"xn--mgba3a4f16a.ir":!0,"xn--mgba3a4fra.ir":!0,is:!0,"net.is":!0,"com.is":!0,"edu.is":!0,"gov.is":!0,"org.is":!0,"int.is":!0,it:!0,"gov.it":!0,"edu.it":!0,"abr.it":!0,"abruzzo.it":!0,"aosta-valley.it":!0,"aostavalley.it":!0,"bas.it":!0,"basilicata.it":!0,"cal.it":!0,"calabria.it":!0,"cam.it":!0,"campania.it":!0,"emilia-romagna.it":!0,"emiliaromagna.it":!0,"emr.it":!0,"friuli-v-giulia.it":!0,"friuli-ve-giulia.it":!0,"friuli-vegiulia.it":!0,"friuli-venezia-giulia.it":!0,"friuli-veneziagiulia.it":!0,"friuli-vgiulia.it":!0,"friuliv-giulia.it":!0,"friulive-giulia.it":!0,"friulivegiulia.it":!0,"friulivenezia-giulia.it":!0,"friuliveneziagiulia.it":!0,"friulivgiulia.it":!0,"fvg.it":!0,"laz.it":!0,"lazio.it":!0,"lig.it":!0,"liguria.it":!0,"lom.it":!0,"lombardia.it":!0,"lombardy.it":!0,"lucania.it":!0,"mar.it":!0,"marche.it":!0,"mol.it":!0,"molise.it":!0,"piedmont.it":!0,"piemonte.it":!0,"pmn.it":!0,"pug.it":!0,"puglia.it":!0,"sar.it":!0,"sardegna.it":!0,"sardinia.it":!0,"sic.it":!0,"sicilia.it":!0,"sicily.it":!0,"taa.it":!0,"tos.it":!0,"toscana.it":!0,"trentino-a-adige.it":!0,"trentino-aadige.it":!0,"trentino-alto-adige.it":!0,"trentino-altoadige.it":!0,"trentino-s-tirol.it":!0,"trentino-stirol.it":!0,"trentino-sud-tirol.it":!0,"trentino-sudtirol.it":!0,"trentino-sued-tirol.it":!0,"trentino-suedtirol.it":!0,"trentinoa-adige.it":!0,"trentinoaadige.it":!0,"trentinoalto-adige.it":!0,"trentinoaltoadige.it":!0,"trentinos-tirol.it":!0,"trentinostirol.it":!0,"trentinosud-tirol.it":!0,"trentinosudtirol.it":!0,"trentinosued-tirol.it":!0,"trentinosuedtirol.it":!0,"tuscany.it":!0,"umb.it":!0,"umbria.it":!0,"val-d-aosta.it":!0,"val-daosta.it":!0,"vald-aosta.it":!0,"valdaosta.it":!0,"valle-aosta.it":!0,"valle-d-aosta.it":!0,"valle-daosta.it":!0,"valleaosta.it":!0,"valled-aosta.it":!0,"valledaosta.it":!0,"vallee-aoste.it":!0,"valleeaoste.it":!0,"vao.it":!0,"vda.it":!0,"ven.it":!0,"veneto.it":!0,"ag.it":!0,"agrigento.it":!0,"al.it":!0,"alessandria.it":!0,"alto-adige.it":!0,"altoadige.it":!0,"an.it":!0,"ancona.it":!0,"andria-barletta-trani.it":!0,"andria-trani-barletta.it":!0,"andriabarlettatrani.it":!0,"andriatranibarletta.it":!0,"ao.it":!0,"aosta.it":!0,"aoste.it":!0,"ap.it":!0,"aq.it":!0,"aquila.it":!0,"ar.it":!0,"arezzo.it":!0,"ascoli-piceno.it":!0,"ascolipiceno.it":!0,"asti.it":!0,"at.it":!0,"av.it":!0,"avellino.it":!0,"ba.it":!0,"balsan.it":!0,"bari.it":!0,"barletta-trani-andria.it":!0,"barlettatraniandria.it":!0,"belluno.it":!0,"benevento.it":!0,"bergamo.it":!0,"bg.it":!0,"bi.it":!0,"biella.it":!0,"bl.it":!0,"bn.it":!0,"bo.it":!0,"bologna.it":!0,"bolzano.it":!0,"bozen.it":!0,"br.it":!0,"brescia.it":!0,"brindisi.it":!0,"bs.it":!0,"bt.it":!0,"bz.it":!0,"ca.it":!0,"cagliari.it":!0,"caltanissetta.it":!0,"campidano-medio.it":!0,"campidanomedio.it":!0,"campobasso.it":!0,"carbonia-iglesias.it":!0,"carboniaiglesias.it":!0,"carrara-massa.it":!0,"carraramassa.it":!0,"caserta.it":!0,"catania.it":!0,"catanzaro.it":!0,"cb.it":!0,"ce.it":!0,"cesena-forli.it":!0,"cesenaforli.it":!0,"ch.it":!0,"chieti.it":!0,"ci.it":!0,"cl.it":!0,"cn.it":!0,"co.it":!0,"como.it":!0,"cosenza.it":!0,"cr.it":!0,"cremona.it":!0,"crotone.it":!0,"cs.it":!0,"ct.it":!0,"cuneo.it":!0,"cz.it":!0,"dell-ogliastra.it":!0,"dellogliastra.it":!0,"en.it":!0,"enna.it":!0,"fc.it":!0,"fe.it":!0,"fermo.it":!0,"ferrara.it":!0,"fg.it":!0,"fi.it":!0,"firenze.it":!0,"florence.it":!0,"fm.it":!0,"foggia.it":!0,"forli-cesena.it":!0,"forlicesena.it":!0,"fr.it":!0,"frosinone.it":!0,"ge.it":!0,"genoa.it":!0,"genova.it":!0,"go.it":!0,"gorizia.it":!0,"gr.it":!0,"grosseto.it":!0,"iglesias-carbonia.it":!0,"iglesiascarbonia.it":!0,"im.it":!0,"imperia.it":!0,"is.it":!0,"isernia.it":!0,"kr.it":!0,"la-spezia.it":!0,"laquila.it":!0,"laspezia.it":!0,"latina.it":!0,"lc.it":!0,"le.it":!0,"lecce.it":!0,"lecco.it":!0,"li.it":!0,"livorno.it":!0,"lo.it":!0,"lodi.it":!0,"lt.it":!0,"lu.it":!0,"lucca.it":!0,"macerata.it":!0,"mantova.it":!0,"massa-carrara.it":!0,"massacarrara.it":!0,"matera.it":!0,"mb.it":!0,"mc.it":!0,"me.it":!0,"medio-campidano.it":!0,"mediocampidano.it":!0,"messina.it":!0,"mi.it":!0,"milan.it":!0,"milano.it":!0,"mn.it":!0,"mo.it":!0,"modena.it":!0,"monza-brianza.it":!0,"monza-e-della-brianza.it":!0,"monza.it":!0,"monzabrianza.it":!0,"monzaebrianza.it":!0,"monzaedellabrianza.it":!0,"ms.it":!0,"mt.it":!0,"na.it":!0,"naples.it":!0,"napoli.it":!0,"no.it":!0,"novara.it":!0,"nu.it":!0,"nuoro.it":!0,"og.it":!0,"ogliastra.it":!0,"olbia-tempio.it":!0,"olbiatempio.it":!0,"or.it":!0,"oristano.it":!0,"ot.it":!0,"pa.it":!0,"padova.it":!0,"padua.it":!0,"palermo.it":!0,"parma.it":!0,"pavia.it":!0,"pc.it":!0,"pd.it":!0,"pe.it":!0,"perugia.it":!0,"pesaro-urbino.it":!0,"pesarourbino.it":!0,"pescara.it":!0,"pg.it":!0,"pi.it":!0,"piacenza.it":!0,"pisa.it":!0,"pistoia.it":!0,"pn.it":!0,"po.it":!0,"pordenone.it":!0,"potenza.it":!0,"pr.it":!0,"prato.it":!0,"pt.it":!0,"pu.it":!0,"pv.it":!0,"pz.it":!0,"ra.it":!0,"ragusa.it":!0,"ravenna.it":!0,"rc.it":!0,"re.it":!0,"reggio-calabria.it":!0,"reggio-emilia.it":!0,"reggiocalabria.it":!0,"reggioemilia.it":!0,"rg.it":!0,"ri.it":!0,"rieti.it":!0,"rimini.it":!0,"rm.it":!0,"rn.it":!0,"ro.it":!0,"roma.it":!0,"rome.it":!0,"rovigo.it":!0,"sa.it":!0,"salerno.it":!0,"sassari.it":!0,"savona.it":!0,"si.it":!0,"siena.it":!0,"siracusa.it":!0,"so.it":!0,"sondrio.it":!0,"sp.it":!0,"sr.it":!0,"ss.it":!0,"suedtirol.it":!0,"sv.it":!0,"ta.it":!0,"taranto.it":!0,"te.it":!0,"tempio-olbia.it":!0,"tempioolbia.it":!0,"teramo.it":!0,"terni.it":!0,"tn.it":!0,"to.it":!0,"torino.it":!0,"tp.it":!0,"tr.it":!0,"trani-andria-barletta.it":!0,"trani-barletta-andria.it":!0,"traniandriabarletta.it":!0,"tranibarlettaandria.it":!0,"trapani.it":!0,"trentino.it":!0,"trento.it":!0,"treviso.it":!0,"trieste.it":!0,"ts.it":!0,"turin.it":!0,"tv.it":!0,"ud.it":!0,"udine.it":!0,"urbino-pesaro.it":!0,"urbinopesaro.it":!0,"va.it":!0,"varese.it":!0,"vb.it":!0,"vc.it":!0,"ve.it":!0,"venezia.it":!0,"venice.it":!0,"verbania.it":!0,"vercelli.it":!0,"verona.it":!0,"vi.it":!0,"vibo-valentia.it":!0,"vibovalentia.it":!0,"vicenza.it":!0,"viterbo.it":!0,"vr.it":!0,"vs.it":!0,"vt.it":!0,"vv.it":!0,je:!0,"co.je":!0,"net.je":!0,"org.je":!0,"*.jm":!0,jo:!0,"com.jo":!0,"org.jo":!0,"net.jo":!0,"edu.jo":!0,"sch.jo":!0,"gov.jo":!0,"mil.jo":!0,"name.jo":!0,jobs:!0,jp:!0,"ac.jp":!0,"ad.jp":!0,"co.jp":!0,"ed.jp":!0,"go.jp":!0,"gr.jp":!0,"lg.jp":!0,"ne.jp":!0,"or.jp":!0,"aichi.jp":!0,"akita.jp":!0,"aomori.jp":!0,"chiba.jp":!0,"ehime.jp":!0,"fukui.jp":!0,"fukuoka.jp":!0,"fukushima.jp":!0,"gifu.jp":!0,"gunma.jp":!0,"hiroshima.jp":!0,"hokkaido.jp":!0,"hyogo.jp":!0,"ibaraki.jp":!0,"ishikawa.jp":!0,"iwate.jp":!0,"kagawa.jp":!0,"kagoshima.jp":!0,"kanagawa.jp":!0,"kochi.jp":!0,"kumamoto.jp":!0,"kyoto.jp":!0,"mie.jp":!0,"miyagi.jp":!0,"miyazaki.jp":!0,"nagano.jp":!0,"nagasaki.jp":!0,"nara.jp":!0,"niigata.jp":!0,"oita.jp":!0,"okayama.jp":!0,"okinawa.jp":!0,"osaka.jp":!0,"saga.jp":!0,"saitama.jp":!0,"shiga.jp":!0,"shimane.jp":!0,"shizuoka.jp":!0,"tochigi.jp":!0,"tokushima.jp":!0,"tokyo.jp":!0,"tottori.jp":!0,"toyama.jp":!0,"wakayama.jp":!0,"yamagata.jp":!0,"yamaguchi.jp":!0,"yamanashi.jp":!0,"xn--4pvxs.jp":!0,"xn--vgu402c.jp":!0,"xn--c3s14m.jp":!0,"xn--f6qx53a.jp":!0,"xn--8pvr4u.jp":!0,"xn--uist22h.jp":!0,"xn--djrs72d6uy.jp":!0,"xn--mkru45i.jp":!0,"xn--0trq7p7nn.jp":!0,"xn--8ltr62k.jp":!0,"xn--2m4a15e.jp":!0,"xn--efvn9s.jp":!0,"xn--32vp30h.jp":!0,"xn--4it797k.jp":!0,"xn--1lqs71d.jp":!0,"xn--5rtp49c.jp":!0,"xn--5js045d.jp":!0,"xn--ehqz56n.jp":!0,"xn--1lqs03n.jp":!0,"xn--qqqt11m.jp":!0,"xn--kbrq7o.jp":!0,"xn--pssu33l.jp":!0,"xn--ntsq17g.jp":!0,"xn--uisz3g.jp":!0,"xn--6btw5a.jp":!0,"xn--1ctwo.jp":!0,"xn--6orx2r.jp":!0,"xn--rht61e.jp":!0,"xn--rht27z.jp":!0,"xn--djty4k.jp":!0,"xn--nit225k.jp":!0,"xn--rht3d.jp":!0,"xn--klty5x.jp":!0,"xn--kltx9a.jp":!0,"xn--kltp7d.jp":!0,"xn--uuwu58a.jp":!0,"xn--zbx025d.jp":!0,"xn--ntso0iqx3a.jp":!0,"xn--elqq16h.jp":!0,"xn--4it168d.jp":!0,"xn--klt787d.jp":!0,"xn--rny31h.jp":!0,"xn--7t0a264c.jp":!0,"xn--5rtq34k.jp":!0,"xn--k7yn95e.jp":!0,"xn--tor131o.jp":!0,"xn--d5qv7z876c.jp":!0,"*.kawasaki.jp":!0,"*.kitakyushu.jp":!0,"*.kobe.jp":!0,"*.nagoya.jp":!0,"*.sapporo.jp":!0,"*.sendai.jp":!0,"*.yokohama.jp":!0,"city.kawasaki.jp":!1,"city.kitakyushu.jp":!1,"city.kobe.jp":!1,"city.nagoya.jp":!1,"city.sapporo.jp":!1,"city.sendai.jp":!1,"city.yokohama.jp":!1,"aisai.aichi.jp":!0,"ama.aichi.jp":!0,"anjo.aichi.jp":!0,"asuke.aichi.jp":!0,"chiryu.aichi.jp":!0,"chita.aichi.jp":!0,"fuso.aichi.jp":!0,"gamagori.aichi.jp":!0,"handa.aichi.jp":!0,"hazu.aichi.jp":!0,"hekinan.aichi.jp":!0,"higashiura.aichi.jp":!0,"ichinomiya.aichi.jp":!0,"inazawa.aichi.jp":!0,"inuyama.aichi.jp":!0,"isshiki.aichi.jp":!0,"iwakura.aichi.jp":!0,"kanie.aichi.jp":!0,"kariya.aichi.jp":!0,"kasugai.aichi.jp":!0,"kira.aichi.jp":!0,"kiyosu.aichi.jp":!0,"komaki.aichi.jp":!0,"konan.aichi.jp":!0,"kota.aichi.jp":!0,"mihama.aichi.jp":!0,"miyoshi.aichi.jp":!0,"nishio.aichi.jp":!0,"nisshin.aichi.jp":!0,"obu.aichi.jp":!0,"oguchi.aichi.jp":!0,"oharu.aichi.jp":!0,"okazaki.aichi.jp":!0,"owariasahi.aichi.jp":!0,"seto.aichi.jp":!0,"shikatsu.aichi.jp":!0,"shinshiro.aichi.jp":!0,"shitara.aichi.jp":!0,"tahara.aichi.jp":!0,"takahama.aichi.jp":!0,"tobishima.aichi.jp":!0,"toei.aichi.jp":!0,"togo.aichi.jp":!0,"tokai.aichi.jp":!0,"tokoname.aichi.jp":!0,"toyoake.aichi.jp":!0,"toyohashi.aichi.jp":!0,"toyokawa.aichi.jp":!0,"toyone.aichi.jp":!0,"toyota.aichi.jp":!0,"tsushima.aichi.jp":!0,"yatomi.aichi.jp":!0,"akita.akita.jp":!0,"daisen.akita.jp":!0,"fujisato.akita.jp":!0,"gojome.akita.jp":!0,"hachirogata.akita.jp":!0,"happou.akita.jp":!0,"higashinaruse.akita.jp":!0,"honjo.akita.jp":!0,"honjyo.akita.jp":!0,"ikawa.akita.jp":!0,"kamikoani.akita.jp":!0,"kamioka.akita.jp":!0,"katagami.akita.jp":!0,"kazuno.akita.jp":!0,"kitaakita.akita.jp":!0,"kosaka.akita.jp":!0,"kyowa.akita.jp":!0,"misato.akita.jp":!0,"mitane.akita.jp":!0,"moriyoshi.akita.jp":!0,"nikaho.akita.jp":!0,"noshiro.akita.jp":!0,"odate.akita.jp":!0,"oga.akita.jp":!0,"ogata.akita.jp":!0,"semboku.akita.jp":!0,"yokote.akita.jp":!0,"yurihonjo.akita.jp":!0,"aomori.aomori.jp":!0,"gonohe.aomori.jp":!0,"hachinohe.aomori.jp":!0,"hashikami.aomori.jp":!0,"hiranai.aomori.jp":!0,"hirosaki.aomori.jp":!0,"itayanagi.aomori.jp":!0,"kuroishi.aomori.jp":!0,"misawa.aomori.jp":!0,"mutsu.aomori.jp":!0,"nakadomari.aomori.jp":!0,"noheji.aomori.jp":!0,"oirase.aomori.jp":!0,"owani.aomori.jp":!0,"rokunohe.aomori.jp":!0,"sannohe.aomori.jp":!0,"shichinohe.aomori.jp":!0,"shingo.aomori.jp":!0,"takko.aomori.jp":!0,"towada.aomori.jp":!0,"tsugaru.aomori.jp":!0,"tsuruta.aomori.jp":!0,"abiko.chiba.jp":!0,"asahi.chiba.jp":!0,"chonan.chiba.jp":!0,"chosei.chiba.jp":!0,"choshi.chiba.jp":!0,"chuo.chiba.jp":!0,"funabashi.chiba.jp":!0,"futtsu.chiba.jp":!0,"hanamigawa.chiba.jp":!0,"ichihara.chiba.jp":!0,"ichikawa.chiba.jp":!0,"ichinomiya.chiba.jp":!0,"inzai.chiba.jp":!0,"isumi.chiba.jp":!0,"kamagaya.chiba.jp":!0,"kamogawa.chiba.jp":!0,"kashiwa.chiba.jp":!0,"katori.chiba.jp":!0,"katsuura.chiba.jp":!0,"kimitsu.chiba.jp":!0,"kisarazu.chiba.jp":!0,"kozaki.chiba.jp":!0,"kujukuri.chiba.jp":!0,"kyonan.chiba.jp":!0,"matsudo.chiba.jp":!0,"midori.chiba.jp":!0,"mihama.chiba.jp":!0,"minamiboso.chiba.jp":!0,"mobara.chiba.jp":!0,"mutsuzawa.chiba.jp":!0,"nagara.chiba.jp":!0,"nagareyama.chiba.jp":!0,"narashino.chiba.jp":!0,"narita.chiba.jp":!0,"noda.chiba.jp":!0,"oamishirasato.chiba.jp":!0,"omigawa.chiba.jp":!0,"onjuku.chiba.jp":!0,"otaki.chiba.jp":!0,"sakae.chiba.jp":!0,"sakura.chiba.jp":!0,"shimofusa.chiba.jp":!0,"shirako.chiba.jp":!0,"shiroi.chiba.jp":!0,"shisui.chiba.jp":!0,"sodegaura.chiba.jp":!0,"sosa.chiba.jp":!0,"tako.chiba.jp":!0,"tateyama.chiba.jp":!0,"togane.chiba.jp":!0,"tohnosho.chiba.jp":!0,"tomisato.chiba.jp":!0,"urayasu.chiba.jp":!0,"yachimata.chiba.jp":!0,"yachiyo.chiba.jp":!0,"yokaichiba.chiba.jp":!0,"yokoshibahikari.chiba.jp":!0,"yotsukaido.chiba.jp":!0,"ainan.ehime.jp":!0,"honai.ehime.jp":!0,"ikata.ehime.jp":!0,"imabari.ehime.jp":!0,"iyo.ehime.jp":!0,"kamijima.ehime.jp":!0,"kihoku.ehime.jp":!0,"kumakogen.ehime.jp":!0,"masaki.ehime.jp":!0,"matsuno.ehime.jp":!0,"matsuyama.ehime.jp":!0,"namikata.ehime.jp":!0,"niihama.ehime.jp":!0,"ozu.ehime.jp":!0,"saijo.ehime.jp":!0,"seiyo.ehime.jp":!0,"shikokuchuo.ehime.jp":!0,"tobe.ehime.jp":!0,"toon.ehime.jp":!0,"uchiko.ehime.jp":!0,"uwajima.ehime.jp":!0,"yawatahama.ehime.jp":!0,"echizen.fukui.jp":!0,"eiheiji.fukui.jp":!0,"fukui.fukui.jp":!0,"ikeda.fukui.jp":!0,"katsuyama.fukui.jp":!0,"mihama.fukui.jp":!0,"minamiechizen.fukui.jp":!0,"obama.fukui.jp":!0,"ohi.fukui.jp":!0,"ono.fukui.jp":!0,"sabae.fukui.jp":!0,"sakai.fukui.jp":!0,"takahama.fukui.jp":!0,"tsuruga.fukui.jp":!0,"wakasa.fukui.jp":!0,"ashiya.fukuoka.jp":!0,"buzen.fukuoka.jp":!0,"chikugo.fukuoka.jp":!0,"chikuho.fukuoka.jp":!0,"chikujo.fukuoka.jp":!0,"chikushino.fukuoka.jp":!0,"chikuzen.fukuoka.jp":!0,"chuo.fukuoka.jp":!0,"dazaifu.fukuoka.jp":!0,"fukuchi.fukuoka.jp":!0,"hakata.fukuoka.jp":!0,"higashi.fukuoka.jp":!0,"hirokawa.fukuoka.jp":!0,"hisayama.fukuoka.jp":!0,"iizuka.fukuoka.jp":!0,"inatsuki.fukuoka.jp":!0,"kaho.fukuoka.jp":!0,"kasuga.fukuoka.jp":!0,"kasuya.fukuoka.jp":!0,"kawara.fukuoka.jp":!0,"keisen.fukuoka.jp":!0,"koga.fukuoka.jp":!0,"kurate.fukuoka.jp":!0,"kurogi.fukuoka.jp":!0,"kurume.fukuoka.jp":!0,"minami.fukuoka.jp":!0,"miyako.fukuoka.jp":!0,"miyama.fukuoka.jp":!0,"miyawaka.fukuoka.jp":!0,"mizumaki.fukuoka.jp":!0,"munakata.fukuoka.jp":!0,"nakagawa.fukuoka.jp":!0,"nakama.fukuoka.jp":!0,"nishi.fukuoka.jp":!0,"nogata.fukuoka.jp":!0,"ogori.fukuoka.jp":!0,"okagaki.fukuoka.jp":!0,"okawa.fukuoka.jp":!0,"oki.fukuoka.jp":!0,"omuta.fukuoka.jp":!0,"onga.fukuoka.jp":!0,"onojo.fukuoka.jp":!0,"oto.fukuoka.jp":!0,"saigawa.fukuoka.jp":!0,"sasaguri.fukuoka.jp":!0,"shingu.fukuoka.jp":!0,"shinyoshitomi.fukuoka.jp":!0,"shonai.fukuoka.jp":!0,"soeda.fukuoka.jp":!0,"sue.fukuoka.jp":!0,"tachiarai.fukuoka.jp":!0,"tagawa.fukuoka.jp":!0,"takata.fukuoka.jp":!0,"toho.fukuoka.jp":!0,"toyotsu.fukuoka.jp":!0,"tsuiki.fukuoka.jp":!0,"ukiha.fukuoka.jp":!0,"umi.fukuoka.jp":!0,"usui.fukuoka.jp":!0,"yamada.fukuoka.jp":!0,"yame.fukuoka.jp":!0,"yanagawa.fukuoka.jp":!0,"yukuhashi.fukuoka.jp":!0,"aizubange.fukushima.jp":!0,"aizumisato.fukushima.jp":!0,"aizuwakamatsu.fukushima.jp":!0,"asakawa.fukushima.jp":!0,"bandai.fukushima.jp":!0,"date.fukushima.jp":!0,"fukushima.fukushima.jp":!0,"furudono.fukushima.jp":!0,"futaba.fukushima.jp":!0,"hanawa.fukushima.jp":!0,"higashi.fukushima.jp":!0,"hirata.fukushima.jp":!0,"hirono.fukushima.jp":!0,"iitate.fukushima.jp":!0,"inawashiro.fukushima.jp":!0,"ishikawa.fukushima.jp":!0,"iwaki.fukushima.jp":!0,"izumizaki.fukushima.jp":!0,"kagamiishi.fukushima.jp":!0,"kaneyama.fukushima.jp":!0,"kawamata.fukushima.jp":!0,"kitakata.fukushima.jp":!0,"kitashiobara.fukushima.jp":!0,"koori.fukushima.jp":!0,"koriyama.fukushima.jp":!0,"kunimi.fukushima.jp":!0,"miharu.fukushima.jp":!0,"mishima.fukushima.jp":!0,"namie.fukushima.jp":!0,"nango.fukushima.jp":!0,"nishiaizu.fukushima.jp":!0,"nishigo.fukushima.jp":!0,"okuma.fukushima.jp":!0,"omotego.fukushima.jp":!0,"ono.fukushima.jp":!0,"otama.fukushima.jp":!0,"samegawa.fukushima.jp":!0,"shimogo.fukushima.jp":!0,"shirakawa.fukushima.jp":!0,"showa.fukushima.jp":!0,"soma.fukushima.jp":!0,"sukagawa.fukushima.jp":!0,"taishin.fukushima.jp":!0,"tamakawa.fukushima.jp":!0,"tanagura.fukushima.jp":!0,"tenei.fukushima.jp":!0,"yabuki.fukushima.jp":!0,"yamato.fukushima.jp":!0,"yamatsuri.fukushima.jp":!0,"yanaizu.fukushima.jp":!0,"yugawa.fukushima.jp":!0,"anpachi.gifu.jp":!0,"ena.gifu.jp":!0,"gifu.gifu.jp":!0,"ginan.gifu.jp":!0,"godo.gifu.jp":!0,"gujo.gifu.jp":!0,"hashima.gifu.jp":!0,"hichiso.gifu.jp":!0,"hida.gifu.jp":!0,"higashishirakawa.gifu.jp":!0,"ibigawa.gifu.jp":!0,"ikeda.gifu.jp":!0,"kakamigahara.gifu.jp":!0,"kani.gifu.jp":!0,"kasahara.gifu.jp":!0,"kasamatsu.gifu.jp":!0,"kawaue.gifu.jp":!0,"kitagata.gifu.jp":!0,"mino.gifu.jp":!0,"minokamo.gifu.jp":!0,"mitake.gifu.jp":!0,"mizunami.gifu.jp":!0,"motosu.gifu.jp":!0,"nakatsugawa.gifu.jp":!0,"ogaki.gifu.jp":!0,"sakahogi.gifu.jp":!0,"seki.gifu.jp":!0,"sekigahara.gifu.jp":!0,"shirakawa.gifu.jp":!0,"tajimi.gifu.jp":!0,"takayama.gifu.jp":!0,"tarui.gifu.jp":!0,"toki.gifu.jp":!0,"tomika.gifu.jp":!0,"wanouchi.gifu.jp":!0,"yamagata.gifu.jp":!0,"yaotsu.gifu.jp":!0,"yoro.gifu.jp":!0,"annaka.gunma.jp":!0,"chiyoda.gunma.jp":!0,"fujioka.gunma.jp":!0,"higashiagatsuma.gunma.jp":!0,"isesaki.gunma.jp":!0,"itakura.gunma.jp":!0,"kanna.gunma.jp":!0,"kanra.gunma.jp":!0,"katashina.gunma.jp":!0,"kawaba.gunma.jp":!0,"kiryu.gunma.jp":!0,"kusatsu.gunma.jp":!0,"maebashi.gunma.jp":!0,"meiwa.gunma.jp":!0,"midori.gunma.jp":!0,"minakami.gunma.jp":!0,"naganohara.gunma.jp":!0,"nakanojo.gunma.jp":!0,"nanmoku.gunma.jp":!0,"numata.gunma.jp":!0,"oizumi.gunma.jp":!0,"ora.gunma.jp":!0,"ota.gunma.jp":!0,"shibukawa.gunma.jp":!0,"shimonita.gunma.jp":!0,"shinto.gunma.jp":!0,"showa.gunma.jp":!0,"takasaki.gunma.jp":!0,"takayama.gunma.jp":!0,"tamamura.gunma.jp":!0,"tatebayashi.gunma.jp":!0,"tomioka.gunma.jp":!0,"tsukiyono.gunma.jp":!0,"tsumagoi.gunma.jp":!0,"ueno.gunma.jp":!0,"yoshioka.gunma.jp":!0,"asaminami.hiroshima.jp":!0,"daiwa.hiroshima.jp":!0,"etajima.hiroshima.jp":!0,"fuchu.hiroshima.jp":!0,"fukuyama.hiroshima.jp":!0,"hatsukaichi.hiroshima.jp":!0,"higashihiroshima.hiroshima.jp":!0,"hongo.hiroshima.jp":!0,"jinsekikogen.hiroshima.jp":!0,"kaita.hiroshima.jp":!0,"kui.hiroshima.jp":!0,"kumano.hiroshima.jp":!0,"kure.hiroshima.jp":!0,"mihara.hiroshima.jp":!0,"miyoshi.hiroshima.jp":!0,"naka.hiroshima.jp":!0,"onomichi.hiroshima.jp":!0,"osakikamijima.hiroshima.jp":!0,"otake.hiroshima.jp":!0,"saka.hiroshima.jp":!0,"sera.hiroshima.jp":!0,"seranishi.hiroshima.jp":!0,"shinichi.hiroshima.jp":!0,"shobara.hiroshima.jp":!0,"takehara.hiroshima.jp":!0,"abashiri.hokkaido.jp":!0,"abira.hokkaido.jp":!0,"aibetsu.hokkaido.jp":!0,"akabira.hokkaido.jp":!0,"akkeshi.hokkaido.jp":!0,"asahikawa.hokkaido.jp":!0,"ashibetsu.hokkaido.jp":!0,"ashoro.hokkaido.jp":!0,"assabu.hokkaido.jp":!0,"atsuma.hokkaido.jp":!0,"bibai.hokkaido.jp":!0,"biei.hokkaido.jp":!0,"bifuka.hokkaido.jp":!0,"bihoro.hokkaido.jp":!0,"biratori.hokkaido.jp":!0,"chippubetsu.hokkaido.jp":!0,"chitose.hokkaido.jp":!0,"date.hokkaido.jp":!0,"ebetsu.hokkaido.jp":!0,"embetsu.hokkaido.jp":!0,"eniwa.hokkaido.jp":!0,"erimo.hokkaido.jp":!0,"esan.hokkaido.jp":!0,"esashi.hokkaido.jp":!0,"fukagawa.hokkaido.jp":!0,"fukushima.hokkaido.jp":!0,"furano.hokkaido.jp":!0,"furubira.hokkaido.jp":!0,"haboro.hokkaido.jp":!0,"hakodate.hokkaido.jp":!0,"hamatonbetsu.hokkaido.jp":!0,"hidaka.hokkaido.jp":!0,"higashikagura.hokkaido.jp":!0,"higashikawa.hokkaido.jp":!0,"hiroo.hokkaido.jp":!0,"hokuryu.hokkaido.jp":!0,"hokuto.hokkaido.jp":!0,"honbetsu.hokkaido.jp":!0,"horokanai.hokkaido.jp":!0,"horonobe.hokkaido.jp":!0,"ikeda.hokkaido.jp":!0,"imakane.hokkaido.jp":!0,"ishikari.hokkaido.jp":!0,"iwamizawa.hokkaido.jp":!0,"iwanai.hokkaido.jp":!0,"kamifurano.hokkaido.jp":!0,"kamikawa.hokkaido.jp":!0,"kamishihoro.hokkaido.jp":!0,"kamisunagawa.hokkaido.jp":!0,"kamoenai.hokkaido.jp":!0,"kayabe.hokkaido.jp":!0,"kembuchi.hokkaido.jp":!0,"kikonai.hokkaido.jp":!0,"kimobetsu.hokkaido.jp":!0,"kitahiroshima.hokkaido.jp":!0,"kitami.hokkaido.jp":!0,"kiyosato.hokkaido.jp":!0,"koshimizu.hokkaido.jp":!0,"kunneppu.hokkaido.jp":!0,"kuriyama.hokkaido.jp":!0,"kuromatsunai.hokkaido.jp":!0,"kushiro.hokkaido.jp":!0,"kutchan.hokkaido.jp":!0,"kyowa.hokkaido.jp":!0,"mashike.hokkaido.jp":!0,"matsumae.hokkaido.jp":!0,"mikasa.hokkaido.jp":!0,"minamifurano.hokkaido.jp":!0,"mombetsu.hokkaido.jp":!0,"moseushi.hokkaido.jp":!0,"mukawa.hokkaido.jp":!0,"muroran.hokkaido.jp":!0,"naie.hokkaido.jp":!0,"nakagawa.hokkaido.jp":!0,"nakasatsunai.hokkaido.jp":!0,"nakatombetsu.hokkaido.jp":!0,"nanae.hokkaido.jp":!0,"nanporo.hokkaido.jp":!0,"nayoro.hokkaido.jp":!0,"nemuro.hokkaido.jp":!0,"niikappu.hokkaido.jp":!0,"niki.hokkaido.jp":!0,"nishiokoppe.hokkaido.jp":!0,"noboribetsu.hokkaido.jp":!0,"numata.hokkaido.jp":!0,"obihiro.hokkaido.jp":!0,"obira.hokkaido.jp":!0,"oketo.hokkaido.jp":!0,"okoppe.hokkaido.jp":!0,"otaru.hokkaido.jp":!0,"otobe.hokkaido.jp":!0,"otofuke.hokkaido.jp":!0,"otoineppu.hokkaido.jp":!0,"oumu.hokkaido.jp":!0,"ozora.hokkaido.jp":!0,"pippu.hokkaido.jp":!0,"rankoshi.hokkaido.jp":!0,"rebun.hokkaido.jp":!0,"rikubetsu.hokkaido.jp":!0,"rishiri.hokkaido.jp":!0,"rishirifuji.hokkaido.jp":!0,"saroma.hokkaido.jp":!0,"sarufutsu.hokkaido.jp":!0,"shakotan.hokkaido.jp":!0,"shari.hokkaido.jp":!0,"shibecha.hokkaido.jp":!0,"shibetsu.hokkaido.jp":!0,"shikabe.hokkaido.jp":!0,"shikaoi.hokkaido.jp":!0,"shimamaki.hokkaido.jp":!0,"shimizu.hokkaido.jp":!0,"shimokawa.hokkaido.jp":!0,"shinshinotsu.hokkaido.jp":!0,"shintoku.hokkaido.jp":!0,"shiranuka.hokkaido.jp":!0,"shiraoi.hokkaido.jp":!0,"shiriuchi.hokkaido.jp":!0,"sobetsu.hokkaido.jp":!0,"sunagawa.hokkaido.jp":!0,"taiki.hokkaido.jp":!0,"takasu.hokkaido.jp":!0,"takikawa.hokkaido.jp":!0,
    "takinoue.hokkaido.jp":!0,"teshikaga.hokkaido.jp":!0,"tobetsu.hokkaido.jp":!0,"tohma.hokkaido.jp":!0,"tomakomai.hokkaido.jp":!0,"tomari.hokkaido.jp":!0,"toya.hokkaido.jp":!0,"toyako.hokkaido.jp":!0,"toyotomi.hokkaido.jp":!0,"toyoura.hokkaido.jp":!0,"tsubetsu.hokkaido.jp":!0,"tsukigata.hokkaido.jp":!0,"urakawa.hokkaido.jp":!0,"urausu.hokkaido.jp":!0,"uryu.hokkaido.jp":!0,"utashinai.hokkaido.jp":!0,"wakkanai.hokkaido.jp":!0,"wassamu.hokkaido.jp":!0,"yakumo.hokkaido.jp":!0,"yoichi.hokkaido.jp":!0,"aioi.hyogo.jp":!0,"akashi.hyogo.jp":!0,"ako.hyogo.jp":!0,"amagasaki.hyogo.jp":!0,"aogaki.hyogo.jp":!0,"asago.hyogo.jp":!0,"ashiya.hyogo.jp":!0,"awaji.hyogo.jp":!0,"fukusaki.hyogo.jp":!0,"goshiki.hyogo.jp":!0,"harima.hyogo.jp":!0,"himeji.hyogo.jp":!0,"ichikawa.hyogo.jp":!0,"inagawa.hyogo.jp":!0,"itami.hyogo.jp":!0,"kakogawa.hyogo.jp":!0,"kamigori.hyogo.jp":!0,"kamikawa.hyogo.jp":!0,"kasai.hyogo.jp":!0,"kasuga.hyogo.jp":!0,"kawanishi.hyogo.jp":!0,"miki.hyogo.jp":!0,"minamiawaji.hyogo.jp":!0,"nishinomiya.hyogo.jp":!0,"nishiwaki.hyogo.jp":!0,"ono.hyogo.jp":!0,"sanda.hyogo.jp":!0,"sannan.hyogo.jp":!0,"sasayama.hyogo.jp":!0,"sayo.hyogo.jp":!0,"shingu.hyogo.jp":!0,"shinonsen.hyogo.jp":!0,"shiso.hyogo.jp":!0,"sumoto.hyogo.jp":!0,"taishi.hyogo.jp":!0,"taka.hyogo.jp":!0,"takarazuka.hyogo.jp":!0,"takasago.hyogo.jp":!0,"takino.hyogo.jp":!0,"tamba.hyogo.jp":!0,"tatsuno.hyogo.jp":!0,"toyooka.hyogo.jp":!0,"yabu.hyogo.jp":!0,"yashiro.hyogo.jp":!0,"yoka.hyogo.jp":!0,"yokawa.hyogo.jp":!0,"ami.ibaraki.jp":!0,"asahi.ibaraki.jp":!0,"bando.ibaraki.jp":!0,"chikusei.ibaraki.jp":!0,"daigo.ibaraki.jp":!0,"fujishiro.ibaraki.jp":!0,"hitachi.ibaraki.jp":!0,"hitachinaka.ibaraki.jp":!0,"hitachiomiya.ibaraki.jp":!0,"hitachiota.ibaraki.jp":!0,"ibaraki.ibaraki.jp":!0,"ina.ibaraki.jp":!0,"inashiki.ibaraki.jp":!0,"itako.ibaraki.jp":!0,"iwama.ibaraki.jp":!0,"joso.ibaraki.jp":!0,"kamisu.ibaraki.jp":!0,"kasama.ibaraki.jp":!0,"kashima.ibaraki.jp":!0,"kasumigaura.ibaraki.jp":!0,"koga.ibaraki.jp":!0,"miho.ibaraki.jp":!0,"mito.ibaraki.jp":!0,"moriya.ibaraki.jp":!0,"naka.ibaraki.jp":!0,"namegata.ibaraki.jp":!0,"oarai.ibaraki.jp":!0,"ogawa.ibaraki.jp":!0,"omitama.ibaraki.jp":!0,"ryugasaki.ibaraki.jp":!0,"sakai.ibaraki.jp":!0,"sakuragawa.ibaraki.jp":!0,"shimodate.ibaraki.jp":!0,"shimotsuma.ibaraki.jp":!0,"shirosato.ibaraki.jp":!0,"sowa.ibaraki.jp":!0,"suifu.ibaraki.jp":!0,"takahagi.ibaraki.jp":!0,"tamatsukuri.ibaraki.jp":!0,"tokai.ibaraki.jp":!0,"tomobe.ibaraki.jp":!0,"tone.ibaraki.jp":!0,"toride.ibaraki.jp":!0,"tsuchiura.ibaraki.jp":!0,"tsukuba.ibaraki.jp":!0,"uchihara.ibaraki.jp":!0,"ushiku.ibaraki.jp":!0,"yachiyo.ibaraki.jp":!0,"yamagata.ibaraki.jp":!0,"yawara.ibaraki.jp":!0,"yuki.ibaraki.jp":!0,"anamizu.ishikawa.jp":!0,"hakui.ishikawa.jp":!0,"hakusan.ishikawa.jp":!0,"kaga.ishikawa.jp":!0,"kahoku.ishikawa.jp":!0,"kanazawa.ishikawa.jp":!0,"kawakita.ishikawa.jp":!0,"komatsu.ishikawa.jp":!0,"nakanoto.ishikawa.jp":!0,"nanao.ishikawa.jp":!0,"nomi.ishikawa.jp":!0,"nonoichi.ishikawa.jp":!0,"noto.ishikawa.jp":!0,"shika.ishikawa.jp":!0,"suzu.ishikawa.jp":!0,"tsubata.ishikawa.jp":!0,"tsurugi.ishikawa.jp":!0,"uchinada.ishikawa.jp":!0,"wajima.ishikawa.jp":!0,"fudai.iwate.jp":!0,"fujisawa.iwate.jp":!0,"hanamaki.iwate.jp":!0,"hiraizumi.iwate.jp":!0,"hirono.iwate.jp":!0,"ichinohe.iwate.jp":!0,"ichinoseki.iwate.jp":!0,"iwaizumi.iwate.jp":!0,"iwate.iwate.jp":!0,"joboji.iwate.jp":!0,"kamaishi.iwate.jp":!0,"kanegasaki.iwate.jp":!0,"karumai.iwate.jp":!0,"kawai.iwate.jp":!0,"kitakami.iwate.jp":!0,"kuji.iwate.jp":!0,"kunohe.iwate.jp":!0,"kuzumaki.iwate.jp":!0,"miyako.iwate.jp":!0,"mizusawa.iwate.jp":!0,"morioka.iwate.jp":!0,"ninohe.iwate.jp":!0,"noda.iwate.jp":!0,"ofunato.iwate.jp":!0,"oshu.iwate.jp":!0,"otsuchi.iwate.jp":!0,"rikuzentakata.iwate.jp":!0,"shiwa.iwate.jp":!0,"shizukuishi.iwate.jp":!0,"sumita.iwate.jp":!0,"tanohata.iwate.jp":!0,"tono.iwate.jp":!0,"yahaba.iwate.jp":!0,"yamada.iwate.jp":!0,"ayagawa.kagawa.jp":!0,"higashikagawa.kagawa.jp":!0,"kanonji.kagawa.jp":!0,"kotohira.kagawa.jp":!0,"manno.kagawa.jp":!0,"marugame.kagawa.jp":!0,"mitoyo.kagawa.jp":!0,"naoshima.kagawa.jp":!0,"sanuki.kagawa.jp":!0,"tadotsu.kagawa.jp":!0,"takamatsu.kagawa.jp":!0,"tonosho.kagawa.jp":!0,"uchinomi.kagawa.jp":!0,"utazu.kagawa.jp":!0,"zentsuji.kagawa.jp":!0,"akune.kagoshima.jp":!0,"amami.kagoshima.jp":!0,"hioki.kagoshima.jp":!0,"isa.kagoshima.jp":!0,"isen.kagoshima.jp":!0,"izumi.kagoshima.jp":!0,"kagoshima.kagoshima.jp":!0,"kanoya.kagoshima.jp":!0,"kawanabe.kagoshima.jp":!0,"kinko.kagoshima.jp":!0,"kouyama.kagoshima.jp":!0,"makurazaki.kagoshima.jp":!0,"matsumoto.kagoshima.jp":!0,"minamitane.kagoshima.jp":!0,"nakatane.kagoshima.jp":!0,"nishinoomote.kagoshima.jp":!0,"satsumasendai.kagoshima.jp":!0,"soo.kagoshima.jp":!0,"tarumizu.kagoshima.jp":!0,"yusui.kagoshima.jp":!0,"aikawa.kanagawa.jp":!0,"atsugi.kanagawa.jp":!0,"ayase.kanagawa.jp":!0,"chigasaki.kanagawa.jp":!0,"ebina.kanagawa.jp":!0,"fujisawa.kanagawa.jp":!0,"hadano.kanagawa.jp":!0,"hakone.kanagawa.jp":!0,"hiratsuka.kanagawa.jp":!0,"isehara.kanagawa.jp":!0,"kaisei.kanagawa.jp":!0,"kamakura.kanagawa.jp":!0,"kiyokawa.kanagawa.jp":!0,"matsuda.kanagawa.jp":!0,"minamiashigara.kanagawa.jp":!0,"miura.kanagawa.jp":!0,"nakai.kanagawa.jp":!0,"ninomiya.kanagawa.jp":!0,"odawara.kanagawa.jp":!0,"oi.kanagawa.jp":!0,"oiso.kanagawa.jp":!0,"sagamihara.kanagawa.jp":!0,"samukawa.kanagawa.jp":!0,"tsukui.kanagawa.jp":!0,"yamakita.kanagawa.jp":!0,"yamato.kanagawa.jp":!0,"yokosuka.kanagawa.jp":!0,"yugawara.kanagawa.jp":!0,"zama.kanagawa.jp":!0,"zushi.kanagawa.jp":!0,"aki.kochi.jp":!0,"geisei.kochi.jp":!0,"hidaka.kochi.jp":!0,"higashitsuno.kochi.jp":!0,"ino.kochi.jp":!0,"kagami.kochi.jp":!0,"kami.kochi.jp":!0,"kitagawa.kochi.jp":!0,"kochi.kochi.jp":!0,"mihara.kochi.jp":!0,"motoyama.kochi.jp":!0,"muroto.kochi.jp":!0,"nahari.kochi.jp":!0,"nakamura.kochi.jp":!0,"nankoku.kochi.jp":!0,"nishitosa.kochi.jp":!0,"niyodogawa.kochi.jp":!0,"ochi.kochi.jp":!0,"okawa.kochi.jp":!0,"otoyo.kochi.jp":!0,"otsuki.kochi.jp":!0,"sakawa.kochi.jp":!0,"sukumo.kochi.jp":!0,"susaki.kochi.jp":!0,"tosa.kochi.jp":!0,"tosashimizu.kochi.jp":!0,"toyo.kochi.jp":!0,"tsuno.kochi.jp":!0,"umaji.kochi.jp":!0,"yasuda.kochi.jp":!0,"yusuhara.kochi.jp":!0,"amakusa.kumamoto.jp":!0,"arao.kumamoto.jp":!0,"aso.kumamoto.jp":!0,"choyo.kumamoto.jp":!0,"gyokuto.kumamoto.jp":!0,"hitoyoshi.kumamoto.jp":!0,"kamiamakusa.kumamoto.jp":!0,"kashima.kumamoto.jp":!0,"kikuchi.kumamoto.jp":!0,"kosa.kumamoto.jp":!0,"kumamoto.kumamoto.jp":!0,"mashiki.kumamoto.jp":!0,"mifune.kumamoto.jp":!0,"minamata.kumamoto.jp":!0,"minamioguni.kumamoto.jp":!0,"nagasu.kumamoto.jp":!0,"nishihara.kumamoto.jp":!0,"oguni.kumamoto.jp":!0,"ozu.kumamoto.jp":!0,"sumoto.kumamoto.jp":!0,"takamori.kumamoto.jp":!0,"uki.kumamoto.jp":!0,"uto.kumamoto.jp":!0,"yamaga.kumamoto.jp":!0,"yamato.kumamoto.jp":!0,"yatsushiro.kumamoto.jp":!0,"ayabe.kyoto.jp":!0,"fukuchiyama.kyoto.jp":!0,"higashiyama.kyoto.jp":!0,"ide.kyoto.jp":!0,"ine.kyoto.jp":!0,"joyo.kyoto.jp":!0,"kameoka.kyoto.jp":!0,"kamo.kyoto.jp":!0,"kita.kyoto.jp":!0,"kizu.kyoto.jp":!0,"kumiyama.kyoto.jp":!0,"kyotamba.kyoto.jp":!0,"kyotanabe.kyoto.jp":!0,"kyotango.kyoto.jp":!0,"maizuru.kyoto.jp":!0,"minami.kyoto.jp":!0,"minamiyamashiro.kyoto.jp":!0,"miyazu.kyoto.jp":!0,"muko.kyoto.jp":!0,"nagaokakyo.kyoto.jp":!0,"nakagyo.kyoto.jp":!0,"nantan.kyoto.jp":!0,"oyamazaki.kyoto.jp":!0,"sakyo.kyoto.jp":!0,"seika.kyoto.jp":!0,"tanabe.kyoto.jp":!0,"uji.kyoto.jp":!0,"ujitawara.kyoto.jp":!0,"wazuka.kyoto.jp":!0,"yamashina.kyoto.jp":!0,"yawata.kyoto.jp":!0,"asahi.mie.jp":!0,"inabe.mie.jp":!0,"ise.mie.jp":!0,"kameyama.mie.jp":!0,"kawagoe.mie.jp":!0,"kiho.mie.jp":!0,"kisosaki.mie.jp":!0,"kiwa.mie.jp":!0,"komono.mie.jp":!0,"kumano.mie.jp":!0,"kuwana.mie.jp":!0,"matsusaka.mie.jp":!0,"meiwa.mie.jp":!0,"mihama.mie.jp":!0,"minamiise.mie.jp":!0,"misugi.mie.jp":!0,"miyama.mie.jp":!0,"nabari.mie.jp":!0,"shima.mie.jp":!0,"suzuka.mie.jp":!0,"tado.mie.jp":!0,"taiki.mie.jp":!0,"taki.mie.jp":!0,"tamaki.mie.jp":!0,"toba.mie.jp":!0,"tsu.mie.jp":!0,"udono.mie.jp":!0,"ureshino.mie.jp":!0,"watarai.mie.jp":!0,"yokkaichi.mie.jp":!0,"furukawa.miyagi.jp":!0,"higashimatsushima.miyagi.jp":!0,"ishinomaki.miyagi.jp":!0,"iwanuma.miyagi.jp":!0,"kakuda.miyagi.jp":!0,"kami.miyagi.jp":!0,"kawasaki.miyagi.jp":!0,"kesennuma.miyagi.jp":!0,"marumori.miyagi.jp":!0,"matsushima.miyagi.jp":!0,"minamisanriku.miyagi.jp":!0,"misato.miyagi.jp":!0,"murata.miyagi.jp":!0,"natori.miyagi.jp":!0,"ogawara.miyagi.jp":!0,"ohira.miyagi.jp":!0,"onagawa.miyagi.jp":!0,"osaki.miyagi.jp":!0,"rifu.miyagi.jp":!0,"semine.miyagi.jp":!0,"shibata.miyagi.jp":!0,"shichikashuku.miyagi.jp":!0,"shikama.miyagi.jp":!0,"shiogama.miyagi.jp":!0,"shiroishi.miyagi.jp":!0,"tagajo.miyagi.jp":!0,"taiwa.miyagi.jp":!0,"tome.miyagi.jp":!0,"tomiya.miyagi.jp":!0,"wakuya.miyagi.jp":!0,"watari.miyagi.jp":!0,"yamamoto.miyagi.jp":!0,"zao.miyagi.jp":!0,"aya.miyazaki.jp":!0,"ebino.miyazaki.jp":!0,"gokase.miyazaki.jp":!0,"hyuga.miyazaki.jp":!0,"kadogawa.miyazaki.jp":!0,"kawaminami.miyazaki.jp":!0,"kijo.miyazaki.jp":!0,"kitagawa.miyazaki.jp":!0,"kitakata.miyazaki.jp":!0,"kitaura.miyazaki.jp":!0,"kobayashi.miyazaki.jp":!0,"kunitomi.miyazaki.jp":!0,"kushima.miyazaki.jp":!0,"mimata.miyazaki.jp":!0,"miyakonojo.miyazaki.jp":!0,"miyazaki.miyazaki.jp":!0,"morotsuka.miyazaki.jp":!0,"nichinan.miyazaki.jp":!0,"nishimera.miyazaki.jp":!0,"nobeoka.miyazaki.jp":!0,"saito.miyazaki.jp":!0,"shiiba.miyazaki.jp":!0,"shintomi.miyazaki.jp":!0,"takaharu.miyazaki.jp":!0,"takanabe.miyazaki.jp":!0,"takazaki.miyazaki.jp":!0,"tsuno.miyazaki.jp":!0,"achi.nagano.jp":!0,"agematsu.nagano.jp":!0,"anan.nagano.jp":!0,"aoki.nagano.jp":!0,"asahi.nagano.jp":!0,"azumino.nagano.jp":!0,"chikuhoku.nagano.jp":!0,"chikuma.nagano.jp":!0,"chino.nagano.jp":!0,"fujimi.nagano.jp":!0,"hakuba.nagano.jp":!0,"hara.nagano.jp":!0,"hiraya.nagano.jp":!0,"iida.nagano.jp":!0,"iijima.nagano.jp":!0,"iiyama.nagano.jp":!0,"iizuna.nagano.jp":!0,"ikeda.nagano.jp":!0,"ikusaka.nagano.jp":!0,"ina.nagano.jp":!0,"karuizawa.nagano.jp":!0,"kawakami.nagano.jp":!0,"kiso.nagano.jp":!0,"kisofukushima.nagano.jp":!0,"kitaaiki.nagano.jp":!0,"komagane.nagano.jp":!0,"komoro.nagano.jp":!0,"matsukawa.nagano.jp":!0,"matsumoto.nagano.jp":!0,"miasa.nagano.jp":!0,"minamiaiki.nagano.jp":!0,"minamimaki.nagano.jp":!0,"minamiminowa.nagano.jp":!0,"minowa.nagano.jp":!0,"miyada.nagano.jp":!0,"miyota.nagano.jp":!0,"mochizuki.nagano.jp":!0,"nagano.nagano.jp":!0,"nagawa.nagano.jp":!0,"nagiso.nagano.jp":!0,"nakagawa.nagano.jp":!0,"nakano.nagano.jp":!0,"nozawaonsen.nagano.jp":!0,"obuse.nagano.jp":!0,"ogawa.nagano.jp":!0,"okaya.nagano.jp":!0,"omachi.nagano.jp":!0,"omi.nagano.jp":!0,"ookuwa.nagano.jp":!0,"ooshika.nagano.jp":!0,"otaki.nagano.jp":!0,"otari.nagano.jp":!0,"sakae.nagano.jp":!0,"sakaki.nagano.jp":!0,"saku.nagano.jp":!0,"sakuho.nagano.jp":!0,"shimosuwa.nagano.jp":!0,"shinanomachi.nagano.jp":!0,"shiojiri.nagano.jp":!0,"suwa.nagano.jp":!0,"suzaka.nagano.jp":!0,"takagi.nagano.jp":!0,"takamori.nagano.jp":!0,"takayama.nagano.jp":!0,"tateshina.nagano.jp":!0,"tatsuno.nagano.jp":!0,"togakushi.nagano.jp":!0,"togura.nagano.jp":!0,"tomi.nagano.jp":!0,"ueda.nagano.jp":!0,"wada.nagano.jp":!0,"yamagata.nagano.jp":!0,"yamanouchi.nagano.jp":!0,"yasaka.nagano.jp":!0,"yasuoka.nagano.jp":!0,"chijiwa.nagasaki.jp":!0,"futsu.nagasaki.jp":!0,"goto.nagasaki.jp":!0,"hasami.nagasaki.jp":!0,"hirado.nagasaki.jp":!0,"iki.nagasaki.jp":!0,"isahaya.nagasaki.jp":!0,"kawatana.nagasaki.jp":!0,"kuchinotsu.nagasaki.jp":!0,"matsuura.nagasaki.jp":!0,"nagasaki.nagasaki.jp":!0,"obama.nagasaki.jp":!0,"omura.nagasaki.jp":!0,"oseto.nagasaki.jp":!0,"saikai.nagasaki.jp":!0,"sasebo.nagasaki.jp":!0,"seihi.nagasaki.jp":!0,"shimabara.nagasaki.jp":!0,"shinkamigoto.nagasaki.jp":!0,"togitsu.nagasaki.jp":!0,"tsushima.nagasaki.jp":!0,"unzen.nagasaki.jp":!0,"ando.nara.jp":!0,"gose.nara.jp":!0,"heguri.nara.jp":!0,"higashiyoshino.nara.jp":!0,"ikaruga.nara.jp":!0,"ikoma.nara.jp":!0,"kamikitayama.nara.jp":!0,"kanmaki.nara.jp":!0,"kashiba.nara.jp":!0,"kashihara.nara.jp":!0,"katsuragi.nara.jp":!0,"kawai.nara.jp":!0,"kawakami.nara.jp":!0,"kawanishi.nara.jp":!0,"koryo.nara.jp":!0,"kurotaki.nara.jp":!0,"mitsue.nara.jp":!0,"miyake.nara.jp":!0,"nara.nara.jp":!0,"nosegawa.nara.jp":!0,"oji.nara.jp":!0,"ouda.nara.jp":!0,"oyodo.nara.jp":!0,"sakurai.nara.jp":!0,"sango.nara.jp":!0,"shimoichi.nara.jp":!0,"shimokitayama.nara.jp":!0,"shinjo.nara.jp":!0,"soni.nara.jp":!0,"takatori.nara.jp":!0,"tawaramoto.nara.jp":!0,"tenkawa.nara.jp":!0,"tenri.nara.jp":!0,"uda.nara.jp":!0,"yamatokoriyama.nara.jp":!0,"yamatotakada.nara.jp":!0,"yamazoe.nara.jp":!0,"yoshino.nara.jp":!0,"aga.niigata.jp":!0,"agano.niigata.jp":!0,"gosen.niigata.jp":!0,"itoigawa.niigata.jp":!0,"izumozaki.niigata.jp":!0,"joetsu.niigata.jp":!0,"kamo.niigata.jp":!0,"kariwa.niigata.jp":!0,"kashiwazaki.niigata.jp":!0,"minamiuonuma.niigata.jp":!0,"mitsuke.niigata.jp":!0,"muika.niigata.jp":!0,"murakami.niigata.jp":!0,"myoko.niigata.jp":!0,"nagaoka.niigata.jp":!0,"niigata.niigata.jp":!0,"ojiya.niigata.jp":!0,"omi.niigata.jp":!0,"sado.niigata.jp":!0,"sanjo.niigata.jp":!0,"seiro.niigata.jp":!0,"seirou.niigata.jp":!0,"sekikawa.niigata.jp":!0,"shibata.niigata.jp":!0,"tagami.niigata.jp":!0,"tainai.niigata.jp":!0,"tochio.niigata.jp":!0,"tokamachi.niigata.jp":!0,"tsubame.niigata.jp":!0,"tsunan.niigata.jp":!0,"uonuma.niigata.jp":!0,"yahiko.niigata.jp":!0,"yoita.niigata.jp":!0,"yuzawa.niigata.jp":!0,"beppu.oita.jp":!0,"bungoono.oita.jp":!0,"bungotakada.oita.jp":!0,"hasama.oita.jp":!0,"hiji.oita.jp":!0,"himeshima.oita.jp":!0,"hita.oita.jp":!0,"kamitsue.oita.jp":!0,"kokonoe.oita.jp":!0,"kuju.oita.jp":!0,"kunisaki.oita.jp":!0,"kusu.oita.jp":!0,"oita.oita.jp":!0,"saiki.oita.jp":!0,"taketa.oita.jp":!0,"tsukumi.oita.jp":!0,"usa.oita.jp":!0,"usuki.oita.jp":!0,"yufu.oita.jp":!0,"akaiwa.okayama.jp":!0,"asakuchi.okayama.jp":!0,"bizen.okayama.jp":!0,"hayashima.okayama.jp":!0,"ibara.okayama.jp":!0,"kagamino.okayama.jp":!0,"kasaoka.okayama.jp":!0,"kibichuo.okayama.jp":!0,"kumenan.okayama.jp":!0,"kurashiki.okayama.jp":!0,"maniwa.okayama.jp":!0,"misaki.okayama.jp":!0,"nagi.okayama.jp":!0,"niimi.okayama.jp":!0,"nishiawakura.okayama.jp":!0,"okayama.okayama.jp":!0,"satosho.okayama.jp":!0,"setouchi.okayama.jp":!0,"shinjo.okayama.jp":!0,"shoo.okayama.jp":!0,"soja.okayama.jp":!0,"takahashi.okayama.jp":!0,"tamano.okayama.jp":!0,"tsuyama.okayama.jp":!0,"wake.okayama.jp":!0,"yakage.okayama.jp":!0,"aguni.okinawa.jp":!0,"ginowan.okinawa.jp":!0,"ginoza.okinawa.jp":!0,"gushikami.okinawa.jp":!0,"haebaru.okinawa.jp":!0,"higashi.okinawa.jp":!0,"hirara.okinawa.jp":!0,"iheya.okinawa.jp":!0,"ishigaki.okinawa.jp":!0,"ishikawa.okinawa.jp":!0,"itoman.okinawa.jp":!0,"izena.okinawa.jp":!0,"kadena.okinawa.jp":!0,"kin.okinawa.jp":!0,"kitadaito.okinawa.jp":!0,"kitanakagusuku.okinawa.jp":!0,"kumejima.okinawa.jp":!0,"kunigami.okinawa.jp":!0,"minamidaito.okinawa.jp":!0,"motobu.okinawa.jp":!0,"nago.okinawa.jp":!0,"naha.okinawa.jp":!0,"nakagusuku.okinawa.jp":!0,"nakijin.okinawa.jp":!0,"nanjo.okinawa.jp":!0,"nishihara.okinawa.jp":!0,"ogimi.okinawa.jp":!0,"okinawa.okinawa.jp":!0,"onna.okinawa.jp":!0,"shimoji.okinawa.jp":!0,"taketomi.okinawa.jp":!0,"tarama.okinawa.jp":!0,"tokashiki.okinawa.jp":!0,"tomigusuku.okinawa.jp":!0,"tonaki.okinawa.jp":!0,"urasoe.okinawa.jp":!0,"uruma.okinawa.jp":!0,"yaese.okinawa.jp":!0,"yomitan.okinawa.jp":!0,"yonabaru.okinawa.jp":!0,"yonaguni.okinawa.jp":!0,"zamami.okinawa.jp":!0,"abeno.osaka.jp":!0,"chihayaakasaka.osaka.jp":!0,"chuo.osaka.jp":!0,"daito.osaka.jp":!0,"fujiidera.osaka.jp":!0,"habikino.osaka.jp":!0,"hannan.osaka.jp":!0,"higashiosaka.osaka.jp":!0,"higashisumiyoshi.osaka.jp":!0,"higashiyodogawa.osaka.jp":!0,"hirakata.osaka.jp":!0,"ibaraki.osaka.jp":!0,"ikeda.osaka.jp":!0,"izumi.osaka.jp":!0,"izumiotsu.osaka.jp":!0,"izumisano.osaka.jp":!0,"kadoma.osaka.jp":!0,"kaizuka.osaka.jp":!0,"kanan.osaka.jp":!0,"kashiwara.osaka.jp":!0,"katano.osaka.jp":!0,"kawachinagano.osaka.jp":!0,"kishiwada.osaka.jp":!0,"kita.osaka.jp":!0,"kumatori.osaka.jp":!0,"matsubara.osaka.jp":!0,"minato.osaka.jp":!0,"minoh.osaka.jp":!0,"misaki.osaka.jp":!0,"moriguchi.osaka.jp":!0,"neyagawa.osaka.jp":!0,"nishi.osaka.jp":!0,"nose.osaka.jp":!0,"osakasayama.osaka.jp":!0,"sakai.osaka.jp":!0,"sayama.osaka.jp":!0,"sennan.osaka.jp":!0,"settsu.osaka.jp":!0,"shijonawate.osaka.jp":!0,"shimamoto.osaka.jp":!0,"suita.osaka.jp":!0,"tadaoka.osaka.jp":!0,"taishi.osaka.jp":!0,"tajiri.osaka.jp":!0,"takaishi.osaka.jp":!0,"takatsuki.osaka.jp":!0,"tondabayashi.osaka.jp":!0,"toyonaka.osaka.jp":!0,"toyono.osaka.jp":!0,"yao.osaka.jp":!0,"ariake.saga.jp":!0,"arita.saga.jp":!0,"fukudomi.saga.jp":!0,"genkai.saga.jp":!0,"hamatama.saga.jp":!0,"hizen.saga.jp":!0,"imari.saga.jp":!0,"kamimine.saga.jp":!0,"kanzaki.saga.jp":!0,"karatsu.saga.jp":!0,"kashima.saga.jp":!0,"kitagata.saga.jp":!0,"kitahata.saga.jp":!0,"kiyama.saga.jp":!0,"kouhoku.saga.jp":!0,"kyuragi.saga.jp":!0,"nishiarita.saga.jp":!0,"ogi.saga.jp":!0,"omachi.saga.jp":!0,"ouchi.saga.jp":!0,"saga.saga.jp":!0,"shiroishi.saga.jp":!0,"taku.saga.jp":!0,"tara.saga.jp":!0,"tosu.saga.jp":!0,"yoshinogari.saga.jp":!0,"arakawa.saitama.jp":!0,"asaka.saitama.jp":!0,"chichibu.saitama.jp":!0,"fujimi.saitama.jp":!0,"fujimino.saitama.jp":!0,"fukaya.saitama.jp":!0,"hanno.saitama.jp":!0,"hanyu.saitama.jp":!0,"hasuda.saitama.jp":!0,"hatogaya.saitama.jp":!0,"hatoyama.saitama.jp":!0,"hidaka.saitama.jp":!0,"higashichichibu.saitama.jp":!0,"higashimatsuyama.saitama.jp":!0,"honjo.saitama.jp":!0,"ina.saitama.jp":!0,"iruma.saitama.jp":!0,"iwatsuki.saitama.jp":!0,"kamiizumi.saitama.jp":!0,"kamikawa.saitama.jp":!0,"kamisato.saitama.jp":!0,"kasukabe.saitama.jp":!0,"kawagoe.saitama.jp":!0,"kawaguchi.saitama.jp":!0,"kawajima.saitama.jp":!0,"kazo.saitama.jp":!0,"kitamoto.saitama.jp":!0,"koshigaya.saitama.jp":!0,"kounosu.saitama.jp":!0,"kuki.saitama.jp":!0,"kumagaya.saitama.jp":!0,"matsubushi.saitama.jp":!0,"minano.saitama.jp":!0,"misato.saitama.jp":!0,"miyashiro.saitama.jp":!0,"miyoshi.saitama.jp":!0,"moroyama.saitama.jp":!0,"nagatoro.saitama.jp":!0,"namegawa.saitama.jp":!0,"niiza.saitama.jp":!0,"ogano.saitama.jp":!0,"ogawa.saitama.jp":!0,"ogose.saitama.jp":!0,"okegawa.saitama.jp":!0,"omiya.saitama.jp":!0,"otaki.saitama.jp":!0,"ranzan.saitama.jp":!0,"ryokami.saitama.jp":!0,"saitama.saitama.jp":!0,"sakado.saitama.jp":!0,"satte.saitama.jp":!0,"sayama.saitama.jp":!0,"shiki.saitama.jp":!0,"shiraoka.saitama.jp":!0,"soka.saitama.jp":!0,"sugito.saitama.jp":!0,"toda.saitama.jp":!0,"tokigawa.saitama.jp":!0,"tokorozawa.saitama.jp":!0,"tsurugashima.saitama.jp":!0,"urawa.saitama.jp":!0,"warabi.saitama.jp":!0,"yashio.saitama.jp":!0,"yokoze.saitama.jp":!0,"yono.saitama.jp":!0,"yorii.saitama.jp":!0,"yoshida.saitama.jp":!0,"yoshikawa.saitama.jp":!0,"yoshimi.saitama.jp":!0,"aisho.shiga.jp":!0,"gamo.shiga.jp":!0,"higashiomi.shiga.jp":!0,"hikone.shiga.jp":!0,"koka.shiga.jp":!0,"konan.shiga.jp":!0,"kosei.shiga.jp":!0,"koto.shiga.jp":!0,"kusatsu.shiga.jp":!0,"maibara.shiga.jp":!0,"moriyama.shiga.jp":!0,"nagahama.shiga.jp":!0,"nishiazai.shiga.jp":!0,"notogawa.shiga.jp":!0,"omihachiman.shiga.jp":!0,"otsu.shiga.jp":!0,"ritto.shiga.jp":!0,"ryuoh.shiga.jp":!0,"takashima.shiga.jp":!0,"takatsuki.shiga.jp":!0,"torahime.shiga.jp":!0,"toyosato.shiga.jp":!0,"yasu.shiga.jp":!0,"akagi.shimane.jp":!0,"ama.shimane.jp":!0,"gotsu.shimane.jp":!0,"hamada.shimane.jp":!0,"higashiizumo.shimane.jp":!0,"hikawa.shimane.jp":!0,"hikimi.shimane.jp":!0,"izumo.shimane.jp":!0,"kakinoki.shimane.jp":!0,"masuda.shimane.jp":!0,"matsue.shimane.jp":!0,"misato.shimane.jp":!0,"nishinoshima.shimane.jp":!0,"ohda.shimane.jp":!0,"okinoshima.shimane.jp":!0,"okuizumo.shimane.jp":!0,"shimane.shimane.jp":!0,"tamayu.shimane.jp":!0,"tsuwano.shimane.jp":!0,"unnan.shimane.jp":!0,"yakumo.shimane.jp":!0,"yasugi.shimane.jp":!0,"yatsuka.shimane.jp":!0,"arai.shizuoka.jp":!0,"atami.shizuoka.jp":!0,"fuji.shizuoka.jp":!0,"fujieda.shizuoka.jp":!0,"fujikawa.shizuoka.jp":!0,"fujinomiya.shizuoka.jp":!0,"fukuroi.shizuoka.jp":!0,"gotemba.shizuoka.jp":!0,"haibara.shizuoka.jp":!0,"hamamatsu.shizuoka.jp":!0,"higashiizu.shizuoka.jp":!0,"ito.shizuoka.jp":!0,"iwata.shizuoka.jp":!0,"izu.shizuoka.jp":!0,"izunokuni.shizuoka.jp":!0,"kakegawa.shizuoka.jp":!0,"kannami.shizuoka.jp":!0,"kawanehon.shizuoka.jp":!0,"kawazu.shizuoka.jp":!0,"kikugawa.shizuoka.jp":!0,"kosai.shizuoka.jp":!0,"makinohara.shizuoka.jp":!0,"matsuzaki.shizuoka.jp":!0,"minamiizu.shizuoka.jp":!0,"mishima.shizuoka.jp":!0,"morimachi.shizuoka.jp":!0,"nishiizu.shizuoka.jp":!0,"numazu.shizuoka.jp":!0,"omaezaki.shizuoka.jp":!0,"shimada.shizuoka.jp":!0,"shimizu.shizuoka.jp":!0,"shimoda.shizuoka.jp":!0,"shizuoka.shizuoka.jp":!0,"susono.shizuoka.jp":!0,"yaizu.shizuoka.jp":!0,"yoshida.shizuoka.jp":!0,"ashikaga.tochigi.jp":!0,"bato.tochigi.jp":!0,"haga.tochigi.jp":!0,"ichikai.tochigi.jp":!0,"iwafune.tochigi.jp":!0,"kaminokawa.tochigi.jp":!0,"kanuma.tochigi.jp":!0,"karasuyama.tochigi.jp":!0,"kuroiso.tochigi.jp":!0,"mashiko.tochigi.jp":!0,"mibu.tochigi.jp":!0,"moka.tochigi.jp":!0,"motegi.tochigi.jp":!0,"nasu.tochigi.jp":!0,"nasushiobara.tochigi.jp":!0,"nikko.tochigi.jp":!0,"nishikata.tochigi.jp":!0,"nogi.tochigi.jp":!0,"ohira.tochigi.jp":!0,"ohtawara.tochigi.jp":!0,"oyama.tochigi.jp":!0,"sakura.tochigi.jp":!0,"sano.tochigi.jp":!0,"shimotsuke.tochigi.jp":!0,"shioya.tochigi.jp":!0,"takanezawa.tochigi.jp":!0,"tochigi.tochigi.jp":!0,"tsuga.tochigi.jp":!0,"ujiie.tochigi.jp":!0,"utsunomiya.tochigi.jp":!0,"yaita.tochigi.jp":!0,"aizumi.tokushima.jp":!0,"anan.tokushima.jp":!0,"ichiba.tokushima.jp":!0,"itano.tokushima.jp":!0,"kainan.tokushima.jp":!0,"komatsushima.tokushima.jp":!0,"matsushige.tokushima.jp":!0,"mima.tokushima.jp":!0,"minami.tokushima.jp":!0,"miyoshi.tokushima.jp":!0,"mugi.tokushima.jp":!0,"nakagawa.tokushima.jp":!0,"naruto.tokushima.jp":!0,"sanagochi.tokushima.jp":!0,"shishikui.tokushima.jp":!0,"tokushima.tokushima.jp":!0,"wajiki.tokushima.jp":!0,"adachi.tokyo.jp":!0,"akiruno.tokyo.jp":!0,"akishima.tokyo.jp":!0,"aogashima.tokyo.jp":!0,"arakawa.tokyo.jp":!0,"bunkyo.tokyo.jp":!0,"chiyoda.tokyo.jp":!0,"chofu.tokyo.jp":!0,"chuo.tokyo.jp":!0,"edogawa.tokyo.jp":!0,"fuchu.tokyo.jp":!0,"fussa.tokyo.jp":!0,"hachijo.tokyo.jp":!0,"hachioji.tokyo.jp":!0,"hamura.tokyo.jp":!0,"higashikurume.tokyo.jp":!0,"higashimurayama.tokyo.jp":!0,"higashiyamato.tokyo.jp":!0,"hino.tokyo.jp":!0,"hinode.tokyo.jp":!0,"hinohara.tokyo.jp":!0,"inagi.tokyo.jp":!0,"itabashi.tokyo.jp":!0,"katsushika.tokyo.jp":!0,"kita.tokyo.jp":!0,"kiyose.tokyo.jp":!0,"kodaira.tokyo.jp":!0,"koganei.tokyo.jp":!0,"kokubunji.tokyo.jp":!0,"komae.tokyo.jp":!0,"koto.tokyo.jp":!0,"kouzushima.tokyo.jp":!0,"kunitachi.tokyo.jp":!0,"machida.tokyo.jp":!0,"meguro.tokyo.jp":!0,"minato.tokyo.jp":!0,"mitaka.tokyo.jp":!0,"mizuho.tokyo.jp":!0,"musashimurayama.tokyo.jp":!0,"musashino.tokyo.jp":!0,"nakano.tokyo.jp":!0,"nerima.tokyo.jp":!0,"ogasawara.tokyo.jp":!0,"okutama.tokyo.jp":!0,"ome.tokyo.jp":!0,"oshima.tokyo.jp":!0,"ota.tokyo.jp":!0,"setagaya.tokyo.jp":!0,"shibuya.tokyo.jp":!0,"shinagawa.tokyo.jp":!0,"shinjuku.tokyo.jp":!0,"suginami.tokyo.jp":!0,"sumida.tokyo.jp":!0,"tachikawa.tokyo.jp":!0,"taito.tokyo.jp":!0,"tama.tokyo.jp":!0,"toshima.tokyo.jp":!0,"chizu.tottori.jp":!0,"hino.tottori.jp":!0,"kawahara.tottori.jp":!0,"koge.tottori.jp":!0,"kotoura.tottori.jp":!0,"misasa.tottori.jp":!0,"nanbu.tottori.jp":!0,"nichinan.tottori.jp":!0,"sakaiminato.tottori.jp":!0,"tottori.tottori.jp":!0,"wakasa.tottori.jp":!0,"yazu.tottori.jp":!0,"yonago.tottori.jp":!0,"asahi.toyama.jp":!0,"fuchu.toyama.jp":!0,"fukumitsu.toyama.jp":!0,"funahashi.toyama.jp":!0,"himi.toyama.jp":!0,"imizu.toyama.jp":!0,"inami.toyama.jp":!0,"johana.toyama.jp":!0,"kamiichi.toyama.jp":!0,"kurobe.toyama.jp":!0,"nakaniikawa.toyama.jp":!0,"namerikawa.toyama.jp":!0,"nanto.toyama.jp":!0,"nyuzen.toyama.jp":!0,"oyabe.toyama.jp":!0,"taira.toyama.jp":!0,"takaoka.toyama.jp":!0,"tateyama.toyama.jp":!0,"toga.toyama.jp":!0,"tonami.toyama.jp":!0,"toyama.toyama.jp":!0,"unazuki.toyama.jp":!0,"uozu.toyama.jp":!0,"yamada.toyama.jp":!0,"arida.wakayama.jp":!0,"aridagawa.wakayama.jp":!0,"gobo.wakayama.jp":!0,"hashimoto.wakayama.jp":!0,"hidaka.wakayama.jp":!0,"hirogawa.wakayama.jp":!0,"inami.wakayama.jp":!0,"iwade.wakayama.jp":!0,"kainan.wakayama.jp":!0,"kamitonda.wakayama.jp":!0,"katsuragi.wakayama.jp":!0,"kimino.wakayama.jp":!0,"kinokawa.wakayama.jp":!0,"kitayama.wakayama.jp":!0,"koya.wakayama.jp":!0,"koza.wakayama.jp":!0,"kozagawa.wakayama.jp":!0,"kudoyama.wakayama.jp":!0,"kushimoto.wakayama.jp":!0,"mihama.wakayama.jp":!0,"misato.wakayama.jp":!0,"nachikatsuura.wakayama.jp":!0,"shingu.wakayama.jp":!0,"shirahama.wakayama.jp":!0,"taiji.wakayama.jp":!0,"tanabe.wakayama.jp":!0,"wakayama.wakayama.jp":!0,"yuasa.wakayama.jp":!0,"yura.wakayama.jp":!0,"asahi.yamagata.jp":!0,"funagata.yamagata.jp":!0,"higashine.yamagata.jp":!0,"iide.yamagata.jp":!0,"kahoku.yamagata.jp":!0,"kaminoyama.yamagata.jp":!0,"kaneyama.yamagata.jp":!0,"kawanishi.yamagata.jp":!0,"mamurogawa.yamagata.jp":!0,"mikawa.yamagata.jp":!0,"murayama.yamagata.jp":!0,"nagai.yamagata.jp":!0,"nakayama.yamagata.jp":!0,"nanyo.yamagata.jp":!0,"nishikawa.yamagata.jp":!0,"obanazawa.yamagata.jp":!0,"oe.yamagata.jp":!0,"oguni.yamagata.jp":!0,"ohkura.yamagata.jp":!0,"oishida.yamagata.jp":!0,"sagae.yamagata.jp":!0,"sakata.yamagata.jp":!0,"sakegawa.yamagata.jp":!0,"shinjo.yamagata.jp":!0,"shirataka.yamagata.jp":!0,"shonai.yamagata.jp":!0,"takahata.yamagata.jp":!0,"tendo.yamagata.jp":!0,"tozawa.yamagata.jp":!0,"tsuruoka.yamagata.jp":!0,"yamagata.yamagata.jp":!0,"yamanobe.yamagata.jp":!0,"yonezawa.yamagata.jp":!0,"yuza.yamagata.jp":!0,"abu.yamaguchi.jp":!0,"hagi.yamaguchi.jp":!0,"hikari.yamaguchi.jp":!0,"hofu.yamaguchi.jp":!0,"iwakuni.yamaguchi.jp":!0,"kudamatsu.yamaguchi.jp":!0,"mitou.yamaguchi.jp":!0,"nagato.yamaguchi.jp":!0,"oshima.yamaguchi.jp":!0,"shimonoseki.yamaguchi.jp":!0,"shunan.yamaguchi.jp":!0,"tabuse.yamaguchi.jp":!0,"tokuyama.yamaguchi.jp":!0,"toyota.yamaguchi.jp":!0,"ube.yamaguchi.jp":!0,"yuu.yamaguchi.jp":!0,"chuo.yamanashi.jp":!0,"doshi.yamanashi.jp":!0,"fuefuki.yamanashi.jp":!0,"fujikawa.yamanashi.jp":!0,"fujikawaguchiko.yamanashi.jp":!0,"fujiyoshida.yamanashi.jp":!0,"hayakawa.yamanashi.jp":!0,"hokuto.yamanashi.jp":!0,"ichikawamisato.yamanashi.jp":!0,"kai.yamanashi.jp":!0,"kofu.yamanashi.jp":!0,"koshu.yamanashi.jp":!0,"kosuge.yamanashi.jp":!0,"minami-alps.yamanashi.jp":!0,"minobu.yamanashi.jp":!0,"nakamichi.yamanashi.jp":!0,"nanbu.yamanashi.jp":!0,"narusawa.yamanashi.jp":!0,"nirasaki.yamanashi.jp":!0,"nishikatsura.yamanashi.jp":!0,"oshino.yamanashi.jp":!0,"otsuki.yamanashi.jp":!0,"showa.yamanashi.jp":!0,"tabayama.yamanashi.jp":!0,"tsuru.yamanashi.jp":!0,"uenohara.yamanashi.jp":!0,"yamanakako.yamanashi.jp":!0,"yamanashi.yamanashi.jp":!0,"*.ke":!0,kg:!0,"org.kg":!0,"net.kg":!0,"com.kg":!0,"edu.kg":!0,"gov.kg":!0,"mil.kg":!0,"*.kh":!0,ki:!0,"edu.ki":!0,"biz.ki":!0,"net.ki":!0,"org.ki":!0,"gov.ki":!0,"info.ki":!0,"com.ki":!0,km:!0,"org.km":!0,"nom.km":!0,"gov.km":!0,"prd.km":!0,"tm.km":!0,"edu.km":!0,"mil.km":!0,"ass.km":!0,"com.km":!0,"coop.km":!0,"asso.km":!0,"presse.km":!0,"medecin.km":!0,"notaires.km":!0,"pharmaciens.km":!0,"veterinaire.km":!0,"gouv.km":!0,kn:!0,"net.kn":!0,"org.kn":!0,"edu.kn":!0,"gov.kn":!0,kp:!0,"com.kp":!0,"edu.kp":!0,"gov.kp":!0,"org.kp":!0,"rep.kp":!0,"tra.kp":!0,kr:!0,"ac.kr":!0,"co.kr":!0,"es.kr":!0,"go.kr":!0,"hs.kr":!0,"kg.kr":!0,"mil.kr":!0,"ms.kr":!0,"ne.kr":!0,"or.kr":!0,"pe.kr":!0,"re.kr":!0,"sc.kr":!0,"busan.kr":!0,"chungbuk.kr":!0,"chungnam.kr":!0,"daegu.kr":!0,"daejeon.kr":!0,"gangwon.kr":!0,"gwangju.kr":!0,"gyeongbuk.kr":!0,"gyeonggi.kr":!0,"gyeongnam.kr":!0,"incheon.kr":!0,"jeju.kr":!0,"jeonbuk.kr":!0,"jeonnam.kr":!0,"seoul.kr":!0,"ulsan.kr":!0,"*.kw":!0,ky:!0,"edu.ky":!0,"gov.ky":!0,"com.ky":!0,"org.ky":!0,"net.ky":!0,kz:!0,"org.kz":!0,"edu.kz":!0,"net.kz":!0,"gov.kz":!0,"mil.kz":!0,"com.kz":!0,la:!0,"int.la":!0,"net.la":!0,"info.la":!0,"edu.la":!0,"gov.la":!0,"per.la":!0,"com.la":!0,"org.la":!0,lb:!0,"com.lb":!0,"edu.lb":!0,"gov.lb":!0,"net.lb":!0,"org.lb":!0,lc:!0,"com.lc":!0,"net.lc":!0,"co.lc":!0,"org.lc":!0,"edu.lc":!0,"gov.lc":!0,li:!0,lk:!0,"gov.lk":!0,"sch.lk":!0,"net.lk":!0,"int.lk":!0,"com.lk":!0,"org.lk":!0,"edu.lk":!0,"ngo.lk":!0,"soc.lk":!0,"web.lk":!0,"ltd.lk":!0,"assn.lk":!0,"grp.lk":!0,"hotel.lk":!0,lr:!0,"com.lr":!0,"edu.lr":!0,"gov.lr":!0,"org.lr":!0,"net.lr":!0,ls:!0,"co.ls":!0,"org.ls":!0,lt:!0,"gov.lt":!0,lu:!0,lv:!0,"com.lv":!0,"edu.lv":!0,"gov.lv":!0,"org.lv":!0,"mil.lv":!0,"id.lv":!0,"net.lv":!0,"asn.lv":!0,"conf.lv":!0,ly:!0,"com.ly":!0,"net.ly":!0,"gov.ly":!0,"plc.ly":!0,"edu.ly":!0,"sch.ly":!0,"med.ly":!0,"org.ly":!0,"id.ly":!0,ma:!0,"co.ma":!0,"net.ma":!0,"gov.ma":!0,"org.ma":!0,"ac.ma":!0,"press.ma":!0,mc:!0,"tm.mc":!0,"asso.mc":!0,md:!0,me:!0,"co.me":!0,"net.me":!0,"org.me":!0,"edu.me":!0,"ac.me":!0,"gov.me":!0,"its.me":!0,"priv.me":!0,mg:!0,"org.mg":!0,"nom.mg":!0,"gov.mg":!0,"prd.mg":!0,"tm.mg":!0,"edu.mg":!0,"mil.mg":!0,"com.mg":!0,mh:!0,mil:!0,mk:!0,"com.mk":!0,"org.mk":!0,"net.mk":!0,"edu.mk":!0,"gov.mk":!0,"inf.mk":!0,"name.mk":!0,ml:!0,"com.ml":!0,"edu.ml":!0,"gouv.ml":!0,"gov.ml":!0,"net.ml":!0,"org.ml":!0,"presse.ml":!0,"*.mm":!0,mn:!0,"gov.mn":!0,"edu.mn":!0,"org.mn":!0,mo:!0,"com.mo":!0,"net.mo":!0,"org.mo":!0,"edu.mo":!0,"gov.mo":!0,mobi:!0,mp:!0,mq:!0,mr:!0,"gov.mr":!0,ms:!0,"com.ms":!0,"edu.ms":!0,"gov.ms":!0,"net.ms":!0,"org.ms":!0,mt:!0,"com.mt":!0,"edu.mt":!0,"net.mt":!0,"org.mt":!0,mu:!0,"com.mu":!0,"net.mu":!0,"org.mu":!0,"gov.mu":!0,"ac.mu":!0,"co.mu":!0,"or.mu":!0,museum:!0,"academy.museum":!0,"agriculture.museum":!0,"air.museum":!0,"airguard.museum":!0,"alabama.museum":!0,"alaska.museum":!0,"amber.museum":!0,"ambulance.museum":!0,"american.museum":!0,"americana.museum":!0,"americanantiques.museum":!0,"americanart.museum":!0,"amsterdam.museum":!0,"and.museum":!0,"annefrank.museum":!0,"anthro.museum":!0,"anthropology.museum":!0,"antiques.museum":!0,"aquarium.museum":!0,"arboretum.museum":!0,"archaeological.museum":!0,"archaeology.museum":!0,"architecture.museum":!0,"art.museum":!0,"artanddesign.museum":!0,"artcenter.museum":!0,"artdeco.museum":!0,"arteducation.museum":!0,"artgallery.museum":!0,"arts.museum":!0,"artsandcrafts.museum":!0,"asmatart.museum":!0,"assassination.museum":!0,"assisi.museum":!0,"association.museum":!0,"astronomy.museum":!0,"atlanta.museum":!0,"austin.museum":!0,"australia.museum":!0,"automotive.museum":!0,"aviation.museum":!0,"axis.museum":!0,"badajoz.museum":!0,"baghdad.museum":!0,"bahn.museum":!0,"bale.museum":!0,"baltimore.museum":!0,"barcelona.museum":!0,"baseball.museum":!0,"basel.museum":!0,"baths.museum":!0,"bauern.museum":!0,"beauxarts.museum":!0,"beeldengeluid.museum":!0,"bellevue.museum":!0,"bergbau.museum":!0,"berkeley.museum":!0,"berlin.museum":!0,"bern.museum":!0,"bible.museum":!0,"bilbao.museum":!0,"bill.museum":!0,"birdart.museum":!0,"birthplace.museum":!0,"bonn.museum":!0,"boston.museum":!0,"botanical.museum":!0,"botanicalgarden.museum":!0,"botanicgarden.museum":!0,"botany.museum":!0,"brandywinevalley.museum":!0,"brasil.museum":!0,"bristol.museum":!0,"british.museum":!0,"britishcolumbia.museum":!0,"broadcast.museum":!0,"brunel.museum":!0,"brussel.museum":!0,"brussels.museum":!0,"bruxelles.museum":!0,"building.museum":!0,"burghof.museum":!0,"bus.museum":!0,"bushey.museum":!0,"cadaques.museum":!0,"california.museum":!0,"cambridge.museum":!0,"can.museum":!0,"canada.museum":!0,"capebreton.museum":!0,"carrier.museum":!0,"cartoonart.museum":!0,"casadelamoneda.museum":!0,"castle.museum":!0,"castres.museum":!0,"celtic.museum":!0,"center.museum":!0,"chattanooga.museum":!0,"cheltenham.museum":!0,"chesapeakebay.museum":!0,"chicago.museum":!0,"children.museum":!0,"childrens.museum":!0,"childrensgarden.museum":!0,"chiropractic.museum":!0,"chocolate.museum":!0,"christiansburg.museum":!0,"cincinnati.museum":!0,"cinema.museum":!0,"circus.museum":!0,"civilisation.museum":!0,"civilization.museum":!0,"civilwar.museum":!0,"clinton.museum":!0,"clock.museum":!0,"coal.museum":!0,"coastaldefence.museum":!0,"cody.museum":!0,"coldwar.museum":!0,"collection.museum":!0,"colonialwilliamsburg.museum":!0,"coloradoplateau.museum":!0,"columbia.museum":!0,"columbus.museum":!0,"communication.museum":!0,
    "communications.museum":!0,"community.museum":!0,"computer.museum":!0,"computerhistory.museum":!0,"xn--comunicaes-v6a2o.museum":!0,"contemporary.museum":!0,"contemporaryart.museum":!0,"convent.museum":!0,"copenhagen.museum":!0,"corporation.museum":!0,"xn--correios-e-telecomunicaes-ghc29a.museum":!0,"corvette.museum":!0,"costume.museum":!0,"countryestate.museum":!0,"county.museum":!0,"crafts.museum":!0,"cranbrook.museum":!0,"creation.museum":!0,"cultural.museum":!0,"culturalcenter.museum":!0,"culture.museum":!0,"cyber.museum":!0,"cymru.museum":!0,"dali.museum":!0,"dallas.museum":!0,"database.museum":!0,"ddr.museum":!0,"decorativearts.museum":!0,"delaware.museum":!0,"delmenhorst.museum":!0,"denmark.museum":!0,"depot.museum":!0,"design.museum":!0,"detroit.museum":!0,"dinosaur.museum":!0,"discovery.museum":!0,"dolls.museum":!0,"donostia.museum":!0,"durham.museum":!0,"eastafrica.museum":!0,"eastcoast.museum":!0,"education.museum":!0,"educational.museum":!0,"egyptian.museum":!0,"eisenbahn.museum":!0,"elburg.museum":!0,"elvendrell.museum":!0,"embroidery.museum":!0,"encyclopedic.museum":!0,"england.museum":!0,"entomology.museum":!0,"environment.museum":!0,"environmentalconservation.museum":!0,"epilepsy.museum":!0,"essex.museum":!0,"estate.museum":!0,"ethnology.museum":!0,"exeter.museum":!0,"exhibition.museum":!0,"family.museum":!0,"farm.museum":!0,"farmequipment.museum":!0,"farmers.museum":!0,"farmstead.museum":!0,"field.museum":!0,"figueres.museum":!0,"filatelia.museum":!0,"film.museum":!0,"fineart.museum":!0,"finearts.museum":!0,"finland.museum":!0,"flanders.museum":!0,"florida.museum":!0,"force.museum":!0,"fortmissoula.museum":!0,"fortworth.museum":!0,"foundation.museum":!0,"francaise.museum":!0,"frankfurt.museum":!0,"franziskaner.museum":!0,"freemasonry.museum":!0,"freiburg.museum":!0,"fribourg.museum":!0,"frog.museum":!0,"fundacio.museum":!0,"furniture.museum":!0,"gallery.museum":!0,"garden.museum":!0,"gateway.museum":!0,"geelvinck.museum":!0,"gemological.museum":!0,"geology.museum":!0,"georgia.museum":!0,"giessen.museum":!0,"glas.museum":!0,"glass.museum":!0,"gorge.museum":!0,"grandrapids.museum":!0,"graz.museum":!0,"guernsey.museum":!0,"halloffame.museum":!0,"hamburg.museum":!0,"handson.museum":!0,"harvestcelebration.museum":!0,"hawaii.museum":!0,"health.museum":!0,"heimatunduhren.museum":!0,"hellas.museum":!0,"helsinki.museum":!0,"hembygdsforbund.museum":!0,"heritage.museum":!0,"histoire.museum":!0,"historical.museum":!0,"historicalsociety.museum":!0,"historichouses.museum":!0,"historisch.museum":!0,"historisches.museum":!0,"history.museum":!0,"historyofscience.museum":!0,"horology.museum":!0,"house.museum":!0,"humanities.museum":!0,"illustration.museum":!0,"imageandsound.museum":!0,"indian.museum":!0,"indiana.museum":!0,"indianapolis.museum":!0,"indianmarket.museum":!0,"intelligence.museum":!0,"interactive.museum":!0,"iraq.museum":!0,"iron.museum":!0,"isleofman.museum":!0,"jamison.museum":!0,"jefferson.museum":!0,"jerusalem.museum":!0,"jewelry.museum":!0,"jewish.museum":!0,"jewishart.museum":!0,"jfk.museum":!0,"journalism.museum":!0,"judaica.museum":!0,"judygarland.museum":!0,"juedisches.museum":!0,"juif.museum":!0,"karate.museum":!0,"karikatur.museum":!0,"kids.museum":!0,"koebenhavn.museum":!0,"koeln.museum":!0,"kunst.museum":!0,"kunstsammlung.museum":!0,"kunstunddesign.museum":!0,"labor.museum":!0,"labour.museum":!0,"lajolla.museum":!0,"lancashire.museum":!0,"landes.museum":!0,"lans.museum":!0,"xn--lns-qla.museum":!0,"larsson.museum":!0,"lewismiller.museum":!0,"lincoln.museum":!0,"linz.museum":!0,"living.museum":!0,"livinghistory.museum":!0,"localhistory.museum":!0,"london.museum":!0,"losangeles.museum":!0,"louvre.museum":!0,"loyalist.museum":!0,"lucerne.museum":!0,"luxembourg.museum":!0,"luzern.museum":!0,"mad.museum":!0,"madrid.museum":!0,"mallorca.museum":!0,"manchester.museum":!0,"mansion.museum":!0,"mansions.museum":!0,"manx.museum":!0,"marburg.museum":!0,"maritime.museum":!0,"maritimo.museum":!0,"maryland.museum":!0,"marylhurst.museum":!0,"media.museum":!0,"medical.museum":!0,"medizinhistorisches.museum":!0,"meeres.museum":!0,"memorial.museum":!0,"mesaverde.museum":!0,"michigan.museum":!0,"midatlantic.museum":!0,"military.museum":!0,"mill.museum":!0,"miners.museum":!0,"mining.museum":!0,"minnesota.museum":!0,"missile.museum":!0,"missoula.museum":!0,"modern.museum":!0,"moma.museum":!0,"money.museum":!0,"monmouth.museum":!0,"monticello.museum":!0,"montreal.museum":!0,"moscow.museum":!0,"motorcycle.museum":!0,"muenchen.museum":!0,"muenster.museum":!0,"mulhouse.museum":!0,"muncie.museum":!0,"museet.museum":!0,"museumcenter.museum":!0,"museumvereniging.museum":!0,"music.museum":!0,"national.museum":!0,"nationalfirearms.museum":!0,"nationalheritage.museum":!0,"nativeamerican.museum":!0,"naturalhistory.museum":!0,"naturalhistorymuseum.museum":!0,"naturalsciences.museum":!0,"nature.museum":!0,"naturhistorisches.museum":!0,"natuurwetenschappen.museum":!0,"naumburg.museum":!0,"naval.museum":!0,"nebraska.museum":!0,"neues.museum":!0,"newhampshire.museum":!0,"newjersey.museum":!0,"newmexico.museum":!0,"newport.museum":!0,"newspaper.museum":!0,"newyork.museum":!0,"niepce.museum":!0,"norfolk.museum":!0,"north.museum":!0,"nrw.museum":!0,"nuernberg.museum":!0,"nuremberg.museum":!0,"nyc.museum":!0,"nyny.museum":!0,"oceanographic.museum":!0,"oceanographique.museum":!0,"omaha.museum":!0,"online.museum":!0,"ontario.museum":!0,"openair.museum":!0,"oregon.museum":!0,"oregontrail.museum":!0,"otago.museum":!0,"oxford.museum":!0,"pacific.museum":!0,"paderborn.museum":!0,"palace.museum":!0,"paleo.museum":!0,"palmsprings.museum":!0,"panama.museum":!0,"paris.museum":!0,"pasadena.museum":!0,"pharmacy.museum":!0,"philadelphia.museum":!0,"philadelphiaarea.museum":!0,"philately.museum":!0,"phoenix.museum":!0,"photography.museum":!0,"pilots.museum":!0,"pittsburgh.museum":!0,"planetarium.museum":!0,"plantation.museum":!0,"plants.museum":!0,"plaza.museum":!0,"portal.museum":!0,"portland.museum":!0,"portlligat.museum":!0,"posts-and-telecommunications.museum":!0,"preservation.museum":!0,"presidio.museum":!0,"press.museum":!0,"project.museum":!0,"public.museum":!0,"pubol.museum":!0,"quebec.museum":!0,"railroad.museum":!0,"railway.museum":!0,"research.museum":!0,"resistance.museum":!0,"riodejaneiro.museum":!0,"rochester.museum":!0,"rockart.museum":!0,"roma.museum":!0,"russia.museum":!0,"saintlouis.museum":!0,"salem.museum":!0,"salvadordali.museum":!0,"salzburg.museum":!0,"sandiego.museum":!0,"sanfrancisco.museum":!0,"santabarbara.museum":!0,"santacruz.museum":!0,"santafe.museum":!0,"saskatchewan.museum":!0,"satx.museum":!0,"savannahga.museum":!0,"schlesisches.museum":!0,"schoenbrunn.museum":!0,"schokoladen.museum":!0,"school.museum":!0,"schweiz.museum":!0,"science.museum":!0,"scienceandhistory.museum":!0,"scienceandindustry.museum":!0,"sciencecenter.museum":!0,"sciencecenters.museum":!0,"science-fiction.museum":!0,"sciencehistory.museum":!0,"sciences.museum":!0,"sciencesnaturelles.museum":!0,"scotland.museum":!0,"seaport.museum":!0,"settlement.museum":!0,"settlers.museum":!0,"shell.museum":!0,"sherbrooke.museum":!0,"sibenik.museum":!0,"silk.museum":!0,"ski.museum":!0,"skole.museum":!0,"society.museum":!0,"sologne.museum":!0,"soundandvision.museum":!0,"southcarolina.museum":!0,"southwest.museum":!0,"space.museum":!0,"spy.museum":!0,"square.museum":!0,"stadt.museum":!0,"stalbans.museum":!0,"starnberg.museum":!0,"state.museum":!0,"stateofdelaware.museum":!0,"station.museum":!0,"steam.museum":!0,"steiermark.museum":!0,"stjohn.museum":!0,"stockholm.museum":!0,"stpetersburg.museum":!0,"stuttgart.museum":!0,"suisse.museum":!0,"surgeonshall.museum":!0,"surrey.museum":!0,"svizzera.museum":!0,"sweden.museum":!0,"sydney.museum":!0,"tank.museum":!0,"tcm.museum":!0,"technology.museum":!0,"telekommunikation.museum":!0,"television.museum":!0,"texas.museum":!0,"textile.museum":!0,"theater.museum":!0,"time.museum":!0,"timekeeping.museum":!0,"topology.museum":!0,"torino.museum":!0,"touch.museum":!0,"town.museum":!0,"transport.museum":!0,"tree.museum":!0,"trolley.museum":!0,"trust.museum":!0,"trustee.museum":!0,"uhren.museum":!0,"ulm.museum":!0,"undersea.museum":!0,"university.museum":!0,"usa.museum":!0,"usantiques.museum":!0,"usarts.museum":!0,"uscountryestate.museum":!0,"usculture.museum":!0,"usdecorativearts.museum":!0,"usgarden.museum":!0,"ushistory.museum":!0,"ushuaia.museum":!0,"uslivinghistory.museum":!0,"utah.museum":!0,"uvic.museum":!0,"valley.museum":!0,"vantaa.museum":!0,"versailles.museum":!0,"viking.museum":!0,"village.museum":!0,"virginia.museum":!0,"virtual.museum":!0,"virtuel.museum":!0,"vlaanderen.museum":!0,"volkenkunde.museum":!0,"wales.museum":!0,"wallonie.museum":!0,"war.museum":!0,"washingtondc.museum":!0,"watchandclock.museum":!0,"watch-and-clock.museum":!0,"western.museum":!0,"westfalen.museum":!0,"whaling.museum":!0,"wildlife.museum":!0,"williamsburg.museum":!0,"windmill.museum":!0,"workshop.museum":!0,"york.museum":!0,"yorkshire.museum":!0,"yosemite.museum":!0,"youth.museum":!0,"zoological.museum":!0,"zoology.museum":!0,"xn--9dbhblg6di.museum":!0,"xn--h1aegh.museum":!0,mv:!0,"aero.mv":!0,"biz.mv":!0,"com.mv":!0,"coop.mv":!0,"edu.mv":!0,"gov.mv":!0,"info.mv":!0,"int.mv":!0,"mil.mv":!0,"museum.mv":!0,"name.mv":!0,"net.mv":!0,"org.mv":!0,"pro.mv":!0,mw:!0,"ac.mw":!0,"biz.mw":!0,"co.mw":!0,"com.mw":!0,"coop.mw":!0,"edu.mw":!0,"gov.mw":!0,"int.mw":!0,"museum.mw":!0,"net.mw":!0,"org.mw":!0,mx:!0,"com.mx":!0,"org.mx":!0,"gob.mx":!0,"edu.mx":!0,"net.mx":!0,my:!0,"com.my":!0,"net.my":!0,"org.my":!0,"gov.my":!0,"edu.my":!0,"mil.my":!0,"name.my":!0,"*.mz":!0,"teledata.mz":!1,na:!0,"info.na":!0,"pro.na":!0,"name.na":!0,"school.na":!0,"or.na":!0,"dr.na":!0,"us.na":!0,"mx.na":!0,"ca.na":!0,"in.na":!0,"cc.na":!0,"tv.na":!0,"ws.na":!0,"mobi.na":!0,"co.na":!0,"com.na":!0,"org.na":!0,name:!0,nc:!0,"asso.nc":!0,ne:!0,net:!0,nf:!0,"com.nf":!0,"net.nf":!0,"per.nf":!0,"rec.nf":!0,"web.nf":!0,"arts.nf":!0,"firm.nf":!0,"info.nf":!0,"other.nf":!0,"store.nf":!0,ng:!0,"com.ng":!0,"edu.ng":!0,"name.ng":!0,"net.ng":!0,"org.ng":!0,"sch.ng":!0,"gov.ng":!0,"mil.ng":!0,"mobi.ng":!0,"*.ni":!0,nl:!0,"bv.nl":!0,no:!0,"fhs.no":!0,"vgs.no":!0,"fylkesbibl.no":!0,"folkebibl.no":!0,"museum.no":!0,"idrett.no":!0,"priv.no":!0,"mil.no":!0,"stat.no":!0,"dep.no":!0,"kommune.no":!0,"herad.no":!0,"aa.no":!0,"ah.no":!0,"bu.no":!0,"fm.no":!0,"hl.no":!0,"hm.no":!0,"jan-mayen.no":!0,"mr.no":!0,"nl.no":!0,"nt.no":!0,"of.no":!0,"ol.no":!0,"oslo.no":!0,"rl.no":!0,"sf.no":!0,"st.no":!0,"svalbard.no":!0,"tm.no":!0,"tr.no":!0,"va.no":!0,"vf.no":!0,"gs.aa.no":!0,"gs.ah.no":!0,"gs.bu.no":!0,"gs.fm.no":!0,"gs.hl.no":!0,"gs.hm.no":!0,"gs.jan-mayen.no":!0,"gs.mr.no":!0,"gs.nl.no":!0,"gs.nt.no":!0,"gs.of.no":!0,"gs.ol.no":!0,"gs.oslo.no":!0,"gs.rl.no":!0,"gs.sf.no":!0,"gs.st.no":!0,"gs.svalbard.no":!0,"gs.tm.no":!0,"gs.tr.no":!0,"gs.va.no":!0,"gs.vf.no":!0,"akrehamn.no":!0,"xn--krehamn-dxa.no":!0,"algard.no":!0,"xn--lgrd-poac.no":!0,"arna.no":!0,"brumunddal.no":!0,"bryne.no":!0,"bronnoysund.no":!0,"xn--brnnysund-m8ac.no":!0,"drobak.no":!0,"xn--drbak-wua.no":!0,"egersund.no":!0,"fetsund.no":!0,"floro.no":!0,"xn--flor-jra.no":!0,"fredrikstad.no":!0,"hokksund.no":!0,"honefoss.no":!0,"xn--hnefoss-q1a.no":!0,"jessheim.no":!0,"jorpeland.no":!0,"xn--jrpeland-54a.no":!0,"kirkenes.no":!0,"kopervik.no":!0,"krokstadelva.no":!0,"langevag.no":!0,"xn--langevg-jxa.no":!0,"leirvik.no":!0,"mjondalen.no":!0,"xn--mjndalen-64a.no":!0,"mo-i-rana.no":!0,"mosjoen.no":!0,"xn--mosjen-eya.no":!0,"nesoddtangen.no":!0,"orkanger.no":!0,"osoyro.no":!0,"xn--osyro-wua.no":!0,"raholt.no":!0,"xn--rholt-mra.no":!0,"sandnessjoen.no":!0,"xn--sandnessjen-ogb.no":!0,"skedsmokorset.no":!0,"slattum.no":!0,"spjelkavik.no":!0,"stathelle.no":!0,"stavern.no":!0,"stjordalshalsen.no":!0,"xn--stjrdalshalsen-sqb.no":!0,"tananger.no":!0,"tranby.no":!0,"vossevangen.no":!0,"afjord.no":!0,"xn--fjord-lra.no":!0,"agdenes.no":!0,"al.no":!0,"xn--l-1fa.no":!0,"alesund.no":!0,"xn--lesund-hua.no":!0,"alstahaug.no":!0,"alta.no":!0,"xn--lt-liac.no":!0,"alaheadju.no":!0,"xn--laheadju-7ya.no":!0,"alvdal.no":!0,"amli.no":!0,"xn--mli-tla.no":!0,"amot.no":!0,"xn--mot-tla.no":!0,"andebu.no":!0,"andoy.no":!0,"xn--andy-ira.no":!0,"andasuolo.no":!0,"ardal.no":!0,"xn--rdal-poa.no":!0,"aremark.no":!0,"arendal.no":!0,"xn--s-1fa.no":!0,"aseral.no":!0,"xn--seral-lra.no":!0,"asker.no":!0,"askim.no":!0,"askvoll.no":!0,"askoy.no":!0,"xn--asky-ira.no":!0,"asnes.no":!0,"xn--snes-poa.no":!0,"audnedaln.no":!0,"aukra.no":!0,"aure.no":!0,"aurland.no":!0,"aurskog-holand.no":!0,"xn--aurskog-hland-jnb.no":!0,"austevoll.no":!0,"austrheim.no":!0,"averoy.no":!0,"xn--avery-yua.no":!0,"balestrand.no":!0,"ballangen.no":!0,"balat.no":!0,"xn--blt-elab.no":!0,"balsfjord.no":!0,"bahccavuotna.no":!0,"xn--bhccavuotna-k7a.no":!0,"bamble.no":!0,"bardu.no":!0,"beardu.no":!0,"beiarn.no":!0,"bajddar.no":!0,"xn--bjddar-pta.no":!0,"baidar.no":!0,"xn--bidr-5nac.no":!0,"berg.no":!0,"bergen.no":!0,"berlevag.no":!0,"xn--berlevg-jxa.no":!0,"bearalvahki.no":!0,"xn--bearalvhki-y4a.no":!0,"bindal.no":!0,"birkenes.no":!0,"bjarkoy.no":!0,"xn--bjarky-fya.no":!0,"bjerkreim.no":!0,"bjugn.no":!0,"bodo.no":!0,"xn--bod-2na.no":!0,"badaddja.no":!0,"xn--bdddj-mrabd.no":!0,"budejju.no":!0,"bokn.no":!0,"bremanger.no":!0,"bronnoy.no":!0,"xn--brnny-wuac.no":!0,"bygland.no":!0,"bykle.no":!0,"barum.no":!0,"xn--brum-voa.no":!0,"bo.telemark.no":!0,"xn--b-5ga.telemark.no":!0,"bo.nordland.no":!0,"xn--b-5ga.nordland.no":!0,"bievat.no":!0,"xn--bievt-0qa.no":!0,"bomlo.no":!0,"xn--bmlo-gra.no":!0,"batsfjord.no":!0,"xn--btsfjord-9za.no":!0,"bahcavuotna.no":!0,"xn--bhcavuotna-s4a.no":!0,"dovre.no":!0,"drammen.no":!0,"drangedal.no":!0,"dyroy.no":!0,"xn--dyry-ira.no":!0,"donna.no":!0,"xn--dnna-gra.no":!0,"eid.no":!0,"eidfjord.no":!0,"eidsberg.no":!0,"eidskog.no":!0,"eidsvoll.no":!0,"eigersund.no":!0,"elverum.no":!0,"enebakk.no":!0,"engerdal.no":!0,"etne.no":!0,"etnedal.no":!0,"evenes.no":!0,"evenassi.no":!0,"xn--eveni-0qa01ga.no":!0,"evje-og-hornnes.no":!0,"farsund.no":!0,"fauske.no":!0,"fuossko.no":!0,"fuoisku.no":!0,"fedje.no":!0,"fet.no":!0,"finnoy.no":!0,"xn--finny-yua.no":!0,"fitjar.no":!0,"fjaler.no":!0,"fjell.no":!0,"flakstad.no":!0,"flatanger.no":!0,"flekkefjord.no":!0,"flesberg.no":!0,"flora.no":!0,"fla.no":!0,"xn--fl-zia.no":!0,"folldal.no":!0,"forsand.no":!0,"fosnes.no":!0,"frei.no":!0,"frogn.no":!0,"froland.no":!0,"frosta.no":!0,"frana.no":!0,"xn--frna-woa.no":!0,"froya.no":!0,"xn--frya-hra.no":!0,"fusa.no":!0,"fyresdal.no":!0,"forde.no":!0,"xn--frde-gra.no":!0,"gamvik.no":!0,"gangaviika.no":!0,"xn--ggaviika-8ya47h.no":!0,"gaular.no":!0,"gausdal.no":!0,"gildeskal.no":!0,"xn--gildeskl-g0a.no":!0,"giske.no":!0,"gjemnes.no":!0,"gjerdrum.no":!0,"gjerstad.no":!0,"gjesdal.no":!0,"gjovik.no":!0,"xn--gjvik-wua.no":!0,"gloppen.no":!0,"gol.no":!0,"gran.no":!0,"grane.no":!0,"granvin.no":!0,"gratangen.no":!0,"grimstad.no":!0,"grong.no":!0,"kraanghke.no":!0,"xn--kranghke-b0a.no":!0,"grue.no":!0,"gulen.no":!0,"hadsel.no":!0,"halden.no":!0,"halsa.no":!0,"hamar.no":!0,"hamaroy.no":!0,"habmer.no":!0,"xn--hbmer-xqa.no":!0,"hapmir.no":!0,"xn--hpmir-xqa.no":!0,"hammerfest.no":!0,"hammarfeasta.no":!0,"xn--hmmrfeasta-s4ac.no":!0,"haram.no":!0,"hareid.no":!0,"harstad.no":!0,"hasvik.no":!0,"aknoluokta.no":!0,"xn--koluokta-7ya57h.no":!0,"hattfjelldal.no":!0,"aarborte.no":!0,"haugesund.no":!0,"hemne.no":!0,"hemnes.no":!0,"hemsedal.no":!0,"heroy.more-og-romsdal.no":!0,"xn--hery-ira.xn--mre-og-romsdal-qqb.no":!0,"heroy.nordland.no":!0,"xn--hery-ira.nordland.no":!0,"hitra.no":!0,"hjartdal.no":!0,"hjelmeland.no":!0,"hobol.no":!0,"xn--hobl-ira.no":!0,"hof.no":!0,"hol.no":!0,"hole.no":!0,"holmestrand.no":!0,"holtalen.no":!0,"xn--holtlen-hxa.no":!0,"hornindal.no":!0,"horten.no":!0,"hurdal.no":!0,"hurum.no":!0,"hvaler.no":!0,"hyllestad.no":!0,"hagebostad.no":!0,"xn--hgebostad-g3a.no":!0,"hoyanger.no":!0,"xn--hyanger-q1a.no":!0,"hoylandet.no":!0,"xn--hylandet-54a.no":!0,"ha.no":!0,"xn--h-2fa.no":!0,"ibestad.no":!0,"inderoy.no":!0,"xn--indery-fya.no":!0,"iveland.no":!0,"jevnaker.no":!0,"jondal.no":!0,"jolster.no":!0,"xn--jlster-bya.no":!0,"karasjok.no":!0,"karasjohka.no":!0,"xn--krjohka-hwab49j.no":!0,"karlsoy.no":!0,"galsa.no":!0,"xn--gls-elac.no":!0,"karmoy.no":!0,"xn--karmy-yua.no":!0,"kautokeino.no":!0,"guovdageaidnu.no":!0,"klepp.no":!0,"klabu.no":!0,"xn--klbu-woa.no":!0,"kongsberg.no":!0,"kongsvinger.no":!0,"kragero.no":!0,"xn--krager-gya.no":!0,"kristiansand.no":!0,"kristiansund.no":!0,"krodsherad.no":!0,"xn--krdsherad-m8a.no":!0,"kvalsund.no":!0,"rahkkeravju.no":!0,"xn--rhkkervju-01af.no":!0,"kvam.no":!0,"kvinesdal.no":!0,"kvinnherad.no":!0,"kviteseid.no":!0,"kvitsoy.no":!0,"xn--kvitsy-fya.no":!0,"kvafjord.no":!0,"xn--kvfjord-nxa.no":!0,"giehtavuoatna.no":!0,"kvanangen.no":!0,"xn--kvnangen-k0a.no":!0,"navuotna.no":!0,"xn--nvuotna-hwa.no":!0,"kafjord.no":!0,"xn--kfjord-iua.no":!0,"gaivuotna.no":!0,"xn--givuotna-8ya.no":!0,"larvik.no":!0,"lavangen.no":!0,"lavagis.no":!0,"loabat.no":!0,"xn--loabt-0qa.no":!0,"lebesby.no":!0,"davvesiida.no":!0,"leikanger.no":!0,"leirfjord.no":!0,"leka.no":!0,"leksvik.no":!0,"lenvik.no":!0,"leangaviika.no":!0,"xn--leagaviika-52b.no":!0,"lesja.no":!0,"levanger.no":!0,"lier.no":!0,"lierne.no":!0,"lillehammer.no":!0,"lillesand.no":!0,"lindesnes.no":!0,"lindas.no":!0,"xn--linds-pra.no":!0,"lom.no":!0,"loppa.no":!0,"lahppi.no":!0,"xn--lhppi-xqa.no":!0,"lund.no":!0,"lunner.no":!0,"luroy.no":!0,"xn--lury-ira.no":!0,"luster.no":!0,"lyngdal.no":!0,"lyngen.no":!0,"ivgu.no":!0,"lardal.no":!0,"lerdal.no":!0,"xn--lrdal-sra.no":!0,"lodingen.no":!0,"xn--ldingen-q1a.no":!0,"lorenskog.no":!0,"xn--lrenskog-54a.no":!0,"loten.no":!0,"xn--lten-gra.no":!0,"malvik.no":!0,"masoy.no":!0,"xn--msy-ula0h.no":!0,"muosat.no":!0,"xn--muost-0qa.no":!0,"mandal.no":!0,"marker.no":!0,"marnardal.no":!0,"masfjorden.no":!0,"meland.no":!0,"meldal.no":!0,"melhus.no":!0,"meloy.no":!0,"xn--mely-ira.no":!0,"meraker.no":!0,"xn--merker-kua.no":!0,"moareke.no":!0,"xn--moreke-jua.no":!0,"midsund.no":!0,"midtre-gauldal.no":!0,"modalen.no":!0,"modum.no":!0,"molde.no":!0,"moskenes.no":!0,"moss.no":!0,"mosvik.no":!0,"malselv.no":!0,"xn--mlselv-iua.no":!0,"malatvuopmi.no":!0,"xn--mlatvuopmi-s4a.no":!0,"namdalseid.no":!0,"aejrie.no":!0,"namsos.no":!0,"namsskogan.no":!0,"naamesjevuemie.no":!0,"xn--nmesjevuemie-tcba.no":!0,"laakesvuemie.no":!0,"nannestad.no":!0,"narvik.no":!0,"narviika.no":!0,"naustdal.no":!0,"nedre-eiker.no":!0,"nes.akershus.no":!0,"nes.buskerud.no":!0,"nesna.no":!0,"nesodden.no":!0,"nesseby.no":!0,"unjarga.no":!0,"xn--unjrga-rta.no":!0,"nesset.no":!0,"nissedal.no":!0,"nittedal.no":!0,"nord-aurdal.no":!0,"nord-fron.no":!0,"nord-odal.no":!0,"norddal.no":!0,"nordkapp.no":!0,"davvenjarga.no":!0,"xn--davvenjrga-y4a.no":!0,"nordre-land.no":!0,"nordreisa.no":!0,"raisa.no":!0,"xn--risa-5na.no":!0,"nore-og-uvdal.no":!0,"notodden.no":!0,"naroy.no":!0,"xn--nry-yla5g.no":!0,"notteroy.no":!0,"xn--nttery-byae.no":!0,"odda.no":!0,"oksnes.no":!0,"xn--ksnes-uua.no":!0,"oppdal.no":!0,"oppegard.no":!0,"xn--oppegrd-ixa.no":!0,"orkdal.no":!0,"orland.no":!0,"xn--rland-uua.no":!0,"orskog.no":!0,"xn--rskog-uua.no":!0,"orsta.no":!0,"xn--rsta-fra.no":!0,"os.hedmark.no":!0,"os.hordaland.no":!0,"osen.no":!0,"osteroy.no":!0,"xn--ostery-fya.no":!0,"ostre-toten.no":!0,"xn--stre-toten-zcb.no":!0,"overhalla.no":!0,"ovre-eiker.no":!0,"xn--vre-eiker-k8a.no":!0,"oyer.no":!0,"xn--yer-zna.no":!0,"oygarden.no":!0,"xn--ygarden-p1a.no":!0,"oystre-slidre.no":!0,"xn--ystre-slidre-ujb.no":!0,"porsanger.no":!0,"porsangu.no":!0,"xn--porsgu-sta26f.no":!0,"porsgrunn.no":!0,"radoy.no":!0,"xn--rady-ira.no":!0,"rakkestad.no":!0,"rana.no":!0,"ruovat.no":!0,"randaberg.no":!0,"rauma.no":!0,"rendalen.no":!0,"rennebu.no":!0,"rennesoy.no":!0,"xn--rennesy-v1a.no":!0,"rindal.no":!0,"ringebu.no":!0,"ringerike.no":!0,"ringsaker.no":!0,"rissa.no":!0,"risor.no":!0,"xn--risr-ira.no":!0,"roan.no":!0,"rollag.no":!0,"rygge.no":!0,"ralingen.no":!0,"xn--rlingen-mxa.no":!0,"rodoy.no":!0,"xn--rdy-0nab.no":!0,"romskog.no":!0,"xn--rmskog-bya.no":!0,"roros.no":!0,"xn--rros-gra.no":!0,"rost.no":!0,"xn--rst-0na.no":!0,"royken.no":!0,"xn--ryken-vua.no":!0,"royrvik.no":!0,"xn--ryrvik-bya.no":!0,"rade.no":!0,"xn--rde-ula.no":!0,"salangen.no":!0,"siellak.no":!0,"saltdal.no":!0,"salat.no":!0,"xn--slt-elab.no":!0,"xn--slat-5na.no":!0,"samnanger.no":!0,"sande.more-og-romsdal.no":!0,"sande.xn--mre-og-romsdal-qqb.no":!0,"sande.vestfold.no":!0,"sandefjord.no":!0,"sandnes.no":!0,"sandoy.no":!0,"xn--sandy-yua.no":!0,"sarpsborg.no":!0,"sauda.no":!0,"sauherad.no":!0,"sel.no":!0,"selbu.no":!0,"selje.no":!0,"seljord.no":!0,"sigdal.no":!0,"siljan.no":!0,"sirdal.no":!0,"skaun.no":!0,"skedsmo.no":!0,"ski.no":!0,"skien.no":!0,"skiptvet.no":!0,"skjervoy.no":!0,"xn--skjervy-v1a.no":!0,"skierva.no":!0,"xn--skierv-uta.no":!0,"skjak.no":!0,"xn--skjk-soa.no":!0,"skodje.no":!0,"skanland.no":!0,"xn--sknland-fxa.no":!0,"skanit.no":!0,"xn--sknit-yqa.no":!0,"smola.no":!0,"xn--smla-hra.no":!0,"snillfjord.no":!0,"snasa.no":!0,"xn--snsa-roa.no":!0,"snoasa.no":!0,"snaase.no":!0,"xn--snase-nra.no":!0,"sogndal.no":!0,"sokndal.no":!0,"sola.no":!0,"solund.no":!0,"songdalen.no":!0,"sortland.no":!0,"spydeberg.no":!0,"stange.no":!0,"stavanger.no":!0,"steigen.no":!0,"steinkjer.no":!0,"stjordal.no":!0,"xn--stjrdal-s1a.no":!0,"stokke.no":!0,"stor-elvdal.no":!0,"stord.no":!0,"stordal.no":!0,"storfjord.no":!0,"omasvuotna.no":!0,"strand.no":!0,"stranda.no":!0,"stryn.no":!0,"sula.no":!0,"suldal.no":!0,"sund.no":!0,"sunndal.no":!0,"surnadal.no":!0,"sveio.no":!0,"svelvik.no":!0,"sykkylven.no":!0,"sogne.no":!0,"xn--sgne-gra.no":!0,"somna.no":!0,"xn--smna-gra.no":!0,"sondre-land.no":!0,"xn--sndre-land-0cb.no":!0,"sor-aurdal.no":!0,"xn--sr-aurdal-l8a.no":!0,"sor-fron.no":!0,"xn--sr-fron-q1a.no":!0,"sor-odal.no":!0,"xn--sr-odal-q1a.no":!0,"sor-varanger.no":!0,"xn--sr-varanger-ggb.no":!0,"matta-varjjat.no":!0,"xn--mtta-vrjjat-k7af.no":!0,"sorfold.no":!0,"xn--srfold-bya.no":!0,"sorreisa.no":!0,"xn--srreisa-q1a.no":!0,"sorum.no":!0,"xn--srum-gra.no":!0,"tana.no":!0,"deatnu.no":!0,"time.no":!0,"tingvoll.no":!0,"tinn.no":!0,"tjeldsund.no":!0,"dielddanuorri.no":!0,"tjome.no":!0,"xn--tjme-hra.no":!0,"tokke.no":!0,"tolga.no":!0,"torsken.no":!0,"tranoy.no":!0,"xn--trany-yua.no":!0,"tromso.no":!0,"xn--troms-zua.no":!0,"tromsa.no":!0,"romsa.no":!0,"trondheim.no":!0,"troandin.no":!0,"trysil.no":!0,"trana.no":!0,"xn--trna-woa.no":!0,"trogstad.no":!0,"xn--trgstad-r1a.no":!0,"tvedestrand.no":!0,"tydal.no":!0,"tynset.no":!0,"tysfjord.no":!0,"divtasvuodna.no":!0,"divttasvuotna.no":!0,"tysnes.no":!0,"tysvar.no":!0,"xn--tysvr-vra.no":!0,"tonsberg.no":!0,"xn--tnsberg-q1a.no":!0,"ullensaker.no":!0,"ullensvang.no":!0,"ulvik.no":!0,"utsira.no":!0,"vadso.no":!0,"xn--vads-jra.no":!0,"cahcesuolo.no":!0,"xn--hcesuolo-7ya35b.no":!0,"vaksdal.no":!0,"valle.no":!0,"vang.no":!0,"vanylven.no":!0,"vardo.no":!0,"xn--vard-jra.no":!0,"varggat.no":!0,"xn--vrggt-xqad.no":!0,"vefsn.no":!0,"vaapste.no":!0,"vega.no":!0,"vegarshei.no":!0,"xn--vegrshei-c0a.no":!0,"vennesla.no":!0,"verdal.no":!0,"verran.no":!0,"vestby.no":!0,"vestnes.no":!0,"vestre-slidre.no":!0,"vestre-toten.no":!0,"vestvagoy.no":!0,"xn--vestvgy-ixa6o.no":!0,"vevelstad.no":!0,"vik.no":!0,"vikna.no":!0,"vindafjord.no":!0,"volda.no":!0,"voss.no":!0,"varoy.no":!0,"xn--vry-yla5g.no":!0,"vagan.no":!0,"xn--vgan-qoa.no":!0,"voagat.no":!0,"vagsoy.no":!0,"xn--vgsy-qoa0j.no":!0,"vaga.no":!0,"xn--vg-yiab.no":!0,"valer.ostfold.no":!0,"xn--vler-qoa.xn--stfold-9xa.no":!0,"valer.hedmark.no":!0,"xn--vler-qoa.hedmark.no":!0,"*.np":!0,nr:!0,"biz.nr":!0,"info.nr":!0,"gov.nr":!0,"edu.nr":!0,"org.nr":!0,"net.nr":!0,"com.nr":!0,nu:!0,nz:!0,"ac.nz":!0,"co.nz":!0,"cri.nz":!0,"geek.nz":!0,"gen.nz":!0,"govt.nz":!0,"health.nz":!0,"iwi.nz":!0,"kiwi.nz":!0,"maori.nz":!0,"mil.nz":!0,"xn--mori-qsa.nz":!0,"net.nz":!0,"org.nz":!0,"parliament.nz":!0,"school.nz":!0,om:!0,"co.om":!0,"com.om":!0,"edu.om":!0,"gov.om":!0,"med.om":!0,"museum.om":!0,"net.om":!0,"org.om":!0,"pro.om":!0,org:!0,pa:!0,"ac.pa":!0,"gob.pa":!0,"com.pa":!0,"org.pa":!0,"sld.pa":!0,"edu.pa":!0,"net.pa":!0,"ing.pa":!0,"abo.pa":!0,"med.pa":!0,"nom.pa":!0,pe:!0,"edu.pe":!0,"gob.pe":!0,"nom.pe":!0,"mil.pe":!0,"org.pe":!0,"com.pe":!0,"net.pe":!0,pf:!0,"com.pf":!0,"org.pf":!0,"edu.pf":!0,"*.pg":!0,ph:!0,"com.ph":!0,"net.ph":!0,"org.ph":!0,"gov.ph":!0,"edu.ph":!0,"ngo.ph":!0,"mil.ph":!0,"i.ph":!0,pk:!0,"com.pk":!0,"net.pk":!0,"edu.pk":!0,"org.pk":!0,"fam.pk":!0,"biz.pk":!0,"web.pk":!0,"gov.pk":!0,"gob.pk":!0,"gok.pk":!0,"gon.pk":!0,"gop.pk":!0,"gos.pk":!0,"info.pk":!0,pl:!0,"com.pl":!0,"net.pl":!0,"org.pl":!0,"info.pl":!0,"waw.pl":!0,"gov.pl":!0,"aid.pl":!0,"agro.pl":!0,"atm.pl":!0,"auto.pl":!0,"biz.pl":!0,"edu.pl":!0,"gmina.pl":!0,"gsm.pl":!0,"mail.pl":!0,"miasta.pl":!0,"media.pl":!0,"mil.pl":!0,"nieruchomosci.pl":!0,"nom.pl":!0,"pc.pl":!0,"powiat.pl":!0,"priv.pl":!0,"realestate.pl":!0,"rel.pl":!0,"sex.pl":!0,"shop.pl":!0,"sklep.pl":!0,"sos.pl":!0,"szkola.pl":!0,"targi.pl":!0,"tm.pl":!0,"tourism.pl":!0,"travel.pl":!0,"turystyka.pl":!0,"uw.gov.pl":!0,"um.gov.pl":!0,"ug.gov.pl":!0,"upow.gov.pl":!0,"starostwo.gov.pl":!0,"so.gov.pl":!0,"sr.gov.pl":!0,"po.gov.pl":!0,"pa.gov.pl":!0,"augustow.pl":!0,"babia-gora.pl":!0,"bedzin.pl":!0,"beskidy.pl":!0,"bialowieza.pl":!0,"bialystok.pl":!0,"bielawa.pl":!0,"bieszczady.pl":!0,"boleslawiec.pl":!0,"bydgoszcz.pl":!0,"bytom.pl":!0,"cieszyn.pl":!0,"czeladz.pl":!0,"czest.pl":!0,"dlugoleka.pl":!0,"elblag.pl":!0,"elk.pl":!0,"glogow.pl":!0,"gniezno.pl":!0,"gorlice.pl":!0,"grajewo.pl":!0,"ilawa.pl":!0,"jaworzno.pl":!0,"jelenia-gora.pl":!0,"jgora.pl":!0,"kalisz.pl":!0,"kazimierz-dolny.pl":!0,"karpacz.pl":!0,"kartuzy.pl":!0,"kaszuby.pl":!0,"katowice.pl":!0,"kepno.pl":!0,"ketrzyn.pl":!0,"klodzko.pl":!0,"kobierzyce.pl":!0,"kolobrzeg.pl":!0,"konin.pl":!0,"konskowola.pl":!0,"kutno.pl":!0,"lapy.pl":!0,"lebork.pl":!0,"legnica.pl":!0,"lezajsk.pl":!0,"limanowa.pl":!0,"lomza.pl":!0,"lowicz.pl":!0,"lubin.pl":!0,"lukow.pl":!0,"malbork.pl":!0,"malopolska.pl":!0,"mazowsze.pl":!0,"mazury.pl":!0,"mielec.pl":!0,"mielno.pl":!0,"mragowo.pl":!0,"naklo.pl":!0,"nowaruda.pl":!0,"nysa.pl":!0,"olawa.pl":!0,"olecko.pl":!0,"olkusz.pl":!0,"olsztyn.pl":!0,"opoczno.pl":!0,"opole.pl":!0,"ostroda.pl":!0,"ostroleka.pl":!0,"ostrowiec.pl":!0,"ostrowwlkp.pl":!0,"pila.pl":!0,"pisz.pl":!0,"podhale.pl":!0,"podlasie.pl":!0,"polkowice.pl":!0,"pomorze.pl":!0,"pomorskie.pl":!0,"prochowice.pl":!0,"pruszkow.pl":!0,"przeworsk.pl":!0,"pulawy.pl":!0,"radom.pl":!0,"rawa-maz.pl":!0,"rybnik.pl":!0,"rzeszow.pl":!0,"sanok.pl":!0,"sejny.pl":!0,"slask.pl":!0,"slupsk.pl":!0,"sosnowiec.pl":!0,"stalowa-wola.pl":!0,"skoczow.pl":!0,"starachowice.pl":!0,"stargard.pl":!0,"suwalki.pl":!0,"swidnica.pl":!0,"swiebodzin.pl":!0,"swinoujscie.pl":!0,"szczecin.pl":!0,"szczytno.pl":!0,"tarnobrzeg.pl":!0,"tgory.pl":!0,"turek.pl":!0,"tychy.pl":!0,"ustka.pl":!0,"walbrzych.pl":!0,"warmia.pl":!0,"warszawa.pl":!0,"wegrow.pl":!0,"wielun.pl":!0,"wlocl.pl":!0,"wloclawek.pl":!0,"wodzislaw.pl":!0,"wolomin.pl":!0,"wroclaw.pl":!0,"zachpomor.pl":!0,"zagan.pl":!0,"zarow.pl":!0,"zgora.pl":!0,"zgorzelec.pl":!0,pm:!0,pn:!0,"gov.pn":!0,"co.pn":!0,"org.pn":!0,"edu.pn":!0,"net.pn":!0,post:!0,pr:!0,"com.pr":!0,"net.pr":!0,"org.pr":!0,"gov.pr":!0,"edu.pr":!0,"isla.pr":!0,"pro.pr":!0,"biz.pr":!0,"info.pr":!0,"name.pr":!0,"est.pr":!0,"prof.pr":!0,"ac.pr":!0,pro:!0,"aca.pro":!0,"bar.pro":!0,"cpa.pro":!0,"jur.pro":!0,"law.pro":!0,"med.pro":!0,"eng.pro":!0,ps:!0,"edu.ps":!0,"gov.ps":!0,"sec.ps":!0,"plo.ps":!0,"com.ps":!0,"org.ps":!0,"net.ps":!0,pt:!0,"net.pt":!0,"gov.pt":!0,"org.pt":!0,"edu.pt":!0,"int.pt":!0,"publ.pt":!0,"com.pt":!0,"nome.pt":!0,pw:!0,"co.pw":!0,"ne.pw":!0,"or.pw":!0,"ed.pw":!0,"go.pw":!0,"belau.pw":!0,py:!0,"com.py":!0,"coop.py":!0,"edu.py":!0,"gov.py":!0,"mil.py":!0,"net.py":!0,"org.py":!0,qa:!0,"com.qa":!0,"edu.qa":!0,"gov.qa":!0,"mil.qa":!0,"name.qa":!0,"net.qa":!0,"org.qa":!0,"sch.qa":!0,re:!0,"com.re":!0,"asso.re":!0,"nom.re":!0,ro:!0,"com.ro":!0,"org.ro":!0,"tm.ro":!0,"nt.ro":!0,"nom.ro":!0,"info.ro":!0,"rec.ro":!0,"arts.ro":!0,"firm.ro":!0,"store.ro":!0,"www.ro":!0,rs:!0,"co.rs":!0,"org.rs":!0,"edu.rs":!0,"ac.rs":!0,"gov.rs":!0,"in.rs":!0,ru:!0,"ac.ru":!0,"com.ru":!0,"edu.ru":!0,"int.ru":!0,"net.ru":!0,"org.ru":!0,"pp.ru":!0,"adygeya.ru":!0,"altai.ru":!0,"amur.ru":!0,"arkhangelsk.ru":!0,"astrakhan.ru":!0,"bashkiria.ru":!0,"belgorod.ru":!0,"bir.ru":!0,"bryansk.ru":!0,"buryatia.ru":!0,"cbg.ru":!0,"chel.ru":!0,"chelyabinsk.ru":!0,"chita.ru":!0,"chukotka.ru":!0,"chuvashia.ru":!0,"dagestan.ru":!0,"dudinka.ru":!0,"e-burg.ru":!0,"grozny.ru":!0,"irkutsk.ru":!0,"ivanovo.ru":!0,"izhevsk.ru":!0,"jar.ru":!0,"joshkar-ola.ru":!0,"kalmykia.ru":!0,"kaluga.ru":!0,"kamchatka.ru":!0,"karelia.ru":!0,"kazan.ru":!0,"kchr.ru":!0,"kemerovo.ru":!0,"khabarovsk.ru":!0,"khakassia.ru":!0,"khv.ru":!0,"kirov.ru":!0,"koenig.ru":!0,"komi.ru":!0,"kostroma.ru":!0,"krasnoyarsk.ru":!0,"kuban.ru":!0,"kurgan.ru":!0,"kursk.ru":!0,"lipetsk.ru":!0,"magadan.ru":!0,"mari.ru":!0,"mari-el.ru":!0,"marine.ru":!0,"mordovia.ru":!0,"msk.ru":!0,"murmansk.ru":!0,"nalchik.ru":!0,"nnov.ru":!0,"nov.ru":!0,"novosibirsk.ru":!0,"nsk.ru":!0,"omsk.ru":!0,"orenburg.ru":!0,"oryol.ru":!0,"palana.ru":!0,"penza.ru":!0,"perm.ru":!0,"ptz.ru":!0,"rnd.ru":!0,"ryazan.ru":!0,"sakhalin.ru":!0,"samara.ru":!0,"saratov.ru":!0,"simbirsk.ru":!0,"smolensk.ru":!0,"spb.ru":!0,"stavropol.ru":!0,"stv.ru":!0,"surgut.ru":!0,"tambov.ru":!0,"tatarstan.ru":!0,"tom.ru":!0,"tomsk.ru":!0,"tsaritsyn.ru":!0,"tsk.ru":!0,"tula.ru":!0,"tuva.ru":!0,"tver.ru":!0,"tyumen.ru":!0,"udm.ru":!0,"udmurtia.ru":!0,"ulan-ude.ru":!0,"vladikavkaz.ru":!0,"vladimir.ru":!0,"vladivostok.ru":!0,"volgograd.ru":!0,"vologda.ru":!0,"voronezh.ru":!0,"vrn.ru":!0,"vyatka.ru":!0,"yakutia.ru":!0,"yamal.ru":!0,"yaroslavl.ru":!0,"yekaterinburg.ru":!0,"yuzhno-sakhalinsk.ru":!0,"amursk.ru":!0,"baikal.ru":!0,"cmw.ru":!0,"fareast.ru":!0,"jamal.ru":!0,"kms.ru":!0,"k-uralsk.ru":!0,"kustanai.ru":!0,"kuzbass.ru":!0,"magnitka.ru":!0,"mytis.ru":!0,"nakhodka.ru":!0,"nkz.ru":!0,"norilsk.ru":!0,"oskol.ru":!0,"pyatigorsk.ru":!0,"rubtsovsk.ru":!0,"snz.ru":!0,"syzran.ru":!0,"vdonsk.ru":!0,"zgrad.ru":!0,"gov.ru":!0,"mil.ru":!0,"test.ru":!0,rw:!0,"gov.rw":!0,"net.rw":!0,"edu.rw":!0,"ac.rw":!0,"com.rw":!0,"co.rw":!0,"int.rw":!0,"mil.rw":!0,"gouv.rw":!0,sa:!0,"com.sa":!0,"net.sa":!0,"org.sa":!0,"gov.sa":!0,"med.sa":!0,"pub.sa":!0,"edu.sa":!0,"sch.sa":!0,sb:!0,"com.sb":!0,"edu.sb":!0,"gov.sb":!0,"net.sb":!0,"org.sb":!0,sc:!0,"com.sc":!0,"gov.sc":!0,"net.sc":!0,"org.sc":!0,"edu.sc":!0,sd:!0,"com.sd":!0,"net.sd":!0,"org.sd":!0,"edu.sd":!0,"med.sd":!0,"tv.sd":!0,"gov.sd":!0,"info.sd":!0,se:!0,"a.se":!0,"ac.se":!0,"b.se":!0,"bd.se":!0,"brand.se":!0,"c.se":!0,"d.se":!0,"e.se":!0,"f.se":!0,"fh.se":!0,"fhsk.se":!0,"fhv.se":!0,"g.se":!0,"h.se":!0,"i.se":!0,"k.se":!0,"komforb.se":!0,"kommunalforbund.se":!0,"komvux.se":!0,"l.se":!0,"lanbib.se":!0,"m.se":!0,"n.se":!0,"naturbruksgymn.se":!0,"o.se":!0,"org.se":!0,"p.se":!0,"parti.se":!0,"pp.se":!0,"press.se":!0,"r.se":!0,"s.se":!0,"t.se":!0,"tm.se":!0,"u.se":!0,"w.se":!0,"x.se":!0,"y.se":!0,"z.se":!0,sg:!0,"com.sg":!0,"net.sg":!0,"org.sg":!0,"gov.sg":!0,"edu.sg":!0,"per.sg":!0,sh:!0,"com.sh":!0,"net.sh":!0,"gov.sh":!0,"org.sh":!0,"mil.sh":!0,si:!0,sj:!0,sk:!0,sl:!0,"com.sl":!0,"net.sl":!0,"edu.sl":!0,"gov.sl":!0,"org.sl":!0,sm:!0,sn:!0,"art.sn":!0,"com.sn":!0,"edu.sn":!0,"gouv.sn":!0,"org.sn":!0,"perso.sn":!0,"univ.sn":!0,so:!0,"com.so":!0,"net.so":!0,"org.so":!0,sr:!0,st:!0,"co.st":!0,"com.st":!0,"consulado.st":!0,"edu.st":!0,"embaixada.st":!0,"gov.st":!0,"mil.st":!0,"net.st":!0,"org.st":!0,"principe.st":!0,"saotome.st":!0,"store.st":!0,su:!0,"adygeya.su":!0,"arkhangelsk.su":!0,"balashov.su":!0,"bashkiria.su":!0,"bryansk.su":!0,"dagestan.su":!0,"grozny.su":!0,"ivanovo.su":!0,"kalmykia.su":!0,"kaluga.su":!0,"karelia.su":!0,"khakassia.su":!0,"krasnodar.su":!0,"kurgan.su":!0,"lenug.su":!0,"mordovia.su":!0,"msk.su":!0,"murmansk.su":!0,"nalchik.su":!0,"nov.su":!0,"obninsk.su":!0,"penza.su":!0,"pokrovsk.su":!0,"sochi.su":!0,"spb.su":!0,"togliatti.su":!0,"troitsk.su":!0,
    "tula.su":!0,"tuva.su":!0,"vladikavkaz.su":!0,"vladimir.su":!0,"vologda.su":!0,sv:!0,"com.sv":!0,"edu.sv":!0,"gob.sv":!0,"org.sv":!0,"red.sv":!0,sx:!0,"gov.sx":!0,sy:!0,"edu.sy":!0,"gov.sy":!0,"net.sy":!0,"mil.sy":!0,"com.sy":!0,"org.sy":!0,sz:!0,"co.sz":!0,"ac.sz":!0,"org.sz":!0,tc:!0,td:!0,tel:!0,tf:!0,tg:!0,th:!0,"ac.th":!0,"co.th":!0,"go.th":!0,"in.th":!0,"mi.th":!0,"net.th":!0,"or.th":!0,tj:!0,"ac.tj":!0,"biz.tj":!0,"co.tj":!0,"com.tj":!0,"edu.tj":!0,"go.tj":!0,"gov.tj":!0,"int.tj":!0,"mil.tj":!0,"name.tj":!0,"net.tj":!0,"nic.tj":!0,"org.tj":!0,"test.tj":!0,"web.tj":!0,tk:!0,tl:!0,"gov.tl":!0,tm:!0,"com.tm":!0,"co.tm":!0,"org.tm":!0,"net.tm":!0,"nom.tm":!0,"gov.tm":!0,"mil.tm":!0,"edu.tm":!0,tn:!0,"com.tn":!0,"ens.tn":!0,"fin.tn":!0,"gov.tn":!0,"ind.tn":!0,"intl.tn":!0,"nat.tn":!0,"net.tn":!0,"org.tn":!0,"info.tn":!0,"perso.tn":!0,"tourism.tn":!0,"edunet.tn":!0,"rnrt.tn":!0,"rns.tn":!0,"rnu.tn":!0,"mincom.tn":!0,"agrinet.tn":!0,"defense.tn":!0,"turen.tn":!0,to:!0,"com.to":!0,"gov.to":!0,"net.to":!0,"org.to":!0,"edu.to":!0,"mil.to":!0,tp:!0,tr:!0,"com.tr":!0,"info.tr":!0,"biz.tr":!0,"net.tr":!0,"org.tr":!0,"web.tr":!0,"gen.tr":!0,"tv.tr":!0,"av.tr":!0,"dr.tr":!0,"bbs.tr":!0,"name.tr":!0,"tel.tr":!0,"gov.tr":!0,"bel.tr":!0,"pol.tr":!0,"mil.tr":!0,"k12.tr":!0,"edu.tr":!0,"kep.tr":!0,"nc.tr":!0,"gov.nc.tr":!0,travel:!0,tt:!0,"co.tt":!0,"com.tt":!0,"org.tt":!0,"net.tt":!0,"biz.tt":!0,"info.tt":!0,"pro.tt":!0,"int.tt":!0,"coop.tt":!0,"jobs.tt":!0,"mobi.tt":!0,"travel.tt":!0,"museum.tt":!0,"aero.tt":!0,"name.tt":!0,"gov.tt":!0,"edu.tt":!0,tv:!0,tw:!0,"edu.tw":!0,"gov.tw":!0,"mil.tw":!0,"com.tw":!0,"net.tw":!0,"org.tw":!0,"idv.tw":!0,"game.tw":!0,"ebiz.tw":!0,"club.tw":!0,"xn--zf0ao64a.tw":!0,"xn--uc0atv.tw":!0,"xn--czrw28b.tw":!0,tz:!0,"ac.tz":!0,"co.tz":!0,"go.tz":!0,"hotel.tz":!0,"info.tz":!0,"me.tz":!0,"mil.tz":!0,"mobi.tz":!0,"ne.tz":!0,"or.tz":!0,"sc.tz":!0,"tv.tz":!0,ua:!0,"com.ua":!0,"edu.ua":!0,"gov.ua":!0,"in.ua":!0,"net.ua":!0,"org.ua":!0,"cherkassy.ua":!0,"cherkasy.ua":!0,"chernigov.ua":!0,"chernihiv.ua":!0,"chernivtsi.ua":!0,"chernovtsy.ua":!0,"ck.ua":!0,"cn.ua":!0,"cr.ua":!0,"crimea.ua":!0,"cv.ua":!0,"dn.ua":!0,"dnepropetrovsk.ua":!0,"dnipropetrovsk.ua":!0,"dominic.ua":!0,"donetsk.ua":!0,"dp.ua":!0,"if.ua":!0,"ivano-frankivsk.ua":!0,"kh.ua":!0,"kharkiv.ua":!0,"kharkov.ua":!0,"kherson.ua":!0,"khmelnitskiy.ua":!0,"khmelnytskyi.ua":!0,"kiev.ua":!0,"kirovograd.ua":!0,"km.ua":!0,"kr.ua":!0,"krym.ua":!0,"ks.ua":!0,"kv.ua":!0,"kyiv.ua":!0,"lg.ua":!0,"lt.ua":!0,"lugansk.ua":!0,"lutsk.ua":!0,"lv.ua":!0,"lviv.ua":!0,"mk.ua":!0,"mykolaiv.ua":!0,"nikolaev.ua":!0,"od.ua":!0,"odesa.ua":!0,"odessa.ua":!0,"pl.ua":!0,"poltava.ua":!0,"rivne.ua":!0,"rovno.ua":!0,"rv.ua":!0,"sb.ua":!0,"sebastopol.ua":!0,"sevastopol.ua":!0,"sm.ua":!0,"sumy.ua":!0,"te.ua":!0,"ternopil.ua":!0,"uz.ua":!0,"uzhgorod.ua":!0,"vinnica.ua":!0,"vinnytsia.ua":!0,"vn.ua":!0,"volyn.ua":!0,"yalta.ua":!0,"zaporizhzhe.ua":!0,"zaporizhzhia.ua":!0,"zhitomir.ua":!0,"zhytomyr.ua":!0,"zp.ua":!0,"zt.ua":!0,"co.ua":!0,"pp.ua":!0,ug:!0,"co.ug":!0,"or.ug":!0,"ac.ug":!0,"sc.ug":!0,"go.ug":!0,"ne.ug":!0,"com.ug":!0,"org.ug":!0,uk:!0,"ac.uk":!0,"co.uk":!0,"gov.uk":!0,"ltd.uk":!0,"me.uk":!0,"net.uk":!0,"nhs.uk":!0,"org.uk":!0,"plc.uk":!0,"police.uk":!0,"*.sch.uk":!0,us:!0,"dni.us":!0,"fed.us":!0,"isa.us":!0,"kids.us":!0,"nsn.us":!0,"ak.us":!0,"al.us":!0,"ar.us":!0,"as.us":!0,"az.us":!0,"ca.us":!0,"co.us":!0,"ct.us":!0,"dc.us":!0,"de.us":!0,"fl.us":!0,"ga.us":!0,"gu.us":!0,"hi.us":!0,"ia.us":!0,"id.us":!0,"il.us":!0,"in.us":!0,"ks.us":!0,"ky.us":!0,"la.us":!0,"ma.us":!0,"md.us":!0,"me.us":!0,"mi.us":!0,"mn.us":!0,"mo.us":!0,"ms.us":!0,"mt.us":!0,"nc.us":!0,"nd.us":!0,"ne.us":!0,"nh.us":!0,"nj.us":!0,"nm.us":!0,"nv.us":!0,"ny.us":!0,"oh.us":!0,"ok.us":!0,"or.us":!0,"pa.us":!0,"pr.us":!0,"ri.us":!0,"sc.us":!0,"sd.us":!0,"tn.us":!0,"tx.us":!0,"ut.us":!0,"vi.us":!0,"vt.us":!0,"va.us":!0,"wa.us":!0,"wi.us":!0,"wv.us":!0,"wy.us":!0,"k12.ak.us":!0,"k12.al.us":!0,"k12.ar.us":!0,"k12.as.us":!0,"k12.az.us":!0,"k12.ca.us":!0,"k12.co.us":!0,"k12.ct.us":!0,"k12.dc.us":!0,"k12.de.us":!0,"k12.fl.us":!0,"k12.ga.us":!0,"k12.gu.us":!0,"k12.ia.us":!0,"k12.id.us":!0,"k12.il.us":!0,"k12.in.us":!0,"k12.ks.us":!0,"k12.ky.us":!0,"k12.la.us":!0,"k12.ma.us":!0,"k12.md.us":!0,"k12.me.us":!0,"k12.mi.us":!0,"k12.mn.us":!0,"k12.mo.us":!0,"k12.ms.us":!0,"k12.mt.us":!0,"k12.nc.us":!0,"k12.ne.us":!0,"k12.nh.us":!0,"k12.nj.us":!0,"k12.nm.us":!0,"k12.nv.us":!0,"k12.ny.us":!0,"k12.oh.us":!0,"k12.ok.us":!0,"k12.or.us":!0,"k12.pa.us":!0,"k12.pr.us":!0,"k12.ri.us":!0,"k12.sc.us":!0,"k12.tn.us":!0,"k12.tx.us":!0,"k12.ut.us":!0,"k12.vi.us":!0,"k12.vt.us":!0,"k12.va.us":!0,"k12.wa.us":!0,"k12.wi.us":!0,"k12.wy.us":!0,"cc.ak.us":!0,"cc.al.us":!0,"cc.ar.us":!0,"cc.as.us":!0,"cc.az.us":!0,"cc.ca.us":!0,"cc.co.us":!0,"cc.ct.us":!0,"cc.dc.us":!0,"cc.de.us":!0,"cc.fl.us":!0,"cc.ga.us":!0,"cc.gu.us":!0,"cc.hi.us":!0,"cc.ia.us":!0,"cc.id.us":!0,"cc.il.us":!0,"cc.in.us":!0,"cc.ks.us":!0,"cc.ky.us":!0,"cc.la.us":!0,"cc.ma.us":!0,"cc.md.us":!0,"cc.me.us":!0,"cc.mi.us":!0,"cc.mn.us":!0,"cc.mo.us":!0,"cc.ms.us":!0,"cc.mt.us":!0,"cc.nc.us":!0,"cc.nd.us":!0,"cc.ne.us":!0,"cc.nh.us":!0,"cc.nj.us":!0,"cc.nm.us":!0,"cc.nv.us":!0,"cc.ny.us":!0,"cc.oh.us":!0,"cc.ok.us":!0,"cc.or.us":!0,"cc.pa.us":!0,"cc.pr.us":!0,"cc.ri.us":!0,"cc.sc.us":!0,"cc.sd.us":!0,"cc.tn.us":!0,"cc.tx.us":!0,"cc.ut.us":!0,"cc.vi.us":!0,"cc.vt.us":!0,"cc.va.us":!0,"cc.wa.us":!0,"cc.wi.us":!0,"cc.wv.us":!0,"cc.wy.us":!0,"lib.ak.us":!0,"lib.al.us":!0,"lib.ar.us":!0,"lib.as.us":!0,"lib.az.us":!0,"lib.ca.us":!0,"lib.co.us":!0,"lib.ct.us":!0,"lib.dc.us":!0,"lib.de.us":!0,"lib.fl.us":!0,"lib.ga.us":!0,"lib.gu.us":!0,"lib.hi.us":!0,"lib.ia.us":!0,"lib.id.us":!0,"lib.il.us":!0,"lib.in.us":!0,"lib.ks.us":!0,"lib.ky.us":!0,"lib.la.us":!0,"lib.ma.us":!0,"lib.md.us":!0,"lib.me.us":!0,"lib.mi.us":!0,"lib.mn.us":!0,"lib.mo.us":!0,"lib.ms.us":!0,"lib.mt.us":!0,"lib.nc.us":!0,"lib.nd.us":!0,"lib.ne.us":!0,"lib.nh.us":!0,"lib.nj.us":!0,"lib.nm.us":!0,"lib.nv.us":!0,"lib.ny.us":!0,"lib.oh.us":!0,"lib.ok.us":!0,"lib.or.us":!0,"lib.pa.us":!0,"lib.pr.us":!0,"lib.ri.us":!0,"lib.sc.us":!0,"lib.sd.us":!0,"lib.tn.us":!0,"lib.tx.us":!0,"lib.ut.us":!0,"lib.vi.us":!0,"lib.vt.us":!0,"lib.va.us":!0,"lib.wa.us":!0,"lib.wi.us":!0,"lib.wy.us":!0,"pvt.k12.ma.us":!0,"chtr.k12.ma.us":!0,"paroch.k12.ma.us":!0,uy:!0,"com.uy":!0,"edu.uy":!0,"gub.uy":!0,"mil.uy":!0,"net.uy":!0,"org.uy":!0,uz:!0,"co.uz":!0,"com.uz":!0,"net.uz":!0,"org.uz":!0,va:!0,vc:!0,"com.vc":!0,"net.vc":!0,"org.vc":!0,"gov.vc":!0,"mil.vc":!0,"edu.vc":!0,ve:!0,"arts.ve":!0,"co.ve":!0,"com.ve":!0,"e12.ve":!0,"edu.ve":!0,"firm.ve":!0,"gob.ve":!0,"gov.ve":!0,"info.ve":!0,"int.ve":!0,"mil.ve":!0,"net.ve":!0,"org.ve":!0,"rec.ve":!0,"store.ve":!0,"tec.ve":!0,"web.ve":!0,vg:!0,vi:!0,"co.vi":!0,"com.vi":!0,"k12.vi":!0,"net.vi":!0,"org.vi":!0,vn:!0,"com.vn":!0,"net.vn":!0,"org.vn":!0,"edu.vn":!0,"gov.vn":!0,"int.vn":!0,"ac.vn":!0,"biz.vn":!0,"info.vn":!0,"name.vn":!0,"pro.vn":!0,"health.vn":!0,vu:!0,"com.vu":!0,"edu.vu":!0,"net.vu":!0,"org.vu":!0,wf:!0,ws:!0,"com.ws":!0,"net.ws":!0,"org.ws":!0,"gov.ws":!0,"edu.ws":!0,yt:!0,"xn--mgbaam7a8h":!0,"xn--54b7fta0cc":!0,"xn--fiqs8s":!0,"xn--fiqz9s":!0,"xn--lgbbat1ad8j":!0,"xn--wgbh1c":!0,"xn--node":!0,"xn--j6w193g":!0,"xn--h2brj9c":!0,"xn--mgbbh1a71e":!0,"xn--fpcrj9c3d":!0,"xn--gecrj9c":!0,"xn--s9brj9c":!0,"xn--45brj9c":!0,"xn--xkc2dl3a5ee0h":!0,"xn--mgba3a4f16a":!0,"xn--mgba3a4fra":!0,"xn--mgbayh7gpa":!0,"xn--3e0b707e":!0,"xn--80ao21a":!0,"xn--fzc2c9e2c":!0,"xn--xkc2al3hye2a":!0,"xn--mgbc0a9azcg":!0,"xn--l1acc":!0,"xn--mgbx4cd0ab":!0,"xn--mgb9awbf":!0,"xn--ygbi2ammx":!0,"xn--90a3ac":!0,"xn--o1ac.xn--90a3ac":!0,"xn--c1avg.xn--90a3ac":!0,"xn--90azh.xn--90a3ac":!0,"xn--d1at.xn--90a3ac":!0,"xn--o1ach.xn--90a3ac":!0,"xn--80au.xn--90a3ac":!0,"xn--p1ai":!0,"xn--wgbl6a":!0,"xn--mgberp4a5d4ar":!0,"xn--mgberp4a5d4a87g":!0,"xn--mgbqly7c0a67fbc":!0,"xn--mgbqly7cvafr":!0,"xn--ogbpf8fl":!0,"xn--mgbtf8fl":!0,"xn--yfro4i67o":!0,"xn--clchc0ea0b2g2a9gcd":!0,"xn--o3cw4h":!0,"xn--pgbs0dh":!0,"xn--kpry57d":!0,"xn--kprw13d":!0,"xn--nnx388a":!0,"xn--j1amh":!0,"xn--mgb2ddes":!0,xxx:!0,"*.ye":!0,"*.za":!0,"*.zm":!0,"*.zw":!0,aaa:!0,abb:!0,abbott:!0,abogado:!0,academy:!0,accenture:!0,accountant:!0,accountants:!0,aco:!0,active:!0,actor:!0,ads:!0,adult:!0,aeg:!0,afl:!0,africa:!0,africamagic:!0,agency:!0,aig:!0,airforce:!0,airtel:!0,alibaba:!0,alipay:!0,allfinanz:!0,alsace:!0,amsterdam:!0,analytics:!0,android:!0,anquan:!0,apartments:!0,aquarelle:!0,aramco:!0,archi:!0,army:!0,arte:!0,associates:!0,attorney:!0,auction:!0,audio:!0,author:!0,auto:!0,autos:!0,avianca:!0,axa:!0,azure:!0,baidu:!0,band:!0,bank:!0,bar:!0,barcelona:!0,barclaycard:!0,barclays:!0,bargains:!0,bauhaus:!0,bayern:!0,bbc:!0,bbva:!0,bcg:!0,bcn:!0,beer:!0,bentley:!0,berlin:!0,best:!0,bharti:!0,bible:!0,bid:!0,bike:!0,bing:!0,bingo:!0,bio:!0,black:!0,blackfriday:!0,bloomberg:!0,blue:!0,bms:!0,bmw:!0,bnl:!0,bnpparibas:!0,boats:!0,bom:!0,bond:!0,boo:!0,boots:!0,bot:!0,boutique:!0,bradesco:!0,bridgestone:!0,broadway:!0,broker:!0,brother:!0,brussels:!0,budapest:!0,build:!0,builders:!0,business:!0,buy:!0,buzz:!0,bzh:!0,cab:!0,cafe:!0,cal:!0,call:!0,camera:!0,camp:!0,cancerresearch:!0,canon:!0,capetown:!0,capital:!0,car:!0,caravan:!0,cards:!0,care:!0,career:!0,careers:!0,cars:!0,cartier:!0,casa:!0,cash:!0,casino:!0,catering:!0,cba:!0,cbn:!0,center:!0,ceo:!0,cern:!0,cfa:!0,cfd:!0,channel:!0,chat:!0,cheap:!0,chloe:!0,christmas:!0,chrome:!0,church:!0,cipriani:!0,circle:!0,cisco:!0,citic:!0,city:!0,cityeats:!0,claims:!0,cleaning:!0,click:!0,clinic:!0,clothing:!0,club:!0,coach:!0,codes:!0,coffee:!0,college:!0,cologne:!0,commbank:!0,community:!0,company:!0,computer:!0,comsec:!0,condos:!0,construction:!0,consulting:!0,contact:!0,contractors:!0,cooking:!0,cool:!0,corsica:!0,country:!0,coupon:!0,coupons:!0,courses:!0,credit:!0,creditcard:!0,creditunion:!0,cricket:!0,crown:!0,crs:!0,cruises:!0,csc:!0,cuisinella:!0,cymru:!0,cyou:!0,dabur:!0,dad:!0,dance:!0,date:!0,dating:!0,datsun:!0,day:!0,dclk:!0,dealer:!0,deals:!0,degree:!0,delivery:!0,dell:!0,delta:!0,democrat:!0,dental:!0,dentist:!0,desi:!0,design:!0,dev:!0,diamonds:!0,diet:!0,digital:!0,direct:!0,directory:!0,discount:!0,dnp:!0,docs:!0,dog:!0,doha:!0,domains:!0,doosan:!0,download:!0,drive:!0,dstv:!0,dubai:!0,durban:!0,dvag:!0,earth:!0,eat:!0,edeka:!0,education:!0,email:!0,emerck:!0,energy:!0,engineer:!0,engineering:!0,enterprises:!0,epson:!0,equipment:!0,erni:!0,esq:!0,estate:!0,eurovision:!0,eus:!0,events:!0,everbank:!0,exchange:!0,expert:!0,exposed:!0,express:!0,fage:!0,fail:!0,fairwinds:!0,faith:!0,family:!0,fan:!0,fans:!0,farm:!0,fashion:!0,fast:!0,feedback:!0,ferrero:!0,film:!0,"final":!0,finance:!0,financial:!0,firestone:!0,firmdale:!0,fish:!0,fishing:!0,fit:!0,fitness:!0,flickr:!0,flights:!0,florist:!0,flowers:!0,flsmidth:!0,fly:!0,foo:!0,football:!0,ford:!0,forex:!0,forsale:!0,forum:!0,foundation:!0,frl:!0,frogans:!0,frontier:!0,fund:!0,furniture:!0,futbol:!0,fyi:!0,gal:!0,gallery:!0,gallup:!0,garden:!0,gbiz:!0,gdn:!0,gea:!0,gent:!0,genting:!0,ggee:!0,gift:!0,gifts:!0,gives:!0,giving:!0,glass:!0,gle:!0,global:!0,globo:!0,gmail:!0,gmo:!0,gmx:!0,gold:!0,goldpoint:!0,golf:!0,goo:!0,goog:!0,google:!0,gop:!0,got:!0,gotv:!0,graphics:!0,gratis:!0,green:!0,gripe:!0,group:!0,gucci:!0,guge:!0,guide:!0,guitars:!0,guru:!0,hamburg:!0,hangout:!0,haus:!0,hdfcbank:!0,health:!0,healthcare:!0,help:!0,helsinki:!0,here:!0,hermes:!0,hiphop:!0,hitachi:!0,hiv:!0,hockey:!0,holdings:!0,holiday:!0,homedepot:!0,homes:!0,honda:!0,horse:!0,host:!0,hosting:!0,hoteles:!0,hotmail:!0,house:!0,how:!0,hsbc:!0,htc:!0,ibm:!0,icbc:!0,ice:!0,icu:!0,ifm:!0,iinet:!0,immo:!0,immobilien:!0,industries:!0,infiniti:!0,ing:!0,ink:!0,institute:!0,insurance:!0,insure:!0,international:!0,investments:!0,ipiranga:!0,irish:!0,iselect:!0,ist:!0,istanbul:!0,itau:!0,iwc:!0,jaguar:!0,java:!0,jcb:!0,jetzt:!0,jewelry:!0,jio:!0,jlc:!0,jll:!0,jmp:!0,joburg:!0,jot:!0,joy:!0,jprs:!0,juegos:!0,kaufen:!0,kddi:!0,kfh:!0,kim:!0,kinder:!0,kitchen:!0,kiwi:!0,koeln:!0,komatsu:!0,kpn:!0,krd:!0,kred:!0,kyknet:!0,kyoto:!0,lacaixa:!0,lancaster:!0,land:!0,landrover:!0,lasalle:!0,lat:!0,latrobe:!0,law:!0,lawyer:!0,lds:!0,lease:!0,leclerc:!0,legal:!0,lgbt:!0,liaison:!0,lidl:!0,life:!0,lifeinsurance:!0,lifestyle:!0,lighting:!0,like:!0,limited:!0,limo:!0,lincoln:!0,linde:!0,link:!0,live:!0,lixil:!0,loan:!0,loans:!0,lol:!0,london:!0,lotte:!0,lotto:!0,love:!0,ltd:!0,ltda:!0,lupin:!0,luxe:!0,luxury:!0,madrid:!0,maif:!0,maison:!0,makeup:!0,man:!0,management:!0,mango:!0,market:!0,marketing:!0,markets:!0,marriott:!0,mba:!0,media:!0,meet:!0,melbourne:!0,meme:!0,memorial:!0,men:!0,menu:!0,meo:!0,miami:!0,microsoft:!0,mini:!0,mma:!0,mnet:!0,mobily:!0,moda:!0,moe:!0,moi:!0,monash:!0,money:!0,montblanc:!0,mormon:!0,mortgage:!0,moscow:!0,motorcycles:!0,mov:!0,movie:!0,movistar:!0,mtn:!0,mtpc:!0,mtr:!0,multichoice:!0,mutual:!0,mzansimagic:!0,nadex:!0,nagoya:!0,naspers:!0,natura:!0,navy:!0,nec:!0,netbank:!0,network:!0,neustar:!0,"new":!0,news:!0,nexus:!0,ngo:!0,nhk:!0,nico:!0,ninja:!0,nissan:!0,nokia:!0,norton:!0,nowruz:!0,nra:!0,nrw:!0,ntt:!0,nyc:!0,obi:!0,office:!0,okinawa:!0,omega:!0,one:!0,ong:!0,onl:!0,online:!0,ooo:!0,oracle:!0,orange:!0,organic:!0,orientexpress:!0,osaka:!0,otsuka:!0,ovh:!0,page:!0,pamperedchef:!0,panerai:!0,paris:!0,pars:!0,partners:!0,parts:!0,party:!0,passagens:!0,payu:!0,pharmacy:!0,philips:!0,photo:!0,photography:!0,photos:!0,physio:!0,piaget:!0,pics:!0,pictet:!0,pictures:!0,pid:!0,pin:!0,pink:!0,pizza:!0,place:!0,play:!0,plumbing:!0,plus:!0,pohl:!0,poker:!0,porn:!0,praxi:!0,press:!0,prod:!0,productions:!0,prof:!0,promo:!0,properties:!0,property:!0,pub:!0,qpon:!0,quebec:!0,quest:!0,racing:!0,read:!0,realtor:!0,realty:!0,recipes:!0,red:!0,redstone:!0,redumbrella:!0,rehab:!0,reise:!0,reisen:!0,reit:!0,reliance:!0,ren:!0,rent:!0,rentals:!0,repair:!0,report:!0,republican:!0,rest:!0,restaurant:!0,review:!0,reviews:!0,rich:!0,ricoh:!0,ril:!0,rio:!0,rip:!0,rocher:!0,rocks:!0,rodeo:!0,room:!0,rsvp:!0,ruhr:!0,run:!0,rwe:!0,ryukyu:!0,saarland:!0,safe:!0,safety:!0,sakura:!0,sale:!0,salon:!0,samsung:!0,sandvik:!0,sandvikcoromant:!0,sanofi:!0,sap:!0,sapo:!0,sarl:!0,sas:!0,saxo:!0,sbi:!0,sbs:!0,sca:!0,scb:!0,schmidt:!0,scholarships:!0,school:!0,schule:!0,schwarz:!0,science:!0,scor:!0,scot:!0,seat:!0,seek:!0,sener:!0,services:!0,sew:!0,sex:!0,sexy:!0,sharp:!0,shia:!0,shiksha:!0,shoes:!0,shouji:!0,show:!0,shriram:!0,sina:!0,singles:!0,site:!0,skin:!0,sky:!0,skype:!0,smile:!0,sncf:!0,soccer:!0,social:!0,software:!0,sohu:!0,solar:!0,solutions:!0,song:!0,sony:!0,soy:!0,space:!0,spiegel:!0,spot:!0,spreadbetting:!0,stada:!0,star:!0,starhub:!0,statebank:!0,statoil:!0,stc:!0,stcgroup:!0,stockholm:!0,storage:!0,studio:!0,study:!0,style:!0,sucks:!0,supersport:!0,supplies:!0,supply:!0,support:!0,surf:!0,surgery:!0,suzuki:!0,swatch:!0,swiss:!0,sydney:!0,symantec:!0,systems:!0,tab:!0,taipei:!0,taobao:!0,tatamotors:!0,tatar:!0,tattoo:!0,tax:!0,taxi:!0,tci:!0,team:!0,tech:!0,technology:!0,telecity:!0,telefonica:!0,temasek:!0,tennis:!0,thd:!0,theater:!0,tickets:!0,tienda:!0,tiffany:!0,tips:!0,tires:!0,tirol:!0,tmall:!0,today:!0,tokyo:!0,tools:!0,top:!0,toray:!0,toshiba:!0,tours:!0,town:!0,toys:!0,trade:!0,trading:!0,training:!0,travelers:!0,travelersinsurance:!0,trust:!0,trv:!0,tui:!0,tunes:!0,tushu:!0,tvs:!0,ubs:!0,university:!0,uno:!0,uol:!0,vacations:!0,vana:!0,vegas:!0,ventures:!0,versicherung:!0,vet:!0,viajes:!0,video:!0,viking:!0,villas:!0,vip:!0,virgin:!0,vision:!0,vista:!0,vistaprint:!0,viva:!0,vlaanderen:!0,vodka:!0,vote:!0,voting:!0,voto:!0,voyage:!0,vuelos:!0,wales:!0,walter:!0,wang:!0,wanggou:!0,watch:!0,watches:!0,weather:!0,weatherchannel:!0,webcam:!0,website:!0,wed:!0,wedding:!0,weibo:!0,weir:!0,whoswho:!0,wien:!0,wiki:!0,williamhill:!0,win:!0,windows:!0,wme:!0,work:!0,works:!0,world:!0,wtc:!0,wtf:!0,xbox:!0,xerox:!0,xihuan:!0,xin:!0,"xn--11b4c3d":!0,"xn--1ck2e1b":!0,"xn--1qqw23a":!0,"xn--30rr7y":!0,"xn--3bst00m":!0,"xn--3ds443g":!0,"xn--3pxu8k":!0,"xn--42c2d9a":!0,"xn--45q11c":!0,"xn--4gbrim":!0,"xn--55qw42g":!0,"xn--55qx5d":!0,"xn--5tzm5g":!0,"xn--6frz82g":!0,"xn--6qq986b3xl":!0,"xn--80adxhks":!0,"xn--80asehdb":!0,"xn--80aswg":!0,"xn--8y0a063a":!0,"xn--9dbq2a":!0,"xn--9et52u":!0,"xn--9krt00a":!0,"xn--b4w605ferd":!0,"xn--bck1b9a5dre4c":!0,"xn--c1avg":!0,"xn--c2br7g":!0,"xn--cck2b3b":!0,"xn--cg4bki":!0,"xn--czr694b":!0,"xn--czrs0t":!0,"xn--czru2d":!0,"xn--d1acj3b":!0,"xn--eckvdtc9d":!0,"xn--efvy88h":!0,"xn--estv75g":!0,"xn--fhbei":!0,"xn--fiq228c5hs":!0,"xn--fiq64b":!0,"xn--fjq720a":!0,"xn--flw351e":!0,"xn--g2xx48c":!0,"xn--gckr3f0f":!0,"xn--hxt814e":!0,"xn--i1b6b1a6a2e":!0,"xn--imr513n":!0,"xn--io0a7i":!0,"xn--j1aef":!0,"xn--jlq61u9w7b":!0,"xn--jvr189m":!0,"xn--kcrx77d1x4a":!0,"xn--kpu716f":!0,"xn--kput3i":!0,"xn--mgba3a3ejt":!0,"xn--mgbab2bd":!0,"xn--mgbb9fbpob":!0,"xn--mgbt3dhd":!0,"xn--mk1bu44c":!0,"xn--mxtq1m":!0,"xn--ngbc5azd":!0,"xn--ngbe9e0a":!0,"xn--nqv7f":!0,"xn--nqv7fs00ema":!0,"xn--nyqy26a":!0,"xn--p1acf":!0,"xn--pbt977c":!0,"xn--pssy2u":!0,"xn--q9jyb4c":!0,"xn--qcka1pmc":!0,"xn--rhqv96g":!0,"xn--rovu88b":!0,"xn--ses554g":!0,"xn--t60b56a":!0,"xn--tckwe":!0,"xn--unup4y":!0,"xn--vermgensberater-ctb":!0,"xn--vermgensberatung-pwb":!0,"xn--vhquv":!0,"xn--vuq861b":!0,"xn--xhq521b":!0,"xn--zfr164b":!0,xyz:!0,yachts:!0,yahoo:!0,yamaxun:!0,yandex:!0,yodobashi:!0,yoga:!0,yokohama:!0,youtube:!0,yun:!0,zara:!0,zero:!0,zip:!0,zone:!0,zuerich:!0,"cloudfront.net":!0,"ap-northeast-1.compute.amazonaws.com":!0,"ap-southeast-1.compute.amazonaws.com":!0,"ap-southeast-2.compute.amazonaws.com":!0,"cn-north-1.compute.amazonaws.cn":!0,"compute.amazonaws.cn":!0,"compute.amazonaws.com":!0,"compute-1.amazonaws.com":!0,"eu-west-1.compute.amazonaws.com":!0,"eu-central-1.compute.amazonaws.com":!0,"sa-east-1.compute.amazonaws.com":!0,"us-east-1.amazonaws.com":!0,"us-gov-west-1.compute.amazonaws.com":!0,"us-west-1.compute.amazonaws.com":!0,"us-west-2.compute.amazonaws.com":!0,"z-1.compute-1.amazonaws.com":!0,"z-2.compute-1.amazonaws.com":!0,"elasticbeanstalk.com":!0,"elb.amazonaws.com":!0,"s3.amazonaws.com":!0,"s3-us-west-2.amazonaws.com":!0,"s3-us-west-1.amazonaws.com":!0,"s3-eu-west-1.amazonaws.com":!0,"s3-ap-southeast-1.amazonaws.com":!0,"s3-ap-southeast-2.amazonaws.com":!0,"s3-ap-northeast-1.amazonaws.com":!0,"s3-sa-east-1.amazonaws.com":!0,"s3-us-gov-west-1.amazonaws.com":!0,"s3-fips-us-gov-west-1.amazonaws.com":!0,"s3-website-us-east-1.amazonaws.com":!0,"s3-website-us-west-2.amazonaws.com":!0,"s3-website-us-west-1.amazonaws.com":!0,"s3-website-eu-west-1.amazonaws.com":!0,"s3-website-ap-southeast-1.amazonaws.com":!0,"s3-website-ap-southeast-2.amazonaws.com":!0,"s3-website-ap-northeast-1.amazonaws.com":!0,"s3-website-sa-east-1.amazonaws.com":!0,"s3-website-us-gov-west-1.amazonaws.com":!0,"betainabox.com":!0,"ae.org":!0,"ar.com":!0,"br.com":!0,"cn.com":!0,"com.de":!0,"com.se":!0,"de.com":!0,"eu.com":!0,"gb.com":!0,"gb.net":!0,"hu.com":!0,"hu.net":!0,"jp.net":!0,"jpn.com":!0,"kr.com":!0,"mex.com":!0,"no.com":!0,"qc.com":!0,"ru.com":!0,"sa.com":!0,"se.com":!0,"se.net":!0,"uk.com":!0,"uk.net":!0,"us.com":!0,"uy.com":!0,"za.bz":!0,"za.com":!0,"africa.com":!0,"gr.com":!0,"in.net":!0,"us.org":!0,"co.com":!0,"c.la":!0,"cloudcontrolled.com":!0,"cloudcontrolapp.com":!0,"co.ca":!0,"co.nl":!0,"co.no":!0,"*.platform.sh":!0,"cupcake.is":!0,"dreamhosters.com":!0,"dyndns-at-home.com":!0,"dyndns-at-work.com":!0,"dyndns-blog.com":!0,"dyndns-free.com":!0,"dyndns-home.com":!0,"dyndns-ip.com":!0,"dyndns-mail.com":!0,"dyndns-office.com":!0,"dyndns-pics.com":!0,"dyndns-remote.com":!0,"dyndns-server.com":!0,"dyndns-web.com":!0,"dyndns-wiki.com":!0,"dyndns-work.com":!0,"dyndns.biz":!0,"dyndns.info":!0,"dyndns.org":!0,"dyndns.tv":!0,"at-band-camp.net":!0,"ath.cx":!0,"barrel-of-knowledge.info":!0,"barrell-of-knowledge.info":!0,"better-than.tv":!0,"blogdns.com":!0,"blogdns.net":!0,"blogdns.org":!0,"blogsite.org":!0,"boldlygoingnowhere.org":!0,"broke-it.net":!0,"buyshouses.net":!0,"cechire.com":!0,"dnsalias.com":!0,"dnsalias.net":!0,"dnsalias.org":!0,"dnsdojo.com":!0,"dnsdojo.net":!0,"dnsdojo.org":!0,"does-it.net":!0,"doesntexist.com":!0,"doesntexist.org":!0,"dontexist.com":!0,"dontexist.net":!0,"dontexist.org":!0,"doomdns.com":!0,"doomdns.org":!0,"dvrdns.org":!0,"dyn-o-saur.com":!0,"dynalias.com":!0,"dynalias.net":!0,"dynalias.org":!0,"dynathome.net":!0,"dyndns.ws":!0,"endofinternet.net":!0,"endofinternet.org":!0,"endoftheinternet.org":!0,"est-a-la-maison.com":!0,"est-a-la-masion.com":!0,"est-le-patron.com":!0,"est-mon-blogueur.com":!0,"for-better.biz":!0,"for-more.biz":!0,"for-our.info":!0,"for-some.biz":!0,"for-the.biz":!0,"forgot.her.name":!0,"forgot.his.name":!0,"from-ak.com":!0,"from-al.com":!0,"from-ar.com":!0,"from-az.net":!0,"from-ca.com":!0,"from-co.net":!0,"from-ct.com":!0,"from-dc.com":!0,"from-de.com":!0,"from-fl.com":!0,"from-ga.com":!0,"from-hi.com":!0,"from-ia.com":!0,"from-id.com":!0,"from-il.com":!0,"from-in.com":!0,"from-ks.com":!0,"from-ky.com":!0,"from-la.net":!0,"from-ma.com":!0,"from-md.com":!0,"from-me.org":!0,"from-mi.com":!0,"from-mn.com":!0,"from-mo.com":!0,"from-ms.com":!0,"from-mt.com":!0,"from-nc.com":!0,"from-nd.com":!0,"from-ne.com":!0,"from-nh.com":!0,"from-nj.com":!0,"from-nm.com":!0,"from-nv.com":!0,"from-ny.net":!0,"from-oh.com":!0,"from-ok.com":!0,"from-or.com":!0,"from-pa.com":!0,"from-pr.com":!0,"from-ri.com":!0,"from-sc.com":!0,"from-sd.com":!0,"from-tn.com":!0,"from-tx.com":!0,"from-ut.com":!0,"from-va.com":!0,"from-vt.com":!0,"from-wa.com":!0,"from-wi.com":!0,"from-wv.com":!0,"from-wy.com":!0,"ftpaccess.cc":!0,"fuettertdasnetz.de":!0,"game-host.org":!0,"game-server.cc":!0,"getmyip.com":!0,"gets-it.net":!0,"go.dyndns.org":!0,"gotdns.com":!0,"gotdns.org":!0,"groks-the.info":!0,"groks-this.info":!0,"ham-radio-op.net":!0,"here-for-more.info":!0,"hobby-site.com":!0,"hobby-site.org":!0,"home.dyndns.org":!0,"homedns.org":!0,"homeftp.net":!0,"homeftp.org":!0,"homeip.net":!0,"homelinux.com":!0,"homelinux.net":!0,"homelinux.org":!0,"homeunix.com":!0,"homeunix.net":!0,"homeunix.org":!0,"iamallama.com":!0,"in-the-band.net":!0,"is-a-anarchist.com":!0,"is-a-blogger.com":!0,"is-a-bookkeeper.com":!0,"is-a-bruinsfan.org":!0,"is-a-bulls-fan.com":!0,"is-a-candidate.org":!0,"is-a-caterer.com":!0,"is-a-celticsfan.org":!0,"is-a-chef.com":!0,"is-a-chef.net":!0,"is-a-chef.org":!0,"is-a-conservative.com":!0,"is-a-cpa.com":!0,"is-a-cubicle-slave.com":!0,"is-a-democrat.com":!0,"is-a-designer.com":!0,"is-a-doctor.com":!0,"is-a-financialadvisor.com":!0,"is-a-geek.com":!0,"is-a-geek.net":!0,"is-a-geek.org":!0,"is-a-green.com":!0,"is-a-guru.com":!0,"is-a-hard-worker.com":!0,"is-a-hunter.com":!0,"is-a-knight.org":!0,"is-a-landscaper.com":!0,"is-a-lawyer.com":!0,"is-a-liberal.com":!0,"is-a-libertarian.com":!0,"is-a-linux-user.org":!0,"is-a-llama.com":!0,"is-a-musician.com":!0,"is-a-nascarfan.com":!0,"is-a-nurse.com":!0,"is-a-painter.com":!0,"is-a-patsfan.org":!0,"is-a-personaltrainer.com":!0,"is-a-photographer.com":!0,"is-a-player.com":!0,"is-a-republican.com":!0,"is-a-rockstar.com":!0,"is-a-socialist.com":!0,"is-a-soxfan.org":!0,"is-a-student.com":!0,"is-a-teacher.com":!0,"is-a-techie.com":!0,"is-a-therapist.com":!0,"is-an-accountant.com":!0,"is-an-actor.com":!0,"is-an-actress.com":!0,"is-an-anarchist.com":!0,"is-an-artist.com":!0,"is-an-engineer.com":!0,"is-an-entertainer.com":!0,"is-by.us":!0,"is-certified.com":!0,"is-found.org":!0,"is-gone.com":!0,"is-into-anime.com":!0,"is-into-cars.com":!0,"is-into-cartoons.com":!0,"is-into-games.com":!0,"is-leet.com":!0,"is-lost.org":!0,"is-not-certified.com":!0,"is-saved.org":!0,"is-slick.com":!0,"is-uberleet.com":!0,"is-very-bad.org":!0,"is-very-evil.org":!0,"is-very-good.org":!0,"is-very-nice.org":!0,"is-very-sweet.org":!0,"is-with-theband.com":!0,"isa-geek.com":!0,"isa-geek.net":!0,"isa-geek.org":!0,"isa-hockeynut.com":!0,"issmarterthanyou.com":!0,"isteingeek.de":!0,"istmein.de":!0,"kicks-ass.net":!0,"kicks-ass.org":!0,"knowsitall.info":!0,"land-4-sale.us":!0,"lebtimnetz.de":!0,"leitungsen.de":!0,"likes-pie.com":!0,"likescandy.com":!0,"merseine.nu":!0,"mine.nu":!0,"misconfused.org":!0,"mypets.ws":!0,"myphotos.cc":!0,"neat-url.com":!0,"office-on-the.net":!0,"on-the-web.tv":!0,"podzone.net":!0,"podzone.org":!0,"readmyblog.org":!0,"saves-the-whales.com":!0,"scrapper-site.net":!0,"scrapping.cc":!0,"selfip.biz":!0,"selfip.com":!0,"selfip.info":!0,"selfip.net":!0,"selfip.org":!0,"sells-for-less.com":!0,"sells-for-u.com":!0,"sells-it.net":!0,"sellsyourhome.org":!0,"servebbs.com":!0,"servebbs.net":!0,"servebbs.org":!0,"serveftp.net":!0,"serveftp.org":!0,"servegame.org":!0,"shacknet.nu":!0,"simple-url.com":!0,"space-to-rent.com":!0,"stuff-4-sale.org":!0,"stuff-4-sale.us":!0,"teaches-yoga.com":!0,"thruhere.net":!0,"traeumtgerade.de":!0,"webhop.biz":!0,"webhop.info":!0,"webhop.net":!0,"webhop.org":!0,"worse-than.tv":!0,"writesthisblog.com":!0,"a.ssl.fastly.net":!0,"b.ssl.fastly.net":!0,"global.ssl.fastly.net":!0,"a.prod.fastly.net":!0,"global.prod.fastly.net":!0,"firebaseapp.com":!0,"flynnhub.com":!0,"service.gov.uk":!0,"github.io":!0,"githubusercontent.com":!0,"ro.com":!0,"appspot.com":!0,"blogspot.ae":!0,"blogspot.be":!0,"blogspot.bj":!0,"blogspot.ca":!0,"blogspot.cf":!0,"blogspot.ch":!0,"blogspot.co.at":!0,"blogspot.co.il":!0,"blogspot.co.nz":!0,"blogspot.co.uk":!0,"blogspot.com":!0,"blogspot.com.ar":!0,"blogspot.com.au":!0,"blogspot.com.br":!0,"blogspot.com.es":!0,"blogspot.com.tr":!0,"blogspot.cv":!0,"blogspot.cz":!0,"blogspot.de":!0,"blogspot.dk":!0,"blogspot.fi":!0,"blogspot.fr":!0,"blogspot.gr":!0,"blogspot.hk":!0,"blogspot.hu":!0,"blogspot.ie":!0,"blogspot.in":!0,"blogspot.it":!0,"blogspot.jp":!0,"blogspot.kr":!0,"blogspot.mr":!0,"blogspot.mx":!0,"blogspot.nl":!0,"blogspot.no":!0,"blogspot.pt":!0,"blogspot.re":!0,"blogspot.ro":!0,"blogspot.ru":!0,"blogspot.se":!0,"blogspot.sg":!0,"blogspot.sk":!0,"blogspot.td":!0,"blogspot.tw":!0,"codespot.com":!0,"googleapis.com":!0,"googlecode.com":!0,"pagespeedmobilizer.com":!0,"withgoogle.com":!0,"herokuapp.com":!0,"herokussl.com":!0,"iki.fi":!0,"biz.at":!0,"info.at":!0,"co.pl":!0,"azurewebsites.net":!0,"azure-mobile.net":!0,"cloudapp.net":!0,"nfshost.com":!0,"nyc.mn":!0,"nid.io":!0,"operaunite.com":!0,"outsystemscloud.com":!0,"art.pl":!0,"gliwice.pl":!0,"krakow.pl":!0,"poznan.pl":!0,"wroc.pl":!0,"zakopane.pl":!0,"priv.at":!0,"rhcloud.com":!0,"sinaapp.com":!0,"vipsinaapp.com":!0,"1kapp.com":!0,"gda.pl":!0,"gdansk.pl":!0,"gdynia.pl":!0,"med.pl":!0,"sopot.pl":!0,"hk.com":!0,"hk.org":!0,"ltd.hk":!0,"inc.hk":!0,"yolasite.com":!0,"za.net":!0,"za.org":!0});


},{"punycode":68}],223:[function(require,module,exports){
  "use strict";function Store(){}exports.Store=Store,Store.prototype.synchronous=!1,Store.prototype.findCookie=function(o,e,t,r){throw new Error("findCookie is not implemented")},Store.prototype.findCookies=function(o,e,t){throw new Error("findCookies is not implemented")},Store.prototype.putCookie=function(o,e){throw new Error("putCookie is not implemented")},Store.prototype.updateCookie=function(o,e,t){throw new Error("updateCookie is not implemented")},Store.prototype.removeCookie=function(o,e,t,r){throw new Error("removeCookie is not implemented")},Store.prototype.removeCookies=function(o,e,t){throw new Error("removeCookies is not implemented")},Store.prototype.getAllCookies=function(o){throw new Error("getAllCookies is not implemented (therefore jar cannot be serialized)")};


},{}],224:[function(require,module,exports){
  module.exports={
    "author": {
      "name": "Jeremy Stashewsky",
      "email": "jstashewsky@salesforce.com"
    },
    "license": "BSD-3-Clause",
    "name": "tough-cookie",
    "description": "RFC6265 Cookies and Cookie Jar for node.js",
    "keywords": [
      "HTTP",
      "cookie",
      "cookies",
      "set-cookie",
      "cookiejar",
      "jar",
      "RFC6265",
      "RFC2965"
    ],
    "version": "2.0.0",
    "homepage": "https://github.com/SalesforceEng/tough-cookie",
    "repository": {
      "type": "git",
      "url": "git://github.com/SalesforceEng/tough-cookie.git"
    },
    "bugs": {
      "url": "https://github.com/SalesforceEng/tough-cookie/issues"
    },
    "main": "./lib/cookie",
    "scripts": {
      "test": "vows test/*_test.js"
    },
    "engines": {
      "node": ">=0.10.0"
    },
    "devDependencies": {
      "vows": "0.7.0",
      "async": ">=0.1.12"
    },
    "gitHead": "a3af6104da7787c23bb98910109b0e0e8a10153c",
    "_id": "tough-cookie@2.0.0",
    "_shasum": "41ce08720b35cf90beb044dd2609fb19e928718f",
    "_from": "tough-cookie@>=0.12.0",
    "_npmVersion": "2.7.4",
    "_nodeVersion": "0.12.2",
    "_npmUser": {
      "name": "jstash",
      "email": "jstash@gmail.com"
    },
    "dist": {
      "shasum": "41ce08720b35cf90beb044dd2609fb19e928718f",
      "tarball": "http://54.194.16.76:4873/tough-cookie/-/tough-cookie-2.0.0.tgz"
    },
    "maintainers": [
      {
        "name": "jstash",
        "email": "jeremy@goinstant.com"
      },
      {
        "name": "goinstant",
        "email": "services@goinstant.com"
      }
    ],
    "directories": {},
    "_resolved": "http://54.194.16.76:4873/tough-cookie/-/tough-cookie-2.0.0.tgz",
    "readme": "ERROR: No README data found!"
  }

},{}],225:[function(require,module,exports){
  (function(e,t){"use strict";function r(e){var t=new i(e);return t.request=p.request,t}function o(e){var t=new i(e);return t.request=p.request,t.createSocket=u,t}function s(e){var t=new i(e);return t.request=h.request,t}function n(e){var t=new i(e);return t.request=h.request,t.createSocket=u,t}function i(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||p.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(e,r,o){for(var s=0,n=t.requests.length;n>s;++s){var i=t.requests[s];if(i.host===r&&i.port===o)return t.requests.splice(s,1),void i.request.onSocket(e)}e.destroy(),t.removeSocket(e)})}function u(e,t){var r=this;i.prototype.createSocket.call(r,e,function(o){var s=a.connect(0,c({},r.options,{servername:e.host,socket:o}));r.sockets[r.sockets.indexOf(o)]=s,t(s)})}function c(e){for(var t=1,r=arguments.length;r>t;++t){var o=arguments[t];if("object"==typeof o)for(var s=Object.keys(o),n=0,i=s.length;i>n;++n){var u=s[n];void 0!==o[u]&&(e[u]=o[u])}}return e}var a=(require("net"),require("tls")),p=require("http"),h=require("https"),v=require("events"),f=require("assert"),l=require("util");exports.httpOverHttp=r,exports.httpsOverHttp=o,exports.httpOverHttps=s,exports.httpsOverHttps=n,l.inherits(i,v.EventEmitter),i.prototype.addRequest=function(e,t){var r=this;return"string"==typeof t&&(t={host:t,port:arguments[2],path:arguments[3]}),r.sockets.length>=this.maxSockets?void r.requests.push({host:t.host,port:t.port,request:e}):void r.createConnection({host:t.host,port:t.port,request:e})},i.prototype.createConnection=function(e){var t=this;t.createSocket(e,function(r){function o(){t.emit("free",r,e.host,e.port)}function s(e){t.removeSocket(r),r.removeListener("free",o),r.removeListener("close",s),r.removeListener("agentRemove",s)}r.on("free",o),r.on("close",s),r.on("agentRemove",s),e.request.onSocket(r)})},i.prototype.createSocket=function(r,o){function s(e){e.upgrade=!0}function n(t,r,o){e.nextTick(function(){i(t,r,o)})}function i(e,t,s){if(v.removeAllListeners(),t.removeAllListeners(),200===e.statusCode)f.equal(s.length,0),d("tunneling connection has established"),a.sockets[a.sockets.indexOf(p)]=t,o(t);else{d("tunneling socket could not be established, statusCode=%d",e.statusCode);var n=new Error("tunneling socket could not be established, statusCode="+e.statusCode);n.code="ECONNRESET",r.request.emit("error",n),a.removeSocket(p)}}function u(e){v.removeAllListeners(),d("tunneling socket could not be established, cause=%s\n",e.message,e.stack);var t=new Error("tunneling socket could not be established, cause="+e.message);t.code="ECONNRESET",r.request.emit("error",t),a.removeSocket(p)}var a=this,p={};a.sockets.push(p);var h=c({},a.proxyOptions,{method:"CONNECT",path:r.host+":"+r.port,agent:!1});h.proxyAuth&&(h.headers=h.headers||{},h.headers["Proxy-Authorization"]="Basic "+new t(h.proxyAuth).toString("base64")),d("making CONNECT request");var v=a.request(h);v.useChunkedEncodingByDefault=!1,v.once("response",s),v.once("upgrade",n),v.once("connect",i),v.once("error",u),v.end()},i.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(-1!==t){this.sockets.splice(t,1);var r=this.requests.shift();r&&this.createConnection(r)}};var d;d=e.env.NODE_DEBUG&&/\btunnel\b/.test(e.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments);"string"==typeof e[0]?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:")}:function(){},exports.debug=d}).call(this,require("FWaASH"),require("buffer").Buffer);


},{"FWaASH":67,"assert":34,"buffer":49,"events":59,"http":60,"https":64,"net":33,"tls":33,"util":81}],226:[function(require,module,exports){
  (function(e,t){"use strict";function r(e,t){var r={};for(var o in t){var n=-1===e.indexOf(o);n&&(r[o]=t[o])}return r}function o(e,t){var r={};for(var o in t){var n=!(-1===e.indexOf(o)),a="function"==typeof t[o];n&&a||(r[o]=t[o])}return r}function n(e){var t=this;t.res?t.res.request?t.res.request.emit("error",e):t.res.emit("error",e):t._httpMessage.emit("error",e)}function a(){var e=this;return{uri:e.uri,method:e.method,headers:e.headers}}function i(){var e=this;return{statusCode:e.statusCode,body:e.body,headers:e.headers,request:a.call(e.request)}}function s(e){var t=this;e.har&&(t._har=new O(t),e=t._har.options(e)),l.Stream.call(t);var n=Object.keys(s.prototype),a=r(n,e);l.Stream.call(t),h._extend(t,a),e=o(n,e),t.readable=!0,t.writable=!0,e.method&&(t.explicitMethod=!0),t._qs=new E(t),t._auth=new C(t),t._oauth=new T(t),t._multipart=new j(t),t._redirect=new A(t),t._tunnel=new R(t),t.init(e)}function u(){s.debug}var p=require("http"),d=require("https"),c=require("url"),h=require("util"),l=require("stream"),f=require("zlib"),m=require("bl"),g=require("hawk"),y=require("aws-sign2"),b=require("http-signature"),v=require("mime-types"),_=require("stringstream"),q=require("caseless"),H=require("forever-agent"),w=require("form-data"),k=require("./lib/helpers"),x=require("./lib/cookies"),S=require("./lib/getProxyFromURI"),E=require("./lib/querystring").Querystring,O=require("./lib/har").Har,C=require("./lib/auth").Auth,T=require("./lib/oauth").OAuth,j=require("./lib/multipart").Multipart,A=require("./lib/redirect").Redirect,R=require("./lib/tunnel").Tunnel,U=k.safeStringify,z=k.isReadStream,P=k.toBase64,M=k.defer,L=k.copy,N=k.version,D=x.jar(),I={};h.inherits(s,l.Stream),s.debug=e.env.NODE_DEBUG&&/\brequest\b/.test(e.env.NODE_DEBUG),s.prototype.debug=u,s.prototype.init=function(e){function r(){if(!o.hasHeader("content-length")){var e;e="string"==typeof o.body?t.byteLength(o.body):Array.isArray(o.body)?o.body.reduce(function(e,t){return e+t.length},0):o.body.length,e?o.setHeader("content-length",e):o.emit("error",new Error("Argument error, options.body."))}}var o=this;e||(e={}),o.headers=o.headers?L(o.headers):{};for(var n in o.headers)"undefined"==typeof o.headers[n]&&delete o.headers[n];if(q.httpify(o,o.headers),o.method||(o.method=e.method||"GET"),o.localAddress||(o.localAddress=e.localAddress),o._qs.init(e),u(e),o.pool||o.pool===!1||(o.pool=I),o.dests=o.dests||[],o.__isRequestRequest=!0,!o._callback&&o.callback&&(o._callback=o.callback,o.callback=function(){o._callbackCalled||(o._callbackCalled=!0,o._callback.apply(o,arguments))},o.on("error",o.callback.bind()),o.on("complete",o.callback.bind(o,null))),!o.uri&&o.url&&(o.uri=o.url,delete o.url),o.baseUrl){if("string"!=typeof o.baseUrl)return o.emit("error",new Error("options.baseUrl must be a string"));if("string"!=typeof o.uri)return o.emit("error",new Error("options.uri must be a string when using options.baseUrl"));if(0===o.uri.indexOf("//")||-1!==o.uri.indexOf("://"))return o.emit("error",new Error("options.uri must be a path when using options.baseUrl"));var a=o.baseUrl.lastIndexOf("/")===o.baseUrl.length-1,i=0===o.uri.indexOf("/");a&&i?o.uri=o.baseUrl+o.uri.slice(1):a||i?o.uri=o.baseUrl+o.uri:""===o.uri?o.uri=o.baseUrl:o.uri=o.baseUrl+"/"+o.uri,delete o.baseUrl}if(!o.uri)return o.emit("error",new Error("options.uri is a required argument"));if("string"==typeof o.uri&&(o.uri=c.parse(o.uri)),"unix:"===o.uri.protocol)return o.emit("error",new Error("`unix://` URL scheme is no longer supported. Please use the format `http://unix:SOCKET:PATH`"));if("unix"===o.uri.host){var s=o.uri.path.split(":"),h=s[0],l=s[1];o.socketPath=h,o.uri.pathname=l,o.uri.path=l,o.uri.host=h,o.uri.hostname=h,o.uri.isUnix=!0}if(o.strictSSL===!1&&(o.rejectUnauthorized=!1),o.uri.pathname||(o.uri.pathname="/"),!(o.uri.host||o.uri.hostname&&o.uri.port||o.uri.isUnix)){var f=c.format(o.uri),m='Invalid URI "'+f+'"';return 0===Object.keys(e).length&&(m+=". This can be caused by a crappy redirection."),o.emit("error",new Error(m))}if(o.hasOwnProperty("proxy")||(o.proxy=S(o.uri)),o.tunnel=o._tunnel.isEnabled(e),o.proxy&&o._tunnel.setup(e),o._redirect.onRequest(e),o.setHost=!1,!o.hasHeader("host")){var g=o.originalHostHeaderName||"host";o.setHeader(g,o.uri.hostname),o.uri.port&&(80===o.uri.port&&"http:"===o.uri.protocol||443===o.uri.port&&"https:"===o.uri.protocol||o.setHeader(g,o.getHeader("host")+(":"+o.uri.port))),o.setHost=!0}if(o.jar(o._jar||e.jar),o.uri.port||("http:"===o.uri.protocol?o.uri.port=80:"https:"===o.uri.protocol&&(o.uri.port=443)),o.proxy&&!o.tunnel?(o.port=o.proxy.port,o.host=o.proxy.hostname):(o.port=o.uri.port,o.host=o.uri.hostname),e.form&&o.form(e.form),e.formData){var y=e.formData,b=o.form(),_=function(e,t){t.hasOwnProperty("value")&&t.hasOwnProperty("options")?b.append(e,t.value,t.options):b.append(e,t)};for(var w in y)if(y.hasOwnProperty(w)){var k=y[w];if(k instanceof Array)for(var x=0;x<k.length;x++)_(w,k[x]);else _(w,k)}}if(e.qs&&o.qs(e.qs),o.uri.path?o.path=o.uri.path:o.path=o.uri.pathname+(o.uri.search||""),0===o.path.length&&(o.path="/"),e.aws&&o.aws(e.aws),e.hawk&&o.hawk(e.hawk),e.httpSignature&&o.httpSignature(e.httpSignature),e.auth&&(Object.prototype.hasOwnProperty.call(e.auth,"username")&&(e.auth.user=e.auth.username),Object.prototype.hasOwnProperty.call(e.auth,"password")&&(e.auth.pass=e.auth.password),o.auth(e.auth.user,e.auth.pass,e.auth.sendImmediately,e.auth.bearer)),o.gzip&&!o.hasHeader("accept-encoding")&&o.setHeader("accept-encoding","gzip"),o.uri.auth&&!o.hasHeader("authorization")){var E=o.uri.auth.split(":").map(function(e){return o._qs.unescape(e)});o.auth(E[0],E.slice(1).join(":"),!0)}if(!o.tunnel&&o.proxy&&o.proxy.auth&&!o.hasHeader("proxy-authorization")){var O=o.proxy.auth.split(":").map(function(e){return o._qs.unescape(e)}),C="Basic "+P(O.join(":"));o.setHeader("proxy-authorization",C)}o.proxy&&!o.tunnel&&(o.path=o.uri.protocol+"//"+o.uri.host+o.path),e.json&&o.json(e.json),e.multipart&&o.multipart(e.multipart),e.time&&(o.timing=!0,o.elapsedTime=o.elapsedTime||0),o.body&&r(),e.oauth?o.oauth(e.oauth):o._oauth.params&&o.hasHeader("authorization")&&o.oauth(o._oauth.params);var T=o.proxy&&!o.tunnel?o.proxy.protocol:o.uri.protocol,j={"http:":p,"https:":d},A=o.httpModules||{};if(o.httpModule=A[T]||j[T],!o.httpModule)return o.emit("error",new Error("Invalid protocol: "+T));if(e.ca&&(o.ca=e.ca),!o.agent)if(e.agentOptions&&(o.agentOptions=e.agentOptions),e.agentClass)o.agentClass=e.agentClass;else if(e.forever){var R=N();0===R.major&&R.minor<=10?o.agentClass="http:"===T?H:H.SSL:(o.agentClass=o.httpModule.Agent,o.agentOptions=o.agentOptions||{},o.agentOptions.keepAlive=!0)}else o.agentClass=o.httpModule.Agent;o.pool===!1?o.agent=!1:o.agent=o.agent||o.getNewAgent(),o.on("pipe",function(e){if(o.ntick&&o._started&&o.emit("error",new Error("You cannot pipe to this stream after the outbound request has started.")),o.src=e,z(e))o.hasHeader("content-type")||o.setHeader("content-type",v.lookup(e.path));else{if(e.headers)for(var t in e.headers)o.hasHeader(t)||o.setHeader(t,e.headers[t]);o._json&&!o.hasHeader("content-type")&&o.setHeader("content-type","application/json"),e.method&&!o.explicitMethod&&(o.method=e.method)}}),M(function(){if(!o._aborted){var e=function(){if(o._form&&(o._auth.hasAuth?o._auth.hasAuth&&o._auth.sentAuth&&o._form.pipe(o):o._form.pipe(o)),o._multipart&&o._multipart.chunked&&o._multipart.body.pipe(o),o.body)r(),Array.isArray(o.body)?o.body.forEach(function(e){o.write(e)}):o.write(o.body),o.end();else if(o.requestBodyStream)o.requestBodyStream.pipe(o);else if(!o.src){if(o._auth.hasAuth&&!o._auth.sentAuth)return void o.end();"GET"!==o.method&&"undefined"!=typeof o.method&&o.setHeader("content-length",0),o.end()}};o._form&&!o.hasHeader("content-length")?(o.setHeader(o._form.getHeaders(),!0),o._form.getLength(function(t,r){t||o.setHeader("content-length",r),e()})):e(),o.ntick=!0}})},s.prototype._updateProtocol=function(){var e=this,t=e.uri.protocol;if("https:"===t||e.tunnel){if(e.proxy&&e._tunnel.setup())return;switch(e.httpModule=d,e.agentClass){case H:e.agentClass=H.SSL;break;case p.Agent:e.agentClass=d.Agent;break;default:return}e.agent&&(e.agent=e.getNewAgent())}else{switch(e.httpModule=p,e.agentClass){case H.SSL:e.agentClass=H;break;case d.Agent:e.agentClass=p.Agent;break;default:return}e.agent&&(e.agent=null,e.agent=e.getNewAgent())}},s.prototype.getNewAgent=function(){var e=this,t=e.agentClass,r={};if(e.agentOptions)for(var o in e.agentOptions)r[o]=e.agentOptions[o];e.ca&&(r.ca=e.ca),e.ciphers&&(r.ciphers=e.ciphers),e.secureProtocol&&(r.secureProtocol=e.secureProtocol),e.secureOptions&&(r.secureOptions=e.secureOptions),"undefined"!=typeof e.rejectUnauthorized&&(r.rejectUnauthorized=e.rejectUnauthorized),e.cert&&e.key&&(r.key=e.key,r.cert=e.cert),e.pfx&&(r.pfx=e.pfx),e.passphrase&&(r.passphrase=e.passphrase);var n="";t!==e.httpModule.Agent&&(n+=t.name);var a=e.proxy;"string"==typeof a&&(a=c.parse(a));var i=a&&"https:"===a.protocol||"https:"===this.uri.protocol;return i&&(r.ca&&(n&&(n+=":"),n+=r.ca),"undefined"!=typeof r.rejectUnauthorized&&(n&&(n+=":"),n+=r.rejectUnauthorized),r.cert&&(n&&(n+=":"),n+=r.cert.toString("ascii")+r.key.toString("ascii")),r.pfx&&(n&&(n+=":"),n+=r.pfx.toString("ascii")),r.ciphers&&(n&&(n+=":"),n+=r.ciphers),r.secureProtocol&&(n&&(n+=":"),n+=r.secureProtocol),r.secureOptions&&(n&&(n+=":"),n+=r.secureOptions)),e.pool===I&&!n&&0===Object.keys(r).length&&e.httpModule.globalAgent?e.httpModule.globalAgent:(n=e.uri.protocol+n,e.pool[n]||(e.pool[n]=new t(r),e.pool.maxSockets&&(e.pool[n].maxSockets=e.pool.maxSockets)),e.pool[n])},s.prototype.start=function(){var e=this;if(!e._aborted){e._started=!0,e.method=e.method||"GET",e.href=e.uri.href,e.src&&e.src.stat&&e.src.stat.size&&!e.hasHeader("content-length")&&e.setHeader("content-length",e.src.stat.size),e._aws&&e.aws(e._aws,!0);var t=L(e);if(delete t.auth,u("make request",e.uri.href),e.req=e.httpModule.request(t),e.timing&&(e.startTime=(new Date).getTime()),e.timeout&&!e.timeoutTimer){var r=e.timeout<0?0:e.timeout;e.timeoutTimer=setTimeout(function(){var t=e.req.socket&&e.req.socket.readable===!1;e.abort();var r=new Error("ETIMEDOUT");r.code="ETIMEDOUT",r.connect=t,e.emit("error",r)},r),e.req.setTimeout&&e.req.setTimeout(r,function(){if(e.req){e.req.abort();var t=new Error("ESOCKETTIMEDOUT");t.code="ESOCKETTIMEDOUT",t.connect=!1,e.emit("error",t)}})}e.req.on("response",e.onRequestResponse.bind(e)),e.req.on("error",e.onRequestError.bind(e)),e.req.on("drain",function(){e.emit("drain")}),e.req.on("socket",function(t){e.emit("socket",t)}),e.on("end",function(){e.req.connection&&e.req.connection.removeListener("error",n)}),e.emit("request",e.req)}},s.prototype.onRequestError=function(e){var t=this;if(!t._aborted){if(t.req&&t.req._reusedSocket&&"ECONNRESET"===e.code&&t.agent.addRequestNoreuse)return t.agent={addRequest:t.agent.addRequestNoreuse.bind(t.agent)},t.start(),void t.req.end();t.timeout&&t.timeoutTimer&&(clearTimeout(t.timeoutTimer),t.timeoutTimer=null),t.emit("error",e)}},s.prototype.onRequestResponse=function(e){var r=this;if(u("onRequestResponse",r.uri.href,e.statusCode,e.headers),e.on("end",function(){r.timing&&(r.elapsedTime+=(new Date).getTime()-r.startTime,u("elapsed time",r.elapsedTime),e.elapsedTime=r.elapsedTime),u("response end",r.uri.href,e.statusCode,e.headers)}),e.connection&&-1===e.connection.listeners("error").indexOf(n)&&(e.connection.setMaxListeners(0),e.connection.once("error",n)),r._aborted)return u("aborted",r.uri.href),void e.resume();if(r.response=e,e.request=r,e.toJSON=i,r.httpModule===d&&r.strictSSL&&(!e.hasOwnProperty("socket")||!e.socket.authorized)){u("strict ssl error",r.uri.href);var o=e.hasOwnProperty("socket")?e.socket.authorizationError:r.uri.href+" does not support SSL";return void r.emit("error",new Error("SSL Error: "+o))}r.originalHost=r.getHeader("host"),r.originalHostHeaderName||(r.originalHostHeaderName=r.hasHeader("host")),r.setHost&&r.removeHeader("host"),r.timeout&&r.timeoutTimer&&(clearTimeout(r.timeoutTimer),r.timeoutTimer=null);var a=r._jar&&r._jar.setCookie?r._jar:D,s=function(e){try{a.setCookie(e,r.uri.href,{ignoreError:!0})}catch(t){r.emit("error",t)}};if(e.caseless=q(e.headers),e.caseless.has("set-cookie")&&!r._disableCookies){var p=e.caseless.has("set-cookie");Array.isArray(e.headers[p])?e.headers[p].forEach(s):s(e.headers[p])}if(!r._redirect.onResponse(e)){e.on("close",function(){r._ended||r.response.emit("end")}),e.on("end",function(){r._ended=!0});var c;if(r.gzip){var h=e.headers["content-encoding"]||"identity";h=h.trim().toLowerCase(),"gzip"===h?(c=f.createGunzip(),e.pipe(c)):("identity"!==h&&u("ignoring unrecognized Content-Encoding "+h),c=e)}else c=e;if(r.encoding&&(0!==r.dests.length||(c.setEncoding?c.setEncoding(r.encoding):c=c.pipe(_(r.encoding)))),r._paused&&c.pause(),r.responseContent=c,r.emit("response",e),r.dests.forEach(function(e){r.pipeDest(e)}),c.on("data",function(e){r._destdata=!0,r.emit("data",e)}),c.on("end",function(e){r.emit("end",e)}),c.on("error",function(e){r.emit("error",e)}),c.on("close",function(){r.emit("close")}),r.callback){var l=m(),g=[];r.on("data",function(e){t.isBuffer(e)?l.append(e):g.push(e)}),r.on("end",function(){if(u("end event",r.uri.href),r._aborted)return void u("aborted",r.uri.href);if(l.length?(u("has body",r.uri.href,l.length),null===r.encoding?e.body=l.slice():e.body=l.toString(r.encoding)):g.length&&("utf8"===r.encoding&&g[0].length>0&&"\ufeff"===g[0][0]&&(g[0]=g[0].substring(1)),e.body=g.join("")),r._json)try{e.body=JSON.parse(e.body,r._jsonReviver)}catch(o){u("invalid JSON received",r.uri.href)}u("emitting complete",r.uri.href),"undefined"!=typeof e.body||r._json||(e.body=null===r.encoding?new t(0):""),r.emit("complete",e,e.body)})}else r.on("end",function(){return r._aborted?void u("aborted",r.uri.href):void r.emit("complete",e)});u("finish init function",r.uri.href)}},s.prototype.abort=function(){var e=this;e._aborted=!0,e.req?e.req.abort():e.response&&e.response.abort(),e.emit("abort")},s.prototype.pipeDest=function(e){var t=this,r=t.response;if(e.headers&&!e.headersSent){if(r.caseless.has("content-type")){var o=r.caseless.has("content-type");e.setHeader?e.setHeader(o,r.headers[o]):e.headers[o]=r.headers[o]}if(r.caseless.has("content-length")){var n=r.caseless.has("content-length");e.setHeader?e.setHeader(n,r.headers[n]):e.headers[n]=r.headers[n]}}if(e.setHeader&&!e.headersSent){for(var a in r.headers)t.gzip&&"content-encoding"===a||e.setHeader(a,r.headers[a]);e.statusCode=r.statusCode}t.pipefilter&&t.pipefilter(r,e)},s.prototype.qs=function(e,t){var r,o=this;r=!t&&o.uri.query?o._qs.parse(o.uri.query):{};for(var n in e)r[n]=e[n];if(""===o._qs.stringify(r))return o;var a=o._qs.stringify(r);return o.uri=c.parse(o.uri.href.split("?")[0]+"?"+a),o.url=o.uri,o.path=o.uri.path,o},s.prototype.form=function(e){var t=this;return e?(/^application\/x-www-form-urlencoded\b/.test(t.getHeader("content-type"))||t.setHeader("content-type","application/x-www-form-urlencoded"),t.body="string"==typeof e?t._qs.rfc3986(e.toString("utf8")):t._qs.stringify(e).toString("utf8"),t):(t._form=new w,t._form.on("error",function(e){e.message="form-data: "+e.message,t.emit("error",e),t.abort()}),t._form)},s.prototype.multipart=function(e){var t=this;return t._multipart.onRequest(e),t._multipart.chunked||(t.body=t._multipart.body),t},s.prototype.json=function(e){var t=this;return t.hasHeader("accept")||t.setHeader("accept","application/json"),t._json=!0,"boolean"==typeof e?void 0!==t.body&&(/^application\/x-www-form-urlencoded\b/.test(t.getHeader("content-type"))?t.body=t._qs.rfc3986(t.body):t.body=U(t.body),t.hasHeader("content-type")||t.setHeader("content-type","application/json")):(t.body=U(e),t.hasHeader("content-type")||t.setHeader("content-type","application/json")),"function"==typeof t.jsonReviver&&(t._jsonReviver=t.jsonReviver),t},s.prototype.getHeader=function(e,t){var r,o,n,a=this;return t||(t=a.headers),Object.keys(t).forEach(function(a){a.length===e.length&&(o=new RegExp(e,"i"),n=a.match(o),n&&(r=t[a]))}),r},s.prototype.auth=function(e,t,r,o){var n=this;return n._auth.onRequest(e,t,r,o),n},s.prototype.aws=function(e,t){var r=this;if(!t)return r._aws=e,r;var o=new Date;r.setHeader("date",o.toUTCString());var n={key:e.key,secret:e.secret,verb:r.method.toUpperCase(),date:o,contentType:r.getHeader("content-type")||"",md5:r.getHeader("content-md5")||"",amazonHeaders:y.canonicalizeHeaders(r.headers)},a=r.uri.path;return e.bucket&&a?n.resource="/"+e.bucket+a:e.bucket&&!a?n.resource="/"+e.bucket:!e.bucket&&a?n.resource=a:e.bucket||a||(n.resource="/"),n.resource=y.canonicalizeResource(n.resource),r.setHeader("authorization",y.authorization(n)),r},s.prototype.httpSignature=function(e){var t=this;return b.signRequest({getHeader:function(e){return t.getHeader(e,t.headers)},setHeader:function(e,r){t.setHeader(e,r)},method:t.method,path:t.path},e),u("httpSignature authorization",t.getHeader("authorization")),t},s.prototype.hawk=function(e){var t=this;t.setHeader("Authorization",g.client.header(t.uri,t.method,e).field)},s.prototype.oauth=function(e){var t=this;return t._oauth.onRequest(e),t},s.prototype.jar=function(e){var t,r=this;if(0===r._redirect.redirectsFollowed&&(r.originalCookieHeader=r.getHeader("cookie")),e){var o=e&&e.getCookieString?e:D,n=r.uri.href;o&&(t=o.getCookieString(n))}else t=!1,r._disableCookies=!0;return t&&t.length&&(r.originalCookieHeader?r.setHeader("cookie",r.originalCookieHeader+"; "+t):r.setHeader("cookie",t)),r._jar=e,r},s.prototype.pipe=function(e,t){var r=this;if(!r.response)return r.dests.push(e),l.Stream.prototype.pipe.call(r,e,t),e;if(r._destdata)r.emit("error",new Error("You cannot pipe after data has been emitted from the response."));else{if(!r._ended)return l.Stream.prototype.pipe.call(r,e,t),r.pipeDest(e),e;r.emit("error",new Error("You cannot pipe after the response has been ended."))}},s.prototype.write=function(){var e=this;return e._started||e.start(),e.req.write.apply(e.req,arguments)},s.prototype.end=function(e){var t=this;e&&t.write(e),t._started||t.start(),t.req.end()},s.prototype.pause=function(){var e=this;e.responseContent?e.responseContent.pause.apply(e.responseContent,arguments):e._paused=!0},s.prototype.resume=function(){var e=this;e.responseContent?e.responseContent.resume.apply(e.responseContent,arguments):e._paused=!1},s.prototype.destroy=function(){var e=this;e._ended?e.response&&e.response.destroy():e.end()},s.defaultProxyHeaderWhiteList=R.defaultProxyHeaderWhiteList.slice(),s.defaultProxyHeaderExclusiveList=R.defaultProxyHeaderExclusiveList.slice(),s.prototype.toJSON=a,module.exports=s}).call(this,require("FWaASH"),require("buffer").Buffer);


},{"./lib/auth":137,"./lib/cookies":138,"./lib/getProxyFromURI":139,"./lib/har":140,"./lib/helpers":141,"./lib/multipart":142,"./lib/oauth":143,"./lib/querystring":144,"./lib/redirect":145,"./lib/tunnel":146,"FWaASH":67,"aws-sign2":147,"bl":148,"buffer":49,"caseless":159,"forever-agent":163,"form-data":164,"hawk":190,"http":60,"http-signature":191,"https":64,"mime-types":208,"stream":73,"stringstream":217,"url":298,"util":81,"zlib":48}],227:[function(require,module,exports){
  (function(n){var e;if(n.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);e=function(){return crypto.getRandomValues(r),r}}if(!e){var o=new Array(16);e=function(){for(var n,e=0;16>e;e++)0===(3&e)&&(n=4294967296*Math.random()),o[e]=n>>>((3&e)<<3)&255;return o}}module.exports=e}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{}],228:[function(require,module,exports){
  function parse(e,s,r){var t=s&&r||0,n=0;for(s=s||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){16>n&&(s[t+n++]=_hexToByte[e])});16>n;)s[t+n++]=0;return s}function unparse(e,s){var r=s||0,t=_byteToHex;return t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+"-"+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]+t[e[r++]]}function v1(e,s,r){var t=s&&r||0,n=s||[];e=e||{};var o=void 0!==e.clockseq?e.clockseq:_clockseq,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),u=void 0!==e.nsecs?e.nsecs:_lastNSecs+1,c=a-_lastMSecs+(u-_lastNSecs)/1e4;if(0>c&&void 0===e.clockseq&&(o=o+1&16383),(0>c||a>_lastMSecs)&&void 0===e.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs=a,_lastNSecs=u,_clockseq=o,a+=122192928e5;var i=(1e4*(268435455&a)+u)%4294967296;n[t++]=i>>>24&255,n[t++]=i>>>16&255,n[t++]=i>>>8&255,n[t++]=255&i;var _=a/4294967296*1e4&268435455;n[t++]=_>>>8&255,n[t++]=255&_,n[t++]=_>>>24&15|16,n[t++]=_>>>16&255,n[t++]=o>>>8|128,n[t++]=255&o;for(var d=e.node||_nodeId,v=0;6>v;v++)n[t+v]=d[v];return s?s:unparse(n)}function v4(e,s,r){var t=s&&r||0;"string"==typeof e&&(s="binary"==e?new Array(16):null,e=null),e=e||{};var n=e.random||(e.rng||_rng)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,s)for(var o=0;16>o;o++)s[t+o]=n[o];return s||unparse(n)}for(var _rng=require("./rng"),_byteToHex=[],_hexToByte={},i=0;256>i;i++)_byteToHex[i]=(i+256).toString(16).substr(1),_hexToByte[_byteToHex[i]]=i;var _seedBytes=_rng(),_nodeId=[1|_seedBytes[0],_seedBytes[1],_seedBytes[2],_seedBytes[3],_seedBytes[4],_seedBytes[5]],_clockseq=16383&(_seedBytes[6]<<8|_seedBytes[7]),_lastMSecs=0,_lastNSecs=0,uuid=v4;uuid.v1=v1,uuid.v4=v4,uuid.parse=parse,uuid.unparse=unparse,module.exports=uuid;


},{"./rng":227}],229:[function(require,module,exports){
  "use strict";function DashMapGenerator(){var e=function(e,s){var r,i=e.profiles;switch(i.name){case"isoff-on-demand":r=new ProfileOnDemand(s);break;case"isoff-live":r=new ProfileLiveFull(s);break;case"isoff-main":r=new ProfileMain(s);break;default:r=new ProfileMain(s)}var n=e.getMap(r);return n.profile=i,n.location=e.location,n},s=function(e,s){var r=-1,i=!1;if(s&&s.length)for(var n=s[s.length-1].id,a=e.length-1;a>=0;a--){if(e[a].id===n){i=!0;break}r=a}else r=0;return{minIndex:r,minIndexFound:i}},r=function(e,r,i){for(var n={periods:[]},a=0;a<r.periods.length;a++){for(var t={asets:[]},o=0;o<r.periods[a].asets.length;o++){for(var l={reps:[]},p=0;p<r.periods[a].asets[o].reps.length;p++){var d={},f=new ProfileLiveFull(i),m=f.getSegments(e,e.periods[a],e.periods[a].adaptationSets[o],e.periods[a].adaptationSets[o].representations[p]),u=s(m.segments,r.periods[a].asets[o].reps[p].segments),g=u.minIndex,h=u.minIndexFound,P=m.segments.slice(0);d.segments=h&&g>-1?P.splice(g):[],l.reps.push(d);for(var c=r.periods[a].asets[o].reps[p].segments.length,v=0;c>v&&r.periods[a].asets[o].reps[p].segments[0].id!==m.segments[0].id;v++)r.periods[a].asets[o].reps[p].segments.splice(0,1);for(var M=m.segments.length,D=0;M>D;D++)r.periods[a].asets[o].reps[p].segments[D]||r.periods[a].asets[o].reps[p].segments.push(m.segments[D])}t.asets.push(l)}return n.periods.push(t),{map:r,mapAddToP2P:n}}};this.createMapDash=e,this.updateMapDash=r,this._calcMinIndexes=s}var _=require("lodash"),ProfileOnDemand=require("./MPDProfiles/ProfileOnDemand"),ProfileLiveFull=require("./MPDProfiles/ProfileLiveFull"),ProfileMain=require("./MPDProfiles/ProfileMain");module.exports=DashMapGenerator;


},{"./MPDProfiles/ProfileLiveFull":232,"./MPDProfiles/ProfileMain":233,"./MPDProfiles/ProfileOnDemand":234,"lodash":252}],230:[function(require,module,exports){
  "use strict";var conf=require("./conf"),Downloader=require("streamroot-downloader").Downloader,utils=require("./utils/utils"),m3u8=require("streamroot-m3u8"),Stream=require("stream"),AesKeysHelper=require("./utils/AesKeysHelper"),downloader=new Downloader,HlsMapGenerator=function(){var e=new AesKeysHelper,t=function(e){var t=e.items.StreamItem.length,r=e.items.PlaylistItem.length,s=e.items.MediaItem.length,i=e.items.IframeStreamItem.length;return 0!==t&&0===r&&0===s&&0===i},r=function(e){var t=e.items.StreamItem.length,r=e.items.PlaylistItem.length,s=e.items.MediaItem.length,i=e.items.IframeStreamItem.length;return 0!==r&&0===t&&0===s&&0===i},s=function(t,r,s,i){var n,a,u=s.attributes.get("resolution"),o=0,l=t.items.PlaylistItem;u&&u.length&&u.length>=2&&(n=u[0],a=u[1]);var m={bandwidth:s.attributes.get("bandwidth")||2e5,width:n,height:a,fourCC:null,codecs:null,init:null,mime:null,hasSegmentHashes:!1,segments:[]},p=t.get("mediaSequence")||0;t.properties.liveCutOffset&&(p+=t.properties.liveCutOffset);for(var d=0;d<l.length;d++){var f=l[d],c={time:o,duration:f.properties.duration,url:utils.absURL(r,f.properties.uri)};c.id=p+d;var v=f.get("key");v&&(c.parserKey=v),o+=c.duration,m.segments.push(c)}utils.asyncMap(m.segments,function(t,s,i){if(t.parserKey)switch(t.parserKey.method){case"AES-128":t.key={},t.key.method=t.parserKey.method,t.key.url=utils.absURL(r,t.parserKey.url),t.parserKey.iv?t.key.iv=t.parserKey.iv:t.key.iv=e.getIV(t.id),delete t.parserKey,e.getAESKey(t.key.url,function(e,r){e?i(e):(t.key.aesKey=r,i())});break;case"NONE":delete t.parserKey,i();break;default:i(new Error("Unsupported encryption method"))}else i()},function(e){i(e,m)})},i=function(e,t){var r,s=-1;do r=s,s=e.indexOf("#EXT-X-KEY",s+1);while(-1!=s&&t>s);if(-1!=r){var i=e.indexOf("\n");return e.substring(r,i+1)}},n=function(e,t){var r=t.indexOf("#EXTINF",e);return{index:r,payloadText:t.substr(r)}},a=function(e){return function(t,a,u){var l=t.url,m=t.streamItem,p={url:l,responseType:"text"};downloader.getURL(p,function(t,a){if(t)return t.message="Could not retrieve manifest || Previous error: "+t.message,void u(t);var l=m3u8.createStream();l.on("m3u",function(t){r(t)&&(o(t,e),s(t,p.url,m,u))});var d=new Stream.Readable,f=a.response;if(f.indexOf("#EXT-X-ENDLIST")>-1||f.indexOf("#EXT-X-PLAYLIST-TYPE:VOD")>-1);else if(conf.PLAYLIST_HLS_KEEP_LAST_LINES){var c=f.substring(0,f.indexOf("#EXTINF")),v=utils.occurrences(f,"\n"),g=utils.occurrences(c,"\n"),h=v-g,y=Math.max(0,h-conf.PLAYLIST_HLS_KEEP_LAST_LINES),L=utils.nthChar(f,"\n",g+y-1),S=n(L,f);L=S.index;var I=utils.occurrences(f,"#EXTINF",L),E=S.payloadText,T=i(f,L)||"";f=c+T+E,l.m3u.properties.liveCutOffset=I}d.push(f),d.push(null),d.pipe(l)})}},u=function(e,i,n,u,l,m){if(t(e)){for(var p,d=[],f=0;f<e.items.StreamItem.length;f++){p=e.items.StreamItem[f];var c={streamItem:p,url:utils.absURL(i,p.properties.uri)};d.push(c)}m.m3u=e,utils.asyncMap(d,a(m),function(e,t){e?n(e):(m.periods[0].asets[0].reps=t,u(m,n))})}else if(r(e)){var v=[{attributes:{}}];v.get=function(){};var g={attributes:v,properties:{}};o(e,m),s(e,i,g,function(e,t){e?n(e):(m.periods[0].asets[0].reps=[t],l(m,n))})}else n(new Error("unsupported playlist"))},o=function(e,t){var r=t.isLive;"VOD"===e.get("playlistType")?t.isLive=!1:t.isLive=!0;void 0===r||r&&t.isLive||!r&&!t.isLive},l=function(e,t,r){function s(e,t){if(e.isLive===!1){for(var r,s=0,i=0;r=e.periods[0].asets[0].reps[0].segments[i];i++)s+=r.duration;e.periods[0].duration=s}t(null,e)}var i={periods:[{asets:[{reps:[]}]}]},n=m3u8.createStream(),a=new Stream.Readable;a.push(e),a.push(null),n.on("m3u",function(e){i.isLive=void 0,u(e,t,r,s,s,i)}),a.pipe(n)},m=function(e,t){for(var r=e.segments.length,s=0;r>s&&e.segments[0].url!==t.segments[0].url;s++)e.segments.splice(0,1);for(var i=t.segments.length,n=e.segments.length;i>n;n++){var a=e.segments.length;0===a?e.segments.push(t.segments[n]):(t.segments[n].time=e.segments[a-1].time+e.segments[a-1].duration,e.segments.push(t.segments[n]))}return e},p=function(e,t){for(var r=0;r<e.periods[0].asets.length;r++)for(var s=0;s<e.periods[0].asets[r].reps.length;s++){var i=e.periods[0].asets[r].reps[s],n=t.periods[0].asets[r].reps[s];e.periods[0].asets[r].reps[s]=m(i,n)}return e},d=function(e,t,r){function s(t,r){t=p(e,t),r(null,{map:t,mapAddToP2P:t})}function i(e,t){t(new Error("This function should never be called"))}var n=e.m3u,a={periods:[{asets:[{reps:[]}]}],isLive:e.isLive};u(n,t,r,s,i,a)},f=function(e,t,r,s){function i(e,t){t(new Error("This function should never be called"))}function n(e,r){e=p(t,e),r(null,{map:e,mapAddToP2P:e})}var a={periods:[{asets:[{reps:[]}]}],isLive:t.isLive},o=m3u8.createStream(),l=new Stream.Readable;l.push(e),l.push(null),o.on("m3u",function(e){a.isLive=void 0,u(e,r,s,i,n,a)}),l.pipe(o)};this.updateMapMasterPlaylist=d,this.updateMapMediaPlaylist=f,this.createMapHls=l};module.exports=HlsMapGenerator;


},{"./conf":246,"./utils/AesKeysHelper":247,"./utils/utils":251,"stream":73,"streamroot-downloader":131,"streamroot-m3u8":261}],231:[function(require,module,exports){
  "use strict";var JSPack=require("./utils/jspack"),Long=require("./utils/long"),InitializationBuilder=function(){var e=new Date,t=2082844800+Math.floor(e.getTime()/1e3),a=Long.fromNumber(t,!0),n=a,c={audio:2,video:2,text:0},i=1,L=3,o=new JSPack,s=0,d=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return new Uint8Array(t)},l=function(e){e=r(e);for(var t,a,n,c,i,L,s,d,l,g,h={audio:[],video:[]},P=32,k=o.Pack(">L4s4sL4s4s4s4s",[P,"ftyp","isom",1,"isom","avc1","mp42","dash"]),H=B(e),f=v(e),A=m(e),U=0;U<e.AudioQualityLevels;U++)t=u("audio",e,U),a=8+H.length+t.length+f.length,n=o.Pack(">L4s",[a,"moov"]),c=n.concat(H,f,t),i=new Uint8Array(k.concat(c)),h.audio.push(i);for(U=0;U<e.VideoQualityLevels;U++)L=u("video",e,U),s=8+H.length+L.length+A.length,d=o.Pack(">L4s",[s,"moov"]),l=d.concat(H,A,L),g=new Uint8Array(k.concat(l)),h.video.push(g);return h},r=function(e){var t,a,n,c,i,L,o=null;e.TimeScale=e.TimeScale||1e7,e.SamplingRate=[],e.Bitrate=[],e.AACL=[],e.acodec=[];for(var s=0;s<e.StreamIndex.length;s++)if(o=e.StreamIndex[s],"video"==o.Type){e.VideoQualityLevels=o.QualityLevel.length,e.MaxHeight=[],e.MaxWidth=[],e.sequenceParameterSetNALUnit=[],e.pictureParameterSetNALUnit=[],t=0;for(var d=0;d<e.VideoQualityLevels;d++){if(a=o.QualityLevel[d],n=a.FourCC,c=a.CodecPrivateData,e.vcodec=n,e.MaxHeight.push(a.MaxHeight),e.MaxWidth.push(a.MaxWidth),"AVC1"==n||"H264"==n||"X264"==n||"DAVC"==n){var l=c.split("00000001");e.sequenceParameterSetNALUnit.push(l[1]),e.pictureParameterSetNALUnit.push(l[2]),e.vcodec="H264"}t++}(null===e.VideoQualityLevels||void 0===e.VideoQualityLevels||isNaN(e.VideoQualityLevels))&&(e.VideoQualityLevels=t)}else if("audio"==o.Type){e.AudioQualityLevels=o.QualityLevel.length,t=0;for(var d=0;d<e.AudioQualityLevels;d++)a=o.QualityLevel[d],n=a.FourCC,c=a.CodecPrivateData,i=a.SamplingRate,L=a.Bitrate,e.acodec.push(n),e.SamplingRate.push(i),e.Bitrate.push(L),e.AACL.push(c),t++;(null===e.AudioQualityLevels||void 0===e.AudioQualityLevels||isNaN(e.AudioQualityLevels))&&(e.AudioQualityLevels=t)}return e},u=function(e,t,L){var s,d,l,r,u,h,P,k,v,m,B,H,f,A,U=t.Duration,p=[65536,0,0,0,65536,0,0,0,1073741824],y=t.TimeScale,x=g(e,L,t),Q=45,S=o.Pack(">L4sL",[Q,"hdlr",0]),w="";return U=Long.fromNumber(U,!0),s="audio"==e?256:0,"video"==e?(d=t.MaxWidth[L],d<<=16,l=t.MaxHeight[L],l<<=16):(d=0,l=0),1===i?(r=104,u=o.Pack(">L4sL",[r,"tkhd",16777223]),u=u.concat(o.Pack(">LLLLLLLL",[a.getHighBitsUnsigned(),a.getLowBitsUnsigned(),n.getHighBitsUnsigned(),n.getLowBitsUnsigned(),c[e],0,U.getHighBitsUnsigned(),U.getLowBitsUnsigned()]))):0===i&&(r=92,u=o.Pack(">L4sL",[r,"tkhd",7]),u=u.concat(o.Pack(">LLLLL",[a,n,c[e],0,U]))),u=u.concat(o.Pack(">dhhhH9l",[0,0,0,s,0].concat(p)),o.Pack(">LL",[d,l])),1===i?(h=o.Pack(">L4sL",[44,"mdhd",16777216]),h=h.concat(o.Pack(">LLLLLLL",[a.getHighBitsUnsigned(),a.getLowBitsUnsigned(),n.getHighBitsUnsigned(),n.getLowBitsUnsigned(),y,U.getHighBitsUnsigned(),U.getLowBitsUnsigned()]))):0===i&&(h=o.Pack(">L4sL",[32,"mdhd",0]),h=h.concat(o.Pack(">LLLL",[a,n,y,U]))),h=h.concat(o.Pack(">HH",[21956,0])),"video"==e?(P="VideoHandler",k="vide"):"audio"==e?(P="AudioHandler",k="soun"):(P="Undfd",k="ndfd"),S=S.concat(o.Pack(">L4s3L12sB",[0,k,0,0,0,P,0])),v=8+h.length+S.length+x.length,m=o.Pack(">L4s",[v,"mdia"]),B=8+r+w.length+v,H=o.Pack(">L4s",[B,"trak"]),f=m.concat(h,S,x),A=H.concat(u,f)},g=function(e,t,a){var n,c,i,L,s,d,l,r=o.Pack(">L4sLd",[20,"vmhd",1,0]),u=o.Pack(">L4sLhH",[16,"smhd",0,0,0]),g=o.Pack(">L4sL",[20,"nmhd",0]);return"video"==e?n=r:"audio"==e?n=u:"metad"==e&&(n=g),c=36,i=o.Pack(">L4sL4sL",[c,"dinf",28,"dref",0]),i=i.concat(o.Pack(">LL4sL",[1,12,"url ",1])),L=h(e,t,a),s=8+n.length+c+L.length,d=o.Pack(">L4s",[s,"minf"]),l=d.concat(n,i,L)},h=function(e,t,a){var n,c,i,L,d,l,r,u,g,h,v,m,B,H,f,A,U,p,y=o.Pack(">L4sLL",[16,"stts",0,0]),x=o.Pack(">L4sLL",[16,"stsc",0,0]),Q=o.Pack(">L4sLL",[16,"stco",0,0]),S=o.Pack(">L4sLLL",[20,"stsz",0,0,0]);return"video"===e?("H264"==a.vcodec?(n="avc1",c=k(t,a)):"WVC1"==a.vcodec,d=86+c.length,l=a.MaxWidth[t],r=a.MaxHeight[t],u=4718592,g=4718592,h="\fVideoHandler",v=24,B=o.Pack(">L4sLHH",[d,n,0,0,1]),B=B.concat(o.Pack(">ddHH",[0,0,l,r]),o.Pack(">LL",[u,g]),o.Pack(">LH32sHh",[0,1,h,v,-1]),c)):"audio"==e&&("AACL"==a.acodec[s]?(i="mp4a",L=P(a)):"WMAP"==a.acodec[s],d=36+L.length,m=48e3<<16,B=o.Pack(">L4sLHH",[d,i,0,0,1]),B=B.concat(o.Pack(">dHHLL",[0,2,16,0,m]),L)),H=16+B.length,f=o.Pack(">L4sLL",[H,"stsd",0,1]),f=f.concat(B),A=8+f.length+S.length+x.length+y.length+Q.length,U=o.Pack(">L4s",[A,"stbl"]),p=U.concat(f,S,x,y,Q)},P=function(e){var t,a,n,c,i,L,l,r,u,g,h,P,k,v,m,B,H,f,A=e.AACL[s];return""===A&&(A="1210"),A=d(A),t=3,a=2155905024+A.length+18+8,n=0,c=0,i=o.Pack(">BLHB",[t,a,n,c]),t=4,a=2155905024+A.length+18,L=64,l=21,r=[0,48,0],u=128e3,g=128e3,h=o.Pack(">BLBB3B",[t,a,L,l].concat(r)),h=h.concat(o.Pack(">LL",[u,g])),t=5,a=2155905024+A.length,P=o.Pack(">BL",[t,a]),k=o.Pack(">3H",[1664,32896,258]),v=12+i.length+h.length+P.length+A.length+k.length,m=o.Pack(">L4sL",[v,"esds",0]),0!==A.length?(B=">"+A.length+"B",H=o.Pack(B,A),f=m.concat(i,h,P,H,k)):f=m.concat(i,h,P,k),f},k=function(e,t){var a,n,c,i,L,s,l,r,u,g,h=t.sequenceParameterSetNALUnit[e],P=t.pictureParameterSetNALUnit[e],k=3,v=1,m=1;return h=d(h),P=d(P),a=h.length,n=P.length,c=h[1],i=h[2],L=h[3],s=o.Pack(">BBBB",[1,c,i,L]),s=s.concat(o.Pack(">BB",[252+k,224+v])),s=s.concat(o.Pack(">H",[a])),l=">"+a+"B",s=s.concat(o.Pack(l,h)),s=s.concat(o.Pack(">B",[m])),s=s.concat(o.Pack(">H",[n])),l=">"+n+"B",s=s.concat(o.Pack(l,P)),r=8+s.length,u=o.Pack(">L4s",[r,"avcC"]),g=u.concat(s)},v=function(){var e=40,t=o.Pack(">L4s",[e,"mvex"]),a=o.Pack(">L4sLLLLLL",[32,"trex",0,2,1,1,1,0]),n=t.concat(a);return n},m=function(){var e=40,t=o.Pack(">L4s",[e,"mvex"]),a=o.Pack(">L4sLLLLLL",[32,"trex",0,2,1,1,1,0]),n=t.concat(a);return n},B=function(e){var t,c,s=e.TimeScale,d=e.Duration,l=65536,r=256,u=0,g=0,h=[65536,0,0,0,65536,0,0,0,1073741824],P=[0,0,0,0,0,0];return d=Long.fromNumber(d,!0),1===i?(t=120,c=o.Pack(">L4sL",[t,"mvhd",16777216]),c=c.concat(o.Pack(">LLLLLLL",[a.getHighBitsUnsigned(),a.getLowBitsUnsigned(),n.getHighBitsUnsigned(),n.getLowBitsUnsigned(),s,d.getHighBitsUnsigned(),d.getLowBitsUnsigned()]))):0===i&&(t=108,c=o.Pack(">L4sL",[t,"mvhd",0]),c=c.concat(o.Pack(">LLLL",[a,n,s,d]))),c=c.concat(o.Pack(">LHHd9L",[l,r,u,g].concat(h)),o.Pack(">6L",P),o.Pack(">L",[L]))};this.buildInits=l};module.exports=InitializationBuilder;


},{"./utils/jspack":249,"./utils/long":250}],232:[function(require,module,exports){
  "use strict";var SegmentList=require("../MediaPresentation/SegmentList"),SegmentBase=require("../MediaPresentation/SegmentBase"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate"),ProfileLiveFull=function(e){this.url_mpd=e,this.map={periods:[]};var t=function(e,t,s,n){var m;if(n.segmentBase){var i=new SegmentBase(n.segmentBase,this.url_mpd);m=i.getSegments(n)}else if(n.segmentList){var a=new SegmentList(n,this.url_mpd);m=a.getSegments()}else if(s.segmentTemplate||n.segmentTemplate){var g=t.baseURLs.length?t.baseURLs[0]:"",r=n.segmentTemplate?n.segmentTemplate:s.segmentTemplate,l=new SegmentTemplate(r,this.url_mpd);m=l.getSegments(e,t,n,g)}return m};this.getSegments=t};module.exports=ProfileLiveFull;


},{"../MediaPresentation/SegmentBase":240,"../MediaPresentation/SegmentList":241,"../MediaPresentation/SegmentTemplate":242}],233:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentList=require("../MediaPresentation/SegmentList"),SegmentBase=require("../MediaPresentation/SegmentBase"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate"),ProfileMain=function(e){this.url_mpd=e,this.map={periods:[]};var t=function(e,t,s,n){var m;if(n.segmentBase){var i=new SegmentBase(n.segmentBase,this.url_mpd);m=i.getSegments(n)}else if(n.segmentList){var a=new SegmentList(n,this.url_mpd);m=a.getSegments()}else if(s.segmentTemplate||n.segmentTemplate){var r=t.baseURLs.length?t.baseURLs[0]:"",g=n.segmentTemplate?n.segmentTemplate:s.segmentTemplate,l=new SegmentTemplate(g,this.url_mpd);m=l.getSegments(e,t,n,r)}return m};this.getSegments=t};module.exports=ProfileMain;


},{"../MediaPresentation/SegmentBase":240,"../MediaPresentation/SegmentList":241,"../MediaPresentation/SegmentTemplate":242,"../utils/utils":251}],234:[function(require,module,exports){
  "use strict";var SegmentList=require("../MediaPresentation/SegmentList"),SegmentBase=require("../MediaPresentation/SegmentBase"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate"),ProfileOnDemand=function(e){this.url_mpd=e,this.map={periods:[]};var t=function(e,t,n,s){var m;if(s.segmentBase){var a=new SegmentBase(s.segmentBase,this.url_mpd);m=a.getSegments(s)}else if(s.segmentList){e.profiles.name="main";var i=new SegmentList(s,this.url_mpd);m=i.getSegments()}else if(n.segmentTemplate||s.segmentTemplate){e.profiles.name="main";var r=t.baseURLs.length?t.baseURLs[0]:"",g=s.segmentTemplate?s.segmentTemplate:n.segmentTemplate,l=new SegmentTemplate(g,this.url_mpd);m=l.getSegments(e,t,s,r)}return m};this.getSegments=t};module.exports=ProfileOnDemand;


},{"../MediaPresentation/SegmentBase":240,"../MediaPresentation/SegmentList":241,"../MediaPresentation/SegmentTemplate":242}],235:[function(require,module,exports){
  "use strict";function MapGenerator(e){var r=new SmoothMapGenerator,a=new HlsMapGenerator,n=new DashMapGenerator,t=new ParseMPD,o=new ParseSmooth,s=function(e,r,n){var t;t="undefined"!=typeof window?window.location.protocol:"http:",e=e.replace(/^\/\//,t+"//"),null===r?downloader.getURL({url:e,responseType:"text"},function(r,a){return r?(r.message="Could not retrieve manifest Â«"+e+"Â» || Previous error: "+r.message,n(r)):void i(a.response,e,n)}):r.m3u?a.updateMapMasterPlaylist(r,e,n):downloader.getURL({url:e,responseType:"text"},function(a,t){return a?(a.message="Could not retrieve manifest Â«"+e+"Â» || Previous error: "+a.message,n(a)):void d(t.response,r,e,n)})},i=function(e,s,i){var d,u,f;try{d=l(e),f=m(e)}catch(h){return h.message="Unable to parse manifest Â«"+s+"Â» and create map || PREVIOUS ERROR: "+h.message,i(h)}if("hls"===f)a.createMapHls(e,s,function(e,r){return e?(e.message="Unable to parse manifest Â«"+s+"Â» and create map || PREVIOUS ERROR: "+e.message,i(e)):void p(r,f,i,null)});else{if("dash"===f){var c=t.parser(d);u=n.createMapDash(c,s)}else{if("smooth"!==f)return i(new Error("Unable to parse manifest Â«"+s+"Â» and create map || PREVIOUS ERROR: Unknown streaming format: "+f.toString()));var g=o.parser(d);u=r.createMapSmooth(g,s)}p(u,f,i,null)}},p=function(e,r,a,n){if(n){var t=e.periods[n.pptes.rep.id_period].asets[n.pptes.rep.id_aset].reps[n.pptes.rep.id_rep];if(t.init.value=n.response,"isoff-on-demand"==e.profile.name){try{t.segments=t.segments.concat(ISOBMFF.parseSIDX(n.response))}catch(o){return o.message="Unable to parse manifest and create map || PREVIOUS ERROR: "+o.message,a(o)}for(var s=0;s<t.segments.length;s++)t.segments[s].id=s}}for(var i,d=0;i=e.periods[d];d++)for(var l,m=0;l=i.asets[m];m++)for(var u,f=0;u=l.reps[f];f++){var h;if(u.init&&!u.init.value)return h="isoff-on-demand"==e.profile.name?{start:u.init.start,end:u.init.end}:"isoff-on-demand"==e.profile.name&&u.init.start&&u.init.end?{start:u.init.start,end:u.init.end}:null,void downloader.getURL({url:u.init.url,responseType:"arraybuffer",range:h,pptes:{rep:{id_period:d,id_aset:m,id_rep:f}}},function(n,t){n?a(n):p(e,r,a,t)})}a(null,{map:e,type:r})},d=function(e,s,i,p){var d=l(e),u=m(e);if("dash"===u){var f=t.parser(d);p(null,n.updateMapDash(f,s,i))}else if("smooth"===u){var h=o.parser(d);p(null,r.updateMapSmooth(h,s,i))}else{if("hls"!==u)return;a.updateMapMediaPlaylist(e,s,i,p)}},l=function(e){var r=new DomParser,a=r.parseFromString(e,"application/xml");return a},m=function(e){var r="#EXTM3U";if(e.slice(0,r.length)===r)return"hls";for(var a=l(e),n=[],t=0;t<a.childNodes.length;t++)"MPD"==a.childNodes[t].nodeName?n.push("dash"):"SmoothStreamingMedia"==a.childNodes[t].nodeName&&n.push("smooth");if(0===n.length)throw new Error("no relevant nodes detected for streaming format determination");if(n.length>1)throw new Error("too many nodes detected for streaming format determination");return n[0]},u=function(){for(var r in e)internalConf[r]=e[r]};u(),this.getMap=s}var DomParser=require("xmldom").DOMParser,ParseMPD=require("./Parser/MPDParser"),ParseSmooth=require("./Parser/SmoothParser"),DashMapGenerator=require("./DashMapGenerator"),SmoothMapGenerator=require("./SmoothMapGenerator"),HlsMapGenerator=require("./HlsMapGenerator"),Downloader=require("streamroot-downloader").Downloader,ISOBMFF=require("./utils/isobmffManager"),internalConf=require("./conf"),downloader=new Downloader;module.exports=MapGenerator;


},{"./DashMapGenerator":229,"./HlsMapGenerator":230,"./Parser/MPDParser":243,"./Parser/SmoothParser":244,"./SmoothMapGenerator":245,"./conf":246,"./utils/isobmffManager":248,"streamroot-downloader":131,"xmldom":262}],236:[function(require,module,exports){
  "use strict";var AdaptationSet=function(){this.contentProtection=null,this.segmentBase=null,this.segmentList=null,this.segmentTemplate=null,this.baseURLs=[],this.representations=[];var e=function(e,t,s){var i,n,a={};a.reps=[],this.lang&&(a.lang=this.lang),this.mimeType&&(a.type=this.mimeType.slice(0,this.mimeType.lastIndexOf("/"))),n=this.representations.length;for(var l=0;n>l;l++)i=this.representations[l],i.mimeType&&(a.type=i.mimeType.slice(0,i.mimeType.lastIndexOf("/"))),a.lang||i.lang&&(a.lang=i.lang),a.reps.push(i.getMap(l,e,t,s,this));return a};this.getMap=e};module.exports=AdaptationSet;


},{}],237:[function(require,module,exports){
  "use strict";var MPD=function(){this.baseURLs=[],this.location=null,this.mediaPresentationDuration=null,this.minBufferTime=null,this.periods=[],this.profiles={};var i=function(i){var t,e,s={};s.minBufferTime=this.minBufferTime,s.isLive="dynamic"===this.type,s.periods=[],e=this.periods.length;for(var r=0;e>r;r++)t=this.periods[r],t.duration||(t.duration=this.mediaPresentationDuration),s.periods.push(t.getMap(i,this));return s};this.getMap=i};module.exports=MPD;


},{}],238:[function(require,module,exports){
  "use strict";var Period=function(){this.contentProtection=null,this.duration=null,this.id=null,this.segmentBase=null,this.segmentList=null,this.segmentTemplate=null,this.baseURLs=[],this.adaptationSets=[];var t=function(t,e){var s,i,a={};a.duration=this.duration||e.mediaPresentationDuration,a.decodeTimeOffset=0,a.playbackOffset=0,a.asets=[],i=this.adaptationSets.length;for(var n=0;i>n;n++)s=this.adaptationSets[n],a.asets.push(s.getMap(t,e,this));return a};this.getMap=t};module.exports=Period;


},{}],239:[function(require,module,exports){
  "use strict";var Representation=function(){this.id=null,this.mimeType=null,this.bandwidth=null,this.codecs=null,this.contentProtection=null,this.frameRate=null,this.height=null,this.width=null,this.segmentBase=null,this.segmentList=null,this.baseURLs=[];var e=function(e,t,i,s,n){var h,l={};return l.bandwidth=this.bandwidth,l.mime=this.mimeType||n.mimeType,l.id_rep=e,l.type=l.mime.slice(0,l.mime.lastIndexOf("/")),l.codecs=this.codecs||n.codecs,l.width=this.width||n.width,l.height=this.height||n.height,l.codecs&&(l.codecs=l.codecs.replace(/0x/,"")),"unknown"==l.codecs&&(l.codecs="mp4a.40.2"),h=t.getSegments(i,s,n,this),l.segments=h.segments,l.init=h.init,l.url=h.url,l};this.getMap=e};module.exports=Representation;


},{}],240:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentBase=function(i,t){this.url_mpd=t,this.timescale=i.timescale||1,this.representationTimeOffset=i.representationTimeOffset||0,this.indexRange=i.indexRange,this.indexRangeExact=i.indexRangeExact||!1,this.initialization=i.initialization;var e=function(i){var t={segments:[],init:{url:utils.absURL(this.url_mpd,i.baseURLs[0]),start:this.initialization&&this.initialization.start||0,end:this.indexRange.end||this.initialization&&this.initialization.end,value:null},url:utils.absURL(this.url_mpd,i.baseURLs[0])};return t};this.getSegments=e};module.exports=SegmentBase;


},{"../utils/utils":251}],241:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentList=function(t,e){var s=function(t,e){for(var s=0;s<e.segmentList.segmentURLs.length;s++)void 0===t[s].media&&(t[s].media=e.baseURLs[0]);return t},i=function(){for(var t=0,e={segments:[]},s=0;s<this.segmentList.segmentURLs.length;s++){var i={url:utils.absURL(this.url_mpd,this.segmentList.segmentURLs[s].media),duration:this.segmentList.timescale&&this.segmentList.duration/this.segmentList.timescale||this.segmentList.duration,time:t,start:this.segmentList.segmentURLs[s].mediaRange?this.segmentList.segmentURLs[s].mediaRange.start:0,end:this.segmentList.segmentURLs[s].mediaRange?this.segmentList.segmentURLs[s].mediaRange.end:void 0,size:this.segmentList.segmentURLs[s].mediaRange?this.segmentList.segmentURLs[s].mediaRange.length:void 0,id:s};e.segments.push(i),t+=i.duration}return e.init={url:utils.absURL(this.url_mpd,this.segmentList.initialization),start:this.segmentList.initialization.start,end:this.segmentList.initialization.end,value:null},e};t.segmentList.segmentURLs=s(t.segmentList.segmentURLs,t),this.segmentList=t.segmentList,this.url_mpd=e,this.getSegments=i};module.exports=SegmentList;


},{"../utils/utils":251}],242:[function(require,module,exports){
  "use strict";var utils=require("../utils/utils"),SegmentTemplate=function(t,e){this.timescale=t?t.timescale:null,this.duration=t?t.duration:null,this.media=t?t.media:null,this.startNumber=t?t.startNumber:null,this.presentationTimeOffset=t?t.presentationTimeOffset:null,this.initialization=t?t.initialization:null,this.segmentTimeline=t?t.segmentTimeline:null,this.url_mpd=e;var i=function(t){if(null===t)return"Null template. Cannot merge.";for(var e in this)this.hasOwnProperty(e)&&(null===this[e]||void 0===this[e])&&(this[e]=t[e])},s=function(t,e,i,s){var a,n,r={segments:[]},l=i.bandwidth,m=0;if(this.segmentTimeline){var u;for(a=0;a<this.segmentTimeline.segments.length;a++){var h=this.segmentTimeline.segments[a];h.r||(h.r=0),(h.t||0===h.t)&&(u=h.t);for(var d=0;d<=h.r;d++)n={url:utils.absURL(this.url_mpd,s+this.media.replace("$RepresentationID$",i.id).replace("$Time$",u).replace("$Bandwidth$",l)),duration:h.d/this.timescale,time:u/this.timescale},n.id=t.isLive?Math.round(10*n.time):m,r.segments.push(n),u+=h.d,m++}}else{var o,p,c,g,$=this.startNumber||1,f=this.presentationTimeOffset||0;c=this.duration/this.timescale;var v=Date.now(),T=0;t.hasOwnProperty("suggestedPresentationDelay")&&(T=t.suggestedPresentationDelay),o=(v-t.availabilityStartTime)/1e3,o-=T,o-=T,p=Math.floor(o/c),$+=p,g=f/this.timescale+Math.floor(o);var b=g%c;if(g-=b,g-=c){var w=Math.floor(t.minimumUpdatePeriod/c);for(a=0;w>a;)n={url:utils.absURL(this.url_mpd,s+this.media.replace("$RepresentationID$",i.id).replace("$Number$",$).replace("$Bandwidth$",l)),duration:c,time:g},n.id=$,a++,r.segments.push(n),g+=n.duration,$++}else for($=this.startNumber||1,g=0,a=0;g<e.duration;)n={url:utils.absURL(this.url_mpd,s+this.media.replace("$RepresentationID$",i.id).replace("$Number$",$).replace("$Bandwidth$",l)),duration:this.timescale&&this.duration/this.timescale||this.duration,time:g},n.time+n.duration>e.duration&&(n.duration=e.duration-n.time),n.id=a,a++,r.segments.push(n),g+=n.duration,$++}return r.init={url:this.initialization&&utils.absURL(this.url_mpd,s+this.initialization.replace("$RepresentationID$",i.id).replace("$Bandwidth$",l))||r.segments[0].url,value:null},r};this.mergeTemplates=i,this.getSegments=s};module.exports=SegmentTemplate;


},{"../utils/utils":251}],243:[function(require,module,exports){
  "use strict";function ParseMPD(){var e=function(e){for(var t=0;t<e.childNodes.length;t++)if("MPD"==e.childNodes[t].nodeName)return C(e.childNodes[t])},t=function(e){return e},n=function(e){var t=/PT(([0-9]*)H)?(([0-9]*)M)?(([0-9.]*)S)?/,n=t.exec(e);return n?3600*parseFloat(n[2]||0)+60*parseFloat(n[4]||0)+parseFloat(n[6]||0):parseFloat(e)},r=function(e){var t=new Date(e).getTime();return t},a=function(e,t,n){var r=[];if(null===n)return r;for(var a=n.firstChild;null!==a;a=a.nextSibling)a.nodeName==e&&r.push(t(a));return r},i=function(e,t,n){return a(e,t,n)[0]||null},s=function(e,t,n){n=n||{};for(var r in e)"undefined"!=typeof t.attributes.getNamedItem(r)&&(n[r]=e[r](t.attributes.getNamedItem(r).value));return n},o=function(e){var t=/([0-9]+)(\/([0-9]+))?/.exec(e);return t?t[3]?parseFloat(t[1])/(parseFloat(t[3])||1):parseFloat(t[1]):1},u=function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);if(!t)return null;var n=parseInt(t[1]),r=parseInt(t[2]);return{start:n,end:r,length:r-n+1}},m={media:t,mediaRange:u,index:t,indexRange:u},p=function(e){return s(m,e)},d=function(e){return e.textContent},l=function(e){return e.attributes.range?u(e.attributes.range.value):e.attributes?e.attributes[0].value:void 0},f={timescale:parseInt,duration:parseInt,indexRange:u,presentationTimeOffset:parseInt,startNumber:parseInt},c=function(e){var t=s(f,e);return t.initialization=i("Initialization",l,e),t},g=function(e){var t=c(e);return t.timescale&&t.duration?t.durationSeconds=t.duration/t.timescale:t.durationSeconds=t.duration,t.segmentURLs=a("SegmentURL",p,e),t},v=function(e){var t=e.attributes.schemeIdUri;if(!t||"http://youtube.com/drm/2012/10/10"!=t.textContent)return null;for(var n={},r=e.firstElementChild;"undefined"!=typeof r;r=r.nextElementSibling)if("yt:SystemURL"===r.nodeName){var a=r.attributes.type.textContent;n[a]=r.textContent}return n},S={id:parseInt,profiles:t,width:parseInt,height:parseInt,frameRate:o,audioSamplingRate:parseInt,mimeType:t,codecs:t},I=function(e,t){var n=s(S,e,t);return n.baseURLs=a("BaseURL",d,e),n.segmentBase=i("SegmentBase",c,e),n.segmentList=i("SegmentList",g,e),n.segmentTemplate=i("SegmentTemplate",h,e),n.contentProtection=i("ContentProtection",v,e),n},P={id:t,bandwidth:parseInt,qualityRanking:parseInt},T=function(e){var t=I(e,new Representation);return s(P,e,t),t},b={timescale:parseInt,duration:parseInt,media:t,startNumber:parseInt,presentationTimeOffset:parseInt,initialization:t},h=function(e){var t=s(b,e);return t.segmentTimeline=i("SegmentTimeline",R,e),t},R=function(e){var t={segments:a("S",y,e)};return t},x={t:parseInt,d:parseInt,r:parseInt},y=function(e){var t=s(x,e);return t},L={lang:t},M=function(e){var t=I(e,new AdaptationSet);s(L,e,t),t.segmentTemplate=i("SegmentTemplate",h,e),t.representations=a("Representation",T,e),t.segmentList=i("SegmentList",g,e);var n,r,o=t.representations.length;for(n=0;o>n;n++)r=t.representations[n],"undefined"!=typeof t.segmentTemplate&&(r.segmentTemplate=new SegmentTemplate(r.segmentTemplate),r.segmentTemplate.mergeTemplates(t.segmentTemplate));return t},D={id:parseInt,start:n,duration:n},N=function(e){var t=I(e,new Period);return s(D,e,t),t.adaptationSets=a("AdaptationSet",M,e),t},U=function(e){var t=e.split(":"),n=t.length,r={};return r.name=t[n-2],r.year=t[n-1],r},w=function(e){return e.textContent},C=function(e){var o=new MPD;return s({mediaPresentationDuration:n,type:t,minBufferTime:n,maxSegmentDuration:n,minimumUpdatePeriod:n,availabilityStartTime:r,suggestedPresentationDelay:n,profiles:U},e,o),o.periods=a("Period",N,e),o.baseURLs=a("BaseURL",d,e),o.location=i("Location",w,e),o.isLive="dynamic"===o.type,o};this.parser=e}var MPD=require("../MediaPresentation/MPD"),Period=require("../MediaPresentation/Period"),AdaptationSet=require("../MediaPresentation/AdaptationSet"),Representation=require("../MediaPresentation/Representation"),SegmentTemplate=require("../MediaPresentation/SegmentTemplate");module.exports=ParseMPD;


},{"../MediaPresentation/AdaptationSet":236,"../MediaPresentation/MPD":237,"../MediaPresentation/Period":238,"../MediaPresentation/Representation":239,"../MediaPresentation/SegmentTemplate":242}],244:[function(require,module,exports){
  "use strict";function ParseSmooth(){var t=function(t){for(var r=0;r<t.childNodes.length;r++)if("SmoothStreamingMedia"==t.childNodes[r].nodeName)return e(t.childNodes[r])},e=function(t){var e={};e.MajorVersion=parseInt(t.getAttribute("MajorVersion")),e.MinorVersion=parseInt(t.getAttribute("MinorVersion")),e.Duration=parseInt(t.getAttribute("Duration")),e.Timescale=parseInt(t.getAttribute("TimeScale")||t.getAttribute("Timescale")),(null===e.Timescale||void 0===e.Timescale)&&(e.Timescale=1e7),e.IsLive=t.getAttribute("IsLive"),e.LookaheadCount=t.getAttribute("LookaheadCount"),e.DVRWindowLength=t.getAttribute("DVRWindowLength"),e.StreamIndex=[];for(var i=t.getElementsByTagName("StreamIndex"),a=0;a<i.length;a++)e.StreamIndex[a]=r(i[a]);return e},r=function(t){var e={},r=t.getAttribute("Type");e.Type=r,e.Chunks=parseInt(t.getAttribute("Chunks")),e.QualityLevels=parseInt(t.getAttribute("QualityLevels")),e.Url=t.getAttribute("Url"),e.Timescale=parseInt(t.getAttribute("TimeScale")||t.getAttribute("Timescale")||"10000000"),e.Name=t.getAttribute("Name"),"video"==r?(e.MaxWidth=parseInt(t.getAttribute("MaxWidth")),e.MaxHeight=parseInt(t.getAttribute("MaxHeight")),e.DisplayWidth=parseInt(t.getAttribute("DisplayWidth")),e.DisplayHeight=parseInt(t.getAttribute("DisplayHeight")),e.Subtype=t.getAttribute("Subtype")):"text"==r&&(e.Subtype=t.getAttribute("Subtype")),e.ParentStreamIndex=t.getAttribute("ParentStreamIndex"),e.ManifestOuput=t.getAttribute("ManifestOuput"),e.Subtype=t.getAttribute("Subtype"),e.QualityLevel=[],e.c=[];for(var n=t.getElementsByTagName("QualityLevel"),u=t.getElementsByTagName("c"),s=0;s<n.length;s++)e.QualityLevel[s]=i(n[s],r);for(var s=0;s<u.length;s++)e.c[s]=a(u[s],r);return e},i=function(t,e){var r={};return r.Index=parseInt(t.getAttribute("Index")),r.Bitrate=parseInt(t.getAttribute("Bitrate")),r.CodecPrivateData=t.getAttribute("CodecPrivateData"),r.Scheme=t.getAttribute("Scheme"),r.SchemeVersion=t.getAttribute("SchemeVersion"),r.BufferTime=t.getAttribute("BufferTime"),r.NominalBitrate=t.getAttribute("NominalBitrate"),r.HardwareProfile=t.getAttribute("HardwareProfile"),r.Index=parseInt(t.getAttribute("Index")),"video"==e?(r.MaxHeight=parseInt(t.getAttribute("MaxHeight")),r.MaxWidth=parseInt(t.getAttribute("MaxWidth")),r.FourCC=t.getAttribute("FourCC"),n(t,"NALUnitLengthField",r)):"audio"==e&&(r.SamplingRate=parseInt(t.getAttribute("SamplingRate")),r.Channels=parseInt(t.getAttribute("Channels")),r.BitsPerSample=parseInt(t.getAttribute("BitsPerSample")),r.PacketSize=parseInt(t.getAttribute("PacketSize")),r.AudioTag=t.getAttribute("AudioTag"),r.FourCC=t.getAttribute("FourCC")),r},a=function(t){var e={};if(e.d=parseInt(t.getAttribute("d")),n(t,"n",e),t.hasAttribute("t")){var r=t.getAttribute("t");if(conf.LONG_TIME){for(var i=conf.TIME_LENGTH,a=r.slice(-conf.TIME_LENGTH),u=0;"0"===a[u];)u+=1;i-=u,e.t=parseInt(r.slice(-i)),e.time_most_significant=parseInt(r.substring(0,r.length-i)||"0")}else e.t=parseInt(r)}return t.hasAttribute("r")&&(e.r=parseInt(t.getAttribute("r"))),e},n=function(t,e,r){t.hasAttribute(e)&&(r[e]=t.getAttribute(e))};this.parser=t}var conf=require("../conf");module.exports=ParseSmooth;


},{"../conf":246}],245:[function(require,module,exports){
  "use strict";function SmoothMapGenerator(){var e=function(e,t){var i,r,s={periods:[]},a=null;s.isLive=!1,void 0!==e.IsLive&&"true"===e.IsLive.toLowerCase()&&(s.isLive=!0);for(var o=0;o<e.StreamIndex.length;o++)i=e.StreamIndex[o].c[0].t||0,null===a?a=i:a>i&&(a=i);r=conf.HACK_OFFSET?a:0;var d=new InitBuilder,n=d.buildInits(e),p={asets:[]},l=e.Timescale||1e7;p.decodeTimeOffset=r,p.playbackOffset=r/l,p.duration=e.Duration/l;for(var o=0;o<e.StreamIndex.length;o++){var m={reps:new Array},u=e.StreamIndex[o];if("text"!=u.Type){u.Type&&(m.type=u.Type),u.Timescale&&(l=u.Timescale);for(var c=utils.rmQueryArgs(t).replace("/Manifest","").replace("/manifest","")+"/"+u.Url,h=0;h<u.QualityLevel.length;h++){var v=u.QualityLevel[h],g=v.Bitrate,f=v.FourCC,C="";if("audio"==u.Type)"AACL"==f?(C="mp4a.40.2",conf.SS_IMPLICIT_AAC_HE&&(C="mp4a.40.5")):"AACH"==f&&(C="mp4a.40.5");else if("video"==u.Type)if("AVC1"==f||"H264"==f||"X264"==f||"DAVC"==f){var y=v.CodecPrivateData.substring(10,12).toLowerCase(),T=v.CodecPrivateData.substring(12,14).toLowerCase(),A=v.CodecPrivateData.substring(14,16).toLowerCase();C="avc1."+y+T+A}else C="Error. Codec "+f+" not supported";var L={value:n[u.Type][h].buffer},D={bandwidth:g,fourCC:f,codecs:C,init:L,mime:m.type+"/mp4",segments:[]};"video"===u.Type&&(u.DisplayWidth?D.width=u.DisplayWidth:v.DisplayWidth?D.width=v.DisplayWidth:u.MaxWidth?D.width=u.MaxWidth:v.MaxWidth&&(D.width=v.MaxWidth),u.DisplayHeight?D.height=u.DisplayHeight:v.DisplayHeight?D.height=v.DisplayHeight:u.MaxHeight?D.height=u.MaxHeight:v.MaxHeight&&(D.height=v.MaxHeight));var M,w=u.c[0].t||0,x=u.c[0].time_most_significant;M=(w-r)/l;for(var I=c.replace("{bitrate}",g),S=0,H=0;H<u.c.length;H++){var b,_,P,W=u.c[H];isNaN(W.d)?void 0!==W.t&&u.c[H+1]&&(_=u.c[H+1].t-W.t):_=W.d,b=_/l,P=W.r||1;for(var Q=0;P>Q;Q++){var B={url:I.replace("{start time}",(x||"")+w.toString()),duration:b,time:M,timeCode:w,decodeTime:w-r},q=w/l,E=q;B.id=s.isLive?Math.floor(E):S,S++,M+=b,w+=_,D.segments.push(B)}}m.reps.push(D)}p.asets.push(m)}}return s.periods.push(p),s},t=function(e,t,i,r){var s={periods:[]},a={asets:[]},o=e.Timescale||1e7;r=t.periods[0].decodeTimeOffset,a.duration=e.Duration/o;for(var d=0;d<e.StreamIndex.length;d++){var n={reps:[]},p=e.StreamIndex[d];p.Type&&(n.type=p.Type),p.Timescale&&(o=p.Timescale);for(var l=utils.rmQueryArgs(i).replace("/Manifest","").replace("/manifest","")+"/"+p.Url,m=0;m<p.QualityLevel.length;m++){var u=p.QualityLevel[m],c=u.Bitrate,h=u.FourCC,v="";if("audio"==p.Type)"AACL"==h?v="mp4a.40.2":"AACH"==h&&(v="mp4a.40.5");else if("video"==p.Type)if("AVC1"==h||"H264"==h||"X264"==h||"DAVC"==h){var g=u.CodecPrivateData.substring(10,12).toLowerCase(),f=u.CodecPrivateData.substring(12,14).toLowerCase(),C=u.CodecPrivateData.substring(14,16).toLowerCase();v="avc1."+g+f+C}else v="Error. Codec "+h+" not supported";for(var y={bandwidth:c,fourCC:h,codecs:v,mime:n.type+"/mp4",segments:[]},T=p.c[0].t,A=p.c[0].time_most_significant,L=(T-r)/o,D=l.replace("{bitrate}",c),M=0;M<p.c.length;M++){var w,x,I,S=p.c[M];isNaN(S.d)?void 0!==S.t&&p.c[M+1]&&(x=p.c[M+1].t-S.t):x=S.d,w=x/o,I=S.r||1;for(var H=0;I>H;H++){var b=T/o,P=b,W={id:Math.floor(P),url:D.replace("{start time}",(A||"")+T.toString()),duration:w,time:L,timeCode:T,decodeTime:T-r};L+=w,T+=x,y.segments.push(W)}}for(var Q=-1,B=!1,q=y.segments.length-1;q>=0;q--)_.where(t.periods[0].asets[d].reps[m].segments,{id:y.segments[q].id}).length||B?B=!0:Q=q;var E=y.segments.slice(0),F={segments:B&&Q>-1?E.splice(Q):[]};n.reps.push(F);for(var N=t.periods[0].asets[d].reps[m].segments.length,q=0;N>q&&t.periods[0].asets[d].reps[m].segments[0].id!==y.segments[0].id;q++)t.periods[0].asets[d].reps[m].segments.splice(0,1);for(var O=y.segments.length,q=0;O>q;q++)t.periods[0].asets[d].reps[m].segments[q]||t.periods[0].asets[d].reps[m].segments.push(y.segments[q])}a.asets.push(n)}return s.periods.push(a),{map:t,mapAddToP2P:s}};this.createMapSmooth=e,this.updateMapSmooth=t}var conf=require("./conf"),_=require("lodash"),InitBuilder=require("./InitializationBuilder"),utils=require("./utils/utils");module.exports=SmoothMapGenerator;


},{"./InitializationBuilder":231,"./conf":246,"./utils/utils":251,"lodash":252}],246:[function(require,module,exports){
  "use strict";var Conf=function(){this.HACK_OFFSET=!0,this.PLAYLIST_HLS_KEEP_LAST_LINES=void 0,this.SS_IMPLICIT_AAC_HE=!1},conf=new Conf;module.exports=conf;


},{}],247:[function(require,module,exports){
  "use strict";var Downloader=require("streamroot-downloader").Downloader,downloader=new Downloader,AesKeysHelper=function(){var e={},r=function(e){var r=new Uint32Array([e]),n=new Uint8Array(r.buffer),o=new Uint8Array([n[3],n[2],n[1],n[0]]),t=new Uint8Array(16);return t.set(o,12),t},n=function(r,n){if(e[r])n(null,e[r]);else{var o={url:r,responseType:"arraybuffer"};downloader.getURL(o,function(o,t){if(o)n(o);else{var a=new Uint8Array(t.response);e[r]=a,n(null,a)}})}};this.getIV=r,this.getAESKey=n};module.exports=AesKeysHelper;


},{"streamroot-downloader":131}],248:[function(require,module,exports){
  var extractinit=function(t){for(var r=new DataView(t),e=0;e<t.byteLength;){var n=r.getUint32(e+4,!1);if(1936286840==n||1836019558==n)break;e+=r.getUint32(e,!1)}return new Uint8Array(t.slice(0,e))},parsesidx=function(t,r){for(var e=new DataView(t),n=0;1936286840!=e.getUint32(n+4,!1);)if(n+=e.getUint32(n,!1),n>=t.byteLength)throw new Error("Could not find sidx");var i=e.getUint32(n,!1)+n;if(i>t.byteLength)throw new Error("sidx terminates after array buffer");var a=e.getUint8(n+8);n+=12;var o=e.getUint32(n+4,!1);n+=8;var f,g;0===a?(f=e.getUint32(n,!1),g=e.getUint32(n+4,!1),n+=8):(f=(e.getUint32(n,!1)<<32)+e.getUint32(n+4,!1),g=(e.getUint32(n+8,!1)<<32)+e.getUint32(n+12,!1),n+=16),g+=i+(r||0);var U=e.getUint16(n+2,!1);n+=4;for(var s=g,d=f,w=[],v=0;U>v;v++){var h=e.getUint32(n,!1),u=2147483648&h;if(u)throw new Error("Unhandled indirect reference");h=2147483647&h;var c=e.getUint32(n+4,!1);n+=12,w.push({size:h,offset:s,duration:c/o,time:d/o}),s+=h,d+=c}if(n!=i)throw new Error("Error: final pos "+n+" differs from SIDX end "+i);return w};module.exports={parseSIDX:parsesidx,extractInit:extractinit};


},{}],249:[function(require,module,exports){
  var JSPack=function(){var e,n=!1,t=this;t._DeArray=function(e,n,t){return[e.slice(n,n+t)]},t._EnArray=function(e,n,t,a){for(var r=0;t>r;e[n+r]=a[r]?a[r]:0,r++);},t._DeChar=function(e,n){return String.fromCharCode(e[n])},t._EnChar=function(e,n,t){e[n]=t.charCodeAt(0)},t._DeInt=function(t,a){var r,i,c,o=n?e.len-1:0,s=n?-1:1,h=o+s*e.len;for(r=0,i=o,c=1;i!=h;r+=t[a+i]*c,i+=s,c*=256);return e.bSigned&&r&Math.pow(2,8*e.len-1)&&(r-=Math.pow(2,8*e.len)),r},t._EnInt=function(t,a,r){var i,c=n?e.len-1:0,o=n?-1:1,s=c+o*e.len;for(r=r<e.min?e.min:r>e.max?e.max:r,i=c;i!=s;t[a+i]=255&r,i+=o,r>>=8);},t._DeString=function(e,n,t){for(var a=new Array(t),r=0;t>r;a[r]=String.fromCharCode(e[n+r]),r++);return a.join("")},t._EnString=function(e,n,t,a){for(var r,i=0;t>i;e[n+i]=(r=a.charCodeAt(i))?r:0,i++);},t._De754=function(t,a){var r,i,c,o,s,h,_,l,u,f;for(_=e.mLen,l=8*e.len-e.mLen-1,f=(1<<l)-1,u=f>>1,o=n?0:e.len-1,s=n?1:-1,r=t[a+o],o+=s,h=-7,i=r&(1<<-h)-1,r>>=-h,h+=l;h>0;i=256*i+t[a+o],o+=s,h-=8);for(c=i&(1<<-h)-1,i>>=-h,h+=_;h>0;c=256*c+t[a+o],o+=s,h-=8);switch(i){case 0:i=1-u;break;case f:return c?NaN:(r?-1:1)*(1/0);default:c+=Math.pow(2,_),i-=u}return(r?-1:1)*c*Math.pow(2,i-_)},t._En754=function(t,a,r){var i,c,o,s,h,_,l,u,f,d;for(l=e.mLen,u=8*e.len-e.mLen-1,d=(1<<u)-1,f=d>>1,i=0>r?1:0,r=Math.abs(r),isNaN(r)||r==1/0?(o=isNaN(r)?1:0,c=d):(c=Math.floor(Math.log(r)/Math.LN2),r*(_=Math.pow(2,-c))<1&&(c--,_*=2),r+=c+f>=1?e.rt/_:e.rt*Math.pow(2,1-f),r*_>=2&&(c++,_/=2),c+f>=d?(o=0,c=d):c+f>=1?(o=(r*_-1)*Math.pow(2,l),c+=f):(o=r*Math.pow(2,f-1)*Math.pow(2,l),c=0)),s=n?e.len-1:0,h=n?-1:1;l>=8;t[a+s]=255&o,s+=h,o/=256,l-=8);for(c=c<<l|o,u+=l;u>0;t[a+s]=255&c,s+=h,c/=256,u-=8);t[a+s-h]|=128*i},t._sPattern="(\\d+)?([AxcbBhHsfdiIlL])",t._lenLut={A:1,x:1,c:1,b:1,B:1,h:2,H:2,s:1,f:4,d:8,i:4,I:4,l:4,L:4},t._elLut={A:{en:t._EnArray,de:t._DeArray},s:{en:t._EnString,de:t._DeString},c:{en:t._EnChar,de:t._DeChar},b:{en:t._EnInt,de:t._DeInt,len:1,bSigned:!0,min:-Math.pow(2,7),max:Math.pow(2,7)-1},B:{en:t._EnInt,de:t._DeInt,len:1,bSigned:!1,min:0,max:Math.pow(2,8)-1},h:{en:t._EnInt,de:t._DeInt,len:2,bSigned:!0,min:-Math.pow(2,15),max:Math.pow(2,15)-1},H:{en:t._EnInt,de:t._DeInt,len:2,bSigned:!1,min:0,max:Math.pow(2,16)-1},i:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!0,min:-Math.pow(2,31),max:Math.pow(2,31)-1},I:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!1,min:0,max:Math.pow(2,32)-1},l:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!0,min:-Math.pow(2,31),max:Math.pow(2,31)-1},L:{en:t._EnInt,de:t._DeInt,len:4,bSigned:!1,min:0,max:Math.pow(2,32)-1},f:{en:t._En754,de:t._De754,len:4,mLen:23,rt:Math.pow(2,-24)-Math.pow(2,-77)},d:{en:t._En754,de:t._De754,len:8,mLen:52,rt:0}},t._UnpackSeries=function(n,t,a,r){for(var i=e.de,c=[],o=0;n>o;c.push(i(a,r+o*t)),o++);return c},t._PackSeries=function(n,t,a,r,i,c){for(var o=e.en,s=0;n>s;o(a,r+s*t,i[c+s]),s++);},t.Unpack=function(t,a,r){n="<"!=t.charAt(0),r=r?r:0;for(var i,c,o,s=new RegExp(this._sPattern,"g"),h=[];i=s.exec(t);){if(c=void 0==i[1]||""==i[1]?1:parseInt(i[1]),o=this._lenLut[i[2]],r+c*o>a.length)return void 0;switch(i[2]){case"A":case"s":h.push(this._elLut[i[2]].de(a,r,c));break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":e=this._elLut[i[2]],h.push(this._UnpackSeries(c,o,a,r))}r+=c*o}return Array.prototype.concat.apply([],h)},t.PackTo=function(t,a,r,i){n="<"!=t.charAt(0);for(var c,o,s,h,_=new RegExp(this._sPattern,"g"),l=0;c=_.exec(t);){if(o=void 0==c[1]||""==c[1]?1:parseInt(c[1]),s=this._lenLut[c[2]],r+o*s>a.length)return!1;switch(c[2]){case"A":case"s":if(l+1>i.length)return!1;this._elLut[c[2]].en(a,r,o,i[l]),l+=1;break;case"c":case"b":case"B":case"h":case"H":case"i":case"I":case"l":case"L":case"f":case"d":if(e=this._elLut[c[2]],l+o>i.length)return!1;this._PackSeries(o,s,a,r,i,l),l+=o;break;case"x":for(h=0;o>h;h++)a[r+h]=0}r+=o*s}return a},t.Pack=function(e,n){return this.PackTo(e,new Array(this.CalcLength(e)),0,n)},t.CalcLength=function(e){for(var n,t=new RegExp(this._sPattern,"g"),a=0;n=t.exec(e);)a+=(void 0==n[1]||""==n[1]?1:parseInt(n[1]))*this._lenLut[n[2]];return a}};module.exports=JSPack;


},{}],250:[function(require,module,exports){
  var Long=function(t,n,i){this.low=0|t,this.high=0|n,this.unsigned=!!i},INT_CACHE={},UINT_CACHE={};Long.fromInt=function(t,n){var i,o;return n?(t>>>=0,t>=0&&256>t&&(o=UINT_CACHE[t])?o:(i=new Long(t,0>(0|t)?-1:0,!0),t>=0&&256>t&&(UINT_CACHE[t]=i),i)):(t=0|t,t>=-128&&128>t&&(o=INT_CACHE[t])?o:(i=new Long(t,0>t?-1:0,!1),t>=-128&&128>t&&(INT_CACHE[t]=i),i))},Long.fromNumber=function(t,n){return n=!!n,isNaN(t)||!isFinite(t)?Long.ZERO:!n&&-TWO_PWR_63_DBL>=t?Long.MIN_SIGNED_VALUE:n&&0>=t?Long.MIN_UNSIGNED_VALUE:!n&&t+1>=TWO_PWR_63_DBL?Long.MAX_SIGNED_VALUE:n&&t>=TWO_PWR_64_DBL?Long.MAX_UNSIGNED_VALUE:0>t?Long.fromNumber(-t,!1).negate():new Long(t%TWO_PWR_32_DBL|0,t/TWO_PWR_32_DBL|0,n)},Long.fromBits=function(t,n,i){return new Long(t,n,i)},Long.from28Bits=function(t,n,i,o){return Long.fromBits(t|n<<28,n>>>4|i<<24,o)},Long.fromString=function(t,n,i){if(0==t.length)throw new Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return Long.ZERO;if("number"==typeof n&&(i=n,n=!1),i=i||10,2>i||i>36)throw new Error("radix out of range: "+i);if("-"==t.charAt(0))return Long.fromString(t.substring(1),n,i).negate();if(t.indexOf("-")>=0)throw new Error('number format error: interior "-" character: '+t);for(var o=Long.fromNumber(Math.pow(i,8)),r=Long.ZERO,e=0;e<t.length;e+=8){var g=Math.min(8,t.length-e),s=parseInt(t.substring(e,e+g),i);if(8>g){var h=Long.fromNumber(Math.pow(i,g));r=r.multiply(h).add(Long.fromNumber(s))}else r=r.multiply(o),r=r.add(Long.fromNumber(s))}return r};var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_31_DBL=TWO_PWR_32_DBL/2,TWO_PWR_48_DBL=TWO_PWR_32_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=Long.fromInt(1<<24);Long.ZERO=Long.fromInt(0),Long.ONE=Long.fromInt(1),Long.NEG_ONE=Long.fromInt(-1),Long.MAX_SIGNED_VALUE=Long.fromBits(-1,2147483647,!1),Long.MAX_UNSIGNED_VALUE=Long.fromBits(-1,-1,!0),Long.MAX_VALUE=Long.MAX_SIGNED_VALUE,Long.MIN_SIGNED_VALUE=Long.fromBits(0,-2147483648,!1),Long.MIN_UNSIGNED_VALUE=Long.fromBits(0,0,!0),Long.MIN_VALUE=Long.MIN_SIGNED_VALUE,Long.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},Long.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},Long.prototype.toString=function(t){if(t=t||10,2>t||t>36)throw new Error("radix out of range: "+t);if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(Long.MIN_SIGNED_VALUE)){var i=Long.fromNumber(t),o=this.div(i);return n=o.multiply(i).subtract(this),o.toString(t)+n.toInt().toString(t)}return"-"+this.negate().toString(t)}var r=Long.fromNumber(Math.pow(t,6));n=this;for(var e="";;){var g=n.div(r),s=n.subtract(g.multiply(r)).toInt(),h=s.toString(t);if(n=g,n.isZero())return h+e;for(;h.length<6;)h="0"+h;e=""+h+e}},Long.prototype.getHighBits=function(){return this.high},Long.prototype.getHighBitsUnsigned=function(){return this.high>>>0},Long.prototype.getLowBits=function(){return this.low},Long.prototype.getLowBitsUnsigned=function(){return this.low>>>0},Long.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(Long.MIN_SIGNED_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,n=31;n>0&&0==(t&1<<n);n--);return 0!=this.high?n+33:n+1},Long.prototype.isZero=function(){return 0==this.high&&0==this.low},Long.prototype.isNegative=function(){return!this.unsigned&&this.high<0},Long.prototype.isOdd=function(){return 1==(1&this.low)},Long.prototype.isEven=function(){return 0==(1&this.low)},Long.prototype.equals=function(t){return this.unsigned!=t.unsigned&&this.high>>>31!=t.high>>>31?!1:this.high==t.high&&this.low==t.low},Long.prototype.notEquals=function(t){return!this.equals(t)},Long.prototype.lessThan=function(t){return this.compare(t)<0},Long.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},Long.prototype.greaterThan=function(t){return this.compare(t)>0},Long.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},Long.prototype.compare=function(t){if(this.equals(t))return 0;var n=this.isNegative(),i=t.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?t.high>>>0>this.high>>>0||t.high==this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1},Long.prototype.negate=function(){return!this.unsigned&&this.equals(Long.MIN_SIGNED_VALUE)?Long.MIN_SIGNED_VALUE:this.not().add(Long.ONE)},Long.prototype.add=function(t){var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r+h,f+=a>>>16,a&=65535,f+=o+s,L+=f>>>16,f&=65535,L+=i+g,u+=L>>>16,L&=65535,u+=n+e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.subtract=function(t){return this.add(t.negate())},Long.prototype.multiply=function(t){if(this.isZero())return Long.ZERO;if(t.isZero())return Long.ZERO;if(this.equals(Long.MIN_VALUE))return t.isOdd()?Long.MIN_VALUE:Long.ZERO;if(t.equals(Long.MIN_VALUE))return this.isOdd()?Long.MIN_VALUE:Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(TWO_PWR_24)&&t.lessThan(TWO_PWR_24))return Long.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,o=this.low>>>16,r=65535&this.low,e=t.high>>>16,g=65535&t.high,s=t.low>>>16,h=65535&t.low,u=0,L=0,f=0,a=0;return a+=r*h,f+=a>>>16,a&=65535,f+=o*h,L+=f>>>16,f&=65535,f+=r*s,L+=f>>>16,f&=65535,L+=i*h,u+=L>>>16,L&=65535,L+=o*s,u+=L>>>16,L&=65535,L+=r*g,u+=L>>>16,L&=65535,u+=n*h+i*s+o*g+r*e,u&=65535,Long.fromBits(f<<16|a,u<<16|L,this.unsigned)},Long.prototype.div=function(t){if(t.isZero())throw new Error("division by zero");if(this.isZero())return Long.ZERO;if(this.equals(Long.MIN_SIGNED_VALUE)){if(t.equals(Long.ONE)||t.equals(Long.NEG_ONE))return min;if(t.equals(Long.MIN_VALUE))return Long.ONE;var n=this.shiftRight(1),i=n.div(t).shiftLeft(1);if(i.equals(Long.ZERO))return t.isNegative()?Long.ONE:Long.NEG_ONE;var o=this.subtract(t.multiply(i)),r=i.add(o.div(t));return r}if(t.equals(Long.MIN_VALUE))return Long.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();for(var e=Long.ZERO,o=this;o.greaterThanOrEqual(t);){for(var i=Math.max(1,Math.floor(o.toNumber()/t.toNumber())),g=Math.ceil(Math.log(i)/Math.LN2),s=48>=g?1:Math.pow(2,g-48),h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);u.isNegative()||u.greaterThan(o);)i-=s,h=Long.fromNumber(i,this.unsigned),u=h.multiply(t);h.isZero()&&(h=Long.ONE),e=e.add(h),o=o.subtract(u)}return e},Long.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},Long.prototype.not=function(){return Long.fromBits(~this.low,~this.high,this.unsigned)},Long.prototype.and=function(t){return Long.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},Long.prototype.or=function(t){return Long.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},Long.prototype.xor=function(t){return Long.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},Long.prototype.shiftLeft=function(t){if(t&=63,0==t)return this;var n=this.low;if(32>t){var i=this.high;return Long.fromBits(n<<t,i<<t|n>>>32-t,this.unsigned)}return Long.fromBits(0,n<<t-32,this.unsigned)},Long.prototype.shiftRight=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>t,this.unsigned)}return Long.fromBits(n>>t-32,n>=0?0:-1,this.unsigned)},Long.prototype.shiftRightUnsigned=function(t){if(t&=63,0==t)return this;var n=this.high;if(32>t){var i=this.low;return Long.fromBits(i>>>t|n<<32-t,n>>>t,this.unsigned)}return 32==t?Long.fromBits(n,0,this.unsigned):Long.fromBits(n>>>t-32,0,this.unsigned)},Long.prototype.toSigned=function(){var t=this.clone();return t.unsigned=!1,t},Long.prototype.toUnsigned=function(){var t=this.clone();return t.unsigned=!0,t},Long.prototype.clone=function(){return new Long(this.low,this.high,this.unsigned)},module.exports=Long;


},{}],251:[function(require,module,exports){
  function occurrences(n,e,r){for(var t=0,o=0;;){if(o=n.indexOf(e,o),-1===o||r&&!(r>o))break;t++,o+=e.length}return t}function nthChar(n,e,r){for(var t=0,o=0;r>t&&(o=n.indexOf(e,o)+1);)t++;return t==r?o-1:NaN}var clone=function n(e){function r(n,e,r){var t,o,c={};for(t in e)o=e[t],t in n&&(n[t]===o||t in c&&c[t]===o)||(n[t]=r?r(o):o);return n}if(!e||"object"!=typeof e||"[object Function]"===Object.prototype.toString.call(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,o,c;if(e instanceof Array)for(t=[],o=0,c=e.length;c>o;++o)o in e&&t.push(n(e[o]));else t=e.constructor?new e.constructor:{};return r(t,e,n)},mr=function(n,e){return e?"bytes="+n+"-"+e:"bytes="+n+"-"},absolutizeURL=function(n,e){if(e.match(/^[a-z]*:\/\//))return e;var r;return"/"==e[0]&&(e=e.slice(1,e.length)),i=n.lastIndexOf("/"),i+1<=n.length&&(r=n.slice(0,i+1)),r+e},rmQueryArgs=function(n){var e=n.indexOf("?");return e>0?n.substr(0,e):n},asyncMap=function(n,e,r){var t=n.length,o=[];n.map(function(n,c){e(n,c,function(n,e){n?r(n):(t--,o[c]=e,0===t&&r(null,o))})})};module.exports={make_range:mr,absURL:absolutizeURL,clone:clone,rmQueryArgs:rmQueryArgs,asyncMap:asyncMap,occurrences:occurrences,nthChar:nthChar};


},{}],252:[function(require,module,exports){
  (function(n){(function(){function t(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||"undefined"==typeof n&&e)return 1;if(t>n||!e||"undefined"==typeof t&&r)return-1}return 0}function r(n,t,r){if(t!==t)return v(n,r);for(var e=(r||0)-1,u=n.length;++e<u;)if(n[e]===t)return e;return-1}function e(n){return"function"==typeof n||!1}function u(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].value;return n}function o(n){return"string"==typeof n?n:null==n?"":n+""}function i(n){return n.charCodeAt(0)}function a(n,t){for(var r=-1,e=n.length;++r<e&&t.indexOf(n.charAt(r))>-1;);return r}function f(n,t){for(var r=n.length;r--&&t.indexOf(n.charAt(r))>-1;);return r}function c(n,r){return t(n.criteria,r.criteria)||n.index-r.index}function l(n,r){for(var e=-1,u=n.criteria,o=r.criteria,i=u.length;++e<i;){var a=t(u[e],o[e]);if(a)return a}return n.index-r.index}function s(n){return zn[n]}function p(n){return Mn[n]}function h(n){return"\\"+Kn[n]}function v(n,t,r){for(var e=n.length,u=r?t||e:(t||0)-1;r?u--:++u<e;){var o=n[u];if(o!==o)return u}return-1}function _(n){return n&&"object"==typeof n||!1}function g(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function y(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=M,o[++u]=r);return o}function d(n,t){for(var r,e=-1,u=n.length,o=-1,i=[];++e<u;){var a=n[e],f=t?t(a,e,n):a;e&&r===f||(r=f,i[++o]=a)}return i}function m(n){for(var t=-1,r=n.length;++t<r&&g(n.charCodeAt(t)););return t}function w(n){for(var t=n.length;t--&&g(n.charCodeAt(t)););return t}function b(n){return qn[n]}function x(n){function g(n){if(_(n)&&!Hi(n)&&!(n instanceof tn)){if(n instanceof Q)return n;if(ri.call(n,"__chain__")&&ri.call(n,"__wrapped__"))return Lr(n)}return new Q(n)}function J(){}function Q(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function tn(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Si,this.__views__=null}function zn(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new tn(this.__wrapped__);return e.__actions__=n?nt(n):null,e.__dir__=this.__dir__,e.__dropCount__=this.__dropCount__,e.__filtered__=this.__filtered__,e.__iteratees__=t?nt(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?nt(r):null,e}function Mn(){if(this.__filtered__){var n=new tn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function qn(){var n=this.__wrapped__.value();if(!Hi(n))return Zt(n,this.__actions__);var t=this.__dir__,r=0>t,e=wr(0,n.length,this.__views__),u=e.start,o=e.end,i=o-u,a=this.__dropCount__,f=Ri(i,this.__takeCount__),c=r?o:u-1,l=this.__iteratees__,s=l?l.length:0,p=0,h=[];n:for(;i--&&f>p;){c+=t;for(var v=-1,_=n[c];++v<s;){var g=l[v],y=g.iteratee,d=y(_,c,n),m=g.type;if(m==B)_=d;else if(!d){if(m==$)continue n;break n}}a?a--:h[p++]=_}return h}function Pn(){this.__data__={}}function Kn(n){return this.has(n)&&delete this.__data__[n]}function Yn(n){return"__proto__"==n?A:this.__data__[n]}function Gn(n){return"__proto__"!=n&&ri.call(this.__data__,n)}function Jn(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this}function Xn(n){var t=n?n.length:0;for(this.data={hash:xi(null),set:new _i};t--;)this.push(n[t])}function Hn(n,t){var r=n.data,e="string"==typeof t||ku(t)?r.set.has(t):r.hash[t];return e?0:-1}function Qn(n){var t=this.data;"string"==typeof n||ku(n)?t.set.add(n):t.hash[n]=!0}function nt(n,t){var r=-1,e=n.length;for(t||(t=zo(e));++r<e;)t[r]=n[r];return t}function tt(n,t){for(var r=-1,e=n.length;++r<e&&t(n[r],r,n)!==!1;);return n}function rt(n,t){for(var r=n.length;r--&&t(n[r],r,n)!==!1;);return n}function et(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function ut(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function ot(n,t){for(var r=-1,e=n.length,u=zo(e);++r<e;)u[r]=t(n[r],r,n);return u}function it(n){for(var t=-1,r=n.length,e=Ti;++t<r;){var u=n[t];u>e&&(e=u)}return e}function at(n){for(var t=-1,r=n.length,e=Si;++t<r;){var u=n[t];e>u&&(e=u)}return e}function ft(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function ct(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function lt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function st(n,t){return"undefined"==typeof n?t:n}function pt(n,t,r,e){return"undefined"!=typeof n&&ri.call(e,r)?n:t}function ht(n,t,r){var e=ea(t);if(!r)return _t(t,n,e);for(var u=-1,o=e.length;++u<o;){var i=e[u],a=n[i],f=r(a,t[i],i,n,t);(f===f?f===a:a!==a)&&("undefined"!=typeof a||i in n)||(n[i]=f)}return n}function vt(n,t){for(var r=-1,e=n.length,u=Ir(e),o=t.length,i=zo(o);++r<o;){var a=t[r];u?(a=parseFloat(a),i[r]=Er(a,e)?n[a]:A):i[r]=n[a]}return i}function _t(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var o=r[e];t[o]=n[o]}return t}function gt(n,t){for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=hr(n[u],E,n)}return n}function yt(n,t,r){var e=typeof n;return"function"==e?"undefined"!=typeof t&&jr(n)?nr(n,t,r):n:null==n?Co:"object"==e?Bt(n):"undefined"==typeof t?qt(n+""):Dt(n+"",t)}function dt(n,t,r,e,u,o,i){var a;if(r&&(a=u?r(n,e,u):r(n)),"undefined"!=typeof a)return a;if(!ku(n))return n;var f=Hi(n);if(f){if(a=br(n),!t)return nt(n,a)}else{var c=ui.call(n),l=c==G;if(c!=Z&&c!=q&&(!l||u))return Bn[c]?Ar(n,c,t):u?n:{};if(a=xr(l?{}:n),!t)return _t(n,a,ea(n))}o||(o=[]),i||(i=[]);for(var s=o.length;s--;)if(o[s]==n)return i[s];return o.push(n),i.push(a),(f?tt:Tt)(n,function(e,u){a[u]=dt(e,t,r,u,n,o,i)}),a}function mt(n,t,r,e){if("function"!=typeof n)throw new Xo(z);return gi(function(){n.apply(A,Yt(r,e))},t)}function wt(n,t){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=mr(),a=i==r,f=a&&t.length>=200&&Mi(t),c=t.length;f&&(i=Hn,a=!1,t=f);n:for(;++o<e;){var l=n[o];if(a&&l===l){for(var s=c;s--;)if(t[s]===l)continue n;u.push(l)}else i(t,l)<0&&u.push(l)}return u}function bt(n,t){var r=n?n.length:0;if(!Ir(r))return Tt(n,t);for(var e=-1,u=Fr(n);++e<r&&t(u[e],e,u)!==!1;);return n}function xt(n,t){var r=n?n.length:0;if(!Ir(r))return St(n,t);for(var e=Fr(n);r--&&t(e[r],r,e)!==!1;);return n}function At(n,t){var r=!0;return bt(n,function(n,e,u){return r=!!t(n,e,u)}),r}function jt(n,t,r,e){var u=n.length;for(r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e="undefined"==typeof e||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;u>r;)n[r++]=t;return n}function Et(n,t){var r=[];return bt(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function Rt(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,!1):void 0}),u}function It(n,t,r,e){for(var u=(e||0)-1,o=n.length,i=-1,a=[];++u<o;){var f=n[u];if(_(f)&&Ir(f.length)&&(Hi(f)||bu(f))){t&&(f=It(f,t,r));var c=-1,l=f.length;for(a.length+=l;++c<l;)a[++i]=f[c]}else r||(a[++i]=f)}return a}function kt(n,t,r){for(var e=-1,u=Fr(n),o=r(n),i=o.length;++e<i;){var a=o[e];if(t(u[a],a,u)===!1)break}return n}function Ot(n,t,r){for(var e=Fr(n),u=r(n),o=u.length;o--;){var i=u[o];if(t(e[i],i,e)===!1)break}return n}function Ct(n,t){return kt(n,t,Zu)}function Tt(n,t){return kt(n,t,ea)}function St(n,t){return Ot(n,t,ea)}function Nt(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];na(n[i])&&(o[++u]=i)}return o}function Ut(n,t,r){var e=-1,u="function"==typeof t,o=n?n.length:0,i=Ir(o)?zo(o):[];return bt(n,function(n){var o=u?t:null!=n&&n[t];i[++e]=o?o.apply(n,r):A}),i}function Wt(n,t,r,e,u,o){if(n===t)return 0!==n||1/n==1/t;var i=typeof n,a=typeof t;return"function"!=i&&"object"!=i&&"function"!=a&&"object"!=a||null==n||null==t?n!==n&&t!==t:Ft(n,t,Wt,r,e,u,o)}function Ft(n,t,r,e,u,o,i){var a=Hi(n),f=Hi(t),c=P,l=P;a||(c=ui.call(n),c==q?c=Z:c!=Z&&(a=Fu(n))),f||(l=ui.call(t),l==q?l=Z:l!=Z&&(f=Fu(t)));var s=c==Z,p=l==Z,h=c==l;if(h&&!a&&!s)return _r(n,t,c);var v=s&&ri.call(n,"__wrapped__"),_=p&&ri.call(t,"__wrapped__");if(v||_)return r(v?n.value():n,_?t.value():t,e,u,o,i);if(!h)return!1;o||(o=[]),i||(i=[]);for(var g=o.length;g--;)if(o[g]==n)return i[g]==t;o.push(n),i.push(t);var y=(a?vr:gr)(n,t,r,e,u,o,i);return o.pop(),i.pop(),y}function Lt(n,t,r,e,u){var o=t.length;if(null==n)return!o;for(var i=-1,a=!u;++i<o;)if(a&&e[i]?r[i]!==n[t[i]]:!ri.call(n,t[i]))return!1;for(i=-1;++i<o;){var f=t[i];if(a&&e[i])var c=ri.call(n,f);else{var l=n[f],s=r[i];c=u?u(l,s,f):A,"undefined"==typeof c&&(c=Wt(s,l,u,!0))}if(!c)return!1}return!0}function $t(n,t){var r=[];return bt(n,function(n,e,u){r.push(t(n,e,u))}),r}function Bt(n){var t=ea(n),r=t.length;if(1==r){var e=t[0],u=n[e];if(kr(u))return function(n){return null!=n&&n[e]===u&&ri.call(n,e)}}for(var o=zo(r),i=zo(r);r--;)u=n[t[r]],o[r]=u,i[r]=kr(u);return function(n){return Lt(n,t,o,i)}}function Dt(n,t){return kr(t)?function(r){return null!=r&&r[n]===t}:function(r){return null!=r&&Wt(t,r[n],null,!0)}}function zt(n,t,r,e,u){if(!ku(n))return n;var o=Ir(t.length)&&(Hi(t)||Fu(t));return(o?tt:Tt)(t,function(t,i,a){if(_(t))return e||(e=[]),u||(u=[]),Mt(n,a,i,zt,r,e,u);var f=n[i],c=r?r(f,t,i,n,a):A,l="undefined"==typeof c;l&&(c=t),!o&&"undefined"==typeof c||!l&&(c===c?c===f:f!==f)||(n[i]=c)}),n}function Mt(n,t,r,e,u,o,i){for(var a=o.length,f=t[r];a--;)if(o[a]==f)return void(n[r]=i[a]);var c=n[r],l=u?u(c,f,r,n,t):A,s="undefined"==typeof l;s&&(l=f,Ir(f.length)&&(Hi(f)||Fu(f))?l=Hi(c)?c:c?nt(c):[]:ta(f)||bu(f)?l=bu(c)?Bu(c):ta(c)?c:{}:s=!1),o.push(f),i.push(l),s?n[r]=e(l,f,u,o,i):(l===l?l!==c:c===c)&&(n[r]=l)}function qt(n){return function(t){return null==t?A:t[n]}}function Pt(n,r){var e=r.length,u=vt(n,r);for(r.sort(t);e--;){var o=parseFloat(r[e]);if(o!=i&&Er(o)){var i=o;yi.call(n,o,1)}}return u}function Kt(n,t){return n+si(Ci()*(t-n+1))}function Vt(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=!1,n):t(r,n,u,o)}),r}function Yt(n,t,r){var e=-1,u=n.length;t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r="undefined"==typeof r||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var o=zo(u);++e<u;)o[e]=n[e+t];return o}function Gt(n,t){var r;return bt(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Jt(n,t){var e=-1,u=mr(),o=n.length,i=u==r,a=i&&o>=200,f=a&&Mi(),c=[];f?(u=Hn,i=!1):(a=!1,f=t?[]:c);n:for(;++e<o;){var l=n[e],s=t?t(l,e,n):l;if(i&&l===l){for(var p=f.length;p--;)if(f[p]===s)continue n;t&&f.push(s),c.push(l)}else u(f,s)<0&&((t||a)&&f.push(s),c.push(l))}return c}function Xt(n,t){for(var r=-1,e=t.length,u=zo(e);++r<e;)u[r]=n[t[r]];return u}function Zt(n,t){var r=n;r instanceof tn&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var o=[r],i=t[e];hi.apply(o,i.args),r=i.func.apply(i.thisArg,o)}return r}function Ht(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&Wi>=u){for(;u>e;){var o=e+u>>>1,i=n[o];(r?t>=i:t>i)?e=o+1:u=o}return u}return Qt(n,t,Co,r)}function Qt(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,a="undefined"==typeof t;o>u;){var f=si((u+o)/2),c=r(n[f]),l=c===c;if(i)var s=l||e;else s=a?l&&(e||"undefined"!=typeof c):e?t>=c:t>c;s?u=f+1:o=f}return Ri(o,Ui)}function nr(n,t,r){if("function"!=typeof n)return Co;if("undefined"==typeof t)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function tr(n){return fi.call(n,0)}function rr(n,t,r){for(var e=r.length,u=-1,o=Ei(n.length-e,0),i=-1,a=t.length,f=zo(o+a);++i<a;)f[i]=t[i];for(;++u<e;)f[r[u]]=n[u];for(;o--;)f[i++]=n[u++];return f}function er(n,t,r){for(var e=-1,u=r.length,o=-1,i=Ei(n.length-u,0),a=-1,f=t.length,c=zo(i+f);++o<i;)c[o]=n[o];for(var l=o;++a<f;)c[l+a]=t[a];for(;++e<u;)c[l+r[e]]=n[o++];return c}function ur(n,t){return function(r,e,u){var o=t?t():{};if(e=dr(e,u,3),Hi(r))for(var i=-1,a=r.length;++i<a;){var f=r[i];n(o,f,e(f,i,r),r)}else bt(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function or(n){return function(){var t=arguments.length,r=arguments[0];if(2>t||null==r)return r;if(t>3&&Rr(arguments[1],arguments[2],arguments[3])&&(t=2),t>3&&"function"==typeof arguments[t-2])var e=nr(arguments[--t-1],arguments[t--],5);else t>2&&"function"==typeof arguments[t-1]&&(e=arguments[--t]);for(var u=0;++u<t;){var o=arguments[u];o&&n(r,o,e)}return r}}function ir(n,t){function r(){return(this instanceof r?e:n).apply(t,arguments)}var e=fr(n);return r}function ar(n){return function(t){for(var r=-1,e=Ro(co(t)),u=e.length,o="";++r<u;)o=n(o,e[r],r);return o}}function fr(n){return function(){var t=Di(n.prototype),r=n.apply(t,arguments);return ku(r)?r:t}}function cr(n,t){return function(r,e,u){u&&Rr(r,e,u)&&(e=null);var o=dr(),a=null==e;if(o===yt&&a||(a=!1,e=o(e,u,3)),a){var f=Hi(r);if(f||!Wu(r))return n(f?r:Wr(r));e=i}return yr(r,e,t)}}function lr(n,t,r,e,u,o,i,a,f,c){function l(){for(var w=arguments.length,b=w,x=zo(w);b--;)x[b]=arguments[b];if(e&&(x=rr(x,e,u)),o&&(x=er(x,o,i)),v||g){var A=l.placeholder,j=y(x,A);if(w-=j.length,c>w){var I=a?nt(a):null,k=Ei(c-w,0),O=v?j:null,S=v?null:j,N=v?x:null,U=v?null:x;t|=v?C:T,t&=~(v?T:C),_||(t&=~(E|R));var W=lr(n,t,r,N,O,U,S,I,f,k);return W.placeholder=A,W}}var F=p?r:this;return h&&(n=F[m]),a&&(x=Sr(x,a)),s&&f<x.length&&(x.length=f),(this instanceof l?d||fr(n):n).apply(F,x)}var s=t&N,p=t&E,h=t&R,v=t&k,_=t&I,g=t&O,d=!h&&fr(n),m=n;return l}function sr(n,t,r){var e=n.length;if(t=+t,e>=t||!Ai(t))return"";var u=t-e;return r=null==r?" ":r+"",yo(r,ci(u/r.length)).slice(0,u)}function pr(n,t,r,e){function u(){for(var t=-1,a=arguments.length,f=-1,c=e.length,l=zo(a+c);++f<c;)l[f]=e[f];for(;a--;)l[f++]=arguments[++t];return(this instanceof u?i:n).apply(o?r:this,l)}var o=t&E,i=fr(n);return u}function hr(n,t,r,e,u,o,i,a){var f=t&R;if(!f&&"function"!=typeof n)throw new Xo(z);var c=e?e.length:0;if(c||(t&=~(C|T),e=u=null),c-=u?u.length:0,t&T){var l=e,s=u;e=u=null}var p=!f&&qi(n),h=[n,t,r,e,u,l,s,o,i,a];if(p&&p!==!0&&(Or(h,p),t=h[1],a=h[9]),h[9]=null==a?f?0:n.length:Ei(a-c,0)||0,t==E)var v=ir(h[0],h[2]);else v=t!=C&&t!=(E|C)||h[4].length?lr.apply(A,h):pr.apply(A,h);var _=p?zi:Pi;return _(v,h)}function vr(n,t,r,e,u,o,i){var a=-1,f=n.length,c=t.length,l=!0;if(f!=c&&!(u&&c>f))return!1;for(;l&&++a<f;){var s=n[a],p=t[a];if(l=A,e&&(l=u?e(p,s,a):e(s,p,a)),"undefined"==typeof l)if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,o,i))););else l=s&&s===p||r(s,p,e,u,o,i)}return!!l}function _r(n,t,r){switch(r){case K:case V:return+n==+t;case Y:return n.name==t.name&&n.message==t.message;case X:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case H:case nn:return n==t+""}return!1}function gr(n,t,r,e,u,o,i){var a=ea(n),f=a.length,c=ea(t),l=c.length;if(f!=l&&!u)return!1;for(var s,p=-1;++p<f;){var h=a[p],v=ri.call(t,h);if(v){var _=n[h],g=t[h];v=A,e&&(v=u?e(g,_,h):e(_,g,h)),"undefined"==typeof v&&(v=_&&_===g||r(_,g,e,u,o,i))}if(!v)return!1;s||(s="constructor"==h)}if(!s){var y=n.constructor,d=t.constructor;if(y!=d&&"constructor"in n&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof d&&d instanceof d))return!1}return!0}function yr(n,t,r){var e=r?Si:Ti,u=e,o=u;return bt(n,function(n,i,a){var f=t(n,i,a);((r?u>f:f>u)||f===e&&f===o)&&(u=f,o=n)}),o}function dr(n,t,r){var e=g.callback||ko;return e=e===ko?yt:e,r?e(n,t,r):e}function mr(n,t,e){var u=g.indexOf||Zr;return u=u===Zr?r:u,n?u(n,t,e):u}function wr(n,t,r){for(var e=-1,u=r?r.length:0;++e<u;){var o=r[e],i=o.size;switch(o.type){case"drop":n+=i;break;case"dropRight":t-=i;break;case"take":t=Ri(t,n+i);break;case"takeRight":n=Ei(n,t-i)}}return{start:n,end:t}}function br(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&ri.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function xr(n){var t=n.constructor;return"function"==typeof t&&t instanceof t||(t=Yo),new t}function Ar(n,t,r){var e=n.constructor;switch(t){case rn:return tr(n);case K:case V:return new e(+n);case en:case un:case on:case an:case fn:case cn:case ln:case sn:case pn:var u=n.buffer;return new e(r?tr(u):u,n.byteOffset,n.length);case X:case nn:return new e(n);case H:var o=new e(n.source,jn.exec(n));o.lastIndex=n.lastIndex}return o}function jr(n){var t=g.support,r=!(t.funcNames?n.name:t.funcDecomp);if(!r){var e=ni.call(n);t.funcNames||(r=!En.test(e)),r||(r=Sn.test(e)||Tu(n),zi(n,r))}return r}function Er(n,t){return n=+n,t=null==t?Li:t,n>-1&&n%1==0&&t>n}function Rr(n,t,r){if(!ku(r))return!1;var e=typeof t;if("number"==e)var u=r.length,o=Ir(u)&&Er(t,u);else o="string"==e&&t in r;var i=r[t];return o&&(n===n?n===i:i!==i)}function Ir(n){return"number"==typeof n&&n>-1&&n%1==0&&Li>=n}function kr(n){return n===n&&(0===n?1/n>0:!ku(n))}function Or(n,t){var r=n[1],e=t[1],u=r|e,o=N|S,i=E|R,a=o|i|I|O,f=r&N&&!(e&N),c=r&S&&!(e&S),l=(c?n:t)[7],s=(f?n:t)[8],p=!(r>=S&&e>i||r>i&&e>=S),h=u>=o&&a>=u&&(S>r||(c||f)&&l.length<=s);if(!p&&!h)return n;e&E&&(n[2]=t[2],u|=r&E?0:I);var v=t[3];if(v){var _=n[3];n[3]=_?rr(_,v,t[4]):nt(v),n[4]=_?y(n[3],M):nt(t[4])}return v=t[5],v&&(_=n[5],n[5]=_?er(_,v,t[6]):nt(v),n[6]=_?y(n[5],M):nt(t[6])),v=t[7],v&&(n[7]=nt(v)),e&N&&(n[8]=null==n[8]?t[8]:Ri(n[8],t[8])),null==n[9]&&(n[9]=t[9]),n[0]=t[0],n[1]=u,n}function Cr(n,t){n=Fr(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function Tr(n,t){var r={};return Ct(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function Sr(n,t){for(var r=n.length,e=Ri(t.length,r),u=nt(n);e--;){var o=t[e];n[e]=Er(o,r)?u[o]:A}return n}function Nr(n){var t;g.support;if(!_(n)||ui.call(n)!=Z||!ri.call(n,"constructor")&&(t=n.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var r;return Ct(n,function(n,t){r=t}),"undefined"==typeof r||ri.call(n,r)}function Ur(n){for(var t=Zu(n),r=t.length,e=r&&n.length,u=g.support,o=e&&Ir(e)&&(Hi(n)||u.nonEnumArgs&&bu(n)),i=-1,a=[];++i<r;){var f=t[i];(o&&Er(f,e)||ri.call(n,f))&&a.push(f)}return a}function Wr(n){return null==n?[]:Ir(n.length)?ku(n)?n:Yo(n):uo(n)}function Fr(n){return ku(n)?n:Yo(n)}function Lr(n){return n instanceof tn?n.clone():new Q(n.__wrapped__,n.__chain__,nt(n.__actions__))}function $r(n,t,r){t=(r?Rr(n,t,r):null==t)?1:Ei(+t||1,1);for(var e=0,u=n?n.length:0,o=-1,i=zo(ci(u/t));u>e;)i[++o]=Yt(n,e,e+=t);return i}function Br(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u}function Dr(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Hi(r)||bu(r))break}return wt(r,It(arguments,!1,!0,++n))}function zr(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),Yt(n,0>t?0:t)):[]}function Mr(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Yt(n,0,0>t?0:t)):[]}function qr(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=dr(t,r,3);e--&&t(n[e],e,n););return Yt(n,0,e+1)}function Pr(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=dr(t,r,3);++u<e&&t(n[u],u,n););return Yt(n,u)}function Kr(n,t,r,e){var u=n?n.length:0;return u?(r&&"number"!=typeof r&&Rr(n,t,r)&&(r=0,e=u),jt(n,t,r,e)):[]}function Vr(n,t,r){var e=-1,u=n?n.length:0;for(t=dr(t,r,3);++e<u;)if(t(n[e],e,n))return e;return-1}function Yr(n,t,r){var e=n?n.length:0;for(t=dr(t,r,3);e--;)if(t(n[e],e,n))return e;return-1}function Gr(n){return n?n[0]:A}function Jr(n,t,r){var e=n?n.length:0;return r&&Rr(n,t,r)&&(t=!1),e?It(n,t):[]}function Xr(n){var t=n?n.length:0;return t?It(n,!0):[]}function Zr(n,t,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=0>e?Ei(u+e,0):e||0;else if(e){var o=Ht(n,t),i=n[o];return(t===t?t===i:i!==i)?o:-1}return r(n,t,e)}function Hr(n){return Mr(n,1)}function Qr(){for(var n=[],t=-1,e=arguments.length,u=[],o=mr(),i=o==r;++t<e;){var a=arguments[t];(Hi(a)||bu(a))&&(n.push(a),u.push(i&&a.length>=120&&Mi(t&&a)))}e=n.length;var f=n[0],c=-1,l=f?f.length:0,s=[],p=u[0];n:for(;++c<l;)if(a=f[c],(p?Hn(p,a):o(s,a))<0){for(t=e;--t;){var h=u[t];if((h?Hn(h,a):o(n[t],a))<0)continue n}p&&p.push(a),s.push(a)}return s}function ne(n){var t=n?n.length:0;return t?n[t-1]:A}function te(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?Ei(e+r,0):Ri(r||0,e-1))+1;else if(r){u=Ht(n,t,!0)-1;var o=n[u];return(t===t?t===o:o!==o)?u:-1}if(t!==t)return v(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1}function re(){var n=arguments[0];if(!n||!n.length)return n;for(var t=0,r=mr(),e=arguments.length;++t<e;)for(var u=0,o=arguments[t];(u=r(n,o,u))>-1;)yi.call(n,u,1);return n}function ee(n){return Pt(n||[],It(arguments,!1,!1,1))}function ue(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=dr(t,r,3);++e<u;){var i=n[e];t(i,e,n)&&(o.push(i),yi.call(n,e--,1),u--)}return o}function oe(n){return zr(n,1)}function ie(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&Rr(n,t,r)&&(t=0,r=e),Yt(n,t,r)):[]}function ae(n,t,r,e){var u=dr(r);return u===yt&&null==r?Ht(n,t):Qt(n,t,u(r,e,1))}function fe(n,t,r,e){var u=dr(r);return u===yt&&null==r?Ht(n,t,!0):Qt(n,t,u(r,e,1),!0)}function ce(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),Yt(n,0,0>t?0:t)):[]}function le(n,t,r){var e=n?n.length:0;return e?((r?Rr(n,t,r):null==t)&&(t=1),t=e-(+t||0),Yt(n,0>t?0:t)):[]}function se(n,t,r){var e=n?n.length:0;if(!e)return[];for(t=dr(t,r,3);e--&&t(n[e],e,n););return Yt(n,e+1)}function pe(n,t,r){var e=n?n.length:0;if(!e)return[];var u=-1;for(t=dr(t,r,3);++u<e&&t(n[u],u,n););return Yt(n,0,u)}function he(){return Jt(It(arguments,!1,!0))}function ve(n,t,e,u){var o=n?n.length:0;if(!o)return[];null!=t&&"boolean"!=typeof t&&(u=e,e=Rr(n,t,u)?null:t,t=!1);var i=dr();return(i!==yt||null!=e)&&(e=i(e,u,3)),t&&mr()==r?d(n,e):Jt(n,e)}function _e(n){for(var t=-1,r=(n&&n.length&&it(ot(n,ti)))>>>0,e=zo(r);++t<r;)e[t]=ot(n,qt(t));return e}function ge(n){return wt(n,Yt(arguments,1))}function ye(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Hi(r)||bu(r))var e=e?wt(e,r).concat(wt(r,e)):r}return e?Jt(e):[]}function de(){for(var n=arguments.length,t=zo(n);n--;)t[n]=arguments[n];return _e(t)}function me(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Hi(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function we(n){var t=g(n);return t.__chain__=!0,t}function be(n,t,r){return t.call(r,n),n}function xe(n,t,r){return t.call(r,n)}function Ae(){return we(this)}function je(){return new Q(this.value(),this.__chain__)}function Ee(n){for(var t,r=this;r instanceof J;){var e=Lr(r);t?u.__wrapped__=e:t=e;var u=e;r=r.__wrapped__}return u.__wrapped__=n,t}function Re(){var n=this.__wrapped__;return n instanceof tn?(this.__actions__.length&&(n=new tn(this)),new Q(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()})}function Ie(){return this.value()+""}function ke(){return Zt(this.__wrapped__,this.__actions__)}function Oe(n){var t=n?n.length:0;return Ir(t)&&(n=Wr(n)),vt(n,It(arguments,!1,!1,1))}function Ce(n,t,r){var e=Hi(n)?et:At;return("function"!=typeof t||"undefined"!=typeof r)&&(t=dr(t,r,3)),e(n,t)}function Te(n,t,r){var e=Hi(n)?ut:Et;return t=dr(t,r,3),e(n,t)}function Se(n,t,r){if(Hi(n)){var e=Vr(n,t,r);return e>-1?n[e]:A}return t=dr(t,r,3),Rt(n,t,bt)}function Ne(n,t,r){return t=dr(t,r,3),Rt(n,t,xt)}function Ue(n,t){return Se(n,Bt(t))}function We(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Hi(n)?tt(n,t):bt(n,nr(t,r,3))}function Fe(n,t,r){return"function"==typeof t&&"undefined"==typeof r&&Hi(n)?rt(n,t):xt(n,nr(t,r,3))}function Le(n,t,r){var e=n?n.length:0;return Ir(e)||(n=uo(n),e=n.length),e?(r="number"==typeof r?0>r?Ei(e+r,0):r||0:0,"string"==typeof n||!Hi(n)&&Wu(n)?e>r&&n.indexOf(t,r)>-1:mr(n,t,r)>-1):!1}function $e(n,t){return Ut(n,t,Yt(arguments,2))}function Be(n,t,r){var e=Hi(n)?ot:$t;return t=dr(t,r,3),e(n,t)}function De(n,t){return Be(n,qt(t))}function ze(n,t,r,e){var u=Hi(n)?ft:Vt;return u(n,dr(t,e,4),r,arguments.length<3,bt)}function Me(n,t,r,e){var u=Hi(n)?ct:Vt;return u(n,dr(t,e,4),r,arguments.length<3,xt)}function qe(n,t,r){var e=Hi(n)?ut:Et;return t=dr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})}function Pe(n,t,r){if(r?Rr(n,t,r):null==t){n=Wr(n);var e=n.length;return e>0?n[Kt(0,e-1)]:A}var u=Ke(n);return u.length=Ri(0>t?0:+t||0,u.length),u}function Ke(n){n=Wr(n);for(var t=-1,r=n.length,e=zo(r);++t<r;){var u=Kt(0,t);t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function Ve(n){var t=n?n.length:0;return Ir(t)?t:ea(n).length}function Ye(n,t,r){var e=Hi(n)?lt:Gt;return("function"!=typeof t||"undefined"!=typeof r)&&(t=dr(t,r,3)),e(n,t)}function Ge(n,t,r){var e=-1,o=n?n.length:0,i=Ir(o)?zo(o):[];return r&&Rr(n,t,r)&&(t=null),t=dr(t,r,3),bt(n,function(n,r,u){i[++e]={criteria:t(n,r,u),index:e,value:n}}),u(i,c)}function Je(n){var t=arguments;t.length>3&&Rr(t[1],t[2],t[3])&&(t=[n,t[1]]);var r=-1,e=n?n.length:0,o=It(t,!1,!1,1),i=Ir(e)?zo(e):[];return bt(n,function(n){for(var t=o.length,e=zo(t);t--;)e[t]=null==n?A:n[o[t]];i[++r]={criteria:e,index:r,value:n}}),u(i,l)}function Xe(n,t){return Te(n,Bt(t))}function Ze(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Xo(z);var r=n;n=t,t=r}return n=Ai(n=+n)?n:0,function(){return--n<1?t.apply(this,arguments):void 0}}function He(n,t,r){return r&&Rr(n,t,r)&&(t=null),t=n&&null==t?n.length:Ei(+t||0,0),hr(n,N,null,null,null,null,t)}function Qe(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Xo(z);var e=n;n=t,t=e}return function(){return--n>0?r=t.apply(this,arguments):t=null,r}}function nu(n,t){var r=E;if(arguments.length>2){var e=Yt(arguments,2),u=y(e,nu.placeholder);r|=C}return hr(n,r,t,e,u)}function tu(n){return gt(n,arguments.length>1?It(arguments,!1,!1,1):Gu(n))}function ru(n,t){var r=E|R;if(arguments.length>2){var e=Yt(arguments,2),u=y(e,ru.placeholder);r|=C}return hr(t,r,n,e,u)}function eu(n,t,r){r&&Rr(n,t,r)&&(t=null);var e=hr(n,k,null,null,null,null,null,t);return e.placeholder=eu.placeholder,e}function uu(n,t,r){r&&Rr(n,t,r)&&(t=null);var e=hr(n,O,null,null,null,null,null,t);return e.placeholder=uu.placeholder,e}function ou(n,t,r){function e(){p&&li(p),f&&li(f),f=p=h=A}function u(){var r=t-(Zi()-l);if(0>=r||r>t){f&&li(f);var e=h;f=p=h=A,e&&(v=Zi(),c=n.apply(s,a),p||f||(a=s=null))}else p=gi(u,r)}function o(){p&&li(p),f=p=h=A,(g||_!==t)&&(v=Zi(),c=n.apply(s,a),p||f||(a=s=null))}function i(){if(a=arguments,l=Zi(),s=this,h=g&&(p||!y),_===!1)var r=y&&!p;else{f||y||(v=l);var e=_-(l-v),i=0>=e||e>_;i?(f&&(f=li(f)),v=l,c=n.apply(s,a)):f||(f=gi(o,e))}return i&&p?p=li(p):p||t===_||(p=gi(u,t)),r&&(i=!0,c=n.apply(s,a)),!i||p||f||(a=s=null),c}var a,f,c,l,s,p,h,v=0,_=!1,g=!0;if("function"!=typeof n)throw new Xo(z);if(t=0>t?0:t,r===!0){var y=!0;g=!1}else ku(r)&&(y=r.leading,_="maxWait"in r&&Ei(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return i.cancel=e,i}function iu(n){return mt(n,1,arguments,1)}function au(n,t){return mt(n,t,arguments,2)}function fu(){var n=arguments,t=n.length;if(!t)return function(){return arguments[0]};if(!et(n,e))throw new Xo(z);return function(){for(var r=0,e=n[r].apply(this,arguments);++r<t;)e=n[r].call(this,e);return e}}function cu(){var n=arguments,t=n.length-1;if(0>t)return function(){return arguments[0]};if(!et(n,e))throw new Xo(z);return function(){for(var r=t,e=n[r].apply(this,arguments);r--;)e=n[r].call(this,e);return e}}function lu(n,t){if("function"!=typeof n||t&&"function"!=typeof t)throw new Xo(z);var r=function(){var e=r.cache,u=t?t.apply(this,arguments):arguments[0];if(e.has(u))return e.get(u);var o=n.apply(this,arguments);return e.set(u,o),o};return r.cache=new lu.Cache,r}function su(n){if("function"!=typeof n)throw new Xo(z);return function(){return!n.apply(this,arguments)}}function pu(n){return Qe(n,2)}function hu(n){var t=Yt(arguments,1),r=y(t,hu.placeholder);return hr(n,C,null,t,r)}function vu(n){var t=Yt(arguments,1),r=y(t,vu.placeholder);return hr(n,T,null,t,r)}function _u(n){var t=It(arguments,!1,!1,1);return hr(n,S,null,null,null,t)}function gu(n){if("function"!=typeof n)throw new Xo(z);return function(t){return n.apply(this,t)}}function yu(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Xo(z);return r===!1?e=!1:ku(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),Dn.leading=e,Dn.maxWait=+t,Dn.trailing=u,ou(n,t,Dn)}function du(n,t){return t=null==t?Co:t,hr(t,C,null,[n],[])}function mu(n,t,r,e){return t&&"boolean"!=typeof t&&Rr(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),r="function"==typeof r&&nr(r,e,1),dt(n,t,r)}function wu(n,t,r){return t="function"==typeof t&&nr(t,r,1),dt(n,!0,t)}function bu(n){var t=_(n)?n.length:A;return Ir(t)&&ui.call(n)==q||!1}function xu(n){return n===!0||n===!1||_(n)&&ui.call(n)==K||!1}function Au(n){return _(n)&&ui.call(n)==V||!1}function ju(n){return n&&1===n.nodeType&&_(n)&&ui.call(n).indexOf("Element")>-1||!1}function Eu(n){if(null==n)return!0;var t=n.length;return Ir(t)&&(Hi(n)||Wu(n)||bu(n)||_(n)&&na(n.splice))?!t:!ea(n).length}function Ru(n,t,r,e){if(r="function"==typeof r&&nr(r,e,3),!r&&kr(n)&&kr(t))return n===t;var u=r?r(n,t):A;return"undefined"==typeof u?Wt(n,t,r):!!u}function Iu(n){return _(n)&&"string"==typeof n.message&&ui.call(n)==Y||!1}function ku(n){var t=typeof n;return"function"==t||n&&"object"==t||!1}function Ou(n,t,r,e){var u=ea(t),o=u.length;if(r="function"==typeof r&&nr(r,e,3),!r&&1==o){var i=u[0],a=t[i];if(kr(a))return null!=n&&a===n[i]&&ri.call(n,i)}for(var f=zo(o),c=zo(o);o--;)a=f[o]=t[u[o]],c[o]=kr(a);return Lt(n,u,f,c,r)}function Cu(n){return Nu(n)&&n!=+n}function Tu(n){return null==n?!1:ui.call(n)==G?ii.test(ni.call(n)):_(n)&&In.test(n)||!1}function Su(n){return null===n}function Nu(n){return"number"==typeof n||_(n)&&ui.call(n)==X||!1}function Uu(n){return _(n)&&ui.call(n)==H||!1}function Wu(n){return"string"==typeof n||_(n)&&ui.call(n)==nn||!1}function Fu(n){return _(n)&&Ir(n.length)&&$n[ui.call(n)]||!1}function Lu(n){return"undefined"==typeof n}function $u(n){var t=n?n.length:0;return Ir(t)?t?nt(n):[]:uo(n)}function Bu(n){return _t(n,Zu(n))}function Du(n,t,r){var e=Di(n);return r&&Rr(n,t,r)&&(t=null),t?_t(t,e,ea(t)):e}function zu(n){if(null==n)return n;var t=nt(arguments);return t.push(st),ra.apply(A,t)}function Mu(n,t,r){return t=dr(t,r,3),Rt(n,t,Tt,!0)}function qu(n,t,r){return t=dr(t,r,3),Rt(n,t,St,!0)}function Pu(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=nr(t,r,3)),kt(n,t,Zu)}function Ku(n,t,r){return t=nr(t,r,3),Ot(n,t,Zu)}function Vu(n,t,r){return("function"!=typeof t||"undefined"!=typeof r)&&(t=nr(t,r,3)),Tt(n,t)}function Yu(n,t,r){return t=nr(t,r,3),Ot(n,t,ea)}function Gu(n){return Nt(n,Zu(n))}function Ju(n,t){return n?ri.call(n,t):!1}function Xu(n,t,r){r&&Rr(n,t,r)&&(t=null);for(var e=-1,u=ea(n),o=u.length,i={};++e<o;){var a=u[e],f=n[a];t?ri.call(i,f)?i[f].push(a):i[f]=[a]:i[f]=a}return i}function Zu(n){if(null==n)return[];ku(n)||(n=Yo(n));var t=n.length;t=t&&Ir(t)&&(Hi(n)||Bi.nonEnumArgs&&bu(n))&&t||0;for(var r=n.constructor,e=-1,u="function"==typeof r&&r.prototype===n,o=zo(t),i=t>0;++e<t;)o[e]=e+"";for(var a in n)i&&Er(a,t)||"constructor"==a&&(u||!ri.call(n,a))||o.push(a);return o}function Hu(n,t,r){var e={};return t=dr(t,r,3),Tt(n,function(n,r,u){e[r]=t(n,r,u)}),e}function Qu(n,t,r){if(null==n)return{};if("function"!=typeof t){var e=ot(It(arguments,!1,!1,1),Jo);return Cr(n,wt(Zu(n),e))}return t=nr(t,r,3),Tr(n,function(n,r,e){return!t(n,r,e)})}function no(n){for(var t=-1,r=ea(n),e=r.length,u=zo(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function to(n,t,r){return null==n?{}:"function"==typeof t?Tr(n,nr(t,r,3)):Cr(n,It(arguments,!1,!1,1))}function ro(n,t,r){var e=null==n?A:n[t];return"undefined"==typeof e&&(e=r),na(e)?e.call(n):e}function eo(n,t,r,e){var u=Hi(n)||Fu(n);if(t=dr(t,e,4),null==r)if(u||ku(n)){var o=n.constructor;r=u?Hi(n)?new o:[]:Di(na(o)&&o.prototype)}else r={};return(u?tt:Tt)(n,function(n,e,u){return t(r,n,e,u)}),r}function uo(n){return Xt(n,ea(n))}function oo(n){return Xt(n,Zu(n))}function io(n,t,r){return t=+t||0,"undefined"==typeof r?(r=t,t=0):r=+r||0,n>=t&&r>n}function ao(n,t,r){r&&Rr(n,t,r)&&(t=r=null);var e=null==n,u=null==t;if(null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1){var o=Ci();return Ri(n+o*(t-n+parseFloat("1e-"+((o+"").length-1))),t)}return Kt(n,t)}function fo(n){return n=o(n),n&&n.charAt(0).toUpperCase()+n.slice(1)}function co(n){return n=o(n),n&&n.replace(kn,s);
  }function lo(n,t,r){n=o(n),t+="";var e=n.length;return r=("undefined"==typeof r?e:Ri(0>r?0:+r||0,e))-t.length,r>=0&&n.indexOf(t,r)==r}function so(n){return n=o(n),n&&mn.test(n)?n.replace(yn,p):n}function po(n){return n=o(n),n&&Tn.test(n)?n.replace(Cn,"\\$&"):n}function ho(n,t,r){n=o(n),t=+t;var e=n.length;if(e>=t||!Ai(t))return n;var u=(t-e)/2,i=si(u),a=ci(u);return r=sr("",a,r),r.slice(0,i)+n+r}function vo(n,t,r){return n=o(n),n&&sr(n,t,r)+n}function _o(n,t,r){return n=o(n),n&&n+sr(n,t,r)}function go(n,t,r){return r&&Rr(n,t,r)&&(t=0),Oi(n,t)}function yo(n,t){var r="";if(n=o(n),t=+t,1>t||!n||!Ai(t))return r;do t%2&&(r+=n),t=si(t/2),n+=n;while(t);return r}function mo(n,t,r){return n=o(n),r=null==r?0:Ri(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r}function wo(n,t,r){var e=g.templateSettings;r&&Rr(n,t,r)&&(t=r=null),n=o(n),t=ht(ht({},r||t),e,pt);var u,i,a=ht(ht({},t.imports),e.imports,pt),f=ea(a),c=Xt(a,f),l=0,s=t.interpolate||On,p="__p += '",v=Go((t.escape||On).source+"|"+s.source+"|"+(s===xn?An:On).source+"|"+(t.evaluate||On).source+"|$","g"),_="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Ln+"]")+"\n";n.replace(v,function(t,r,e,o,a,f){return e||(e=o),p+=n.slice(l,f).replace(Nn,h),r&&(u=!0,p+="' +\n__e("+r+") +\n'"),a&&(i=!0,p+="';\n"+a+";\n__p += '"),e&&(p+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),l=f+t.length,t}),p+="';\n";var y=t.variable;y||(p="with (obj) {\n"+p+"\n}\n"),p=(i?p.replace(hn,""):p).replace(vn,"$1").replace(_n,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var d=Io(function(){return Po(f,_+"return "+p).apply(A,c)});if(d.source=p,Iu(d))throw d;return d}function bo(n,t,r){var e=n;return(n=o(n))?(r?Rr(e,t,r):null==t)?n.slice(m(n),w(n)+1):(t+="",n.slice(a(n,t),f(n,t)+1)):n}function xo(n,t,r){var e=n;return n=o(n),n?(r?Rr(e,t,r):null==t)?n.slice(m(n)):n.slice(a(n,t+"")):n}function Ao(n,t,r){var e=n;return n=o(n),n?(r?Rr(e,t,r):null==t)?n.slice(0,w(n)+1):n.slice(0,f(n,t+"")+1):n}function jo(n,t,r){r&&Rr(n,t,r)&&(t=null);var e=U,u=W;if(null!=t)if(ku(t)){var i="separator"in t?t.separator:i;e="length"in t?+t.length||0:e,u="omission"in t?o(t.omission):u}else e=+t||0;if(n=o(n),e>=n.length)return n;var a=e-u.length;if(1>a)return u;var f=n.slice(0,a);if(null==i)return f+u;if(Uu(i)){if(n.slice(a).search(i)){var c,l,s=n.slice(0,a);for(i.global||(i=Go(i.source,(jn.exec(i)||"")+"g")),i.lastIndex=0;c=i.exec(s);)l=c.index;f=f.slice(0,null==l?a:l)}}else if(n.indexOf(i,a)!=a){var p=f.lastIndexOf(i);p>-1&&(f=f.slice(0,p))}return f+u}function Eo(n){return n=o(n),n&&dn.test(n)?n.replace(gn,b):n}function Ro(n,t,r){return r&&Rr(n,t,r)&&(t=null),n=o(n),n.match(t||Un)||[]}function Io(){var n=arguments.length,t=arguments[0];try{for(var r=zo(n?n-1:0);--n>0;)r[n-1]=arguments[n];return t.apply(A,r)}catch(e){return Iu(e)?e:new qo(e)}}function ko(n,t,r){return r&&Rr(n,t,r)&&(t=null),_(n)?To(n):yt(n,t)}function Oo(n){return function(){return n}}function Co(n){return n}function To(n){return Bt(dt(n,!0))}function So(n,t){return Dt(n+"",dt(t,!0))}function No(n,t,r){if(null==r){var e=ku(t),u=e&&ea(t),o=u&&u.length&&Nt(t,u);(o?o.length:e)||(o=!1,r=t,t=n,n=this)}o||(o=Nt(t,ea(t)));var i=!0,a=-1,f=na(n),c=o.length;r===!1?i=!1:ku(r)&&"chain"in r&&(i=r.chain);for(;++a<c;){var l=o[a],s=t[l];n[l]=s,f&&(n.prototype[l]=function(t){return function(){var r=this.__chain__;if(i||r){var e=n(this.__wrapped__);return(e.__actions__=nt(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}var u=[this.value()];return hi.apply(u,arguments),t.apply(n,u)}}(s))}return n}function Uo(){return n._=oi,this}function Wo(){}function Fo(n){return qt(n+"")}function Lo(n){return function(t){return null==n?A:n[t]}}function $o(n,t,r){r&&Rr(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;for(var e=-1,u=Ei(ci((t-n)/(r||1)),0),o=zo(u);++e<u;)o[e]=n,n+=r;return o}function Bo(n,t,r){if(n=+n,1>n||!Ai(n))return[];var e=-1,u=zo(Ri(n,Ni));for(t=nr(t,r,1);++e<n;)Ni>e?u[e]=t(e):t(e);return u}function Do(n){var t=++ei;return o(n)+t}n=n?Zn.defaults(Vn.Object(),n,Zn.pick(Vn,Fn)):Vn;var zo=n.Array,Mo=n.Date,qo=n.Error,Po=n.Function,Ko=n.Math,Vo=n.Number,Yo=n.Object,Go=n.RegExp,Jo=n.String,Xo=n.TypeError,Zo=zo.prototype,Ho=Yo.prototype,Qo=(Qo=n.window)&&Qo.document,ni=Po.prototype.toString,ti=qt("length"),ri=Ho.hasOwnProperty,ei=0,ui=Ho.toString,oi=n._,ii=Go("^"+po(ui).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ai=Tu(ai=n.ArrayBuffer)&&ai,fi=Tu(fi=ai&&new ai(0).slice)&&fi,ci=Ko.ceil,li=n.clearTimeout,si=Ko.floor,pi=Tu(pi=Yo.getPrototypeOf)&&pi,hi=Zo.push,vi=Ho.propertyIsEnumerable,_i=Tu(_i=n.Set)&&_i,gi=n.setTimeout,yi=Zo.splice,di=Tu(di=n.Uint8Array)&&di,mi=Tu(mi=n.WeakMap)&&mi,wi=function(){try{var t=Tu(t=n.Float64Array)&&t,r=new t(new ai(10),0,1)&&t}catch(e){}return r}(),bi=Tu(bi=zo.isArray)&&bi,xi=Tu(xi=Yo.create)&&xi,Ai=n.isFinite,ji=Tu(ji=Yo.keys)&&ji,Ei=Ko.max,Ri=Ko.min,Ii=Tu(Ii=Mo.now)&&Ii,ki=Tu(ki=Vo.isFinite)&&ki,Oi=n.parseInt,Ci=Ko.random,Ti=Vo.NEGATIVE_INFINITY,Si=Vo.POSITIVE_INFINITY,Ni=Ko.pow(2,32)-1,Ui=Ni-1,Wi=Ni>>>1,Fi=wi?wi.BYTES_PER_ELEMENT:0,Li=Ko.pow(2,53)-1,$i=mi&&new mi,Bi=g.support={};!function(t){Bi.funcDecomp=!Tu(n.WinRTError)&&Sn.test(x),Bi.funcNames="string"==typeof Po.name;try{Bi.dom=11===Qo.createDocumentFragment().nodeType}catch(r){Bi.dom=!1}try{Bi.nonEnumArgs=!vi.call(arguments,1)}catch(r){Bi.nonEnumArgs=!0}}(0,0),g.templateSettings={escape:wn,evaluate:bn,interpolate:xn,variable:"",imports:{_:g}};var Di=function(){function t(){}return function(r){if(ku(r)){t.prototype=r;var e=new t;t.prototype=null}return e||n.Object()}}(),zi=$i?function(n,t){return $i.set(n,t),n}:Co;fi||(tr=ai&&di?function(n){var t=n.byteLength,r=wi?si(t/Fi):0,e=r*Fi,u=new ai(t);if(r){var o=new wi(u,0,r);o.set(new wi(n,0,r))}return t!=e&&(o=new di(u,e),o.set(new di(n,e))),u}:Oo(null));var Mi=xi&&_i?function(n){return new Xn(n)}:Oo(null),qi=$i?function(n){return $i.get(n)}:Wo,Pi=function(){var n=0,t=0;return function(r,e){var u=Zi(),o=L-(u-t);if(t=u,o>0){if(++n>=F)return r}else n=0;return zi(r,e)}}(),Ki=ur(function(n,t,r){ri.call(n,r)?++n[r]:n[r]=1}),Vi=ur(function(n,t,r){ri.call(n,r)?n[r].push(t):n[r]=[t]}),Yi=ur(function(n,t,r){n[r]=t}),Gi=cr(it),Ji=cr(at,!0),Xi=ur(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Zi=Ii||function(){return(new Mo).getTime()},Hi=bi||function(n){return _(n)&&Ir(n.length)&&ui.call(n)==P||!1};Bi.dom||(ju=function(n){return n&&1===n.nodeType&&_(n)&&!ta(n)||!1});var Qi=ki||function(n){return"number"==typeof n&&Ai(n)},na=e(/x/)||di&&!e(di)?function(n){return ui.call(n)==G}:e,ta=pi?function(n){if(!n||ui.call(n)!=Z)return!1;var t=n.valueOf,r=Tu(t)&&(r=pi(t))&&pi(r);return r?n==r||pi(n)==r:Nr(n)}:Nr,ra=or(ht),ea=ji?function(n){if(n)var t=n.constructor,r=n.length;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&r&&Ir(r)?Ur(n):ku(n)?ji(n):[]}:Ur,ua=or(zt),oa=ar(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),ia=ar(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()});8!=Oi(Wn+"08")&&(go=function(n,t,r){return(r?Rr(n,t,r):null==t)?t=0:t&&(t=+t),n=bo(n),Oi(n,t||(Rn.test(n)?16:10))});var aa=ar(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),fa=ar(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))});return g.prototype=J.prototype,Q.prototype=Di(J.prototype),Q.prototype.constructor=Q,tn.prototype=Di(J.prototype),tn.prototype.constructor=tn,Pn.prototype["delete"]=Kn,Pn.prototype.get=Yn,Pn.prototype.has=Gn,Pn.prototype.set=Jn,Xn.prototype.push=Qn,lu.Cache=Pn,g.after=Ze,g.ary=He,g.assign=ra,g.at=Oe,g.before=Qe,g.bind=nu,g.bindAll=tu,g.bindKey=ru,g.callback=ko,g.chain=we,g.chunk=$r,g.compact=Br,g.constant=Oo,g.countBy=Ki,g.create=Du,g.curry=eu,g.curryRight=uu,g.debounce=ou,g.defaults=zu,g.defer=iu,g.delay=au,g.difference=Dr,g.drop=zr,g.dropRight=Mr,g.dropRightWhile=qr,g.dropWhile=Pr,g.fill=Kr,g.filter=Te,g.flatten=Jr,g.flattenDeep=Xr,g.flow=fu,g.flowRight=cu,g.forEach=We,g.forEachRight=Fe,g.forIn=Pu,g.forInRight=Ku,g.forOwn=Vu,g.forOwnRight=Yu,g.functions=Gu,g.groupBy=Vi,g.indexBy=Yi,g.initial=Hr,g.intersection=Qr,g.invert=Xu,g.invoke=$e,g.keys=ea,g.keysIn=Zu,g.map=Be,g.mapValues=Hu,g.matches=To,g.matchesProperty=So,g.memoize=lu,g.merge=ua,g.mixin=No,g.negate=su,g.omit=Qu,g.once=pu,g.pairs=no,g.partial=hu,g.partialRight=vu,g.partition=Xi,g.pick=to,g.pluck=De,g.property=Fo,g.propertyOf=Lo,g.pull=re,g.pullAt=ee,g.range=$o,g.rearg=_u,g.reject=qe,g.remove=ue,g.rest=oe,g.shuffle=Ke,g.slice=ie,g.sortBy=Ge,g.sortByAll=Je,g.spread=gu,g.take=ce,g.takeRight=le,g.takeRightWhile=se,g.takeWhile=pe,g.tap=be,g.throttle=yu,g.thru=xe,g.times=Bo,g.toArray=$u,g.toPlainObject=Bu,g.transform=eo,g.union=he,g.uniq=ve,g.unzip=_e,g.values=uo,g.valuesIn=oo,g.where=Xe,g.without=ge,g.wrap=du,g.xor=ye,g.zip=de,g.zipObject=me,g.backflow=cu,g.collect=Be,g.compose=cu,g.each=We,g.eachRight=Fe,g.extend=ra,g.iteratee=ko,g.methods=Gu,g.object=me,g.select=Te,g.tail=oe,g.unique=ve,No(g,g),g.attempt=Io,g.camelCase=oa,g.capitalize=fo,g.clone=mu,g.cloneDeep=wu,g.deburr=co,g.endsWith=lo,g.escape=so,g.escapeRegExp=po,g.every=Ce,g.find=Se,g.findIndex=Vr,g.findKey=Mu,g.findLast=Ne,g.findLastIndex=Yr,g.findLastKey=qu,g.findWhere=Ue,g.first=Gr,g.has=Ju,g.identity=Co,g.includes=Le,g.indexOf=Zr,g.inRange=io,g.isArguments=bu,g.isArray=Hi,g.isBoolean=xu,g.isDate=Au,g.isElement=ju,g.isEmpty=Eu,g.isEqual=Ru,g.isError=Iu,g.isFinite=Qi,g.isFunction=na,g.isMatch=Ou,g.isNaN=Cu,g.isNative=Tu,g.isNull=Su,g.isNumber=Nu,g.isObject=ku,g.isPlainObject=ta,g.isRegExp=Uu,g.isString=Wu,g.isTypedArray=Fu,g.isUndefined=Lu,g.kebabCase=ia,g.last=ne,g.lastIndexOf=te,g.max=Gi,g.min=Ji,g.noConflict=Uo,g.noop=Wo,g.now=Zi,g.pad=ho,g.padLeft=vo,g.padRight=_o,g.parseInt=go,g.random=ao,g.reduce=ze,g.reduceRight=Me,g.repeat=yo,g.result=ro,g.runInContext=x,g.size=Ve,g.snakeCase=aa,g.some=Ye,g.sortedIndex=ae,g.sortedLastIndex=fe,g.startCase=fa,g.startsWith=mo,g.template=wo,g.trim=bo,g.trimLeft=xo,g.trimRight=Ao,g.trunc=jo,g.unescape=Eo,g.uniqueId=Do,g.words=Ro,g.all=Ce,g.any=Ye,g.contains=Le,g.detect=Se,g.foldl=ze,g.foldr=Me,g.head=Gr,g.include=Le,g.inject=ze,No(g,function(){var n={};return Tt(g,function(t,r){g.prototype[r]||(n[r]=t)}),n}(),!1),g.sample=Pe,g.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return Pe(t,n)}):Pe(this.value())},g.VERSION=j,tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){g[n].placeholder=g}),tt(["filter","map","takeWhile"],function(n,t){var r=t==$,e=t==D;tn.prototype[n]=function(n,u){var o=this.clone(),i=o.__filtered__,a=o.__iteratees__||(o.__iteratees__=[]);return o.__filtered__=i||r||e&&o.__dir__<0,a.push({iteratee:dr(n,u,3),type:t}),o}}),tt(["drop","take"],function(n,t){var r="__"+n+"Count__",e=n+"While";tn.prototype[n]=function(e){e=null==e?1:Ei(si(e)||0,0);var u=this.clone();if(u.__filtered__){var o=u[r];u[r]=t?Ri(o,e):o+e}else{var i=u.__views__||(u.__views__=[]);i.push({size:e,type:n+(u.__dir__<0?"Right":"")})}return u},tn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},tn.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[e](n,t).reverse()}}),tt(["first","last"],function(n,t){var r="take"+(t?"Right":"");tn.prototype[n]=function(){return this[r](1).value()[0]}}),tt(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");tn.prototype[n]=function(){return this[r](1)}}),tt(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?Bt:qt;tn.prototype[n]=function(n){return this[r](e(n))}}),tn.prototype.compact=function(){return this.filter(Co)},tn.prototype.dropWhile=function(n,t){var r;return n=dr(n,t,3),this.filter(function(t,e,u){return r||(r=!n(t,e,u))})},tn.prototype.reject=function(n,t){return n=dr(n,t,3),this.filter(function(t,r,e){return!n(t,r,e)})},tn.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);return"undefined"!=typeof t&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},tn.prototype.toArray=function(){return this.drop(0)},Tt(tn.prototype,function(n,t){var r=g[t],e=/^(?:first|last)$/.test(t);g.prototype[t]=function(){var t=this.__wrapped__,u=arguments,o=this.__chain__,i=!!this.__actions__.length,a=t instanceof tn,f=a&&!i;if(e&&!o)return f?n.call(t):r.call(g,this.value());var c=function(n){var t=[n];return hi.apply(t,u),r.apply(g,t)};if(a||Hi(t)){var l=f?t:new tn(this),s=n.apply(l,u);if(!e&&(i||s.__actions__)){var p=s.__actions__||(s.__actions__=[]);p.push({func:xe,args:[c],thisArg:g})}return new Q(s,o)}return this.thru(c)}}),tt(["concat","join","pop","push","shift","sort","splice","unshift"],function(n){var t=Zo[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|shift)$/.test(n);g.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),tn.prototype.clone=zn,tn.prototype.reverse=Mn,tn.prototype.value=qn,g.prototype.chain=Ae,g.prototype.commit=je,g.prototype.plant=Ee,g.prototype.reverse=Re,g.prototype.toString=Ie,g.prototype.run=g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=ke,g.prototype.collect=g.prototype.map,g.prototype.head=g.prototype.first,g.prototype.select=g.prototype.filter,g.prototype.tail=g.prototype.rest,g}var A,j="3.3.0",E=1,R=2,I=4,k=8,O=16,C=32,T=64,S=128,N=256,U=30,W="...",F=150,L=16,$=0,B=1,D=2,z="Expected a function",M="__lodash_placeholder__",q="[object Arguments]",P="[object Array]",K="[object Boolean]",V="[object Date]",Y="[object Error]",G="[object Function]",J="[object Map]",X="[object Number]",Z="[object Object]",H="[object RegExp]",Q="[object Set]",nn="[object String]",tn="[object WeakMap]",rn="[object ArrayBuffer]",en="[object Float32Array]",un="[object Float64Array]",on="[object Int8Array]",an="[object Int16Array]",fn="[object Int32Array]",cn="[object Uint8Array]",ln="[object Uint8ClampedArray]",sn="[object Uint16Array]",pn="[object Uint32Array]",hn=/\b__p \+= '';/g,vn=/\b(__p \+=) '' \+/g,_n=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gn=/&(?:amp|lt|gt|quot|#39|#96);/g,yn=/[&<>"'`]/g,dn=RegExp(gn.source),mn=RegExp(yn.source),wn=/<%-([\s\S]+?)%>/g,bn=/<%([\s\S]+?)%>/g,xn=/<%=([\s\S]+?)%>/g,An=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,jn=/\w*$/,En=/^\s*function[ \n\r\t]+\w/,Rn=/^0[xX]/,In=/^\[object .+?Constructor\]$/,kn=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,On=/($^)/,Cn=/[.*+?^${}()|[\]\/\\]/g,Tn=RegExp(Cn.source),Sn=/\bthis\b/,Nn=/['\n\r\u2028\u2029\\]/g,Un=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"{2,}(?="+n+t+")|"+n+"?"+t+"|"+n+"+|[0-9]+","g")}(),Wn=" 	\fÂ \ufeff\n\r\u2028\u2029áš€á Žâ€€â€â€‚â€ƒâ€„â€…â€†â€‡â€ˆâ€‰â€Šâ€¯âŸã€€",Fn=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Ln=-1,$n={};$n[en]=$n[un]=$n[on]=$n[an]=$n[fn]=$n[cn]=$n[ln]=$n[sn]=$n[pn]=!0,$n[q]=$n[P]=$n[rn]=$n[K]=$n[V]=$n[Y]=$n[G]=$n[J]=$n[X]=$n[Z]=$n[H]=$n[Q]=$n[nn]=$n[tn]=!1;var Bn={};Bn[q]=Bn[P]=Bn[rn]=Bn[K]=Bn[V]=Bn[en]=Bn[un]=Bn[on]=Bn[an]=Bn[fn]=Bn[X]=Bn[Z]=Bn[H]=Bn[nn]=Bn[cn]=Bn[ln]=Bn[sn]=Bn[pn]=!0,Bn[Y]=Bn[G]=Bn[J]=Bn[Q]=Bn[tn]=!1;var Dn={leading:!1,maxWait:0,trailing:!1},zn={"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss"},Mn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},qn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Pn={"function":!0,object:!0},Kn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Vn=Pn[typeof window]&&window!==(this&&this.window)?window:this,Yn=Pn[typeof exports]&&exports&&!exports.nodeType&&exports,Gn=Pn[typeof module]&&module&&!module.nodeType&&module,Jn=Yn&&Gn&&"object"==typeof n&&n;!Jn||Jn.global!==Jn&&Jn.window!==Jn&&Jn.self!==Jn||(Vn=Jn);var Xn=Gn&&Gn.exports===Yn&&Yn,Zn=x();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Vn._=Zn,define(function(){return Zn})):Yn&&Gn?Xn?(Gn.exports=Zn)._=Zn:Yn._=Zn:Vn._=Zn}).call(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});


},{}],253:[function(require,module,exports){
  var M3U = module.exports = function M3U() {
    this.items = {
      PlaylistItem: [],
      StreamItem: [],
      IframeStreamItem: [],
      MediaItem: []
    };
    this.properties = {};
  };

  M3U.PlaylistItem     = require('./m3u/PlaylistItem');
  M3U.MediaItem        = require('./m3u/MediaItem');
  M3U.StreamItem       = require('./m3u/StreamItem');
  M3U.IframeStreamItem = require('./m3u/IframeStreamItem');

  var Item = require('./m3u/Item');

  M3U.create = function createM3U() {
    return new M3U;
  };

  M3U.prototype.get = function getProperty(key) {
    return this.properties[key];
  };

  M3U.prototype.set = function setProperty(key, value) {
    var tagKey = propertyMap.findByTag(key);
    if (tagKey) key = tagKey.key;
    this.properties[key] = coerce[dataTypes[key] || 'unknown'](value);

    return this;
  };

  M3U.prototype.addItem = function addItem(item) {
    var itemClassName = item.constructor.name || item.getClassName();
    this.items[itemClassName].push(item);

    return this;
  };

  M3U.prototype.addPlaylistItem = function addPlaylistItem(data) {
    this.items.PlaylistItem.push(M3U.PlaylistItem.create(data));
  };

  M3U.prototype.addMediaItem = function addMediaItem(data) {
    this.items.MediaItem.push(M3U.MediaItem.create(data));
  };

  M3U.prototype.addStreamItem = function addStreamItem(data) {
    this.items.StreamItem.push(M3U.StreamItem.create(data));
  };

  M3U.prototype.addIframeStreamItem = function addIframeStreamItem(data) {
    this.items.IframeStreamItem.push(M3U.IframeStreamItem.create(data));
  };

  M3U.prototype.domainDurations = function domainDurations() {
    var index = 0;
    return this.items.PlaylistItem.reduce(function(duration, item) {
      if (item.get('discontinuity')) {
        index = duration.push(0) - 1;
      }

      duration[index] += item.get('duration');
      return duration;
    }, [0]);
  };

  M3U.prototype.totalDuration = function totalDuration() {
    return this.items.PlaylistItem.reduce(function(duration, item) {
      return duration + item.get('duration');
    }, 0);
  };

  M3U.prototype.merge = function merge(m3u) {
    if (m3u.get('targetDuration') > this.get('targetDuration')) {
      this.set('targetDuration', m3u.get('targetDuration'));
    }
    m3u.items.PlaylistItem[0].set('discontinuity', true);
    this.items.PlaylistItem = this.items.PlaylistItem.concat(m3u.items.PlaylistItem);

    return this;
  };

  M3U.prototype.toString = function toString() {
    var self   = this;
    var output = ['#EXTM3U'];
    Object.keys(this.properties).forEach(function(key) {
      var tagKey = propertyMap.findByKey(key);
      var tag = tagKey ? tagKey.tag : key;

      if (dataTypes[key] == 'boolean') {
        output.push('#' + tag);
      } else {
        output.push('#' + tag + ':' + self.get(key));
      }
    });

    if (this.items.PlaylistItem.length) {
      output.push(this.items.PlaylistItem.map(itemToString).join('\n'));

      if (this.get('playlistType') === 'VOD') {
        output.push('#EXT-X-ENDLIST');
      }
    } else {
      if (this.items.StreamItem.length) {
        output.push(this.items.StreamItem.map(itemToString).join('\n') + '\n');
      }
      if (this.items.IframeStreamItem.length) {
        output.push(this.items.IframeStreamItem.map(itemToString).join('\n') + '\n');
      }
      if (this.items.MediaItem.length) {
        output.push(this.items.MediaItem.map(itemToString).join('\n') + '\n');
      }
    }

    return output.join('\n') + '\n';
  };

  M3U.prototype.serialize = function serialize() {
    var object = { properties: this.properties, items: {} };
    var self   = this;
    Object.keys(this.items).forEach(function(constructor) {
      object.items[constructor] = self.items[constructor].map(serializeItem);
    });
    return object;
  };

  M3U.unserialize = function unserialize(object) {
    var m3u = new M3U;
    m3u.properties = object.properties;
    Object.keys(object.items).forEach(function(constructor) {
      m3u.items[constructor] = object.items[constructor].map(
        Item.unserialize.bind(null, M3U[constructor])
      );
    });
    return m3u;
  };

  function itemToString(item) {
    return item.toString();
  }

  function serializeItem(item) {
    return item.serialize();
  }

  var coerce = {
    boolean: function coerceBoolean(value) {
      return true;
    },
    integer: function coerceInteger(value) {
      return parseInt(value, 10);
    },
    unknown: function coerceUnknown(value) {
      return value;
    }
  };

  var dataTypes = {
    iframesOnly    : 'boolean',
    targetDuration : 'integer',
    mediaSequence  : 'integer',
    version        : 'integer'
  };

  var propertyMap = [
    { tag: 'EXT-X-ALLOW-CACHE',    key: 'allowCache' },
    { tag: 'EXT-X-I-FRAMES-ONLY',  key: 'iframesOnly' },
    { tag: 'EXT-X-MEDIA-SEQUENCE', key: 'mediaSequence' },
    { tag: 'EXT-X-PLAYLIST-TYPE',  key: 'playlistType' },
    { tag: 'EXT-X-TARGETDURATION', key: 'targetDuration' },
    { tag: 'EXT-X-VERSION',        key: 'version' }
  ];

  propertyMap.findByTag = function findByTag(tag) {
    return propertyMap[propertyMap.map(function(tagKey) {
      return tagKey.tag;
    }).indexOf(tag)];
  };

  propertyMap.findByKey = function findByKey(key) {
    return propertyMap[propertyMap.map(function(tagKey) {
      return tagKey.key;
    }).indexOf(key)];
  };

},{"./m3u/IframeStreamItem":255,"./m3u/Item":256,"./m3u/MediaItem":257,"./m3u/PlaylistItem":258,"./m3u/StreamItem":259}],254:[function(require,module,exports){
  var AttributeList = module.exports = function AttributeList(attributes) {
    this.attributes = {};
    this.mergeAttributes(attributes);
  };

  var dataTypes = AttributeList.dataTypes = {
    'audio'      : 'quoted-string',
    'autoselect' : 'boolean',
    'bandwidth'  : 'decimal-integer',
    'byterange'  : 'enumerated-string',
    'codecs'     : 'quoted-string',
    'default'    : 'boolean',
    'duration'   : 'decimal-floating-point',
    'forced'     : 'boolean',
    'group-id'   : 'quoted-string',
    'language'   : 'quoted-string',
    'name'       : 'quoted-string',
    'program-id' : 'decimal-integer',
    'resolution' : 'decimal-resolution',
    'subtitles'  : 'quoted-string',
    'title'      : 'enumerated-string',
    'type'       : 'enumerated-string',
    'uri'        : 'quoted-string',
    'video'      : 'quoted-string'
  };

  AttributeList.prototype.mergeAttributes = function mergeAttributes(attributes) {
    var self = this;
    if (Array.isArray(attributes)) {
      attributes.forEach(function(attribute) {
        self.set(attribute.key, attribute.value);
      });
    }
  };

  AttributeList.prototype.get = function getValue(key) {
    return this.attributes[key];
  };

  AttributeList.prototype.set = function setValue(key, value) {
    key = key.toLowerCase();
    this.attributes[key] = parse[dataTypes[key] || 'unknown'](value, key);

    return this;
  };

  AttributeList.prototype.getCoerced = function getCoerced(key) {
    return coerce[dataTypes[key] || 'unknown'](this.get(key));
  };

  AttributeList.prototype.toString = function toString() {
    var self = this;
    return Object.keys(this.attributes).map(function(key) {
      return [key.toUpperCase(), self.getCoerced(key)].join('=');
    }).join(',');
  };

  AttributeList.prototype.serialize = function serialize() {
    return this.attributes;
  };

  AttributeList.unserialize = function unserialize(object) {
    var list = new AttributeList;
    list.attributes = object;
    return list;
  };

  var coerce = {
    'boolean': function coerceBoolean(value) {
      return value ? 'YES' : 'NO';
    },
    'decimal-floating-point': parseFloat,
    'decimal-integer': function coerceDecimalInteger(value) {
      return parseInt(value, 10);
    },
    'decimal-resolution': function coerceDecimalResolution(value) {
      if (Array.isArray(value)) {
        return value.join('x');
      } else {
        return value;
      }
    },
    'enumerated-string': function coerceEnumeratedString(value) {
      return value;
    },
    'quoted-string': function coerceQuotedString(value) {
      return '"' + value.replace(/"/g, '\\"') + '"';
    },
    'unknown': function coerceUnknown(value) {
      return value;
    }
  };

  var parse = {
    'boolean': function parseBoolean(value) {
      return typeof value == 'boolean'
        ? value
        : (value == 'YES' ? true : false);
    },
    'decimal-floating-point': parseFloat,
    'decimal-integer': function parseDecimalInteger(value) {
      return parseInt(value, 10);
    },
    'decimal-resolution': function coerceDecimalResolution(value) {
      return value.split('x').map(parse['decimal-integer']);
    },
    'enumerated-string': function parseEnumeratedString(value) {
      return value;
    },
    'quoted-string': function parseQuotedString(value) {
      if (Array.isArray(value)) {
        return value.join(',');
      } else if (value.indexOf('"') === 0 &&
        value.lastIndexOf('"') == value.length - 1) {
        return value.slice(1,-1);
      } else {
        return value;
      }
    },
    'unknown': function parseUnknown(value, key) {
      console.error('Handling value:', value, ' for unknown key:', key);
      return value;
    }
  };
},{}],255:[function(require,module,exports){
  var util       = require('util'),
    StreamItem = require('./StreamItem');

  var IframeStreamItem = module.exports = function IframeStreamItem(attributes) {
    StreamItem.apply(this, arguments);

    delete this.properties['uri'];
  };

  util.inherits(IframeStreamItem, StreamItem);

  IframeStreamItem.create = function createIframeStreamItem(data) {
    var item =  new IframeStreamItem();
    item.setData(data);
    return item;
  };

  IframeStreamItem.prototype.toString = function toString() {
    return '#EXT-X-I-FRAME-STREAM-INF:' + this.attributes.toString();
  };
},{"./StreamItem":259,"util":81}],256:[function(require,module,exports){
  var AttributeList    = require('./AttributeList');

  var Item = module.exports = function Item(attributes) {
    this.attributes = new AttributeList(attributes);
    this.properties = {
      byteRange     : null,
      date          : null,
      discontinuity : null,
      duration      : null,
      title         : null,
      uri           : null
    };
  };

  Item.prototype.get = function get(key) {
    if (this.propertiesHasKey(key)) {
      return this.properties[key];
    } else {
      return this.attributes.get(key);
    }
  };

  Item.prototype.set = function set(key, value) {
    if (this.propertiesHasKey(key)) {
      this.properties[key] = value;
    } else {
      this.attributes.set(key, value);
    }

    return this;
  };

  Item.prototype.serialize = function serialize() {
    return {
      attributes  : this.attributes.serialize(),
      properties  : this.properties
    }
  };

  Item.unserialize = function unserialize(constructor, object) {
    var item = new constructor;
    item.attributes = AttributeList.unserialize(object.attributes);
    item.properties = object.properties;
    return item;
  };

  Item.prototype.setData = function setData(data) {
    var self = this;
    Object.keys(data).forEach(function(key) {
      self.set(key, data[key]);
    });
  };

  Item.prototype.propertiesHasKey = function hasKey(key) {
    return Object.keys(this.properties).indexOf(key) > -1;
  };

  Item.prototype.getClassName = function getName() {
    return this.constructor.toString().match(/function (\w*)/)[1];
  };

},{"./AttributeList":254}],257:[function(require,module,exports){
  var util = require('util'),
    Item = require('./Item');

  var MediaItem = module.exports = function MediaItem(attributes) {
    Item.apply(this, arguments);

    delete this.properties['uri'];
  };

  util.inherits(MediaItem, Item);

  MediaItem.create = function createMediaItem(data) {
    var item = new MediaItem();
    item.setData(data);
    return item;
  };

  MediaItem.prototype.toString = function toString() {
    return '#EXT-X-MEDIA:' + this.attributes.toString();
  };
},{"./Item":256,"util":81}],258:[function(require,module,exports){
  var util = require('util'),
    Item = require('./Item');

  var PlaylistItem = module.exports = function PlaylistItem() {
    Item.call(this);
    this.properties.key = null;
  };

  util.inherits(PlaylistItem, Item);

  PlaylistItem.create = function createPlaylistItem(data) {
    var item = new PlaylistItem();
    item.setData(data);
    return item;
  };

  PlaylistItem.prototype.toString = function toString() {
    var output = [];
    if (this.get('discontinuity')) {
      output.push('#EXT-X-DISCONTINUITY');
    }
    if (this.get('date')) {
      var date = this.get('date');
      if (date.getMonth) {
        date = date.toISOString();
      }
      output.push('#EXT-X-PROGRAM-DATE-TIME:' + date);
    }
    if (this.get('duration') != null || this.get('title') != null) {
      output.push(
        '#EXTINF:' + [this.get('duration').toFixed(4), this.get('title')].join(',')
      );
    }
    if (this.get('byteRange') != null) {
      output.push('#EXT-X-BYTERANGE:' + this.get('byteRange'));
    }
    output.push(this.get('uri'));

    return output.join('\n');
  };

},{"./Item":256,"util":81}],259:[function(require,module,exports){
  var util = require('util'),
    Item = require('./Item'),
    AttributeList = require('./AttributeList');

  var StreamItem = module.exports = function StreamItem(attributes) {
    Item.apply(this, arguments);
  };

  util.inherits(StreamItem, Item);

  StreamItem.create = function createStreamItem(data) {
    var item = new StreamItem();
    item.setData(data);
    return item;
  };

  StreamItem.prototype.toString = function toString() {
    var output = [];
    output.push('#EXT-X-STREAM-INF:' + this.attributes.toString());
    output.push(this.get('uri'));

    return output.join('\n');
  };
},{"./AttributeList":254,"./Item":256,"util":81}],260:[function(require,module,exports){
  /*!
   * ChunkedStream
   * Copyright(c) 2012 Daniel D. Shaw <dshaw@dshaw.com>
   * MIT Licensed
   */

  /**
   * Module dependencies.
   */

  var Stream = require('stream').Stream
    , util = require('util')

  /**
   * Exports.
   */

  module.exports = ChunkedStream

  /**
   * Chunked Stream
   *
   * - Buffers and rechunks on a specific character, by default '\n'.
   */


  function ChunkedStream (matcher, passEmpty) {
    if (!(this instanceof ChunkedStream)) return new ChunkedStream(matcher, passEmpty)

    if (typeof matcher === 'undefined') {
      matcher = '\n'
    }

    this.matcher = matcher
    this.passEmpty = passEmpty
    this.buffer = ''

    this.writable = true
    this.readable = true
  }

  util.inherits(ChunkedStream, Stream)


  ChunkedStream.prototype.write = function (chunk) {
    chunk = chunk.toString()
    var len = chunk.length
      , i = 0

    while (i < len) {
      var char = chunk[i].toString()
      this.buffer += char
      if (char == this.matcher) {
        var data = this.buffer
        this.buffer = ''
        if (!this.passEmpty && data == this.matcher) {
          return true // skip
        }
        this.emit('data', data)
      }
      i++
    }
    return true
  }

  ChunkedStream.prototype.end = function () {
    if (this.buffer) {
      this.emit('data', this.buffer)
    }
    this.emit('end')
  }

},{"stream":73,"util":81}],261:[function(require,module,exports){
  var util = require('util'),
    ChunkedStream = require('chunked-stream'),
    M3U = require('./m3u'),
    PlaylistItem = require('./m3u/PlaylistItem'),
    StreamItem = require('./m3u/StreamItem'),
    IframeStreamItem = require('./m3u/IframeStreamItem'),
    MediaItem = require('./m3u/MediaItem');

// used for splitting strings by commas not within double quotes
  var NON_QUOTED_COMMA = /,(?=(?:[^"]|"[^"]*")*$)/;

  var REG = /METHOD=([^,]*)(?:,URI="([^"]*)"(?:,IV=0[xX](.*))?)?/;

  var m3uParser = module.exports = function m3uParser() {
    ChunkedStream.apply(this, ['\n', true]);

    this.linesRead = 0;
    this.m3u = new M3U;

    this.on('data', this.parse.bind(this));
    var self = this;
    this.on('end', function() {
      self.emit('m3u', self.m3u);
    });
  };

  util.inherits(m3uParser, ChunkedStream);

  m3uParser.M3U = M3U;

  m3uParser.createStream = function() {
    return new m3uParser;
  };

  m3uParser.prototype.parse = function parse(line) {
    line = line.trim();
    if (this.linesRead == 0) {
      if (line != '#EXTM3U') {
        return this.emit('error', new Error(
          'Non-valid M3U file. First line: ' + line
        ));
      }
      this.linesRead++;
      return true;
    }
    if ([''].indexOf(line) > -1) return true;
    if (['#EXT-X-ENDLIST'].indexOf(line) > -1){
      this.m3u.set("EXT-X-PLAYLIST-TYPE", "VOD");
      return true;
    }
    if (line.indexOf('#') == 0) {
      this.parseLine(line);
    } else {
      if (this.currentItem.attributes.uri != undefined) {
        this.addItem(new PlaylistItem);
      }
      this.currentItem.set('uri', line);
      this.emit('item', this.currentItem);
    }
    this.linesRead++;
  };

  m3uParser.prototype.parseLine = function parseLine(line) {
    var parts = line.slice(1).split(/:(.*)/);
    var tag   = parts[0];
    var data  = parts[1];
    if (typeof this[tag] == 'function') {
      this[tag](data, tag);
    } else {
      this.m3u.set(tag, data);
    }
  };

  m3uParser.prototype.addItem = function addItem(item) {
    this.m3u.addItem(item);
    this.currentItem = item;
    return item;
  };

  m3uParser.prototype['EXTINF'] = function parseInf(data) {
    this.addItem(new PlaylistItem);
    if(this.currentKey){
      this.currentItem.set('key',this.currentKey);
    }
    data = data.split(',');
    this.currentItem.set('duration', parseFloat(data[0]));
    this.currentItem.set('title', data[1]);
  };


  m3uParser.prototype['EXT-X-KEY'] = function parseInf(data) {

    var method = data.replace(REG,"$1");
    var uri = data.replace(REG,"$2");
    var ivString = data.replace(REG,"$3");
    var iv;

    //TODO: replace the raw JavaScript object by a Object inheriting from Item
    this.currentKey = {
      method: method
    };
    if(uri.length){
      this.currentKey.url= uri;
    }

    if(ivString.length){
      iv = new Uint8Array(16);
      for(var i=0; i<32; i+=2){
        var byteString = ivString.substr(i, 2);
        var byteInt = parseInt(byteString, 16);
        iv.set([byteInt],i/2);
      }
      this.currentKey.iv= iv;
    }
  };

  m3uParser.prototype['EXT-X-BYTERANGE'] = function parseByteRange(data) {
    this.currentItem.set('byteRange', data);
  };

  m3uParser.prototype['EXT-X-STREAM-INF'] = function(data) {
    this.addItem(new StreamItem(this.parseAttributes(data)));
  };

  m3uParser.prototype['EXT-X-I-FRAME-STREAM-INF'] = function(data) {
    this.addItem(new IframeStreamItem(this.parseAttributes(data)));
    this.emit('item', this.currentItem);
  };

  m3uParser.prototype['EXT-X-MEDIA'] = function(data) {
    this.addItem(new MediaItem(this.parseAttributes(data)));
    this.emit('item', this.currentItem);
  };

  m3uParser.prototype.parseAttributes = function parseAttributes(data) {
    data = data.split(NON_QUOTED_COMMA);
    var self = this;
    return data.map(function(attribute) {
      var keyValue = attribute.split(/=(.+)/).map(function(str) {
        return str.trim();
      });
      return {
        key   : keyValue[0],
        value : keyValue[1]
      };
    });
  };

},{"./m3u":253,"./m3u/IframeStreamItem":255,"./m3u/MediaItem":257,"./m3u/PlaylistItem":258,"./m3u/StreamItem":259,"chunked-stream":260,"util":81}],262:[function(require,module,exports){
  function DOMParser(t){this.options=t||{locator:{}}}function buildErrorHandler(t,e,n){function r(e){var r=t[e];if(!r)if(i)r=2==t.length?function(n){t(e,n)}:t;else for(var a=arguments.length;--a&&!(r=t[arguments[a]]););o[e]=r&&function(t){r(t+_locator(n))}||function(){}}if(!t){if(e instanceof DOMHandler)return e;t=e}var o={},i=t instanceof Function;return n=n||{},r("warning","warn"),r("error","warn","warning"),r("fatalError","warn","warning","error"),o}function DOMHandler(){this.cdata=!1}function position(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function _locator(t){return t?"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]":void 0}function _toString(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function appendElement(t,e){t.currentElement?t.currentElement.appendChild(e):t.document.appendChild(e)}if(DOMParser.prototype.parseFromString=function(t,e){var n=this.options,r=new XMLReader,o=n.domBuilder||new DOMHandler,i=n.errorHandler,a=n.locator,c=n.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),r.errorHandler=buildErrorHandler(i,o,a),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(l.nbsp="Â ",l.copy="Â©",c[""]="http://www.w3.org/1999/xhtml"),t?r.parse(t,c,l):r.errorHandler.error("invalid document source"),o.document},DOMHandler.prototype={startDocument:function(){this.document=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.document.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var o=this.document,i=o.createElementNS(t,n||e),a=r.length;appendElement(this,i),this.currentElement=i,this.locator&&position(this.locator,i);for(var c=0;a>c;c++){var t=r.getURI(c),l=r.getValue(c),n=r.getQName(c),u=o.createAttributeNS(t,n);u.getOffset&&position(u.getOffset(1),u),u.value=u.nodeValue=l,i.setAttributeNode(u)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.document.createProcessingInstruction(t,e);this.locator&&position(this.locator,n),appendElement(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=_toString.apply(this,arguments),this.currentElement&&t){if(this.cdata){var r=this.document.createCDATASection(t);this.currentElement.appendChild(r)}else{var r=this.document.createTextNode(t);this.currentElement.appendChild(r)}this.locator&&position(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.document.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=_toString.apply(this,arguments);var r=this.document.createComment(t);this.locator&&position(this.locator,r),appendElement(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.document.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(t,e,n);this.locator&&position(this.locator,o),appendElement(this,o)}},warning:function(t){},error:function(t){},fatalError:function(t){throw t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){DOMHandler.prototype[t]=function(){return null}}),"function"==typeof require){var XMLReader=require("./sax").XMLReader,DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer,exports.DOMParser=DOMParser}


},{"./dom":263,"./sax":264}],263:[function(require,module,exports){
  function copy(e,t){for(var n in e)t[n]=e[n]}function _extends(e,t){function n(){}var o=e.prototype;if(Object.create){var i=Object.create(t.prototype);o.__proto__=i}o instanceof t||(n.prototype=t.prototype,n=new n,copy(o,n),e.prototype=o=n),o.constructor!=e&&(o.constructor=e)}function DOMException(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);__set__(e,"length",n.length),copy(n,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,o){if(o?t[_findNodeIndex(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(o&&_onRemoveAttribute(i,e,o),_onAddAttribute(i,e,n))}}function _removeNamedNode(e,t,n){var o=_findNodeIndex(t,n);if(!(o>=0))throw DOMException(NOT_FOUND_ERR,new Error);for(var i=t.length-1;i>o;)t[o]=t[++o];if(t.length=i,e){var r=e.ownerDocument;r&&(_onRemoveAttribute(r,e,n),n.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do if(_visitNode(e,t))return!0;while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,n){e&&e._inc++;var o=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==o&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function _onRemoveAttribute(e,t,n,o){e&&e._inc++;var i=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==i&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var i=t.firstChild,r=0;i;)o[r++]=i,i=i.nextSibling;o.length=r}}}function _removeChild(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var i=t.firstChild;if(null==i)return t;var r=t.lastChild}else i=r=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,r.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=r:n.previousSibling=r;do i.parentNode=e;while(i!==r&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var n=t.parentNode;if(n){var o=e.lastChild;n.removeChild(t);var o=e.lastChild}var o=e.lastChild;return t.parentNode=e,t.previousSibling=o,t.nextSibling=null,o?o.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function serializeToString(e,t){switch(e.nodeType){case ELEMENT_NODE:var n=e.attributes,o=n.length,i=e.firstChild,r=e.tagName,a=htmlns===e.namespaceURI;t.push("<",r);for(var s=0;o>s;s++)serializeToString(n.item(s),t,a);if(i||a&&!/^(?:meta|link|img|br|hr|input)$/i.test(r)){if(t.push(">"),a&&/^script$/i.test(r))i&&t.push(i.data);else for(;i;)serializeToString(i,t),i=i.nextSibling;t.push("</",r,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var i=e.firstChild;i;)serializeToString(i,t),i=i.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("<!--",e.data,"-->");case DOCUMENT_TYPE_NODE:var u=e.publicId,d=e.systemId;if(t.push("<!DOCTYPE ",e.name),u)t.push(' PUBLIC "',u),d&&"."!=d&&t.push('" "',d),t.push('">');else if(d&&"."!=d)t.push(' SYSTEM "',d,'">');else{var c=e.internalSubset;c&&t.push(" [",c,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,n){var o;switch(t.nodeType){case ELEMENT_NODE:o=t.cloneNode(!1),o.ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:n=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,n)for(var i=t.firstChild;i;)o.appendChild(importNode(e,i,n)),i=i.nextSibling;return o}function cloneNode(e,t,n){var o=new t.constructor;for(var i in t){var r=t[i];"object"!=typeof r&&r!=o[i]&&(o[i]=r)}switch(t.childNodes&&(o.childNodes=new NodeList),o.ownerDocument=e,o.nodeType){case ELEMENT_NODE:var a=t.attributes,s=o.attributes=new NamedNodeMap,u=a.length;s._ownerElement=o;for(var d=0;u>d;d++)o.setAttributeNode(cloneNode(e,a.item(d),!0));break;case ATTRIBUTE_NODE:n=!0}if(n)for(var c=t.firstChild;c;)o.appendChild(cloneNode(e,c,n)),c=c.nextSibling;return o}function __set__(e,t,n){e[t]=n}function getTextContent(e){switch(e.nodeType){case 1:case 11:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return n&&(!t||t in n)?!0:!1},createDocument:function(e,t,n){var o=new Document;if(o.doctype=n,n&&o.appendChild(n),o.implementation=this,o.childNodes=new NodeList,t){var i=o.createElementNS(e,t);o.appendChild(i)}return o},createDocumentType:function(e,t,n){var o=new DocumentType;return o.name=e,o.nodeName=e,o.publicId=t,o.systemId=n,o}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(n[o]==e)return o;t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=2==t.nodeType?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return null==this.documentElement&&1==e.nodeType&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,function(n){return 1==n.nodeType&&n.getAttribute("id")==e?(t=n,!0):void 0}),t},createElement:function(e){var t=new Element;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList;var n=t.attributes=new NamedNodeMap;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,o=t.split(":"),i=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Attr,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,function(t){var n=[];return _visitNode(t,function(o){o===t||o.nodeType!=ELEMENT_NODE||"*"!==e&&o.tagName!=e||n.push(o)}),n})},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,function(n){var o=[];return _visitNode(n,function(i){i===n||i.nodeType!==ELEMENT_NODE||i.namespaceURI!==e||"*"!==t&&i.localName!=t||o.push(i)}),o})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ExceptionMessage[3])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var o=this.data.substring(0,e),i=this.data.substring(e+t);n=o+n+i,this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e){var t=[];return serializeToString(e,t),t.join("")},Node.prototype.toString=function(){return XMLSerializer.prototype.serializeToString(this)};try{Object.defineProperty&&(Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case 1:case 11:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=value,this.nodeValue=e}}}),__set__=function(e,t,n){e["$$"+t]=n})}catch(e){}"function"==typeof require&&(exports.DOMImplementation=DOMImplementation,exports.XMLSerializer=XMLSerializer);


},{}],264:[function(require,module,exports){
//[4]   	NameStartChar	   ::=   	":" | [A-Z] | "_" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]
//[4a]   	NameChar	   ::=   	NameStartChar | "-" | "." | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]
//[5]   	Name	   ::=   	NameStartChar (NameChar)*
  var nameStartChar = /[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]///\u10000-\uEFFFF
  var nameChar = new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\u00B7\u0300-\u036F\\ux203F-\u2040]");
  var tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\:'+nameStartChar.source+nameChar.source+'*)?$');
//var tagNamePattern = /^[a-zA-Z_][\w\-\.]*(?:\:[a-zA-Z_][\w\-\.]*)?$/
//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')

//S_TAG,	S_ATTR,	S_EQ,	S_V
//S_ATTR_S,	S_E,	S_S,	S_C
  var S_TAG = 0;//tag name offerring
  var S_ATTR = 1;//attr name offerring 
  var S_ATTR_S=2;//attr name end and space offer
  var S_EQ = 3;//=space?
  var S_V = 4;//attr value(no quot value only)
  var S_E = 5;//attr value end and no space(quot end)
  var S_S = 6;//(attr value end || tag end ) && (space offer)
  var S_C = 7;//closed el<el />

  function XMLReader(){

  }

  XMLReader.prototype = {
    parse:function(source,defaultNSMap,entityMap){
      var domBuilder = this.domBuilder;
      domBuilder.startDocument();
      _copy(defaultNSMap ,defaultNSMap = {})
      parse(source,defaultNSMap,entityMap,
        domBuilder,this.errorHandler);
      domBuilder.endDocument();
    }
  }
  function parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){
    function fixedFromCharCode(code) {
      // String.prototype.fromCharCode does not supports
      // > 2 bytes unicode chars directly
      if (code > 0xffff) {
        code -= 0x10000;
        var surrogate1 = 0xd800 + (code >> 10)
          , surrogate2 = 0xdc00 + (code & 0x3ff);

        return String.fromCharCode(surrogate1, surrogate2);
      } else {
        return String.fromCharCode(code);
      }
    }
    function entityReplacer(a){
      var k = a.slice(1,-1);
      if(k in entityMap){
        return entityMap[k];
      }else if(k.charAt(0) === '#'){
        return fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))
      }else{
        errorHandler.error('entity not found:'+a);
        return a;
      }
    }
    function appendText(end){//has some bugs
      var xt = source.substring(start,end).replace(/&#?\w+;/g,entityReplacer);
      locator&&position(start);
      domBuilder.characters(xt,0,end-start);
      start = end
    }
    function position(start,m){
      while(start>=endPos && (m = linePattern.exec(source))){
        startPos = m.index;
        endPos = startPos + m[0].length;
        locator.lineNumber++;
        //console.log('line++:',locator,startPos,endPos)
      }
      locator.columnNumber = start-startPos+1;
    }
    var startPos = 0;
    var endPos = 0;
    var linePattern = /.+(?:\r\n?|\n)|.*$/g
    var locator = domBuilder.locator;

    var parseStack = [{currentNSMap:defaultNSMapCopy}]
    var closeMap = {};
    var start = 0;
    while(true){
      var i = source.indexOf('<',start);
      if(i<0){
        if(!source.substr(start).match(/^\s*$/)){
          var doc = domBuilder.document;
          var text = doc.createTextNode(source.substr(start));
          doc.appendChild(text);
          domBuilder.currentElement = text;
        }
        return;
      }
      if(i>start){
        appendText(i);
      }
      switch(source.charAt(i+1)){
        case '/':
          var end = source.indexOf('>',i+3);
          var tagName = source.substring(i+2,end);
          var config = parseStack.pop();
          var localNSMap = config.localNSMap;

          if(config.tagName != tagName){
            errorHandler.fatalError("end tag name: "+tagName+' is not match the current start tagName:'+config.tagName );
          }
          domBuilder.endElement(config.uri,config.localName,tagName);
          if(localNSMap){
            for(var prefix in localNSMap){
              domBuilder.endPrefixMapping(prefix) ;
            }
          }
          end++;
          break;
        // end elment
        case '?':// <?...?>
          locator&&position(i);
          end = parseInstruction(source,i,domBuilder);
          break;
        case '!':// <!doctype,<![CDATA,<!--
          locator&&position(i);
          end = parseDCC(source,i,domBuilder,errorHandler);
          break;
        default:
          try{
            locator&&position(i);

            var el = new ElementAttributes();

            //elStartEnd
            var end = parseElementStartPart(source,i,el,entityReplacer,errorHandler);
            var len = el.length;
            //position fixed
            if(len && locator){
              var backup = copyLocator(locator,{});
              for(var i = 0;i<len;i++){
                var a = el[i];
                position(a.offset);
                a.offset = copyLocator(locator,{});
              }
              copyLocator(backup,locator);
            }
            if(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){
              el.closed = true;
              if(!entityMap.nbsp){
                errorHandler.warning('unclosed xml attribute');
              }
            }
            appendElement(el,domBuilder,parseStack);


            if(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){
              end = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)
            }else{
              end++;
            }
          }catch(e){
            errorHandler.error('element parse error: '+e);
            end = -1;
          }

      }
      if(end<0){
        //TODO: è¿™é‡Œæœ‰å¯èƒ½saxå›žé€€ï¼Œæœ‰ä½ç½®é”™è¯¯é£Žé™©
        appendText(i+1);
      }else{
        start = end;
      }
    }
  }
  function copyLocator(f,t){
    t.lineNumber = f.lineNumber;
    t.columnNumber = f.columnNumber;
    return t;

  }

  /**
   * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);
   * @return end of the elementStartPart(end of elementEndPart for selfClosed el)
   */
  function parseElementStartPart(source,start,el,entityReplacer,errorHandler){
    var attrName;
    var value;
    var p = ++start;
    var s = S_TAG;//status
    while(true){
      var c = source.charAt(p);
      switch(c){
        case '=':
          if(s === S_ATTR){//attrName
            attrName = source.slice(start,p);
            s = S_EQ;
          }else if(s === S_ATTR_S){
            s = S_EQ;
          }else{
            //fatalError: equal must after attrName or space after attrName
            throw new Error('attribute equal must after attrName');
          }
          break;
        case '\'':
        case '"':
          if(s === S_EQ){//equal
            start = p+1;
            p = source.indexOf(c,start)
            if(p>0){
              value = source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);
              el.add(attrName,value,start-1);
              s = S_E;
            }else{
              //fatalError: no end quot match
              throw new Error('attribute value no end \''+c+'\' match');
            }
          }else if(s == S_V){
            value = source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);
            //console.log(attrName,value,start,p)
            el.add(attrName,value,start);
            //console.dir(el)
            errorHandler.warning('attribute "'+attrName+'" missed start quot('+c+')!!');
            start = p+1;
            s = S_E
          }else{
            //fatalError: no equal before
            throw new Error('attribute value must after "="');
          }
          break;
        case '/':
          switch(s){
            case S_TAG:
              el.setTagName(source.slice(start,p));
            case S_E:
            case S_S:
            case S_C:
              s = S_C;
              el.closed = true;
            case S_V:
            case S_ATTR:
            case S_ATTR_S:
              break;
            //case S_EQ:
            default:
              throw new Error("attribute invalid close char('/')")
          }
          break;
        case ''://end document
          //throw new Error('unexpected end of input')
          errorHandler.error('unexpected end of input');
        case '>':
          switch(s){
            case S_TAG:
              el.setTagName(source.slice(start,p));
            case S_E:
            case S_S:
            case S_C:
              break;//normal
            case S_V://Compatible state
            case S_ATTR:
              value = source.slice(start,p);
              if(value.slice(-1) === '/'){
                el.closed  = true;
                value = value.slice(0,-1)
              }
            case S_ATTR_S:
              if(s === S_ATTR_S){
                value = attrName;
              }
              if(s == S_V){
                errorHandler.warning('attribute "'+value+'" missed quot(")!!');
                el.add(attrName,value.replace(/&#?\w+;/g,entityReplacer),start)
              }else{
                errorHandler.warning('attribute "'+value+'" missed value!! "'+value+'" instead!!')
                el.add(value,value,start)
              }
              break;
            case S_EQ:
              throw new Error('attribute value missed!!');
          }
//			console.log(tagName,tagNamePattern,tagNamePattern.test(tagName))
          return p;
        /*xml space '\x20' | #x9 | #xD | #xA; */
        case '\u0080':
          c = ' ';
        default:
          if(c<= ' '){//space
            switch(s){
              case S_TAG:
                el.setTagName(source.slice(start,p));//tagName
                s = S_S;
                break;
              case S_ATTR:
                attrName = source.slice(start,p)
                s = S_ATTR_S;
                break;
              case S_V:
                var value = source.slice(start,p).replace(/&#?\w+;/g,entityReplacer);
                errorHandler.warning('attribute "'+value+'" missed quot(")!!');
                el.add(attrName,value,start)
              case S_E:
                s = S_S;
                break;
              //case S_S:
              //case S_EQ:
              //case S_ATTR_S:
              //	void();break;
              //case S_C:
              //ignore warning
            }
          }else{//not space
//S_TAG,	S_ATTR,	S_EQ,	S_V
//S_ATTR_S,	S_E,	S_S,	S_C
            switch(s){
              //case S_TAG:void();break;
              //case S_ATTR:void();break;
              //case S_V:void();break;
              case S_ATTR_S:
                errorHandler.warning('attribute "'+attrName+'" missed value!! "'+attrName+'" instead!!')
                el.add(attrName,attrName,start);
                start = p;
                s = S_ATTR;
                break;
              case S_E:
                errorHandler.warning('attribute space is required"'+attrName+'"!!')
              case S_S:
                s = S_ATTR;
                start = p;
                break;
              case S_EQ:
                s = S_V;
                start = p;
                break;
              case S_C:
                throw new Error("elements closed character '/' and '>' must be connected to");
            }
          }
      }
      p++;
    }
  }
  /**
   * @return end of the elementStartPart(end of elementEndPart for selfClosed el)
   */
  function appendElement(el,domBuilder,parseStack){
    var tagName = el.tagName;
    var localNSMap = null;
    var currentNSMap = parseStack[parseStack.length-1].currentNSMap;
    var i = el.length;
    while(i--){
      var a = el[i];
      var qName = a.qName;
      var value = a.value;
      var nsp = qName.indexOf(':');
      if(nsp>0){
        var prefix = a.prefix = qName.slice(0,nsp);
        var localName = qName.slice(nsp+1);
        var nsPrefix = prefix === 'xmlns' && localName
      }else{
        localName = qName;
        prefix = null
        nsPrefix = qName === 'xmlns' && ''
      }
      //can not set prefix,because prefix !== ''
      a.localName = localName ;
      //prefix == null for no ns prefix attribute 
      if(nsPrefix !== false){//hack!!
        if(localNSMap == null){
          localNSMap = {}
          //console.log(currentNSMap,0)
          _copy(currentNSMap,currentNSMap={})
          //console.log(currentNSMap,1)
        }
        currentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;
        a.uri = 'http://www.w3.org/2000/xmlns/'
        domBuilder.startPrefixMapping(nsPrefix, value)
      }
    }
    var i = el.length;
    while(i--){
      a = el[i];
      var prefix = a.prefix;
      if(prefix){//no prefix attribute has no namespace
        if(prefix === 'xml'){
          a.uri = 'http://www.w3.org/XML/1998/namespace';
        }if(prefix !== 'xmlns'){
          a.uri = currentNSMap[prefix]

          //{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}
        }
      }
    }
    var nsp = tagName.indexOf(':');
    if(nsp>0){
      prefix = el.prefix = tagName.slice(0,nsp);
      localName = el.localName = tagName.slice(nsp+1);
    }else{
      prefix = null;//important!!
      localName = el.localName = tagName;
    }
    //no prefix element has default namespace
    var ns = el.uri = currentNSMap[prefix || ''];
    domBuilder.startElement(ns,localName,tagName,el);
    //endPrefixMapping and startPrefixMapping have not any help for dom builder
    //localNSMap = null
    if(el.closed){
      domBuilder.endElement(ns,localName,tagName);
      if(localNSMap){
        for(prefix in localNSMap){
          domBuilder.endPrefixMapping(prefix)
        }
      }
    }else{
      el.currentNSMap = currentNSMap;
      el.localNSMap = localNSMap;
      parseStack.push(el);
    }
  }
  function parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){
    if(/^(?:script|textarea)$/i.test(tagName)){
      var elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);
      var text = source.substring(elStartEnd+1,elEndStart);
      if(/[&<]/.test(text)){
        if(/^script$/i.test(tagName)){
          //if(!/\]\]>/.test(text)){
          //lexHandler.startCDATA();
          domBuilder.characters(text,0,text.length);
          //lexHandler.endCDATA();
          return elEndStart;
          //}
        }//}else{//text area
        text = text.replace(/&#?\w+;/g,entityReplacer);
        domBuilder.characters(text,0,text.length);
        return elEndStart;
        //}

      }
    }
    return elStartEnd+1;
  }
  function fixSelfClosed(source,elStartEnd,tagName,closeMap){
    //if(tagName in closeMap){
    var pos = closeMap[tagName];
    if(pos == null){
      //console.log(tagName)
      pos = closeMap[tagName] = source.lastIndexOf('</'+tagName+'>')
    }
    return pos<elStartEnd;
    //} 
  }
  function _copy(source,target){
    for(var n in source){target[n] = source[n]}
  }
  function parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'
    var next= source.charAt(start+2)
    switch(next){
      case '-':
        if(source.charAt(start + 3) === '-'){
          var end = source.indexOf('-->',start+4);
          //append comment source.substring(4,end)//<!--
          if(end>start){
            domBuilder.comment(source,start+4,end-start-4);
            return end+3;
          }else{
            errorHandler.error("Unclosed comment");
            return -1;
          }
        }else{
          //error
          return -1;
        }
      default:
        if(source.substr(start+3,6) == 'CDATA['){
          var end = source.indexOf(']]>',start+9);
          domBuilder.startCDATA();
          domBuilder.characters(source,start+9,end-start-9);
          domBuilder.endCDATA()
          return end+3;
        }
        //<!DOCTYPE
        //startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) 
        var matchs = split(source,start);
        var len = matchs.length;
        if(len>1 && /!doctype/i.test(matchs[0][0])){
          var name = matchs[1][0];
          var pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0]
          var sysid = len>4 && matchs[4][0];
          var lastMatch = matchs[len-1]
          domBuilder.startDTD(name,pubid && pubid.replace(/^(['"])(.*?)\1$/,'$2'),
            sysid && sysid.replace(/^(['"])(.*?)\1$/,'$2'));
          domBuilder.endDTD();

          return lastMatch.index+lastMatch[0].length
        }
    }
    return -1;
  }



  function parseInstruction(source,start,domBuilder){
    var end = source.indexOf('?>',start);
    if(end){
      var match = source.substring(start,end).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);
      if(match){
        var len = match[0].length;
        domBuilder.processingInstruction(match[1], match[2]) ;
        return end+2;
      }else{//error
        return -1;
      }
    }
    return -1;
  }

  /**
   * @param source
   */
  function ElementAttributes(source){

  }
  ElementAttributes.prototype = {
    setTagName:function(tagName){
      if(!tagNamePattern.test(tagName)){
        throw new Error('invalid tagName:'+tagName)
      }
      this.tagName = tagName
    },
    add:function(qName,value,offset){
      if(!tagNamePattern.test(qName)){
        throw new Error('invalid attribute:'+qName)
      }
      this[this.length++] = {qName:qName,value:value,offset:offset}
    },
    length:0,
    getLocalName:function(i){return this[i].localName},
    getOffset:function(i){return this[i].offset},
    getQName:function(i){return this[i].qName},
    getURI:function(i){return this[i].uri},
    getValue:function(i){return this[i].value}
//	,getIndex:function(uri, localName)){
//		if(localName){
//			
//		}else{
//			var qName = uri
//		}
//	},
//	getValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},
//	getType:function(uri,localName){}
//	getType:function(i){},
  }




  function _set_proto_(thiz,parent){
    thiz.__proto__ = parent;
    return thiz;
  }
  if(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){
    _set_proto_ = function(thiz,parent){
      function p(){};
      p.prototype = parent;
      p = new p();
      for(parent in thiz){
        p[parent] = thiz[parent];
      }
      return p;
    }
  }

  function split(source,start){
    var match;
    var buf = [];
    var reg = /'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;
    reg.lastIndex = start;
    reg.exec(source);//skip <
    while(match = reg.exec(source)){
      buf.push(match);
      if(match[1])return buf;
    }
  }

  if(typeof require == 'function'){
    exports.XMLReader = XMLReader;
  }


},{}],265:[function(require,module,exports){
  var Conf=function(){this.TRACKER_URL="//tracker.streamroot.io",this.CHUNK_SIZE=15360,this.P2P_CACHE_MAX_SIZE=136314880,this.MAX_DL_REQUEST_SPEED=1e3,this.TIME_BETWEEN_CHUNK_DL=50,this.NB_CHUNK_DL_GROUP=10,this.MAX_CHUNK_BY_SEED=300,this.NB_SEGMENT_P2P_PREBUFFER=6,this.MAX_SEGMENT_REQUEST_STORE=this.NB_SEGMENT_P2P_PREBUFFER,this.NB_SEGMENT_P2P_SKIP=2,this.MAX_UP_SPEED=600,this.CHUNK_UP_RETRY_DELAY=10,this.PEER_CONNECTION_TIMEOUT=5e4,this.PEER_UP_TIMEOUT=5e3,this.SEND_HEARTBEAT_INTERVAL=5e3,this.CHECK_HEARTBEAT_INTERVAL=1e4,this.MAX_USELESS_COUNT=100,this.MIN_USEFUL_SPEED=5,this.MIN_NUMBER_OF_PEERS=8,this.MAX_NUMBER_OF_PEERS=13,this.ASK_PEERS_INTERVAL=18e4,this.CHECK_USELESS_INTERVAL=6e4,this.CHUNK_TIMEOUT=2500,this.CHUNK_UP_TIMEOUT=this.CHUNK_TIMEOUT-600,this.UP_MAX_BUFFERED_AMOUNT=10,this.OFFER_DECLINED_TIMEOUT=6e4,this.PEER_REMOVED_TIMEOUT=9e5,this.MAX_P2P_PREBUFFERING_TIME=720,this.RETRY_P2P_START_DL_SEGMENT_DELAY=5e3,this.ANALYTICS={DOWNLOAD_TRACK_INTERVAL:12e4,LATENCIES_TRACK_INTERVAL:3e5},this.RY_TRACK=!0,this.RY_TRACKER="srTracker",this.ABR_DEL_T=30,this.LIVE={P2P_CACHE_MAX_SIZE:20971520},this.ENABLE_TURN=!1,this.STUNSERVERS=[{url:"stun:stun.l.google.com:19302"}],this.TURNSERVERS=[{url:"turn:23.97.160.254:3478?transport=udp",credential:"streamroot",username:"streamroot"}],this.ALLOW_P2P=!0,this.DISPLAY=!1,this.DISPLAY_ERROR=!1},conf=new Conf;module.exports=conf;


},{}],266:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),_=require("underscore"),status=require("../p2p/status"),EventEmitter=require("eventemitter3"),Delta=require("../utils/Delta"),overrideDefaults=require("../utils/ObjectHelper").overrideDefaults,_gaq=_gaq||[];_gaq.push(["sr_tracker._setAccount","UA-42851557-1"]),_gaq.push(["sr_tracker._setDomainName","none"]),_gaq.push(["_setSessionCookieTimeout",0]);var VideoAnalytics=function(t,e,a){this.playerInterface=t,this.externalEventManager=e,this.apiStartTimestamp=Date.now(),this.mediaStats="function"==typeof t.getMediaStats?t.getMediaStats():void 0,this.mpdURL=a,this.alreadyPlayed=!1,this.lastP2PDownloaded=0,this.lastP2PDownloadedNewAnalytics=0,this.lastP2PUploaded=0,this.lastCDNDownloaded=0,this.lastCDNCancelled=0,this.lastP2PDownloadedUncorrected=0,this.lastDataDlTwice=0,this.lastDataDlTwice_PP=0,this.lastDataDlTwice_PC=0,this.lastDataDlTwice_CP=0,this.lastDataDlTwice_CC=0,this.lastDataDlTwice_HP=0,this.lastDataDlTwice_HD=0,this.lastDataDlTwice_M=0,this.lastMinSwitchCount=0,this.lastLowerSwitchCount=0,this.lastUpperSwitchCount=0,this.lastInternalTrackSwitchCount=0,this.lastTrackerMsgCount=0,this.lastTrackerSgnCount=0,this.peerUpdateRequestDelta=new Delta,this.peerUpdateResponseDelta=new Delta,this.downloadTrackCounter=0,this.uploadSaturation=0,this.sumRtt=0,this.maxRtt=0,this.nbRtt=0,this.sumDistance=0,this.maxDistance=0,this.nbDistance=0,this.peerConnecting=[],this.sentOnBeforeUnload=!1,this.onTimeUpdateCallbacks=[],setInterval(this.sendDownloadAnalytics.bind(this),conf.ANALYTICS.DOWNLOAD_TRACK_INTERVAL),setTimeout(this.setRttInterval.bind(this),conf.ANALYTICS.DOWNLOAD_TRACK_INTERVAL/2),setInterval(_.bind(this.sendLatencyAnalytics,this),conf.ANALYTICS.LATENCIES_TRACK_INTERVAL),this.sendLatencyAnalytics(),window.RY=function(t){var e=["identify","track","page"],a="realytics",s=function(t,e){return function(){var a=Array.prototype.slice.call(arguments);t[e]||(t[e]=[]),t[e].push(a)}},n=function(n){for(var i=0;i<e.length;i++){var o=e[i];n?t[n][o]=s(t._q[n],o):t[o]=t[a][o]=s(t._q[a],o)}},i=function(e,s){var i=e?e:a;t[i]||(t[i]={}),t._q[i]||(t._q[i]={}),s&&(t._q[i].init=[[s]]),n(e)};return t._q||(t._q={},i(null,null)),t.init=function(t,a){if(a&&e)for(var s=0;s<e.length;s++)if(a==e[s]||"init"==a)return;i(a,t);var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src=("https:"==document.location.protocol?"https://":"http://")+"dcniko1cv0rz.cloudfront.net/realytics-0.2.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o)},t}(window.RY||{}),RY.init(conf.ID_CLIENT,conf.RY_TRACKER),this.realytics_count=0,_gaq.push(["sr_tracker._trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}(),this.externalEventManager.addVideoEventListener("play",this.onPlay.bind(this)),this.externalEventManager.addVideoEventListener("pause",this.onPause.bind(this)),this.externalEventManager.addVideoEventListener("timeupdate",this.onTimeUpdate.bind(this)),this.registerOnTimeUpdate(this.checkBuffered),this.registerOnTimeUpdate(this.checkEnded),this.externalEventManager.addWindowEventListener("beforeunload",this.onBeforeUnload.bind(this)),this.externalEventManager.addWindowEventListener("unload",this.onUnload.bind(this)),status.getEE().once("tracker_ready",this.onTrackerReady.bind(this)),this.track("video views"),this.track_realytics("video views")};VideoAnalytics.prototype.track=function(t,e){var a=["sr_tracker._trackEvent"];a.push(this.mpdURL),a.push(t);var s=status.getMyIds();s.length?a.push(s[0]):a.push("0"),e&&a.push(e),_gaq.push(a)},VideoAnalytics.prototype.track_realytics=function(t,e,a){e=e||{},e.customerID="Integros",e.mpdURL=this.mpdURL,a&&(e.conf={p2pMaxCacheSize:conf.P2P_CACHE_MAX_SIZE,maxDlRequestSpeed:conf.MAX_DL_REQUEST_SPEED,maxChunkBySeed:conf.MAX_CHUNK_BY_SEED,nbSegmentP2PPrebuffer:conf.NB_SEGMENT_P2P_PREBUFFER,maxUpSpeed:conf.MAX_UP_SPEED,chunkUpRetryDelay:conf.CHUNK_UP_RETRY_DELAY,chunkTimeout:conf.CHUNK_TIMEOUT,chunkUpTimeout:conf.CHUNK_UP_TIMEOUT}),conf.RY_TRACK&&(t+="1",RY.srTracker.track(t,e)),this.realytics_count++},VideoAnalytics.prototype.trackTimeElapsed=function(t,e){var a=Date.now();this.track(t,a-e),this.track_realytics(t,{value:a-e})},VideoAnalytics.prototype.onPlay=function(){this.track("play",Math.round(this.playerInterface.getCurrentTime())),this.track_realytics("play",{value:Math.round(this.playerInterface.getCurrentTime())})},VideoAnalytics.prototype.onPause=function(){this.track("pause",Math.round(this.playerInterface.getCurrentTime())),this.track_realytics("pause",{value:Math.round(this.playerInterface.getCurrentTime())})},VideoAnalytics.prototype.registerOnTimeUpdate=function(t){this.onTimeUpdateCallbacks.push(t)},VideoAnalytics.prototype.unregisterOnTimeUpdate=function(t){this.onTimeUpdateCallbacks=_.reject(this.onTimeUpdateCallbacks,function(e){return e===t},this)},VideoAnalytics.prototype.onTimeUpdate=function(){_.each(this.onTimeUpdateCallbacks,function(t){t.call(this)},this)},VideoAnalytics.prototype.checkEnded=function(){},VideoAnalytics.prototype.checkBuffered=function(){},VideoAnalytics.prototype.sendDownloadAnalytics=function(){var t=status.getP2PDownloaded(),e=status.getp2pDownloadedNewAnalytics(),a=0>t?1:0,s=status.getP2PUploaded(),n=status.getCDNDownloaded(),i=status.getCdnCancelled(),o=status.getP2PDownloadedUncorrected(),r=status.getDataDownloadedTwice_PP(),c=status.getDataDownloadedTwice_PC(),d=status.getDataDownloadedTwice_CP(),l=status.getDataDownloadedTwice_CC(),h=status.getDataDownloadedTwice_HP(),u=status.getDataDownloadedTwice_HD(),p=status.getDataDownloadedTwice_M(),D=r+c+d+l+h+u+p,m=t-this.lastP2PDownloaded,g=e-this.lastP2PDownloadedNewAnalytics,w=s-this.lastP2PUploaded,C=n-this.lastCDNDownloaded,P=i-this.lastCDNCancelled,y=o-this.lastP2PDownloadedUncorrected,f=r-this.lastDataDlTwice_PP,T=c-this.lastDataDlTwice_PC,A=d-this.lastDataDlTwice_CP,k=l-this.lastDataDlTwice_CC,v=h-this.lastDataDlTwice_HP,_=u-this.lastDataDlTwice_HD,R=p-this.lastDataDlTwice_M,S=D-this.lastDataDlTwice,U=status.getNbRightHashP2P(),b=status.getNbWrongHashP2P(),E=status.getNbRightHashDLM(),M=status.getNbWrongHashDLM();status.setNbRightHashP2P(0),status.setNbWrongHashP2P(0),status.setNbRightHashDLM(0),status.setNbWrongHashDLM(0);var N,L=this.trackPeers(),I=this.trackTracker();N=this.trackABR(),m>0&&(this.track("p2pDownloaded",m),this.lastP2PDownloaded=t),g>0&&(this.track("p2pDownloadedNewAnalytics",g),this.lastP2PDownloadedNewAnalytics=e),w>0&&(this.track("p2pUploaded",w),this.lastP2PUploaded=s),C>0&&(this.track("cdnDownloaded",C),this.lastCDNDownloaded=n),D>0&&(this.track("dataDlTwice",S),this.lastDataDlTwice=D),(m>0||w>0||C>0||S>0)&&(this.track_realytics("download",{p2p:m,nP2p:g,cdn:C,cdnCancelled:P,totalDl:m+C,up:w,p2pUncorrected:y,doubleDl:{PP:f,PC:T,CP:A,CC:k,HP:v,HD:_,M:R,totalDlTwice:S},testP2PNegative:a,peers:L,nbRightHashP2P:U,nbWrongHashP2P:b,nbRightHashDLM:E,nbWrongHashDLM:M,avgRtt:this.nbRtt>0?this.sumRtt/this.nbRtt:0,maxRtt:this.maxRtt,avgDistance:this.nbDistance>0?this.sumDistance/this.nbDistance:0,maxDistance:this.maxDistance,uploadSaturation:this.uploadSaturation,abr:N,tracker:I,downloadTrackCounter:this.downloadTrackCounter},!0),this.lastCDNCancelled=i,this.lastP2PDownloadedUncorrected=o,this.lastDataDlTwice_PP=r,this.lastDataDlTwice_PC=c,this.lastDataDlTwice_CP=d,this.lastDataDlTwice_CC=l,this.lastDataDlTwice_HP=h,this.lastDataDlTwice_HD=u,this.lastDataDlTwice_M=p,this.uploadSaturation=0,this.downloadTrackCounter++)},VideoAnalytics.prototype.trackSpeed=function(){return status.getAvgDlSpeed()&&this.track("avg dl speed",Math.round(status.getAvgDlSpeed())),status.getMaxDlSpeed()&&this.track("max dl speed",Math.round(status.getMaxDlSpeed())),status.getAvgUpSpeed()&&this.track("avg up speed",Math.round(status.getAvgUpSpeed())),status.getMaxUpSpeed()&&this.track("max up speed",Math.round(status.getMaxUpSpeed())),{avgDl:Math.round(status.getAvgDlSpeed()),maxDl:Math.round(status.getMaxDlSpeed()),avgUp:Math.round(status.getAvgUpSpeed()),maxUp:Math.round(status.getMaxUpSpeed())}},VideoAnalytics.prototype.setP2PDownloaderListeners=function(t){this.p2pDownloader=t,t.getEE().on("uploadSaturated",this.incrementUploadSaturation.bind(this))},VideoAnalytics.prototype.incrementUploadSaturation=function(){this.uploadSaturation++},VideoAnalytics.prototype.onBeforeUnload=function(){if(this.p2pDownloader){this.sendDownloadAnalytics();var t=status.getP2PDownloaded(),e=status.getp2pDownloadedNewAnalytics(),a=status.getP2PUploaded(),s=status.getCDNDownloaded(),n=status.getP2PDownloadedUncorrected(),i=status.getDataDownloadedTwice_PP(),o=status.getDataDownloadedTwice_PC(),r=status.getDataDownloadedTwice_CP(),c=status.getDataDownloadedTwice_CC(),d=status.getDataDownloadedTwice_HP(),l=status.getDataDownloadedTwice_HD(),h=status.getDataDownloadedTwice_M(),u=i+o+r+c+d+l+h,p=this.p2pDownloader.doubleCheckP2PDownload_CDNDownload(),D=p.p2pDownloaded+p.cdnDownloaded;this.track("p2pDownloaded_unloadCheck",t),this.track("p2pDownloadedNewAnalytics_unloadCheck",e),this.track("p2pUploaded_unloadCheck",a),this.track("cdnDownloaded_unloadCheck",s),this.track("dataDlTwice_unloadCheck",u),this.track("p2pCache",D);var m=this.trackPeers(),g=this.trackSpeed(),w=this.trackTrackerConnection(),C=this.getRandomPeerLatency(),P=this.trackQoS();this.track_realytics("unload",{p2p:t,nP2p:e,cdn:s,totalDl:t+s,up:a,p2pUncorrected:n,doubleDl:{PP:i,PC:o,CP:r,CC:c,HP:d,HD:l,M:h,totalDlTwice:u},tracker:{peerUpdateRequestCount:status.getPeerUpdateRequestCount(),peerUpdateResponseCount:status.getPeerUpdateResponseCount()},qos:P,connection:w,p2pCache:D,speeds:g,peers:m,peerConnectionLatency:C},!0),this.sentOnBeforeUnload=!0}},VideoAnalytics.prototype.onUnload=function(){this.sentOnBeforeUnload||this.onBeforeUnload()},VideoAnalytics.prototype.onTrackerReady=function(){this.trackTimeElapsed("time before tracker ready",this.apiStartTimestamp)},VideoAnalytics.prototype.trackPeers=function(){if(this.peerPool){var t=0,e=0,a=0,s=0,n=0;return _.each(this.peerPool.getPeerArray(),function(i){a++,i.getReadyToCommunicate()===!0&&n++;var o=!0;i.getDataDownloaded()&&(t++,o=!1),i.getDataUploaded()&&(e++,o=!1),o&&s++},this),this.track("seeders",t),this.track("leechers",e),this.track("total peers",a),this.track("useless peers",s),this.track("peer ready",n),{seeders:t,leechers:e,totalPeers:a,uselessPeers:s,peerReady:n}}},VideoAnalytics.prototype.setRttInterval=function(){setInterval(this.computeLatencies.bind(this),conf.ANALYTICS.DOWNLOAD_TRACK_INTERVAL)},VideoAnalytics.prototype.computeLatencies=function(){if(this.peerPool){var t;this.sumRtt=0,this.maxRtt=0,this.nbRtt=0,this.sumDistance=0,this.maxDistance=0,this.nbDistance=0,_.each(this.peerPool.getPeerArray(),function(e){e.getRtt(this.onRtt.bind(this)),t=e.getDistance(),t&&(this.sumDistance+=t,this.nbDistance++,t>this.maxDistance&&(this.maxDistance=t))},this)}},VideoAnalytics.prototype.onRtt=function(t){var e=parseInt(t);this.sumRtt+=e,this.nbRtt++,e>this.maxRtt&&(this.maxRtt=e)},VideoAnalytics.prototype.getRtt=function(){return{avgRtt:this.nbRtt>0?this.sumRtt/this.nbRtt:0,maxRtt:this.maxRtt,avgDistance:this.nbDistance>0?this.sumDistance/this.nbDistance:0,maxDistance:this.maxDistance}},VideoAnalytics.prototype.sendLatencyAnalytics=function(){this.avgPeerAnswerTimeElapsed&&(this.track("peer answer latency",Math.round(this.avgPeerAnswerTimeElapsed)),this.avgPeerAnswerTimeElapsed=!1,this.numberOfPeerAnswerInAvg=!1),this.avgPeerReadyCommTimeElapsed&&(this.track("peer ready to comm latency",Math.round(this.avgPeerReadyCommTimeElapsed)),this.avgPeerReadyCommTimeElapsed=!1,this.numberOfPeerReadyCommInAvg=!1)},VideoAnalytics.prototype.setPeerPoolListeners=function(t){this.peerPool=t,t.getEE().on(t,"offerSent",this.onOfferSent.bind(this)),t.getEE().on(t,"answerReceived",this.onAnswerReceived.bind(this)),t.getEE().on("peerReadyCommunicate",this.onPeerReadyCommunicate.bind(this))},VideoAnalytics.prototype.findPeer=function(t){var e=_.where(this.peerConnecting,{peer:t});return e.length?e[0]:!1},VideoAnalytics.prototype.onOfferSent=function(t){var e=Date.now();this.findPeer(t)||this.peerConnecting.push({peer:t,timestampOffer:e})},VideoAnalytics.prototype.onAnswerReceived=function(t){var e=Date.now(),a=this.findPeer(t);if(a&&a.timestampOffer){var s=e-a.timestampOffer;this.avgPeerAnswerTimeElapsed=this.avgPeerAnswerTimeElapsed?(this.avgPeerAnswerTimeElapsed*this.numberOfPeerAnswerInAvg+s)/(this.numberOfPeerAnswerInAvg+1):s,this.numberOfPeerAnswerInAvg=this.numberOfPeerAnswerInAvg?this.numberOfPeerAnswerInAvg+1:1,a.timestampAnswer=e}},VideoAnalytics.prototype.onPeerReadyCommunicate=function(t){var e=Date.now(),a=this.findPeer(t);if(a){var s=e-a.timestampOffer;this.avgPeerReadyCommTimeElapsed=this.avgPeerReadyCommTimeElapsed?(this.avgPeerReadyCommTimeElapsed*this.numberOfPeerReadyCommInAvg+s)/(this.numberOfPeerReadyCommInAvg+1):s,this.numberOfPeerReadyCommInAvg=this.numberOfPeerReadyCommInAvg?this.numberOfPeerReadyCommInAvg+1:1,a.timeStampReady=e}},VideoAnalytics.prototype.getRandomPeerLatency=function(t){var e=_.filter(this.peerConnecting,function(t){return t.timestampAnswer&&t.timeStampReady});if(e.length){var a=e[Math.floor(Math.random()*e.length)];return{answer:a.timestampAnswer-a.timestampOffer,ready:a.timeStampReady-a.timestampOffer,distance:a.peer.getDistance()}}return void 0},VideoAnalytics.prototype.trackABR=function(){var t,e=status.getTrackSwitchCount(),a={minSwitchCount:0,lowerSwitchCount:0,upperSwitchCount:0};this.mediaStats&&(t=this.mediaStats.getStats(),a=overrideDefaults(a,t));var s=a.minSwitchCount-this.lastMinSwitchCount,n=a.lowerSwitchCount-this.lastLowerSwitchCount,i=a.upperSwitchCount-this.lastUpperSwitchCount,o=e-this.lastInternalTrackSwitchCount;return this.lastMinSwitchCount=a.minSwitchCount,this.lastLowerSwitchCount=a.lowerSwitchCount,this.lastUpperSwitchCount=a.upperSwitchCount,this.lastInternalTrackSwitchCount=e,{minSwitchCount:s,lowerSwitchCount:n,upperSwitchCount:i,internalTrackSwitchCount:o}},VideoAnalytics.prototype.trackQoS=function(){var t,e=status.getTrackSwitchCount(),a={startupTime:0,startupTimeLoad:0,rebufferingCount:0,timeSpentRebuffering:0,timeSpentPlaying:0,timeSpentSeeking:0,percentageTimeSpentPlaying:0,avgBitrate:0,bitrateSwitchCount:0,minSwitchCount:0,lowerSwitchCount:0,upperSwitchCount:0};return this.mediaStats&&(t=this.mediaStats.getStats(),a=overrideDefaults(a,t)),a.internalTrackSwitchCount=e,a},VideoAnalytics.prototype.trackTracker=function(){var t=status.getTrackerMsgCount(),e=status.getTrackerSgnCount(),a=t-this.lastTrackerMsgCount,s=e-this.lastTrackerSgnCount;return this.lastTrackerMsgCount=t,this.lastTrackerSgnCount=e,{trackerMsgCount:a,trackerSgnCount:s,peerUpdateRequestCount:this.peerUpdateRequestDelta.calcDelta(status.getPeerUpdateRequestCount()),peerUpdateResponseCount:this.peerUpdateResponseDelta.calcDelta(status.getPeerUpdateResponseCount()),peerUpdateAvgRespTime:Math.round(status.getPeerUpdateAvgResponseTime())}},VideoAnalytics.prototype.trackTrackerConnection=function(){var t=status.getTrackerConnectionCount(),e=status.getTrackerDeconnectionCount(),a=status.getTrackerReconnectionCount();return{trackerConnectionCount:t,trackerDeconnectionCount:e,trackerReconnectionCount:a}},VideoAnalytics.prototype.isFake=function(){return this.fake},module.exports=VideoAnalytics;


},{"../../conf":265,"../p2p/status":290,"../utils/Delta":294,"../utils/ObjectHelper":295,"eventemitter3":82,"underscore":297}],267:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),ChunkDownloadBuffer=function(e){this.p2pDownloader=e,setInterval(this.downloadChunk.bind(this),conf.TIME_BETWEEN_CHUNK_DL),this.chunkRequests=[]};ChunkDownloadBuffer.prototype.downloadChunk=function(){if(this.calculateDownloadRequestSpeed()+conf.NB_CHUNK_DL_GROUP*conf.CHUNK_SIZE/1024<conf.MAX_DL_REQUEST_SPEED)for(var e=0;e<conf.NB_CHUNK_DL_GROUP;e++)this.p2pDownloader.downloadChunk()},ChunkDownloadBuffer.prototype.calculateDownloadRequestSpeed=function(){var e=this.getIndexRequestOneSecondAgo();return e===!1?this.chunkRequests=[]:e>0&&this.chunkRequests.splice(0,e),this.chunkRequests.length*conf.CHUNK_SIZE/1024},ChunkDownloadBuffer.prototype.getIndexRequestOneSecondAgo=function(){for(var e=Date.now(),n=0;n<this.chunkRequests.length;n++)if(e-this.chunkRequests[n]<=1e3)return n;return!1},ChunkDownloadBuffer.prototype.addChunkRequest=function(){var e=Date.now();this.chunkRequests.push(e)},module.exports=ChunkDownloadBuffer;


},{"../../conf":265}],268:[function(require,module,exports){
  var status=require("./status"),conf=require("../../conf"),PartialSegmentP2P=require("./PartialSegmentP2P"),EventEmitter=require("eventemitter3"),ChunkManager=function(t,e,n){var o=new EventEmitter;this.p2pDownloader=n,this.size=t,this.dataLocked=!1,this.isEmpty=!0,this.calculateChunkNumber(),this.initializeChunkArray_DownloadStatus(),this.nbChunkDownloading=0,this.getEE=function(){return o}};ChunkManager.prototype.calculateChunkNumber=function(){this.chunkNumber=Math.ceil(this.size/conf.CHUNK_SIZE)},ChunkManager.prototype.initializeChunkArray_DownloadStatus=function(){this.downloadStatus=new Array;for(var t=0;t<this.chunkNumber;t++)this.downloadStatus.push("pending");this.size&&(this.segment=new Uint8Array(this.size))},ChunkManager.prototype.addSegmentSize=function(t){this.size||(this.size=t,this.calculateChunkNumber(),this.initializeChunkArray_DownloadStatus())},ChunkManager.prototype.getChunk=function(t){return this.dataLocked||"downloaded"!=this.downloadStatus[t]&&"CDNdownloaded"!=this.downloadStatus[t]?(this.dataLocked,!1):t<this.chunkNumber-1?this.segment.buffer.slice(t*conf.CHUNK_SIZE,(t+1)*conf.CHUNK_SIZE):this.segment.buffer.slice(t*conf.CHUNK_SIZE)},ChunkManager.prototype.getNextChunk=function(){var t=this.nextChunk();return t>=0&&(this.downloadStatus[t]="downloading",this.nbChunkDownloading++),t},ChunkManager.prototype.nextChunk=function(){var t=this.downloadStatus.indexOf("failed");return 0>t&&(t=this.downloadStatus.indexOf("pending")),t},ChunkManager.prototype.chunkDownloaded=function(t,e,n){if(this.isEmpty=!1,"downloaded"===this.downloadStatus[e])this.p2pDownloader.getP2PManager().correctP2PDownloaded(t.byteLength,"PP");else if("CDNdownloaded"===this.downloadStatus[e])this.p2pDownloader.getP2PManager().correctP2PDownloaded(t.byteLength,"CP");else if(e===this.chunkNumber-1&&t.byteLength+e*conf.CHUNK_SIZE>this.size)this.p2pDownloader.getP2PManager().correctP2PDownloaded(t.byteLength,"HP");else if("downloading"===this.downloadStatus[e]&&this.nbChunkDownloading--,this.downloadStatus[e]="downloaded",isNaN(t.byteLength)||status.setp2pDownloadedNewAnalytics(status.getp2pDownloadedNewAnalytics()+t.byteLength),this.segment.set(new Uint8Array(t),e*conf.CHUNK_SIZE),this.isSegmentDownloaded()){var o=this.segment.buffer;this.getEE().emit("segmentDownloaded",o)}},ChunkManager.prototype.timeOut=function(t,e){"downloading"===this.downloadStatus[t]&&(this.downloadStatus[t]="failed",this.nbChunkDownloading--,e.getHeuristic().incrementNbChunkTimeOut()),"downloaded"!==this.downloadStatus[t]&&this.getEE().emit("chunkTimeOut")},ChunkManager.prototype.isSegmentDownloaded=function(){if(this.segmentDownloaded)return!0;if(this.size){for(var t=this.downloadStatus.length-1;t>=0;t--)if("downloaded"!==this.downloadStatus[t]&&"CDNdownloaded"!==this.downloadStatus[t])return!1;return this.segmentDownloaded=!0,!0}return!1},ChunkManager.prototype.getBiggestSegment=function(t){if(this.size&&!this.isEmpty){var e=this.partialSegment||new PartialSegmentP2P(t,this.p2pDownloader.getP2PManager(),this.segment,this.downloadStatus,this.size,this,this.isSegmentDownloaded());return this.dataLocked||(this.partialSegment=e),e}return!1},ChunkManager.prototype.getIndexLastChunkInARow=function(){for(var t=0;t<this.downloadStatus.length;t++)if("downloaded"!==this.downloadStatus[t]&&"CDNdownloaded"!==this.downloadStatus[t])return t-1;return this.downloadStatus.length-1},ChunkManager.prototype.storeSegment=function(t){var e;this.isEmpty=!1,this.size||this.addSegmentSize(t.byteLength),e={start:0,end:this.chunkNumber},this.partialSegment&&this.partialSegment.getCDNIndexRange()&&(e=this.partialSegment.getCDNIndexRange()),this.segment=new Uint8Array(t),this.segmentDownloaded=!0;for(var n=e.start;n<e.end;n++){if("downloaded"===this.downloadStatus[n]||"CDNdownloaded"===this.downloadStatus[n]){var o=conf.CHUNK_SIZE;n===this.chunkNumber-1&&(o=this.size-(this.chunkNumber-1)*conf.CHUNK_SIZE),"downloaded"===this.downloadStatus[n]?this.p2pDownloader.getP2PManager().correctP2PDownloaded(o,"PC"):"CDNdownloaded"===this.downloadStatus[n]&&this.p2pDownloader.getP2PManager().correctP2PDownloaded(o,"CC")}"downloading"===this.downloadStatus[n]&&this.nbChunkDownloading--,this.downloadStatus[n]="CDNdownloaded"}},ChunkManager.prototype.getP2PDownload_CDNDownload=function(){var t=0,e=0;if(this.size){for(var n=0,o=this.downloadStatus.length-1;o>n;n++)"downloaded"===this.downloadStatus[n]?t+=conf.CHUNK_SIZE:"CDNdownloaded"===this.downloadStatus[n]&&(e+=conf.CHUNK_SIZE);var a=this.size-(this.chunkNumber-1)*conf.CHUNK_SIZE;"downloaded"===this.downloadStatus[this.chunkNumber-1]?t+=a:"CDNdownloaded"===this.downloadStatus[this.chunkNumber-1]&&(e+=a)}return{p2pDownloaded:t,cdnDownloaded:e}},ChunkManager.prototype.lockSegmentData=function(){this.dataLocked=!0},ChunkManager.prototype.unlockSegmentData=function(){this.dataLocked=!1},ChunkManager.prototype.clearSegment=function(){delete this.segment,delete this.downloadStatus},ChunkManager.prototype.removePartialSegment=function(){delete this.partialSegment},module.exports=ChunkManager;


},{"../../conf":265,"./PartialSegmentP2P":277,"./status":290,"eventemitter3":82}],269:[function(require,module,exports){
  "use strict";var MediaEventManager=function(e){var n=e,t={},i=[],r=[],v=[],a=function(e,t){r.push({event:e,fn:t}),n.addEventListener(e,t)},o=function(e,n){v.push({event:e,fn:n}),window.addEventListener(e,n)},d=function(e,t){i.push({event:e,fn:t}),n.addVideoEventListener(e,t)},s=function(){for(var e=0;e<i.length;e++){var t=i[e].event,r=i[e].fn;n.removeVideoEventListener(t,r)}},f=function(){for(var e=0;e<r.length;e++){var t=r[e].event,i=r[e].fn;n.removeEventListener(t,i)}},u=function(){for(var e=0;e<v.length;e++){var n=v[e].event,t=v[e].fn;window.removeEventListener(n,t)}},c=function(){f(),s(),u()},E=function(e){return function(){t[e]=arguments}},h=function(e){n.addEventListener(e,E(e))},L=function(e,n){t[e]&&n.apply(void 0,t[e])};this.addMediaEventListener=a,this.addVideoEventListener=d,this.addWindowEventListener=o,this.removeAllExternalEventListener=c,this.cacheMediaEvent=h,this.triggerCachedEvent=L};module.exports=MediaEventManager;


},{}],270:[function(require,module,exports){
  "use strict";var Heuristic=function(n,t){var u=.3,e=0,i=4e3,r=0,c=0,s=0,o=.5,f=0,h=function(){r++},a=function(){c++},m=function(){s++},N=function(){var n,t=c/r;return n=isNaN(t)?e:Math.min(t,1),f=n,n},d=function(){var n;return 0!==r&&(n=(1-u)*o+u*N(),o=n),o},v=function(){r=0,c=0,s=0},b=function(){d(),v()},k=function(){setInterval(b,i)};this.incrementNbChunkRequested=function(){return h()},this.incrementNbChunkDownloaded=function(){return a()},this.incrementNbChunkTimeOut=function(){return m()},this.heurisInst=function(){return N()},this.mean=function(){return d()},this.getNbChunkRequested=function(){return r},this.getHeuristicScore=function(){return o},this.getLastHeuristInst=function(){return f},k()};module.exports=Heuristic;


},{}],271:[function(require,module,exports){
  var _=require("underscore"),ChunkDownloadBuffer=require("./ChunkDownloadBuffer"),UploadQueue=require("./UploadQueue"),SegmentRequestQueue=require("./SegmentRequestQueue"),conf=require("../../conf"),SegmentHandler=require("./SegmentHandler"),EventEmitter=require("eventemitter3"),P2PDownloader=function(e,n){var t=this,r=0,a=[],d=n,u=new ChunkDownloadBuffer(t),o=new UploadQueue(t),i=new SegmentRequestQueue(d),g=new EventEmitter,c=function(){e.getEE().on("chunkReceived",p,t),e.getEE().on("segmentRequested",k,t),e.getEE().on("hasSegment",I,t),e.getEE().on("chunkRequested",l,t),e.getEE().on("peerDestroyed",A,t)},s=function(e,n,t,r,a){var u=w(e,n,t,r,a.byteLength),o=u.chunkManager;u.isNew&&g.emit("newChunkManager",o,e,n,t,r),o.storeSegment(a);var c=d.p2pInterface.getSegmentHash({periodId:e,asetId:n,repId:t,idPiece:r});i.answerRequests({periodId:e,asetId:n,repId:t,idPiece:r},a.byteLength,o.chunkNumber,c)},h=function(n){var t=w(n.periodId,n.asetId,n.repId,n.idPiece,n.segment.size,n.segment.duration),r=t.chunkManager;t.isNew&&(g.emit("newChunkManager",r,n.periodId,n.asetId,n.repId,n.idPiece),M(r,n)),_.forEach(e.getPeerArray(),function(e){e.requestHasSegment(n.idPiece,n.periodId,n.asetId,n.repId)})},f=function(){var e,n,t,r,a,o=d.ongoingSegments.slice(0).splice(0,conf.NB_SEGMENT_P2P_PREBUFFER);for(n=0;n<o.length;n++)if(e=o[n],e.chunkManagerAndSeeders=e.chunkManagerAndSeeders?e.chunkManagerAndSeeders:D(e.periodId,e.asetId,e.repId,e.idPiece),a=e.chunkManagerAndSeeders,a&&(t=a.seeds.getNextSeed(e.chunkManagerAndSeeders.chunkManager.chunkNumber),t&&(r=a.chunkManager.getNextChunk(),r>=0)))return t.requestChunk(e.idPiece,r,e.periodId,e.asetId,e.repId),u.addChunkRequest(),void m(r,t,a.chunkManager)},m=function(e,n,r){setTimeout(_.bind(function(){r.timeOut(e,n)},t),conf.CHUNK_TIMEOUT)},I=function(e,n,t,r,a,u,o,i){if(d.p2pInterface.setSegmentSize(u,o,i,n,t,a),d.isSegmentRequested(u,o,i,n)){var g=D(u,o,i,n);g&&(g.chunkManager.addSegmentSize(t),g.seeds.insertSeeder(e))}},p=function(e,n,t,a,u,o,i){r--;var g=D(u,o,i,n).chunkManager;g?g.chunkDownloaded(a,t,e):d.correctP2PDownloaded(a.byteLength,"M"),e.getHeuristic().incrementNbChunkDownloaded()},k=function(e,n,t,r,a){var u=D(t,r,a,n).chunkManager,o={periodId:t,asetId:r,repId:a,idPiece:n};if(u){var g=u.size,c=u.getIndexLastChunkInARow(),s=d.p2pInterface.getSegmentHash(o);if(c>-1)return void e.hasSegment(n,g,c,s,t,r,a)}i.queue(e,n,t,r,a)},l=function(e,n,t,r,a,d){var u=Date.now(),i=D(r,a,d,n).chunkManager;if(i){var g=i.getChunk(t);g&&o.add(e,n,t,g,u,r,a,d)}},S=function(e){var n=D(e.periodId,e.asetId,e.repId,e.idPiece).chunkManager;return n?n.getBiggestSegment(e):!1},P=function(e,n,t,r){for(var d,u,o=0;u=a[o];o++)if(u.getId_period()==e&&u.getId_aset()==n&&u.getId_rep()==t&&u.getId_segment()==r)return d=u;return!1},w=function(e,n,r,d,u,o){var i=P(e,n,r,d);if(i===!1){var g=new SegmentHandler(e,n,r,d,u,o,t);return a.push(g),R(),{chunkManager:g.getChunkManager(),isNew:!0}}return{chunkManager:i.getChunkManager(),isNew:!1}},M=function(e,n){e.getEE().on("segmentDownloaded",_.bind(function(t){var r=P(n.periodId,n.asetId,n.repId,n.idPiece);r.getSeeders().cleanAfterDownloaded(),e.lockSegmentData(),d.p2pInterface.checkHashP2P(e,n,t)},t))},v=function(e,n,t){e.unlockSegmentData(),i.answerRequests(n,t.byteLength,e.chunkNumber,n.segment.hash),g.emit("segmentDownloaded",n,t)},C=function(e){E(e),d.correctP2PDownloaded(e.segment.size,"HP")},E=function(e){var n=P(e.periodId,e.asetId,e.repId,e.idPiece),t=a.indexOf(n);a.splice(t,1)},D=function(e,n,t,r){var a=P(e,n,t,r);return a!==!1?{chunkManager:a.getChunkManager(),seeds:a.getSeeders()}:!1},q=function(){var e=0,n=0;return _.each(a,function(t){var r=t.getChunkManager().getP2PDownload_CDNDownload();e+=r.p2pDownloaded,n+=r.cdnDownloaded},t),{p2pDownloaded:e,cdnDownloaded:n}},N=function(){g.emit("uploadSaturated")},R=function(){for(var e=0,n=d.p2pInterface.isLive()?conf.LIVE.P2P_CACHE_MAX_SIZE:conf.P2P_CACHE_MAX_SIZE,t=0;t<a.length;t++)a[t].getChunkManager().size&&(e+=a[t].getChunkManager().size);e>n&&(g.emit("segmentRemoved",a[0]),a[0].getChunkManager().clearSegment(),delete a[0],a.splice(0,1))},A=function(e){for(var n,t,r=0;r<d.ongoingSegments.length;r++)n=d.ongoingSegments[r],t=P(n.periodId,n.asetId,n.repId,n.idPiece),t&&t.getSeeders().removeSeeder(e);i.removePeerRequests(e)};t.getP2PManager=function(){return d},t.fillSegment=s,t.startDownloadSegment=h,t.downloadChunk=f,t.getBiggestStartingPartInSegment=S,t.hashVerified=v,t.wrongHash=C,t.removeChunkManager=E,t.getChunkManagerAndSeeders=D,t.doubleCheckP2PDownload_CDNDownload=q,t.uploadSaturated=N,t.getEE=function(){return g},c()};module.exports=P2PDownloader;


},{"../../conf":265,"./ChunkDownloadBuffer":267,"./SegmentHandler":280,"./SegmentRequestQueue":281,"./UploadQueue":284,"eventemitter3":82,"underscore":297}],272:[function(require,module,exports){
  "use strict";var VideoAnalytics=require("../analytics/VideoAnalytics"),P2PInterface=function(e,t,i,n,r){var s,u=null;VideoAnalytics.fake||(s=new VideoAnalytics(e,t,n)),this.p2pMapController=i,this.setSegmentHasher=function(e){u=e},this.getSegmentHasher=function(){return u},this.getCurrentTime=function(){return e.getCurrentTime()},this.setCurrentTime=function(t){"function"==typeof e.setCurrentTime&&e.setCurrentTime(t)},this.addVideoEventListener=function(t,i){e.addVideoEventListener(t,i)},this.isLive=function(){return i.isLive()},this.getSegmentHash=function(e){return i.getSegmentHash(e)},this.getMap=function(){return i.getMap()},this.getMpdUrl=function(){return n},this.getOffsetedPlaybackTime=function(){return this.getCurrentTime()+e.getPlaybackOffset()},this.getSegmentTime=function(e){return i.getSegmentTime(e)},this.setSegmentSize=function(e,t,n,r,s,u){i.setSegmentSize(e,t,n,r,s,u)},this.checkHashP2P=function(e,t,i){u.checkHashP2P(e,t,i)},this.areBuffersInitialized=function(){return!e.areBuffersInitialized||e.areBuffersInitialized()},this.getBufferedTracks=function(){for(var t,i=e.getBuffered(),n=[],s=0;t=i[s];s++){var u=r(t.coord);n.push({buffered:t.buffered,asetId:u.asetId,repId:u.repId,periodId:u.periodId,bufferedStrict:t.bufferedStrict})}return n},this.getTracks=function(){for(var t,i=e.getBuffered(),n=[],s=0;t=i[s];s++){var u=r(t.coord);n.push({asetId:u.asetId,repId:u.repId,periodId:u.periodId})}return n},this.setBufferMarginLive=function(t){e.setBufferMarginLive(t)},this.isFake=function(){s.isFake()},this.setPeerPoolListeners=function(e){s.setPeerPoolListeners(e)},this.setP2PDownloaderListeners=function(e){s.setP2PDownloaderListeners(e)}};module.exports=P2PInterface;


},{"../analytics/VideoAnalytics":266}],273:[function(require,module,exports){
  "use strict";var _=require("underscore"),TrackerManager=require("./TrackerManager"),DisplayManagerWrapper=require("./display/DisplayManagerWrapper"),DisplayInterface=require("./display/DisplayInterface"),status=require("./status"),PeerPool=require("./peerPool"),P2PDownloader=require("./P2PDownloader"),conf=require("../../conf"),EventEmitter=require("eventemitter3"),P2PManager=function(e,t,n){var s=new EventEmitter;this.p2pInterface=e,this.externalEventManager=t,this.trackerURL=n,this.trackerManager=new TrackerManager(this.p2pInterface,this.trackerURL),this.peerPool=new PeerPool(t,{TrackerManager:this.trackerManager}),this.maxNumberOfSlots=6,this.p2pDownloader=new P2PDownloader(this.peerPool,this),this.p2pDownloader.getEE().on("segmentDownloaded",_.bind(this.setPieceDownloaded,this)),"undefined"==typeof this.p2pInterface.isFake()&&(this.p2pInterface.setPeerPoolListeners(this.peerPool),this.p2pInterface.setP2PDownloaderListeners(this.p2pDownloader)),this.externalEventManager.addVideoEventListener("seeked",this.onSeeked.bind(this)),this.ongoingSegments=[],this.addFirstOngoingSegments=!1,this.doubleCheckP2PDownload_CDNDownload(),this.getEE=function(){return s}};P2PManager.prototype.startDisplayManager=function(){this.p2pInterface.areBuffersInitialized()?(DisplayManagerWrapper.start(this),conf.DEBUG&&(this.displayInterface=new DisplayInterface(this))):setTimeout(this.startDisplayManager.bind(this),300)},P2PManager.prototype.fillSegment=function(e,t){this.updateStatusCurrentSegment(e),this.p2pDownloader.fillSegment(e.periodId,e.asetId,e.repId,e.idPiece,t)},P2PManager.prototype.isSegmentRequested=function(e,t,n,s){var o={periodId:e,asetId:t,repId:n,idPiece:s},a=_.where(this.ongoingSegments,o);return a.length?!0:!1},P2PManager.prototype.onSeeked=function(){var e,t,n,s=this.p2pInterface.getBufferedTracks(),o=this.p2pInterface.getCurrentTime();for(t=0;t<s.length;t++)for(n=0;n<s[t].buffered.length;n++)s[t].buffered.start(n)<=o&&o<=s[t].buffered.end(n)&&(e=e?Math.min(e,s[t].buffered.end(n)):s[t].buffered.end(n));e||(e=o),this.ongoingSegments=[],this.addFirstOngoingSegments=!1,this.setOngoingSegments(this.p2pInterface.getMap(),e)},P2PManager.prototype.setOngoingSegments=function(e,t){var n,s,o,a=this,i=0,r=0,g=[],d=!1,p=0,P=a.p2pInterface.getTracks();for(i=0;i<e.periods.length;i++){for(a.addFirstOngoingSegments||(r=conf.NB_SEGMENT_P2P_SKIP,a.addFirstOngoingSegments=!0),p=0;p<P.length;p++)g[p]=r;for(;!d;){for(n=1/0,s=-1,p=0;p<P.length;p++)g[p]<e.periods[i].asets[P[p].asetId].reps[P[p].repId].segments.length&&e.periods[i].asets[P[p].asetId].reps[P[p].repId].segments[g[p]].time<n&&(s=p,n=e.periods[i].asets[P[p].asetId].reps[P[p].repId].segments[g[p]].time);if(s>-1){if(o=e.periods[i].asets[P[s].asetId].reps[P[s].repId].segments[g[s]],!t||t&&o.time>=t){var h={periodId:i,asetId:P[s].asetId,repId:P[s].repId,idPiece:o.id,segment:o,id_buffer:s};a.ongoingSegments.push(h)}g[s]+=1}else d=!0}}a.activateP2POngoingSegments()},P2PManager.prototype.onTrackSwitch=function(e,t,n){var s,o,a,i,r,g,d;if(t===e){for(s=0;s<this.ongoingSegments.length;s++)if(this.ongoingSegments[s].asetId===t){for(a={periodId:this.ongoingSegments[s].periodId,asetId:t,repId:n,idPiece:this.ongoingSegments[s].idPiece,id_buffer:this.ongoingSegments[s].id_buffer},i=this.p2pInterface.getMap().periods[this.ongoingSegments[s].periodId].asets[t].reps[n].segments,o=0;o<i.length;o++)if(i[o].id===this.ongoingSegments[s].idPiece){a.segment=i[o];break}a.segment&&this.ongoingSegments.splice(s,1,a)}}else{for(r=this.p2pInterface.getBufferedTracks(),g=this.p2pInterface.getCurrentTime(),s=0;s<r.length;s++)for(o=0;o<r[s].buffered.length;o++)r[s].buffered.start(o)<=g&&g<=r[s].buffered.end(o)&&(d=d?Math.min(d,r[s].buffered.end(o)):r[s].buffered.end(o));d||(d=g),this.ongoingSegments=[],this.setOngoingSegments(this.p2pInterface.getMap(),d)}this.getEE().emit("repSwitched",e,t,n)},P2PManager.prototype.activateP2POngoingSegments=function(){if(this.ongoingSegments.length)for(var e=Math.min(conf.NB_SEGMENT_P2P_PREBUFFER,this.ongoingSegments.length),t=this.ongoingSegments[0].idPiece,n=0;e>n;n++){if(this.ongoingSegments[n].chunkManager=this.ongoingSegments[n].chunkManager?this.ongoingSegments[n].chunkManager:this.p2pDownloader.getChunkManagerAndSeeders(this.ongoingSegments[n].periodId,this.ongoingSegments[n].asetId,this.ongoingSegments[n].repId,this.ongoingSegments[n].idPiece).chunkManager,this.ongoingSegments[n].chunkManager&&this.ongoingSegments[n].chunkManager.isSegmentDownloaded()){this.removeSegmentFromOngoing(void 0,n);break}this.ongoingSegments[n].p2pActivated||(this.canStartDownloadingSegment(this.ongoingSegments[n])?(this.p2pInterface.isLive()||this.ongoingSegments[n].idPiece-t<=conf.NB_SEGMENT_P2P_PREBUFFER)&&(this.p2pDownloader.startDownloadSegment(this.ongoingSegments[n]),this.ongoingSegments[n].p2pActivated=!0):setTimeout(this.activateP2POngoingSegments.bind(this),conf.RETRY_P2P_START_DL_SEGMENT_DELAY))}},P2PManager.prototype.canStartDownloadingSegment=function(e){var t,n=this.p2pInterface.getSegmentTime(e);return n?t=n-this.p2pInterface.getCurrentTime()<conf.MAX_P2P_PREBUFFERING_TIME||this.p2pInterface.isLive()&&0===this.p2pInterface.getCurrentTime():(this.removeSegmentFromOngoing(e),t=!1),t},P2PManager.prototype.removeSegmentFromOngoing=function(e,t){if(t||0===t)this.ongoingSegments.splice(t,1);else{var n=_.where(this.ongoingSegments,{periodId:e.periodId,asetId:e.asetId,repId:e.repId,idPiece:e.idPiece});n.length&&this.ongoingSegments.splice(this.ongoingSegments.indexOf(n[0]),1)}this.activateP2POngoingSegments()},P2PManager.prototype.setPieceDownloaded=function(e){this.getEE().emit("piece_downloaded_p2pm",e),this.removeSegmentFromOngoing(e),this.updateStatusCurrentSegment(e)},P2PManager.prototype.getBiggestStartingPartInSegment=function(e){return this.p2pDownloader.getBiggestStartingPartInSegment(e)},P2PManager.prototype.correctP2PDownloaded=function(e,t){isNaN(e)||("PP"===t?(status.setDataDownloadedTwice_PP(status.getDataDownloadedTwice_PP()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"PC"===t?(status.setDataDownloadedTwice_PC(status.getDataDownloadedTwice_PC()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e),status.setp2pDownloadedNewAnalytics(status.getp2pDownloadedNewAnalytics()-e)):"CP"===t?(status.setDataDownloadedTwice_CP(status.getDataDownloadedTwice_CP()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"CC"===t?status.setDataDownloadedTwice_CC(status.getDataDownloadedTwice_CC()+e):"HP"===t?(status.setDataDownloadedTwice_HP(status.getDataDownloadedTwice_HP()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"HD"===t?(status.setDataDownloadedTwice_HD(status.getDataDownloadedTwice_HD()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)):"M"===t&&(status.setDataDownloadedTwice_M(status.getDataDownloadedTwice_M()+e),status.setP2PDownloaded(status.getP2PDownloaded()-e)))},P2PManager.prototype.doubleCheckP2PDownload_CDNDownload=function(){var e=this.p2pDownloader.doubleCheckP2PDownload_CDNDownload();status.setCDNDoubleCheck(e.cdnDownloaded),status.setP2PDoubleCheck(e.p2pDownloaded),setTimeout(_.bind(this.doubleCheckP2PDownload_CDNDownload,this),1e4)},P2PManager.prototype.updateStatusCurrentSegment=function(e){status.updateStatusSegment(e)},P2PManager.prototype.closeTrackerConnection=function(){this.trackerManager.closeSocketConnection()},P2PManager.prototype.closeAllPeerConnection=function(){this.peerPool.sendCloseMessage()},module.exports=P2PManager;


},{"../../conf":265,"./P2PDownloader":271,"./TrackerManager":283,"./display/DisplayInterface":286,"./display/DisplayManagerWrapper":287,"./peerPool":289,"./status":290,"eventemitter3":82,"underscore":297}],274:[function(require,module,exports){
  var _=require("underscore"),conf=require("../../conf"),crypto=require("crypto"),url=require("url"),P2PMapController=function(e,s){var t,r,i,n=function(){l()},o=function(e){t=s(e)},a=function(e){var r={periods:[]};if(!t)return o(e),void(i=t);e=s(e);for(var n,a=0;n=t.periods[a];a++)for(var u,d=0;u=n.asets[d];d++)for(var h,g=0;h=u.reps[g];g++){p(r,a,d,g);for(var f=e.periods[a].asets[d].reps[g].segments,c=h.segments.length,m=0;c>m&&h.segments[0].id!==f[0].id;m++)h.segments.splice(0,1);c=h.segments.length;for(var v=0;c>v;v++)v<f.length&&h.segments[v].id===f[v].id&&(h.segments[v].time=f[v].time);for(var l=f.length,S=0;l>S;S++)if(!h.segments[S]){var I=f[S];h.segments.push(I),r.periods[a].asets[d].reps[g].segments.push(I)}}i=r},p=function(e,s,t,r){e.periods[s]||(e.periods[s]={asets:[]}),e.periods[s].asets[t]||(e.periods[s].asets[t]={reps:[]}),e.periods[s].asets[t].reps[r]||(e.periods[s].asets[t].reps[r]={segments:[]})},u=function(e){return _.where(t.periods[e.periodId].asets[e.asetId].reps[e.repId].segments,{id:e.idPiece})[0]},d=function(){var e=t.isLive;if("undefined"!=typeof e)return e},h=function(e){var s=u(e);return s&&s.hash?s.hash:!1},g=function(e,s){var t=u(e);t&&(t.hash=s)},f=function(){return t},c=function(){return i},m=function(e){var s=u(e);return s?s.time:!1},v=function(){return r},l=function(){var s=url.parse(e,!0,!0);r=crypto.createHash("md5").update('"'+s.host+s.pathname+'"').digest("hex")},S=function(e,s,t,r,i,n){var o=u({periodId:e,asetId:s,repId:t,idPiece:r});o&&(o.size||(o.size=i),n&&!o.hash&&(o.hash=n))};this.updateMap=a,this.getSegment=u,this.isLive=d,this.getSegmentHash=h,this.setSegmentHash=g,this.getMap=f,this.getMapWithNewSegments=c,this.getMpdHash=v,this.getSegmentTime=m,this.setSegmentSize=S,n()};module.exports=P2PMapController;


},{"../../conf":265,"crypto":54,"underscore":297,"url":298}],275:[function(require,module,exports){
  "use strict";var PartialSegmentInterface=function(){var t="Method not implemented";this.getUpdatedRange=function(e){throw new Error(t)},this.getFullSegment=function(e,r,n){throw new Error(t)},this.isComplete=function(){throw new Error(t)},this.isLocked=function(){throw new Error(t)}};module.exports=PartialSegmentInterface;


},{}],276:[function(require,module,exports){
  "use strict";var PartialSegmentInterface=require("./PartialSegmentInterface"),status=require("./status"),conf=require("../../conf"),PartialSegmentNoP2P=function(e,t){function n(e){return function(n,r){t&&(t.fillSegment(r,n.response),t.getEE().emit("piece_downloaded_prtl",r)),e(n,r)}}PartialSegmentInterface.call(this);var r=e,a=function(){t?r.segment=t.p2pInterface.p2pMapController.getSegment(r):r=e};this.getUpdatedRange=function(e){return e},this.getFullSegment=function(e,a){if(t){t.getEE().emit("CDNSegmentDownloaded",r);var i=e.response;status.setCDNDownloaded(status.getCDNDownloaded()+i.byteLength),t.p2pInterface.getSegmentHasher().createHash(e,r,n(a))}else n(a)(e,r)},this.isComplete=function(){return!1},this.isLocked=function(){return!1},a()};module.exports=PartialSegmentNoP2P;


},{"../../conf":265,"./PartialSegmentInterface":275,"./status":290}],277:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),status=require("./status"),PartialSegmentInterface=require("./PartialSegmentInterface"),PartialSegmentP2P=function(e,t,n,r,o,a,i){function s(e){return function(n,r){g=n.response,t.fillSegment(r,n.response),t.getEE().emit("piece_downloaded_prtl",r),f=!1,a.unlockSegmentData(),a.removePartialSegment(),e(n,r)}}function u(e){return function(n,r){status.setCdnDataDiscarded(status.getCdnDataDiscarded()+m),t.p2pDownloader.removeChunkManager(r),t.correctP2PDownloaded(c,"HD"),e(n,r)}}PartialSegmentInterface.call(this);var d,c,l,f,g,p,h=e,m=0,S=function(){var e;for(c=0,e=0;e<p.length;e++)"downloaded"===p[e]&&(c+=e<p.length-1?conf.CHUNK_SIZE:o-(p.length-1)*conf.CHUNK_SIZE)},C=function(){var e=0;for(e=0;e<p.length;e++)if("downloaded"!==p[e]&&"CDNdownloaded"!==p[e])return e},D=function(){var e=0;for(e=p.length-1;e>=0;e--)if("downloaded"!==p[e]&&"CDNdownloaded"!==p[e])return e+1},v=function(e){var t,n,r=C(),o=D();return void 0!==r&&void 0!==o?(t=e?e.start+r*conf.CHUNK_SIZE:r*conf.CHUNK_SIZE,o===p.length&&e?n=e.end:o<p.length&&(n=e?e.start+o*conf.CHUNK_SIZE-1:o*conf.CHUNK_SIZE-1),d={start:r,end:o},{start:t,end:n}):e?e:void 0},P=function(){g=n.buffer.slice(),p=r.slice(),S(),l=i,h.segment=t.p2pInterface.p2pMapController.getSegment(h)},w=function(e){var t;return void 0!==d&&void 0!==g?(t=new Uint8Array(g),t.set(new Uint8Array(e),d.start*conf.CHUNK_SIZE)):t=new Uint8Array(e),t.buffer},I=function(e){status.setCDNDownloaded(status.getCDNDownloaded()+e.byteLength)};this.getUpdatedRange=function(e){return v(e)},this.getFullSegment=function(e,n,r){if(e.p2pMeanThroughput=status.computeP2PThroughput(),this.isComplete())e.response=g,a.removePartialSegment(),n(e,null);else{t.getEE().emit("CDNSegmentDownloaded",h);var o=e.response;I(o),m=o.byteLength,e.response=w(o),0!==c?(f=!0,a.lockSegmentData(),t.p2pInterface.getSegmentHasher().checkHashDLM(e,h,s(n),u(r))):s(n)(e,h)}},this.getCDNIndexRange=function(){return d},this.isComplete=function(){return l},this.isLocked=function(){return a.dataLocked},P()};module.exports=PartialSegmentP2P;


},{"../../conf":265,"./PartialSegmentInterface":275,"./status":290}],278:[function(require,module,exports){
  "use strict";var P2PInterface=require("./P2PInterface"),P2PMapController=require("./P2PMapController"),P2PManager=require("./P2PManager"),ExternalEventManager=require("./ExternalEventManager"),SegmentHasher=require("../security/SegmentHasher"),PartialSegmentNoP2P=require("./PartialSegmentNoP2P"),status=require("./status"),conf=require("../../conf"),SRModule=function(e,n,t,r,a,o,i){var c,P,d,s,E,u,g,l=t,C=i,f=!1,M=function(e){if(e.P2P_CACHE_MAX_SIZE&&(conf.P2P_CACHE_MAX_SIZE=e.P2P_CACHE_MAX_SIZE),void 0!==e.ALLOW_P2P&&(conf.ALLOW_P2P=e.ALLOW_P2P),void 0!==e.DEBUG&&(conf.DEBUG=e.DEBUG),(e.TRACKER_URL||!conf.ALLOW_P2P)&&(conf.TRACKER_URL=e.TRACKER_URL),!e.ID_CLIENT)throw new Error("There must be a client ID in the option object");conf.ID_CLIENT=e.ID_CLIENT},_=function(e){e&&(e.MIN_BUFFER_LEVEL=conf.MIN_BUFFER_LEVEL,e.MAX_BUFFER_LEVEL=conf.MAX_BUFFER_LEVEL,e.ABR_DEL_T=conf.ABR_DEL_T)},L=function(e,n){status.setMPD(n),status.setPeriod(e)},w=function(e,n){var t=c.getMpdHash(),r=status.updateTobuffer(n.map(function(e){return{type:e.type,coord:a(e.coord),bufferLevelMax:e.bufferLevelMax}}));L(e,t),status.incrementTrackSwitchCount(),d.trackerManager.onTrackChange();for(var o,i=0;o=r[i];i++)d.onTrackSwitch(o.asetId_from,o.asetId,o.repId);u&&S()},R=function(e){c.updateMap(e),E&&(d.startDisplayManager(),status.getTobuffer()?S():u=!0)},S=function(){var e=c.getMapWithNewSegments();d.setOngoingSegments(e),u=!1},m=function(e){status.setCdnCancelled(status.getCdnCancelled()+e)},v=function(){g.addMediaEventListener("onMapUpdate",R),g.addMediaEventListener("cdnCancelled",m),c=new P2PMapController(n,r);var t=window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection;E=t&&conf.ALLOW_P2P,E&&(g.addMediaEventListener("onTrackChange",w),P=new P2PInterface(e,g,c,n,a),d=new P2PManager(P,g,conf.TRACKER_URL),s=new SegmentHasher(d),P.setSegmentHasher(s)),g.triggerCachedEvent("onMapUpdate",R),g.triggerCachedEvent("cdnCancelled",m),g.triggerCachedEvent("onTrackChange",w),f=!0},h=function(){g=new ExternalEventManager(e),g.cacheMediaEvent("onMapUpdate"),g.cacheMediaEvent("cdnCancelled"),g.cacheMediaEvent("onTrackChange"),M(l),_(C)},A=function(e){var n,t;return f?(t=o(e),E?(d.removeSegmentFromOngoing(t),n=d.getBiggestStartingPartInSegment(t)||new PartialSegmentNoP2P(t,d)):n=new PartialSegmentNoP2P(t)):(v(),t=o(e),n=new PartialSegmentNoP2P(t)),n},T=function(){g.removeAllExternalEventListener(),s.terminateWorker(),d.closeTrackerConnection(),d.closeAllPeerConnection(),delete window.SR_DISPLAY_INTERFACE,delete window.RY};h(),this.getP2PData=A,this.dispose=T};window.Streamroot=window.Streamroot||{},window.Streamroot.SRModule=SRModule,module.exports=SRModule;


},{"../../conf":265,"../security/SegmentHasher":292,"./ExternalEventManager":269,"./P2PInterface":272,"./P2PManager":273,"./P2PMapController":274,"./PartialSegmentNoP2P":276,"./status":290}],279:[function(require,module,exports){
  "use strict";var _=require("underscore"),conf=require("../../conf"),Seeders=function(){var e=[],t=0,r=function(t){for(var r=0;r<e.length;){if(e[r].getHeuristic().getHeuristicScore()<=t.getHeuristic().getHeuristicScore())return void e.splice(r,0,t);r++}e.push(t)},i=function(t){e=_.reject(e,function(e){return e===t})},n=function(){for(var t=0,r=0;r<e.length;r++)t+=e[r].getHeuristic().getHeuristicScore();return t},u=function(r){var i,u=Math.floor(Math.random()*e.length);switch(t){case 0:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(e[c].getHeuristic().getNbChunkRequested()/e[c].getHeuristic().getHeuristicScore()<=e[e.length-1].getHeuristic().getNbChunkRequested()/e[e.length-1].getHeuristic().getHeuristicScore()&&e[c].canBeAskedChunk()){i=e[c];break}}break;case 1:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(Math.random()<=e[c].getHeuristic().getHeuristicScore()&&e[c].canBeAskedChunk()){i=e[c];break}}break;case 2:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(e[c].getHeuristic().getNbChunkRequested()<=Math.floor(e[c].getHeuristic().getHeuristicScore()/n()*r+1)&&e[c].canBeAskedChunk()){i=e[c];break}}break;case 3:if(0!==e.length){i=e[u];for(var c=0;c<e.length;c++)if(e[c].getHeuristic().getNbChunkRequested()/e[c].getHeuristic().getHeuristicScore()<=e[c+1].getHeuristic().getNbChunkRequested()/e[c+1].getHeuristic().getHeuristicScore()&&e[c].canBeAskedChunk()){i=e[c];break}}break;default:i=!1}return i},c=function(){e=[]};this.getNextSeed=function(e){return u(e)},this.getVerifiedSeeders=function(){return e},this.insertSeeder=function(e){r(e)},this.removeSeeder=function(e){i(e)},this.cleanAfterDownloaded=function(){c()}};module.exports=Seeders;


},{"../../conf":265,"underscore":297}],280:[function(require,module,exports){
  "use strict";var ChunkManager=require("./ChunkManager"),Seeders=require("./Seeders"),SegmentHandler=function(e,n,r,t,u,i,s){var a=e,g=n,d=r,h=t,o=new ChunkManager(u,i,s),c=new Seeders;this.getId_period=function(){return a},this.getId_aset=function(){return g},this.getId_rep=function(){return d},this.getId_segment=function(){return h},this.getChunkManager=function(){return o},this.getSeeders=function(){return c}};module.exports=SegmentHandler;


},{"./ChunkManager":268,"./Seeders":279}],281:[function(require,module,exports){
  var conf=require("../../conf"),_=require("underscore"),SegmentRequestQueue=function(e){this.p2pManager=e,this.segmentRequests=[],this.peerTimeouts={}};SegmentRequestQueue.prototype.queue=function(e,t,s,i,r){if(this.p2pManager.p2pInterface.isLive())this.segmentRequests.push({id_segment:t,peer:e,periodId:s,asetId:i,repId:r});else{var n=_.pluck(_.where(this.p2pManager.ongoingSegments,{periodId:s,asetId:i,repId:r},this),"idPiece"),u=_.min(n),d=_.max(n);t>=u&&t<=d+conf.MAX_SEGMENT_REQUEST_STORE&&this.segmentRequests.push({id_segment:t,peer:e,periodId:s,asetId:i,repId:r})}},SegmentRequestQueue.prototype.answerRequests=function(e,t,s,i){var r,n=_.filter(this.segmentRequests,function(t){return t.periodId===e.periodId&&t.asetId===e.asetId&&t.repId===e.repId&&t.id_segment===e.idPiece},this);for(r=0;r<n.length;r++)n[r].peer.hasSegment(e.idPiece,t,s,i,e.periodId,e.asetId,e.repId);this.segmentRequests=_.reject(this.segmentRequests,function(t){return t.periodId===e.periodId&&t.asetId===e.asetId&&t.repId===e.repId&&t.id_segment===e.idPiece},this)},SegmentRequestQueue.prototype.removePeerRequests=function(e){this.segmentRequests=_.reject(this.segmentRequests,function(t){return t.peer===e},this)},module.exports=SegmentRequestQueue;


},{"../../conf":265,"underscore":297}],282:[function(require,module,exports){
  var conf=require("../../conf"),SpeedCalculator=function(){this.transferedChunks=[]};SpeedCalculator.prototype.calculateSpeed=function(){var e=this.getIndexTransferOneSecondAgo();return e===!1?this.transferedChunks=[]:e>0&&this.transferedChunks.splice(0,e),this.transferedChunks.length*conf.CHUNK_SIZE/1024},SpeedCalculator.prototype.getIndexTransferOneSecondAgo=function(){for(var e=Date.now(),n=0;n<this.transferedChunks.length;n++)if(e-this.transferedChunks[n]<=1e3)return n;return!1},SpeedCalculator.prototype.addChunkTransfer=function(){var e=Date.now();this.transferedChunks.push(e)},module.exports=SpeedCalculator;


},{"../../conf":265}],283:[function(require,module,exports){
  "use strict";var conf=require("../../conf"),socketio=require("socket.io-client"),status=require("./status"),EventEmitter=require("eventemitter3"),TrackerManager=function(t,e){var n=new EventEmitter;this.p2pProtocolVersion="1.0.0",this.client2ClientProtocolVersion="1.0.1",this.p2pInterface=t,this.trackerURL=e,this.connect(),this.getEE=function(){return n}};TrackerManager.prototype.register=function(t,e){this.socket&&this.socket.on(t,e)},TrackerManager.prototype.connect=function(){this.socket||(this.socket=socketio.connect(this.trackerURL,{"force new connection":!0}),this.socket.on("connect",this.onTrackerConnected.bind(this)),this.socket.on("reconnecting",this.onTrackerReconnecting.bind(this)),this.socket.on("disconnect",this.onTrackerDisconnected.bind(this)),this.socket.on("reconnect",this.onTrackerReconnect.bind(this)))};var _updateCount=function(t){switch(t){case"offer":case"answer":case"icecandidate":status.setTrackerSgnCount(status.getTrackerSgnCount()+1);break;default:status.setTrackerMsgCount(status.getTrackerMsgCount()+1)}};TrackerManager.prototype.sockEmit=function(t,e,n){(status.getConnected()||"initSR"===t)&&(this.socket.emit(t,e,n),_updateCount(t))},TrackerManager.prototype.onTrackerConnected=function(){var t=this,e={isLive:this.p2pInterface.isLive(),minBufferLevel:conf.MIN_BUFFER_LEVEL,maxBufferLevel:conf.MAX_BUFFER_LEVEL};this.sockEmit("initSR",{p2pProtocolVersion:t.p2pProtocolVersion,client2ClientProtocolVersion:t.client2ClientProtocolVersion,clientId:conf.ID_CLIENT,mpd:status.getMPD(),mpdURL:this.p2pInterface.getMpdUrl(),period:status.getPeriod(),tobuffer:status.getTobuffer(),live:e},this.onTrackerReady.bind(this)),status.incrementTrackerConnectionCount()},TrackerManager.prototype.onTrackerReady=function(t,e){var n=this;t||(status.setConnected(!0),status.setMyIds(e.my_ids),status.setTobuffer(e.updated_tobuffer),n.p2pInterface.isLive()&&e.updated_tobuffer.forEach(function(t){"video"===t.type&&status.setBufferLevel(t.bufferLevel),n.p2pInterface.setBufferMarginLive(t.bufferLevel)}),n.getEE().emit("tracker_ready"))},TrackerManager.prototype.onTrackerReconnecting=function(){status.setConnected(!1)},TrackerManager.prototype.onTrackerDisconnected=function(){!this.socketClosed,status.setConnected(!1),status.incrementTrackerDeconnectionCount(),this.getEE().emit("tracker_disconnected")},TrackerManager.prototype.onTrackerReconnect=function(){status.incrementTrackerReconnectionCount()},TrackerManager.prototype.onTrackChange=function(){status.getConnected()&&this.sockEmit("updateAsetStatus",{newTracks:status.getTobuffer(),mpd:status.getMPD(),client2ClientProtocolVersion:this.client2ClientProtocolVersion},this.OnStatusUpdated.bind(this))},TrackerManager.prototype.OnStatusUpdated=function(t,e){var n=this;t||(status.updateStatus(e),n.p2pInterface.isLive()&&e.updatedTracks.forEach(function(t){"video"===t.type&&status.setBufferLevel(t.bufferLevel),n.p2pInterface.setBufferMarginLive(t.bufferLevel)}))},TrackerManager.prototype.askPeers=function(t,e){var n,o={};t?(o.asetId=void 0!==t.asetId?t.asetId:"all",o.exclusions=t.exclusions?t.exclusions:[],o.updating=t.updating?t.updating:!1):(o.asetId="all",o.exclusions=[],o.updating=!1),n={mpdhash:status.getMPD(),periodId:status.getPeriod(),tobuffer:status.getTobuffer(),client2ClientProtocolVersion:this.client2ClientProtocolVersion,p2pstats:{P2Ppercent:(status.getP2PDownloaded()/(status.getCDNDownloaded()+status.getP2PDownloaded())).toFixed(3),p2p:status.getP2PDownloaded(),cdn:status.getCDNDownloaded(),dataDownloadedTwice:status.getDataDownloadedTwice()},options:o},this.sockEmit("updatePeers",n,e)},TrackerManager.prototype.sendPeerOffer=function(t){this.sockEmit("offer",t)},TrackerManager.prototype.sendPeerAnswer=function(t){this.sockEmit("answer",t)},TrackerManager.prototype.sendPeerIceCandidate=function(t){this.sockEmit("icecandidate",t)},TrackerManager.prototype.sendAnalytics=function(t){this.sockEmit("analytics",t)},TrackerManager.prototype.closeSocketConnection=function(){this.socketClosed=!0,this.socket.close()},module.exports=TrackerManager;


},{"../../conf":265,"./status":290,"eventemitter3":82,"socket.io-client":83}],284:[function(require,module,exports){
  var conf=require("../../conf"),_=require("underscore"),SpeedCalculator=require("./SpeedCalculator"),UploadQueue=function(e){this.p2pDownloader=e,this.queue=[],this.peerTimeouts={},this.saturated=!1,this.uploadSpeedCalculator=new SpeedCalculator,this.uploadLimitation=conf.MAX_UP_SPEED};UploadQueue.prototype.add=function(e,t,i,u,o,a,r,n){this.queue.push({peer:e,id_segment:t,id_chunk:i,chunk:u,periodId:a,asetId:r,repId:n,timeStamp:o}),this.resetPeerTimeout(e),this.sendChunk()},UploadQueue.prototype.removeFirstChunk=function(){this.queue.splice(0,1)},UploadQueue.prototype.getChunkToSend=function(){for(var e=Date.now();this.queue.length>0;){if(e-this.queue[0].timeStamp<conf.CHUNK_UP_TIMEOUT)return this.queue[0];this.removeFirstChunk(),this.p2pDownloader.uploadSaturated()}},UploadQueue.prototype.sendChunk=function(e){var t=this.uploadSpeedCalculator.calculateSpeed();if(t<this.uploadLimitation&&(!this.saturated||e)){var i=this.getChunkToSend();if(!i)return void this.unsetSaturated();if(i.peer.getCommChannel()&&i.peer.getCommChannel().bufferedAmount<conf.UP_MAX_BUFFERED_AMOUNT){this.uploadSpeedCalculator.addChunkTransfer();try{return i.peer.sendChunk(i.id_segment,i.id_chunk,i.chunk,i.periodId,i.asetId,i.repId),this.removeFirstChunk(),this.resetPeerTimeout(i.peer),this.unsetSaturated(),void(this.uploadLimitation+=5)}catch(u){this.uploadLimitation>conf.MAX_UP_SPEED&&(this.uploadLimitation=conf.MAX_UP_SPEED),this.uploadLimitation>400?this.uploadLimitation-=200:this.uploadLimitation>100?this.uploadLimitation-=50:this.uploadLimitation=Math.ceil(this.uploadLimitation/2),this.setSaturated()}this.checkPeerTimeout(i.peer)}else this.uploadLimitation>30&&(this.uploadLimitation-=20,this.setSaturated())}this.setSaturated()},UploadQueue.prototype.checkPeerTimeout=function(e){var t=Date.now();this.peerTimeouts[e.getId()]?t-this.peerTimeouts[e.getId()]>conf.PEER_UP_TIMEOUT&&this.clearChunksForPeer(e.getId()):this.peerTimeouts[e.getId()]=t},UploadQueue.prototype.resetPeerTimeout=function(e){delete this.peerTimeouts[e.getId()]},UploadQueue.prototype.clearChunksForPeer=function(e){this.queue=_.reject(this.queue,function(t){return t.peer.getId()===e})},UploadQueue.prototype.setSaturated=function(){if(!this.saturated){this.saturated=!0;var e=conf.CHUNK_SIZE/1024/(conf.MAX_UP_SPEED/1e3);this.sendInterval=setInterval(function(){this.sendChunk(!0)}.bind(this),e)}},UploadQueue.prototype.unsetSaturated=function(){this.saturated===!0,this.saturated=!1,this.queue.length||clearInterval(this.sendInterval)},module.exports=UploadQueue;


},{"../../conf":265,"./SpeedCalculator":282,"underscore":297}],285:[function(require,module,exports){
  "use strict";var WebRTCFactory=function(e){var n=e,o=window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,i=window.RTCIceCandidate||window.mozRTCIceCandidate,t=window.mozRTCSessionDescription||window.RTCSessionDescription;this.createPeerConnection=function(){return new o(n,{optional:[{DtlsSrtpKeyAgreement:!0}]})},this.createIceCandidate=function(e){return new i(e)},this.createSessionDescription=function(e){return new t(e)}};module.exports=WebRTCFactory;


},{}],286:[function(require,module,exports){
  "use strict";var status=require("../status"),conf=require("../../../conf.js"),DisplayInterface=function(e){var t=function(){var t,o={download:{p2pDownloaded:status.getP2PDownloaded(),p2pDownloadedNewAnalytics:status.getp2pDownloadedNewAnalytics(),cdnDownloaded:status.getCDNDownloaded(),dlSpeed:status.getDlSpeed(),upSpeed:status.getUpSpeed()},peers:{count:0},bufferLevel:status.getBufferLevel(),tracker:{connected:status.getConnected()},isLive:e.p2pInterface.isLive()};for(t=0;t<e.peerPool.getPeerArray().length;t++)e.peerPool.getPeerArray()[t].getId()&&o.peers.count++;return o.peerPool=e.peerPool.getProtectedPeerArray(),o},o=function(){window.SR_DISPLAY_INTERFACE={getStats:t}};o()};module.exports=DisplayInterface;


},{"../../../conf.js":265,"../status":290}],287:[function(require,module,exports){
  "use strict";function DisplayManagerFake(){this.start=function(){}}var status=require("../status"),DisplayManager=window.SRDisplayManager||DisplayManagerFake;module.exports=new DisplayManager(status);


},{"../status":290}],288:[function(require,module,exports){
  "use strict";var _=require("underscore"),status=require("./status"),conf=require("../../conf"),Heuristic=require("./Heuristic"),EventEmitter=require("eventemitter3"),Peer=function(t,e){var n,r,i,o,a,u,s,c,d,f=!1,g=0,l=0,h=!1,m=0,p=0,y=Date.now(),I=!1,b=0,v=0,C=t._id,w=t.asetId,A=t.periodId,P=t.representationId,E=t.city,D=t.country,S=t.currentSegment,T=t.currentTime,U=t.ipAddress,L=t.ipFullList,M=t.ipPort,k=t.isp,R=t.latitude,N=t.longitude,q=t.mpdhash,H=t.region,O=t.socketId,B=t.trackerId,J=t.updatedAt,F=t["p2pstats.P2Ppercent"],K=t.bufferLevel,V=0,x=0,z=new Heuristic(C,O),X=this,Y=new EventEmitter,j=function(){var t={_id:C,asetId:w,city:E,country:D,currentSegment:S,currentTime:T,ipAddress:U,ipFullList:L,ipPort:M,isp:k,latitude:R,longitude:N,mpdhash:q,periodId:A,region:H,representationId:P,socketId:O,trackerId:B,updatedAt:J};return t},G=function(t){var e;s&&s.getStats(function(n){var r,i,o=n.result();for(i=0;i<o.length;i++)if(r=o[i],r.stat("googRtt")){e=r.stat("googRtt"),t(e);break}})},Q=function(){var t,e,n,r;X.loc?(n=X.loc.coordinates[1],r=X.loc.coordinates[0],t=status.getTobuffer()[0].loc.coordinates[1],e=status.getTobuffer()[0].loc.coordinates[0]):(n=R,r=N,t=status.getTobuffer()[0].latitude,e=status.getTobuffer()[0].longitude);var i=6371,o=(n-t)*Math.PI/180,a=(r-e)*Math.PI/180,u=t*Math.PI/180,s=n*Math.PI/180,c=Math.sin(o/2)*Math.sin(o/2)+Math.sin(a/2)*Math.sin(a/2)*Math.cos(u)*Math.cos(s),d=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),f=i*d;return f},W=function(){var t=Date.now(),e=t-y;V=m/1024/(e/1e3),x=p/1024/(e/1e3),m=0,p=0,y=t},Z=function(){var t=Date.now(),e=(t-n)/1e3,r=g+l-(b+v);r<conf.MIN_USEFUL_SPEED*e&&nt(!1),b=g,v=l,n=t},$=function(){rt()},tt=function(){d||(d=setTimeout(function(){nt(!0)}.bind(X),conf.PEER_CONNECTION_TIMEOUT))},et=function(){clearTimeout(d)},nt=function(t){Y.emit("connection_lost",X,t)},rt=function(){c||(c=c?c:s.createDataChannel("communication",{reliable:!1}),c.binaryType="arraybuffer",c.onclose=function(){nt(!1)}.bind(X),it(),c.onerror=function(t){nt(!1)}.bind(X))},it=function(){c.onmessage=_.bind(function(t){if(I=!0,at(),X.setConnected(!0),status.setRawDataDownloaded(status.getRawDataDownloaded()+t.data.length),"string"==typeof t.data){var e=JSON.parse(t.data);if(e.readyComm)return void setTimeout(_.bind(function(){at(),X.setConnected(!0),et()},X),100);"heartbeat"===e.type||Y.emit("msg_"+e.type,e.args)}else{var n=Ct(t.data);m+=n.data.byteLength,g+=n.data.byteLength,status.setP2PDownloadedUncorrected(status.getP2PDownloadedUncorrected()+n.data.byteLength),status.setP2PDownloaded(status.getP2PDownloaded()+n.data.byteLength),Y.emit("msg_sendChunk",n)}},X)},ot=function(t,e){if(!f)return!1;var n=JSON.stringify({type:t,args:e});return status.setRawDataUploaded(status.getRawDataUploaded()+n.length),c.send(n),!0},at=function(){f||(f=!0,n=Date.now(),u=setInterval(Z.bind(X),conf.CHECK_USELESS_INTERVAL),Y.emit("change:ready_to_communicate"))},ut=function(){r=setInterval(function(){I===!0?I=!1:nt(!1)}.bind(X),conf.CHECK_HEARTBEAT_INTERVAL),i=setInterval(function(){dt()}.bind(X),conf.SEND_HEARTBEAT_INTERVAL)},st=function(){s.ondatachannel=ct.bind(X)},ct=function(t){var e=t.channel||t;"communication"==e.label&&(c=e,it(),"connecting"==e.readyState?c.onopen=function(){e.send(JSON.stringify({readyComm:!0})),setTimeout(_.bind(function(){at(),h=!0,et()},X),100)}.bind(X):(e.send(JSON.stringify({readyComm:!0})),setTimeout(_.bind(function(){at(),h=!0,et()},X),100)),c.onclose=function(){nt(!1)}.bind(X),c.onerror=function(t){nt(!1)}.bind(X))},dt=function(){ot("heartbeat")},ft=function(t,e,n,r){ot("requestHasSegment",{id:t,periodId:e,asetId:n,repId:r})},gt=function(t,e,n,r,i,o,a){ot("hasSegment",{id:t,segmentSize:e,progress:n,segmentHash:r,periodId:i,asetId:o,repId:a})},lt=function(t,e,n,r,i){ot("requestChunk",{id_segment:t,id_chunk:e,periodId:n,asetId:r,repId:i}),Y.emit("self_requestChunk",X,t,e),z.incrementNbChunkRequested()},ht=function(t,e,n,r,i,o){X.downloading={id_segment:t,id_chunk:e};var a=n.byteLength;n=_t(r,i,o,t,e,n),n!==!1&&c.send(n),p+=a,l+=a,status.setP2PUploaded(status.getP2PUploaded()+a)},mt=function(){ot("cleanDisconnect")},pt=function(){return z.getNbChunkRequested()<conf.MAX_CHUNK_BY_SEED},yt=function(t){t=t?_.clone(t):{},clearTimeout(d),clearInterval(r),clearInterval(i),clearInterval(a),clearInterval(u),c&&(c.onclose=void 0,c.close(),c=null);try{s.close()}catch(e){}s=null},It=function(t){var e=Math.floor(t/256),n=t%256;return new Uint8Array([n,e])},bt=function(t){var e=It(Math.floor(t/65536)),n=It(t%65536);return new Uint8Array([n[0],n[1],e[0],e[1]])},vt=function(t){var n,r;if(e.isLive()){if(r=e.getMap().periods[A].asets[w].reps[P].segments,_.find(r,function(e){return e.id==t}))return t;n=Math.floor(r[r.length-1].id/4294967296);var i=t+4294967296*n;return _.find(r,function(t){return t.id==i})?i:t+4294967296*(n-1)}return t},_t=function(t,e,n,r,i,o){var a=bt(r);if(i>65536)return!1;var u=It(i),s=new Uint8Array([t]),c=new Uint8Array([e]),d=new Uint8Array([n]),f=new Uint8Array(o.byteLength+a.byteLength+u.byteLength+s.byteLength+c.byteLength+d.byteLength);return f.set(s,0),f.set(c,1),f.set(d,2),f.set(a,3),f.set(u,7),f.set(new Uint8Array(o),9),f.buffer},Ct=function(t){var e=new Uint8Array(t.slice(0,1)),n=new Uint8Array(t.slice(1,2)),r=new Uint8Array(t.slice(2,3)),i=new Uint32Array(t.slice(3,7)),o=new Uint16Array(t.slice(7,9)),a=t.slice(9),u=e[0],s=n[0],c=r[0],d=vt(i[0]),f=o[0];return{id_segment:d,id_chunk:f,periodId:u,asetId:s,repId:c,data:a}},wt=function(){a=setInterval(_.bind(W,X),1e3)};X.toJSON=j,X.getConnected=function(){return h},X.setConnected=function(t){h=t},X.getRtt=G,X.getDistance=Q,X.getReadyToCommunicate=function(){return f},X.initChannels=$,X.startConnectionTimeout=tt,X.sendMessage=ot,X.establishHeartbeat=ut,X.initDialog=st,X.requestHasSegment=ft,X.hasSegment=gt,X.requestChunk=lt,X.sendChunk=ht,X.sendCleanDisconnectMsg=mt,X.canBeAskedChunk=pt,X.destroy=yt,X.getDataDownloaded=function(){return g},X.getDataUploaded=function(){return l},X.getId=function(){return C},X.getAsetId=function(){return w},X.getPeriodId=function(){return A},X.getRepId=function(){return P},X.getCity=function(){return E},X.getCountry=function(){return D},X.getRegion=function(){return H},X.getIpAddress=function(){return U},X.getSocketId=function(){return O},X.getCurrentTime=function(){return T},X.getDlSpeed=function(){return V},X.getUpSpeed=function(){return x},X.setPC=function(t){s=t},X.getPC=function(){return s},X.getCommChannel=function(){return c},X.getHeuristic=function(){return z},X.getAreListenerSet=function(){return o},X.setAreListenerSet=function(t){o=t},X.getUpdatedAt=function(){return J},X.getEE=function(){return Y},X.getP2Pstats=function(){return F},X.getBufferLevel=function(){return K},wt()};module.exports=Peer;


},{"../../conf":265,"./Heuristic":270,"./status":290,"eventemitter3":82,"underscore":297}],289:[function(require,module,exports){
  var conf=require("../../conf"),_=require("underscore"),Peer=require("./peer"),status=require("./status"),EventEmitter=require("eventemitter3"),WebRTCFactory=require("./WebRTCFactory"),PeerPool=function(e,t){var n,a,r,i=t.TrackerManager,d=0,o=!1,s=!1,c=[],u=this,g=new EventEmitter,f=[],p=[],l=e,v=function(){i.register("offer",b.bind(u)),i.register("answer",R.bind(u)),i.register("icecandidate",k.bind(u)),i.register("askAnalytics",U.bind(u)),window.PeerConnection=window.RTCPeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection,n=conf.ENABLE_TURN?{iceServers:conf.TURNSERVERS.concat(conf.STUNSERVERS)}:{iceServers:conf.STUNSERVERS},r=new WebRTCFactory(n),E(),g.on("add",h.bind(u)),i.getEE().on("tracker_ready",I,u),i.getEE().on("tracker_disconnected",C,u),l.addWindowEventListener("beforeunload",q.bind(u)),l.addWindowEventListener("unload",q.bind(u))},m=function(e,t){if(e.length){var n;for(n=0;n<e.length;n++){var a=D(e[n],t);a&&h(a)}}},D=function(e,t){var n;return e?(n=new Peer(e,t),c.push(n),n):void 0},E=function(){var e=0,t=0;_.forEach(c,function(n){e+=n.getDlSpeed(),t+=n.getUpSpeed()}),status.setDlSpeed(e),status.setUpSpeed(t),status.computeMaxAndAvgSpeed(),setTimeout(_.bind(E,u),1e3)},P=function(e){},I=function(){a&&clearInterval(a),N(!o),setInterval(N,conf.ASK_PEERS_INTERVAL),o=!0},C=function(){a&&(clearInterval(a),a=void 0)},w=function(e){e.getAreListenerSet()||(e.getEE().on("connection_lost",T.bind(u)),e.getEE().on("msg_close",_.bind(function(){T(e)},u)),e.getEE().on("msg_requestHasSegment",_.bind(function(t){g.emit("segmentRequested",e,t.id,t.periodId,t.asetId,t.repId)},u)),e.getEE().on("msg_hasSegment",_.bind(function(t){g.emit("hasSegment",e,t.id,t.segmentSize,t.progress,t.segmentHash,t.periodId,t.asetId,t.repId)},u)),e.getEE().on("msg_requestChunk",_.bind(function(t){g.emit("chunkRequested",e,t.id_segment,t.id_chunk,t.periodId,t.asetId,t.repId)},u)),e.getEE().on("msg_sendChunk",_.bind(function(t){g.emit("chunkReceived",e,t.id_segment,t.id_chunk,t.data,t.periodId,t.asetId,t.repId)},u)),e.getEE().on("msg_cleanDisconnect",_.bind(function(){O(e)},u)),e.getEE().on("change:ready_to_communicate",_.bind(function(){e.getReadyToCommunicate()===!0&&(e.establishHeartbeat(),g.emit("peerReadyCommunicate",e))},u)),e.setAreListenerSet(!0))},S=function(e){return e=e.replace(/b=AS([^\r\n]+\r\n)/g,""),e=e.replace(/a=mid:audio\r\n/g,"a=mid:audio\r\nb=AS:50\r\n"),e=e.replace(/a=mid:video\r\n/g,"a=mid:video\r\nb=AS:256\r\n"),e=e.replace(/a=mid:data\r\n/g,"a=mid:data\r\nb=AS:1638400\r\n")},h=function(e){e.getConnected()===!1&&(w(e),e.getPC()||e.setPC(r.createPeerConnection()),e.getPC().onstatechange=y.bind(u),e.getPC().onicecandidate=_.bind(function(t){if(t.candidate){var n=e.toJSON(),a=status.getTrackByTrackInfos(n.periodId,n.asetId,n.representationId),r={receiverData:n,senderData:a,icecandidate:t.candidate};i.sendPeerIceCandidate(r)}},u),e.initChannels(),e.getPC().createOffer(function(t){e.getPC().setLocalDescription(t,function(){t.sdp=S(t.sdp);var n=e.toJSON(),a=status.getTrackByTrackInfos(n.periodId,n.asetId,n.representationId),r={receiverData:n,senderData:a,offer:t};i.sendPeerOffer(r),g.emit("offerSent",e)}.bind(u),P)}.bind(u),P),e.startConnectionTimeout())},T=function(e,t){t&&(p.push(e.getId()),setTimeout(function(){return p.splice(0,1)},conf.PEER_REMOVED_TIMEOUT)),g.emit("peerDestroyed",e),e.destroy(),c=_.without(c,e),g.emit("remove"),c.length<conf.MIN_NUMBER_OF_PEERS&&N()},b=function(e){if(_.filter(c,function(t){return t.getId()==e.senderData._id}).length){var t=_.filter(c,function(t){return t.getId()==e.senderData._id})[0];t.setConnected("offer received, sending answer")}else{if(!(c.length<conf.MAX_NUMBER_OF_PEERS)){var n=e.senderData,a=status.getTrackByTrackInfos(n.periodId,n.asetId,n.representationId),d={receiverData:n,senderData:a,answer:!1};return void i.sendPeerAnswer(d)}e.senderData.connected="offer received, sending answer",e.senderData.isLive=i.p2pInterface.isLive();var o=i.p2pInterface;D(e.senderData,o);var t=_.filter(c,function(t){return t.getId()==e.senderData._id})[0]}w(t),t.getPC()||t.setPC(r.createPeerConnection()),t.getPC().onstatechange=y.bind(u),t.getPC().onicecandidate=_.bind(function(e){if(e.candidate){var n=t.toJSON(),a=status.getTrackByTrackInfos(n.periodId,n.asetId,n.representationId),r={receiverData:n,senderData:a,icecandidate:e.candidate};i.sendPeerIceCandidate(r)}},u),t.initDialog();var s=r.createSessionDescription(e.offer);t.getPC().remoteDescription&&""!==t.getPC().remoteDescription.sdp||t.getPC().setRemoteDescription(s,function(){t.getPC().createAnswer(function(e){t.getPC().setLocalDescription(e,function(){e.sdp=S(e.sdp);var n=t.toJSON(),a=status.getTrackByTrackInfos(n.periodId,n.asetId,n.representationId),r={receiverData:n,senderData:a,answer:e};i.sendPeerAnswer(r)}.bind(u),P)}.bind(u),P)}.bind(u),P),t.startConnectionTimeout()},R=function(e){for(var t,n=0;n<c.length;n++)if(c[n].getId()===e.senderData._id){t=c[n];break}if(t)if(e.answer){g.emit("answerReceived",t),t.setConnected("Answer received, connecting");var a=r.createSessionDescription(e.answer);t.getPC().setRemoteDescription(a,function(){},P)}else T(t),A(t)},A=function(e){f.push(e.getId()),setTimeout(function(){f.splice(0,1)},conf.OFFER_DECLINED_TIMEOUT)},k=function(e){if(_.filter(c,function(t){return t.getId()==e.senderData._id}).length){var t=_.filter(c,function(t){return t.getId()==e.senderData._id})[0];t.getPC().addIceCandidate(r.createIceCandidate(e.icecandidate))}},U=function(e){var t=status.getMPD(),n=e.timestamp;if(t===e.mpdhash){var a={mpdhash:t,timestamp:n,downloadStats:{p2pDownloaded:status.getP2PDownloaded(),p2pUploaded:status.getP2PUploaded(),cdnDownloaded:status.getCDNDownloaded(),p2pDownloadedUncorrected:status.getP2PDownloadedUncorrected(),dataDlTwice_PP:status.getDataDownloadedTwice_PP(),dataDlTwice_PC:status.getDataDownloadedTwice_PC(),dataDlTwice_CP:status.getDataDownloadedTwice_CP(),dataDlTwice_CC:status.getDataDownloadedTwice_CC()},speedStats:{avgDl:Math.round(status.getAvgDlSpeed()),maxDl:Math.round(status.getMaxDlSpeed()),avgUp:Math.round(status.getAvgUpSpeed()),maxUp:Math.round(status.getMaxUpSpeed())}};i.sendAnalytics({timestamp:n,data:a,mpdhash:t})}},y=function(e){var t=_.filter(c,function(t){return t.getPC()==e.target})[0];"active"==e.target.readyState||t.getConnected()===!0},M=function(){var e=Date.now(),t={asetId:status.getVideoAsetId(),exclusions:L(),updating:s};status.onPeerUpdateRequest(),i.askPeers(t,function(t,n){var a=Date.now()-e;if(status.onPeerUpdateResponse(a),!t&&n.length){for(var r=i.p2pInterface.isLive(),d=0;d<n.length;d++)n[d].isLive=r;var o=i.p2pInterface;m(n,o)}})},N=function(e){var t=Date.now(),n=t-d;e=d?e:!0,(n>conf.ASK_PEERS_INTERVAL&&c.length<conf.MIN_NUMBER_OF_PEERS||e)&&(M(),d=t,s=!0)},L=function(){var e,t=[];for(e=0;e<c.length;e++)t.push(c[e].getId());return t=t.concat(p,f)},O=function(e){T(e)},q=function(){_.forEach(c,function(e){e.getReadyToCommunicate()&&e.sendMessage("close")})};u.getPeerArray=function(){return c},u.getProtectedPeerArray=function(){for(var e=[],t=0;t<c.length;t++){var n=c[t],a={};for(var r in n)0==r.indexOf("get")&&(a[r]=n[r]);e.push(a)}return e},u.getEE=function(){return g},u.sendCloseMessage=q,v()};module.exports=PeerPool;


},{"../../conf":265,"./WebRTCFactory":285,"./peer":288,"./status":290,"eventemitter3":82,"underscore":297}],290:[function(require,module,exports){
  var EventEmitter=require("eventemitter3"),_=require("underscore"),conf=require("../../conf"),Status=function(){var e,n,t,o,r,a,u,c=!1,d=[],i=0,f=0,s=0,p=0,D=0,g=0,l=0,w=0,P=0,C=0,h=0,T=0,m=0,v=0,I=[],b=0,S=0,k=0,M=0,U=0,y=0,H=0,N=0,R=0,L=0,x=0,A=0,E=0,W=0,q=0,B=0,V=0,j=0,z=0,F=0,G=0,J=[],K=-1,O=this,Q=new EventEmitter,X=function(){setInterval(te.bind(O),1e3)},Y=function(){var o={avgDlSpeed:f,avgUpSpeed:D,cdnDoubleCheck:L,cdnDownloaded:m,connected:c,dataDownloadedTwice_CC:M,dataDownloadedTwice_CP:k,dataDownloadedTwice_HD:y,dataDownloadedTwice_HP:U,dataDownloadedTwice_M:H,dataDownloadedTwice_PC:S,dataDownloadedTwice_PP:b,dlSpeed:i,maxDlSpeed:s,maxUpSpeed:g,mpd:n,my_ids:d,nbRightHashDLM:E,nbRightHashP2P:x,nbWrongHashDLM:W,nbWrongHashP2P:A,p2pDoubleCheck:R,p2pDownloaded:l,p2pDownloadedNewAnalytics:w,p2pDownloadedHistory:I,p2pDownloadedUncorrected:P,p2pUploaded:C,period:t,rawDataDownloaded:h,rawDataUploaded:T,tobuffer:e,trackerMsgCount:q,trackerSgnCount:B,upSpeed:p};return o},Z=function(){var e,n,t,o;i&&(i>s&&(s=i),e=f?(f*r+i)/(r+1):i,n=r?r+1:1,r=n,f=e),p&&(p>g&&(g=p),t=D?(D*a+p)/(a+1):p,o=a?a+1:1,a=o,D=t)},$=function(n,t,o){var r=_.find(e,function(e){return e.asetId==t&&e.periodId==n&&e.representationId==o});return r?r:"no track found"},ee=function(e){var n=e.my_ids,t=e.updatedTracks;O.setMyIds(n),O.setTobuffer(t)},ne=function(){for(var n,t=0;n=e[t];t++)if("video"===n.type)return n.asetId},te=function(){var e,n=I,t=Date.now();for(n.push({p2pDownloaded:l,timeStamp:t}),e=n.length-1;e>=0;e--)t-n[e].timeStamp>1e3*conf.ABR_DEL_T&&n.splice(e,1)},oe=function(){var e,n,t,o,r=I;return r.length?(e=r[0],n=r[r.length-1],t=n.p2pDownloaded-e.p2pDownloaded,o=(n.timeStamp-e.timeStamp)/1e3,o>0&&t>0?t/o:0):0},re=function(){for(var n=0;n<e.length;n++)e[n]=_.pick(e[n],"type","asetId","representationId","currentSegment","currentTime","bufferLevelMax")},ae=function(){K++},ue=function(){F++},ce=function(){return F},de=function(e){G++,J.push(e)},ie=function(){return G},fe=function(){var e=0,n=0;if(J.length>0){for(var t=0;t<J.length;t++)e+=J[t];n=e/J.length}return J=[],n};O.getMyIds=function(){return d},O.setMyIds=function(e){d!==e&&(d=e)},O.getDataDownloadedTwice=function(){return o},O.getTobuffer=function(){return e},O.updateTobuffer=function(n){var t=n.map(function(e){return{type:e.type,asetId:e.coord.asetId,representationId:e.coord.repId,bufferLevelMax:e.bufferLevelMax}}),o=[];if(e)for(var r=0;r<t.length;r++)for(var a=0;a<e.length;a++){var u=e[a].type===t[r].type,c=t[r].representationId===e[a].representationId&&t[r].asetId===e[a].asetId;u&&!c&&(o.push({asetId:t[r].asetId,repId:t[r].representationId,asetId_from:e[a].asetId}),e[a].asetId=t[r].asetId,e[a].representationId=t[r].representationId)}else{for(var d=0;d<t.length;d++)t[d].currentSegment=-1;e=t}return o},O.updateStatusSegment=function(n){for(var t=0;t<e.length;t++)e[t].asetId===n.asetId&&e[t].representationId===n.repId&&(e[t].currentSegment=n.idPiece,e[t].currentTime=n.segment.time)},O.setTobuffer=function(n){if(n!==e){var t;if(e&&e.length&&(t=e[0].bufferLevelMax),e=n,t)for(var o=0;o<e.length;o++)e[o].bufferLevelMax=t}},O.getMPD=function(){return n},O.setMPD=function(e){n=e},O.getPeriod=function(){return t},O.setPeriod=function(e){t=e},O.getAttributes=function(){return Y()},O.getDlSpeed=function(){return i},O.setDlSpeed=function(e){i=e},O.getAvgDlSpeed=function(){return f},O.getMaxDlSpeed=function(){return s},O.getUpSpeed=function(){return p},O.setUpSpeed=function(e){p=e},O.getAvgUpSpeed=function(){return D},O.getMaxUpSpeed=function(){return g},O.getP2PDownloaded=function(){return l},O.setP2PDownloaded=function(e){"number"!=typeof e||isNaN(e)||(l=e)},O.getp2pDownloadedNewAnalytics=function(){return w},O.setp2pDownloadedNewAnalytics=function(e){"number"!=typeof e||isNaN(e)||(w=e)},O.getP2PDownloadedUncorrected=function(){return P},O.setP2PDownloadedUncorrected=function(e){P=e},O.getP2PUploaded=function(){return C},O.setP2PUploaded=function(e){C=e},O.getRawDataDownloaded=function(){return h},O.setRawDataDownloaded=function(e){h=e},O.getRawDataUploaded=function(){return T},O.setRawDataUploaded=function(e){T=e},O.getCDNDownloaded=function(){return m},O.setCDNDownloaded=function(e){m=e},O.getCdnCancelled=function(){return v},O.setCdnCancelled=function(e){v=e},O.getDataDownloadedTwice_PP=function(){return b},O.setDataDownloadedTwice_PP=function(e){b=e},O.getDataDownloadedTwice_PC=function(){return S},O.setDataDownloadedTwice_PC=function(e){S=e},O.getDataDownloadedTwice_CP=function(){return k},O.setDataDownloadedTwice_CP=function(e){k=e},O.getDataDownloadedTwice_CC=function(){return M},O.setDataDownloadedTwice_CC=function(e){M=e},O.getDataDownloadedTwice_HP=function(){return U},O.setDataDownloadedTwice_HP=function(e){U=e},O.getDataDownloadedTwice_HD=function(){return y},O.setDataDownloadedTwice_HD=function(e){y=e},O.getDataDownloadedTwice_M=function(){return H},O.setDataDownloadedTwice_M=function(e){H=e},O.getCdnDataDiscarded=function(){return N},O.setCdnDataDiscarded=function(e){N=e},O.getP2PDoubleCheck=function(){return R},O.setP2PDoubleCheck=function(e){R=e},O.getCDNDoubleCheck=function(){return L},O.setCDNDoubleCheck=function(e){L=e},O.getNbRightHashP2P=function(){return x},O.setNbRightHashP2P=function(e){x=e},O.getNbWrongHashP2P=function(){return A},O.setNbWrongHashP2P=function(e){A=e},O.getNbRightHashDLM=function(){return E},O.setNbRightHashDLM=function(e){E=e},O.getNbWrongHashDLM=function(){return W},O.setNbWrongHashDLM=function(e){W=e},O.getTrackerMsgCount=function(){return q},O.setTrackerMsgCount=function(e){q=e},O.getTrackerSgnCount=function(){return B},O.setTrackerSgnCount=function(e){B=e},O.getTrackerConnectionCount=function(){return V},O.incrementTrackerConnectionCount=function(){V++},O.getTrackerReconnectionCount=function(){return z},O.incrementTrackerReconnectionCount=function(){z++},O.getTrackerDeconnectionCount=function(){return j},O.incrementTrackerDeconnectionCount=function(){j++},O.getConnected=function(){return c},O.setConnected=function(e){e||re(),e!==c&&(c=e,Q.emit("change:connected"),e===!0&&Q.emit("tracker_ready"))},O.getEE=function(){return Q},O.getVideoAsetId=ne,O.computeMaxAndAvgSpeed=Z,O.getTrackByTrackInfos=$,O.updateStatus=ee,O.computeP2PThroughput=oe,O.setBufferLevel=function(e){u=e},O.getBufferLevel=function(){return u},O.incrementTrackSwitchCount=ae,O.getTrackSwitchCount=function(){return K},O.onPeerUpdateRequest=ue,O.getPeerUpdateRequestCount=ce,O.onPeerUpdateResponse=de,O.getPeerUpdateResponseCount=ie,O.getPeerUpdateAvgResponseTime=fe,X()},status=new Status;module.exports=status;


},{"../../conf":265,"eventemitter3":82,"underscore":297}],291:[function(require,module,exports){
  function HashWorker(){var a={mul32:function(a,t){var e=65535&t,s=t-e;return(s*a|0)+(e*a|0)|0},hashBytes:function(a,t,e){for(var s=3432918353,n=461845907,h=e,o=-4&t,r=0;o>r;r+=4){var d=255&a[r]|(255&a[r+1])<<8|(255&a[r+2])<<16|(255&a[r+3])<<24;d=this.mul32(d,s),d=(131071&d)<<15|d>>>17,d=this.mul32(d,n),h^=d,h=(524287&h)<<13|h>>>19,h=5*h+3864292196|0}switch(d=0,t%4){case 3:d=(255&a[o+2])<<16;case 2:d|=(255&a[o+1])<<8;case 1:d|=255&a[o],d=this.mul32(d,s),d=(131071&d)<<15|d>>>17,d=this.mul32(d,n),h^=d}return h^=t,h^=h>>>16,h=this.mul32(h,2246822507),h^=h>>>13,h=this.mul32(h,3266489909),h^=h>>>16}};self.onmessage=function(t){var e=new Uint8Array(t.data.segmentData),s=a.hashBytes(e,e.length,0).toString();t.data.create?self.postMessage({segmentData:t.data.segmentData,jobIndex:t.data.jobIndex,hash:s,create:!0},[t.data.segmentData]):s===t.data.hash?self.postMessage({segmentData:t.data.segmentData,hashMatch:!0,jobIndex:t.data.jobIndex,hash:s},[t.data.segmentData]):self.postMessage({segmentData:t.data.segmentData,hashMatch:!1,jobIndex:t.data.jobIndex,hash:s},[t.data.segmentData])}}module.exports=HashWorker;


},{}],292:[function(require,module,exports){
  "use strict";var HashWorker=require("./HashWorker"),status=require("../p2p/status"),SegmentHasher=function(e){var t,s=[],a=function(){var e=URL.createObjectURL(new Blob(["("+HashWorker.toString()+")()"],{type:"application/javascript"})),t=new Worker(e);return URL.revokeObjectURL(e),t},n=function(){t&&(t.terminate(),t=void 0)},r=function(e,a,n){var r=s.push({result:e,segment:a,cb:n})-1;t.postMessage({segmentData:e.response,jobIndex:r,create:!0},[e.response])},h=function(e,a,n,r){var h=s.push({result:e,segment:a,cbSuccess:n,cbError:r,dlm:!0})-1;t.postMessage({segmentData:e.response,hash:a.segment.hash,jobIndex:h},[e.response])},o=function(e,a,n){var r=s.push({chunkManager:e,segment:a,dlm:!1})-1;t.postMessage({segmentData:n,hash:a.segment.hash,jobIndex:r},[n])},g=function(){t=a(),t.onmessage=function(t){var a=s[t.data.jobIndex];delete s[t.data.jobIndex],t.data.create?(a.result.response=t.data.segmentData,e.p2pInterface.p2pMapController.setSegmentHash(a.segment,t.data.hash),a.cb(a.result,a.segment)):a.dlm?t.data.hashMatch?(status.setNbRightHashDLM(status.getNbRightHashDLM()+1),a.result.response=t.data.segmentData,a.cbSuccess(a.result,a.segment)):(status.setNbWrongHashDLM(status.getNbWrongHashDLM()+1),a.cbError(a.result,a.segment)):t.data.hashMatch?(status.setNbRightHashP2P(status.getNbRightHashP2P()+1),a.chunkManager.segment=new Uint8Array(t.data.segmentData),e.p2pDownloader.hashVerified(a.chunkManager,a.segment,t.data.segmentData)):(status.setNbWrongHashP2P(status.getNbWrongHashP2P()+1),e.p2pDownloader.wrongHash(a.segment))}};this.terminateWorker=n,this.createHash=r,this.checkHashDLM=h,this.checkHashP2P=o,g()};module.exports=SegmentHasher;


},{"../p2p/status":290,"./HashWorker":291}],293:[function(require,module,exports){
  exports.clone=function e(t){function E(e,t,E){var r,n,_={};for(r in t)n=t[r],r in e&&(e[r]===n||r in _&&_[r]===n)||(e[r]=E?E(n):n);return e}if(!t||"object"!=typeof t||"[object Function]"===Object.prototype.toString.call(t))return t;if(t.nodeType&&"cloneNode"in t)return t.cloneNode(!0);if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);var r,n,_;if(t instanceof Array)for(r=[],n=0,_=t.length;_>n;++n)n in t&&r.push(e(t[n]));else r=t.constructor?new t.constructor:{};return E(r,t,e)},exports.sortDescending=function(e,t){return t.bandwidth-e.bandwidth},exports.overloadConf=function(e,t){if(!t||void 0===t.ID_CLIENT)throw new Error("There must be a client ID in the option object");e.ID_CLIENT=t.ID_CLIENT,void 0!==t.RANGE_REQUEST_ALLOWED&&(e.RANGE_REQUEST_ALLOWED=t.RANGE_REQUEST_ALLOWED),t.FORCE_BANDWIDTH&&(e.FORCE_BANDWIDTH=t.FORCE_BANDWIDTH),t.DEFAULT_AUTOSWITCH&&(e.DEFAULT_AUTOSWITCH=t.DEFAULT_AUTOSWITCH),t.BUFFER&&(t.BUFFER.BUFFER_MARGIN&&(e.BUFFER.BUFFER_MARGIN=t.BUFFER.BUFFER_MARGIN),t.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER&&(e.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER=t.BUFFER.SOFT_TRACK_SWITCH_MIN_BUFFER),void 0!==t.BUFFER.FORCE_SWITCH_CLEAR_ALL&&(e.BUFFER.FORCE_SWITCH_CLEAR_ALL=t.BUFFER.FORCE_SWITCH_CLEAR_ALL),void 0!==t.BUFFER.ALWAYS_FORCE_SWITCH&&(e.BUFFER.ALWAYS_FORCE_SWITCH=t.BUFFER.ALWAYS_FORCE_SWITCH)),t.LIVE&&(void 0!==t.LIVE.DISTANCE_FROM_LIVE_EDGE&&(e.LIVE.DISTANCE_FROM_LIVE_EDGE=t.LIVE.DISTANCE_FROM_LIVE_EDGE),void 0!==t.LIVE.MIN_BUFFER_LEVEL&&(e.LIVE.MIN_BUFFER_LEVEL=t.LIVE.MIN_BUFFER_LEVEL),void 0!==t.LIVE.ALLOW_LIVE_DELAY&&(e.LIVE.ALLOW_LIVE_DELAY=t.LIVE.ALLOW_LIVE_DELAY)),"undefined"!=typeof t.ADD_QUERY_PARAM&&(e.ADD_QUERY_PARAM=t.ADD_QUERY_PARAM),void 0!==t.PLAYLIST_HLS_KEEP_LAST_LINES&&(e.PLAYLIST_HLS_KEEP_LAST_LINES=t.PLAYLIST_HLS_KEEP_LAST_LINES),void 0!==t.SS_IMPLICIT_AAC_HE&&(e.SS_IMPLICIT_AAC_HE=t.SS_IMPLICIT_AAC_HE),void 0!==t.DISPLAY_ERROR&&(e.DISPLAY_ERROR=t.DISPLAY_ERROR),void 0!==t.REPRESENTATION_NUMBER&&(e.REPRESENTATION_NUMBER=t.REPRESENTATION_NUMBER);var E={ALLOW_P2P:t.ALLOW_P2P,TRACKER_URL:t.TRACKER_URL,P2P_CACHE_MAX_SIZE:t.P2P_CACHE_MAX_SIZE,DISPLAY:t.DISPLAY,ID_CLIENT:t.ID_CLIENT,DEBUG:t.DEBUG};return E},exports.make_range=function(e,t){return t?"bytes="+e+"-"+t:"bytes="+e+"-"},exports.absURL=function(e,t){if(t.match(/^[a-z]*:\/\//))return t;var E;"/"==t[0]&&(t=t.slice(1,t.length));var r=e.lastIndexOf("/");return r+1<=e.length&&(E=e.slice(0,r+1)),E+t},exports.relToAbs=function(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname+t.search+t.hash},exports.parseUrl=function(e){var t=document.createElement("a");return t.href=e,t},exports.updateQueryStringParameter=function(e,t,E){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),n=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+E+"$2"):e+n+t+"="+E};var isInt=function(e){return"number"==typeof e&&e%1===0};exports.isInt=isInt,exports.isPosInt=function(e){return isInt(e)&&e>=0},exports.mapping=function(e){var t={};t.isLive=e.isLive,t.periods=[];for(var E,r=0;E=e.periods[r];r++){var n={};n.asets=[];for(var _,o=0;_=E.asets[o];o++){var i={};i.type=_.type,i.reps=[];for(var I,L=0;I=_.reps[L];L++){var s={};s.segments=[];for(var R,A=0;R=I.segments[A];A++){var F={id:R.id,size:R.size,offset:R.offset,duration:R.duration,time:R.time};s.segments.push(F)}i.reps.push(s)}n.asets.push(i)}t.periods.push(n)}return t},exports.segmentMapping=function(e){var t={};return t.periodId=e.periodId,t.asetId=e.asetId,t.repId=e.repId,t.idPiece=e.idPiece,e.segment&&(t.segment={id:e.segment.id,size:e.segment.size,offset:e.segment.offset,duration:e.segment.duration,time:e.segment.time}),t},exports.isNumeric=function(e){return"number"==typeof e&&!isNaN(e)};


},{}],294:[function(require,module,exports){
  "use strict";var isNumeric=require("../utils").isNumeric,Delta=function(){var e=0,r=function(r){if(isNumeric(r)){var t=r-e;return e=r,t}throw new TypeError("Delta object expects numerical values")};this.calcDelta=r};module.exports=Delta;


},{"../utils":293}],295:[function(require,module,exports){
  "use strict";module.exports={overrideDefaults:function(r,e){for(var o in r)r.hasOwnProperty(o)&&void 0!==e[o]&&(r[o]=e[o]);return r}};


},{}],296:[function(require,module,exports){
  !function(i,e){"use strict";var s="0.7.9",o="",r="?",n="function",a="undefined",t="object",w="string",l="major",d="model",p="name",c="type",u="vendor",m="version",f="architecture",g="console",b="mobile",h="tablet",v="smarttv",x="wearable",k="embedded",y={extend:function(i,e){for(var s in e)-1!=="browser cpu device engine os".indexOf(s)&&e[s].length%2===0&&(i[s]=e[s].concat(i[s]));return i},has:function(i,e){return"string"==typeof i?-1!==e.toLowerCase().indexOf(i.toLowerCase()):!1},lowerize:function(i){return i.toLowerCase()},major:function(i){return typeof i===w?i.split(".")[0]:e}},A={rgx:function(){for(var i,s,o,r,w,l,d,p=0,c=arguments;p<c.length&&!l;){var u=c[p],m=c[p+1];if(typeof i===a){i={};for(r in m)w=m[r],typeof w===t?i[w[0]]=e:i[w]=e}for(s=o=0;s<u.length&&!l;)if(l=u[s++].exec(this.getUA()))for(r=0;r<m.length;r++)d=l[++o],w=m[r],typeof w===t&&w.length>0?2==w.length?typeof w[1]==n?i[w[0]]=w[1].call(this,d):i[w[0]]=w[1]:3==w.length?typeof w[1]!==n||w[1].exec&&w[1].test?i[w[0]]=d?d.replace(w[1],w[2]):e:i[w[0]]=d?w[1].call(this,d,w[2]):e:4==w.length&&(i[w[0]]=d?w[3].call(this,d.replace(w[1],w[2])):e):i[w]=d?d:e;p+=2}return i},str:function(i,s){for(var o in s)if(typeof s[o]===t&&s[o].length>0){for(var n=0;n<s[o].length;n++)if(y.has(s[o][n],i))return o===r?e:o}else if(y.has(s[o],i))return o===r?e:o;return i}},E={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},S={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[p,m],[/\s(opr)\/([\w\.]+)/i],[[p,"Opera"],m],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium)\/([\w\.-]+)/i],[p,m],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[p,"IE"],m],[/(edge)\/((\d+)?[\w\.]+)/i],[p,m],[/(yabrowser)\/([\w\.]+)/i],[[p,"Yandex"],m],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],m],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[p,m],[/(dolfin)\/([\w\.]+)/i],[[p,"Dolphin"],m],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[p,"Chrome"],m],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[m,[p,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[m,[p,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[m,[p,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[m,[p,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[m,p],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[p,[m,A.str,E.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[p,m],[/(navigator|netscape)\/([\w\.-]+)/i],[[p,"Netscape"],m],[/fxios\/([\w\.-]+)/i],[m,[p,"Firefox"]],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[p,m]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,y.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[f,/ower/,"",y.lowerize]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[f,y.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[d,u,[c,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[d,[u,"Apple"],[c,h]],[/(apple\s{0,1}tv)/i],[[d,"Apple TV"],[u,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[u,d,[c,h]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[d,[u,"Amazon"],[c,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[d,A.str,E.device.amazon.model],[u,"Amazon"],[c,b]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[d,u,[c,b]],[/\((ip[honed|\s\w*]+);/i],[d,[u,"Apple"],[c,b]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[u,d,[c,b]],[/\(bb10;\s(\w+)/i],[d,[u,"BlackBerry"],[c,b]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[d,[u,"Asus"],[c,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[u,"Sony"],[d,"Xperia Tablet"],[c,h]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[u,"Sony"],[d,"Xperia Phone"],[c,b]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[u,d,[c,g]],[/android.+;\s(shield)\sbuild/i],[d,[u,"Nvidia"],[c,g]],[/(playstation\s[3portablevi]+)/i],[d,[u,"Sony"],[c,g]],[/(sprint\s(\w+))/i],[[u,A.str,E.device.sprint.vendor],[d,A.str,E.device.sprint.model],[c,b]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[u,d,[c,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[u,[d,/_/g," "],[c,b]],[/(nexus\s9)/i],[d,[u,"HTC"],[c,h]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[d,[u,"Microsoft"],[c,g]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[u,"Microsoft"],[c,b]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i],[d,[u,"Motorola"],[c,b]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[d,[u,"Motorola"],[c,h]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[u,"Samsung"],d,[c,h]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[u,"Samsung"],d,[c,b]],[/(samsung);smarttv/i],[u,d,[c,v]],[/\(dtv[\);].+(aquos)/i],[d,[u,"Sharp"],[c,v]],[/sie-(\w+)*/i],[d,[u,"Siemens"],[c,b]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[u,"Nokia"],d,[c,b]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[d,[u,"Acer"],[c,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[u,"LG"],d,[c,h]],[/(lg) netcast\.tv/i],[u,d,[c,v]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[d,[u,"LG"],[c,b]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[d,[u,"Lenovo"],[c,h]],[/linux;.+((jolla));/i],[u,d,[c,b]],[/((pebble))app\/[\d\.]+\s/i],[u,d,[c,x]],[/android.+;\s(glass)\s\d/i],[d,[u,"Google"],[c,x]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[d,/_/g," "],[u,"Xiaomi"],[c,b]],[/(mobile|tablet);.+rv\:.+gecko\//i],[[c,y.lowerize],u,d]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[m,[p,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[p,m],[/rv\:([\w\.]+).*(gecko)/i],[m,p]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[p,m],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[p,[m,A.str,E.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[p,"Windows"],[m,A.str,E.os.windows.version]],[/\((bb)(10);/i],[[p,"BlackBerry"],m],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[p,m],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[p,"Symbian"],m],[/\((series40);/i],[p],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[p,"Firefox OS"],m],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[p,m],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[p,"Chromium OS"],m],[/(sunos)\s?([\w\.]+\d)*/i],[[p,"Solaris"],m],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[p,m],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[p,"iOS"],[m,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[p,"Mac OS"],[m,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[p,m]]},T=function(e,s){if(!(this instanceof T))return new T(e,s).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:o),n=s?y.extend(S,s):S;return this.getBrowser=function(){var i=A.rgx.apply(this,n.browser);return i.major=y.major(i.version),i},this.getCPU=function(){return A.rgx.apply(this,n.cpu)},this.getDevice=function(){return A.rgx.apply(this,n.device)},this.getEngine=function(){return A.rgx.apply(this,n.engine)},this.getOS=function(){return A.rgx.apply(this,n.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(i){return r=i,this},this.setUA(r),this};T.VERSION=s,T.BROWSER={NAME:p,MAJOR:l,VERSION:m},T.CPU={ARCHITECTURE:f},T.DEVICE={MODEL:d,VENDOR:u,TYPE:c,CONSOLE:g,MOBILE:b,SMARTTV:v,TABLET:h,WEARABLE:x,EMBEDDED:k},T.ENGINE={NAME:p,VERSION:m},T.OS={NAME:p,VERSION:m},typeof exports!==a?(typeof module!==a&&module.exports&&(exports=module.exports=T),exports.UAParser=T):typeof define===n&&define.amd?define(function(){return T}):i.UAParser=T;var N=i.jQuery||i.Zepto;if(typeof N!==a){var z=new T;N.ua=z.getResult(),N.ua.get=function(){return z.getUA()},N.ua.set=function(i){z.setUA(i);var e=z.getResult();for(var s in e)N.ua[s]=e[s]}}}("object"==typeof window?window:this);


},{}],297:[function(require,module,exports){
  (function(){var n=this,t=n._,r={},e=Array.prototype,u=Object.prototype,i=Function.prototype,a=e.push,o=e.slice,c=e.concat,l=u.toString,f=u.hasOwnProperty,s=e.forEach,p=e.map,h=e.reduce,v=e.reduceRight,g=e.filter,d=e.every,m=e.some,y=e.indexOf,b=e.lastIndexOf,x=Array.isArray,w=Object.keys,_=i.bind,j=function(n){return n instanceof j?n:this instanceof j?void(this._wrapped=n):new j(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=j),exports._=j):n._=j,j.VERSION="1.6.0";var A=j.each=j.forEach=function(n,t,e){if(null==n)return n;if(s&&n.forEach===s)n.forEach(t,e);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(t.call(e,n[u],u,n)===r)return}else for(var a=j.keys(n),u=0,i=a.length;i>u;u++)if(t.call(e,n[a[u]],a[u],n)===r)return;return n};j.map=j.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(A(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var O="Reduce of empty array with no initial value";j.reduce=j.foldl=j.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=j.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(A(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(O);return r},j.reduceRight=j.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=j.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=j.keys(n);i=a.length}if(A(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(O);return r},j.find=j.detect=function(n,t,r){var e;return k(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},j.filter=j.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(A(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},j.reject=function(n,t,r){return j.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},j.every=j.all=function(n,t,e){t||(t=j.identity);var u=!0;return null==n?u:d&&n.every===d?n.every(t,e):(A(n,function(n,i,a){return(u=u&&t.call(e,n,i,a))?void 0:r}),!!u)};var k=j.some=j.any=function(n,t,e){t||(t=j.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,e):(A(n,function(n,i,a){return u||(u=t.call(e,n,i,a))?r:void 0}),!!u)};j.contains=j.include=function(n,t){return null==n?!1:y&&n.indexOf===y?-1!=n.indexOf(t):k(n,function(n){return n===t})},j.invoke=function(n,t){var r=o.call(arguments,2),e=j.isFunction(t);return j.map(n,function(n){return(e?t:n[t]).apply(n,r)})},j.pluck=function(n,t){return j.map(n,j.property(t))},j.where=function(n,t){return j.filter(n,j.matches(t))},j.findWhere=function(n,t){return j.find(n,j.matches(t))},j.max=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);var e=-(1/0),u=-(1/0);return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;o>u&&(e=n,u=o)}),e},j.min=function(n,t,r){if(!t&&j.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);var e=1/0,u=1/0;return A(n,function(n,i,a){var o=t?t.call(r,n,i,a):n;u>o&&(e=n,u=o)}),e},j.shuffle=function(n){var t,r=0,e=[];return A(n,function(n){t=j.random(r++),e[r-1]=e[t],e[t]=n}),e},j.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=j.values(n)),n[j.random(n.length-1)]):j.shuffle(n).slice(0,Math.max(0,t))};var E=function(n){return null==n?j.identity:j.isFunction(n)?n:j.property(n)};j.sortBy=function(n,t,r){return t=E(t),j.pluck(j.map(n,function(n,e,u){return{value:n,index:e,criteria:t.call(r,n,e,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=E(r),A(t,function(i,a){var o=r.call(e,i,a,t);n(u,o,i)}),u}};j.groupBy=F(function(n,t,r){j.has(n,t)?n[t].push(r):n[t]=[r]}),j.indexBy=F(function(n,t,r){n[t]=r}),j.countBy=F(function(n,t){j.has(n,t)?n[t]++:n[t]=1}),j.sortedIndex=function(n,t,r,e){r=E(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},j.toArray=function(n){return n?j.isArray(n)?o.call(n):n.length===+n.length?j.map(n,j.identity):j.values(n):[]},j.size=function(n){return null==n?0:n.length===+n.length?n.length:j.keys(n).length},j.first=j.head=j.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:o.call(n,0,t)},j.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},j.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},j.rest=j.tail=j.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},j.compact=function(n){return j.filter(n,j.identity)};var M=function(n,t,r){return t&&j.every(n,j.isArray)?c.apply(r,n):(A(n,function(n){j.isArray(n)||j.isArguments(n)?t?a.apply(r,n):M(n,t,r):r.push(n)}),r)};j.flatten=function(n,t){return M(n,t,[])},j.without=function(n){return j.difference(n,o.call(arguments,1))},j.partition=function(n,t){var r=[],e=[];return A(n,function(n){(t(n)?r:e).push(n)}),[r,e]},j.uniq=j.unique=function(n,t,r,e){j.isFunction(t)&&(e=r,r=t,t=!1);var u=r?j.map(n,r,e):n,i=[],a=[];return A(u,function(r,e){(t?e&&a[a.length-1]===r:j.contains(a,r))||(a.push(r),i.push(n[e]))}),i},j.union=function(){return j.uniq(j.flatten(arguments,!0))},j.intersection=function(n){var t=o.call(arguments,1);return j.filter(j.uniq(n),function(n){return j.every(t,function(t){return j.contains(t,n)})})},j.difference=function(n){var t=c.apply(e,o.call(arguments,1));return j.filter(n,function(n){return!j.contains(t,n)})},j.zip=function(){for(var n=j.max(j.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=j.pluck(arguments,""+r);return t},j.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},j.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=j.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(y&&n.indexOf===y)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},j.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(b&&n.lastIndexOf===b)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},j.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var R=function(){};j.bind=function(n,t){var r,e;if(_&&n.bind===_)return _.apply(n,o.call(arguments,1));if(!j.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));R.prototype=n.prototype;var u=new R;R.prototype=null;var i=n.apply(u,r.concat(o.call(arguments)));return Object(i)===i?i:u}},j.partial=function(n){var t=o.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===j&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},j.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return A(t,function(t){n[t]=j.bind(n[t],n)}),n},j.memoize=function(n,t){var r={};return t||(t=j.identity),function(){var e=t.apply(this,arguments);return j.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},j.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},j.defer=function(n){return j.delay.apply(j,[n,1].concat(o.call(arguments,1)))},j.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:j.now(),a=null,i=n.apply(e,u),e=u=null};return function(){var l=j.now();o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u),e=u=null):a||r.trailing===!1||(a=setTimeout(c,f)),i}},j.debounce=function(n,t,r){var e,u,i,a,o,c=function(){var l=j.now()-a;t>l?e=setTimeout(c,t-l):(e=null,r||(o=n.apply(i,u),i=u=null))};return function(){i=this,u=arguments,a=j.now();var l=r&&!e;return e||(e=setTimeout(c,t)),l&&(o=n.apply(i,u),i=u=null),o}},j.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},j.wrap=function(n,t){return j.partial(t,n)},j.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},j.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},j.keys=function(n){if(!j.isObject(n))return[];if(w)return w(n);var t=[];for(var r in n)j.has(n,r)&&t.push(r);return t},j.values=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},j.pairs=function(n){for(var t=j.keys(n),r=t.length,e=new Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},j.invert=function(n){for(var t={},r=j.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},j.functions=j.methods=function(n){var t=[];for(var r in n)j.isFunction(n[r])&&t.push(r);return t.sort()},j.extend=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},j.pick=function(n){var t={},r=c.apply(e,o.call(arguments,1));return A(r,function(r){r in n&&(t[r]=n[r])}),t},j.omit=function(n){var t={},r=c.apply(e,o.call(arguments,1));for(var u in n)j.contains(r,u)||(t[u]=n[u]);return t},j.defaults=function(n){return A(o.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},j.clone=function(n){return j.isObject(n)?j.isArray(n)?n.slice():j.extend({},n):n},j.tap=function(n,t){return t(n),n};var S=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof j&&(n=n._wrapped),t instanceof j&&(t=t._wrapped);var u=l.call(n);if(u!=l.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(j.isFunction(a)&&a instanceof a&&j.isFunction(o)&&o instanceof o)&&"constructor"in n&&"constructor"in t)return!1;r.push(n),e.push(t);var c=0,f=!0;if("[object Array]"==u){if(c=n.length,f=c==t.length)for(;c--&&(f=S(n[c],t[c],r,e)););}else{for(var s in n)if(j.has(n,s)&&(c++,!(f=j.has(t,s)&&S(n[s],t[s],r,e))))break;if(f){for(s in t)if(j.has(t,s)&&!c--)break;f=!c}}return r.pop(),e.pop(),f};j.isEqual=function(n,t){return S(n,t,[],[])},j.isEmpty=function(n){if(null==n)return!0;if(j.isArray(n)||j.isString(n))return 0===n.length;for(var t in n)if(j.has(n,t))return!1;return!0},j.isElement=function(n){return!(!n||1!==n.nodeType)},j.isArray=x||function(n){return"[object Array]"==l.call(n)},j.isObject=function(n){return n===Object(n)},A(["Arguments","Function","String","Number","Date","RegExp"],function(n){j["is"+n]=function(t){return l.call(t)=="[object "+n+"]"}}),j.isArguments(arguments)||(j.isArguments=function(n){return!(!n||!j.has(n,"callee"))}),"function"!=typeof/./&&(j.isFunction=function(n){return"function"==typeof n}),j.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},j.isNaN=function(n){return j.isNumber(n)&&n!=+n},j.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},j.isNull=function(n){return null===n},j.isUndefined=function(n){return void 0===n},j.has=function(n,t){return f.call(n,t)},j.noConflict=function(){return n._=t,this},j.identity=function(n){return n},j.constant=function(n){return function(){return n}},j.property=function(n){return function(t){return t[n]}},j.matches=function(n){return function(t){if(t===n)return!0;for(var r in n)if(n[r]!==t[r])return!1;return!0}},j.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},j.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},j.now=Date.now||function(){return(new Date).getTime()};var T={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};T.unescape=j.invert(T.escape);var I={escape:new RegExp("["+j.keys(T.escape).join("")+"]","g"),unescape:new RegExp("("+j.keys(T.unescape).join("|")+")","g")};j.each(["escape","unescape"],function(n){j[n]=function(t){return null==t?"":(""+t).replace(I[n],function(t){return T[n][t]})}}),j.result=function(n,t){if(null==n)return void 0;var r=n[t];return j.isFunction(r)?r.call(n):r},j.mixin=function(n){A(j.functions(n),function(t){var r=j[t]=n[t];j.prototype[t]=function(){var n=[this._wrapped];return a.apply(n,arguments),z.call(this,r.apply(j,n))}})};var N=0;j.uniqueId=function(n){var t=++N+"";return n?n+t:t},j.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\t|\u2028|\u2029/g;j.template=function(n,t,r){var e;r=j.defaults({},r,j.templateSettings);var u=new RegExp([(r.escape||q).source,(r.interpolate||q).source,(r.evaluate||q).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(D,function(n){return"\\"+B[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,j);var c=function(n){return e.call(this,n,j)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},j.chain=function(n){return j(n).chain()};var z=function(n){return this._chain?j(n).chain():n};j.mixin(j),A(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=e[n];j.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],z.call(this,r)}}),A(["concat","join","slice"],function(n){var t=e[n];j.prototype[n]=function(){return z.call(this,t.apply(this._wrapped,arguments))}}),j.extend(j.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return j})}).call(this);


},{}],298:[function(require,module,exports){
  function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(t,s,e){if(t&&isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}function urlFormat(t){return isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,s){return urlParse(t,!1,!0).resolve(s)}function urlResolveObject(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s}function isString(t){return"string"==typeof t}function isObject(t){return"object"==typeof t&&null!==t}function isNull(t){return null===t}function isNullOrUndefined(t){return null==t}var punycode=require("punycode");exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=require("querystring");Url.prototype.parse=function(t,s,e){if(!isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t;h=h.trim();var r=protocolPattern.exec(h);if(r){r=r[0];var o=r.toLowerCase();this.protocol=o,h=h.substr(r.length)}if(e||r||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===h.substr(0,2);!a||r&&hostlessProtocol[r]||(h=h.substr(2),this.slashes=!0)}if(!hostlessProtocol[r]&&(a||r&&!slashedProtocol[r])){for(var n=-1,i=0;i<hostEndingChars.length;i++){var l=h.indexOf(hostEndingChars[i]);-1!==l&&(-1===n||n>l)&&(n=l)}var c,u;u=-1===n?h.lastIndexOf("@"):h.lastIndexOf("@",n),-1!==u&&(c=h.slice(0,u),h=h.slice(u+1),this.auth=decodeURIComponent(c)),n=-1;for(var i=0;i<nonHostChars.length;i++){var l=h.indexOf(nonHostChars[i]);-1!==l&&(-1===n||n>l)&&(n=l)}-1===n&&(n=h.length),this.host=h.slice(0,n),h=h.slice(n),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var f=this.hostname.split(/\./),i=0,m=f.length;m>i;i++){var v=f[i];if(v&&!v.match(hostnamePartPattern)){for(var g="",y=0,d=v.length;d>y;y++)g+=v.charCodeAt(y)>127?"x":v[y];if(!g.match(hostnamePartPattern)){var P=f.slice(0,i),b=f.slice(i+1),j=v.match(hostnamePartStart);j&&(P.push(j[1]),b.unshift(j[2])),b.length&&(h="/"+b.join(".")+h),this.hostname=P.join(".");break}}}if(this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),!p){for(var O=this.hostname.split("."),q=[],i=0;i<O.length;++i){var x=O[i];q.push(x.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(x):x)}this.hostname=q.join(".")}var U=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+U,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!unsafeProtocol[o])for(var i=0,m=autoEscape.length;m>i;i++){var A=autoEscape[i],E=encodeURIComponent(A);E===A&&(E=escape(A)),h=h.split(A).join(E)}var w=h.indexOf("#");-1!==w&&(this.hash=h.substr(w),h=h.slice(0,w));var R=h.indexOf("?");if(-1!==R?(this.search=h.substr(R),this.query=h.substr(R+1),s&&(this.query=querystring.parse(this.query)),h=h.slice(0,R)):s&&(this.search="",this.query={}),h&&(this.pathname=h),slashedProtocol[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",x=this.search||"";this.path=U+x}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&isObject(this.query)&&Object.keys(this.query).length&&(o=querystring.stringify(this.query));var a=this.search||o&&"?"+o||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&r!==!1?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),a&&"?"!==a.charAt(0)&&(a="?"+a),e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),s+r+e+a+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}var e=new Url;if(Object.keys(this).forEach(function(t){e[t]=this[t]},this),e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(s){"protocol"!==s&&(e[s]=t[s])}),slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e;if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol])return Object.keys(t).forEach(function(s){e[s]=t[s]}),e.href=e.format(),e;if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),e.pathname=h.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var r=e.pathname||"",o=e.search||"";e.path=r+o}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var a=e.pathname&&"/"===e.pathname.charAt(0),n=t.host||t.pathname&&"/"===t.pathname.charAt(0),i=n||a||e.host&&t.pathname,l=i,c=e.pathname&&e.pathname.split("/")||[],h=t.pathname&&t.pathname.split("/")||[],u=e.protocol&&!slashedProtocol[e.protocol];if(u&&(e.hostname="",e.port=null,e.host&&(""===c[0]?c[0]=e.host:c.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),i=i&&(""===h[0]||""===c[0])),n)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,c=h;else if(h.length)c||(c=[]),c.pop(),c=c.concat(h),e.search=t.search,e.query=t.query;else if(!isNullOrUndefined(t.search)){if(u){e.hostname=e.host=c.shift();var p=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;p&&(e.auth=p.shift(),e.host=e.hostname=p.shift())}return e.search=t.search,e.query=t.query,isNull(e.pathname)&&isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!c.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var f=c.slice(-1)[0],m=(e.host||t.host)&&("."===f||".."===f)||""===f,v=0,g=c.length;g>=0;g--)f=c[g],"."==f?c.splice(g,1):".."===f?(c.splice(g,1),v++):v&&(c.splice(g,1),v--);if(!i&&!l)for(;v--;v)c.unshift("..");!i||""===c[0]||c[0]&&"/"===c[0].charAt(0)||c.unshift(""),m&&"/"!==c.join("/").substr(-1)&&c.push("");var y=""===c[0]||c[0]&&"/"===c[0].charAt(0);if(u){e.hostname=e.host=y?"":c.length?c.shift():"";var p=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;p&&(e.auth=p.shift(),e.host=e.hostname=p.shift())}return i=i||e.host&&c.length,i&&!y&&c.unshift(""),c.length?e.pathname=c.join("/"):(e.pathname=null,e.path=null),isNull(e.pathname)&&isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(s=s[0],":"!==s&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};


},{"punycode":68,"querystring":71}],299:[function(require,module,exports){
  var extractinit=function(t){for(var e=new DataView(t),r=0;r<t.byteLength;){var i=e.getUint32(r+4,!1);if(1936286840==i||1836019558==i)break;r+=e.getUint32(r,!1)}return new Uint8Array(t.slice(0,r))},parsesidx=function(t,e){for(var r=new DataView(t),i=0;1936286840!=r.getUint32(i+4,!1);)if(i+=r.getUint32(i,!1),i>=t.byteLength)throw"Could not find sidx";var n=r.getUint32(i,!1)+i;if(n>t.byteLength)throw"sidx terminates after array buffer";var a=r.getUint8(i+8);i+=12;var f=r.getUint32(i+4,!1);i+=8;var g,o;0==a?(g=r.getUint32(i,!1),o=r.getUint32(i+4,!1),i+=8):(g=(r.getUint32(i,!1)<<32)+r.getUint32(i+4,!1),o=(r.getUint32(i+8,!1)<<32)+r.getUint32(i+12,!1),i+=16),o+=n+(e||0);var U=r.getUint16(i+2,!1);i+=4;for(var s=o,d=g,v=[],h=0;U>h;h++){var u=r.getUint32(i,!1),w=2147483648&u;if(w)throw"Unhandled indirect reference";u=2147483647&u;var c=r.getUint32(i+4,!1);i+=12,v.push({size:u,offset:s,duration:c/f,time:d/f}),s+=u,d+=c}if(i!=n)throw"Error: final pos "+i+" differs from SIDX end "+n;return v};module.exports={parseSIDX:parsesidx,extractInit:extractinit};


},{}]},{},[1])
/**
 * HTML5 Media Controller - Wrapper for HTML5 Media API
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Srflash = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.MediaTechController.call(this, player, options, ready);

    var source = options['source'],

    //TODO: changed swfPath compared to what it was supposed to be. Check that (before was options['swf'])
      swfPath = player.options_.flash.streamrootswf,

    // Which element to embed in
      parentEl = options['parentEl'],

    // Create a temporary element to be replaced by swf object
      placeHolder = this.el_ = vjs.createEl('div', { id: player.id() + '_temp_flash' }),

    // Generate ID for swf object
      objId = player.id()+'_flash_api',

    // Store player options in local var for optimization
    // TODO: switch to using player methods instead of options
    // e.g. player.autoplay();
      playerOptions = player.options_,

    // Merge default flashvars with ones passed in to init
      flashVars = vjs.obj.merge({

        // SWF Callback Functions
        'readyFunction': 'videojs.Srflash.onReady',
        'eventProxyFunction': 'videojs.Srflash.onEvent',
        'errorEventProxyFunction': 'videojs.Srflash.onError',

        // Player Settings
        'autoplay': playerOptions.autoplay,
        'preload': playerOptions.preload,
        'loop': playerOptions.loop,
        'muted': playerOptions.muted

      }, options['flashVars']),

    // Merge default parames with ones passed in
      params = vjs.obj.merge({
        'wmode': 'opaque', // Opaque is needed to overlay controls, but can affect playback performance
        'bgcolor': '#000000' // Using bgcolor prevents a white flash when the object is loading
      }, options['params']),

    // Merge default attributes with ones passed in
      attributes = vjs.obj.merge({
        'id': objId,
        'name': objId, // Both ID and Name needed or swf to identifty itself
        'class': 'vjs-tech'
      }, options['attributes'])
      ;


    //Don't supply source to flash player, so that VJS's NetStream wrapper is configured for appendBytes mode
    flashVars['src'] = null;
    /*
     if (source) {
     if (source.type && vjs.Srflash.isStreamingType(source.type)) {
     var parts = vjs.Srflash.streamToParts(source.src);
     flashVars['rtmpConnection'] = encodeURIComponent(parts.connection);
     flashVars['rtmpStream'] = encodeURIComponent(parts.stream);
     }
     else {
     flashVars['src'] = encodeURIComponent(vjs.getAbsoluteURL(source.src));
     }
     }
     */

    // Add placeholder to player div
    vjs.insertFirst(placeHolder, parentEl);

    // Having issues with Flash reloading on certain page actions (hide/resize/fullscreen) in certain browsers
    // This allows resetting the playhead when we catch the reload
    if (options['startTime']) {
      this.ready(function(){
        this.load();
        this.play();
        this.currentTime(options['startTime']);
      });
    }

    // Flash iFrame Mode
    // In web browsers there are multiple instances where changing the parent element or visibility of a plugin causes the plugin to reload.
    // - Firefox just about always. https://bugzilla.mozilla.org/show_bug.cgi?id=90268 (might be fixed by version 13)
    // - Webkit when hiding the plugin
    // - Webkit and Firefox when using requestFullScreen on a parent element
    // Loading the flash plugin into a dynamically generated iFrame gets around most of these issues.
    // Issues that remain include hiding the element and requestFullScreen in Firefox specifically

    // There's on particularly annoying issue with this method which is that Firefox throws a security error on an offsite Flash object loaded into a dynamically created iFrame.
    // Even though the iframe was inserted into a page on the web, Firefox + Flash considers it a local app trying to access an internet file.
    // I tried mulitple ways of setting the iframe src attribute but couldn't find a src that worked well. Tried a real/fake source, in/out of domain.
    // Also tried a method from stackoverflow that caused a security error in all browsers. http://stackoverflow.com/questions/2486901/how-to-set-document-domain-for-a-dynamically-generated-iframe
    // In the end the solution I found to work was setting the iframe window.location.href right before doing a document.write of the Flash object.
    // The only downside of this it seems to trigger another http request to the original page (no matter what's put in the href). Not sure why that is.

    // NOTE (2012-01-29): Cannot get Firefox to load the remote hosted SWF into a dynamically created iFrame
    // Firefox 9 throws a security error, unleess you call location.href right before doc.write.
    //    Not sure why that even works, but it causes the browser to look like it's continuously trying to load the page.
    // Firefox 3.6 keeps calling the iframe onload function anytime I write to it, causing an endless loop.

    if (options['iFrameMode'] === true && !vjs.IS_FIREFOX) {

      // Create iFrame with vjs-tech class so it's 100% width/height
      var iFrm = vjs.createEl('iframe', {
        'id': objId + '_iframe',
        'name': objId + '_iframe',
        'className': 'vjs-tech',
        'scrolling': 'no',
        'marginWidth': 0,
        'marginHeight': 0,
        'frameBorder': 0
      });

      // Update ready function names in flash vars for iframe window
      flashVars['readyFunction'] = 'ready';
      flashVars['eventProxyFunction'] = 'events';
      flashVars['errorEventProxyFunction'] = 'errors';

      // Tried multiple methods to get this to work in all browsers

      // Tried embedding the flash object in the page first, and then adding a place holder to the iframe, then replacing the placeholder with the page object.
      // The goal here was to try to load the swf URL in the parent page first and hope that got around the firefox security error
      // var newObj = vjs.Flash.embed(options['swf'], placeHolder, flashVars, params, attributes);
      // (in onload)
      //  var temp = vjs.createEl('a', { id:'asdf', innerHTML: 'asdf' } );
      //  iDoc.body.appendChild(temp);

      // Tried embedding the flash object through javascript in the iframe source.
      // This works in webkit but still triggers the firefox security error
      // iFrm.src = 'javascript: document.write('"+vjs.Flash.getEmbedCode(options['swf'], flashVars, params, attributes)+"');";

      // Tried an actual local iframe just to make sure that works, but it kills the easiness of the CDN version if you require the user to host an iframe
      // We should add an option to host the iframe locally though, because it could help a lot of issues.
      // iFrm.src = "iframe.html";

      // Wait until iFrame has loaded to write into it.
      vjs.on(iFrm, 'load', vjs.bind(this, function(){

        var iDoc,
          iWin = iFrm.contentWindow;

        // The one working method I found was to use the iframe's document.write() to create the swf object
        // This got around the security issue in all browsers except firefox.
        // I did find a hack where if I call the iframe's window.location.href='', it would get around the security error
        // However, the main page would look like it was loading indefinitely (URL bar loading spinner would never stop)
        // Plus Firefox 3.6 didn't work no matter what I tried.
        // if (vjs.USER_AGENT.match('Firefox')) {
        //   iWin.location.href = '';
        // }

        // Get the iFrame's document depending on what the browser supports
        iDoc = iFrm.contentDocument ? iFrm.contentDocument : iFrm.contentWindow.document;

        // Tried ensuring both document domains were the same, but they already were, so that wasn't the issue.
        // Even tried adding /. that was mentioned in a browser security writeup
        // document.domain = document.domain+'/.';
        // iDoc.domain = document.domain+'/.';

        // Tried adding the object to the iframe doc's innerHTML. Security error in all browsers.
        // iDoc.body.innerHTML = swfObjectHTML;

        // Tried appending the object to the iframe doc's body. Security error in all browsers.
        // iDoc.body.appendChild(swfObject);

        // Using document.write actually got around the security error that browsers were throwing.
        // Again, it's a dynamically generated (same domain) iframe, loading an external Flash swf.
        // Not sure why that's a security issue, but apparently it is.
        iDoc.write(vjs.Srflash.getEmbedCode(swfPath, flashVars, params, attributes));

        // Setting variables on the window needs to come after the doc write because otherwise they can get reset in some browsers
        // So far no issues with swf ready event being called before it's set on the window.
        iWin['player'] = this.player_;

        // Create swf ready function for iFrame window
        iWin['ready'] = vjs.bind(this.player_, function(currSwf){
          var el = iDoc.getElementById(currSwf),
            player = this,
            tech = player.tech;

          // Update reference to playback technology element
          tech.el_ = el;

          // Make sure swf is actually ready. Sometimes the API isn't actually yet.
          vjs.Srflash.checkReady(tech);
        });

        // Create event listener for all swf events
        iWin['events'] = vjs.bind(this.player_, function(swfID, eventName){
          var player = this;
          if (player && player.techName === 'flash') {
            player.trigger(eventName);
          }
        });

        // Create error listener for all swf errors
        iWin['errors'] = vjs.bind(this.player_, function(swfID, eventName){
          vjs.log('Flash Error', eventName);
        });

      }));

      // Replace placeholder with iFrame (it will load now)
      placeHolder.parentNode.replaceChild(iFrm, placeHolder);

      // If not using iFrame mode, embed as normal object
    } else {
      vjs.Srflash.embed(swfPath, placeHolder, flashVars, params, attributes);
    }
  }
});

vjs.Srflash.prototype.dispose = function(){
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Srflash.prototype.play = function(){
  this.aDash.play();
};

vjs.Srflash.prototype.pause = function(){
  this.aDash.pause();
};

vjs.Srflash.prototype.setCurrentTime = function(time){
  this.aDash.seek(time);
};

vjs.Srflash.prototype.currentTime = function(){
  return this.aDash.getCurrentTime();
};

vjs.Srflash.prototype.src = function(src){
  if (vjs.Srflash.isStreamingSrc(src)) {
    src = vjs.Srflash.streamToParts(src);
    this.setRtmpConnection(src.connection);
    this.setRtmpStream(src.stream);
  }
  else {
    // Make sure source URL is abosolute.
    src = vjs.getAbsoluteURL(src);
    this.el_.vjs_src(src);
  }

  // Currently the SWF doesn't autoplay if you load a source later.
  // e.g. Load player w/ no source, wait 2s, set src.
  if (this.player_.autoplay()) {
    var tech = this;
    setTimeout(function(){ tech.play(); }, 0);
  }
};

vjs.Srflash.prototype.currentSrc = function(){
  var src = this.el_.vjs_getProperty('currentSrc');
  // no src, check and see if RTMP
  if (src == null) {
    var connection = this.rtmpConnection(),
      stream = this.rtmpStream();

    if (connection && stream) {
      src = vjs.Srflash.streamFromParts(connection, stream);
    }
  }
  return src;
};

vjs.Srflash.prototype.load = function(){
  this.el_.vjs_load();
};

vjs.Srflash.prototype.poster = function(){
  this.el_.vjs_getProperty('poster');
};

vjs.Srflash.prototype.buffered = function(){
  return this.aDash.getBuffered();
};

vjs.Srflash.prototype.supportsFullScreen = function(){
  return false; // Flash does not allow fullscreen through javascript
};

vjs.Srflash.prototype.enterFullScreen = function(){
  return false;
};


// Create setters and getters for attributes
var api = vjs.Srflash.prototype,
  readWrite = 'rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted'.split(','),
  readOnly = 'error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks'.split(',');
// Overridden: buffered

/**
 * @this {*}
 */
var createSetter = function(attr){
  var attrUpper = attr.charAt(0).toUpperCase() + attr.slice(1);
  api['set'+attrUpper] = function(val){ return this.el_.vjs_setProperty(attr, val); };
};

/**
 * @this {*}
 */
var createGetter = function(attr){
  api[attr] = function(){ return this.el_.vjs_getProperty(attr); };
};

(function(){
  var i;
  // Create getter and setters for all read/write attributes
  for (i = 0; i < readWrite.length; i++) {
    createGetter(readWrite[i]);
    createSetter(readWrite[i]);
  }

  // Create getters for read-only attributes
  for (i = 0; i < readOnly.length; i++) {
    createGetter(readOnly[i]);
  }
})();

/* Flash Support Testing -------------------------------------------------------- */

vjs.Srflash.isSupported = function(){
  return (vjs.Srflash.version()[0] >= 10)&&(window.Streamroot.isStreamrootFlashSupported());
};

vjs.Srflash.canPlaySource = function(srcObj){
  if (srcObj.type in vjs.Srflash.formats || srcObj.type in vjs.Srflash.streamingFormats) { return 'maybe'; }
};

vjs.Srflash.formats = {
  'video/dash': 'DASH',
  'application/x-mpegurl': 'HLS',
  'video/smooth': 'SMOOTH'
};

vjs.Srflash.streamingFormats = {
};

vjs.Srflash['onReady'] = function(currSwf){
  var el = vjs.el(currSwf);

  // Get player from box
  // On firefox reloads, el might already have a player
  var player = el['player'] || el.parentNode['player'],
    tech = player.tech;

  // Reference player on tech element
  el['player'] = player;

  // Update reference to playback technology element
  tech.el_ = el;

  vjs.Srflash.checkReady(tech);
};

// The SWF isn't alwasy ready when it says it is. Sometimes the API functions still need to be added to the object.
// If it's not ready, we set a timeout to check again shortly.
vjs.Srflash.checkReady = function(tech){
  //TODO: call ready on our API?

  // Check if API property exists
  if (tech.el().vjs_getProperty) {

    var srapi = window.Streamroot.streamrootAPI;
    console.log('MPEG-DASH Module Loading');

    //TODO: replace dummy event_handlers
    var event_handlers = {
      onMetaData: function (tracklist){
        tech.onMetaData.call(tech, tracklist);
      }
    };
    tech.aDash = new srapi(tech.el_, tech.options_.source.src, event_handlers, tech.player_.options_.sr_options);

    // If so, tell tech it's ready
    tech.triggerReady();

    // Otherwise wait longer.
  } else {

    setTimeout((function(){
      vjs.Srflash.checkReady(tech);
    }).bind(this), 50);

  }
};

var eventQueue = [];

// Trigger events from the swf on the player
vjs.Srflash['onEvent'] = function(swfID, eventName){
  var player = vjs.el(swfID)['player'];
  console.info(eventName);
  console.info(player);

  //At the initialization, player is not always initialized, so important events might be missed (like the one triggering the removal of the poster)
  //This is a HACK to queue them and try to send them right before the next event
  if (!player) {
    eventQueue.push(eventName);
  } else if (eventQueue.length > 0) {
    for (var i=0; i<eventQueue.length; i++) {
      player.trigger(eventQueue[i]);
      console.info("triggering queued event" +eventQueue[i]);
    }
    eventQueue = [];
  }
  player.trigger(eventName);
};

// Log errors from the swf
vjs.Srflash['onError'] = function(swfID, err){
  var player = vjs.el(swfID)['player'];
  player.trigger('error');
  vjs.log('Flash Error', err, swfID);
};

// Flash Version Check
vjs.Srflash.version = function(){
  var version = '0,0,0';

  // IE
  try {
    version = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];

    // other browsers
  } catch(e) {
    try {
      if (navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){
        version = (navigator.plugins['Shockwave Flash 2.0'] || navigator.plugins['Shockwave Flash']).description.replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];
      }
    } catch(err) {}
  }
  return version.split(',');
};

// Flash embedding method. Only used in non-iframe mode
vjs.Srflash.embed = function(swf, placeHolder, flashVars, params, attributes){
  var code = vjs.Srflash.getEmbedCode(swf, flashVars, params, attributes),

  // Get element by embedding code and retrieving created element
    obj = vjs.createEl('div', { innerHTML: code }).childNodes[0],

    par = placeHolder.parentNode
    ;

  placeHolder.parentNode.replaceChild(obj, placeHolder);

  // IE6 seems to have an issue where it won't initialize the swf object after injecting it.
  // This is a dumb fix
  var newObj = par.childNodes[0];
  setTimeout(function(){
    newObj.style.display = 'block';
  }, 1000);

  return obj;

};

vjs.Srflash.getEmbedCode = function(swf, flashVars, params, attributes){

  var objTag = '<object type="application/x-shockwave-flash"',
    flashVarsString = '',
    paramsString = '',
    attrsString = '';

  // Convert flash vars to string
  if (flashVars) {
    vjs.obj.each(flashVars, function(key, val){
      flashVarsString += (key + '=' + val + '&amp;');
    });
  }

  // Add swf, flashVars, and other default params
  params = vjs.obj.merge({
    'movie': swf,
    'flashvars': flashVarsString,
    'allowScriptAccess': 'always', // Required to talk to swf
    'allowNetworking': 'all' // All should be default, but having security issues.
  }, params);

  // Create param tags string
  vjs.obj.each(params, function(key, val){
    paramsString += '<param name="'+key+'" value="'+val+'" />';
  });

  attributes = vjs.obj.merge({
    // Add swf to attributes (need both for IE and Others to work)
    'data': swf,

    // Default to 100% width/height
    'width': '100%',
    'height': '100%'

  }, attributes);

  // Create Attributes string
  vjs.obj.each(attributes, function(key, val){
    attrsString += (key + '="' + val + '" ');
  });

  return objTag + attrsString + '>' + paramsString + '</object>';
};

vjs.Srflash.streamFromParts = function(connection, stream) {
  return connection + '&' + stream;
};

vjs.Srflash.streamToParts = function(src) {
  var parts = {
    connection: '',
    stream: ''
  };

  if (! src) {
    return parts;
  }

  // Look for the normal URL separator we expect, '&'.
  // If found, we split the URL into two pieces around the
  // first '&'.
  var connEnd = src.indexOf('&');
  var streamBegin;
  if (connEnd !== -1) {
    streamBegin = connEnd + 1;
  }
  else {
    // If there's not a '&', we use the last '/' as the delimiter.
    connEnd = streamBegin = src.lastIndexOf('/') + 1;
    if (connEnd === 0) {
      // really, there's not a '/'?
      connEnd = streamBegin = src.length;
    }
  }
  parts.connection = src.substring(0, connEnd);
  parts.stream = src.substring(streamBegin, src.length);

  return parts;
};

vjs.Srflash.isStreamingType = function(srcType) {
  return srcType in vjs.Srflash.streamingFormats;
};

// RTMP has four variations, any string starting
// with one of these protocols should be valid
vjs.Srflash.RTMP_RE = /^rtmp[set]?:\/\//i;

vjs.Srflash.isStreamingSrc = function(src) {
  return vjs.Srflash.RTMP_RE.test(src);
};

videojs.Srflash.prototype.onMetaData = function(trackList) {
  //removed the different quality buttons

  console.log('onMetaDataReceived');
  //console.log(trackList);
  var audiotracksinfos = [];
  var videotracksinfos = [];
  for(var i=0;i<trackList.length;i++) {
    trackList[i].bitrate = (trackList[i].bandwidth/1000).toFixed(0);
    //console.log(trackList[i]);
    if(trackList[i].type == 'audio') {
      audiotracksinfos.push(trackList[i]);
    } else if(trackList[i].type =='video') {
      videotracksinfos.push(trackList[i]);
    }
  }
  if(audiotracksinfos.length) {
    var audioButton = new videojs.AudioButton(this.player_,audiotracksinfos);
    this.player_.controlBar.addChild(audioButton);
  }
  if(videotracksinfos.length) {
    var videoButton = new videojs.VideoButton(this.player_,videotracksinfos);
    this.player_.controlBar.addChild(videoButton);
  }
};
(function(videojs) {

  videojs.Streamroot = videojs.MediaTechController.extend({

    /** @constructor */
    init: function(player, options, ready) {

      // ///////////////////////////////////////
      // RODI : CopiÃ© depuis la tech HTML5

      videojs.MediaTechController.call(this, player, options, ready);

      // In iOS, if you move a video element in the DOM, it breaks video playback.
      this.features['movingMediaElementInDOM'] = !videojs.IS_IOS;

      // HTML video is able to automatically resize when going to fullscreen
      this.features['fullscreenResize'] = true;

      var source = options['source'];


      // If the element source is already set, we may have missed the loadstart event, and want to trigger it.
      // We don't want to set the source again and interrupt playback.
      if (source && this.el_.currentSrc === source.src && this.el_.networkState > 0) {
        player.trigger('loadstart');

        // Otherwise set the source if one was provided.
      } else if (source) {
        this.el_.src = source.src;
      }

      // ///////////////////////////////////////// ///////////////////////////////////////

      this.player_ = player;
      this.options_ = options;

      console.log("Streamroot MPEG-DASH Tech for VideoJS!");

      this.event_handlers = {
        onMetaData: videojs.Streamroot.onMetaData.bind(this),
        onBuffering: videojs.Streamroot.onBuffering.bind(this),
        onPlaying: videojs.Streamroot.onPlaying.bind(this),
        onFinish: videojs.Streamroot.onFinish.bind(this),
        onSpaceBar: videojs.Streamroot.onSpaceBar.bind(this),
        onKeyForward: videojs.Streamroot.onKeyForward.bind(this),
        onKeyRewind: videojs.Streamroot.onKeyRewind.bind(this)
      };

      /*require.config({
       baseUrl: this.player_.options_.DASHR_API
       })
       require(['api'], videojs.Streamroot.onReady.bind(this));*/

      // Maniere assez sale de mettre l'autoplay
      this.player_.ready(videojs.Streamroot.CheckAutoplay.bind(this));
      this.setupTriggers();


      // got from old onREady function
      var api = window.Streamroot.streamrootAPI;
      console.log('MPEG-DASH Module Loading');
      this.aDash = new api(this.el_, this.options_.source.src, this.event_handlers, this.player_.options_.sr_options);

      //this.player_.triggerReady();
      // histoire de setTimeout pas claire ! Hack dangereux...
      setTimeout(this.triggerReady.bind(this), 100);
    }
  });

  videojs.Streamroot.prototype.dispose = function() {
    videojs.MediaTechController.prototype.dispose.call(this);
  };

  videojs.Streamroot.prototype.setupTriggers = function() {
    for (var i = videojs.Streamroot.Events.length - 1; i >= 0; i--) {
      videojs.on(this.el_, videojs.Streamroot.Events[i], videojs.bind(this.player_, this.eventHandler));
    }
  };

  videojs.Streamroot.prototype.eventHandler = function(e) {
    this.trigger(e);
    e.stopPropagation();
  };

  videojs.Streamroot.prototype.createEl = function() {
    var player = this.player_,
    // If possible, reuse original tag for HTML5 playback technology element
      el = player.tag,
      newEl,
      clone;

    // Check if this browser supports moving the element into the box.
    // On the iPhone video will break if you move the element,
    // So we have to create a brand new element.
    if (!el || this.features['movingMediaElementInDOM'] === false) {
      // If the original tag is still there, clone and remove it.
      if (el) {
        clone = el.cloneNode(false);
        videojs.Streamroot.disposeMediaElement(el);
        el = clone;
        player.tag = null;
      } else {
        el = videojs.createEl('video', {
          id: player.id() + '_dashr_api',
          className: 'vjs-tech'
        });
      }
      // associate the player with the new tag
      el['player'] = player;
      videojs.insertFirst(el, player.el());
    }

    // Update specific tag settings, in case they were overridden
    var attrs = ['autoplay', 'preload', 'loop', 'muted'];
    for (var i = attrs.length - 1; i >= 0; i--) {
      var attr = attrs[i];
      if (player.options_[attr] !== null) {
        el[attr] = player.options_[attr];
      }
    }
    return el;
  };

  videojs.Streamroot.prototype.play = function() {
    this.aDash.play(); //SR: not sure if useful to use aDash here
    this.player_.trigger('play');
  };
  videojs.Streamroot.prototype.pause = function() {
    if (!this.el_.seeking) {
      this.aDash.pause(); //SR: not sure if useful to use aDash here
      this.player_.trigger('pause');
    }
  };
  videojs.Streamroot.prototype.paused = function() {
    return this.el_.paused;
  }; //ne pas pauser si on est en train de seeker
  videojs.Streamroot.prototype.currentTime = function() {
    return this.el_.currentTime;
  };
  videojs.Streamroot.prototype.setCurrentTime = function(seconds) {
    this.el_.currentTime = seconds;
  };

  videojs.Streamroot.prototype.duration = function() {
    return this.el_.duration || 0;
  };
  videojs.Streamroot.prototype.buffered = function() {
    var r = this.el_.buffered;
    //video-js doesn't handle buffer ranges with multiranges
    var max_time = this.getMaxTime(r);
    return videojs.createTimeRange(0, max_time);
  };

  videojs.Streamroot.prototype.getMaxTime = function(buf) {
    for (var i = 0; i < buf.length; i++) {
      if (buf.start(i) <= this.currentTime() && this.currentTime() <= buf.end(i)) {
        return buf.end(i);
      }
    }
    return this.currentTime();
  };

  videojs.Streamroot.prototype.volume = function() {
    return this.el_.volume;
  };
  videojs.Streamroot.prototype.setVolume = function(percentAsDecimal) {
    this.el_.volume = percentAsDecimal;
  };
  videojs.Streamroot.prototype.muted = function() {
    return this.el_.muted;
  };
  videojs.Streamroot.prototype.setMuted = function(muted) {
    this.el_.muted = muted;
  };

  videojs.Streamroot.prototype.width = function() {
    return this.el_.offsetWidth;
  };
  videojs.Streamroot.prototype.height = function() {
    return this.el_.offsetHeight;
  };

  videojs.Streamroot.prototype.src = function(src) {
    this.el_.src = src;
  };
  videojs.Streamroot.prototype.load = function() {
    this.el_.load();
  };
  videojs.Streamroot.prototype.currentSrc = function() {
    return this.el_.currentSrc;
  };

  videojs.Streamroot.prototype.preload = function() {
    return this.el_.preload;
  };
  videojs.Streamroot.prototype.setPreload = function(val) {
    this.el_.preload = val;
  };
  videojs.Streamroot.prototype.autoplay = function() {
    return this.el_.autoplay;
  };
  videojs.Streamroot.prototype.setAutoplay = function(val) {
    this.el_.autoplay = val;
  };
  videojs.Streamroot.prototype.loop = function() {
    return this.el_.loop;
  };
  videojs.Streamroot.prototype.setLoop = function(val) {
    this.el_.loop = val;
  };

  videojs.Streamroot.prototype.error = function() {
    return this.el_.error;
  };
  // networkState= function(){ return this.el.networkState; },
  // readyState= function(){ return this.el.readyState; },
  videojs.Streamroot.prototype.seeking = function() {
    return this.el_.seeking;
  };
  // initialTime= function(){ return this.el.initialTime; },
  // startOffsetTime= function(){ return this.el.startOffsetTime; },
  // played= function(){ return this.el.played; },
  // seekable= function(){ return this.el.seekable; },
  videojs.Streamroot.prototype.ended = function() {
    return this.el_.ended;
  };
  // videoTracks= function(){ return this.el.videoTracks; },
  // audioTracks= function(){ return this.el.audioTracks; },
  // videoWidth= function(){ return this.el.videoWidth; },
  // videoHeight= function(){ return this.el.videoHeight; },
  // textTracks= function(){ return this.el.textTracks; },
  // defaultPlaybackRate= function(){ return this.el.defaultPlaybackRate; },
  // playbackRate= function(){ return this.el.playbackRate; },
  // mediaGroup= function(){ return this.el.mediaGroup; },
  // controller= function(){ return this.el.controller; },
  videojs.Streamroot.prototype.controls = function() {
    return this.player_.options_.controls;
  };
  videojs.Streamroot.prototype.defaultMuted = function() {
    return this.el_.defaultMuted;
  };
  videojs.Streamroot.prototype.supportsFullScreen = function() {
    if (typeof this.el_.webkitEnterFullScreen == 'function') {

      // Seems to be broken in Chromium/Chrome && Safari in Leopard
      if (/Android/.test(videojs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(videojs.USER_AGENT)) {
        return true;
      }
    }
    return false;
  };

  videojs.Streamroot.prototype.enterFullScreen = function() {
    var video = this.el_;
    if (video.paused && video.networkState <= video.HAVE_METADATA) {
      // attempt to prime the video element for programmatic access
      // this isn't necessary on the desktop but shouldn't hurt
      this.el_.play();

      // playing and pausing synchronously during the transition to fullscreen
      // can get iOS ~6.1 devices into a play/pause loop
      setTimeout(function() {
        video.pause();
        video.webkitEnterFullScreen();
      }, 0);
    } else {
      video.webkitEnterFullScreen();
    }
  };
  videojs.Streamroot.prototype.exitFullScreen = function() {
    this.el_.webkitExitFullScreen();
  };



  /* StreamrootDash Support Testing -------------------------------------------------------- */

  videojs.Streamroot.isSupported = function() {
    // voir api.js
    return window.Streamroot.isStreamrootHtml5Supported();
  };

  videojs.Streamroot.canPlaySource = function(srcObj) {
    if (srcObj.type in vjs.Streamroot.formats || srcObj.type in vjs.Streamroot.streamingFormats) { return 'maybe'; }
  };

  videojs.Streamroot.formats = {
    'video/dash': 'DASH',
    'video/smooth': 'SMOOTH'
  };

  videojs.Streamroot.streamingFormats = {
  };

  // List of all HTML5 events (various uses).
  videojs.Streamroot.Events = 'loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,ratechange,volumechange'.split(','); // tous sauf play et pause pour pouvoir controler les etat reels de lecture/buffering.

  videojs.Streamroot.disposeMediaElement = function(el) {
    if (!el) {
      return;
    }

    el['player'] = null;

    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }

    // remove any child track or source nodes to prevent their loading
    while (el.hasChildNodes()) {
      el.removeChild(el.firstChild);
    }

    // remove any src reference. not setting `src=''` because that causes a warning
    // in firefox
    el.removeAttribute('src');

    // force the media element to update its loading state by calling load()
    if (typeof el.load === 'function') {
      el.load();
    }
  };

  // HTML5 Feature detection and Device Fixes --------------------------------- //

  // Override Android 2.2 and less canPlayType method which is broken
  if (videojs.IS_OLD_ANDROID) {
    document.createElement('video').constructor.prototype.canPlayType = function(type) {
      return (type && type.toLowerCase().indexOf('video/mp4') != -1) ? 'maybe' : '';
    };
  }

  // Keyboard Shortcuts ---------------------------------------------------------

  videojs.Streamroot.prototype.addKeyboardShortcuts = function() {
    var self = this;
    // activates the keyboard shortcuts document.onkeydown = function (e) {
  }

  // Event callbacks ------------------------------------------------------------
  videojs.Streamroot.CheckAutoplay = function() {
    if (this.el_.autoplay && this.paused()) {
      this.play();
    }
  }

  videojs.Streamroot.onMetaData = function(trackList) {
    //removed the different quality buttons

    console.log('onMetaDataReceived');
    //console.log(trackList);
    var audiotracksinfos = [];
    var videotracksinfos = [];
    for(var i=0;i<trackList.length;i++) {
      trackList[i].bitrate = (trackList[i].bandwidth/1000).toFixed(0);
      //console.log(trackList[i]);
      if(trackList[i].type == 'audio') {
        audiotracksinfos.push(trackList[i]);
      } else if(trackList[i].type =='video') {
        videotracksinfos.push(trackList[i]);
      }
    }
    if(audiotracksinfos.length) {
      var audioButton = new videojs.AudioButton(this.player_,audiotracksinfos);
      this.player_.controlBar.addChild(audioButton);
    }
    if(videotracksinfos.length) {
      var videoButton = new videojs.VideoButton(this.player_,videotracksinfos);
      this.player_.controlBar.addChild(videoButton);
    }
  };

  videojs.Streamroot.onBuffering = function() {
    this.player_.trigger("waiting");
  };

  videojs.Streamroot.onPlaying = function() {
    this.player_.trigger("playing");
  };

  videojs.Streamroot.onFinish = function() {
    this.player_.trigger("ended");
    this.pause();
  };

  videojs.Streamroot.onSpaceBar = function() {
    console.log("onspace");
    //console.log(this);
    if (this.paused()) {
      this.play();
    } else {
      this.pause();
    }
  };

  videojs.Streamroot.onKeyForward = function() {
    this.setCurrentTime(this.currentTime() + 10);
  };

  videojs.Streamroot.onKeyRewind = function() {
    this.setCurrentTime(this.currentTime() - 10);
  };


  /* Text Track Menu Items
   ================================================================================ */
  videojs.AlternativeTrackMenuItem = videojs.MenuItem.extend({

    init: function(player, options, parent) {
      // Modify options for parent MenuItem class's init.

      function _levelLabel(level) {
        if (level.label) return level.label;
        else if (level.auto) return "auto";
        else if (level.height) return level.height + "p";
        else if (level.width) return Math.round(level.width * 9 / 16) + "p";
        else if (level.bitrate) return level.bitrate + "kbps";
        else return 0;
      };
      this.parentMenu = parent;
      var prefix = options.lang ? '[' + options.lang + ']' : "";
      if (!options.auto) {
        options.label = prefix + _levelLabel(options);
      } else {
        options.label = (options.lang) ? '[' + options.lang + '] ' + "Auto" : 'Auto';
      }
      this.track = options;
      options.selected = options.selected || false;
      videojs.MenuItem.call(this, player, options);
    },

    onClick: function() {
      videojs.MenuItem.prototype.onClick.call(this);
      for (var i = 0; i < this.parentMenu.items.length; i++) {
        if (this !== this.parentMenu.items[i]) {
          this.parentMenu.items[i].selected(false);
        }
      }
      this.player_.tech.aDash.switchRepresentation(this.track.type, this.track.asetId, this.track.repId);
    }

  });

  /* Alternative Tracks Button
   // Herite de sprpriÃ©tÃ©s de MenuButton,
   // mais comme on override createMenu, on doit aussi overrider l'init
   ================================================================================ */
  videojs.AlternativeTrackButton = videojs.MenuButton.extend({

    init: function(player, options) {

      videojs.Button.call(this, player, options);
      this.options_ = this.options = options;
      this.player_ = this.player = player;

      this.menu = this.createMenu();
    },

    createMenu: function() {

      var menu = new videojs.Menu(this.player_);

      // Add a title list item to the top => inutile maintenant
      /*    menu.el_.appendChild(videojs.createEl("li", {
       className: "videojs-menu-title",
       innerHTML: videojs.capitalize(this.kind)
       }));*/
      this.items = new Array();

      for (var i = 0; i < this.options.length; i++) {
        if (this.options[i].auto) {
          var m = new videojs.AlternativeTrackMenuItem(this.player_, {
            type: this.options[i].type,
            lang: this.options[i].lang,
            repId: this.options[i].repId,
            auto: true,
            selected: this.options[i].selected
          }, this);
        } else {
          var asetId = this.options[i].asetId;
          //var bw = this.options[i].bandwidth;
          var bitrate = this.options[i].bitrate;
          var repId = this.options[i].repId;
          var selected = this.options[i].selected | false;
          var height = this.options[i].height;
          var width = this.options[i].width;

          if (this.options[i].lang) {
            var tracklang = this.options[i].lang;
          };
          var buttonOptions = {
            type: this.options[i].type,
            lang: tracklang,
            asetId: asetId,
            repId: repId,
            bitrate: bitrate,
            width : width,
            height : height,
            selected: selected
          };
          var m = new videojs.AlternativeTrackMenuItem(this.player_, buttonOptions, this);
        }
        this.items.push(m);
        menu.addItem(m);
      };

      // Add list to element
      this.addChild(menu);
      return menu;
    },

    buildCSSClass: function() {
      return this.className + " vjs-menu-button " + videojs.MenuItem.prototype.buildCSSClass.call(this);
    },

  });

  /////////////////////////////////////////////////////////
  // extensions des boutons videoJS !

  videojs.AudioButton = videojs.AlternativeTrackButton.extend({

    init: function(player, options) {
      videojs.AlternativeTrackButton.call(this, player, options);
    },
    kind: "audio",
    buttonText: "Audio Tracks",
    className: "vjs-sr-audiotracks-button"
  });

  videojs.VideoButton = videojs.AlternativeTrackButton.extend({

    init: function(player, options) {
      videojs.AlternativeTrackButton.call(this, player, options);
    },
    kind: "video",
    buttonText: "Video Tracks",
    className: "vjs-sr-videotracks-button"
  });
})(videojs)