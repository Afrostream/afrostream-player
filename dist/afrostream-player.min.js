/**
 * afrostream-player
 * @version 2.0.0
 * @copyright 2016 Afrostream, Inc.
 * @license Apache-2.0
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.afrostreamPlayer=e()}}(function(){return function e(t,n,o){function r(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var r=e("./track-controls/caption-track-button"),i=(o(r),e("./track-controls/audio-track-button")),a=(o(i),e("./track-controls/video-track-button")),s=(o(a),e("./next/next-video-button")),u=(o(s),e("./progress-control/load-progress-spinner")),l=(o(u),e("./progress-control/mouse-thumbnail-display"));o(l)},{"./next/next-video-button":2,"./progress-control/load-progress-spinner":4,"./progress-control/mouse-thumbnail-display":5,"./track-controls/audio-track-button":6,"./track-controls/caption-track-button":8,"./track-controls/video-track-button":13}],2:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,c=r(l),d=e("./next-video-item"),f=r(d),p=c["default"].getComponent("Component"),h=c["default"].getComponent("ControlBar"),y=c["default"].getComponent("MenuButton"),v=function(e){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),s(t,[{key:"createItems",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];return this.options_.poster?(e.push(new f["default"](this.player_,{label:"Next",selectable:!1,poster:this.options_.poster})),e):(this.hide(),e)}},{key:"buildCSSClass",value:function(){return"vjs-next-video-button "+u(Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(){u(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this),this.player_.trigger("next")}}]),t}(y);v.prototype.controlText_="Next video",h.prototype.options_.children.splice(h.prototype.options_.children.length-2,0,"nextVideoButton"),p.registerComponent("NextVideoButton",v),n["default"]=v,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./next-video-item":3}],3:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c=l["default"].getComponent("Component"),d=l["default"].getComponent("MenuItem"),f=function(e){function t(e,n){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.setSrc(n.poster)}return i(t,e),a(t,[{key:"createEl",value:function(e,n,o){var r=s(Object.getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-menu-item",tabIndex:-1},o);return this.fallbackImg_=l["default"].createEl(l["default"].browser.BACKGROUND_SIZE_SUPPORTED?"div":"img",{className:"thumb-tile_thumb"}),r.appendChild(this.fallbackImg_),r}},{key:"setSrc",value:function(e){var t=void 0;l["default"].browser.BACKGROUND_SIZE_SUPPORTED?(t="",e&&(t='url("'+e+'")'),this.fallbackImg_.style.backgroundImage=t):this.fallbackImg_.src=e}},{key:"handleClick",value:function(){s(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this),this.player_.trigger("next")}}]),t}(d);c.registerComponent("NextVideoItem",f),n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c=l["default"].getComponent("Component"),d=l["default"].getComponent("LoadProgressBar"),f=function(e){function t(e,n){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return i(t,e),a(t,[{key:"createEl",value:function(){var e=l["default"].createEl("div",{className:"vjs-load-progress-spinner",innerHTML:'<svg class="circular" viewBox="25 25 50 50"> <circle class="path" cx="50" cy="50" r="'+this.options_.rayon+'" fill="none" stroke-width="2" stroke-miterlimit="10"/> </svg>'});return this.circle=l["default"].createEl("svg",{className:"circular",innerHTML:'<circle class="path" cx="50" cy="50" r="'+this.options_.rayon+'" fill="none" stroke-width="2" stroke-miterlimit="10"/>'},{viewBox:"25 25 50 50"}),e}},{key:"update",value:function(){var e=this.player_.buffered(),t=(this.player_.duration(),this.player_.bufferedEnd(),this.el_.children,this.options_.rayon,function(e,t){var n=e/t||0;return 125*(n>=1?1:n)}),n=this.getFirstChild(this.el_);if(n){var o=e.length-1,r=e.start(o),i=e.end(o),a=t(i-r,30),s=this.getFirstChild(n);if(s){var u=this.getFirstChild(s);u&&(u.style.strokeDasharray=[a,125])}}}},{key:"getFirstChild",value:function(e){for(var t=e.firstChild;null!=t&&3==t.nodeType;)t=t.nextSibling;return t}}]),t}(d);f.prototype.options_={rayon:20},c.registerComponent("LoadProgressSpinner",f),l["default"].options.children.splice(3,1,"loadProgressSpinner"),n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c=l["default"].getComponent("Component"),d=l["default"].getComponent("MouseTimeDisplay"),f=l["default"].getComponent("SeekBar"),p=function(e){function t(e,n){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return i(t,e),a(t,[{key:"createLoader",value:function(e){this.destroyLoader(),this.img=new Image,this.img.onload=this.handleComplete.bind(this),this.img.onerror=this.handleError.bind(this),this.img.src=e}},{key:"handleComplete",value:function(){this.destroyLoader();l["default"].hasClass(this.fallbackImg_,"vjs-hidden")&&l["default"].removeClass(this.fallbackImg_,"vjs-hidden")}},{key:"handleError",value:function(){var e=this.destroyLoader();l["default"].log("thumbnails : next error "+e),(this.itemIndex=1)&&this.dispose()}},{key:"destroyLoader",value:function(){var e="";return this.img&&(e=this.img.src,this.img.onload=null,this.img.onerror=null,this.img=null),e}},{key:"extractAssetUri",value:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=this.player_.currentSrc(),n=l["default"].parseUrl(t),o=n.pathname.replace(/\/([a-z0-9\/\._-]{16}\.[is]sml?)+\/([a-z0-9\/\._-]*\.(mpd|m3u8)?)$/gi,""),r=n.protocol+"//"+n.host+o+"/frames/map-{index}.jpg",i=r.replace("{index}",this.itemIndex),a=r.replace("{index}",this.itemIndex+1);return this.itemIndex<e&&this.createLoader(a),i}},{key:"createEl",value:function(){var e=l["default"].createEl("div",{className:"vjs-thumbnail-display"});return this.fallbackImg_=l["default"].createEl("div",{className:"vjs-thumbnail-display_thumb vjs-hidden"}),e.appendChild(this.fallbackImg_),e}},{key:"update",value:function(e,n){s(Object.getPrototypeOf(t.prototype),"update",this).call(this,e,n);var o=60,r={w:600,h:330},i=5,a=5,u=r.w/i,l=r.h/a;this.player_.isFullscreen()&&(u=200,l=112);var c=i*a,d=o*c,f=Math.max(1,Math.ceil(e/d)),p=this.player_.duration(),h=1;p&&(h=Math.ceil(this.player_.duration()/d));var y=e-(f-1)*d,v=Math.floor(y/o),m=Math.floor(v%5*u),b=Math.floor(v/a)*l;if(this.itemIndex!==f){this.itemIndex=f;var g=this.extractAssetUri(h),w='url("'+g+'")';this.fallbackImg_.style.backgroundImage=w}this.fallbackImg_.style.backgroundPositionX=-m+"px",this.fallbackImg_.style.backgroundPositionY=-b+"px"}}]),t}(d);p.prototype.itemIndex=1,f.prototype.options_.children.splice(1,1,"mouseThumbnailDisplay"),c.registerComponent("MouseThumbnailDisplay",p),n["default"]=p,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,c=r(l),d=e("./audio-track-menu-item"),f=r(d),p=e("./off-audio-track-menu-item"),h=(r(p),c["default"].getComponent("Component")),y=c["default"].getComponent("ControlBar"),v=c["default"].getComponent("MenuButton"),m=c["default"].getComponent("MenuItem"),b=function(e){function t(e,n){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n);var o=this.player_.audioTracks();if(o){var r=this.update.bind(this);o.addEventListener("removetrack",r),o.addEventListener("addtrack",r),this.player_.on("dispose",function(){o.removeEventListener("removetrack",r),o.removeEventListener("addtrack",r)})}}return a(t,e),s(t,[{key:"buildCSSClass",value:function(){return"vjs-audio-button "+u(Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"createItems",value:function(){var e=[];e.push(new m(this.player_,{label:this.controlText_,selectable:!1}));var t=this.player_.audioTracks();if(!t)return e;if(t.length<2)return this.hide(),e;for(var n=0;n<t.length;n++){var o=t[n];"main"===o.kind&&e.push(new f["default"](this.player_,{selectable:!0,track:o}))}return e}}]),t}(v);b.prototype.kind_="audio",b.prototype.controlText_="Audio Selection",y.prototype.options_.children.splice(12,0,"audioTrackButton"),h.registerComponent("AudioTrackButton",b),n["default"]=b,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./audio-track-menu-item":7,"./off-audio-track-menu-item":10}],7:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c=l["default"].getComponent("Component"),d=l["default"].getComponent("MenuItem"),f=function(e){function t(e,n){var o=this;r(this,t);var i=n.track,a=e.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i["default"]||i.enabled===!0,s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.track=i,a&&!function(){var e=o.handleTracksChange.bind(o);a.addEventListener("change",e),o.on("dispose",function(){a.removeEventListener("change",e)})}()}return i(t,e),a(t,[{key:"handleClick",value:function(e){var n=(this.track.kind,this.player_.audioTracks());if(s(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this,e),n)for(var o=0;o<n.length;o++){var r=n[o];r.enabled=r===this.track}}},{key:"handleTracksChange",value:function(){this.selected(this.track.enabled)}}]),t}(d);c.registerComponent("AudioTrackMenuItem",f),n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,c=r(l),d=e("./caption-track-menu-item"),f=r(d),p=e("./off-caption-track-menu-item"),h=r(p),y=c["default"].getComponent("Component"),v=c["default"].getComponent("ControlBar"),m=c["default"].getComponent("CaptionsButton"),b=(c["default"].getComponent("TextTrackMenuItem"),function(e){function t(e,n){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),s(t,[{key:"createItems",value:function(){var e=[];e.push(new h["default"](this.player_,{kind:this.kind_,mode:"hidden"}));var t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var o=t[n];o.kind===this.kind_&&e.push(new f["default"](this.player_,{selectable:!0,track:o}))}return e}},{key:"buildCSSClass",value:function(){return"vjs-captions-extended-button "+u(Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}}]),t}(m));b.prototype.kind_="captions",b.prototype.controlText_="Captions",v.prototype.options_.children.splice(12,1,"captionTrackButton"),y.registerComponent("CaptionTrackButton",b),n["default"]=b,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./caption-track-menu-item":9,"./off-caption-track-menu-item":11}],9:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c=l["default"].getComponent("Component"),d=l["default"].getComponent("MenuItem"),f=function(e){function t(e,n){var o=this;r(this,t);var i=n.track,a=e.textTracks();n.label=i.label||i.language||"Unknown",n.selected=i["default"]||"showing"===i.mode,s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.track=i,a&&(a.addEventListener("change",this.handleTracksChange.bind(this)),this.on("dispose",function(){a.removeEventListener("change",this.handleTracksChange.bind(this))})),a&&void 0===a.onchange&&!function(){var e=void 0;o.on(["tap","click"],function(){if("object"!=typeof window.Event)try{e=new window.Event("change")}catch(t){}e||(e=document.createEvent("Event"),e.initEvent("change",!0,!0)),a.dispatchEvent(e)})}()}return i(t,e),a(t,[{key:"handleClick",value:function(e){var n=this.track.kind,o=this.player_.textTracks();if(s(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this,e),o)for(var r=0;r<o.length;r++){var i=o[r];i.kind===n&&(i===this.track?i.mode="showing":i.mode="hidden")}}},{key:"handleTracksChange",value:function(){this.selected("showing"===this.track.mode)}}]),t}(d);c.registerComponent("CaptionTrackMenuItem",f),n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,c=r(l),d=e("./audio-track-menu-item"),f=r(d),p=c["default"].getComponent("Component"),h=function(e){function t(e,n){i(this,t),n.track={kind:n.kind,player:e,label:n.kind+" off","default":!1,enabled:!1},n.selectable=!0,u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),s(t,[{key:"handleTracksChange",value:function(e){for(var t=this.player().audioTracks(),n=!0,o=0,r=t.length;r>o;o++){var i=t[o];if("main"===i.kind&&i.enabled){n=!1;break}}this.selected(n)}}]),t}(f["default"]);p.registerComponent("OffAudioTrackMenuItem",h),n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./audio-track-menu-item":7}],11:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,c=r(l),d=e("./caption-track-menu-item"),f=r(d),p=c["default"].getComponent("Component"),h=function(e){function t(e,n){i(this,t),n.track={kind:n.kind,player:e,label:n.kind+" off","default":!1,mode:"hidden"},n.selectable=!0,u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),s(t,[{key:"handleTracksChange",value:function(e){for(var t=this.player().textTracks(),n=!0,o=0,r=t.length;r>o;o++){var i=t[o];if(i.kind===this.track.kind&&"showing"===i.mode){n=!1;break}}this.selected(n)}}]),t}(f["default"]);p.registerComponent("OffCaptionTrackMenuItem",h),n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./caption-track-menu-item":9}],12:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,c=r(l),d=e("./video-track-menu-item"),f=r(d),p=c["default"].getComponent("Component"),h=function(e){function t(e,n){i(this,t),n.track={kind:n.kind,player:e,label:n.kind,"default":!1,selected:!1},n.selectable=!0,u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),s(t,[{key:"handleTracksChange",value:function(e){for(var t=this.player().videoTracks(),n=!0,o=0,r=t.length;r>o;o++){var i=t[o];if("main"===i.kind&&i.selected){n=!1;break}}this.selected(n)}}]),t}(f["default"]);p.registerComponent("OffVideoTrackMenuItem",h),n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./video-track-menu-item":14}],13:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,c=r(l),d=e("./video-track-menu-item"),f=r(d),p=e("./off-video-track-menu-item"),h=r(p),y=c["default"].getComponent("Component"),v=c["default"].getComponent("ControlBar"),m=c["default"].getComponent("MenuButton"),b=c["default"].getComponent("MenuItem"),g=function(e){function t(e,n){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n);var o=this.player_.videoTracks();if(o){var r=this.update.bind(this);o.addEventListener("removetrack",r),o.addEventListener("addtrack",r),this.player_.on("dispose",function(){o.removeEventListener("removetrack",r),o.removeEventListener("addtrack",r)})}}return a(t,e),s(t,[{key:"buildCSSClass",value:function(){return"vjs-video-button "+u(Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"createItems",value:function(){var e=[];e.push(new b(this.player_,{label:"Quality",selectable:!1})),e.push(new h["default"](this.player_,{kind:"Auto"}));var t=this.player_.videoTracks();if(!t)return e;if(t.length<2)return[];for(var n=0;n<t.length;n++){var o=t[n];"main"===o.kind&&e.push(new f["default"](this.player_,{selectable:!0,track:o}))}return e}}]),t}(m);g.prototype.kind_="video",g.prototype.controlText_="Quality Selection",v.prototype.options_.children.splice(12,0,"videoTrackButton"),y.registerComponent("VideoTrackButton",g),n["default"]=g,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./off-video-track-menu-item":12,"./video-track-menu-item":14}],14:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;
return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c=l["default"].getComponent("Component"),d=l["default"].getComponent("MenuItem"),f=function(e){function t(e,n){var o=this;r(this,t);var i=n.track,a=e.videoTracks();n.label=i.label||i.language||"Unknown",n.selected=i["default"]||i.selected===!0,s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.track=i,a&&!function(){var e=o.handleTracksChange.bind(o);a.addEventListener("change",e),o.on("dispose",function(){a.removeEventListener("change",e)})}()}return i(t,e),a(t,[{key:"handleClick",value:function(e){var n=(this.track.kind,this.player_.videoTracks());if(s(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this,e),n)for(var o=0;o<n.length;o++){var r=n[o];r.selected=r===this.track}}},{key:"handleTracksChange",value:function(){this.selected(this.track.selected)}}]),t}(d);c.registerComponent("VideoTrackMenuItem",f),n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c="undefined"!=typeof window?window.dashjs:"undefined"!=typeof e?e.dashjs:null,d=l["default"].getComponent("Component"),f=l["default"].getComponent("Tech"),p=l["default"].getComponent("Html5"),h=function(e){function t(e,n){var o=this;r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n);var i=void 0;i=this.textTracks(),i&&!function(){var e=o.handleTracksChange.bind(o);i.addEventListener("change",e),o.on("dispose",function(){i.removeEventListener("change",e)})}(),i=this.audioTracks(),i&&!function(){var e=o.handleAudioTracksChange.bind(o);i.addEventListener("change",e),o.on("dispose",function(){i.removeEventListener("change",e)})}(),i=this.videoTracks(),i&&!function(){var e=o.handleVideoTracksChange.bind(o);i.addEventListener("change",e),o.on("dispose",function(){i.removeEventListener("change",e)})}()}return i(t,e),a(t,[{key:"isDynamic",value:function n(){var n=!1;if(!this.playbackInitialized)return n;try{n=this.mediaPlayer_.time()}catch(e){l["default"].log(e)}return n}},{key:"duration",value:function o(){var o=s(Object.getPrototypeOf(t.prototype),"duration",this).call(this);return this.isDynamic()?1/0:o}},{key:"src",value:function(e){var t=this;return void 0===e?this.el_.src:(this.isReady_=!1,this.featuresNativeTextTracks=p.supportsNativeTracks("text"),this.keySystemOptions_=this.buildDashJSProtData(this.options_.protData),this.context_=this.context_||{},this.mediaPlayer_=(0,c.MediaPlayer)(this.context_).create(),this.mediaPlayer_.initialize(),this.mediaPlayer_.attachView(this.el()),this.mediaPlayer_.on(c.MediaPlayer.events.STREAM_INITIALIZED,this.onInitialized.bind(this)),this.mediaPlayer_.on(c.MediaPlayer.events.TEXT_TRACKS_ADDED,this.onTextTracksAdded.bind(this)),this.mediaPlayer_.on(c.MediaPlayer.events.METRIC_CHANGED,this.onMetricChanged.bind(this)),this.mediaPlayer_.on(c.MediaPlayer.events.PLAYBACK_PROGRESS,this.onProgress.bind(this)),this.player_.options().autoplay||this.mediaPlayer_.setAutoPlay(!1),this.mediaPlayer_.setInitialMediaSettingsFor("audio",{lang:this.options_.lang}),this.mediaPlayer_.setInitialMediaSettingsFor("video",{lang:this.options_.lang}),this.mediaPlayer_.setTrackSwitchModeFor("audio","neverReplace"),this.mediaPlayer_.setTrackSwitchModeFor("video","neverReplace"),this.mediaPlayer_.setScheduleWhilePaused(this.options_.scheduleWhilePaused),this.mediaPlayer_.setAutoSwitchQuality(this.options_.autoSwitch),this.mediaPlayer_.enableBufferOccupancyABR(this.options_.bolaEnabled),this.mediaPlayer_.setBufferToKeep(this.options_.buffer.minBufferTime),this.mediaPlayer_.setBufferPruningInterval(this.options_.buffer.bufferPruningInterval),this.mediaPlayer_.setStableBufferTime(this.options_.buffer.minBufferTime),this.mediaPlayer_.setBufferTimeAtTopQuality(this.options_.buffer.bufferTimeAtTopQuality),this.mediaPlayer_.setBufferTimeAtTopQualityLongForm(this.options_.buffer.bufferTimeAtTopQualityLongForm),this.mediaPlayer_.setLongFormContentDurationThreshold(this.options_.buffer.longFormContentDurationThreshold),this.mediaPlayer_.setRichBufferThreshold(this.options_.buffer.longFormContentDurationThreshold),this.mediaPlayer_.setBandwidthSafetyFactor(this.options_.buffer.bandwidthSafetyFactor),this.player_.trigger("loadstart"),this.ready(function(){t.mediaPlayer_.retrieveManifest(e,t.initializeDashJS.bind(t))}),void 0)}},{key:"onInitialized",value:function(e,n){if(!this.playbackInitialized){this.playbackInitialized=!0,n&&this.player_.error(n),this.trigger(c.MediaPlayer.events.STREAM_INITIALIZED);var o=(this.mediaPlayer_.getBitrateInfoListFor("video"),this.mediaPlayer_.getTracksFor("audio")),r=this.mediaPlayer_.getTracksFor("video"),i=this.mediaPlayer_.getAutoSwitchQuality(),a=this.mediaPlayer_.getInitialMediaSettingsFor("audio"),s=(this.mediaPlayer_.getInitialMediaSettingsFor("video"),this.mediaPlayer_.getInitialBitrateFor("video")),u=void 0;for(u=0;u<o.length;u++){var l=o[u],d=this.addAudioTrack("main",l.label,l.lang);d.enabled=d.language===a.lang}for(u=0;u<r.length;u++)for(var l=r[u],f=l.bitrateList,p=0;p<f.length;p++){var h=f[p]/1e3,y=t.qualityLabels[p]||h,v=this.addVideoTrack("main",y,h);v.selected=!i&&s===h}}}},{key:"onProgress",value:function(e){this.trigger("progress")}},{key:"onMetricChanged",value:function(e){if("video"===e.mediaType||"audio"===e.mediaType||"p2pweb"===e.mediaType){var t=this.getCribbedMetricsFor(e.mediaType);if(t){this.metrics_[e.mediaType]=l["default"].mergeOptions(this.metrics_[e.mediaType],t);var n={type:c.MediaPlayer.events.METRIC_CHANGED,data:e.data};this.trigger(n)}}}},{key:"getCribbedMetricsFor",value:function(e){var t=this.mediaPlayer_.getMetricsFor(e),n=this.mediaPlayer_.getDashMetrics(),o=void 0,r=void 0,i=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=0,f={},p={},h={},y=0,v=void 0,m=function(e,t){var n,o,r,i;n=t.slice(-20).filter(function(t){return t.responsecode>=200&&t.responsecode<300&&!!t._mediaduration&&"MediaSegment"===t.type&&t._stream===e}).slice(-4),n.length>0&&(r=n.map(function(e){return Math.abs(e.tresponse.getTime()-e.trequest.getTime())/1e3}),f[e]={average:r.reduce(function(e,t){return e+t})/r.length,high:r.reduce(function(e,t){return t>e?t:e}),low:r.reduce(function(e,t){return t>e?e:t}),count:r.length},o=n.map(function(e){return Math.abs(e._tfinish.getTime()-e.tresponse.getTime())/1e3}),p[e]={average:o.reduce(function(e,t){return e+t})/o.length,high:o.reduce(function(e,t){return t>e?t:e}),low:o.reduce(function(e,t){return t>e?e:t}),count:o.length},i=n.map(function(e){return e._mediaduration}),h[e]={average:i.reduce(function(e,t){return e+t})/o.length/p[e].average,high:i.reduce(function(e,t){return t>e?t:e})/p[e].low,low:i.reduce(function(e,t){return t>e?e:t})/p[e].high,count:i.length})};if(t&&n){o=n.getCurrentRepresentationSwitch(t),r=n.getCurrentBufferLevel(t),i=n.getHttpRequests(t),a=n.getCurrentDroppedFrames(t),v=n.getRequestsQueue(t),m("video",i),m("audio",i);var b=this.streamInfo?this.streamInfo.index:0;return null!==o&&(s=n.getIndexForRepresentation(o.to,b),u=n.getBandwidthForRepresentation(o.to,b),u/=1e3,u=Math.round(u)),c=n.getMaxIndexForBufferType(e,b),null!==r&&(d=r.toPrecision(5)),null!==a&&(y=a.droppedFrames),(isNaN(u)||void 0===u)&&(u=0),(isNaN(s)||void 0===s)&&(s=0),(isNaN(c)||void 0===c)&&(c=0),(isNaN(d)||void 0===d)&&(d=0),l=this.mediaPlayer_.getQualityFor(e),{bandwidth:u,bitrateIndex:s+1,pendingIndex:l!==s?"(-> "+(l+1)+")":"",numBitrates:c,bufferLength:d,droppedFrames:y,movingLatency:f,movingDownload:p,movingRatio:h,requestsQueue:v}}return null}},{key:"buildDashJSProtData",value:function(e){var t={};return e?(Object.keys(e).forEach(function(e,t){t.licenseUrl&&(t.laURL=t.licenseUrl,delete t.licenseUrl)}),e):t}},{key:"initializeDashJS",value:function(e,t){var n=this,o={};return t?(this.showErrors(),this.triggerReady(),void this.dispose()):(this.getWidevineProtectionData&&(o=this.getWidevineProtectionData(e),this.keySystemOptions_=l["default"].mergeOptions(this.keySystemOptions_,o)),void this.resetSrc_(function(){n.afterMediaKeysReset(e)}))}},{key:"onTextTracksAdded",value:function(e){var n=e.tracks;if(n)for(var o,r,i=this.textTracks(),a=n.length,s=0;a>s;s++)o=n[s],o.label=o.label||t.captionsLangLabels[o.lang],r=i[s],o.defaultTrack&&(this.mediaPlayer_.setTextTrack(s),r&&(r.mode="showing"))}},{key:"handleTracksChange",value:function(){var e=this.textTracks();if(e&&this.playbackInitialized){for(var t=void 0,n=0;n<e.length;n++){var o=e[n];"showing"===o.mode&&(t=!0,this.mediaPlayer_.setTextTrack(n))}t||this.mediaPlayer_.setTextTrack(-1)}}},{key:"handleAudioTracksChange",value:function(){var e=this.audioTracks();if(e&&this.playbackInitialized)for(var t=this.mediaPlayer_.getTracksFor("audio"),n=0;n<e.length;n++){var o=e[n];if(o.enabled){var r=t[n];if(o.language==r.lang){t.enabled=!0;try{this.mediaPlayer_.setCurrentTrack(t[n])}catch(i){l["default"].log(i)}}}}}},{key:"handleVideoTracksChange",value:function(){var e=this.videoTracks();if(e&&this.playbackInitialized){var t=null!==e.selectedIndex&&!isNaN(e.selectedIndex)&&e.selectedIndex%1===0;this.mediaPlayer_.setAutoSwitchQuality(!t),t&&this.mediaPlayer_.setQualityFor("video",e.selectedIndex)}}},{key:"afterMediaKeysReset",value:function(e){this.showErrors(),this.mediaPlayer_.attachSource(e,null,this.keySystemOptions_,"fr"),this.triggerReady()}},{key:"showErrors",value:function(){var e=this;this.setTimeout(function(){e.player_.removeClass("vjs-dashjs-hide-errors")},250)}},{key:"resetSrc_",value:function(e){this.el()&&(this.el().src="",this.el().setMediaKeys?this.el().setMediaKeys(null).then(e,e):e())}},{key:"dispose",value:function(){this.mediaPlayer_&&this.mediaPlayer_.reset(),this.resetSrc_(Function.prototype),s(Object.getPrototypeOf(t.prototype),"dispose",this).call(this,this)}}]),t}(p);h.prototype.options_={lang:"fr",autoSwitch:!0,bolaEnabled:!0,scheduleWhilePaused:!1,buffer:{bufferToKeep:30,minBufferTime:12,bufferPruningInterval:30,bandwidthSafetyFactor:.9,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,longFormContentDurationThreshold:600,richBufferThreshold:20},protData:{}},h.isSupported=function(){return p.isSupported()&&!!window.MediaSource},f.withSourceHandlers(h),h.nativeSourceHandler={},h.prototype.featuresNativeTextTracks=!1,h.prototype.featuresNativeAudioTracks=!1,h.prototype.featuresNativeVideoTracks=!1,h.nativeSourceHandler.canPlayType=function(e){var t=/^application\/dash\+xml/i,n=/\.mpd/i;return t.test(e)?"probably":n.test(e)?"maybe":""},h.nativeSourceHandler.canHandleSource=function(e){return e.type?h.nativeSourceHandler.canPlayType(e.type):e.src?h.nativeSourceHandler.canPlayType(e.src):""},h.captionsLangLabels={fra:"FranÃ§ais",eng:"Anglais"},h.qualityLabels=["bas","moyen","normal","HD"],h.nativeSourceHandler.handleSource=function(e,t){t.src(e.src)},h.nativeSourceHandler.dispose=function(){},h.registerSourceHandler(h.nativeSourceHandler),l["default"].options.dash={},d.registerComponent("Dash",h),f.registerTech("Dash",h),n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],16:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c="undefined"!=typeof window?window.dashjs:"undefined"!=typeof e?e.dashjs:null,d=l["default"].getComponent("Component"),f=l["default"].getComponent("Tech"),p=l["default"].getComponent("Flash"),h=function(e){function t(e,n){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),window.videojs=window.videojs||{},window.videojs.Dashas=window.videojs.Dashas||{},window.videojs.Dashas.onReady=p.onReady,window.videojs.Dashas.onEvent=p.onEvent,window.videojs.Dashas.onError=p.onError,this.metricsInterval=this.setInterval(this.detectBandwithChange,5e3),this.one("loadedmetadata",this.onInitialized.bind(this));var o=this.audioTracks(),i=this.handleAudioTracksChange.bind(this);o.addEventListener("change",i),this.on("dispose",function(){o.removeEventListener("change",i)})}return i(t,e),a(t,[{key:"createEl",value:function(){var e=this.options_,n=t.buildMetadataUrl(e),o=t.buildOptData(e);return e.flashVars=l["default"].mergeOptions({metadataUrl:encodeURIComponent(n),authenticationToken:encodeURIComponent(o),language:"fr",spinner:!1,watermark:!1,muted:this.player_.options_.muted,debug:!0,quality:"autolow",maxBufferLength:8},e.flashVars||{}),s(Object.getPrototypeOf(t.prototype),"createEl",this).call(this)}},{key:"onInitialized",value:function(){var e=this.getPlaybackStatistics();e&&(this.metrics_=l["default"].mergeOptions(this.metrics_,e),this.addAudioTracks())}},{key:"handleAudioTracksChange",value:function(){var e=this.audioTracks();if(e)for(var t=0;t<e.length;t++){var n=e[t];if(n.enabled)try{this.el_.vjs_setProperty("forcedAudioLang",t)}catch(o){l["default"].log(o)}}}},{key:"addAudioTracks",value:function(){var e=this.el_.vjs_getProperty("audioTracks");if(e)for(var t=0;t<e.length;t++){var n=e[t];"string"==typeof n&&(n={label:n,lang:n});var o=this.addAudioTrack("main",n.label,n.lang);o.enabled="fra"===o.language||"fr"===o.language}}},{key:"detectBandwithChange",value:function(){var e=this.getPlaybackStatistics(),t=void 0;if(e){switch(!0){case e.video.bandwidth!==this.metrics_.video.bandwidth:this.metrics_.video.bandwidth=e.video.bandwidth,t="video";break;case e.audio.bandwidth!==this.metrics_.audio.bandwidth:this.metrics_.audio.bandwidth=e.audio.bandwidth,t="audio"}if(t){var n={type:c.MediaPlayer.events.METRIC_CHANGED,data:t};this.trigger(n)}}}},{key:"subtitleTracks",value:function(){return this.textTracks()}},{key:"setSubsTrack",value:function(e){this.setTextTrack(e)}},{key:"getDroppedFrames",value:function(){return this.el_.vjs_getProperty("droppedFrames")}},{key:"getBuffered",value:function(){return this.el_.vjs_getProperty("buffered")}},{key:"getBufferLevel",value:function(){return this.el_.vjs_getProperty("bufferLevel")}},{key:"getCurrentAudioBandwidth",value:function(){return this.el_.vjs_getProperty("currentAudioBandwidth")}},{key:"getCurrentVideoBandwidth",value:function(){return this.el_.vjs_getProperty("currentVideoBandwidth")}},{key:"audioTracks",value:function(){return f.prototype.audioTracks.call(this)}},{key:"poster",value:function(){return""}},{key:"getPlaybackStatistics",value:function(){var e=this.getBuffered(),t=(this.getBufferLevel(),this.getDroppedFrames()),n=this.getCurrentVideoBandwidth(),o=this.getCurrentAudioBandwidth(),r={bandwidth:n/1e3,bufferLength:e,droppedFrames:t},i={bandwidth:o/1e3,bufferLength:e};return l["default"].mergeOptions(this.metrics_,{video:r,audio:i})}},{key:"src",value:function(e){var n=this.options_,o=this.player_.autoplay(),r=t.buildMetadataUrl(n),i=t.buildOptData(n);this.el_.vjs_source(e,o,r,i)}},{key:"currentTime",value:function(){return this.el_.vjs_getProperty("currentTime")}},{key:"buffered",value:function(){return this.el_.vjs_getProperty("buffered")}}]),t}(p);h.extractAssetId=function(e){var t=/^(.*\/)?(?:$|(.+?)(?:(\.[^.]*$)|$))/,n=e.match(t),o=n[2];return o},h.getDRMData=function(e){var t=e.protData["com.adobe.flashaccess"],n=e.source?h.extractAssetId(e.source.src):"",o=t.httpRequestHeaders?t.httpRequestHeaders.customData||{}:{},r=t.serverURL?t.serverURL||"":"";return e.source&&!e.source.drm&&(r=o=n=""),{customData:o,serverUrl:r,assetId:n,variantId:""}},h.buildMetadataUrl=function(e){var t=h.getDRMData(e),n=t.serverUrl;return t.customData&&(n+="?optData="+t.customData),t.assetId&&(n+="&assetId="+t.assetId),t.variantId&&(n+="&variantId="+t.variantId),n},h.buildOptData=function(e){return h.getDRMData(e).customData},h.prototype.options_={customData:{},protData:{"com.widevine.alpha":{},"com.microsoft.playready":{},"com.adobe.flashaccess":{},"org.w3.clearkey":{}}},h.isSupported=function(){return p.isSupported()&&p.version()[0]>=14},f.withSourceHandlers(h),h.nativeSourceHandler={},h.nativeSourceHandler.canPlayType=function(e){var t=/^application\/dash\+xml/i,n=/\.mpd/i;return t.test(e)?"probably":n.test(e)?"maybe":""},h.nativeSourceHandler.canHandleSource=function(e){return e.type?h.nativeSourceHandler.canPlayType(e.type):e.src?h.nativeSourceHandler.canPlayType(e.src):""},h.nativeSourceHandler.handleSource=function(e,t){t.src(e.src)},h.nativeSourceHandler.dispose=function(){},h.registerSourceHandler(h.nativeSourceHandler),l["default"].options.dashas={},d.registerComponent("Dashas",h),f.registerTech("Dashas",h),HTMLObjectElement.prototype.vjs_getProperty=function(e){},HTMLObjectElement.prototype.vjs_setProperty=function(e,t){},HTMLObjectElement.prototype.vjs_play=function(){},HTMLObjectElement.prototype.vjs_pause=function(){},HTMLObjectElement.prototype.vjs_load=function(){},HTMLObjectElement.prototype.vjs_src=function(e){},n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var n="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,o=t(n),r=o["default"].getComponent("MediaTechController");r.METRICS_DATA={bandwidth:-1,bitrateIndex:0,pendingIndex:"",numBitrates:0,bufferLength:0,droppedFrames:0,movingLatency:0,movingDownload:0,movingRatio:0,requestsQueue:0},r.prototype.metrics_={video:o["default"].mergeOptions({bandwidth:-1},r.METRICS_DATA),audio:o["default"].mergeOptions({bandwidth:-1},r.METRICS_DATA),p2pweb:{chunksFromCDN:0,chunksFromP2P:0,chunksSent:0,bufferLength:-1,swarmSize:-1,p2pRatio:-1,startupTime:-1}},r.prototype.getPlaybackStatistics=function(){return this.metrics_},r.prototype.getCribbedMetricsFor=function(e){return this.metrics_[e]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){},{}],19:[function(e,t,n){(function(n){var o="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},r=e("min-document");if("undefined"!=typeof document)t.exports=document;else{var i=o["__GLOBAL_DOCUMENT_CACHE@4"];i||(i=o["__GLOBAL_DOCUMENT_CACHE@4"]=r),t.exports=i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":18}],20:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c=l["default"].getComponent("Component"),d=l["default"].getComponent("ControlBar"),f=l["default"].getComponent("Button"),p=function(e){function t(e,n){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.hide(),this.initializeApi(),e.chromecast=this}return i(t,e),a(t,[{key:"initializeApi",value:function(){var e=void 0,t=void 0,n=void 0;return l["default"].browser.IS_CHROME&&!l["default"].browser.IS_EDGE?chrome.cast&&chrome.cast.isAvailable?(this.show(),l["default"].log("Cast APIs are available"),t=this.options_.appId||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,n=new chrome.cast.SessionRequest(t),e=new chrome.cast.ApiConfig(n,this.sessionJoinedListener.bind(this),this.receiverListener.bind(this)),chrome.cast.initialize(e,this.onInitSuccess.bind(this),this.castError.bind(this))):(l["default"].log("Cast APIs not available"),this.tryingReconnect<10&&(this.setTimeout(this.initializeApi,1e3),++this.tryingReconnect),void l["default"].log("Cast APIs not available. Max reconnect attempt")):void 0}},{key:"castError",value:function(e){var t={code:e.code,message:e.description};switch(e.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:case chrome.cast.ErrorCode.EXTENSION_MISSING:case chrome.cast.ErrorCode.EXTENSION_NOT_COMPATIBLE:case chrome.cast.ErrorCode.INVALID_PARAMETER:case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:case chrome.cast.ErrorCode.SESSION_ERROR:case chrome.cast.ErrorCode.CHANNEL_ERROR:case chrome.cast.ErrorCode.TIMEOUT:this.addClass("error");break;case chrome.cast.ErrorCode.CANCEL:break;default:this.player_.error(t)}return l["default"].log("Cast Error: "+JSON.stringify(e))}},{key:"onInitSuccess",value:function(){return this.apiInitialized=!0}},{key:"sessionJoinedListener",value:function(e){return e.media.length&&(this.apiSession=e,this.onMediaDiscovered(e.media[0])),console.log("Session joined")}},{key:"receiverListener",value:function(e){return"available"===e?this.show():void 0}},{key:"doLaunch",value:function(){return l["default"].log("Cast video: "+this.player_.currentSrc()),this.apiInitialized?chrome.cast.requestSession(this.onSessionSuccess.bind(this),this.castError.bind(this)):l["default"].log("Session not initialized")}},{key:"onSessionSuccess",value:function(e){var t=void 0,n=void 0,o=void 0,r=void 0,i=void 0,a=void 0;l["default"].log("Session initialized: "+e.sessionId),this.apiSession=e;var s=this.player_.currentSrc(),u=this.player_.currentType();if(r=new chrome.cast.media.MediaInfo(s,u),r.metadata=new chrome.cast.media.GenericMediaMetadata,this.options_.metadata){i=this.options_.metadata;for(n in i)a=i[n],r.metadata[n]=a}var c=this.player().poster();c&&(t=new chrome.cast.Image(c),r.metadata.images=[t]);var d=this.player().textTracks(),f=this.player().remoteTextTrackEls();if(d){for(var p=[],h=0;h<d.length;h++){var y=d.tracks_[h],v=f.trackElements_[h],m=h+1,b=new chrome.cast.media.Track(m,chrome.cast.media.TrackType.TEXT);b.trackContentId=y.id||(v?v.src:m),b.trackContentType=y.type,b.subtype=chrome.cast.media.TextTrackType.CAPTIONS,b.name=y.label,b.language=y.language,b.customData=null,p.push(b)}r.textTrackStyle=new chrome.cast.media.TextTrackStyle,r.textTrackStyle.foregroundColor="#FFFFFF",r.textTrackStyle.backgroundColor="#00000060",r.textTrackStyle.edgeType=chrome.cast.media.TextTrackEdgeType.DROP_SHADOW,r.textTrackStyle.windowType=chrome.cast.media.TextTrackWindowType.ROUNDED_CORNERS,r.tracks=p}o=new chrome.cast.media.LoadRequest(r),o.autoplay=!0,o.currentTime=this.player_.currentTime(),this.apiSession.loadMedia(o,this.onMediaDiscovered.bind(this),this.castError.bind(this)),this.apiSession.addUpdateListener(this.onSessionUpdate.bind(this))}},{key:"onMediaDiscovered",value:function(e){this.player_.loadTech_("Chromecast",{type:"cast",src:this.player_.currentSrc(),apiMedia:e,apiSession:this.apiSession}),this.casting=!0,this.inactivityTimeout=this.player_.options_.inactivityTimeout,this.player_.options_.inactivityTimeout=0,this.player_.userActive(!0),this.addClass("connected"),this.removeClass("error")}},{key:"onSessionUpdate",value:function(e){return this.player_.apiMedia?e?void 0:this.onStopAppSuccess():void 0}},{key:"stopCasting",value:function(){return this.apiSession.stop(this.onStopAppSuccess.bind(this),this.castError.bind(this))}},{key:"onStopAppSuccess",value:function(){this.casting=!1;var e=this.player_.currentTime();return this.removeClass("connected"),this.player_.src(this.player_.options_.sources),this.player_.paused()||this.player_.one("seeked",function(){return this.player_.play()}),this.player_.currentTime(e),this.player_.options_.inactivityTimeout=this.inactivityTimeout,this.apiSession=null}},{key:"buildCSSClass",value:function(){return"vjs-chromecast-button "+s(Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"handleClick",value:function(){return s(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this),this.casting?this.stopCasting():this.doLaunch()}}]),t}(f);p.prototype.tryingReconnect=0,p.prototype.inactivityTimeout=2e3,p.prototype.controlText_="Chromecast",d.prototype.options_.children.splice(d.prototype.options_.children.length-1,0,"chromeCastButton"),c.registerComponent("ChromeCastButton",p),n["default"]=p,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,a=r(i),s=e("./videojs-chromecast"),u=r(s),l=function(e){(0,u["default"])(this,e)};a["default"].plugin("chromecast",l),n["default"]=l,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./videojs-chromecast":24}],23:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(u),c=l["default"].getComponent("Component"),d=l["default"].getComponent("Tech"),f=function(e){function t(e,n){var o=this;r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.apiMedia=this.options_.source.apiMedia,this.apiSession=this.options_.source.apiSession,this.receiver=this.apiSession.receiver.friendlyName,this.apiMedia.addUpdateListener(this.onMediaStatusUpdate.bind(this)),this.apiSession.addUpdateListener(this.onSessionUpdate.bind(this));var i=this.textTracks();i&&!function(){var e=o.handleTracksChange.bind(o);i.addEventListener("change",e),o.on("dispose",function(){i.removeEventListener("change",e)}),o.handleTracksChange()}(),this.update(),this.triggerReady(),this.trigger("loadstart"),this.trigger("loadedmetadata"),this.trigger("loadeddata"),this.trigger("canplay"),this.trigger("canplaythrough"),this.trigger("durationchange")}return i(t,e),a(t,[{key:"createEl",value:function(){var e=l["default"].createEl("div",{id:this.options_.techId,className:"vjs-tech vjs-tech-chromecast"});return e}},{key:"update",value:function(){this.el_.innerHTML='<div class="casting-image" style="background-image: url(\''+this.options_.poster+'\')"></div><div class="casting-overlay"><div class="casting-information"><div class="casting-icon"></div><div class="casting-description"><small>'+this.localize("CASTING TO")+"</small><br>"+this.receiver+"</div></div></div>"}},{key:"onSessionUpdate",value:function(e){return this.apiMedia?e?void 0:this.onStopAppSuccess():void 0}},{key:"onStopAppSuccess",value:function(){this.stopTrackingCurrentTime(),this.apiMedia=null}},{key:"onMediaStatusUpdate",value:function(){if(this.apiMedia)switch(this.apiMedia.playerState){case chrome.cast.media.PlayerState.BUFFERING:this.trigger("waiting");break;case chrome.cast.media.PlayerState.IDLE:this.trigger("timeupdate");break;case chrome.cast.media.PlayerState.PAUSED:this.trigger("pause"),this.paused_=!0;break;case chrome.cast.media.PlayerState.PLAYING:this.trigger("playing"),this.trigger("play"),this.paused_=!1}}},{key:"src",value:function(e){}},{key:"handleTracksChange",value:function(){var e=[],t=this.textTracks();if(t){for(var n=0;n<t.length;n++){var o=t[n];"showing"===o.mode&&e.push(n+1)}return this.apiMedia?(this.tracksInfoRequest=new chrome.cast.media.EditTracksInfoRequest(e),this.apiMedia.editTracksInfo(this.tracksInfoRequest,this.onTrackSuccess.bind(this),this.onTrackError.bind(this))):void 0}}},{key:"onTrackSuccess",value:function(e){return l["default"].log("track added")}},{key:"onTrackError",value:function(e){return l["default"].log("Cast track Error: "+JSON.stringify(e))}},{key:"castError",value:function(e){return l["default"].log("Cast Error: "+JSON.stringify(e))}},{key:"play",value:function(){return this.apiMedia?(this.paused_&&this.apiMedia.play(null,this.mediaCommandSuccessCallback.bind(this,"Playing: "+this.apiMedia.sessionId),this.castError.bind(this)),
this.paused_=!1):void 0}},{key:"pause",value:function(){return this.apiMedia?this.paused_?void 0:(this.apiMedia.pause(null,this.mediaCommandSuccessCallback.bind(this,"Paused: "+this.apiMedia.sessionId),this.castError.bind(this)),this.paused_=!0):void 0}},{key:"paused",value:function(){return this.paused_}},{key:"currentTime",value:function(){return this.apiMedia?this.apiMedia.currentTime:0}},{key:"setCurrentTime",value:function(e){if(!this.apiMedia)return 0;var t=void 0;return t=new chrome.cast.media.SeekRequest,t.currentTime=e,this.apiMedia.seek(t,this.onSeekSuccess.bind(this,e),this.castError.bind(this))}},{key:"onSeekSuccess",value:function(e){l["default"].log("seek success"+e)}},{key:"volume",value:function(){return this.volume_}},{key:"duration",value:function(){return this.apiMedia?this.apiMedia.media.duration:0}},{key:"controls",value:function(){return!1}},{key:"setVolume",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1],n=void 0,o=void 0;return this.apiMedia?(o=new chrome.cast.Volume,o.level=e,o.muted=t,this.volume_=o.level,this.muted_=t,n=new chrome.cast.media.VolumeRequest,n.volume=o,this.apiMedia.setVolume(n,this.mediaCommandSuccessCallback.bind(this,"Volume changed"),this.castError.bind(this)),this.trigger("volumechange")):void 0}},{key:"mediaCommandSuccessCallback",value:function(e){l["default"].log(e)}},{key:"muted",value:function(){return this.muted_}},{key:"setMuted",value:function(e){return this.setVolume(this.volume_,e)}},{key:"supportsFullScreen",value:function(){return!1}},{key:"resetSrc_",value:function(e){e()}},{key:"dispose",value:function(){this.resetSrc_(Function.prototype),s(Object.getPrototypeOf(t.prototype),"dispose",this).call(this,this)}}]),t}(d);f.prototype.paused_=!1,f.prototype.options_={},f.prototype.timerStep=1e3,f.isSupported=function(){return!0},d.withSourceHandlers(f),f.nativeSourceHandler={},f.nativeSourceHandler.canPlayType=function(e){var t=/^application\/(?:dash\+xml|(x-|vnd\.apple\.)mpegurl)/i,n=/^video\/(mpd|mp4|webm|m3u8)/i;return t.test(e)?"probably":n.test(e)?"maybe":""},f.nativeSourceHandler.canHandleSource=function(e){return e.type?f.nativeSourceHandler.canPlayType(e.type):e.src?f.nativeSourceHandler.canPlayType(e.src):""},f.nativeSourceHandler.handleSource=function(e,t){t.src(e.src)},f.nativeSourceHandler.dispose=function(){},f.registerSourceHandler(f.nativeSourceHandler),f.prototype.featuresVolumeControl=!0,f.prototype.featuresPlaybackRate=!1,f.prototype.movingMediaElementInDOM=!1,f.prototype.featuresFullscreenResize=!1,f.prototype.featuresTimeupdateEvents=!1,f.prototype.featuresProgressEvents=!1,f.prototype.featuresNativeTextTracks=!0,f.prototype.featuresNativeAudioTracks=!0,f.prototype.featuresNativeVideoTracks=!1,l["default"].options.chromecast={},c.registerComponent("Chromecast",f),d.registerTech("Chromecast",f),n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,l=r(u),c=e("./component/control-bar/chromecast-button"),d=(r(c),e("./tech/chromecast")),f=(r(d),l["default"].getComponent("Component")),p=function(e){function t(e,n){i(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),t}(f);p.prototype.options_={},l["default"].options.children.chromecast={},l["default"].addLanguage("en",{"CASTING TO":"WIEDERGABE AUF"}),l["default"].addLanguage("de",{"CASTING TO":"WIEDERGABE AUF"}),l["default"].addLanguage("it",{"CASTING TO":"PLAYBACK SU"}),l["default"].addLanguage("fr",{"CASTING TO":"CAST EN COURS SUR"});var h=window.navigator.userAgent;l["default"].browser.IS_EDGE=/Edge/i.test(h),f.registerComponent("Chromecast",p),n["default"]=p,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./component/control-bar/chromecast-button":21,"./tech/chromecast":23}],25:[function(e,t,n){(function(t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},u="undefined"!=typeof window?window.videojs:"undefined"!=typeof t?t.videojs:null,l=o(u),c=e("xhr"),d=o(c),f=e("global/window"),p=o(f),h=e("global/document"),y=o(h),v=e("./utils.js"),m=n(v),b=l["default"].getComponent("Component"),g=l["default"].getComponent("Flash"),w=function(e){function t(e,n){r(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n);var o=this.player().manifestUrl||this.player().currentSrc();this.browserInfo=m.getBrowser(),this.pathUrl=o.match(t.URL_MATCH)||["undefined","undefined"],this.setupTriggers()}return i(t,e),a(t,[{key:"dispose",value:function(){this.clearInterval(this.intervalPing),this.setupTriggers("off")}},{key:"eventHandler",value:function(e){var n={type:e.type},o=!1;switch(n.type){case"error":var r=this.player().error();r=r||{code:-1,message:"cant get error message"},n.number=r.code,n.message=r.message;break;case"dispose":case"ended":n.type===this.oldType&&(o=!0),n.type="stop";break;case"loadstart":o=!0;break;case"firstplay":n.type="start",this.intervalPing=this.setInterval(this.onPing,t.INTERVAL_PING);break;case"waiting":n.type="buffering";break;case"bandwidthIncrease":case"bandwidthDecrease":}this.oldType=n.type,o||this.notify(n)}},{key:"onPing",value:function(){this.player().trigger("ping")}},{key:"setupTriggers",value:function(e){var t=e||"on",n=this.options_.trackEvents,o=this.player(),r=n.length-1;for(r;r>=0;r--){var i=t;"firstplay"===n[r]&&"on"===t&&(i="one"),o[i](n[r],l["default"].bind(this,this.eventHandler))}}},{key:"pick",value:function(e,t,n){var o={};return"string"==typeof t&&(t=[t]),Object.keys(e).forEach(function(n){t.indexOf(n)>-1&&(o[n]=e[n])},n),o}},{key:"getRequiredKeys",value:function(e){return t.BASE_KEYS.concat(t.REQUIRED_KEY[e]||[])}},{key:"notify",value:function(e){var n=this.player(),o=p["default"].innerWidth||y["default"].documentElement.clientWidth||y["default"].body.clientWidth,r=p["default"].innerHeight||y["default"].documentElement.clientHeight||y["default"].body.clientHeight;e.user_id=this.options_.user_id,e.fqdn=this.pathUrl[1],e.os=this.browserInfo.os,e.os_version=this.browserInfo.osVersion.toString(),e.web_browser=this.browserInfo.browser.toString(),e.web_browser_version=this.browserInfo.version?this.browserInfo.version.toString():"",e.resolution_size=o+"x"+r,e.flash_version=g.version().join(","),e.html5_video=n.techName_?"FLash"!==n.techName_||"DashAs"!==n.techName_:"undefined",e.relative_url=this.pathUrl[2],e.timeout=!1,e.frames_dropped=0;try{var i=n.techGet_("getPlaybackStatistics");this.metrics_=l["default"].mergeOptions(this.metrics_,i),e.video_bitrate=this.metrics_.video.bandwidth>0?Math.max(-1,Math.round(this.metrics_.video.bandwidth/1e3)):-1,e.audio_bitrate=this.metrics_.audio.bandwidth>0?Math.max(-1,Math.round(this.metrics_.audio.bandwidth/1e3)):-1,e.chunks_from_cdn=this.metrics_.p2pweb.chunksFromCDN,e.chunks_from_p2p=this.metrics_.p2pweb.chunksFromP2P,e.startup_time=this.metrics_.p2pweb.startupTime;var a=this.pick(e,this.getRequiredKeys(e.type)),s={json:a,uri:this.options_.url,method:"POST",headers:{"Content-Type":"application/json"}};t.xhr(s,function(e){if(e)throw new Error(e.message)})}catch(u){l["default"].log(u)}}}]),t}(b);w.REQUIRED_KEY={bandwidthIncrease:["video_bitrate","audio_bitrate"],bandwidthDecrease:["video_bitrate","audio_bitrate"],ping:["chunks_from_cdn","chunks_from_p2p"],buffering:[],error:["number","message"],start:["video_bitrate","audio_bitrate","os","os_version","web_browser","web_browser_version","resolution_size","flash_version","html5_video","relative_url"],stop:["timeout","frames_dropped"]},w.URL_MATCH=/https?:\/\/(?:www\.)?([-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b)*(\/[\/\d\w\.-]*)*(?:[\?])*(.+)*/,w.prototype.pathUrl="",w.prototype.oldType=null,w.prototype.intervalPing=0,w.prototype.browserInfo={},w.prototype.options_={option:!0,user_id:666,method:"POST",responseType:"json",timeout:1e3,url:"//stats.afrostream.tv/api/v1/events",trackEvents:["loadstart","ping","firstplay","ended","dispose","waiting","error","bandwidthIncrease","bandwidthDecrease"]},w.INTERVAL_PING=6e4,w.BASE_KEYS=["user_id","type","fqdn"],w.METRICS_DATA={bandwidth:-1,bitrateIndex:0,pendingIndex:"",numBitrates:0,bufferLength:0,droppedFrames:0,movingLatency:0,movingDownload:0,movingRatio:0,requestsQueue:0},w.prototype.metrics_={video:l["default"].mergeOptions({},w.METRICS_DATA),audio:l["default"].mergeOptions({},w.METRICS_DATA)},w.xhr=d["default"],b.registerComponent("Metrics",w),l["default"].options.children.metrics={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils.js":27,"global/document":19,"global/window":20,xhr:28}],26:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,a=r(i),s=e("./metrics"),u=r(s),l=function(e){(0,u["default"])(this,e)};a["default"].plugin("metrics",l),n["default"]=l,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./metrics":25}],27:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(){var e={},t="",n="",o="",r="",i=void 0,a=void 0,s=void 0,u=void 0;return i=function(){var e=navigator.userAgent.toLowerCase(),i=/(ie|firefox|chrome|safari|opera)(?:.*version)?(?:[ \/])?([\w.]+)/.exec(e),a=/(mac|win|linux|freebsd|mobile|iphone|ipod|ipad|android|blackberry|j2me|webtv)/.exec(e);e.match(/trident\/7\./)?i&&i.length>2&&(t=i[1],n=i[2]):(t="ie",n=11),a&&a.length>1&&(o=a[1]),r=navigator.oscpu||navigator.appName},a=function(){e.browser=t,e.version=parseInt(n,10)||"",e.os=o,e.osVersion=r},s=function(){"mac"===o&&(o="osx")},u=function(){"safari"===o&&(n=n.substring(0,1))},i(),s(),u(),a(),e}Object.defineProperty(n,"__esModule",{value:!0}),n.getBrowser=r;var i=e("global/document"),a=(o(i),e("global/window"));o(a)},{"global/document":19,"global/window":20}],28:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<e.length;n++)t(e[n])}function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var o=e;return d(t)?(n=t,"string"==typeof e&&(o={uri:e})):o=p(t,{uri:e}),o.callback=n,o}function a(e,t,n){return t=i(e,t,n),s(t)}function s(e){function t(){4===l.readyState&&i()}function n(){var e=void 0;if(l.response?e=l.response:"text"!==l.responseType&&l.responseType||(e=l.responseText||l.responseXML),w)try{e=JSON.parse(e)}catch(t){}return e}function o(e){clearTimeout(h),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,s(e,u)}function i(){if(!p){var t;clearTimeout(h),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var o=u,r=null;0!==t?(o={body:n(),statusCode:t,method:v,headers:{},url:y,rawRequest:l},l.getAllResponseHeaders&&(o.headers=f(l.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),s(r,o,o.body)}}var s=e.callback;if("undefined"==typeof s)throw new Error("callback argument missing");s=c(s);var u={body:void 0,headers:{},statusCode:0,method:v,url:y,rawRequest:l},l=e.xhr||null;l||(l=e.cors||e.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var d,p,h,y=l.url=e.uri||e.url,v=l.method=e.method||"GET",m=e.body||e.data||null,b=l.headers=e.headers||{},g=!!e.sync,w=!1;if("json"in e&&(w=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),m=JSON.stringify(e.json))),l.onreadystatechange=t,l.onload=i,l.onerror=o,l.onprogress=function(){},l.ontimeout=o,l.open(v,y,!g,e.username,e.password),g||(l.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(h=setTimeout(function(){p=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)},e.timeout)),l.setRequestHeader)for(d in b)b.hasOwnProperty(d)&&l.setRequestHeader(d,b[d]);else if(e.headers&&!r(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(m),l}function u(){}var l=e("global/window"),c=e("once"),d=e("is-function"),f=e("parse-headers"),p=e("xtend");t.exports=a,a.XMLHttpRequest=l.XMLHttpRequest||u,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:l.XDomainRequest,o(["get","put","post","patch","head","delete"],function(e){a["delete"===e?"del":e]=function(t,n,o){return n=i(t,n,o),n.method=e.toUpperCase(),s(n)}})},{"global/window":20,"is-function":29,once:30,"parse-headers":33,xtend:34}],29:[function(e,t,n){function o(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=o;var r=Object.prototype.toString},{}],30:[function(e,t,n){function o(e){var t=!1;return function(){return t?void 0:(t=!0,e.apply(this,arguments))}}t.exports=o,o.proto=o(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0})})},{}],31:[function(e,t,n){function o(e,t,n){if(!s(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===u.call(e)?r(e,t,n):"string"==typeof e?i(e,t,n):a(e,t,n)}function r(e,t,n){for(var o=0,r=e.length;r>o;o++)l.call(e,o)&&t.call(n,e[o],o,e)}function i(e,t,n){for(var o=0,r=e.length;r>o;o++)t.call(n,e.charAt(o),o,e)}function a(e,t,n){for(var o in e)l.call(e,o)&&t.call(n,e[o],o,e)}var s=e("is-function");t.exports=o;var u=Object.prototype.toString,l=Object.prototype.hasOwnProperty},{"is-function":29}],32:[function(e,t,n){function o(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=o,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],33:[function(e,t,n){var o=e("trim"),r=e("for-each"),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return r(o(e).split("\n"),function(e){var n=e.indexOf(":"),r=o(e.slice(0,n)).toLowerCase(),a=o(e.slice(n+1));"undefined"==typeof t[r]?t[r]=a:i(t[r])?t[r].push(a):t[r]=[t[r],a]}),t}},{"for-each":31,trim:32}],34:[function(e,t,n){function o(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)r.call(n,o)&&(e[o]=n[o])}return e}t.exports=o;var r=Object.prototype.hasOwnProperty},{}],35:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(r);if(null===l)return;e=l,t=i,n=a,o=!0,s=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,c=r(l),d=e("./tech/media"),f=(r(d),e("./tech/dash")),p=(r(f),e("./tech/dashas")),h=(r(p),"undefined"!=typeof window?window.dashjs:"undefined"!=typeof o?o.dashjs:null),y=e("./component/control-bar/"),v=(r(y),e("videojs-metrics")),m=(r(v),e("videojs-chromecast")),b=(r(m),c["default"].getComponent("Component")),g=c["default"].getComponent("ControlBar"),w=function(e){function t(e,n,o){i(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,o),e.one("loadstart",c["default"].bind(this,this.onLoadStart)),e.getPlaybackStatistics=this.getPlaybackStatistics.bind(this)}return a(t,e),s(t,[{key:"onLoadStart",value:function(){this.addMediaPlayerHandlers()}},{key:"addMediaPlayerHandlers",value:function(){this.player().on(h.MediaPlayer.events.STREAM_INITIALIZED,this.onInitialized.bind(this)),this.player().on(h.MediaPlayer.events.METRIC_CHANGED,this.onMetricChanged.bind(this))}},{key:"onMetricChanged",value:function(e){if("video"===e.stream||"audio"===e.stream||"p2pweb"===e.stream){var t=this.player().getCribbedMetricsFor(e.stream);if(t)switch(e.stream){case"video":t.bandwidth!==this.oldBandwidth&&(this.tech_.featuresBitrate=t,this.player().trigger(t.bandwidth>this.oldBandwidth?"bandwidthIncrease":"bandwidthDecrease"),this.oldBandwidth=t.bandwidth);break;case"p2pweb":t.chunksFromP2P!==this.oldChunksFromP2P&&(this.tech_.featuresBitrate=t,this.player().trigger("chunksFromP2P"),this.oldChunksFromP2P=t.chunksFromP2P)}}}},{key:"onInitialized",value:function(e,t){t&&this.player().error(t)}},{key:"audioTracks",value:function(){return this.player().tech_&&this.player().techGet_("audioTracks")}},{key:"setAudioTrack",value:function(e){return this.player().tech_&&this.player().techCall_("setAudioTrack",e)}},{key:"videoTracks",value:function(){return this.player().tech_&&this.player().techGet_("videoTracks")}},{key:"setVideoTrack",value:function(e){return this.player().tech_&&this.player().tech_.setVideoTrack(e)}},{key:"getPlaybackStatistics",value:function(){return this.player().tech_&&this.player().tech_.getPlaybackStatistics()}},{key:"getCribbedMetricsFor",value:function(e){return this.player().tech_&&this.player().tech_.getCribbedMetricsFor(e)}}]),t}(b);w.prototype.options_={},w.prototype.oldBandwidth=0,w.prototype.oldChunksFromP2P=0,w.prototype.streamInfo=null,w.prototype.tech_=null,c["default"].options.children.push("afrostream"),g.prototype.options_.children.splice(11,0,g.prototype.options_.children.splice(1,1)[0]),b.registerComponent("Afrostream",w),n["default"]=w,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./component/control-bar/":1,"./tech/dash":15,"./tech/dashas":16,"./tech/media":17,"videojs-chromecast":22,"videojs-metrics":26}]},{},[35])(35)});