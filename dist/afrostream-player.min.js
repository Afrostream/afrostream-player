/**
 * afrostream-player
 * @version 2.0.0
 * @copyright 2016 Afrostream, Inc.
 * @license Apache-2.0
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.afrostreamPlayer=e()}}(function(){return function e(t,n,o){function r(a,u){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!u&&l)return l(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return r(n?n:e)},s,s.exports,e,t,n,o)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},c="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(c),d=e("./audio-track-menu-item"),f=r(d),p=e("./off-audio-track-menu-item"),h=r(p),y=s["default"].getComponent("Component"),v=s["default"].getComponent("ControlBar"),b=s["default"].getComponent("MenuButton"),g=function(e){function t(e,n){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n);var o=this.player_.audioTracks();if(this.items.length<=1&&this.hide(),o){var r=this.update.bind(this);o.addEventListener("removetrack",r),o.addEventListener("addtrack",r),this.player_.on("dispose",function(){o.removeEventListener("removetrack",r),o.removeEventListener("addtrack",r)})}}return a(t,e),u(t,[{key:"buildCSSClass",value:function(){return"vjs-audio-button "+l(Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"createItems",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];e.push(new h["default"](this.player_,{kind:this.kind_}));var t=this.player_.audioTracks();if(!t)return e;for(var n=0;n<t.length;n++){var o=t[n];"main"===o.kind&&e.push(new f["default"](this.player_,{selectable:!0,track:o}))}return e}}]),t}(b);g.prototype.kind_="audio",g.prototype.controlText_="Audio Selection",v.prototype.options_.children.splice(12,0,"audioTrackButton"),y.registerComponent("AudioTrackButton",g),n["default"]=g,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./audio-track-menu-item":2,"./off-audio-track-menu-item":5}],2:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,c=o(l),s=c["default"].getComponent("Component"),d=c["default"].getComponent("MenuItem"),f=function(e){function t(e,n){var o=this;r(this,t);var i=n.track,a=e.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i["default"]||i.enabled===!0,u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.track=i,a&&!function(){var e=o.handleTracksChange.bind(o);a.addEventListener("change",e),o.on("dispose",function(){a.removeEventListener("change",e)})}()}return i(t,e),a(t,[{key:"handleClick",value:function(e){var n=(this.track.kind,this.player_.audioTracks());if(u(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this,e),n)for(var o=0;o<n.length;o++){var r=n[o];r.enabled=r===this.track}}},{key:"handleTracksChange",value:function(){this.selected(this.track.enabled)}}]),t}(d);s.registerComponent("AudioTrackMenuItem",f),n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},c="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(c),d=e("./caption-track-menu-item"),f=r(d),p=e("./off-caption-track-menu-item"),h=r(p),y=s["default"].getComponent("Component"),v=s["default"].getComponent("ControlBar"),b=s["default"].getComponent("CaptionsButton"),g=function(e){function t(e,n){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),u(t,[{key:"createItems",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];e.push(new h["default"](this.player_,{kind:this.kind_,mode:"hidden"}));var t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var o=t[n];o.kind===this.kind_&&e.push(new f["default"](this.player_,{selectable:!0,track:o}))}return e}}]),t}(b);g.prototype.kind_="captions",g.prototype.controlText_="Captions",v.prototype.options_.children.splice(12,1,"captionTrackButton"),y.registerComponent("CaptionTrackButton",g),n["default"]=g,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./caption-track-menu-item":4,"./off-caption-track-menu-item":6}],4:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,c=o(l),s=c["default"].getComponent("Component"),d=c["default"].getComponent("MenuItem"),f=function(e){function t(e,n){var o=this;r(this,t);var i=n.track,a=e.textTracks();n.label=i.label||i.language||"Unknown",n.selected=i["default"]||"showing"===i.mode,u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.track=i,a&&(a.addEventListener("change",this.handleTracksChange.bind(this)),this.on("dispose",function(){a.removeEventListener("change",this.handleTracksChange.bind(this))})),a&&void 0===a.onchange&&!function(){var e=void 0;o.on(["tap","click"],function(){if("object"!=typeof window.Event)try{e=new window.Event("change")}catch(t){}e||(e=document.createEvent("Event"),e.initEvent("change",!0,!0)),a.dispatchEvent(e)})}()}return i(t,e),a(t,[{key:"handleClick",value:function(e){var n=this.track.kind,o=this.player_.textTracks();if(u(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this,e),o)for(var r=0;r<o.length;r++){var i=o[r];i.kind===n&&(i===this.track?i.mode="showing":i.mode="Dash"===this.player_.techName_?"hidden":"disabled")}}},{key:"handleTracksChange",value:function(){this.selected("showing"===this.track.mode)}}]),t}(d);s.registerComponent("CaptionTrackMenuItem",f),n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},c="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(c),d=e("./audio-track-menu-item"),f=r(d),p=s["default"].getComponent("Component"),h=function(e){function t(e,n){i(this,t),n.track={kind:n.kind,player:e,label:n.kind+" off","default":!1,enabled:!1},n.selectable=!0,l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),u(t,[{key:"handleTracksChange",value:function(e){for(var t=this.player().audioTracks(),n=!0,o=0,r=t.length;r>o;o++){var i=t[o];if("main"===i.kind&&i.enabled){n=!1;break}}this.selected(n)}}]),t}(f["default"]);p.registerComponent("OffAudioTrackMenuItem",h),n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./audio-track-menu-item":2}],6:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},c="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(c),d=e("./caption-track-menu-item"),f=r(d),p=s["default"].getComponent("Component"),h=function(e){function t(e,n){i(this,t),n.track={kind:n.kind,player:e,label:n.kind+" off","default":!1,mode:"hidden"},n.selectable=!0,l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.selected(!0)}return a(t,e),u(t,[{key:"handleTracksChange",value:function(e){for(var t=this.player().textTracks(),n=!0,o=0,r=t.length;r>o;o++){var i=t[o];if(i.kind===this.track.kind&&"showing"===i.mode){n=!1;break}}this.selected(n)}}]),t}(f["default"]);p.registerComponent("OffCaptionTrackMenuItem",h),n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./caption-track-menu-item":4}],7:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},c="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(c),d=e("./video-track-menu-item"),f=r(d),p=s["default"].getComponent("Component"),h=function(e){function t(e,n){i(this,t),n.track={kind:n.kind,player:e,label:n.kind+" off","default":!1,selected:!1},n.selectable=!0,l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),u(t,[{key:"handleTracksChange",value:function(e){for(var t=this.player().videoTracks(),n=!0,o=0,r=t.length;r>o;o++){var i=t[o];if("main"===i.kind&&i.selected){n=!1;break}}this.selected(n)}}]),t}(f["default"]);p.registerComponent("OffVideoTrackMenuItem",h),n["default"]=h,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./video-track-menu-item":9}],8:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},c="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(c),d=e("./video-track-menu-item"),f=r(d),p=e("./off-video-track-menu-item"),h=r(p),y=s["default"].getComponent("Component"),v=s["default"].getComponent("ControlBar"),b=s["default"].getComponent("MenuButton"),g=function(e){function t(e,n){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n);var o=this.player_.videoTracks();if(this.items.length<=1&&this.hide(),o){var r=this.update.bind(this);o.addEventListener("removetrack",r),o.addEventListener("addtrack",r),this.player_.on("dispose",function(){o.removeEventListener("removetrack",r),o.removeEventListener("addtrack",r)})}}return a(t,e),u(t,[{key:"buildCSSClass",value:function(){return"vjs-video-button "+l(Object.getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)}},{key:"createItems",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];e.push(new h["default"](this.player_,{kind:"ABR"}));var t=this.player_.videoTracks();if(!t)return e;for(var n=0;n<t.length;n++){var o=t[n];"main"===o.kind&&e.push(new f["default"](this.player_,{selectable:!0,track:o}))}return e}}]),t}(b);g.prototype.kind_="video",g.prototype.controlText_="Video Selection",v.prototype.options_.children.splice(12,0,"videoTrackButton"),y.registerComponent("VideoTrackButton",g),n["default"]=g,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./off-video-track-menu-item":7,"./video-track-menu-item":9}],9:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,c=o(l),s=c["default"].getComponent("Component"),d=c["default"].getComponent("MenuItem"),f=function(e){function t(e,n){var o=this;r(this,t);var i=n.track,a=e.videoTracks();n.label=i.label||i.language||"Unknown",n.selected=i["default"]||i.selected===!0,u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.track=i,a&&!function(){var e=o.handleTracksChange.bind(o);a.addEventListener("change",e),o.on("dispose",function(){a.removeEventListener("change",e)})}()}return i(t,e),a(t,[{key:"handleClick",value:function(e){var n=(this.track.kind,this.player_.videoTracks());if(u(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this,e),n)for(var o=0;o<n.length;o++){var r=n[o];r.selected=r===this.track}}},{key:"handleTracksChange",value:function(){this.selected(this.track.selected)}}]),t}(d);s.registerComponent("VideoTrackMenuItem",f),n["default"]=f,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},c="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(c),d="undefined"!=typeof window?window.dashjs:"undefined"!=typeof o?o.dashjs:null,f=e("global/window"),p=r(f),h=s["default"].getComponent("Component"),y=s["default"].getComponent("Tech"),v=s["default"].getComponent("Html5"),b=function(e){function t(e,n){var o=this;i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n);var r=void 0;r=this.audioTracks(),r&&!function(){var e=o.handleAudioTracksChange.bind(o);r.addEventListener("change",e),o.on("dispose",function(){r.removeEventListener("change",e)})}(),r=this.videoTracks(),r&&!function(){var e=o.handleVideoTracksChange.bind(o);r.addEventListener("change",e),o.on("dispose",function(){r.removeEventListener("change",e)})}()}return a(t,e),u(t,[{key:"src",value:function(e){var t=this;return void 0===e?this.el_.src:(this.keySystemOptions_=this.buildDashJSProtData(this.options_.protData),this.context_=this.context_||{},this.mediaPlayer_=(0,d.MediaPlayer)(this.context_).create(),this.mediaPlayer_.initialize(),this.mediaPlayer_.attachView(this.el()),this.mediaPlayer_.on(d.MediaPlayer.events.STREAM_INITIALIZED,this.onInitialized.bind(this)),this.mediaPlayer_.on(d.MediaPlayer.events.TEXT_TRACKS_ADDED,this.onTextTracksAdded.bind(this)),this.mediaPlayer_.on(d.MediaPlayer.events.METRIC_CHANGED,this.onMetricChanged.bind(this)),this.player_.options().autoplay||this.mediaPlayer_.setAutoPlay(!1),this.mediaPlayer_.setScheduleWhilePaused(this.options_.scheduleWhilePaused),this.mediaPlayer_.setAutoSwitchQuality(this.options_.autoSwitch),this.mediaPlayer_.setInitialMediaSettingsFor("audio",{lang:this.options_.lang}),this.mediaPlayer_.setInitialMediaSettingsFor("video",{lang:this.options_.lang}),this.mediaPlayer_.enableBufferOccupancyABR(this.options_.bolaEnabled),this.player_.on("texttrackchange",this.textTracksChange.bind(this)),this.player_.trigger("loadstart"),this.ready(function(){t.mediaPlayer_.retrieveManifest(e,t.initializeDashJS.bind(t))}),void 0)}},{key:"onInitialized",value:function(e,t){this.trigger(d.MediaPlayer.events.STREAM_INITIALIZED),t&&this.player_.error(t);var n=(this.mediaPlayer_.getBitrateInfoListFor("video"),this.mediaPlayer_.getTracksFor("audio")),o=this.mediaPlayer_.getTracksFor("video"),r=this.mediaPlayer_.getAutoSwitchQuality(),i=this.mediaPlayer_.getInitialMediaSettingsFor("audio"),a=(this.mediaPlayer_.getInitialMediaSettingsFor("video"),this.mediaPlayer_.getInitialBitrateFor("video")),u=void 0;for(u=0;u<n.length;u++){var l=n[u],c=this.addAudioTrack("main",l.label,l.lang);c.enabled=c.language===i.lang}for(u=0;u<o.length;u++)for(var l=o[u],s=l.bitrateList,f=0;f<s.length;f++){var p=s[f]/1e3,h=this.addVideoTrack("main",p,p);h.selected=!r&&a===p}}},{key:"onMetricChanged",value:function(e){if("video"===e.mediaType||"audio"===e.mediaType||"p2pweb"===e.mediaType){var t=this.getCribbedMetricsFor(e.mediaType);if(t){this.metrics_[e.mediaType]=s["default"].mergeOptions(this.metrics_[e.mediaType],t);var n={type:d.MediaPlayer.events.METRIC_CHANGED,data:e.data};this.trigger(n)}}}},{key:"getCribbedMetricsFor",value:function(e){var t=this.mediaPlayer_.getMetricsFor(e),n=this.mediaPlayer_.getDashMetrics(),o=void 0,r=void 0,i=void 0,a=void 0,u=void 0,l=void 0,c=void 0,s=void 0,d=0,f={},p={},h={},y=0,v=void 0,b=function(e,t){var n,o,r,i;n=t.slice(-20).filter(function(t){return t.responsecode>=200&&t.responsecode<300&&!!t._mediaduration&&"MediaSegment"===t.type&&t._stream===e}).slice(-4),n.length>0&&(r=n.map(function(e){return Math.abs(e.tresponse.getTime()-e.trequest.getTime())/1e3}),f[e]={average:r.reduce(function(e,t){return e+t})/r.length,high:r.reduce(function(e,t){return t>e?t:e}),low:r.reduce(function(e,t){return t>e?e:t}),count:r.length},o=n.map(function(e){return Math.abs(e._tfinish.getTime()-e.tresponse.getTime())/1e3}),p[e]={average:o.reduce(function(e,t){return e+t})/o.length,high:o.reduce(function(e,t){return t>e?t:e}),low:o.reduce(function(e,t){return t>e?e:t}),count:o.length},i=n.map(function(e){return e._mediaduration}),h[e]={average:i.reduce(function(e,t){return e+t})/o.length/p[e].average,high:i.reduce(function(e,t){return t>e?t:e})/p[e].low,low:i.reduce(function(e,t){return t>e?e:t})/p[e].high,count:i.length})};if(t&&n){o=n.getCurrentRepresentationSwitch(t),r=n.getCurrentBufferLevel(t),i=n.getHttpRequests(t),a=n.getCurrentDroppedFrames(t),v=n.getRequestsQueue(t),b("video",i),b("audio",i);var g=this.streamInfo?this.streamInfo.index:0;return null!==o&&(u=n.getIndexForRepresentation(o.to,g),l=n.getBandwidthForRepresentation(o.to,g),l/=1e3,l=Math.round(l)),s=n.getMaxIndexForBufferType(e,g),null!==r&&(d=r.toPrecision(5)),null!==a&&(y=a.droppedFrames),(isNaN(l)||void 0===l)&&(l=0),(isNaN(u)||void 0===u)&&(u=0),(isNaN(s)||void 0===s)&&(s=0),(isNaN(d)||void 0===d)&&(d=0),c=this.mediaPlayer_.getQualityFor(e),{bandwidthValue:l,bitrateIndexValue:u+1,pendingIndex:c!==u?"(-> "+(c+1)+")":"",numBitratesValue:s,bufferLengthValue:d,droppedFramesValue:y,movingLatency:f,movingDownload:p,movingRatio:h,requestsQueue:v}}return null}},{key:"buildDashJSProtData",value:function(e){var t={};return e?(Object.keys(e).forEach(function(e,t){t.licenseUrl&&(t.laURL=t.licenseUrl,delete t.licenseUrl)}),e):t}},{key:"initializeDashJS",value:function(e,t){var n=this,o={};return t?(this.showErrors(),this.triggerReady(),void this.dispose()):(this.getWidevineProtectionData&&(o=this.getWidevineProtectionData(e),this.keySystemOptions_=s["default"].mergeOptions(this.keySystemOptions_,o)),void this.resetSrc_(function(){n.afterMediaKeysReset(e)}))}},{key:"onTextTracksAdded",value:function(e){var t=e.tracks;if(t)for(var n,o=t.length,r=0;o>r&&(n=t[r],"captions"===n.kind);r++)"fra"===n.lang&&(n.defaultTrack=!0,this.mediaPlayer_.setTextTrack(r))}},{key:"textTracksChange",value:function(){var e=this.textTracks();if(e)for(var t=0;t<e.length;t++){var n=e[t];"showing"===n.mode&&this.mediaPlayer_.setTextTrack(t)}}},{key:"handleAudioTracksChange",value:function(){var e=this.audioTracks();if(e&&this.playbackInitialized)for(var t=this.mediaPlayer_.getTracksFor("audio"),n=0;n<e.length;n++){var o=e[n];o.enabled&&this.mediaPlayer_.setCurrentTrack(t[n])}}},{key:"handleVideoTracksChange",value:function(){var e=this.videoTracks();if(e&&this.playbackInitialized){var t=null!==e.selectedIndex&&!isNaN(e.selectedIndex)&&e.selectedIndex%1===0;this.mediaPlayer_.setAutoSwitchQuality(!t),t&&this.mediaPlayer_.setQualityFor("video",e.selectedIndex)}}},{key:"afterMediaKeysReset",value:function(e){this.showErrors(),this.mediaPlayer_.attachSource(e,null,this.keySystemOptions_,"fr"),this.triggerReady()}},{key:"showErrors",value:function(){var e=this;this.setTimeout(function(){e.player_.removeClass("vjs-dashjs-hide-errors")},250)}},{key:"resetSrc_",value:function(e){this.el()&&(this.el().src="",this.el().setMediaKeys?this.el().setMediaKeys(null).then(e,e):e())}},{key:"dispose",value:function(){this.mediaPlayer_&&this.mediaPlayer_.reset(),this.resetSrc_(Function.prototype),l(Object.getPrototypeOf(t.prototype),"dispose",this).call(this,this)}}]),t}(v);b.prototype.options_={lang:"fr",autoSwitch:!0,bolaEnabled:!0,scheduleWhilePaused:!1,buffer:{minBufferTime:12,lowBufferThreshold:4,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:300,longFormContentDurationThreshold:600,richBufferThreshold:20,bufferToKeep:30,bufferPruningInterval:30},protData:{}},b.isSupported=function(){return v.isSupported()&&!!p["default"].MediaSource},y.withSourceHandlers(b),b.nativeSourceHandler={},b.nativeSourceHandler.canPlayType=function(e){var t=/^application\/dash\+xml/i,n=/\.mpd/i;return t.test(e)?"probably":n.test(e)?"maybe":""},b.nativeSourceHandler.canHandleSource=function(e){return e.type?b.nativeSourceHandler.canPlayType(e.type):e.src?b.nativeSourceHandler.canPlayType(e.src):""},b.nativeSourceHandler.handleSource=function(e,t){t.src(e.src)},b.nativeSourceHandler.dispose=function(){},b.registerSourceHandler(b.nativeSourceHandler),s["default"].options.dash={},h.registerComponent("Dash",b),y.registerTech("Dash",b),n["default"]=b,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":12}],11:[function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var n="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,o=t(n),r=o["default"].getComponent("MediaTechController");r.METRICS_DATA={bandwidth:-1,bitrateIndex:0,pendingIndex:"",numBitrates:0,bufferLength:0,droppedFrames:0,movingLatency:0,movingDownload:0,movingRatio:0,requestsQueue:0},r.prototype.metrics_={video:o["default"].mergeOptions({bandwidth:-1},r.METRICS_DATA),audio:o["default"].mergeOptions({bandwidth:-1},r.METRICS_DATA),p2pweb:{chunksFromCDN:0,chunksFromP2P:0,chunksSent:0,bufferLength:-1,swarmSize:-1,p2pRatio:-1,startupTime:-1}},r.prototype.mediaPlayer=null,r.prototype.mediaPlayer=function(){return this.mediaPlayer_},r.prototype.getPlaybackStatistics=function(){return this.metrics_},r.prototype.getCribbedMetricsFor=function(e){return this.metrics_[e]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){(function(o){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){
if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=function(e,t,n){for(var o=!0;o;){var r=e,i=t,a=n;o=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(a)}var c=Object.getPrototypeOf(r);if(null===c)return;e=c,t=i,n=a,o=!0,u=c=void 0}},c="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=r(c),d=e("./tech/media"),f=(r(d),e("./tech/dash")),p=(r(f),"undefined"!=typeof window?window.dashjs:"undefined"!=typeof o?o.dashjs:null),h=e("./component/control-bar/track-controls/caption-track-button"),y=(r(h),e("./component/control-bar/track-controls/audio-track-button")),v=(r(y),e("./component/control-bar/track-controls/video-track-button")),b=(r(v),s["default"].getComponent("Component")),g=function(e){function t(e,n,o){i(this,t),l(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n,o),e.one("loadstart",s["default"].bind(this,this.onLoadStart))}return a(t,e),u(t,[{key:"onLoadStart",value:function(){this.addMediaPlayerHandlers()}},{key:"addMediaPlayerHandlers",value:function(){this.player().on(p.MediaPlayer.events.STREAM_INITIALIZED,this.onInitialized.bind(this)),this.player().on(p.MediaPlayer.events.METRIC_CHANGED,this.onMetricChanged.bind(this))}},{key:"onMetricChanged",value:function(e){if("video"===e.stream||"audio"===e.stream||"p2pweb"===e.stream){var t=this.player().getCribbedMetricsFor(e.stream);if(t)switch(e.stream){case"video":t.bandwidth!==this.oldBandwidth&&(this.tech_.featuresBitrate=t,this.player().trigger(t.bandwidth>this.oldBandwidth?"bandwidthIncrease":"bandwidthDecrease"),this.oldBandwidth=t.bandwidth);break;case"p2pweb":t.chunksFromP2P!==this.oldChunksFromP2P&&(this.tech_.featuresBitrate=t,this.player().trigger("chunksFromP2P"),this.oldChunksFromP2P=t.chunksFromP2P)}}}},{key:"onInitialized",value:function(e,t){t&&this.player().error(t)}},{key:"audioTracks",value:function(){return this.player().tech_&&this.player().techGet_("audioTracks")}},{key:"setAudioTrack",value:function(e){return this.player().tech_&&this.player().techCall_("setAudioTrack",e)}},{key:"videoTracks",value:function(){return this.player().tech_&&this.player().techGet_("videoTracks")}},{key:"setVideoTrack",value:function(e){return this.player().tech_&&this.player().tech_.setVideoTrack(e)}},{key:"getPlaybackStatistics",value:function(){return this.player().tech_&&this.player().tech_.getPlaybackStatistics()}},{key:"getCribbedMetricsFor",value:function(e){return this.player().tech_&&this.player().tech_.getCribbedMetricsFor(e)}}]),t}(b);g.prototype.options_={},g.prototype.oldBandwidth=0,g.prototype.oldChunksFromP2P=0,g.prototype.streamInfo=null,g.prototype.tech_=null,s["default"].options.children.push("afrostream"),b.registerComponent("Afrostream",g),n["default"]=g,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./component/control-bar/track-controls/audio-track-button":1,"./component/control-bar/track-controls/caption-track-button":3,"./component/control-bar/track-controls/video-track-button":8,"./tech/dash":10,"./tech/media":11}]},{},[13])(13)});