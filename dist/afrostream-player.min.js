/**
 * afrostream-player
 * @version 2.0.0
 * @copyright 2016 Afrostream, Inc.
 * @license Apache-2.0
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.afrostreamPlayer=e()}}(function(){return function e(t,n,o){function i(a,u){if(!n[a]){if(!t[a]){var d="function"==typeof require&&require;if(!u&&d)return d(a,!0);if(r)return r(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[a]={exports:{}};t[a][0].call(s.exports,function(e){var n=t[a][1][e];return i(n?n:e)},s,s.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){(function(o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,r);if(void 0!==u){if("value"in u)return u.value;var d=u.get;if(void 0===d)return;return d.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=r,n=a,o=!0,u=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=i(l),c=e("./caption-track-menu-item"),f=i(c),p=e("./caption-track-menu-item-off"),h=i(p),y=s["default"].getComponent("Component"),v=s["default"].getComponent("CaptionsButton"),g=function(e){function t(e,n){r(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),u(t,[{key:"createItems",value:function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];e.push(new h["default"](this.player_,{kind:this.kind_,mode:"hidden"}));var t=this.player_.textTracks();if(!t)return e;for(var n=0;n<t.length;n++){var o=t[n];o.kind===this.kind_&&e.push(new f["default"](this.player_,{track:o}))}return e}}]),t}(v);y.registerComponent("CaptionTrackButton",g),n["default"]=g,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./caption-track-menu-item":3,"./caption-track-menu-item-off":2}],2:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,r);if(void 0!==u){if("value"in u)return u.value;var d=u.get;if(void 0===d)return;return d.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=r,n=a,o=!0,u=l=void 0}},d="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(d),s=l["default"].getComponent("Component"),c=l["default"].getComponent("MenuItem");(function(e){function t(e,n){i(this,t),n.track={kind:n.kind,player:e,label:n.kind+" off","default":!1,mode:"hidden"},n.selectable=!0,u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.selected(!0)}return r(t,e),a(t,[{key:"handleTracksChange",value:function(e){for(var t=this.player().textTracks(),n=!0,o=0,i=t.length;i>o;o++){var r=t[o];if(r.kind===this.track.kind&&"showing"===r.mode){n=!1;break}}this.selected(n)}}]),t})(c);s.registerComponent("CaptionTrackMenuItemOff",CaptionTrackMenuItemOff),n["default"]=CaptionTrackMenuItemOff,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,r);if(void 0!==u){if("value"in u)return u.value;var d=u.get;if(void 0===d)return;return d.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=r,n=a,o=!0,u=l=void 0}},d="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,l=o(d),s=l["default"].getComponent("Component"),c=l["default"].getComponent("ControlBar"),f=l["default"].getComponent("MenuItem"),p=function(e){function t(e,n){var o=this;i(this,t);var r=n.track,a=e.textTracks();n.label=r.label||r.language||"Unknown",n.selected=r["default"]||"showing"===r.mode,u(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.track=r,a&&(a.addEventListener("change",this.handleTracksChange.bind(this)),this.on("dispose",function(){a.removeEventListener("change",this.handleTracksChange.bind(this))})),a&&void 0===a.onchange&&!function(){var e=void 0;o.on(["tap","click"],function(){if("object"!=typeof window.Event)try{e=new window.Event("change")}catch(t){}e||(e=document.createEvent("Event"),e.initEvent("change",!0,!0)),a.dispatchEvent(e)})}()}return r(t,e),a(t,[{key:"handleClick",value:function(e){var n=this.track.kind,o=this.player_.textTracks();if(u(Object.getPrototypeOf(t.prototype),"handleClick",this).call(this,e),o)for(var i=0;i<o.length;i++){var r=o[i];r.kind===n&&(r===this.track?r.mode="showing":r.mode="Dash"===this.player_.techName_?"hidden":"disabled")}}},{key:"handleTracksChange",value:function(){this.selected("showing"===this.track.mode)}}]),t}(f);c.prototype.options_.children.splice(12,1,"captionTrackButton"),s.registerComponent("CaptionTrackMenuItem",p),n["default"]=p,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var n="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,o=t(n),i=o["default"].getComponent("Player"),r=i.prototype;r.audioTracks=function(){return(void 0).tech_&&(void 0).techGet_("audioTracks")},r.setAudioTrack=function(e){return(void 0).tech_&&(void 0).tech_.setAudioTrack(e)},r.videoTracks=function(){return(void 0).tech_&&(void 0).techGet_("videoTracks")},r.setVideoTrack=function(e){return(void 0).tech_&&(void 0).tech_.setVideoTrack(e)},r.getPlaybackStatistics=function(){return(void 0).tech_&&(void 0).tech_.getPlaybackStatistics()},r.getCribbedMetricsFor=function(e){return(void 0).tech_&&(void 0).tech_.getCribbedMetricsFor(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){(function(o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,r);if(void 0!==u){if("value"in u)return u.value;var d=u.get;if(void 0===d)return;return d.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=r,n=a,o=!0,u=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=i(l),c="undefined"!=typeof window?window.dashjs:"undefined"!=typeof o?o.dashjs:null,f=e("global/window"),p=i(f),h=(s["default"].getComponent("Component"),s["default"].getComponent("Tech")),y=s["default"].getComponent("Html5"),v=function(e){function t(e,n){r(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n)}return a(t,e),u(t,[{key:"setSrc",value:function(e){var t=this;this.keySystemOptions_=this.buildDashJSProtData(this.options().protData),this.context_=this.context_||{},this.mediaPlayer_=(0,c.MediaPlayer)(this.context_).create(),this.mediaPlayer_.initialize(),this.mediaPlayer_.attachView(this.el()),this.mediaPlayer_.on(c.MediaPlayer.events.STREAM_INITIALIZED,this.onInitialized.bind(this)),this.mediaPlayer_.on(c.MediaPlayer.events.TEXT_TRACKS_ADDED,this.onTextTracksAdded.bind(this)),this.mediaPlayer_.on(c.MediaPlayer.events.METRIC_CHANGED,this.onMetricChanged.bind(this)),this.player().options().autoplay||this.mediaPlayer_.setAutoPlay(!1),this.mediaPlayer_.setScheduleWhilePaused(this.options().scheduleWhilePaused),this.mediaPlayer_.setAutoSwitchQuality(this.options().autoSwitch),this.mediaPlayer_.setInitialMediaSettingsFor("audio",{lang:"fr"}),this.player().on("texttrackchange",this.onTextTracksChange.bind(this)),this.player().trigger("loadstart"),this.ready(function(){t.mediaPlayer_.retrieveManifest(e,t.initializeDashJS.bind(t))})}},{key:"onInitialized",value:function(e,t){this.trigger(c.MediaPlayer.events.STREAM_INITIALIZED),t&&this.player().error(t);var n=this.mediaPlayer_.getBitrateInfoListFor("video"),o=this.mediaPlayer_.getTracksFor("audio"),i=this.mediaPlayer_.getAutoSwitchQuality();this.featuresAudioIndex=this.featuresAudioIndex||o.length-1,this.featuresBitrateIndex=i?n.length:this.featuresBitrateIndex||n.length}},{key:"onMetricChanged",value:function(e){if("video"===e.mediaType||"audio"===e.mediaType||"p2pweb"===e.mediaType){var t=this.getCribbedMetricsFor(e.mediaType);if(t){this.metrics_[e.mediaType]=s["default"].mergeOptions(this.metrics_[e.mediaType],t);var n={type:c.MediaPlayer.events.METRIC_CHANGED,data:e.data};this.trigger(n)}}}},{key:"getCribbedMetricsFor",value:function(e){var t=this.mediaPlayer_.getMetricsFor(e),n=this.mediaPlayer_.getDashMetrics(),o=void 0,i=void 0,r=void 0,a=void 0,u=void 0,d=void 0,l=void 0,s=void 0,c=0,f={},p={},h={},y=0,v=void 0,g=function(e,t){var n,o,i,r;n=t.slice(-20).filter(function(t){return t.responsecode>=200&&t.responsecode<300&&!!t._mediaduration&&"MediaSegment"===t.type&&t._stream===e}).slice(-4),n.length>0&&(i=n.map(function(e){return Math.abs(e.tresponse.getTime()-e.trequest.getTime())/1e3}),f[e]={average:i.reduce(function(e,t){return e+t})/i.length,high:i.reduce(function(e,t){return t>e?t:e}),low:i.reduce(function(e,t){return t>e?e:t}),count:i.length},o=n.map(function(e){return Math.abs(e._tfinish.getTime()-e.tresponse.getTime())/1e3}),p[e]={average:o.reduce(function(e,t){return e+t})/o.length,high:o.reduce(function(e,t){return t>e?t:e}),low:o.reduce(function(e,t){return t>e?e:t}),count:o.length},r=n.map(function(e){return e._mediaduration}),h[e]={average:r.reduce(function(e,t){return e+t})/o.length/p[e].average,high:r.reduce(function(e,t){return t>e?t:e})/p[e].low,low:r.reduce(function(e,t){return t>e?e:t})/p[e].high,count:r.length})};if(t&&n){o=n.getCurrentRepresentationSwitch(t),i=n.getCurrentBufferLevel(t),r=n.getHttpRequests(t),a=n.getCurrentDroppedFrames(t),v=n.getRequestsQueue(t),g("video",r),g("audio",r);var m=this.streamInfo?this.streamInfo.index:0;return null!==o&&(u=n.getIndexForRepresentation(o.to,m),d=n.getBandwidthForRepresentation(o.to,m),d/=1e3,d=Math.round(d)),s=n.getMaxIndexForBufferType(e,m),null!==i&&(c=i.toPrecision(5)),null!==a&&(y=a.droppedFrames),(isNaN(d)||void 0===d)&&(d=0),(isNaN(u)||void 0===u)&&(u=0),(isNaN(s)||void 0===s)&&(s=0),(isNaN(c)||void 0===c)&&(c=0),l=this.mediaPlayer_.getQualityFor(e),{bandwidthValue:d,bitrateIndexValue:u+1,pendingIndex:l!==u?"(-> "+(l+1)+")":"",numBitratesValue:s,bufferLengthValue:c,droppedFramesValue:y,movingLatency:f,movingDownload:p,movingRatio:h,requestsQueue:v}}return null}},{key:"buildDashJSProtData",value:function(e){var t={};return e?(Object.keys(e).forEach(function(e,t){t.licenseUrl&&(t.laURL=t.licenseUrl,delete t.licenseUrl)}),e):t}},{key:"initializeDashJS",value:function(e,t){var n=this,o={};return t?(this.showErrors(),this.triggerReady(),void this.dispose()):(this.getWidevineProtectionData&&(o=this.getWidevineProtectionData(e),this.keySystemOptions_=s["default"].mergeOptions(this.keySystemOptions_,o)),void this.resetSrc_(function(){n.afterMediaKeysReset(e)}))}},{key:"onTextTracksAdded",value:function(e){var t=e.tracks;if(t)for(var n,o=t.length,i=0;o>i&&(n=t[i],"captions"===n.kind);i++)"fra"===n.lang&&(n.defaultTrack=!0,this.mediaPlayer_.setTextTrack(i))}},{key:"onTextTracksChange",value:function(){var e=this.player_.textTracks();if(e)for(var t=0;t<e.length;t++){var n=e[t];"showing"===n.mode&&this.mediaPlayer_.setTextTrack(t)}}},{key:"afterMediaKeysReset",value:function(e){this.showErrors(),this.mediaPlayer_.attachSource(e,null,this.keySystemOptions_,"fr"),this.triggerReady()}},{key:"showErrors",value:function(){var e=this;this.setTimeout(function(){e.player().removeClass("vjs-dashjs-hide-errors")},250)}},{key:"resetSrc_",value:function(e){this.el()&&(this.el().src="",this.el().setMediaKeys?this.el().setMediaKeys(null).then(e,e):e())}},{key:"dispose",value:function(){this.mediaPlayer_&&this.mediaPlayer_.reset(),this.resetSrc_(Function.prototype),s["default"].Html5.prototype.dispose.call(this)}}]),t}(y);v.prototype.options_={autoSwitch:!0,scheduleWhilePaused:!1,buffer:{minBufferTime:12,lowBufferThreshold:4,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:300,longFormContentDurationThreshold:600,richBufferThreshold:20,bufferToKeep:30,bufferPruningInterval:30},protData:{}},v.isSupported=function(){return y.isSupported()&&!!p["default"].MediaSource},h.withSourceHandlers(v),v.nativeSourceHandler={},v.nativeSourceHandler.canPlayType=function(e){var t=/^application\/dash\+xml/i,n=/\.mpd/i;return t.test(e)?"probably":n.test(e)?"maybe":""},v.nativeSourceHandler.canHandleSource=function(e){return e.type?v.nativeSourceHandler.canPlayType(e.type):e.src?v.nativeSourceHandler.canPlayType(e.src):""},v.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},v.nativeSourceHandler.dispose=function(){},v.registerSourceHandler(v.nativeSourceHandler),s["default"].options.dash={},h.registerTech("Dash",v),n["default"]=v,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":7}],6:[function(e,t,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}var n="undefined"!=typeof window?window.videojs:"undefined"!=typeof e?e.videojs:null,o=t(n),i=o["default"].getComponent("MediaTechController"),r=i.prototype;i.METRICS_DATA={bandwidth:-1,bitrateIndex:0,pendingIndex:"",numBitrates:0,bufferLength:0,droppedFrames:0,movingLatency:0,movingDownload:0,movingRatio:0,requestsQueue:0},r.metrics_={video:o["default"].mergeOptions({bandwidth:-1},i.METRICS_DATA),audio:o["default"].mergeOptions({bandwidth:-1},i.METRICS_DATA),p2pweb:{chunksFromCDN:0,chunksFromP2P:0,chunksSent:0,bufferLength:-1,swarmSize:-1,p2pRatio:-1,startupTime:-1}},r.mediaPlayer_=null,r.mediaPlayer=function(){return(void 0).mediaPlayer_},r.getPlaybackStatistics=function(){return(void 0).metrics_},r.getCribbedMetricsFor=function(e){return(void 0).metrics_[e]},r.videoTracks_=null,r.videoTracks=function(e){return void 0!==e&&((void 0).videoTracks_=e),(void 0).videoTracks_||new o["default"].TextTrackList},r.audioTracks_=null,r.audioTracks=function(e){return void 0!==e&&((void 0).audioTracks_=e),(void 0).audioTracks_||new o["default"].TextTrackList},r.setAudioTrack=function(e){for(var t=(void 0).player().audioTracks(),n=0;n<t.length;n++){var o=t[n];o.enabled=o===e}(void 0).featuresAudioIndex=parseInt(e.id||e.index,10),(void 0).trigger("audiochange")},r.setVideoTrack=function(e){for(var t=(void 0).player().videoTracks(),n=0;n<t.length;n++){var o=t[n];o.enabled=o.qualityIndex===e.qualityIndex}(void 0).featuresBitrateIndex=e.qualityIndex,(void 0).trigger("bitratechange")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){(function(e){"undefined"!=typeof window?t.exports=window:"undefined"!=typeof e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,n){(function(o){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),d=function(e,t,n){for(var o=!0;o;){var i=e,r=t,a=n;o=!1,null===i&&(i=Function.prototype);var u=Object.getOwnPropertyDescriptor(i,r);if(void 0!==u){if("value"in u)return u.value;var d=u.get;if(void 0===d)return;return d.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=r,n=a,o=!0,u=l=void 0}},l="undefined"!=typeof window?window.videojs:"undefined"!=typeof o?o.videojs:null,s=i(l),c=e("./tech/dash"),f=(i(c),e("./tech/media")),p=(i(f),e("./core/player")),h=(i(p),e("./component/control-bar/text-track-controls/caption-track-button")),y=(i(h),s["default"].getComponent("Component")),v=function(e){function t(e,n){r(this,t),d(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e,n),this.player().one("loadstart",s["default"].bind(this,this.onLoadStart))}return a(t,e),u(t,[{key:"onLoadStart",value:function(){this.addMediaPlayerHandlers()}},{key:"addMediaPlayerHandlers",value:function(){this.player().on(MediaPlayer.events.STREAM_INITIALIZED,s["default"].bind(this,this.onInitialized)),this.player().on(MediaPlayer.events.METRIC_CHANGED,s["default"].bind(this,this.onMetricChanged))}},{key:"onMetricChanged",value:function(e){if("video"===e.data.stream||"audio"===e.data.stream||"p2pweb"===e.data.stream){var t=this.player().getCribbedMetricsFor(e.data.stream);if(t)switch(e.data.stream){case"video":t.bandwidth!==this.oldBandwidth&&(this.tech_.featuresBitrate=t,this.player().trigger(t.bandwidth>this.oldBandwidth?"bandwidthIncrease":"bandwidthDecrease"),this.oldBandwidth=t.bandwidth);break;case"p2pweb":t.chunksFromP2P!==this.oldChunksFromP2P&&(this.tech_.featuresBitrate=t,this.player().trigger("chunksFromP2P"),this.oldChunksFromP2P=t.chunksFromP2P)}}}},{key:"onInitialized",value:function(e,t){t&&this.player().error(t)}}]),t}(y);v.prototype.options_={},v.prototype.oldBandwidth=0,v.prototype.oldChunksFromP2P=0,v.prototype.streamInfo=null,v.prototype.tech_=null,s["default"].options.children.afrostream={},y.registerComponent("Afrostream",v),n["default"]=v,t.exports=n["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./component/control-bar/text-track-controls/caption-track-button":1,"./core/player":4,"./tech/dash":5,"./tech/media":6}]},{},[8])(8)});