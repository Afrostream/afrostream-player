<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>castLabs DASH Everywhere Player Integration example</title>
  <link href="//vjs.zencdn.net/4.12.5/video-js.css" rel="stylesheet">
  <script src="//vjs.zencdn.net/4.12.5/video.js"></script>
  <style>
    .vjs-default-skin .vjs-audiotracks-button:before {
      content: "\e600"; /* cog icon */
    }

    .vjs-default-skin .vjs-texttracks-button:before {
      content: "\e00c"; /* subtitles icon */
    }
  </style>
  <script src="../lib/castlab/3.1.2/cldasheverywhere.min.js"></script>
</head>
<body>
<video id="vid" class="video-js vjs-default-skin vjs-big-play-centered" preload="auto" width="640px" height="480px">
</video>
<script>
  //Init player
  var config, player;
  var config = {
    "customData": {
      "userId": "224",
      "sessionId": "p0",
      "merchant": "afrostream"
    },
//    "customData": {
//      "userId": "rental1",
//      "sessionId": "p0",
//      "merchant": "six"
//    },
    "sendCustomData": true,
    "widevineHeader": {
      "provider": "castlabs",
      "contentId": "fkj3ljaSdfalkr3j",
      "trackType": "",
      "policy": ""
    },
    "assetId": "b829352c949f8bfc",
    "variantId": "",
    "debug": true,
    "ABRParameters": {
      "qualitySwitchThreshold": 2000,
      "bandwidthSafetyFactor": 1.75,
      "minBufferLength": 15,
      "maxBufferLength": 20,
      "liveDelay": 2,
      "disableBufferOccupancyRule": false
    },
    "authenticationToken": null,
    "widevineLicenseServerURL": "https://lic.staging.drmtoday.com/license-proxy-widevine/cenc/",
    "accessLicenseServerURL": "https://lic.staging.drmtoday.com/flashaccess/LicenseTrigger/v1",
    "playReadyLicenseServerURL": "https://lic.staging.drmtoday.com/license-proxy-headerauth/drmtoday/RightsManager.asmx",
    "silverlightFile": "./dashcs/dashcs.xap",
    "flashFile": './libs/dashas.swf',
    "techs": [/*'dashjs',*/ 'dashas', 'dashcs']
  };

  player = videojs('vid', {
    plugins: {
      audiotracks: {
        title: 'Languages'
      },
      texttracks: {
        title: 'Subtitles'
      }
    },
    sources: [
//      {
//        "src": "http://playready.directtaps.net/smoothstreaming/SSWSS720H264PR/SuperSpeedway_720.ism/Manifest",
//        "type": "application/dash+xml"
//      }
      {
        "src": "https://origin.cdn.afrostream.net/vod/big_buck_bunny_480p_surround-fix/b829352c949f8bfc.ism/b829352c949f8bfc.mpd",
        "type": "application/dash+xml"
      }
    ],
    autoplay: true,
    controls: true,
    dasheverywhere: config,
    techOrder: ['dasheverywhere']
  });

</script>
</body>
</html>
